/*! For license information please see main.6bb16fc5.js.LICENSE.txt */
!function(){var e={7228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},2858:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},9713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},5318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},862:function(e,t,n){var r=n(8).default;function a(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(i,s,u):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i},e.exports.__esModule=!0,e.exports.default=e.exports},3884:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},521:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},1109:function(e,t,n){var r=n(9713);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},6479:function(e,t,n){var r=n(7316);e.exports=function(e,t){if(null==e)return{};var n,a,i=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},7316:function(e){e.exports=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a},e.exports.__esModule=!0,e.exports.default=e.exports},3038:function(e,t,n){var r=n(2858),a=n(3884),i=n(379),o=n(521);e.exports=function(e,t){return r(e)||a(e,t)||i(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},8:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},379:function(e,t,n){var r=n(7228);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},6451:function(e,t,n){"use strict";function r(e,t){(function(e){return"string"===typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"===typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function a(e){return e<=1?"".concat(100*Number(e),"%"):e}function i(e){return 1===e.length?"0"+e:String(e)}function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function s(e){return u(e)/255}function u(e){return parseInt(e,16)}n.r(t),n.d(t,{blue:function(){return F},cyan:function(){return P},geekblue:function(){return D},generate:function(){return k},gold:function(){return N},green:function(){return O},grey:function(){return B},lime:function(){return R},magenta:function(){return z},orange:function(){return _},presetDarkPalettes:function(){return I},presetPalettes:function(){return C},presetPrimaryColors:function(){return S},purple:function(){return L},red:function(){return E},volcano:function(){return T},yellow:function(){return M}});var l={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function c(e){var t,n,i,c={r:0,g:0,b:0},d=1,h=null,p=null,g=null,v=!1,y=!1;return"string"===typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(l[e])e=l[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=f.rgb.exec(e);if(n)return{r:n[1],g:n[2],b:n[3]};if(n=f.rgba.exec(e))return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=f.hsl.exec(e))return{h:n[1],s:n[2],l:n[3]};if(n=f.hsla.exec(e))return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=f.hsv.exec(e))return{h:n[1],s:n[2],v:n[3]};if(n=f.hsva.exec(e))return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=f.hex8.exec(e))return{r:u(n[1]),g:u(n[2]),b:u(n[3]),a:s(n[4]),format:t?"name":"hex8"};if(n=f.hex6.exec(e))return{r:u(n[1]),g:u(n[2]),b:u(n[3]),format:t?"name":"hex"};if(n=f.hex4.exec(e))return{r:u(n[1]+n[1]),g:u(n[2]+n[2]),b:u(n[3]+n[3]),a:s(n[4]+n[4]),format:t?"name":"hex8"};if(n=f.hex3.exec(e))return{r:u(n[1]+n[1]),g:u(n[2]+n[2]),b:u(n[3]+n[3]),format:t?"name":"hex"};return!1}(e)),"object"===typeof e&&(m(e.r)&&m(e.g)&&m(e.b)?(t=e.r,n=e.g,i=e.b,c={r:255*r(t,255),g:255*r(n,255),b:255*r(i,255)},v=!0,y="%"===String(e.r).substr(-1)?"prgb":"rgb"):m(e.h)&&m(e.s)&&m(e.v)?(h=a(e.s),p=a(e.v),c=function(e,t,n){e=6*r(e,360),t=r(t,100),n=r(n,100);var a=Math.floor(e),i=e-a,o=n*(1-t),s=n*(1-i*t),u=n*(1-(1-i)*t),l=a%6;return{r:255*[n,s,o,o,u,n][l],g:255*[u,n,n,s,o,o][l],b:255*[o,o,u,n,n,s][l]}}(e.h,h,p),v=!0,y="hsv"):m(e.h)&&m(e.s)&&m(e.l)&&(h=a(e.s),g=a(e.l),c=function(e,t,n){var a,i,s;if(e=r(e,360),t=r(t,100),n=r(n,100),0===t)i=n,s=n,a=n;else{var u=n<.5?n*(1+t):n+t-n*t,l=2*n-u;a=o(l,u,e+1/3),i=o(l,u,e),s=o(l,u,e-1/3)}return{r:255*a,g:255*i,b:255*s}}(e.h,h,g),v=!0,y="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(d=e.a)),d=function(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}(d),{ok:v,format:e.format||y,r:Math.min(255,Math.max(c.r,0)),g:Math.min(255,Math.max(c.g,0)),b:Math.min(255,Math.max(c.b,0)),a:d}}var d="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),h="[\\s|\\(]+(".concat(d,")[,|\\s]+(").concat(d,")[,|\\s]+(").concat(d,")\\s*\\)?"),p="[\\s|\\(]+(".concat(d,")[,|\\s]+(").concat(d,")[,|\\s]+(").concat(d,")[,|\\s]+(").concat(d,")\\s*\\)?"),f={CSS_UNIT:new RegExp(d),rgb:new RegExp("rgb"+h),rgba:new RegExp("rgba"+p),hsl:new RegExp("hsl"+h),hsla:new RegExp("hsla"+p),hsv:new RegExp("hsv"+h),hsva:new RegExp("hsva"+p),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function m(e){return Boolean(f.CSS_UNIT.exec(String(e)))}var g=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function v(e){var t=function(e,t,n){e=r(e,255),t=r(t,255),n=r(n,255);var a=Math.max(e,t,n),i=Math.min(e,t,n),o=0,s=a,u=a-i,l=0===a?0:u/a;if(a===i)o=0;else{switch(a){case e:o=(t-n)/u+(t<n?6:0);break;case t:o=(n-e)/u+2;break;case n:o=(e-t)/u+4}o/=6}return{h:o,s:l,v:s}}(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function y(e){var t=e.r,n=e.g,r=e.b;return"#".concat(function(e,t,n,r){var a=[i(Math.round(e).toString(16)),i(Math.round(t).toString(16)),i(Math.round(n).toString(16))];return r&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}(t,n,r,!1))}function b(e,t,n){var r=n/100;return{r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b}}function x(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-2*t:Math.round(e.h)+2*t:n?Math.round(e.h)+2*t:Math.round(e.h)-2*t)<0?r+=360:r>=360&&(r-=360),r}function A(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-.16*t:4===t?e.s+.16:e.s+.05*t)>1&&(r=1),n&&5===t&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function w(e,t,n){var r;return(r=n?e.v+.05*t:e.v-.15*t)>1&&(r=1),Number(r.toFixed(2))}function k(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=c(e),a=5;a>0;a-=1){var i=v(r),o=y(c({h:x(i,a,!0),s:A(i,a,!0),v:w(i,a,!0)}));n.push(o)}n.push(y(r));for(var s=1;s<=4;s+=1){var u=v(r),l=y(c({h:x(u,s),s:A(u,s),v:w(u,s)}));n.push(l)}return"dark"===t.theme?g.map((function(e){var r=e.index,a=e.opacity;return y(b(c(t.backgroundColor||"#141414"),c(n[r]),100*a))})):n}var S={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},C={},I={};Object.keys(S).forEach((function(e){C[e]=k(S[e]),C[e].primary=C[e][5],I[e]=k(S[e],{theme:"dark",backgroundColor:"#141414"}),I[e].primary=I[e][5]}));var E=C.red,T=C.volcano,N=C.gold,_=C.orange,M=C.yellow,R=C.lime,O=C.green,P=C.cyan,F=C.blue,D=C.geekblue,L=C.purple,z=C.magenta,B=C.grey},8913:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM695.5 365.7l-210.6 292a31.8 31.8 0 01-51.7 0L308.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H689c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-square",theme:"filled"}},8729:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M354 671h58.9c4.7 0 9.2-2.1 12.3-5.7L512 561.8l86.8 103.5c3 3.6 7.5 5.7 12.3 5.7H670c6.8 0 10.5-7.9 6.1-13.1L553.8 512l122.4-145.9c4.4-5.2.7-13.1-6.1-13.1h-58.9c-4.7 0-9.2 2.1-12.3 5.7L512 462.2l-86.8-103.5c-3-3.6-7.5-5.7-12.3-5.7H354c-6.8 0-10.5 7.9-6.1 13.1L470.2 512 347.9 657.9A7.95 7.95 0 00354 671z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"close-square",theme:"outlined"}},6207:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1851))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},1527:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(349))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},7830:function(e,t,n){"use strict";var r=n(5318),a=n(862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1109)),o=r(n(3038)),s=r(n(9713)),u=r(n(6479)),l=a(n(7313)),c=r(n(6123)),d=r(n(4573)),h=r(n(9063)),p=n(1468),f=n(9018),m=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];(0,p.setTwoToneColor)("#1890ff");var g=l.forwardRef((function(e,t){var n,r=e.className,a=e.icon,p=e.spin,g=e.rotate,v=e.tabIndex,y=e.onClick,b=e.twoToneColor,x=(0,u.default)(e,m),A=l.useContext(d.default).prefixCls,w=void 0===A?"anticon":A,k=(0,c.default)(w,(n={},(0,s.default)(n,"".concat(w,"-").concat(a.name),!!a.name),(0,s.default)(n,"".concat(w,"-spin"),!!p||"loading"===a.name),n),r),S=v;void 0===S&&y&&(S=-1);var C=g?{msTransform:"rotate(".concat(g,"deg)"),transform:"rotate(".concat(g,"deg)")}:void 0,I=(0,f.normalizeTwoToneColors)(b),E=(0,o.default)(I,2),T=E[0],N=E[1];return l.createElement("span",(0,i.default)((0,i.default)({role:"img","aria-label":a.name},x),{},{ref:t,tabIndex:S,onClick:y,className:k}),l.createElement(h.default,{icon:a,primaryColor:T,secondaryColor:N,style:C}))}));g.displayName="AntdIcon",g.getTwoToneColor=p.getTwoToneColor,g.setTwoToneColor=p.setTwoToneColor;var v=g;t.default=v},4573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,n(7313).createContext)({});t.default=r},9063:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(6479)),i=r(n(1109)),o=n(9018),s=["icon","className","onClick","style","primaryColor","secondaryColor"],u={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var l=function(e){var t=e.icon,n=e.className,r=e.onClick,l=e.style,c=e.primaryColor,d=e.secondaryColor,h=(0,a.default)(e,s),p=u;if(c&&(p={primaryColor:c,secondaryColor:d||(0,o.getSecondaryColor)(c)}),(0,o.useInsertStyles)(),(0,o.warning)((0,o.isIconDefinition)(t),"icon should be icon definiton, but got ".concat(t)),!(0,o.isIconDefinition)(t))return null;var f=t;return f&&"function"===typeof f.icon&&(f=(0,i.default)((0,i.default)({},f),{},{icon:f.icon(p.primaryColor,p.secondaryColor)})),(0,o.generate)(f.icon,"svg-".concat(f.name),(0,i.default)({className:n,onClick:r,style:l,"data-icon":f.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},h))};l.displayName="IconReact",l.getTwoToneColors=function(){return(0,i.default)({},u)},l.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;u.primaryColor=t,u.secondaryColor=n||(0,o.getSecondaryColor)(t),u.calculated=!!n};var c=l;t.default=c},1468:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.setTwoToneColor=function(e){var t=(0,o.normalizeTwoToneColors)(e),n=(0,a.default)(t,2),r=n[0],s=n[1];return i.default.setTwoToneColors({primaryColor:r,secondaryColor:s})},t.getTwoToneColor=function(){var e=i.default.getTwoToneColors();if(!e.calculated)return e.primaryColor;return[e.primaryColor,e.secondaryColor]};var a=r(n(3038)),i=r(n(9063)),o=n(9018)},1851:function(e,t,n){"use strict";var r=n(862),a=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(1109)),o=r(n(7313)),s=a(n(8913)),u=a(n(7830)),l=function(e,t){return o.createElement(u.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:s.default}))};l.displayName="CheckSquareFilled";var c=o.forwardRef(l);t.default=c},349:function(e,t,n){"use strict";var r=n(862),a=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(1109)),o=r(n(7313)),s=a(n(8729)),u=a(n(7830)),l=function(e,t){return o.createElement(u.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:s.default}))};l.displayName="CloseSquareOutlined";var c=o.forwardRef(l);t.default=c},9018:function(e,t,n){"use strict";var r=n(862),a=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.warning=function(e,t){(0,l.default)(e,"[@ant-design/icons] ".concat(t))},t.isIconDefinition=function(e){return"object"===(0,o.default)(e)&&"string"===typeof e.name&&"string"===typeof e.theme&&("object"===(0,o.default)(e.icon)||"function"===typeof e.icon)},t.normalizeAttrs=h,t.generate=function e(t,n,r){if(!r)return u.default.createElement(t.tag,(0,i.default)({key:n},h(t.attrs)),(t.children||[]).map((function(r,a){return e(r,"".concat(n,"-").concat(t.tag,"-").concat(a))})));return u.default.createElement(t.tag,(0,i.default)((0,i.default)({key:n},h(t.attrs)),r),(t.children||[]).map((function(r,a){return e(r,"".concat(n,"-").concat(t.tag,"-").concat(a))})))},t.getSecondaryColor=function(e){return(0,s.generate)(e)[0]},t.normalizeTwoToneColors=function(e){if(!e)return[];return Array.isArray(e)?e:[e]},t.useInsertStyles=t.iconStyles=t.svgBaseProps=void 0;var i=a(n(1109)),o=a(n(8)),s=n(6451),u=r(n(7313)),l=a(n(4287)),c=n(5824),d=a(n(4573));function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];if("class"===n)t.className=r,delete t.class;else t[n]=r;return t}),{})}t.svgBaseProps={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"};var p="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n";t.iconStyles=p;t.useInsertStyles=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=(0,u.useContext)(d.default),n=t.csp;(0,u.useEffect)((function(){(0,c.updateCSS)(e,"@ant-design-icons",{prepend:!0,csp:n})}),[])}},4767:function(e){var t;t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./packages/mdc-dom/index.ts")}({"./packages/mdc-dom/events.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyPassive=function(e){return void 0===e&&(e=window),!!function(e){void 0===e&&(e=window);var t=!1;try{var n={get passive(){return t=!0,!1}},r=function(){};e.document.addEventListener("test",r,n),e.document.removeEventListener("test",r,n)}catch(a){t=!1}return t}(e)&&{passive:!0}}},"./packages/mdc-dom/focus-trap.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="mdc-dom-focus-sentinel",a=function(){function e(e,t){void 0===t&&(t={}),this.root=e,this.options=t,this.elFocusedBeforeTrapFocus=null}return e.prototype.trapFocus=function(){var e=this.getFocusableElements(this.root);if(0===e.length)throw new Error("FocusTrap: Element must have at least one focusable child.");this.elFocusedBeforeTrapFocus=document.activeElement instanceof HTMLElement?document.activeElement:null,this.wrapTabFocus(this.root,e),this.options.skipInitialFocus||this.focusInitialElement(e,this.options.initialFocusEl)},e.prototype.releaseFocus=function(){[].slice.call(this.root.querySelectorAll("."+r)).forEach((function(e){e.parentElement.removeChild(e)})),this.elFocusedBeforeTrapFocus&&this.elFocusedBeforeTrapFocus.focus()},e.prototype.wrapTabFocus=function(e,t){var n=this.createSentinel(),r=this.createSentinel();n.addEventListener("focus",(function(){t.length>0&&t[t.length-1].focus()})),r.addEventListener("focus",(function(){t.length>0&&t[0].focus()})),e.insertBefore(n,e.children[0]),e.appendChild(r)},e.prototype.focusInitialElement=function(e,t){var n=0;t&&(n=Math.max(e.indexOf(t),0)),e[n].focus()},e.prototype.getFocusableElements=function(e){return[].slice.call(e.querySelectorAll("[autofocus], [tabindex], a, input, textarea, select, button")).filter((function(e){var t="true"===e.getAttribute("aria-disabled")||null!=e.getAttribute("disabled")||null!=e.getAttribute("hidden")||"true"===e.getAttribute("aria-hidden"),n=e.tabIndex>=0&&e.getBoundingClientRect().width>0&&!e.classList.contains(r)&&!t,a=!1;if(n){var i=getComputedStyle(e);a="none"===i.display||"hidden"===i.visibility}return n&&!a}))},e.prototype.createSentinel=function(){var e=document.createElement("div");return e.setAttribute("tabindex","0"),e.setAttribute("aria-hidden","true"),e.classList.add(r),e},e}();t.FocusTrap=a},"./packages/mdc-dom/index.ts":function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n("./packages/mdc-dom/events.ts"));t.events=a;var i=r(n("./packages/mdc-dom/focus-trap.ts"));t.focusTrap=i;var o=r(n("./packages/mdc-dom/keyboard.ts"));t.keyboard=o;var s=r(n("./packages/mdc-dom/ponyfill.ts"));t.ponyfill=s},"./packages/mdc-dom/keyboard.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KEY={UNKNOWN:"Unknown",BACKSPACE:"Backspace",ENTER:"Enter",SPACEBAR:"Spacebar",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",DELETE:"Delete",ESCAPE:"Escape"};var r=new Set;r.add(t.KEY.BACKSPACE),r.add(t.KEY.ENTER),r.add(t.KEY.SPACEBAR),r.add(t.KEY.PAGE_UP),r.add(t.KEY.PAGE_DOWN),r.add(t.KEY.END),r.add(t.KEY.HOME),r.add(t.KEY.ARROW_LEFT),r.add(t.KEY.ARROW_UP),r.add(t.KEY.ARROW_RIGHT),r.add(t.KEY.ARROW_DOWN),r.add(t.KEY.DELETE),r.add(t.KEY.ESCAPE);var a=8,i=13,o=32,s=33,u=34,l=35,c=36,d=37,h=38,p=39,f=40,m=46,g=27,v=new Map;v.set(a,t.KEY.BACKSPACE),v.set(i,t.KEY.ENTER),v.set(o,t.KEY.SPACEBAR),v.set(s,t.KEY.PAGE_UP),v.set(u,t.KEY.PAGE_DOWN),v.set(l,t.KEY.END),v.set(c,t.KEY.HOME),v.set(d,t.KEY.ARROW_LEFT),v.set(h,t.KEY.ARROW_UP),v.set(p,t.KEY.ARROW_RIGHT),v.set(f,t.KEY.ARROW_DOWN),v.set(m,t.KEY.DELETE),v.set(g,t.KEY.ESCAPE);var y=new Set;function b(e){var n=e.key;if(r.has(n))return n;var a=v.get(e.keyCode);return a||t.KEY.UNKNOWN}y.add(t.KEY.PAGE_UP),y.add(t.KEY.PAGE_DOWN),y.add(t.KEY.END),y.add(t.KEY.HOME),y.add(t.KEY.ARROW_LEFT),y.add(t.KEY.ARROW_UP),y.add(t.KEY.ARROW_RIGHT),y.add(t.KEY.ARROW_DOWN),t.normalizeKey=b,t.isNavigationEvent=function(e){return y.has(b(e))}},"./packages/mdc-dom/ponyfill.ts":function(e,t,n){"use strict";function r(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.closest=function(e,t){if(e.closest)return e.closest(t);for(var n=e;n;){if(r(n,t))return n;n=n.parentElement}return null},t.matches=r,t.estimateScrollWidth=function(e){var t=e;if(null!==t.offsetParent)return t.scrollWidth;var n=t.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);var r=n.scrollWidth;return document.documentElement.removeChild(n),r}}})},e.exports=t()},4935:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(8385),n(9933),n(4912)},8249:function(e,t,n){"use strict";n(5602),n(4935),n(3438)},5033:function(e,t,n){"use strict";n(3165),n(4935),n(4912)},6577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(8567)},5146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2361)},5397:function(e,t,n){"use strict";n(1865)},3438:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(9933),n(4912),n(535)},9933:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(445)},8897:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(7476)},881:function(e,t,n){"use strict";n(2727)},1093:function(e,t,n){"use strict";n(7308),n(3047),n(9933),n(4912)},1405:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(865)},4912:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(5638)},7292:function(e,t,n){"use strict";n(9333),n(8479),n(7895)},8959:function(e,t,n){"use strict";n(3343),n(5146),n(4912)},2924:function(e,t,n){"use strict";n(9070),n(6577),n(1405),n(8897),n(4912),n(9933)},3147:function(e,t,n){"use strict";n(2153),n(234)},9111:function(e,t,n){"use strict";n(6804)},9619:function(e,t,n){"use strict";n(539),n(3438),n(4912),n(9933)},8697:function(e,t,n){"use strict";n(6737)},9056:function(e,t,n){var r=function(){var e="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||"/index.js",function(t){function r(){return O.buffer!=G&&Z(O.buffer),X}function a(){return O.buffer!=G&&Z(O.buffer),q}function i(){return O.buffer!=G&&Z(O.buffer),Y}function o(){return O.buffer!=G&&Z(O.buffer),K}var s,u,l,c="undefined"!==typeof(t=t||{})?t:{};c.ready=new Promise((function(e,t){s=e,u=t})),"undefined"!==typeof process&&process.listeners&&(l={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var d,h,p,f,m,g,v=Object.assign({},c),y=[],b=function(e,t){throw t},x="object"===typeof window,A="function"===typeof importScripts,w="object"===typeof process&&"object"===typeof process.versions&&"string"===typeof process.versions.node,k=c.ENVIRONMENT_IS_PTHREAD||!1,S="";function C(e){return c.locateFile?c.locateFile(e,S):S+e}if(w){var I;S=A?n(2980).dirname(S)+"/":"//",g=function(){m||(f=n(7256),m=n(2980))},d=function(e,t){return g(),e=m.normalize(e),f.readFileSync(e,t?void 0:"utf8")},p=function(e){var t=d(e,!0);return t.buffer||(t=new Uint8Array(t)),t},h=function(e,t,n){g(),e=m.normalize(e),f.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),y=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof lt))throw e})),process.on("unhandledRejection",(function(e){throw e})),b=function(e,t){if(re())throw process.exitCode=e,t;var n;(n=t)instanceof lt||_("exiting due to exception: "+n),process.exit(e)},c.inspect=function(){return"[Emscripten Module object]"};try{I=n(7958)}catch(ht){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),ht}n.g.Worker=I.Worker}else(x||A)&&(A?S=self.location.href:"undefined"!==typeof document&&document.currentScript&&(S=document.currentScript.src),"undefined"!==typeof e&&e&&(S=e),S=0!==S.indexOf("blob:")?S.substr(0,S.replace(/[?#].*/,"").lastIndexOf("/")+1):"",w||(d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},A&&(p=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),h=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}),function(e){return document.title=e});w&&"undefined"===typeof performance&&(n.g.performance=n(4862).performance);var E=console.log.bind(console),T=console.warn.bind(console);w&&(g(),E=function(e){return f.writeSync(1,e+"\n")},T=function(e){return f.writeSync(2,e+"\n")});var N=c.print||E,_=c.printErr||T;Object.assign(c,v),v=null,c.arguments&&(y=c.arguments),c.thisProgram&&c.thisProgram,c.quit&&(b=c.quit);function M(e){M.shown||(M.shown={}),M.shown[e]||(M.shown[e]=1,_(e))}var R;Atomics.load,Atomics.store,Atomics.compareExchange;c.wasmBinary&&(R=c.wasmBinary);var O,P,F=c.noExitRuntime||!0;"object"!==typeof WebAssembly&&ue("no native wasm support detected");var D,L=!1;function z(e){return c["_"+e]}function B(e,t,n,a,i){var o={string:function(e){var t=0;if(null!==e&&void 0!==e&&0!==e){var n=1+(e.length<<2);U(e,t=st(n),n)}return t},array:function(e){var t=st(e.length);return function(e,t){r().set(e,t)}(e,t),t}};var s=z(e),u=[],l=0;if(a)for(var c=0;c<a.length;c++){var d=o[n[c]];d?(0===l&&(l=it()),u[c]=d(a[c])):u[c]=a[c]}var h=s.apply(null,u);return h=function(e){return 0!==l&&ot(l),function(e){return"string"===t?H(e):"boolean"===t?Boolean(e):e}(e)}(h)}function W(e){var t=new TextDecoder(e);this.decode=function(e){return e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),t.decode.call(t,e)}}var j="undefined"!==typeof TextDecoder?new W("utf8"):void 0;function V(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&j)return j.decode(e.subarray(t,a));for(var i="";t<a;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var u=63&e[t++];if((o=224==(240&o)?(15&o)<<12|s<<6|u:(7&o)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(o);else{var l=o-65536;i+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else i+=String.fromCharCode((31&o)<<6|s)}else i+=String.fromCharCode(o)}return i}function H(e,t){return e?V(a(),e,t):""}function U(e,t,n){return function(e,t,n,r){if(!(r>0))return 0;for(var a=n,i=n+r-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-a}(e,a(),t,n)}var G,X,q,Y,K;"undefined"!==typeof TextDecoder&&new W("utf-16le");function Z(e){G=e,c.HEAP8=X=new Int8Array(e),c.HEAP16=new Int16Array(e),c.HEAP32=Y=new Int32Array(e),c.HEAPU8=q=new Uint8Array(e),c.HEAPU16=new Uint16Array(e),c.HEAPU32=new Uint32Array(e),c.HEAPF32=new Float32Array(e),c.HEAPF64=K=new Float64Array(e)}k&&(G=c.buffer);var J,Q=c.INITIAL_MEMORY||16777216;if(k)O=c.wasmMemory,G=c.buffer;else if(c.wasmMemory)O=c.wasmMemory;else if(!((O=new WebAssembly.Memory({initial:Q/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw _("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),w&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");O&&(G=O.buffer),Q=G.byteLength,Z(G);var $=[],ee=[],te=[],ne=[];function re(){return F||!1}function ae(){!0,k||fe(ee)}var ie=0,oe=null,se=null;function ue(e){k?postMessage({cmd:"onAbort",arg:e}):c.onAbort&&c.onAbort(e),_(e="Aborted("+e+")"),L=!0,D=1,e+=". Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw u(t),t}c.preloadedImages={},c.preloadedAudios={};var le;function ce(e){return e.startsWith("data:application/octet-stream;base64,")}function de(e){return e.startsWith("file://")}function he(e){try{if(e==le&&R)return new Uint8Array(R);if(p)return p(e);throw"both async and sync fetching of the wasm failed"}catch(_){ue(_)}}ce(le="tfjs-backend-wasm-threaded-simd.wasm")||(le=C(le));var pe={};function fe(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"===typeof n?void 0===t.arg?we(n)():we(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(c)}}function me(e){var t=it(),n=e();return ot(t),n}function ge(e){var t=ye.pthreads[e];if(t){i()[e>>2]=0;var n=t.worker;ye.returnWorkerToPool(n)}}function ve(e){!function(e,t){if(D=e,!t&&k)throw be(e),"unwind";re()||k||(ye.terminateAllThreads(),!0);!function(e){D=e,re()||(ye.terminateAllThreads(),c.onExit&&c.onExit(e),L=!0);b(e,new lt(e))}(e)}(e)}var ye={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],init:function(){k?ye.initWorker():ye.initMainThread()},initMainThread:function(){for(var e=0;e<8;++e)ye.allocateUnusedWorker()},initWorker:function(){F=!1},pthreads:{},setExitStatus:function(e){D=e},terminateAllThreads:function(){for(var e in ye.pthreads){var t=ye.pthreads[e];t&&t.worker&&ye.returnWorkerToPool(t.worker)}for(var n=0;n<ye.unusedWorkers.length;++n){ye.unusedWorkers[n].terminate()}ye.unusedWorkers=[]},returnWorkerToPool:function(e){ye.runWithoutMainThreadQueuedCalls((function(){delete ye.pthreads[e.pthread.threadInfoStruct],ye.unusedWorkers.push(e),ye.runningWorkers.splice(ye.runningWorkers.indexOf(e),1),rt(e.pthread.threadInfoStruct),e.pthread=void 0}))},runWithoutMainThreadQueuedCalls:function(e){i()[ut>>2]=0;try{e()}finally{i()[ut>>2]=1}},receiveObjectTransfer:function(e){},threadInit:function(){for(var e in ye.tlsInitFunctions)ye.tlsInitFunctions[e]()},loadWasmModuleToWorker:function(t,n){t.onmessage=function(e){var r,a=e.data,o=a.cmd;if(t.pthread&&(ye.currentProxiedOperationCallerThread=t.pthread.threadInfoStruct),a.targetThread&&a.targetThread!=Je()){var s=ye.pthreads[a.targetThread];return s?s.worker.postMessage(a,a.transferList):_('Internal error! Worker sent a message "'+o+'" to target pthread '+a.targetThread+", but that thread no longer exists!"),void(ye.currentProxiedOperationCallerThread=void 0)}"processQueuedMainThreadWork"===o?Qe():"spawnThread"===o?Se(a):"cleanupThread"===o?ge(a.thread):"killThread"===o?function(e){i()[e>>2]=0;var t=ye.pthreads[e];delete ye.pthreads[e],t.worker.terminate(),rt(e),ye.runningWorkers.splice(ye.runningWorkers.indexOf(t.worker),1),t.worker.pthread=void 0}(a.thread):"cancelThread"===o?(r=a.thread,ye.pthreads[r].worker.postMessage({cmd:"cancel"})):"loaded"===o?(t.loaded=!0,n&&n(t),t.runPthread&&(t.runPthread(),delete t.runPthread)):"print"===o?N("Thread "+a.threadId+": "+a.text):"printErr"===o?_("Thread "+a.threadId+": "+a.text):"alert"===o?alert("Thread "+a.threadId+": "+a.text):"setimmediate"===a.target?t.postMessage(a):"onAbort"===o?c.onAbort&&c.onAbort(a.arg):_("worker sent an unknown command "+o),ye.currentProxiedOperationCallerThread=void 0},t.onerror=function(e){throw _("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},w&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:c.mainScriptUrlOrBlob||e,wasmMemory:O,wasmModule:P})},allocateUnusedWorker:function(){var e=C("tfjs-backend-wasm-threaded-simd.worker.js");ye.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return 0==ye.unusedWorkers.length&&(ye.allocateUnusedWorker(),ye.loadWasmModuleToWorker(ye.unusedWorkers[0])),ye.unusedWorkers.pop()}};function be(e){if(k)return Ie(1,0,e);try{ve(e)}catch(ht){!function(e){if(e instanceof lt||"unwind"==e)return D;b(1,e)}(ht)}}c.establishStackSpace=function(){var e=Je(),t=i()[e+44>>2],n=i()[e+48>>2];at(t,t-n),ot(t)};var xe,Ae=[];function we(e){var t=Ae[e];return t||(e>=Ae.length&&(Ae.length=e+1),Ae[e]=t=J.get(e)),t}c.invokeEntryPoint=function(e,t){return we(e)(t)},xe=w?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:k?function(){return performance.now()-c.__performance_now_clock_drift}:function(){return performance.now()};function ke(e,t){var n,r;if(0===e)n=Date.now();else{if(1!==e&&4!==e)return r=28,i()[Ze()>>2]=r,-1;n=xe()}return i()[t>>2]=n/1e3|0,i()[t+4>>2]=n%1e3*1e3*1e3|0,0}function Se(e){var t=ye.getNewWorker();if(!t)return 6;ye.runningWorkers.push(t);var n=ye.pthreads[e.pthread_ptr]={worker:t,threadInfoStruct:e.pthread_ptr};t.pthread=n;var r={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr};return t.runPthread=function(){r.time=performance.now(),t.postMessage(r,e.transferList)},t.loaded&&(t.runPthread(),delete t.runPthread),0}function Ce(){return 2147483648}function Ie(e,t){var n=arguments.length-2,r=arguments;return me((function(){for(var a=n,i=st(8*a),s=i>>3,u=0;u<n;u++){var l=r[2+u];o()[s+u]=l}return tt(e,a,i,t)}))}var Ee=[];function Te(e){try{return O.grow(e-G.byteLength+65535>>>16),Z(O.buffer),1}catch(ht){}}var Ne={inEventHandler:0,removeAllEventListeners:function(){for(var e=Ne.eventHandlers.length-1;e>=0;--e)Ne._removeHandler(e);Ne.eventHandlers=[],Ne.deferredCalls=[]},registerRemoveEventListeners:function(){Ne.removeEventListenersRegistered||(te.push(Ne.removeAllEventListeners),Ne.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,n){function r(e,t){if(e.length!=t.length)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0}for(var a in Ne.deferredCalls){var i=Ne.deferredCalls[a];if(i.targetFunction==e&&r(i.argsList,n))return}Ne.deferredCalls.push({targetFunction:e,precedence:t,argsList:n}),Ne.deferredCalls.sort((function(e,t){return e.precedence<t.precedence}))},removeDeferredCalls:function(e){for(var t=0;t<Ne.deferredCalls.length;++t)Ne.deferredCalls[t].targetFunction==e&&(Ne.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return Ne.inEventHandler&&Ne.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(Ne.canPerformEventHandlerRequests())for(var e=0;e<Ne.deferredCalls.length;++e){var t=Ne.deferredCalls[e];Ne.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var n=0;n<Ne.eventHandlers.length;++n)Ne.eventHandlers[n].target!=e||t&&t!=Ne.eventHandlers[n].eventTypeString||Ne._removeHandler(n--)},_removeHandler:function(e){var t=Ne.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),Ne.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(t){++Ne.inEventHandler,Ne.currentEventHandler=e,Ne.runDeferredCalls(),e.handlerFunc(t),Ne.runDeferredCalls(),--Ne.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),Ne.eventHandlers.push(e),Ne.registerRemoveEventListeners();else for(var n=0;n<Ne.eventHandlers.length;++n)Ne.eventHandlers[n].target==e.target&&Ne.eventHandlers[n].eventTypeString==e.eventTypeString&&Ne._removeHandler(n--)},queueEventHandlerOnThread_iiii:function(e,t,n,r,a){me((function(){var o=st(12);i()[o>>2]=n,i()[o+4>>2]=r,i()[o+8>>2]=a,nt(e,637534208,t,r,o)}))},getTargetThreadForEventCallback:function(e){switch(e){case 1:return 0;case 2:return ye.currentProxiedOperationCallerThread;default:return e}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function _e(e,t,n,r){me((function(){var a=st(12),o=0;t&&(o=function(e){var t=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}(e)+1,n=Ye(t);return U(e,n,t),n}(t)),i()[a>>2]=o,i()[a+4>>2]=n,i()[a+8>>2]=r,nt(e,657457152,0,o,a)}))}var Me=[0,"undefined"!==typeof document?document:0,"undefined"!==typeof window?window:0];function Re(e){var t;return e=(t=e)>2?H(t):t,Me[e]||("undefined"!==typeof document?document.querySelector(e):void 0)}function Oe(e){return Re(e)}function Pe(e,t,n){var r=Oe(e);if(!r)return-4;if(r.canvasSharedPtr&&(i()[r.canvasSharedPtr>>2]=t,i()[r.canvasSharedPtr+4>>2]=n),!r.offscreenCanvas&&r.controlTransferredOffscreen)return r.canvasSharedPtr?(function(e,t,n,r){_e(e,t=t?H(t):"",n,r)}(i()[r.canvasSharedPtr+8>>2],e,t,n),1):-4;r.offscreenCanvas&&(r=r.offscreenCanvas);var a=!1;if(r.GLctxObject&&r.GLctxObject.GLctx){var o=r.GLctxObject.GLctx.getParameter(2978);a=0===o[0]&&0===o[1]&&o[2]===r.width&&o[3]===r.height}return r.width=t,r.height=n,a&&r.GLctxObject.GLctx.viewport(0,0,t,n),0}function Fe(e,t,n){return k?Ie(2,1,e,t,n):Pe(e,t,n)}var De={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},queries:[],stringCache:{},unpackAlignment:4,recordError:function(e){De.lastError||(De.lastError=e)},getNewId:function(e){for(var t=De.counter++,n=e.length;n<t;n++)e[n]=null;return t},getSource:function(e,t,n,r){for(var a="",o=0;o<t;++o){var s=r?i()[r+4*o>>2]:-1;a+=H(i()[n+4*o>>2],s<0?void 0:s)}return a},createContext:function(e,t){e.getContextSafariWebGL2Fixed||(e.getContextSafariWebGL2Fixed=e.getContext,e.getContext=function(t,n){var r=e.getContextSafariWebGL2Fixed(t,n);return"webgl"==t==r instanceof WebGLRenderingContext?r:null});var n=e.getContext("webgl",t);return n?De.registerContext(n,t):0},registerContext:function(e,t){var n=Ye(8);i()[n+4>>2]=Je();var r={handle:n,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=r),De.contexts[n]=r,("undefined"===typeof t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&De.initExtensions(r),n},makeContextCurrent:function(e){return De.currentContext=De.contexts[e],c.ctx=ze=De.currentContext&&De.currentContext.GLctx,!(e&&!ze)},getContext:function(e){return De.contexts[e]},deleteContext:function(e){De.currentContext===De.contexts[e]&&(De.currentContext=null),"object"===typeof Ne&&Ne.removeAllHandlersOnTarget(De.contexts[e].GLctx.canvas),De.contexts[e]&&De.contexts[e].GLctx.canvas&&(De.contexts[e].GLctx.canvas.GLctxObject=void 0),Ke(De.contexts[e].handle),De.contexts[e]=null},initExtensions:function(e){if(e||(e=De.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t,n=e.GLctx;!function(e){var t=e.getExtension("ANGLE_instanced_arrays");if(t)e.vertexAttribDivisor=function(e,n){t.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,r,a){t.drawArraysInstancedANGLE(e,n,r,a)},e.drawElementsInstanced=function(e,n,r,a,i){t.drawElementsInstancedANGLE(e,n,r,a,i)}}(n),function(e){var t=e.getExtension("OES_vertex_array_object");if(t)e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)}}(n),function(e){var t=e.getExtension("WEBGL_draw_buffers");if(t)e.drawBuffers=function(e,n){t.drawBuffersWEBGL(e,n)}}(n),n.disjointTimerQueryExt=n.getExtension("EXT_disjoint_timer_query"),(t=n).multiDrawWebgl=t.getExtension("WEBGL_multi_draw"),(n.getSupportedExtensions()||[]).forEach((function(e){e.includes("lose_context")||e.includes("debug")||n.getExtension(e)}))}}},Le=["default","low-power","high-performance"];var ze,Be={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=Be.buffers[e];0===t||10===t?((1===e?N:_)(V(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return Be.varargs+=4,i()[Be.varargs-4>>2]},getStr:function(e){return H(e)},get64:function(e,t){return e}};function We(e){return k?Ie(3,1,e):0}function je(e,t,n,r,a){if(k)return Ie(4,1,e,t,n,r,a)}function Ve(e,t,n,r){if(k)return Ie(5,1,e,t,n,r);for(var o=0,s=0;s<n;s++){var u=i()[t>>2],l=i()[t+4>>2];t+=8;for(var c=0;c<l;c++)Be.printChar(e,a()[u+c]);o+=l}return i()[r>>2]=o,0}ye.init();var He,Ue,Ge,Xe=[null,be,Fe,We,je,Ve],qe={__clock_gettime:function(e,t){return ke(e,t)},__emscripten_init_main_thread_js:function(e){$e(e,!A,1,!x),ye.threadInit()},__emscripten_thread_cleanup:function(e){k?postMessage({cmd:"cleanupThread",thread:e}):ge(e)},__pthread_create_js:function(e,t,n,r){if("undefined"===typeof SharedArrayBuffer)return _("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];if(k&&0===a.length)return et(687865856,e,t,n,r);var i={startRoutine:n,pthread_ptr:e,arg:r,transferList:a};return k?(i.cmd="spawnThread",postMessage(i,a),0):Se(i)},_emscripten_default_pthread_stack_size:function(){return 2097152},_emscripten_notify_thread_queue:function(e,t){if(e==t)postMessage({cmd:"processQueuedMainThreadWork"});else if(k)postMessage({targetThread:e,cmd:"processThreadQueue"});else{var n=ye.pthreads[e],r=n&&n.worker;if(!r)return;r.postMessage({cmd:"processThreadQueue"})}return 1},abort:function(){ue("")},emscripten_check_blocking_allowed:function(){w||A||M("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},emscripten_get_heap_max:Ce,emscripten_get_now:xe,emscripten_memcpy_big:function(e,t,n){a().copyWithin(e,t,t+n)},emscripten_num_logical_cores:function(){return w?n(2578).cpus().length:navigator.hardwareConcurrency},emscripten_receive_on_main_thread_js:function(e,t,n){Ee.length=t;for(var r=n>>3,a=0;a<t;a++)Ee[a]=o()[r+a];return(e<0?pe[-e-1]:Xe[e]).apply(null,Ee)},emscripten_resize_heap:function(e){var t=a().length;if((e>>>=0)<=t)return!1;var n,r,i=2147483648;if(e>i)return!1;for(var o=1;o<=4;o*=2){var s=t*(1+.2/o);if(s=Math.min(s,e+100663296),Te(Math.min(i,((n=Math.max(e,s))%(r=65536)>0&&(n+=r-n%r),n))))return!0}return!1},emscripten_set_canvas_element_size:function(e,t,n){return Oe(e)?Pe(e,t,n):Fe(e,t,n)},emscripten_unwind_to_js_event_loop:function(){throw"unwind"},emscripten_webgl_create_context:function(e,t){return function(e,t){var n=t>>2,r=i()[n+6],a={alpha:!!i()[n+0],depth:!!i()[n+1],stencil:!!i()[n+2],antialias:!!i()[n+3],premultipliedAlpha:!!i()[n+4],preserveDrawingBuffer:!!i()[n+5],powerPreference:Le[r],failIfMajorPerformanceCaveat:!!i()[n+7],majorVersion:i()[n+8],minorVersion:i()[n+9],enableExtensionsByDefault:i()[n+10],explicitSwapControl:i()[n+11],proxyContextToMainThread:i()[n+12],renderViaOffscreenBackBuffer:i()[n+13]},o=Oe(e);return o?a.explicitSwapControl?0:De.createContext(o,a):0}(e,t)},exit:ve,fd_close:We,fd_seek:je,fd_write:Ve,memory:O||c.wasmMemory,setTempRet0:function(e){e}},Ye=(function(){var e={env:qe,wasi_snapshot_preview1:qe};function t(e,t){var n,r,a=e.exports;if(c.asm=a,n=c.asm.emscripten_tls_init,ye.tlsInitFunctions.push(n),J=c.asm.__indirect_function_table,r=c.asm.__wasm_call_ctors,ee.unshift(r),P=t,!k){var i=ye.unusedWorkers.length;ye.unusedWorkers.forEach((function(e){ye.loadWasmModuleToWorker(e,(function(){--i||function(e){if(ie--,c.monitorRunDependencies&&c.monitorRunDependencies(ie),0==ie&&(null!==oe&&(clearInterval(oe),oe=null),se)){var t=se;se=null,t()}}()}))}))}}function n(e){t(e.instance,e.module)}function r(t){return function(){if(!R&&(x||A)){if("function"===typeof fetch&&!de(le))return fetch(le,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+le+"'";return e.arrayBuffer()})).catch((function(){return he(le)}));if(h)return new Promise((function(e,t){h(le,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return he(le)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){_("failed to asynchronously prepare wasm: "+e),ue(e)}))}if(k||(ie++,c.monitorRunDependencies&&c.monitorRunDependencies(ie)),c.instantiateWasm)try{return c.instantiateWasm(e,t)}catch(ht){return _("Module.instantiateWasm callback failed with error: "+ht),!1}(R||"function"!==typeof WebAssembly.instantiateStreaming||ce(le)||de(le)||"function"!==typeof fetch?r(n):fetch(le,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return _("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(u)}(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.__wasm_call_ctors).apply(null,arguments)},c._init=function(){return(c._init=c.asm.init).apply(null,arguments)},c._init_with_threads_count=function(){return(c._init_with_threads_count=c.asm.init_with_threads_count).apply(null,arguments)},c._get_threads_count=function(){return(c._get_threads_count=c.asm.get_threads_count).apply(null,arguments)},c._register_tensor=function(){return(c._register_tensor=c.asm.register_tensor).apply(null,arguments)},c._dispose_data=function(){return(c._dispose_data=c.asm.dispose_data).apply(null,arguments)},c._dispose=function(){return(c._dispose=c.asm.dispose).apply(null,arguments)},c._Abs=function(){return(c._Abs=c.asm.Abs).apply(null,arguments)},c._Add=function(){return(c._Add=c.asm.Add).apply(null,arguments)},c._AddN=function(){return(c._AddN=c.asm.AddN).apply(null,arguments)},c._All=function(){return(c._All=c.asm.All).apply(null,arguments)},c._Any=function(){return(c._Any=c.asm.Any).apply(null,arguments)},c._ArgMax=function(){return(c._ArgMax=c.asm.ArgMax).apply(null,arguments)},c._AvgPool=function(){return(c._AvgPool=c.asm.AvgPool).apply(null,arguments)},c._BatchMatMul=function(){return(c._BatchMatMul=c.asm.BatchMatMul).apply(null,arguments)},c._Ceil=function(){return(c._Ceil=c.asm.Ceil).apply(null,arguments)},c._ClipByValue=function(){return(c._ClipByValue=c.asm.ClipByValue).apply(null,arguments)},c._Conv2D=function(){return(c._Conv2D=c.asm.Conv2D).apply(null,arguments)},c._Conv2DBackpropInput=function(){return(c._Conv2DBackpropInput=c.asm.Conv2DBackpropInput).apply(null,arguments)},c._Cos=function(){return(c._Cos=c.asm.Cos).apply(null,arguments)},c._Cosh=function(){return(c._Cosh=c.asm.Cosh).apply(null,arguments)},c._CropAndResize=function(){return(c._CropAndResize=c.asm.CropAndResize).apply(null,arguments)},c._Cumprod=function(){return(c._Cumprod=c.asm.Cumprod).apply(null,arguments)},c._Cumsum=function(){return(c._Cumsum=c.asm.Cumsum).apply(null,arguments)},c._DepthToSpace=function(){return(c._DepthToSpace=c.asm.DepthToSpace).apply(null,arguments)},c._DepthwiseConv2dNative=function(){return(c._DepthwiseConv2dNative=c.asm.DepthwiseConv2dNative).apply(null,arguments)},c._Elu=function(){return(c._Elu=c.asm.Elu).apply(null,arguments)},c._Equal=function(){return(c._Equal=c.asm.Equal).apply(null,arguments)},c._Exp=function(){return(c._Exp=c.asm.Exp).apply(null,arguments)},c._FlipLeftRight=function(){return(c._FlipLeftRight=c.asm.FlipLeftRight).apply(null,arguments)},c._Floor=function(){return(c._Floor=c.asm.Floor).apply(null,arguments)},c._FloorDiv=function(){return(c._FloorDiv=c.asm.FloorDiv).apply(null,arguments)},c._FusedBatchNorm=function(){return(c._FusedBatchNorm=c.asm.FusedBatchNorm).apply(null,arguments)},c._FusedConv2D=function(){return(c._FusedConv2D=c.asm.FusedConv2D).apply(null,arguments)},c._FusedDepthwiseConv2D=function(){return(c._FusedDepthwiseConv2D=c.asm.FusedDepthwiseConv2D).apply(null,arguments)},c._Gather=function(){return(c._Gather=c.asm.Gather).apply(null,arguments)},c._GatherNd=function(){return(c._GatherNd=c.asm.GatherNd).apply(null,arguments)},c._Greater=function(){return(c._Greater=c.asm.Greater).apply(null,arguments)},c._GreaterEqual=function(){return(c._GreaterEqual=c.asm.GreaterEqual).apply(null,arguments)},c._LeakyRelu=function(){return(c._LeakyRelu=c.asm.LeakyRelu).apply(null,arguments)},c._Less=function(){return(c._Less=c.asm.Less).apply(null,arguments)},c._LessEqual=function(){return(c._LessEqual=c.asm.LessEqual).apply(null,arguments)},c._Log=function(){return(c._Log=c.asm.Log).apply(null,arguments)},c._LogicalAnd=function(){return(c._LogicalAnd=c.asm.LogicalAnd).apply(null,arguments)},c._Max=function(){return(c._Max=c.asm.Max).apply(null,arguments)},c._MaxPool=function(){return(c._MaxPool=c.asm.MaxPool).apply(null,arguments)},c._Maximum=function(){return(c._Maximum=c.asm.Maximum).apply(null,arguments)},c._Mean=function(){return(c._Mean=c.asm.Mean).apply(null,arguments)},c._Min=function(){return(c._Min=c.asm.Min).apply(null,arguments)},c._Minimum=function(){return(c._Minimum=c.asm.Minimum).apply(null,arguments)},c._MirrorPad=function(){return(c._MirrorPad=c.asm.MirrorPad).apply(null,arguments)},c._Multiply=function(){return(c._Multiply=c.asm.Multiply).apply(null,arguments)},c._Neg=function(){return(c._Neg=c.asm.Neg).apply(null,arguments)},c._NonMaxSuppressionV3=function(){return(c._NonMaxSuppressionV3=c.asm.NonMaxSuppressionV3).apply(null,arguments)},c._NonMaxSuppressionV4=function(){return(c._NonMaxSuppressionV4=c.asm.NonMaxSuppressionV4).apply(null,arguments)},c._NonMaxSuppressionV5=function(){return(c._NonMaxSuppressionV5=c.asm.NonMaxSuppressionV5).apply(null,arguments)},c._NotEqual=function(){return(c._NotEqual=c.asm.NotEqual).apply(null,arguments)},c._OneHot=function(){return(c._OneHot=c.asm.OneHot).apply(null,arguments)},c._PadV2=function(){return(c._PadV2=c.asm.PadV2).apply(null,arguments)},c._Pow=function(){return(c._Pow=c.asm.Pow).apply(null,arguments)},c._Prelu=function(){return(c._Prelu=c.asm.Prelu).apply(null,arguments)},c._Prod=function(){return(c._Prod=c.asm.Prod).apply(null,arguments)},c._RealDiv=function(){return(c._RealDiv=c.asm.RealDiv).apply(null,arguments)},c._Relu=function(){return(c._Relu=c.asm.Relu).apply(null,arguments)},c._Relu6=function(){return(c._Relu6=c.asm.Relu6).apply(null,arguments)},c._ResizeBilinear=function(){return(c._ResizeBilinear=c.asm.ResizeBilinear).apply(null,arguments)},c._Reverse=function(){return(c._Reverse=c.asm.Reverse).apply(null,arguments)},c._RotateWithOffset=function(){return(c._RotateWithOffset=c.asm.RotateWithOffset).apply(null,arguments)},c._Round=function(){return(c._Round=c.asm.Round).apply(null,arguments)},c._Rsqrt=function(){return(c._Rsqrt=c.asm.Rsqrt).apply(null,arguments)},c._ScatterNd=function(){return(c._ScatterNd=c.asm.ScatterNd).apply(null,arguments)},c._SelectV2=function(){return(c._SelectV2=c.asm.SelectV2).apply(null,arguments)},c._Sigmoid=function(){return(c._Sigmoid=c.asm.Sigmoid).apply(null,arguments)},c._Sin=function(){return(c._Sin=c.asm.Sin).apply(null,arguments)},c._Softmax=function(){return(c._Softmax=c.asm.Softmax).apply(null,arguments)},c._SparseFillEmptyRows=function(){return(c._SparseFillEmptyRows=c.asm.SparseFillEmptyRows).apply(null,arguments)},c._SparseReshape=function(){return(c._SparseReshape=c.asm.SparseReshape).apply(null,arguments)},c._SparseSegmentReduction=function(){return(c._SparseSegmentReduction=c.asm.SparseSegmentReduction).apply(null,arguments)},c._Sqrt=function(){return(c._Sqrt=c.asm.Sqrt).apply(null,arguments)},c._Square=function(){return(c._Square=c.asm.Square).apply(null,arguments)},c._SquaredDifference=function(){return(c._SquaredDifference=c.asm.SquaredDifference).apply(null,arguments)},c._Step=function(){return(c._Step=c.asm.Step).apply(null,arguments)},c._StridedSlice=function(){return(c._StridedSlice=c.asm.StridedSlice).apply(null,arguments)},c._Sub=function(){return(c._Sub=c.asm.Sub).apply(null,arguments)},c._Sum=function(){return(c._Sum=c.asm.Sum).apply(null,arguments)},c._Tan=function(){return(c._Tan=c.asm.Tan).apply(null,arguments)},c._Tanh=function(){return(c._Tanh=c.asm.Tanh).apply(null,arguments)},c._Tile=function(){return(c._Tile=c.asm.Tile).apply(null,arguments)},c._TopK=function(){return(c._TopK=c.asm.TopK).apply(null,arguments)},c._Transform=function(){return(c._Transform=c.asm.Transform).apply(null,arguments)},c._Transpose=function(){return(c._Transpose=c.asm.Transpose).apply(null,arguments)},c.__FusedMatMul=function(){return(c.__FusedMatMul=c.asm._FusedMatMul).apply(null,arguments)},c._malloc=function(){return(Ye=c._malloc=c.asm.malloc).apply(null,arguments)}),Ke=c._free=function(){return(Ke=c._free=c.asm.free).apply(null,arguments)},Ze=(c._emscripten_tls_init=function(){return(c._emscripten_tls_init=c.asm.emscripten_tls_init).apply(null,arguments)},c.___errno_location=function(){return(Ze=c.___errno_location=c.asm.__errno_location).apply(null,arguments)}),Je=c._pthread_self=function(){return(Je=c._pthread_self=c.asm.pthread_self).apply(null,arguments)},Qe=c._emscripten_main_thread_process_queued_calls=function(){return(Qe=c._emscripten_main_thread_process_queued_calls=c.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},$e=(c.__emscripten_thread_crashed=function(){return(c.__emscripten_thread_crashed=c.asm._emscripten_thread_crashed).apply(null,arguments)},c.__emscripten_thread_init=function(){return($e=c.__emscripten_thread_init=c.asm._emscripten_thread_init).apply(null,arguments)}),et=(c._emscripten_current_thread_process_queued_calls=function(){return(c._emscripten_current_thread_process_queued_calls=c.asm.emscripten_current_thread_process_queued_calls).apply(null,arguments)},c._emscripten_main_browser_thread_id=function(){return(c._emscripten_main_browser_thread_id=c.asm.emscripten_main_browser_thread_id).apply(null,arguments)},c._emscripten_sync_run_in_main_thread_2=function(){return(c._emscripten_sync_run_in_main_thread_2=c.asm.emscripten_sync_run_in_main_thread_2).apply(null,arguments)},c._emscripten_sync_run_in_main_thread_4=function(){return(et=c._emscripten_sync_run_in_main_thread_4=c.asm.emscripten_sync_run_in_main_thread_4).apply(null,arguments)}),tt=c._emscripten_run_in_main_runtime_thread_js=function(){return(tt=c._emscripten_run_in_main_runtime_thread_js=c.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)},nt=c._emscripten_dispatch_to_thread_=function(){return(nt=c._emscripten_dispatch_to_thread_=c.asm.emscripten_dispatch_to_thread_).apply(null,arguments)},rt=c.__emscripten_thread_free_data=function(){return(rt=c.__emscripten_thread_free_data=c.asm._emscripten_thread_free_data).apply(null,arguments)},at=(c.__emscripten_thread_exit=function(){return(c.__emscripten_thread_exit=c.asm._emscripten_thread_exit).apply(null,arguments)},c._memalign=function(){return(c._memalign=c.asm.memalign).apply(null,arguments)},c._emscripten_stack_set_limits=function(){return(at=c._emscripten_stack_set_limits=c.asm.emscripten_stack_set_limits).apply(null,arguments)}),it=c.stackSave=function(){return(it=c.stackSave=c.asm.stackSave).apply(null,arguments)},ot=c.stackRestore=function(){return(ot=c.stackRestore=c.asm.stackRestore).apply(null,arguments)},st=c.stackAlloc=function(){return(st=c.stackAlloc=c.asm.stackAlloc).apply(null,arguments)},ut=(c.dynCall_iijjiiii=function(){return(c.dynCall_iijjiiii=c.asm.dynCall_iijjiiii).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.dynCall_jiji).apply(null,arguments)},c.__emscripten_allow_main_runtime_queued_calls=21464);function lt(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ct(e){if(e=e||y,!(ie>0)){if(k)return s(c),ae(),void postMessage({cmd:"loaded"});!function(){if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)e=c.preRun.shift(),$.unshift(e);var e;fe($)}(),ie>0||(c.setStatus?(c.setStatus("Running..."),setTimeout((function(){setTimeout((function(){c.setStatus("")}),1),t()}),1)):t())}function t(){He||(He=!0,c.calledRun=!0,L||(ae(),s(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),function(){if(!k){if(c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;)e=c.postRun.shift(),ne.unshift(e);var e;fe(ne)}}()))}}if(c.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?z(e):function(){return B(e,t,n,arguments)}},c.keepRuntimeAlive=re,c.PThread=ye,c.PThread=ye,c.wasmMemory=O,c.ExitStatus=lt,se=function e(){He||ct(),He||(se=e)},c.run=ct,c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();if(ct(),l&&(Ue={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!l.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!l.unhandledRejection.indexOf(e)>-1}))}),"undefined"!==typeof WasmBackendModule)Ge=WasmBackendModule;else{if("undefined"===typeof t)throw new Error("Could not find wasm module in post.js");Ge=t}if(Ue){var dt=Ge._dispose;Ge._dispose=function(){dt(),Ue.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),Ue.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return t.ready}}();e.exports=r},136:function(e,t,n){var r=function(){var e="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||"/index.js",function(t){var r,a,i,o="undefined"!==typeof(t=t||{})?t:{};o.ready=new Promise((function(e,t){r=e,a=t})),"undefined"!==typeof process&&process.listeners&&(i={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var s,u,l,c,d,h,p=Object.assign({},o),f=[],m="object"===typeof window,g="function"===typeof importScripts,v="object"===typeof process&&"object"===typeof process.versions&&"string"===typeof process.versions.node,y="";v?(y=g?n(2980).dirname(y)+"/":"//",h=function(){d||(c=n(7256),d=n(2980))},s=function(e,t){return h(),e=d.normalize(e),c.readFileSync(e,t?void 0:"utf8")},l=function(e){var t=s(e,!0);return t.buffer||(t=new Uint8Array(t)),t},u=function(e,t,n){h(),e=d.normalize(e),c.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),f=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ue))throw e})),process.on("unhandledRejection",(function(e){throw e})),function(e,t){if(B())throw process.exitCode=e,t;var n;(n=t)instanceof ue||x("exiting due to exception: "+n),process.exit(e)},o.inspect=function(){return"[Emscripten Module object]"}):(m||g)&&(g?y=self.location.href:"undefined"!==typeof document&&document.currentScript&&(y=document.currentScript.src),e&&(y=e),y=0!==y.indexOf("blob:")?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",s=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},g&&(l=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),u=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var b=o.print||console.log.bind(console),x=o.printErr||console.warn.bind(console);Object.assign(o,p),p=null,o.arguments&&(f=o.arguments),o.thisProgram&&o.thisProgram,o.quit&&o.quit;var A;o.wasmBinary&&(A=o.wasmBinary);var w,k=o.noExitRuntime||!0;"object"!==typeof WebAssembly&&H("no native wasm support detected");var S=!1;function C(e){return o["_"+e]}function I(e,t,n,r,a){var i={string:function(e){var t=0;if(null!==e&&void 0!==e&&0!==e){var n=1+(e.length<<2);(function(e,t,n){(function(e,t,n,r){if(!(r>0))return 0;for(var a=n,i=n+r-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o);if(s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}t[n]=0})(e,R,t,n)})(e,t=se(n),n)}return t},array:function(e){var t=se(e.length);return function(e,t){M.set(e,t)}(e,t),t}};var o=C(e),s=[],u=0;if(r)for(var l=0;l<r.length;l++){var c=i[n[l]];c?(0===u&&(u=ie()),s[l]=c(r[l])):s[l]=r[l]}var d=o.apply(null,s);return d=function(e){return 0!==u&&oe(u),function(e){return"string"===t?N(e):"boolean"===t?Boolean(e):e}(e)}(d)}var E="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function T(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&E)return E.decode(e.subarray(t,a));for(var i="";t<a;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var u=63&e[t++];if((o=224==(240&o)?(15&o)<<12|s<<6|u:(7&o)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(o);else{var l=o-65536;i+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else i+=String.fromCharCode((31&o)<<6|s)}else i+=String.fromCharCode(o)}return i}function N(e,t){return e?T(R,e,t):""}var _,M,R,O;"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");function P(e){_=e,o.HEAP8=M=new Int8Array(e),o.HEAP16=new Int16Array(e),o.HEAP32=O=new Int32Array(e),o.HEAPU8=R=new Uint8Array(e),o.HEAPU16=new Uint16Array(e),o.HEAPU32=new Uint32Array(e),o.HEAPF32=new Float32Array(e),o.HEAPF64=new Float64Array(e)}o.INITIAL_MEMORY;var F,D=[],L=[],z=[];function B(){return k||!1}var W=0,j=null,V=null;function H(e){o.onAbort&&o.onAbort(e),x(e="Aborted("+e+")"),S=!0,1,e+=". Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw a(t),t}o.preloadedImages={},o.preloadedAudios={};var U,G;function X(e){return e.startsWith("data:application/octet-stream;base64,")}function q(e){return e.startsWith("file://")}function Y(e){try{if(e==U&&A)return new Uint8Array(A);if(l)return l(e);throw"both async and sync fetching of the wasm failed"}catch(x){H(x)}}function K(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"===typeof n?void 0===t.arg?J(n)():J(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(o)}}X(U="tfjs-backend-wasm.wasm")||(G=U,U=o.locateFile?o.locateFile(G,y):y+G);var Z=[];function J(e){var t=Z[e];return t||(e>=Z.length&&(Z.length=e+1),Z[e]=t=F.get(e)),t}function Q(){return 2147483648}function $(e){try{return w.grow(e-_.byteLength+65535>>>16),P(w.buffer),1}catch(t){}}var ee={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=ee.buffers[e];0===t||10===t?((1===e?b:x)(T(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return ee.varargs+=4,O[ee.varargs-4>>2]},getStr:function(e){return N(e)},get64:function(e,t){return e}};var te,ne,re,ae={abort:function(){H("")},emscripten_get_heap_max:Q,emscripten_memcpy_big:function(e,t,n){R.copyWithin(e,t,t+n)},emscripten_resize_heap:function(e){var t,n,r=R.length,a=2147483648;if((e>>>=0)>a)return!1;for(var i=1;i<=4;i*=2){var o=r*(1+.2/i);if(o=Math.min(o,e+100663296),$(Math.min(a,((t=Math.max(e,o))%(n=65536)>0&&(t+=n-t%n),t))))return!0}return!1},fd_close:function(e){return 0},fd_seek:function(e,t,n,r,a){},fd_write:function(e,t,n,r){for(var a=0,i=0;i<n;i++){var o=O[t>>2],s=O[t+4>>2];t+=8;for(var u=0;u<s;u++)ee.printChar(e,R[o+u]);a+=s}return O[r>>2]=a,0},setTempRet0:function(e){e}},ie=(function(){var e={env:ae,wasi_snapshot_preview1:ae};function t(e,t){var n,r=e.exports;o.asm=r,P((w=o.asm.memory).buffer),F=o.asm.__indirect_function_table,n=o.asm.__wasm_call_ctors,L.unshift(n),function(e){if(W--,o.monitorRunDependencies&&o.monitorRunDependencies(W),0==W&&(null!==j&&(clearInterval(j),j=null),V)){var t=V;V=null,t()}}()}function n(e){t(e.instance)}function r(t){return function(){if(!A&&(m||g)){if("function"===typeof fetch&&!q(U))return fetch(U,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+U+"'";return e.arrayBuffer()})).catch((function(){return Y(U)}));if(u)return new Promise((function(e,t){u(U,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return Y(U)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){x("failed to asynchronously prepare wasm: "+e),H(e)}))}if(W++,o.monitorRunDependencies&&o.monitorRunDependencies(W),o.instantiateWasm)try{return o.instantiateWasm(e,t)}catch(i){return x("Module.instantiateWasm callback failed with error: "+i),!1}(A||"function"!==typeof WebAssembly.instantiateStreaming||X(U)||q(U)||"function"!==typeof fetch?r(n):fetch(U,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return x("wasm streaming compile failed: "+e),x("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),o.___wasm_call_ctors=function(){return(o.___wasm_call_ctors=o.asm.__wasm_call_ctors).apply(null,arguments)},o._init=function(){return(o._init=o.asm.init).apply(null,arguments)},o._init_with_threads_count=function(){return(o._init_with_threads_count=o.asm.init_with_threads_count).apply(null,arguments)},o._get_threads_count=function(){return(o._get_threads_count=o.asm.get_threads_count).apply(null,arguments)},o._register_tensor=function(){return(o._register_tensor=o.asm.register_tensor).apply(null,arguments)},o._dispose_data=function(){return(o._dispose_data=o.asm.dispose_data).apply(null,arguments)},o._dispose=function(){return(o._dispose=o.asm.dispose).apply(null,arguments)},o._Abs=function(){return(o._Abs=o.asm.Abs).apply(null,arguments)},o._Add=function(){return(o._Add=o.asm.Add).apply(null,arguments)},o._AddN=function(){return(o._AddN=o.asm.AddN).apply(null,arguments)},o._All=function(){return(o._All=o.asm.All).apply(null,arguments)},o._Any=function(){return(o._Any=o.asm.Any).apply(null,arguments)},o._ArgMax=function(){return(o._ArgMax=o.asm.ArgMax).apply(null,arguments)},o._AvgPool=function(){return(o._AvgPool=o.asm.AvgPool).apply(null,arguments)},o._BatchMatMul=function(){return(o._BatchMatMul=o.asm.BatchMatMul).apply(null,arguments)},o._Ceil=function(){return(o._Ceil=o.asm.Ceil).apply(null,arguments)},o._ClipByValue=function(){return(o._ClipByValue=o.asm.ClipByValue).apply(null,arguments)},o._Conv2D=function(){return(o._Conv2D=o.asm.Conv2D).apply(null,arguments)},o._Conv2DBackpropInput=function(){return(o._Conv2DBackpropInput=o.asm.Conv2DBackpropInput).apply(null,arguments)},o._Cos=function(){return(o._Cos=o.asm.Cos).apply(null,arguments)},o._Cosh=function(){return(o._Cosh=o.asm.Cosh).apply(null,arguments)},o._CropAndResize=function(){return(o._CropAndResize=o.asm.CropAndResize).apply(null,arguments)},o._Cumprod=function(){return(o._Cumprod=o.asm.Cumprod).apply(null,arguments)},o._Cumsum=function(){return(o._Cumsum=o.asm.Cumsum).apply(null,arguments)},o._DepthToSpace=function(){return(o._DepthToSpace=o.asm.DepthToSpace).apply(null,arguments)},o._DepthwiseConv2dNative=function(){return(o._DepthwiseConv2dNative=o.asm.DepthwiseConv2dNative).apply(null,arguments)},o._Elu=function(){return(o._Elu=o.asm.Elu).apply(null,arguments)},o._Equal=function(){return(o._Equal=o.asm.Equal).apply(null,arguments)},o._Exp=function(){return(o._Exp=o.asm.Exp).apply(null,arguments)},o._FlipLeftRight=function(){return(o._FlipLeftRight=o.asm.FlipLeftRight).apply(null,arguments)},o._Floor=function(){return(o._Floor=o.asm.Floor).apply(null,arguments)},o._FloorDiv=function(){return(o._FloorDiv=o.asm.FloorDiv).apply(null,arguments)},o._FusedBatchNorm=function(){return(o._FusedBatchNorm=o.asm.FusedBatchNorm).apply(null,arguments)},o._FusedConv2D=function(){return(o._FusedConv2D=o.asm.FusedConv2D).apply(null,arguments)},o._FusedDepthwiseConv2D=function(){return(o._FusedDepthwiseConv2D=o.asm.FusedDepthwiseConv2D).apply(null,arguments)},o._Gather=function(){return(o._Gather=o.asm.Gather).apply(null,arguments)},o._GatherNd=function(){return(o._GatherNd=o.asm.GatherNd).apply(null,arguments)},o._Greater=function(){return(o._Greater=o.asm.Greater).apply(null,arguments)},o._GreaterEqual=function(){return(o._GreaterEqual=o.asm.GreaterEqual).apply(null,arguments)},o._LeakyRelu=function(){return(o._LeakyRelu=o.asm.LeakyRelu).apply(null,arguments)},o._Less=function(){return(o._Less=o.asm.Less).apply(null,arguments)},o._LessEqual=function(){return(o._LessEqual=o.asm.LessEqual).apply(null,arguments)},o._Log=function(){return(o._Log=o.asm.Log).apply(null,arguments)},o._LogicalAnd=function(){return(o._LogicalAnd=o.asm.LogicalAnd).apply(null,arguments)},o._Max=function(){return(o._Max=o.asm.Max).apply(null,arguments)},o._MaxPool=function(){return(o._MaxPool=o.asm.MaxPool).apply(null,arguments)},o._Maximum=function(){return(o._Maximum=o.asm.Maximum).apply(null,arguments)},o._Mean=function(){return(o._Mean=o.asm.Mean).apply(null,arguments)},o._Min=function(){return(o._Min=o.asm.Min).apply(null,arguments)},o._Minimum=function(){return(o._Minimum=o.asm.Minimum).apply(null,arguments)},o._MirrorPad=function(){return(o._MirrorPad=o.asm.MirrorPad).apply(null,arguments)},o._Multiply=function(){return(o._Multiply=o.asm.Multiply).apply(null,arguments)},o._Neg=function(){return(o._Neg=o.asm.Neg).apply(null,arguments)},o._NonMaxSuppressionV3=function(){return(o._NonMaxSuppressionV3=o.asm.NonMaxSuppressionV3).apply(null,arguments)},o._NonMaxSuppressionV4=function(){return(o._NonMaxSuppressionV4=o.asm.NonMaxSuppressionV4).apply(null,arguments)},o._NonMaxSuppressionV5=function(){return(o._NonMaxSuppressionV5=o.asm.NonMaxSuppressionV5).apply(null,arguments)},o._NotEqual=function(){return(o._NotEqual=o.asm.NotEqual).apply(null,arguments)},o._OneHot=function(){return(o._OneHot=o.asm.OneHot).apply(null,arguments)},o._PadV2=function(){return(o._PadV2=o.asm.PadV2).apply(null,arguments)},o._Pow=function(){return(o._Pow=o.asm.Pow).apply(null,arguments)},o._Prelu=function(){return(o._Prelu=o.asm.Prelu).apply(null,arguments)},o._Prod=function(){return(o._Prod=o.asm.Prod).apply(null,arguments)},o._RealDiv=function(){return(o._RealDiv=o.asm.RealDiv).apply(null,arguments)},o._Relu=function(){return(o._Relu=o.asm.Relu).apply(null,arguments)},o._Relu6=function(){return(o._Relu6=o.asm.Relu6).apply(null,arguments)},o._ResizeBilinear=function(){return(o._ResizeBilinear=o.asm.ResizeBilinear).apply(null,arguments)},o._Reverse=function(){return(o._Reverse=o.asm.Reverse).apply(null,arguments)},o._RotateWithOffset=function(){return(o._RotateWithOffset=o.asm.RotateWithOffset).apply(null,arguments)},o._Round=function(){return(o._Round=o.asm.Round).apply(null,arguments)},o._Rsqrt=function(){return(o._Rsqrt=o.asm.Rsqrt).apply(null,arguments)},o._ScatterNd=function(){return(o._ScatterNd=o.asm.ScatterNd).apply(null,arguments)},o._SelectV2=function(){return(o._SelectV2=o.asm.SelectV2).apply(null,arguments)},o._Sigmoid=function(){return(o._Sigmoid=o.asm.Sigmoid).apply(null,arguments)},o._Sin=function(){return(o._Sin=o.asm.Sin).apply(null,arguments)},o._Softmax=function(){return(o._Softmax=o.asm.Softmax).apply(null,arguments)},o._SparseFillEmptyRows=function(){return(o._SparseFillEmptyRows=o.asm.SparseFillEmptyRows).apply(null,arguments)},o._SparseReshape=function(){return(o._SparseReshape=o.asm.SparseReshape).apply(null,arguments)},o._SparseSegmentReduction=function(){return(o._SparseSegmentReduction=o.asm.SparseSegmentReduction).apply(null,arguments)},o._Sqrt=function(){return(o._Sqrt=o.asm.Sqrt).apply(null,arguments)},o._Square=function(){return(o._Square=o.asm.Square).apply(null,arguments)},o._SquaredDifference=function(){return(o._SquaredDifference=o.asm.SquaredDifference).apply(null,arguments)},o._Step=function(){return(o._Step=o.asm.Step).apply(null,arguments)},o._StridedSlice=function(){return(o._StridedSlice=o.asm.StridedSlice).apply(null,arguments)},o._Sub=function(){return(o._Sub=o.asm.Sub).apply(null,arguments)},o._Sum=function(){return(o._Sum=o.asm.Sum).apply(null,arguments)},o._Tan=function(){return(o._Tan=o.asm.Tan).apply(null,arguments)},o._Tanh=function(){return(o._Tanh=o.asm.Tanh).apply(null,arguments)},o._Tile=function(){return(o._Tile=o.asm.Tile).apply(null,arguments)},o._TopK=function(){return(o._TopK=o.asm.TopK).apply(null,arguments)},o._Transform=function(){return(o._Transform=o.asm.Transform).apply(null,arguments)},o._Transpose=function(){return(o._Transpose=o.asm.Transpose).apply(null,arguments)},o.__FusedMatMul=function(){return(o.__FusedMatMul=o.asm._FusedMatMul).apply(null,arguments)},o._malloc=function(){return(o._malloc=o.asm.malloc).apply(null,arguments)},o._free=function(){return(o._free=o.asm.free).apply(null,arguments)},o.___errno_location=function(){return(o.___errno_location=o.asm.__errno_location).apply(null,arguments)},o._emscripten_main_thread_process_queued_calls=function(){return(o._emscripten_main_thread_process_queued_calls=o.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},o.stackSave=function(){return(ie=o.stackSave=o.asm.stackSave).apply(null,arguments)}),oe=o.stackRestore=function(){return(oe=o.stackRestore=o.asm.stackRestore).apply(null,arguments)},se=o.stackAlloc=function(){return(se=o.stackAlloc=o.asm.stackAlloc).apply(null,arguments)};o.dynCall_iijjiiii=function(){return(o.dynCall_iijjiiii=o.asm.dynCall_iijjiiii).apply(null,arguments)},o.dynCall_jiji=function(){return(o.dynCall_jiji=o.asm.dynCall_jiji).apply(null,arguments)};function ue(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function le(e){function t(){te||(te=!0,o.calledRun=!0,S||(!0,K(L),r(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),function(){if(o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;)e=o.postRun.shift(),z.unshift(e);var e;K(z)}()))}e=e||f,W>0||(!function(){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)e=o.preRun.shift(),D.unshift(e);var e;K(D)}(),W>0||(o.setStatus?(o.setStatus("Running..."),setTimeout((function(){setTimeout((function(){o.setStatus("")}),1),t()}),1)):t()))}if(o.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?C(e):function(){return I(e,t,n,arguments)}},V=function e(){te||le(),te||(V=e)},o.run=le,o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();if(le(),i&&(ne={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!i.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!i.unhandledRejection.indexOf(e)>-1}))}),"undefined"!==typeof t)re=t;else{if("undefined"===typeof WasmBackendModuleThreadedSimd)throw new Error("Could not find wasm module in post.js");re=WasmBackendModuleThreadedSimd}if(ne){var ce=re._dispose;re._dispose=function(){ce(),ne.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),ne.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return t.ready}}();e.exports=r},7312:function(e,t){"use strict";function n(){return!1}function r(){return!0}function a(){this.timeStamp=Date.now(),this.target=void 0,this.currentTarget=void 0}Object.defineProperty(t,"__esModule",{value:!0}),a.prototype={isEventObject:1,constructor:a,isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){this.isDefaultPrevented=r},stopPropagation:function(){this.isPropagationStopped=r},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()},halt:function(e){e?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}},t.default=a,e.exports=t.default},7712:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(7312)),i=r(n(1843)),o=!1,s=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","shiftKey","target","timeStamp","view","type"];function u(e){return null===e||void 0===e}var l=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(e,t){u(e.which)&&(e.which=u(t.charCode)?t.keyCode:t.charCode),void 0===e.metaKey&&(e.metaKey=e.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(e,t){var n=void 0,r=void 0,a=void 0,i=t.wheelDelta,o=t.axis,s=t.wheelDeltaY,u=t.wheelDeltaX,l=t.detail;i&&(a=i/120),l&&(a=0-(l%3===0?l/3:l)),void 0!==o&&(o===e.HORIZONTAL_AXIS?(r=0,n=0-a):o===e.VERTICAL_AXIS&&(n=0,r=a)),void 0!==s&&(r=s/120),void 0!==u&&(n=-1*u/120),n||r||(r=a),void 0!==n&&(e.deltaX=n),void 0!==r&&(e.deltaY=r),void 0!==a&&(e.delta=a)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:["buttons","clientX","clientY","button","offsetX","relatedTarget","which","fromElement","toElement","offsetY","pageX","pageY","screenX","screenY"],fix:function(e,t){var n=void 0,r=void 0,a=void 0,i=e.target,o=t.button;return i&&u(e.pageX)&&!u(t.clientX)&&(r=(n=i.ownerDocument||document).documentElement,a=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===i?e.toElement:e.fromElement),e}}];function c(){return true}function d(){return o}function h(e){var t=e.type,n="function"===typeof e.stopPropagation||"boolean"===typeof e.cancelBubble;a.default.call(this),this.nativeEvent=e;var r=d;"defaultPrevented"in e?r=e.defaultPrevented?c:d:"getPreventDefault"in e?r=e.getPreventDefault()?c:d:"returnValue"in e&&(r=e.returnValue===o?c:d),this.isDefaultPrevented=r;var i=[],u=void 0,h=void 0,p=s.concat();for(l.forEach((function(e){t.match(e.reg)&&(p=p.concat(e.props),e.fix&&i.push(e.fix))})),u=p.length;u;)this[h=p[--u]]=e[h];for(!this.target&&n&&(this.target=e.srcElement||document),this.target&&3===this.target.nodeType&&(this.target=this.target.parentNode),u=i.length;u;)(0,i[--u])(this,e);this.timeStamp=e.timeStamp||Date.now()}var p=a.default.prototype;(0,i.default)(h.prototype,p,{constructor:h,preventDefault:function(){var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=o,p.preventDefault.call(this)},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=true,p.stopPropagation.call(this)}}),t.default=h,e.exports=t.default},1684:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){function a(t){var r=new i.default(t);n.call(e,r)}if(e.addEventListener){var o=function(){var n=!1;return"object"===typeof r?n=r.capture||!1:"boolean"===typeof r&&(n=r),e.addEventListener(t,a,r||!1),{v:{remove:function(){e.removeEventListener(t,a,n)}}}}();if("object"===typeof o)return o.v}else if(e.attachEvent)return e.attachEvent("on"+t,a),{remove:function(){e.detachEvent("on"+t,a)}}};var r,a=n(7712),i=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},7910:function(e,t,n){"use strict";var r;function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function g(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(){function e(){s(this,e)}return l(e,[{key:"shadeRGBColor",value:function(e,t){var n=t.split(","),r=e<0?0:255,a=e<0?-1*e:e,i=parseInt(n[0].slice(4),10),o=parseInt(n[1],10),s=parseInt(n[2],10);return"rgb("+(Math.round((r-i)*a)+i)+","+(Math.round((r-o)*a)+o)+","+(Math.round((r-s)*a)+s)+")"}},{key:"shadeHexColor",value:function(e,t){var n=parseInt(t.slice(1),16),r=e<0?0:255,a=e<0?-1*e:e,i=n>>16,o=n>>8&255,s=255&n;return"#"+(16777216+65536*(Math.round((r-i)*a)+i)+256*(Math.round((r-o)*a)+o)+(Math.round((r-s)*a)+s)).toString(16).slice(1)}},{key:"shadeColor",value:function(t,n){return e.isColorHex(n)?this.shadeHexColor(t,n):this.shadeRGBColor(t,n)}}],[{key:"bind",value:function(e,t){return function(){return e.apply(t,arguments)}}},{key:"isObject",value:function(e){return e&&"object"===o(e)&&!Array.isArray(e)&&null!=e}},{key:"is",value:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"}},{key:"listToArray",value:function(e){var t,n=[];for(t=0;t<e.length;t++)n[t]=e[t];return n}},{key:"extend",value:function(e,t){var n=this;"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])}return t});var r=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach((function(a){n.isObject(t[a])&&a in e?r[a]=n.extend(e[a],t[a]):Object.assign(r,c({},a,t[a]))})),r}},{key:"extendArray",value:function(t,n){var r=[];return t.map((function(t){r.push(e.extend(n,t))})),r}},{key:"monthMod",value:function(e){return e%12}},{key:"clone",value:function(t){if(e.is("Array",t)){for(var n=[],r=0;r<t.length;r++)n[r]=this.clone(t[r]);return n}if(e.is("Null",t))return null;if(e.is("Date",t))return t;if("object"===o(t)){var a={};for(var i in t)t.hasOwnProperty(i)&&(a[i]=this.clone(t[i]));return a}return t}},{key:"log10",value:function(e){return Math.log(e)/Math.LN10}},{key:"roundToBase10",value:function(e){return Math.pow(10,Math.floor(Math.log10(e)))}},{key:"roundToBase",value:function(e,t){return Math.pow(t,Math.floor(Math.log(e)/Math.log(t)))}},{key:"parseNumber",value:function(e){return null===e?e:parseFloat(e)}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(e){var t=String(e).split(/[eE]/);if(1===t.length)return t[0];var n="",r=e<0?"-":"",a=t[0].replace(".",""),i=Number(t[1])+1;if(i<0){for(n=r+"0.";i++;)n+="0";return n+a.replace(/^-/,"")}for(i-=a.length;i--;)n+="0";return a+n}},{key:"getDimensions",value:function(e){var t=getComputedStyle(e,null),n=e.clientHeight,r=e.clientWidth;return n-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),[r-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),n]}},{key:"getBoundingClientRect",value:function(e){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:e.clientWidth,height:e.clientHeight,x:t.left,y:t.top}}},{key:"getLargestStringFromArr",value:function(e){return e.reduce((function(e,t){return Array.isArray(t)&&(t=t.reduce((function(e,t){return e.length>t.length?e:t}))),e.length>t.length?e:t}),0)}},{key:"hexToRgba",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==e.substring(0,1)&&(e="#999999");var n=e.replace("#","");n=n.match(new RegExp("(.{"+n.length/3+"})","g"));for(var r=0;r<n.length;r++)n[r]=parseInt(1===n[r].length?n[r]+n[r]:n[r],16);return void 0!==t&&n.push(t),"rgba("+n.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(e){return parseFloat(e.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(e)}},{key:"getPolygonPos",value:function(e,t){for(var n=[],r=2*Math.PI/t,a=0;a<t;a++){var i={};i.x=e*Math.sin(a*r),i.y=-e*Math.cos(a*r),n.push(i)}return n}},{key:"polarToCartesian",value:function(e,t,n,r){var a=(r-90)*Math.PI/180;return{x:e+n*Math.cos(a),y:t+n*Math.sin(a)}}},{key:"escapeString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",n=e.toString().slice();return n.replace(/[` ~!@#$%^&*()_|+\-=?;:'",.<>{}[\]\\/]/gi,t)}},{key:"negToZero",value:function(e){return e<0?0:e}},{key:"moveIndexInArray",value:function(e,t,n){if(n>=e.length)for(var r=n-e.length+1;r--;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e}},{key:"extractNumber",value:function(e){return parseFloat(e.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}},{key:"setELstyles",value:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style.key=t[n])}},{key:"isNumber",value:function(e){return!isNaN(e)&&parseFloat(Number(e))===e&&!isNaN(parseInt(e,10))}},{key:"isFloat",value:function(e){return Number(e)===e&&e%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}var r=e.indexOf("Edge/");return r>0&&parseInt(e.substring(r+5,e.indexOf(".",r)),10)}}]),e}(),x=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.setEasingFunctions()}return l(e,[{key:"setEasingFunctions",value:function(){var e;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":e="-";break;case"easein":e="<";break;case"easeout":e=">";break;case"easeinout":default:e="<>";break;case"swing":e=function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1};break;case"bounce":e=function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375};break;case"elastic":e=function(e){return e===!!e?e:Math.pow(2,-10*e)*Math.sin((e-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=e}}},{key:"animateLine",value:function(e,t,n,r){e.attr(t).animate(r).attr(n)}},{key:"animateMarker",value:function(e,t,n,r,a,i){t||(t=0),e.attr({r:t,width:t,height:t}).animate(r,a).attr({r:n,width:n.width,height:n.height}).afterAll((function(){i()}))}},{key:"animateCircle",value:function(e,t,n,r,a){e.attr({r:t.r,cx:t.cx,cy:t.cy}).animate(r,a).attr({r:n.r,cx:n.cx,cy:n.cy})}},{key:"animateRect",value:function(e,t,n,r,a){e.attr(t).animate(r).attr(n).afterAll((function(){return a()}))}},{key:"animatePathsGradually",value:function(e){var t=e.el,n=e.realIndex,r=e.j,a=e.fill,i=e.pathFrom,o=e.pathTo,s=e.speed,u=e.delay,l=this.w,c=0;l.config.chart.animations.animateGradually.enabled&&(c=l.config.chart.animations.animateGradually.delay),l.config.chart.animations.dynamicAnimation.enabled&&l.globals.dataChanged&&"bar"!==l.config.chart.type&&(c=0),this.morphSVG(t,n,r,"line"!==l.config.chart.type||l.globals.comboCharts?a:"stroke",i,o,s,u*c)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach((function(e){e.el.classList.remove("apexcharts-element-hidden")}))}},{key:"animationCompleted",value:function(e){var t=this.w;t.globals.animationEnded||(t.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof t.config.chart.events.animationEnd&&t.config.chart.events.animationEnd(this.ctx,{el:e,w:t}))}},{key:"morphSVG",value:function(e,t,n,r,a,i,o,s){var u=this,l=this.w;a||(a=e.attr("pathFrom")),i||(i=e.attr("pathTo"));var c=function(e){return"radar"===l.config.chart.type&&(o=1),"M 0 ".concat(l.globals.gridHeight)};(!a||a.indexOf("undefined")>-1||a.indexOf("NaN")>-1)&&(a=c()),(!i||i.indexOf("undefined")>-1||i.indexOf("NaN")>-1)&&(i=c()),l.globals.shouldAnimate||(o=1),e.plot(a).animate(1,l.globals.easing,s).plot(a).animate(o,l.globals.easing,s).plot(i).afterAll((function(){b.isNumber(n)?n===l.globals.series[l.globals.maxValsInArrayIndex].length-2&&l.globals.shouldAnimate&&u.animationCompleted(e):"none"!==r&&l.globals.shouldAnimate&&(!l.globals.comboCharts&&t===l.globals.series.length-1||l.globals.comboCharts)&&u.animationCompleted(e),u.showDelayedElements()}))}}]),e}(),A=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return l(e,[{key:"getDefaultFilter",value:function(e,t){var n=this.w;e.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==n.config.states.normal.filter?this.applyFilter(e,t,n.config.states.normal.filter.type,n.config.states.normal.filter.value):n.config.chart.dropShadow.enabled&&this.dropShadow(e,n.config.chart.dropShadow,t)}},{key:"addNormalFilter",value:function(e,t){var n=this.w;n.config.chart.dropShadow.enabled&&!e.node.classList.contains("apexcharts-marker")&&this.dropShadow(e,n.config.chart.dropShadow,t)}},{key:"addLightenFilter",value:function(e,t,n){var r=this,a=this.w,i=n.intensity;e.unfilter(!0),new window.SVG.Filter,e.filter((function(e){var n=a.config.chart.dropShadow;(n.enabled?r.addShadow(e,t,n):e).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:i}})})),e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)}},{key:"addDarkenFilter",value:function(e,t,n){var r=this,a=this.w,i=n.intensity;e.unfilter(!0),new window.SVG.Filter,e.filter((function(e){var n=a.config.chart.dropShadow;(n.enabled?r.addShadow(e,t,n):e).componentTransfer({rgb:{type:"linear",slope:i}})})),e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)}},{key:"applyFilter",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(n){case"none":this.addNormalFilter(e,t);break;case"lighten":this.addLightenFilter(e,t,{intensity:r});break;case"darken":this.addDarkenFilter(e,t,{intensity:r})}}},{key:"addShadow",value:function(e,t,n){var r=n.blur,a=n.top,i=n.left,o=n.color,s=n.opacity,u=e.flood(Array.isArray(o)?o[t]:o,s).composite(e.sourceAlpha,"in").offset(i,a).gaussianBlur(r).merge(e.source);return e.blend(e.source,u)}},{key:"dropShadow",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=t.top,a=t.left,i=t.blur,o=t.color,s=t.opacity,u=t.noUserSpaceOnUse,l=this.w;return e.unfilter(!0),b.isIE()&&"radialBar"===l.config.chart.type||(o=Array.isArray(o)?o[n]:o,e.filter((function(e){var t;t=b.isSafari()||b.isFirefox()||b.isIE()?e.flood(o,s).composite(e.sourceAlpha,"in").offset(a,r).gaussianBlur(i):e.flood(o,s).composite(e.sourceAlpha,"in").offset(a,r).gaussianBlur(i).merge(e.source),e.blend(e.source,t)})),u||e.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(e.filterer.node)),e}},{key:"setSelectionFilter",value:function(e,t,n){var r=this.w;if(void 0!==r.globals.selectedDataPoints[t]&&r.globals.selectedDataPoints[t].indexOf(n)>-1){e.node.setAttribute("selected",!0);var a=r.config.states.active.filter;"none"!==a&&this.applyFilter(e,t,a.type,a.value)}}},{key:"_scaleFilterSize",value:function(e){!function(t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),e}(),w=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return l(e,[{key:"drawLine",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt",u=this.w,l=u.globals.dom.Paper.line().attr({x1:e,y1:t,x2:n,y2:r,stroke:a,"stroke-dasharray":i,"stroke-width":o,"stroke-linecap":s});return l}},{key:"drawRect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=this.w,d=c.globals.dom.Paper.rect();return d.attr({x:e,y:t,width:n>0?n:0,height:r>0?r:0,rx:a,ry:a,opacity:o,"stroke-width":null!==s?s:0,stroke:null!==u?u:"none","stroke-dasharray":l}),d.node.setAttribute("fill",i),d}},{key:"drawPolygon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",a=this.w,i=a.globals.dom.Paper.polygon(e).attr({fill:r,stroke:t,"stroke-width":n});return i}},{key:"drawCircle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.w;e<0&&(e=0);var r=n.globals.dom.Paper.circle(2*e);return null!==t&&r.attr(t),r}},{key:"drawPath",value:function(e){var t=e.d,n=void 0===t?"":t,r=e.stroke,a=void 0===r?"#a8a8a8":r,i=e.strokeWidth,o=void 0===i?1:i,s=e.fill,u=e.fillOpacity,l=void 0===u?1:u,c=e.strokeOpacity,d=void 0===c?1:c,h=e.classes,p=e.strokeLinecap,f=void 0===p?null:p,m=e.strokeDashArray,g=void 0===m?0:m,v=this.w;return null===f&&(f=v.config.stroke.lineCap),(n.indexOf("undefined")>-1||n.indexOf("NaN")>-1)&&(n="M 0 ".concat(v.globals.gridHeight)),v.globals.dom.Paper.path(n).attr({fill:s,"fill-opacity":l,stroke:a,"stroke-opacity":d,"stroke-linecap":f,"stroke-width":o,"stroke-dasharray":g,class:h})}},{key:"group",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.w,n=t.globals.dom.Paper.group();return null!==e&&n.attr(e),n}},{key:"move",value:function(e,t){return["M",e,t].join(" ")}},{key:"line",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null;return null===n?r=["L",e,t].join(" "):"H"===n?r=["H",e].join(" "):"V"===n&&(r=["V",t].join(" ")),r}},{key:"curve",value:function(e,t,n,r,a,i){return["C",e,t,n,r,a,i].join(" ")}},{key:"quadraticCurve",value:function(e,t,n,r){return["Q",e,t,n,r].join(" ")}},{key:"arc",value:function(e,t,n,r,a,i,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u="A";s&&(u="a");var l=[u,e,t,n,r,a,i,o].join(" ");return l}},{key:"renderPaths",value:function(e){var t,n=e.j,r=e.realIndex,a=e.pathFrom,o=e.pathTo,s=e.stroke,u=e.strokeWidth,l=e.strokeLinecap,c=e.fill,d=e.animationDelay,h=e.initialSpeed,p=e.dataChangeSpeed,f=e.className,m=e.shouldClipToGrid,g=void 0===m||m,v=e.bindEventsOnPaths,y=void 0===v||v,b=e.drawShadow,w=void 0===b||b,k=this.w,S=new A(this.ctx),C=new x(this.ctx),I=this.w.config.chart.animations.enabled,E=I&&this.w.config.chart.animations.dynamicAnimation.enabled,T=!!(I&&!k.globals.resized||E&&k.globals.dataChanged&&k.globals.shouldAnimate);T?t=a:(t=o,k.globals.animationEnded=!0);var N,_=k.config.stroke.dashArray;N=Array.isArray(_)?_[r]:k.config.stroke.dashArray;var M=this.drawPath({d:t,stroke:s,strokeWidth:u,fill:c,fillOpacity:1,classes:f,strokeLinecap:l,strokeDashArray:N});if(M.attr("index",r),g&&M.attr({"clip-path":"url(#gridRectMask".concat(k.globals.cuid,")")}),"none"!==k.config.states.normal.filter.type)S.getDefaultFilter(M,r);else if(k.config.chart.dropShadow.enabled&&w&&(!k.config.chart.dropShadow.enabledOnSeries||k.config.chart.dropShadow.enabledOnSeries&&-1!==k.config.chart.dropShadow.enabledOnSeries.indexOf(r))){var R=k.config.chart.dropShadow;S.dropShadow(M,R,r)}y&&(M.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,M)),M.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,M)),M.node.addEventListener("mousedown",this.pathMouseDown.bind(this,M))),M.attr({pathTo:o,pathFrom:a});var O={el:M,j:n,realIndex:r,pathFrom:a,pathTo:o,fill:c,strokeWidth:u,delay:d};return!I||k.globals.resized||k.globals.dataChanged?!k.globals.resized&&k.globals.dataChanged||C.showDelayedElements():C.animatePathsGradually(i(i({},O),{},{speed:h})),k.globals.dataChanged&&E&&T&&C.animatePathsGradually(i(i({},O),{},{speed:p})),M}},{key:"drawPattern",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=this.w,o=i.globals.dom.Paper.pattern(t,n,(function(i){"horizontalLines"===e?i.line(0,0,n,0).stroke({color:r,width:a+1}):"verticalLines"===e?i.line(0,0,0,t).stroke({color:r,width:a+1}):"slantedLines"===e?i.line(0,0,t,n).stroke({color:r,width:a}):"squares"===e?i.rect(t,n).fill("none").stroke({color:r,width:a}):"circles"===e&&i.circle(t).fill("none").stroke({color:r,width:a})}));return o}},{key:"drawGradient",value:function(e,t,n,r,a){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=this.w;t.length<9&&0===t.indexOf("#")&&(t=b.hexToRgba(t,r)),n.length<9&&0===n.indexOf("#")&&(n=b.hexToRgba(n,a));var d=0,h=1,p=1,f=null;null!==s&&(d=void 0!==s[0]?s[0]/100:0,h=void 0!==s[1]?s[1]/100:1,p=void 0!==s[2]?s[2]/100:1,f=void 0!==s[3]?s[3]/100:null);var m=!("donut"!==c.config.chart.type&&"pie"!==c.config.chart.type&&"polarArea"!==c.config.chart.type&&"bubble"!==c.config.chart.type);if(i=null===u||0===u.length?c.globals.dom.Paper.gradient(m?"radial":"linear",(function(e){e.at(d,t,r),e.at(h,n,a),e.at(p,n,a),null!==f&&e.at(f,t,r)})):c.globals.dom.Paper.gradient(m?"radial":"linear",(function(e){(Array.isArray(u[l])?u[l]:u).forEach((function(t){e.at(t.offset/100,t.color,t.opacity)}))})),m){var g=c.globals.gridWidth/2,v=c.globals.gridHeight/2;"bubble"!==c.config.chart.type?i.attr({gradientUnits:"userSpaceOnUse",cx:g,cy:v,r:o}):i.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else"vertical"===e?i.from(0,0).to(0,1):"diagonal"===e?i.from(0,0).to(1,1):"horizontal"===e?i.from(0,1).to(1,1):"diagonal2"===e&&i.from(1,0).to(0,1);return i}},{key:"getTextBasedOnMaxWidth",value:function(e){var t=e.text,n=e.maxWidth,r=e.fontSize,a=e.fontFamily,i=this.getTextRects(t,r,a),o=i.width/t.length,s=Math.floor(n/o);return n<i.width?t.slice(0,s-3)+"...":t}},{key:"drawText",value:function(e){var t=this,n=e.x,r=e.y,a=e.text,o=e.textAnchor,s=e.fontSize,u=e.fontFamily,l=e.fontWeight,c=e.foreColor,d=e.opacity,h=e.maxWidth,p=e.cssClass,f=void 0===p?"":p,m=e.isPlainText,g=void 0===m||m,v=this.w;void 0===a&&(a="");var y=a;o||(o="start"),c&&c.length||(c=v.config.chart.foreColor),u=u||v.config.chart.fontFamily,l=l||"regular";var b,x={maxWidth:h,fontSize:s=s||"11px",fontFamily:u};return Array.isArray(a)?b=v.globals.dom.Paper.text((function(e){for(var n=0;n<a.length;n++)y=a[n],h&&(y=t.getTextBasedOnMaxWidth(i({text:a[n]},x))),0===n?e.tspan(y):e.tspan(y).newLine()})):(h&&(y=this.getTextBasedOnMaxWidth(i({text:a},x))),b=g?v.globals.dom.Paper.plain(a):v.globals.dom.Paper.text((function(e){return e.tspan(y)}))),b.attr({x:n,y:r,"text-anchor":o,"dominant-baseline":"auto","font-size":s,"font-family":u,"font-weight":l,fill:c,class:"apexcharts-text "+f}),b.node.style.fontFamily=u,b.node.style.opacity=d,b}},{key:"drawMarker",value:function(e,t,n){e=e||0;var r=n.pSize||0,a=null;if("square"===n.shape||"rect"===n.shape){var i=void 0===n.pRadius?r/2:n.pRadius;null!==t&&r||(r=0,i=0);var o=1.2*r+i,s=this.drawRect(o,o,o,o,i);s.attr({x:e-o/2,y:t-o/2,cx:e,cy:t,class:n.class?n.class:"",fill:n.pointFillColor,"fill-opacity":n.pointFillOpacity?n.pointFillOpacity:1,stroke:n.pointStrokeColor,"stroke-width":n.pointStrokeWidth?n.pointStrokeWidth:0,"stroke-opacity":n.pointStrokeOpacity?n.pointStrokeOpacity:1}),a=s}else"circle"!==n.shape&&n.shape||(b.isNumber(t)||(r=0,t=0),a=this.drawCircle(r,{cx:e,cy:t,class:n.class?n.class:"",stroke:n.pointStrokeColor,fill:n.pointFillColor,"fill-opacity":n.pointFillOpacity?n.pointFillOpacity:1,"stroke-width":n.pointStrokeWidth?n.pointStrokeWidth:0,"stroke-opacity":n.pointStrokeOpacity?n.pointStrokeOpacity:1}));return a}},{key:"pathMouseEnter",value:function(e,t){var n=this.w,r=new A(this.ctx),a=parseInt(e.node.getAttribute("index"),10),i=parseInt(e.node.getAttribute("j"),10);if("function"==typeof n.config.chart.events.dataPointMouseEnter&&n.config.chart.events.dataPointMouseEnter(t,this.ctx,{seriesIndex:a,dataPointIndex:i,w:n}),this.ctx.events.fireEvent("dataPointMouseEnter",[t,this.ctx,{seriesIndex:a,dataPointIndex:i,w:n}]),("none"===n.config.states.active.filter.type||"true"!==e.node.getAttribute("selected"))&&"none"!==n.config.states.hover.filter.type&&!n.globals.isTouchDevice){var o=n.config.states.hover.filter;r.applyFilter(e,a,o.type,o.value)}}},{key:"pathMouseLeave",value:function(e,t){var n=this.w,r=new A(this.ctx),a=parseInt(e.node.getAttribute("index"),10),i=parseInt(e.node.getAttribute("j"),10);"function"==typeof n.config.chart.events.dataPointMouseLeave&&n.config.chart.events.dataPointMouseLeave(t,this.ctx,{seriesIndex:a,dataPointIndex:i,w:n}),this.ctx.events.fireEvent("dataPointMouseLeave",[t,this.ctx,{seriesIndex:a,dataPointIndex:i,w:n}]),"none"!==n.config.states.active.filter.type&&"true"===e.node.getAttribute("selected")||"none"!==n.config.states.hover.filter.type&&r.getDefaultFilter(e,a)}},{key:"pathMouseDown",value:function(e,t){var n=this.w,r=new A(this.ctx),a=parseInt(e.node.getAttribute("index"),10),i=parseInt(e.node.getAttribute("j"),10),o="false";if("true"===e.node.getAttribute("selected")){if(e.node.setAttribute("selected","false"),n.globals.selectedDataPoints[a].indexOf(i)>-1){var s=n.globals.selectedDataPoints[a].indexOf(i);n.globals.selectedDataPoints[a].splice(s,1)}}else{if(!n.config.states.active.allowMultipleDataPointsSelection&&n.globals.selectedDataPoints.length>0){n.globals.selectedDataPoints=[];var u=n.globals.dom.Paper.select(".apexcharts-series path").members,l=n.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,c=function(e){Array.prototype.forEach.call(e,(function(e){e.node.setAttribute("selected","false"),r.getDefaultFilter(e,a)}))};c(u),c(l)}e.node.setAttribute("selected","true"),o="true",void 0===n.globals.selectedDataPoints[a]&&(n.globals.selectedDataPoints[a]=[]),n.globals.selectedDataPoints[a].push(i)}if("true"===o){var d=n.config.states.active.filter;if("none"!==d)r.applyFilter(e,a,d.type,d.value);else if("none"!==n.config.states.hover.filter&&!n.globals.isTouchDevice){var h=n.config.states.hover.filter;r.applyFilter(e,a,h.type,h.value)}}else"none"!==n.config.states.active.filter.type&&("none"===n.config.states.hover.filter.type||n.globals.isTouchDevice?r.getDefaultFilter(e,a):(h=n.config.states.hover.filter,r.applyFilter(e,a,h.type,h.value)));"function"==typeof n.config.chart.events.dataPointSelection&&n.config.chart.events.dataPointSelection(t,this.ctx,{selectedDataPoints:n.globals.selectedDataPoints,seriesIndex:a,dataPointIndex:i,w:n}),t&&this.ctx.events.fireEvent("dataPointSelection",[t,this.ctx,{selectedDataPoints:n.globals.selectedDataPoints,seriesIndex:a,dataPointIndex:i,w:n}])}},{key:"rotateAroundCenter",value:function(e){var t={};return e&&"function"==typeof e.getBBox&&(t=e.getBBox()),{x:t.x+t.width/2,y:t.y+t.height/2}}},{key:"getTextRects",value:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=this.w,o=this.drawText({x:-200,y:-200,text:e,textAnchor:"start",fontSize:t,fontFamily:n,foreColor:"#fff",opacity:0});r&&o.attr("transform",r),i.globals.dom.Paper.add(o);var s=o.bbox();return a||(s=o.node.getBoundingClientRect()),o.remove(),{width:s.width,height:s.height}}},{key:"placeTextWithEllipsis",value:function(e,t,n){if("function"==typeof e.getComputedTextLength&&(e.textContent=t,t.length>0&&e.getComputedTextLength()>=n/1.1)){for(var r=t.length-3;r>0;r-=3)if(e.getSubStringLength(0,r)<=n/1.1)return void(e.textContent=t.substring(0,r)+"...");e.textContent="."}}}],[{key:"setAttrs",value:function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])}}]),e}(),k=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return l(e,[{key:"getStackedSeriesTotals",value:function(){var e=this.w,t=[];if(0===e.globals.series.length)return t;for(var n=0;n<e.globals.series[e.globals.maxValsInArrayIndex].length;n++){for(var r=0,a=0;a<e.globals.series.length;a++)void 0!==e.globals.series[a][n]&&(r+=e.globals.series[a][n]);t.push(r)}return e.globals.stackedSeriesTotals=t,t}},{key:"getSeriesTotalByIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?this.w.config.series.reduce((function(e,t){return e+t}),0):this.w.globals.series[e].reduce((function(e,t){return e+t}),0)}},{key:"isSeriesNull",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===e?this.w.config.series.filter((function(e){return null!==e})):this.w.config.series[e].data.filter((function(e){return null!==e}))).length}},{key:"seriesHaveSameValues",value:function(e){return this.w.globals.series[e].every((function(e,t,n){return e===n[0]}))}},{key:"getCategoryLabels",value:function(e){var t=this.w,n=e.slice();return t.config.xaxis.convertedCatToNumeric&&(n=e.map((function(e,n){return t.config.xaxis.labels.formatter(e-t.globals.minX+1)}))),n}},{key:"getLargestSeries",value:function(){var e=this.w;e.globals.maxValsInArrayIndex=e.globals.series.map((function(e){return e.length})).indexOf(Math.max.apply(Math,e.globals.series.map((function(e){return e.length}))))}},{key:"getLargestMarkerSize",value:function(){var e=this.w,t=0;return e.globals.markers.size.forEach((function(e){t=Math.max(t,e)})),e.config.markers.discrete&&e.config.markers.discrete.length&&e.config.markers.discrete.forEach((function(e){t=Math.max(t,e.size)})),t>0&&(t+=e.config.markers.hover.sizeOffset+1),e.globals.markers.largestSize=t,t}},{key:"getSeriesTotals",value:function(){var e=this.w;e.globals.seriesTotals=e.globals.series.map((function(e,t){var n=0;if(Array.isArray(e))for(var r=0;r<e.length;r++)n+=e[r];else n+=e;return n}))}},{key:"getSeriesTotalsXRange",value:function(e,t){var n=this.w;return n.globals.series.map((function(r,a){for(var i=0,o=0;o<r.length;o++)n.globals.seriesX[a][o]>e&&n.globals.seriesX[a][o]<t&&(i+=r[o]);return i}))}},{key:"getPercentSeries",value:function(){var e=this.w;e.globals.seriesPercent=e.globals.series.map((function(t,n){var r=[];if(Array.isArray(t))for(var a=0;a<t.length;a++){var i=e.globals.stackedSeriesTotals[a],o=0;i&&(o=100*t[a]/i),r.push(o)}else{var s=100*t/e.globals.seriesTotals.reduce((function(e,t){return e+t}),0);r.push(s)}return r}))}},{key:"getCalculatedRatios",value:function(){var e,t,n,r,a=this.w.globals,i=[],o=0,s=[],u=.1,l=0;if(a.yRange=[],a.isMultipleYAxis)for(var c=0;c<a.minYArr.length;c++)a.yRange.push(Math.abs(a.minYArr[c]-a.maxYArr[c])),s.push(0);else a.yRange.push(Math.abs(a.minY-a.maxY));a.xRange=Math.abs(a.maxX-a.minX),a.zRange=Math.abs(a.maxZ-a.minZ);for(var d=0;d<a.yRange.length;d++)i.push(a.yRange[d]/a.gridHeight);if(t=a.xRange/a.gridWidth,n=Math.abs(a.initialMaxX-a.initialMinX)/a.gridWidth,e=a.yRange/a.gridWidth,r=a.xRange/a.gridHeight,(o=a.zRange/a.gridHeight*16)||(o=1),a.minY!==Number.MIN_VALUE&&0!==Math.abs(a.minY)&&(a.hasNegs=!0),a.isMultipleYAxis){s=[];for(var h=0;h<i.length;h++)s.push(-a.minYArr[h]/i[h])}else s.push(-a.minY/i[0]),a.minY!==Number.MIN_VALUE&&0!==Math.abs(a.minY)&&(u=-a.minY/e,l=a.minX/t);return{yRatio:i,invertedYRatio:e,zRatio:o,xRatio:t,initialXRatio:n,invertedXRatio:r,baseLineInvertedY:u,baseLineY:s,baseLineX:l}}},{key:"getLogSeries",value:function(e){var t=this,n=this.w;return n.globals.seriesLog=e.map((function(e,r){return n.config.yaxis[r]&&n.config.yaxis[r].logarithmic?e.map((function(e){return null===e?null:t.getLogVal(n.config.yaxis[r].logBase,e,r)})):e})),n.globals.invalidLogScale?e:n.globals.seriesLog}},{key:"getBaseLog",value:function(e,t){return Math.log(t)/Math.log(e)}},{key:"getLogVal",value:function(e,t,n){if(0===t)return 0;var r=this.w,a=0===r.globals.minYArr[n]?-1:this.getBaseLog(e,r.globals.minYArr[n]),i=(0===r.globals.maxYArr[n]?0:this.getBaseLog(e,r.globals.maxYArr[n]))-a;return t<1?t/i:(this.getBaseLog(e,t)-a)/i}},{key:"getLogYRatios",value:function(e){var t=this,n=this.w,r=this.w.globals;return r.yLogRatio=e.slice(),r.logYRange=r.yRange.map((function(e,a){if(n.config.yaxis[a]&&t.w.config.yaxis[a].logarithmic){var i,o=-Number.MAX_VALUE,s=Number.MIN_VALUE;return r.seriesLog.forEach((function(e,t){e.forEach((function(e){n.config.yaxis[t]&&n.config.yaxis[t].logarithmic&&(o=Math.max(e,o),s=Math.min(e,s))}))})),i=Math.pow(r.yRange[a],Math.abs(s-o)/r.yRange[a]),r.yLogRatio[a]=i/r.gridHeight,i}})),r.invalidLogScale?e.slice():r.yLogRatio}}],[{key:"checkComboSeries",value:function(e){var t=!1,n=0,r=0;return e.length&&void 0!==e[0].type&&e.forEach((function(e){"bar"!==e.type&&"column"!==e.type&&"candlestick"!==e.type&&"boxPlot"!==e.type||n++,void 0!==e.type&&r++})),r>0&&(t=!0),{comboBarCount:n,comboCharts:t}}},{key:"extendArrayProps",value:function(e,t,n){return t.yaxis&&(t=e.extendYAxis(t,n)),t.annotations&&(t.annotations.yaxis&&(t=e.extendYAxisAnnotations(t)),t.annotations.xaxis&&(t=e.extendXAxisAnnotations(t)),t.annotations.points&&(t=e.extendPointAnnotations(t))),t}}]),e}(),S=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t}return l(e,[{key:"setOrientations",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.w;if("vertical"===e.label.orientation){var r=null!==t?t:0,a=n.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(r,"']"));if(null!==a){var i=a.getBoundingClientRect();a.setAttribute("x",parseFloat(a.getAttribute("x"))-i.height+4),"top"===e.label.position?a.setAttribute("y",parseFloat(a.getAttribute("y"))+i.width):a.setAttribute("y",parseFloat(a.getAttribute("y"))-i.width);var o=this.annoCtx.graphics.rotateAroundCenter(a),s=o.x,u=o.y;a.setAttribute("transform","rotate(-90 ".concat(s," ").concat(u,")"))}}}},{key:"addBackgroundToAnno",value:function(e,t){var n=this.w;if(!e||void 0===t.label.text||void 0!==t.label.text&&!String(t.label.text).trim())return null;var r=n.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),a=e.getBoundingClientRect(),i=t.label.style.padding.left,o=t.label.style.padding.right,s=t.label.style.padding.top,u=t.label.style.padding.bottom;"vertical"===t.label.orientation&&(s=t.label.style.padding.left,u=t.label.style.padding.right,i=t.label.style.padding.top,o=t.label.style.padding.bottom);var l=a.left-r.left-i,c=a.top-r.top-s,d=this.annoCtx.graphics.drawRect(l-n.globals.barPadForNumericAxis,c,a.width+i+o,a.height+s+u,t.label.borderRadius,t.label.style.background,1,t.label.borderWidth,t.label.borderColor,0);return t.id&&d.node.classList.add(t.id),d}},{key:"annotationsBackground",value:function(){var e=this,t=this.w,n=function(n,r,a){var i=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(a,"-annotations .apexcharts-").concat(a,"-annotation-label[rel='").concat(r,"']"));if(i){var o=i.parentNode,s=e.addBackgroundToAnno(i,n);s&&(o.insertBefore(s.node,i),n.label.mouseEnter&&s.node.addEventListener("mouseenter",n.label.mouseEnter.bind(e,n)),n.label.mouseLeave&&s.node.addEventListener("mouseleave",n.label.mouseLeave.bind(e,n)))}};t.config.annotations.xaxis.map((function(e,t){n(e,t,"xaxis")})),t.config.annotations.yaxis.map((function(e,t){n(e,t,"yaxis")})),t.config.annotations.points.map((function(e,t){n(e,t,"point")}))}},{key:"getY1Y2",value:function(e,t){var n,r="y1"===e?t.y:t.y2,a=this.w;if(this.annoCtx.invertAxis){var i=a.globals.labels.indexOf(r);a.config.xaxis.convertedCatToNumeric&&(i=a.globals.categoryLabels.indexOf(r));var o=a.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(i+1)+")");o&&(n=parseFloat(o.getAttribute("y")))}else{var s;s=a.config.yaxis[t.yAxisIndex].logarithmic?(r=new k(this.annoCtx.ctx).getLogVal(r,t.yAxisIndex))/a.globals.yLogRatio[t.yAxisIndex]:(r-a.globals.minYArr[t.yAxisIndex])/(a.globals.yRange[t.yAxisIndex]/a.globals.gridHeight),n=a.globals.gridHeight-s,a.config.yaxis[t.yAxisIndex]&&a.config.yaxis[t.yAxisIndex].reversed&&(n=s)}return n}},{key:"getX1X2",value:function(e,t){var n=this.w,r=this.annoCtx.invertAxis?n.globals.minY:n.globals.minX,a=this.annoCtx.invertAxis?n.globals.maxY:n.globals.maxX,i=this.annoCtx.invertAxis?n.globals.yRange[0]:n.globals.xRange,o=(t.x-r)/(i/n.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(o=(a-t.x)/(i/n.globals.gridWidth)),"category"!==n.config.xaxis.type&&!n.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||n.globals.dataFormatXNumeric||(o=this.getStringX(t.x));var s=(t.x2-r)/(i/n.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(s=(a-t.x2)/(i/n.globals.gridWidth)),"category"!==n.config.xaxis.type&&!n.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||n.globals.dataFormatXNumeric||(s=this.getStringX(t.x2)),"x1"===e?o:s}},{key:"getStringX",value:function(e){var t=this.w,n=e;t.config.xaxis.convertedCatToNumeric&&t.globals.categoryLabels.length&&(e=t.globals.categoryLabels.indexOf(e)+1);var r=t.globals.labels.indexOf(e),a=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(r+1)+")");return a&&(n=parseFloat(a.getAttribute("x"))),n}}]),e}(),C=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new S(this.annoCtx)}return l(e,[{key:"addXaxisAnnotation",value:function(e,t,n){var r,a=this.w,i=this.helpers.getX1X2("x1",e),o=e.label.text,s=e.strokeDashArray;if(b.isNumber(i)){if(null===e.x2||void 0===e.x2){var u=this.annoCtx.graphics.drawLine(i+e.offsetX,0+e.offsetY,i+e.offsetX,a.globals.gridHeight+e.offsetY,e.borderColor,s,e.borderWidth);t.appendChild(u.node),e.id&&u.node.classList.add(e.id)}else{if((r=this.helpers.getX1X2("x2",e))<i){var l=i;i=r,r=l}var c=this.annoCtx.graphics.drawRect(i+e.offsetX,0+e.offsetY,r-i,a.globals.gridHeight+e.offsetY,0,e.fillColor,e.opacity,1,e.borderColor,s);c.node.classList.add("apexcharts-annotation-rect"),c.attr("clip-path","url(#gridRectMask".concat(a.globals.cuid,")")),t.appendChild(c.node),e.id&&c.node.classList.add(e.id)}var d="top"===e.label.position?4:a.globals.gridHeight,h=this.annoCtx.graphics.getTextRects(o,parseFloat(e.label.style.fontSize)),p=this.annoCtx.graphics.drawText({x:i+e.label.offsetX,y:d+e.label.offsetY-("vertical"===e.label.orientation?"top"===e.label.position?h.width/2-12:-h.width/2:0),text:o,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});p.attr({rel:n}),t.appendChild(p.node),this.annoCtx.helpers.setOrientations(e,n)}}},{key:"drawXAxisAnnotations",value:function(){var e=this,t=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return t.config.annotations.xaxis.map((function(t,r){e.addXaxisAnnotation(t,n.node,r)})),n}}]),e}(),I=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t,this.helpers=new S(this.annoCtx)}return l(e,[{key:"addYaxisAnnotation",value:function(e,t,n){var r,a=this.w,i=e.strokeDashArray,o=this.helpers.getY1Y2("y1",e),s=e.label.text;if(null===e.y2||void 0===e.y2){var u=this.annoCtx.graphics.drawLine(0+e.offsetX,o+e.offsetY,this._getYAxisAnnotationWidth(e),o+e.offsetY,e.borderColor,i,e.borderWidth);t.appendChild(u.node),e.id&&u.node.classList.add(e.id)}else{if((r=this.helpers.getY1Y2("y2",e))>o){var l=o;o=r,r=l}var c=this.annoCtx.graphics.drawRect(0+e.offsetX,r+e.offsetY,this._getYAxisAnnotationWidth(e),o-r,0,e.fillColor,e.opacity,1,e.borderColor,i);c.node.classList.add("apexcharts-annotation-rect"),c.attr("clip-path","url(#gridRectMask".concat(a.globals.cuid,")")),t.appendChild(c.node),e.id&&c.node.classList.add(e.id)}var d="right"===e.label.position?a.globals.gridWidth:0,h=this.annoCtx.graphics.drawText({x:d+e.label.offsetX,y:(null!=r?r:o)+e.label.offsetY-3,text:s,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});h.attr({rel:n}),t.appendChild(h.node)}},{key:"_getYAxisAnnotationWidth",value:function(e){var t=this.w;return t.globals.gridWidth,(e.width.indexOf("%")>-1?t.globals.gridWidth*parseInt(e.width,10)/100:parseInt(e.width,10))+e.offsetX}},{key:"drawYAxisAnnotations",value:function(){var e=this,t=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return t.config.annotations.yaxis.map((function(t,r){e.addYaxisAnnotation(t,n.node,r)})),n}}]),e}(),E=function(){function e(t){s(this,e),this.w=t.w,this.annoCtx=t,this.helpers=new S(this.annoCtx)}return l(e,[{key:"addPointAnnotation",value:function(e,t,n){this.w;var r=this.helpers.getX1X2("x1",e),a=this.helpers.getY1Y2("y1",e);if(b.isNumber(r)){var i={pSize:e.marker.size,pointStrokeWidth:e.marker.strokeWidth,pointFillColor:e.marker.fillColor,pointStrokeColor:e.marker.strokeColor,shape:e.marker.shape,pRadius:e.marker.radius,class:"apexcharts-point-annotation-marker ".concat(e.marker.cssClass," ").concat(e.id?e.id:"")},o=this.annoCtx.graphics.drawMarker(r+e.marker.offsetX,a+e.marker.offsetY,i);t.appendChild(o.node);var s=e.label.text?e.label.text:"",u=this.annoCtx.graphics.drawText({x:r+e.label.offsetX,y:a+e.label.offsetY-e.marker.size-parseFloat(e.label.style.fontSize)/1.6,text:s,textAnchor:e.label.textAnchor,fontSize:e.label.style.fontSize,fontFamily:e.label.style.fontFamily,fontWeight:e.label.style.fontWeight,foreColor:e.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(e.label.style.cssClass," ").concat(e.id?e.id:"")});if(u.attr({rel:n}),t.appendChild(u.node),e.customSVG.SVG){var l=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+e.customSVG.cssClass});l.attr({transform:"translate(".concat(r+e.customSVG.offsetX,", ").concat(a+e.customSVG.offsetY,")")}),l.node.innerHTML=e.customSVG.SVG,t.appendChild(l.node)}if(e.image.path){var c=e.image.width?e.image.width:20,d=e.image.height?e.image.height:20;o=this.annoCtx.addImage({x:r+e.image.offsetX-c/2,y:a+e.image.offsetY-d/2,width:c,height:d,path:e.image.path,appendTo:".apexcharts-point-annotations"})}e.mouseEnter&&o.node.addEventListener("mouseenter",e.mouseEnter.bind(this,e)),e.mouseLeave&&o.node.addEventListener("mouseleave",e.mouseLeave.bind(this,e))}}},{key:"drawPointAnnotations",value:function(){var e=this,t=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return t.config.annotations.points.map((function(t,r){e.addPointAnnotation(t,n.node,r)})),n}}]),e}(),T={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},N=function(){function e(){s(this,e),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:0,mouseEnter:void 0,mouseLeave:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return l(e,[{key:"init",value:function(){return{annotations:{position:"front",yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[T],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0},stacked:!1,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(e){return new Date(e).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,rangeBarOverlap:!0,rangeBarGroupRows:!1,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal"}},bubble:{minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(e){return e}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(e){return e+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce((function(e,t){return e+t}),0)/e.globals.series.length+"%"}}}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(e){return e}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(e){return e}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(e){return e.globals.seriesTotals.reduce((function(e,t){return e+t}),0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(e){return null!==e?e:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(e){return e?e+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),e}(),_=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.graphics=new w(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new S(this),this.xAxisAnnotations=new C(this),this.yAxisAnnotations=new I(this),this.pointsAnnotations=new E(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return l(e,[{key:"drawAxesAnnotations",value:function(){var e=this.w;if(e.globals.axisCharts){for(var t=this.yAxisAnnotations.drawYAxisAnnotations(),n=this.xAxisAnnotations.drawXAxisAnnotations(),r=this.pointsAnnotations.drawPointAnnotations(),a=e.config.chart.animations.enabled,i=[t,n,r],o=[n.node,t.node,r.node],s=0;s<3;s++)e.globals.dom.elGraphical.add(i[s]),!a||e.globals.resized||e.globals.dataChanged||"scatter"!==e.config.chart.type&&"bubble"!==e.config.chart.type&&e.globals.dataPoints>1&&o[s].classList.add("apexcharts-element-hidden"),e.globals.delayedElements.push({el:o[s],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var e=this;this.w.config.annotations.images.map((function(t,n){e.addImage(t,n)}))}},{key:"drawTextAnnos",value:function(){var e=this;this.w.config.annotations.texts.map((function(t,n){e.addText(t,n)}))}},{key:"addXaxisAnnotation",value:function(e,t,n){this.xAxisAnnotations.addXaxisAnnotation(e,t,n)}},{key:"addYaxisAnnotation",value:function(e,t,n){this.yAxisAnnotations.addYaxisAnnotation(e,t,n)}},{key:"addPointAnnotation",value:function(e,t,n){this.pointsAnnotations.addPointAnnotation(e,t,n)}},{key:"addText",value:function(e,t){var n=e.x,r=e.y,a=e.text,i=e.textAnchor,o=e.foreColor,s=e.fontSize,u=e.fontFamily,l=e.fontWeight,c=e.cssClass,d=e.backgroundColor,h=e.borderWidth,p=e.strokeDashArray,f=e.borderRadius,m=e.borderColor,g=e.appendTo,v=void 0===g?".apexcharts-annotations":g,y=e.paddingLeft,b=void 0===y?4:y,x=e.paddingRight,A=void 0===x?4:x,w=e.paddingBottom,k=void 0===w?2:w,S=e.paddingTop,C=void 0===S?2:S,I=this.w,E=this.graphics.drawText({x:n,y:r,text:a,textAnchor:i||"start",fontSize:s||"12px",fontWeight:l||"regular",fontFamily:u||I.config.chart.fontFamily,foreColor:o||I.config.chart.foreColor,cssClass:c}),T=I.globals.dom.baseEl.querySelector(v);T&&T.appendChild(E.node);var N=E.bbox();if(a){var _=this.graphics.drawRect(N.x-b,N.y-C,N.width+b+A,N.height+k+C,f,d||"transparent",1,h,m,p);T.insertBefore(_.node,E.node)}}},{key:"addImage",value:function(e,t){var n=this.w,r=e.path,a=e.x,i=void 0===a?0:a,o=e.y,s=void 0===o?0:o,u=e.width,l=void 0===u?20:u,c=e.height,d=void 0===c?20:c,h=e.appendTo,p=void 0===h?".apexcharts-annotations":h,f=n.globals.dom.Paper.image(r);f.size(l,d).move(i,s);var m=n.globals.dom.baseEl.querySelector(p);return m&&m.appendChild(f.node),f}},{key:"addXaxisAnnotationExternal",value:function(e,t,n){return this.addAnnotationExternal({params:e,pushToMemory:t,context:n,type:"xaxis",contextMethod:n.addXaxisAnnotation}),n}},{key:"addYaxisAnnotationExternal",value:function(e,t,n){return this.addAnnotationExternal({params:e,pushToMemory:t,context:n,type:"yaxis",contextMethod:n.addYaxisAnnotation}),n}},{key:"addPointAnnotationExternal",value:function(e,t,n){return void 0===this.invertAxis&&(this.invertAxis=n.w.globals.isBarHorizontal),this.addAnnotationExternal({params:e,pushToMemory:t,context:n,type:"point",contextMethod:n.addPointAnnotation}),n}},{key:"addAnnotationExternal",value:function(e){var t=e.params,n=e.pushToMemory,r=e.context,a=e.type,i=e.contextMethod,o=r,s=o.w,u=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(a,"-annotations")),l=u.childNodes.length+1,c=new N,d=Object.assign({},"xaxis"===a?c.xAxisAnnotation:"yaxis"===a?c.yAxisAnnotation:c.pointAnnotation),h=b.extend(d,t);switch(a){case"xaxis":this.addXaxisAnnotation(h,u,l);break;case"yaxis":this.addYaxisAnnotation(h,u,l);break;case"point":this.addPointAnnotation(h,u,l)}var p=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(a,"-annotations .apexcharts-").concat(a,"-annotation-label[rel='").concat(l,"']")),f=this.helpers.addBackgroundToAnno(p,h);return f&&u.insertBefore(f.node,p),n&&s.globals.memory.methodsToExec.push({context:o,id:h.id?h.id:b.randomId(),method:i,label:"addAnnotation",params:t}),r}},{key:"clearAnnotations",value:function(e){var t=e.w,n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");t.globals.memory.methodsToExec.map((function(e,n){"addText"!==e.label&&"addAnnotation"!==e.label||t.globals.memory.methodsToExec.splice(n,1)})),n=b.listToArray(n),Array.prototype.forEach.call(n,(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}))}},{key:"removeAnnotation",value:function(e,t){var n=e.w,r=n.globals.dom.baseEl.querySelectorAll(".".concat(t));r&&(n.globals.memory.methodsToExec.map((function(e,r){e.id===t&&n.globals.memory.methodsToExec.splice(r,1)})),Array.prototype.forEach.call(r,(function(e){e.parentElement.removeChild(e)})))}}]),e}(),M=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.opts=null,this.seriesIndex=0}return l(e,[{key:"clippedImgArea",value:function(e){var t=this.w,n=t.config,r=parseInt(t.globals.gridWidth,10),a=parseInt(t.globals.gridHeight,10),i=r>a?r:a,o=e.image,s=0,u=0;void 0===e.width&&void 0===e.height?void 0!==n.fill.image.width&&void 0!==n.fill.image.height?(s=n.fill.image.width+1,u=n.fill.image.height):(s=i+1,u=i):(s=e.width,u=e.height);var l=document.createElementNS(t.globals.SVGNS,"pattern");w.setAttrs(l,{id:e.patternID,patternUnits:e.patternUnits?e.patternUnits:"userSpaceOnUse",width:s+"px",height:u+"px"});var c=document.createElementNS(t.globals.SVGNS,"image");l.appendChild(c),c.setAttributeNS(window.SVG.xlink,"href",o),w.setAttrs(c,{x:0,y:0,preserveAspectRatio:"none",width:s+"px",height:u+"px"}),c.style.opacity=e.opacity,t.globals.dom.elDefs.node.appendChild(l)}},{key:"getSeriesIndex",value:function(e){var t=this.w;return("bar"===t.config.chart.type||"rangeBar"===t.config.chart.type)&&t.config.plotOptions.bar.distributed||"heatmap"===t.config.chart.type||"treemap"===t.config.chart.type?this.seriesIndex=e.seriesNumber:this.seriesIndex=e.seriesNumber%t.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(e){var t=this.w;this.opts=e;var n,r,a,i=this.w.config;this.seriesIndex=this.getSeriesIndex(e);var o=this.getFillColors()[this.seriesIndex];void 0!==t.globals.seriesColors[this.seriesIndex]&&(o=t.globals.seriesColors[this.seriesIndex]),"function"==typeof o&&(o=o({seriesIndex:this.seriesIndex,dataPointIndex:e.dataPointIndex,value:e.value,w:t}));var s=this.getFillType(this.seriesIndex),u=Array.isArray(i.fill.opacity)?i.fill.opacity[this.seriesIndex]:i.fill.opacity;e.color&&(o=e.color);var l=o;if(-1===o.indexOf("rgb")?o.length<9&&(l=b.hexToRgba(o,u)):o.indexOf("rgba")>-1&&(u=b.getOpacityFromRGBA(o)),e.opacity&&(u=e.opacity),"pattern"===s&&(r=this.handlePatternFill(r,o,u,l)),"gradient"===s&&(a=this.handleGradientFill(o,u,this.seriesIndex)),"image"===s){var c=i.fill.image.src,d=e.patternID?e.patternID:"";this.clippedImgArea({opacity:u,image:Array.isArray(c)?e.seriesNumber<c.length?c[e.seriesNumber]:c[0]:c,width:e.width?e.width:void 0,height:e.height?e.height:void 0,patternUnits:e.patternUnits,patternID:"pattern".concat(t.globals.cuid).concat(e.seriesNumber+1).concat(d)}),n="url(#pattern".concat(t.globals.cuid).concat(e.seriesNumber+1).concat(d,")")}else n="gradient"===s?a:"pattern"===s?r:l;return e.solid&&(n=l),n}},{key:"getFillType",value:function(e){var t=this.w;return Array.isArray(t.config.fill.type)?t.config.fill.type[e]:t.config.fill.type}},{key:"getFillColors",value:function(){var e=this.w,t=e.config,n=this.opts,r=[];return e.globals.comboCharts?"line"===e.config.series[this.seriesIndex].type?Array.isArray(e.globals.stroke.colors)?r=e.globals.stroke.colors:r.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?r=e.globals.fill.colors:r.push(e.globals.fill.colors):"line"===t.chart.type?Array.isArray(e.globals.stroke.colors)?r=e.globals.stroke.colors:r.push(e.globals.stroke.colors):Array.isArray(e.globals.fill.colors)?r=e.globals.fill.colors:r.push(e.globals.fill.colors),void 0!==n.fillColors&&(r=[],Array.isArray(n.fillColors)?r=n.fillColors.slice():r.push(n.fillColors)),r}},{key:"handlePatternFill",value:function(e,t,n,r){var a=this.w.config,i=this.opts,o=new w(this.ctx),s=void 0===a.fill.pattern.strokeWidth?Array.isArray(a.stroke.width)?a.stroke.width[this.seriesIndex]:a.stroke.width:Array.isArray(a.fill.pattern.strokeWidth)?a.fill.pattern.strokeWidth[this.seriesIndex]:a.fill.pattern.strokeWidth,u=t;return Array.isArray(a.fill.pattern.style)?void 0!==a.fill.pattern.style[i.seriesNumber]?o.drawPattern(a.fill.pattern.style[i.seriesNumber],a.fill.pattern.width,a.fill.pattern.height,u,s,n):r:o.drawPattern(a.fill.pattern.style,a.fill.pattern.width,a.fill.pattern.height,u,s,n)}},{key:"handleGradientFill",value:function(e,t,n){var r,a=this.w.config,i=this.opts,o=new w(this.ctx),s=new b,u=a.fill.gradient.type,l=e,c=void 0===a.fill.gradient.opacityFrom?t:Array.isArray(a.fill.gradient.opacityFrom)?a.fill.gradient.opacityFrom[n]:a.fill.gradient.opacityFrom;l.indexOf("rgba")>-1&&(c=b.getOpacityFromRGBA(l));var d=void 0===a.fill.gradient.opacityTo?t:Array.isArray(a.fill.gradient.opacityTo)?a.fill.gradient.opacityTo[n]:a.fill.gradient.opacityTo;if(void 0===a.fill.gradient.gradientToColors||0===a.fill.gradient.gradientToColors.length)r="dark"===a.fill.gradient.shade?s.shadeColor(-1*parseFloat(a.fill.gradient.shadeIntensity),e.indexOf("rgb")>-1?b.rgb2hex(e):e):s.shadeColor(parseFloat(a.fill.gradient.shadeIntensity),e.indexOf("rgb")>-1?b.rgb2hex(e):e);else if(a.fill.gradient.gradientToColors[i.seriesNumber]){var h=a.fill.gradient.gradientToColors[i.seriesNumber];r=h,h.indexOf("rgba")>-1&&(d=b.getOpacityFromRGBA(h))}else r=e;if(a.fill.gradient.inverseColors){var p=l;l=r,r=p}return l.indexOf("rgb")>-1&&(l=b.rgb2hex(l)),r.indexOf("rgb")>-1&&(r=b.rgb2hex(r)),o.drawGradient(u,l,r,c,d,i.size,a.fill.gradient.stops,a.fill.gradient.colorStops,n)}}]),e}(),R=function(){function e(t,n){s(this,e),this.ctx=t,this.w=t.w}return l(e,[{key:"setGlobalMarkerSize",value:function(){var e=this.w;if(e.globals.markers.size=Array.isArray(e.config.markers.size)?e.config.markers.size:[e.config.markers.size],e.globals.markers.size.length>0){if(e.globals.markers.size.length<e.globals.series.length+1)for(var t=0;t<=e.globals.series.length;t++)void 0===e.globals.markers.size[t]&&e.globals.markers.size.push(e.globals.markers.size[0])}else e.globals.markers.size=e.config.series.map((function(t){return e.config.markers.size}))}},{key:"plotChartMarkers",value:function(e,t,n,r){var a,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.w,s=t,u=e,l=null,c=new w(this.ctx),d=o.config.markers.discrete&&o.config.markers.discrete.length;if((o.globals.markers.size[t]>0||i||d)&&(l=c.group({class:i||d?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(o.globals.cuid,")")),Array.isArray(u.x))for(var h=0;h<u.x.length;h++){var p=n;1===n&&0===h&&(p=0),1===n&&1===h&&(p=1);var f="apexcharts-marker";"line"!==o.config.chart.type&&"area"!==o.config.chart.type||o.globals.comboCharts||o.config.tooltip.intersect||(f+=" no-pointer-events");var m=Array.isArray(o.config.markers.size)?o.globals.markers.size[t]>0:o.config.markers.size>0;if(m||i||d){b.isNumber(u.y[h])?f+=" w".concat(b.randomId()):f="apexcharts-nullpoint";var g=this.getMarkerConfig({cssClass:f,seriesIndex:t,dataPointIndex:p});o.config.series[s].data[p]&&(o.config.series[s].data[p].fillColor&&(g.pointFillColor=o.config.series[s].data[p].fillColor),o.config.series[s].data[p].strokeColor&&(g.pointStrokeColor=o.config.series[s].data[p].strokeColor)),r&&(g.pSize=r),(a=c.drawMarker(u.x[h],u.y[h],g)).attr("rel",p),a.attr("j",p),a.attr("index",t),a.node.setAttribute("default-marker-size",g.pSize);var v=new A(this.ctx);v.setSelectionFilter(a,t,p),this.addEvents(a),l&&l.add(a)}else void 0===o.globals.pointsArray[t]&&(o.globals.pointsArray[t]=[]),o.globals.pointsArray[t].push([u.x[h],u.y[h]])}return l}},{key:"getMarkerConfig",value:function(e){var t=e.cssClass,n=e.seriesIndex,r=e.dataPointIndex,a=void 0===r?null:r,i=e.finishRadius,o=void 0===i?null:i,s=this.w,u=this.getMarkerStyle(n),l=s.globals.markers.size[n],c=s.config.markers;return null!==a&&c.discrete.length&&c.discrete.map((function(e){e.seriesIndex===n&&e.dataPointIndex===a&&(u.pointStrokeColor=e.strokeColor,u.pointFillColor=e.fillColor,l=e.size,u.pointShape=e.shape)})),{pSize:null===o?l:o,pRadius:c.radius,width:Array.isArray(c.width)?c.width[n]:c.width,height:Array.isArray(c.height)?c.height[n]:c.height,pointStrokeWidth:Array.isArray(c.strokeWidth)?c.strokeWidth[n]:c.strokeWidth,pointStrokeColor:u.pointStrokeColor,pointFillColor:u.pointFillColor,shape:u.pointShape||(Array.isArray(c.shape)?c.shape[n]:c.shape),class:t,pointStrokeOpacity:Array.isArray(c.strokeOpacity)?c.strokeOpacity[n]:c.strokeOpacity,pointStrokeDashArray:Array.isArray(c.strokeDashArray)?c.strokeDashArray[n]:c.strokeDashArray,pointFillOpacity:Array.isArray(c.fillOpacity)?c.fillOpacity[n]:c.fillOpacity,seriesIndex:n}}},{key:"addEvents",value:function(e){var t=this.w,n=new w(this.ctx);e.node.addEventListener("mouseenter",n.pathMouseEnter.bind(this.ctx,e)),e.node.addEventListener("mouseleave",n.pathMouseLeave.bind(this.ctx,e)),e.node.addEventListener("mousedown",n.pathMouseDown.bind(this.ctx,e)),e.node.addEventListener("click",t.config.markers.onClick),e.node.addEventListener("dblclick",t.config.markers.onDblClick),e.node.addEventListener("touchstart",n.pathMouseDown.bind(this.ctx,e),{passive:!0})}},{key:"getMarkerStyle",value:function(e){var t=this.w,n=t.globals.markers.colors,r=t.config.markers.strokeColor||t.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(r)?r[e]:r,pointFillColor:Array.isArray(n)?n[e]:n}}}]),e}(),O=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return l(e,[{key:"draw",value:function(e,t,n){var r=this.w,a=new w(this.ctx),i=n.realIndex,o=n.pointsPos,s=n.zRatio,u=n.elParent,l=a.group({class:"apexcharts-series-markers apexcharts-series-".concat(r.config.chart.type)});if(l.attr("clip-path","url(#gridRectMarkerMask".concat(r.globals.cuid,")")),Array.isArray(o.x))for(var c=0;c<o.x.length;c++){var d=t+1,h=!0;0===t&&0===c&&(d=0),0===t&&1===c&&(d=1);var p=0,f=r.globals.markers.size[i];if(s!==1/0){f=r.globals.seriesZ[i][d]/s;var m=r.config.plotOptions.bubble;m.minBubbleRadius&&f<m.minBubbleRadius&&(f=m.minBubbleRadius),m.maxBubbleRadius&&f>m.maxBubbleRadius&&(f=m.maxBubbleRadius)}r.config.chart.animations.enabled||(p=f);var g=o.x[c],v=o.y[c];if(p=p||0,null!==v&&void 0!==r.globals.series[i][d]||(h=!1),h){var y=this.drawPoint(g,v,p,f,i,d,t);l.add(y)}u.add(l)}}},{key:"drawPoint",value:function(e,t,n,r,a,i,o){var s=this.w,u=a,l=new x(this.ctx),c=new A(this.ctx),d=new M(this.ctx),h=new R(this.ctx),p=new w(this.ctx),f=h.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:u,dataPointIndex:i,finishRadius:"bubble"===s.config.chart.type||s.globals.comboCharts&&s.config.series[a]&&"bubble"===s.config.series[a].type?r:null});r=f.pSize;var m,g=d.fillPath({seriesNumber:a,dataPointIndex:i,color:f.pointFillColor,patternUnits:"objectBoundingBox",value:s.globals.series[a][o]});if("circle"===f.shape?m=p.drawCircle(n):"square"!==f.shape&&"rect"!==f.shape||(m=p.drawRect(0,0,f.width-f.pointStrokeWidth/2,f.height-f.pointStrokeWidth/2,f.pRadius)),s.config.series[u].data[i]&&s.config.series[u].data[i].fillColor&&(g=s.config.series[u].data[i].fillColor),m.attr({x:e-f.width/2-f.pointStrokeWidth/2,y:t-f.height/2-f.pointStrokeWidth/2,cx:e,cy:t,fill:g,"fill-opacity":f.pointFillOpacity,stroke:f.pointStrokeColor,r:r,"stroke-width":f.pointStrokeWidth,"stroke-dasharray":f.pointStrokeDashArray,"stroke-opacity":f.pointStrokeOpacity}),s.config.chart.dropShadow.enabled){var v=s.config.chart.dropShadow;c.dropShadow(m,v,a)}if(!this.initialAnim||s.globals.dataChanged||s.globals.resized)s.globals.animationEnded=!0;else{var y=s.config.chart.animations.speed;l.animateMarker(m,0,"circle"===f.shape?r:{width:f.width,height:f.height},y,s.globals.easing,(function(){window.setTimeout((function(){l.animationCompleted(m)}),100)}))}if(s.globals.dataChanged&&"circle"===f.shape)if(this.dynamicAnim){var b,k,S,C,I=s.config.chart.animations.dynamicAnimation.speed;null!=(C=s.globals.previousPaths[a]&&s.globals.previousPaths[a][o])&&(b=C.x,k=C.y,S=void 0!==C.r?C.r:r);for(var E=0;E<s.globals.collapsedSeries.length;E++)s.globals.collapsedSeries[E].index===a&&(I=1,r=0);0===e&&0===t&&(r=0),l.animateCircle(m,{cx:b,cy:k,r:S},{cx:e,cy:t,r:r},I,s.globals.easing)}else m.attr({r:r});return m.attr({rel:i,j:i,index:a,"default-marker-size":r}),c.setSelectionFilter(m,a,i),h.addEvents(m),m.node.classList.add("apexcharts-marker"),m}},{key:"centerTextInBubble",value:function(e){var t=this.w;return{y:e+=parseInt(t.config.dataLabels.style.fontSize,10)/4}}}]),e}(),P=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return l(e,[{key:"dataLabelsCorrection",value:function(e,t,n,r,a,i,o){var s=this.w,u=!1,l=new w(this.ctx).getTextRects(n,o),c=l.width,d=l.height;t<0&&(t=0),t>s.globals.gridHeight+d&&(t=s.globals.gridHeight+d/2),void 0===s.globals.dataLabelsRects[r]&&(s.globals.dataLabelsRects[r]=[]),s.globals.dataLabelsRects[r].push({x:e,y:t,width:c,height:d});var h=s.globals.dataLabelsRects[r].length-2,p=void 0!==s.globals.lastDrawnDataLabelsIndexes[r]?s.globals.lastDrawnDataLabelsIndexes[r][s.globals.lastDrawnDataLabelsIndexes[r].length-1]:0;if(void 0!==s.globals.dataLabelsRects[r][h]){var f=s.globals.dataLabelsRects[r][p];(e>f.x+f.width+2||t>f.y+f.height+2||e+c<f.x)&&(u=!0)}return(0===a||i)&&(u=!0),{x:e,y:t,textRects:l,drawnextLabel:u}}},{key:"drawDataLabel",value:function(e,t,n){var r=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,i=this.w,o=new w(this.ctx),s=i.config.dataLabels,u=0,l=0,c=n,d=null;if(!s.enabled||!Array.isArray(e.x))return d;d=o.group({class:"apexcharts-data-labels"});for(var h=0;h<e.x.length;h++)if(u=e.x[h]+s.offsetX,l=e.y[h]+s.offsetY+a,!isNaN(u)){1===n&&0===h&&(c=0),1===n&&1===h&&(c=1);var p=i.globals.series[t][c],f="",m=function(e){return i.config.dataLabels.formatter(e,{ctx:r.ctx,seriesIndex:t,dataPointIndex:c,w:i})};if("bubble"===i.config.chart.type){f=m(p=i.globals.seriesZ[t][c]),l=e.y[h];var g=new O(this.ctx),v=g.centerTextInBubble(l,t,c);l=v.y}else void 0!==p&&(f=m(p));this.plotDataLabelsText({x:u,y:l,text:f,i:t,j:c,parent:d,offsetCorrection:!0,dataLabelsConfig:i.config.dataLabels})}return d}},{key:"plotDataLabelsText",value:function(e){var t=this.w,n=new w(this.ctx),r=e.x,a=e.y,i=e.i,o=e.j,s=e.text,u=e.textAnchor,l=e.fontSize,c=e.parent,d=e.dataLabelsConfig,h=e.color,p=e.alwaysDrawDataLabel,f=e.offsetCorrection;if(!(Array.isArray(t.config.dataLabels.enabledOnSeries)&&t.config.dataLabels.enabledOnSeries.indexOf(i)<0)){var m={x:r,y:a,drawnextLabel:!0,textRects:null};f&&(m=this.dataLabelsCorrection(r,a,s,i,o,p,parseInt(d.style.fontSize,10))),t.globals.zoomed||(r=m.x,a=m.y),m.textRects&&(r<-10-m.textRects.width||r>t.globals.gridWidth+m.textRects.width+10)&&(s="");var g=t.globals.dataLabels.style.colors[i];(("bar"===t.config.chart.type||"rangeBar"===t.config.chart.type)&&t.config.plotOptions.bar.distributed||t.config.dataLabels.distributed)&&(g=t.globals.dataLabels.style.colors[o]),"function"==typeof g&&(g=g({series:t.globals.series,seriesIndex:i,dataPointIndex:o,w:t})),h&&(g=h);var v=d.offsetX,y=d.offsetY;if("bar"!==t.config.chart.type&&"rangeBar"!==t.config.chart.type||(v=0,y=0),m.drawnextLabel){var b=n.drawText({width:100,height:parseInt(d.style.fontSize,10),x:r+v,y:a+y,foreColor:g,textAnchor:u||d.textAnchor,text:s,fontSize:l||d.style.fontSize,fontFamily:d.style.fontFamily,fontWeight:d.style.fontWeight||"normal"});if(b.attr({class:"apexcharts-datalabel",cx:r,cy:a}),d.dropShadow.enabled){var x=d.dropShadow;new A(this.ctx).dropShadow(b,x)}c.add(b),void 0===t.globals.lastDrawnDataLabelsIndexes[i]&&(t.globals.lastDrawnDataLabelsIndexes[i]=[]),t.globals.lastDrawnDataLabelsIndexes[i].push(o)}}}},{key:"addBackgroundToDataLabel",value:function(e,t){var n=this.w,r=n.config.dataLabels.background,a=r.padding,i=r.padding/2,o=t.width,s=t.height,u=new w(this.ctx).drawRect(t.x-a,t.y-i/2,o+2*a,s+i,r.borderRadius,"transparent"===n.config.chart.background?"#fff":n.config.chart.background,r.opacity,r.borderWidth,r.borderColor);return r.dropShadow.enabled&&new A(this.ctx).dropShadow(u,r.dropShadow),u}},{key:"dataLabelsBackground",value:function(){var e=this.w;if("bubble"!==e.config.chart.type)for(var t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),n=0;n<t.length;n++){var r=t[n],a=r.getBBox(),i=null;if(a.width&&a.height&&(i=this.addBackgroundToDataLabel(r,a)),i){r.parentNode.insertBefore(i.node,r);var o=r.getAttribute("fill");!e.config.chart.animations.enabled||e.globals.resized||e.globals.dataChanged?i.attr({fill:o}):i.animate().attr({fill:o}),r.setAttribute("fill",e.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var e=this.w,t=e.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),n=e.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),r=0;r<t.length;r++)n&&n.insertBefore(t[r],n.nextSibling)}}]),e}(),F=function(){function e(t){s(this,e),this.w=t.w,this.barCtx=t}return l(e,[{key:"handleBarDataLabels",value:function(e){var t=e.x,n=e.y,r=e.y1,a=e.y2,i=e.i,o=e.j,s=e.realIndex,u=e.series,l=e.barHeight,c=e.barWidth,d=e.barYPosition,h=e.visibleSeries,p=e.renderedPath,f=this.w,m=new w(this.barCtx.ctx),g=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[s]:this.barCtx.strokeWidth,v=t+parseFloat(c*h),y=n+parseFloat(l*h);f.globals.isXNumeric&&!f.globals.isBarHorizontal&&(v=t+parseFloat(c*(h+1)),y=n+parseFloat(l*(h+1))-g);var b,x=t,A=n,k=f.config.dataLabels,S=this.barCtx.barOptions.dataLabels;void 0!==d&&this.barCtx.isRangeBar&&(y=d,A=d);var C=k.offsetX,I=k.offsetY,E={width:0,height:0};if(f.config.dataLabels.enabled){var T=this.barCtx.series[i][o];E=m.getTextRects(f.globals.yLabelFormatters[0](T),parseFloat(k.style.fontSize))}var N={x:t,y:n,i:i,j:o,renderedPath:p,bcx:v,bcy:y,barHeight:l,barWidth:c,textRects:E,strokeWidth:g,dataLabelsX:x,dataLabelsY:A,barDataLabelsConfig:S,offX:C,offY:I};return b=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(N):this.calculateColumnsDataLabelsPosition(N),p.attr({cy:b.bcy,cx:b.bcx,j:o,val:u[i][o],barHeight:l,barWidth:c}),this.drawCalculatedDataLabels({x:b.dataLabelsX,y:b.dataLabelsY,val:this.barCtx.isRangeBar?[r,a]:u[i][o],i:s,j:o,barWidth:c,barHeight:l,textRects:E,dataLabelsConfig:k})}},{key:"calculateColumnsDataLabelsPosition",value:function(e){var t,n=this.w,r=e.i,a=e.j,i=e.y,o=e.bcx,s=e.barWidth,u=e.barHeight,l=e.textRects,c=e.dataLabelsY,d=e.barDataLabelsConfig,h=e.strokeWidth,p=e.offX,f=e.offY;u=Math.abs(u);var m="vertical"===n.config.plotOptions.bar.dataLabels.orientation;o-=h/2;var g=n.globals.gridWidth/n.globals.dataPoints;t=n.globals.isXNumeric?o-s/2+p:o-g+s/2+p,m&&(t=t+l.height/2-h/2-2);var v=this.barCtx.series[r][a]<0,y=i;switch(this.barCtx.isReversed&&(y=i-u+(v?2*u:0),i-=u),d.position){case"center":c=m?v?y+u/2+f:y+u/2-f:v?y-u/2+l.height/2+f:y+u/2+l.height/2-f;break;case"bottom":c=m?v?y+u+f:y+u-f:v?y-u+l.height+h+f:y+u-l.height/2+h-f;break;case"top":c=m?v?y+f:y-f:v?y-l.height/2-f:y+l.height+f}return n.config.chart.stacked||(c<0?c=0+h:c+l.height/3>n.globals.gridHeight&&(c=n.globals.gridHeight-h)),{bcx:o,bcy:i,dataLabelsX:t,dataLabelsY:c}}},{key:"calculateBarsDataLabelsPosition",value:function(e){var t=this.w,n=e.x,r=e.i,a=e.j,i=e.bcy,o=e.barHeight,s=e.barWidth,u=e.textRects,l=e.dataLabelsX,c=e.strokeWidth,d=e.barDataLabelsConfig,h=e.offX,p=e.offY,f=t.globals.gridHeight/t.globals.dataPoints;s=Math.abs(s);var m=i-(this.barCtx.isRangeBar?0:f)+o/2+u.height/2+p-3,g=this.barCtx.series[r][a]<0,v=n;switch(this.barCtx.isReversed&&(v=n+s-(g?2*s:0),n=t.globals.gridWidth-s),d.position){case"center":l=g?v+s/2-h:Math.max(u.width/2,v-s/2)+h;break;case"bottom":l=g?v+s-c-Math.round(u.width/2)-h:v-s+c+Math.round(u.width/2)+h;break;case"top":l=g?v-c+Math.round(u.width/2)-h:v-c-Math.round(u.width/2)+h}return t.config.chart.stacked||(l<0?l=l+u.width+c:l+u.width/2>t.globals.gridWidth&&(l=t.globals.gridWidth-u.width-c)),{bcx:n,bcy:i,dataLabelsX:l,dataLabelsY:m}}},{key:"drawCalculatedDataLabels",value:function(e){var t=e.x,n=e.y,r=e.val,a=e.i,o=e.j,s=e.textRects,u=e.barHeight,l=e.barWidth,c=e.dataLabelsConfig,d=this.w,h="rotate(0)";"vertical"===d.config.plotOptions.bar.dataLabels.orientation&&(h="rotate(-90, ".concat(t,", ").concat(n,")"));var p=new P(this.barCtx.ctx),f=new w(this.barCtx.ctx),m=c.formatter,g=null,v=d.globals.collapsedSeriesIndices.indexOf(a)>-1;if(c.enabled&&!v){g=f.group({class:"apexcharts-data-labels",transform:h});var y="";void 0!==r&&(y=m(r,{seriesIndex:a,dataPointIndex:o,w:d}));var b=d.globals.series[a][o]<0,x=d.config.plotOptions.bar.dataLabels.position;"vertical"===d.config.plotOptions.bar.dataLabels.orientation&&("top"===x&&(c.textAnchor=b?"end":"start"),"center"===x&&(c.textAnchor="middle"),"bottom"===x&&(c.textAnchor=b?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&l<f.getTextRects(y,parseFloat(c.style.fontSize)).width&&(y=""),d.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?s.width/1.6>Math.abs(l)&&(y=""):s.height/1.6>Math.abs(u)&&(y=""));var A=i({},c);this.barCtx.isHorizontal&&r<0&&("start"===c.textAnchor?A.textAnchor="end":"end"===c.textAnchor&&(A.textAnchor="start")),p.plotDataLabelsText({x:t,y:n,text:y,i:a,j:o,parent:g,dataLabelsConfig:A,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return g}}]),e}(),D=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.legendInactiveClass="legend-mouseover-inactive"}return l(e,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(e){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(b.escapeString(e),"']"))}},{key:"isSeriesHidden",value:function(e){var t=this.getSeriesByName(e),n=parseInt(t.getAttribute("data:realIndex"),10);return{isHidden:t.classList.contains("apexcharts-series-collapsed"),realIndex:n}}},{key:"addCollapsedClassToSeries",value:function(e,t){var n=this.w;function r(n){for(var r=0;r<n.length;r++)n[r].index===t&&e.node.classList.add("apexcharts-series-collapsed")}r(n.globals.collapsedSeries),r(n.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(e){var t=this.isSeriesHidden(e);return this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,t.isHidden),t.isHidden}},{key:"showSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!0)}},{key:"hideSeries",value:function(e){var t=this.isSeriesHidden(e);t.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(t.realIndex,!1)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.w,a=b.clone(r.globals.initialSeries);r.globals.previousPaths=[],n?(r.globals.collapsedSeries=[],r.globals.ancillaryCollapsedSeries=[],r.globals.collapsedSeriesIndices=[],r.globals.ancillaryCollapsedSeriesIndices=[]):a=this.emptyCollapsedSeries(a),r.config.series=a,e&&(t&&(r.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(a,r.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(e){for(var t=this.w,n=0;n<e.length;n++)t.globals.collapsedSeriesIndices.indexOf(n)>-1&&(e[n].data=[]);return e}},{key:"toggleSeriesOnHover",value:function(e,t){var n=this.w;t||(t=e.target);var r=n.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===e.type){var a=parseInt(t.getAttribute("rel"),10)-1,i=null,o=null;n.globals.axisCharts||"radialBar"===n.config.chart.type?n.globals.axisCharts?(i=n.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(a,"']")),o=n.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(a,"']"))):i=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(a+1,"']")):i=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(a+1,"'] path"));for(var s=0;s<r.length;s++)r[s].classList.add(this.legendInactiveClass);null!==i&&(n.globals.axisCharts||i.parentNode.classList.remove(this.legendInactiveClass),i.classList.remove(this.legendInactiveClass),null!==o&&o.classList.remove(this.legendInactiveClass))}else if("mouseout"===e.type)for(var u=0;u<r.length;u++)r[u].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(e,t){var n=this,r=this.w,a=r.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),i=function(e){for(var t=0;t<a.length;t++)a[t].classList[e](n.legendInactiveClass)};if("mousemove"===e.type){var o=parseInt(t.getAttribute("rel"),10)-1;i("add"),function(e){for(var t=0;t<a.length;t++){var r=parseInt(a[t].getAttribute("val"),10);r>=e.from&&r<=e.to&&a[t].classList.remove(n.legendInactiveClass)}}(r.config.plotOptions.heatmap.colorScale.ranges[o])}else"mouseout"===e.type&&i("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=this.w,r=0;if(n.config.series.length>1)for(var a=n.config.series.map((function(t,r){var a=!1;return e&&(a="bar"===n.config.series[r].type||"column"===n.config.series[r].type),t.data&&t.data.length>0&&!a?r:-1})),i="asc"===t?0:a.length-1;"asc"===t?i<a.length:i>=0;"asc"===t?i++:i--)if(-1!==a[i]){r=a[i];break}return r}},{key:"getPreviousPaths",value:function(){var e=this.w;function t(t,n,r){for(var a=t[n].childNodes,i={type:r,paths:[],realIndex:t[n].getAttribute("data:realIndex")},o=0;o<a.length;o++)if(a[o].hasAttribute("pathTo")){var s=a[o].getAttribute("pathTo");i.paths.push({d:s})}e.globals.previousPaths.push(i)}e.globals.previousPaths=[],["line","area","bar","rangebar","candlestick","radar"].forEach((function(n){for(var r,a=(r=n,e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(r,"-series .apexcharts-series"))),i=0;i<a.length;i++)t(a,i,n)})),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series"));if(n.length>0)for(var r=function(t){for(var n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(t,"'] rect")),r=[],a=function(e){var t=function(t){return n[e].getAttribute(t)},a={x:parseFloat(t("x")),y:parseFloat(t("y")),width:parseFloat(t("width")),height:parseFloat(t("height"))};r.push({rect:a,color:n[e].getAttribute("color")})},i=0;i<n.length;i++)a(i);e.globals.previousPaths.push(r)},a=0;a<n.length;a++)r(a);e.globals.axisCharts||(e.globals.previousPaths=e.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(e){var t=this.w,n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e,"-series .apexcharts-series"));if(n.length>0)for(var r=0;r<n.length;r++){for(var a=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(e,"-series .apexcharts-series[data\\:realIndex='").concat(r,"'] circle")),i=[],o=0;o<a.length;o++)i.push({x:a[o].getAttribute("cx"),y:a[o].getAttribute("cy"),r:a[o].getAttribute("r")});t.globals.previousPaths.push(i)}}},{key:"clearPreviousPaths",value:function(){var e=this.w;e.globals.previousPaths=[],e.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var e=this.w,t=e.config.noData,n=new w(this.ctx),r=e.globals.svgWidth/2,a=e.globals.svgHeight/2,i="middle";if(e.globals.noData=!0,e.globals.animationEnded=!0,"left"===t.align?(r=10,i="start"):"right"===t.align&&(r=e.globals.svgWidth-10,i="end"),"top"===t.verticalAlign?a=50:"bottom"===t.verticalAlign&&(a=e.globals.svgHeight-50),r+=t.offsetX,a=a+parseInt(t.style.fontSize,10)+2+t.offsetY,void 0!==t.text&&""!==t.text){var o=n.drawText({x:r,y:a,text:t.text,textAnchor:i,fontSize:t.style.fontSize,fontFamily:t.style.fontFamily,foreColor:t.style.color,opacity:1,class:"apexcharts-text-nodata"});e.globals.dom.Paper.add(o)}}},{key:"setNullSeriesToZeroValues",value:function(e){for(var t=this.w,n=0;n<e.length;n++)if(0===e[n].length)for(var r=0;r<e[t.globals.maxValsInArrayIndex].length;r++)e[n].push(0);return e}},{key:"hasAllSeriesEqualX",value:function(){for(var e=!0,t=this.w,n=this.filteredSeriesX(),r=0;r<n.length-1;r++)if(n[r][0]!==n[r+1][0]){e=!1;break}return t.globals.allSeriesHasEqualX=e,e}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map((function(e){return e.length>0?e:[]}))}}]),e}(),L=function(){function e(t){s(this,e),this.w=t.w,this.barCtx=t}return l(e,[{key:"initVariables",value:function(e){var t=this.w;this.barCtx.series=e,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var n=0;n<e.length;n++)if(e[n].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=e[n].length),t.globals.isXNumeric)for(var r=0;r<e[n].length;r++)t.globals.seriesX[n][r]>t.globals.minX&&t.globals.seriesX[n][r]<t.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=t.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],this.barCtx.radiusOnSeriesNumber=e.length-1,t.globals.comboCharts||this.checkZeroSeries({series:e})}},{key:"initialPositions",value:function(){var e,t,n,r,a,i,o,s,u=this.w,l=u.globals.dataPoints;this.barCtx.isRangeBar&&(l=u.globals.labels.length);var c=this.barCtx.seriesLen;if(u.config.plotOptions.bar.rangeBarGroupRows&&(c=1),this.barCtx.isHorizontal)a=(n=u.globals.gridHeight/l)/c,u.globals.isXNumeric&&(a=(n=u.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),a=a*parseInt(this.barCtx.barOptions.barHeight,10)/100,s=this.barCtx.baseLineInvertedY+u.globals.padHorizontal+(this.barCtx.isReversed?u.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),t=(n-a*this.barCtx.seriesLen)/2;else{if(r=u.globals.gridWidth/this.barCtx.visibleItems,u.config.xaxis.convertedCatToNumeric&&(r=u.globals.gridWidth/u.globals.dataPoints),i=r/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100,u.globals.isXNumeric){var d=this.barCtx.xRatio;u.config.xaxis.convertedCatToNumeric&&(d=this.barCtx.initialXRatio),u.globals.minXDiff&&.5!==u.globals.minXDiff&&u.globals.minXDiff/d>0&&(r=u.globals.minXDiff/d),(i=r/this.barCtx.seriesLen*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(i=1)}o=u.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?u.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),e=u.globals.padHorizontal+(r-i*this.barCtx.seriesLen)/2}return{x:e,y:t,yDivision:n,xDivision:r,barHeight:a,barWidth:i,zeroH:o,zeroW:s}}},{key:"getPathFillColor",value:function(e,t,n,r){var a=this.w,i=new M(this.barCtx.ctx),o=null,s=this.barCtx.barOptions.distributed?n:t;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map((function(r){e[t][n]>=r.from&&e[t][n]<=r.to&&(o=r.color)})),a.config.series[t].data[n]&&a.config.series[t].data[n].fillColor&&(o=a.config.series[t].data[n].fillColor),i.fillPath({seriesNumber:this.barCtx.barOptions.distributed?s:r,dataPointIndex:n,color:o,value:e[t][n]})}},{key:"getStrokeWidth",value:function(e,t,n){var r=0,a=this.w;return void 0===this.barCtx.series[e][t]||null===this.barCtx.series[e][t]?this.barCtx.isNullValue=!0:this.barCtx.isNullValue=!1,a.config.stroke.show&&(this.barCtx.isNullValue||(r=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[n]:this.barCtx.strokeWidth)),r}},{key:"barBackground",value:function(e){var t=e.j,n=e.i,r=e.x1,a=e.x2,i=e.y1,o=e.y2,s=e.elSeries,u=this.w,l=new w(this.barCtx.ctx),c=new D(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&c===n){t>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(t%=this.barCtx.barOptions.colors.backgroundBarColors.length);var d=this.barCtx.barOptions.colors.backgroundBarColors[t],h=l.drawRect(void 0!==r?r:0,void 0!==i?i:0,void 0!==a?a:u.globals.gridWidth,void 0!==o?o:u.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,d,this.barCtx.barOptions.colors.backgroundBarOpacity);s.add(h),h.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(e){var t=e.barWidth,n=e.barXPosition,r=e.yRatio,a=e.y1,i=e.y2,o=e.strokeWidth,s=e.series,u=e.realIndex,l=e.i,c=e.j,d=e.w,h=new w(this.barCtx.ctx);(o=Array.isArray(o)?o[u]:o)||(o=0);var p={barWidth:t,strokeWidth:o,yRatio:r,barXPosition:n,y1:a,y2:i},f=this.getRoundedBars(d,p,s,l,c),m=n,g=n+t,v=h.move(m,a),y=h.move(m,a),b=h.line(g-o,a);return d.globals.previousPaths.length>0&&(y=this.barCtx.getPreviousPath(u,c,!1)),v=v+h.line(m,f.y2)+f.pathWithRadius+h.line(g-o,f.y2)+b+b+"z",y=y+h.line(m,a)+b+b+b+b+b+h.line(m,a),d.config.chart.stacked&&(this.barCtx.yArrj.push(f.y2),this.barCtx.yArrjF.push(Math.abs(a-f.y2)),this.barCtx.yArrjVal.push(this.barCtx.series[l][c])),{pathTo:v,pathFrom:y}}},{key:"getBarpaths",value:function(e){var t=e.barYPosition,n=e.barHeight,r=e.x1,a=e.x2,i=e.strokeWidth,o=e.series,s=e.realIndex,u=e.i,l=e.j,c=e.w,d=new w(this.barCtx.ctx);(i=Array.isArray(i)?i[s]:i)||(i=0);var h={barHeight:n,strokeWidth:i,barYPosition:t,x2:a,x1:r},p=this.getRoundedBars(c,h,o,u,l),f=d.move(r,t),m=d.move(r,t);c.globals.previousPaths.length>0&&(m=this.barCtx.getPreviousPath(s,l,!1));var g=t,v=t+n,y=d.line(r,v-i);return f=f+d.line(p.x2,g)+p.pathWithRadius+d.line(p.x2,v-i)+y+y+"z",m=m+d.line(r,g)+y+y+y+y+y+d.line(r,g),c.config.chart.stacked&&(this.barCtx.xArrj.push(p.x2),this.barCtx.xArrjF.push(Math.abs(r-p.x2)),this.barCtx.xArrjVal.push(this.barCtx.series[u][l])),{pathTo:f,pathFrom:m}}},{key:"getRoundedBars",value:function(e,t,n,r,a){var i=new w(this.barCtx.ctx),o=0,s=e.config.plotOptions.bar.borderRadius,u=Array.isArray(s);if(o=u?s[r>s.length-1?s.length-1:r]:s,e.config.chart.stacked&&n.length>1&&r!==this.barCtx.radiusOnSeriesNumber&&!u&&(o=0),this.barCtx.isHorizontal){var l="",c=t.x2;if(Math.abs(t.x1-t.x2)<o&&(o=Math.abs(t.x1-t.x2)),void 0!==n[r][a]||null!==n[r][a]){var d=this.barCtx.isReversed?n[r][a]>0:n[r][a]<0;d&&(o*=-1),c-=o,l=i.quadraticCurve(c+o,t.barYPosition,c+o,t.barYPosition+(d?-1*o:o))+i.line(c+o,t.barYPosition+t.barHeight-t.strokeWidth-(d?-1*o:o))+i.quadraticCurve(c+o,t.barYPosition+t.barHeight-t.strokeWidth,c,t.barYPosition+t.barHeight-t.strokeWidth)}return{pathWithRadius:l,x2:c}}var h="",p=t.y2;if(Math.abs(t.y1-t.y2)<o&&(o=Math.abs(t.y1-t.y2)),void 0!==n[r][a]||null!==n[r][a]){var f=n[r][a]<0;f&&(o*=-1),p+=o,h=i.quadraticCurve(t.barXPosition,p-o,t.barXPosition+(f?-1*o:o),p-o)+i.line(t.barXPosition+t.barWidth-t.strokeWidth-(f?-1*o:o),p-o)+i.quadraticCurve(t.barXPosition+t.barWidth-t.strokeWidth,p-o,t.barXPosition+t.barWidth-t.strokeWidth,p)}return{pathWithRadius:h,y2:p}}},{key:"checkZeroSeries",value:function(e){for(var t=e.series,n=this.w,r=0;r<t.length;r++){for(var a=0,i=0;i<t[n.globals.maxValsInArrayIndex].length;i++)a+=t[r][i];0===a&&this.barCtx.zeroSerieses.push(r)}for(var o=t.length-1;o>=0;o--)this.barCtx.zeroSerieses.indexOf(o)>-1&&o===this.radiusOnSeriesNumber&&(this.barCtx.radiusOnSeriesNumber-=1);for(var s=t.length-1;s>=0;s--)n.globals.collapsedSeriesIndices.indexOf(this.barCtx.radiusOnSeriesNumber)>-1&&(this.barCtx.radiusOnSeriesNumber-=1)}},{key:"getXForValue",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=n?t:null;return null!=e&&(r=t+e/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?e/this.barCtx.invertedYRatio:0)),r}},{key:"getYForValue",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=n?t:null;return null!=e&&(r=t-e/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?e/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),r}},{key:"getGoalValues",value:function(e,t,n,r,a){var i=this,o=this.w,s=[];return o.globals.seriesGoals[r]&&o.globals.seriesGoals[r][a]&&Array.isArray(o.globals.seriesGoals[r][a])&&o.globals.seriesGoals[r][a].forEach((function(r){var a;s.push((c(a={},e,"x"===e?i.getXForValue(r.value,t,!1):i.getYForValue(r.value,n,!1)),c(a,"attrs",r),a))})),s}},{key:"drawGoalLine",value:function(e){var t=e.barXPosition,n=e.barYPosition,r=e.goalX,a=e.goalY,i=e.barWidth,o=e.barHeight,s=new w(this.barCtx.ctx),u=s.group({className:"apexcharts-bar-goals-groups"}),l=null;return this.barCtx.isHorizontal?Array.isArray(r)&&r.forEach((function(e){var t=void 0!==e.attrs.strokeHeight?e.attrs.strokeHeight:o/2,r=n+t+o/2;l=s.drawLine(e.x,r-2*t,e.x,r,e.attrs.strokeColor?e.attrs.strokeColor:void 0,e.attrs.strokeDashArray,e.attrs.strokeWidth?e.attrs.strokeWidth:2,e.attrs.strokeLineCap),u.add(l)})):Array.isArray(a)&&a.forEach((function(e){var n=void 0!==e.attrs.strokeWidth?e.attrs.strokeWidth:i/2,r=t+n+i/2;l=s.drawLine(r-2*n,e.y,r,e.y,e.attrs.strokeColor?e.attrs.strokeColor:void 0,e.attrs.strokeDashArray,e.attrs.strokeHeight?e.attrs.strokeHeight:2,e.attrs.strokeLineCap),u.add(l)})),u}}]),e}(),z=function(){function e(t,n){s(this,e),this.ctx=t,this.w=t.w;var r=this.w;this.barOptions=r.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=r.config.stroke.width,this.isNullValue=!1,this.isRangeBar=r.globals.seriesRangeBar.length&&this.isHorizontal,this.xyRatios=n,null!==this.xyRatios&&(this.xRatio=n.xRatio,this.initialXRatio=n.initialXRatio,this.yRatio=n.yRatio,this.invertedXRatio=n.invertedXRatio,this.invertedYRatio=n.invertedYRatio,this.baseLineY=n.baseLineY,this.baseLineInvertedY=n.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.barHelpers=new L(this)}return l(e,[{key:"draw",value:function(e,t){var n=this.w,r=new w(this.ctx),a=new k(this.ctx,n);e=a.getLogSeries(e),this.series=e,this.yRatio=a.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);var o=r.group({class:"apexcharts-bar-series apexcharts-plot-series"});n.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering.");for(var s=0,u=0;s<e.length;s++,u++){var l,c,d,h,p=void 0,f=void 0,m=[],g=[],v=n.globals.comboCharts?t[s]:s,y=r.group({class:"apexcharts-series",rel:s+1,seriesName:b.escapeString(n.globals.seriesNames[v]),"data:realIndex":v});this.ctx.series.addCollapsedClassToSeries(y,v),e[s].length>0&&(this.visibleI=this.visibleI+1);var x=0,A=0;this.yRatio.length>1&&(this.yaxisIndex=v),this.isReversed=n.config.yaxis[this.yaxisIndex]&&n.config.yaxis[this.yaxisIndex].reversed;var S=this.barHelpers.initialPositions();f=S.y,x=S.barHeight,c=S.yDivision,h=S.zeroW,p=S.x,A=S.barWidth,l=S.xDivision,d=S.zeroH,this.horizontal||g.push(p+A/2);for(var C=r.group({class:"apexcharts-datalabels","data:realIndex":v}),I=r.group({class:"apexcharts-bar-goals-markers",style:"pointer-events: none"}),E=0;E<n.globals.dataPoints;E++){var T=this.barHelpers.getStrokeWidth(s,E,v),N=null,_={indexes:{i:s,j:E,realIndex:v,bc:u},x:p,y:f,strokeWidth:T,elSeries:y};this.isHorizontal?(N=this.drawBarPaths(i(i({},_),{},{barHeight:x,zeroW:h,yDivision:c})),A=this.series[s][E]/this.invertedYRatio):(N=this.drawColumnPaths(i(i({},_),{},{xDivision:l,barWidth:A,zeroH:d})),x=this.series[s][E]/this.yRatio[this.yaxisIndex]);var M=this.barHelpers.drawGoalLine({barXPosition:N.barXPosition,barYPosition:N.barYPosition,goalX:N.goalX,goalY:N.goalY,barHeight:x,barWidth:A});M&&I.add(M),f=N.y,p=N.x,E>0&&g.push(p+A/2),m.push(f);var R=this.barHelpers.getPathFillColor(e,s,E,v);this.renderSeries({realIndex:v,pathFill:R,j:E,i:s,pathFrom:N.pathFrom,pathTo:N.pathTo,strokeWidth:T,elSeries:y,x:p,y:f,series:e,barHeight:x,barWidth:A,elDataLabelsWrap:C,elGoalsMarkers:I,visibleSeries:this.visibleI,type:"bar"})}n.globals.seriesXvalues[v]=g,n.globals.seriesYvalues[v]=m,o.add(y)}return o}},{key:"renderSeries",value:function(e){var t=e.realIndex,n=e.pathFill,r=e.lineFill,a=e.j,i=e.i,o=e.pathFrom,s=e.pathTo,u=e.strokeWidth,l=e.elSeries,c=e.x,d=e.y,h=e.y1,p=e.y2,f=e.series,m=e.barHeight,g=e.barWidth,v=e.barYPosition,y=e.elDataLabelsWrap,b=e.elGoalsMarkers,x=e.visibleSeries,k=e.type,S=this.w,C=new w(this.ctx);r||(r=this.barOptions.distributed?S.globals.stroke.colors[a]:S.globals.stroke.colors[t]),S.config.series[i].data[a]&&S.config.series[i].data[a].strokeColor&&(r=S.config.series[i].data[a].strokeColor),this.isNullValue&&(n="none");var I=a/S.config.chart.animations.animateGradually.delay*(S.config.chart.animations.speed/S.globals.dataPoints)/2.4,E=C.renderPaths({i:i,j:a,realIndex:t,pathFrom:o,pathTo:s,stroke:r,strokeWidth:u,strokeLineCap:S.config.stroke.lineCap,fill:n,animationDelay:I,initialSpeed:S.config.chart.animations.speed,dataChangeSpeed:S.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(k,"-area")});E.attr("clip-path","url(#gridRectMask".concat(S.globals.cuid,")"));var T=S.config.forecastDataPoints;T.count>0&&a>=S.globals.dataPoints-T.count&&(E.node.setAttribute("stroke-dasharray",T.dashArray),E.node.setAttribute("stroke-width",T.strokeWidth),E.node.setAttribute("fill-opacity",T.fillOpacity)),void 0!==h&&void 0!==p&&(E.attr("data-range-y1",h),E.attr("data-range-y2",p)),new A(this.ctx).setSelectionFilter(E,t,a),l.add(E);var N=new F(this).handleBarDataLabels({x:c,y:d,y1:h,y2:p,i:i,j:a,series:f,realIndex:t,barHeight:m,barWidth:g,barYPosition:v,renderedPath:E,visibleSeries:x});return null!==N&&y.add(N),l.add(y),b&&l.add(b),l}},{key:"drawBarPaths",value:function(e){var t=e.indexes,n=e.barHeight,r=e.strokeWidth,a=e.zeroW,i=e.x,o=e.y,s=e.yDivision,u=e.elSeries,l=this.w,c=t.i,d=t.j;l.globals.isXNumeric&&(o=(l.globals.seriesX[c][d]-l.globals.minX)/this.invertedXRatio-n);var h=o+n*this.visibleI;i=this.barHelpers.getXForValue(this.series[c][d],a);var p=this.barHelpers.getBarpaths({barYPosition:h,barHeight:n,x1:a,x2:i,strokeWidth:r,series:this.series,realIndex:t.realIndex,i:c,j:d,w:l});return l.globals.isXNumeric||(o+=s),this.barHelpers.barBackground({j:d,i:c,y1:h-n*this.visibleI,y2:n*this.seriesLen,elSeries:u}),{pathTo:p.pathTo,pathFrom:p.pathFrom,x:i,y:o,goalX:this.barHelpers.getGoalValues("x",a,null,c,d),barYPosition:h}}},{key:"drawColumnPaths",value:function(e){var t=e.indexes,n=e.x,r=e.y,a=e.xDivision,i=e.barWidth,o=e.zeroH,s=e.strokeWidth,u=e.elSeries,l=this.w,c=t.realIndex,d=t.i,h=t.j,p=t.bc;if(l.globals.isXNumeric){var f=c;l.globals.seriesX[c].length||(f=l.globals.maxValsInArrayIndex),n=(l.globals.seriesX[f][h]-l.globals.minX)/this.xRatio-i*this.seriesLen/2}var m=n+i*this.visibleI;r=this.barHelpers.getYForValue(this.series[d][h],o);var g=this.barHelpers.getColumnPaths({barXPosition:m,barWidth:i,y1:o,y2:r,strokeWidth:s,series:this.series,realIndex:t.realIndex,i:d,j:h,w:l});return l.globals.isXNumeric||(n+=a),this.barHelpers.barBackground({bc:p,j:h,i:d,x1:m-s/2-i*this.visibleI,x2:i*this.seriesLen+s/2,elSeries:u}),{pathTo:g.pathTo,pathFrom:g.pathFrom,x:n,y:r,goalY:this.barHelpers.getGoalValues("y",null,o,d,h),barXPosition:m}}},{key:"getPreviousPath",value:function(e,t){for(var n,r=this.w,a=0;a<r.globals.previousPaths.length;a++){var i=r.globals.previousPaths[a];i.paths&&i.paths.length>0&&parseInt(i.realIndex,10)===parseInt(e,10)&&void 0!==r.globals.previousPaths[a].paths[t]&&(n=r.globals.previousPaths[a].paths[t].d)}return n}}]),e}(),B=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return l(e,[{key:"isValidDate",value:function(e){return!isNaN(this.parseDate(e))}},{key:"getTimeStamp",value:function(e){return Date.parse(e)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toISOString().substr(0,25)).getTime():new Date(e).getTime():e}},{key:"getDate",value:function(e){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(e).toUTCString()):new Date(e)}},{key:"parseDate",value:function(e){var t=Date.parse(e);if(!isNaN(t))return this.getTimeStamp(e);var n=Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(n)}},{key:"parseDateWithTimezone",value:function(e){return Date.parse(e.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(e,t){var n=this.w.globals.locale,r=this.w.config.xaxis.labels.datetimeUTC,a=["\0"].concat(g(n.months)),i=["\x01"].concat(g(n.shortMonths)),o=["\x02"].concat(g(n.days)),s=["\x03"].concat(g(n.shortDays));function u(e,t){var n=e+"";for(t=t||2;n.length<t;)n="0"+n;return n}var l=r?e.getUTCFullYear():e.getFullYear();t=(t=(t=t.replace(/(^|[^\\])yyyy+/g,"$1"+l)).replace(/(^|[^\\])yy/g,"$1"+l.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+l);var c=(r?e.getUTCMonth():e.getMonth())+1;t=(t=(t=(t=t.replace(/(^|[^\\])MMMM+/g,"$1"+a[0])).replace(/(^|[^\\])MMM/g,"$1"+i[0])).replace(/(^|[^\\])MM/g,"$1"+u(c))).replace(/(^|[^\\])M/g,"$1"+c);var d=r?e.getUTCDate():e.getDate();t=(t=(t=(t=t.replace(/(^|[^\\])dddd+/g,"$1"+o[0])).replace(/(^|[^\\])ddd/g,"$1"+s[0])).replace(/(^|[^\\])dd/g,"$1"+u(d))).replace(/(^|[^\\])d/g,"$1"+d);var h=r?e.getUTCHours():e.getHours(),p=h>12?h-12:0===h?12:h;t=(t=(t=(t=t.replace(/(^|[^\\])HH+/g,"$1"+u(h))).replace(/(^|[^\\])H/g,"$1"+h)).replace(/(^|[^\\])hh+/g,"$1"+u(p))).replace(/(^|[^\\])h/g,"$1"+p);var f=r?e.getUTCMinutes():e.getMinutes();t=(t=t.replace(/(^|[^\\])mm+/g,"$1"+u(f))).replace(/(^|[^\\])m/g,"$1"+f);var m=r?e.getUTCSeconds():e.getSeconds();t=(t=t.replace(/(^|[^\\])ss+/g,"$1"+u(m))).replace(/(^|[^\\])s/g,"$1"+m);var v=r?e.getUTCMilliseconds():e.getMilliseconds();t=t.replace(/(^|[^\\])fff+/g,"$1"+u(v,3)),v=Math.round(v/10),t=t.replace(/(^|[^\\])ff/g,"$1"+u(v)),v=Math.round(v/10);var y=h<12?"AM":"PM";t=(t=(t=t.replace(/(^|[^\\])f/g,"$1"+v)).replace(/(^|[^\\])TT+/g,"$1"+y)).replace(/(^|[^\\])T/g,"$1"+y.charAt(0));var b=y.toLowerCase();t=(t=t.replace(/(^|[^\\])tt+/g,"$1"+b)).replace(/(^|[^\\])t/g,"$1"+b.charAt(0));var x=-e.getTimezoneOffset(),A=r||!x?"Z":x>0?"+":"-";if(!r){var w=(x=Math.abs(x))%60;A+=u(Math.floor(x/60))+":"+u(w)}t=t.replace(/(^|[^\\])K/g,"$1"+A);var k=(r?e.getUTCDay():e.getDay())+1;return(t=(t=(t=(t=t.replace(new RegExp(o[0],"g"),o[k])).replace(new RegExp(s[0],"g"),s[k])).replace(new RegExp(a[0],"g"),a[c])).replace(new RegExp(i[0],"g"),i[c])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(e,t,n){var r=this.w;void 0!==r.config.xaxis.min&&(e=r.config.xaxis.min),void 0!==r.config.xaxis.max&&(t=r.config.xaxis.max);var a=this.getDate(e),i=this.getDate(t),o=this.formatDate(a,"yyyy MM dd HH mm ss fff").split(" "),s=this.formatDate(i,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(o[6],10),maxMillisecond:parseInt(s[6],10),minSecond:parseInt(o[5],10),maxSecond:parseInt(s[5],10),minMinute:parseInt(o[4],10),maxMinute:parseInt(s[4],10),minHour:parseInt(o[3],10),maxHour:parseInt(s[3],10),minDate:parseInt(o[2],10),maxDate:parseInt(s[2],10),minMonth:parseInt(o[1],10)-1,maxMonth:parseInt(s[1],10)-1,minYear:parseInt(o[0],10),maxYear:parseInt(s[0],10)}}},{key:"isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"calculcateLastDaysOfMonth",value:function(e,t,n){return this.determineDaysOfMonths(e,t)-n}},{key:"determineDaysOfYear",value:function(e){var t=365;return this.isLeapYear(e)&&(t=366),t}},{key:"determineRemainingDaysOfYear",value:function(e,t,n){var r=this.daysCntOfYear[t]+n;return t>1&&this.isLeapYear()&&r++,r}},{key:"determineDaysOfMonths",value:function(e,t){var n=30;switch(e=b.monthMod(e),!0){case this.months30.indexOf(e)>-1:2===e&&(n=this.isLeapYear(t)?29:28);break;case this.months31.indexOf(e)>-1:default:n=31}return n}}]),e}(),W=function(e){d(n,z);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"draw",value:function(e,t){var n=this.w,r=new w(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=e,this.seriesRangeStart=n.globals.seriesRangeStart,this.seriesRangeEnd=n.globals.seriesRangeEnd,this.barHelpers.initVariables(e);for(var a=r.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),o=0;o<e.length;o++){var s,u,l,c=void 0,d=void 0,h=void 0,p=n.globals.comboCharts?t[o]:o,f=r.group({class:"apexcharts-series",seriesName:b.escapeString(n.globals.seriesNames[p]),rel:o+1,"data:realIndex":p});this.ctx.series.addCollapsedClassToSeries(f,p),e[o].length>0&&(this.visibleI=this.visibleI+1);var m=0,g=0;this.yRatio.length>1&&(this.yaxisIndex=p);var v=this.barHelpers.initialPositions();d=v.y,l=v.zeroW,c=v.x,g=v.barWidth,s=v.xDivision,u=v.zeroH;for(var y=r.group({class:"apexcharts-datalabels","data:realIndex":p}),x=r.group({class:"apexcharts-rangebar-goals-markers",style:"pointer-events: none"}),A=0;A<n.globals.dataPoints;A++){var k=this.barHelpers.getStrokeWidth(o,A,p),S=this.seriesRangeStart[o][A],C=this.seriesRangeEnd[o][A],I=null,E=null,T={x:c,y:d,strokeWidth:k,elSeries:f};if(h=v.yDivision,m=v.barHeight,this.isHorizontal){E=d+m*this.visibleI;var N=this.seriesLen;n.config.plotOptions.bar.rangeBarGroupRows&&(N=1);var _=(h-m*N)/2;if(void 0===n.config.series[o].data[A])break;if(n.config.series[o].data[A].x){var M=this.detectOverlappingBars({i:o,j:A,barYPosition:E,srty:_,barHeight:m,yDivision:h,initPositions:v});m=M.barHeight,E=M.barYPosition}g=(I=this.drawRangeBarPaths(i({indexes:{i:o,j:A,realIndex:p},barHeight:m,barYPosition:E,zeroW:l,yDivision:h,y1:S,y2:C},T))).barWidth}else m=(I=this.drawRangeColumnPaths(i({indexes:{i:o,j:A,realIndex:p},zeroH:u,barWidth:g,xDivision:s},T))).barHeight;var R=this.barHelpers.drawGoalLine({barXPosition:I.barXPosition,barYPosition:E,goalX:I.goalX,goalY:I.goalY,barHeight:m,barWidth:g});R&&x.add(R),d=I.y,c=I.x;var O=this.barHelpers.getPathFillColor(e,o,A,p),P=n.globals.stroke.colors[p];this.renderSeries({realIndex:p,pathFill:O,lineFill:P,j:A,i:o,x:c,y:d,y1:S,y2:C,pathFrom:I.pathFrom,pathTo:I.pathTo,strokeWidth:k,elSeries:f,series:e,barHeight:m,barYPosition:E,barWidth:g,elDataLabelsWrap:y,elGoalsMarkers:x,visibleSeries:this.visibleI,type:"rangebar"})}a.add(f)}return a}},{key:"detectOverlappingBars",value:function(e){var t=e.i,n=e.j,r=e.barYPosition,a=e.srty,i=e.barHeight,o=e.yDivision,s=e.initPositions,u=this.w,l=[],c=u.config.series[t].data[n].rangeName,d=u.config.series[t].data[n].x,h=u.globals.labels.indexOf(d),p=u.globals.seriesRangeBar[t].findIndex((function(e){return e.x===d&&e.overlaps.length>0}));return r=u.config.plotOptions.bar.rangeBarGroupRows?a+o*h:a+i*this.visibleI+o*h,p>-1&&!u.config.plotOptions.bar.rangeBarOverlap&&(l=u.globals.seriesRangeBar[t][p].overlaps).indexOf(c)>-1&&(r=(i=s.barHeight/l.length)*this.visibleI+o*(100-parseInt(this.barOptions.barHeight,10))/100/2+i*(this.visibleI+l.indexOf(c))+o*h),{barYPosition:r,barHeight:i}}},{key:"drawRangeColumnPaths",value:function(e){var t=e.indexes,n=e.x;e.strokeWidth;var r=e.xDivision,a=e.barWidth,i=e.zeroH,o=this.w,s=t.i,u=t.j,l=this.yRatio[this.yaxisIndex],c=t.realIndex,d=this.getRangeValue(c,u),h=Math.min(d.start,d.end),p=Math.max(d.start,d.end);o.globals.isXNumeric&&(n=(o.globals.seriesX[s][u]-o.globals.minX)/this.xRatio-a/2);var f=n+a*this.visibleI;void 0===this.series[s][u]||null===this.series[s][u]?h=i:(h=i-h/l,p=i-p/l);var m=Math.abs(p-h),g=this.barHelpers.getColumnPaths({barXPosition:f,barWidth:a,y1:h,y2:p,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:t.realIndex,i:c,j:u,w:o});return o.globals.isXNumeric||(n+=r),{pathTo:g.pathTo,pathFrom:g.pathFrom,barHeight:m,x:n,y:p,goalY:this.barHelpers.getGoalValues("y",null,i,s,u),barXPosition:f}}},{key:"drawRangeBarPaths",value:function(e){var t=e.indexes,n=e.y,r=e.y1,a=e.y2,i=e.yDivision,o=e.barHeight,s=e.barYPosition,u=e.zeroW,l=this.w,c=u+r/this.invertedYRatio,d=u+a/this.invertedYRatio,h=Math.abs(d-c),p=this.barHelpers.getBarpaths({barYPosition:s,barHeight:o,x1:c,x2:d,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:t.realIndex,realIndex:t.realIndex,j:t.j,w:l});return l.globals.isXNumeric||(n+=i),{pathTo:p.pathTo,pathFrom:p.pathFrom,barWidth:h,x:d,goalX:this.barHelpers.getGoalValues("x",u,null,t.realIndex,t.j),y:n}}},{key:"getRangeValue",value:function(e,t){var n=this.w;return{start:n.globals.seriesRangeStart[e][t],end:n.globals.seriesRangeEnd[e][t]}}},{key:"getTooltipValues",value:function(e){var t=e.ctx,n=e.seriesIndex,r=e.dataPointIndex,a=e.y1,i=e.y2,o=e.w,s=o.globals.seriesRangeStart[n][r],u=o.globals.seriesRangeEnd[n][r],l=o.globals.labels[r],c=o.config.series[n].name?o.config.series[n].name:"",d=o.config.tooltip.y.formatter,h=o.config.tooltip.y.title.formatter,p={w:o,seriesIndex:n,dataPointIndex:r,start:s,end:u};"function"==typeof h&&(c=h(c,p)),Number.isFinite(a)&&Number.isFinite(i)&&(s=a,u=i,o.config.series[n].data[r].x&&(l=o.config.series[n].data[r].x+":"),"function"==typeof d&&(l=d(l,p)));var f="",m="",g=o.globals.colors[n];if(void 0===o.config.tooltip.x.formatter)if("datetime"===o.config.xaxis.type){var v=new B(t);f=v.formatDate(v.getDate(s),o.config.tooltip.x.format),m=v.formatDate(v.getDate(u),o.config.tooltip.x.format)}else f=s,m=u;else f=o.config.tooltip.x.formatter(s),m=o.config.tooltip.x.formatter(u);return{start:s,end:u,startVal:f,endVal:m,ylabel:l,color:g,seriesName:c}}},{key:"buildCustomTooltipHTML",value:function(e){return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+e.color+'">'+(e.seriesName||"")+'</span></div><div> <span class="category">'+e.ylabel+' </span> <span class="value start-value">'+e.start+'</span> <span class="separator">-</span> <span class="value end-value">'+e.end+"</span></div></div>"}}]),n}(),j=function(){function e(t){s(this,e),this.opts=t}return l(e,[{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(e){return this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0,b.extend(e,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"candlestick",value:function(){var e=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var n=t.seriesIndex,r=t.dataPointIndex,a=t.w;return e._getBoxTooltip(a,n,r,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var e=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(t){var n=t.seriesIndex,r=t.dataPointIndex,a=t.w;return e._getBoxTooltip(a,n,r,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(e,t){t.ctx;var n=t.seriesIndex,r=t.dataPointIndex,a=t.w,i=a.globals.seriesRangeStart[n][r];return a.globals.seriesRangeEnd[n][r]-i},background:{enabled:!1},style:{colors:["#fff"]}},tooltip:{shared:!1,followCursor:!0,custom:function(e){return e.w.config.plotOptions&&e.w.config.plotOptions.bar&&e.w.config.plotOptions.bar.horizontal?function(e){var t=new W(e.ctx,null),n=t.getTooltipValues(e),r=n.color,a=n.seriesName,i=n.ylabel,o=n.startVal,s=n.endVal;return t.buildCustomTooltipHTML({color:r,seriesName:a,ylabel:i,start:o,end:s})}(e):function(e){var t=new W(e.ctx,null),n=t.getTooltipValues(e),r=n.color,a=n.seriesName,i=n.ylabel,o=n.start,s=n.end;return t.buildCustomTooltipHTML({color:r,seriesName:a,ylabel:i,start:o,end:s})}(e)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"brush",value:function(e){return b.extend(e,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(e){e.dataLabels=e.dataLabels||{},e.dataLabels.formatter=e.dataLabels.formatter||void 0;var t=e.dataLabels.formatter;return e.yaxis.forEach((function(t,n){e.yaxis[n].min=0,e.yaxis[n].max=100})),"bar"===e.chart.type&&(e.dataLabels.formatter=t||function(e){return"number"==typeof e&&e?e.toFixed(0)+"%":e}),e}},{key:"convertCatToNumeric",value:function(e){return e.xaxis.convertedCatToNumeric=!0,e}},{key:"convertCatToNumericXaxis",value:function(e,t,n){e.xaxis.type="numeric",e.xaxis.labels=e.xaxis.labels||{},e.xaxis.labels.formatter=e.xaxis.labels.formatter||function(e){return b.isNumber(e)?Math.floor(e):e};var r=e.xaxis.labels.formatter,a=e.xaxis.categories&&e.xaxis.categories.length?e.xaxis.categories:e.labels;return n&&n.length&&(a=n.map((function(e){return Array.isArray(e)?e:String(e)}))),a&&a.length&&(e.xaxis.labels.formatter=function(e){return b.isNumber(e)?r(a[Math.floor(e)-1]):r(e)}),e.xaxis.categories=[],e.labels=[],e.xaxis.tickAmount=e.xaxis.tickAmount||"dataPoints",e}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return this.opts.yaxis[0].tickAmount=this.opts.yaxis[0].tickAmount?this.opts.yaxis[0].tickAmount:6,{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(e){return e.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(e){return e},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(e,t,n,r,a){var i=e.globals.seriesCandleO[t][n],o=e.globals.seriesCandleH[t][n],s=e.globals.seriesCandleM[t][n],u=e.globals.seriesCandleL[t][n],l=e.globals.seriesCandleC[t][n];return e.config.series[t].type&&e.config.series[t].type!==a?'<div class="apexcharts-custom-tooltip">\n          '.concat(e.config.series[t].name?e.config.series[t].name:"series-"+(t+1),": <strong>").concat(e.globals.series[t][n],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(e.config.chart.type,'">')+"<div>".concat(r[0],': <span class="value">')+i+"</span></div>"+"<div>".concat(r[1],': <span class="value">')+o+"</span></div>"+(s?"<div>".concat(r[2],': <span class="value">')+s+"</span></div>":"")+"<div>".concat(r[3],': <span class="value">')+u+"</span></div>"+"<div>".concat(r[4],': <span class="value">')+l+"</span></div></div>"}}]),e}(),V=function(){function e(t){s(this,e),this.opts=t}return l(e,[{key:"init",value:function(e){var t=e.responsiveOverride,n=this.opts,r=new N,a=new j(n);this.chartType=n.chart.type,"histogram"===this.chartType&&(n.chart.type="bar",n=b.extend({plotOptions:{bar:{columnWidth:"99.99%"}}},n)),n=this.extendYAxis(n),n=this.extendAnnotations(n);var i=r.init(),s={};if(n&&"object"===o(n)){var u={};u=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","histogram","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(n.chart.type)?a[n.chart.type]():a.line(),n.chart.brush&&n.chart.brush.enabled&&(u=a.brush(u)),n.chart.stacked&&"100%"===n.chart.stackType&&(n=a.stacked100(n)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(n),n.xaxis=n.xaxis||window.Apex.xaxis||{},t||(n.xaxis.convertedCatToNumeric=!1),((n=this.checkForCatToNumericXAxis(this.chartType,u,n)).chart.sparkline&&n.chart.sparkline.enabled||window.Apex.chart&&window.Apex.chart.sparkline&&window.Apex.chart.sparkline.enabled)&&(u=a.sparkline(u)),s=b.extend(i,u)}var l=b.extend(s,window.Apex);return i=b.extend(l,n),this.handleUserInputErrors(i)}},{key:"checkForCatToNumericXAxis",value:function(e,t,n){var r=new j(n),a=("bar"===e||"boxPlot"===e)&&n.plotOptions&&n.plotOptions.bar&&n.plotOptions.bar.horizontal,i="pie"===e||"polarArea"===e||"donut"===e||"radar"===e||"radialBar"===e||"heatmap"===e,o="datetime"!==n.xaxis.type&&"numeric"!==n.xaxis.type,s=n.xaxis.tickPlacement?n.xaxis.tickPlacement:t.xaxis&&t.xaxis.tickPlacement;return a||i||!o||"between"===s||(n=r.convertCatToNumeric(n)),n}},{key:"extendYAxis",value:function(e,t){var n=new N;(void 0===e.yaxis||!e.yaxis||Array.isArray(e.yaxis)&&0===e.yaxis.length)&&(e.yaxis={}),e.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(e.yaxis=b.extend(e.yaxis,window.Apex.yaxis)),e.yaxis.constructor!==Array?e.yaxis=[b.extend(n.yAxis,e.yaxis)]:e.yaxis=b.extendArray(e.yaxis,n.yAxis);var r=!1;e.yaxis.forEach((function(e){e.logarithmic&&(r=!0)}));var a=e.series;return t&&!a&&(a=t.config.series),r&&a.length!==e.yaxis.length&&a.length&&(e.yaxis=a.map((function(t,r){if(t.name||(a[r].name="series-".concat(r+1)),e.yaxis[r])return e.yaxis[r].seriesName=a[r].name,e.yaxis[r];var i=b.extend(n.yAxis,e.yaxis[0]);return i.show=!1,i}))),r&&a.length>1&&a.length!==e.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes. Please make sure to equalize both."),e}},{key:"extendAnnotations",value:function(e){return void 0===e.annotations&&(e.annotations={},e.annotations.yaxis=[],e.annotations.xaxis=[],e.annotations.points=[]),e=this.extendYAxisAnnotations(e),e=this.extendXAxisAnnotations(e),this.extendPointAnnotations(e)}},{key:"extendYAxisAnnotations",value:function(e){var t=new N;return e.annotations.yaxis=b.extendArray(void 0!==e.annotations.yaxis?e.annotations.yaxis:[],t.yAxisAnnotation),e}},{key:"extendXAxisAnnotations",value:function(e){var t=new N;return e.annotations.xaxis=b.extendArray(void 0!==e.annotations.xaxis?e.annotations.xaxis:[],t.xAxisAnnotation),e}},{key:"extendPointAnnotations",value:function(e){var t=new N;return e.annotations.points=b.extendArray(void 0!==e.annotations.points?e.annotations.points:[],t.pointAnnotation),e}},{key:"checkForDarkTheme",value:function(e){e.theme&&"dark"===e.theme.mode&&(e.tooltip||(e.tooltip={}),"light"!==e.tooltip.theme&&(e.tooltip.theme="dark"),e.chart.foreColor||(e.chart.foreColor="#f6f7f8"),e.chart.background||(e.chart.background="#424242"),e.theme.palette||(e.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(e){var t=e;if(t.tooltip.shared&&t.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===t.chart.type&&t.plotOptions.bar.horizontal){if(t.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");t.yaxis[0].reversed&&(t.yaxis[0].opposite=!0),t.xaxis.tooltip.enabled=!1,t.yaxis[0].tooltip.enabled=!1,t.chart.zoom.enabled=!1}return"bar"!==t.chart.type&&"rangeBar"!==t.chart.type||t.tooltip.shared&&"barWidth"===t.xaxis.crosshairs.width&&t.series.length>1&&(t.xaxis.crosshairs.width="tickWidth"),"candlestick"!==t.chart.type&&"boxPlot"!==t.chart.type||t.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(t.chart.type," chart is not supported.")),t.yaxis[0].reversed=!1),t}}]),e}(),H=function(){function e(){s(this,e)}return l(e,[{key:"initGlobalVars",value:function(e){e.series=[],e.seriesCandleO=[],e.seriesCandleH=[],e.seriesCandleM=[],e.seriesCandleL=[],e.seriesCandleC=[],e.seriesRangeStart=[],e.seriesRangeEnd=[],e.seriesRangeBar=[],e.seriesPercent=[],e.seriesGoals=[],e.seriesX=[],e.seriesZ=[],e.seriesNames=[],e.seriesTotals=[],e.seriesLog=[],e.seriesColors=[],e.stackedSeriesTotals=[],e.seriesXvalues=[],e.seriesYvalues=[],e.labels=[],e.hasGroups=!1,e.groups=[],e.categoryLabels=[],e.timescaleLabels=[],e.noLabelsProvided=!1,e.resizeTimer=null,e.selectionResizeTimer=null,e.delayedElements=[],e.pointsArray=[],e.dataLabelsRects=[],e.isXNumeric=!1,e.xaxisLabelsCount=0,e.skipLastTimelinelabel=!1,e.skipFirstTimelinelabel=!1,e.isDataXYZ=!1,e.isMultiLineX=!1,e.isMultipleYAxis=!1,e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE,e.minYArr=[],e.maxYArr=[],e.maxX=-Number.MAX_VALUE,e.minX=Number.MAX_VALUE,e.initialMaxX=-Number.MAX_VALUE,e.initialMinX=Number.MAX_VALUE,e.maxDate=0,e.minDate=Number.MAX_VALUE,e.minZ=Number.MAX_VALUE,e.maxZ=-Number.MAX_VALUE,e.minXDiff=Number.MAX_VALUE,e.yAxisScale=[],e.xAxisScale=null,e.xAxisTicksPositions=[],e.yLabelsCoords=[],e.yTitleCoords=[],e.barPadForNumericAxis=0,e.padHorizontal=0,e.xRange=0,e.yRange=[],e.zRange=0,e.dataPoints=0,e.xTickAmount=0}},{key:"globalVars",value:function(e){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:e.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],yAxisSameScaleIndices:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===e.chart.toolbar.autoSelected&&e.chart.toolbar.tools.zoom&&e.chart.zoom.enabled,panEnabled:"pan"===e.chart.toolbar.autoSelected&&e.chart.toolbar.tools.pan,selectionEnabled:"selection"===e.chart.toolbar.autoSelected&&e.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null}}},{key:"init",value:function(e){var t=this.globalVars(e);return this.initGlobalVars(t),t.initialConfig=b.extend({},e),t.initialSeries=b.clone(e.series),t.lastXAxis=b.clone(t.initialConfig.xaxis),t.lastYAxis=b.clone(t.initialConfig.yaxis),t}}]),e}(),U=function(){function e(t){s(this,e),this.opts=t}return l(e,[{key:"init",value:function(){var e=new V(this.opts).init({responsiveOverride:!1});return{config:e,globals:(new H).init(e)}}}]),e}(),G=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new k(this.ctx)}return l(e,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var e=this.w.config.series.slice(),t=new D(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),void 0!==e[this.activeSeriesIndex].data&&e[this.activeSeriesIndex].data.length>0&&null!==e[this.activeSeriesIndex].data[0]&&void 0!==e[this.activeSeriesIndex].data[0].x&&null!==e[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var e=this.w.config.series.slice(),t=new D(this.ctx);if(this.activeSeriesIndex=t.getActiveConfigSeriesIndex(),void 0!==e[this.activeSeriesIndex].data&&e[this.activeSeriesIndex].data.length>0&&void 0!==e[this.activeSeriesIndex].data[0]&&null!==e[this.activeSeriesIndex].data[0]&&e[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(e,t){for(var n=this.w.config,r=this.w.globals,a="boxPlot"===n.chart.type||"boxPlot"===n.series[t].type,i=0;i<e[t].data.length;i++)if(void 0!==e[t].data[i][1]&&(Array.isArray(e[t].data[i][1])&&4===e[t].data[i][1].length&&!a?this.twoDSeries.push(b.parseNumber(e[t].data[i][1][3])):e[t].data[i].length>=5?this.twoDSeries.push(b.parseNumber(e[t].data[i][4])):this.twoDSeries.push(b.parseNumber(e[t].data[i][1])),r.dataFormatXNumeric=!0),"datetime"===n.xaxis.type){var o=new Date(e[t].data[i][0]);o=new Date(o).getTime(),this.twoDSeriesX.push(o)}else this.twoDSeriesX.push(e[t].data[i][0]);for(var s=0;s<e[t].data.length;s++)void 0!==e[t].data[s][2]&&(this.threeDSeries.push(e[t].data[s][2]),r.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(e,t){var n=this.w.config,r=this.w.globals,a=new B(this.ctx),i=t;r.collapsedSeriesIndices.indexOf(t)>-1&&(i=this.activeSeriesIndex);for(var o=0;o<e[t].data.length;o++)void 0!==e[t].data[o].y&&(Array.isArray(e[t].data[o].y)?this.twoDSeries.push(b.parseNumber(e[t].data[o].y[e[t].data[o].y.length-1])):this.twoDSeries.push(b.parseNumber(e[t].data[o].y))),void 0!==e[t].data[o].goals&&Array.isArray(e[t].data[o].goals)?(void 0===this.seriesGoals[t]&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(e[t].data[o].goals)):(void 0===this.seriesGoals[t]&&(this.seriesGoals[t]=[]),this.seriesGoals[t].push(null));for(var s=0;s<e[i].data.length;s++){var u="string"==typeof e[i].data[s].x,l=Array.isArray(e[i].data[s].x),c=!l&&!!a.isValidDate(e[i].data[s].x.toString());if(u||c)if(u||n.xaxis.convertedCatToNumeric){var d=r.isBarHorizontal&&r.isRangeData;"datetime"!==n.xaxis.type||d?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[i].data[s].x)):this.twoDSeriesX.push(a.parseDate(e[i].data[s].x))}else"datetime"===n.xaxis.type?this.twoDSeriesX.push(a.parseDate(e[i].data[s].x.toString())):(r.dataFormatXNumeric=!0,r.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(e[i].data[s].x)));else l?(this.fallbackToCategory=!0,this.twoDSeriesX.push(e[i].data[s].x)):(r.isXNumeric=!0,r.dataFormatXNumeric=!0,this.twoDSeriesX.push(e[i].data[s].x))}if(e[t].data[0]&&void 0!==e[t].data[0].z){for(var h=0;h<e[t].data.length;h++)this.threeDSeries.push(e[t].data[h].z);r.isDataXYZ=!0}}},{key:"handleRangeData",value:function(e,t){var n=this.w.globals,r={};return this.isFormat2DArray()?r=this.handleRangeDataFormat("array",e,t):this.isFormatXY()&&(r=this.handleRangeDataFormat("xy",e,t)),n.seriesRangeStart.push(r.start),n.seriesRangeEnd.push(r.end),n.seriesRangeBar.push(r.rangeUniques),n.seriesRangeBar.forEach((function(e,t){e&&e.forEach((function(e,t){e.y.forEach((function(t,n){for(var r=0;r<e.y.length;r++)if(n!==r){var a=t.y1,i=t.y2,o=e.y[r].y1;a<=e.y[r].y2&&o<=i&&(e.overlaps.indexOf(t.rangeName)<0&&e.overlaps.push(t.rangeName),e.overlaps.indexOf(e.y[r].rangeName)<0&&e.overlaps.push(e.y[r].rangeName))}}))}))})),r}},{key:"handleCandleStickBoxData",value:function(e,t){var n=this.w.globals,r={};return this.isFormat2DArray()?r=this.handleCandleStickBoxDataFormat("array",e,t):this.isFormatXY()&&(r=this.handleCandleStickBoxDataFormat("xy",e,t)),n.seriesCandleO[t]=r.o,n.seriesCandleH[t]=r.h,n.seriesCandleM[t]=r.m,n.seriesCandleL[t]=r.l,n.seriesCandleC[t]=r.c,r}},{key:"handleRangeDataFormat",value:function(e,t,n){var r=[],a=[],i=t[n].data.filter((function(e,t,n){return t===n.findIndex((function(t){return t.x===e.x}))})).map((function(e,t){return{x:e.x,overlaps:[],y:[]}})),o="Please provide [Start, End] values in valid format. Read more https://apexcharts.com/docs/series/#rangecharts",s=new D(this.ctx).getActiveConfigSeriesIndex();if("array"===e){if(2!==t[s].data[0][1].length)throw new Error(o);for(var u=0;u<t[n].data.length;u++)r.push(t[n].data[u][1][0]),a.push(t[n].data[u][1][1])}else if("xy"===e){if(2!==t[s].data[0].y.length)throw new Error(o);for(var l=function(e){var o=b.randomId(),s=t[n].data[e].x,u={y1:t[n].data[e].y[0],y2:t[n].data[e].y[1],rangeName:o};t[n].data[e].rangeName=o;var l=i.findIndex((function(e){return e.x===s}));i[l].y.push(u),r.push(u.y1),a.push(u.y2)},c=0;c<t[n].data.length;c++)l(c)}return{start:r,end:a,rangeUniques:i}}},{key:"handleCandleStickBoxDataFormat",value:function(e,t,n){var r=this.w,a="boxPlot"===r.config.chart.type||"boxPlot"===r.config.series[n].type,i=[],o=[],s=[],u=[],l=[];if("array"===e)if(a&&6===t[n].data[0].length||!a&&5===t[n].data[0].length)for(var c=0;c<t[n].data.length;c++)i.push(t[n].data[c][1]),o.push(t[n].data[c][2]),a?(s.push(t[n].data[c][3]),u.push(t[n].data[c][4]),l.push(t[n].data[c][5])):(u.push(t[n].data[c][3]),l.push(t[n].data[c][4]));else for(var d=0;d<t[n].data.length;d++)Array.isArray(t[n].data[d][1])&&(i.push(t[n].data[d][1][0]),o.push(t[n].data[d][1][1]),a?(s.push(t[n].data[d][1][2]),u.push(t[n].data[d][1][3]),l.push(t[n].data[d][1][4])):(u.push(t[n].data[d][1][2]),l.push(t[n].data[d][1][3])));else if("xy"===e)for(var h=0;h<t[n].data.length;h++)Array.isArray(t[n].data[h].y)&&(i.push(t[n].data[h].y[0]),o.push(t[n].data[h].y[1]),a?(s.push(t[n].data[h].y[2]),u.push(t[n].data[h].y[3]),l.push(t[n].data[h].y[4])):(u.push(t[n].data[h].y[2]),l.push(t[n].data[h].y[3])));return{o:i,h:o,m:s,l:u,c:l}}},{key:"parseDataAxisCharts",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx,r=this.w.config,a=this.w.globals,i=new B(n),o=r.labels.length>0?r.labels.slice():r.xaxis.categories.slice();a.isRangeBar="rangeBar"===r.chart.type&&a.isBarHorizontal,a.hasGroups="category"===r.xaxis.type&&r.xaxis.group.groups.length>0,a.hasGroups&&(a.groups=r.xaxis.group.groups);for(var s=function(){for(var e=0;e<o.length;e++)if("string"==typeof o[e]){if(!i.isValidDate(o[e]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");t.twoDSeriesX.push(i.parseDate(o[e]))}else t.twoDSeriesX.push(o[e])},u=0;u<e.length;u++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===e[u].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==r.chart.type&&"rangeArea"!==r.chart.type&&"rangeBar"!==e[u].type&&"rangeArea"!==e[u].type||(a.isRangeData=!0,this.handleRangeData(e,u)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(e,u):this.isFormatXY()&&this.handleFormatXY(e,u),"candlestick"!==r.chart.type&&"candlestick"!==e[u].type&&"boxPlot"!==r.chart.type&&"boxPlot"!==e[u].type||this.handleCandleStickBoxData(e,u),a.series.push(this.twoDSeries),a.labels.push(this.twoDSeriesX),a.seriesX.push(this.twoDSeriesX),a.seriesGoals=this.seriesGoals,u!==this.activeSeriesIndex||this.fallbackToCategory||(a.isXNumeric=!0);else{"datetime"===r.xaxis.type?(a.isXNumeric=!0,s(),a.seriesX.push(this.twoDSeriesX)):"numeric"===r.xaxis.type&&(a.isXNumeric=!0,o.length>0&&(this.twoDSeriesX=o,a.seriesX.push(this.twoDSeriesX))),a.labels.push(this.twoDSeriesX);var l=e[u].data.map((function(e){return b.parseNumber(e)}));a.series.push(l)}a.seriesZ.push(this.threeDSeries),void 0!==e[u].name?a.seriesNames.push(e[u].name):a.seriesNames.push("series-"+parseInt(u+1,10)),void 0!==e[u].color?a.seriesColors.push(e[u].color):a.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(e){var t=this.w.globals,n=this.w.config;t.series=e.slice(),t.seriesNames=n.labels.slice();for(var r=0;r<t.series.length;r++)void 0===t.seriesNames[r]&&t.seriesNames.push("series-"+(r+1));return this.w}},{key:"handleExternalLabelsData",value:function(e){var t=this.w.config,n=this.w.globals;t.xaxis.categories.length>0?n.labels=t.xaxis.categories:t.labels.length>0?n.labels=t.labels.slice():this.fallbackToCategory?(n.labels=n.labels[0],n.seriesRangeBar.length&&(n.seriesRangeBar.map((function(e){e.forEach((function(e){n.labels.indexOf(e.x)<0&&e.x&&n.labels.push(e.x)}))})),n.labels=n.labels.filter((function(e,t,n){return n.indexOf(e)===t}))),t.xaxis.convertedCatToNumeric&&(new j(t).convertCatToNumericXaxis(t,this.ctx,n.seriesX[0]),this._generateExternalLabels(e))):this._generateExternalLabels(e)}},{key:"_generateExternalLabels",value:function(e){var t=this.w.globals,n=this.w.config,r=[];if(t.axisCharts){if(t.series.length>0)if(this.isFormatXY())for(var a=n.series.map((function(e,t){return e.data.filter((function(e,t,n){return n.findIndex((function(t){return t.x===e.x}))===t}))})),i=a.reduce((function(e,t,n,r){return r[e].length>t.length?e:n}),0),o=0;o<a[i].length;o++)r.push(o+1);else for(var s=0;s<t.series[t.maxValsInArrayIndex].length;s++)r.push(s+1);t.seriesX=[];for(var u=0;u<e.length;u++)t.seriesX.push(r);t.isXNumeric=!0}if(0===r.length){r=t.axisCharts?[]:t.series.map((function(e,t){return t+1}));for(var l=0;l<e.length;l++)t.seriesX.push(r)}t.labels=r,n.xaxis.convertedCatToNumeric&&(t.categoryLabels=r.map((function(e){return n.xaxis.labels.formatter(e)}))),t.noLabelsProvided=!0}},{key:"parseData",value:function(e){var t=this.w,n=t.config,r=t.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),r.axisCharts?this.parseDataAxisCharts(e):this.parseDataNonAxisCharts(e),this.coreUtils.getLargestSeries(),"bar"===n.chart.type&&n.chart.stacked){var a=new D(this.ctx);r.series=a.setNullSeriesToZeroValues(r.series)}this.coreUtils.getSeriesTotals(),r.axisCharts&&this.coreUtils.getStackedSeriesTotals(),this.coreUtils.getPercentSeries(),r.dataFormatXNumeric||r.isXNumeric&&("numeric"!==n.xaxis.type||0!==n.labels.length||0!==n.xaxis.categories.length)||this.handleExternalLabelsData(e);for(var i=this.coreUtils.getCategoryLabels(r.labels),o=0;o<i.length;o++)if(Array.isArray(i[o])){r.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var e=this,t=this.w;t.globals.ignoreYAxisIndexes=t.globals.collapsedSeries.map((function(n,r){if(e.w.globals.isMultipleYAxis&&!t.config.chart.stacked)return n.index}))}}]),e}(),X=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.tooltipKeyFormat="dd MMM"}return l(e,[{key:"xLabelFormat",value:function(e,t,n,r){var a=this.w;if("datetime"===a.config.xaxis.type&&void 0===a.config.xaxis.labels.formatter&&void 0===a.config.tooltip.x.formatter){var i=new B(this.ctx);return i.formatDate(i.getDate(t),a.config.tooltip.x.format)}return e(t,n,r)}},{key:"defaultGeneralFormatter",value:function(e){return Array.isArray(e)?e.map((function(e){return e})):e}},{key:"defaultYFormatter",value:function(e,t,n){var r=this.w;return b.isNumber(e)&&(e=0!==r.globals.yValueDecimal?e.toFixed(void 0!==t.decimalsInFloat?t.decimalsInFloat:r.globals.yValueDecimal):r.globals.maxYArr[n]-r.globals.minYArr[n]<5?e.toFixed(1):e.toFixed(0)),e}},{key:"setLabelFormatters",value:function(){var e=this,t=this.w;return t.globals.xaxisTooltipFormatter=function(t){return e.defaultGeneralFormatter(t)},t.globals.ttKeyFormatter=function(t){return e.defaultGeneralFormatter(t)},t.globals.ttZFormatter=function(e){return e},t.globals.legendFormatter=function(t){return e.defaultGeneralFormatter(t)},void 0!==t.config.xaxis.labels.formatter?t.globals.xLabelFormatter=t.config.xaxis.labels.formatter:t.globals.xLabelFormatter=function(e){if(b.isNumber(e)){if(!t.config.xaxis.convertedCatToNumeric&&"numeric"===t.config.xaxis.type){if(b.isNumber(t.config.xaxis.decimalsInFloat))return e.toFixed(t.config.xaxis.decimalsInFloat);var n=t.globals.maxX-t.globals.minX;return n>0&&n<100?e.toFixed(1):e.toFixed(0)}return t.globals.isBarHorizontal&&t.globals.maxY-t.globals.minYArr<4?e.toFixed(1):e.toFixed(0)}return e},"function"==typeof t.config.tooltip.x.formatter?t.globals.ttKeyFormatter=t.config.tooltip.x.formatter:t.globals.ttKeyFormatter=t.globals.xLabelFormatter,"function"==typeof t.config.xaxis.tooltip.formatter&&(t.globals.xaxisTooltipFormatter=t.config.xaxis.tooltip.formatter),(Array.isArray(t.config.tooltip.y)||void 0!==t.config.tooltip.y.formatter)&&(t.globals.ttVal=t.config.tooltip.y),void 0!==t.config.tooltip.z.formatter&&(t.globals.ttZFormatter=t.config.tooltip.z.formatter),void 0!==t.config.legend.formatter&&(t.globals.legendFormatter=t.config.legend.formatter),t.config.yaxis.forEach((function(n,r){void 0!==n.labels.formatter?t.globals.yLabelFormatters[r]=n.labels.formatter:t.globals.yLabelFormatters[r]=function(a){return t.globals.xyCharts?Array.isArray(a)?a.map((function(t){return e.defaultYFormatter(t,n,r)})):e.defaultYFormatter(a,n,r):a}})),t.globals}},{key:"heatmapLabelFormatters",value:function(){var e=this.w;if("heatmap"===e.config.chart.type){e.globals.yAxisScale[0].result=e.globals.seriesNames.slice();var t=e.globals.seriesNames.reduce((function(e,t){return e.length>t.length?e:t}),0);e.globals.yAxisScale[0].niceMax=t,e.globals.yAxisScale[0].niceMin=t}}}]),e}(),q=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return l(e,[{key:"getLabel",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=this.w,u=void 0===e[r]?"":e[r],l=u,c=s.globals.xLabelFormatter,d=s.config.xaxis.labels.formatter,h=!1,p=new X(this.ctx),f=u;o&&(l=p.xLabelFormat(c,u,f,{i:r,dateFormatter:new B(this.ctx).formatDate,w:s}),void 0!==d&&(l=d(u,e[r],{i:r,dateFormatter:new B(this.ctx).formatDate,w:s})));var m=function(e){var n=null;return t.forEach((function(e){"month"===e.unit?n="year":"day"===e.unit?n="month":"hour"===e.unit?n="day":"minute"===e.unit&&(n="hour")})),n===e};t.length>0?(h=m(t[r].unit),n=t[r].position,l=t[r].value):"datetime"===s.config.xaxis.type&&void 0===d&&(l=""),void 0===l&&(l=""),l=Array.isArray(l)?l:l.toString();var g=new w(this.ctx),v={};v=s.globals.rotateXLabels&&o?g.getTextRects(l,parseInt(i,10),null,"rotate(".concat(s.config.xaxis.labels.rotate," 0 0)"),!1):g.getTextRects(l,parseInt(i,10));var y=!s.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(l)&&(0===l.indexOf("NaN")||0===l.toLowerCase().indexOf("invalid")||l.toLowerCase().indexOf("infinity")>=0||a.indexOf(l)>=0&&y)&&(l=""),{x:n,text:l,textRect:v,isBold:h}}},{key:"checkLabelBasedOnTickamount",value:function(e,t,n){var r=this.w,a=r.config.xaxis.tickAmount;return"dataPoints"===a&&(a=Math.round(r.globals.gridWidth/120)),a>n||e%Math.round(n/(a+1))==0||(t.text=""),t}},{key:"checkForOverflowingLabels",value:function(e,t,n,r,a){var i=this.w;if(0===e&&i.globals.skipFirstTimelinelabel&&(t.text=""),e===n-1&&i.globals.skipLastTimelinelabel&&(t.text=""),i.config.xaxis.labels.hideOverlappingLabels&&r.length>0){var o=a[a.length-1];t.x<o.textRect.width/(i.globals.rotateXLabels?Math.abs(i.config.xaxis.labels.rotate)/12:1.01)+o.x&&(t.text="")}return t}},{key:"checkForReversedLabels",value:function(e,t){var n=this.w;return n.config.yaxis[e]&&n.config.yaxis[e].reversed&&t.reverse(),t}},{key:"isYAxisHidden",value:function(e){var t=this.w,n=new k(this.ctx);return!t.config.yaxis[e].show||!t.config.yaxis[e].showForNullSeries&&n.isSeriesNull(e)&&-1===t.globals.collapsedSeriesIndices.indexOf(e)}},{key:"getYAxisForeColor",value:function(e,t){var n=this.w;return Array.isArray(e)&&n.globals.yAxisScale[t]&&this.ctx.theme.pushExtraColors(e,n.globals.yAxisScale[t].result.length,!1),e}},{key:"drawYAxisTicks",value:function(e,t,n,r,a,i,o){var s=this.w,u=new w(this.ctx),l=s.globals.translateY;if(r.show&&t>0){!0===s.config.yaxis[a].opposite&&(e+=r.width);for(var c=t;c>=0;c--){var d=l+t/10+s.config.yaxis[a].labels.offsetY-1;s.globals.isBarHorizontal&&(d=i*c),"heatmap"===s.config.chart.type&&(d+=i/2);var h=u.drawLine(e+n.offsetX-r.width+r.offsetX,d+r.offsetY,e+n.offsetX+r.offsetX,d+r.offsetY,r.color);o.add(h),l+=i}}}}]),e}(),Y=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return l(e,[{key:"scaleSvgNode",value:function(e,t){var n=parseFloat(e.getAttributeNS(null,"width")),r=parseFloat(e.getAttributeNS(null,"height"));e.setAttributeNS(null,"width",n*t),e.setAttributeNS(null,"height",r*t),e.setAttributeNS(null,"viewBox","0 0 "+n+" "+r)}},{key:"fixSvgStringForIe11",value:function(e){if(!b.isIE11())return e.replace(/&nbsp;/g,"&#160;");var t=0,n=e.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,(function(e){return 2===++t?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':e}));return(n=n.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(e){null==e&&(e=1);var t=this.w.globals.dom.Paper.svg();if(1!==e){var n=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(n,e),t=(new XMLSerializer).serializeToString(n)}return this.fixSvgStringForIe11(t)}},{key:"cleanup",value:function(){var e=this.w,t=e.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),n=e.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(r,(function(e){e.setAttribute("width",0)})),t&&t[0]&&(t[0].setAttribute("x",-500),t[0].setAttribute("x1",-500),t[0].setAttribute("x2",-500)),n&&n[0]&&(n[0].setAttribute("y",-100),n[0].setAttribute("y1",-100),n[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var e=this.getSvgString(),t=new Blob([e],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(t)}},{key:"dataURI",value:function(e){var t=this;return new Promise((function(n){var r=t.w,a=e?e.scale||e.width/r.globals.svgWidth:1;t.cleanup();var i=document.createElement("canvas");i.width=r.globals.svgWidth*a,i.height=parseInt(r.globals.dom.elWrap.style.height,10)*a;var o="transparent"===r.config.chart.background?"#fff":r.config.chart.background,s=i.getContext("2d");s.fillStyle=o,s.fillRect(0,0,i.width*a,i.height*a);var u=t.getSvgString(a);if(window.canvg&&b.isIE11()){var l=window.canvg.Canvg.fromString(s,u,{ignoreClear:!0,ignoreDimensions:!0});l.start();var c=i.msToBlob();l.stop(),n({blob:c})}else{var d="data:image/svg+xml,"+encodeURIComponent(u),h=new Image;h.crossOrigin="anonymous",h.onload=function(){if(s.drawImage(h,0,0),i.msToBlob){var e=i.msToBlob();n({blob:e})}else{var t=i.toDataURL("image/png");n({imgURI:t})}},h.src=d}}))}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var e=this;this.dataURI().then((function(t){var n=t.imgURI,r=t.blob;r?navigator.msSaveOrOpenBlob(r,e.w.globals.chartID+".png"):e.triggerDownload(n,e.w.config.chart.toolbar.export.png.filename,".png")}))}},{key:"exportToCSV",value:function(e){var t=this,n=e.series,r=e.columnDelimiter,a=e.lineDelimiter,i=void 0===a?"\n":a,o=this.w,s=[],u=[],l="",c=new G(this.ctx),d=new q(this.ctx),h=function(e){var n="";if(o.globals.axisCharts){if("category"===o.config.xaxis.type||o.config.xaxis.convertedCatToNumeric)if(o.globals.isBarHorizontal){var a=o.globals.yLabelFormatters[0],i=new D(t.ctx).getActiveConfigSeriesIndex();n=a(o.globals.labels[e],{seriesIndex:i,dataPointIndex:e,w:o})}else n=d.getLabel(o.globals.labels,o.globals.timescaleLabels,0,e).text;"datetime"===o.config.xaxis.type&&(o.config.xaxis.categories.length?n=o.config.xaxis.categories[e]:o.config.labels.length&&(n=o.config.labels[e]))}else n=o.config.labels[e];return Array.isArray(n)&&(n=n.join(" ")),b.isNumber(n)?n:n.split(r).join("")};s.push(o.config.chart.toolbar.export.csv.headerCategory),n.map((function(e,t){var n=e.name?e.name:"series-".concat(t);o.globals.axisCharts&&s.push(n.split(r).join("")?n.split(r).join(""):"series-".concat(t))})),o.globals.axisCharts||(s.push(o.config.chart.toolbar.export.csv.headerValue),u.push(s.join(r))),n.map((function(e,t){o.globals.axisCharts?function(e,t){if(s.length&&0===t&&u.push(s.join(r)),e.data&&e.data.length)for(var a=0;a<e.data.length;a++){s=[];var i=h(a);if(i||(c.isFormatXY()?i=n[t].data[a].x:c.isFormat2DArray()&&(i=n[t].data[a]?n[t].data[a][0]:"")),0===t){s.push((d=i,"datetime"===o.config.xaxis.type&&String(d).length>=10?o.config.chart.toolbar.export.csv.dateFormatter(i):b.isNumber(i)?i:i.split(r).join("")));for(var l=0;l<o.globals.series.length;l++)s.push(o.globals.series[l][a])}("candlestick"===o.config.chart.type||e.type&&"candlestick"===e.type)&&(s.pop(),s.push(o.globals.seriesCandleO[t][a]),s.push(o.globals.seriesCandleH[t][a]),s.push(o.globals.seriesCandleL[t][a]),s.push(o.globals.seriesCandleC[t][a])),("boxPlot"===o.config.chart.type||e.type&&"boxPlot"===e.type)&&(s.pop(),s.push(o.globals.seriesCandleO[t][a]),s.push(o.globals.seriesCandleH[t][a]),s.push(o.globals.seriesCandleM[t][a]),s.push(o.globals.seriesCandleL[t][a]),s.push(o.globals.seriesCandleC[t][a])),"rangeBar"===o.config.chart.type&&(s.pop(),s.push(o.globals.seriesRangeStart[t][a]),s.push(o.globals.seriesRangeEnd[t][a])),s.length&&u.push(s.join(r))}var d}(e,t):((s=[]).push(o.globals.labels[t].split(r).join("")),s.push(o.globals.series[t]),u.push(s.join(r)))})),l+=u.join(i),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+l),o.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(e,t,n){var r=document.createElement("a");r.href=e,r.download=(t||this.w.globals.chartID)+n,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}]),e}(),K=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var n=this.w;this.axesUtils=new q(t),this.xaxisLabels=n.globals.labels.slice(),n.globals.timescaleLabels.length>0&&!n.globals.isBarHorizontal&&(this.xaxisLabels=n.globals.timescaleLabels.slice()),n.config.xaxis.overwriteCategories&&(this.xaxisLabels=n.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],"top"===n.config.xaxis.position?this.offY=0:this.offY=n.globals.gridHeight+1,this.offY=this.offY+n.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===n.config.chart.type&&n.config.plotOptions.bar.horizontal,this.xaxisFontSize=n.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=n.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=n.config.xaxis.labels.style.colors,this.xaxisBorderWidth=n.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=n.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=n.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=n.config.xaxis.axisBorder.height,this.yaxis=n.config.yaxis[0]}return l(e,[{key:"drawXaxis",value:function(){var e=this.w,t=new w(this.ctx),n=t.group({class:"apexcharts-xaxis",transform:"translate(".concat(e.config.xaxis.offsetX,", ").concat(e.config.xaxis.offsetY,")")}),r=t.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});n.add(r);for(var a=[],i=0;i<this.xaxisLabels.length;i++)a.push(this.xaxisLabels[i]);if(this.drawXAxisLabelAndGroup(!0,t,r,a,e.globals.isXNumeric,(function(e,t){return t})),e.globals.hasGroups){var o=e.globals.groups;a=[];for(var s=0;s<o.length;s++)a.push(o[s].title);var u={};e.config.xaxis.group.style&&(u.xaxisFontSize=e.config.xaxis.group.style.fontSize,u.xaxisFontFamily=e.config.xaxis.group.style.fontFamily,u.xaxisForeColors=e.config.xaxis.group.style.colors,u.fontWeight=e.config.xaxis.group.style.fontWeight,u.cssClass=e.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,t,r,a,!1,(function(e,t){return o[e].cols*t}),u)}if(void 0!==e.config.xaxis.title.text){var l=t.group({class:"apexcharts-xaxis-title"}),c=t.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+e.globals.xAxisLabelsHeight+e.config.xaxis.title.offsetY,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});l.add(c),n.add(l)}if(e.config.xaxis.axisBorder.show){var d=e.globals.barPadForNumericAxis,h=t.drawLine(e.globals.padHorizontal+e.config.xaxis.axisBorder.offsetX-d,this.offY,this.xaxisBorderWidth+d,this.offY,e.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);n.add(h)}return n}},{key:"drawXAxisLabelAndGroup",value:function(e,t,n,r,a,i){var o,s=this,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},l=[],c=[],d=this.w,h=u.xaxisFontSize||this.xaxisFontSize,p=u.xaxisFontFamily||this.xaxisFontFamily,f=u.xaxisForeColors||this.xaxisForeColors,m=u.fontWeight||d.config.xaxis.labels.style.fontWeight,g=u.cssClass||d.config.xaxis.labels.style.cssClass,v=d.globals.padHorizontal,y=r.length,b="category"===d.config.xaxis.type?d.globals.dataPoints:y;if(a){var x=b>1?b-1:b;o=d.globals.gridWidth/x,v=v+i(0,o)/2+d.config.xaxis.labels.offsetX}else o=d.globals.gridWidth/b,v=v+i(0,o)+d.config.xaxis.labels.offsetX;for(var A=function(a){var u=v-i(a,o)/2+d.config.xaxis.labels.offsetX;0===a&&1===y&&o/2===v&&1===b&&(u=d.globals.gridWidth/2);var x=s.axesUtils.getLabel(r,d.globals.timescaleLabels,u,a,l,h,e),A=28;if(d.globals.rotateXLabels&&e&&(A=22),e||(A=A+parseFloat(h)+(d.globals.xAxisLabelsHeight-d.globals.xAxisGroupLabelsHeight)+(d.globals.rotateXLabels?10:0)),x=void 0!==d.config.xaxis.tickAmount&&"dataPoints"!==d.config.xaxis.tickAmount&&"datetime"!==d.config.xaxis.type?s.axesUtils.checkLabelBasedOnTickamount(a,x,y):s.axesUtils.checkForOverflowingLabels(a,x,y,l,c),e&&x.text&&d.globals.xaxisLabelsCount++,d.config.xaxis.labels.show){var w=t.drawText({x:x.x,y:s.offY+d.config.xaxis.labels.offsetY+A-("top"===d.config.xaxis.position?d.globals.xAxisHeight+d.config.xaxis.axisTicks.height-2:0),text:x.text,textAnchor:"middle",fontWeight:x.isBold?600:m,fontSize:h,fontFamily:p,foreColor:Array.isArray(f)?e&&d.config.xaxis.convertedCatToNumeric?f[d.globals.minX+a-1]:f[a]:f,isPlainText:!1,cssClass:(e?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+g});if(n.add(w),e){var k=document.createElementNS(d.globals.SVGNS,"title");k.textContent=Array.isArray(x.text)?x.text.join(" "):x.text,w.node.appendChild(k),""!==x.text&&(l.push(x.text),c.push(x))}}a<y-1&&(v+=i(a+1,o))},w=0;w<=y-1;w++)A(w)}},{key:"drawXaxisInversed",value:function(e){var t,n,r=this,a=this.w,i=new w(this.ctx),o=a.config.yaxis[0].opposite?a.globals.translateYAxisX[e]:0,s=i.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:e}),u=i.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+o+", 0)"});s.add(u);var l=[];if(a.config.yaxis[e].show)for(var c=0;c<this.xaxisLabels.length;c++)l.push(this.xaxisLabels[c]);t=a.globals.gridHeight/l.length,n=-t/2.2;var d=a.globals.yLabelFormatters[0],h=a.config.yaxis[0].labels;if(h.show)for(var p=function(o){var s=void 0===l[o]?"":l[o];s=d(s,{seriesIndex:e,dataPointIndex:o,w:a});var c=r.axesUtils.getYAxisForeColor(h.style.colors,e),p=0;Array.isArray(s)&&(p=s.length/2*parseInt(h.style.fontSize,10));var f=i.drawText({x:h.offsetX-15,y:n+t+h.offsetY-p,text:s,textAnchor:r.yaxis.opposite?"start":"end",foreColor:Array.isArray(c)?c[o]:c,fontSize:h.style.fontSize,fontFamily:h.style.fontFamily,fontWeight:h.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+h.style.cssClass});u.add(f);var m=document.createElementNS(a.globals.SVGNS,"title");if(m.textContent=Array.isArray(s)?s.join(" "):s,f.node.appendChild(m),0!==a.config.yaxis[e].labels.rotate){var g=i.rotateAroundCenter(f.node);f.node.setAttribute("transform","rotate(".concat(a.config.yaxis[e].labels.rotate," 0 ").concat(g.y,")"))}n+=t},f=0;f<=l.length-1;f++)p(f);if(void 0!==a.config.yaxis[0].title.text){var m=i.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+o+", 0)"}),g=i.drawText({x:0,y:a.globals.gridHeight/2,text:a.config.yaxis[0].title.text,textAnchor:"middle",foreColor:a.config.yaxis[0].title.style.color,fontSize:a.config.yaxis[0].title.style.fontSize,fontWeight:a.config.yaxis[0].title.style.fontWeight,fontFamily:a.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+a.config.yaxis[0].title.style.cssClass});m.add(g),s.add(m)}var v=0;this.isCategoryBarHorizontal&&a.config.yaxis[0].opposite&&(v=a.globals.gridWidth);var y=a.config.xaxis.axisBorder;if(y.show){var b=i.drawLine(a.globals.padHorizontal+y.offsetX+v,1+y.offsetY,a.globals.padHorizontal+y.offsetX+v,a.globals.gridHeight+y.offsetY,y.color,0);s.add(b)}return a.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(v,l.length,a.config.yaxis[0].axisBorder,a.config.yaxis[0].axisTicks,0,t,s),s}},{key:"drawXaxisTicks",value:function(e,t,n){var r=this.w,a=e;if(!(e<0||e-2>r.globals.gridWidth)){var i=this.offY+r.config.xaxis.axisTicks.offsetY;if(t=t+i+r.config.xaxis.axisTicks.height,"top"===r.config.xaxis.position&&(t=i-r.config.xaxis.axisTicks.height),r.config.xaxis.axisTicks.show){var o=new w(this.ctx).drawLine(e+r.config.xaxis.axisTicks.offsetX,i+r.config.xaxis.offsetY,a+r.config.xaxis.axisTicks.offsetX,t+r.config.xaxis.offsetY,r.config.xaxis.axisTicks.color);n.add(o),o.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var e=this.w,t=[],n=this.xaxisLabels.length,r=e.globals.padHorizontal;if(e.globals.timescaleLabels.length>0)for(var a=0;a<n;a++)r=this.xaxisLabels[a].position,t.push(r);else for(var i=n,o=0;o<i;o++){var s=i;e.globals.isXNumeric&&"bar"!==e.config.chart.type&&(s-=1),r+=e.globals.gridWidth/s,t.push(r)}return t}},{key:"xAxisLabelCorrections",value:function(){var e=this.w,t=new w(this.ctx),n=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),a=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(e.globals.rotateXLabels||e.config.xaxis.labels.rotateAlways)for(var o=0;o<r.length;o++){var s=t.rotateAroundCenter(r[o]);s.y=s.y-1,s.x=s.x+1,r[o].setAttribute("transform","rotate(".concat(e.config.xaxis.labels.rotate," ").concat(s.x," ").concat(s.y,")")),r[o].setAttribute("text-anchor","end"),n.setAttribute("transform","translate(0, ".concat(-10,")"));var u=r[o].childNodes;e.config.xaxis.labels.trim&&Array.prototype.forEach.call(u,(function(n){t.placeTextWithEllipsis(n,n.textContent,e.globals.xAxisLabelsHeight-("bottom"===e.config.legend.position?20:10))}))}else!function(){for(var n=e.globals.gridWidth/(e.globals.labels.length+1),a=0;a<r.length;a++){var i=r[a].childNodes;e.config.xaxis.labels.trim&&"datetime"!==e.config.xaxis.type&&Array.prototype.forEach.call(i,(function(e){t.placeTextWithEllipsis(e,e.textContent,n)}))}}();if(a.length>0){var l=a[a.length-1].getBBox(),c=a[0].getBBox();l.x<-20&&a[a.length-1].parentNode.removeChild(a[a.length-1]),c.x+c.width>e.globals.gridWidth&&!e.globals.isBarHorizontal&&a[0].parentNode.removeChild(a[0]);for(var d=0;d<i.length;d++)t.placeTextWithEllipsis(i[d],i[d].textContent,e.config.yaxis[0].labels.maxWidth-(e.config.yaxis[0].title.text?2*parseFloat(e.config.yaxis[0].title.style.fontSize):0)-15)}}}]),e}(),Z=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var n=this.w;this.xaxisLabels=n.globals.labels.slice(),this.axesUtils=new q(t),this.isRangeBar=n.globals.seriesRangeBar.length,n.globals.timescaleLabels.length>0&&(this.xaxisLabels=n.globals.timescaleLabels.slice())}return l(e,[{key:"drawGridArea",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.w,n=new w(this.ctx);null===e&&(e=n.group({class:"apexcharts-grid"}));var r=n.drawLine(t.globals.padHorizontal,1,t.globals.padHorizontal,t.globals.gridHeight,"transparent"),a=n.drawLine(t.globals.padHorizontal,t.globals.gridHeight,t.globals.gridWidth,t.globals.gridHeight,"transparent");return e.add(a),e.add(r),e}},{key:"drawGrid",value:function(){var e=null;return this.w.globals.axisCharts&&(e=this.renderGrid(),this.drawGridArea(e.el)),e}},{key:"createGridMask",value:function(){var e=this.w,t=e.globals,n=new w(this.ctx),r=Array.isArray(e.config.stroke.width)?0:e.config.stroke.width;if(Array.isArray(e.config.stroke.width)){var a=0;e.config.stroke.width.forEach((function(e){a=Math.max(a,e)})),r=a}t.dom.elGridRectMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(t.cuid)),t.dom.elGridRectMarkerMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(t.cuid)),t.dom.elForecastMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elForecastMask.setAttribute("id","forecastMask".concat(t.cuid)),t.dom.elNonForecastMask=document.createElementNS(t.SVGNS,"clipPath"),t.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(t.cuid));var i=e.config.chart.type,o=0,s=0;("bar"===i||"rangeBar"===i||"candlestick"===i||"boxPlot"===i||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&(o=e.config.grid.padding.left,s=e.config.grid.padding.right,t.barPadForNumericAxis>o&&(o=t.barPadForNumericAxis,s=t.barPadForNumericAxis)),t.dom.elGridRect=n.drawRect(-r/2-o-2,-r/2,t.gridWidth+r+s+o+4,t.gridHeight+r,0,"#fff");var u=e.globals.markers.largestSize+1;t.dom.elGridRectMarker=n.drawRect(2*-u,2*-u,t.gridWidth+4*u,t.gridHeight+4*u,0,"#fff"),t.dom.elGridRectMask.appendChild(t.dom.elGridRect.node),t.dom.elGridRectMarkerMask.appendChild(t.dom.elGridRectMarker.node);var l=t.dom.baseEl.querySelector("defs");l.appendChild(t.dom.elGridRectMask),l.appendChild(t.dom.elForecastMask),l.appendChild(t.dom.elNonForecastMask),l.appendChild(t.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(e){var t=e.i,n=e.x1,r=e.y1,a=e.x2,i=e.y2,o=e.xCount,s=e.parent,u=this.w;if(!(0===t&&u.globals.skipFirstTimelinelabel||t===o-1&&u.globals.skipLastTimelinelabel&&!u.config.xaxis.labels.formatter||"radar"===u.config.chart.type)){u.config.grid.xaxis.lines.show&&this._drawGridLine({x1:n,y1:r,x2:a,y2:i,parent:s});var l=0;if(u.globals.hasGroups&&"between"===u.config.xaxis.tickPlacement){var c=u.globals.groups;if(c){for(var d=0,h=0;d<t&&h<c.length;h++)d+=c[h].cols;d===t&&(l=.6*u.globals.xAxisLabelsHeight)}}new K(this.ctx).drawXaxisTicks(n,l,this.elg)}}},{key:"_drawGridLine",value:function(e){var t=e.x1,n=e.y1,r=e.x2,a=e.y2,i=e.parent,o=this.w,s=i.node.classList.contains("apexcharts-gridlines-horizontal"),u=o.config.grid.strokeDashArray,l=o.globals.barPadForNumericAxis,c=new w(this).drawLine(t-(s?l:0),n,r+(s?l:0),a,o.config.grid.borderColor,u);c.node.classList.add("apexcharts-gridline"),i.add(c)}},{key:"_drawGridBandRect",value:function(e){var t=e.c,n=e.x1,r=e.y1,a=e.x2,i=e.y2,o=e.type,s=this.w,u=new w(this.ctx),l=s.globals.barPadForNumericAxis;if("column"!==o||"datetime"!==s.config.xaxis.type){var c=s.config.grid[o].colors[t],d=u.drawRect(n-("row"===o?l:0),r,a+("row"===o?2*l:0),i,0,c,s.config.grid[o].opacity);this.elg.add(d),d.attr("clip-path","url(#gridRectMask".concat(s.globals.cuid,")")),d.node.classList.add("apexcharts-grid-".concat(o))}}},{key:"_drawXYLines",value:function(e){var t=this,n=e.xCount,r=e.tickAmount,a=this.w;if(a.config.grid.xaxis.lines.show||a.config.xaxis.axisTicks.show){var i,o=a.globals.padHorizontal,s=a.globals.gridHeight;a.globals.timescaleLabels.length?function(e){for(var r=e.xC,a=e.x1,i=e.y1,o=e.x2,s=e.y2,u=0;u<r;u++)a=t.xaxisLabels[u].position,o=t.xaxisLabels[u].position,t._drawGridLines({i:u,x1:a,y1:i,x2:o,y2:s,xCount:n,parent:t.elgridLinesV})}({xC:n,x1:o,y1:0,x2:i,y2:s}):(a.globals.isXNumeric&&(n=a.globals.xAxisScale.result.length),a.config.xaxis.convertedCatToNumeric&&(n=a.globals.xaxisLabelsCount),function(e){var r=e.xC,i=e.x1,o=e.y1,s=e.x2,u=e.y2;if(void 0!==a.config.xaxis.tickAmount&&"dataPoints"!==a.config.xaxis.tickAmount&&"on"===a.config.xaxis.tickPlacement)a.globals.dom.baseEl.querySelectorAll(".apexcharts-text.apexcharts-xaxis-label tspan:not(:empty)").forEach((function(e,r){var a=e.getBBox();t._drawGridLines({i:r,x1:a.x+a.width/2,y1:o,x2:a.x+a.width/2,y2:u,xCount:n,parent:t.elgridLinesV})}));else for(var l=0;l<r+(a.globals.isXNumeric?0:1);l++)0===l&&1===r&&1===a.globals.dataPoints&&(s=i=a.globals.gridWidth/2),t._drawGridLines({i:l,x1:i,y1:o,x2:s,y2:u,xCount:n,parent:t.elgridLinesV}),s=i+=a.globals.gridWidth/(a.globals.isXNumeric?r-1:r)}({xC:n,x1:o,y1:0,x2:i,y2:s}))}if(a.config.grid.yaxis.lines.show){var u=0,l=0,c=a.globals.gridWidth,d=r+1;this.isRangeBar&&(d=a.globals.labels.length);for(var h=0;h<d+(this.isRangeBar?1:0);h++)this._drawGridLine({x1:0,y1:u,x2:c,y2:l,parent:this.elgridLinesH}),l=u+=a.globals.gridHeight/(this.isRangeBar?d:r)}}},{key:"_drawInvertedXYLines",value:function(e){var t=e.xCount,n=this.w;if(n.config.grid.xaxis.lines.show||n.config.xaxis.axisTicks.show)for(var r,a=n.globals.padHorizontal,i=n.globals.gridHeight,o=0;o<t+1;o++)n.config.grid.xaxis.lines.show&&this._drawGridLine({x1:a,y1:0,x2:r,y2:i,parent:this.elgridLinesV}),new K(this.ctx).drawXaxisTicks(a,0,this.elg),r=a=a+n.globals.gridWidth/t+.3;if(n.config.grid.yaxis.lines.show)for(var s=0,u=0,l=n.globals.gridWidth,c=0;c<n.globals.dataPoints+1;c++)this._drawGridLine({x1:0,y1:s,x2:l,y2:u,parent:this.elgridLinesH}),u=s+=n.globals.gridHeight/n.globals.dataPoints}},{key:"renderGrid",value:function(){var e=this.w,t=new w(this.ctx);this.elg=t.group({class:"apexcharts-grid"}),this.elgridLinesH=t.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=t.group({class:"apexcharts-gridlines-vertical"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),e.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide());for(var n,r=e.globals.yAxisScale.length?e.globals.yAxisScale[0].result.length-1:5,a=0;a<e.globals.series.length&&(void 0!==e.globals.yAxisScale[a]&&(r=e.globals.yAxisScale[a].result.length-1),!(r>2));a++);return!e.globals.isBarHorizontal||this.isRangeBar?(n=this.xaxisLabels.length,this.isRangeBar&&(r=e.globals.labels.length,e.config.xaxis.tickAmount&&e.config.xaxis.labels.formatter&&(n=e.config.xaxis.tickAmount)),this._drawXYLines({xCount:n,tickAmount:r})):(n=r,r=e.globals.xTickAmount,this._drawInvertedXYLines({xCount:n,tickAmount:r})),this.drawGridBands(n,r),{el:this.elg,xAxisTickWidth:e.globals.gridWidth/n}}},{key:"drawGridBands",value:function(e,t){var n=this.w;if(void 0!==n.config.grid.row.colors&&n.config.grid.row.colors.length>0)for(var r=0,a=n.globals.gridHeight/t,i=n.globals.gridWidth,o=0,s=0;o<t;o++,s++)s>=n.config.grid.row.colors.length&&(s=0),this._drawGridBandRect({c:s,x1:0,y1:r,x2:i,y2:a,type:"row"}),r+=n.globals.gridHeight/t;if(void 0!==n.config.grid.column.colors&&n.config.grid.column.colors.length>0)for(var u=n.globals.isBarHorizontal||"category"!==n.config.xaxis.type&&!n.config.xaxis.convertedCatToNumeric?e:e-1,l=n.globals.padHorizontal,c=n.globals.padHorizontal+n.globals.gridWidth/u,d=n.globals.gridHeight,h=0,p=0;h<e;h++,p++)p>=n.config.grid.column.colors.length&&(p=0),this._drawGridBandRect({c:p,x1:l,y1:0,x2:c,y2:d,type:"column"}),l+=n.globals.gridWidth/u}}]),e}(),J=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return l(e,[{key:"niceScale",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0,i=this.w,o=Math.abs(t-e);if("dataPoints"===(n=this._adjustTicksForSmallRange(n,r,o))&&(n=i.globals.dataPoints-1),e===Number.MIN_VALUE&&0===t||!b.isNumber(e)&&!b.isNumber(t)||e===Number.MIN_VALUE&&t===-Number.MAX_VALUE){e=0,t=n;var s=this.linearScale(e,t,n);return s}e>t?(console.warn("axis.min cannot be greater than axis.max"),t=e+.1):e===t&&(e=0===e?0:e-.5,t=0===t?2:t+.5);var u=[];o<1&&a&&("candlestick"===i.config.chart.type||"candlestick"===i.config.series[r].type||"boxPlot"===i.config.chart.type||"boxPlot"===i.config.series[r].type||i.globals.isRangeData)&&(t*=1.01);var l=n+1;l<2?l=2:l>2&&(l-=2);var c=o/l,d=Math.floor(b.log10(c)),h=Math.pow(10,d),p=Math.round(c/h);p<1&&(p=1);var f=p*h,m=f*Math.floor(e/f),g=f*Math.ceil(t/f),v=m;if(a&&o>2){for(;u.push(v),!((v+=f)>g););return{result:u,niceMin:u[0],niceMax:u[u.length-1]}}var y=e;(u=[]).push(y);for(var x=Math.abs(t-e)/n,A=0;A<=n;A++)y+=x,u.push(y);return u[u.length-2]>=t&&u.pop(),{result:u,niceMin:u[0],niceMax:u[u.length-1]}}},{key:"linearScale",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3?arguments[3]:void 0,a=Math.abs(t-e);"dataPoints"===(n=this._adjustTicksForSmallRange(n,r,a))&&(n=this.w.globals.dataPoints-1);var i=a/n;n===Number.MAX_VALUE&&(n=10,i=1);for(var o=[],s=e;n>=0;)o.push(s),s+=i,n-=1;return{result:o,niceMin:o[0],niceMax:o[o.length-1]}}},{key:"logarithmicScaleNice",value:function(e,t,n){t<=0&&(t=Math.max(e,n)),e<=0&&(e=Math.min(t,n));for(var r=[],a=Math.ceil(Math.log(t)/Math.log(n)+1),i=Math.floor(Math.log(e)/Math.log(n));i<a;i++)r.push(Math.pow(n,i));return{result:r,niceMin:r[0],niceMax:r[r.length-1]}}},{key:"logarithmicScale",value:function(e,t,n){t<=0&&(t=Math.max(e,n)),e<=0&&(e=Math.min(t,n));for(var r=[],a=Math.log(t)/Math.log(n),i=Math.log(e)/Math.log(n),o=a-i,s=Math.round(o),u=o/s,l=0,c=i;l<s;l++,c+=u)r.push(Math.pow(n,c));return r.push(Math.pow(n,a)),{result:r,niceMin:e,niceMax:t}}},{key:"_adjustTicksForSmallRange",value:function(e,t,n){var r=e;if(void 0!==t&&this.w.config.yaxis[t].labels.formatter&&void 0===this.w.config.yaxis[t].tickAmount){var a=this.w.config.yaxis[t].labels.formatter(1);b.isNumber(Number(a))&&!b.isFloat(a)&&(r=Math.ceil(n))}return r<e?r:e}},{key:"setYScaleForIndex",value:function(e,t,n){var r=this.w.globals,a=this.w.config,i=r.isBarHorizontal?a.xaxis:a.yaxis[e];void 0===r.yAxisScale[e]&&(r.yAxisScale[e]=[]);var o=Math.abs(n-t);if(i.logarithmic&&o<=5&&(r.invalidLogScale=!0),i.logarithmic&&o>5)r.allSeriesCollapsed=!1,r.yAxisScale[e]=this.logarithmicScale(t,n,i.logBase),r.yAxisScale[e]=i.forceNiceScale?this.logarithmicScaleNice(t,n,i.logBase):this.logarithmicScale(t,n,i.logBase);else if(n!==-Number.MAX_VALUE&&b.isNumber(n))if(r.allSeriesCollapsed=!1,void 0===i.min&&void 0===i.max||i.forceNiceScale){var s=void 0===a.yaxis[e].max&&void 0===a.yaxis[e].min||a.yaxis[e].forceNiceScale;r.yAxisScale[e]=this.niceScale(t,n,i.tickAmount?i.tickAmount:o<5&&o>1?o+1:5,e,s)}else r.yAxisScale[e]=this.linearScale(t,n,i.tickAmount,e);else r.yAxisScale[e]=this.linearScale(0,5,5)}},{key:"setXScale",value:function(e,t){var n=this.w,r=n.globals,a=n.config.xaxis,i=Math.abs(t-e);return t!==-Number.MAX_VALUE&&b.isNumber(t)?r.xAxisScale=this.linearScale(e,t,a.tickAmount?a.tickAmount:i<5&&i>1?i+1:5,0):r.xAxisScale=this.linearScale(0,5,5),r.xAxisScale}},{key:"setMultipleYScales",value:function(){var e=this,t=this.w.globals,n=this.w.config,r=t.minYArr.concat([]),a=t.maxYArr.concat([]),i=[];n.yaxis.forEach((function(t,o){var s=o;n.series.forEach((function(e,n){e.name===t.seriesName&&(s=n,o!==n?i.push({index:n,similarIndex:o,alreadyExists:!0}):i.push({index:n}))}));var u=r[s],l=a[s];e.setYScaleForIndex(o,u,l)})),this.sameScaleInMultipleAxes(r,a,i)}},{key:"sameScaleInMultipleAxes",value:function(e,t,n){var r=this,a=this.w.config,i=this.w.globals,o=[];n.forEach((function(e){e.alreadyExists&&(void 0===o[e.index]&&(o[e.index]=[]),o[e.index].push(e.index),o[e.index].push(e.similarIndex))})),i.yAxisSameScaleIndices=o,o.forEach((function(e,t){o.forEach((function(n,r){var a,i;t!==r&&(a=e,i=n,a.filter((function(e){return-1!==i.indexOf(e)}))).length>0&&(o[t]=o[t].concat(o[r]))}))}));var s=o.map((function(e){return e.filter((function(t,n){return e.indexOf(t)===n}))})).map((function(e){return e.sort()}));o=o.filter((function(e){return!!e}));var u=s.slice(),l=u.map((function(e){return JSON.stringify(e)}));u=u.filter((function(e,t){return l.indexOf(JSON.stringify(e))===t}));var c=[],d=[];e.forEach((function(e,n){u.forEach((function(r,a){r.indexOf(n)>-1&&(void 0===c[a]&&(c[a]=[],d[a]=[]),c[a].push({key:n,value:e}),d[a].push({key:n,value:t[n]}))}))}));var h=Array.apply(null,Array(u.length)).map(Number.prototype.valueOf,Number.MIN_VALUE),p=Array.apply(null,Array(u.length)).map(Number.prototype.valueOf,-Number.MAX_VALUE);c.forEach((function(e,t){e.forEach((function(e,n){h[t]=Math.min(e.value,h[t])}))})),d.forEach((function(e,t){e.forEach((function(e,n){p[t]=Math.max(e.value,p[t])}))})),e.forEach((function(e,t){d.forEach((function(e,n){var o=h[n],s=p[n];a.chart.stacked&&(s=0,e.forEach((function(e,t){e.value!==-Number.MAX_VALUE&&(s+=e.value),o!==Number.MIN_VALUE&&(o+=c[n][t].value)}))),e.forEach((function(n,u){e[u].key===t&&(void 0!==a.yaxis[t].min&&(o="function"==typeof a.yaxis[t].min?a.yaxis[t].min(i.minY):a.yaxis[t].min),void 0!==a.yaxis[t].max&&(s="function"==typeof a.yaxis[t].max?a.yaxis[t].max(i.maxY):a.yaxis[t].max),r.setYScaleForIndex(t,o,s))}))}))}))}},{key:"autoScaleY",value:function(e,t,n){e||(e=this);var r=e.w;if(r.globals.isMultipleYAxis||r.globals.collapsedSeries.length)return console.warn("autoScaleYaxis is not supported in a multi-yaxis chart."),t;var a=r.globals.seriesX[0],i=r.config.chart.stacked;return t.forEach((function(e,o){for(var s=0,u=0;u<a.length;u++)if(a[u]>=n.xaxis.min){s=u;break}var l,c,d=r.globals.minYArr[o],h=r.globals.maxYArr[o],p=r.globals.stackedSeriesTotals;r.globals.series.forEach((function(o,u){var f=o[s];i?(f=p[s],l=c=f,p.forEach((function(e,t){a[t]<=n.xaxis.max&&a[t]>=n.xaxis.min&&(e>c&&null!==e&&(c=e),o[t]<l&&null!==o[t]&&(l=o[t]))}))):(l=c=f,o.forEach((function(e,t){if(a[t]<=n.xaxis.max&&a[t]>=n.xaxis.min){var i=e,o=e;r.globals.series.forEach((function(n,r){null!==e&&(i=Math.min(n[t],i),o=Math.max(n[t],o))})),o>c&&null!==o&&(c=o),i<l&&null!==i&&(l=i)}}))),void 0===l&&void 0===c&&(l=d,c=h),(c*=c<0?.9:1.1)<0&&c<h&&(c=h),(l*=l<0?1.1:.9)<0&&l>d&&(l=d),t.length>1?(t[u].min=void 0===e.min?l:e.min,t[u].max=void 0===e.max?c:e.max):(t[0].min=void 0===e.min?l:e.min,t[0].max=void 0===e.max?c:e.max)}))})),t}}]),e}(),Q=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.scales=new J(t)}return l(e,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this.w.config,i=this.w.globals,o=-Number.MAX_VALUE,s=Number.MIN_VALUE;null===r&&(r=e+1);var u=i.series,l=u,c=u;"candlestick"===a.chart.type?(l=i.seriesCandleL,c=i.seriesCandleH):"boxPlot"===a.chart.type?(l=i.seriesCandleO,c=i.seriesCandleC):i.isRangeData&&(l=i.seriesRangeStart,c=i.seriesRangeEnd);for(var d=e;d<r;d++){i.dataPoints=Math.max(i.dataPoints,u[d].length),i.categoryLabels.length&&(i.dataPoints=i.categoryLabels.filter((function(e){return void 0!==e})).length);for(var h=0;h<i.series[d].length;h++){var p=u[d][h];null!==p&&b.isNumber(p)?(void 0!==c[d][h]&&(o=Math.max(o,c[d][h]),t=Math.min(t,c[d][h])),void 0!==l[d][h]&&(t=Math.min(t,l[d][h]),n=Math.max(n,l[d][h])),"candlestick"!==this.w.config.chart.type&&"boxPlot"!==this.w.config.chart.type||(void 0!==i.seriesCandleC[d][h]&&(o=Math.max(o,i.seriesCandleO[d][h]),o=Math.max(o,i.seriesCandleH[d][h]),o=Math.max(o,i.seriesCandleL[d][h]),o=Math.max(o,i.seriesCandleC[d][h]),"boxPlot"===this.w.config.chart.type&&(o=Math.max(o,i.seriesCandleM[d][h]))),!a.series[d].type||"candlestick"===a.series[d].type&&"boxPlot"===a.series[d].type||(o=Math.max(o,i.series[d][h]),t=Math.min(t,i.series[d][h])),n=o),i.seriesGoals[d]&&i.seriesGoals[d][h]&&Array.isArray(i.seriesGoals[d][h])&&i.seriesGoals[d][h].forEach((function(e){s!==Number.MIN_VALUE&&(s=Math.min(s,e.value),t=s),o=Math.max(o,e.value),n=o})),b.isFloat(p)&&(p=b.noExponents(p),i.yValueDecimal=Math.max(i.yValueDecimal,p.toString().split(".")[1].length)),s>l[d][h]&&l[d][h]<0&&(s=l[d][h])):i.hasNullValues=!0}}return"rangeBar"===a.chart.type&&i.seriesRangeStart.length&&i.isBarHorizontal&&(s=t),"bar"===a.chart.type&&(s<0&&o<0&&(o=0),s===Number.MIN_VALUE&&(s=0)),{minY:s,maxY:o,lowestY:t,highestY:n}}},{key:"setYRange",value:function(){var e=this.w.globals,t=this.w.config;e.maxY=-Number.MAX_VALUE,e.minY=Number.MIN_VALUE;var n=Number.MAX_VALUE;if(e.isMultipleYAxis)for(var r=0;r<e.series.length;r++){var a=this.getMinYMaxY(r,n,null,r+1);e.minYArr.push(a.minY),e.maxYArr.push(a.maxY),n=a.lowestY}var i=this.getMinYMaxY(0,n,null,e.series.length);if(e.minY=i.minY,e.maxY=i.maxY,n=i.lowestY,t.chart.stacked&&this._setStackedMinMax(),("line"===t.chart.type||"area"===t.chart.type||"candlestick"===t.chart.type||"boxPlot"===t.chart.type||"rangeBar"===t.chart.type&&!e.isBarHorizontal)&&e.minY===Number.MIN_VALUE&&n!==-Number.MAX_VALUE&&n!==e.maxY){var o=e.maxY-n;(n>=0&&n<=10||void 0!==t.yaxis[0].min||void 0!==t.yaxis[0].max)&&(o=0),e.minY=n-5*o/100,n>0&&e.minY<0&&(e.minY=0),e.maxY=e.maxY+5*o/100}return t.yaxis.forEach((function(t,n){void 0!==t.max&&("number"==typeof t.max?e.maxYArr[n]=t.max:"function"==typeof t.max&&(e.maxYArr[n]=t.max(e.isMultipleYAxis?e.maxYArr[n]:e.maxY)),e.maxY=e.maxYArr[n]),void 0!==t.min&&("number"==typeof t.min?e.minYArr[n]=t.min:"function"==typeof t.min&&(e.minYArr[n]=t.min(e.isMultipleYAxis?e.minYArr[n]===Number.MIN_VALUE?0:e.minYArr[n]:e.minY)),e.minY=e.minYArr[n])})),e.isBarHorizontal&&["min","max"].forEach((function(n){void 0!==t.xaxis[n]&&"number"==typeof t.xaxis[n]&&("min"===n?e.minY=t.xaxis[n]:e.maxY=t.xaxis[n])})),e.isMultipleYAxis?(this.scales.setMultipleYScales(),e.minY=n,e.yAxisScale.forEach((function(t,n){e.minYArr[n]=t.niceMin,e.maxYArr[n]=t.niceMax}))):(this.scales.setYScaleForIndex(0,e.minY,e.maxY),e.minY=e.yAxisScale[0].niceMin,e.maxY=e.yAxisScale[0].niceMax,e.minYArr[0]=e.yAxisScale[0].niceMin,e.maxYArr[0]=e.yAxisScale[0].niceMax),{minY:e.minY,maxY:e.maxY,minYArr:e.minYArr,maxYArr:e.maxYArr,yAxisScale:e.yAxisScale}}},{key:"setXRange",value:function(){var e=this.w.globals,t=this.w.config,n="numeric"===t.xaxis.type||"datetime"===t.xaxis.type||"category"===t.xaxis.type&&!e.noLabelsProvided||e.noLabelsProvided||e.isXNumeric;if(e.isXNumeric&&function(){for(var t=0;t<e.series.length;t++)if(e.labels[t])for(var n=0;n<e.labels[t].length;n++)null!==e.labels[t][n]&&b.isNumber(e.labels[t][n])&&(e.maxX=Math.max(e.maxX,e.labels[t][n]),e.initialMaxX=Math.max(e.maxX,e.labels[t][n]),e.minX=Math.min(e.minX,e.labels[t][n]),e.initialMinX=Math.min(e.minX,e.labels[t][n]))}(),e.noLabelsProvided&&0===t.xaxis.categories.length&&(e.maxX=e.labels[e.labels.length-1],e.initialMaxX=e.labels[e.labels.length-1],e.minX=1,e.initialMinX=1),e.isXNumeric||e.noLabelsProvided||e.dataFormatXNumeric){var r;if(void 0===t.xaxis.tickAmount?(r=Math.round(e.svgWidth/150),"numeric"===t.xaxis.type&&e.dataPoints<30&&(r=e.dataPoints-1),r>e.dataPoints&&0!==e.dataPoints&&(r=e.dataPoints-1)):"dataPoints"===t.xaxis.tickAmount?(e.series.length>1&&(r=e.series[e.maxValsInArrayIndex].length-1),e.isXNumeric&&(r=e.maxX-e.minX-1)):r=t.xaxis.tickAmount,e.xTickAmount=r,void 0!==t.xaxis.max&&"number"==typeof t.xaxis.max&&(e.maxX=t.xaxis.max),void 0!==t.xaxis.min&&"number"==typeof t.xaxis.min&&(e.minX=t.xaxis.min),void 0!==t.xaxis.range&&(e.minX=e.maxX-t.xaxis.range),e.minX!==Number.MAX_VALUE&&e.maxX!==-Number.MAX_VALUE)if(t.xaxis.convertedCatToNumeric&&!e.dataFormatXNumeric){for(var a=[],i=e.minX-1;i<e.maxX;i++)a.push(i+1);e.xAxisScale={result:a,niceMin:a[0],niceMax:a[a.length-1]}}else e.xAxisScale=this.scales.setXScale(e.minX,e.maxX);else e.xAxisScale=this.scales.linearScale(1,r,r),e.noLabelsProvided&&e.labels.length>0&&(e.xAxisScale=this.scales.linearScale(1,e.labels.length,r-1),e.seriesX=e.labels.slice());n&&(e.labels=e.xAxisScale.result.slice())}return e.isBarHorizontal&&e.labels.length&&(e.xTickAmount=e.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:e.minX,maxX:e.maxX}}},{key:"setZRange",value:function(){var e=this.w.globals;if(e.isDataXYZ)for(var t=0;t<e.series.length;t++)if(void 0!==e.seriesZ[t])for(var n=0;n<e.seriesZ[t].length;n++)null!==e.seriesZ[t][n]&&b.isNumber(e.seriesZ[t][n])&&(e.maxZ=Math.max(e.maxZ,e.seriesZ[t][n]),e.minZ=Math.min(e.minZ,e.seriesZ[t][n]))}},{key:"_handleSingleDataPoint",value:function(){var e=this.w.globals,t=this.w.config;if(e.minX===e.maxX){var n=new B(this.ctx);if("datetime"===t.xaxis.type){var r=n.getDate(e.minX);t.xaxis.labels.datetimeUTC?r.setUTCDate(r.getUTCDate()-2):r.setDate(r.getDate()-2),e.minX=new Date(r).getTime();var a=n.getDate(e.maxX);t.xaxis.labels.datetimeUTC?a.setUTCDate(a.getUTCDate()+2):a.setDate(a.getDate()+2),e.maxX=new Date(a).getTime()}else("numeric"===t.xaxis.type||"category"===t.xaxis.type&&!e.noLabelsProvided)&&(e.minX=e.minX-2,e.initialMinX=e.minX,e.maxX=e.maxX+2,e.initialMaxX=e.maxX)}}},{key:"_getMinXDiff",value:function(){var e=this.w.globals;e.isXNumeric&&e.seriesX.forEach((function(t,n){1===t.length&&t.push(e.seriesX[e.maxValsInArrayIndex][e.seriesX[e.maxValsInArrayIndex].length-1]);var r=t.slice();r.sort((function(e,t){return e-t})),r.forEach((function(t,n){if(n>0){var a=t-r[n-1];a>0&&(e.minXDiff=Math.min(a,e.minXDiff))}})),1!==e.dataPoints&&e.minXDiff!==Number.MAX_VALUE||(e.minXDiff=.5)}))}},{key:"_setStackedMinMax",value:function(){var e=this.w.globals,t=[],n=[];if(e.series.length)for(var r=0;r<e.series[e.maxValsInArrayIndex].length;r++)for(var a=0,i=0,o=0;o<e.series.length;o++)null!==e.series[o][r]&&b.isNumber(e.series[o][r])&&(e.series[o][r]>0?a=a+parseFloat(e.series[o][r])+1e-4:i+=parseFloat(e.series[o][r])),o===e.series.length-1&&(t.push(a),n.push(i));for(var s=0;s<t.length;s++)e.maxY=Math.max(e.maxY,t[s]),e.minY=Math.min(e.minY,n[s])}}]),e}(),$=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var n=this.w;this.xaxisFontSize=n.config.xaxis.labels.style.fontSize,this.axisFontFamily=n.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=n.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===n.config.chart.type&&n.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===n.config.xaxis.position&&(this.xAxisoffX=n.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new q(t)}return l(e,[{key:"drawYaxis",value:function(e){var t=this,n=this.w,r=new w(this.ctx),a=n.config.yaxis[e].labels.style,i=a.fontSize,o=a.fontFamily,s=a.fontWeight,u=r.group({class:"apexcharts-yaxis",rel:e,transform:"translate("+n.globals.translateYAxisX[e]+", 0)"});if(this.axesUtils.isYAxisHidden(e))return u;var l=r.group({class:"apexcharts-yaxis-texts-g"});u.add(l);var c=n.globals.yAxisScale[e].result.length-1,d=n.globals.gridHeight/c,h=n.globals.translateY,p=n.globals.yLabelFormatters[e],f=n.globals.yAxisScale[e].result.slice();f=this.axesUtils.checkForReversedLabels(e,f);var m="";if(n.config.yaxis[e].labels.show)for(var g=function(u){var g=f[u];g=p(g,u,n);var v=n.config.yaxis[e].labels.padding;n.config.yaxis[e].opposite&&0!==n.config.yaxis.length&&(v*=-1);var y=t.axesUtils.getYAxisForeColor(a.colors,e),b=r.drawText({x:v,y:h+c/10+n.config.yaxis[e].labels.offsetY+1,text:g,textAnchor:n.config.yaxis[e].opposite?"start":"end",fontSize:i,fontFamily:o,fontWeight:s,maxWidth:n.config.yaxis[e].labels.maxWidth,foreColor:Array.isArray(y)?y[u]:y,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+a.cssClass});u===c&&(m=b),l.add(b);var x=document.createElementNS(n.globals.SVGNS,"title");if(x.textContent=Array.isArray(g)?g.join(" "):g,b.node.appendChild(x),0!==n.config.yaxis[e].labels.rotate){var A=r.rotateAroundCenter(m.node),w=r.rotateAroundCenter(b.node);b.node.setAttribute("transform","rotate(".concat(n.config.yaxis[e].labels.rotate," ").concat(A.x," ").concat(w.y,")"))}h+=d},v=c;v>=0;v--)g(v);if(void 0!==n.config.yaxis[e].title.text){var y=r.group({class:"apexcharts-yaxis-title"}),b=0;n.config.yaxis[e].opposite&&(b=n.globals.translateYAxisX[e]);var x=r.drawText({x:b,y:n.globals.gridHeight/2+n.globals.translateY+n.config.yaxis[e].title.offsetY,text:n.config.yaxis[e].title.text,textAnchor:"end",foreColor:n.config.yaxis[e].title.style.color,fontSize:n.config.yaxis[e].title.style.fontSize,fontWeight:n.config.yaxis[e].title.style.fontWeight,fontFamily:n.config.yaxis[e].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+n.config.yaxis[e].title.style.cssClass});y.add(x),u.add(y)}var A=n.config.yaxis[e].axisBorder,k=31+A.offsetX;if(n.config.yaxis[e].opposite&&(k=-31-A.offsetX),A.show){var S=r.drawLine(k,n.globals.translateY+A.offsetY-2,k,n.globals.gridHeight+n.globals.translateY+A.offsetY+2,A.color,0,A.width);u.add(S)}return n.config.yaxis[e].axisTicks.show&&this.axesUtils.drawYAxisTicks(k,c,A,n.config.yaxis[e].axisTicks,e,d,u),u}},{key:"drawYaxisInversed",value:function(e){var t=this.w,n=new w(this.ctx),r=n.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),a=n.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});r.add(a);var i=t.globals.yAxisScale[e].result.length-1,o=t.globals.gridWidth/i+.1,s=o+t.config.xaxis.labels.offsetX,u=t.globals.xLabelFormatter,l=t.globals.yAxisScale[e].result.slice(),c=t.globals.timescaleLabels;c.length>0&&(this.xaxisLabels=c.slice(),i=(l=c.slice()).length),l=this.axesUtils.checkForReversedLabels(e,l);var d=c.length;if(t.config.xaxis.labels.show)for(var h=d?0:i;d?h<d:h>=0;d?h++:h--){var p=l[h];p=u(p,h,t);var f=t.globals.gridWidth+t.globals.padHorizontal-(s-o+t.config.xaxis.labels.offsetX);if(c.length){var m=this.axesUtils.getLabel(l,c,f,h,this.drawnLabels,this.xaxisFontSize);f=m.x,p=m.text,this.drawnLabels.push(m.text),0===h&&t.globals.skipFirstTimelinelabel&&(p=""),h===l.length-1&&t.globals.skipLastTimelinelabel&&(p="")}var g=n.drawText({x:f,y:this.xAxisoffX+t.config.xaxis.labels.offsetY+30-("top"===t.config.xaxis.position?t.globals.xAxisHeight+t.config.xaxis.axisTicks.height-2:0),text:p,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[e]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:t.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+t.config.xaxis.labels.style.cssClass});a.add(g),g.tspan(p);var v=document.createElementNS(t.globals.SVGNS,"title");v.textContent=p,g.node.appendChild(v),s+=o}return this.inversedYAxisTitleText(r),this.inversedYAxisBorder(r),r}},{key:"inversedYAxisBorder",value:function(e){var t=this.w,n=new w(this.ctx),r=t.config.xaxis.axisBorder;if(r.show){var a=0;"bar"===t.config.chart.type&&t.globals.isXNumeric&&(a-=15);var i=n.drawLine(t.globals.padHorizontal+a+r.offsetX,this.xAxisoffX,t.globals.gridWidth,this.xAxisoffX,r.color,0,r.height);e.add(i)}}},{key:"inversedYAxisTitleText",value:function(e){var t=this.w,n=new w(this.ctx);if(void 0!==t.config.xaxis.title.text){var r=n.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),a=n.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(t.config.xaxis.title.style.fontSize)+t.config.xaxis.title.offsetY+20,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+t.config.xaxis.title.style.cssClass});r.add(a),e.add(r)}}},{key:"yAxisTitleRotate",value:function(e,t){var n=this.w,r=new w(this.ctx),a={width:0,height:0},i={width:0,height:0},o=n.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-texts-g"));null!==o&&(a=o.getBoundingClientRect());var s=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(e,"'] .apexcharts-yaxis-title text"));if(null!==s&&(i=s.getBoundingClientRect()),null!==s){var u=this.xPaddingForYAxisTitle(e,a,i,t);s.setAttribute("x",u.xPos-(t?10:0))}if(null!==s){var l=r.rotateAroundCenter(s);s.setAttribute("transform","rotate(".concat(t?-1*n.config.yaxis[e].title.rotate:n.config.yaxis[e].title.rotate," ").concat(l.x," ").concat(l.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(e,t,n,r){var a=this.w,i=0,o=0,s=10;return void 0===a.config.yaxis[e].title.text||e<0?{xPos:o,padd:0}:(r?(o=t.width+a.config.yaxis[e].title.offsetX+n.width/2+s/2,0===(i+=1)&&(o-=s/2)):(o=-1*t.width+a.config.yaxis[e].title.offsetX+s/2+n.width/2,a.globals.isBarHorizontal&&(s=25,o=-1*t.width-a.config.yaxis[e].title.offsetX-s)),{xPos:o,padd:s})}},{key:"setYAxisXPosition",value:function(e,t){var n=this.w,r=0,a=0,i=18,o=1;n.config.yaxis.length>1&&(this.multipleYs=!0),n.config.yaxis.map((function(s,u){var l=n.globals.ignoreYAxisIndexes.indexOf(u)>-1||!s.show||s.floating||0===e[u].width,c=e[u].width+t[u].width;s.opposite?n.globals.isBarHorizontal?(a=n.globals.gridWidth+n.globals.translateX-1,n.globals.translateYAxisX[u]=a-s.labels.offsetX):(a=n.globals.gridWidth+n.globals.translateX+o,l||(o=o+c+20),n.globals.translateYAxisX[u]=a-s.labels.offsetX+20):(r=n.globals.translateX-i,l||(i=i+c+20),n.globals.translateYAxisX[u]=r+s.labels.offsetX)}))}},{key:"setYAxisTextAlignments",value:function(){var e=this.w,t=e.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(t=b.listToArray(t)).forEach((function(t,n){var r=e.config.yaxis[n];if(r&&void 0!==r.labels.align){var a=e.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(n,"'] .apexcharts-yaxis-texts-g")),i=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(n,"'] .apexcharts-yaxis-label"));i=b.listToArray(i);var o=a.getBoundingClientRect();"left"===r.labels.align?(i.forEach((function(e,t){e.setAttribute("text-anchor","start")})),r.opposite||a.setAttribute("transform","translate(-".concat(o.width,", 0)"))):"center"===r.labels.align?(i.forEach((function(e,t){e.setAttribute("text-anchor","middle")})),a.setAttribute("transform","translate(".concat(o.width/2*(r.opposite?1:-1),", 0)"))):"right"===r.labels.align&&(i.forEach((function(e,t){e.setAttribute("text-anchor","end")})),r.opposite&&a.setAttribute("transform","translate(".concat(o.width,", 0)")))}}))}}]),e}(),ee=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.documentEvent=b.bind(this.documentEvent,this)}return l(e,[{key:"addEventListener",value:function(e,t){var n=this.w;n.globals.events.hasOwnProperty(e)?n.globals.events[e].push(t):n.globals.events[e]=[t]}},{key:"removeEventListener",value:function(e,t){var n=this.w;if(n.globals.events.hasOwnProperty(e)){var r=n.globals.events[e].indexOf(t);-1!==r&&n.globals.events[e].splice(r,1)}}},{key:"fireEvent",value:function(e,t){var n=this.w;if(n.globals.events.hasOwnProperty(e)){t&&t.length||(t=[]);for(var r=n.globals.events[e],a=r.length,i=0;i<a;i++)r[i].apply(null,t)}}},{key:"setupEventHandlers",value:function(){var e=this,t=this.w,n=this.ctx,r=t.globals.dom.baseEl.querySelector(t.globals.chartClass);this.ctx.eventList.forEach((function(e){r.addEventListener(e,(function(e){var r=Object.assign({},t,{seriesIndex:t.globals.capturedSeriesIndex,dataPointIndex:t.globals.capturedDataPointIndex});"mousemove"===e.type||"touchmove"===e.type?"function"==typeof t.config.chart.events.mouseMove&&t.config.chart.events.mouseMove(e,n,r):"mouseleave"===e.type||"touchleave"===e.type?"function"==typeof t.config.chart.events.mouseLeave&&t.config.chart.events.mouseLeave(e,n,r):("mouseup"===e.type&&1===e.which||"touchend"===e.type)&&("function"==typeof t.config.chart.events.click&&t.config.chart.events.click(e,n,r),n.ctx.events.fireEvent("click",[e,n,r]))}),{capture:!1,passive:!0})})),this.ctx.eventList.forEach((function(n){t.globals.dom.baseEl.addEventListener(n,e.documentEvent,{passive:!0})})),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(e){var t=this.w,n=e.target.className;if("click"===e.type){var r=t.globals.dom.baseEl.querySelector(".apexcharts-menu");r&&r.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==n&&r.classList.remove("apexcharts-menu-open")}t.globals.clientX="touchmove"===e.type?e.touches[0].clientX:e.clientX,t.globals.clientY="touchmove"===e.type?e.touches[0].clientY:e.clientY}}]),e}(),te=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return l(e,[{key:"setCurrentLocaleValues",value:function(e){var t=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(t=this.w.config.chart.locales.concat(window.Apex.chart.locales));var n=t.filter((function(t){return t.name===e}))[0];if(!n)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var r=b.extend(T,n);this.w.globals.locale=r.options}}]),e}(),ne=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return l(e,[{key:"drawAxis",value:function(e,t){var n,r,a=this.w.globals,i=this.w.config,o=new K(this.ctx),s=new $(this.ctx);a.axisCharts&&"radar"!==e&&(a.isBarHorizontal?(r=s.drawYaxisInversed(0),n=o.drawXaxisInversed(0),a.dom.elGraphical.add(n),a.dom.elGraphical.add(r)):(n=o.drawXaxis(),a.dom.elGraphical.add(n),i.yaxis.map((function(e,t){-1===a.ignoreYAxisIndexes.indexOf(t)&&(r=s.drawYaxis(t),a.dom.Paper.add(r))}))))}}]),e}(),re=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return l(e,[{key:"drawXCrosshairs",value:function(){var e=this.w,t=new w(this.ctx),n=new A(this.ctx),r=e.config.xaxis.crosshairs.fill.gradient,a=e.config.xaxis.crosshairs.dropShadow,i=e.config.xaxis.crosshairs.fill.type,o=r.colorFrom,s=r.colorTo,u=r.opacityFrom,l=r.opacityTo,c=r.stops,d=a.enabled,h=a.left,p=a.top,f=a.blur,m=a.color,g=a.opacity,v=e.config.xaxis.crosshairs.fill.color;if(e.config.xaxis.crosshairs.show){"gradient"===i&&(v=t.drawGradient("vertical",o,s,u,l,null,c,null));var y=t.drawRect();1===e.config.xaxis.crosshairs.width&&(y=t.drawLine());var x=e.globals.gridHeight;(!b.isNumber(x)||x<0)&&(x=0);var k=e.config.xaxis.crosshairs.width;(!b.isNumber(k)||k<0)&&(k=0),y.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:x,width:k,height:x,fill:v,filter:"none","fill-opacity":e.config.xaxis.crosshairs.opacity,stroke:e.config.xaxis.crosshairs.stroke.color,"stroke-width":e.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":e.config.xaxis.crosshairs.stroke.dashArray}),d&&(y=n.dropShadow(y,{left:h,top:p,blur:f,color:m,opacity:g})),e.globals.dom.elGraphical.add(y)}}},{key:"drawYCrosshairs",value:function(){var e=this.w,t=new w(this.ctx),n=e.config.yaxis[0].crosshairs,r=e.globals.barPadForNumericAxis;if(e.config.yaxis[0].crosshairs.show){var a=t.drawLine(-r,0,e.globals.gridWidth+r,0,n.stroke.color,n.stroke.dashArray,n.stroke.width);a.attr({class:"apexcharts-ycrosshairs"}),e.globals.dom.elGraphical.add(a)}var i=t.drawLine(-r,0,e.globals.gridWidth+r,0,n.stroke.color,0,0);i.attr({class:"apexcharts-ycrosshairs-hidden"}),e.globals.dom.elGraphical.add(i)}}]),e}(),ae=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return l(e,[{key:"checkResponsiveConfig",value:function(e){var t=this,n=this.w,r=n.config;if(0!==r.responsive.length){var a=r.responsive.slice();a.sort((function(e,t){return e.breakpoint>t.breakpoint?1:t.breakpoint>e.breakpoint?-1:0})).reverse();var i=new V({}),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a[0].breakpoint,o=window.innerWidth>0?window.innerWidth:screen.width;if(o>r){var s=k.extendArrayProps(i,n.globals.initialConfig,n);e=b.extend(s,e),e=b.extend(n.config,e),t.overrideResponsiveOptions(e)}else for(var u=0;u<a.length;u++)o<a[u].breakpoint&&(e=k.extendArrayProps(i,a[u].options,n),e=b.extend(n.config,e),t.overrideResponsiveOptions(e))};if(e){var s=k.extendArrayProps(i,e,n);s=b.extend(n.config,s),o(s=b.extend(s,e))}else o({})}}},{key:"overrideResponsiveOptions",value:function(e){var t=new V(e).init({responsiveOverride:!0});this.w.config=t}}]),e}(),ie=function(){function e(t){s(this,e),this.ctx=t,this.colors=[],this.w=t.w;var n=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===n.config.chart.type&&n.config.plotOptions.treemap.distributed||"heatmap"===n.config.chart.type&&n.config.plotOptions.heatmap.distributed,this.isBarDistributed=n.config.plotOptions.bar.distributed&&("bar"===n.config.chart.type||"rangeBar"===n.config.chart.type)}return l(e,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var e=this,t=this.w,n=new b;if(t.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(t.config.theme.mode)),void 0===t.config.colors?t.globals.colors=this.predefined():(t.globals.colors=t.config.colors,Array.isArray(t.config.colors)&&t.config.colors.length>0&&"function"==typeof t.config.colors[0]&&(t.globals.colors=t.config.series.map((function(n,r){var a=t.config.colors[r];return a||(a=t.config.colors[0]),"function"==typeof a?(e.isColorFn=!0,a({value:t.globals.axisCharts?t.globals.series[r][0]?t.globals.series[r][0]:0:t.globals.series[r],seriesIndex:r,dataPointIndex:r,w:t})):a})))),t.globals.seriesColors.map((function(e,n){e&&(t.globals.colors[n]=e)})),t.config.theme.monochrome.enabled){var r=[],a=t.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(a=t.globals.series[0].length*t.globals.series.length);for(var i=t.config.theme.monochrome.color,o=1/(a/t.config.theme.monochrome.shadeIntensity),s=t.config.theme.monochrome.shadeTo,u=0,l=0;l<a;l++){var c=void 0;"dark"===s?(c=n.shadeColor(-1*u,i),u+=o):(c=n.shadeColor(u,i),u+=o),r.push(c)}t.globals.colors=r.slice()}var d=t.globals.colors.slice();this.pushExtraColors(t.globals.colors),["fill","stroke"].forEach((function(n){void 0===t.config[n].colors?t.globals[n].colors=e.isColorFn?t.config.colors:d:t.globals[n].colors=t.config[n].colors.slice(),e.pushExtraColors(t.globals[n].colors)})),void 0===t.config.dataLabels.style.colors?t.globals.dataLabels.style.colors=d:t.globals.dataLabels.style.colors=t.config.dataLabels.style.colors.slice(),this.pushExtraColors(t.globals.dataLabels.style.colors,50),void 0===t.config.plotOptions.radar.polygons.fill.colors?t.globals.radarPolygons.fill.colors=["dark"===t.config.theme.mode?"#424242":"none"]:t.globals.radarPolygons.fill.colors=t.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(t.globals.radarPolygons.fill.colors,20),void 0===t.config.markers.colors?t.globals.markers.colors=d:t.globals.markers.colors=t.config.markers.colors.slice(),this.pushExtraColors(t.globals.markers.colors)}},{key:"pushExtraColors",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.w,a=t||r.globals.series.length;if(null===n&&(n=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===r.config.chart.type&&r.config.plotOptions.heatmap.colorScale.inverse),n&&r.globals.series.length&&(a=r.globals.series[r.globals.maxValsInArrayIndex].length*r.globals.series.length),e.length<a)for(var i=a-e.length,o=0;o<i;o++)e.push(e[o])}},{key:"updateThemeOptions",value:function(e){e.chart=e.chart||{},e.tooltip=e.tooltip||{};var t=e.theme.mode||"light",n=e.theme.palette?e.theme.palette:"dark"===t?"palette4":"palette1",r=e.chart.foreColor?e.chart.foreColor:"dark"===t?"#f6f7f8":"#373d3f";return e.tooltip.theme=t,e.chart.foreColor=r,e.theme.palette=n,e}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),e}(),oe=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return l(e,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(e){var t=this.w,n="title"===e?t.config.title:t.config.subtitle,r=t.globals.svgWidth/2,a=n.offsetY,i="middle";if("left"===n.align?(r=10,i="start"):"right"===n.align&&(r=t.globals.svgWidth-10,i="end"),r+=n.offsetX,a=a+parseInt(n.style.fontSize,10)+n.margin/2,void 0!==n.text){var o=new w(this.ctx).drawText({x:r,y:a,text:n.text,textAnchor:i,fontSize:n.style.fontSize,fontFamily:n.style.fontFamily,fontWeight:n.style.fontWeight,foreColor:n.style.color,opacity:1});o.node.setAttribute("class","apexcharts-".concat(e,"-text")),t.globals.dom.Paper.add(o)}}}]),e}(),se=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return l(e,[{key:"getTitleSubtitleCoords",value:function(e){var t=this.w,n=0,r=0,a="title"===e?t.config.title.floating:t.config.subtitle.floating,i=t.globals.dom.baseEl.querySelector(".apexcharts-".concat(e,"-text"));if(null!==i&&!a){var o=i.getBoundingClientRect();n=o.width,r=t.globals.axisCharts?o.height+5:o.height}return{width:n,height:r}}},{key:"getLegendsRect",value:function(){var e=this.w,t=e.globals.dom.baseEl.querySelector(".apexcharts-legend");e.config.legend.height||"top"!==e.config.legend.position&&"bottom"!==e.config.legend.position||(t.style.maxHeight=e.globals.svgHeight/2+"px");var n=Object.assign({},b.getBoundingClientRect(t));return null!==t&&!e.config.legend.floating&&e.config.legend.show?this.dCtx.lgRect={x:n.x,y:n.y,height:n.height,width:0===n.height?0:n.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},"left"!==e.config.legend.position&&"right"!==e.config.legend.position||1.5*this.dCtx.lgRect.width>e.globals.svgWidth&&(this.dCtx.lgRect.width=e.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(e,t){var n=e;if(this.w.globals.isMultiLineX){var r=t.map((function(e,t){return Array.isArray(e)?e.length:1})),a=Math.max.apply(Math,g(r));n=t[r.indexOf(a)]}return n}}]),e}(),ue=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return l(e,[{key:"getxAxisLabelsCoords",value:function(){var e,t=this.w,n=t.globals.labels.slice();if(t.config.xaxis.convertedCatToNumeric&&0===n.length&&(n=t.globals.categoryLabels),t.globals.timescaleLabels.length>0){var r=this.getxAxisTimeScaleLabelsCoords();e={width:r.width,height:r.height},t.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==t.config.legend.position&&"right"!==t.config.legend.position||t.config.legend.floating?0:this.dCtx.lgRect.width;var a=t.globals.xLabelFormatter,i=b.getLargestStringFromArr(n),o=this.dCtx.dimHelpers.getLargestStringFromMultiArr(i,n);t.globals.isBarHorizontal&&(o=i=t.globals.yAxisScale[0].result.reduce((function(e,t){return e.length>t.length?e:t}),0));var s=new X(this.dCtx.ctx),u=i;i=s.xLabelFormat(a,i,u,{i:void 0,dateFormatter:new B(this.dCtx.ctx).formatDate,w:t}),o=s.xLabelFormat(a,o,u,{i:void 0,dateFormatter:new B(this.dCtx.ctx).formatDate,w:t}),(t.config.xaxis.convertedCatToNumeric&&void 0===i||""===String(i).trim())&&(o=i="1");var l=new w(this.dCtx.ctx),c=l.getTextRects(i,t.config.xaxis.labels.style.fontSize),d=c;if(i!==o&&(d=l.getTextRects(o,t.config.xaxis.labels.style.fontSize)),(e={width:c.width>=d.width?c.width:d.width,height:c.height>=d.height?c.height:d.height}).width*n.length>t.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==t.config.xaxis.labels.rotate||t.config.xaxis.labels.rotateAlways){if(!t.globals.isBarHorizontal){t.globals.rotateXLabels=!0;var h=function(e){return l.getTextRects(e,t.config.xaxis.labels.style.fontSize,t.config.xaxis.labels.style.fontFamily,"rotate(".concat(t.config.xaxis.labels.rotate," 0 0)"),!1)};c=h(i),i!==o&&(d=h(o)),e.height=(c.height>d.height?c.height:d.height)/1.5,e.width=c.width>d.width?c.width:d.width}}else t.globals.rotateXLabels=!1}return t.config.xaxis.labels.show||(e={width:0,height:0}),{width:e.width,height:e.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var e,t=this.w;if(!t.globals.hasGroups)return{width:0,height:0};var n,r=(null===(e=t.config.xaxis.group.style)||void 0===e?void 0:e.fontSize)||t.config.xaxis.labels.style.fontSize,a=t.globals.groups.map((function(e){return e.title})),i=b.getLargestStringFromArr(a),o=this.dCtx.dimHelpers.getLargestStringFromMultiArr(i,a),s=new w(this.dCtx.ctx),u=s.getTextRects(i,r),l=u;return i!==o&&(l=s.getTextRects(o,r)),n={width:u.width>=l.width?u.width:l.width,height:u.height>=l.height?u.height:l.height},t.config.xaxis.labels.show||(n={width:0,height:0}),{width:n.width,height:n.height}}},{key:"getxAxisTitleCoords",value:function(){var e=this.w,t=0,n=0;if(void 0!==e.config.xaxis.title.text){var r=new w(this.dCtx.ctx).getTextRects(e.config.xaxis.title.text,e.config.xaxis.title.style.fontSize);t=r.width,n=r.height}return{width:t,height:n}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var e,t=this.w;this.dCtx.timescaleLabels=t.globals.timescaleLabels.slice();var n=this.dCtx.timescaleLabels.map((function(e){return e.value})),r=n.reduce((function(e,t){return void 0===e?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):e.length>t.length?e:t}),0);return 1.05*(e=new w(this.dCtx.ctx).getTextRects(r,t.config.xaxis.labels.style.fontSize)).width*n.length>t.globals.gridWidth&&0!==t.config.xaxis.labels.rotate&&(t.globals.overlappingXLabels=!0),e}},{key:"additionalPaddingXLabels",value:function(e){var t=this,n=this.w,r=n.globals,a=n.config,i=a.xaxis.type,o=e.width;r.skipLastTimelinelabel=!1,r.skipFirstTimelinelabel=!1;var s=n.config.yaxis[0].opposite&&n.globals.isBarHorizontal,u=function(e,s){(function(e){return-1!==r.collapsedSeriesIndices.indexOf(e)})(s)||function(e){if(t.dCtx.timescaleLabels&&t.dCtx.timescaleLabels.length){var s=t.dCtx.timescaleLabels[0],u=t.dCtx.timescaleLabels[t.dCtx.timescaleLabels.length-1].position+o/1.75-t.dCtx.yAxisWidthRight,l=s.position-o/1.75+t.dCtx.yAxisWidthLeft,c="right"===n.config.legend.position&&t.dCtx.lgRect.width>0?t.dCtx.lgRect.width:0;u>r.svgWidth-r.translateX-c&&(r.skipLastTimelinelabel=!0),l<-(e.show&&!e.floating||"bar"!==a.chart.type&&"candlestick"!==a.chart.type&&"rangeBar"!==a.chart.type&&"boxPlot"!==a.chart.type?10:o/1.75)&&(r.skipFirstTimelinelabel=!0)}else"datetime"===i?t.dCtx.gridPad.right<o&&!r.rotateXLabels&&(r.skipLastTimelinelabel=!0):"datetime"!==i&&t.dCtx.gridPad.right<o/2-t.dCtx.yAxisWidthRight&&!r.rotateXLabels&&!n.config.xaxis.labels.trim&&("between"!==n.config.xaxis.tickPlacement||n.globals.isBarHorizontal)&&(t.dCtx.xPadRight=o/2+1)}(e)};a.yaxis.forEach((function(e,n){s?(t.dCtx.gridPad.left<o&&(t.dCtx.xPadLeft=o/2+1),t.dCtx.xPadRight=o/2+1):u(e,n)}))}}]),e}(),le=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return l(e,[{key:"getyAxisLabelsCoords",value:function(){var e=this,t=this.w,n=[],r=10,a=new q(this.dCtx.ctx);return t.config.yaxis.map((function(i,o){var s=t.globals.yAxisScale[o],u=0;if(!a.isYAxisHidden(o)&&i.labels.show&&void 0!==i.labels.minWidth&&(u=i.labels.minWidth),!a.isYAxisHidden(o)&&i.labels.show&&s.result.length){var l=t.globals.yLabelFormatters[o],c=s.niceMin===Number.MIN_VALUE?0:s.niceMin,d=String(c).length>String(s.niceMax).length?c:s.niceMax,h=l(d,{seriesIndex:o,dataPointIndex:-1,w:t}),p=h;if(void 0!==h&&0!==h.length||(h=d),t.globals.isBarHorizontal){r=0;var f=t.globals.labels.slice();h=l(h=b.getLargestStringFromArr(f),{seriesIndex:o,dataPointIndex:-1,w:t}),p=e.dCtx.dimHelpers.getLargestStringFromMultiArr(h,f)}var m=new w(e.dCtx.ctx),g="rotate(".concat(i.labels.rotate," 0 0)"),v=m.getTextRects(h,i.labels.style.fontSize,i.labels.style.fontFamily,g,!1),y=v;h!==p&&(y=m.getTextRects(p,i.labels.style.fontSize,i.labels.style.fontFamily,g,!1)),n.push({width:(u>y.width||u>v.width?u:y.width>v.width?y.width:v.width)+r,height:y.height>v.height?y.height:v.height})}else n.push({width:0,height:0})})),n}},{key:"getyAxisTitleCoords",value:function(){var e=this,t=this.w,n=[];return t.config.yaxis.map((function(t,r){if(t.show&&void 0!==t.title.text){var a=new w(e.dCtx.ctx),i="rotate(".concat(t.title.rotate," 0 0)"),o=a.getTextRects(t.title.text,t.title.style.fontSize,t.title.style.fontFamily,i,!1);n.push({width:o.width,height:o.height})}else n.push({width:0,height:0})})),n}},{key:"getTotalYAxisWidth",value:function(){var e=this.w,t=0,n=0,r=0,a=e.globals.yAxisScale.length>1?10:0,i=new q(this.dCtx.ctx),o=function(o,s){var u=e.config.yaxis[s].floating,l=0;o.width>0&&!u?(l=o.width+a,function(t){return e.globals.ignoreYAxisIndexes.indexOf(t)>-1}(s)&&(l=l-o.width-a)):l=u||i.isYAxisHidden(s)?0:5,e.config.yaxis[s].opposite?r+=l:n+=l,t+=l};return e.globals.yLabelsCoords.map((function(e,t){o(e,t)})),e.globals.yTitleCoords.map((function(e,t){o(e,t)})),e.globals.isBarHorizontal&&!e.config.yaxis[0].floating&&(t=e.globals.yLabelsCoords[0].width+e.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=n,this.dCtx.yAxisWidthRight=r,t}}]),e}(),ce=function(){function e(t){s(this,e),this.w=t.w,this.dCtx=t}return l(e,[{key:"gridPadForColumnsInNumericAxis",value:function(e){var t=this.w;if(t.globals.noData||t.globals.allSeriesCollapsed)return 0;var n=function(e){return"bar"===e||"rangeBar"===e||"candlestick"===e||"boxPlot"===e},r=t.config.chart.type,a=0,i=n(r)?t.config.series.length:1;if(t.globals.comboBarCount>0&&(i=t.globals.comboBarCount),t.globals.collapsedSeries.forEach((function(e){n(e.type)&&(i-=1)})),t.config.chart.stacked&&(i=1),(n(r)||t.globals.comboBarCount>0)&&t.globals.isXNumeric&&!t.globals.isBarHorizontal&&i>0){var o,s,u=Math.abs(t.globals.initialMaxX-t.globals.initialMinX);u<=3&&(u=t.globals.dataPoints),o=u/e,t.globals.minXDiff&&t.globals.minXDiff/o>0&&(s=t.globals.minXDiff/o),s>e/2&&(s/=2),(a=s/i*parseInt(t.config.plotOptions.bar.columnWidth,10)/100)<1&&(a=1),a=a/(i>1?1:1.5)+5,t.globals.barPadForNumericAxis=a}return a}},{key:"gridPadFortitleSubtitle",value:function(){var e=this,t=this.w,n=t.globals,r=this.dCtx.isSparkline||!t.globals.axisCharts?0:10;["title","subtitle"].forEach((function(n){void 0!==t.config[n].text?r+=t.config[n].margin:r+=e.dCtx.isSparkline||!t.globals.axisCharts?0:5})),!t.config.legend.show||"bottom"!==t.config.legend.position||t.config.legend.floating||t.globals.axisCharts||(r+=10);var a=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),i=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");n.gridHeight=n.gridHeight-a.height-i.height-r,n.translateY=n.translateY+a.height+i.height+r}},{key:"setGridXPosForDualYAxis",value:function(e,t){var n=this.w,r=new q(this.dCtx.ctx);n.config.yaxis.map((function(a,i){-1!==n.globals.ignoreYAxisIndexes.indexOf(i)||a.floating||r.isYAxisHidden(i)||(a.opposite&&(n.globals.translateX=n.globals.translateX-(t[i].width+e[i].width)-parseInt(n.config.yaxis[i].labels.style.fontSize,10)/1.2-12),n.globals.translateX<2&&(n.globals.translateX=2))}))}}]),e}(),de=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new se(this),this.dimYAxis=new le(this),this.dimXAxis=new ue(this),this.dimGrid=new ce(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return l(e,[{key:"plotCoords",value:function(){var e=this,t=this.w,n=t.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&(t.config.markers.discrete.length>0||t.config.markers.size>0)&&Object.entries(this.gridPad).forEach((function(t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),r=n[0],a=n[1];e.gridPad[r]=Math.max(a,e.w.globals.markers.largestSize/1.5)})),n.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),n.gridHeight=n.gridHeight-this.gridPad.top-this.gridPad.bottom,n.gridWidth=n.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var r=this.dimGrid.gridPadForColumnsInNumericAxis(n.gridWidth);n.gridWidth=n.gridWidth-2*r,n.translateX=n.translateX+this.gridPad.left+this.xPadLeft+(r>0?r+4:0),n.translateY=n.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var e=this,t=this.w,n=t.globals,r=this.dimYAxis.getyAxisLabelsCoords(),a=this.dimYAxis.getyAxisTitleCoords();t.globals.yLabelsCoords=[],t.globals.yTitleCoords=[],t.config.yaxis.map((function(e,n){t.globals.yLabelsCoords.push({width:r[n].width,index:n}),t.globals.yTitleCoords.push({width:a[n].width,index:n})})),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var i=this.dimXAxis.getxAxisLabelsCoords(),o=this.dimXAxis.getxAxisGroupLabelsCoords(),s=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(i,s,o),n.translateXAxisY=t.globals.rotateXLabels?this.xAxisHeight/8:-4,n.translateXAxisX=t.globals.rotateXLabels&&t.globals.isXNumeric&&t.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,t.globals.isBarHorizontal&&(n.rotateXLabels=!1,n.translateXAxisY=parseInt(t.config.xaxis.labels.style.fontSize,10)/1.5*-1),n.translateXAxisY=n.translateXAxisY+t.config.xaxis.labels.offsetY,n.translateXAxisX=n.translateXAxisX+t.config.xaxis.labels.offsetX;var u=this.yAxisWidth,l=this.xAxisHeight;n.xAxisLabelsHeight=this.xAxisHeight-s.height,n.xAxisGroupLabelsHeight=n.xAxisLabelsHeight-i.height,n.xAxisLabelsWidth=this.xAxisWidth,n.xAxisHeight=this.xAxisHeight;var c=10;("radar"===t.config.chart.type||this.isSparkline)&&(u=0,l=n.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===t.config.chart.type)&&(u=0,l=0,c=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(i);var d=function(){n.translateX=u,n.gridHeight=n.svgHeight-e.lgRect.height-l-(e.isSparkline||"treemap"===t.config.chart.type?0:t.globals.rotateXLabels?10:15),n.gridWidth=n.svgWidth-u};switch("top"===t.config.xaxis.position&&(c=n.xAxisHeight-t.config.xaxis.axisTicks.height-5),t.config.legend.position){case"bottom":n.translateY=c,d();break;case"top":n.translateY=this.lgRect.height+c,d();break;case"left":n.translateY=c,n.translateX=this.lgRect.width+u,n.gridHeight=n.svgHeight-l-12,n.gridWidth=n.svgWidth-this.lgRect.width-u;break;case"right":n.translateY=c,n.translateX=u,n.gridHeight=n.svgHeight-l-12,n.gridWidth=n.svgWidth-this.lgRect.width-u-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(a,r),new $(this.ctx).setYAxisXPosition(r,a)}},{key:"setDimensionsForNonAxisCharts",value:function(){var e=this.w,t=e.globals,n=e.config,r=0;e.config.legend.show&&!e.config.legend.floating&&(r=20);var a="pie"===n.chart.type||"polarArea"===n.chart.type||"donut"===n.chart.type?"pie":"radialBar",i=n.plotOptions[a].offsetY,o=n.plotOptions[a].offsetX;if(!n.legend.show||n.legend.floating)return t.gridHeight=t.svgHeight-n.grid.padding.left+n.grid.padding.right,t.gridWidth=t.gridHeight,t.translateY=i,void(t.translateX=o+(t.svgWidth-t.gridWidth)/2);switch(n.legend.position){case"bottom":t.gridHeight=t.svgHeight-this.lgRect.height-t.goldenPadding,t.gridWidth=t.svgWidth,t.translateY=i-10,t.translateX=o+(t.svgWidth-t.gridWidth)/2;break;case"top":t.gridHeight=t.svgHeight-this.lgRect.height-t.goldenPadding,t.gridWidth=t.svgWidth,t.translateY=this.lgRect.height+i+10,t.translateX=o+(t.svgWidth-t.gridWidth)/2;break;case"left":t.gridWidth=t.svgWidth-this.lgRect.width-r,t.gridHeight="auto"!==n.chart.height?t.svgHeight:t.gridWidth,t.translateY=i,t.translateX=o+this.lgRect.width+r;break;case"right":t.gridWidth=t.svgWidth-this.lgRect.width-r-5,t.gridHeight="auto"!==n.chart.height?t.svgHeight:t.gridWidth,t.translateY=i,t.translateX=o+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(e,t,n){var r=this.w,a=r.globals.hasGroups?2:1,i=n.height+e.height+t.height,o=r.globals.isMultiLineX?1.2:r.globals.LINE_HEIGHT_RATIO,s=r.globals.rotateXLabels?22:10,u=r.globals.rotateXLabels&&"bottom"===r.config.legend.position?10:0;this.xAxisHeight=i*o+a*s+u,this.xAxisWidth=e.width,this.xAxisHeight-t.height>r.config.xaxis.labels.maxHeight&&(this.xAxisHeight=r.config.xaxis.labels.maxHeight),r.config.xaxis.labels.minHeight&&this.xAxisHeight<r.config.xaxis.labels.minHeight&&(this.xAxisHeight=r.config.xaxis.labels.minHeight),r.config.xaxis.floating&&(this.xAxisHeight=0);var l=0,c=0;r.config.yaxis.forEach((function(e){l+=e.labels.minWidth,c+=e.labels.maxWidth})),this.yAxisWidth<l&&(this.yAxisWidth=l),this.yAxisWidth>c&&(this.yAxisWidth=c)}}]),e}(),he=function(){function e(t){s(this,e),this.w=t.w,this.lgCtx=t}return l(e,[{key:"getLegendStyles",value:function(){var e=document.createElement("style");e.setAttribute("type","text/css");var t=document.createTextNode("\t\n    \t\n      .apexcharts-legend {\t\n        display: flex;\t\n        overflow: auto;\t\n        padding: 0 10px;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\t\n        flex-wrap: wrap\t\n      }\t\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        flex-direction: column;\t\n        bottom: 0;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\t\n        justify-content: flex-start;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\t\n        justify-content: center;  \t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\t\n        justify-content: flex-end;\t\n      }\t\n      .apexcharts-legend-series {\t\n        cursor: pointer;\t\n        line-height: normal;\t\n      }\t\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\t\n        display: flex;\t\n        align-items: center;\t\n      }\t\n      .apexcharts-legend-text {\t\n        position: relative;\t\n        font-size: 14px;\t\n      }\t\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\t\n        pointer-events: none;\t\n      }\t\n      .apexcharts-legend-marker {\t\n        position: relative;\t\n        display: inline-block;\t\n        cursor: pointer;\t\n        margin-right: 3px;\t\n        border-style: solid;\n      }\t\n      \t\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\t\n        display: inline-block;\t\n      }\t\n      .apexcharts-legend-series.apexcharts-no-click {\t\n        cursor: auto;\t\n      }\t\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\t\n        display: none !important;\t\n      }\t\n      .apexcharts-inactive-legend {\t\n        opacity: 0.45;\t\n      }");return e.appendChild(t),e}},{key:"getLegendBBox",value:function(){var e=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),t=e.width;return{clwh:e.height,clww:t}}},{key:"appendToForeignObject",value:function(){var e=this.w.globals;e.dom.elLegendForeign=document.createElementNS(e.SVGNS,"foreignObject");var t=e.dom.elLegendForeign;t.setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("width",e.svgWidth),t.setAttribute("height",e.svgHeight),e.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),t.appendChild(e.dom.elLegendWrap),t.appendChild(this.getLegendStyles()),e.dom.Paper.node.insertBefore(t,e.dom.elGraphical.node)}},{key:"toggleDataSeries",value:function(e,t){var n=this,r=this.w;if(r.globals.axisCharts||"radialBar"===r.config.chart.type){r.globals.resized=!0;var a=null,i=null;r.globals.risingSeries=[],r.globals.axisCharts?(a=r.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"']")),i=parseInt(a.getAttribute("data:realIndex"),10)):(a=r.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(e+1,"']")),i=parseInt(a.getAttribute("rel"),10)-1),t?[{cs:r.globals.collapsedSeries,csi:r.globals.collapsedSeriesIndices},{cs:r.globals.ancillaryCollapsedSeries,csi:r.globals.ancillaryCollapsedSeriesIndices}].forEach((function(e){n.riseCollapsedSeries(e.cs,e.csi,i)})):this.hideSeries({seriesEl:a,realIndex:i})}else{var o=r.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(e+1,"'] path")),s=r.config.chart.type;if("pie"===s||"polarArea"===s||"donut"===s){var u=r.config.plotOptions.pie.donut.labels;new w(this.lgCtx.ctx).pathMouseDown(o.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(o.members[0].node,u)}o.fire("click")}}},{key:"hideSeries",value:function(e){var t=e.seriesEl,n=e.realIndex,r=this.w,a=b.clone(r.config.series);if(r.globals.axisCharts){var i=!1;if(r.config.yaxis[n]&&r.config.yaxis[n].show&&r.config.yaxis[n].showAlways&&(i=!0,r.globals.ancillaryCollapsedSeriesIndices.indexOf(n)<0&&(r.globals.ancillaryCollapsedSeries.push({index:n,data:a[n].data.slice(),type:t.parentNode.className.baseVal.split("-")[1]}),r.globals.ancillaryCollapsedSeriesIndices.push(n))),!i){r.globals.collapsedSeries.push({index:n,data:a[n].data.slice(),type:t.parentNode.className.baseVal.split("-")[1]}),r.globals.collapsedSeriesIndices.push(n);var o=r.globals.risingSeries.indexOf(n);r.globals.risingSeries.splice(o,1)}}else r.globals.collapsedSeries.push({index:n,data:a[n]}),r.globals.collapsedSeriesIndices.push(n);for(var s=t.childNodes,u=0;u<s.length;u++)s[u].classList.contains("apexcharts-series-markers-wrap")&&(s[u].classList.contains("apexcharts-hide")?s[u].classList.remove("apexcharts-hide"):s[u].classList.add("apexcharts-hide"));r.globals.allSeriesCollapsed=r.globals.collapsedSeries.length===r.config.series.length,a=this._getSeriesBasedOnCollapsedState(a),this.lgCtx.ctx.updateHelpers._updateSeries(a,r.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(e,t,n){var r=this.w,a=b.clone(r.config.series);if(e.length>0){for(var i=0;i<e.length;i++)e[i].index===n&&(r.globals.axisCharts?(a[n].data=e[i].data.slice(),e.splice(i,1),t.splice(i,1),r.globals.risingSeries.push(n)):(a[n]=e[i].data,e.splice(i,1),t.splice(i,1),r.globals.risingSeries.push(n)));a=this._getSeriesBasedOnCollapsedState(a),this.lgCtx.ctx.updateHelpers._updateSeries(a,r.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(e){var t=this.w;return t.globals.axisCharts?e.forEach((function(n,r){t.globals.collapsedSeriesIndices.indexOf(r)>-1&&(e[r].data=[])})):e.forEach((function(n,r){t.globals.collapsedSeriesIndices.indexOf(r)>-1&&(e[r]=0)})),e}}]),e}(),pe=function(){function e(t,n){s(this,e),this.ctx=t,this.w=t.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new he(this)}return l(e,[{key:"init",value:function(){var e=this.w,t=e.globals,n=e.config;if((n.legend.showForSingleSeries&&1===t.series.length||this.isBarsDistributed||t.series.length>1||!t.axisCharts)&&n.legend.show){for(;t.dom.elLegendWrap.firstChild;)t.dom.elLegendWrap.removeChild(t.dom.elLegendWrap.firstChild);this.drawLegends(),b.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===n.legend.position||"top"===n.legend.position?this.legendAlignHorizontal():"right"!==n.legend.position&&"left"!==n.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var e=this,t=this.w,n=t.config.legend.fontFamily,r=t.globals.seriesNames,a=t.globals.colors.slice();if("heatmap"===t.config.chart.type){var i=t.config.plotOptions.heatmap.colorScale.ranges;r=i.map((function(e){return e.name?e.name:e.from+" - "+e.to})),a=i.map((function(e){return e.color}))}else this.isBarsDistributed&&(r=t.globals.labels.slice());t.config.legend.customLegendItems.length&&(r=t.config.legend.customLegendItems);for(var o=t.globals.legendFormatter,s=t.config.legend.inverseOrder,u=s?r.length-1:0;s?u>=0:u<=r.length-1;s?u--:u++){var l=o(r[u],{seriesIndex:u,w:t}),c=!1,d=!1;if(t.globals.collapsedSeries.length>0)for(var h=0;h<t.globals.collapsedSeries.length;h++)t.globals.collapsedSeries[h].index===u&&(c=!0);if(t.globals.ancillaryCollapsedSeriesIndices.length>0)for(var p=0;p<t.globals.ancillaryCollapsedSeriesIndices.length;p++)t.globals.ancillaryCollapsedSeriesIndices[p]===u&&(d=!0);var f=document.createElement("span");f.classList.add("apexcharts-legend-marker");var m=t.config.legend.markers.offsetX,g=t.config.legend.markers.offsetY,v=t.config.legend.markers.height,y=t.config.legend.markers.width,x=t.config.legend.markers.strokeWidth,A=t.config.legend.markers.strokeColor,S=t.config.legend.markers.radius,C=f.style;C.background=a[u],C.color=a[u],C.setProperty("background",a[u],"important"),t.config.legend.markers.fillColors&&t.config.legend.markers.fillColors[u]&&(C.background=t.config.legend.markers.fillColors[u]),void 0!==t.globals.seriesColors[u]&&(C.background=t.globals.seriesColors[u],C.color=t.globals.seriesColors[u]),C.height=Array.isArray(v)?parseFloat(v[u])+"px":parseFloat(v)+"px",C.width=Array.isArray(y)?parseFloat(y[u])+"px":parseFloat(y)+"px",C.left=(Array.isArray(m)?parseFloat(m[u]):parseFloat(m))+"px",C.top=(Array.isArray(g)?parseFloat(g[u]):parseFloat(g))+"px",C.borderWidth=Array.isArray(x)?x[u]:x,C.borderColor=Array.isArray(A)?A[u]:A,C.borderRadius=Array.isArray(S)?parseFloat(S[u])+"px":parseFloat(S)+"px",t.config.legend.markers.customHTML&&(Array.isArray(t.config.legend.markers.customHTML)?t.config.legend.markers.customHTML[u]&&(f.innerHTML=t.config.legend.markers.customHTML[u]()):f.innerHTML=t.config.legend.markers.customHTML()),w.setAttrs(f,{rel:u+1,"data:collapsed":c||d}),(c||d)&&f.classList.add("apexcharts-inactive-legend");var I=document.createElement("div"),E=document.createElement("span");E.classList.add("apexcharts-legend-text"),E.innerHTML=Array.isArray(l)?l.join(" "):l;var T=t.config.legend.labels.useSeriesColors?t.globals.colors[u]:t.config.legend.labels.colors;T||(T=t.config.chart.foreColor),E.style.color=T,E.style.fontSize=parseFloat(t.config.legend.fontSize)+"px",E.style.fontWeight=t.config.legend.fontWeight,E.style.fontFamily=n||t.config.chart.fontFamily,w.setAttrs(E,{rel:u+1,i:u,"data:default-text":encodeURIComponent(l),"data:collapsed":c||d}),I.appendChild(f),I.appendChild(E);var N=new k(this.ctx);t.config.legend.showForZeroSeries||0===N.getSeriesTotalByIndex(u)&&N.seriesHaveSameValues(u)&&!N.isSeriesNull(u)&&-1===t.globals.collapsedSeriesIndices.indexOf(u)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(u)&&I.classList.add("apexcharts-hidden-zero-series"),t.config.legend.showForNullSeries||N.isSeriesNull(u)&&-1===t.globals.collapsedSeriesIndices.indexOf(u)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(u)&&I.classList.add("apexcharts-hidden-null-series"),t.globals.dom.elLegendWrap.appendChild(I),t.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(t.config.legend.horizontalAlign)),t.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+t.config.legend.position),I.classList.add("apexcharts-legend-series"),I.style.margin="".concat(t.config.legend.itemMargin.vertical,"px ").concat(t.config.legend.itemMargin.horizontal,"px"),t.globals.dom.elLegendWrap.style.width=t.config.legend.width?t.config.legend.width+"px":"",t.globals.dom.elLegendWrap.style.height=t.config.legend.height?t.config.legend.height+"px":"",w.setAttrs(I,{rel:u+1,seriesName:b.escapeString(r[u]),"data:collapsed":c||d}),(c||d)&&I.classList.add("apexcharts-inactive-legend"),t.config.legend.onItemClick.toggleDataSeries||I.classList.add("apexcharts-no-click")}t.globals.dom.elWrap.addEventListener("click",e.onLegendClick,!0),t.config.legend.onItemHover.highlightDataSeries&&0===t.config.legend.customLegendItems.length&&(t.globals.dom.elWrap.addEventListener("mousemove",e.onLegendHovered,!0),t.globals.dom.elWrap.addEventListener("mouseout",e.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(e,t){var n=this.w,r=n.globals.dom.baseEl.querySelector(".apexcharts-legend"),a=r.getBoundingClientRect(),i=0,o=0;if("bottom"===n.config.legend.position)o+=n.globals.svgHeight-a.height/2;else if("top"===n.config.legend.position){var s=new de(this.ctx),u=s.dimHelpers.getTitleSubtitleCoords("title").height,l=s.dimHelpers.getTitleSubtitleCoords("subtitle").height;o=o+(u>0?u-10:0)+(l>0?l-10:0)}r.style.position="absolute",i=i+e+n.config.legend.offsetX,o=o+t+n.config.legend.offsetY,r.style.left=i+"px",r.style.top=o+"px","bottom"===n.config.legend.position?(r.style.top="auto",r.style.bottom=5-n.config.legend.offsetY+"px"):"right"===n.config.legend.position&&(r.style.left="auto",r.style.right=25+n.config.legend.offsetX+"px"),["width","height"].forEach((function(e){r.style[e]&&(r.style[e]=parseInt(n.config.legend[e],10)+"px")}))}},{key:"legendAlignHorizontal",value:function(){var e=this.w;e.globals.dom.baseEl.querySelector(".apexcharts-legend").style.right=0;var t=this.legendHelpers.getLegendBBox(),n=new de(this.ctx),r=n.dimHelpers.getTitleSubtitleCoords("title"),a=n.dimHelpers.getTitleSubtitleCoords("subtitle"),i=0;"bottom"===e.config.legend.position?i=-t.clwh/1.8:"top"===e.config.legend.position&&(i=r.height+a.height+e.config.title.margin+e.config.subtitle.margin-10),this.setLegendWrapXY(20,i)}},{key:"legendAlignVertical",value:function(){var e=this.w,t=this.legendHelpers.getLegendBBox(),n=0;"left"===e.config.legend.position&&(n=20),"right"===e.config.legend.position&&(n=e.globals.svgWidth-t.clww-10),this.setLegendWrapXY(n,20)}},{key:"onLegendHovered",value:function(e){var t=this.w,n=e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker");if("heatmap"===t.config.chart.type||this.isBarsDistributed){if(n){var r=parseInt(e.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,r,this.w]),new D(this.ctx).highlightRangeInSeries(e,e.target)}}else!e.target.classList.contains("apexcharts-inactive-legend")&&n&&new D(this.ctx).toggleSeriesOnHover(e,e.target)}},{key:"onLegendClick",value:function(e){var t=this.w;if(!t.config.legend.customLegendItems.length&&(e.target.classList.contains("apexcharts-legend-text")||e.target.classList.contains("apexcharts-legend-marker"))){var n=parseInt(e.target.getAttribute("rel"),10)-1,r="true"===e.target.getAttribute("data:collapsed"),a=this.w.config.chart.events.legendClick;"function"==typeof a&&a(this.ctx,n,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,n,this.w]);var i=this.w.config.legend.markers.onClick;"function"==typeof i&&e.target.classList.contains("apexcharts-legend-marker")&&(i(this.ctx,n,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,n,this.w])),"treemap"!==t.config.chart.type&&"heatmap"!==t.config.chart.type&&!this.isBarsDistributed&&t.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(n,r)}}}]),e}(),fe=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var n=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=n.globals.minX,this.maxX=n.globals.maxX}return l(e,[{key:"createToolbar",value:function(){var e=this,t=this.w,n=function(){return document.createElement("div")},r=n();if(r.setAttribute("class","apexcharts-toolbar"),r.style.top=t.config.chart.toolbar.offsetY+"px",r.style.right=3-t.config.chart.toolbar.offsetX+"px",t.globals.dom.elWrap.appendChild(r),this.elZoom=n(),this.elZoomIn=n(),this.elZoomOut=n(),this.elPan=n(),this.elSelection=n(),this.elZoomReset=n(),this.elMenuIcon=n(),this.elMenu=n(),this.elCustomIcons=[],this.t=t.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var a=0;a<this.t.customIcons.length;a++)this.elCustomIcons.push(n());var i=[],o=function(n,r,a){var o=n.toLowerCase();e.t[o]&&t.config.chart.zoom.enabled&&i.push({el:r,icon:"string"==typeof e.t[o]?e.t[o]:a,title:e.localeValues[n],class:"apexcharts-".concat(o,"-icon")})};o("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),o("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var s=function(n){e.t[n]&&t.config.chart[n].enabled&&i.push({el:"zoom"===n?e.elZoom:e.elSelection,icon:"string"==typeof e.t[n]?e.t[n]:"zoom"===n?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:e.localeValues["zoom"===n?"selectionZoom":"selection"],class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(n,"-icon")})};s("zoom"),s("selection"),this.t.pan&&t.config.chart.zoom.enabled&&i.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:t.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),o("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&i.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var u=0;u<this.elCustomIcons.length;u++)i.push({el:this.elCustomIcons[u],icon:this.t.customIcons[u].icon,title:this.t.customIcons[u].title,index:this.t.customIcons[u].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[u].class});i.forEach((function(e,t){e.index&&b.moveIndexInArray(i,t,e.index)}));for(var l=0;l<i.length;l++)w.setAttrs(i[l].el,{class:i[l].class,title:i[l].title}),i[l].el.innerHTML=i[l].icon,r.appendChild(i[l].el);this._createHamburgerMenu(r),t.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):t.globals.panEnabled?this.elPan.classList.add(this.selectedClass):t.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(e){this.elMenuItems=[],e.appendChild(this.elMenu),w.setAttrs(this.elMenu,{class:"apexcharts-menu"});var t=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}];this.w.globals.allSeriesHasEqualX||t.splice(2,1);for(var n=0;n<t.length;n++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[n].innerHTML=t[n].title,w.setAttrs(this.elMenuItems[n],{class:"apexcharts-menu-item ".concat(t[n].name),title:t[n].title}),this.elMenu.appendChild(this.elMenuItems[n])}},{key:"addToolbarEventListeners",value:function(){var e=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach((function(t){t.classList.contains("exportSVG")?t.addEventListener("click",e.handleDownload.bind(e,"svg")):t.classList.contains("exportPNG")?t.addEventListener("click",e.handleDownload.bind(e,"png")):t.classList.contains("exportCSV")&&t.addEventListener("click",e.handleDownload.bind(e,"csv"))}));for(var t=0;t<this.t.customIcons.length;t++)this.elCustomIcons[t].addEventListener("click",this.t.customIcons[t].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(e){this.ctx.getSyncedCharts().forEach((function(t){t.ctx.toolbar.toggleOtherControls();var n="selection"===e?t.ctx.toolbar.elSelection:t.ctx.toolbar.elZoom,r="selection"===e?"selectionEnabled":"zoomEnabled";t.w.globals[r]=!t.w.globals[r],n.classList.contains(t.ctx.toolbar.selectedClass)?n.classList.remove(t.ctx.toolbar.selectedClass):n.classList.add(t.ctx.toolbar.selectedClass)}))}},{key:"getToolbarIconsReference",value:function(){var e=this.w;this.elZoom||(this.elZoom=e.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=e.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=e.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(e){this.toggleOtherControls(),"pan"===e?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var t="pan"===e?this.elPan:this.elZoom,n="pan"===e?this.elZoom:this.elPan;t&&t.classList.add(this.selectedClass),n&&n.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach((function(e){e.ctx.toolbar.toggleOtherControls(),e.w.globals.panEnabled=!e.w.globals.panEnabled,e.ctx.toolbar.elPan.classList.contains(e.ctx.toolbar.selectedClass)?e.ctx.toolbar.elPan.classList.remove(e.ctx.toolbar.selectedClass):e.ctx.toolbar.elPan.classList.add(e.ctx.toolbar.selectedClass)}))}},{key:"toggleOtherControls",value:function(){var e=this,t=this.w;t.globals.panEnabled=!1,t.globals.zoomEnabled=!1,t.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach((function(t){t&&t.classList.remove(e.selectedClass)}))}},{key:"handleZoomIn",value:function(){var e=this.w;e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY);var t=(this.minX+this.maxX)/2,n=(this.minX+t)/2,r=(this.maxX+t)/2,a=this._getNewMinXMaxX(n,r);e.globals.disableZoomIn||this.zoomUpdateOptions(a.minX,a.maxX)}},{key:"handleZoomOut",value:function(){var e=this.w;if(e.globals.isRangeBar&&(this.minX=e.globals.minY,this.maxX=e.globals.maxY),!("datetime"===e.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var t=(this.minX+this.maxX)/2,n=this.minX-(t-this.minX),r=this.maxX-(t-this.maxX),a=this._getNewMinXMaxX(n,r);e.globals.disableZoomOut||this.zoomUpdateOptions(a.minX,a.maxX)}}},{key:"_getNewMinXMaxX",value:function(e,t){var n=this.w.config.xaxis.convertedCatToNumeric;return{minX:n?Math.floor(e):e,maxX:n?Math.floor(t):t}}},{key:"zoomUpdateOptions",value:function(e,t){var n=this.w;if(void 0!==e||void 0!==t){if(!(n.config.xaxis.convertedCatToNumeric&&(e<1&&(e=1,t=n.globals.dataPoints),t-e<2))){var r={min:e,max:t},a=this.getBeforeZoomRange(r);a&&(r=a.xaxis);var i={xaxis:r},o=b.clone(n.globals.initialConfig.yaxis);n.config.chart.zoom.autoScaleYaxis&&(o=new J(this.ctx).autoScaleY(this.ctx,o,{xaxis:r})),n.config.chart.group||(i.yaxis=o),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(i,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(r,o)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(e,t){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:e,yaxis:t})}},{key:"getBeforeZoomRange",value:function(e,t){var n=null;return"function"==typeof this.ev.beforeZoom&&(n=this.ev.beforeZoom(this,{xaxis:e,yaxis:t})),n}},{key:"toggleMenu",value:function(){var e=this;window.setTimeout((function(){e.elMenu.classList.contains("apexcharts-menu-open")?e.elMenu.classList.remove("apexcharts-menu-open"):e.elMenu.classList.add("apexcharts-menu-open")}),0)}},{key:"handleDownload",value:function(e){var t=this.w,n=new Y(this.ctx);switch(e){case"svg":n.exportToSVG(this.ctx);break;case"png":n.exportToPng(this.ctx);break;case"csv":n.exportToCSV({series:t.config.series,columnDelimiter:t.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(e){this.ctx.getSyncedCharts().forEach((function(e){var t=e.w;if(t.globals.lastXAxis.min=void 0,t.globals.lastXAxis.max=void 0,e.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof t.config.chart.events.beforeResetZoom){var n=t.config.chart.events.beforeResetZoom(e,t);n&&e.updateHelpers.revertDefaultAxisMinMax(n)}"function"==typeof t.config.chart.events.zoomed&&e.ctx.toolbar.zoomCallback({min:t.config.xaxis.min,max:t.config.xaxis.max}),t.globals.zoomed=!1;var r=e.ctx.series.emptyCollapsedSeries(b.clone(t.globals.initialSeries));e.updateHelpers._updateSeries(r,t.config.chart.animations.dynamicAnimation.enabled)}))}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),e}(),me=function(e){d(n,fe);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).ctx=e,r.w=e.w,r.dragged=!1,r.graphics=new w(r.ctx),r.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],r.clientX=0,r.clientY=0,r.startX=0,r.endX=0,r.dragX=0,r.startY=0,r.endY=0,r.dragY=0,r.moveDirection="none",r}return l(n,[{key:"init",value:function(e){var t=this,n=e.xyRatios,r=this.w,a=this;this.xyRatios=n,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=r.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),r.globals.dom.elGraphical.add(this.zoomRect),r.globals.dom.elGraphical.add(this.selectionRect),"x"===r.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:r.globals.gridWidth,maxY:r.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===r.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:r.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=r.globals.dom.baseEl.querySelector("".concat(r.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach((function(e){t.hoverArea.addEventListener(e,a.svgMouseEvents.bind(a,n),{capture:!1,passive:!0})}))}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(e,t){var n=this.w,r=this,a=this.ctx.toolbar,i=n.globals.zoomEnabled?n.config.chart.zoom.type:n.config.chart.selection.type,o=n.config.chart.toolbar.autoSelected;if(t.shiftKey?(this.shiftWasPressed=!0,a.enableZoomPanFromToolbar("pan"===o?"zoom":"pan")):this.shiftWasPressed&&(a.enableZoomPanFromToolbar(o),this.shiftWasPressed=!1),t.target){var s,u=t.target.classList;if(t.target.parentNode&&null!==t.target.parentNode&&(s=t.target.parentNode.classList),!(u.contains("apexcharts-selection-rect")||u.contains("apexcharts-legend-marker")||u.contains("apexcharts-legend-text")||s&&s.contains("apexcharts-toolbar"))){if(r.clientX="touchmove"===t.type||"touchstart"===t.type?t.touches[0].clientX:"touchend"===t.type?t.changedTouches[0].clientX:t.clientX,r.clientY="touchmove"===t.type||"touchstart"===t.type?t.touches[0].clientY:"touchend"===t.type?t.changedTouches[0].clientY:t.clientY,"mousedown"===t.type&&1===t.which){var l=r.gridRect.getBoundingClientRect();r.startX=r.clientX-l.left,r.startY=r.clientY-l.top,r.dragged=!1,r.w.globals.mousedown=!0}if(("mousemove"===t.type&&1===t.which||"touchmove"===t.type)&&(r.dragged=!0,n.globals.panEnabled?(n.globals.selection=null,r.w.globals.mousedown&&r.panDragging({context:r,zoomtype:i,xyRatios:e})):(r.w.globals.mousedown&&n.globals.zoomEnabled||r.w.globals.mousedown&&n.globals.selectionEnabled)&&(r.selection=r.selectionDrawing({context:r,zoomtype:i}))),"mouseup"===t.type||"touchend"===t.type||"mouseleave"===t.type){var c=r.gridRect.getBoundingClientRect();r.w.globals.mousedown&&(r.endX=r.clientX-c.left,r.endY=r.clientY-c.top,r.dragX=Math.abs(r.endX-r.startX),r.dragY=Math.abs(r.endY-r.startY),(n.globals.zoomEnabled||n.globals.selectionEnabled)&&r.selectionDrawn({context:r,zoomtype:i}),n.globals.panEnabled&&n.config.xaxis.convertedCatToNumeric&&r.delayedPanScrolled()),n.globals.zoomEnabled&&r.hideSelectionRect(this.selectionRect),r.dragged=!1,r.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var e=this.w;if(this.selectionRect){var t=this.selectionRect.node.getBoundingClientRect();t.width>0&&t.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:e.globals.gridWidth,maxY:e.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var e=this.w,t=this.xyRatios;if(!e.globals.zoomEnabled)if(void 0!==e.globals.selection&&null!==e.globals.selection)this.drawSelectionRect(e.globals.selection);else if(void 0!==e.config.chart.selection.xaxis.min&&void 0!==e.config.chart.selection.xaxis.max){var n=(e.config.chart.selection.xaxis.min-e.globals.minX)/t.xRatio,r={x:n,y:0,width:e.globals.gridWidth-(e.globals.maxX-e.config.chart.selection.xaxis.max)/t.xRatio-n,height:e.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0};this.drawSelectionRect(r),this.makeSelectionRectDraggable(),"function"==typeof e.config.chart.events.selection&&e.config.chart.events.selection(this.ctx,{xaxis:{min:e.config.chart.selection.xaxis.min,max:e.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=e.translateX,o=void 0===i?0:i,s=e.translateY,u=void 0===s?0:s,l=this.w,c=this.zoomRect,d=this.selectionRect;if(this.dragged||null!==l.globals.selection){var h={transform:"translate("+o+", "+u+")"};l.globals.zoomEnabled&&this.dragged&&(r<0&&(r=1),c.attr({x:t,y:n,width:r,height:a,fill:l.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":l.config.chart.zoom.zoomedArea.fill.opacity,stroke:l.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":l.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":l.config.chart.zoom.zoomedArea.stroke.opacity}),w.setAttrs(c.node,h)),l.globals.selectionEnabled&&(d.attr({x:t,y:n,width:r>0?r:0,height:a>0?a:0,fill:l.config.chart.selection.fill.color,"fill-opacity":l.config.chart.selection.fill.opacity,stroke:l.config.chart.selection.stroke.color,"stroke-width":l.config.chart.selection.stroke.width,"stroke-dasharray":l.config.chart.selection.stroke.dashArray,"stroke-opacity":l.config.chart.selection.stroke.opacity}),w.setAttrs(d.node,h))}}},{key:"hideSelectionRect",value:function(e){e&&e.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(e){var t,n=e.context,r=e.zoomtype,a=this.w,i=n,o=this.gridRect.getBoundingClientRect(),s=i.startX-1,u=i.startY,l=!1,c=!1,d=i.clientX-o.left-s,h=i.clientY-o.top-u;return Math.abs(d+s)>a.globals.gridWidth?d=a.globals.gridWidth-s:i.clientX-o.left<0&&(d=s),s>i.clientX-o.left&&(l=!0,d=Math.abs(d)),u>i.clientY-o.top&&(c=!0,h=Math.abs(h)),t="x"===r?{x:l?s-d:s,y:0,width:d,height:a.globals.gridHeight}:"y"===r?{x:0,y:c?u-h:u,width:a.globals.gridWidth,height:h}:{x:l?s-d:s,y:c?u-h:u,width:d,height:h},i.drawSelectionRect(t),i.selectionDragging("resizing"),t}},{key:"selectionDragging",value:function(e,t){var n=this,r=this.w,a=this.xyRatios,i=this.selectionRect,o=0;"resizing"===e&&(o=30);var s=function(e){return parseFloat(i.node.getAttribute(e))},u={x:s("x"),y:s("y"),width:s("width"),height:s("height")};r.globals.selection=u,"function"==typeof r.config.chart.events.selection&&r.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout((function(){var e=n.gridRect.getBoundingClientRect(),t=i.node.getBoundingClientRect(),o={xaxis:{min:r.globals.xAxisScale.niceMin+(t.left-e.left)*a.xRatio,max:r.globals.xAxisScale.niceMin+(t.right-e.left)*a.xRatio},yaxis:{min:r.globals.yAxisScale[0].niceMin+(e.bottom-t.bottom)*a.yRatio[0],max:r.globals.yAxisScale[0].niceMax-(t.top-e.top)*a.yRatio[0]}};r.config.chart.events.selection(n.ctx,o),r.config.chart.brush.enabled&&void 0!==r.config.chart.events.brushScrolled&&r.config.chart.events.brushScrolled(n.ctx,o)}),o))}},{key:"selectionDrawn",value:function(e){var t=e.context,n=e.zoomtype,r=this.w,a=t,i=this.xyRatios,o=this.ctx.toolbar;if(a.startX>a.endX){var s=a.startX;a.startX=a.endX,a.endX=s}if(a.startY>a.endY){var u=a.startY;a.startY=a.endY,a.endY=u}var l=void 0,c=void 0;r.globals.isRangeBar?(l=r.globals.yAxisScale[0].niceMin+a.startX*i.invertedYRatio,c=r.globals.yAxisScale[0].niceMin+a.endX*i.invertedYRatio):(l=r.globals.xAxisScale.niceMin+a.startX*i.xRatio,c=r.globals.xAxisScale.niceMin+a.endX*i.xRatio);var d=[],h=[];if(r.config.yaxis.forEach((function(e,t){d.push(r.globals.yAxisScale[t].niceMax-i.yRatio[t]*a.startY),h.push(r.globals.yAxisScale[t].niceMax-i.yRatio[t]*a.endY)})),a.dragged&&(a.dragX>10||a.dragY>10)&&l!==c)if(r.globals.zoomEnabled){var p=b.clone(r.globals.initialConfig.yaxis),f=b.clone(r.globals.initialConfig.xaxis);if(r.globals.zoomed=!0,r.config.xaxis.convertedCatToNumeric&&(l=Math.floor(l),c=Math.floor(c),l<1&&(l=1,c=r.globals.dataPoints),c-l<2&&(c=l+1)),"xy"!==n&&"x"!==n||(f={min:l,max:c}),"xy"!==n&&"y"!==n||p.forEach((function(e,t){p[t].min=h[t],p[t].max=d[t]})),r.config.chart.zoom.autoScaleYaxis){var m=new J(a.ctx);p=m.autoScaleY(a.ctx,p,{xaxis:f})}if(o){var g=o.getBeforeZoomRange(f,p);g&&(f=g.xaxis?g.xaxis:f,p=g.yaxis?g.yaxis:p)}var v={xaxis:f};r.config.chart.group||(v.yaxis=p),a.ctx.updateHelpers._updateOptions(v,!1,a.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof r.config.chart.events.zoomed&&o.zoomCallback(f,p)}else if(r.globals.selectionEnabled){var y,x=null;y={min:l,max:c},"xy"!==n&&"y"!==n||(x=b.clone(r.config.yaxis)).forEach((function(e,t){x[t].min=h[t],x[t].max=d[t]})),r.globals.selection=a.selection,"function"==typeof r.config.chart.events.selection&&r.config.chart.events.selection(a.ctx,{xaxis:y,yaxis:x})}}},{key:"panDragging",value:function(e){var t=e.context,n=this.w,r=t;if(void 0!==n.globals.lastClientPosition.x){var a=n.globals.lastClientPosition.x-r.clientX,i=n.globals.lastClientPosition.y-r.clientY;Math.abs(a)>Math.abs(i)&&a>0?this.moveDirection="left":Math.abs(a)>Math.abs(i)&&a<0?this.moveDirection="right":Math.abs(i)>Math.abs(a)&&i>0?this.moveDirection="up":Math.abs(i)>Math.abs(a)&&i<0&&(this.moveDirection="down")}n.globals.lastClientPosition={x:r.clientX,y:r.clientY};var o=n.globals.isRangeBar?n.globals.minY:n.globals.minX,s=n.globals.isRangeBar?n.globals.maxY:n.globals.maxX;n.config.xaxis.convertedCatToNumeric||r.panScrolled(o,s)}},{key:"delayedPanScrolled",value:function(){var e=this.w,t=e.globals.minX,n=e.globals.maxX,r=(e.globals.maxX-e.globals.minX)/2;"left"===this.moveDirection?(t=e.globals.minX+r,n=e.globals.maxX+r):"right"===this.moveDirection&&(t=e.globals.minX-r,n=e.globals.maxX-r),t=Math.floor(t),n=Math.floor(n),this.updateScrolledChart({xaxis:{min:t,max:n}},t,n)}},{key:"panScrolled",value:function(e,t){var n=this.w,r=this.xyRatios,a=b.clone(n.globals.initialConfig.yaxis),i=r.xRatio,o=n.globals.minX,s=n.globals.maxX;n.globals.isRangeBar&&(i=r.invertedYRatio,o=n.globals.minY,s=n.globals.maxY),"left"===this.moveDirection?(e=o+n.globals.gridWidth/15*i,t=s+n.globals.gridWidth/15*i):"right"===this.moveDirection&&(e=o-n.globals.gridWidth/15*i,t=s-n.globals.gridWidth/15*i),n.globals.isRangeBar||(e<n.globals.initialMinX||t>n.globals.initialMaxX)&&(e=o,t=s);var u={min:e,max:t};n.config.chart.zoom.autoScaleYaxis&&(a=new J(this.ctx).autoScaleY(this.ctx,a,{xaxis:u}));var l={xaxis:{min:e,max:t}};n.config.chart.group||(l.yaxis=a),this.updateScrolledChart(l,e,t)}},{key:"updateScrolledChart",value:function(e,t,n){var r=this.w;this.ctx.updateHelpers._updateOptions(e,!1,!1),"function"==typeof r.config.chart.events.scrolled&&r.config.chart.events.scrolled(this.ctx,{xaxis:{min:t,max:n}})}}]),n}(),ge=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx}return l(e,[{key:"getNearestValues",value:function(e){var t=e.hoverArea,n=e.elGrid,r=e.clientX,a=e.clientY,i=this.w,o=n.getBoundingClientRect(),s=o.width,u=o.height,l=s/(i.globals.dataPoints-1),c=u/i.globals.dataPoints,d=this.hasBars();!i.globals.comboCharts&&!d||i.config.xaxis.convertedCatToNumeric||(l=s/i.globals.dataPoints);var h=r-o.left-i.globals.barPadForNumericAxis,p=a-o.top;h<0||p<0||h>s||p>u?(t.classList.remove("hovering-zoom"),t.classList.remove("hovering-pan")):i.globals.zoomEnabled?(t.classList.remove("hovering-pan"),t.classList.add("hovering-zoom")):i.globals.panEnabled&&(t.classList.remove("hovering-zoom"),t.classList.add("hovering-pan"));var f=Math.round(h/l),m=Math.floor(p/c);d&&!i.config.xaxis.convertedCatToNumeric&&(f=Math.ceil(h/l),f-=1);var g=null,v=null,y=[],x=[];if(i.globals.seriesXvalues.forEach((function(e){y.push([e[0]+1e-6].concat(e))})),i.globals.seriesYvalues.forEach((function(e){x.push([e[0]+1e-6].concat(e))})),y=y.map((function(e){return e.filter((function(e){return b.isNumber(e)}))})),x=x.map((function(e){return e.filter((function(e){return b.isNumber(e)}))})),i.globals.isXNumeric){var A=this.ttCtx.getElGrid().getBoundingClientRect(),w=h*(A.width/s),k=p*(A.height/u);g=(v=this.closestInMultiArray(w,k,y,x)).index,f=v.j,null!==g&&(y=i.globals.seriesXvalues[g],f=(v=this.closestInArray(w,y)).index)}return i.globals.capturedSeriesIndex=null===g?-1:g,(!f||f<1)&&(f=0),i.globals.isBarHorizontal?i.globals.capturedDataPointIndex=m:i.globals.capturedDataPointIndex=f,{capturedSeries:g,j:i.globals.isBarHorizontal?m:f,hoverX:h,hoverY:p}}},{key:"closestInMultiArray",value:function(e,t,n,r){var a=this.w,i=0,o=null,s=-1;a.globals.series.length>1?i=this.getFirstActiveXArray(n):o=0;var u=n[i][0],l=Math.abs(e-u);if(n.forEach((function(t){t.forEach((function(t,n){var r=Math.abs(e-t);r<l&&(l=r,s=n)}))})),-1!==s){var c=r[i][s],d=Math.abs(t-c);o=i,r.forEach((function(e,n){var r=Math.abs(t-e[s]);r<d&&(d=r,o=n)}))}return{index:o,j:s}}},{key:"getFirstActiveXArray",value:function(e){for(var t=this.w,n=0,r=e.map((function(e,t){return e.length>0?t:-1})),a=0;a<r.length;a++)if(-1!==r[a]&&-1===t.globals.collapsedSeriesIndices.indexOf(a)&&-1===t.globals.ancillaryCollapsedSeriesIndices.indexOf(a)){n=r[a];break}return n}},{key:"closestInArray",value:function(e,t){for(var n=t[0],r=null,a=Math.abs(e-n),i=0;i<t.length;i++){var o=Math.abs(e-t[i]);o<a&&(a=o,r=i)}return{index:r}}},{key:"isXoverlap",value:function(e){var t=[],n=this.w.globals.seriesX.filter((function(e){return void 0!==e[0]}));if(n.length>0)for(var r=0;r<n.length-1;r++)void 0!==n[r][e]&&void 0!==n[r+1][e]&&n[r][e]!==n[r+1][e]&&t.push("unEqual");return 0===t.length}},{key:"isInitialSeriesSameLen",value:function(){for(var e=!0,t=this.w.globals.initialSeries,n=0;n<t.length-1;n++)if(t[n].data.length!==t[n+1].data.length){e=!1;break}return e}},{key:"getBarsHeight",value:function(e){return g(e).reduce((function(e,t){return e+t.getBBox().height}),0)}},{key:"getElMarkers",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(" .apexcharts-series-markers")}},{key:"getAllMarkers",value:function(){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(e=g(e)).sort((function(e,t){var n=Number(e.getAttribute("data:realIndex")),r=Number(t.getAttribute("data:realIndex"));return r<n?1:r>n?-1:0}));var t=[];return e.forEach((function(e){t.push(e.querySelector(".apexcharts-marker"))})),t}},{key:"hasMarkers",value:function(){return this.getElMarkers().length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(e){var t=this.w,n=t.config.markers.hover.size;return void 0===n&&(n=t.globals.markers.size[e]+t.config.markers.hover.sizeOffset),n}},{key:"toggleAllTooltipSeriesGroups",value:function(e){var t=this.w,n=this.ttCtx;0===n.allTooltipSeriesGroups.length&&(n.allTooltipSeriesGroups=t.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var r=n.allTooltipSeriesGroups,a=0;a<r.length;a++)"enable"===e?(r[a].classList.add("apexcharts-active"),r[a].style.display=t.config.tooltip.items.display):(r[a].classList.remove("apexcharts-active"),r[a].style.display="none")}}]),e}(),ve=function(){function e(t){s(this,e),this.w=t.w,this.ctx=t.ctx,this.ttCtx=t,this.tooltipUtil=new ge(t)}return l(e,[{key:"drawSeriesTexts",value:function(e){var t=e.shared,n=void 0===t||t,r=e.ttItems,a=e.i,i=void 0===a?0:a,o=e.j,s=void 0===o?null:o,u=e.y1,l=e.y2,c=e.e,d=this.w;void 0!==d.config.tooltip.custom?this.handleCustomTooltip({i:i,j:s,y1:u,y2:l,w:d}):this.toggleActiveInactiveSeries(n);var h=this.getValuesToPrint({i:i,j:s});this.printLabels({i:i,j:s,values:h,ttItems:r,shared:n,e:c});var p=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=p.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=p.getBoundingClientRect().height}},{key:"printLabels",value:function(e){var t,n=this,r=e.i,a=e.j,o=e.values,s=e.ttItems,u=e.shared,l=e.e,c=this.w,d=[],h=function(e){return c.globals.seriesGoals[e]&&c.globals.seriesGoals[e][a]&&Array.isArray(c.globals.seriesGoals[e][a])},p=o.xVal,f=o.zVal,m=o.xAxisTTVal,g="",v=c.globals.colors[r];null!==a&&c.config.plotOptions.bar.distributed&&(v=c.globals.colors[a]);for(var y=function(e,o){var y=n.getFormatters(r);g=n.getSeriesName({fn:y.yLbTitleFormatter,index:r,seriesIndex:r,j:a}),"treemap"===c.config.chart.type&&(g=y.yLbTitleFormatter(String(c.config.series[r].data[a].x),{series:c.globals.series,seriesIndex:r,dataPointIndex:a,w:c}));var b=c.config.tooltip.inverseOrder?o:e;if(c.globals.axisCharts){var x=function(e){return y.yLbFormatter(c.globals.series[e][a],{series:c.globals.series,seriesIndex:e,dataPointIndex:a,w:c})};if(u)y=n.getFormatters(b),g=n.getSeriesName({fn:y.yLbTitleFormatter,index:b,seriesIndex:r,j:a}),v=c.globals.colors[b],t=x(b),h(b)&&(d=c.globals.seriesGoals[b][a].map((function(e){return{attrs:e,val:y.yLbFormatter(e.value,{seriesIndex:b,dataPointIndex:a,w:c})}})));else{var A,w=null==l||null===(A=l.target)||void 0===A?void 0:A.getAttribute("fill");w&&(v=-1!==w.indexOf("url")?document.querySelector(w.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):w),t=x(r),h(r)&&Array.isArray(c.globals.seriesGoals[r][a])&&(d=c.globals.seriesGoals[r][a].map((function(e){return{attrs:e,val:y.yLbFormatter(e.value,{seriesIndex:r,dataPointIndex:a,w:c})}})))}}null===a&&(t=y.yLbFormatter(c.globals.series[r],i(i({},c),{},{seriesIndex:r,dataPointIndex:r}))),n.DOMHandling({i:r,t:b,j:a,ttItems:s,values:{val:t,goalVals:d,xVal:p,xAxisTTVal:m,zVal:f},seriesName:g,shared:u,pColor:v})},b=0,x=c.globals.series.length-1;b<c.globals.series.length;b++,x--)y(b,x)}},{key:"getFormatters",value:function(e){var t,n=this.w,r=n.globals.yLabelFormatters[e];return void 0!==n.globals.ttVal?Array.isArray(n.globals.ttVal)?(r=n.globals.ttVal[e]&&n.globals.ttVal[e].formatter,t=n.globals.ttVal[e]&&n.globals.ttVal[e].title&&n.globals.ttVal[e].title.formatter):(r=n.globals.ttVal.formatter,"function"==typeof n.globals.ttVal.title.formatter&&(t=n.globals.ttVal.title.formatter)):t=n.config.tooltip.y.title.formatter,"function"!=typeof r&&(r=n.globals.yLabelFormatters[0]?n.globals.yLabelFormatters[0]:function(e){return e}),"function"!=typeof t&&(t=function(e){return e}),{yLbFormatter:r,yLbTitleFormatter:t}}},{key:"getSeriesName",value:function(e){var t=e.fn,n=e.index,r=e.seriesIndex,a=e.j,i=this.w;return t(String(i.globals.seriesNames[n]),{series:i.globals.series,seriesIndex:r,dataPointIndex:a,w:i})}},{key:"DOMHandling",value:function(e){e.i;var t=e.t,n=e.j,r=e.ttItems,a=e.values,i=e.seriesName,o=e.shared,s=e.pColor,u=this.w,l=this.ttCtx,c=a.val,d=a.goalVals,h=a.xVal,p=a.xAxisTTVal,f=a.zVal,m=null;m=r[t].children,u.config.tooltip.fillSeriesColor&&(r[t].style.backgroundColor=s,m[0].style.display="none"),l.showTooltipTitle&&(null===l.tooltipTitle&&(l.tooltipTitle=u.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),l.tooltipTitle.innerHTML=h),l.isXAxisTooltipEnabled&&(l.xaxisTooltipText.innerHTML=""!==p?p:h);var g=r[t].querySelector(".apexcharts-tooltip-text-y-label");g&&(g.innerHTML=i||"");var v=r[t].querySelector(".apexcharts-tooltip-text-y-value");v&&(v.innerHTML=void 0!==c?c:""),m[0]&&m[0].classList.contains("apexcharts-tooltip-marker")&&(u.config.tooltip.marker.fillColors&&Array.isArray(u.config.tooltip.marker.fillColors)&&(s=u.config.tooltip.marker.fillColors[t]),m[0].style.backgroundColor=s),u.config.tooltip.marker.show||(m[0].style.display="none");var y=r[t].querySelector(".apexcharts-tooltip-text-goals-label"),b=r[t].querySelector(".apexcharts-tooltip-text-goals-value");if(d.length&&u.globals.seriesGoals[t]){var x=function(){var e="<div >",t="<div>";d.forEach((function(n,r){e+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(n.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(n.attrs.name,"</div>"),t+="<div>".concat(n.val,"</div>")})),y.innerHTML=e+"</div>",b.innerHTML=t+"</div>"};o?u.globals.seriesGoals[t][n]&&Array.isArray(u.globals.seriesGoals[t][n])?x():(y.innerHTML="",b.innerHTML=""):x()}else y.innerHTML="",b.innerHTML="";null!==f&&(r[t].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=u.config.tooltip.z.title,r[t].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==f?f:""),o&&m[0]&&(null==c||u.globals.ancillaryCollapsedSeriesIndices.indexOf(t)>-1||u.globals.collapsedSeriesIndices.indexOf(t)>-1?m[0].parentNode.style.display="none":m[0].parentNode.style.display=u.config.tooltip.items.display)}},{key:"toggleActiveInactiveSeries",value:function(e){var t=this.w;if(e)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var n=t.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");n&&(n.classList.add("apexcharts-active"),n.style.display=t.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(e){var t=e.i,n=e.j,r=this.w,a=this.ctx.series.filteredSeriesX(),i="",o="",s=null,u=null,l={series:r.globals.series,seriesIndex:t,dataPointIndex:n,w:r},c=r.globals.ttZFormatter;null===n?u=r.globals.series[t]:r.globals.isXNumeric&&"treemap"!==r.config.chart.type?(i=a[t][n],0===a[t].length&&(i=a[this.tooltipUtil.getFirstActiveXArray(a)][n])):i=void 0!==r.globals.labels[n]?r.globals.labels[n]:"";var d=i;return i=r.globals.isXNumeric&&"datetime"===r.config.xaxis.type?new X(this.ctx).xLabelFormat(r.globals.ttKeyFormatter,d,d,{i:void 0,dateFormatter:new B(this.ctx).formatDate,w:this.w}):r.globals.isBarHorizontal?r.globals.yLabelFormatters[0](d,l):r.globals.xLabelFormatter(d,l),void 0!==r.config.tooltip.x.formatter&&(i=r.globals.ttKeyFormatter(d,l)),r.globals.seriesZ.length>0&&r.globals.seriesZ[t].length>0&&(s=c(r.globals.seriesZ[t][n],r)),o="function"==typeof r.config.xaxis.tooltip.formatter?r.globals.xaxisTooltipFormatter(d,l):i,{val:Array.isArray(u)?u.join(" "):u,xVal:Array.isArray(i)?i.join(" "):i,xAxisTTVal:Array.isArray(o)?o.join(" "):o,zVal:s}}},{key:"handleCustomTooltip",value:function(e){var t=e.i,n=e.j,r=e.y1,a=e.y2,i=e.w,o=this.ttCtx.getElTooltip(),s=i.config.tooltip.custom;Array.isArray(s)&&s[t]&&(s=s[t]),o.innerHTML=s({ctx:this.ctx,series:i.globals.series,seriesIndex:t,dataPointIndex:n,y1:r,y2:a,w:i})}}]),e}(),ye=function(){function e(t){s(this,e),this.ttCtx=t,this.ctx=t.ctx,this.w=t.w}return l(e,[{key:"moveXCrosshairs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.ttCtx,r=this.w,a=n.getElXCrosshairs(),i=e-n.xcrosshairsWidth/2,o=r.globals.labels.slice().length;if(null!==t&&(i=r.globals.gridWidth/o*t),null===a||r.globals.isBarHorizontal||(a.setAttribute("x",i),a.setAttribute("x1",i),a.setAttribute("x2",i),a.setAttribute("y2",r.globals.gridHeight),a.classList.add("apexcharts-active")),i<0&&(i=0),i>r.globals.gridWidth&&(i=r.globals.gridWidth),n.isXAxisTooltipEnabled){var s=i;"tickWidth"!==r.config.xaxis.crosshairs.width&&"barWidth"!==r.config.xaxis.crosshairs.width||(s=i+n.xcrosshairsWidth/2),this.moveXAxisTooltip(s)}}},{key:"moveYCrosshairs",value:function(e){var t=this.ttCtx;null!==t.ycrosshairs&&w.setAttrs(t.ycrosshairs,{y1:e,y2:e}),null!==t.ycrosshairsHidden&&w.setAttrs(t.ycrosshairsHidden,{y1:e,y2:e})}},{key:"moveXAxisTooltip",value:function(e){var t=this.w,n=this.ttCtx;if(null!==n.xaxisTooltip&&0!==n.xcrosshairsWidth){n.xaxisTooltip.classList.add("apexcharts-active");var r,a=n.xaxisOffY+t.config.xaxis.tooltip.offsetY+t.globals.translateY+1+t.config.xaxis.offsetY;if(e-=n.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(e))e+=t.globals.translateX,r=new w(this.ctx).getTextRects(n.xaxisTooltipText.innerHTML),n.xaxisTooltipText.style.minWidth=r.width+"px",n.xaxisTooltip.style.left=e+"px",n.xaxisTooltip.style.top=a+"px"}}},{key:"moveYAxisTooltip",value:function(e){var t=this.w,n=this.ttCtx;null===n.yaxisTTEls&&(n.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var r=parseInt(n.ycrosshairsHidden.getAttribute("y1"),10),a=t.globals.translateY+r,i=n.yaxisTTEls[e].getBoundingClientRect().height,o=t.globals.translateYAxisX[e]-2;t.config.yaxis[e].opposite&&(o-=26),a-=i/2,-1===t.globals.ignoreYAxisIndexes.indexOf(e)?(n.yaxisTTEls[e].classList.add("apexcharts-active"),n.yaxisTTEls[e].style.top=a+"px",n.yaxisTTEls[e].style.left=o+t.config.yaxis[e].tooltip.offsetX+"px"):n.yaxisTTEls[e].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.w,a=this.ttCtx,i=a.getElTooltip(),o=a.tooltipRect,s=null!==n?parseFloat(n):1,u=parseFloat(e)+s+5,l=parseFloat(t)+s/2;if(u>r.globals.gridWidth/2&&(u=u-o.ttWidth-s-10),u>r.globals.gridWidth-o.ttWidth-10&&(u=r.globals.gridWidth-o.ttWidth),u<-20&&(u=-20),r.config.tooltip.followCursor){var c=a.getElGrid(),d=c.getBoundingClientRect();l=a.e.clientY+r.globals.translateY-d.top-o.ttHeight/2}else r.globals.isBarHorizontal||(o.ttHeight/2+l>r.globals.gridHeight&&(l=r.globals.gridHeight-o.ttHeight+r.globals.translateY),l<0&&(l=0));isNaN(u)||(u+=r.globals.translateX,i.style.left=u+"px",i.style.top=l+"px")}},{key:"moveMarkers",value:function(e,t){var n=this.w,r=this.ttCtx;if(n.globals.markers.size[e]>0)for(var a=n.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-marker")),i=0;i<a.length;i++)parseInt(a[i].getAttribute("rel"),10)===t&&(r.marker.resetPointsSize(),r.marker.enlargeCurrentPoint(t,a[i]));else r.marker.resetPointsSize(),this.moveDynamicPointOnHover(t,e)}},{key:"moveDynamicPointOnHover",value:function(e,t){var n,r,a=this.w,i=this.ttCtx,o=a.globals.pointsArray,s=i.tooltipUtil.getHoverMarkerSize(t),u=a.config.series[t].type;if(!u||"column"!==u&&"candlestick"!==u&&"boxPlot"!==u){n=o[t][e][0],r=o[t][e][1]?o[t][e][1]:0;var l=a.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-series-markers circle"));l&&r<a.globals.gridHeight&&r>0&&(l.setAttribute("r",s),l.setAttribute("cx",n),l.setAttribute("cy",r)),this.moveXCrosshairs(n),i.fixedTooltip||this.moveTooltip(n,r,s)}}},{key:"moveDynamicPointsOnHover",value:function(e){var t,n=this.ttCtx,r=n.w,a=0,i=0,o=r.globals.pointsArray;t=new D(this.ctx).getActiveConfigSeriesIndex(!0);var s=n.tooltipUtil.getHoverMarkerSize(t);o[t]&&(a=o[t][e][0],i=o[t][e][1]);var u=n.tooltipUtil.getAllMarkers();if(null!==u)for(var l=0;l<r.globals.series.length;l++){var c=o[l];if(r.globals.comboCharts&&void 0===c&&u.splice(l,0,null),c&&c.length){var d=o[l][e][1];u[l].setAttribute("cx",a),null!==d&&!isNaN(d)&&d<r.globals.gridHeight+s&&d+s>0?(u[l]&&u[l].setAttribute("r",s),u[l]&&u[l].setAttribute("cy",d)):u[l]&&u[l].setAttribute("r",0)}}if(this.moveXCrosshairs(a),!n.fixedTooltip){var h=i||r.globals.gridHeight;this.moveTooltip(a,h,s)}}},{key:"moveStickyTooltipOverBars",value:function(e){var t=this.w,n=this.ttCtx,r=t.globals.columnSeries?t.globals.columnSeries.length:t.globals.series.length,a=r>=2&&r%2==0?Math.floor(r/2):Math.floor(r/2)+1;t.globals.isBarHorizontal&&(a=new D(this.ctx).getActiveConfigSeriesIndex(!1,"desc")+1);var i=t.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(a,"'] path[j='").concat(e,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(a,"'] path[j='").concat(e,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(a,"'] path[j='").concat(e,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(a,"'] path[j='").concat(e,"']")),o=i?parseFloat(i.getAttribute("cx")):0,s=i?parseFloat(i.getAttribute("cy")):0,u=i?parseFloat(i.getAttribute("barWidth")):0,l=i?parseFloat(i.getAttribute("barHeight")):0,c=n.getElGrid().getBoundingClientRect(),d=i.classList.contains("apexcharts-candlestick-area")||i.classList.contains("apexcharts-boxPlot-area");if(t.globals.isXNumeric?(i&&!d&&(o-=r%2!=0?u/2:0),i&&d&&t.globals.comboCharts&&(o-=u/2)):t.globals.isBarHorizontal||(o=n.xAxisTicksPositions[e-1]+n.dataPointsDividedWidth/2,isNaN(o)&&(o=n.xAxisTicksPositions[e]-n.dataPointsDividedWidth/2)),t.globals.isBarHorizontal?(s>t.globals.gridHeight/2&&(s-=n.tooltipRect.ttHeight),(s=s+t.config.grid.padding.top+l/3)+l>t.globals.gridHeight&&(s=t.globals.gridHeight-l)):t.config.tooltip.followCursor?s=n.e.clientY-c.top-n.tooltipRect.ttHeight/2:s+n.tooltipRect.ttHeight+15>t.globals.gridHeight&&(s=t.globals.gridHeight),s<-10&&(s=-10),t.globals.isBarHorizontal||this.moveXCrosshairs(o),!n.fixedTooltip){var h=s||t.globals.gridHeight;this.moveTooltip(o,h)}}}]),e}(),be=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t,this.ctx=t.ctx,this.tooltipPosition=new ye(t)}return l(e,[{key:"drawDynamicPoints",value:function(){var e=this.w,t=new w(this.ctx),n=new R(this.ctx),r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");r=g(r),e.config.chart.stacked&&r.sort((function(e,t){return parseFloat(e.getAttribute("data:realIndex"))-parseFloat(t.getAttribute("data:realIndex"))}));for(var a=0;a<r.length;a++){var i=r[a].querySelector(".apexcharts-series-markers-wrap");if(null!==i){var o=void 0,s="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==e.config.chart.type&&"area"!==e.config.chart.type||e.globals.comboCharts||e.config.tooltip.intersect||(s+=" no-pointer-events");var u=n.getMarkerConfig({cssClass:s,seriesIndex:Number(i.getAttribute("data:realIndex"))});(o=t.drawMarker(0,0,u)).node.setAttribute("default-marker-size",0);var l=document.createElementNS(e.globals.SVGNS,"g");l.classList.add("apexcharts-series-markers"),l.appendChild(o.node),i.appendChild(l)}}}},{key:"enlargeCurrentPoint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=this.w;"bubble"!==a.config.chart.type&&this.newPointSize(e,t);var i=t.getAttribute("cx"),o=t.getAttribute("cy");if(null!==n&&null!==r&&(i=n,o=r),this.tooltipPosition.moveXCrosshairs(i),!this.fixedTooltip){if("radar"===a.config.chart.type){var s=this.ttCtx.getElGrid(),u=s.getBoundingClientRect();i=this.ttCtx.e.clientX-u.left}this.tooltipPosition.moveTooltip(i,o,a.config.markers.hover.size)}}},{key:"enlargePoints",value:function(e){for(var t=this.w,n=this,r=this.ttCtx,a=e,i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),o=t.config.markers.hover.size,s=0;s<i.length;s++){var u=i[s].getAttribute("rel"),l=i[s].getAttribute("index");if(void 0===o&&(o=t.globals.markers.size[l]+t.config.markers.hover.sizeOffset),a===parseInt(u,10)){n.newPointSize(a,i[s]);var c=i[s].getAttribute("cx"),d=i[s].getAttribute("cy");n.tooltipPosition.moveXCrosshairs(c),r.fixedTooltip||n.tooltipPosition.moveTooltip(c,d,o)}else n.oldPointSize(i[s])}}},{key:"newPointSize",value:function(e,t){var n=this.w,r=n.config.markers.hover.size,a=0===e?t.parentNode.firstChild:t.parentNode.lastChild;if("0"!==a.getAttribute("default-marker-size")){var i=parseInt(a.getAttribute("index"),10);void 0===r&&(r=n.globals.markers.size[i]+n.config.markers.hover.sizeOffset),r<0&&(r=0),a.setAttribute("r",r)}}},{key:"oldPointSize",value:function(e){var t=parseFloat(e.getAttribute("default-marker-size"));e.setAttribute("r",t)}},{key:"resetPointsSize",value:function(){for(var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),t=0;t<e.length;t++){var n=parseFloat(e[t].getAttribute("default-marker-size"));b.isNumber(n)&&n>=0?e[t].setAttribute("r",n):e[t].setAttribute("r",0)}}}]),e}(),xe=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t}return l(e,[{key:"getAttr",value:function(e,t){return parseFloat(e.target.getAttribute(t))}},{key:"handleHeatTreeTooltip",value:function(e){var t=e.e,n=e.opt,r=e.x,a=e.y,i=e.type,o=this.ttCtx,s=this.w;if(t.target.classList.contains("apexcharts-".concat(i,"-rect"))){var u=this.getAttr(t,"i"),l=this.getAttr(t,"j"),c=this.getAttr(t,"cx"),d=this.getAttr(t,"cy"),h=this.getAttr(t,"width"),p=this.getAttr(t,"height");if(o.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:u,j:l,shared:!1,e:t}),s.globals.capturedSeriesIndex=u,s.globals.capturedDataPointIndex=l,r=c+o.tooltipRect.ttWidth/2+h,a=d+o.tooltipRect.ttHeight/2-p/2,o.tooltipPosition.moveXCrosshairs(c+h/2),r>s.globals.gridWidth/2&&(r=c-o.tooltipRect.ttWidth/2+h),o.w.config.tooltip.followCursor){var f=s.globals.dom.elWrap.getBoundingClientRect();r=s.globals.clientX-f.left-(r>s.globals.gridWidth/2?o.tooltipRect.ttWidth:0),a=s.globals.clientY-f.top-(a>s.globals.gridHeight/2?o.tooltipRect.ttHeight:0)}}return{x:r,y:a}}},{key:"handleMarkerTooltip",value:function(e){var t,n,r=e.e,a=e.opt,i=e.x,o=e.y,s=this.w,u=this.ttCtx;if(r.target.classList.contains("apexcharts-marker")){var l=parseInt(a.paths.getAttribute("cx"),10),c=parseInt(a.paths.getAttribute("cy"),10),d=parseFloat(a.paths.getAttribute("val"));if(n=parseInt(a.paths.getAttribute("rel"),10),t=parseInt(a.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,u.intersect){var h=b.findAncestor(a.paths,"apexcharts-series");h&&(t=parseInt(h.getAttribute("data:realIndex"),10))}if(u.tooltipLabels.drawSeriesTexts({ttItems:a.ttItems,i:t,j:n,shared:!u.showOnIntersect&&s.config.tooltip.shared,e:r}),"mouseup"===r.type&&u.markerClick(r,t,n),s.globals.capturedSeriesIndex=t,s.globals.capturedDataPointIndex=n,i=l,o=c+s.globals.translateY-1.4*u.tooltipRect.ttHeight,u.w.config.tooltip.followCursor){var p=u.getElGrid().getBoundingClientRect();o=u.e.clientY+s.globals.translateY-p.top}d<0&&(o=c),u.marker.enlargeCurrentPoint(n,a.paths,i,o)}return{x:i,y:o}}},{key:"handleBarTooltip",value:function(e){var t,n,r=e.e,a=e.opt,i=this.w,o=this.ttCtx,s=o.getElTooltip(),u=0,l=0,c=0,d=this.getBarTooltipXY({e:r,opt:a});t=d.i;var h=d.barHeight,p=d.j;i.globals.capturedSeriesIndex=t,i.globals.capturedDataPointIndex=p,i.globals.isBarHorizontal&&o.tooltipUtil.hasBars()||!i.config.tooltip.shared?(l=d.x,c=d.y,n=Array.isArray(i.config.stroke.width)?i.config.stroke.width[t]:i.config.stroke.width,u=l):i.globals.comboCharts||i.config.tooltip.shared||(u/=2),isNaN(c)?c=i.globals.svgHeight-o.tooltipRect.ttHeight:c<0&&(c=0);var f=parseInt(a.paths.parentNode.getAttribute("data:realIndex"),10),m=i.globals.isMultipleYAxis?i.config.yaxis[f]&&i.config.yaxis[f].reversed:i.config.yaxis[0].reversed;if(l+o.tooltipRect.ttWidth>i.globals.gridWidth&&!m?l-=o.tooltipRect.ttWidth:l<0&&(l=0),o.w.config.tooltip.followCursor){var g=o.getElGrid().getBoundingClientRect();c=o.e.clientY-g.top}null===o.tooltip&&(o.tooltip=i.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),i.config.tooltip.shared||(i.globals.comboBarCount>0?o.tooltipPosition.moveXCrosshairs(u+n/2):o.tooltipPosition.moveXCrosshairs(u)),!o.fixedTooltip&&(!i.config.tooltip.shared||i.globals.isBarHorizontal&&o.tooltipUtil.hasBars())&&(m&&(l-=o.tooltipRect.ttWidth)<0&&(l=0),!m||i.globals.isBarHorizontal&&o.tooltipUtil.hasBars()||(c=c+h-2*(i.globals.series[t][p]<0?h:0)),o.tooltipRect.ttHeight+c>i.globals.gridHeight?c=i.globals.gridHeight-o.tooltipRect.ttHeight+i.globals.translateY:(c=c+i.globals.translateY-o.tooltipRect.ttHeight/2)<0&&(c=0),s.style.left=l+i.globals.translateX+"px",s.style.top=c+"px")}},{key:"getBarTooltipXY",value:function(e){var t=e.e,n=e.opt,r=this.w,a=null,i=this.ttCtx,o=0,s=0,u=0,l=0,c=0,d=t.target.classList;if(d.contains("apexcharts-bar-area")||d.contains("apexcharts-candlestick-area")||d.contains("apexcharts-boxPlot-area")||d.contains("apexcharts-rangebar-area")){var h=t.target,p=h.getBoundingClientRect(),f=n.elGrid.getBoundingClientRect(),m=p.height;c=p.height;var g=p.width,v=parseInt(h.getAttribute("cx"),10),y=parseInt(h.getAttribute("cy"),10);l=parseFloat(h.getAttribute("barWidth"));var b="touchmove"===t.type?t.touches[0].clientX:t.clientX;a=parseInt(h.getAttribute("j"),10),o=parseInt(h.parentNode.getAttribute("rel"),10)-1;var x=h.getAttribute("data-range-y1"),A=h.getAttribute("data-range-y2");r.globals.comboCharts&&(o=parseInt(h.parentNode.getAttribute("data:realIndex"),10)),i.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:o,j:a,y1:x?parseInt(x,10):null,y2:A?parseInt(A,10):null,shared:!i.showOnIntersect&&r.config.tooltip.shared,e:t}),r.config.tooltip.followCursor?r.globals.isBarHorizontal?(s=b-f.left+15,u=y-i.dataPointsDividedHeight+m/2-i.tooltipRect.ttHeight/2):(s=r.globals.isXNumeric?v-g/2:v-i.dataPointsDividedWidth+g/2,u=t.clientY-f.top-i.tooltipRect.ttHeight/2-15):r.globals.isBarHorizontal?((s=v)<i.xyRatios.baseLineInvertedY&&(s=v-i.tooltipRect.ttWidth),u=y-i.dataPointsDividedHeight+m/2-i.tooltipRect.ttHeight/2):(s=r.globals.isXNumeric?v-g/2:v-i.dataPointsDividedWidth+g/2,u=y)}return{x:s,y:u,barHeight:c,barWidth:l,i:o,j:a}}}]),e}(),Ae=function(){function e(t){s(this,e),this.w=t.w,this.ttCtx=t}return l(e,[{key:"drawXaxisTooltip",value:function(){var e=this.w,t=this.ttCtx,n="bottom"===e.config.xaxis.position;t.xaxisOffY=n?e.globals.gridHeight+1:-e.globals.xAxisHeight-e.config.xaxis.axisTicks.height+3;var r=n?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",a=e.globals.dom.elWrap;t.isXAxisTooltipEnabled&&null===e.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(t.xaxisTooltip=document.createElement("div"),t.xaxisTooltip.setAttribute("class",r+" apexcharts-theme-"+e.config.tooltip.theme),a.appendChild(t.xaxisTooltip),t.xaxisTooltipText=document.createElement("div"),t.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),t.xaxisTooltipText.style.fontFamily=e.config.xaxis.tooltip.style.fontFamily||e.config.chart.fontFamily,t.xaxisTooltipText.style.fontSize=e.config.xaxis.tooltip.style.fontSize,t.xaxisTooltip.appendChild(t.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var e=this.w,t=this.ttCtx,n=function(n){var r=e.config.yaxis[n].opposite||e.config.yaxis[n].crosshairs.opposite;t.yaxisOffX=r?e.globals.gridWidth+1:1;var a="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(n,r?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left");e.globals.yAxisSameScaleIndices.map((function(t,r){t.map((function(t,r){r===n&&(a+=e.config.yaxis[r].show?" ":" apexcharts-yaxistooltip-hidden")}))}));var i=e.globals.dom.elWrap;null===e.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(n))&&(t.yaxisTooltip=document.createElement("div"),t.yaxisTooltip.setAttribute("class",a+" apexcharts-theme-"+e.config.tooltip.theme),i.appendChild(t.yaxisTooltip),0===n&&(t.yaxisTooltipText=[]),t.yaxisTooltipText[n]=document.createElement("div"),t.yaxisTooltipText[n].classList.add("apexcharts-yaxistooltip-text"),t.yaxisTooltip.appendChild(t.yaxisTooltipText[n]))},r=0;r<e.config.yaxis.length;r++)n(r)}},{key:"setXCrosshairWidth",value:function(){var e=this.w,t=this.ttCtx,n=t.getElXCrosshairs();if(t.xcrosshairsWidth=parseInt(e.config.xaxis.crosshairs.width,10),e.globals.comboCharts){var r=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==r&&"barWidth"===e.config.xaxis.crosshairs.width){var a=parseFloat(r.getAttribute("barWidth"));t.xcrosshairsWidth=a}else if("tickWidth"===e.config.xaxis.crosshairs.width){var i=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/i}}else if("tickWidth"===e.config.xaxis.crosshairs.width){var o=e.globals.labels.length;t.xcrosshairsWidth=e.globals.gridWidth/o}else if("barWidth"===e.config.xaxis.crosshairs.width){var s=e.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==s){var u=parseFloat(s.getAttribute("barWidth"));t.xcrosshairsWidth=u}else t.xcrosshairsWidth=1}e.globals.isBarHorizontal&&(t.xcrosshairsWidth=0),null!==n&&t.xcrosshairsWidth>0&&n.setAttribute("width",t.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var e=this.w,t=this.ttCtx;t.ycrosshairs=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),t.ycrosshairsHidden=e.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(e,t,n){var r=this.ttCtx,a=this.w,i=a.globals.yLabelFormatters[e];if(r.yaxisTooltips[e]){var o=r.getElGrid().getBoundingClientRect(),s=(t-o.top)*n.yRatio[e],u=a.globals.maxYArr[e]-a.globals.minYArr[e],l=a.globals.minYArr[e]+(u-s);r.tooltipPosition.moveYCrosshairs(t-o.top),r.yaxisTooltipText[e].innerHTML=i(l),r.tooltipPosition.moveYAxisTooltip(e)}}}]),e}(),we=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var n=this.w;this.tConfig=n.config.tooltip,this.tooltipUtil=new ge(this),this.tooltipLabels=new ve(this),this.tooltipPosition=new ye(this),this.marker=new be(this),this.intersect=new xe(this),this.axesTooltip=new Ae(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!n.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return l(e,[{key:"getElTooltip",value:function(e){return e||(e=this),e.w.globals.dom.baseEl?e.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(e){var t=this.w;this.xyRatios=e,this.isXAxisTooltipEnabled=t.config.xaxis.tooltip.enabled&&t.globals.axisCharts,this.yaxisTooltips=t.config.yaxis.map((function(e,n){return!!(e.show&&e.tooltip.enabled&&t.globals.axisCharts)})),this.allTooltipSeriesGroups=[],t.globals.axisCharts||(this.showTooltipTitle=!1);var n=document.createElement("div");if(n.classList.add("apexcharts-tooltip"),t.config.tooltip.cssClass&&n.classList.add(t.config.tooltip.cssClass),n.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),t.globals.dom.elWrap.appendChild(n),t.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var r=new K(this.ctx);this.xAxisTicksPositions=r.getXAxisTicksPositions()}if(!t.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==t.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==t.config.markers.size&&0!==t.globals.markers.largestSize||this.marker.drawDynamicPoints(this),t.globals.collapsedSeries.length!==t.globals.series.length){this.dataPointsDividedHeight=t.globals.gridHeight/t.globals.dataPoints,this.dataPointsDividedWidth=t.globals.gridWidth/t.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||t.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,n.appendChild(this.tooltipTitle));var a=t.globals.series.length;(t.globals.xyCharts||t.globals.comboCharts)&&this.tConfig.shared&&(a=this.showOnIntersect?1:t.globals.series.length),this.legendLabels=t.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(a),this.addSVGEvents()}}},{key:"createTTElements",value:function(e){for(var t=this,n=this.w,r=[],a=this.getElTooltip(),i=function(i){var o=document.createElement("div");o.classList.add("apexcharts-tooltip-series-group"),o.style.order=n.config.tooltip.inverseOrder?e-i:i+1,t.tConfig.shared&&t.tConfig.enabledOnSeries&&Array.isArray(t.tConfig.enabledOnSeries)&&t.tConfig.enabledOnSeries.indexOf(i)<0&&o.classList.add("apexcharts-tooltip-series-group-hidden");var s=document.createElement("span");s.classList.add("apexcharts-tooltip-marker"),s.style.backgroundColor=n.globals.colors[i],o.appendChild(s);var u=document.createElement("div");u.classList.add("apexcharts-tooltip-text"),u.style.fontFamily=t.tConfig.style.fontFamily||n.config.chart.fontFamily,u.style.fontSize=t.tConfig.style.fontSize,["y","goals","z"].forEach((function(e){var t=document.createElement("div");t.classList.add("apexcharts-tooltip-".concat(e,"-group"));var n=document.createElement("span");n.classList.add("apexcharts-tooltip-text-".concat(e,"-label")),t.appendChild(n);var r=document.createElement("span");r.classList.add("apexcharts-tooltip-text-".concat(e,"-value")),t.appendChild(r),u.appendChild(t)})),o.appendChild(u),a.appendChild(o),r.push(o)},o=0;o<e;o++)i(o);return r}},{key:"addSVGEvents",value:function(){var e=this.w,t=e.config.chart.type,n=this.getElTooltip(),r=!("bar"!==t&&"candlestick"!==t&&"boxPlot"!==t&&"rangeBar"!==t),a="area"===t||"line"===t||"scatter"===t||"bubble"===t||"radar"===t,i=e.globals.dom.Paper.node,o=this.getElGrid();o&&(this.seriesBound=o.getBoundingClientRect());var s,u=[],l=[],c={hoverArea:i,elGrid:o,tooltipEl:n,tooltipY:u,tooltipX:l,ttItems:this.ttItems};if(e.globals.axisCharts&&(a?s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):r?s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==t&&"treemap"!==t||(s=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),s&&s.length))for(var d=0;d<s.length;d++)u.push(s[d].getAttribute("cy")),l.push(s[d].getAttribute("cx"));if(e.globals.xyCharts&&!this.showOnIntersect||e.globals.comboCharts&&!this.showOnIntersect||r&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([i],c);else if(r&&!e.globals.comboCharts||a&&this.showOnIntersect)this.addDatapointEventsListeners(c);else if(!e.globals.axisCharts||"heatmap"===t||"treemap"===t){var h=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(h,c)}if(this.showOnIntersect){var p=e.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");p.length>0&&this.addPathsEventListeners(p,c),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(c)}}},{key:"drawFixedTooltipRect",value:function(){var e=this.w,t=this.getElTooltip(),n=t.getBoundingClientRect(),r=n.width+10,a=n.height+10,i=this.tConfig.fixed.offsetX,o=this.tConfig.fixed.offsetY,s=this.tConfig.fixed.position.toLowerCase();return s.indexOf("right")>-1&&(i=i+e.globals.svgWidth-r+10),s.indexOf("bottom")>-1&&(o=o+e.globals.svgHeight-a-10),t.style.left=i+"px",t.style.top=o+"px",{x:i,y:o,ttWidth:r,ttHeight:a}}},{key:"addDatapointEventsListeners",value:function(e){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(t,e)}},{key:"addPathsEventListeners",value:function(e,t){for(var n=this,r=function(r){var a={paths:e[r],tooltipEl:t.tooltipEl,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:t.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map((function(t){return e[r].addEventListener(t,n.onSeriesHover.bind(n,a),{capture:!1,passive:!0})}))},a=0;a<e.length;a++)r(a)}},{key:"onSeriesHover",value:function(e,t){var n=this,r=Date.now()-this.lastHoverTime;r>=100?this.seriesHover(e,t):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout((function(){n.seriesHover(e,t)}),100-r))}},{key:"seriesHover",value:function(e,t){var n=this;this.lastHoverTime=Date.now();var r=[],a=this.w;a.config.chart.group&&(r=this.ctx.getGroupedCharts()),a.globals.axisCharts&&(a.globals.minX===-1/0&&a.globals.maxX===1/0||0===a.globals.dataPoints)||(r.length?r.forEach((function(r){var a=n.getElTooltip(r),i={paths:e.paths,tooltipEl:a,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:r.w.globals.tooltip.ttItems};r.w.globals.minX===n.w.globals.minX&&r.w.globals.maxX===n.w.globals.maxX&&r.w.globals.tooltip.seriesHoverByContext({chartCtx:r,ttCtx:r.w.globals.tooltip,opt:i,e:t})})):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:e,e:t}))}},{key:"seriesHoverByContext",value:function(e){var t=e.chartCtx,n=e.ttCtx,r=e.opt,a=e.e,i=t.w,o=this.getElTooltip();o&&(n.tooltipRect={x:0,y:0,ttWidth:o.getBoundingClientRect().width,ttHeight:o.getBoundingClientRect().height},n.e=a,!n.tooltipUtil.hasBars()||i.globals.comboCharts||n.isBarShared||this.tConfig.onDatasetHover.highlightDataSeries&&new D(t).toggleSeriesOnHover(a,a.target.parentNode),n.fixedTooltip&&n.drawFixedTooltipRect(),i.globals.axisCharts?n.axisChartsTooltips({e:a,opt:r,tooltipRect:n.tooltipRect}):n.nonAxisChartsTooltips({e:a,opt:r,tooltipRect:n.tooltipRect}))}},{key:"axisChartsTooltips",value:function(e){var t,n,r=e.e,a=e.opt,i=this.w,o=a.elGrid.getBoundingClientRect(),s="touchmove"===r.type?r.touches[0].clientX:r.clientX,u="touchmove"===r.type?r.touches[0].clientY:r.clientY;if(this.clientY=u,this.clientX=s,i.globals.capturedSeriesIndex=-1,i.globals.capturedDataPointIndex=-1,u<o.top||u>o.top+o.height)this.handleMouseOut(a);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!i.config.tooltip.shared){var l=parseInt(a.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(l)<0)return void this.handleMouseOut(a)}var c=this.getElTooltip(),d=this.getElXCrosshairs(),h=i.globals.xyCharts||"bar"===i.config.chart.type&&!i.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||i.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===r.type||"touchmove"===r.type||"mouseup"===r.type){if(i.globals.collapsedSeries.length+i.globals.ancillaryCollapsedSeries.length===i.globals.series.length)return;null!==d&&d.classList.add("apexcharts-active");var p=this.yaxisTooltips.filter((function(e){return!0===e}));if(null!==this.ycrosshairs&&p.length&&this.ycrosshairs.classList.add("apexcharts-active"),h&&!this.showOnIntersect)this.handleStickyTooltip(r,s,u,a);else if("heatmap"===i.config.chart.type||"treemap"===i.config.chart.type){var f=this.intersect.handleHeatTreeTooltip({e:r,opt:a,x:t,y:n,type:i.config.chart.type});t=f.x,n=f.y,c.style.left=t+"px",c.style.top=n+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:r,opt:a}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:r,opt:a,x:t,y:n});if(this.yaxisTooltips.length)for(var m=0;m<i.config.yaxis.length;m++)this.axesTooltip.drawYaxisTooltipText(m,u,this.xyRatios);a.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==r.type&&"touchend"!==r.type||this.handleMouseOut(a)}}},{key:"nonAxisChartsTooltips",value:function(e){var t=e.e,n=e.opt,r=e.tooltipRect,a=this.w,i=n.paths.getAttribute("rel"),o=this.getElTooltip(),s=a.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===t.type||"touchmove"===t.type){o.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:parseInt(i,10)-1,shared:!1});var u=a.globals.clientX-s.left-r.ttWidth/2,l=a.globals.clientY-s.top-r.ttHeight-10;if(o.style.left=u+"px",o.style.top=l+"px",a.config.legend.tooltipHoverFormatter){var c=i-1,d=(0,a.config.legend.tooltipHoverFormatter)(this.legendLabels[c].getAttribute("data:default-text"),{seriesIndex:c,dataPointIndex:c,w:a});this.legendLabels[c].innerHTML=d}}else"mouseout"!==t.type&&"touchend"!==t.type||(o.classList.remove("apexcharts-active"),a.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(e){var t=e.getAttribute("data:default-text");e.innerHTML=decodeURIComponent(t)})))}},{key:"handleStickyTooltip",value:function(e,t,n,r){var a=this.w,i=this.tooltipUtil.getNearestValues({context:this,hoverArea:r.hoverArea,elGrid:r.elGrid,clientX:t,clientY:n}),o=i.j,s=i.capturedSeries,u=r.elGrid.getBoundingClientRect();i.hoverX<0||i.hoverX>u.width?this.handleMouseOut(r):null!==s?this.handleStickyCapturedSeries(e,s,r,o):(this.tooltipUtil.isXoverlap(o)||a.globals.isBarHorizontal)&&this.create(e,this,0,o,r.ttItems)}},{key:"handleStickyCapturedSeries",value:function(e,t,n,r){var a=this.w;this.tConfig.shared||null!==a.globals.series[t][r]?void 0!==a.globals.series[t][r]?this.tConfig.shared&&this.tooltipUtil.isXoverlap(r)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(e,this,t,r,n.ttItems):this.create(e,this,t,r,n.ttItems,!1):this.tooltipUtil.isXoverlap(r)&&this.create(e,this,0,r,n.ttItems):this.handleMouseOut(n)}},{key:"deactivateHoverFilter",value:function(){for(var e=this.w,t=new w(this.ctx),n=e.globals.dom.Paper.select(".apexcharts-bar-area"),r=0;r<n.length;r++)t.pathMouseLeave(n[r])}},{key:"handleMouseOut",value:function(e){var t=this.w,n=this.getElXCrosshairs();if(e.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==t.config.chart.type&&this.marker.resetPointsSize(),null!==n&&n.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var r=0;r<this.yaxisTTEls.length;r++)this.yaxisTTEls[r].classList.remove("apexcharts-active")}t.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(e){var t=e.getAttribute("data:default-text");e.innerHTML=decodeURIComponent(t)}))}},{key:"markerClick",value:function(e,t,n){var r=this.w;"function"==typeof r.config.chart.events.markerClick&&r.config.chart.events.markerClick(e,this.ctx,{seriesIndex:t,dataPointIndex:n,w:r}),this.ctx.events.fireEvent("markerClick",[e,this.ctx,{seriesIndex:t,dataPointIndex:n,w:r}])}},{key:"create",value:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=this.w,s=t;"mouseup"===e.type&&this.markerClick(e,n,r),null===i&&(i=this.tConfig.shared);var u=this.tooltipUtil.hasMarkers(),l=this.tooltipUtil.getElBars();if(o.config.legend.tooltipHoverFormatter){var c=o.config.legend.tooltipHoverFormatter,d=Array.from(this.legendLabels);d.forEach((function(e){var t=e.getAttribute("data:default-text");e.innerHTML=decodeURIComponent(t)}));for(var h=0;h<d.length;h++){var p=d[h],f=parseInt(p.getAttribute("i"),10),m=decodeURIComponent(p.getAttribute("data:default-text")),g=c(m,{seriesIndex:i?f:n,dataPointIndex:r,w:o});if(i)p.innerHTML=o.globals.collapsedSeriesIndices.indexOf(f)<0?g:m;else if(p.innerHTML=f===n?g:m,n===f)break}}if(i){if(s.tooltipLabels.drawSeriesTexts({ttItems:a,i:n,j:r,shared:!this.showOnIntersect&&this.tConfig.shared}),u&&(o.globals.markers.largestSize>0?s.marker.enlargePoints(r):s.tooltipPosition.moveDynamicPointsOnHover(r)),this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(l),this.barSeriesHeight>0)){var v=new w(this.ctx),y=o.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(r,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(r);for(var b=0;b<y.length;b++)v.pathMouseEnter(y[b])}}else s.tooltipLabels.drawSeriesTexts({shared:!1,ttItems:a,i:n,j:r}),this.tooltipUtil.hasBars()&&s.tooltipPosition.moveStickyTooltipOverBars(r),u&&s.tooltipPosition.moveMarkers(n,r)}}]),e}(),ke=function(e){d(n,z);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"draw",value:function(e,t){var n=this,r=this.w;this.graphics=new w(this.ctx),this.bar=new z(this.ctx,this.xyRatios);var a=new k(this.ctx,r);e=a.getLogSeries(e),this.yRatio=a.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e),"100%"===r.config.chart.stackType&&(e=r.globals.seriesPercent.slice()),this.series=e,this.totalItems=0,this.prevY=[],this.prevX=[],this.prevYF=[],this.prevXF=[],this.prevYVal=[],this.prevXVal=[],this.xArrj=[],this.xArrjF=[],this.xArrjVal=[],this.yArrj=[],this.yArrjF=[],this.yArrjVal=[];for(var o=0;o<e.length;o++)e[o].length>0&&(this.totalItems+=e[o].length);for(var s=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),u=0,l=0,c=function(a,o){var c=void 0,d=void 0,h=void 0,p=void 0,f=[],m=[],g=r.globals.comboCharts?t[a]:a;n.yRatio.length>1&&(n.yaxisIndex=g),n.isReversed=r.config.yaxis[n.yaxisIndex]&&r.config.yaxis[n.yaxisIndex].reversed;var v=n.graphics.group({class:"apexcharts-series",seriesName:b.escapeString(r.globals.seriesNames[g]),rel:a+1,"data:realIndex":g});n.ctx.series.addCollapsedClassToSeries(v,g);var y=n.graphics.group({class:"apexcharts-datalabels","data:realIndex":g}),x=0,A=0,w=n.initialPositions(u,l,c,d,h,p);l=w.y,x=w.barHeight,d=w.yDivision,p=w.zeroW,u=w.x,A=w.barWidth,c=w.xDivision,h=w.zeroH,n.yArrj=[],n.yArrjF=[],n.yArrjVal=[],n.xArrj=[],n.xArrjF=[],n.xArrjVal=[],1===n.prevY.length&&n.prevY[0].every((function(e){return isNaN(e)}))&&(n.prevY[0]=n.prevY[0].map((function(e){return h})),n.prevYF[0]=n.prevYF[0].map((function(e){return 0})));for(var k=0;k<r.globals.dataPoints;k++){var S=n.barHelpers.getStrokeWidth(a,k,g),C={indexes:{i:a,j:k,realIndex:g,bc:o},strokeWidth:S,x:u,y:l,elSeries:v},I=null;n.isHorizontal?(I=n.drawStackedBarPaths(i(i({},C),{},{zeroW:p,barHeight:x,yDivision:d})),A=n.series[a][k]/n.invertedYRatio):(I=n.drawStackedColumnPaths(i(i({},C),{},{xDivision:c,barWidth:A,zeroH:h})),x=n.series[a][k]/n.yRatio[n.yaxisIndex]),l=I.y,u=I.x,f.push(u),m.push(l);var E=n.barHelpers.getPathFillColor(e,a,k,g);v=n.renderSeries({realIndex:g,pathFill:E,j:k,i:a,pathFrom:I.pathFrom,pathTo:I.pathTo,strokeWidth:S,elSeries:v,x:u,y:l,series:e,barHeight:x,barWidth:A,elDataLabelsWrap:y,type:"bar",visibleSeries:0})}r.globals.seriesXvalues[g]=f,r.globals.seriesYvalues[g]=m,n.prevY.push(n.yArrj),n.prevYF.push(n.yArrjF),n.prevYVal.push(n.yArrjVal),n.prevX.push(n.xArrj),n.prevXF.push(n.xArrjF),n.prevXVal.push(n.xArrjVal),s.add(v)},d=0,h=0;d<e.length;d++,h++)c(d,h);return s}},{key:"initialPositions",value:function(e,t,n,r,a,i){var o,s,u=this.w;return this.isHorizontal?(o=(o=r=u.globals.gridHeight/u.globals.dataPoints)*parseInt(u.config.plotOptions.bar.barHeight,10)/100,i=this.baseLineInvertedY+u.globals.padHorizontal+(this.isReversed?u.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),t=(r-o)/2):(s=n=u.globals.gridWidth/u.globals.dataPoints,s=u.globals.isXNumeric&&u.globals.dataPoints>1?(n=u.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:s*parseInt(u.config.plotOptions.bar.columnWidth,10)/100,a=this.baseLineY[this.yaxisIndex]+(this.isReversed?u.globals.gridHeight:0)-(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),e=u.globals.padHorizontal+(n-s)/2),{x:e,y:t,yDivision:r,xDivision:n,barHeight:o,barWidth:s,zeroH:a,zeroW:i}}},{key:"drawStackedBarPaths",value:function(e){for(var t,n=e.indexes,r=e.barHeight,a=e.strokeWidth,i=e.zeroW,o=e.x,s=e.y,u=e.yDivision,l=e.elSeries,c=this.w,d=s,h=n.i,p=n.j,f=0,m=0;m<this.prevXF.length;m++)f+=this.prevXF[m][p];if(h>0){var g=i;this.prevXVal[h-1][p]<0?g=this.series[h][p]>=0?this.prevX[h-1][p]+f-2*(this.isReversed?f:0):this.prevX[h-1][p]:this.prevXVal[h-1][p]>=0&&(g=this.series[h][p]>=0?this.prevX[h-1][p]:this.prevX[h-1][p]-f+2*(this.isReversed?f:0)),t=g}else t=i;o=null===this.series[h][p]?t:t+this.series[h][p]/this.invertedYRatio-2*(this.isReversed?this.series[h][p]/this.invertedYRatio:0);var v=this.barHelpers.getBarpaths({barYPosition:d,barHeight:r,x1:t,x2:o,strokeWidth:a,series:this.series,realIndex:n.realIndex,i:h,j:p,w:c});return this.barHelpers.barBackground({j:p,i:h,y1:d,y2:r,elSeries:l}),s+=u,{pathTo:v.pathTo,pathFrom:v.pathFrom,x:o,y:s}}},{key:"drawStackedColumnPaths",value:function(e){var t=e.indexes,n=e.x,r=e.y,a=e.xDivision,i=e.barWidth,o=e.zeroH;e.strokeWidth;var s=e.elSeries,u=this.w,l=t.i,c=t.j,d=t.bc;if(u.globals.isXNumeric){var h=u.globals.seriesX[l][c];h||(h=0),n=(h-u.globals.minX)/this.xRatio-i/2}for(var p,f=n,m=0,g=0;g<this.prevYF.length;g++)m+=isNaN(this.prevYF[g][c])?0:this.prevYF[g][c];if(l>0&&!u.globals.isXNumeric||l>0&&u.globals.isXNumeric&&u.globals.seriesX[l-1][c]===u.globals.seriesX[l][c]){var v,y,b=Math.min(this.yRatio.length+1,l+1);if(void 0!==this.prevY[l-1])for(var x=1;x<b;x++)if(!isNaN(this.prevY[l-x][c])){y=this.prevY[l-x][c];break}for(var A=1;A<b;A++){if(this.prevYVal[l-A][c]<0){v=this.series[l][c]>=0?y-m+2*(this.isReversed?m:0):y;break}if(this.prevYVal[l-A][c]>=0){v=this.series[l][c]>=0?y:y+m-2*(this.isReversed?m:0);break}}void 0===v&&(v=u.globals.gridHeight),p=this.prevYF[0].every((function(e){return 0===e}))&&this.prevYF.slice(1,l).every((function(e){return e.every((function(e){return isNaN(e)}))}))?u.globals.gridHeight-o:v}else p=u.globals.gridHeight-o;r=p-this.series[l][c]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[l][c]/this.yRatio[this.yaxisIndex]:0);var w=this.barHelpers.getColumnPaths({barXPosition:f,barWidth:i,y1:p,y2:r,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,realIndex:t.realIndex,i:l,j:c,w:u});return this.barHelpers.barBackground({bc:d,j:c,i:l,x1:f,x2:i,elSeries:s}),n+=a,{pathTo:w.pathTo,pathFrom:w.pathFrom,x:u.globals.isXNumeric?n-a:n,y:r}}}]),n}(),Se=function(e){d(n,z);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return l(n,[{key:"draw",value:function(e,t){var n=this,r=this.w,a=new w(this.ctx),o=new M(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=r.config.plotOptions.bar.horizontal;var s=new k(this.ctx,r);e=s.getLogSeries(e),this.series=e,this.yRatio=s.getLogYRatios(this.yRatio),this.barHelpers.initVariables(e);for(var u=a.group({class:"apexcharts-".concat(r.config.chart.type,"-series apexcharts-plot-series")}),l=function(s){n.isBoxPlot="boxPlot"===r.config.chart.type||"boxPlot"===r.config.series[s].type;var l,c,d,h,p,f,m=void 0,g=void 0,v=[],y=[],x=r.globals.comboCharts?t[s]:s,A=a.group({class:"apexcharts-series",seriesName:b.escapeString(r.globals.seriesNames[x]),rel:s+1,"data:realIndex":x});n.ctx.series.addCollapsedClassToSeries(A,x),e[s].length>0&&(n.visibleI=n.visibleI+1),n.yRatio.length>1&&(n.yaxisIndex=x);var w=n.barHelpers.initialPositions();g=w.y,p=w.barHeight,c=w.yDivision,h=w.zeroW,m=w.x,f=w.barWidth,l=w.xDivision,d=w.zeroH,y.push(m+f/2);for(var k=a.group({class:"apexcharts-datalabels","data:realIndex":x}),S=function(t){var a=n.barHelpers.getStrokeWidth(s,t,x),u=null,b={indexes:{i:s,j:t,realIndex:x},x:m,y:g,strokeWidth:a,elSeries:A};u=n.isHorizontal?n.drawHorizontalBoxPaths(i(i({},b),{},{yDivision:c,barHeight:p,zeroW:h})):n.drawVerticalBoxPaths(i(i({},b),{},{xDivision:l,barWidth:f,zeroH:d})),g=u.y,m=u.x,t>0&&y.push(m+f/2),v.push(g),u.pathTo.forEach((function(i,l){var c=!n.isBoxPlot&&n.candlestickOptions.wick.useFillColor?u.color[l]:r.globals.stroke.colors[s],d=o.fillPath({seriesNumber:x,dataPointIndex:t,color:u.color[l],value:e[s][t]});n.renderSeries({realIndex:x,pathFill:d,lineFill:c,j:t,i:s,pathFrom:u.pathFrom,pathTo:i,strokeWidth:a,elSeries:A,x:m,y:g,series:e,barHeight:p,barWidth:f,elDataLabelsWrap:k,visibleSeries:n.visibleI,type:r.config.chart.type})}))},C=0;C<r.globals.dataPoints;C++)S(C);r.globals.seriesXvalues[x]=y,r.globals.seriesYvalues[x]=v,u.add(A)},c=0;c<e.length;c++)l(c);return u}},{key:"drawVerticalBoxPaths",value:function(e){var t=e.indexes,n=e.x;e.y;var r=e.xDivision,a=e.barWidth,i=e.zeroH,o=e.strokeWidth,s=this.w,u=new w(this.ctx),l=t.i,c=t.j,d=!0,h=s.config.plotOptions.candlestick.colors.upward,p=s.config.plotOptions.candlestick.colors.downward,f="";this.isBoxPlot&&(f=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var m=this.yRatio[this.yaxisIndex],g=t.realIndex,v=this.getOHLCValue(g,c),y=i,b=i;v.o>v.c&&(d=!1);var x=Math.min(v.o,v.c),A=Math.max(v.o,v.c),k=v.m;s.globals.isXNumeric&&(n=(s.globals.seriesX[g][c]-s.globals.minX)/this.xRatio-a/2);var S=n+a*this.visibleI;void 0===this.series[l][c]||null===this.series[l][c]?(x=i,A=i):(x=i-x/m,A=i-A/m,y=i-v.h/m,b=i-v.l/m,k=i-v.m/m);var C=u.move(S,i),I=u.move(S+a/2,x);return s.globals.previousPaths.length>0&&(I=this.getPreviousPath(g,c,!0)),C=this.isBoxPlot?[u.move(S,x)+u.line(S+a/2,x)+u.line(S+a/2,y)+u.line(S+a/4,y)+u.line(S+a-a/4,y)+u.line(S+a/2,y)+u.line(S+a/2,x)+u.line(S+a,x)+u.line(S+a,k)+u.line(S,k)+u.line(S,x+o/2),u.move(S,k)+u.line(S+a,k)+u.line(S+a,A)+u.line(S+a/2,A)+u.line(S+a/2,b)+u.line(S+a-a/4,b)+u.line(S+a/4,b)+u.line(S+a/2,b)+u.line(S+a/2,A)+u.line(S,A)+u.line(S,k)+"z"]:[u.move(S,A)+u.line(S+a/2,A)+u.line(S+a/2,y)+u.line(S+a/2,A)+u.line(S+a,A)+u.line(S+a,x)+u.line(S+a/2,x)+u.line(S+a/2,b)+u.line(S+a/2,x)+u.line(S,x)+u.line(S,A-o/2)],I+=u.move(S,x),s.globals.isXNumeric||(n+=r),{pathTo:C,pathFrom:I,x:n,y:A,barXPosition:S,color:this.isBoxPlot?f:d?[h]:[p]}}},{key:"drawHorizontalBoxPaths",value:function(e){var t=e.indexes;e.x;var n=e.y,r=e.yDivision,a=e.barHeight,i=e.zeroW,o=e.strokeWidth,s=this.w,u=new w(this.ctx),l=t.i,c=t.j,d=this.boxOptions.colors.lower;this.isBoxPlot&&(d=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var h=this.invertedYRatio,p=t.realIndex,f=this.getOHLCValue(p,c),m=i,g=i,v=Math.min(f.o,f.c),y=Math.max(f.o,f.c),b=f.m;s.globals.isXNumeric&&(n=(s.globals.seriesX[p][c]-s.globals.minX)/this.invertedXRatio-a/2);var x=n+a*this.visibleI;void 0===this.series[l][c]||null===this.series[l][c]?(v=i,y=i):(v=i+v/h,y=i+y/h,m=i+f.h/h,g=i+f.l/h,b=i+f.m/h);var A=u.move(i,x),k=u.move(v,x+a/2);return s.globals.previousPaths.length>0&&(k=this.getPreviousPath(p,c,!0)),A=[u.move(v,x)+u.line(v,x+a/2)+u.line(m,x+a/2)+u.line(m,x+a/2-a/4)+u.line(m,x+a/2+a/4)+u.line(m,x+a/2)+u.line(v,x+a/2)+u.line(v,x+a)+u.line(b,x+a)+u.line(b,x)+u.line(v+o/2,x),u.move(b,x)+u.line(b,x+a)+u.line(y,x+a)+u.line(y,x+a/2)+u.line(g,x+a/2)+u.line(g,x+a-a/4)+u.line(g,x+a/4)+u.line(g,x+a/2)+u.line(y,x+a/2)+u.line(y,x)+u.line(b,x)+"z"],k+=u.move(v,x),s.globals.isXNumeric||(n+=r),{pathTo:A,pathFrom:k,x:y,y:n,barYPosition:x,color:d}}},{key:"getOHLCValue",value:function(e,t){var n=this.w;return{o:this.isBoxPlot?n.globals.seriesCandleH[e][t]:n.globals.seriesCandleO[e][t],h:this.isBoxPlot?n.globals.seriesCandleO[e][t]:n.globals.seriesCandleH[e][t],m:n.globals.seriesCandleM[e][t],l:this.isBoxPlot?n.globals.seriesCandleC[e][t]:n.globals.seriesCandleL[e][t],c:this.isBoxPlot?n.globals.seriesCandleL[e][t]:n.globals.seriesCandleC[e][t]}}}]),n}(),Ce=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return l(e,[{key:"checkColorRange",value:function(){var e=this.w,t=!1,n=e.config.plotOptions[e.config.chart.type];return n.colorScale.ranges.length>0&&n.colorScale.ranges.map((function(e,n){e.from<=0&&(t=!0)})),t}},{key:"getShadeColor",value:function(e,t,n,r){var a=this.w,i=1,o=a.config.plotOptions[e].shadeIntensity,s=this.determineColor(e,t,n);a.globals.hasNegs||r?i=a.config.plotOptions[e].reverseNegativeShade?s.percent<0?s.percent/100*(1.25*o):(1-s.percent/100)*(1.25*o):s.percent<=0?1-(1+s.percent/100)*o:(1-s.percent/100)*o:(i=1-s.percent/100,"treemap"===e&&(i=(1-s.percent/100)*(1.25*o)));var u=s.color,l=new b;return a.config.plotOptions[e].enableShades&&(u="dark"===this.w.config.theme.mode?b.hexToRgba(l.shadeColor(-1*i,s.color),a.config.fill.opacity):b.hexToRgba(l.shadeColor(i,s.color),a.config.fill.opacity)),{color:u,colorProps:s}}},{key:"determineColor",value:function(e,t,n){var r=this.w,a=r.globals.series[t][n],i=r.config.plotOptions[e],o=i.colorScale.inverse?n:t;i.distributed&&"treemap"===r.config.chart.type&&(o=n);var s=r.globals.colors[o],u=null,l=Math.min.apply(Math,g(r.globals.series[t])),c=Math.max.apply(Math,g(r.globals.series[t]));i.distributed||"heatmap"!==e||(l=r.globals.minY,c=r.globals.maxY),void 0!==i.colorScale.min&&(l=i.colorScale.min<r.globals.minY?i.colorScale.min:r.globals.minY,c=i.colorScale.max>r.globals.maxY?i.colorScale.max:r.globals.maxY);var d=Math.abs(c)+Math.abs(l),h=100*a/(0===d?d-1e-6:d);return i.colorScale.ranges.length>0&&i.colorScale.ranges.map((function(e,t){if(a>=e.from&&a<=e.to){s=e.color,u=e.foreColor?e.foreColor:null,l=e.from,c=e.to;var n=Math.abs(c)+Math.abs(l);h=100*a/(0===n?n-1e-6:n)}})),{color:s,foreColor:u,percent:h}}},{key:"calculateDataLabels",value:function(e){var t=e.text,n=e.x,r=e.y,a=e.i,i=e.j,o=e.colorProps,s=e.fontSize,u=this.w.config.dataLabels,l=new w(this.ctx),c=new P(this.ctx),d=null;if(u.enabled){d=l.group({class:"apexcharts-data-labels"});var h=u.offsetX,p=u.offsetY,f=n+h,m=r+parseFloat(u.style.fontSize)/3+p;c.plotDataLabelsText({x:f,y:m,text:t,i:a,j:i,color:o.foreColor,parent:d,fontSize:s,dataLabelsConfig:u})}return d}},{key:"addListeners",value:function(e){var t=new w(this.ctx);e.node.addEventListener("mouseenter",t.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",t.pathMouseLeave.bind(this,e)),e.node.addEventListener("mousedown",t.pathMouseDown.bind(this,e))}}]),e}(),Ie=function(){function e(t,n){s(this,e),this.ctx=t,this.w=t.w,this.xRatio=n.xRatio,this.yRatio=n.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new Ce(t),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return l(e,[{key:"draw",value:function(e){var t=this.w,n=new w(this.ctx),r=n.group({class:"apexcharts-heatmap"});r.attr("clip-path","url(#gridRectMask".concat(t.globals.cuid,")"));var a=t.globals.gridWidth/t.globals.dataPoints,i=t.globals.gridHeight/t.globals.series.length,o=0,s=!1;this.negRange=this.helpers.checkColorRange();var u=e.slice();t.config.yaxis[0].reversed&&(s=!0,u.reverse());for(var l=s?0:u.length-1;s?l<u.length:l>=0;s?l++:l--){var c=n.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:b.escapeString(t.globals.seriesNames[l]),rel:l+1,"data:realIndex":l});if(this.ctx.series.addCollapsedClassToSeries(c,l),t.config.chart.dropShadow.enabled){var d=t.config.chart.dropShadow;new A(this.ctx).dropShadow(c,d,l)}for(var h=0,p=t.config.plotOptions.heatmap.shadeIntensity,f=0;f<u[l].length;f++){var m=this.helpers.getShadeColor(t.config.chart.type,l,f,this.negRange),g=m.color,v=m.colorProps;"image"===t.config.fill.type&&(g=new M(this.ctx).fillPath({seriesNumber:l,dataPointIndex:f,opacity:t.globals.hasNegs?v.percent<0?1-(1+v.percent/100):p+v.percent/100:v.percent/100,patternID:b.randomId(),width:t.config.fill.image.width?t.config.fill.image.width:a,height:t.config.fill.image.height?t.config.fill.image.height:i}));var y=this.rectRadius,x=n.drawRect(h,o,a,i,y);if(x.attr({cx:h,cy:o}),x.node.classList.add("apexcharts-heatmap-rect"),c.add(x),x.attr({fill:g,i:l,index:l,j:f,val:u[l][f],"stroke-width":this.strokeWidth,stroke:t.config.plotOptions.heatmap.useFillColorAsStroke?g:t.globals.stroke.colors[0],color:g}),this.helpers.addListeners(x),t.config.chart.animations.enabled&&!t.globals.dataChanged){var k=1;t.globals.resized||(k=t.config.chart.animations.speed),this.animateHeatMap(x,h,o,a,i,k)}if(t.globals.dataChanged){var S=1;if(this.dynamicAnim.enabled&&t.globals.shouldAnimate){S=this.dynamicAnim.speed;var C=t.globals.previousPaths[l]&&t.globals.previousPaths[l][f]&&t.globals.previousPaths[l][f].color;C||(C="rgba(255, 255, 255, 0)"),this.animateHeatColor(x,b.isColorHex(C)?C:b.rgb2hex(C),b.isColorHex(g)?g:b.rgb2hex(g),S)}}var I=(0,t.config.dataLabels.formatter)(t.globals.series[l][f],{value:t.globals.series[l][f],seriesIndex:l,dataPointIndex:f,w:t}),E=this.helpers.calculateDataLabels({text:I,x:h+a/2,y:o+i/2,i:l,j:f,colorProps:v,series:u});null!==E&&c.add(E),h+=a}o+=i,r.add(c)}var T=t.globals.yAxisScale[0].result.slice();t.config.yaxis[0].reversed?T.unshift(""):T.push(""),t.globals.yAxisScale[0].result=T;var N=t.globals.gridHeight/t.globals.series.length;return t.config.yaxis[0].labels.offsetY=-N/2,r}},{key:"animateHeatMap",value:function(e,t,n,r,a,i){var o=new x(this.ctx);o.animateRect(e,{x:t+r/2,y:n+a/2,width:0,height:0},{x:t,y:n,width:r,height:a},i,(function(){o.animationCompleted(e)}))}},{key:"animateHeatColor",value:function(e,t,n,r){e.attr({fill:t}).animate(r).attr({fill:n})}}]),e}(),Ee=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return l(e,[{key:"drawYAxisTexts",value:function(e,t,n,r){var a=this.w,i=a.config.yaxis[0],o=a.globals.yLabelFormatters[0];return new w(this.ctx).drawText({x:e+i.labels.offsetX,y:t+i.labels.offsetY,text:o(r,n),textAnchor:"middle",fontSize:i.labels.style.fontSize,fontFamily:i.labels.style.fontFamily,foreColor:Array.isArray(i.labels.style.colors)?i.labels.style.colors[n]:i.labels.style.colors})}}]),e}(),Te=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w;var n=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==n.globals.stroke.colors?n.globals.stroke.colors:n.globals.colors,this.defaultSize=Math.min(n.globals.gridWidth,n.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=n.globals.gridWidth/2,"radialBar"===n.config.chart.type?this.fullAngle=360:this.fullAngle=Math.abs(n.config.plotOptions.pie.endAngle-n.config.plotOptions.pie.startAngle),this.initialAngle=n.config.plotOptions.pie.startAngle%this.fullAngle,n.globals.radialSize=this.defaultSize/2.05-n.config.stroke.width-(n.config.chart.sparkline.enabled?0:n.config.chart.dropShadow.blur),this.donutSize=n.globals.radialSize*parseInt(n.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return l(e,[{key:"draw",value:function(e){var t=this,n=this.w,r=new w(this.ctx);if(this.ret=r.group({class:"apexcharts-pie"}),n.globals.noData)return this.ret;for(var a=0,i=0;i<e.length;i++)a+=b.negToZero(e[i]);var o=[],s=r.group();0===a&&(a=1e-5),e.forEach((function(e){t.maxY=Math.max(t.maxY,e)})),n.config.yaxis[0].max&&(this.maxY=n.config.yaxis[0].max),"back"===n.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var u=0;u<e.length;u++){var l=this.fullAngle*b.negToZero(e[u])/a;o.push(l),"polarArea"===this.chartType?(o[u]=this.fullAngle/e.length,this.sliceSizes.push(n.globals.radialSize*e[u]/this.maxY)):this.sliceSizes.push(n.globals.radialSize)}if(n.globals.dataChanged){for(var c,d=0,h=0;h<n.globals.previousPaths.length;h++)d+=b.negToZero(n.globals.previousPaths[h]);for(var p=0;p<n.globals.previousPaths.length;p++)c=this.fullAngle*b.negToZero(n.globals.previousPaths[p])/d,this.prevSectorAngleArr.push(c)}this.donutSize<0&&(this.donutSize=0);var f=n.config.plotOptions.pie.customScale,m=n.globals.gridWidth/2,g=n.globals.gridHeight/2,v=m-n.globals.gridWidth/2*f,y=g-n.globals.gridHeight/2*f;if("donut"===this.chartType){var x=r.drawCircle(this.donutSize);x.attr({cx:this.centerX,cy:this.centerY,fill:n.config.plotOptions.pie.donut.background?n.config.plotOptions.pie.donut.background:"transparent"}),s.add(x)}var A=this.drawArcs(o,e);if(this.sliceLabels.forEach((function(e){A.add(e)})),s.attr({transform:"translate(".concat(v,", ").concat(y,") scale(").concat(f,")")}),s.add(A),this.ret.add(s),this.donutDataLabels.show){var k=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:v,translateY:y});this.ret.add(k)}return"front"===n.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(e,t){var n=this.w,r=new A(this.ctx),a=new w(this.ctx),i=new M(this.ctx),o=a.group({class:"apexcharts-slices"}),s=this.initialAngle,u=this.initialAngle,l=this.initialAngle,c=this.initialAngle;this.strokeWidth=n.config.stroke.show?n.config.stroke.width:0;for(var d=0;d<e.length;d++){var h=a.group({class:"apexcharts-series apexcharts-pie-series",seriesName:b.escapeString(n.globals.seriesNames[d]),rel:d+1,"data:realIndex":d});o.add(h),u=c,l=(s=l)+e[d],c=u+this.prevSectorAngleArr[d];var p=l<s?this.fullAngle+l-s:l-s,f=i.fillPath({seriesNumber:d,size:this.sliceSizes[d],value:t[d]}),m=this.getChangedPath(u,c),g=a.drawPath({d:m,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[d]:this.lineColorArr,strokeWidth:0,fill:f,fillOpacity:n.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(d)});if(g.attr({index:0,j:d}),r.setSelectionFilter(g,0,d),n.config.chart.dropShadow.enabled){var v=n.config.chart.dropShadow;r.dropShadow(g,v,d)}this.addListeners(g,this.donutDataLabels),w.setAttrs(g.node,{"data:angle":p,"data:startAngle":s,"data:strokeWidth":this.strokeWidth,"data:value":t[d]});var y={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?y=b.polarToCartesian(this.centerX,this.centerY,n.globals.radialSize/1.25+n.config.plotOptions.pie.dataLabels.offset,(s+p/2)%this.fullAngle):"donut"===this.chartType&&(y=b.polarToCartesian(this.centerX,this.centerY,(n.globals.radialSize+this.donutSize)/2+n.config.plotOptions.pie.dataLabels.offset,(s+p/2)%this.fullAngle)),h.add(g);var x=0;if(!this.initialAnim||n.globals.resized||n.globals.dataChanged?this.animBeginArr.push(0):(0===(x=p/this.fullAngle*n.config.chart.animations.speed)&&(x=1),this.animDur=x+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&n.globals.dataChanged?this.animatePaths(g,{size:this.sliceSizes[d],endAngle:l,startAngle:s,prevStartAngle:u,prevEndAngle:c,animateStartingPos:!0,i:d,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:n.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(g,{size:this.sliceSizes[d],endAngle:l,startAngle:s,i:d,totalItems:e.length-1,animBeginArr:this.animBeginArr,dur:x}),n.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&g.click(this.pieClicked.bind(this,d)),void 0!==n.globals.selectedDataPoints[0]&&n.globals.selectedDataPoints[0].indexOf(d)>-1&&this.pieClicked(d),n.config.dataLabels.enabled){var k=y.x,S=y.y,C=100*p/this.fullAngle+"%";if(0!==p&&n.config.plotOptions.pie.dataLabels.minAngleToShowLabel<e[d]){var I=n.config.dataLabels.formatter;void 0!==I&&(C=I(n.globals.seriesPercent[d][0],{seriesIndex:d,w:n}));var E=n.globals.dataLabels.style.colors[d],T=a.group({class:"apexcharts-datalabels"}),N=a.drawText({x:k,y:S,text:C,textAnchor:"middle",fontSize:n.config.dataLabels.style.fontSize,fontFamily:n.config.dataLabels.style.fontFamily,fontWeight:n.config.dataLabels.style.fontWeight,foreColor:E});if(T.add(N),n.config.dataLabels.dropShadow.enabled){var _=n.config.dataLabels.dropShadow;r.dropShadow(N,_)}N.node.classList.add("apexcharts-pie-label"),n.config.chart.animations.animate&&!1===n.globals.resized&&(N.node.classList.add("apexcharts-pie-label-delay"),N.node.style.animationDelay=n.config.chart.animations.speed/940+"s"),this.sliceLabels.push(T)}}}return o}},{key:"addListeners",value:function(e,t){var n=new w(this.ctx);e.node.addEventListener("mouseenter",n.pathMouseEnter.bind(this,e)),e.node.addEventListener("mouseleave",n.pathMouseLeave.bind(this,e)),e.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",n.pathMouseDown.bind(this,e)),this.donutDataLabels.total.showAlways||(e.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,e.node,t)),e.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,e.node,t)))}},{key:"animatePaths",value:function(e,t){var n=this.w,r=t.endAngle<t.startAngle?this.fullAngle+t.endAngle-t.startAngle:t.endAngle-t.startAngle,a=r,i=t.startAngle,o=t.startAngle;void 0!==t.prevStartAngle&&void 0!==t.prevEndAngle&&(i=t.prevEndAngle,a=t.prevEndAngle<t.prevStartAngle?this.fullAngle+t.prevEndAngle-t.prevStartAngle:t.prevEndAngle-t.prevStartAngle),t.i===n.config.series.length-1&&(r+o>this.fullAngle?t.endAngle=t.endAngle-(r+o):r+o<this.fullAngle&&(t.endAngle=t.endAngle+(this.fullAngle-(r+o)))),r===this.fullAngle&&(r=this.fullAngle-.01),this.animateArc(e,i,o,r,a,t)}},{key:"animateArc",value:function(e,t,n,r,a,i){var o,s=this,u=this.w,l=new x(this.ctx),c=i.size;(isNaN(t)||isNaN(a))&&(t=n,a=r,i.dur=0);var d=r,h=n,p=t<n?this.fullAngle+t-n:t-n;u.globals.dataChanged&&i.shouldSetPrevPaths&&i.prevEndAngle&&(o=s.getPiePath({me:s,startAngle:i.prevStartAngle,angle:i.prevEndAngle<i.prevStartAngle?this.fullAngle+i.prevEndAngle-i.prevStartAngle:i.prevEndAngle-i.prevStartAngle,size:c}),e.attr({d:o})),0!==i.dur?e.animate(i.dur,u.globals.easing,i.animBeginArr[i.i]).afterAll((function(){"pie"!==s.chartType&&"donut"!==s.chartType&&"polarArea"!==s.chartType||this.animate(u.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":s.strokeWidth}),i.i===u.config.series.length-1&&l.animationCompleted(e)})).during((function(u){d=p+(r-p)*u,i.animateStartingPos&&(d=a+(r-a)*u,h=t-a+(n-(t-a))*u),o=s.getPiePath({me:s,startAngle:h,angle:d,size:c}),e.node.setAttribute("data:pathOrig",o),e.attr({d:o})})):(o=s.getPiePath({me:s,startAngle:h,angle:r,size:c}),i.isTrack||(u.globals.animationEnded=!0),e.node.setAttribute("data:pathOrig",o),e.attr({d:o,"stroke-width":s.strokeWidth}))}},{key:"pieClicked",value:function(e){var t,n=this.w,r=this,a=r.sliceSizes[e]+(n.config.plotOptions.pie.expandOnClick?4:0),i=n.globals.dom.Paper.select(".apexcharts-".concat(r.chartType.toLowerCase(),"-slice-").concat(e)).members[0];if("true"!==i.attr("data:pieClicked")){var o=n.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(o,(function(e){e.setAttribute("data:pieClicked","false");var t=e.getAttribute("data:pathOrig");e.setAttribute("d",t)})),i.attr("data:pieClicked","true");var s=parseInt(i.attr("data:startAngle"),10),u=parseInt(i.attr("data:angle"),10);t=r.getPiePath({me:r,startAngle:s,angle:u,size:a}),360!==u&&i.plot(t)}else{i.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(i.node,this.donutDataLabels);var l=i.attr("data:pathOrig");i.attr({d:l})}}},{key:"getChangedPath",value:function(e,t){var n="";return this.dynamicAnim&&this.w.globals.dataChanged&&(n=this.getPiePath({me:this,startAngle:e,angle:t-e,size:this.size})),n}},{key:"getPiePath",value:function(e){var t=e.me,n=e.startAngle,r=e.angle,a=e.size,i=n,o=Math.PI*(i-90)/180,s=r+n;Math.ceil(s)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(s=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(s)>this.fullAngle&&(s-=this.fullAngle);var u=Math.PI*(s-90)/180,l=t.centerX+a*Math.cos(o),c=t.centerY+a*Math.sin(o),d=t.centerX+a*Math.cos(u),h=t.centerY+a*Math.sin(u),p=b.polarToCartesian(t.centerX,t.centerY,t.donutSize,s),f=b.polarToCartesian(t.centerX,t.centerY,t.donutSize,i),m=r>180?1:0,g=["M",l,c,"A",a,a,0,m,1,d,h];return"donut"===t.chartType?[].concat(g,["L",p.x,p.y,"A",t.donutSize,t.donutSize,0,m,0,f.x,f.y,"L",l,c,"z"]).join(" "):"pie"===t.chartType||"polarArea"===t.chartType?[].concat(g,["L",t.centerX,t.centerY,"L",l,c]).join(" "):[].concat(g).join(" ")}},{key:"drawPolarElements",value:function(e){var t=this.w,n=new J(this.ctx),r=new w(this.ctx),a=new Ee(this.ctx),i=r.group(),o=r.group(),s=n.niceScale(0,Math.ceil(this.maxY),t.config.yaxis[0].tickAmount,0,!0),u=s.result.reverse(),l=s.result.length;this.maxY=s.niceMax;for(var c=t.globals.radialSize,d=c/(l-1),h=0;h<l-1;h++){var p=r.drawCircle(c);if(p.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":t.config.plotOptions.polarArea.rings.strokeWidth,stroke:t.config.plotOptions.polarArea.rings.strokeColor}),t.config.yaxis[0].show){var f=a.drawYAxisTexts(this.centerX,this.centerY-c+parseInt(t.config.yaxis[0].labels.style.fontSize,10)/2,h,u[h]);o.add(f)}i.add(p),c-=d}this.drawSpokes(e),e.add(i),e.add(o)}},{key:"renderInnerDataLabels",value:function(e,t){var n=this.w,r=new w(this.ctx),a=r.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(t.translateX?t.translateX:0,", ").concat(t.translateY?t.translateY:0,") scale(").concat(n.config.plotOptions.pie.customScale,")")}),i=e.total.show;a.node.style.opacity=t.opacity;var o,s,u=t.centerX,l=t.centerY;o=void 0===e.name.color?n.globals.colors[0]:e.name.color;var c=e.name.fontSize,d=e.name.fontFamily,h=e.name.fontWeight;s=void 0===e.value.color?n.config.chart.foreColor:e.value.color;var p=e.value.formatter,f="",m="";if(i?(o=e.total.color,c=e.total.fontSize,d=e.total.fontFamily,h=e.total.fontWeight,m=e.total.label,f=e.total.formatter(n)):1===n.globals.series.length&&(f=p(n.globals.series[0],n),m=n.globals.seriesNames[0]),m&&(m=e.name.formatter(m,e.total.show,n)),e.name.show){var g=r.drawText({x:u,y:l+parseFloat(e.name.offsetY),text:m,textAnchor:"middle",foreColor:o,fontSize:c,fontWeight:h,fontFamily:d});g.node.classList.add("apexcharts-datalabel-label"),a.add(g)}if(e.value.show){var v=e.name.show?parseFloat(e.value.offsetY)+16:e.value.offsetY,y=r.drawText({x:u,y:l+v,text:f,textAnchor:"middle",foreColor:s,fontWeight:e.value.fontWeight,fontSize:e.value.fontSize,fontFamily:e.value.fontFamily});y.node.classList.add("apexcharts-datalabel-value"),a.add(y)}return a}},{key:"printInnerLabels",value:function(e,t,n,r){var a,i=this.w;r?a=void 0===e.name.color?i.globals.colors[parseInt(r.parentNode.getAttribute("rel"),10)-1]:e.name.color:i.globals.series.length>1&&e.total.show&&(a=e.total.color);var o=i.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),s=i.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");n=(0,e.value.formatter)(n,i),r||"function"!=typeof e.total.formatter||(n=e.total.formatter(i));var u=t===e.total.label;t=e.name.formatter(t,u,i),null!==o&&(o.textContent=t),null!==s&&(s.textContent=n),null!==o&&(o.style.fill=a)}},{key:"printDataLabelsInner",value:function(e,t){var n=this.w,r=e.getAttribute("data:value"),a=n.globals.seriesNames[parseInt(e.parentNode.getAttribute("rel"),10)-1];n.globals.series.length>1&&this.printInnerLabels(t,a,r,e);var i=n.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==i&&(i.style.opacity=1)}},{key:"drawSpokes",value:function(e){var t=this,n=this.w,r=new w(this.ctx),a=n.config.plotOptions.polarArea.spokes;if(0!==a.strokeWidth){for(var i=[],o=360/n.globals.series.length,s=0;s<n.globals.series.length;s++)i.push(b.polarToCartesian(this.centerX,this.centerY,n.globals.radialSize,n.config.plotOptions.pie.startAngle+o*s));i.forEach((function(n,i){var o=r.drawLine(n.x,n.y,t.centerX,t.centerY,Array.isArray(a.connectorColors)?a.connectorColors[i]:a.connectorColors);e.add(o)}))}}},{key:"revertDataLabelsInner",value:function(e,t,n){var r=this,a=this.w,i=a.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),o=!1,s=a.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),u=function(e){var n=e.makeSliceOut,a=e.printLabel;Array.prototype.forEach.call(s,(function(e){"true"===e.getAttribute("data:pieClicked")&&(n&&(o=!0),a&&r.printDataLabelsInner(e,t))}))};if(u({makeSliceOut:!0,printLabel:!1}),t.total.show&&a.globals.series.length>1)o&&!t.total.showAlways?u({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(t,t.total.label,t.total.formatter(a));else if(u({makeSliceOut:!1,printLabel:!0}),!o)if(a.globals.selectedDataPoints.length&&a.globals.series.length>1)if(a.globals.selectedDataPoints[0].length>0){var l=a.globals.selectedDataPoints[0],c=a.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(l));this.printDataLabelsInner(c,t)}else i&&a.globals.selectedDataPoints.length&&0===a.globals.selectedDataPoints[0].length&&(i.style.opacity=0);else i&&a.globals.series.length>1&&(i.style.opacity=0)}}]),e}(),Ne=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var n=this.w;this.graphics=new w(this.ctx),this.lineColorArr=void 0!==n.globals.stroke.colors?n.globals.stroke.colors:n.globals.colors,this.defaultSize=n.globals.svgHeight<n.globals.svgWidth?n.globals.gridHeight+1.5*n.globals.goldenPadding:n.globals.gridWidth,this.isLog=n.config.yaxis[0].logarithmic,this.coreUtils=new k(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(n.globals.maxY,0):n.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):n.globals.minY,this.polygons=n.config.plotOptions.radar.polygons,this.strokeWidth=n.config.stroke.show?n.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-n.config.chart.dropShadow.blur,n.config.xaxis.labels.show&&(this.size=this.size-n.globals.xAxisLabelsWidth/1.75),void 0!==n.config.plotOptions.radar.size&&(this.size=n.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return l(e,[{key:"draw",value:function(e){var t=this,n=this.w,r=new M(this.ctx),a=[],o=new P(this.ctx);e.length&&(this.dataPointsLen=e[n.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var s=n.globals.gridWidth/2,u=n.globals.gridHeight/2,l=s+n.config.plotOptions.radar.offsetX,c=u+n.config.plotOptions.radar.offsetY,d=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(l||0,", ").concat(c||0,")")}),h=[],p=null,f=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),e.forEach((function(e,s){var u=e.length===n.globals.dataPoints,l=t.graphics.group().attr({class:"apexcharts-series","data:longestSeries":u,seriesName:b.escapeString(n.globals.seriesNames[s]),rel:s+1,"data:realIndex":s});t.dataRadiusOfPercent[s]=[],t.dataRadius[s]=[],t.angleArr[s]=[],e.forEach((function(e,n){var r=Math.abs(t.maxValue-t.minValue);e+=Math.abs(t.minValue),t.isLog&&(e=t.coreUtils.getLogVal(e,0)),t.dataRadiusOfPercent[s][n]=e/r,t.dataRadius[s][n]=t.dataRadiusOfPercent[s][n]*t.size,t.angleArr[s][n]=n*t.disAngle})),h=t.getDataPointsPos(t.dataRadius[s],t.angleArr[s]);var c=t.createPaths(h,{x:0,y:0});p=t.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),f=t.graphics.group({class:"apexcharts-datalabels","data:realIndex":s}),n.globals.delayedElements.push({el:p.node,index:s});var d={i:s,realIndex:s,animationDelay:s,initialSpeed:n.config.chart.animations.speed,dataChangeSpeed:n.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:n.globals.stroke.colors[s],strokeLineCap:n.config.stroke.lineCap},m=null;n.globals.previousPaths.length>0&&(m=t.getPreviousPath(s));for(var g=0;g<c.linePathsTo.length;g++){var v=t.graphics.renderPaths(i(i({},d),{},{pathFrom:null===m?c.linePathsFrom[g]:m,pathTo:c.linePathsTo[g],strokeWidth:Array.isArray(t.strokeWidth)?t.strokeWidth[s]:t.strokeWidth,fill:"none",drawShadow:!1}));l.add(v);var y=r.fillPath({seriesNumber:s}),x=t.graphics.renderPaths(i(i({},d),{},{pathFrom:null===m?c.areaPathsFrom[g]:m,pathTo:c.areaPathsTo[g],strokeWidth:0,fill:y,drawShadow:!1}));if(n.config.chart.dropShadow.enabled){var w=new A(t.ctx),k=n.config.chart.dropShadow;w.dropShadow(x,Object.assign({},k,{noUserSpaceOnUse:!0}),s)}l.add(x)}e.forEach((function(e,r){var a=new R(t.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:s,dataPointIndex:r}),u=t.graphics.drawMarker(h[r].x,h[r].y,a);u.attr("rel",r),u.attr("j",r),u.attr("index",s),u.node.setAttribute("default-marker-size",a.pSize);var c=t.graphics.group({class:"apexcharts-series-markers"});c&&c.add(u),p.add(c),l.add(p);var d=n.config.dataLabels;if(d.enabled){var m=d.formatter(n.globals.series[s][r],{seriesIndex:s,dataPointIndex:r,w:n});o.plotDataLabelsText({x:h[r].x,y:h[r].y,text:m,textAnchor:"middle",i:s,j:s,parent:f,offsetCorrection:!1,dataLabelsConfig:i({},d)})}l.add(f)})),a.push(l)})),this.drawPolygons({parent:d}),n.config.xaxis.labels.show){var m=this.drawXAxisTexts();d.add(m)}return a.forEach((function(e){d.add(e)})),d.add(this.yaxisLabels),d}},{key:"drawPolygons",value:function(e){for(var t=this,n=this.w,r=e.parent,a=new Ee(this.ctx),i=n.globals.yAxisScale[0].result.reverse(),o=i.length,s=[],u=this.size/(o-1),l=0;l<o;l++)s[l]=u*l;s.reverse();var c=[],d=[];s.forEach((function(e,n){var r=b.getPolygonPos(e,t.dataPointsLen),a="";r.forEach((function(e,r){if(0===n){var i=t.graphics.drawLine(e.x,e.y,0,0,Array.isArray(t.polygons.connectorColors)?t.polygons.connectorColors[r]:t.polygons.connectorColors);d.push(i)}0===r&&t.yaxisLabelsTextsPos.push({x:e.x,y:e.y}),a+=e.x+","+e.y+" "})),c.push(a)})),c.forEach((function(e,a){var i=t.polygons.strokeColors,o=t.polygons.strokeWidth,s=t.graphics.drawPolygon(e,Array.isArray(i)?i[a]:i,Array.isArray(o)?o[a]:o,n.globals.radarPolygons.fill.colors[a]);r.add(s)})),d.forEach((function(e){r.add(e)})),n.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach((function(e,n){var r=a.drawYAxisTexts(e.x,e.y,n,i[n]);t.yaxisLabels.add(r)}))}},{key:"drawXAxisTexts",value:function(){var e=this,t=this.w,n=t.config.xaxis.labels,r=this.graphics.group({class:"apexcharts-xaxis"}),a=b.getPolygonPos(this.size,this.dataPointsLen);return t.globals.labels.forEach((function(o,s){var u=t.config.xaxis.labels.formatter,l=new P(e.ctx);if(a[s]){var c=e.getTextPos(a[s],e.size),d=u(o,{seriesIndex:-1,dataPointIndex:s,w:t});l.plotDataLabelsText({x:c.newX,y:c.newY,text:d,textAnchor:c.textAnchor,i:s,j:s,parent:r,color:Array.isArray(n.style.colors)&&n.style.colors[s]?n.style.colors[s]:"#a8a8a8",dataLabelsConfig:i({textAnchor:c.textAnchor,dropShadow:{enabled:!1}},n),offsetCorrection:!1})}})),r}},{key:"createPaths",value:function(e,t){var n=this,r=[],a=[],i=[],o=[];if(e.length){a=[this.graphics.move(t.x,t.y)],o=[this.graphics.move(t.x,t.y)];var s=this.graphics.move(e[0].x,e[0].y),u=this.graphics.move(e[0].x,e[0].y);e.forEach((function(t,r){s+=n.graphics.line(t.x,t.y),u+=n.graphics.line(t.x,t.y),r===e.length-1&&(s+="Z",u+="Z")})),r.push(s),i.push(u)}return{linePathsFrom:a,linePathsTo:r,areaPathsFrom:o,areaPathsTo:i}}},{key:"getTextPos",value:function(e,t){var n="middle",r=e.x,a=e.y;return Math.abs(e.x)>=10?e.x>0?(n="start",r+=10):e.x<0&&(n="end",r-=10):n="middle",Math.abs(e.y)>=t-10&&(e.y<0?a-=10:e.y>0&&(a+=10)),{textAnchor:n,newX:r,newY:a}}},{key:"getPreviousPath",value:function(e){for(var t=this.w,n=null,r=0;r<t.globals.previousPaths.length;r++){var a=t.globals.previousPaths[r];a.paths.length>0&&parseInt(a.realIndex,10)===parseInt(e,10)&&void 0!==t.globals.previousPaths[r].paths[0]&&(n=t.globals.previousPaths[r].paths[0].d)}return n}},{key:"getDataPointsPos",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;e=e||[],t=t||[];for(var r=[],a=0;a<n;a++){var i={};i.x=e[a]*Math.sin(t[a]),i.y=-e[a]*Math.cos(t[a]),r.push(i)}return r}}]),e}(),_e=function(e){d(n,Te);var t=m(n);function n(e){var r;s(this,n),(r=t.call(this,e)).ctx=e,r.w=e.w,r.animBeginArr=[0],r.animDur=0;var a=r.w;return r.startAngle=a.config.plotOptions.radialBar.startAngle,r.endAngle=a.config.plotOptions.radialBar.endAngle,r.totalAngle=Math.abs(a.config.plotOptions.radialBar.endAngle-a.config.plotOptions.radialBar.startAngle),r.trackStartAngle=a.config.plotOptions.radialBar.track.startAngle,r.trackEndAngle=a.config.plotOptions.radialBar.track.endAngle,r.donutDataLabels=r.w.config.plotOptions.radialBar.dataLabels,r.radialDataLabels=r.donutDataLabels,r.trackStartAngle||(r.trackStartAngle=r.startAngle),r.trackEndAngle||(r.trackEndAngle=r.endAngle),360===r.endAngle&&(r.endAngle=359.99),r.margin=parseInt(a.config.plotOptions.radialBar.track.margin,10),r}return l(n,[{key:"draw",value:function(e){var t=this.w,n=new w(this.ctx),r=n.group({class:"apexcharts-radialbar"});if(t.globals.noData)return r;var a=n.group(),i=this.defaultSize/2,o=t.globals.gridWidth/2,s=this.defaultSize/2.05;t.config.chart.sparkline.enabled||(s=s-t.config.stroke.width-t.config.chart.dropShadow.blur);var u=t.globals.fill.colors;if(t.config.plotOptions.radialBar.track.show){var l=this.drawTracks({size:s,centerX:o,centerY:i,colorArr:u,series:e});a.add(l)}var c=this.drawArcs({size:s,centerX:o,centerY:i,colorArr:u,series:e}),d=360;t.config.plotOptions.radialBar.startAngle<0&&(d=this.totalAngle);var h=(360-d)/360;if(t.globals.radialSize=s-s*h,this.radialDataLabels.value.show){var p=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);t.globals.radialSize+=p*h}return a.add(c.g),"front"===t.config.plotOptions.radialBar.hollow.position&&(c.g.add(c.elHollow),c.dataLabels&&c.g.add(c.dataLabels)),r.add(a),r}},{key:"drawTracks",value:function(e){var t=this.w,n=new w(this.ctx),r=n.group({class:"apexcharts-tracks"}),a=new A(this.ctx),i=new M(this.ctx),o=this.getStrokeWidth(e);e.size=e.size-o/2;for(var s=0;s<e.series.length;s++){var u=n.group({class:"apexcharts-radialbar-track apexcharts-track"});r.add(u),u.attr({rel:s+1}),e.size=e.size-o-this.margin;var l=t.config.plotOptions.radialBar.track,c=i.fillPath({seriesNumber:0,size:e.size,fillColors:Array.isArray(l.background)?l.background[s]:l.background,solid:!0}),d=this.trackStartAngle,h=this.trackEndAngle;Math.abs(h)+Math.abs(d)>=360&&(h=360-Math.abs(this.startAngle)-.1);var p=n.drawPath({d:"",stroke:c,strokeWidth:o*parseInt(l.strokeWidth,10)/100,fill:"none",strokeOpacity:l.opacity,classes:"apexcharts-radialbar-area"});if(l.dropShadow.enabled){var f=l.dropShadow;a.dropShadow(p,f)}u.add(p),p.attr("id","apexcharts-radialbarTrack-"+s),this.animatePaths(p,{centerX:e.centerX,centerY:e.centerY,endAngle:h,startAngle:d,size:e.size,i:s,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:t.globals.easing})}return r}},{key:"drawArcs",value:function(e){var t=this.w,n=new w(this.ctx),r=new M(this.ctx),a=new A(this.ctx),i=n.group(),o=this.getStrokeWidth(e);e.size=e.size-o/2;var s=t.config.plotOptions.radialBar.hollow.background,u=e.size-o*e.series.length-this.margin*e.series.length-o*parseInt(t.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,l=u-t.config.plotOptions.radialBar.hollow.margin;void 0!==t.config.plotOptions.radialBar.hollow.image&&(s=this.drawHollowImage(e,i,u,s));var c=this.drawHollow({size:l,centerX:e.centerX,centerY:e.centerY,fill:s||"transparent"});if(t.config.plotOptions.radialBar.hollow.dropShadow.enabled){var d=t.config.plotOptions.radialBar.hollow.dropShadow;a.dropShadow(c,d)}var h=1;!this.radialDataLabels.total.show&&t.globals.series.length>1&&(h=0);var p=null;this.radialDataLabels.show&&(p=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:u,centerX:e.centerX,centerY:e.centerY,opacity:h})),"back"===t.config.plotOptions.radialBar.hollow.position&&(i.add(c),p&&i.add(p));var f=!1;t.config.plotOptions.radialBar.inverseOrder&&(f=!0);for(var m=f?e.series.length-1:0;f?m>=0:m<e.series.length;f?m--:m++){var g=n.group({class:"apexcharts-series apexcharts-radial-series",seriesName:b.escapeString(t.globals.seriesNames[m])});i.add(g),g.attr({rel:m+1,"data:realIndex":m}),this.ctx.series.addCollapsedClassToSeries(g,m),e.size=e.size-o-this.margin;var v=r.fillPath({seriesNumber:m,size:e.size,value:e.series[m]}),y=this.startAngle,x=void 0,k=b.negToZero(e.series[m]>100?100:e.series[m])/100,S=Math.round(this.totalAngle*k)+this.startAngle,C=void 0;t.globals.dataChanged&&(x=this.startAngle,C=Math.round(this.totalAngle*b.negToZero(t.globals.previousPaths[m])/100)+x),Math.abs(S)+Math.abs(y)>=360&&(S-=.01),Math.abs(C)+Math.abs(x)>=360&&(C-=.01);var I=S-y,E=Array.isArray(t.config.stroke.dashArray)?t.config.stroke.dashArray[m]:t.config.stroke.dashArray,T=n.drawPath({d:"",stroke:v,strokeWidth:o,fill:"none",fillOpacity:t.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+m,strokeDashArray:E});if(w.setAttrs(T.node,{"data:angle":I,"data:value":e.series[m]}),t.config.chart.dropShadow.enabled){var N=t.config.chart.dropShadow;a.dropShadow(T,N,m)}a.setSelectionFilter(T,0,m),this.addListeners(T,this.radialDataLabels),g.add(T),T.attr({index:0,j:m});var _=0;!this.initialAnim||t.globals.resized||t.globals.dataChanged||(_=t.config.chart.animations.speed),t.globals.dataChanged&&(_=t.config.chart.animations.dynamicAnimation.speed),this.animDur=_/(1.2*e.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(T,{centerX:e.centerX,centerY:e.centerY,endAngle:S,startAngle:y,prevEndAngle:C,prevStartAngle:x,size:e.size,i:m,totalItems:2,animBeginArr:this.animBeginArr,dur:_,shouldSetPrevPaths:!0,easing:t.globals.easing})}return{g:i,elHollow:c,dataLabels:p}}},{key:"drawHollow",value:function(e){var t=new w(this.ctx).drawCircle(2*e.size);return t.attr({class:"apexcharts-radialbar-hollow",cx:e.centerX,cy:e.centerY,r:e.size,fill:e.fill}),t}},{key:"drawHollowImage",value:function(e,t,n,r){var a=this.w,i=new M(this.ctx),o=b.randomId(),s=a.config.plotOptions.radialBar.hollow.image;if(a.config.plotOptions.radialBar.hollow.imageClipped)i.clippedImgArea({width:n,height:n,image:s,patternID:"pattern".concat(a.globals.cuid).concat(o)}),r="url(#pattern".concat(a.globals.cuid).concat(o,")");else{var u=a.config.plotOptions.radialBar.hollow.imageWidth,l=a.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===u&&void 0===l){var c=a.globals.dom.Paper.image(s).loaded((function(t){this.move(e.centerX-t.width/2+a.config.plotOptions.radialBar.hollow.imageOffsetX,e.centerY-t.height/2+a.config.plotOptions.radialBar.hollow.imageOffsetY)}));t.add(c)}else{var d=a.globals.dom.Paper.image(s).loaded((function(t){this.move(e.centerX-u/2+a.config.plotOptions.radialBar.hollow.imageOffsetX,e.centerY-l/2+a.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(u,l)}));t.add(d)}}return r}},{key:"getStrokeWidth",value:function(e){var t=this.w;return e.size*(100-parseInt(t.config.plotOptions.radialBar.hollow.size,10))/100/(e.series.length+1)-this.margin}}]),n}(),Me=function(){function e(t){s(this,e),this.w=t.w,this.lineCtx=t}return l(e,[{key:"sameValueSeriesFix",value:function(e,t){var n=this.w;if("line"===n.config.chart.type&&("gradient"===n.config.fill.type||"gradient"===n.config.fill.type[e])&&new k(this.lineCtx.ctx,n).seriesHaveSameValues(e)){var r=t[e].slice();r[r.length-1]=r[r.length-1]+1e-6,t[e]=r}return t}},{key:"calculatePoints",value:function(e){var t=e.series,n=e.realIndex,r=e.x,a=e.y,i=e.i,o=e.j,s=e.prevY,u=this.w,l=[],c=[];if(0===o){var d=this.lineCtx.categoryAxisCorrection+u.config.markers.offsetX;u.globals.isXNumeric&&(d=(u.globals.seriesX[n][0]-u.globals.minX)/this.lineCtx.xRatio+u.config.markers.offsetX),l.push(d),c.push(b.isNumber(t[i][0])?s+u.config.markers.offsetY:null),l.push(r+u.config.markers.offsetX),c.push(b.isNumber(t[i][o+1])?a+u.config.markers.offsetY:null)}else l.push(r+u.config.markers.offsetX),c.push(b.isNumber(t[i][o+1])?a+u.config.markers.offsetY:null);return{x:l,y:c}}},{key:"checkPreviousPaths",value:function(e){for(var t=e.pathFromLine,n=e.pathFromArea,r=e.realIndex,a=this.w,i=0;i<a.globals.previousPaths.length;i++){var o=a.globals.previousPaths[i];("line"===o.type||"area"===o.type)&&o.paths.length>0&&parseInt(o.realIndex,10)===parseInt(r,10)&&("line"===o.type?(this.lineCtx.appendPathFrom=!1,t=a.globals.previousPaths[i].paths[0].d):"area"===o.type&&(this.lineCtx.appendPathFrom=!1,n=a.globals.previousPaths[i].paths[0].d,a.config.stroke.show&&a.globals.previousPaths[i].paths[1]&&(t=a.globals.previousPaths[i].paths[1].d)))}return{pathFromLine:t,pathFromArea:n}}},{key:"determineFirstPrevY",value:function(e){var t=e.i,n=e.series,r=e.prevY,a=e.lineYPosition,i=this.w;if(void 0!==n[t][0])r=(a=i.config.chart.stacked&&t>0?this.lineCtx.prevSeriesY[t-1][0]:this.lineCtx.zeroY)-n[t][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?n[t][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(i.config.chart.stacked&&t>0&&void 0===n[t][0])for(var o=t-1;o>=0;o--)if(null!==n[o][0]&&void 0!==n[o][0]){r=a=this.lineCtx.prevSeriesY[o][0];break}return{prevY:r,lineYPosition:a}}}]),e}(),Re=function(){function e(t,n,r){s(this,e),this.ctx=t,this.w=t.w,this.xyRatios=n,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||r,this.scatter=new O(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Me(this),this.markers=new R(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return l(e,[{key:"draw",value:function(e,t,n){var r=this.w,a=new w(this.ctx),i=r.globals.comboCharts?t:r.config.chart.type,o=a.group({class:"apexcharts-".concat(i,"-series apexcharts-plot-series")}),s=new k(this.ctx,r);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,e=s.getLogSeries(e),this.yRatio=s.getLogYRatios(this.yRatio);for(var u=[],l=0;l<e.length;l++){e=this.lineHelpers.sameValueSeriesFix(l,e);var c=r.globals.comboCharts?n[l]:l;this._initSerieVariables(e,l,c);var d=[],h=[],p=r.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,c),r.globals.isXNumeric&&r.globals.seriesX.length>0&&(p=(r.globals.seriesX[c][0]-r.globals.minX)/this.xRatio),h.push(p);var f,m=p,g=m,v=this.zeroY;v=this.lineHelpers.determineFirstPrevY({i:l,series:e,prevY:v,lineYPosition:0}).prevY,d.push(v),f=v;var y=this._calculatePathsFrom({series:e,i:l,realIndex:c,prevX:g,prevY:v}),b=this._iterateOverDataPoints({series:e,realIndex:c,i:l,x:p,y:1,pX:m,pY:f,pathsFrom:y,linePaths:[],areaPaths:[],seriesIndex:n,lineYPosition:0,xArrj:h,yArrj:d});this._handlePaths({type:i,realIndex:c,i:l,paths:b}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),u.push(this.elSeries)}if(r.config.chart.stacked)for(var x=u.length;x>0;x--)o.add(u[x-1]);else for(var A=0;A<u.length;A++)o.add(u[A]);return o}},{key:"_initSerieVariables",value:function(e,t,n){var r=this.w,a=new w(this.ctx);this.xDivision=r.globals.gridWidth/(r.globals.dataPoints-("on"===r.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(r.config.stroke.width)?r.config.stroke.width[n]:r.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=n),this.isReversed=r.config.yaxis[this.yaxisIndex]&&r.config.yaxis[this.yaxisIndex].reversed,this.zeroY=r.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?r.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>r.globals.gridHeight||"end"===r.config.plotOptions.area.fillTo)&&(this.areaBottomY=r.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=a.group({class:"apexcharts-series",seriesName:b.escapeString(r.globals.seriesNames[n])}),this.elPointsMain=a.group({class:"apexcharts-series-markers-wrap","data:realIndex":n}),this.elDataLabelsWrap=a.group({class:"apexcharts-datalabels","data:realIndex":n});var i=e[t].length===r.globals.dataPoints;this.elSeries.attr({"data:longestSeries":i,rel:t+1,"data:realIndex":n}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(e){var t,n,r,a,i=e.series,o=e.i,s=e.realIndex,u=e.prevX,l=e.prevY,c=this.w,d=new w(this.ctx);if(null===i[o][0]){for(var h=0;h<i[o].length;h++)if(null!==i[o][h]){u=this.xDivision*h,l=this.zeroY-i[o][h]/this.yRatio[this.yaxisIndex],t=d.move(u,l),n=d.move(u,this.areaBottomY);break}}else t=d.move(u,l),n=d.move(u,this.areaBottomY)+d.line(u,l);if(r=d.move(-1,this.zeroY)+d.line(-1,this.zeroY),a=d.move(-1,this.zeroY)+d.line(-1,this.zeroY),c.globals.previousPaths.length>0){var p=this.lineHelpers.checkPreviousPaths({pathFromLine:r,pathFromArea:a,realIndex:s});r=p.pathFromLine,a=p.pathFromArea}return{prevX:u,prevY:l,linePath:t,areaPath:n,pathFromLine:r,pathFromArea:a}}},{key:"_handlePaths",value:function(e){var t=e.type,n=e.realIndex,r=e.i,a=e.paths,o=this.w,s=new w(this.ctx),u=new M(this.ctx);this.prevSeriesY.push(a.yArrj),o.globals.seriesXvalues[n]=a.xArrj,o.globals.seriesYvalues[n]=a.yArrj;var l=o.config.forecastDataPoints;if(l.count>0){var c=o.globals.seriesXvalues[n][o.globals.seriesXvalues[n].length-l.count-1],d=s.drawRect(c,0,o.globals.gridWidth,o.globals.gridHeight,0);o.globals.dom.elForecastMask.appendChild(d.node);var h=s.drawRect(0,0,c,o.globals.gridHeight,0);o.globals.dom.elNonForecastMask.appendChild(h.node)}this.pointsChart||o.globals.delayedElements.push({el:this.elPointsMain.node,index:n});var p={i:r,realIndex:n,animationDelay:r,initialSpeed:o.config.chart.animations.speed,dataChangeSpeed:o.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(t)};if("area"===t)for(var f=u.fillPath({seriesNumber:n}),m=0;m<a.areaPaths.length;m++){var g=s.renderPaths(i(i({},p),{},{pathFrom:a.pathFromArea,pathTo:a.areaPaths[m],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:f}));this.elSeries.add(g)}if(o.config.stroke.show&&!this.pointsChart){var v=null;if("line"===t)v=u.fillPath({seriesNumber:n,i:r});else if("solid"===o.config.stroke.fill.type)v=o.globals.stroke.colors[n];else{var y=o.config.fill;o.config.fill=o.config.stroke.fill,v=u.fillPath({seriesNumber:n,i:r}),o.config.fill=y}for(var b=0;b<a.linePaths.length;b++){var x=i(i({},p),{},{pathFrom:a.pathFromLine,pathTo:a.linePaths[b],stroke:v,strokeWidth:this.strokeWidth,strokeLineCap:o.config.stroke.lineCap,fill:"none"}),A=s.renderPaths(x);if(this.elSeries.add(A),l.count>0){var k=s.renderPaths(x);k.node.setAttribute("stroke-dasharray",l.dashArray),l.strokeWidth&&k.node.setAttribute("stroke-width",l.strokeWidth),this.elSeries.add(k),k.attr("clip-path","url(#forecastMask".concat(o.globals.cuid,")")),A.attr("clip-path","url(#nonForecastMask".concat(o.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(e){for(var t=e.series,n=e.realIndex,r=e.i,a=e.x,i=e.y,o=e.pX,s=e.pY,u=e.pathsFrom,l=e.linePaths,c=e.areaPaths,d=e.seriesIndex,h=e.lineYPosition,p=e.xArrj,f=e.yArrj,m=this.w,g=new w(this.ctx),v=this.yRatio,y=u.prevY,x=u.linePath,A=u.areaPath,k=u.pathFromLine,S=u.pathFromArea,C=b.isNumber(m.globals.minYArr[n])?m.globals.minYArr[n]:m.globals.minY,I=m.globals.dataPoints>1?m.globals.dataPoints-1:m.globals.dataPoints,E=0;E<I;E++){var T=void 0===t[r][E+1]||null===t[r][E+1];if(m.globals.isXNumeric){var N=m.globals.seriesX[n][E+1];void 0===m.globals.seriesX[n][E+1]&&(N=m.globals.seriesX[n][I-1]),a=(N-m.globals.minX)/this.xRatio}else a+=this.xDivision;h=m.config.chart.stacked&&r>0&&m.globals.collapsedSeries.length<m.config.series.length-1?this.prevSeriesY[function(e){for(var t=e,n=0;n<m.globals.series.length;n++)if(m.globals.collapsedSeriesIndices.indexOf(e)>-1){t--;break}return t>=0?t:0}(r-1)][E+1]:this.zeroY,i=T?h-C/v[this.yaxisIndex]+2*(this.isReversed?C/v[this.yaxisIndex]:0):h-t[r][E+1]/v[this.yaxisIndex]+2*(this.isReversed?t[r][E+1]/v[this.yaxisIndex]:0),p.push(a),f.push(i);var _=this.lineHelpers.calculatePoints({series:t,x:a,y:i,realIndex:n,i:r,j:E,prevY:y}),M=this._createPaths({series:t,i:r,realIndex:n,j:E,x:a,y:i,pX:o,pY:s,linePath:x,areaPath:A,linePaths:l,areaPaths:c,seriesIndex:d});c=M.areaPaths,l=M.linePaths,o=M.pX,s=M.pY,A=M.areaPath,x=M.linePath,this.appendPathFrom&&(k+=g.line(a,this.zeroY),S+=g.line(a,this.zeroY)),this.handleNullDataPoints(t,_,r,E,n),this._handleMarkersAndLabels({pointsPos:_,series:t,x:a,y:i,prevY:y,i:r,j:E,realIndex:n})}return{yArrj:f,xArrj:p,pathFromArea:S,areaPaths:c,pathFromLine:k,linePaths:l}}},{key:"_handleMarkersAndLabels",value:function(e){var t=e.pointsPos;e.series,e.x,e.y,e.prevY;var n=e.i,r=e.j,a=e.realIndex,i=this.w,o=new P(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,r,{realIndex:a,pointsPos:t,zRatio:this.zRatio,elParent:this.elPointsMain});else{i.globals.series[n].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var s=this.markers.plotChartMarkers(t,a,r+1);null!==s&&this.elPointsMain.add(s)}var u=o.drawDataLabel(t,a,r+1,null);null!==u&&this.elDataLabelsWrap.add(u)}},{key:"_createPaths",value:function(e){var t=e.series,n=e.i,r=e.realIndex,a=e.j,i=e.x,o=e.y,s=e.pX,u=e.pY,l=e.linePath,c=e.areaPath,d=e.linePaths,h=e.areaPaths,p=e.seriesIndex,f=this.w,m=new w(this.ctx),g=f.config.stroke.curve,v=this.areaBottomY;if(Array.isArray(f.config.stroke.curve)&&(g=Array.isArray(p)?f.config.stroke.curve[p[n]]:f.config.stroke.curve[n]),"smooth"===g){var y=.35*(i-s);f.globals.hasNullValues?(null!==t[n][a]&&(null!==t[n][a+1]?(l=m.move(s,u)+m.curve(s+y,u,i-y,o,i+1,o),c=m.move(s+1,u)+m.curve(s+y,u,i-y,o,i+1,o)+m.line(i,v)+m.line(s,v)+"z"):(l=m.move(s,u),c=m.move(s,u)+"z")),d.push(l),h.push(c)):(l+=m.curve(s+y,u,i-y,o,i,o),c+=m.curve(s+y,u,i-y,o,i,o)),s=i,u=o,a===t[n].length-2&&(c=c+m.curve(s,u,i,o,i,v)+m.move(i,o)+"z",f.globals.hasNullValues||(d.push(l),h.push(c)))}else{if(null===t[n][a+1]){l+=m.move(i,o);var b=f.globals.isXNumeric?(f.globals.seriesX[r][a]-f.globals.minX)/this.xRatio:i-this.xDivision;c=c+m.line(b,v)+m.move(i,o)+"z"}null===t[n][a]&&(l+=m.move(i,o),c+=m.move(i,v)),"stepline"===g?(l=l+m.line(i,null,"H")+m.line(null,o,"V"),c=c+m.line(i,null,"H")+m.line(null,o,"V")):"straight"===g&&(l+=m.line(i,o),c+=m.line(i,o)),a===t[n].length-2&&(c=c+m.line(i,v)+m.move(i,o)+"z",d.push(l),h.push(c))}return{linePaths:d,areaPaths:h,pX:s,pY:u,linePath:l,areaPath:c}}},{key:"handleNullDataPoints",value:function(e,t,n,r,a){var i=this.w;if(null===e[n][r]&&i.config.markers.showNullDataPoints||1===e[n].length){var o=this.markers.plotChartMarkers(t,a,r+1,this.strokeWidth-i.config.markers.strokeWidth/2,!0);null!==o&&this.elPointsMain.add(o)}}}]),e}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function e(t,n,r,a){this.xoffset=t,this.yoffset=n,this.height=a,this.width=r,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(e){var t,n=[],r=this.xoffset,a=this.yoffset,o=i(e)/this.height,s=i(e)/this.width;if(this.width>=this.height)for(t=0;t<e.length;t++)n.push([r,a,r+o,a+e[t]/o]),a+=e[t]/o;else for(t=0;t<e.length;t++)n.push([r,a,r+e[t]/s,a+s]),r+=e[t]/s;return n},this.cutArea=function(t){var n;if(this.width>=this.height){var r=t/this.height,a=this.width-r;n=new e(this.xoffset+r,this.yoffset,a,this.height)}else{var i=t/this.width,o=this.height-i;n=new e(this.xoffset,this.yoffset+i,this.width,o)}return n}}function t(t,r,a,o,s){return o=void 0===o?0:o,s=void 0===s?0:s,function(e){var t,n,r=[];for(t=0;t<e.length;t++)for(n=0;n<e[t].length;n++)r.push(e[t][n]);return r}(n(function(e,t){var n,r=[],a=t/i(e);for(n=0;n<e.length;n++)r[n]=e[n]*a;return r}(t,r*a),[],new e(o,s,r,a),[]))}function n(e,t,a,o){var s,u,l;if(0!==e.length)return s=a.shortestEdge(),function(e,t,n){var a;return 0===e.length||((a=e.slice()).push(t),r(e,n)>=r(a,n))}(t,u=e[0],s)?(t.push(u),n(e.slice(1),t,a,o)):(l=a.cutArea(i(t),o),o.push(a.getCoordinates(t)),n(e,[],l,o)),o;o.push(a.getCoordinates(t))}function r(e,t){var n=Math.min.apply(Math,e),r=Math.max.apply(Math,e),a=i(e);return Math.max(Math.pow(t,2)*r/Math.pow(a,2),Math.pow(a,2)/(Math.pow(t,2)*n))}function a(e){return e&&e.constructor===Array}function i(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t];return n}function o(e){var t,n=0;if(a(e[0]))for(t=0;t<e.length;t++)n+=o(e[t]);else n=i(e);return n}return function e(n,r,i,s,u){s=void 0===s?0:s,u=void 0===u?0:u;var l,c,d=[],h=[];if(a(n[0])){for(c=0;c<n.length;c++)d[c]=o(n[c]);for(l=t(d,r,i,s,u),c=0;c<n.length;c++)h.push(e(n[c],l[c][2]-l[c][0],l[c][3]-l[c][1],l[c][0],l[c][1]))}else h=t(n,r,i,s,u);return h}}();var Oe,Pe,Fe=function(){function e(t,n){s(this,e),this.ctx=t,this.w=t.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new Ce(t),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return l(e,[{key:"draw",value:function(e){var t=this,n=this.w,r=new w(this.ctx),a=new M(this.ctx),i=r.group({class:"apexcharts-treemap"});if(n.globals.noData)return i;var o=[];return e.forEach((function(e){var t=e.map((function(e){return Math.abs(e)}));o.push(t)})),this.negRange=this.helpers.checkColorRange(),n.config.series.forEach((function(e,n){e.data.forEach((function(e){Array.isArray(t.labels[n])||(t.labels[n]=[]),t.labels[n].push(e.x)}))})),window.TreemapSquared.generate(o,n.globals.gridWidth,n.globals.gridHeight).forEach((function(o,s){var u=r.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:b.escapeString(n.globals.seriesNames[s]),rel:s+1,"data:realIndex":s});if(n.config.chart.dropShadow.enabled){var l=n.config.chart.dropShadow;new A(t.ctx).dropShadow(i,l,s)}var c=r.group({class:"apexcharts-data-labels"});o.forEach((function(i,o){var l=i[0],c=i[1],d=i[2],h=i[3],p=r.drawRect(l,c,d-l,h-c,0,"#fff",1,t.strokeWidth,n.config.plotOptions.treemap.useFillColorAsStroke?m:n.globals.stroke.colors[s]);p.attr({cx:l,cy:c,index:s,i:s,j:o,width:d-l,height:h-c});var f=t.helpers.getShadeColor(n.config.chart.type,s,o,t.negRange),m=f.color;void 0!==n.config.series[s].data[o]&&n.config.series[s].data[o].fillColor&&(m=n.config.series[s].data[o].fillColor);var g=a.fillPath({color:m,seriesNumber:s,dataPointIndex:o});p.node.classList.add("apexcharts-treemap-rect"),p.attr({fill:g}),t.helpers.addListeners(p);var v={x:l+(d-l)/2,y:c+(h-c)/2,width:0,height:0},y={x:l,y:c,width:d-l,height:h-c};if(n.config.chart.animations.enabled&&!n.globals.dataChanged){var b=1;n.globals.resized||(b=n.config.chart.animations.speed),t.animateTreemap(p,v,y,b)}if(n.globals.dataChanged){var x=1;t.dynamicAnim.enabled&&n.globals.shouldAnimate&&(x=t.dynamicAnim.speed,n.globals.previousPaths[s]&&n.globals.previousPaths[s][o]&&n.globals.previousPaths[s][o].rect&&(v=n.globals.previousPaths[s][o].rect),t.animateTreemap(p,v,y,x))}var A=t.getFontSize(i),w=n.config.dataLabels.formatter(t.labels[s][o],{value:n.globals.series[s][o],seriesIndex:s,dataPointIndex:o,w:n}),k=t.helpers.calculateDataLabels({text:w,x:(l+d)/2,y:(c+h)/2+t.strokeWidth/2+A/3,i:s,j:o,colorProps:f,fontSize:A,series:e});n.config.dataLabels.enabled&&k&&t.rotateToFitLabel(k,w,l,c,d,h),u.add(p),null!==k&&u.add(k)})),u.add(c),i.add(u)})),i}},{key:"getFontSize",value:function(e){var t,n,r=this.w,a=function e(t){var n,r=0;if(Array.isArray(t[0]))for(n=0;n<t.length;n++)r+=e(t[n]);else for(n=0;n<t.length;n++)r+=t[n].length;return r}(this.labels)/function e(t){var n,r=0;if(Array.isArray(t[0]))for(n=0;n<t.length;n++)r+=e(t[n]);else for(n=0;n<t.length;n++)r+=1;return r}(this.labels);return t=(e[2]-e[0])*(e[3]-e[1]),n=Math.pow(t,.5),Math.min(n/a,parseInt(r.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(e,t,n,r,a,i){var o=new w(this.ctx),s=o.getTextRects(t);if(s.width+5>a-n&&s.width<=i-r){var u=o.rotateAroundCenter(e.node);e.node.setAttribute("transform","rotate(-90 ".concat(u.x," ").concat(u.y,")"))}}},{key:"animateTreemap",value:function(e,t,n,r){var a=new x(this.ctx);a.animateRect(e,{x:t.x,y:t.y,width:t.width,height:t.height},{x:n.x,y:n.y,width:n.width,height:n.height},r,(function(){a.animationCompleted(e)}))}}]),e}(),De=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return l(e,[{key:"calculateTimeScaleTicks",value:function(e,t){var n=this,r=this.w;if(r.globals.allSeriesCollapsed)return r.globals.labels=[],r.globals.timescaleLabels=[],[];var a=new B(this.ctx),o=(t-e)/864e5;this.determineInterval(o),r.globals.disableZoomIn=!1,r.globals.disableZoomOut=!1,o<.00011574074074074075?r.globals.disableZoomIn=!0:o>5e4&&(r.globals.disableZoomOut=!0);var s=a.getTimeUnitsfromTimestamp(e,t,this.utc),u=r.globals.gridWidth/o,l=u/24,c=l/60,d=c/60,h=Math.floor(24*o),p=Math.floor(1440*o),f=Math.floor(86400*o),m=Math.floor(o),g=Math.floor(o/30),v=Math.floor(o/365),y={minMillisecond:s.minMillisecond,minSecond:s.minSecond,minMinute:s.minMinute,minHour:s.minHour,minDate:s.minDate,minMonth:s.minMonth,minYear:s.minYear},b={firstVal:y,currentMillisecond:y.minMillisecond,currentSecond:y.minSecond,currentMinute:y.minMinute,currentHour:y.minHour,currentMonthDate:y.minDate,currentDate:y.minDate,currentMonth:y.minMonth,currentYear:y.minYear,daysWidthOnXAxis:u,hoursWidthOnXAxis:l,minutesWidthOnXAxis:c,secondsWidthOnXAxis:d,numberOfSeconds:f,numberOfMinutes:p,numberOfHours:h,numberOfDays:m,numberOfMonths:g,numberOfYears:v};switch(this.tickInterval){case"years":this.generateYearScale(b);break;case"months":case"half_year":this.generateMonthScale(b);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(b);break;case"hours":this.generateHourScale(b);break;case"minutes_fives":case"minutes":this.generateMinuteScale(b);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(b)}var x=this.timeScaleArray.map((function(e){var t={position:e.position,unit:e.unit,year:e.year,day:e.day?e.day:1,hour:e.hour?e.hour:0,month:e.month+1};return"month"===e.unit?i(i({},t),{},{day:1,value:e.value+1}):"day"===e.unit||"hour"===e.unit?i(i({},t),{},{value:e.value}):"minute"===e.unit?i(i({},t),{},{value:e.value,minute:e.value}):"second"===e.unit?i(i({},t),{},{value:e.value,minute:e.minute,second:e.second}):e}));return x.filter((function(e){var t=1,a=Math.ceil(r.globals.gridWidth/120),i=e.value;void 0!==r.config.xaxis.tickAmount&&(a=r.config.xaxis.tickAmount),x.length>a&&(t=Math.floor(x.length/a));var o=!1,s=!1;switch(n.tickInterval){case"years":"year"===e.unit&&(o=!0);break;case"half_year":t=7,"year"===e.unit&&(o=!0);break;case"months":t=1,"year"===e.unit&&(o=!0);break;case"months_fortnight":t=15,"year"!==e.unit&&"month"!==e.unit||(o=!0),30===i&&(s=!0);break;case"months_days":t=10,"month"===e.unit&&(o=!0),30===i&&(s=!0);break;case"week_days":t=8,"month"===e.unit&&(o=!0);break;case"days":t=1,"month"===e.unit&&(o=!0);break;case"hours":"day"===e.unit&&(o=!0);break;case"minutes_fives":case"seconds_fives":i%5!=0&&(s=!0);break;case"seconds_tens":i%10!=0&&(s=!0)}if("hours"===n.tickInterval||"minutes_fives"===n.tickInterval||"seconds_tens"===n.tickInterval||"seconds_fives"===n.tickInterval){if(!s)return!0}else if((i%t==0||o)&&!s)return!0}))}},{key:"recalcDimensionsBasedOnFormat",value:function(e,t){var n=this.w,r=this.formatDates(e),a=this.removeOverlappingTS(r);n.globals.timescaleLabels=a.slice(),new de(this.ctx).plotCoords()}},{key:"determineInterval",value:function(e){var t=24*e,n=60*t;switch(!0){case e/365>5:this.tickInterval="years";break;case e>800:this.tickInterval="half_year";break;case e>180:this.tickInterval="months";break;case e>90:this.tickInterval="months_fortnight";break;case e>60:this.tickInterval="months_days";break;case e>30:this.tickInterval="week_days";break;case e>2:this.tickInterval="days";break;case t>2.4:this.tickInterval="hours";break;case n>15:this.tickInterval="minutes_fives";break;case n>5:this.tickInterval="minutes";break;case n>1:this.tickInterval="seconds_tens";break;case 60*n>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(e){var t=e.firstVal,n=e.currentMonth,r=e.currentYear,a=e.daysWidthOnXAxis,i=e.numberOfYears,o=t.minYear,s=0,u=new B(this.ctx),l="year";if(t.minDate>1||t.minMonth>0){var c=u.determineRemainingDaysOfYear(t.minYear,t.minMonth,t.minDate);s=(u.determineDaysOfYear(t.minYear)-c+1)*a,o=t.minYear+1,this.timeScaleArray.push({position:s,value:o,unit:l,year:o,month:b.monthMod(n+1)})}else 1===t.minDate&&0===t.minMonth&&this.timeScaleArray.push({position:s,value:o,unit:l,year:r,month:b.monthMod(n+1)});for(var d=o,h=s,p=0;p<i;p++)d++,h=u.determineDaysOfYear(d-1)*a+h,this.timeScaleArray.push({position:h,value:d,unit:l,year:d,month:1})}},{key:"generateMonthScale",value:function(e){var t=e.firstVal,n=e.currentMonthDate,r=e.currentMonth,a=e.currentYear,i=e.daysWidthOnXAxis,o=e.numberOfMonths,s=r,u=0,l=new B(this.ctx),c="month",d=0;if(t.minDate>1){u=(l.determineDaysOfMonths(r+1,t.minYear)-n+1)*i,s=b.monthMod(r+1);var h=a+d,p=b.monthMod(s),f=s;0===s&&(c="year",f=h,p=1,h+=d+=1),this.timeScaleArray.push({position:u,value:f,unit:c,year:h,month:p})}else this.timeScaleArray.push({position:u,value:s,unit:c,year:a,month:b.monthMod(r)});for(var m=s+1,g=u,v=0,y=1;v<o;v++,y++){0===(m=b.monthMod(m))?(c="year",d+=1):c="month";var x=this._getYear(a,m,d);g=l.determineDaysOfMonths(m,x)*i+g;var A=0===m?x:m;this.timeScaleArray.push({position:g,value:A,unit:c,year:x,month:0===m?1:m}),m++}}},{key:"generateDayScale",value:function(e){var t=e.firstVal,n=e.currentMonth,r=e.currentYear,a=e.hoursWidthOnXAxis,i=e.numberOfDays,o=new B(this.ctx),s="day",u=t.minDate+1,l=u,c=function(e,t,n){return e>o.determineDaysOfMonths(t+1,n)?(l=1,s="month",h=t+=1,t):t},d=(24-t.minHour)*a,h=u,p=c(l,n,r);0===t.minHour&&1===t.minDate?(d=0,h=b.monthMod(t.minMonth),s="month",l=t.minDate,i++):1!==t.minDate&&0===t.minHour&&0===t.minMinute&&(d=0,u=t.minDate,h=u,p=c(l=u,n,r)),this.timeScaleArray.push({position:d,value:h,unit:s,year:this._getYear(r,p,0),month:b.monthMod(p),day:l});for(var f=d,m=0;m<i;m++){s="day",p=c(l+=1,p,this._getYear(r,p,0));var g=this._getYear(r,p,0);f=24*a+f;var v=1===l?b.monthMod(p):l;this.timeScaleArray.push({position:f,value:v,unit:s,year:g,month:b.monthMod(p),day:v})}}},{key:"generateHourScale",value:function(e){var t=e.firstVal,n=e.currentDate,r=e.currentMonth,a=e.currentYear,i=e.minutesWidthOnXAxis,o=e.numberOfHours,s=new B(this.ctx),u="hour",l=function(e,t){return e>s.determineDaysOfMonths(t+1,a)&&(m=1,t+=1),{month:t,date:m}},c=function(e,t){return e>s.determineDaysOfMonths(t+1,a)?t+=1:t},d=60-(t.minMinute+t.minSecond/60),h=d*i,p=t.minHour+1,f=p+1;60===d&&(h=0,f=(p=t.minHour)+1);var m=n,g=c(m,r);this.timeScaleArray.push({position:h,value:p,unit:u,day:m,hour:f,year:a,month:b.monthMod(g)});for(var v=h,y=0;y<o;y++){u="hour",f>=24&&(f=0,u="day",g=l(m+=1,g).month,g=c(m,g));var x=this._getYear(a,g,0);v=0===f&&0===y?d*i:60*i+v;var A=0===f?m:f;this.timeScaleArray.push({position:v,value:A,unit:u,hour:f,day:m,year:x,month:b.monthMod(g)}),f++}}},{key:"generateMinuteScale",value:function(e){for(var t=e.currentMillisecond,n=e.currentSecond,r=e.currentMinute,a=e.currentHour,i=e.currentDate,o=e.currentMonth,s=e.currentYear,u=e.minutesWidthOnXAxis,l=e.secondsWidthOnXAxis,c=e.numberOfMinutes,d=r+1,h=i,p=o,f=s,m=a,g=(60-n-t/1e3)*l,v=0;v<c;v++)d>=60&&(d=0,24===(m+=1)&&(m=0)),this.timeScaleArray.push({position:g,value:d,unit:"minute",hour:m,minute:d,day:h,year:this._getYear(f,p,0),month:b.monthMod(p)}),g+=u,d++}},{key:"generateSecondScale",value:function(e){for(var t=e.currentMillisecond,n=e.currentSecond,r=e.currentMinute,a=e.currentHour,i=e.currentDate,o=e.currentMonth,s=e.currentYear,u=e.secondsWidthOnXAxis,l=e.numberOfSeconds,c=n+1,d=r,h=i,p=o,f=s,m=a,g=(1e3-t)/1e3*u,v=0;v<l;v++)c>=60&&(c=0,++d>=60&&(d=0,24===++m&&(m=0))),this.timeScaleArray.push({position:g,value:c,unit:"second",hour:m,minute:d,second:c,day:h,year:this._getYear(f,p,0),month:b.monthMod(p)}),g+=u,c++}},{key:"createRawDateString",value:function(e,t){var n=e.year;return 0===e.month&&(e.month=1),n+="-"+("0"+e.month.toString()).slice(-2),"day"===e.unit?n+="day"===e.unit?"-"+("0"+t).slice(-2):"-01":n+="-"+("0"+(e.day?e.day:"1")).slice(-2),"hour"===e.unit?n+="hour"===e.unit?"T"+("0"+t).slice(-2):"T00":n+="T"+("0"+(e.hour?e.hour:"0")).slice(-2),"minute"===e.unit?n+=":"+("0"+t).slice(-2):n+=":"+(e.minute?("0"+e.minute).slice(-2):"00"),"second"===e.unit?n+=":"+("0"+t).slice(-2):n+=":00",this.utc&&(n+=".000Z"),n}},{key:"formatDates",value:function(e){var t=this,n=this.w;return e.map((function(e){var r=e.value.toString(),a=new B(t.ctx),i=t.createRawDateString(e,r),o=a.getDate(a.parseDate(i));if(t.utc||(o=a.getDate(a.parseDateWithTimezone(i))),void 0===n.config.xaxis.labels.format){var s="dd MMM",u=n.config.xaxis.labels.datetimeFormatter;"year"===e.unit&&(s=u.year),"month"===e.unit&&(s=u.month),"day"===e.unit&&(s=u.day),"hour"===e.unit&&(s=u.hour),"minute"===e.unit&&(s=u.minute),"second"===e.unit&&(s=u.second),r=a.formatDate(o,s)}else r=a.formatDate(o,n.config.xaxis.labels.format);return{dateString:i,position:e.position,value:r,unit:e.unit,year:e.year,month:e.month}}))}},{key:"removeOverlappingTS",value:function(e){var t,n=this,r=new w(this.ctx),a=!1;e.length>0&&e[0].value&&e.every((function(t){return t.value.length===e[0].value.length}))&&(a=!0,t=r.getTextRects(e[0].value).width);var i=0,o=e.map((function(o,s){if(s>0&&n.w.config.xaxis.labels.hideOverlappingLabels){var u=a?t:r.getTextRects(e[i].value).width,l=e[i].position;return o.position>l+u+10?(i=s,o):null}return o}));return o.filter((function(e){return null!==e}))}},{key:"_getYear",value:function(e,t,n){return e+Math.floor(t/12)+n}}]),e}(),Le=function(){function e(t,n){s(this,e),this.ctx=n,this.w=n.w,this.el=t}return l(e,[{key:"setupElements",value:function(){var e=this.w.globals,t=this.w.config,n=t.chart.type;e.axisCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(n)>-1,e.xyCharts=["line","area","bar","rangeBar","candlestick","boxPlot","scatter","bubble"].indexOf(n)>-1,e.isBarHorizontal=("bar"===t.chart.type||"rangeBar"===t.chart.type||"boxPlot"===t.chart.type)&&t.plotOptions.bar.horizontal,e.chartClass=".apexcharts"+e.chartID,e.dom.baseEl=this.el,e.dom.elWrap=document.createElement("div"),w.setAttrs(e.dom.elWrap,{id:e.chartClass.substring(1),class:"apexcharts-canvas "+e.chartClass.substring(1)}),this.el.appendChild(e.dom.elWrap),e.dom.Paper=new window.SVG.Doc(e.dom.elWrap),e.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(t.chart.offsetX,", ").concat(t.chart.offsetY,")")}),e.dom.Paper.node.style.background=t.chart.background,this.setSVGDimensions(),e.dom.elGraphical=e.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),e.dom.elAnnotations=e.dom.Paper.group().attr({class:"apexcharts-annotations"}),e.dom.elDefs=e.dom.Paper.defs(),e.dom.elLegendWrap=document.createElement("div"),e.dom.elLegendWrap.classList.add("apexcharts-legend"),e.dom.elWrap.appendChild(e.dom.elLegendWrap),e.dom.Paper.add(e.dom.elGraphical),e.dom.elGraphical.add(e.dom.elDefs)}},{key:"plotChartType",value:function(e,t){var n=this.w,r=n.config,a=n.globals,i={series:[],i:[]},o={series:[],i:[]},s={series:[],i:[]},u={series:[],i:[]},l={series:[],i:[]},c={series:[],i:[]},d={series:[],i:[]};a.series.map((function(t,h){var p=0;void 0!==e[h].type?("column"===e[h].type||"bar"===e[h].type?(a.series.length>1&&r.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),l.series.push(t),l.i.push(h),p++,n.globals.columnSeries=l.series):"area"===e[h].type?(o.series.push(t),o.i.push(h),p++):"line"===e[h].type?(i.series.push(t),i.i.push(h),p++):"scatter"===e[h].type?(s.series.push(t),s.i.push(h)):"bubble"===e[h].type?(u.series.push(t),u.i.push(h),p++):"candlestick"===e[h].type?(c.series.push(t),c.i.push(h),p++):"boxPlot"===e[h].type?(d.series.push(t),d.i.push(h),p++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble"),p>1&&(a.comboCharts=!0)):(i.series.push(t),i.i.push(h))}));var h=new Re(this.ctx,t),p=new Se(this.ctx,t);this.ctx.pie=new Te(this.ctx);var f=new _e(this.ctx);this.ctx.rangeBar=new W(this.ctx,t);var m=new Ne(this.ctx),g=[];if(a.comboCharts){if(o.series.length>0&&g.push(h.draw(o.series,"area",o.i)),l.series.length>0)if(n.config.chart.stacked){var v=new ke(this.ctx,t);g.push(v.draw(l.series,l.i))}else this.ctx.bar=new z(this.ctx,t),g.push(this.ctx.bar.draw(l.series,l.i));if(i.series.length>0&&g.push(h.draw(i.series,"line",i.i)),c.series.length>0&&g.push(p.draw(c.series,c.i)),d.series.length>0&&g.push(p.draw(d.series,d.i)),s.series.length>0){var y=new Re(this.ctx,t,!0);g.push(y.draw(s.series,"scatter",s.i))}if(u.series.length>0){var b=new Re(this.ctx,t,!0);g.push(b.draw(u.series,"bubble",u.i))}}else switch(r.chart.type){case"line":g=h.draw(a.series,"line");break;case"area":g=h.draw(a.series,"area");break;case"bar":r.chart.stacked?g=new ke(this.ctx,t).draw(a.series):(this.ctx.bar=new z(this.ctx,t),g=this.ctx.bar.draw(a.series));break;case"candlestick":case"boxPlot":g=new Se(this.ctx,t).draw(a.series);break;case"rangeBar":g=this.ctx.rangeBar.draw(a.series);break;case"heatmap":g=new Ie(this.ctx,t).draw(a.series);break;case"treemap":g=new Fe(this.ctx,t).draw(a.series);break;case"pie":case"donut":case"polarArea":g=this.ctx.pie.draw(a.series);break;case"radialBar":g=f.draw(a.series);break;case"radar":g=m.draw(a.series);break;default:g=h.draw(a.series)}return g}},{key:"setSVGDimensions",value:function(){var e=this.w.globals,t=this.w.config;e.svgWidth=t.chart.width,e.svgHeight=t.chart.height;var n=b.getDimensions(this.el),r=t.chart.width.toString().split(/[0-9]+/g).pop();"%"===r?b.isNumber(n[0])&&(0===n[0].width&&(n=b.getDimensions(this.el.parentNode)),e.svgWidth=n[0]*parseInt(t.chart.width,10)/100):"px"!==r&&""!==r||(e.svgWidth=parseInt(t.chart.width,10));var a=t.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==e.svgHeight&&""!==e.svgHeight)if("%"===a){var i=b.getDimensions(this.el.parentNode);e.svgHeight=i[1]*parseInt(t.chart.height,10)/100}else e.svgHeight=parseInt(t.chart.height,10);else e.axisCharts?e.svgHeight=e.svgWidth/1.61:e.svgHeight=e.svgWidth/1.2;if(e.svgWidth<0&&(e.svgWidth=0),e.svgHeight<0&&(e.svgHeight=0),w.setAttrs(e.dom.Paper.node,{width:e.svgWidth,height:e.svgHeight}),"%"!==a){var o=t.chart.sparkline.enabled?0:e.axisCharts?t.chart.parentHeightOffset:0;e.dom.Paper.node.parentNode.parentNode.style.minHeight=e.svgHeight+o+"px"}e.dom.elWrap.style.width=e.svgWidth+"px",e.dom.elWrap.style.height=e.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var e=this.w.globals,t=e.translateY,n={transform:"translate("+e.translateX+", "+t+")"};w.setAttrs(e.dom.elGraphical.node,n)}},{key:"resizeNonAxisCharts",value:function(){var e=this.w,t=e.globals,n=0,r=e.config.chart.sparkline.enabled?1:15;r+=e.config.grid.padding.bottom,"top"!==e.config.legend.position&&"bottom"!==e.config.legend.position||!e.config.legend.show||e.config.legend.floating||(n=new pe(this.ctx).legendHelpers.getLegendBBox().clwh+10);var a=e.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),i=2.05*e.globals.radialSize;if(a&&!e.config.chart.sparkline.enabled&&0!==e.config.plotOptions.radialBar.startAngle){var o=b.getBoundingClientRect(a);i=o.bottom;var s=o.bottom-o.top;i=Math.max(2.05*e.globals.radialSize,s)}var u=i+t.translateY+n+r;t.dom.elLegendForeign&&t.dom.elLegendForeign.setAttribute("height",u),e.config.chart.height&&String(e.config.chart.height).indexOf("%")>0||(t.dom.elWrap.style.height=u+"px",w.setAttrs(t.dom.Paper.node,{height:u}),t.dom.Paper.node.parentNode.parentNode.style.minHeight=u+"px")}},{key:"coreCalculations",value:function(){new Q(this.ctx).init()}},{key:"resetGlobals",value:function(){var e=this,t=function(){return e.w.config.series.map((function(e){return[]}))},n=new H,r=this.w.globals;n.initGlobalVars(r),r.seriesXvalues=t(),r.seriesYvalues=t()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var e=null,t=this.w;if(t.globals.axisCharts){if("back"===t.config.xaxis.crosshairs.position&&new re(this.ctx).drawXCrosshairs(),"back"===t.config.yaxis[0].crosshairs.position&&new re(this.ctx).drawYCrosshairs(),"datetime"===t.config.xaxis.type&&void 0===t.config.xaxis.labels.formatter){this.ctx.timeScale=new De(this.ctx);var n=[];isFinite(t.globals.minX)&&isFinite(t.globals.maxX)&&!t.globals.isBarHorizontal?n=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minX,t.globals.maxX):t.globals.isBarHorizontal&&(n=this.ctx.timeScale.calculateTimeScaleTicks(t.globals.minY,t.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(n)}e=new k(this.ctx).getCalculatedRatios()}return e}},{key:"updateSourceChart",value:function(e){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:e.w.globals.minX,max:e.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var e=this,t=this.w;if(t.config.chart.brush.enabled&&"function"!=typeof t.config.chart.events.selection){var n=t.config.chart.brush.targets||[t.config.chart.brush.target];n.forEach((function(t){var n=ApexCharts.getChartByID(t);n.w.globals.brushSource=e.ctx,"function"!=typeof n.w.config.chart.events.zoomed&&(n.w.config.chart.events.zoomed=function(){e.updateSourceChart(n)}),"function"!=typeof n.w.config.chart.events.scrolled&&(n.w.config.chart.events.scrolled=function(){e.updateSourceChart(n)})})),t.config.chart.events.selection=function(e,r){n.forEach((function(e){var n=ApexCharts.getChartByID(e),a=b.clone(t.config.yaxis);if(t.config.chart.brush.autoScaleYaxis&&1===n.w.globals.series.length){var o=new J(n);a=o.autoScaleY(n,a,r)}var s=n.w.config.yaxis.reduce((function(e,t,r){return[].concat(g(e),[i(i({},n.w.config.yaxis[r]),{},{min:a[0].min,max:a[0].max})])}),[]);n.ctx.updateHelpers._updateOptions({xaxis:{min:r.xaxis.min,max:r.xaxis.max},yaxis:s},!1,!1,!1,!1)}))}}}}]),e}(),ze=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return l(e,[{key:"_updateOptions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise((function(s){var u=[t.ctx];a&&(u=t.ctx.getSyncedCharts()),t.ctx.w.globals.isExecCalled&&(u=[t.ctx],t.ctx.w.globals.isExecCalled=!1),u.forEach((function(a,l){var c=a.w;if(c.globals.shouldAnimate=r,n||(c.globals.resized=!0,c.globals.dataChanged=!0,r&&a.series.getPreviousPaths()),e&&"object"===o(e)&&(a.config=new V(e),e=k.extendArrayProps(a.config,e,c),a.w.globals.chartID!==t.ctx.w.globals.chartID&&delete e.series,c.config=b.extend(c.config,e),i&&(c.globals.lastXAxis=e.xaxis?b.clone(e.xaxis):[],c.globals.lastYAxis=e.yaxis?b.clone(e.yaxis):[],c.globals.initialConfig=b.extend({},c.config),c.globals.initialSeries=b.clone(c.config.series),e.series))){for(var d=0;d<c.globals.collapsedSeriesIndices.length;d++){var h=c.config.series[c.globals.collapsedSeriesIndices[d]];c.globals.collapsedSeries[d].data=c.globals.axisCharts?h.data.slice():h}for(var p=0;p<c.globals.ancillaryCollapsedSeriesIndices.length;p++){var f=c.config.series[c.globals.ancillaryCollapsedSeriesIndices[p]];c.globals.ancillaryCollapsedSeries[p].data=c.globals.axisCharts?f.data.slice():f}a.series.emptyCollapsedSeries(c.config.series)}return a.update(e).then((function(){l===u.length-1&&s(a)}))}))}))}},{key:"_updateSeries",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(a){var i,o=n.w;return o.globals.shouldAnimate=t,o.globals.dataChanged=!0,t&&n.ctx.series.getPreviousPaths(),o.globals.axisCharts?(0===(i=e.map((function(e,t){return n._extendSeries(e,t)}))).length&&(i=[{data:[]}]),o.config.series=i):o.config.series=e.slice(),r&&(o.globals.initialSeries=b.clone(o.config.series)),n.ctx.update().then((function(){a(n.ctx)}))}))}},{key:"_extendSeries",value:function(e,t){var n=this.w,r=n.config.series[t];return i(i({},n.config.series[t]),{},{name:e.name?e.name:r&&r.name,color:e.color?e.color:r&&r.color,type:e.type?e.type:r&&r.type,data:e.data?e.data:r&&r.data})}},{key:"toggleDataPointSelection",value:function(e,t){var n=this.w,r=null,a=".apexcharts-series[data\\:realIndex='".concat(e,"']");return n.globals.axisCharts?r=n.globals.dom.Paper.select("".concat(a," path[j='").concat(t,"'], ").concat(a," circle[j='").concat(t,"'], ").concat(a," rect[j='").concat(t,"']")).members[0]:void 0===t&&(r=n.globals.dom.Paper.select("".concat(a," path[j='").concat(e,"']")).members[0],"pie"!==n.config.chart.type&&"polarArea"!==n.config.chart.type&&"donut"!==n.config.chart.type||this.ctx.pie.pieClicked(e)),r?(new w(this.ctx).pathMouseDown(r,null),r.node?r.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(e){var t=this.w;if(["min","max"].forEach((function(n){void 0!==e.xaxis[n]&&(t.config.xaxis[n]=e.xaxis[n],t.globals.lastXAxis[n]=e.xaxis[n])})),e.xaxis.categories&&e.xaxis.categories.length&&(t.config.xaxis.categories=e.xaxis.categories),t.config.xaxis.convertedCatToNumeric){var n=new j(e);e=n.convertCatToNumericXaxis(e,this.ctx)}return e}},{key:"forceYAxisUpdate",value:function(e){var t=this.w;return t.config.chart.stacked&&"100%"===t.config.chart.stackType&&(Array.isArray(e.yaxis)?e.yaxis.forEach((function(t,n){e.yaxis[n].min=0,e.yaxis[n].max=100})):(e.yaxis.min=0,e.yaxis.max=100)),e}},{key:"revertDefaultAxisMinMax",value:function(e){var t=this,n=this.w,r=n.globals.lastXAxis,a=n.globals.lastYAxis;e&&e.xaxis&&(r=e.xaxis),e&&e.yaxis&&(a=e.yaxis),n.config.xaxis.min=r.min,n.config.xaxis.max=r.max;n.config.yaxis.map((function(e,r){n.globals.zoomed||void 0!==a[r]?function(e){void 0!==a[e]&&(n.config.yaxis[e].min=a[e].min,n.config.yaxis[e].max=a[e].max)}(r):void 0!==t.ctx.opts.yaxis[r]&&(e.min=t.ctx.opts.yaxis[r].min,e.max=t.ctx.opts.yaxis[r].max)}))}}]),e}();Oe="undefined"!=typeof window?window:void 0,Pe=function(e,t){var n=(void 0!==this?this:e).SVG=function(e){if(n.supported)return e=new n.Doc(e),n.parser.draw||n.prepare(),e};if(n.ns="http://www.w3.org/2000/svg",n.xmlns="http://www.w3.org/2000/xmlns/",n.xlink="http://www.w3.org/1999/xlink",n.svgjs="http://svgjs.dev",n.supported=!0,!n.supported)return!1;n.did=1e3,n.eid=function(e){return"Svgjs"+d(e)+n.did++},n.create=function(e){var n=t.createElementNS(this.ns,e);return n.setAttribute("id",this.eid(e)),n},n.extend=function(){var e,t;t=(e=[].slice.call(arguments)).pop();for(var r=e.length-1;r>=0;r--)if(e[r])for(var a in t)e[r].prototype[a]=t[a];n.Set&&n.Set.inherit&&n.Set.inherit()},n.invent=function(e){var t="function"==typeof e.create?e.create:function(){this.constructor.call(this,n.create(e.create))};return e.inherit&&(t.prototype=new e.inherit),e.extend&&n.extend(t,e.extend),e.construct&&n.extend(e.parent||n.Container,e.construct),t},n.adopt=function(t){return t?t.instance?t.instance:((r="svg"==t.nodeName?t.parentNode instanceof e.SVGElement?new n.Nested:new n.Doc:"linearGradient"==t.nodeName?new n.Gradient("linear"):"radialGradient"==t.nodeName?new n.Gradient("radial"):n[d(t.nodeName)]?new(n[d(t.nodeName)]):new n.Element(t)).type=t.nodeName,r.node=t,t.instance=r,r instanceof n.Doc&&r.namespace().defs(),r.setData(JSON.parse(t.getAttribute("svgjs:data"))||{}),r):null;var r},n.prepare=function(){var e=t.getElementsByTagName("body")[0],r=(e?new n.Doc(e):n.adopt(t.documentElement).nested()).size(2,0);n.parser={body:e||t.documentElement,draw:r.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:r.polyline().node,path:r.path().node,native:n.create("svg")}},n.parser={native:n.create("svg")},t.addEventListener("DOMContentLoaded",(function(){n.parser.draw||n.prepare()}),!1),n.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},n.utils={map:function(e,t){for(var n=e.length,r=[],a=0;a<n;a++)r.push(t(e[a]));return r},filter:function(e,t){for(var n=e.length,r=[],a=0;a<n;a++)t(e[a])&&r.push(e[a]);return r},filterSVGElements:function(t){return this.filter(t,(function(t){return t instanceof e.SVGElement}))}},n.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},n.Color=function(e){var t,r;this.r=0,this.g=0,this.b=0,e&&("string"==typeof e?n.regex.isRgb.test(e)?(t=n.regex.rgb.exec(e.replace(n.regex.whitespace,"")),this.r=parseInt(t[1]),this.g=parseInt(t[2]),this.b=parseInt(t[3])):n.regex.isHex.test(e)&&(t=n.regex.hex.exec(4==(r=e).length?["#",r.substring(1,2),r.substring(1,2),r.substring(2,3),r.substring(2,3),r.substring(3,4),r.substring(3,4)].join(""):r),this.r=parseInt(t[1],16),this.g=parseInt(t[2],16),this.b=parseInt(t[3],16)):"object"===o(e)&&(this.r=e.r,this.g=e.g,this.b=e.b))},n.extend(n.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+h(this.r)+h(this.g)+h(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(e){return this.destination=new n.Color(e),this},at:function(e){return this.destination?(e=e<0?0:e>1?1:e,new n.Color({r:~~(this.r+(this.destination.r-this.r)*e),g:~~(this.g+(this.destination.g-this.g)*e),b:~~(this.b+(this.destination.b-this.b)*e)})):this}}),n.Color.test=function(e){return e+="",n.regex.isHex.test(e)||n.regex.isRgb.test(e)},n.Color.isRgb=function(e){return e&&"number"==typeof e.r&&"number"==typeof e.g&&"number"==typeof e.b},n.Color.isColor=function(e){return n.Color.isRgb(e)||n.Color.test(e)},n.Array=function(e,t){0==(e=(e||[]).valueOf()).length&&t&&(e=t.valueOf()),this.value=this.parse(e)},n.extend(n.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(e){return e=e.valueOf(),Array.isArray(e)?e:this.split(e)}}),n.PointArray=function(e,t){n.Array.call(this,e,t||[[0,0]])},n.PointArray.prototype=new n.Array,n.PointArray.prototype.constructor=n.PointArray;for(var r={M:function(e,t,n){return t.x=n.x=e[0],t.y=n.y=e[1],["M",t.x,t.y]},L:function(e,t){return t.x=e[0],t.y=e[1],["L",e[0],e[1]]},H:function(e,t){return t.x=e[0],["H",e[0]]},V:function(e,t){return t.y=e[0],["V",e[0]]},C:function(e,t){return t.x=e[4],t.y=e[5],["C",e[0],e[1],e[2],e[3],e[4],e[5]]},Q:function(e,t){return t.x=e[2],t.y=e[3],["Q",e[0],e[1],e[2],e[3]]},Z:function(e,t,n){return t.x=n.x,t.y=n.y,["Z"]}},a="mlhvqtcsaz".split(""),i=0,s=a.length;i<s;++i)r[a[i]]=function(e){return function(t,n,a){if("H"==e)t[0]=t[0]+n.x;else if("V"==e)t[0]=t[0]+n.y;else if("A"==e)t[5]=t[5]+n.x,t[6]=t[6]+n.y;else for(var i=0,o=t.length;i<o;++i)t[i]=t[i]+(i%2?n.y:n.x);if(r&&"function"==typeof r[e])return r[e](t,n,a)}}(a[i].toUpperCase());n.PathArray=function(e,t){n.Array.call(this,e,t||[["M",0,0]])},n.PathArray.prototype=new n.Array,n.PathArray.prototype.constructor=n.PathArray,n.extend(n.PathArray,{toString:function(){return function(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t][0],null!=e[t][1]&&(r+=e[t][1],null!=e[t][2]&&(r+=" ",r+=e[t][2],null!=e[t][3]&&(r+=" ",r+=e[t][3],r+=" ",r+=e[t][4],null!=e[t][5]&&(r+=" ",r+=e[t][5],r+=" ",r+=e[t][6],null!=e[t][7]&&(r+=" ",r+=e[t][7])))));return r+" "}(this.value)},move:function(e,t){var n=this.bbox();return n.x,n.y,this},at:function(e){if(!this.destination)return this;for(var t=this.value,r=this.destination.value,a=[],i=new n.PathArray,o=0,s=t.length;o<s;o++){a[o]=[t[o][0]];for(var u=1,l=t[o].length;u<l;u++)a[o][u]=t[o][u]+(r[o][u]-t[o][u])*e;"A"===a[o][0]&&(a[o][4]=+(0!=a[o][4]),a[o][5]=+(0!=a[o][5]))}return i.value=a,i},parse:function(e){if(e instanceof n.PathArray)return e.valueOf();var t,a={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};e="string"==typeof e?e.replace(n.regex.numbersWithDots,l).replace(n.regex.pathLetters," $& ").replace(n.regex.hyphen,"$1 -").trim().split(n.regex.delimiter):e.reduce((function(e,t){return[].concat.call(e,t)}),[]);var i=[],o=new n.Point,s=new n.Point,u=0,c=e.length;do{n.regex.isPathLetter.test(e[u])?(t=e[u],++u):"M"==t?t="L":"m"==t&&(t="l"),i.push(r[t].call(null,e.slice(u,u+=a[t.toUpperCase()]).map(parseFloat),o,s))}while(c>u);return i},bbox:function(){return n.parser.draw||n.prepare(),n.parser.path.setAttribute("d",this.toString()),n.parser.path.getBBox()}}),n.Number=n.invent({create:function(e,t){this.value=0,this.unit=t||"","number"==typeof e?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:"string"==typeof e?(t=e.match(n.regex.numberAndUnit))&&(this.value=parseFloat(t[1]),"%"==t[5]?this.value/=100:"s"==t[5]&&(this.value*=1e3),this.unit=t[5]):e instanceof n.Number&&(this.value=e.valueOf(),this.unit=e.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(e){return e=new n.Number(e),new n.Number(this+e,this.unit||e.unit)},minus:function(e){return e=new n.Number(e),new n.Number(this-e,this.unit||e.unit)},times:function(e){return e=new n.Number(e),new n.Number(this*e,this.unit||e.unit)},divide:function(e){return e=new n.Number(e),new n.Number(this/e,this.unit||e.unit)},to:function(e){var t=new n.Number(this);return"string"==typeof e&&(t.unit=e),t},morph:function(e){return this.destination=new n.Number(e),e.relative&&(this.destination.value+=this.value),this},at:function(e){return this.destination?new n.Number(this.destination).minus(this).times(e).plus(this):this}}}),n.Element=n.invent({create:function(e){this._stroke=n.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=e)&&(this.type=e.nodeName,this.node.instance=this,this._stroke=e.getAttribute("stroke")||this._stroke)},extend:{x:function(e){return this.attr("x",e)},y:function(e){return this.attr("y",e)},cx:function(e){return null==e?this.x()+this.width()/2:this.x(e-this.width()/2)},cy:function(e){return null==e?this.y()+this.height()/2:this.y(e-this.height()/2)},move:function(e,t){return this.x(e).y(t)},center:function(e,t){return this.cx(e).cy(t)},width:function(e){return this.attr("width",e)},height:function(e){return this.attr("height",e)},size:function(e,t){var r=p(this,e,t);return this.width(new n.Number(r.width)).height(new n.Number(r.height))},clone:function(e){this.writeDataToDom();var t=g(this.node.cloneNode(!0));return e?e.add(t):this.after(t),t},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(e){return this.after(e).remove(),e},addTo:function(e){return e.put(this)},putIn:function(e){return e.add(this)},id:function(e){return this.attr("id",e)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var e=this.attr("class");return null==e?[]:e.trim().split(n.regex.delimiter)},hasClass:function(e){return-1!=this.classes().indexOf(e)},addClass:function(e){if(!this.hasClass(e)){var t=this.classes();t.push(e),this.attr("class",t.join(" "))}return this},removeClass:function(e){return this.hasClass(e)&&this.attr("class",this.classes().filter((function(t){return t!=e})).join(" ")),this},toggleClass:function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e)},reference:function(e){return n.get(this.attr(e))},parent:function(t){var r=this;if(!r.node.parentNode)return null;if(r=n.adopt(r.node.parentNode),!t)return r;for(;r&&r.node instanceof e.SVGElement;){if("string"==typeof t?r.matches(t):r instanceof t)return r;if(!r.node.parentNode||"#document"==r.node.parentNode.nodeName)return null;r=n.adopt(r.node.parentNode)}},doc:function(){return this instanceof n.Doc?this:this.parent(n.Doc)},parents:function(e){var t=[],n=this;do{if(!(n=n.parent(e))||!n.node)break;t.push(n)}while(n.parent);return t},matches:function(e){return function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}(this.node,e)},native:function(){return this.node},svg:function(e){var r=t.createElement("svg");if(!(e&&this instanceof n.Parent))return r.appendChild(e=t.createElement("svg")),this.writeDataToDom(),e.appendChild(this.node.cloneNode(!0)),r.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");r.innerHTML="<svg>"+e.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var a=0,i=r.firstChild.childNodes.length;a<i;a++)this.node.appendChild(r.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each((function(){this.writeDataToDom()})),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(e){return this.dom=e,this},is:function(e){return function(e,t){return e instanceof t}(this,e)}}}),n.easing={"-":function(e){return e},"<>":function(e){return-Math.cos(e*Math.PI)/2+.5},">":function(e){return Math.sin(e*Math.PI/2)},"<":function(e){return 1-Math.cos(e*Math.PI/2)}},n.morph=function(e){return function(t,r){return new n.MorphObj(t,r).at(e)}},n.Situation=n.invent({create:function(e){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new n.Number(e.duration).valueOf(),this.delay=new n.Number(e.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=e.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),n.FX=n.invent({create:function(e){this._target=e,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(e,t,r){"object"===o(e)&&(t=e.ease,r=e.delay,e=e.duration);var a=new n.Situation({duration:e||1e3,delay:r||0,ease:n.easing[t||"-"]||t});return this.queue(a),this},target:function(e){return e&&e instanceof n.Element?(this._target=e,this):this._target},timeToAbsPos:function(e){return(e-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(e){return this.situation.duration/this._speed*e+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=e.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){e.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(e){return("function"==typeof e||e instanceof n.Situation)&&this.situations.push(e),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof n.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var e,t=this.situation;if(t.init)return this;for(var r in t.animations){e=this.target()[r](),Array.isArray(e)||(e=[e]),Array.isArray(t.animations[r])||(t.animations[r]=[t.animations[r]]);for(var a=e.length;a--;)t.animations[r][a]instanceof n.Number&&(e[a]=new n.Number(e[a])),t.animations[r][a]=e[a].morph(t.animations[r][a])}for(var r in t.attrs)t.attrs[r]=new n.MorphObj(this.target().attr(r),t.attrs[r]);for(var r in t.styles)t.styles[r]=new n.MorphObj(this.target().style(r),t.styles[r]);return t.initialTransformation=this.target().matrixify(),t.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(e,t){var n=this.active;return this.active=!1,t&&this.clearQueue(),e&&this.situation&&(!n&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(e){var t=this.last();return this.target().on("finished.fx",(function n(r){r.detail.situation==t&&(e.call(this,t),this.off("finished.fx",n))})),this._callStart()},during:function(e){var t=this.last(),r=function(r){r.detail.situation==t&&e.call(this,r.detail.pos,n.morph(r.detail.pos),r.detail.eased,t)};return this.target().off("during.fx",r).on("during.fx",r),this.after((function(){this.off("during.fx",r)})),this._callStart()},afterAll:function(e){var t=function t(n){e.call(this),this.off("allfinished.fx",t)};return this.target().off("allfinished.fx",t).on("allfinished.fx",t),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(e,t,n){return this.last()[n||"animations"][e]=t,this._callStart()},step:function(e){var t,n,r;e||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(t=Math.max(this.absPos,0),n=Math.floor(t),!0===this.situation.loops||n<this.situation.loops?(this.pos=t-n,r=this.situation.loop,this.situation.loop=n):(this.absPos=this.situation.loops,this.pos=1,r=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-r)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var a=this.situation.ease(this.pos);for(var i in this.situation.once)i>this.lastPos&&i<=a&&(this.situation.once[i].call(this.target(),this.pos,a),delete this.situation.once[i]);return this.active&&this.target().fire("during",{pos:this.pos,eased:a,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=a,this):this},eachAt:function(){var e,t=this,r=this.target(),a=this.situation;for(var i in a.animations)e=[].concat(a.animations[i]).map((function(e){return"string"!=typeof e&&e.at?e.at(a.ease(t.pos),t.pos):e})),r[i].apply(r,e);for(var i in a.attrs)e=[i].concat(a.attrs[i]).map((function(e){return"string"!=typeof e&&e.at?e.at(a.ease(t.pos),t.pos):e})),r.attr.apply(r,e);for(var i in a.styles)e=[i].concat(a.styles[i]).map((function(e){return"string"!=typeof e&&e.at?e.at(a.ease(t.pos),t.pos):e})),r.style.apply(r,e);if(a.transforms.length){e=a.initialTransformation,i=0;for(var o=a.transforms.length;i<o;i++){var s=a.transforms[i];s instanceof n.Matrix?e=s.relative?e.multiply((new n.Matrix).morph(s).at(a.ease(this.pos))):e.morph(s).at(a.ease(this.pos)):(s.relative||s.undo(e.extract()),e=e.multiply(s.at(a.ease(this.pos))))}r.matrix(e)}return this},once:function(e,t,n){var r=this.last();return n||(e=r.ease(e)),r.once[e]=t,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:n.Element,construct:{animate:function(e,t,r){return(this.fx||(this.fx=new n.FX(this))).animate(e,t,r)},delay:function(e){return(this.fx||(this.fx=new n.FX(this))).delay(e)},stop:function(e,t){return this.fx&&this.fx.stop(e,t),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),n.MorphObj=n.invent({create:function(e,t){return n.Color.isColor(t)?new n.Color(e).morph(t):n.regex.delimiter.test(e)?n.regex.pathLetters.test(e)?new n.PathArray(e).morph(t):new n.Array(e).morph(t):n.regex.numberAndUnit.test(t)?new n.Number(e).morph(t):(this.value=e,void(this.destination=t))},extend:{at:function(e,t){return t<1?this.value:this.destination},valueOf:function(){return this.value}}}),n.extend(n.FX,{attr:function(e,t,n){if("object"===o(e))for(var r in e)this.attr(r,e[r]);else this.add(e,t,"attrs");return this},plot:function(e,t,n,r){return 4==arguments.length?this.plot([e,t,n,r]):this.add("plot",new(this.target().morphArray)(e))}}),n.Box=n.invent({create:function(e,t,r,a){if(!("object"!==o(e)||e instanceof n.Element))return n.Box.call(this,null!=e.left?e.left:e.x,null!=e.top?e.top:e.y,e.width,e.height);4==arguments.length&&(this.x=e,this.y=t,this.width=r,this.height=a),v(this)}}),n.BBox=n.invent({create:function(e){if(n.Box.apply(this,[].slice.call(arguments)),e instanceof n.Element){var r;try{if(!t.documentElement.contains){for(var a=e.node;a.parentNode;)a=a.parentNode;if(a!=t)throw new Error("Element not in the dom")}r=e.node.getBBox()}catch(t){if(e instanceof n.Shape){n.parser.draw||n.prepare();var i=e.clone(n.parser.draw.instance).show();i&&i.node&&"function"==typeof i.node.getBBox&&(r=i.node.getBBox()),i&&"function"==typeof i.remove&&i.remove()}else r={x:e.node.clientLeft,y:e.node.clientTop,width:e.node.clientWidth,height:e.node.clientHeight}}n.Box.call(this,r)}},inherit:n.Box,parent:n.Element,construct:{bbox:function(){return new n.BBox(this)}}}),n.BBox.prototype.constructor=n.BBox,n.Matrix=n.invent({create:function(e){var t=m([1,0,0,1,0,0]);e=null===e?t:e instanceof n.Element?e.matrixify():"string"==typeof e?m(e.split(n.regex.delimiter).map(parseFloat)):6==arguments.length?m([].slice.call(arguments)):Array.isArray(e)?m(e):e&&"object"===o(e)?e:t;for(var r=b.length-1;r>=0;--r)this[b[r]]=null!=e[b[r]]?e[b[r]]:t[b[r]]},extend:{extract:function(){var e=f(this,0,1);f(this,1,0);var t=180/Math.PI*Math.atan2(e.y,e.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(t*Math.PI/180)+this.f*Math.sin(t*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(t*Math.PI/180)+this.e*Math.sin(-t*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:t,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new n.Matrix(this)}},clone:function(){return new n.Matrix(this)},morph:function(e){return this.destination=new n.Matrix(e),this},multiply:function(e){return new n.Matrix(this.native().multiply(function(e){return e instanceof n.Matrix||(e=new n.Matrix(e)),e}(e).native()))},inverse:function(){return new n.Matrix(this.native().inverse())},translate:function(e,t){return new n.Matrix(this.native().translate(e||0,t||0))},native:function(){for(var e=n.parser.native.createSVGMatrix(),t=b.length-1;t>=0;t--)e[b[t]]=this[b[t]];return e},toString:function(){return"matrix("+y(this.a)+","+y(this.b)+","+y(this.c)+","+y(this.d)+","+y(this.e)+","+y(this.f)+")"}},parent:n.Element,construct:{ctm:function(){return new n.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof n.Nested){var e=this.rect(1,1),t=e.node.getScreenCTM();return e.remove(),new n.Matrix(t)}return new n.Matrix(this.node.getScreenCTM())}}}),n.Point=n.invent({create:function(e,t){var n;n=Array.isArray(e)?{x:e[0],y:e[1]}:"object"===o(e)?{x:e.x,y:e.y}:null!=e?{x:e,y:null!=t?t:e}:{x:0,y:0},this.x=n.x,this.y=n.y},extend:{clone:function(){return new n.Point(this)},morph:function(e,t){return this.destination=new n.Point(e,t),this}}}),n.extend(n.Element,{point:function(e,t){return new n.Point(e,t).transform(this.screenCTM().inverse())}}),n.extend(n.Element,{attr:function(e,t,r){if(null==e){for(e={},r=(t=this.node.attributes).length-1;r>=0;r--)e[t[r].nodeName]=n.regex.isNumber.test(t[r].nodeValue)?parseFloat(t[r].nodeValue):t[r].nodeValue;return e}if("object"===o(e))for(var a in e)this.attr(a,e[a]);else if(null===t)this.node.removeAttribute(e);else{if(null==t)return null==(t=this.node.getAttribute(e))?n.defaults.attrs[e]:n.regex.isNumber.test(t)?parseFloat(t):t;"stroke-width"==e?this.attr("stroke",parseFloat(t)>0?this._stroke:null):"stroke"==e&&(this._stroke=t),"fill"!=e&&"stroke"!=e||(n.regex.isImage.test(t)&&(t=this.doc().defs().image(t,0,0)),t instanceof n.Image&&(t=this.doc().defs().pattern(0,0,(function(){this.add(t)})))),"number"==typeof t?t=new n.Number(t):n.Color.isColor(t)?t=new n.Color(t):Array.isArray(t)&&(t=new n.Array(t)),"leading"==e?this.leading&&this.leading(t):"string"==typeof r?this.node.setAttributeNS(r,e,t.toString()):this.node.setAttribute(e,t.toString()),!this.rebuild||"font-size"!=e&&"x"!=e||this.rebuild(e,t)}return this}}),n.extend(n.Element,{transform:function(e,t){var r;return"object"!==o(e)?(r=new n.Matrix(this).extract(),"string"==typeof e?r[e]:r):(r=new n.Matrix(this),t=!!t||!!e.relative,null!=e.a&&(r=t?r.multiply(new n.Matrix(e)):new n.Matrix(e)),this.attr("transform",r))}}),n.extend(n.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(n.regex.transforms).slice(0,-1).map((function(e){var t=e.trim().split("(");return[t[0],t[1].split(n.regex.delimiter).map((function(e){return parseFloat(e)}))]})).reduce((function(e,t){return"matrix"==t[0]?e.multiply(m(t[1])):e[t[0]].apply(e,t[1])}),new n.Matrix)},toParent:function(e){if(this==e)return this;var t=this.screenCTM(),n=e.screenCTM().inverse();return this.addTo(e).untransform().transform(n.multiply(t)),this},toDoc:function(){return this.toParent(this.doc())}}),n.Transformation=n.invent({create:function(e,t){if(arguments.length>1&&"boolean"!=typeof t)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(e))for(var n=0,r=this.arguments.length;n<r;++n)this[this.arguments[n]]=e[n];else if(e&&"object"===o(e))for(n=0,r=this.arguments.length;n<r;++n)this[this.arguments[n]]=e[this.arguments[n]];this.inversed=!1,!0===t&&(this.inversed=!0)}}),n.Translate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(e,t){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),n.extend(n.Element,{style:function(e,t){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===o(e))for(var r in e)this.style(r,e[r]);else{if(!n.regex.isCss.test(e))return this.node.style[c(e)];for(e=e.split(/\s*;\s*/).filter((function(e){return!!e})).map((function(e){return e.split(/\s*:\s*/)}));t=e.pop();)this.style(t[0],t[1])}else this.node.style[c(e)]=null===t||n.regex.isBlank.test(t)?"":t;return this}}),n.Parent=n.invent({create:function(e){this.constructor.call(this,e)},inherit:n.Element,extend:{children:function(){return n.utils.map(n.utils.filterSVGElements(this.node.childNodes),(function(e){return n.adopt(e)}))},add:function(e,t){return null==t?this.node.appendChild(e.node):e.node!=this.node.childNodes[t]&&this.node.insertBefore(e.node,this.node.childNodes[t]),this},put:function(e,t){return this.add(e,t),e},has:function(e){return this.index(e)>=0},index:function(e){return[].slice.call(this.node.childNodes).indexOf(e.node)},get:function(e){return n.adopt(this.node.childNodes[e])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(e,t){for(var r=this.children(),a=0,i=r.length;a<i;a++)r[a]instanceof n.Element&&e.apply(r[a],[a,r]),t&&r[a]instanceof n.Container&&r[a].each(e,t);return this},removeElement:function(e){return this.node.removeChild(e.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),n.extend(n.Parent,{ungroup:function(e,t){return 0===t||this instanceof n.Defs||this.node==n.parser.draw||(e=e||(this instanceof n.Doc?this:this.parent(n.Parent)),t=t||1/0,this.each((function(){return this instanceof n.Defs?this:this instanceof n.Parent?this.ungroup(e,t-1):this.toParent(e)})),this.node.firstChild||this.remove()),this},flatten:function(e,t){return this.ungroup(e,t)}}),n.Container=n.invent({create:function(e){this.constructor.call(this,e)},inherit:n.Parent}),n.ViewBox=n.invent({parent:n.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach((function(e){n.Element.prototype[e]=function(t){return n.on(this.node,e,t),this}})),n.listeners=[],n.handlerMap=[],n.listenerId=0,n.on=function(e,t,r,a,i){var o=r.bind(a||e.instance||e),s=(n.handlerMap.indexOf(e)+1||n.handlerMap.push(e))-1,u=t.split(".")[0],l=t.split(".")[1]||"*";n.listeners[s]=n.listeners[s]||{},n.listeners[s][u]=n.listeners[s][u]||{},n.listeners[s][u][l]=n.listeners[s][u][l]||{},r._svgjsListenerId||(r._svgjsListenerId=++n.listenerId),n.listeners[s][u][l][r._svgjsListenerId]=o,e.addEventListener(u,o,i||{passive:!0})},n.off=function(e,t,r){var a=n.handlerMap.indexOf(e),i=t&&t.split(".")[0],o=t&&t.split(".")[1],s="";if(-1!=a)if(r){if("function"==typeof r&&(r=r._svgjsListenerId),!r)return;n.listeners[a][i]&&n.listeners[a][i][o||"*"]&&(e.removeEventListener(i,n.listeners[a][i][o||"*"][r],!1),delete n.listeners[a][i][o||"*"][r])}else if(o&&i){if(n.listeners[a][i]&&n.listeners[a][i][o]){for(var u in n.listeners[a][i][o])n.off(e,[i,o].join("."),u);delete n.listeners[a][i][o]}}else if(o)for(var l in n.listeners[a])for(var s in n.listeners[a][l])o===s&&n.off(e,[l,o].join("."));else if(i){if(n.listeners[a][i]){for(var s in n.listeners[a][i])n.off(e,[i,s].join("."));delete n.listeners[a][i]}}else{for(var l in n.listeners[a])n.off(e,l);delete n.listeners[a],delete n.handlerMap[a]}},n.extend(n.Element,{on:function(e,t,r,a){return n.on(this.node,e,t,r,a),this},off:function(e,t){return n.off(this.node,e,t),this},fire:function(t,r){return t instanceof e.Event?this.node.dispatchEvent(t):this.node.dispatchEvent(t=new n.CustomEvent(t,{detail:r,cancelable:!0})),this._event=t,this},event:function(){return this._event}}),n.Defs=n.invent({create:"defs",inherit:n.Container}),n.G=n.invent({create:"g",inherit:n.Container,extend:{x:function(e){return null==e?this.transform("x"):this.transform({x:e-this.x()},!0)}},construct:{group:function(){return this.put(new n.G)}}}),n.Doc=n.invent({create:function(e){e&&("svg"==(e="string"==typeof e?t.getElementById(e):e).nodeName?this.constructor.call(this,e):(this.constructor.call(this,n.create("svg")),e.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:n.Container,extend:{namespace:function(){return this.attr({xmlns:n.ns,version:"1.1"}).attr("xmlns:xlink",n.xlink,n.xmlns).attr("xmlns:svgjs",n.svgjs,n.xmlns)},defs:function(){var e;return this._defs||((e=this.node.getElementsByTagName("defs")[0])?this._defs=n.adopt(e):this._defs=new n.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,n.parser.draw&&!n.parser.draw.parentNode&&this.node.appendChild(n.parser.draw),this},clone:function(e){this.writeDataToDom();var t=this.node,n=g(t.cloneNode(!0));return e?(e.node||e).appendChild(n.node):t.parentNode.insertBefore(n.node,t.nextSibling),n}}}),n.extend(n.Element,{}),n.Gradient=n.invent({create:function(e){this.constructor.call(this,n.create(e+"Gradient")),this.type=e},inherit:n.Container,extend:{at:function(e,t,r){return this.put(new n.Stop).update(e,t,r)},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(e,t,r){return"transform"==e&&(e="gradientTransform"),n.Container.prototype.attr.call(this,e,t,r)}},construct:{gradient:function(e,t){return this.defs().gradient(e,t)}}}),n.extend(n.Gradient,n.FX,{from:function(e,t){return"radial"==(this._target||this).type?this.attr({fx:new n.Number(e),fy:new n.Number(t)}):this.attr({x1:new n.Number(e),y1:new n.Number(t)})},to:function(e,t){return"radial"==(this._target||this).type?this.attr({cx:new n.Number(e),cy:new n.Number(t)}):this.attr({x2:new n.Number(e),y2:new n.Number(t)})}}),n.extend(n.Defs,{gradient:function(e,t){return this.put(new n.Gradient(e)).update(t)}}),n.Stop=n.invent({create:"stop",inherit:n.Element,extend:{update:function(e){return("number"==typeof e||e instanceof n.Number)&&(e={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=e.opacity&&this.attr("stop-opacity",e.opacity),null!=e.color&&this.attr("stop-color",e.color),null!=e.offset&&this.attr("offset",new n.Number(e.offset)),this}}}),n.Pattern=n.invent({create:"pattern",inherit:n.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(e){return this.clear(),"function"==typeof e&&e.call(this,this),this},toString:function(){return this.fill()},attr:function(e,t,r){return"transform"==e&&(e="patternTransform"),n.Container.prototype.attr.call(this,e,t,r)}},construct:{pattern:function(e,t,n){return this.defs().pattern(e,t,n)}}}),n.extend(n.Defs,{pattern:function(e,t,r){return this.put(new n.Pattern).update(r).attr({x:0,y:0,width:e,height:t,patternUnits:"userSpaceOnUse"})}}),n.Shape=n.invent({create:function(e){this.constructor.call(this,e)},inherit:n.Element}),n.Symbol=n.invent({create:"symbol",inherit:n.Container,construct:{symbol:function(){return this.put(new n.Symbol)}}}),n.Use=n.invent({create:"use",inherit:n.Shape,extend:{element:function(e,t){return this.attr("href",(t||"")+"#"+e,n.xlink)}},construct:{use:function(e,t){return this.put(new n.Use).element(e,t)}}}),n.Rect=n.invent({create:"rect",inherit:n.Shape,construct:{rect:function(e,t){return this.put(new n.Rect).size(e,t)}}}),n.Circle=n.invent({create:"circle",inherit:n.Shape,construct:{circle:function(e){return this.put(new n.Circle).rx(new n.Number(e).divide(2)).move(0,0)}}}),n.extend(n.Circle,n.FX,{rx:function(e){return this.attr("r",e)},ry:function(e){return this.rx(e)}}),n.Ellipse=n.invent({create:"ellipse",inherit:n.Shape,construct:{ellipse:function(e,t){return this.put(new n.Ellipse).size(e,t).move(0,0)}}}),n.extend(n.Ellipse,n.Rect,n.FX,{rx:function(e){return this.attr("rx",e)},ry:function(e){return this.attr("ry",e)}}),n.extend(n.Circle,n.Ellipse,{x:function(e){return null==e?this.cx()-this.rx():this.cx(e+this.rx())},y:function(e){return null==e?this.cy()-this.ry():this.cy(e+this.ry())},cx:function(e){return null==e?this.attr("cx"):this.attr("cx",e)},cy:function(e){return null==e?this.attr("cy"):this.attr("cy",e)},width:function(e){return null==e?2*this.rx():this.rx(new n.Number(e).divide(2))},height:function(e){return null==e?2*this.ry():this.ry(new n.Number(e).divide(2))},size:function(e,t){var r=p(this,e,t);return this.rx(new n.Number(r.width).divide(2)).ry(new n.Number(r.height).divide(2))}}),n.Line=n.invent({create:"line",inherit:n.Shape,extend:{array:function(){return new n.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(e,t,r,a){return null==e?this.array():(e=void 0!==t?{x1:e,y1:t,x2:r,y2:a}:new n.PointArray(e).toLine(),this.attr(e))},move:function(e,t){return this.attr(this.array().move(e,t).toLine())},size:function(e,t){var n=p(this,e,t);return this.attr(this.array().size(n.width,n.height).toLine())}},construct:{line:function(e,t,r,a){return n.Line.prototype.plot.apply(this.put(new n.Line),null!=e?[e,t,r,a]:[0,0,0,0])}}}),n.Polyline=n.invent({create:"polyline",inherit:n.Shape,construct:{polyline:function(e){return this.put(new n.Polyline).plot(e||new n.PointArray)}}}),n.Polygon=n.invent({create:"polygon",inherit:n.Shape,construct:{polygon:function(e){return this.put(new n.Polygon).plot(e||new n.PointArray)}}}),n.extend(n.Polyline,n.Polygon,{array:function(){return this._array||(this._array=new n.PointArray(this.attr("points")))},plot:function(e){return null==e?this.array():this.clear().attr("points","string"==typeof e?e:this._array=new n.PointArray(e))},clear:function(){return delete this._array,this},move:function(e,t){return this.attr("points",this.array().move(e,t))},size:function(e,t){var n=p(this,e,t);return this.attr("points",this.array().size(n.width,n.height))}}),n.extend(n.Line,n.Polyline,n.Polygon,{morphArray:n.PointArray,x:function(e){return null==e?this.bbox().x:this.move(e,this.bbox().y)},y:function(e){return null==e?this.bbox().y:this.move(this.bbox().x,e)},width:function(e){var t=this.bbox();return null==e?t.width:this.size(e,t.height)},height:function(e){var t=this.bbox();return null==e?t.height:this.size(t.width,e)}}),n.Path=n.invent({create:"path",inherit:n.Shape,extend:{morphArray:n.PathArray,array:function(){return this._array||(this._array=new n.PathArray(this.attr("d")))},plot:function(e){return null==e?this.array():this.clear().attr("d","string"==typeof e?e:this._array=new n.PathArray(e))},clear:function(){return delete this._array,this}},construct:{path:function(e){return this.put(new n.Path).plot(e||new n.PathArray)}}}),n.Image=n.invent({create:"image",inherit:n.Shape,extend:{load:function(t){if(!t)return this;var r=this,a=new e.Image;return n.on(a,"load",(function(){n.off(a);var e=r.parent(n.Pattern);null!==e&&(0==r.width()&&0==r.height()&&r.size(a.width,a.height),e&&0==e.width()&&0==e.height()&&e.size(r.width(),r.height()),"function"==typeof r._loaded&&r._loaded.call(r,{width:a.width,height:a.height,ratio:a.width/a.height,url:t}))})),n.on(a,"error",(function(e){n.off(a),"function"==typeof r._error&&r._error.call(r,e)})),this.attr("href",a.src=this.src=t,n.xlink)},loaded:function(e){return this._loaded=e,this},error:function(e){return this._error=e,this}},construct:{image:function(e,t,r){return this.put(new n.Image).load(e).size(t||0,r||t||0)}}}),n.Text=n.invent({create:function(){this.constructor.call(this,n.create("text")),this.dom.leading=new n.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",n.defaults.attrs["font-family"])},inherit:n.Shape,extend:{x:function(e){return null==e?this.attr("x"):this.attr("x",e)},text:function(e){if(void 0===e){e="";for(var t=this.node.childNodes,r=0,a=t.length;r<a;++r)0!=r&&3!=t[r].nodeType&&1==n.adopt(t[r]).dom.newLined&&(e+="\n"),e+=t[r].textContent;return e}if(this.clear().build(!0),"function"==typeof e)e.call(this,this);else{r=0;for(var i=(e=e.split("\n")).length;r<i;r++)this.tspan(e[r]).newLine()}return this.build(!1).rebuild()},size:function(e){return this.attr("font-size",e).rebuild()},leading:function(e){return null==e?this.dom.leading:(this.dom.leading=new n.Number(e),this.rebuild())},lines:function(){var e=(this.textPath&&this.textPath()||this).node,t=n.utils.map(n.utils.filterSVGElements(e.childNodes),(function(e){return n.adopt(e)}));return new n.Set(t)},rebuild:function(e){if("boolean"==typeof e&&(this._rebuild=e),this._rebuild){var t=this,r=0,a=this.dom.leading*new n.Number(this.attr("font-size"));this.lines().each((function(){this.dom.newLined&&(t.textPath()||this.attr("x",t.attr("x")),"\n"==this.text()?r+=a:(this.attr("dy",a+r),r=0))})),this.fire("rebuild")}return this},build:function(e){return this._build=!!e,this},setData:function(e){return this.dom=e,this.dom.leading=new n.Number(e.leading||1.3),this}},construct:{text:function(e){return this.put(new n.Text).text(e)},plain:function(e){return this.put(new n.Text).plain(e)}}}),n.Tspan=n.invent({create:"tspan",inherit:n.Shape,extend:{text:function(e){return null==e?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof e?e.call(this,this):this.plain(e),this)},dx:function(e){return this.attr("dx",e)},dy:function(e){return this.attr("dy",e)},newLine:function(){var e=this.parent(n.Text);return this.dom.newLined=!0,this.dy(e.dom.leading*e.attr("font-size")).attr("x",e.x())}}}),n.extend(n.Text,n.Tspan,{plain:function(e){return!1===this._build&&this.clear(),this.node.appendChild(t.createTextNode(e)),this},tspan:function(e){var t=(this.textPath&&this.textPath()||this).node,r=new n.Tspan;return!1===this._build&&this.clear(),t.appendChild(r.node),r.text(e)},clear:function(){for(var e=(this.textPath&&this.textPath()||this).node;e.hasChildNodes();)e.removeChild(e.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),n.TextPath=n.invent({create:"textPath",inherit:n.Parent,parent:n.Text,construct:{morphArray:n.PathArray,array:function(){var e=this.track();return e?e.array():null},plot:function(e){var t=this.track(),n=null;return t&&(n=t.plot(e)),null==e?n:this},track:function(){var e=this.textPath();if(e)return e.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return n.adopt(this.node.firstChild)}}}),n.Nested=n.invent({create:function(){this.constructor.call(this,n.create("svg")),this.style("overflow","visible")},inherit:n.Container,construct:{nested:function(){return this.put(new n.Nested)}}});var u={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(e,t){return"color"==t?e:e+"-"+t}};function l(e,t,r,a){return r+a.replace(n.regex.dots," .")}function c(e){return e.toLowerCase().replace(/-(.)/g,(function(e,t){return t.toUpperCase()}))}function d(e){return e.charAt(0).toUpperCase()+e.slice(1)}function h(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function p(e,t,n){if(null==t||null==n){var r=e.bbox();null==t?t=r.width/r.height*n:null==n&&(n=r.height/r.width*t)}return{width:t,height:n}}function f(e,t,n){return{x:t*e.a+n*e.c+0,y:t*e.b+n*e.d+0}}function m(e){return{a:e[0],b:e[1],c:e[2],d:e[3],e:e[4],f:e[5]}}function g(t){for(var r=t.childNodes.length-1;r>=0;r--)t.childNodes[r]instanceof e.SVGElement&&g(t.childNodes[r]);return n.adopt(t).id(n.eid(t.nodeName))}function v(e){return null==e.x&&(e.x=0,e.y=0,e.width=0,e.height=0),e.w=e.width,e.h=e.height,e.x2=e.x+e.width,e.y2=e.y+e.height,e.cx=e.x+e.width/2,e.cy=e.y+e.height/2,e}function y(e){return Math.abs(e)>1e-37?e:0}["fill","stroke"].forEach((function(e){var t={};t[e]=function(t){if(void 0===t)return this;if("string"==typeof t||n.Color.isRgb(t)||t&&"function"==typeof t.fill)this.attr(e,t);else for(var r=u[e].length-1;r>=0;r--)null!=t[u[e][r]]&&this.attr(u.prefix(e,u[e][r]),t[u[e][r]]);return this},n.extend(n.Element,n.FX,t)})),n.extend(n.Element,n.FX,{translate:function(e,t){return this.transform({x:e,y:t})},matrix:function(e){return this.attr("transform",new n.Matrix(6==arguments.length?[].slice.call(arguments):e))},opacity:function(e){return this.attr("opacity",e)},dx:function(e){return this.x(new n.Number(e).plus(this instanceof n.FX?0:this.x()),!0)},dy:function(e){return this.y(new n.Number(e).plus(this instanceof n.FX?0:this.y()),!0)}}),n.extend(n.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(e){return this.node.getPointAtLength(e)}}),n.Set=n.invent({create:function(e){Array.isArray(e)?this.members=e:this.clear()},extend:{add:function(){for(var e=[].slice.call(arguments),t=0,n=e.length;t<n;t++)this.members.push(e[t]);return this},remove:function(e){var t=this.index(e);return t>-1&&this.members.splice(t,1),this},each:function(e){for(var t=0,n=this.members.length;t<n;t++)e.apply(this.members[t],[t,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(e){return this.index(e)>=0},index:function(e){return this.members.indexOf(e)},get:function(e){return this.members[e]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(e){return new n.Set(e)}}}),n.FX.Set=n.invent({create:function(e){this.set=e}}),n.Set.inherit=function(){var e=[];for(var t in n.Shape.prototype)"function"==typeof n.Shape.prototype[t]&&"function"!=typeof n.Set.prototype[t]&&e.push(t);for(var t in e.forEach((function(e){n.Set.prototype[e]=function(){for(var t=0,r=this.members.length;t<r;t++)this.members[t]&&"function"==typeof this.members[t][e]&&this.members[t][e].apply(this.members[t],arguments);return"animate"==e?this.fx||(this.fx=new n.FX.Set(this)):this}})),e=[],n.FX.prototype)"function"==typeof n.FX.prototype[t]&&"function"!=typeof n.FX.Set.prototype[t]&&e.push(t);e.forEach((function(e){n.FX.Set.prototype[e]=function(){for(var t=0,n=this.set.members.length;t<n;t++)this.set.members[t].fx[e].apply(this.set.members[t].fx,arguments);return this}}))},n.extend(n.Element,{}),n.extend(n.Element,{remember:function(e,t){if("object"===o(arguments[0]))for(var n in e)this.remember(n,e[n]);else{if(1==arguments.length)return this.memory()[e];this.memory()[e]=t}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var e=arguments.length-1;e>=0;e--)delete this.memory()[arguments[e]];return this},memory:function(){return this._memory||(this._memory={})}}),n.get=function(e){var r=t.getElementById(function(e){var t=(e||"").toString().match(n.regex.reference);if(t)return t[1]}(e)||e);return n.adopt(r)},n.select=function(e,r){return new n.Set(n.utils.map((r||t).querySelectorAll(e),(function(e){return n.adopt(e)})))},n.extend(n.Parent,{select:function(e){return n.select(e,this.node)}});var b="abcdef".split("");if("function"!=typeof e.CustomEvent){var x=function(e,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var r=t.createEvent("CustomEvent");return r.initCustomEvent(e,n.bubbles,n.cancelable,n.detail),r};x.prototype=e.Event.prototype,n.CustomEvent=x}else n.CustomEvent=e.CustomEvent;return n},void 0!==(r=function(){return Pe(Oe,Oe.document)}.call(t,n,t,e))&&(e.exports=r),function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(e,t){return this.add(e,t),!e.attr("in")&&this.autoSetIn&&e.attr("in",this.source),e.attr("result")||e.attr("result",e),e},blend:function(e,t,n){return this.put(new SVG.BlendEffect(e,t,n))},colorMatrix:function(e,t){return this.put(new SVG.ColorMatrixEffect(e,t))},convolveMatrix:function(e){return this.put(new SVG.ConvolveMatrixEffect(e))},componentTransfer:function(e){return this.put(new SVG.ComponentTransferEffect(e))},composite:function(e,t,n){return this.put(new SVG.CompositeEffect(e,t,n))},flood:function(e,t){return this.put(new SVG.FloodEffect(e,t))},offset:function(e,t){return this.put(new SVG.OffsetEffect(e,t))},image:function(e){return this.put(new SVG.ImageEffect(e))},merge:function(){var e=[void 0];for(var t in arguments)e.push(arguments[t]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,e)))},gaussianBlur:function(e,t){return this.put(new SVG.GaussianBlurEffect(e,t))},morphology:function(e,t){return this.put(new SVG.MorphologyEffect(e,t))},diffuseLighting:function(e,t,n){return this.put(new SVG.DiffuseLightingEffect(e,t,n))},displacementMap:function(e,t,n,r,a){return this.put(new SVG.DisplacementMapEffect(e,t,n,r,a))},specularLighting:function(e,t,n,r){return this.put(new SVG.SpecularLightingEffect(e,t,n,r))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(e,t,n,r,a){return this.put(new SVG.TurbulenceEffect(e,t,n,r,a))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(e){var t=this.put(new SVG.Filter);return"function"==typeof e&&e.call(t,t),t}}),SVG.extend(SVG.Container,{filter:function(e){return this.defs().filter(e)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(e){return this.filterer=e instanceof SVG.Element?e:this.doc().filter(e),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(e){return this.filterer&&!0===e&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(e){return null==e?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",e)},result:function(e){return null==e?this.attr("result"):this.attr("result",e)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(e){return null==e?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",e)},result:function(e){return null==e?this.attr("result"):this.attr("result",e)},toString:function(){return this.result()}}});var e={blend:function(e,t){return this.parent()&&this.parent().blend(this,e,t)},colorMatrix:function(e,t){return this.parent()&&this.parent().colorMatrix(e,t).in(this)},convolveMatrix:function(e){return this.parent()&&this.parent().convolveMatrix(e).in(this)},componentTransfer:function(e){return this.parent()&&this.parent().componentTransfer(e).in(this)},composite:function(e,t){return this.parent()&&this.parent().composite(this,e,t)},flood:function(e,t){return this.parent()&&this.parent().flood(e,t)},offset:function(e,t){return this.parent()&&this.parent().offset(e,t).in(this)},image:function(e){return this.parent()&&this.parent().image(e)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(e,t){return this.parent()&&this.parent().gaussianBlur(e,t).in(this)},morphology:function(e,t){return this.parent()&&this.parent().morphology(e,t).in(this)},diffuseLighting:function(e,t,n){return this.parent()&&this.parent().diffuseLighting(e,t,n).in(this)},displacementMap:function(e,t,n,r){return this.parent()&&this.parent().displacementMap(this,e,t,n,r)},specularLighting:function(e,t,n,r){return this.parent()&&this.parent().specularLighting(e,t,n,r).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(e,t,n,r,a){return this.parent()&&this.parent().turbulence(e,t,n,r,a).in(this)}};SVG.extend(SVG.Effect,e),SVG.extend(SVG.ParentEffect,e),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(e){this.attr("in",e)}}});var t={blend:function(e,t,n){this.attr({in:e,in2:t,mode:n||"normal"})},colorMatrix:function(e,t){"matrix"==e&&(t=a(t)),this.attr({type:e,values:void 0===t?null:t})},convolveMatrix:function(e){e=a(e),this.attr({order:Math.sqrt(e.split(" ").length),kernelMatrix:e})},composite:function(e,t,n){this.attr({in:e,in2:t,operator:n})},flood:function(e,t){this.attr("flood-color",e),null!=t&&this.attr("flood-opacity",t)},offset:function(e,t){this.attr({dx:e,dy:t})},image:function(e){this.attr("href",e,SVG.xlink)},displacementMap:function(e,t,n,r,a){this.attr({in:e,in2:t,scale:n,xChannelSelector:r,yChannelSelector:a})},gaussianBlur:function(e,t){null!=e||null!=t?this.attr("stdDeviation",i(Array.prototype.slice.call(arguments))):this.attr("stdDeviation","0 0")},morphology:function(e,t){this.attr({operator:e,radius:t})},tile:function(){},turbulence:function(e,t,n,r,a){this.attr({numOctaves:t,seed:n,stitchTiles:r,baseFrequency:e,type:a})}},n={merge:function(){var e;if(arguments[0]instanceof SVG.Set){var t=this;arguments[0].each((function(e){this instanceof SVG.MergeNode?t.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&t.put(new SVG.MergeNode(this))}))}else{e=Array.isArray(arguments[0])?arguments[0]:arguments;for(var n=0;n<e.length;n++)e[n]instanceof SVG.MergeNode?this.put(e[n]):this.put(new SVG.MergeNode(e[n]))}},componentTransfer:function(e){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(e){this[e]=new(SVG["Func"+e.toUpperCase()])("identity"),this.rgb.add(this[e]),this.node.appendChild(this[e].node)}.bind(this)),e)for(var t in e.rgb&&(["r","g","b"].forEach(function(t){this[t].attr(e.rgb)}.bind(this)),delete e.rgb),e)this[t].attr(e[t])},diffuseLighting:function(e,t,n){this.attr({surfaceScale:e,diffuseConstant:t,kernelUnitLength:n})},specularLighting:function(e,t,n,r){this.attr({surfaceScale:e,diffuseConstant:t,specularExponent:n,kernelUnitLength:r})}},r={distantLight:function(e,t){this.attr({azimuth:e,elevation:t})},pointLight:function(e,t,n){this.attr({x:e,y:t,z:n})},spotLight:function(e,t,n,r,a,i){this.attr({x:e,y:t,z:n,pointsAtX:r,pointsAtY:a,pointsAtZ:i})},mergeNode:function(e){this.attr("in",e)}};function a(e){return Array.isArray(e)&&(e=new SVG.Array(e)),e.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function i(e){if(!Array.isArray(e))return e;for(var t=0,n=e.length,r=[];t<n;t++)r.push(e[t]);return r.join(" ")}function o(){var e=function(){};for(var t in"function"==typeof arguments[arguments.length-1]&&(e=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var n in arguments[t])e(arguments[t][n],n,arguments[t])}["r","g","b","a"].forEach((function(e){r["Func"+e.toUpperCase()]=function(e){switch(this.attr("type",e),e){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}})),o(t,(function(e,t){var n=t.charAt(0).toUpperCase()+t.slice(1);SVG[n+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+n)),e.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})})),o(n,(function(e,t){var n=t.charAt(0).toUpperCase()+t.slice(1);SVG[n+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+n)),e.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})})),o(r,(function(e,t){var n=t.charAt(0).toUpperCase()+t.slice(1);SVG[n]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+n)),e.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})})),SVG.extend(SVG.MergeEffect,{in:function(e){return e instanceof SVG.MergeNode?this.add(e,0):this.add(new SVG.MergeNode(e),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(e){return null==e?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",e)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function e(e,a,i,o,s,u,l){for(var c=e.slice(a,i||l),d=o.slice(s,u||l),h=0,p={pos:[0,0],start:[0,0]},f={pos:[0,0],start:[0,0]};c[h]=t.call(p,c[h]),d[h]=t.call(f,d[h]),c[h][0]!=d[h][0]||"M"==c[h][0]||"A"==c[h][0]&&(c[h][4]!=d[h][4]||c[h][5]!=d[h][5])?(Array.prototype.splice.apply(c,[h,1].concat(r.call(p,c[h]))),Array.prototype.splice.apply(d,[h,1].concat(r.call(f,d[h])))):(c[h]=n.call(p,c[h]),d[h]=n.call(f,d[h])),++h!=c.length||h!=d.length;)h==c.length&&c.push(["C",p.pos[0],p.pos[1],p.pos[0],p.pos[1],p.pos[0],p.pos[1]]),h==d.length&&d.push(["C",f.pos[0],f.pos[1],f.pos[0],f.pos[1],f.pos[0],f.pos[1]]);return{start:c,dest:d}}function t(e){switch(e[0]){case"z":case"Z":e[0]="L",e[1]=this.start[0],e[2]=this.start[1];break;case"H":e[0]="L",e[2]=this.pos[1];break;case"V":e[0]="L",e[2]=e[1],e[1]=this.pos[0];break;case"T":e[0]="Q",e[3]=e[1],e[4]=e[2],e[1]=this.reflection[1],e[2]=this.reflection[0];break;case"S":e[0]="C",e[6]=e[4],e[5]=e[3],e[4]=e[2],e[3]=e[1],e[2]=this.reflection[1],e[1]=this.reflection[0]}return e}function n(e){var t=e.length;return this.pos=[e[t-2],e[t-1]],-1!="SCQT".indexOf(e[0])&&(this.reflection=[2*this.pos[0]-e[t-4],2*this.pos[1]-e[t-3]]),e}function r(e){var t=[e];switch(e[0]){case"M":return this.pos=this.start=[e[1],e[2]],t;case"L":e[5]=e[3]=e[1],e[6]=e[4]=e[2],e[1]=this.pos[0],e[2]=this.pos[1];break;case"Q":e[6]=e[4],e[5]=e[3],e[4]=1*e[4]/3+2*e[2]/3,e[3]=1*e[3]/3+2*e[1]/3,e[2]=1*this.pos[1]/3+2*e[2]/3,e[1]=1*this.pos[0]/3+2*e[1]/3;break;case"A":e=(t=function(e,t){var n,r,a,i,o,s,u,l,c,d,h,p,f,m,g,v,y,b,x,A,w,k,S,C,I,E,T=Math.abs(t[1]),N=Math.abs(t[2]),_=t[3]%360,M=t[4],R=t[5],O=t[6],P=t[7],F=new SVG.Point(e),D=new SVG.Point(O,P),L=[];if(0===T||0===N||F.x===D.x&&F.y===D.y)return[["C",F.x,F.y,D.x,D.y,D.x,D.y]];for((r=(n=new SVG.Point((F.x-D.x)/2,(F.y-D.y)/2).transform((new SVG.Matrix).rotate(_))).x*n.x/(T*T)+n.y*n.y/(N*N))>1&&(T*=r=Math.sqrt(r),N*=r),a=(new SVG.Matrix).rotate(_).scale(1/T,1/N).rotate(-_),F=F.transform(a),s=(i=[(D=D.transform(a)).x-F.x,D.y-F.y])[0]*i[0]+i[1]*i[1],o=Math.sqrt(s),i[0]/=o,i[1]/=o,u=s<4?Math.sqrt(1-s/4):0,M===R&&(u*=-1),l=new SVG.Point((D.x+F.x)/2+u*-i[1],(D.y+F.y)/2+u*i[0]),c=new SVG.Point(F.x-l.x,F.y-l.y),d=new SVG.Point(D.x-l.x,D.y-l.y),h=Math.acos(c.x/Math.sqrt(c.x*c.x+c.y*c.y)),c.y<0&&(h*=-1),p=Math.acos(d.x/Math.sqrt(d.x*d.x+d.y*d.y)),d.y<0&&(p*=-1),R&&h>p&&(p+=2*Math.PI),!R&&h<p&&(p-=2*Math.PI),v=[],y=h,f=(p-h)/(m=Math.ceil(2*Math.abs(h-p)/Math.PI)),g=4*Math.tan(f/4)/3,w=0;w<=m;w++)x=Math.cos(y),b=Math.sin(y),A=new SVG.Point(l.x+x,l.y+b),v[w]=[new SVG.Point(A.x+g*b,A.y-g*x),A,new SVG.Point(A.x-g*b,A.y+g*x)],y+=f;for(v[0][0]=v[0][1].clone(),v[v.length-1][2]=v[v.length-1][1].clone(),a=(new SVG.Matrix).rotate(_).scale(T,N).rotate(-_),w=0,k=v.length;w<k;w++)v[w][0]=v[w][0].transform(a),v[w][1]=v[w][1].transform(a),v[w][2]=v[w][2].transform(a);for(w=1,k=v.length;w<k;w++)S=(A=v[w-1][2]).x,C=A.y,I=(A=v[w][0]).x,E=A.y,O=(A=v[w][1]).x,P=A.y,L.push(["C",S,C,I,E,O,P]);return L}(this.pos,e))[0]}return e[0]="C",this.pos=[e[5],e[6]],this.reflection=[2*e[5]-e[3],2*e[6]-e[4]],t}function a(e,t){if(!1===t)return!1;for(var n=t,r=e.length;n<r;++n)if("M"==e[n][0])return n;return!1}SVG.extend(SVG.PathArray,{morph:function(t){for(var n=this.value,r=this.parse(t),i=0,o=0,s=!1,u=!1;!1!==i||!1!==o;){var l;s=a(n,!1!==i&&i+1),u=a(r,!1!==o&&o+1),!1===i&&(i=0==(l=new SVG.PathArray(c.start).bbox()).height||0==l.width?n.push(n[0])-1:n.push(["M",l.x+l.width/2,l.y+l.height/2])-1),!1===o&&(o=0==(l=new SVG.PathArray(c.dest).bbox()).height||0==l.width?r.push(r[0])-1:r.push(["M",l.x+l.width/2,l.y+l.height/2])-1);var c=e(n,i,s,r,o,u);n=n.slice(0,i).concat(c.start,!1===s?[]:n.slice(s)),r=r.slice(0,o).concat(c.dest,!1===u?[]:r.slice(u)),i=!1!==s&&i+c.start.length,o=!1!==u&&o+c.dest.length}return this.value=n,this.destination=new SVG.PathArray,this.destination.value=r,this}})}(),function(){function e(e){e.remember("_draggable",this),this.el=e}e.prototype.init=function(e,t){var n=this;this.constraint=e,this.value=t,this.el.on("mousedown.drag",(function(e){n.start(e)})),this.el.on("touchstart.drag",(function(e){n.start(e)}))},e.prototype.transformPoint=function(e,t){var n=(e=e||window.event).changedTouches&&e.changedTouches[0]||e;return this.p.x=n.clientX-(t||0),this.p.y=n.clientY,this.p.matrixTransform(this.m)},e.prototype.getBBox=function(){var e=this.el.bbox();return this.el instanceof SVG.Nested&&(e=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(e.x=this.el.x(),e.y=this.el.y()),e},e.prototype.start=function(e){if("click"!=e.type&&"mousedown"!=e.type&&"mousemove"!=e.type||1==(e.which||e.buttons)){var t=this;if(this.el.fire("beforedrag",{event:e,handler:this}),!this.el.event().defaultPrevented){e.preventDefault(),e.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var n,r=this.getBBox();if(this.el instanceof SVG.Text)switch(n=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":n/=2;break;case"start":n=0}this.startPoints={point:this.transformPoint(e,n),box:r,transform:this.el.transform()},SVG.on(window,"mousemove.drag",(function(e){t.drag(e)})),SVG.on(window,"touchmove.drag",(function(e){t.drag(e)})),SVG.on(window,"mouseup.drag",(function(e){t.end(e)})),SVG.on(window,"touchend.drag",(function(e){t.end(e)})),this.el.fire("dragstart",{event:e,p:this.startPoints.point,m:this.m,handler:this})}}},e.prototype.drag=function(e){var t=this.getBBox(),n=this.transformPoint(e),r=this.startPoints.box.x+n.x-this.startPoints.point.x,a=this.startPoints.box.y+n.y-this.startPoints.point.y,i=this.constraint,o=n.x-this.startPoints.point.x,s=n.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:e,p:n,m:this.m,handler:this}),this.el.event().defaultPrevented)return n;if("function"==typeof i){var u=i.call(this.el,r,a,this.m);"boolean"==typeof u&&(u={x:u,y:u}),!0===u.x?this.el.x(r):!1!==u.x&&this.el.x(u.x),!0===u.y?this.el.y(a):!1!==u.y&&this.el.y(u.y)}else"object"==typeof i&&(null!=i.minX&&r<i.minX?o=(r=i.minX)-this.startPoints.box.x:null!=i.maxX&&r>i.maxX-t.width&&(o=(r=i.maxX-t.width)-this.startPoints.box.x),null!=i.minY&&a<i.minY?s=(a=i.minY)-this.startPoints.box.y:null!=i.maxY&&a>i.maxY-t.height&&(s=(a=i.maxY-t.height)-this.startPoints.box.y),null!=i.snapToGrid&&(r-=r%i.snapToGrid,a-=a%i.snapToGrid,o-=o%i.snapToGrid,s-=s%i.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:o,y:s},!0):this.el.move(r,a));return n},e.prototype.end=function(e){var t=this.drag(e);this.el.fire("dragend",{event:e,p:t,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(t,n){"function"!=typeof t&&"object"!=typeof t||(n=t,t=!0);var r=this.remember("_draggable")||new e(this);return(t=void 0===t||t)?r.init(n||{},t):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function e(e){this.el=e,e.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(e,t,n){var r="string"!=typeof e?e:t[e];return n?r/2:r},this.pointCoords=function(e,t){var n=this.pointsList[e];return{x:this.pointCoord(n[0],t,"t"===e||"b"===e),y:this.pointCoord(n[1],t,"r"===e||"l"===e)}}}e.prototype.init=function(e,t){var n=this.el.bbox();this.options={};var r=this.el.selectize.defaults.points;for(var a in this.el.selectize.defaults)this.options[a]=this.el.selectize.defaults[a],void 0!==t[a]&&(this.options[a]=t[a]);var i=["points","pointsExclude"];for(var a in i){var o=this.options[i[a]];"string"==typeof o?o=o.length>0?o.split(/\s*,\s*/i):[]:"boolean"==typeof o&&"points"===i[a]&&(o=o?r:[]),this.options[i[a]]=o}this.options.points=[r,this.options.points].reduce((function(e,t){return e.filter((function(e){return t.indexOf(e)>-1}))})),this.options.points=[this.options.points,this.options.pointsExclude].reduce((function(e,t){return e.filter((function(e){return t.indexOf(e)<0}))})),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(n.x,n.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(e):this.selectRect(e),this.observe(),this.cleanup()},e.prototype.selectPoints=function(e){return this.pointSelection.isSelected=e,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},e.prototype.getPointArray=function(){var e=this.el.bbox();return this.el.array().valueOf().map((function(t){return[t[0]-e.x,t[1]-e.y]}))},e.prototype.drawPoints=function(){for(var e=this,t=this.getPointArray(),n=0,r=t.length;n<r;++n){var a=function(t){return function(n){(n=n||window.event).preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation();var r=n.pageX||n.touches[0].pageX,a=n.pageY||n.touches[0].pageY;e.el.fire("point",{x:r,y:a,i:t,event:n})}}(n),i=this.drawPoint(t[n][0],t[n][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",a).on("mousedown",a);this.pointSelection.set.add(i)}},e.prototype.drawPoint=function(e,t){var n=this.options.pointType;switch(n){case"circle":return this.drawCircle(e,t);case"rect":return this.drawRect(e,t);default:if("function"==typeof n)return n.call(this,e,t);throw new Error("Unknown "+n+" point type!")}},e.prototype.drawCircle=function(e,t){return this.nested.circle(this.options.pointSize).center(e,t)},e.prototype.drawRect=function(e,t){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(e,t)},e.prototype.updatePointSelection=function(){var e=this.getPointArray();this.pointSelection.set.each((function(t){this.cx()===e[t][0]&&this.cy()===e[t][1]||this.center(e[t][0],e[t][1])}))},e.prototype.updateRectSelection=function(){var e=this,t=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:t.width,height:t.height}),this.options.points.length&&this.options.points.map((function(n,r){var a=e.pointCoords(n,t);e.rectSelection.set.get(r+1).center(a.x,a.y)})),this.options.rotationPoint){var n=this.rectSelection.set.length();this.rectSelection.set.get(n-1).center(t.width/2,20)}},e.prototype.selectRect=function(e){var t=this,n=this.el.bbox();function r(e){return function(n){(n=n||window.event).preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation();var r=n.pageX||n.touches[0].pageX,a=n.pageY||n.touches[0].pageY;t.el.fire(e,{x:r,y:a,event:n})}}if(this.rectSelection.isSelected=e,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(n.width,n.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map((function(e,a){var i=t.pointCoords(e,n),o=t.drawPoint(i.x,i.y).attr("class",t.options.classPoints+"_"+e).on("mousedown",r(e)).on("touchstart",r(e));t.rectSelection.set.add(o)})),this.rectSelection.set.each((function(){this.addClass(t.options.classPoints)}))),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var a=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation();var n=e.pageX||e.touches[0].pageX,r=e.pageY||e.touches[0].pageY;t.el.fire("rot",{x:n,y:r,event:e})},i=this.drawPoint(n.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",a).on("mousedown",a);this.rectSelection.set.add(i)}},e.prototype.handler=function(){var e=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(e.x,e.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},e.prototype.observe=function(){var e=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver((function(){e.handler()})),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch(e){}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",(function(){e.handler()}))},e.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each((function(){this.remove()})),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each((function(){this.remove()})),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(t,n){return"object"==typeof t&&(n=t,t=!0),(this.remember("_selectHandler")||new e(this)).init(void 0===t||t,n||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function e(e){e.remember("_resizeHandler",this),this.el=e,this.parameters={},this.lastUpdateCall=null,this.p=e.doc().node.createSVGPoint()}e.prototype.transformPoint=function(e,t,n){return this.p.x=e-(this.offset.x-window.pageXOffset),this.p.y=t-(this.offset.y-window.pageYOffset),this.p.matrixTransform(n||this.m)},e.prototype._extractPosition=function(e){return{x:null!=e.clientX?e.clientX:e.touches[0].clientX,y:null!=e.clientY?e.clientY:e.touches[0].clientY}},e.prototype.init=function(e){var t=this;if(this.stop(),"stop"!==e){for(var n in this.options={},this.el.resize.defaults)this.options[n]=this.el.resize.defaults[n],void 0!==e[n]&&(this.options[n]=e[n]);this.el.on("lt.resize",(function(e){t.resize(e||window.event)})),this.el.on("rt.resize",(function(e){t.resize(e||window.event)})),this.el.on("rb.resize",(function(e){t.resize(e||window.event)})),this.el.on("lb.resize",(function(e){t.resize(e||window.event)})),this.el.on("t.resize",(function(e){t.resize(e||window.event)})),this.el.on("r.resize",(function(e){t.resize(e||window.event)})),this.el.on("b.resize",(function(e){t.resize(e||window.event)})),this.el.on("l.resize",(function(e){t.resize(e||window.event)})),this.el.on("rot.resize",(function(e){t.resize(e||window.event)})),this.el.on("point.resize",(function(e){t.resize(e||window.event)})),this.update()}},e.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},e.prototype.resize=function(e){var t=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var n=this._extractPosition(e.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(n.x,n.y),x:e.detail.x,y:e.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==e.detail.i){var r=this.el.array().valueOf();this.parameters.i=e.detail.i,this.parameters.pointCoords=[r[e.detail.i][0],r[e.detail.i][1]]}switch(e.type){case"lt":this.calc=function(e,t){var n=this.snapToGrid(e,t);if(this.parameters.box.width-n[0]>0&&this.parameters.box.height-n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-n[0]);n=this.checkAspectRatio(n),this.el.move(this.parameters.box.x+n[0],this.parameters.box.y+n[1]).size(this.parameters.box.width-n[0],this.parameters.box.height-n[1])}};break;case"rt":this.calc=function(e,t){var n=this.snapToGrid(e,t,2);if(this.parameters.box.width+n[0]>0&&this.parameters.box.height-n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+n[0]);n=this.checkAspectRatio(n,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+n[1]).size(this.parameters.box.width+n[0],this.parameters.box.height-n[1])}};break;case"rb":this.calc=function(e,t){var n=this.snapToGrid(e,t,0);if(this.parameters.box.width+n[0]>0&&this.parameters.box.height+n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+n[0]);n=this.checkAspectRatio(n),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+n[0],this.parameters.box.height+n[1])}};break;case"lb":this.calc=function(e,t){var n=this.snapToGrid(e,t,1);if(this.parameters.box.width-n[0]>0&&this.parameters.box.height+n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-n[0]);n=this.checkAspectRatio(n,!0),this.el.move(this.parameters.box.x+n[0],this.parameters.box.y).size(this.parameters.box.width-n[0],this.parameters.box.height+n[1])}};break;case"t":this.calc=function(e,t){var n=this.snapToGrid(e,t,2);if(this.parameters.box.height-n[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+n[1]).height(this.parameters.box.height-n[1])}};break;case"r":this.calc=function(e,t){var n=this.snapToGrid(e,t,0);if(this.parameters.box.width+n[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+n[0])}};break;case"b":this.calc=function(e,t){var n=this.snapToGrid(e,t,0);if(this.parameters.box.height+n[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+n[1])}};break;case"l":this.calc=function(e,t){var n=this.snapToGrid(e,t,1);if(this.parameters.box.width-n[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+n[0],this.parameters.box.y).width(this.parameters.box.width-n[0])}};break;case"rot":this.calc=function(e,t){var n=e+this.parameters.p.x,r=t+this.parameters.p.y,a=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),i=Math.atan2(r-this.parameters.box.y-this.parameters.box.height/2,n-this.parameters.box.x-this.parameters.box.width/2),o=this.parameters.rotation+180*(i-a)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(o-o%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(e,t){var n=this.snapToGrid(e,t,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),r=this.el.array().valueOf();r[this.parameters.i][0]=this.parameters.pointCoords[0]+n[0],r[this.parameters.i][1]=this.parameters.pointCoords[1]+n[1],this.el.plot(r)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:e}),SVG.on(window,"touchmove.resize",(function(e){t.update(e||window.event)})),SVG.on(window,"touchend.resize",(function(){t.done()})),SVG.on(window,"mousemove.resize",(function(e){t.update(e||window.event)})),SVG.on(window,"mouseup.resize",(function(){t.done()}))},e.prototype.update=function(e){if(e){var t=this._extractPosition(e),n=this.transformPoint(t.x,t.y),r=n.x-this.parameters.p.x,a=n.y-this.parameters.p.y;this.lastUpdateCall=[r,a],this.calc(r,a),this.el.fire("resizing",{dx:r,dy:a,event:e})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},e.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},e.prototype.snapToGrid=function(e,t,n,r){var a;return void 0!==r?a=[(n+e)%this.options.snapToGrid,(r+t)%this.options.snapToGrid]:(n=null==n?3:n,a=[(this.parameters.box.x+e+(1&n?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+t+(2&n?0:this.parameters.box.height))%this.options.snapToGrid]),e<0&&(a[0]-=this.options.snapToGrid),t<0&&(a[1]-=this.options.snapToGrid),e-=Math.abs(a[0])<this.options.snapToGrid/2?a[0]:a[0]-(e<0?-this.options.snapToGrid:this.options.snapToGrid),t-=Math.abs(a[1])<this.options.snapToGrid/2?a[1]:a[1]-(t<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(e,t,n,r)},e.prototype.constraintToBox=function(e,t,n,r){var a,i,o=this.options.constraint||{};return void 0!==r?(a=n,i=r):(a=this.parameters.box.x+(1&n?0:this.parameters.box.width),i=this.parameters.box.y+(2&n?0:this.parameters.box.height)),void 0!==o.minX&&a+e<o.minX&&(e=o.minX-a),void 0!==o.maxX&&a+e>o.maxX&&(e=o.maxX-a),void 0!==o.minY&&i+t<o.minY&&(t=o.minY-i),void 0!==o.maxY&&i+t>o.maxY&&(t=o.maxY-i),[e,t]},e.prototype.checkAspectRatio=function(e,t){if(!this.options.saveAspectRatio)return e;var n=e.slice(),r=this.parameters.box.width/this.parameters.box.height,a=this.parameters.box.width+e[0],i=this.parameters.box.height-e[1],o=a/i;return o<r?(n[1]=a/r-this.parameters.box.height,t&&(n[1]=-n[1])):o>r&&(n[0]=this.parameters.box.width-i*r,t&&(n[0]=-n[0])),n},SVG.extend(SVG.Element,{resize:function(t){return(this.remember("_resizeHandler")||new e(this)).init(t||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var Be=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return l(e,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new x(this.ctx),this.ctx.axes=new ne(this.ctx),this.ctx.core=new Le(this.ctx.el,this.ctx),this.ctx.config=new V({}),this.ctx.data=new G(this.ctx),this.ctx.grid=new Z(this.ctx),this.ctx.graphics=new w(this.ctx),this.ctx.coreUtils=new k(this.ctx),this.ctx.crosshairs=new re(this.ctx),this.ctx.events=new ee(this.ctx),this.ctx.exports=new Y(this.ctx),this.ctx.localization=new te(this.ctx),this.ctx.options=new N,this.ctx.responsive=new ae(this.ctx),this.ctx.series=new D(this.ctx),this.ctx.theme=new ie(this.ctx),this.ctx.formatters=new X(this.ctx),this.ctx.titleSubtitle=new oe(this.ctx),this.ctx.legend=new pe(this.ctx),this.ctx.toolbar=new fe(this.ctx),this.ctx.dimensions=new de(this.ctx),this.ctx.updateHelpers=new ze(this.ctx),this.ctx.zoomPanSelection=new me(this.ctx),this.ctx.w.globals.tooltip=new we(this.ctx)}}]),e}(),We=function(){function e(t){s(this,e),this.ctx=t,this.w=t.w}return l(e,[{key:"clear",value:function(e){var t=e.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:t})}},{key:"killSVG",value:function(e){e.each((function(e,t){this.removeClass("*"),this.off(),this.stop()}),!0),e.ungroup(),e.clear()}},{key:"clearDomElements",value:function(e){var t=this,n=e.isUpdating,r=this.w.globals.dom.Paper.node;r.parentNode&&r.parentNode.parentNode&&!n&&(r.parentNode.parentNode.style.minHeight="unset");var a=this.w.globals.dom.baseEl;a&&this.ctx.eventList.forEach((function(e){a.removeEventListener(e,t.ctx.events.documentEvent)}));var i=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(i.Paper),i.Paper.remove(),i.elWrap=null,i.elGraphical=null,i.elAnnotations=null,i.elLegendWrap=null,i.baseEl=null,i.elGridRect=null,i.elGridRectMask=null,i.elGridRectMarkerMask=null,i.elForecastMask=null,i.elNonForecastMask=null,i.elDefs=null}}]),e}(),je=new WeakMap,Ve=function(){function e(t,n){s(this,e),this.opts=n,this.ctx=this,this.w=new U(n).init(),this.el=t,this.w.globals.cuid=b.randomId(),this.w.globals.chartID=this.w.config.chart.id?b.escapeString(this.w.config.chart.id):this.w.globals.cuid,new Be(this).initModules(),this.create=b.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return l(e,[{key:"render",value:function(){var e=this;return new Promise((function(t,n){if(null!==e.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),e.w.config.chart.id&&Apex._chartInstances.push({id:e.w.globals.chartID,group:e.w.config.chart.group,chart:e}),e.setLocale(e.w.config.chart.defaultLocale);var r=e.w.config.chart.events.beforeMount;if("function"==typeof r&&r(e,e.w),e.events.fireEvent("beforeMount",[e,e.w]),window.addEventListener("resize",e.windowResizeHandler),function(e,t){var n=!1,r=e.getBoundingClientRect();"none"!==e.style.display&&0!==r.width||(n=!0);var a=new ResizeObserver((function(r){n&&t.call(e,r),n=!0}));e.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(e.children).forEach((function(e){return a.observe(e)})):a.observe(e),je.set(t,a)}(e.el.parentNode,e.parentResizeHandler),!e.css){var a=e.el.getRootNode&&e.el.getRootNode(),i=b.is("ShadowRoot",a),o=e.el.ownerDocument,s=o.getElementById("apexcharts-css");!i&&s||(e.css=document.createElement("style"),e.css.id="apexcharts-css",e.css.textContent='.apexcharts-canvas {\n  position: relative;\n  user-select: none;\n  /* cannot give overflow: hidden as it will crop tooltips which overflow outside chart area */\n}\n\n\n/* scrollbar is not visible by default for legend, hence forcing the visibility */\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px;\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, .5);\n  box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5);\n}\n\n\n.apexcharts-inner {\n  position: relative;\n}\n\n.apexcharts-text tspan {\n  font-family: inherit;\n}\n\n.legend-mouseover-inactive {\n  transition: 0.15s ease all;\n  opacity: 0.20;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0;\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255, 255, 255, 0.96);\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30, 30, 30, 0.8);\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit;\n}\n\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px;\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #ECEFF1;\n  border-bottom: 1px solid #ddd;\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0, 0, 0, 0.7);\n  border-bottom: 1px solid #333;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  font-weight: 600;\n  margin-left: 5px;\n}\n\n.apexcharts-tooltip-title:empty,\n.apexcharts-tooltip-text-y-label:empty,\n.apexcharts-tooltip-text-y-value:empty,\n.apexcharts-tooltip-text-goals-label:empty,\n.apexcharts-tooltip-text-goals-value:empty,\n.apexcharts-tooltip-text-z-value:empty {\n  display: none;\n}\n\n.apexcharts-tooltip-text-y-value,\n.apexcharts-tooltip-text-goals-value,\n.apexcharts-tooltip-text-z-value {\n  font-weight: 600;\n}\n\n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-goals-group, \n.apexcharts-tooltip-text-goals-label, \n.apexcharts-tooltip-text-goals-value {\n  display: flex;\n}\n.apexcharts-tooltip-text-goals-label:not(:empty),\n.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px;\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0px;\n  margin-right: 10px;\n  border-radius: 50%;\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1;\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,\n.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px;\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0 !important;\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px;\n}\n\n.apexcharts-tooltip-box, .apexcharts-custom-tooltip {\n  padding: 4px 8px;\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse;\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0;\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: bold;\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px;\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777;\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: bold;\n  display: block;\n  margin-bottom: 5px;\n}\n\n.apexcharts-xaxistooltip {\n  opacity: 0;\n  padding: 9px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-xaxistooltip:after,\n.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-left: -6px;\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-left: -7px;\n}\n\n.apexcharts-xaxistooltip-bottom:after,\n.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%;\n}\n\n.apexcharts-xaxistooltip-top:after,\n.apexcharts-xaxistooltip-top:before {\n  top: 100%;\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #ECEFF1;\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #ECEFF1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90A4AE;\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-yaxistooltip {\n  opacity: 0;\n  padding: 4px 10px;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #ECEFF1;\n  border: 1px solid #90A4AE;\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0, 0, 0, 0.7);\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  color: #fff;\n}\n\n.apexcharts-yaxistooltip:after,\n.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: rgba(236, 239, 241, 0);\n  border-width: 6px;\n  margin-top: -6px;\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: rgba(144, 164, 174, 0);\n  border-width: 7px;\n  margin-top: -7px;\n}\n\n.apexcharts-yaxistooltip-left:after,\n.apexcharts-yaxistooltip-left:before {\n  left: 100%;\n}\n\n.apexcharts-yaxistooltip-right:after,\n.apexcharts-yaxistooltip-right:before {\n  right: 100%;\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #ECEFF1;\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90A4AE;\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0, 0, 0, 0.5);\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1;\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none;\n}\n\n.apexcharts-xcrosshairs,\n.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,\n.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0;\n}\n\n.apexcharts-selection-rect {\n  cursor: move;\n}\n\n.svg_select_boundingRect, .svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden;\n}\n.apexcharts-selection-rect + g .svg_select_boundingRect,\n.apexcharts-selection-rect + g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden;\n}\n\n.apexcharts-selection-rect + g .svg_select_points_l,\n.apexcharts-selection-rect + g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible;\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2;\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon,\n.apexcharts-reset-icon,\n.apexcharts-pan-icon,\n.apexcharts-selection-icon,\n.apexcharts-menu-icon,\n.apexcharts-toolbar-custom-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6E8192;\n  text-align: center;\n}\n\n.apexcharts-zoom-icon svg,\n.apexcharts-zoomin-icon svg,\n.apexcharts-zoomout-icon svg,\n.apexcharts-reset-icon svg,\n.apexcharts-menu-icon svg {\n  fill: #6E8192;\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(0.76)\n}\n\n.apexcharts-theme-dark .apexcharts-zoom-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomin-icon svg,\n.apexcharts-theme-dark .apexcharts-zoomout-icon svg,\n.apexcharts-theme-dark .apexcharts-reset-icon svg,\n.apexcharts-theme-dark .apexcharts-pan-icon svg,\n.apexcharts-theme-dark .apexcharts-selection-icon svg,\n.apexcharts-theme-dark .apexcharts-menu-icon svg,\n.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg {\n  fill: #f3f4f5;\n}\n\n.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg {\n  fill: #008FFB;\n}\n\n.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,\n.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,\n.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg,\n.apexcharts-theme-light .apexcharts-reset-icon:hover svg,\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg {\n  fill: #333;\n}\n\n.apexcharts-selection-icon,\n.apexcharts-menu-icon {\n  position: relative;\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px;\n}\n\n.apexcharts-zoom-icon,\n.apexcharts-reset-icon,\n.apexcharts-menu-icon {\n  transform: scale(0.85);\n}\n\n.apexcharts-zoomin-icon,\n.apexcharts-zoomout-icon {\n  transform: scale(0.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px;\n}\n\n.apexcharts-pan-icon {\n  transform: scale(0.62);\n  position: relative;\n  left: 1px;\n  top: 0px;\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6E8192;\n  stroke-width: 2;\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008FFB;\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333;\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0px 6px 2px 6px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: 0.15s ease all;\n  pointer-events: none;\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: 0.15s ease all;\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee;\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0, 0, 0, 0.7);\n  color: #fff;\n}\n\n@media screen and (min-width: 768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n    opacity: 1;\n  }\n}\n\n.apexcharts-datalabel.apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-pie-label,\n.apexcharts-datalabels,\n.apexcharts-datalabel,\n.apexcharts-datalabel-label,\n.apexcharts-datalabel-value {\n  cursor: default;\n  pointer-events: none;\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: 0.3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease;\n}\n\n.apexcharts-canvas .apexcharts-element-hidden {\n  opacity: 0;\n}\n\n.apexcharts-hide .apexcharts-series-points {\n  opacity: 0;\n}\n\n.apexcharts-gridline,\n.apexcharts-annotation-rect,\n.apexcharts-tooltip .apexcharts-marker,\n.apexcharts-area-series .apexcharts-area,\n.apexcharts-line,\n.apexcharts-zoom-rect,\n.apexcharts-toolbar svg,\n.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,\n.apexcharts-radar-series path,\n.apexcharts-radar-series polygon {\n  pointer-events: none;\n}\n\n\n/* markers */\n\n.apexcharts-marker {\n  transition: 0.15s ease all;\n}\n\n@keyframes opaque {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n\n/* Resize generated styles */\n\n@keyframes resizeanim {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 0;\n  }\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n}\n\n.resize-triggers,\n.resize-triggers>div,\n.contract-trigger:before {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n\n.resize-triggers>div {\n  background: #eee;\n  overflow: auto;\n}\n\n.contract-trigger:before {\n  width: 200%;\n  height: 200%;\n}',i?a.prepend(e.css):o.head.appendChild(e.css))}var u=e.create(e.w.config.series,{});if(!u)return t(e);e.mount(u).then((function(){"function"==typeof e.w.config.chart.events.mounted&&e.w.config.chart.events.mounted(e,e.w),e.events.fireEvent("mounted",[e,e.w]),t(u)})).catch((function(e){n(e)}))}else n(new Error("Element not found"))}))}},{key:"create",value:function(e,t){var n=this.w;new Be(this).initModules();var r=this.w.globals;if(r.noData=!1,r.animationEnded=!1,this.responsive.checkResponsiveConfig(t),n.config.xaxis.convertedCatToNumeric&&new j(n.config).convertCatToNumericXaxis(n.config,this.ctx),null===this.el)return r.animationEnded=!0,null;if(this.core.setupElements(),"treemap"===n.config.chart.type&&(n.config.grid.show=!1,n.config.yaxis[0].show=!1),0===r.svgWidth)return r.animationEnded=!0,null;var a=k.checkComboSeries(e);r.comboCharts=a.comboCharts,r.comboBarCount=a.comboBarCount;var i=e.every((function(e){return e.data&&0===e.data.length}));(0===e.length||i)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(e),this.theme.init(),new R(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),r.noData&&r.collapsedSeries.length!==r.series.length&&!n.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),r.axisCharts&&(this.core.coreCalculations(),"category"!==n.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=n.globals.minX,this.ctx.toolbar.maxX=n.globals.maxX),this.formatters.heatmapLabelFormatters(),new k(this).getLargestMarkerSize(),this.dimensions.plotCoords();var o=this.core.xySettings();this.grid.createGridMask();var s=this.core.plotChartType(e,o),u=new P(this);u.bringForward(),n.config.dataLabels.background.enabled&&u.dataLabelsBackground(),this.core.shiftGraphPosition();var l={plot:{left:n.globals.translateX,top:n.globals.translateY,width:n.globals.gridWidth,height:n.globals.gridHeight}};return{elGraph:s,xyRatios:o,elInner:n.globals.dom.elGraphical,dimensions:l}}},{key:"mount",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this,r=n.w;return new Promise((function(a,i){if(null===n.el)return i(new Error("Not enough data to display or target element not found"));(null===t||r.globals.allSeriesCollapsed)&&n.series.handleNoData(),"treemap"!==r.config.chart.type&&n.axes.drawAxis(r.config.chart.type,t.xyRatios),n.grid=new Z(n);var o=n.grid.drawGrid();n.annotations=new _(n),n.annotations.drawImageAnnos(),n.annotations.drawTextAnnos(),"back"===r.config.grid.position&&o&&r.globals.dom.elGraphical.add(o.el);var s=new K(e.ctx),u=new $(e.ctx);if(null!==o&&(s.xAxisLabelCorrections(o.xAxisTickWidth),u.setYAxisTextAlignments(),r.config.yaxis.map((function(e,t){-1===r.globals.ignoreYAxisIndexes.indexOf(t)&&u.yAxisTitleRotate(t,e.opposite)}))),"back"===r.config.annotations.position&&(r.globals.dom.Paper.add(r.globals.dom.elAnnotations),n.annotations.drawAxesAnnotations()),Array.isArray(t.elGraph))for(var l=0;l<t.elGraph.length;l++)r.globals.dom.elGraphical.add(t.elGraph[l]);else r.globals.dom.elGraphical.add(t.elGraph);if("front"===r.config.grid.position&&o&&r.globals.dom.elGraphical.add(o.el),"front"===r.config.xaxis.crosshairs.position&&n.crosshairs.drawXCrosshairs(),"front"===r.config.yaxis[0].crosshairs.position&&n.crosshairs.drawYCrosshairs(),"front"===r.config.annotations.position&&(r.globals.dom.Paper.add(r.globals.dom.elAnnotations),n.annotations.drawAxesAnnotations()),!r.globals.noData){if(r.config.tooltip.enabled&&!r.globals.noData&&n.w.globals.tooltip.drawTooltip(t.xyRatios),r.globals.axisCharts&&(r.globals.isXNumeric||r.config.xaxis.convertedCatToNumeric||r.globals.isRangeBar))(r.config.chart.zoom.enabled||r.config.chart.selection&&r.config.chart.selection.enabled||r.config.chart.pan&&r.config.chart.pan.enabled)&&n.zoomPanSelection.init({xyRatios:t.xyRatios});else{var c=r.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach((function(e){c[e]=!1}))}r.config.chart.toolbar.show&&!r.globals.allSeriesCollapsed&&n.toolbar.createToolbar()}r.globals.memory.methodsToExec.length>0&&r.globals.memory.methodsToExec.forEach((function(e){e.method(e.params,!1,e.context)})),r.globals.axisCharts||r.globals.noData||n.core.resizeNonAxisCharts(),a(n)}))}},{key:"destroy",value:function(){var e,t;window.removeEventListener("resize",this.windowResizeHandler),this.el.parentNode,e=this.parentResizeHandler,(t=je.get(e))&&(t.disconnect(),je.delete(e));var n=this.w.config.chart.id;n&&Apex._chartInstances.forEach((function(e,t){e.id===b.escapeString(n)&&Apex._chartInstances.splice(t,1)})),new We(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this.w;return o.globals.selection=void 0,e.series&&(this.series.resetSeries(!1,!0,!1),e.series.length&&e.series[0].data&&(e.series=e.series.map((function(e,n){return t.updateHelpers._extendSeries(e,n)}))),this.updateHelpers.revertDefaultAxisMinMax()),e.xaxis&&(e=this.updateHelpers.forceXAxisUpdate(e)),e.yaxis&&(e=this.updateHelpers.forceYAxisUpdate(e)),o.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),e.theme&&(e=this.theme.updateThemeOptions(e)),this.updateHelpers._updateOptions(e,n,r,a,i)}},{key:"updateSeries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(e,t,n)}},{key:"appendSeries",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.w.config.series.slice();return r.push(e),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(r,t,n)}},{key:"appendData",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this;n.w.globals.dataChanged=!0,n.series.getPreviousPaths();for(var r=n.w.config.series.slice(),a=0;a<r.length;a++)if(null!==e[a]&&void 0!==e[a])for(var i=0;i<e[a].data.length;i++)r[a].data.push(e[a].data[i]);return n.w.config.series=r,t&&(n.w.globals.initialSeries=b.clone(n.w.config.series)),this.update()}},{key:"update",value:function(e){var t=this;return new Promise((function(n,r){new We(t.ctx).clear({isUpdating:!0});var a=t.create(t.w.config.series,e);if(!a)return n(t);t.mount(a).then((function(){"function"==typeof t.w.config.chart.events.updated&&t.w.config.chart.events.updated(t,t.w),t.events.fireEvent("updated",[t,t.w]),t.w.globals.isDirty=!0,n(t)})).catch((function(e){r(e)}))}))}},{key:"getSyncedCharts",value:function(){var e=this.getGroupedCharts(),t=[this];return e.length&&(t=[],e.forEach((function(e){t.push(e)}))),t}},{key:"getGroupedCharts",value:function(){var e=this;return Apex._chartInstances.filter((function(e){if(e.group)return!0})).map((function(t){return e.w.config.chart.group===t.group?t.chart:e}))}},{key:"toggleSeries",value:function(e){return this.series.toggleSeries(e)}},{key:"highlightSeriesOnLegendHover",value:function(e,t){return this.series.toggleSeriesOnHover(e,t)}},{key:"showSeries",value:function(e){this.series.showSeries(e)}},{key:"hideSeries",value:function(e){this.series.hideSeries(e)}},{key:"resetSeries",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.series.resetSeries(e,t)}},{key:"addEventListener",value:function(e,t){this.events.addEventListener(e,t)}},{key:"removeEventListener",value:function(e,t){this.events.removeEventListener(e,t)}},{key:"addXaxisAnnotation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this;n&&(r=n),r.annotations.addXaxisAnnotationExternal(e,t,r)}},{key:"addYaxisAnnotation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this;n&&(r=n),r.annotations.addYaxisAnnotationExternal(e,t,r)}},{key:"addPointAnnotation",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this;n&&(r=n),r.annotations.addPointAnnotationExternal(e,t,r)}},{key:"clearAnnotations",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=this;e&&(t=e),t.annotations.clearAnnotations(t)}},{key:"removeAnnotation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=this;t&&(n=t),n.annotations.removeAnnotation(n,e)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(e,t){return this.coreUtils.getSeriesTotalsXRange(e,t)}},{key:"getHighestValueInSeries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Q(this.ctx);return t.getMinYMaxY(e).highestY}},{key:"getLowestValueInSeries",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Q(this.ctx);return t.getMinYMaxY(e).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(e,t){return this.updateHelpers.toggleDataPointSelection(e,t)}},{key:"zoomX",value:function(e,t){this.ctx.toolbar.zoomUpdateOptions(e,t)}},{key:"setLocale",value:function(e){this.localization.setCurrentLocaleValues(e)}},{key:"dataURI",value:function(e){return new Y(this.ctx).dataURI(e)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var e=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout((function(){e.w.globals.resized=!0,e.w.globals.dataChanged=!1,e.ctx.update()}),150)}},{key:"_windowResizeHandler",value:function(){var e=this.w.config.chart.redrawOnWindowResize;"function"==typeof e&&(e=e()),e&&this._windowResize()}}],[{key:"getChartByID",value:function(e){var t=b.escapeString(e),n=Apex._chartInstances.filter((function(e){return e.id===t}))[0];return n&&n.chart}},{key:"initOnLoad",value:function(){for(var t=document.querySelectorAll("[data-apexcharts]"),n=0;n<t.length;n++)new e(t[n],JSON.parse(t[n].getAttribute("data-options"))).render()}},{key:"exec",value:function(e,t){var n=this.getChartByID(e);if(n){n.w.globals.isExecCalled=!0;var r=null;if(-1!==n.publicMethods.indexOf(t)){for(var a=arguments.length,i=new Array(a>2?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];r=n[t].apply(n,i)}return r}}},{key:"merge",value:function(e,t){return b.extend(e,t)}}]),e}();e.exports=Ve},220:function(e,t,n){e.exports={default:n(467),__esModule:!0}},5637:function(e,t,n){e.exports={default:n(7425),__esModule:!0}},6793:function(e,t,n){e.exports={default:n(2966),__esModule:!0}},8629:function(e,t,n){e.exports={default:n(9044),__esModule:!0}},3132:function(e,t,n){e.exports={default:n(4177),__esModule:!0}},1010:function(e,t,n){e.exports={default:n(3185),__esModule:!0}},420:function(e,t){"use strict";t.Z=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},7996:function(e,t,n){"use strict";var r,a=n(6793),i=(r=a)&&r.__esModule?r:{default:r};t.Z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},386:function(e,t,n){"use strict";var r,a=n(6793),i=(r=a)&&r.__esModule?r:{default:r};t.Z=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},4646:function(e,t,n){"use strict";var r,a=n(220),i=(r=a)&&r.__esModule?r:{default:r};t.Z=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},4401:function(e,t,n){"use strict";var r=o(n(8629)),a=o(n(5637)),i=o(n(5259));function o(e){return e&&e.__esModule?e:{default:e}}t.Z=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":(0,i.default)(t)));e.prototype=(0,a.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},684:function(e,t){"use strict";t.Z=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}},6583:function(e,t,n){"use strict";var r,a=n(5259),i=(r=a)&&r.__esModule?r:{default:r};t.Z=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":(0,i.default)(t))&&"function"!==typeof t?e:t}},5259:function(e,t,n){"use strict";t.__esModule=!0;var r=o(n(1010)),a=o(n(3132)),i="function"===typeof a.default&&"symbol"===typeof r.default?function(e){return typeof e}:function(e){return e&&"function"===typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof a.default&&"symbol"===i(r.default)?function(e){return"undefined"===typeof e?"undefined":i(e)}:function(e){return e&&"function"===typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":"undefined"===typeof e?"undefined":i(e)}},467:function(e,t,n){n(3524),e.exports=n(5754).Object.assign},7425:function(e,t,n){n(7449);var r=n(5754).Object;e.exports=function(e,t){return r.create(e,t)}},2966:function(e,t,n){n(2879);var r=n(5754).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},9044:function(e,t,n){n(8338),e.exports=n(5754).Object.setPrototypeOf},4177:function(e,t,n){n(9028),n(801),n(4819),n(9309),e.exports=n(5754).Symbol},3185:function(e,t,n){n(7445),n(1450),e.exports=n(7891).f("iterator")},4402:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},4223:function(e){e.exports=function(){}},9516:function(e,t,n){var r=n(7095);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},7539:function(e,t,n){var r=n(2290),a=n(2957),i=n(1421);e.exports=function(e){return function(t,n,o){var s,u=r(t),l=a(u.length),c=i(o,l);if(e&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}}},6701:function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},5754:function(e){var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},4569:function(e,t,n){var r=n(4402);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}}},5542:function(e){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},7829:function(e,t,n){e.exports=!n(6705)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},6915:function(e,t,n){var r=n(7095),a=n(740).document,i=r(a)&&r(a.createElement);e.exports=function(e){return i?a.createElement(e):{}}},5773:function(e){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},8526:function(e,t,n){var r=n(7282),a=n(9553),i=n(4863);e.exports=function(e){var t=r(e),n=a.f;if(n)for(var o,s=n(e),u=i.f,l=0;s.length>l;)u.call(e,o=s[l++])&&t.push(o);return t}},3013:function(e,t,n){var r=n(740),a=n(5754),i=n(4569),o=n(9067),s=n(6139),u=function e(t,n,u){var l,c,d,h=t&e.F,p=t&e.G,f=t&e.S,m=t&e.P,g=t&e.B,v=t&e.W,y=p?a:a[n]||(a[n]={}),b=y.prototype,x=p?r:f?r[n]:(r[n]||{}).prototype;for(l in p&&(u=n),u)(c=!h&&x&&void 0!==x[l])&&s(y,l)||(d=c?x[l]:u[l],y[l]=p&&"function"!=typeof x[l]?u[l]:g&&c?i(d,r):v&&x[l]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):m&&"function"==typeof d?i(Function.call,d):d,m&&((y.virtual||(y.virtual={}))[l]=d,t&e.R&&b&&!b[l]&&o(b,l,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},6705:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},740:function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},6139:function(e){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},9067:function(e,t,n){var r=n(6728),a=n(7869);e.exports=n(7829)?function(e,t,n){return r.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},1015:function(e,t,n){var r=n(740).document;e.exports=r&&r.documentElement},8416:function(e,t,n){e.exports=!n(7829)&&!n(6705)((function(){return 7!=Object.defineProperty(n(6915)("div"),"a",{get:function(){return 7}}).a}))},2999:function(e,t,n){var r=n(6701);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},4683:function(e,t,n){var r=n(6701);e.exports=Array.isArray||function(e){return"Array"==r(e)}},7095:function(e){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},294:function(e,t,n){"use strict";var r=n(759),a=n(7869),i=n(9157),o={};n(9067)(o,n(102)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(o,{next:a(1,n)}),i(e,t+" Iterator")}},3906:function(e,t,n){"use strict";var r=n(4159),a=n(3013),i=n(8004),o=n(9067),s=n(6469),u=n(294),l=n(9157),c=n(49),d=n(102)("iterator"),h=!([].keys&&"next"in[].keys()),p="keys",f="values",m=function(){return this};e.exports=function(e,t,n,g,v,y,b){u(n,t,g);var x,A,w,k=function(e){if(!h&&e in E)return E[e];switch(e){case p:case f:return function(){return new n(this,e)}}return function(){return new n(this,e)}},S=t+" Iterator",C=v==f,I=!1,E=e.prototype,T=E[d]||E["@@iterator"]||v&&E[v],N=T||k(v),_=v?C?k("entries"):N:void 0,M="Array"==t&&E.entries||T;if(M&&(w=c(M.call(new e)))!==Object.prototype&&w.next&&(l(w,S,!0),r||"function"==typeof w[d]||o(w,d,m)),C&&T&&T.name!==f&&(I=!0,N=function(){return T.call(this)}),r&&!b||!h&&!I&&E[d]||o(E,d,N),s[t]=N,s[S]=m,v)if(x={values:C?N:k(f),keys:y?N:k(p),entries:_},b)for(A in x)A in E||i(E,A,x[A]);else a(a.P+a.F*(h||I),t,x);return x}},7102:function(e){e.exports=function(e,t){return{value:t,done:!!e}}},6469:function(e){e.exports={}},4159:function(e){e.exports=!0},9578:function(e,t,n){var r=n(7650)("meta"),a=n(7095),i=n(6139),o=n(6728).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(6705)((function(){return u(Object.preventExtensions({}))})),c=function(e){o(e,r,{value:{i:"O"+ ++s,w:{}}})},d=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[r].i},getWeak:function(e,t){if(!i(e,r)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[r].w},onFreeze:function(e){return l&&d.NEED&&u(e)&&!i(e,r)&&c(e),e}}},6293:function(e,t,n){"use strict";var r=n(7829),a=n(7282),i=n(9553),o=n(4863),s=n(6164),u=n(2999),l=Object.assign;e.exports=!l||n(6705)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r}))?function(e,t){for(var n=s(e),l=arguments.length,c=1,d=i.f,h=o.f;l>c;)for(var p,f=u(arguments[c++]),m=d?a(f).concat(d(f)):a(f),g=m.length,v=0;g>v;)p=m[v++],r&&!h.call(f,p)||(n[p]=f[p]);return n}:l},759:function(e,t,n){var r=n(9516),a=n(4184),i=n(5773),o=n(906)("IE_PROTO"),s=function(){},u=function(){var e,t=n(6915)("iframe"),r=i.length;for(t.style.display="none",n(1015).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[i[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[o]=e):n=u(),void 0===t?n:a(n,t)}},6728:function(e,t,n){var r=n(9516),a=n(8416),i=n(6373),o=Object.defineProperty;t.f=n(7829)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),a)try{return o(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},4184:function(e,t,n){var r=n(6728),a=n(9516),i=n(7282);e.exports=n(7829)?Object.defineProperties:function(e,t){a(e);for(var n,o=i(t),s=o.length,u=0;s>u;)r.f(e,n=o[u++],t[n]);return e}},939:function(e,t,n){var r=n(4863),a=n(7869),i=n(2290),o=n(6373),s=n(6139),u=n(8416),l=Object.getOwnPropertyDescriptor;t.f=n(7829)?l:function(e,t){if(e=i(e),t=o(t,!0),u)try{return l(e,t)}catch(n){}if(s(e,t))return a(!r.f.call(e,t),e[t])}},2721:function(e,t,n){var r=n(2290),a=n(4740).f,i={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==i.call(e)?function(e){try{return a(e)}catch(t){return o.slice()}}(e):a(r(e))}},4740:function(e,t,n){var r=n(2760),a=n(5773).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,a)}},9553:function(e,t){t.f=Object.getOwnPropertySymbols},49:function(e,t,n){var r=n(6139),a=n(6164),i=n(906)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=a(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},2760:function(e,t,n){var r=n(6139),a=n(2290),i=n(7539)(!1),o=n(906)("IE_PROTO");e.exports=function(e,t){var n,s=a(e),u=0,l=[];for(n in s)n!=o&&r(s,n)&&l.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~i(l,n)||l.push(n));return l}},7282:function(e,t,n){var r=n(2760),a=n(5773);e.exports=Object.keys||function(e){return r(e,a)}},4863:function(e,t){t.f={}.propertyIsEnumerable},7869:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},8004:function(e,t,n){e.exports=n(9067)},6832:function(e,t,n){var r=n(7095),a=n(9516),i=function(e,t){if(a(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(4569)(Function.call,n(939).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(a){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},9157:function(e,t,n){var r=n(6728).f,a=n(6139),i=n(102)("toStringTag");e.exports=function(e,t,n){e&&!a(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},906:function(e,t,n){var r=n(4297)("keys"),a=n(7650);e.exports=function(e){return r[e]||(r[e]=a(e))}},4297:function(e,t,n){var r=n(5754),a=n(740),i="__core-js_shared__",o=a[i]||(a[i]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(4159)?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},5940:function(e,t,n){var r=n(6257),a=n(5542);e.exports=function(e){return function(t,n){var i,o,s=String(a(t)),u=r(n),l=s.length;return u<0||u>=l?e?"":void 0:(i=s.charCodeAt(u))<55296||i>56319||u+1===l||(o=s.charCodeAt(u+1))<56320||o>57343?e?s.charAt(u):i:e?s.slice(u,u+2):o-56320+(i-55296<<10)+65536}}},1421:function(e,t,n){var r=n(6257),a=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?a(e+t,0):i(e,t)}},6257:function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},2290:function(e,t,n){var r=n(2999),a=n(5542);e.exports=function(e){return r(a(e))}},2957:function(e,t,n){var r=n(6257),a=Math.min;e.exports=function(e){return e>0?a(r(e),9007199254740991):0}},6164:function(e,t,n){var r=n(5542);e.exports=function(e){return Object(r(e))}},6373:function(e,t,n){var r=n(7095);e.exports=function(e,t){if(!r(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!r(a=n.call(e)))return a;if(!t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},7650:function(e){var t=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+n).toString(36))}},7696:function(e,t,n){var r=n(740),a=n(5754),i=n(4159),o=n(7891),s=n(6728).f;e.exports=function(e){var t=a.Symbol||(a.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},7891:function(e,t,n){t.f=n(102)},102:function(e,t,n){var r=n(4297)("wks"),a=n(7650),i=n(740).Symbol,o="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=o&&i[e]||(o?i:a)("Symbol."+e))}).store=r},9358:function(e,t,n){"use strict";var r=n(4223),a=n(7102),i=n(6469),o=n(2290);e.exports=n(3906)(Array,"Array",(function(e,t){this._t=o(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,a(1)):a(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},3524:function(e,t,n){var r=n(3013);r(r.S+r.F,"Object",{assign:n(6293)})},7449:function(e,t,n){var r=n(3013);r(r.S,"Object",{create:n(759)})},2879:function(e,t,n){var r=n(3013);r(r.S+r.F*!n(7829),"Object",{defineProperty:n(6728).f})},8338:function(e,t,n){var r=n(3013);r(r.S,"Object",{setPrototypeOf:n(6832).set})},801:function(){},7445:function(e,t,n){"use strict";var r=n(5940)(!0);n(3906)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},9028:function(e,t,n){"use strict";var r=n(740),a=n(6139),i=n(7829),o=n(3013),s=n(8004),u=n(9578).KEY,l=n(6705),c=n(4297),d=n(9157),h=n(7650),p=n(102),f=n(7891),m=n(7696),g=n(8526),v=n(4683),y=n(9516),b=n(7095),x=n(6164),A=n(2290),w=n(6373),k=n(7869),S=n(759),C=n(2721),I=n(939),E=n(9553),T=n(6728),N=n(7282),_=I.f,M=T.f,R=C.f,O=r.Symbol,P=r.JSON,F=P&&P.stringify,D=p("_hidden"),L=p("toPrimitive"),z={}.propertyIsEnumerable,B=c("symbol-registry"),W=c("symbols"),j=c("op-symbols"),V=Object.prototype,H="function"==typeof O&&!!E.f,U=r.QObject,G=!U||!U.prototype||!U.prototype.findChild,X=i&&l((function(){return 7!=S(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=_(V,t);r&&delete V[t],M(e,t,n),r&&e!==V&&M(V,t,r)}:M,q=function(e){var t=W[e]=S(O.prototype);return t._k=e,t},Y=H&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},K=function(e,t,n){return e===V&&K(j,t,n),y(e),t=w(t,!0),y(n),a(W,t)?(n.enumerable?(a(e,D)&&e[D][t]&&(e[D][t]=!1),n=S(n,{enumerable:k(0,!1)})):(a(e,D)||M(e,D,k(1,{})),e[D][t]=!0),X(e,t,n)):M(e,t,n)},Z=function(e,t){y(e);for(var n,r=g(t=A(t)),a=0,i=r.length;i>a;)K(e,n=r[a++],t[n]);return e},J=function(e){var t=z.call(this,e=w(e,!0));return!(this===V&&a(W,e)&&!a(j,e))&&(!(t||!a(this,e)||!a(W,e)||a(this,D)&&this[D][e])||t)},Q=function(e,t){if(e=A(e),t=w(t,!0),e!==V||!a(W,t)||a(j,t)){var n=_(e,t);return!n||!a(W,t)||a(e,D)&&e[D][t]||(n.enumerable=!0),n}},$=function(e){for(var t,n=R(A(e)),r=[],i=0;n.length>i;)a(W,t=n[i++])||t==D||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===V,r=R(n?j:A(e)),i=[],o=0;r.length>o;)!a(W,t=r[o++])||n&&!a(V,t)||i.push(W[t]);return i};H||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function t(n){this===V&&t.call(j,n),a(this,D)&&a(this[D],e)&&(this[D][e]=!1),X(this,e,k(1,n))};return i&&G&&X(V,e,{configurable:!0,set:t}),q(e)},s(O.prototype,"toString",(function(){return this._k})),I.f=Q,T.f=K,n(4740).f=C.f=$,n(4863).f=J,E.f=ee,i&&!n(4159)&&s(V,"propertyIsEnumerable",J,!0),f.f=function(e){return q(p(e))}),o(o.G+o.W+o.F*!H,{Symbol:O});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var re=N(p.store),ae=0;re.length>ae;)m(re[ae++]);o(o.S+o.F*!H,"Symbol",{for:function(e){return a(B,e+="")?B[e]:B[e]=O(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),o(o.S+o.F*!H,"Object",{create:function(e,t){return void 0===t?S(e):Z(S(e),t)},defineProperty:K,defineProperties:Z,getOwnPropertyDescriptor:Q,getOwnPropertyNames:$,getOwnPropertySymbols:ee});var ie=l((function(){E.f(1)}));o(o.S+o.F*ie,"Object",{getOwnPropertySymbols:function(e){return E.f(x(e))}}),P&&o(o.S+o.F*(!H||l((function(){var e=O();return"[null]"!=F([e])||"{}"!=F({a:e})||"{}"!=F(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],a=1;arguments.length>a;)r.push(arguments[a++]);if(n=t=r[1],(b(t)||void 0!==e)&&!Y(e))return v(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Y(t))return t}),r[1]=t,F.apply(P,r)}}),O.prototype[L]||n(9067)(O.prototype,L,O.prototype.valueOf),d(O,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},4819:function(e,t,n){n(7696)("asyncIterator")},9309:function(e,t,n){n(7696)("observable")},1450:function(e,t,n){n(9358);for(var r=n(740),a=n(9067),i=n(6469),o=n(102)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var l=s[u],c=r[l],d=c&&c.prototype;d&&!d[o]&&a(d,o,l),i[l]=i.Array}},6123:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var o=a.apply(null,n);o&&e.push(o)}}else if("object"===i)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},3105:function(e,t,n){try{var r=n(2447)}catch(s){r=n(2447)}var a=/\s+/,i=Object.prototype.toString;function o(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}e.exports=function(e){return new o(e)},o.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~r(t,e)||t.push(e),this.el.className=t.join(" "),this},o.prototype.remove=function(e){if("[object RegExp]"==i.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=r(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},o.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},o.prototype.toggle=function(e,t){return this.list?("undefined"!==typeof t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):("undefined"!==typeof t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},o.prototype.array=function(){var e=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(a);return""===e[0]&&e.shift(),e},o.prototype.has=o.prototype.contains=function(e){return this.list?this.list.contains(e):!!~r(this.array(),e)}},2447:function(e){e.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},1465:function(e){e.exports=function(){"use strict";function e(t){return e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e,t,n){return u=s()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&o(a,n.prototype),a},u.apply(null,arguments)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?l(e):t}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}function h(e,t,n){return h="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=d(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}},h(e,t,n||e)}function p(e){throw Error(e)}function f(e){if(_(e)){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.call.apply(e,[this].concat(n))}}function m(e){return w(e=k(e)?Math.ceil(e):Math.floor(e))?("-"+e).toString():e}function g(e){return!C(e)&&!S(e)}function v(e,t){return function(){return t(e())}}function y(e){return function(t){return t.map(e).reduce((function(e,t){return e.concat(t)}),[])}}function b(e){return y((function(e){return e}))(e)}function x(e){return y((function(e){return Array.isArray(e)?x(e):e}))(e)}function A(e){return x(e).length}function w(e){return 1/Math.round(e)===-1/0}function k(e){return w(e)||e<0}function S(e){return null===e}function C(e){return"undefined"===typeof e}function I(e){return e instanceof Function&&!!e.name}function E(e){return"string"===typeof e}function T(e){return e instanceof Array}function N(t){var n=e(t);return null!=t&&!T(t)&&("object"==n||"function"==n)}function _(e){return e instanceof Function}function M(e){return!isNaN(e)}function R(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase()}var O=function(){function e(n){t(this,e),this.setAttribute(Object.assign({events:{}},n))}return r(e,[{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return this.events[e]&&this.events[e].forEach((function(e){e.apply(t,r)})),this}},{key:"on",value:function(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),this}},{key:"off",value:function(e,t){return this.events[e]&&t?this.events[e]=this.events[e].filter((function(e){return e!==t})):this.events[e]=[],this}},{key:"once",value:function(e,t){var n=this;return t=v(t,(function(){return n.off(e,t)})),this.on(e,t,!0)}},{key:"getAttribute",value:function(e){return this.hasOwnProperty(e)?this[e]:null}},{key:"getAttributes",value:function(){var e=this,t={};return Object.getOwnPropertyNames(this).forEach((function(n){t[n]=e.getAttribute(n)})),t}},{key:"getPublicAttributes",value:function(){var e=this;return Object.keys(this.getAttributes()).filter((function(e){return!e.match(/^\$/)})).reduce((function(t,n){return t[n]=e.getAttribute(n),t}),{})}},{key:"setAttribute",value:function(e,t){N(e)?this.setAttributes(e):this[e]=t}},{key:"setAttributes",value:function(e){for(var t in e)this.setAttribute(t,e[t])}},{key:"callback",value:function(e){return f.call(this,e)}},{key:"name",get:function(){return this.constructor.defineName instanceof Function||p("Every class must define its name."),this.constructor.defineName()}},{key:"events",get:function(){return this.$events||{}},set:function(e){this.$events=e}}],[{key:"make",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u(this,t)}}]),e}();function P(e,t){function n(e){return(t.prependLeadingZero&&1===e.toString().split("").length?"0":"").concat(e)}function r(e,t){var n=x(e).length;if(n<t)for(var r=0;r<t-n;r++)e[0].unshift("0");return e}return t=Object.assign({minimumDigits:0,prependLeadingZero:!0},t),r(b([e]).map((function(e){return b(x([e]).map((function(e){return n(e).split("")})))})),t.minimumDigits||0)}var F=[{min:48,max:57},{min:65,max:90},{min:97,max:122}];function D(e,t){return"number"===t?parseFloat(e):e}function L(e){for(var t in F){var n=e.toString().charCodeAt(0);if(F[t].min<=n&&F[t].max>=n)return F[t]}return null}function z(e,t){return String.fromCharCode(t(L(e),e.charCodeAt(0)))}function B(t){return D(t.toString().split("").map((function(e){return z(e,(function(e,t){return!e||t<e.max?t+1:e.min}))})).join(""),e(t))}function W(t){return D(t.toString().split("").map((function(e){return z(e,(function(e,t){return!e||t>e.min?t-1:e.max}))})).join(""),e(t))}var j=function(e){function n(e,r){var a;return t(this,n),a=c(this,i(n).call(this,Object.assign({format:function(e){return e},prependLeadingZero:!0,minimumDigits:0},r))),a.value||(a.value=e),a}return a(n,e),r(n,[{key:"isNaN",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return isNaN(this.value)}))},{key:"isNumber",value:function(){return M()}},{key:"clone",value:function(e,t){return new this.constructor(e,Object.assign(this.getPublicAttributes(),t))}},{key:"digits",get:function(){return this.$digits},set:function(e){this.$digits=e,this.minimumDigits=Math.max(this.minimumDigits,A(e))}},{key:"value",get:function(){return this.$value},set:function(e){this.$value=e,this.digits=P(this.format(e),{minimumDigits:this.minimumDigits,prependLeadingZero:this.prependLeadingZero})}}],[{key:"defineName",value:function(){return"FaceValue"}}]),n}(O);function V(t){for(var n=!1,r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return b(a).forEach((function(r){(S(t)&&S(r)||N(r)&&t instanceof r||_(r)&&!I(r)&&!0===r(t)||E(r)&&e(t)===r)&&(n=!0)})),n}var H={className:"The className() is not defined.",items:"The items property must be an array.",theme:"The theme property must be an object.",language:"The language must be an object.",date:"The value must be an instance of a Date.",face:"The face must be an instance of a Face class.",element:"The element must be an instance of an HTMLElement",faceValue:"The face must be an instance of a FaceValue class.",timer:"The timer property must be an instance of a Timer class."},U=function(e){function n(e,r){var a;return t(this,n),e instanceof j||!N(e)||(r=e,e=void 0),(a=c(this,i(n).call(this))).setAttributes(Object.assign({autoStart:!0,countdown:!1,animationRate:500},a.defaultAttributes(),r||{})),(S(e)||C(e))&&(e=a.defaultValue()),e&&(a.value=e),a}return a(n,e),r(n,[{key:"interval",value:function(e,t){return this.countdown?this.decrement(e):this.increment(e),f.call(this,t),this.shouldStop(e)&&e.stop(),this.emit("interval")}},{key:"shouldStop",value:function(e){return!C(this.stopAt)&&this.stopAt===e.value.value}},{key:"format",value:function(e,t){return t}},{key:"defaultValue",value:function(){}},{key:"defaultAttributes",value:function(){}},{key:"defaultDataType",value:function(){}},{key:"increment",value:function(e,t){}},{key:"decrement",value:function(e,t){}},{key:"started",value:function(e){}},{key:"stopped",value:function(e){}},{key:"reset",value:function(e){}},{key:"initialized",value:function(e){}},{key:"rendered",value:function(e){}},{key:"mounted",value:function(e){this.autoStart&&e.timer.isStopped&&window.requestAnimationFrame((function(){return e.start(e)}))}},{key:"createFaceValue",value:function(e,t){var n=this;return j.make(_(t)&&!t.name?t():t,{minimumDigits:this.minimumDigits,format:function(t){return n.format(e,t)}})}},{key:"dataType",get:function(){return this.defaultDataType()}},{key:"value",get:function(){return this.$value},set:function(e){e instanceof j||(e=this.createFaceValue(e)),this.$value=e}},{key:"stopAt",get:function(){return this.$stopAt},set:function(e){this.$stopAt=e}},{key:"originalValue",get:function(){return this.$originalValue},set:function(e){this.$originalValue=e}}]),n}(O),G={years:"\u0633\u0646\u0648\u0627\u062a",months:"\u0634\u0647\u0648\u0631",days:"\u0623\u064a\u0627\u0645",hours:"\u0633\u0627\u0639\u0627\u062a",minutes:"\u062f\u0642\u0627\u0626\u0642",seconds:"\u062b\u0648\u0627\u0646\u064a"},X=["ar","ar-ar","arabic"],q=Object.freeze({dictionary:G,aliases:X}),Y={years:"Anys",months:"Mesos",days:"Dies",hours:"Hores",minutes:"Minuts",seconds:"Segons"},K=["ca","ca-es","catalan"],Z=Object.freeze({dictionary:Y,aliases:K}),J={years:"Roky",months:"M\u011bs\xedce",days:"Dny",hours:"Hodiny",minutes:"Minuty",seconds:"Sekundy"},Q=["cs","cs-cz","cz","cz-cs","czech"],$=Object.freeze({dictionary:J,aliases:Q}),ee={years:"\xc5r",months:"M\xe5neder",days:"Dage",hours:"Timer",minutes:"Minutter",seconds:"Sekunder"},te=["da","da-dk","danish"],ne=Object.freeze({dictionary:ee,aliases:te}),re={years:"Jahre",months:"Monate",days:"Tage",hours:"Stunden",minutes:"Minuten",seconds:"Sekunden"},ae=["de","de-de","german"],ie=Object.freeze({dictionary:re,aliases:ae}),oe={years:"Years",months:"Months",days:"Days",hours:"Hours",minutes:"Minutes",seconds:"Seconds"},se=["en","en-us","english"],ue=Object.freeze({dictionary:oe,aliases:se}),le={years:"A\xf1os",months:"Meses",days:"D\xedas",hours:"Horas",minutes:"Minutos",seconds:"Segundos"},ce=["es","es-es","spanish"],de=Object.freeze({dictionary:le,aliases:ce}),he={years:"\u0633\u0627\u0644",months:"\u0645\u0627\u0647",days:"\u0631\u0648\u0632",hours:"\u0633\u0627\u0639\u062a",minutes:"\u062f\u0642\u06cc\u0642\u0647",seconds:"\u062b\u0627\u0646\u06cc\u0647"},pe=["fa","fa-ir","persian"],fe=Object.freeze({dictionary:he,aliases:pe}),me={years:"Vuotta",months:"Kuukautta",days:"P\xe4iv\xe4\xe4",hours:"Tuntia",minutes:"Minuuttia",seconds:"Sekuntia"},ge=["fi","fi-fi","finnish"],ve=Object.freeze({dictionary:me,aliases:ge}),ye={years:"Ans",months:"Mois",days:"Jours",hours:"Heures",minutes:"Minutes",seconds:"Secondes"},be=["fr","fr-ca","french"],xe=Object.freeze({dictionary:ye,aliases:be}),Ae={years:"\u05e9\u05e0\u05d9\u05dd",months:"\u05d7\u05d5\u05d3\u05e9",days:"\u05d9\u05de\u05d9\u05dd",hours:"\u05e9\u05e2\u05d5\u05ea",minutes:"\u05d3\u05e7\u05d5\u05ea",seconds:"\u05e9\u05e0\u05d9\u05d5\u05ea"},we=["il","he-il","hebrew"],ke=Object.freeze({dictionary:Ae,aliases:we}),Se={years:"\xc9v",months:"H\xf3nap",days:"Nap",hours:"\xd3ra",minutes:"Perc",seconds:"M\xe1sodperc"},Ce=["hu","hu-hu","hungarian"],Ie=Object.freeze({dictionary:Se,aliases:Ce}),Ee={years:"Anni",months:"Mesi",days:"Giorni",hours:"Ore",minutes:"Minuti",seconds:"Secondi"},Te=["da","da-dk","danish"],Ne=Object.freeze({dictionary:Ee,aliases:Te}),_e={years:"\u5e74",months:"\u6708",days:"\u65e5",hours:"\u6642",minutes:"\u5206",seconds:"\u79d2"},Me=["jp","ja-jp","japanese"],Re=Object.freeze({dictionary:_e,aliases:Me}),Oe={years:"\ub144",months:"\uc6d4",days:"\uc77c",hours:"\uc2dc",minutes:"\ubd84",seconds:"\ucd08"},Pe=["ko","ko-kr","korean"],Fe=Object.freeze({dictionary:Oe,aliases:Pe}),De={years:"Gadi",months:"M\u0113ne\u0161i",days:"Dienas",hours:"Stundas",minutes:"Min\u016btes",seconds:"Sekundes"},Le=["lv","lv-lv","latvian"],ze=Object.freeze({dictionary:De,aliases:Le}),Be={years:"Jaren",months:"Maanden",days:"Dagen",hours:"Uren",minutes:"Minuten",seconds:"Seconden"},We=["nl","nl-be","dutch"],je=Object.freeze({dictionary:Be,aliases:We}),Ve={years:"\xc5r",months:"M\xe5neder",days:"Dager",hours:"Timer",minutes:"Minutter",seconds:"Sekunder"},He=["no","nb","no-nb","norwegian"],Ue=Object.freeze({dictionary:Ve,aliases:He}),Ge={years:"Lat",months:"Miesi\u0119cy",days:"Dni",hours:"Godziny",minutes:"Minuty",seconds:"Sekundy"},Xe=["pl","pl-pl","polish"],qe=Object.freeze({dictionary:Ge,aliases:Xe}),Ye={years:"Anos",months:"Meses",days:"Dias",hours:"Horas",minutes:"Minutos",seconds:"Segundos"},Ke=["pt","pt-br","portuguese"],Ze=Object.freeze({dictionary:Ye,aliases:Ke}),Je={years:"Ani",months:"Luni",days:"Zile",hours:"Ore",minutes:"Minute",seconds:"sSecunde"},Qe=["ro","ro-ro","romana"],$e=Object.freeze({dictionary:Je,aliases:Qe}),et={years:"\u043b\u0435\u0442",months:"\u043c\u0435\u0441\u044f\u0446\u0435\u0432",days:"\u0434\u043d\u0435\u0439",hours:"\u0447\u0430\u0441\u043e\u0432",minutes:"\u043c\u0438\u043d\u0443\u0442",seconds:"\u0441\u0435\u043a\u0443\u043d\u0434"},tt=["ru","ru-ru","russian"],nt=Object.freeze({dictionary:et,aliases:tt}),rt={years:"Roky",months:"Mesiace",days:"Dni",hours:"Hodiny",minutes:"Min\xfaty",seconds:"Sekundy"},at=["sk","sk-sk","slovak"],it=Object.freeze({dictionary:rt,aliases:at}),ot={years:"\xc5r",months:"M\xe5nader",days:"Dagar",hours:"Timmar",minutes:"Minuter",seconds:"Sekunder"},st=["sv","sv-se","swedish"],ut=Object.freeze({dictionary:ot,aliases:st}),lt={years:"\u0e1b\u0e35",months:"\u0e40\u0e14\u0e37\u0e2d\u0e19",days:"\u0e27\u0e31\u0e19",hours:"\u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",minutes:"\u0e19\u0e32\u0e17\u0e35",seconds:"\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35"},ct=["th","th-th","thai"],dt=Object.freeze({dictionary:lt,aliases:ct}),ht={years:"Y\u0131l",months:"Ay",days:"G\xfcn",hours:"Saat",minutes:"Dakika",seconds:"Saniye"},pt=["tr","tr-tr","turkish"],ft=Object.freeze({dictionary:ht,aliases:pt}),mt={years:"\u0440\u043e\u043a\u0438",months:"\u043c\u0456\u0441\u044f\u0446\u0456",days:"\u0434\u043d\u0456",hours:"\u0433\u043e\u0434\u0438\u043d\u0438",minutes:"\u0445\u0432\u0438\u043b\u0438\u043d\u0438",seconds:"\u0441\u0435\u043a\u0443\u043d\u0434\u0438"},gt=["ua","ua-ua","ukraine"],vt=Object.freeze({dictionary:mt,aliases:gt}),yt={years:"N\u0103m",months:"Th\xe1ng",days:"Ng\xe0y",hours:"Gi\u1edd",minutes:"Ph\xfat",seconds:"Gi\xe2y"},bt=["vn","vn-vn","vietnamese"],xt=Object.freeze({dictionary:yt,aliases:bt}),At={years:"\u5e74",months:"\u6708",days:"\u65e5",hours:"\u65f6",minutes:"\u5206",seconds:"\u79d2"},wt=["zh","zh-cn","chinese"],kt=Object.freeze({dictionary:At,aliases:wt}),St={years:"\u5e74",months:"\u6708",days:"\u65e5",hours:"\u6642",minutes:"\u5206",seconds:"\u79d2"},Ct=["zh-tw"],It=Object.freeze({dictionary:St,aliases:Ct}),Et=Object.freeze({Arabic:q,Catalan:Z,Czech:$,Danish:ne,German:ie,English:ue,Spanish:de,Persian:fe,Finnish:ve,French:xe,Hebrew:ke,Hungarian:Ie,Italian:Ne,Japanese:Re,Korean:Fe,Latvian:ze,Dutch:je,Norwegian:Ue,Polish:qe,Portuguese:Ze,Romanian:$e,Russian:nt,Slovak:it,Swedish:ut,Thai:dt,Turkish:ft,Ukrainian:vt,Vietnamese:xt,Chinese:kt,TraditionalChinese:It});function Tt(e){return e?Et[e.toLowerCase()]||Object.values(Et).find((function(t){return-1!==t.aliases.indexOf(e)})):null}function Nt(e,t){var n=E(t)?Tt(t):t;return(n.dictionary||n)[e]||e}function _t(e,t){return t.parentNode?(t.parentNode.replaceChild(e,t),e):t}function Mt(e,t){if(N(t))for(var n in t)e.setAttribute(n,t[n]);return e}function Rt(e,t){return T(t)&&t.filter(g).forEach((function(t){t instanceof HTMLElement&&e.appendChild(t)})),e}function Ot(e,t,n){return e instanceof HTMLElement||(e=document.createElement(e)),Mt(e,N(t)?t:n),N(t)||T(t)?Rt(e,t):e.innerHTML=t,e}var Pt=function(e){function n(e){var r;if(t(this,n),(r=c(this,i(n).call(this,Object.assign({parent:null},e)))).theme||p("".concat(r.name," does not have a theme defined.")),r.language||p("".concat(r.name," does not have a language defined.")),!r.theme[r.name])throw new Error("".concat(r.name," cannot be rendered because it has no template."));return r}return a(n,e),r(n,[{key:"translate",value:function(e){return Nt(e,this.language)}},{key:"t",value:function(e){return this.translate(e)}},{key:"render",value:function(){var e=Ot("div",{class:"flip-clock"===this.className?this.className:"flip-clock-"+this.className});return this.theme[this.name](e,this),this.el?this.el.innerHTML!==e.innerHTML&&(this.el=_t(e,this.el)):this.el=e,this.el}},{key:"mount",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.render(),this.parent=e,t?this.parent.insertBefore(this.el,t):this.parent.appendChild(this.el),this.el}},{key:"className",get:function(){return R(this.constructor.defineName())}},{key:"el",get:function(){return this.$el},set:function(e){V(e,null,HTMLElement)||p(H.element),this.$el=e}},{key:"parent",get:function(){return this.$parent},set:function(e){this.$parent=e}},{key:"theme",get:function(){return this.$theme},set:function(e){V(e,"object")||p(H.value),this.$theme=e}},{key:"language",get:function(){return this.$language},set:function(e){E(e)&&(e=Tt(e)),V(e,"object")||p(H.language),this.$language=e}}]),n}(O),Ft=function(e){function n(){return t(this,n),c(this,i(n).apply(this,arguments))}return a(n,e),r(n,null,[{key:"defineName",value:function(){return"Divider"}}]),n}(Pt),Dt=function(e){function n(e,r){return t(this,n),c(this,i(n).call(this,Object.assign({value:e},N(e)?e:null,r)))}return a(n,e),r(n,null,[{key:"defineName",value:function(){return"ListItem"}}]),n}(Pt),Lt=function(e){function n(e,r){return t(this,n),c(this,i(n).call(this,Object.assign({value:e,items:[]},N(e)?e:null,r)))}return a(n,e),r(n,[{key:"createListItem",value:function(e,t){var n=new Dt(e,Object.assign({theme:this.theme,language:this.language},t));return this.$items.push(n),n}},{key:"value",get:function(){return this.$value},set:function(e){this.$value=e}},{key:"items",get:function(){return this.$items},set:function(e){this.$items=e}}],[{key:"defineName",value:function(){return"List"}}]),n}(Pt),zt=function(e){function n(e,r){return t(this,n),c(this,i(n).call(this,Object.assign({items:T(e)?e:[]},N(e)?e:null,r)))}return a(n,e),r(n,null,[{key:"defineName",value:function(){return"Group"}}]),n}(Pt),Bt=function(e){function n(e,r){return t(this,n),c(this,i(n).call(this,Object.assign({label:e},N(e)?e:null,r)))}return a(n,e),r(n,null,[{key:"defineName",value:function(){return"Label"}}]),n}(Pt),Wt=function(e){function n(e){return t(this,n),c(this,i(n).call(this,Object.assign({count:0,handle:null,started:null,running:!1,interval:M(e)?e:null},N(e)?e:null)))}return a(n,e),r(n,[{key:"reset",value:function(e){var t=this;return this.stop((function(){t.count=0,t.start((function(){return f.call(t,e)})),t.emit("reset")})),this}},{key:"start",value:function(e){var t=this;return this.started=new Date,this.lastLoop=Date.now(),this.running=!0,this.emit("start"),function n(){return Date.now()-t.lastLoop>=t.interval&&(f.call(t,e),t.lastLoop=Date.now(),t.emit("interval"),t.count++),t.handle=window.requestAnimationFrame(n),t}()}},{key:"stop",value:function(e){var t=this;return this.isRunning&&setTimeout((function(){window.cancelAnimationFrame(t.handle),t.running=!1,f.call(t,e),t.emit("stop")})),this}},{key:"elapsed",get:function(){return this.lastLoop?this.lastLoop-(this.started?this.started.getTime():(new Date).getTime()):0}},{key:"isRunning",get:function(){return!0===this.running}},{key:"isStopped",get:function(){return!1===this.running}}],[{key:"defineName",value:function(){return"Timer"}}]),n}(O),jt=function(e){function n(){return t(this,n),c(this,i(n).apply(this,arguments))}return a(n,e),r(n,[{key:"increment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.value=this.value.value+t}},{key:"decrement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.value=this.value.value-t}}],[{key:"defineName",value:function(){return"Counter"}}]),n}(U),Vt=function(e){function n(){return t(this,n),c(this,i(n).apply(this,arguments))}return a(n,e),r(n,[{key:"defaultDataType",value:function(){return Date}},{key:"defaultAttributes",value:function(){return{showSeconds:!0,showLabels:!0}}},{key:"shouldStop",value:function(e){if(S(e.stopAt)||C(e.stopAt))return!1;if(this.stopAt instanceof Date)return this.countdown?this.stopAt.getTime()>=this.value.value.getTime():this.stopAt.getTime()<=this.value.value.getTime();if(M(this.stopAt)){var t=Math.floor((this.value.value.getTime()-this.originalValue.getTime())/1e3);return this.countdown?this.stopAt>=t:this.stopAt<=t}throw new Error("the stopAt property must be an instance of Date or Number.")}},{key:"increment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.value=new Date(this.value.value.getTime()+t+((new Date).getTime()-e.timer.lastLoop))}},{key:"decrement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.value=new Date(this.value.value.getTime()-t-((new Date).getTime()-e.timer.lastLoop))}},{key:"format",value:function(e,t){var n=e.timer.isRunning?e.timer.started:new Date(Date.now()-50);return[[this.getMinutes(t,n)],this.showSeconds?[this.getSeconds(t,n)]:null].filter(g)}},{key:"getMinutes",value:function(e,t){return m(this.getTotalSeconds(e,t)/60)}},{key:"getSeconds",value:function(e,t){var n=this.getTotalSeconds(e,t);return Math.abs(Math.ceil(60===n?0:n%60))}},{key:"getTotalSeconds",value:function(e,t){return e.getTime()===t.getTime()?0:Math.round((e.getTime()-t.getTime())/1e3)}}],[{key:"defineName",value:function(){return"MinuteCounter"}}]),n}(U),Ht=function(e){function n(){return t(this,n),c(this,i(n).apply(this,arguments))}return a(n,e),r(n,[{key:"format",value:function(e,t){var n=e.timer.started?t:new Date,r=e.originalValue||t,a=this.countdown?r:n,i=this.countdown?n:r,o=[[this.getHours(a,i)],[this.getMinutes(a,i)]];return this.showSeconds&&o.push([this.getSeconds(a,i)]),o}},{key:"getMinutes",value:function(e,t){return Math.abs(h(i(n.prototype),"getMinutes",this).call(this,e,t)%60)}},{key:"getHours",value:function(e,t){return Math.floor(this.getTotalSeconds(e,t)/60/60)}}],[{key:"defineName",value:function(){return"HourCounter"}}]),n}(Vt),Ut=function(e){function n(){return t(this,n),c(this,i(n).apply(this,arguments))}return a(n,e),r(n,[{key:"format",value:function(e,t){var n=e.started?t:new Date,r=e.originalValue||t,a=this.countdown?r:n,i=this.countdown?n:r,o=[[this.getDays(a,i)],[this.getHours(a,i)],[this.getMinutes(a,i)]];return this.showSeconds&&o.push([this.getSeconds(a,i)]),o}},{key:"getDays",value:function(e,t){return Math.floor(this.getTotalSeconds(e,t)/60/60/24)}},{key:"getHours",value:function(e,t){return Math.abs(h(i(n.prototype),"getHours",this).call(this,e,t)%24)}}],[{key:"defineName",value:function(){return"DayCounter"}}]),n}(Ht),Gt=function(e){function n(){return t(this,n),c(this,i(n).apply(this,arguments))}return a(n,e),r(n,[{key:"defaultDataType",value:function(){return Date}},{key:"defaultValue",value:function(){return new Date}},{key:"defaultAttributes",value:function(){return{showSeconds:!0,showLabels:!1}}},{key:"format",value:function(e,t){t||(t=new Date);var n=[[t.getHours()],[t.getMinutes()]];return this.showSeconds&&n.push([t.getSeconds()]),n}},{key:"increment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.value=new Date(this.value.value.getTime()+t+((new Date).getTime()-e.timer.lastLoop))}},{key:"decrement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.value=new Date(this.value.value.getTime()-t-((new Date).getTime()-e.timer.lastLoop))}}],[{key:"defineName",value:function(){return"TwentyFourHourClock"}}]),n}(U),Xt=function(e){function n(){return t(this,n),c(this,i(n).apply(this,arguments))}return a(n,e),r(n,[{key:"defaultAttributes",value:function(){return{showLabels:!1,showSeconds:!0,showMeridium:!0}}},{key:"format",value:function(e,t){t||(t=new Date);var n=t.getHours(),r=[n>12?n-12:0===n?12:n,t.getMinutes()];return this.meridium=n>12?"pm":"am",this.showSeconds&&r.push(t.getSeconds()),r}}],[{key:"defineName",value:function(){return"TwelveHourClock"}}]),n}(Gt),qt=function(e){function n(){return t(this,n),c(this,i(n).apply(this,arguments))}return a(n,e),r(n,[{key:"format",value:function(e,t){var n=e.timer.started?t:new Date,r=e.originalValue||t,a=this.countdown?r:n,i=this.countdown?n:r,o=[[this.getWeeks(a,i)],[this.getDays(a,i)],[this.getHours(a,i)],[this.getMinutes(a,i)]];return this.showSeconds&&o.push([this.getSeconds(a,i)]),o}},{key:"getWeeks",value:function(e,t){return Math.floor(this.getTotalSeconds(e,t)/60/60/24/7)}},{key:"getDays",value:function(e,t){return Math.abs(h(i(n.prototype),"getDays",this).call(this,e,t)%7)}}],[{key:"defineName",value:function(){return"WeekCounter"}}]),n}(Ut),Yt=function(e){function n(){return t(this,n),c(this,i(n).apply(this,arguments))}return a(n,e),r(n,[{key:"format",value:function(e,t){var n=e.timer.started?t:new Date,r=e.originalValue||t,a=this.countdown?r:n,i=this.countdown?n:r,o=[[this.getYears(a,i)],[this.getWeeks(a,i)],[this.getDays(a,i)],[this.getHours(a,i)],[this.getMinutes(a,i)]];return this.showSeconds&&o.push([this.getSeconds(a,i)]),o}},{key:"getYears",value:function(e,t){return Math.floor(Math.max(0,this.getTotalSeconds(e,t)/60/60/24/7/52))}},{key:"getWeeks",value:function(e,t){return Math.abs(h(i(n.prototype),"getWeeks",this).call(this,e,t)%52)}}],[{key:"defineName",value:function(){return"YearCounter"}}]),n}(qt),Kt=Object.freeze({Counter:jt,DayCounter:Ut,MinuteCounter:Vt,HourCounter:Ht,TwelveHourClock:Xt,TwentyFourHourClock:Gt,WeekCounter:qt,YearCounter:Yt});function Zt(e,t){Rt(e,[Ot("div",{class:"flip-clock-dot top"}),Ot("div",{class:"flip-clock-dot bottom"})])}function Jt(e,t){return e?e.childNodes?e.childNodes[t]:e[t]:null}function Qt(e){return e?e.querySelector(".flip-clock-list-item:first-child .top").innerHTML:null}function $t(e,t){Rt(e,t.value.digits.map((function(e,n){var r=Jt(t.el?t.el.querySelectorAll(".flip-clock-group"):null,n),a=e.map((function(e,n){var a=Qt(Jt(r?r.querySelectorAll(".flip-clock-list"):null,n));return t.createList(e,{domValue:a,countdown:t.countdown,animationRate:t.face.animationRate||t.face.delay})}));return t.createGroup(a)})).map((function(e){return e.render()})))}function en(e,t){Rt(e,t.items.map((function(e){return e.render()})))}function tn(e,t){e.innerHTML=t.t(t.label)}function nn(e,t){var n=t.domValue||(t.countdown?B(t.value):W(t.value));t.domValue&&t.domValue!==t.value&&e.classList.add("flip"),e.style.animationDelay="".concat(t.animationRate/2,"ms"),e.style.animationDuration="".concat(t.animationRate/2,"ms"),t.items=[t.createListItem(t.value,{active:!0}),t.createListItem(n,{active:!1})],Rt(e,t.items.map((function(e){return e.render()})))}function rn(e,t){var n=!0===t.active?"active":!1===t.active?"before":null;e.classList.add(n),Rt(e,[Ot("div",[Ot("div",t.value,{class:"top"}),Ot("div",t.value,{class:"bottom"})],{class:"flip-clock-list-item-inner"})])}function an(e,t){t.createDivider().mount(e,e.childNodes[1]),t.createDivider().mount(e,e.childNodes[3]),t.face.showSeconds&&t.createDivider().mount(e,e.childNodes[5]),t.face.showLabels&&(t.createLabel("days").mount(e.childNodes[0]),t.createLabel("hours").mount(e.childNodes[2]),t.createLabel("minutes").mount(e.childNodes[4]),t.face.showSeconds&&t.createLabel("seconds").mount(e.childNodes[6]))}function on(e,t){t.createDivider().mount(e,e.childNodes[1]),t.face.showSeconds&&t.createDivider().mount(e,e.childNodes[3]),t.face.showLabels&&(t.createLabel("hours").mount(e.childNodes[0]),t.createLabel("minutes").mount(e.childNodes[2]),t.face.showSeconds&&t.createLabel("seconds").mount(e.childNodes[4]))}function sn(e,t){t.face.showSeconds&&t.createDivider().mount(e,e.childNodes[1]),t.face.showLabels&&(t.createLabel("minutes").mount(e.childNodes[0]),t.face.showSeconds&&t.createLabel("seconds").mount(e.childNodes[2]))}function un(e,t){t.createDivider().mount(e,e.childNodes[1]),t.face.showSeconds&&t.createDivider().mount(e,e.childNodes[3]),t.face.showLabels&&(t.createLabel("hours").mount(e.childNodes[0]),t.createLabel("minutes").mount(e.childNodes[2]),t.face.showSeconds&&t.createLabel("seconds").mount(e.childNodes[4]))}function ln(e,t){if(un(e,t),t.face.showMeridium&&t.face.meridium){var n=t.createLabel(t.face.meridium),r=e.childNodes[e.childNodes.length-1];n.mount(r).classList.add("flip-clock-meridium")}}function cn(e,t){t.createDivider().mount(e,e.childNodes[1]),t.createDivider().mount(e,e.childNodes[3]),t.createDivider().mount(e,e.childNodes[5]),t.face.showSeconds&&t.createDivider().mount(e,e.childNodes[7]),t.face.showLabels&&(t.createLabel("weeks").mount(e.childNodes[0]),t.createLabel("days").mount(e.childNodes[2]),t.createLabel("hours").mount(e.childNodes[4]),t.createLabel("minutes").mount(e.childNodes[6]),t.face.showSeconds&&t.createLabel("seconds").mount(e.childNodes[8]))}function dn(e,t){t.createDivider().mount(e,e.childNodes[1]),t.createDivider().mount(e,e.childNodes[3]),t.createDivider().mount(e,e.childNodes[5]),t.createDivider().mount(e,e.childNodes[7]),t.face.showSeconds&&t.createDivider().mount(e,e.childNodes[9]),t.face.showLabels&&(t.createLabel("years").mount(e.childNodes[0]),t.createLabel("weeks").mount(e.childNodes[2]),t.createLabel("days").mount(e.childNodes[4]),t.createLabel("hours").mount(e.childNodes[6]),t.createLabel("minutes").mount(e.childNodes[8]),t.face.showSeconds&&t.createLabel("seconds").mount(e.childNodes[10]))}var hn={face:jt,theme:{Divider:Zt,FlipClock:$t,Group:en,Label:tn,List:nn,ListItem:rn,faces:Object.freeze({DayCounter:an,HourCounter:on,MinuteCounter:sn,TwelveHourClock:ln,TwentyFourHourClock:un,WeekCounter:cn,YearCounter:dn})},language:ue},pn=function(e){function n(e,r,a){var o;t(this,n),V(e,HTMLElement)||p(H.element),N(r)&&!a&&(a=r,r=void 0);var s=a.face||hn.face;return delete a.face,(o=c(this,i(n).call(this,Object.assign({originalValue:r,theme:hn.theme,language:hn.language,timer:Wt.make(a.interval||1e3)},a)))).face||(o.face=s),o.mount(e),o}return a(n,e),r(n,[{key:"mount",value:function(e){return h(i(n.prototype),"mount",this).call(this,e),this.face.mounted(this),this}},{key:"render",value:function(){return h(i(n.prototype),"render",this).call(this),this.theme.faces[this.face.name]&&this.theme.faces[this.face.name](this.el,this),this.face.rendered(this),this.el}},{key:"start",value:function(e){var t=this;return this.timer.started||(this.value=this.originalValue),C(this.face.stopAt)&&(this.face.stopAt=this.stopAt),C(this.face.originalValue)&&(this.face.originalValue=this.originalValue),this.timer.start((function(){t.face.interval(t,e)})),this.face.started(this),this.emit("start")}},{key:"stop",value:function(e){return this.timer.stop(e),this.face.stopped(this),this.emit("stop")}},{key:"reset",value:function(e){var t=this;return this.value=this.originalValue,this.timer.reset((function(){return t.interval(t,e)})),this.face.reset(this),this.emit("reset")}},{key:"increment",value:function(e){return this.face.increment(this,e),this}},{key:"decrement",value:function(e){return this.face.decrement(this,e),this}},{key:"createDivider",value:function(e){return Ft.make(Object.assign({theme:this.theme,language:this.language},e))}},{key:"createList",value:function(e,t){return Lt.make(e,Object.assign({theme:this.theme,language:this.language},t))}},{key:"createLabel",value:function(e,t){return Bt.make(e,Object.assign({theme:this.theme,language:this.language},t))}},{key:"createGroup",value:function(e,t){return zt.make(e,Object.assign({theme:this.theme,language:this.language},t))}},{key:"face",get:function(){return this.$face},set:function(e){V(e,[U,"string","function"])||p(H.face),this.$face=(Kt[e]||e).make(Object.assign(this.getPublicAttributes(),{originalValue:this.face?this.face.originalValue:void 0})),this.$face.initialized(this),this.value?this.$face.value=this.face.createFaceValue(this,this.value.value):this.value||(this.value=this.originalValue),this.el&&this.render()}},{key:"stopAt",get:function(){return _(this.$stopAt)?this.$stopAt(this):this.$stopAt},set:function(e){this.$stopAt=e}},{key:"timer",get:function(){return this.$timer},set:function(e){V(e,Wt)||p(H.timer),this.$timer=e}},{key:"value",get:function(){return this.face?this.face.value:null},set:function(e){if(!this.face)throw new Error("A face must be set before setting a value.");e instanceof j?this.face.value=e:this.value?this.face.value=this.face.value.clone(e):this.face.value=this.face.createFaceValue(this,e),this.el&&this.render()}},{key:"originalValue",get:function(){return _(this.$originalValue)&&!this.$originalValue.name?this.$originalValue():C(this.$originalValue)||S(this.$originalValue)?this.face?this.face.defaultValue():void 0:this.$originalValue},set:function(e){this.$originalValue=e}}],[{key:"defineName",value:function(){return"FlipClock"}},{key:"setDefaultFace",value:function(e){V(e,U)||p(H.face),hn.face=e}},{key:"setDefaultTheme",value:function(e){V(e,"object")||p(H.theme),hn.theme=e}},{key:"setDefaultLanguage",value:function(e){V(e,"object")||p(H.language),hn.language=e}},{key:"defaults",get:function(){return hn}}]),n}(Pt);return pn}()},1725:function(e,t,n){var r=n(781)(n(7289),"DataView");e.exports=r},9748:function(e,t,n){var r=n(6545),a=n(9843),i=n(6266),o=n(7364),s=n(4156);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=a,u.prototype.get=i,u.prototype.has=o,u.prototype.set=s,e.exports=u},5745:function(e,t,n){var r=n(329),a=n(9666),i=n(2523),o=n(4397),s=n(3316);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=a,u.prototype.get=i,u.prototype.has=o,u.prototype.set=s,e.exports=u},8579:function(e,t,n){var r=n(781)(n(7289),"Map");e.exports=r},3109:function(e,t,n){var r=n(9e3),a=n(7240),i=n(3414),o=n(7140),s=n(5429);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=a,u.prototype.get=i,u.prototype.has=o,u.prototype.set=s,e.exports=u},9946:function(e,t,n){var r=n(781)(n(7289),"Promise");e.exports=r},4199:function(e,t,n){var r=n(781)(n(7289),"Set");e.exports=r},4526:function(e,t,n){var r=n(3109),a=n(5845),i=n(5544);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=a,o.prototype.has=i,e.exports=o},7016:function(e,t,n){var r=n(5745),a=n(3653),i=n(3359),o=n(2571),s=n(1698),u=n(5883);function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=a,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=u,e.exports=l},8624:function(e,t,n){var r=n(7289).Symbol;e.exports=r},6759:function(e,t,n){var r=n(7289).Uint8Array;e.exports=r},3289:function(e,t,n){var r=n(781)(n(7289),"WeakMap");e.exports=r},4951:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}},3200:function(e,t,n){var r=n(4499),a=n(2794),i=n(5585),o=n(667),s=n(674),u=n(3153),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),c=!n&&a(e),d=!n&&!c&&o(e),h=!n&&!c&&!d&&u(e),p=n||c||d||h,f=p?r(e.length,String):[],m=f.length;for(var g in e)!t&&!l.call(e,g)||p&&("length"==g||d&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||f.push(g);return f}},5349:function(e){e.exports=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}},9330:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},9194:function(e,t,n){var r=n(3666);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},2606:function(e,t,n){var r=n(5349),a=n(5585);e.exports=function(e,t,n){var i=t(e);return a(e)?i:r(i,n(e))}},8665:function(e,t,n){var r=n(8624),a=n(3596),i=n(8186),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?a(e):i(e)}},1276:function(e,t,n){var r=n(8665),a=n(9752);e.exports=function(e){return a(e)&&"[object Arguments]"==r(e)}},7081:function(e,t,n){var r=n(9110),a=n(9752);e.exports=function e(t,n,i,o,s){return t===n||(null==t||null==n||!a(t)&&!a(n)?t!==t&&n!==n:r(t,n,i,o,e,s))}},9110:function(e,t,n){var r=n(7016),a=n(4132),i=n(9820),o=n(6353),s=n(8466),u=n(5585),l=n(667),c=n(3153),d="[object Arguments]",h="[object Array]",p="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,v){var y=u(e),b=u(t),x=y?h:s(e),A=b?h:s(t),w=(x=x==d?p:x)==p,k=(A=A==d?p:A)==p,S=x==A;if(S&&l(e)){if(!l(t))return!1;y=!0,w=!1}if(S&&!w)return v||(v=new r),y||c(e)?a(e,t,n,m,g,v):i(e,t,x,n,m,g,v);if(!(1&n)){var C=w&&f.call(e,"__wrapped__"),I=k&&f.call(t,"__wrapped__");if(C||I){var E=C?e.value():e,T=I?t.value():t;return v||(v=new r),g(E,T,n,m,v)}}return!!S&&(v||(v=new r),o(e,t,n,m,g,v))}},3186:function(e,t,n){var r=n(375),a=n(5401),i=n(1845),o=n(2043),s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,d=l.hasOwnProperty,h=RegExp("^"+c.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||a(e))&&(r(e)?h:s).test(o(e))}},7499:function(e,t,n){var r=n(8665),a=n(4276),i=n(9752),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&a(e.length)&&!!o[r(e)]}},3409:function(e,t,n){var r=n(6132),a=n(8723),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},4499:function(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},6902:function(e){e.exports=function(e){return function(t){return e(t)}}},8905:function(e){e.exports=function(e,t){return e.has(t)}},7683:function(e,t,n){var r=n(7289)["__core-js_shared__"];e.exports=r},4132:function(e,t,n){var r=n(4526),a=n(9330),i=n(8905);e.exports=function(e,t,n,o,s,u){var l=1&n,c=e.length,d=t.length;if(c!=d&&!(l&&d>c))return!1;var h=u.get(e),p=u.get(t);if(h&&p)return h==t&&p==e;var f=-1,m=!0,g=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++f<c;){var v=e[f],y=t[f];if(o)var b=l?o(y,v,f,t,e,u):o(v,y,f,e,t,u);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!a(t,(function(e,t){if(!i(g,t)&&(v===e||s(v,e,n,o,u)))return g.push(t)}))){m=!1;break}}else if(v!==y&&!s(v,y,n,o,u)){m=!1;break}}return u.delete(e),u.delete(t),m}},9820:function(e,t,n){var r=n(8624),a=n(6759),i=n(3666),o=n(4132),s=n(258),u=n(3671),l=r?r.prototype:void 0,c=l?l.valueOf:void 0;e.exports=function(e,t,n,r,l,d,h){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=s;case"[object Set]":var f=1&r;if(p||(p=u),e.size!=t.size&&!f)return!1;var m=h.get(e);if(m)return m==t;r|=2,h.set(e,t);var g=o(p(e),p(t),r,l,d,h);return h.delete(e),g;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},6353:function(e,t,n){var r=n(7253),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,o,s){var u=1&n,l=r(e),c=l.length;if(c!=r(t).length&&!u)return!1;for(var d=c;d--;){var h=l[d];if(!(u?h in t:a.call(t,h)))return!1}var p=s.get(e),f=s.get(t);if(p&&f)return p==t&&f==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=u;++d<c;){var v=e[h=l[d]],y=t[h];if(i)var b=u?i(y,v,h,t,e,s):i(v,y,h,e,t,s);if(!(void 0===b?v===y||o(v,y,n,i,s):b)){m=!1;break}g||(g="constructor"==h)}if(m&&!g){var x=e.constructor,A=t.constructor;x==A||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof A&&A instanceof A||(m=!1)}return s.delete(e),s.delete(t),m}},2692:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},7253:function(e,t,n){var r=n(2606),a=n(6504),i=n(6385);e.exports=function(e){return r(e,i,a)}},6911:function(e,t,n){var r=n(1591);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},781:function(e,t,n){var r=n(3186),a=n(760);e.exports=function(e,t){var n=a(e,t);return r(n)?n:void 0}},3596:function(e,t,n){var r=n(8624),a=Object.prototype,i=a.hasOwnProperty,o=a.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(u){}var a=o.call(e);return r&&(t?e[s]=n:delete e[s]),a}},6504:function(e,t,n){var r=n(4951),a=n(2554),i=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(e){return null==e?[]:(e=Object(e),r(o(e),(function(t){return i.call(e,t)})))}:a;e.exports=s},8466:function(e,t,n){var r=n(1725),a=n(8579),i=n(9946),o=n(4199),s=n(3289),u=n(8665),l=n(2043),c="[object Map]",d="[object Promise]",h="[object Set]",p="[object WeakMap]",f="[object DataView]",m=l(r),g=l(a),v=l(i),y=l(o),b=l(s),x=u;(r&&x(new r(new ArrayBuffer(1)))!=f||a&&x(new a)!=c||i&&x(i.resolve())!=d||o&&x(new o)!=h||s&&x(new s)!=p)&&(x=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case m:return f;case g:return c;case v:return d;case y:return h;case b:return p}return t}),e.exports=x},760:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},6545:function(e,t,n){var r=n(1353);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},9843:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},6266:function(e,t,n){var r=n(1353),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(t,e)?t[e]:void 0}},7364:function(e,t,n){var r=n(1353),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}},4156:function(e,t,n){var r=n(1353);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},674:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},1591:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5401:function(e,t,n){var r=n(7683),a=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!a&&a in e}},6132:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},329:function(e){e.exports=function(){this.__data__=[],this.size=0}},9666:function(e,t,n){var r=n(9194),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}},2523:function(e,t,n){var r=n(9194);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},4397:function(e,t,n){var r=n(9194);e.exports=function(e){return r(this.__data__,e)>-1}},3316:function(e,t,n){var r=n(9194);e.exports=function(e,t){var n=this.__data__,a=r(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}},9e3:function(e,t,n){var r=n(9748),a=n(5745),i=n(8579);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||a),string:new r}}},7240:function(e,t,n){var r=n(6911);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},3414:function(e,t,n){var r=n(6911);e.exports=function(e){return r(this,e).get(e)}},7140:function(e,t,n){var r=n(6911);e.exports=function(e){return r(this,e).has(e)}},5429:function(e,t,n){var r=n(6911);e.exports=function(e,t){var n=r(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}},258:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},1353:function(e,t,n){var r=n(781)(Object,"create");e.exports=r},8723:function(e,t,n){var r=n(9698)(Object.keys,Object);e.exports=r},7785:function(e,t,n){e=n.nmd(e);var r=n(2692),a=t&&!t.nodeType&&t,i=a&&e&&!e.nodeType&&e,o=i&&i.exports===a&&r.process,s=function(){try{var e=i&&i.require&&i.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=s},8186:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},9698:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},7289:function(e,t,n){var r=n(2692),a="object"==typeof self&&self&&self.Object===Object&&self,i=r||a||Function("return this")();e.exports=i},5845:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},5544:function(e){e.exports=function(e){return this.__data__.has(e)}},3671:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},3653:function(e,t,n){var r=n(5745);e.exports=function(){this.__data__=new r,this.size=0}},3359:function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},2571:function(e){e.exports=function(e){return this.__data__.get(e)}},1698:function(e){e.exports=function(e){return this.__data__.has(e)}},5883:function(e,t,n){var r=n(5745),a=n(8579),i=n(3109);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!a||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(o)}return n.set(e,t),this.size=n.size,this}},2043:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},3666:function(e){e.exports=function(e,t){return e===t||e!==e&&t!==t}},2794:function(e,t,n){var r=n(1276),a=n(9752),i=Object.prototype,o=i.hasOwnProperty,s=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return a(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},5585:function(e){var t=Array.isArray;e.exports=t},2114:function(e,t,n){var r=n(375),a=n(4276);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},667:function(e,t,n){e=n.nmd(e);var r=n(7289),a=n(5535),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,s=o&&o.exports===i?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||a;e.exports=u},1905:function(e,t,n){var r=n(7081);e.exports=function(e,t){return r(e,t)}},375:function(e,t,n){var r=n(8665),a=n(1845);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},4276:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},1845:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},9752:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},3153:function(e,t,n){var r=n(7499),a=n(6902),i=n(7785),o=i&&i.isTypedArray,s=o?a(o):r;e.exports=s},6385:function(e,t,n){var r=n(3200),a=n(3409),i=n(2114);e.exports=function(e){return i(e)?r(e):a(e)}},2554:function(e){e.exports=function(){return[]}},5535:function(e){e.exports=function(){return!1}},9849:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(C){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=u(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=u(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?v:g;if(t){if(e<0)return v;if(e>=p)return w}else{if(e<=-f)return k;if(e+1>=f)return A}return e<0?s(-e,t).neg():u(e%h|0,e/h|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=s,n.fromBits=u;var l=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(e.substring(1),t,n).neg();for(var a=s(l(n,8)),i=g,o=0;o<e.length;o+=8){var u=Math.min(8,e.length-o),d=parseInt(e.substring(o,o+u),n);if(u<8){var h=s(l(n,u));i=i.mul(h).add(s(d))}else i=(i=i.mul(a)).add(s(d))}return i.unsigned=t,i}function d(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?c(e,t):u(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=c,n.fromValue=d;var h=4294967296,p=h*h,f=p/2,m=o(1<<24),g=o(0);n.ZERO=g;var v=o(0,!0);n.UZERO=v;var y=o(1);n.ONE=y;var b=o(1,!0);n.UONE=b;var x=o(-1);n.NEG_ONE=x;var A=u(-1,2147483647,!1);n.MAX_VALUE=A;var w=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=w;var k=u(0,-2147483648,!1);n.MIN_VALUE=k;var S=n.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(k)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(l(e,6),this.unsigned),i=this,o="";;){var u=i.div(a),c=(i.sub(u.mul(a)).toInt()>>>0).toString(e);if((i=u).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(k)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1===(1&this.low)},S.isEven=function(){return 0===(1&this.low)},S.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(k)?k:this.not().add(y)},S.neg=S.negate,S.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,l=e.low>>>16,c=0,h=0,p=0,f=0;return p+=(f+=i+(65535&e.low))>>>16,h+=(p+=a+l)>>>16,c+=(h+=n+s)>>>16,c+=t+o,u((p&=65535)<<16|(f&=65535),(c&=65535)<<16|(h&=65535),this.unsigned)},S.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return g;if(r(e)||(e=d(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(k))return e.isOdd()?k:g;if(e.eq(k))return this.isOdd()?k:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,i=this.low>>>16,o=65535&this.low,l=e.high>>>16,c=65535&e.high,h=e.low>>>16,p=65535&e.low,f=0,v=0,y=0,b=0;return y+=(b+=o*p)>>>16,v+=(y+=i*p)>>>16,y&=65535,v+=(y+=o*h)>>>16,f+=(v+=a*p)>>>16,v&=65535,f+=(v+=i*h)>>>16,v&=65535,f+=(v+=o*c)>>>16,f+=n*p+a*h+i*c+o*l,u((y&=65535)<<16|(b&=65535),(f&=65535)<<16|(v&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,a,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return b;i=v}else{if(this.eq(k))return e.eq(y)||e.eq(x)?k:e.eq(k)?y:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?y:x:(a=this.sub(e.mul(n)),i=n.add(a.div(e)));if(e.eq(k))return this.unsigned?v:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=g}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),c=o<=48?1:l(2,o-48),h=s(n),p=h.mul(e);p.isNegative()||p.gt(a);)p=(h=s(n-=c,this.unsigned)).mul(e);h.isZero()&&(h=y),i=i.add(h),a=a.sub(p)}return i},S.div=S.divide,S.modulo=function(e){return r(e)||(e=d(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return u(~this.low,~this.high,this.unsigned)},S.and=function(e){return r(e)||(e=d(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return r(e)||(e=d(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return r(e)||(e=d(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},1843:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,i){for(var o,s,u=a(e),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))n.call(o,c)&&(u[c]=o[c]);if(t){s=t(o);for(var d=0;d<s.length;d++)r.call(o,s[d])&&(u[s[d]]=o[s[d]])}}return u}},1729:function(e,t,n){"use strict";var r=n(9165);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},5192:function(e,t,n){e.exports=n(1729)()},9165:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},7065:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}},5824:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.injectCSS=u,t.removeCSS=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=c(e,n);null===r||void 0===r||null===(t=r.parentNode)||void 0===t||t.removeChild(r)},t.updateCSS=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=s(n);if(!l.has(r)){var a=u("",n),i=a.parentNode;l.set(r,i),i.removeChild(a)}var d=c(t,n);if(d){var h,p,f;if((null===(h=n.csp)||void 0===h?void 0:h.nonce)&&d.nonce!==(null===(p=n.csp)||void 0===p?void 0:p.nonce))d.nonce=null===(f=n.csp)||void 0===f?void 0:f.nonce;return d.innerHTML!==e&&(d.innerHTML=e),d}var m=u(e,n);return m.setAttribute(o(n),t),m};var a=r(n(7065)),i="rc-util-key";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):i}function s(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function u(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,a.default)())return null;var r,i=document.createElement("style");(null===(t=n.csp)||void 0===t?void 0:t.nonce)&&(i.nonce=null===(r=n.csp)||void 0===r?void 0:r.nonce);i.innerHTML=e;var o=s(n),u=o.firstChild;return n.prepend&&o.prepend?o.prepend(i):n.prepend&&u?o.insertBefore(i,u):o.appendChild(i),i}var l=new Map;function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s(t);return Array.from(l.get(n).children).find((function(n){return"STYLE"===n.tagName&&n.getAttribute(o(t))===e}))}},4287:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.call=i,t.default=void 0,t.note=a,t.noteOnce=function(e,t){i(a,e,t)},t.resetWarned=function(){n={}},t.warning=r,t.warningOnce=o;var n={};function r(e,t){0}function a(e,t){0}function i(e,t,r){t||n[r]||(e(!1,r),n[r]=!0)}function o(e,t){i(r,e,t)}var s=o;t.default=s},4738:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,f=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function A(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case d:case i:case s:case o:case p:return e;default:switch(e=e&&e.$$typeof){case l:case h:case g:case m:case u:return e;default:return t}}case a:return t}}}function w(e){return A(e)===d}t.isFragment=function(e){return A(e)===i},t.isMemo=function(e){return A(e)===m}},2715:function(e,t,n){"use strict";e.exports=n(4738)},8446:function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n(7910)),s=n(7313),u=c(s),l=c(n(5192));function c(e){return e&&e.__esModule?e:{default:e}}window.ApexCharts=o.default;var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return u.default.createRef?n.chartRef=u.default.createRef():n.setRef=function(e){return n.chartRef=e},n.chart=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s.Component),i(e,[{key:"render",value:function(){var e=this.props,t=(e.type,e.height,e.width,e.series,e.options,function(e,t){var n={};for(var r in e)0<=t.indexOf(r)||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["type","height","width","series","options"]));return u.default.createElement("div",a({ref:u.default.createRef?this.chartRef:this.setRef},t))}},{key:"componentDidMount",value:function(){var e=u.default.createRef?this.chartRef.current:this.chartRef;this.chart=new o.default(e,this.getConfig()),this.chart.render()}},{key:"getConfig",value:function(){var e=this.props,t=e.type,n=e.height,r=e.width,a=e.series,i=e.options,o={chart:{type:t,height:n,width:r},series:a};return this.extend(i,o)}},{key:"isObject",value:function(e){return e&&"object"===(void 0===e?"undefined":r(e))&&!Array.isArray(e)&&null!=e}},{key:"extend",value:function(e,t){var n=this;"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])}return t});var r=Object.assign({},e);return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach((function(a){n.isObject(t[a])&&a in e?r[a]=n.extend(e[a],t[a]):Object.assign(r,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},a,t[a]))})),r}},{key:"componentDidUpdate",value:function(e){if(!this.chart)return null;var t=this.props,n=t.options,r=t.series,a=t.height,i=t.width,o=JSON.stringify(e.options),s=JSON.stringify(e.series),u=JSON.stringify(n),l=JSON.stringify(r);o===u&&s===l&&a===e.height&&i===e.width||(s===l?this.chart.updateOptions(this.getConfig()):o===u&&a===e.height&&i===e.width?this.chart.updateSeries(r):this.chart.updateOptions(this.getConfig()))}},{key:"componentWillUnmount",value:function(){this.chart&&"function"==typeof this.chart.destroy&&this.chart.destroy()}}]),e}();(t.Z=d).propTypes={type:l.default.string.isRequired,width:l.default.any,height:l.default.any,series:l.default.array.isRequired,options:l.default.object.isRequired},d.defaultProps={type:"line",width:"100%",height:"auto"}},534:function(e,t,n){"use strict";var r=n(7313),a=n(2224);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),w=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),E=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function F(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var D,L=Object.assign;function z(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var B=!1;function W(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var a=l.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var u="\n"+a[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function j(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 1:return e=W(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case w:return"Portal";case C:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case _:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function U(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=U(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){J(e,t);var n=U(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,U(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+U(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:U(n)}}function ie(e,t){var n=U(t.value),r=U(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function Ae(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,ke=null,Se=null;function Ce(e){if(e=ba(e)){if("function"!==typeof we)throw Error(i(280));var t=e.stateNode;t&&(t=Aa(t),we(e.stateNode,e.type,t))}}function Ie(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ee(){if(ke){var e=ke,t=Se;if(Se=ke=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Te(e,t){return e(t)}function Ne(){}var _e=!1;function Me(e,t,n){if(_e)return e(t,n);_e=!0;try{return Te(e,t,n)}finally{_e=!1,(null!==ke||null!==Se)&&(Ne(),Ee())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=Aa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Oe=!1;if(c)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ce){Oe=!1}function Fe(e,t,n,r,a,i,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var De=!1,Le=null,ze=!1,Be=null,We={onError:function(e){De=!0,Le=e}};function je(e,t,n,r,a,i,o,s,u){De=!1,Le=null,Fe.apply(We,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ue(e){if(Ve(e)!==e)throw Error(i(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return Ue(a),e;if(o===r)return Ue(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Xe(e):null}function Xe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Xe(e);if(null!==t)return t;e=e.sibling}return null}var qe=a.unstable_scheduleCallback,Ye=a.unstable_cancelCallback,Ke=a.unstable_shouldYield,Ze=a.unstable_requestPaint,Je=a.unstable_now,Qe=a.unstable_getCurrentPriorityLevel,$e=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~a;0!==s?r=dt(s):0!==(i&=o)&&(r=dt(i))}else 0!==(o=n&~a)?r=dt(o):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var At,wt,kt,St,Ct,It=!1,Et=[],Tt=null,Nt=null,_t=null,Mt=new Map,Rt=new Map,Ot=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ft(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":_t=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Dt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Lt(e){var t=ya(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Ct(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Bt(e,t,n){zt(e)&&n.delete(t)}function Wt(){It=!1,null!==Tt&&zt(Tt)&&(Tt=null),null!==Nt&&zt(Nt)&&(Nt=null),null!==_t&&zt(_t)&&(_t=null),Mt.forEach(Bt),Rt.forEach(Bt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Wt)))}function Vt(e){function t(t){return jt(t,e)}if(0<Et.length){jt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&jt(Tt,e),null!==Nt&&jt(Nt,e),null!==_t&&jt(_t,e),Mt.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Lt(n),null===n.blockedOn&&Ot.shift()}var Ht=x.ReactCurrentBatchConfig,Ut=!0;function Gt(e,t,n,r){var a=bt,i=Ht.transition;Ht.transition=null;try{bt=1,qt(e,t,n,r)}finally{bt=a,Ht.transition=i}}function Xt(e,t,n,r){var a=bt,i=Ht.transition;Ht.transition=null;try{bt=4,qt(e,t,n,r)}finally{bt=a,Ht.transition=i}}function qt(e,t,n,r){if(Ut){var a=Kt(e,t,n,r);if(null===a)Ur(e,t,r,Yt,n),Ft(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Tt=Dt(Tt,e,t,n,r,a),!0;case"dragenter":return Nt=Dt(Nt,e,t,n,r,a),!0;case"mouseover":return _t=Dt(_t,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Mt.set(i,Dt(Mt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Rt.set(i,Dt(Rt.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Ft(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&At(i),null===(i=Kt(e,t,n,r))&&Ur(e,t,r,Yt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Ur(e,t,r,null,n)}}var Yt=null;function Kt(e,t,n,r){if(Yt=null,null!==(e=ya(e=Ae(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Qt=null,$t=null;function en(){if($t)return $t;var e,t,n=Qt,r=n.length,a="value"in Jt?Jt.value:Jt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return $t=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(ln),dn=L({},ln,{view:0,detail:0}),hn=an(dn),pn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=an(pn),mn=an(L({},pn,{dataTransfer:0})),gn=an(L({},dn,{relatedTarget:0})),vn=an(L({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(L({},ln,{data:0})),An={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Cn(){return Sn}var In=L({},dn,{key:function(e){if(e.key){var t=An[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(In),Tn=an(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),_n=an(L({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Mn),On=[9,13,27,32],Pn=c&&"CompositionEvent"in window,Fn=null;c&&"documentMode"in document&&(Fn=document.documentMode);var Dn=c&&"TextEvent"in window&&!Fn,Ln=c&&(!Pn||Fn&&8<Fn&&11>=Fn),zn=String.fromCharCode(32),Bn=!1;function Wn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Un(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ie(r),0<(t=Xr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,qn=null;function Yn(e){zr(e,0)}function Kn(e){if(q(xa(e)))return e}function Zn(e,t){if("change"===e)return t}var Jn=!1;if(c){var Qn;if(c){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Qn=$n}else Qn=!1;Jn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Xn&&(Xn.detachEvent("onpropertychange",nr),qn=Xn=null)}function nr(e){if("value"===e.propertyName&&Kn(qn)){var t=[];Gn(t,qn,e,Ae(e)),Me(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Xn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(qn)}function ir(e,t){if("click"===e)return Kn(t)}function or(e,t){if("input"===e||"change"===e)return Kn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=cr(n,i);var o=cr(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=Xr(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function Ar(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:Ar("Animation","AnimationEnd"),animationiteration:Ar("Animation","AnimationIteration"),animationstart:Ar("Animation","AnimationStart"),transitionend:Ar("Transition","TransitionEnd")},kr={},Sr={};function Cr(e){if(kr[e])return kr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return kr[e]=n[t];return e}c&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Ir=Cr("animationend"),Er=Cr("animationiteration"),Tr=Cr("animationstart"),Nr=Cr("transitionend"),_r=new Map,Mr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){_r.set(e,t),u(t,[e])}for(var Or=0;Or<Mr.length;Or++){var Pr=Mr[Or];Rr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Rr(Ir,"onAnimationEnd"),Rr(Er,"onAnimationIteration"),Rr(Tr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,u,l){if(je.apply(this,arguments),De){if(!De)throw Error(i(198));var c=Le;De=!1,Le=null,ze||(ze=!0,Be=c)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==i&&a.isPropagationStopped())break e;Lr(a,s,l),i=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,l=s.currentTarget,s=s.listener,u!==i&&a.isPropagationStopped())break e;Lr(a,s,l),i=u}}}if(ze)throw e=Be,ze=!1,Be=null,e}function Br(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Wr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||Wr(t,!1,e),Wr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Wr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Zt(t)){case 1:var a=Gt;break;case 4:a=Xt;break;default:a=qt}n=a.bind(null,t,n,e),a=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Ur(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=ya(s)))return;if(5===(u=o.tag)||6===u){r=i=o;continue e}s=s.parentNode}}r=r.return}Me((function(){var r=i,a=Ae(n),o=[];e:{var s=_r.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=En;break;case"focusin":l="focus",u=gn;break;case"focusout":l="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case Ir:case Er:case Tr:u=vn;break;case Nr:u=_n;break;case"scroll":u=hn;break;case"wheel":u=Rn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Tn}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Re(f,h))&&c.push(Gr(f,m,p)))),d)break;f=f.return}0<c.length&&(s=new u(s,l,null,n,a),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(l=n.relatedTarget||n.fromElement)||!ya(l)&&!l[fa])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?ya(l):null)&&(l!==(d=Ve(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=Tn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==u?s:xa(u),p=null==l?s:xa(l),(s=new c(m,f+"leave",u,n,a)).target=d,s.relatedTarget=p,m=null,ya(a)===r&&((c=new c(h,f+"enter",l,n,a)).target=p,c.relatedTarget=d,m=c),d=m,u&&l)e:{for(h=l,f=0,p=c=u;p;p=qr(p))f++;for(p=0,m=h;m;m=qr(m))p++;for(;0<f-p;)c=qr(c),f--;for(;0<p-f;)h=qr(h),p--;for(;f--;){if(c===h||null!==h&&c===h.alternate)break e;c=qr(c),h=qr(h)}c=null}else c=null;null!==u&&Yr(o,s,u,c,!1),null!==l&&null!==d&&Yr(o,d,l,c,!0)}if("select"===(u=(s=r?xa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Zn;else if(Un(s))if(Jn)g=or;else{g=ar;var v=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ir);switch(g&&(g=g(e,r))?Gn(o,g,n,a):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?xa(r):window,e){case"focusin":(Un(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(o,n,a)}var y;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Wn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(y=en()):(Qt="value"in(Jt=a)?Jt.value:Jt.textContent,Vn=!0)),0<(v=Xr(r,b)).length&&(b=new xn(b,e,null,n,a),o.push({event:b,listeners:v}),y?b.data=y:null!==(y=jn(n))&&(b.data=y))),(y=Dn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Bn=!0,zn);case"textInput":return(e=t.data)===zn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Pn&&Wn(e,t)?(e=en(),$t=Qt=Jt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Xr(r,"onBeforeInput")).length&&(a=new xn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}zr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Re(e,n))&&r.unshift(Gr(e,i,a)),null!=(i=Re(e,t))&&r.push(Gr(e,i,a))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,a?null!=(u=Re(n,i))&&o.unshift(Gr(n,u,s)):a||null!=(u=Re(n,i))&&o.push(Gr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Kr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Zr,"")}function Qr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(i(425))}function $r(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function ua(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Vt(t)}function la(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ca(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),ha="__reactFiber$"+da,pa="__reactProps$"+da,fa="__reactContainer$"+da,ma="__reactEvents$"+da,ga="__reactListeners$"+da,va="__reactHandles$"+da;function ya(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fa]||n[ha]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ca(e);null!==e;){if(n=e[ha])return n;e=ca(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[ha]||e[fa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function Aa(e){return e[pa]||null}var wa=[],ka=-1;function Sa(e){return{current:e}}function Ca(e){0>ka||(e.current=wa[ka],wa[ka]=null,ka--)}function Ia(e,t){ka++,wa[ka]=e.current,e.current=t}var Ea={},Ta=Sa(Ea),Na=Sa(!1),_a=Ea;function Ma(e,t){var n=e.type.contextTypes;if(!n)return Ea;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ra(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oa(){Ca(Na),Ca(Ta)}function Pa(e,t,n){if(Ta.current!==Ea)throw Error(i(168));Ia(Ta,t),Ia(Na,n)}function Fa(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,H(e)||"Unknown",a));return L({},n,r)}function Da(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ea,_a=Ta.current,Ia(Ta,e),Ia(Na,Na.current),!0}function La(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Fa(e,t,_a),r.__reactInternalMemoizedMergedChildContext=e,Ca(Na),Ca(Ta),Ia(Ta,e)):Ca(Na),Ia(Na,n)}var za=null,Ba=!1,Wa=!1;function ja(e){null===za?za=[e]:za.push(e)}function Va(){if(!Wa&&null!==za){Wa=!0;var e=0,t=bt;try{var n=za;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}za=null,Ba=!1}catch(a){throw null!==za&&(za=za.slice(e+1)),qe($e,Va),a}finally{bt=t,Wa=!1}}return null}var Ha=x.ReactCurrentBatchConfig;function Ua(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ga=Sa(null),Xa=null,qa=null,Ya=null;function Ka(){Ya=qa=Xa=null}function Za(e){var t=Ga.current;Ca(Ga),e._currentValue=t}function Ja(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Qa(e,t){Xa=e,Ya=qa=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(As=!0),e.firstContext=null)}function $a(e){var t=e._currentValue;if(Ya!==e)if(e={context:e,memoizedValue:t,next:null},null===qa){if(null===Xa)throw Error(i(308));qa=e,Xa.dependencies={lanes:0,firstContext:e}}else qa=qa.next=e;return t}var ei=null,ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ai(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ii(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tl(e)?(null===(e=n.interleaved)?(t.next=t,null===ei?ei=[n]:ei.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function si(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ui(e,t,n,r){var a=e.updateQueue;ti=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var u=s,l=u.next;u.next=null,null===o?i=l:o.next=l,o=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==i){var d=a.baseState;for(o=0,c=l=u=null,s=i;;){var h=s.lane,p=s.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=L({},d,h);break e;case 2:ti=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=p,u=d):c=c.next=p,o|=h;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(h=s).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===c&&(u=d),a.baseState=u,a.firstBaseUpdate=l,a.lastBaseUpdate=c,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Ou|=o,e.lanes=o,e.memoizedState=d}}function li(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var ci=(new r.Component).refs;function di(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var hi={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ju(),a=Qu(e),i=ai(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ii(e,i),null!==(t=$u(e,a,r))&&oi(t,e,a)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ju(),a=Qu(e),i=ai(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ii(e,i),null!==(t=$u(e,a,r))&&oi(t,e,a)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ju(),r=Qu(e),a=ai(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),ii(e,a),null!==(t=$u(e,r,n))&&oi(t,e,r)}};function pi(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(a,i))}function fi(e,t,n){var r=!1,a=Ea,i=t.contextType;return"object"===typeof i&&null!==i?i=$a(i):(a=Ra(t)?_a:Ta.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ma(e,a):Ea),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=hi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function mi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&hi.enqueueReplaceState(t,t.state,null)}function gi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=ci,ni(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=$a(i):(i=Ra(t)?_a:Ta.current,a.context=Ma(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(di(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&hi.enqueueReplaceState(a,a.state,null),ui(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}var vi=[],yi=0,bi=null,xi=0,Ai=[],wi=0,ki=null,Si=1,Ci="";function Ii(e,t){vi[yi++]=xi,vi[yi++]=bi,bi=e,xi=t}function Ei(e,t,n){Ai[wi++]=Si,Ai[wi++]=Ci,Ai[wi++]=ki,ki=e;var r=Si;e=Ci;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Si=1<<32-ot(t)+a|n<<a|r,Ci=i+e}else Si=1<<i|n<<a|r,Ci=e}function Ti(e){null!==e.return&&(Ii(e,1),Ei(e,1,0))}function Ni(e){for(;e===bi;)bi=vi[--yi],vi[yi]=null,xi=vi[--yi],vi[yi]=null;for(;e===ki;)ki=Ai[--wi],Ai[wi]=null,Ci=Ai[--wi],Ai[wi]=null,Si=Ai[--wi],Ai[wi]=null}var _i=null,Mi=null,Ri=!1,Oi=null;function Pi(e,t){var n=_l(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Fi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,_i=e,Mi=la(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,_i=e,Mi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==ki?{id:Si,overflow:Ci}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=_l(18,null,null,0)).stateNode=t,n.return=e,e.child=n,_i=e,Mi=null,!0);default:return!1}}function Di(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Li(e){if(Ri){var t=Mi;if(t){var n=t;if(!Fi(e,t)){if(Di(e))throw Error(i(418));t=la(n.nextSibling);var r=_i;t&&Fi(e,t)?Pi(r,n):(e.flags=-4097&e.flags|2,Ri=!1,_i=e)}}else{if(Di(e))throw Error(i(418));e.flags=-4097&e.flags|2,Ri=!1,_i=e}}}function zi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;_i=e}function Bi(e){if(e!==_i)return!1;if(!Ri)return zi(e),Ri=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=Mi)){if(Di(e)){for(e=Mi;e;)e=la(e.nextSibling);throw Error(i(418))}for(;t;)Pi(e,t),t=la(t.nextSibling)}if(zi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Mi=la(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Mi=null}}else Mi=_i?la(e.stateNode.nextSibling):null;return!0}function Wi(){Mi=_i=null,Ri=!1}function ji(e){null===Oi?Oi=[e]:Oi.push(e)}function Vi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===ci&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Hi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ui(e){return(0,e._init)(e._payload)}function Gi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Rl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Dl(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function l(e,t,n,r){var i=n.type;return i===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===R&&Ui(i)===t.type)?((r=a(t,n.props)).ref=Vi(e,t,n),r.return=e,r):((r=Ol(n.type,n.key,n.props,null,e.mode,r)).ref=Vi(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ll(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Pl(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Dl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case A:return(n=Ol(t.type,t.key,t.props,null,e.mode,n)).ref=Vi(e,null,t),n.return=e,n;case w:return(t=Ll(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||F(t))return(t=Pl(t,e.mode,n,null)).return=e,t;Hi(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case A:return n.key===a?l(e,t,n,r):null;case w:return n.key===a?c(e,t,n,r):null;case R:return p(e,t,(a=n._init)(n._payload),r)}if(te(n)||F(n))return null!==a?null:d(e,t,n,r,null);Hi(e,n)}return null}function f(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case A:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case R:return f(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||F(r))return d(t,e=e.get(n)||null,r,a,null);Hi(t,r)}return null}function m(a,i,s,u){for(var l=null,c=null,d=i,m=i=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(a,d,s[m],u);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(a,d),i=o(v,i,m),null===c?l=v:c.sibling=v,c=v,d=g}if(m===s.length)return n(a,d),Ri&&Ii(a,m),l;if(null===d){for(;m<s.length;m++)null!==(d=h(a,s[m],u))&&(i=o(d,i,m),null===c?l=d:c.sibling=d,c=d);return Ri&&Ii(a,m),l}for(d=r(a,d);m<s.length;m++)null!==(g=f(d,a,m,s[m],u))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=o(g,i,m),null===c?l=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return t(a,e)})),Ri&&Ii(a,m),l}function g(a,s,u,l){var c=F(u);if("function"!==typeof c)throw Error(i(150));if(null==(u=c.call(u)))throw Error(i(151));for(var d=c=null,m=s,g=s=0,v=null,y=u.next();null!==m&&!y.done;g++,y=u.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(a,m,y.value,l);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(a,m),s=o(b,s,g),null===d?c=b:d.sibling=b,d=b,m=v}if(y.done)return n(a,m),Ri&&Ii(a,g),c;if(null===m){for(;!y.done;g++,y=u.next())null!==(y=h(a,y.value,l))&&(s=o(y,s,g),null===d?c=y:d.sibling=y,d=y);return Ri&&Ii(a,g),c}for(m=r(a,m);!y.done;g++,y=u.next())null!==(y=f(m,a,g,y.value,l))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=o(y,s,g),null===d?c=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(a,e)})),Ri&&Ii(a,g),c}return function e(r,i,o,u){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case A:e:{for(var l=o.key,c=i;null!==c;){if(c.key===l){if((l=o.type)===k){if(7===c.tag){n(r,c.sibling),(i=a(c,o.props.children)).return=r,r=i;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===R&&Ui(l)===c.type){n(r,c.sibling),(i=a(c,o.props)).ref=Vi(r,c,o),i.return=r,r=i;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===k?((i=Pl(o.props.children,r.mode,u,o.key)).return=r,r=i):((u=Ol(o.type,o.key,o.props,null,r.mode,u)).ref=Vi(r,i,o),u.return=r,r=u)}return s(r);case w:e:{for(c=o.key;null!==i;){if(i.key===c){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=a(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Ll(o,r.mode,u)).return=r,r=i}return s(r);case R:return e(r,i,(c=o._init)(o._payload),u)}if(te(o))return m(r,i,o,u);if(F(o))return g(r,i,o,u);Hi(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,o)).return=r,r=i):(n(r,i),(i=Dl(o,r.mode,u)).return=r,r=i),s(r)):n(r,i)}}var Xi=Gi(!0),qi=Gi(!1),Yi={},Ki=Sa(Yi),Zi=Sa(Yi),Ji=Sa(Yi);function Qi(e){if(e===Yi)throw Error(i(174));return e}function $i(e,t){switch(Ia(Ji,t),Ia(Zi,e),Ia(Ki,Yi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ca(Ki),Ia(Ki,t)}function eo(){Ca(Ki),Ca(Zi),Ca(Ji)}function to(e){Qi(Ji.current);var t=Qi(Ki.current),n=ue(t,e.type);t!==n&&(Ia(Zi,e),Ia(Ki,n))}function no(e){Zi.current===e&&(Ca(Ki),Ca(Zi))}var ro=Sa(0);function ao(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var io=[];function oo(){for(var e=0;e<io.length;e++)io[e]._workInProgressVersionPrimary=null;io.length=0}var so=x.ReactCurrentDispatcher,uo=x.ReactCurrentBatchConfig,lo=0,co=null,ho=null,po=null,fo=!1,mo=!1,go=0,vo=0;function yo(){throw Error(i(321))}function bo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,a,o){if(lo=o,co=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=null===e||null===e.memoizedState?rs:as,e=n(r,a),mo){o=0;do{if(mo=!1,go=0,25<=o)throw Error(i(301));o+=1,po=ho=null,t.updateQueue=null,so.current=is,e=n(r,a)}while(mo)}if(so.current=ns,t=null!==ho&&null!==ho.next,lo=0,po=ho=co=null,fo=!1,t)throw Error(i(300));return e}function Ao(){var e=0!==go;return go=0,e}function wo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===po?co.memoizedState=po=e:po=po.next=e,po}function ko(){if(null===ho){var e=co.alternate;e=null!==e?e.memoizedState:null}else e=ho.next;var t=null===po?co.memoizedState:po.next;if(null!==t)po=t,ho=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ho=e).memoizedState,baseState:ho.baseState,baseQueue:ho.baseQueue,queue:ho.queue,next:null},null===po?co.memoizedState=po=e:po=po.next=e}return po}function So(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=ko(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ho,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var u=s=null,l=null,c=o;do{var d=c.lane;if((lo&d)===d)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=h,s=r):l=l.next=h,co.lanes|=d,Ou|=d}c=c.next}while(null!==c&&c!==o);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(As=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,co.lanes|=o,Ou|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Io(e){var t=ko(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);sr(o,t.memoizedState)||(As=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Eo(){}function To(e,t){var n=co,r=ko(),a=t(),o=!sr(r.memoizedState,a);if(o&&(r.memoizedState=a,As=!0),r=r.queue,Bo(Mo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==po&&1&po.memoizedState.tag){if(n.flags|=2048,Po(9,_o.bind(null,n,r,a,t),void 0,null),null===Iu)throw Error(i(349));0!==(30&lo)||No(n,t,a)}return a}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=co.updateQueue)?(t={lastEffect:null,stores:null},co.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _o(e,t,n,r){t.value=n,t.getSnapshot=r,Ro(t)&&$u(e,1,-1)}function Mo(e,t,n){return n((function(){Ro(t)&&$u(e,1,-1)}))}function Ro(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Oo(e){var t=wo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:e},t.queue=e,e=e.dispatch=Jo.bind(null,co,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=co.updateQueue)?(t={lastEffect:null,stores:null},co.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fo(){return ko().memoizedState}function Do(e,t,n,r){var a=wo();co.flags|=e,a.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Lo(e,t,n,r){var a=ko();r=void 0===r?null:r;var i=void 0;if(null!==ho){var o=ho.memoizedState;if(i=o.destroy,null!==r&&bo(r,o.deps))return void(a.memoizedState=Po(t,n,i,r))}co.flags|=e,a.memoizedState=Po(1|t,n,i,r)}function zo(e,t){return Do(8390656,8,e,t)}function Bo(e,t){return Lo(2048,8,e,t)}function Wo(e,t){return Lo(4,2,e,t)}function jo(e,t){return Lo(4,4,e,t)}function Vo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ho(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Lo(4,4,Vo.bind(null,t,e),n)}function Uo(){}function Go(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qo(e,t,n){return 0===(21&lo)?(e.baseState&&(e.baseState=!1,As=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),co.lanes|=n,Ou|=n,e.baseState=!0),t)}function Yo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=uo.transition;uo.transition={};try{e(!1),t()}finally{bt=n,uo.transition=r}}function Ko(){return ko().memoizedState}function Zo(e,t,n){var r=Qu(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e)?$o(t,n):(es(e,t,n),null!==(e=$u(e,r,n=Ju()))&&ts(e,t,r))}function Jo(e,t,n){var r=Qu(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))$o(t,a);else{es(e,t,a);var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,o))return}catch(u){}null!==(e=$u(e,r,n=Ju()))&&ts(e,t,r)}}function Qo(e){var t=e.alternate;return e===co||null!==t&&t===co}function $o(e,t){mo=fo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function es(e,t,n){tl(e)?(null===(e=t.interleaved)?(n.next=n,null===ei?ei=[t]:ei.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function ts(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var ns={readContext:$a,useCallback:yo,useContext:yo,useEffect:yo,useImperativeHandle:yo,useInsertionEffect:yo,useLayoutEffect:yo,useMemo:yo,useReducer:yo,useRef:yo,useState:yo,useDebugValue:yo,useDeferredValue:yo,useTransition:yo,useMutableSource:yo,useSyncExternalStore:yo,useId:yo,unstable_isNewReconciler:!1},rs={readContext:$a,useCallback:function(e,t){return wo().memoizedState=[e,void 0===t?null:t],e},useContext:$a,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4194308,4,Vo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=wo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=wo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Zo.bind(null,co,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},wo().memoizedState=e},useState:Oo,useDebugValue:Uo,useDeferredValue:function(e){return wo().memoizedState=e},useTransition:function(){var e=Oo(!1),t=e[0];return e=Yo.bind(null,e[1]),wo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=co,a=wo();if(Ri){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Iu)throw Error(i(349));0!==(30&lo)||No(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,zo(Mo.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,_o.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=wo(),t=Iu.identifierPrefix;if(Ri){var n=Ci;t=":"+t+"R"+(n=(Si&~(1<<32-ot(Si)-1)).toString(32)+n),0<(n=go++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=vo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},as={readContext:$a,useCallback:Go,useContext:$a,useEffect:Bo,useImperativeHandle:Ho,useInsertionEffect:Wo,useLayoutEffect:jo,useMemo:Xo,useReducer:Co,useRef:Fo,useState:function(){return Co(So)},useDebugValue:Uo,useDeferredValue:function(e){return qo(ko(),ho.memoizedState,e)},useTransition:function(){return[Co(So)[0],ko().memoizedState]},useMutableSource:Eo,useSyncExternalStore:To,useId:Ko,unstable_isNewReconciler:!1},is={readContext:$a,useCallback:Go,useContext:$a,useEffect:Bo,useImperativeHandle:Ho,useInsertionEffect:Wo,useLayoutEffect:jo,useMemo:Xo,useReducer:Io,useRef:Fo,useState:function(){return Io(So)},useDebugValue:Uo,useDeferredValue:function(e){var t=ko();return null===ho?t.memoizedState=e:qo(t,ho.memoizedState,e)},useTransition:function(){return[Io(So)[0],ko().memoizedState]},useMutableSource:Eo,useSyncExternalStore:To,useId:Ko,unstable_isNewReconciler:!1};function os(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a}}function ss(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var us,ls,cs,ds="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=ai(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ju||(ju=!0,Vu=r),ss(0,t)},n}function ps(e,t,n){(n=ai(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ss(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ss(0,t),"function"!==typeof r&&(null===Hu?Hu=new Set([this]):Hu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Sl.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ai(-1,1)).tag=2,ii(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}function vs(e,t){if(!Ri)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ys(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function bs(e,t,n){var r=t.pendingProps;switch(Ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ys(t),null;case 1:case 17:return Ra(t.type)&&Oa(),ys(t),null;case 3:return r=t.stateNode,eo(),Ca(Na),Ca(Ta),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Bi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Oi&&(il(Oi),Oi=null))),ys(t),null;case 5:no(t);var a=Qi(Ji.current);if(n=t.type,null!==e&&null!=t.stateNode)ls(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return ys(t),null}if(e=Qi(Ki.current),Bi(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ha]=t,r[pa]=o,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(a=0;a<Fr.length;a++)Br(Fr[a],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":Z(r,o),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Br("invalid",r);break;case"textarea":ae(r,o),Br("invalid",r)}for(var u in ye(n,o),a=null,o)if(o.hasOwnProperty(u)){var l=o[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,l,e),a=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,l,e),a=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Br("scroll",r)}switch(n){case"input":X(r),$(r,o,!0);break;case"textarea":X(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[ha]=t,e[pa]=r,us(e,t),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),a=r;break;case"iframe":case"object":case"embed":Br("load",e),a=r;break;case"video":case"audio":for(a=0;a<Fr.length;a++)Br(Fr[a],e);a=r;break;case"source":Br("error",e),a=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),a=r;break;case"details":Br("toggle",e),a=r;break;case"input":Z(e,r),a=K(e,r),Br("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=L({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Br("invalid",e)}for(o in ye(n,a),l=a)if(l.hasOwnProperty(o)){var c=l[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Br("scroll",e):null!=c&&b(e,o,c,u))}switch(n){case"input":X(e),$(e,r,!1);break;case"textarea":X(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+U(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return ys(t),null;case 6:if(e&&null!=t.stateNode)cs(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Qi(Ji.current),Qi(Ki.current),Bi(t)){if(r=t.stateNode,n=t.memoizedProps,r[ha]=t,(o=r.nodeValue!==n)&&null!==(e=_i))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ha]=t,t.stateNode=r}return ys(t),null;case 13:if(Ca(ro),r=t.memoizedState,Ri&&null!==Mi&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Mi;r;)r=la(r.nextSibling);return Wi(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Bi(t),null===e){if(!r)throw Error(i(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(i(317));r[ha]=t}else Wi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return ys(t),null}return null!==Oi&&(il(Oi),Oi=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Bi(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Mu&&(Mu=3):fl())),null!==t.updateQueue&&(t.flags|=4),ys(t),null);case 4:return eo(),null===e&&Vr(t.stateNode.containerInfo),ys(t),null;case 10:return Za(t.type._context),ys(t),null;case 19:if(Ca(ro),null===(o=t.memoizedState))return ys(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)vs(o,!1);else{if(0!==Mu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=ao(e))){for(t.flags|=128,vs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ia(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Bu&&(t.flags|=128,r=!0,vs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ao(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),vs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!Ri)return ys(t),null}else 2*Je()-o.renderingStartTime>Bu&&1073741824!==n&&(t.flags|=128,r=!0,vs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ro.current,Ia(ro,r?1&n|2:1&n),t):(ys(t),null);case 22:case 23:return cl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Nu)&&(ys(t),6&t.subtreeFlags&&(t.flags|=8192)):ys(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}us=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ls=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Qi(Ki.current);var i,o=null;switch(n){case"input":a=K(e,a),r=K(e,r),o=[];break;case"select":a=L({},a,{value:void 0}),r=L({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(c in ye(n,r),n=null,a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var u=a[c];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=a?a[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(i in u)!u.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&u[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(o||(o=[]),o.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(o=o||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Br("scroll",e),o||u===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},cs=function(e,t,n,r){n!==r&&(t.flags|=4)};var xs=x.ReactCurrentOwner,As=!1;function ws(e,t,n,r){t.child=null===e?qi(t,null,n,r):Xi(t,e.child,n,r)}function ks(e,t,n,r,a){n=n.render;var i=t.ref;return Qa(t,a),r=xo(e,t,n,r,i,a),n=Ao(),null===e||As?(Ri&&n&&Ti(t),t.flags|=1,ws(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Us(e,t,a))}function Ss(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Ml(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ol(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Cs(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Us(e,t,a)}return t.flags|=1,(e=Rl(i,r)).ref=t.ref,e.return=t,t.child=e}function Cs(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(ur(i,r)&&e.ref===t.ref){if(As=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,Us(e,t,a);0!==(131072&e.flags)&&(As=!0)}}return Ts(e,t,n,r,a)}function Is(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ia(_u,Nu),Nu|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ia(_u,Nu),Nu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ia(_u,Nu),Nu|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ia(_u,Nu),Nu|=r;return ws(e,t,a,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ts(e,t,n,r,a){var i=Ra(n)?_a:Ta.current;return i=Ma(t,i),Qa(t,a),n=xo(e,t,n,r,i,a),r=Ao(),null===e||As?(Ri&&r&&Ti(t),t.flags|=1,ws(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Us(e,t,a))}function Ns(e,t,n,r,a){if(Ra(n)){var i=!0;Da(t)}else i=!1;if(Qa(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),fi(t,n,r),gi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=$a(l):l=Ma(t,l=Ra(n)?_a:Ta.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==l)&&mi(t,o,r,l),ti=!1;var h=t.memoizedState;o.state=h,ui(t,r,o,a),u=t.memoizedState,s!==r||h!==u||Na.current||ti?("function"===typeof c&&(di(t,n,c,r),u=t.memoizedState),(s=ti||pi(t,n,s,r,h,u,l))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ri(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Ua(t.type,s),o.props=l,d=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=$a(u):u=Ma(t,u=Ra(n)?_a:Ta.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||h!==u)&&mi(t,o,r,u),ti=!1,h=t.memoizedState,o.state=h,ui(t,r,o,a);var f=t.memoizedState;s!==d||h!==f||Na.current||ti?("function"===typeof p&&(di(t,n,p,r),f=t.memoizedState),(l=ti||pi(t,n,l,r,h,f,u)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=u,r=l):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return _s(e,t,n,r,i,a)}function _s(e,t,n,r,a,i){Es(e,t);var o=0!==(128&t.flags);if(!r&&!o)return a&&La(t,n,!1),Us(e,t,i);r=t.stateNode,xs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xi(t,e.child,null,i),t.child=Xi(t,null,s,i)):ws(e,t,s,i),t.memoizedState=r.state,a&&La(t,n,!0),t.child}function Ms(e){var t=e.stateNode;t.pendingContext?Pa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pa(0,t.context,!1),$i(e,t.containerInfo)}function Rs(e,t,n,r,a){return Wi(),ji(a),t.flags|=256,ws(e,t,n,r),t.child}var Os={dehydrated:null,treeContext:null,retryLane:0};function Ps(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Ds(e,t,n){var r,a=t.pendingProps,o=ro.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ia(ro,1&o),null===e)return Li(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=a.children,e=a.fallback,s?(a=t.mode,s=t.child,o={mode:"hidden",children:o},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=o):s=Fl(o,a,0,null),e=Pl(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ps(n),t.memoizedState=Os,e):Ls(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(u)return 256&t.flags?(t.flags&=-257,Ws(e,t,n,Error(i(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=a.fallback,o=t.mode,a=Fl({mode:"visible",children:a.children},o,0,null),(s=Pl(s,o,n,null)).flags|=2,a.return=t,s.return=t,a.sibling=s,t.child=a,0!==(1&t.mode)&&Xi(t,e.child,null,n),t.child.memoizedState=Ps(n),t.memoizedState=Os,s);if(0===(1&t.mode))t=Ws(e,t,n,null);else if("$!"===r.data)t=Ws(e,t,n,Error(i(419)));else if(a=0!==(n&e.childLanes),As||a){if(null!==(a=Iu)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(a=0!==(s&(a.suspendedLanes|n))?0:s)&&a!==o.retryLane&&(o.retryLane=a,$u(e,a,-1))}fl(),t=Ws(e,t,n,Error(i(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Il.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Mi=la(r.nextSibling),_i=t,Ri=!0,Oi=null,null!==n&&(Ai[wi++]=Si,Ai[wi++]=Ci,Ai[wi++]=ki,Si=n.id,Ci=n.overflow,ki=t),(t=Ls(t,t.pendingProps.children)).flags|=4096);return t}return s?(a=Bs(e,t,a.children,a.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Ps(n):Fs(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Os,a):(n=zs(e,t,a.children,n),t.memoizedState=null,n)}return s?(a=Bs(e,t,a.children,a.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Ps(n):Fs(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Os,a):(n=zs(e,t,a.children,n),t.memoizedState=null,n)}function Ls(e,t){return(t=Fl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,r){var a=e.child;return e=a.sibling,n=Rl(a,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Bs(e,t,n,r,a){var i=t.mode,o=(e=e.child).sibling,s={mode:"hidden",children:n};return 0===(1&i)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=Rl(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Rl(o,r):(r=Pl(r,i,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Ws(e,t,n,r){return null!==r&&ji(r),Xi(t,e.child,null,n),(e=Ls(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function js(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ja(e.return,t,n)}function Vs(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Hs(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&js(e,n,t);else if(19===e.tag)js(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ia(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ao(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Vs(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ao(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Vs(t,!0,n,null,i);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Us(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ou|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Rl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){switch(Ni(t),t.tag){case 1:return Ra(t.type)&&Oa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ca(Na),Ca(Ta),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ca(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));Wi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ca(ro),null;case 4:return eo(),null;case 10:return Za(t.type._context),null;case 22:case 23:return cl(),null;default:return null}}var Xs=!1,qs=!1,Ys="function"===typeof WeakSet?WeakSet:Set,Ks=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kl(e,t,r)}else n.current=null}function Js(e,t,n){try{n()}catch(r){kl(e,t,r)}}var Qs=!1;function $s(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&Js(t,n,i)}a=a.next}while(a!==r)}}function eu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function tu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function nu(e){var t=e.alternate;null!==t&&(e.alternate=null,nu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ha],delete t[pa],delete t[ma],delete t[ga],delete t[va])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ru(e){return 5===e.tag||3===e.tag||4===e.tag}function au(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ru(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function iu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(iu(e,t,n),e=e.sibling;null!==e;)iu(e,t,n),e=e.sibling}function ou(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ou(e,t,n),e=e.sibling;null!==e;)ou(e,t,n),e=e.sibling}var su=null,uu=!1;function lu(e,t,n){for(n=n.child;null!==n;)cu(e,t,n),n=n.sibling}function cu(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(s){}switch(n.tag){case 5:qs||Zs(n,t);case 6:var r=su,a=uu;su=null,lu(e,t,n),uu=a,null!==(su=r)&&(uu?(e=su,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):su.removeChild(n.stateNode));break;case 18:null!==su&&(uu?(e=su,n=n.stateNode,8===e.nodeType?ua(e.parentNode,n):1===e.nodeType&&ua(e,n),Vt(e)):ua(su,n.stateNode));break;case 4:r=su,a=uu,su=n.stateNode.containerInfo,uu=!0,lu(e,t,n),su=r,uu=a;break;case 0:case 11:case 14:case 15:if(!qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&Js(n,t,o),a=a.next}while(a!==r)}lu(e,t,n);break;case 1:if(!qs&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){kl(n,t,s)}lu(e,t,n);break;case 21:lu(e,t,n);break;case 22:1&n.mode?(qs=(r=qs)||null!==n.memoizedState,lu(e,t,n),qs=r):lu(e,t,n);break;default:lu(e,t,n)}}function du(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ys),t.forEach((function(t){var r=El.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function hu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:su=u.stateNode,uu=!1;break e;case 3:case 4:su=u.stateNode.containerInfo,uu=!0;break e}u=u.return}if(null===su)throw Error(i(160));cu(o,s,a),su=null,uu=!1;var l=a.alternate;null!==l&&(l.return=null),a.return=null}catch(c){kl(a,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)pu(t,e),t=t.sibling}function pu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(hu(t,e),fu(e),4&r){try{$s(3,e,e.return),eu(3,e)}catch(m){kl(e,e.return,m)}try{$s(5,e,e.return)}catch(m){kl(e,e.return,m)}}break;case 1:hu(t,e),fu(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(hu(t,e),fu(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(m){kl(e,e.return,m)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===o.type&&null!=o.name&&J(a,o),be(u,s);var c=be(u,o);for(s=0;s<l.length;s+=2){var d=l[s],h=l[s+1];"style"===d?ge(a,h):"dangerouslySetInnerHTML"===d?de(a,h):"children"===d?he(a,h):b(a,d,h,c)}switch(u){case"input":Q(a,o);break;case"textarea":ie(a,o);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(a,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(a,!!o.multiple,o.defaultValue,!0):ne(a,!!o.multiple,o.multiple?[]:"",!1))}a[pa]=o}catch(m){kl(e,e.return,m)}}break;case 6:if(hu(t,e),fu(e),4&r){if(null===e.stateNode)throw Error(i(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch(m){kl(e,e.return,m)}}break;case 3:if(hu(t,e),fu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(m){kl(e,e.return,m)}break;case 4:default:hu(t,e),fu(e);break;case 13:hu(t,e),fu(e),8192&(c=e.child).flags&&null!==c.memoizedState&&(null===c.alternate||null===c.alternate.memoizedState)&&(zu=Je()),4&r&&du(e);break;case 22:if(c=null!==n&&null!==n.memoizedState,1&e.mode?(qs=(d=qs)||c,hu(t,e),qs=d):hu(t,e),fu(e),8192&r){d=null!==e.memoizedState;e:for(h=null,p=e;;){if(5===p.tag){if(null===h){h=p;try{a=p.stateNode,d?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=p.stateNode,s=void 0!==(l=p.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=me("display",s))}catch(m){kl(e,e.return,m)}}}else if(6===p.tag){if(null===h)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(m){kl(e,e.return,m)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}if(d&&!c&&0!==(1&e.mode))for(Ks=e,e=e.child;null!==e;){for(c=Ks=e;null!==Ks;){switch(h=(d=Ks).child,d.tag){case 0:case 11:case 14:case 15:$s(4,d,d.return);break;case 1:if(Zs(d,d.return),"function"===typeof(o=d.stateNode).componentWillUnmount){p=d,f=d.return;try{a=p,o.props=a.memoizedProps,o.state=a.memoizedState,o.componentWillUnmount()}catch(m){kl(p,f,m)}}break;case 5:Zs(d,d.return);break;case 22:if(null!==d.memoizedState){yu(c);continue}}null!==h?(h.return=d,Ks=h):yu(c)}e=e.sibling}}break;case 19:hu(t,e),fu(e),4&r&&du(e);case 21:}}function fu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ru(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),ou(e,au(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;iu(e,au(e),o);break;default:throw Error(i(161))}}catch(s){kl(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function mu(e,t,n){Ks=e,gu(e,t,n)}function gu(e,t,n){for(var r=0!==(1&e.mode);null!==Ks;){var a=Ks,i=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||Xs;if(!o){var s=a.alternate,u=null!==s&&null!==s.memoizedState||qs;s=Xs;var l=qs;if(Xs=o,(qs=u)&&!l)for(Ks=a;null!==Ks;)u=(o=Ks).child,22===o.tag&&null!==o.memoizedState?bu(a):null!==u?(u.return=o,Ks=u):bu(a);for(;null!==i;)Ks=i,gu(i,t,n),i=i.sibling;Ks=a,Xs=s,qs=l}vu(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,Ks=i):vu(e)}}function vu(e){for(;null!==Ks;){var t=Ks;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:qs||eu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!qs)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ua(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&li(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}li(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(i(163))}qs||512&t.flags&&tu(t)}catch(p){kl(t,t.return,p)}}if(t===e){Ks=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ks=n;break}Ks=t.return}}function yu(e){for(;null!==Ks;){var t=Ks;if(t===e){Ks=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ks=n;break}Ks=t.return}}function bu(e){for(;null!==Ks;){var t=Ks;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{eu(4,t)}catch(u){kl(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(u){kl(t,a,u)}}var i=t.return;try{tu(t)}catch(u){kl(t,i,u)}break;case 5:var o=t.return;try{tu(t)}catch(u){kl(t,o,u)}}}catch(u){kl(t,t.return,u)}if(t===e){Ks=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ks=s;break}Ks=t.return}}var xu,Au=Math.ceil,wu=x.ReactCurrentDispatcher,ku=x.ReactCurrentOwner,Su=x.ReactCurrentBatchConfig,Cu=0,Iu=null,Eu=null,Tu=0,Nu=0,_u=Sa(0),Mu=0,Ru=null,Ou=0,Pu=0,Fu=0,Du=null,Lu=null,zu=0,Bu=1/0,Wu=null,ju=!1,Vu=null,Hu=null,Uu=!1,Gu=null,Xu=0,qu=0,Yu=null,Ku=-1,Zu=0;function Ju(){return 0!==(6&Cu)?Je():-1!==Ku?Ku:Ku=Je()}function Qu(e){return 0===(1&e.mode)?1:0!==(2&Cu)&&0!==Tu?Tu&-Tu:null!==Ha.transition?(0===Zu&&(Zu=mt()),Zu):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function $u(e,t,n){if(50<qu)throw qu=0,Yu=null,Error(i(185));var r=el(e,t);return null===r?null:(vt(r,t,n),0!==(2&Cu)&&r===Iu||(r===Iu&&(0===(2&Cu)&&(Pu|=t),4===Mu&&ol(r,Tu)),nl(r,n),1===t&&0===Cu&&0===(1&e.mode)&&(Bu=Je()+500,Ba&&Va())),r)}function el(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tl(e){return(null!==Iu||null!==ei)&&0!==(1&e.mode)&&0===(2&Cu)}function nl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,u=a[o];-1===u?0!==(s&n)&&0===(s&r)||(a[o]=pt(s,t)):u<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ht(e,e===Iu?Tu:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ba=!0,ja(e)}(sl.bind(null,e)):ja(sl.bind(null,e)),oa((function(){0===Cu&&Va()})),n=null;else{switch(xt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tl(n,rl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rl(e,t){if(Ku=-1,Zu=0,0!==(6&Cu))throw Error(i(327));var n=e.callbackNode;if(Al()&&e.callbackNode!==n)return null;var r=ht(e,e===Iu?Tu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var a=Cu;Cu|=2;var o=pl();for(Iu===e&&Tu===t||(Wu=null,Bu=Je()+500,dl(e,t));;)try{vl();break}catch(u){hl(e,u)}Ka(),wu.current=o,Cu=a,null!==Eu?t=0:(Iu=null,Tu=0,t=Mu)}if(0!==t){if(2===t&&(0!==(a=ft(e))&&(r=a,t=al(e,a))),1===t)throw n=Ru,dl(e,0),ol(e,r),nl(e,Je()),n;if(6===t)ol(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!sr(i(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=ml(e,r))&&(0!==(o=ft(e))&&(r=o,t=al(e,o))),1===t))throw n=Ru,dl(e,0),ol(e,r),nl(e,Je()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:xl(e,Lu,Wu);break;case 3:if(ol(e,r),(130023424&r)===r&&10<(t=zu+500-Je())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){Ju(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(xl.bind(null,e,Lu,Wu),t);break}xl(e,Lu,Wu);break;case 4:if(ol(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>a&&(a=s),r&=~o}if(r=a,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Au(r/1960))-r)){e.timeoutHandle=ra(xl.bind(null,e,Lu,Wu),r);break}xl(e,Lu,Wu);break;default:throw Error(i(329))}}}return nl(e,Je()),e.callbackNode===n?rl.bind(null,e):null}function al(e,t){var n=Du;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=Lu,Lu=n,null!==t&&il(t)),e}function il(e){null===Lu?Lu=e:Lu.push.apply(Lu,e)}function ol(e,t){for(t&=~Fu,t&=~Pu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sl(e){if(0!==(6&Cu))throw Error(i(327));Al();var t=ht(e,0);if(0===(1&t))return nl(e,Je()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=al(e,r))}if(1===n)throw n=Ru,dl(e,0),ol(e,t),nl(e,Je()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xl(e,Lu,Wu),nl(e,Je()),null}function ul(e,t){var n=Cu;Cu|=1;try{return e(t)}finally{0===(Cu=n)&&(Bu=Je()+500,Ba&&Va())}}function ll(e){null!==Gu&&0===Gu.tag&&0===(6&Cu)&&Al();var t=Cu;Cu|=1;var n=Su.transition,r=bt;try{if(Su.transition=null,bt=1,e)return e()}finally{bt=r,Su.transition=n,0===(6&(Cu=t))&&Va()}}function cl(){Nu=_u.current,Ca(_u)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Eu)for(n=Eu.return;null!==n;){var r=n;switch(Ni(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oa();break;case 3:eo(),Ca(Na),Ca(Ta),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Ca(ro);break;case 10:Za(r.type._context);break;case 22:case 23:cl()}n=n.return}if(Iu=e,Eu=e=Rl(e.current,null),Tu=Nu=t,Mu=0,Ru=null,Fu=Pu=Ou=0,Lu=Du=null,null!==ei){for(t=0;t<ei.length;t++)if(null!==(r=(n=ei[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=a,r.next=o}n.pending=r}ei=null}return e}function hl(e,t){for(;;){var n=Eu;try{if(Ka(),so.current=ns,fo){for(var r=co.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}fo=!1}if(lo=0,po=ho=co=null,mo=!1,go=0,ku.current=null,null===n||null===n.return){Mu=1,Ru=t,Eu=null;break}e:{var o=e,s=n.return,u=n,l=t;if(t=Tu,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,d=u,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ms(s);if(null!==f){f.flags&=-257,gs(f,s,u,0,t),1&f.mode&&fs(o,c,t),l=c;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){fs(o,c,t),fl();break e}l=Error(i(426))}else if(Ri&&1&u.mode){var v=ms(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),gs(v,s,u,0,t),ji(l);break e}}o=l,4!==Mu&&(Mu=2),null===Du?Du=[o]:Du.push(o),l=os(l,u),u=s;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t,si(u,hs(0,l,t));break e;case 1:o=l;var y=u.type,b=u.stateNode;if(0===(128&u.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Hu||!Hu.has(b)))){u.flags|=65536,t&=-t,u.lanes|=t,si(u,ps(u,o,t));break e}}u=u.return}while(null!==u)}bl(n)}catch(x){t=x,Eu===n&&null!==n&&(Eu=n=n.return);continue}break}}function pl(){var e=wu.current;return wu.current=ns,null===e?ns:e}function fl(){0!==Mu&&3!==Mu&&2!==Mu||(Mu=4),null===Iu||0===(268435455&Ou)&&0===(268435455&Pu)||ol(Iu,Tu)}function ml(e,t){var n=Cu;Cu|=2;var r=pl();for(Iu===e&&Tu===t||(Wu=null,dl(e,t));;)try{gl();break}catch(a){hl(e,a)}if(Ka(),Cu=n,wu.current=r,null!==Eu)throw Error(i(261));return Iu=null,Tu=0,Mu}function gl(){for(;null!==Eu;)yl(Eu)}function vl(){for(;null!==Eu&&!Ke();)yl(Eu)}function yl(e){var t=xu(e.alternate,e,Nu);e.memoizedProps=e.pendingProps,null===t?bl(e):Eu=t,ku.current=null}function bl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=bs(n,t,Nu)))return void(Eu=n)}else{if(null!==(n=Gs(n,t)))return n.flags&=32767,void(Eu=n);if(null===e)return Mu=6,void(Eu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Eu=t);Eu=t=e}while(null!==t);0===Mu&&(Mu=5)}function xl(e,t,n){var r=bt,a=Su.transition;try{Su.transition=null,bt=1,function(e,t,n,r){do{Al()}while(null!==Gu);if(0!==(6&Cu))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,o),e===Iu&&(Eu=Iu=null,Tu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Uu||(Uu=!0,Tl(tt,(function(){return Al(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Su.transition,Su.transition=null;var s=bt;bt=1;var u=Cu;Cu|=4,ku.current=null,function(e,t){if(ea=Ut,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var s=0,u=-1,l=-1,c=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==a&&3!==h.nodeType||(u=s+a),h!==o||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++c===a&&(u=s),p===o&&++d===r&&(l=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Ut=!1,Ks=t;null!==Ks;)if(e=(t=Ks).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ks=e;else for(;null!==Ks;){t=Ks;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ua(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;if(1===x.nodeType)x.textContent="";else if(9===x.nodeType){var A=x.body;null!=A&&(A.textContent="")}break;default:throw Error(i(163))}}catch(w){kl(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ks=e;break}Ks=t.return}m=Qs,Qs=!1}(e,n),pu(n,e),fr(ta),Ut=!!ea,ta=ea=null,e.current=n,mu(n,e,a),Ze(),Cu=u,bt=s,Su.transition=o}else e.current=n;if(Uu&&(Uu=!1,Gu=e,Xu=a),0===(o=e.pendingLanes)&&(Hu=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nl(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(ju)throw ju=!1,e=Vu,Vu=null,e;0!==(1&Xu)&&0!==e.tag&&Al(),0!==(1&(o=e.pendingLanes))?e===Yu?qu++:(qu=0,Yu=e):qu=0,Va()}(e,t,n,r)}finally{Su.transition=a,bt=r}return null}function Al(){if(null!==Gu){var e=xt(Xu),t=Su.transition,n=bt;try{if(Su.transition=null,bt=16>e?16:e,null===Gu)var r=!1;else{if(e=Gu,Gu=null,Xu=0,0!==(6&Cu))throw Error(i(331));var a=Cu;for(Cu|=4,Ks=e.current;null!==Ks;){var o=Ks,s=o.child;if(0!==(16&Ks.flags)){var u=o.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Ks=c;null!==Ks;){var d=Ks;switch(d.tag){case 0:case 11:case 15:$s(8,d,o)}var h=d.child;if(null!==h)h.return=d,Ks=h;else for(;null!==Ks;){var p=(d=Ks).sibling,f=d.return;if(nu(d),d===c){Ks=null;break}if(null!==p){p.return=f,Ks=p;break}Ks=f}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Ks=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Ks=s;else e:for(;null!==Ks;){if(0!==(2048&(o=Ks).flags))switch(o.tag){case 0:case 11:case 15:$s(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Ks=y;break e}Ks=o.return}}var b=e.current;for(Ks=b;null!==Ks;){var x=(s=Ks).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Ks=x;else e:for(s=b;null!==Ks;){if(0!==(2048&(u=Ks).flags))try{switch(u.tag){case 0:case 11:case 15:eu(9,u)}}catch(w){kl(u,u.return,w)}if(u===s){Ks=null;break e}var A=u.sibling;if(null!==A){A.return=u.return,Ks=A;break e}Ks=u.return}}if(Cu=a,Va(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(w){}r=!0}return r}finally{bt=n,Su.transition=t}}return!1}function wl(e,t,n){ii(e,t=hs(0,t=os(n,t),1)),t=Ju(),null!==(e=el(e,1))&&(vt(e,1,t),nl(e,t))}function kl(e,t,n){if(3===e.tag)wl(e,e,n);else for(;null!==t;){if(3===t.tag){wl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){ii(t,e=ps(t,e=os(n,e),1)),e=Ju(),null!==(t=el(t,1))&&(vt(t,1,e),nl(t,e));break}}t=t.return}}function Sl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Ju(),e.pingedLanes|=e.suspendedLanes&n,Iu===e&&(Tu&n)===n&&(4===Mu||3===Mu&&(130023424&Tu)===Tu&&500>Je()-zu?dl(e,0):Fu|=n),nl(e,t)}function Cl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=Ju();null!==(e=el(e,t))&&(vt(e,t,n),nl(e,n))}function Il(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cl(e,n)}function El(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Cl(e,n)}function Tl(e,t){return qe(e,t)}function Nl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _l(e,t,n,r){return new Nl(e,t,n,r)}function Ml(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rl(e,t){var n=e.alternate;return null===n?((n=_l(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ol(e,t,n,r,a,o){var s=2;if(r=e,"function"===typeof e)Ml(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return Pl(n.children,a,o,t);case S:s=8,a|=8;break;case C:return(e=_l(12,n,t,2|a)).elementType=C,e.lanes=o,e;case N:return(e=_l(13,n,t,a)).elementType=N,e.lanes=o,e;case _:return(e=_l(19,n,t,a)).elementType=_,e.lanes=o,e;case O:return Fl(n,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:s=10;break e;case E:s=9;break e;case T:s=11;break e;case M:s=14;break e;case R:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=_l(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Pl(e,t,n,r){return(e=_l(7,e,r,t)).lanes=n,e}function Fl(e,t,n,r){return(e=_l(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={},e}function Dl(e,t,n){return(e=_l(6,e,null,t)).lanes=n,e}function Ll(e,t,n){return(t=_l(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zl(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Bl(e,t,n,r,a,i,o,s,u){return e=new zl(e,t,n,s,u),1===t?(t=1,!0===i&&(t|=8)):t=0,i=_l(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ni(i),e}function Wl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function jl(e){if(!e)return Ea;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ra(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ra(n))return Fa(e,n,t)}return t}function Vl(e,t,n,r,a,i,o,s,u){return(e=Bl(n,r,!0,e,0,i,0,s,u)).context=jl(null),n=e.current,(i=ai(r=Ju(),a=Qu(n))).callback=void 0!==t&&null!==t?t:null,ii(n,i),e.current.lanes=a,vt(e,a,r),nl(e,r),e}function Hl(e,t,n,r){var a=t.current,i=Ju(),o=Qu(a);return n=jl(n),null===t.context?t.context=n:t.pendingContext=n,(t=ai(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ii(a,t),null!==(e=$u(a,o,i))&&oi(e,a,o),o}function Ul(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xl(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}xu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Na.current)As=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return As=!1,function(e,t,n){switch(t.tag){case 3:Ms(t),Wi();break;case 5:to(t);break;case 1:Ra(t.type)&&Da(t);break;case 4:$i(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ia(Ga,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ia(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ds(e,t,n):(Ia(ro,1&ro.current),null!==(e=Us(e,t,n))?e.sibling:null);Ia(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Hs(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ia(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Is(e,t,n)}return Us(e,t,n)}(e,t,n);As=0!==(131072&e.flags)}else As=!1,Ri&&0!==(1048576&t.flags)&&Ei(t,xi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var a=Ma(t,Ta.current);Qa(t,n),a=xo(null,t,r,e,a,n);var o=Ao();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ra(r)?(o=!0,Da(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ni(t),a.updater=hi,t.stateNode=a,a._reactInternals=t,gi(t,r,e,n),t=_s(null,t,r,!0,o,n)):(t.tag=0,Ri&&o&&Ti(t),ws(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Ml(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===M)return 14}return 2}(r),e=Ua(r,e),a){case 0:t=Ts(null,t,r,e,n);break e;case 1:t=Ns(null,t,r,e,n);break e;case 11:t=ks(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,Ua(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ts(e,t,r,a=t.elementType===r?a:Ua(r,a),n);case 1:return r=t.type,a=t.pendingProps,Ns(e,t,r,a=t.elementType===r?a:Ua(r,a),n);case 3:e:{if(Ms(t),null===e)throw Error(i(387));r=t.pendingProps,a=(o=t.memoizedState).element,ri(e,t),ui(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Rs(e,t,r,n,a=Error(i(423)));break e}if(r!==a){t=Rs(e,t,r,n,a=Error(i(424)));break e}for(Mi=la(t.stateNode.containerInfo.firstChild),_i=t,Ri=!0,Oi=null,n=qi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Wi(),r===a){t=Us(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Li(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==o&&na(r,o)&&(t.flags|=32),Es(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&Li(t),null;case 13:return Ds(e,t,n);case 4:return $i(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xi(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ks(e,t,r,a=t.elementType===r?a:Ua(r,a),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,Ia(Ga,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===a.children&&!Na.current){t=Us(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=ai(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ja(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ja(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Qa(t,n),r=r(a=$a(a)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return a=Ua(r=t.type,t.pendingProps),Ss(e,t,r,a=Ua(r.type,a),n);case 15:return Cs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ua(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ra(r)?(e=!0,Da(t)):e=!1,Qa(t,n),fi(t,r,a),gi(t,r,a,n),_s(null,t,r,!0,e,n);case 19:return Hs(e,t,n);case 22:return Is(e,t,n)}throw Error(i(156,t.tag))};var ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Yl(e){this._internalRoot=e}function Kl(e){this._internalRoot=e}function Zl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ql(){}function $l(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof a){var s=a;a=function(){var e=Ul(o);s.call(e)}}Hl(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Ul(o);i.call(e)}}var o=Vl(t,r,e,0,null,!1,0,"",Ql);return e._reactRootContainer=o,e[fa]=o.current,Vr(8===e.nodeType?e.parentNode:e),ll(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Ul(u);s.call(e)}}var u=Bl(e,0,!1,null,0,!1,0,"",Ql);return e._reactRootContainer=u,e[fa]=u.current,Vr(8===e.nodeType?e.parentNode:e),ll((function(){Hl(t,u,n,r)})),u}(n,t,e,a,r);return Ul(o)}Kl.prototype.render=Yl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Hl(e,t,null,null)},Kl.prototype.unmount=Yl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ll((function(){Hl(null,e,null,null)})),t[fa]=null}},Kl.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Lt(e)}},At=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),nl(t,Je()),0===(6&Cu)&&(Bu=Je()+500,Va()))}break;case 13:var r=Ju();ll((function(){return $u(e,1,r)})),Xl(e,1)}},wt=function(e){13===e.tag&&($u(e,134217728,Ju()),Xl(e,134217728))},kt=function(e){if(13===e.tag){var t=Ju(),n=Qu(e);$u(e,n,t),Xl(e,n)}},St=function(){return bt},Ct=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Aa(r);if(!a)throw Error(i(90));q(r),Q(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=ul,Ne=ll;var ec={usingClientEntryPoint:!1,Events:[ba,xa,Aa,Ie,Ee,ul]},tc={findFiberByHostInstance:ya,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{at=rc.inject(nc),it=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zl(t))throw Error(i(200));return Wl(e,t,null,n)},t.createRoot=function(e,t){if(!Zl(e))throw Error(i(299));var n=!1,r="",a=ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Bl(e,1,!1,null,0,n,0,r,a),e[fa]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Yl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return ll(e)},t.hydrate=function(e,t,n){if(!Jl(t))throw Error(i(200));return $l(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zl(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",s=ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vl(t,null,e,1,null!=n?n:null,a,0,o,s),e[fa]=t.current,Vr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Kl(t)},t.render=function(e,t,n){if(!Jl(t))throw Error(i(200));return $l(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jl(e))throw Error(i(40));return!!e._reactRootContainer&&(ll((function(){$l(null,null,e,!1,(function(){e._reactRootContainer=null,e[fa]=null}))})),!0)},t.unstable_batchedUpdates=ul,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jl(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return $l(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},1739:function(e,t,n){"use strict";var r=n(1168);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},1168:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(534)},2790:function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,n){"use strict";n.r(t);var r=n("react"),a=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function s(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var u=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.ctx=null,n.requestUserMediaId=0,n.unmounted=!1,n.state={hasUserMedia:!1},n}return a(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;this.unmounted=!1,s()?(e.hasUserMedia||this.requestUserMedia(),t.children&&"function"!=typeof t.children&&console.warn("children must be a function")):t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(s()){var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),r=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),a=e.minScreenshotWidth!==t.minScreenshotWidth,i=e.minScreenshotHeight!==t.minScreenshotHeight;(r||a||i)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().map((function(t){e.removeTrack(t),t.stop()}))):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,n=this.props;if(!t.hasUserMedia)return null;var r=this.getCanvas(e);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,n=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,a=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var i=r/a;a=(r=n.minScreenshotWidth||this.video.clientWidth)/i,n.minScreenshotHeight&&a<n.minScreenshotHeight&&(r=(a=n.minScreenshotHeight)*i)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||r,this.canvas.height=(null===e||void 0===e?void 0:e.height)||a,this.ctx=this.canvas.getContext("2d")}var o=this.ctx,s=this.canvas;return o&&s&&(n.mirrored&&(o.translate(s.width,0),o.scale(-1,1)),o.imageSmoothingEnabled=n.imageSmoothing,o.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||s.width,(null===e||void 0===e?void 0:e.height)||s.height),n.mirrored&&(o.scale(-1,1),o.translate(-s.width,0))),s},t.prototype.requestUserMedia=function(){var e=this,n=this.props,r=function(r,a){var i={video:"undefined"===typeof a||a};n.audio&&(i.audio="undefined"===typeof r||r),e.requestUserMediaId++;var o=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(i).then((function(n){e.unmounted||o!==e.requestUserMediaId?t.stopMediaStream(n):e.handleUserMedia(null,n)})).catch((function(t){e.handleUserMedia(t)}))};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var a=function(e){return{optional:[{sourceId:e}]}},i=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources((function(e){var t=null,o=null;e.forEach((function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(o=e.id)}));var s=i(n.audioConstraints);s&&(t=s);var u=i(n.videoConstraints);u&&(o=u),r(a(t),a(o))}))}},t.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,n=this.props,a=n.audio,s=(n.forceScreenshotSourceSize,n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),u=n.style,l=void 0===u?{}:u,c=n.children,d=o(n,["audio","forceScreenshotSourceSize","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),h=s?i(i({},l),{transform:(l.transform||"")+" scaleX(-1)"}):l,p={getScreenshot:this.getScreenshot.bind(this)};return r.createElement(r.Fragment,null,r.createElement("video",i({autoPlay:!0,src:t.src,muted:!a,playsInline:!0,ref:function(t){e.video=t},style:h},d)),c&&c(p))},t.defaultProps={audio:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(r.Component);t.default=u},react:function(t,n){t.exports=e}}).default},e.exports=r(n(7313))},5918:function(e,t,n){"use strict";var r=n(7313),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,i={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:l,ref:c,props:i,_owner:s.current}}t.Fragment=i,t.jsx=l,t.jsxs=l},306:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,m(x,v.prototype),x.isPureReactComponent=!0;var A=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,a)&&!S.hasOwnProperty(a)&&(i[a]=t[a]);var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===i[a]&&(i[a]=u[a]);return{$$typeof:n,type:e,key:o,ref:s,props:i,_owner:k.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===i?"."+T(u,0):i,A(o)?(a="",null!=e&&(a=e.replace(E,"$&/")+"/"),N(o,t,a,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(u=0,i=""===i?".":i+":",A(e))for(var l=0;l<e.length;l++){var c=i+T(s=e[l],l);u+=N(s,t,a,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=N(s=s.value,t,a,c=i+T(s,l++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function _(e,t,n){if(null==e)return e;var r=[],a=0;return N(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:k};t.Children={map:_,forEach:function(e,t,n){_(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return _(e,(function(){t++})),t},toArray:function(e){return _(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=k.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)w.call(t,l)&&!S.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}return{$$typeof:n,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.1.0"},7313:function(e,t,n){"use strict";e.exports=n(306)},6417:function(e,t,n){"use strict";e.exports=n(5918)},3095:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>i(u,n))l<a&&0>i(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<a&&0>i(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)a(c);else{if(!(t.startTime<=e))break;a(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function A(e){if(g=!1,x(e),!m)if(null!==r(l))m=!0,O(w);else{var t=r(c);null!==t&&P(A,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(I),I=-1),f=!0;var i=p;try{for(x(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var s=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(l)&&a(l),x(n)}else a(l);h=r(l)}if(null!==h)var u=!0;else{var d=r(c);null!==d&&P(A,d.startTime-n),u=!1}return u}finally{h=null,p=i,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,C=null,I=-1,E=5,T=-1;function N(){return!(t.unstable_now()-T<E)}function _(){if(null!==C){var e=t.unstable_now();T=e;var n=!0;try{n=C(!0,e)}finally{n?k():(S=!1,C=null)}}else S=!1}if("function"===typeof b)k=function(){b(_)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,R=M.port2;M.port1.onmessage=_,k=function(){R.postMessage(null)}}else k=function(){v(_,0)};function O(e){C=e,S||(S=!0,k())}function P(e,n){I=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,O(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(c,e),null===r(l)&&e===r(c)&&(g?(y(I),I=-1):g=!0,P(A,i-o))):(e.sortIndex=s,n(l,e),m||f||(m=!0,O(w))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},2224:function(e,t,n){"use strict";e.exports=n(3095)},9767:function(e){e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<i.length;u++){var l=i[u];if(!s(l))return!1;var c=e[l],d=t[l];if(!1===(a=n?n.call(r,c,d,l):void 0)||void 0===a&&c!==d)return!1}return!0}},8385:function(e,t,n){"use strict";n.r(t),t.default={}},5602:function(e,t,n){"use strict";n.r(t),t.default={}},3165:function(e,t,n){"use strict";n.r(t),t.default={}},8567:function(e,t,n){"use strict";n.r(t),t.default={}},2361:function(e,t,n){"use strict";n.r(t),t.default={}},1865:function(e,t,n){"use strict";n.r(t),t.default={}},535:function(e,t,n){"use strict";n.r(t),t.default={}},445:function(e,t,n){"use strict";n.r(t),t.default={}},7476:function(e,t,n){"use strict";n.r(t),t.default={}},2727:function(e,t,n){"use strict";n.r(t),t.default={}},3047:function(e,t,n){"use strict";n.r(t),t.default={}},7308:function(e,t,n){"use strict";n.r(t),t.default={}},865:function(e,t,n){"use strict";n.r(t),t.default={}},5638:function(e,t,n){"use strict";n.r(t),t.default={}},8479:function(e,t,n){"use strict";n.r(t),t.default={}},7895:function(e,t,n){"use strict";n.r(t),t.default={}},9333:function(e,t,n){"use strict";n.r(t),t.default={}},3343:function(e,t,n){"use strict";n.r(t),t.default={}},9070:function(e,t,n){"use strict";n.r(t),t.default={}},2153:function(e,t,n){"use strict";n.r(t),t.default={}},234:function(e,t,n){"use strict";n.r(t),t.default={}},6804:function(e,t,n){"use strict";n.r(t),t.default={}},539:function(e,t,n){"use strict";n.r(t),t.default={}},6737:function(e,t,n){"use strict";n.r(t),t.default={}},7256:function(){},2578:function(){},2980:function(){},4862:function(){},7958:function(){},5410:function(){},8628:function(){}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(i,o),i}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".4d4b6364.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="face-recognition-pomodoro:";n.l=function(r,a,i,o){if(e[r])e[r].push(a);else{var s,u;if(void 0!==i)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[a];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/face-recognition-pomodoro/",function(){var e={179:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise((function(n,r){a=e[t]=[n,r]}));r.push(a[2]=i);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,a[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var a,i,o=r[0],s=r[1],u=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)u(n)}for(t&&t(r);l<o.length;l++)i=o[l],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkface_recognition_pomodoro=self.webpackChunkface_recognition_pomodoro||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e=n(7313),t=n(1739);function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function a(e){if(Array.isArray(e))return e}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||o(e,t)||s()}var l=function(){};function c(t,n,r){var a=(0,e.useRef)(l);(0,e.useEffect)((function(){a.current=t})),(0,e.useEffect)((function(){r&&null!==n&&!1!==n&&a.current()}),[r]),(0,e.useEffect)((function(){if(null!==n&&!1!==n){var e=setInterval((function(){return a.current()}),n);return function(){return clearInterval(e)}}}),[n])}var d=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),h=Math.abs,p=String.fromCharCode,f=Object.assign;function m(e){return e.trim()}function g(e,t,n){return e.replace(t,n)}function v(e,t){return e.indexOf(t)}function y(e,t){return 0|e.charCodeAt(t)}function b(e,t,n){return e.slice(t,n)}function x(e){return e.length}function A(e){return e.length}function w(e,t){return t.push(e),e}var k=1,S=1,C=0,I=0,E=0,T="";function N(e,t,n,r,a,i,o){return{value:e,root:t,parent:n,type:r,props:a,children:i,line:k,column:S,length:o,return:""}}function _(e,t){return f(N("",null,null,"",null,null,0),e,{length:-e.length},t)}function M(){return E=I>0?y(T,--I):0,S--,10===E&&(S=1,k--),E}function R(){return E=I<C?y(T,I++):0,S++,10===E&&(S=1,k++),E}function O(){return y(T,I)}function P(){return I}function F(e,t){return b(T,e,t)}function D(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function L(e){return k=S=1,C=x(T=e),I=0,[]}function z(e){return T="",e}function B(e){return m(F(I-1,V(91===e?e+2:40===e?e+1:e)))}function W(e){for(;(E=O())&&E<33;)R();return D(e)>2||D(E)>3?"":" "}function j(e,t){for(;--t&&R()&&!(E<48||E>102||E>57&&E<65||E>70&&E<97););return F(e,P()+(t<6&&32==O()&&32==R()))}function V(e){for(;R();)switch(E){case e:return I;case 34:case 39:34!==e&&39!==e&&V(E);break;case 40:41===e&&V(e);break;case 92:R()}return I}function H(e,t){for(;R()&&e+E!==57&&(e+E!==84||47!==O()););return"/*"+F(t,I-1)+"*"+p(47===e?e:R())}function U(e){for(;!D(O());)R();return F(e,I)}var G="-ms-",X="-moz-",q="-webkit-",Y="comm",K="rule",Z="decl",J="@keyframes";function Q(e,t){for(var n="",r=A(e),a=0;a<r;a++)n+=t(e[a],a,e,t)||"";return n}function $(e,t,n,r){switch(e.type){case"@import":case Z:return e.return=e.return||e.value;case Y:return"";case J:return e.return=e.value+"{"+Q(e.children,r)+"}";case K:e.value=e.props.join(",")}return x(n=Q(e.children,r))?e.return=e.value+"{"+n+"}":""}function ee(e,t){switch(function(e,t){return(((t<<2^y(e,0))<<2^y(e,1))<<2^y(e,2))<<2^y(e,3)}(e,t)){case 5103:return q+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return q+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return q+e+X+e+G+e+e;case 6828:case 4268:return q+e+G+e+e;case 6165:return q+e+G+"flex-"+e+e;case 5187:return q+e+g(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return q+e+G+"flex-item-"+g(e,/flex-|-self/,"")+e;case 4675:return q+e+G+"flex-line-pack"+g(e,/align-content|flex-|-self/,"")+e;case 5548:return q+e+G+g(e,"shrink","negative")+e;case 5292:return q+e+G+g(e,"basis","preferred-size")+e;case 6060:return q+"box-"+g(e,"-grow","")+q+e+G+g(e,"grow","positive")+e;case 4554:return q+g(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return g(g(g(e,/(zoom-|grab)/,q+"$1"),/(image-set)/,q+"$1"),e,"")+e;case 5495:case 3959:return g(e,/(image-set\([^]*)/,q+"$1$`$1");case 4968:return g(g(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+q+e+e;case 4095:case 3583:case 4068:case 2532:return g(e,/(.+)-inline(.+)/,q+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(x(e)-1-t>6)switch(y(e,t+1)){case 109:if(45!==y(e,t+4))break;case 102:return g(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+X+(108==y(e,t+3)?"$3":"$2-$3"))+e;case 115:return~v(e,"stretch")?ee(g(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==y(e,t+1))break;case 6444:switch(y(e,x(e)-3-(~v(e,"!important")&&10))){case 107:return g(e,":",":"+q)+e;case 101:return g(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+q+(45===y(e,14)?"inline-":"")+"box$3$1"+q+"$2$3$1"+G+"$2box$3")+e}break;case 5936:switch(y(e,t+11)){case 114:return q+e+G+g(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return q+e+G+g(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return q+e+G+g(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return q+e+G+e+e}return e}function te(e){return z(ne("",null,null,null,[""],e=L(e),0,[0],e))}function ne(e,t,n,r,a,i,o,s,u){for(var l=0,c=0,d=o,h=0,f=0,m=0,y=1,b=1,A=1,k=0,S="",C=a,I=i,E=r,T=S;b;)switch(m=k,k=R()){case 40:if(108!=m&&58==T.charCodeAt(d-1)){-1!=v(T+=g(B(k),"&","&\f"),"&\f")&&(A=-1);break}case 34:case 39:case 91:T+=B(k);break;case 9:case 10:case 13:case 32:T+=W(m);break;case 92:T+=j(P()-1,7);continue;case 47:switch(O()){case 42:case 47:w(ae(H(R(),P()),t,n),u);break;default:T+="/"}break;case 123*y:s[l++]=x(T)*A;case 125*y:case 59:case 0:switch(k){case 0:case 125:b=0;case 59+c:f>0&&x(T)-d&&w(f>32?ie(T+";",r,n,d-1):ie(g(T," ","")+";",r,n,d-2),u);break;case 59:T+=";";default:if(w(E=re(T,t,n,l,c,a,s,S,C=[],I=[],d),i),123===k)if(0===c)ne(T,t,E,E,C,i,d,s,I);else switch(h){case 100:case 109:case 115:ne(e,E,E,r&&w(re(e,E,E,0,0,a,s,S,a,C=[],d),I),a,I,d,s,r?C:I);break;default:ne(T,E,E,E,[""],I,0,s,I)}}l=c=f=0,y=A=1,S=T="",d=o;break;case 58:d=1+x(T),f=m;default:if(y<1)if(123==k)--y;else if(125==k&&0==y++&&125==M())continue;switch(T+=p(k),k*y){case 38:A=c>0?1:(T+="\f",-1);break;case 44:s[l++]=(x(T)-1)*A,A=1;break;case 64:45===O()&&(T+=B(R())),h=O(),c=d=x(S=T+=U(P())),k++;break;case 45:45===m&&2==x(T)&&(y=0)}}return i}function re(e,t,n,r,a,i,o,s,u,l,c){for(var d=a-1,p=0===a?i:[""],f=A(p),v=0,y=0,x=0;v<r;++v)for(var w=0,k=b(e,d+1,d=h(y=o[v])),S=e;w<f;++w)(S=m(y>0?p[w]+" "+k:g(k,/&\f/g,p[w])))&&(u[x++]=S);return N(e,t,n,0===a?K:s,u,l,c)}function ae(e,t,n){return N(e,t,n,Y,p(E),b(e,2,-2),0)}function ie(e,t,n,r){return N(e,t,n,Z,b(e,0,r),b(e,r+1,-1),r)}var oe=function(e,t,n){for(var r=0,a=0;r=a,a=O(),38===r&&12===a&&(t[n]=1),!D(a);)R();return F(e,I)},se=function(e,t){return z(function(e,t){var n=-1,r=44;do{switch(D(r)){case 0:38===r&&12===O()&&(t[n]=1),e[n]+=oe(I-1,t,n);break;case 2:e[n]+=B(r);break;case 4:if(44===r){e[++n]=58===O()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=p(r)}}while(r=R());return e}(L(e),t))},ue=new WeakMap,le=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ue.get(n))&&!r){ue.set(e,!0);for(var a=[],i=se(t,a),o=n.props,s=0,u=0;s<i.length;s++)for(var l=0;l<o.length;l++,u++)e.props[u]=a[s]?i[s].replace(/&\f/g,o[l]):o[l]+" "+i[s]}}},ce=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},de=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case Z:e.return=ee(e.value,e.length);break;case J:return Q([_(e,{value:g(e.value,"@","@"+q)})],r);case K:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Q([_(e,{props:[g(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Q([_(e,{props:[g(t,/:(plac\w+)/,":-webkit-input-$1")]}),_(e,{props:[g(t,/:(plac\w+)/,":-moz-$1")]}),_(e,{props:[g(t,/:(plac\w+)/,G+"input-$1")]})],r)}return""}))}}],he=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||de;var a,i,o={},s=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;s.push(e)}));var u,l,c=[$,(l=function(e){u.insert(e)},function(e){e.root||(e=e.return)&&l(e)})],h=function(e){var t=A(e);return function(n,r,a,i){for(var o="",s=0;s<t;s++)o+=e[s](n,r,a,i)||"";return o}}([le,ce].concat(r,c));i=function(e,t,n,r){u=n,function(e){Q(te(e),h)}(e?e+"{"+t.styles+"}":t.styles),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new d({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:i};return p.sheet.hydrate(s),p};var pe=function(e){for(var t,n=0,r=0,a=e.length;a>=4;++r,a-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(a){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},fe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var me=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},ge=/[A-Z]|^ms/g,ve=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ye=function(e){return 45===e.charCodeAt(1)},be=function(e){return null!=e&&"boolean"!==typeof e},xe=me((function(e){return ye(e)?e:e.replace(ge,"-$&").toLowerCase()})),Ae=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(ve,(function(e,t,n){return ke={name:t,styles:n,next:ke},t}))}return 1===fe[e]||ye(e)||"number"!==typeof t||0===t?t:t+"px"};function we(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return ke={name:n.name,styles:n.styles,next:ke},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)ke={name:r.name,styles:r.styles,next:ke},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var a=0;a<n.length;a++)r+=we(e,t,n[a])+";";else for(var i in n){var o=n[i];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=i+"{"+t[o]+"}":be(o)&&(r+=xe(i)+":"+Ae(i,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=we(e,t,o);switch(i){case"animation":case"animationName":r+=xe(i)+":"+s+";";break;default:r+=i+"{"+s+"}"}}else for(var u=0;u<o.length;u++)be(o[u])&&(r+=xe(i)+":"+Ae(i,o[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var a=ke,i=n(e);return ke=a,we(e,t,i)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var ke,Se=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Ce=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,a="";ke=void 0;var i=e[0];null==i||void 0===i.raw?(r=!1,a+=we(n,t,i)):a+=i[0];for(var o=1;o<e.length;o++)a+=we(n,t,e[o]),r&&(a+=i[o]);Se.lastIndex=0;for(var s,u="";null!==(s=Se.exec(a));)u+="-"+s[1];return{name:pe(a)+u,styles:a,next:ke}};function Ie(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var Ee=function(e,t,n){!function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)}(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a=t;do{e.insert(t===a?"."+r:"",a,e.sheet,!0);a=a.next}while(void 0!==a)}};function Te(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function Ne(e,t,n){var r=[],a=Ie(e,r,n);return r.length<2?n:a+t(r)}var _e=function e(t){for(var n="",r=0;r<t.length;r++){var a=t[r];if(null!=a){var i=void 0;switch(typeof a){case"boolean":break;case"object":if(Array.isArray(a))i=e(a);else for(var o in i="",a)a[o]&&o&&(i&&(i+=" "),i+=o);break;default:i=a}i&&(n&&(n+=" "),n+=i)}}return n},Me=function(e){var t=he(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=Ce(n,t.registered,void 0);return Ee(t,a,!1),t.key+"-"+a.name};return{css:n,cx:function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return Ne(t.registered,n,_e(r))},injectGlobal:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=Ce(n,t.registered);Te(t,a)},keyframes:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=Ce(n,t.registered),i="animation-"+a.name;return Te(t,{name:a.name,styles:"@keyframes "+i+"{"+a.styles+"}"}),i},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:Ie.bind(null,t.registered),merge:Ne.bind(null,t.registered,n)}},Re=Me({key:"css"}),Oe=(Re.flush,Re.hydrate,Re.cx,Re.merge,Re.getRegisteredStyles,Re.injectGlobal,Re.keyframes,Re.css);Re.sheet,Re.cache;var Pe,Fe=function(t){var n=(0,e.useRef)(t);n.current=(0,e.useMemo)((function(){return t}),[t]);var r=(0,e.useRef)();return r.current||(r.current=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.current.apply(this,e)}),r.current},De=(Pe=e.useEffect,function(t,n){var r=(0,e.useRef)(!1);Pe((function(){return function(){r.current=!1}}),[]),Pe((function(){if(r.current)return t();r.current=!0}),n)}),Le=function(e){return"function"===typeof e},ze=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o};var Be,We=!("undefined"===typeof window||!window.document||!window.document.createElement),je=(Be=function(){return We?localStorage:void 0},function(t,n){var r;try{r=Be()}catch(u){console.error(u)}function a(){try{var e=null===r||void 0===r?void 0:r.getItem(t);if(e)return a=e,(null===n||void 0===n?void 0:n.deserializer)?null===n||void 0===n?void 0:n.deserializer(a):JSON.parse(a)}catch(i){console.error(i)}var a;return Le(null===n||void 0===n?void 0:n.defaultValue)?null===n||void 0===n?void 0:n.defaultValue():null===n||void 0===n?void 0:n.defaultValue}var i=ze((0,e.useState)((function(){return a()})),2),o=i[0],s=i[1];return De((function(){s(a())}),[t]),[o,Fe((function(e){var a=Le(e)?e(o):e;if(s(a),function(e){return"undefined"===typeof e}(a))null===r||void 0===r||r.removeItem(t);else try{null===r||void 0===r||r.setItem(t,function(e){return(null===n||void 0===n?void 0:n.serializer)?null===n||void 0===n?void 0:n.serializer(e):JSON.stringify(e)}(a))}catch(i){console.error(i)}}))]}),Ve=je;function He(){return He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},He.apply(this,arguments)}var Ue=function(t,r){void 0===r&&(r={});var a,i=r,o=i.volume,s=void 0===o?1:o,u=i.playbackRate,l=void 0===u?1:u,c=i.soundEnabled,d=void 0===c||c,h=i.interrupt,p=void 0!==h&&h,f=i.onload,m=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(i,["id","volume","playbackRate","soundEnabled","interrupt","onload"]),g=e.useRef(null),v=e.useRef(!1),y=e.useState(null),b=y[0],x=y[1],A=e.useState(null),w=A[0],k=A[1],S=function(){"function"===typeof f&&f.call(this),v.current&&x(1e3*this.duration()),k(this)};a=function(){return n.e(510).then(n.t.bind(n,6510,23)).then((function(e){var n;v.current||(g.current=null!==(n=e.Howl)&&void 0!==n?n:e.default.Howl,v.current=!0,new g.current(He({src:Array.isArray(t)?t:[t],volume:s,rate:l,onload:S},m)))})),function(){v.current=!1}},(0,e.useEffect)(a,[]),e.useEffect((function(){g.current&&w&&k(new g.current(He({src:Array.isArray(t)?t:[t],volume:s,onload:S},m)))}),[JSON.stringify(t)]),e.useEffect((function(){w&&(w.volume(s),w.rate(l))}),[s,l]);var C=e.useCallback((function(e){"undefined"===typeof e&&(e={}),w&&(d||e.forceSoundEnabled)&&(p&&w.stop(),e.playbackRate&&w.rate(e.playbackRate),w.play(e.id))}),[w,d,p]),I=e.useCallback((function(e){w&&w.stop(e)}),[w]),E=e.useCallback((function(e){w&&w.pause(e)}),[w]);return[C,{sound:w,stop:I,pause:E,duration:b}]};function Ge(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Xe(e){return!!e&&!!e[Ot]}function qe(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Pt}(e)||Array.isArray(e)||!!e[Rt]||!!e.constructor[Rt]||et(e)||tt(e))}function Ye(e,t,n){void 0===n&&(n=!1),0===Ke(e)?(n?Object.keys:Ft)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function Ke(e){var t=e[Ot];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:et(e)?2:tt(e)?3:0}function Ze(e,t){return 2===Ke(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Je(e,t){return 2===Ke(e)?e.get(t):e[t]}function Qe(e,t,n){var r=Ke(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function $e(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function et(e){return Tt&&e instanceof Map}function tt(e){return Nt&&e instanceof Set}function nt(e){return e.o||e.t}function rt(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Dt(e);delete t[Ot];for(var n=Ft(t),r=0;r<n.length;r++){var a=n[r],i=t[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function at(e,t){return void 0===t&&(t=!1),ot(e)||Xe(e)||!qe(e)||(Ke(e)>1&&(e.set=e.add=e.clear=e.delete=it),Object.freeze(e),t&&Ye(e,(function(e,t){return at(t,!0)}),!0)),e}function it(){Ge(2)}function ot(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function st(e){var t=Lt[e];return t||Ge(18,e),t}function ut(){return It}function lt(e,t){t&&(st("Patches"),e.u=[],e.s=[],e.v=t)}function ct(e){dt(e),e.p.forEach(pt),e.p=null}function dt(e){e===It&&(It=e.l)}function ht(e){return It={p:[],l:It,h:e,m:!0,_:0}}function pt(e){var t=e[Ot];0===t.i||1===t.i?t.j():t.O=!0}function ft(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||st("ES5").S(t,e,r),r?(n[Ot].P&&(ct(t),Ge(4)),qe(e)&&(e=mt(t,e),t.l||vt(t,e)),t.u&&st("Patches").M(n[Ot].t,e,t.u,t.s)):e=mt(t,n,[]),ct(t),t.u&&t.v(t.u,t.s),e!==Mt?e:void 0}function mt(e,t,n){if(ot(t))return t;var r=t[Ot];if(!r)return Ye(t,(function(a,i){return gt(e,r,t,a,i,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return vt(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var a=4===r.i||5===r.i?r.o=rt(r.k):r.o;Ye(3===r.i?new Set(a):a,(function(t,i){return gt(e,r,a,t,i,n)})),vt(e,a,!1),n&&e.u&&st("Patches").R(r,n,e.u,e.s)}return r.o}function gt(e,t,n,r,a,i){if(Xe(a)){var o=mt(e,a,i&&t&&3!==t.i&&!Ze(t.D,r)?i.concat(r):void 0);if(Qe(n,r,o),!Xe(o))return;e.m=!1}if(qe(a)&&!ot(a)){if(!e.h.F&&e._<1)return;mt(e,a),t&&t.A.l||vt(e,a)}}function vt(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&at(t,n)}function yt(e,t){var n=e[Ot];return(n?nt(n):e)[t]}function bt(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function xt(e){e.P||(e.P=!0,e.l&&xt(e.l))}function At(e){e.o||(e.o=rt(e.t))}function wt(e,t,n){var r=et(t)?st("MapSet").N(t,n):tt(t)?st("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:ut(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},a=r,i=zt;n&&(a=[r],i=Bt);var o=Proxy.revocable(a,i),s=o.revoke,u=o.proxy;return r.k=u,r.j=s,u}(t,n):st("ES5").J(t,n);return(n?n.A:ut()).p.push(r),r}function kt(e){return Xe(e)||Ge(22,e),function e(t){if(!qe(t))return t;var n,r=t[Ot],a=Ke(t);if(r){if(!r.P&&(r.i<4||!st("ES5").K(r)))return r.t;r.I=!0,n=St(t,a),r.I=!1}else n=St(t,a);return Ye(n,(function(t,a){r&&Je(r.t,t)===a||Qe(n,t,e(a))})),3===a?new Set(n):n}(e)}function St(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return rt(e)}var Ct,It,Et="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Tt="undefined"!=typeof Map,Nt="undefined"!=typeof Set,_t="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Mt=Et?Symbol.for("immer-nothing"):((Ct={})["immer-nothing"]=!0,Ct),Rt=Et?Symbol.for("immer-draftable"):"__$immer_draftable",Ot=Et?Symbol.for("immer-state"):"__$immer_state",Pt=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Ft="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Dt=Object.getOwnPropertyDescriptors||function(e){var t={};return Ft(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Lt={},zt={get:function(e,t){if(t===Ot)return e;var n=nt(e);if(!Ze(n,t))return function(e,t,n){var r,a=bt(t,n);return a?"value"in a?a.value:null===(r=a.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!qe(r)?r:r===yt(e.t,t)?(At(e),e.o[t]=wt(e.A.h,r,e)):r},has:function(e,t){return t in nt(e)},ownKeys:function(e){return Reflect.ownKeys(nt(e))},set:function(e,t,n){var r=bt(nt(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var a=yt(nt(e),t),i=null==a?void 0:a[Ot];if(i&&i.t===n)return e.o[t]=n,e.D[t]=!1,!0;if($e(n,a)&&(void 0!==n||Ze(e.t,t)))return!0;At(e),xt(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==yt(e.t,t)||t in e.t?(e.D[t]=!1,At(e),xt(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=nt(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){Ge(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ge(12)}},Bt={};Ye(zt,(function(e,t){Bt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Bt.deleteProperty=function(e,t){return Bt.set.call(this,e,t,void 0)},Bt.set=function(e,t,n){return zt.set.call(this,e[0],t,n,e[0])};var Wt=function(){function e(e){var t=this;this.g=_t,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var a=n;n=e;var i=t;return function(e){var t=this;void 0===e&&(e=a);for(var r=arguments.length,o=Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return i.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&Ge(6),void 0!==r&&"function"!=typeof r&&Ge(7),qe(e)){var s=ht(t),u=wt(t,e,void 0),l=!0;try{o=n(u),l=!1}finally{l?ct(s):dt(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return lt(s,r),ft(e,s)}),(function(e){throw ct(s),e})):(lt(s,r),ft(o,s))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===Mt&&(o=void 0),t.F&&at(o,!0),r){var c=[],d=[];st("Patches").M(e,o,c,d),r(c,d)}return o}Ge(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,a=Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(a))}))};var r,a,i=t.produce(e,n,(function(e,t){r=e,a=t}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,r,a]})):[i,r,a]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){qe(e)||Ge(8),Xe(e)&&(e=kt(e));var t=ht(this),n=wt(this,e,void 0);return n[Ot].C=!0,dt(t),n},t.finishDraft=function(e,t){var n=(e&&e[Ot]).A;return lt(n,t),ft(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!_t&&Ge(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var a=st("Patches").$;return Xe(e)?a(e,t):this.produce(e,(function(e){return a(e,t)}))},e}(),jt=new Wt,Vt=jt.produce,Ht=(jt.produceWithPatches.bind(jt),jt.setAutoFreeze.bind(jt),jt.setUseProxies.bind(jt),jt.applyPatches.bind(jt),jt.createDraft.bind(jt),jt.finishDraft.bind(jt),Vt);var Ut=function(){return Ut=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ut.apply(this,arguments)};function Gt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}Object.create;function Xt(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function qt(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}function Yt(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var Kt=n(6123),Zt=n.n(Kt),Jt=function(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))},Qt=function(e){return(Array.isArray(e)?e:[e]).filter((function(e){return!!e})).map((function(e){return"mdc-theme--"+Jt(e)}))},$t=e.forwardRef((function(t,n){var r=t.tag,a=void 0===r?"div":r,i=(t.theme,t.element),o=Gt(t,["tag","theme","element"]),s=i?i.props(o):o,u=i?tn(n,i.setRef):n;return e.createElement(a,Ut({},s,{ref:u}))})),en=function(e,t){return Zt().apply(void 0,Yt(Yt([e.className],qt(e.theme?Qt(e.theme):[])),qt("function"===typeof t?t(e):t)))},tn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n,r;try{for(var a=Xt(e),i=a.next();!i.done;i=a.next()){var o=i.value;"function"===typeof o?o(t):o&&"current"in o&&(o.current=t)}}catch(s){n={error:s}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},nn=function(e,t){"function"===typeof e?e(t):e&&"current"in e&&(e.current=t)};function rn(t){var n=e.forwardRef(t),r=function(t,n){return e.createElement(e.Fragment,null)};return r.displayName=t.constructor.name||"RMWCComponent",n.displayName=r.displayName,n}var an=function(e){var t,n,r,a=Array.isArray(e)?e[0]:e;return(null===(t=null===a||void 0===a?void 0:a.type)||void 0===t?void 0:t.displayName)||(null===(n=null===a||void 0===a?void 0:a.constructor)||void 0===n?void 0:n.displayName)||(null===a||void 0===a?void 0:a.displayName)||(null===a||void 0===a?void 0:a.name)||(null===(r=null===a||void 0===a?void 0:a.constructor)||void 0===r?void 0:r.name)||"Unknown"},on=rn((function(t,n){var r,a=t.children,i=t.fixedColumnWidth,o=t.align,s=Gt(t,["children","fixedColumnWidth","align"]),u=!("GridRow"===an(a)),l=en(t,["mdc-layout-grid",(r={},r["mdc-layout-grid--align-"+(o||"")]=void 0!==t.align,r["mdc-layout-grid--fixed-column-width"]=i,r)]);return e.createElement($t,Ut({},s,{className:l,ref:n}),u?e.createElement(un,null,a):a)})),sn=rn((function(t,n){var r,a=t.span,i=t.phone,o=t.tablet,s=t.desktop,u=t.order,l=t.align,c=Gt(t,["span","phone","tablet","desktop","order","align"]),d=en(t,["mdc-layout-grid__cell",(r={},r["mdc-layout-grid__cell--order-"+(u||"")]=void 0!==u,r["mdc-layout-grid__cell--align-"+(l||"")]=void 0!==l,r["mdc-layout-grid__cell--span-"+(a||"")]=void 0!==a,r["mdc-layout-grid__cell--span-"+(i||"")+"-phone"]=void 0!==i,r["mdc-layout-grid__cell--span-"+(o||"")+"-tablet"]=void 0!==o,r["mdc-layout-grid__cell--span-"+(s||"")+"-desktop"]=void 0!==t.desktop,r)]);return e.createElement($t,Ut({},c,{ref:n,className:d}))})),un=rn((function(t,n){var r=en(t,["mdc-layout-grid__inner"]);return e.createElement($t,Ut({},t,{ref:n,className:r}))}));un.displayName="GridRow";n(5397);var ln=function(e,t){return ln=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},ln(e,t)};var cn=function(){return cn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},cn.apply(this,arguments)};function dn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var hn=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),pn={CLOSING:"mdc-snackbar--closing",OPEN:"mdc-snackbar--open",OPENING:"mdc-snackbar--opening"},fn={ACTION_SELECTOR:".mdc-snackbar__action",ARIA_LIVE_LABEL_TEXT_ATTR:"data-mdc-snackbar-label-text",CLOSED_EVENT:"MDCSnackbar:closed",CLOSING_EVENT:"MDCSnackbar:closing",DISMISS_SELECTOR:".mdc-snackbar__dismiss",LABEL_SELECTOR:".mdc-snackbar__label",OPENED_EVENT:"MDCSnackbar:opened",OPENING_EVENT:"MDCSnackbar:opening",REASON_ACTION:"action",REASON_DISMISS:"dismiss",SURFACE_SELECTOR:".mdc-snackbar__surface"},mn={DEFAULT_AUTO_DISMISS_TIMEOUT_MS:5e3,INDETERMINATE:-1,MAX_AUTO_DISMISS_TIMEOUT_MS:1e4,MIN_AUTO_DISMISS_TIMEOUT_MS:4e3,SNACKBAR_ANIMATION_CLOSE_TIME_MS:75,SNACKBAR_ANIMATION_OPEN_TIME_MS:150,ARIA_LIVE_DELAY_MS:1e3},gn=pn.OPENING,vn=pn.OPEN,yn=pn.CLOSING,bn=fn.REASON_ACTION,xn=fn.REASON_DISMISS,An=function(e){function t(n){var r=e.call(this,cn(cn({},t.defaultAdapter),n))||this;return r.isOpen_=!1,r.animationFrame_=0,r.animationTimer_=0,r.autoDismissTimer_=0,r.autoDismissTimeoutMs_=mn.DEFAULT_AUTO_DISMISS_TIMEOUT_MS,r.closeOnEscape_=!0,r}return function(e,t){function n(){this.constructor=e}ln(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return pn},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return fn},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return mn},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},announce:function(){},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},removeClass:function(){}}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.clearAutoDismissTimer_(),cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,clearTimeout(this.animationTimer_),this.animationTimer_=0,this.adapter.removeClass(gn),this.adapter.removeClass(vn),this.adapter.removeClass(yn)},t.prototype.open=function(){var e=this;this.clearAutoDismissTimer_(),this.isOpen_=!0,this.adapter.notifyOpening(),this.adapter.removeClass(yn),this.adapter.addClass(gn),this.adapter.announce(),this.runNextAnimationFrame_((function(){e.adapter.addClass(vn),e.animationTimer_=setTimeout((function(){var t=e.getTimeoutMs();e.handleAnimationTimerEnd_(),e.adapter.notifyOpened(),t!==mn.INDETERMINATE&&(e.autoDismissTimer_=setTimeout((function(){e.close(xn)}),t))}),mn.SNACKBAR_ANIMATION_OPEN_TIME_MS)}))},t.prototype.close=function(e){var t=this;void 0===e&&(e=""),this.isOpen_&&(cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,this.clearAutoDismissTimer_(),this.isOpen_=!1,this.adapter.notifyClosing(e),this.adapter.addClass(pn.CLOSING),this.adapter.removeClass(pn.OPEN),this.adapter.removeClass(pn.OPENING),clearTimeout(this.animationTimer_),this.animationTimer_=setTimeout((function(){t.handleAnimationTimerEnd_(),t.adapter.notifyClosed(e)}),mn.SNACKBAR_ANIMATION_CLOSE_TIME_MS))},t.prototype.isOpen=function(){return this.isOpen_},t.prototype.getTimeoutMs=function(){return this.autoDismissTimeoutMs_},t.prototype.setTimeoutMs=function(e){var t=mn.MIN_AUTO_DISMISS_TIMEOUT_MS,n=mn.MAX_AUTO_DISMISS_TIMEOUT_MS;if(!(e===mn.INDETERMINATE||e<=n&&e>=t))throw new Error("\n        timeoutMs must be an integer in the range "+t+"\u2013"+n+"\n        (or "+mn.INDETERMINATE+" to disable), but got '"+e+"'");this.autoDismissTimeoutMs_=e},t.prototype.getCloseOnEscape=function(){return this.closeOnEscape_},t.prototype.setCloseOnEscape=function(e){this.closeOnEscape_=e},t.prototype.handleKeyDown=function(e){("Escape"===e.key||27===e.keyCode)&&this.getCloseOnEscape()&&this.close(xn)},t.prototype.handleActionButtonClick=function(e){this.close(bn)},t.prototype.handleActionIconClick=function(e){this.close(xn)},t.prototype.clearAutoDismissTimer_=function(){clearTimeout(this.autoDismissTimer_),this.autoDismissTimer_=0},t.prototype.handleAnimationTimerEnd_=function(){this.animationTimer_=0,this.adapter.removeClass(pn.OPENING),this.adapter.removeClass(pn.CLOSING)},t.prototype.runNextAnimationFrame_=function(e){var t=this;cancelAnimationFrame(this.animationFrame_),this.animationFrame_=requestAnimationFrame((function(){t.animationFrame_=0,clearTimeout(t.animationTimer_),t.animationTimer_=setTimeout(e,0)}))},t}(hn);var wn=function(){return wn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},wn.apply(this,arguments)};var kn=function(e,t){return kn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},kn(e,t)};function Sn(e,t){function n(){this.constructor=e}kn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Cn=function(){return Cn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Cn.apply(this,arguments)};function In(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var En,Tn=n(1168),Nn={ripple:!0,tooltip:{align:"top",showArrow:!1,activateOn:["hover","focus"],enterDelay:0,leaveDelay:0},typography:{},icon:{icon:"",basename:"material-icons",prefix:"",strategy:"auto",render:void 0}},_n=e.createContext(Nn),Mn=function(){return e.useContext(_n)},Rn={blur:"onBlur",cancel:"onCancel",click:"onClick",close:"onClose",contextmenu:"onContextMenu",copy:"onCopy",cut:"onCut",auxclick:"onAuxClick",doubleclick:"onDoubleClick",dragend:"onDragEnd",dragstart:"onDragStart",drop:"onDrop",focus:"onFocus",input:"onInput",invalid:"onInvalid",keydown:"onKeyDown",keypress:"onKeyPress",keyup:"onKeyUp",mousedown:"onMouseDown",mouseup:"onMouseUp",paste:"onPaste",pause:"onPause",play:"onPlay",pointercancel:"onPointerCancel",pointerdown:"onPointerDown",pointerup:"onPointerUp",ratechange:"onRateChange",reset:"onReset",seeked:"onSeeked",submit:"onSubmit",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchstart:"onTouchStart",volumechange:"onVolumeChange",abort:"onAbort",animationend:"onAnimationEnd",animationiteration:"onAnimationIteration",animationstart:"onAnimationStart",canplay:"onCanPlay",canplaythrough:"onCanPlayThrough",drag:"onDrag",dragenter:"onDragEnter",dragexit:"onDragExit",dragleave:"onDragLeave",dragover:"onDragOver",durationchange:"onDurationChange",emptied:"onEmptied",encrypted:"onEncrypted",ended:"onEnded",error:"onError",gotpointercapture:"onGotPointerCapture",load:"onLoad",loadeddata:"onLoadedData",loadedmetadata:"onLoadedMetadata",loadstart:"onLoadStart",lostpointercapture:"onLostPointerCapture",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseover:"onMouseOver",playing:"onPlaying",pointermove:"onPointerMove",pointerout:"onPointerOut",pointerover:"onPointerOver",progress:"onProgress",scroll:"onScroll",seeking:"onSeeking",stalled:"onStalled",suspend:"onSuspend",timeupdate:"onTimeUpdate",toggle:"onToggle",touchmove:"onTouchMove",transitionend:"onTransitionEnd",waiting:"onWaiting",wheel:"onWheel",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",pointerenter:"onPointerEnter",pointerleave:"onPointerLeave",change:"onChange",select:"onSelect",beforeinput:"onBeforeInput",compositionend:"onCompositionEnd",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate"},On=function(e){return Rn[e]||e},Pn=function(){function e(e){this._classes=new Set,this._events={},this._style={},this._props={},this._ref=null,this._onChange=null,this._onChange=e,this.onChange=this.onChange.bind(this),this.addClass=this.addClass.bind(this),this.removeClass=this.removeClass.bind(this),this.hasClass=this.hasClass.bind(this),this.setProp=this.setProp.bind(this),this.getProp=this.getProp.bind(this),this.removeProp=this.removeProp.bind(this),this.setStyle=this.setStyle.bind(this),this.addEventListener=this.addEventListener.bind(this),this.removeEventListener=this.removeEventListener.bind(this),this.setRef=this.setRef.bind(this)}return e.prototype.onChange=function(){this._onChange&&this._onChange()},e.prototype.destroy=function(){var e=this;this._onChange=null,this._events={},this._style={},this._props={},this._classes=new Set,setTimeout((function(){e._ref=null}))},e.prototype.addClass=function(e){this._classes.has(e)||(this._classes.add(e),this.onChange())},e.prototype.removeClass=function(e){this._classes.has(e)&&(this._classes.delete(e),this.onChange())},e.prototype.hasClass=function(e){return this._classes.has(e)},e.prototype.setProp=function(e,t,n){void 0===n&&(n=!1),this._props[e]!==t&&(this._props[e]=t,!n&&this.onChange())},e.prototype.getProp=function(e){return this._props[e]},e.prototype.removeProp=function(e){void 0!==this._props[e]&&(delete this._props[e],this.onChange())},e.prototype.props=function(e){var t=this,n=e.className,r=void 0===n?"":n,a=e.style,i=void 0===a?{}:a,o=Object.entries(e).reduce((function(e,n){var r=qt(n,2),a=r[0],i=r[1],o=t._events[a];if("function"===typeof i&&"function"===typeof o){e[a]=function(e){return o(e),i(e)}}return e}),Ut({},this._events)),s=Zt()(r,Yt([],qt(this._classes))),u=Ut(Ut({},this._style),i);return Ut(Ut(Ut(Ut({},e),this._props),o),{style:u,className:s})},e.prototype.setStyle=function(e,t){e=e.startsWith("--")?e:e.replace(/(-[a-z])/g,(function(e){return e.toUpperCase().replace("-","")})),this._style[e]!==t&&(this._style[e]=t,this.onChange())},e.prototype.addEventListener=function(e,t){var n=On(e);this._events[n]!==t&&(this._events[n]=t,this.onChange())},e.prototype.removeEventListener=function(e,t){var n=On(e);this._events[n]&&(delete this._events[n],this.onChange())},e.prototype.setRef=function(e){e&&(this._ref=e)},Object.defineProperty(e.prototype,"ref",{get:function(){return this._ref},enumerable:!1,configurable:!0}),e}(),Fn=function(e){return function(t,n,r){var a;void 0===r&&(r=!1),a=new CustomEvent(t,{detail:n,bubbles:r}),Object.defineProperty(a,"target",{value:n,writable:!1}),Object.defineProperty(a,"currentTarget",{value:n,writable:!1});var i=t;return e[i]&&e[i](a),a}},Dn=function(t){var n=t.foundation,r=t.props,a=t.elements,i=t.api,o=qt((0,e.useState)(0),2)[1],s=(0,e.useRef)(r);s.current=r;var u=(0,e.useMemo)((function(){return Object.keys(a).reduce((function(e,t){return e[t]=new Pn((function(){o((function(e){return e+1}))})),e}),{})}),[]),l=(0,e.useMemo)((function(){var e=n(Ut(Ut({},u),{getProps:function(){return s.current},emit:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Fn(s.current).apply(void 0,Yt([],qt(e)))}}));return i&&nn(s.current.apiRef,i(Ut({foundation:e},u))),e}),[]);return(0,e.useEffect)((function(){var e=l;return e.init(),i&&nn(s.current.apiRef,i(Ut({foundation:e},u))),nn(s.current.foundationRef,e),function(){e.destroy(),nn(s.current.apiRef,null),nn(s.current.foundationRef,null),Object.values(u).map((function(e){return e.destroy()})),s.current={}}}),[l,u]),Ut({foundation:l},u)},Ln={bottom:0,height:0,left:0,right:0,top:0,width:0},zn=function(e,t){if(e instanceof Element){if(e&&e.closest)return e.closest(t);for(var n=e;n;){if(Bn(n,t))return n;n=n.parentElement}}return null},Bn=function(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)},Wn=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),jn={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},Vn={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},Hn={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};var Un,Gn=["touchstart","pointerdown","mousedown","keydown"],Xn=["touchend","pointerup","mouseup","contextmenu"],qn=[],Yn=function(e){function t(n){var r=e.call(this,Cn(Cn({},t.defaultAdapter),n))||this;return r.activationAnimationHasEnded_=!1,r.activationTimer_=0,r.fgDeactivationRemovalTimer_=0,r.fgScale_="0",r.frame_={width:0,height:0},r.initialSize_=0,r.layoutFrame_=0,r.maxRadius_=0,r.unboundedCoords_={left:0,top:0},r.activationState_=r.defaultActivationState_(),r.activationTimerCallback_=function(){r.activationAnimationHasEnded_=!0,r.runDeactivationUXLogicIfReady_()},r.activateHandler_=function(e){return r.activate_(e)},r.deactivateHandler_=function(){return r.deactivate_()},r.focusHandler_=function(){return r.handleFocus()},r.blurHandler_=function(){return r.handleBlur()},r.resizeHandler_=function(){return r.layout()},r}return Sn(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return jn},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Vn},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Hn},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this,n=this.supportsPressRipple_();if(this.registerRootHandlers_(n),n){var r=t.cssClasses,a=r.ROOT,i=r.UNBOUNDED;requestAnimationFrame((function(){e.adapter.addClass(a),e.adapter.isUnbounded()&&(e.adapter.addClass(i),e.layoutInternal_())}))}},t.prototype.destroy=function(){var e=this;if(this.supportsPressRipple_()){this.activationTimer_&&(clearTimeout(this.activationTimer_),this.activationTimer_=0,this.adapter.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer_&&(clearTimeout(this.fgDeactivationRemovalTimer_),this.fgDeactivationRemovalTimer_=0,this.adapter.removeClass(t.cssClasses.FG_DEACTIVATION));var n=t.cssClasses,r=n.ROOT,a=n.UNBOUNDED;requestAnimationFrame((function(){e.adapter.removeClass(r),e.adapter.removeClass(a),e.removeCssVars_()}))}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_()},t.prototype.activate=function(e){this.activate_(e)},t.prototype.deactivate=function(){this.deactivate_()},t.prototype.layout=function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){e.layoutInternal_(),e.layoutFrame_=0}))},t.prototype.setUnbounded=function(e){var n=t.cssClasses.UNBOUNDED;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.handleFocus=function(){var e=this;requestAnimationFrame((function(){return e.adapter.addClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.handleBlur=function(){var e=this;requestAnimationFrame((function(){return e.adapter.removeClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.supportsPressRipple_=function(){return this.adapter.browserSupportsCssVars()},t.prototype.defaultActivationState_=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers_=function(e){var t=this;e&&(Gn.forEach((function(e){t.adapter.registerInteractionHandler(e,t.activateHandler_)})),this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler_)),this.adapter.registerInteractionHandler("focus",this.focusHandler_),this.adapter.registerInteractionHandler("blur",this.blurHandler_)},t.prototype.registerDeactivationHandlers_=function(e){var t=this;"keydown"===e.type?this.adapter.registerInteractionHandler("keyup",this.deactivateHandler_):Xn.forEach((function(e){t.adapter.registerDocumentInteractionHandler(e,t.deactivateHandler_)}))},t.prototype.deregisterRootHandlers_=function(){var e=this;Gn.forEach((function(t){e.adapter.deregisterInteractionHandler(t,e.activateHandler_)})),this.adapter.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler_)},t.prototype.deregisterDeactivationHandlers_=function(){var e=this;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler_),Xn.forEach((function(t){e.adapter.deregisterDocumentInteractionHandler(t,e.deactivateHandler_)}))},t.prototype.removeCssVars_=function(){var e=this,n=t.strings;Object.keys(n).forEach((function(t){0===t.indexOf("VAR_")&&e.adapter.updateCssVariable(n[t],null)}))},t.prototype.activate_=function(e){var t=this;if(!this.adapter.isSurfaceDisabled()){var n=this.activationState_;if(!n.isActivated){var r=this.previousActivationEvent_;if(!(r&&void 0!==e&&r.type!==e.type))n.isActivated=!0,n.isProgrammatic=void 0===e,n.activationEvent=e,n.wasActivatedByPointer=!n.isProgrammatic&&(void 0!==e&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type)),void 0!==e&&qn.length>0&&qn.some((function(e){return t.adapter.containsEventTarget(e)}))?this.resetActivationState_():(void 0!==e&&(qn.push(e.target),this.registerDeactivationHandlers_(e)),n.wasElementMadeActive=this.checkElementMadeActive_(e),n.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame((function(){qn=[],n.wasElementMadeActive||void 0===e||" "!==e.key&&32!==e.keyCode||(n.wasElementMadeActive=t.checkElementMadeActive_(e),n.wasElementMadeActive&&t.animateActivation_()),n.wasElementMadeActive||(t.activationState_=t.defaultActivationState_())})))}}},t.prototype.checkElementMadeActive_=function(e){return void 0===e||"keydown"!==e.type||this.adapter.isSurfaceActive()},t.prototype.animateActivation_=function(){var e=this,n=t.strings,r=n.VAR_FG_TRANSLATE_START,a=n.VAR_FG_TRANSLATE_END,i=t.cssClasses,o=i.FG_DEACTIVATION,s=i.FG_ACTIVATION,u=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var l="",c="";if(!this.adapter.isUnbounded()){var d=this.getFgTranslationCoordinates_(),h=d.startPoint,p=d.endPoint;l=h.x+"px, "+h.y+"px",c=p.x+"px, "+p.y+"px"}this.adapter.updateCssVariable(r,l),this.adapter.updateCssVariable(a,c),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter.removeClass(o),this.adapter.computeBoundingRect(),this.adapter.addClass(s),this.activationTimer_=setTimeout((function(){return e.activationTimerCallback_()}),u)},t.prototype.getFgTranslationCoordinates_=function(){var e,t=this.activationState_,n=t.activationEvent;return e=t.wasActivatedByPointer?function(e,t,n){if(!e)return{x:0,y:0};var r,a,i=t.x,o=t.y,s=i+n.left,u=o+n.top;if("touchstart"===e.type){var l=e;r=l.changedTouches[0].pageX-s,a=l.changedTouches[0].pageY-u}else{var c=e;r=c.pageX-s,a=c.pageY-u}return{x:r,y:a}}(n,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2},{startPoint:e={x:e.x-this.initialSize_/2,y:e.y-this.initialSize_/2},endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}},t.prototype.runDeactivationUXLogicIfReady_=function(){var e=this,n=t.cssClasses.FG_DEACTIVATION,r=this.activationState_,a=r.hasDeactivationUXRun,i=r.isActivated;(a||!i)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter.addClass(n),this.fgDeactivationRemovalTimer_=setTimeout((function(){e.adapter.removeClass(n)}),Hn.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses_=function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter.removeClass(e),this.activationAnimationHasEnded_=!1,this.adapter.computeBoundingRect()},t.prototype.resetActivationState_=function(){var e=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout((function(){return e.previousActivationEvent_=void 0}),t.numbers.TAP_DELAY_MS)},t.prototype.deactivate_=function(){var e=this,t=this.activationState_;if(t.isActivated){var n=Cn({},t);t.isProgrammatic?(requestAnimationFrame((function(){return e.animateDeactivation_(n)})),this.resetActivationState_()):(this.deregisterDeactivationHandlers_(),requestAnimationFrame((function(){e.activationState_.hasDeactivationUXRun=!0,e.animateDeactivation_(n),e.resetActivationState_()})))}},t.prototype.animateDeactivation_=function(e){var t=e.wasActivatedByPointer,n=e.wasElementMadeActive;(t||n)&&this.runDeactivationUXLogicIfReady_()},t.prototype.layoutInternal_=function(){var e=this;this.frame_=this.adapter.computeBoundingRect();var n=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter.isUnbounded()?n:Math.sqrt(Math.pow(e.frame_.width,2)+Math.pow(e.frame_.height,2))+t.numbers.PADDING;var r=Math.floor(n*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&r%2!==0?this.initialSize_=r-1:this.initialSize_=r,this.fgScale_=""+this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()},t.prototype.updateLayoutCssVars_=function(){var e=t.strings,n=e.VAR_FG_SIZE,r=e.VAR_LEFT,a=e.VAR_TOP,i=e.VAR_FG_SCALE;this.adapter.updateCssVariable(n,this.initialSize_+"px"),this.adapter.updateCssVariable(i,this.fgScale_),this.adapter.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter.updateCssVariable(r,this.unboundedCoords_.left+"px"),this.adapter.updateCssVariable(a,this.unboundedCoords_.top+"px"))},t}(Wn),Kn=function(t){var n=(0,e.useRef)(!1),r=Dn({props:t,elements:{rootEl:!0,surfaceEl:!0},foundation:function(e){var t=e.rootEl,n=e.surfaceEl,r=e.getProps;return new Yn({browserSupportsCssVars:function(){return function(e,t){void 0===t&&(t=!1);var n,r=e.CSS;if("boolean"===typeof En&&!t)return En;if(!r||"function"!==typeof r.supports)return!1;var a=r.supports("--css-vars","yes"),i=r.supports("(--css-vars: yes)")&&r.supports("color","#00000000");return n=a||i,t||(En=n),n}(window)},isUnbounded:function(){return!!r().unbounded},isSurfaceActive:function(){return!!t.ref&&Bn(t.ref,":active")},isSurfaceDisabled:function(){return!!r().disabled},addClass:function(e){n.addClass(e)},removeClass:function(e){n.removeClass(e)},containsEventTarget:function(e){return!!t.ref&&t.ref.contains(e)},registerInteractionHandler:function(e,t){},deregisterInteractionHandler:function(e,t){},registerDocumentInteractionHandler:function(e,t){return document.documentElement.addEventListener(e,t,{passive:!0})},deregisterDocumentInteractionHandler:function(e,t){return document.documentElement.removeEventListener(e,t)},registerResizeHandler:function(e){return window.addEventListener("resize",e)},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},updateCssVariable:function(e,t){return n.setStyle(e,t)},computeBoundingRect:function(){return t.ref?t.ref.getBoundingClientRect():Ln},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}}})}}),a=r.foundation,i=In(r,["foundation"]),o=i.rootEl,s=(0,e.useCallback)((function(e){e.persist(),a.activate(e)}),[a]),u=(0,e.useCallback)((function(e){e.persist(),a.deactivate()}),[a]),l=t.onFocus,c=(0,e.useCallback)((function(e){null===l||void 0===l||l(e),a.handleFocus()}),[a,l]),d=t.onBlur,h=(0,e.useCallback)((function(e){null===d||void 0===d||d(e),a.handleBlur()}),[a,d]),p=t.onMouseDown,f=(0,e.useCallback)((function(e){null===p||void 0===p||p(e),n.current||s(e),n.current=!1}),[p,s]),m=t.onMouseUp,g=(0,e.useCallback)((function(e){null===m||void 0===m||m(e),u(e)}),[m,u]),v=t.onTouchStart,y=(0,e.useCallback)((function(e){n.current=!0,null===v||void 0===v||v(e),s(e)}),[v,s]),b=t.onTouchEnd,x=(0,e.useCallback)((function(e){null===b||void 0===b||b(e),u(e)}),[b,u]),A=t.onKeyDown,w=(0,e.useCallback)((function(e){null===A||void 0===A||A(e),s(e)}),[A,s]),k=t.onKeyUp,S=(0,e.useCallback)((function(e){null===k||void 0===k||k(e),u(e)}),[k,u]);return o.setProp("onFocus",c,!0),o.setProp("onBlur",h,!0),o.setProp("onMouseDown",f,!0),o.setProp("onMouseUp",g,!0),o.setProp("onTouchStart",y,!0),o.setProp("onTouchEnd",x,!0),o.setProp("onKeyDown",w,!0),o.setProp("onKeyUp",S,!0),(0,e.useEffect)((function(){o.setRef(t.domNode)}),[o,t.domNode]),(0,e.useEffect)((function(){a.setUnbounded(!!t.unbounded)}),[t.unbounded,a]),(0,e.useEffect)((function(){t.disabled&&a.handleBlur()}),[t.disabled,a]),Cn({},i)},Zn=e.createContext({}),Jn=(Un=function(t){var n=t.children,r=t.className,a=t.primary,i=t.accent,o=t.unbounded,s=t.surface,u=(t.domNode,t.foundationRef,In(t,["children","className","primary","accent","unbounded","surface","domNode","foundationRef"])),l=Kn(t),c=l.rootEl,d=l.surfaceEl,h=e.Children.only(n);if(!e.isValidElement(h))return null;var p=o?{"data-mdc-ripple-is-unbounded":!0}:{},f=s&&o?{}:d.props({style:h.props.style}),m=Zt()(r!==h.props.className&&r,f.className,h.props.className,{"mdc-ripple-surface":"boolean"===typeof s?s:void 0===s,"mdc-ripple-surface--primary":a,"mdc-ripple-surface--accent":i});u.disabled&&(m=m.replace("mdc-ripple-upgraded--background-focused",""));var g=e.cloneElement(h,Cn(Cn(Cn({},h.props),p),c.props(Cn(Cn(Cn(Cn({},u),{style:h.props.style}),f),{className:m}))));return e.createElement(Zn.Provider,{value:d.props({style:h.props.style})},g)},function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={domNode:null},e}return Sn(n,t),n.prototype.componentDidMount=function(){this.setState({domNode:Tn.findDOMNode(this)})},n.prototype.componentDidUpdate=function(){var e=Tn.findDOMNode(this);e!==this.state.domNode&&this.setState({rootRippleElement:e})},n.prototype.render=function(){return e.createElement(Un,Cn({},this.props,{domNode:this.state.domNode}))},n}(e.Component)),Qn=function(t){var n=t.className,r=In(t,["className"]);return e.createElement(Zn.Consumer,null,(function(t){return e.createElement("div",Cn({},r,t,{className:n+" "+(t.className||"")}))}))},$n=function(t){var n=void 0===t?{}:t,r=n.unbounded,a=n.accent,i=n.surface;return function(t){var n=e.forwardRef((function(n,o){var s=n.ripple,u=In(n,["ripple"]),l=Mn(),c="object"!==typeof(s=null!==s&&void 0!==s?s:l.ripple)?{}:s;return s?e.createElement(Jn,Cn({},u,{accent:c.accent||a,unbounded:c.unbounded||r,surface:c.surface||i}),e.createElement(t,Cn({},u,{ref:o}))):e.createElement(t,Cn({},u,{ref:o}))}));return n.displayName="withRipple("+(t.displayName||t.constructor.name||"Unknown")+")",n}},er=function(t,n,r){return"auto"===(n=n||r||"auto")?function(t){return"string"===typeof t&&t.includes("/")?"url":e.isValidElement(t)?"component":"ligature"}(t):n},tr={ligature:function(t){var n=t.content,r=Gt(t,["content"]);return e.createElement(nr,Ut({},r),n)},className:function(t){t.content;var n=Gt(t,["content"]);return e.createElement(nr,Ut({},n))},url:function(t){var n=t.content,r=Gt(t,["content"]);return e.createElement(nr,Ut({},r,{style:Ut(Ut({},r.style),{backgroundImage:"url("+n+")"})}))},component:function(t){var n=t.content,r=Gt(t,["content"]);if("svg"===n.type){var a=n.props,i=a.children,o=Gt(a,["children"]);return e.createElement(nr,Ut({},o,r,{tag:"svg"}),i)}return e.createElement(nr,Ut({},r),n)},auto:void 0},nr=e.forwardRef((function(t,n){return e.createElement($t,Ut({tag:"i"},t,{ref:n}))})),rr=rn((function(t,n){var r,a=t.icon,i=Gt(t,["icon"]),o=Mn(),s=Ut({},function(t){return e.isValidElement(t)||t&&"object"!==typeof t?{icon:t}:t}(a)),u=s.icon,l=s.strategy,c=s.prefix,d=s.basename,h=s.render,p=s.size,f=Gt(s,["icon","strategy","prefix","basename","render","size"]),m=o.icon||{},g=m.basename,v=void 0===g?null:g,y=m.prefix,b=void 0===y?null:y,x=m.strategy,A=void 0===x?null:x,w=m.render,k=void 0===w?null:w,S=u,C=er(S,l||null,A||null),I=void 0===d?v:d,E="className"===C&&"string"===typeof u?""+String(c||b)+u:null,T=!!C&&tr[C]||null;if("custom"===C&&(T=h||k),!T)return console.error("Icon: rendering not implemented for "+String(C)+"."),null;var N=T(Ut(Ut(Ut({},i),f),{ref:n,content:S,className:Zt()("rmwc-icon","rmwc-icon--"+C,I,i.className,f.className,E,(r={},r["rmwc-icon--size-"+(p||"")]=!!p,r))}));if(!e.isValidElement(N))return null;var _=an(N.props.children);return _.includes("Avatar")||_.includes("Icon")?e.cloneElement(N.props.children,Ut(Ut(Ut({},N.props.children.props),N.props),{ref:n,children:N.props.children.props.children,className:Zt()(N.props.className,N.props.children.props.className)})):N}));rr.displayName="Icon";var ar=$n({surface:!1})(rn((function(t,n){var r=t.dense,a=t.raised,i=t.unelevated,o=t.outlined,s=t.danger,u=t.icon,l=t.label,c=t.trailingIcon,d=t.children,h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(t,["dense","raised","unelevated","outlined","danger","icon","label","trailingIcon","children"]),p=en(t,["mdc-button",{"mdc-button--dense":r,"mdc-button--raised":a,"mdc-button--unelevated":i,"mdc-button--outlined":o}]);if(s){var f=h.style||{};h.style=wn(wn({},{"--mdc-theme-primary":"var(--mdc-theme-error)","--mdc-theme-on-primary":"var(--mdc-theme-on-error)"}),f)}return e.createElement($t,wn({tag:"button"},h,{ref:n,className:p}),e.createElement(ir,null),!!u&&e.createElement(or,{icon:u}),e.createElement("span",{className:"mdc-button__label"},l,d),!!c&&e.createElement(or,{icon:c}))}))),ir=e.memo((function(){return e.createElement("div",{className:"mdc-button__ripple"})})),or=function(t){var n=rn(t);return e.memo(n)}((function(t,n){var r=en(t,["mdc-button__icon"]);return e.createElement(rr,wn({},t,{className:r,ref:n}))})),sr=mn.ARIA_LIVE_DELAY_MS,ur=fn.ARIA_LIVE_LABEL_TEXT_ATTR;var lr=function(){window.dispatchEvent(new Event("resize"))};function cr(t){var n=Dn({props:t,elements:{rootEl:!0,surfaceEl:!0,labelEl:!0},foundation:function(e){var t=e.rootEl,n=e.labelEl,r=e.emit;return new An({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},announce:function(){return n.ref&&function(e,t){void 0===t&&(t=e);var n=e.getAttribute("aria-live"),r=t.textContent.trim();r&&n&&(e.setAttribute("aria-live","off"),t.textContent="",t.innerHTML='<span style="display: inline-block; width: 0; height: 1px;">&nbsp;</span>',t.setAttribute(ur,r),setTimeout((function(){e.setAttribute("aria-live",n),t.removeAttribute(ur),t.textContent=r}),sr))}(n.ref)},notifyOpening:function(){return r("onOpen",{})},notifyOpened:function(){lr(),r("onOpened",{})},notifyClosing:function(e){r("onClose",e?{reason:e}:{})},notifyClosed:function(e){return r("onClosed",e?{reason:e}:{})}})}}),r=n.foundation,a=dn(n,["foundation"]),i=a.rootEl,o=a.surfaceEl;return i.setProp("onKeyDown",(function(e){t.onKeyDown&&t.onKeyDown(e),r.handleKeyDown(e)}),!0),o.setProp("onClick",(function(e){if(e.target instanceof Element){var n=e.target,a=zn(n,".mdc-button");a&&(n=a),t.dismissesOnAction&&n.classList.contains("mdc-snackbar__action")?r.handleActionButtonClick(e,n.dataset.mdcSnackbarAction):n.classList.contains("mdc-snackbar__dismiss")&&r.handleActionIconClick(e)}}),!0),(0,e.useEffect)((function(){t.open?r.open():r.close()}),[t.open,r]),(0,e.useEffect)((function(){t.timeout&&(-1===t.timeout?r.setTimeoutMs(t.timeout):r.autoDismissTimeoutMs_=t.timeout)}),[t.timeout,r]),cn({foundation:r},a)}An.prototype.handleActionButtonClick=function(e,t){this.close(t)};var dr=function(e,t){return dr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},dr(e,t)};var hr=function(){return hr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},hr.apply(this,arguments)};function pr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var fr=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),mr={ICON_BUTTON_ON:"mdc-icon-button--on",ROOT:"mdc-icon-button"},gr={ARIA_LABEL:"aria-label",ARIA_PRESSED:"aria-pressed",DATA_ARIA_LABEL_OFF:"data-aria-label-off",DATA_ARIA_LABEL_ON:"data-aria-label-on",CHANGE_EVENT:"MDCIconButtonToggle:change"},vr=function(e){function t(n){var r=e.call(this,hr(hr({},t.defaultAdapter),n))||this;return r.hasToggledAriaLabel=!1,r}return function(e,t){function n(){this.constructor=e}dr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return mr},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return gr},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},hasClass:function(){return!1},notifyChange:function(){},removeClass:function(){},getAttr:function(){return null},setAttr:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this.adapter.getAttr(gr.DATA_ARIA_LABEL_ON),t=this.adapter.getAttr(gr.DATA_ARIA_LABEL_OFF);if(e&&t){if(null!==this.adapter.getAttr(gr.ARIA_PRESSED))throw new Error("MDCIconButtonToggleFoundation: Button should not set `aria-pressed` if it has a toggled aria label.");this.hasToggledAriaLabel=!0}else this.adapter.setAttr(gr.ARIA_PRESSED,String(this.isOn()))},t.prototype.handleClick=function(){this.toggle(),this.adapter.notifyChange({isOn:this.isOn()})},t.prototype.isOn=function(){return this.adapter.hasClass(mr.ICON_BUTTON_ON)},t.prototype.toggle=function(e){if(void 0===e&&(e=!this.isOn()),e?this.adapter.addClass(mr.ICON_BUTTON_ON):this.adapter.removeClass(mr.ICON_BUTTON_ON),this.hasToggledAriaLabel){var t=e?this.adapter.getAttr(gr.DATA_ARIA_LABEL_ON):this.adapter.getAttr(gr.DATA_ARIA_LABEL_OFF);this.adapter.setAttr(gr.ARIA_LABEL,t||"")}else this.adapter.setAttr(gr.ARIA_PRESSED,""+e)},t}(fr),yr=rn((function(t,n){var r=pr(t,[]);return r.onIcon?e.createElement(br,hr({},r,{ref:n})):e.createElement(xr,hr({tag:"button"},r,{ref:n}))})),br=rn((function(t,n){var r=t.icon,a=t.onIcon,i=(t.foundationRef,pr(t,["icon","onIcon","foundationRef"])),o=function(t){var n=Dn({props:t,elements:{rootEl:!0},foundation:function(e){var t=e.rootEl,n=e.emit;return new vr({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},hasClass:function(e){return t.hasClass(e)},setAttr:function(e,n){return t.setProp(e,n)},notifyChange:function(e){return n("onChange",e)}})}}),r=n.foundation,a=pr(n,["foundation"]),i=a.rootEl,o=void 0!==t.checked?t.checked:r.isOn();return(0,e.useEffect)((function(){o!==r.isOn()&&r.toggle(o)}),[r,o]),i.setProp("onClick",(function(e){var n;null===(n=t.onClick)||void 0===n||n.call(t,e),r.handleClick()}),!0),hr({isOn:o,foundation:r},a)}(t),s=o.isOn,u=o.rootEl;return e.createElement(Ar,hr({"aria-pressed":s},u.props(i),{tag:"button",ref:n}),e.createElement(wr,{icon:r}),e.createElement(wr,{icon:a,on:!0}))})),xr=$n({surface:!1,unbounded:!0})(rn((function(t,n){var r=t.checked,a=t.label,i=(t.foundationRef,pr(t,["checked","label","foundationRef"])),o=en(t,["mdc-icon-button",{"mdc-icon-button--on":r}]);return e.createElement(rr,hr({role:"button",tabIndex:0,"aria-label":a},i,{className:o,ref:n}))}))),Ar=$n({surface:!1,unbounded:!0})(rn((function(t,n){var r=t.checked,a=pr(t,["checked"]),i=en(t,["mdc-icon-button",{"mdc-icon-button--on":r}]);return e.createElement($t,hr({tag:"button",role:"button",tabIndex:0},a,{className:i,ref:n}))}))),wr=e.memo((function(t){t.on;var n=pr(t,["on"]),r=en(t,["mdc-icon-button__icon",{"mdc-icon-button__icon--on":t.on}]);return e.createElement(rr,hr({},n,{className:r}))})),kr=rn((function(t,n){var r=cr(t),a=r.rootEl,i=r.surfaceEl,o=r.labelEl,s=(t.open,t.message),u=(t.timeout,t.dismissIcon),l=(t.onOpen,t.onClose,t.children),c=t.action,d=t.icon,h=t.leading,p=t.stacked,f=(t.dismissesOnAction,t.foundationRef,dn(t,["open","message","timeout","dismissIcon","onOpen","onClose","children","action","icon","leading","stacked","dismissesOnAction","foundationRef"])),m=en(t,["mdc-snackbar",{"mdc-snackbar--leading":h,"mdc-snackbar--stacked":p}]),g=Array.isArray(c)?c:c?[c]:[];return e.createElement($t,cn({},f,{ref:n,element:a,"aria-live":"assertive","aria-atomic":!0,"aria-hidden":!0,className:m}),e.createElement("div",cn({},i.props({}),{className:"mdc-snackbar__surface"}),!!d&&e.createElement(rr,{style:{color:"rgba(255, 255, 255, 0.87)",fill:"currentColor",marginLeft:"1rem"},icon:d}),e.createElement(Sr,null,s,e.createElement("div",{style:{display:"none"},ref:o.setRef})),e.createElement(Cr,null,g.map((function(t,n){return e.createElement(e.Fragment,{key:n},t)})),u&&e.createElement(Er,{icon:!0===u?"close":u})),l))}));function Sr(t){return e.createElement("div",cn({role:"status","aria-live":"polite",className:"mdc-snackbar__label"},t))}function Cr(t){return e.createElement("div",cn({className:"mdc-snackbar__actions"},t))}var Ir=rn((function(t,n){var r=en(t,["mdc-snackbar__action"]),a=t.action,i=void 0===a?An.strings.REASON_ACTION:a,o=dn(t,["action"]);return e.createElement(ar,cn({},o,{className:r,ref:n,"data-mdc-snackbar-action":i}))}));function Er(t){return e.createElement(yr,cn({},t,{className:"mdc-snackbar__dismiss"}))}n(7292);function Tr(e){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr(e)}function Nr(){Nr=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),o=new k(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return C()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===c)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=u;var c={};function d(){}function h(){}function p(){}var f={};s(f,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==t&&n.call(g,a)&&(f=g);var v=p.prototype=d.prototype=Object.create(f);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(a,i,o,s){var u=l(e[a],e,i);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==Tr(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var a;this._invoke=function(e,n){function i(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(i,i):i()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return h.prototype=p,s(v,"constructor",p),s(p,"constructor",h),h.displayName=s(p,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,o,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new b(u(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(v),s(v,o,"Generator"),s(v,a,(function(){return this})),s(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;w(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function _r(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,a)}function Mr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){_r(i,r,a,o,s,"next",e)}function s(e){_r(i,r,a,o,s,"throw",e)}o(void 0)}))}}var Rr=n(2790),Or=n.n(Rr);function Pr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Fr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dr(e){return Dr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dr(e)}function Lr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dr(e)););return e}function zr(){return zr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Lr(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},zr.apply(this,arguments)}function Br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(n),!0).forEach((function(t){Fr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vr(e,t){return Vr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Vr(e,t)}function Hr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ur(e,t,n){return Ur=Hr()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&Vr(a,n.prototype),a},Ur.apply(null,arguments)}function Gr(e){var t="function"===typeof Map?new Map:void 0;return Gr=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Ur(e,arguments,Dr(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Vr(n,e)},Gr(e)}function Xr(e,t){if(t&&("object"===Tr(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return jr(e)}function qr(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Yr(e){return a(e)||qr(e)||o(e)||s()}function Kr(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vr(e,t)}function Zr(e){var t=Hr();return function(){var n,r=Dr(e);if(t){var a=Dr(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Xr(this,n)}}function Jr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $r(e,t,n){return t&&Qr(e.prototype,t),n&&Qr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ea(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}function ta(e){return function(e){if(Array.isArray(e))return i(e)}(e)||qr(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function na(e){var t,n,r,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new ra(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function ra(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return ra=function(e){this.s=e,this.n=e.next},ra.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new ra(e)}var aa="/index.js",ia=["units"],oa=Object.defineProperty,sa=function(e,t){for(var n in t)oa(e,n,{get:t[n],enumerable:!0})},ua=function(e,t,n){return function(e,t,n){t in e?oa(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!==typeof t?t+"":t,n),n},la=function(e,t,n){if(!t.has(e))throw TypeError("Cannot "+n)},ca=function(e,t,n){return la(e,t,"read from private field"),n?n.call(e):t.get(e)},da=function(e,t,n){if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},ha=function(e,t,n,r){return la(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n};function pa(){for(var e,t=new Date,n="".concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"),":").concat(t.getSeconds().toString().padStart(2,"0"),".").concat(t.getMilliseconds().toString().padStart(3,"0")),r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];a&&(e=console).log.apply(e,[n,"Human:"].concat(a))}function fa(e,t){var n=e.endsWith("/")?"":"/",r=t.startsWith(".")||t.startsWith("/")||t.startsWith("http:")||t.startsWith("https:")||t.startsWith("file:")?"".concat(t):"".concat(e).concat(n).concat(t);if(!r.toLocaleLowerCase().includes(".json"))throw new Error("modelpath error: expecting json file: ".concat(r));return r}var ma=function(){return"undefined"!==typeof performance?performance.now():parseInt((Number(process.hrtime.bigint())/1e3/1e3).toString())};function ga(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"config",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=0,i=Object.keys(t);a<i.length;a++){var o=i[a];if("object"===typeof t[o])ga(e[o],t[o],o,r);else{var s=e&&"undefined"!==typeof e[o];s||r.push({reason:"unknown property",where:"".concat(n,".").concat(o," = ").concat(t[o])});var u=e&&typeof e[o]===typeof t[o];s&&!u&&r.push({reason:"property type mismatch",where:"".concat(n,".").concat(o," = ").concat(t[o]),expected:typeof e[o]})}}return t.debug&&"config"===n&&r.length>0&&pa("invalid configuration",r),r}function va(){for(var e=function(e){return e&&"object"===typeof e},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce((function(t,n){return Object.keys(n||{}).forEach((function(r){var a=t[r],i=n[r];Array.isArray(a)&&Array.isArray(i)?t[r]=a.concat.apply(a,ta(i)):e(a)&&e(i)?t[r]=va(a,i):t[r]=i})),t}),{})}var ya={backend:"",modelBasePath:"",cacheModels:!0,wasmPath:"",wasmPlatformFetch:!1,debug:!0,async:!0,warmup:"full",cacheSensitivity:.7,skipAllowed:!1,deallocate:!1,filter:{enabled:!0,equalization:!1,width:0,height:0,flip:!1,return:!0,brightness:0,contrast:0,sharpness:0,blur:0,saturation:0,hue:0,negative:!1,sepia:!1,vintage:!1,kodachrome:!1,technicolor:!1,polaroid:!1,pixelate:0},gesture:{enabled:!0},face:{enabled:!0,detector:{modelPath:"blazeface.json",rotation:!0,maxDetected:1,skipFrames:99,skipTime:2500,minConfidence:.2,iouThreshold:.1,mask:!1,return:!1},mesh:{enabled:!0,modelPath:"facemesh.json",keepInvalid:!1},attention:{enabled:!1,modelPath:"facemesh-attention.json"},iris:{enabled:!0,modelPath:"iris.json"},emotion:{enabled:!0,minConfidence:.1,skipFrames:99,skipTime:1500,modelPath:"emotion.json"},description:{enabled:!0,modelPath:"faceres.json",skipFrames:99,skipTime:3e3,minConfidence:.1},antispoof:{enabled:!1,skipFrames:99,skipTime:4e3,modelPath:"antispoof.json"},liveness:{enabled:!1,skipFrames:99,skipTime:4e3,modelPath:"liveness.json"}},body:{enabled:!0,modelPath:"movenet-lightning.json",maxDetected:-1,minConfidence:.3,skipFrames:1,skipTime:200},hand:{enabled:!0,rotation:!0,skipFrames:99,skipTime:1e3,minConfidence:.5,iouThreshold:.2,maxDetected:-1,landmarks:!0,detector:{modelPath:"handtrack.json"},skeleton:{modelPath:"handlandmark-full.json"}},object:{enabled:!1,modelPath:"mb3-centernet.json",minConfidence:.2,iouThreshold:.4,maxDetected:10,skipFrames:99,skipTime:2e3},segmentation:{enabled:!1,modelPath:"selfie.json",blur:8}},ba={};sa(ba,{Abs:function(){return to},Acos:function(){return no},Acosh:function(){return ro},AdadeltaOptimizer:function(){return Vb},AdagradOptimizer:function(){return Hb},AdamOptimizer:function(){return Ub},AdamaxOptimizer:function(){return Gb},Add:function(){return ao},AddN:function(){return io},All:function(){return oo},Any:function(){return so},ArgMax:function(){return uo},ArgMin:function(){return lo},Asin:function(){return co},Asinh:function(){return ho},Atan:function(){return po},Atan2:function(){return mo},Atanh:function(){return fo},AvgPool:function(){return go},AvgPool3D:function(){return yo},AvgPool3DGrad:function(){return bo},AvgPoolGrad:function(){return vo},BackendWasm:function(){return d7},BatchMatMul:function(){return xo},BatchToSpaceND:function(){return Ao},Bincount:function(){return wo},BroadcastArgs:function(){return So},BroadcastTo:function(){return ko},Callback:function(){return kM},CallbackList:function(){return KC},Cast:function(){return Co},Ceil:function(){return Io},ClipByValue:function(){return Eo},Complex:function(){return To},ComplexAbs:function(){return No},Concat:function(){return _o},Conv2D:function(){return Mo},Conv2DBackpropFilter:function(){return Ro},Conv2DBackpropInput:function(){return Oo},Conv3D:function(){return Po},Conv3DBackpropFilterV2:function(){return Fo},Conv3DBackpropInputV2:function(){return Do},Cos:function(){return Lo},Cosh:function(){return zo},CropAndResize:function(){return jo},Cumprod:function(){return Bo},Cumsum:function(){return Wo},CustomCallback:function(){return QC},DataStorage:function(){return Ka},DenseBincount:function(){return Vo},DepthToSpace:function(){return Ho},DepthwiseConv2dNative:function(){return Uo},DepthwiseConv2dNativeBackpropFilter:function(){return Go},DepthwiseConv2dNativeBackpropInput:function(){return Xo},Diag:function(){return qo},Dilation2D:function(){return Yo},Dilation2DBackpropFilter:function(){return Zo},Dilation2DBackpropInput:function(){return Ko},ENV:function(){return Qi},EarlyStopping:function(){return IM},Einsum:function(){return Qo},Elu:function(){return $o},EluGrad:function(){return es},Environment:function(){return qi},Equal:function(){return ns},Erf:function(){return ts},Exp:function(){return rs},ExpandDims:function(){return as},Expm1:function(){return is},FFT:function(){return os},Fill:function(){return ss},FlipLeftRight:function(){return us},Floor:function(){return ls},FloorDiv:function(){return cs},FromPixels:function(){return sl},FusedBatchNorm:function(){return ds},FusedConv2D:function(){return cl},FusedDepthwiseConv2D:function(){return dl},GPGPUContext:function(){return bH},GatherNd:function(){return ps},GatherV2:function(){return hs},GraphModel:function(){return fO},Greater:function(){return fs},GreaterEqual:function(){return ms},History:function(){return JC},IFFT:function(){return vs},Identity:function(){return gs},Imag:function(){return ys},InputSpec:function(){return Xw},IsFinite:function(){return bs},IsInf:function(){return xs},IsNan:function(){return As},KernelBackend:function(){return Za},LRN:function(){return Ps},LRNGrad:function(){return Fs},LayerVariable:function(){return Hw},LayersModel:function(){return gE},LeakyRelu:function(){return ws},Less:function(){return ks},LessEqual:function(){return Ss},LinSpace:function(){return Cs},Log:function(){return Is},Log1p:function(){return Es},LogSoftmax:function(){return Rs},LogicalAnd:function(){return Ts},LogicalNot:function(){return Ns},LogicalOr:function(){return _s},LogicalXor:function(){return Ms},LowerBound:function(){return Os},MathBackendCPU:function(){return UP},MathBackendWebGL:function(){return LU},Max:function(){return Ds},MaxPool:function(){return zs},MaxPool3D:function(){return Ws},MaxPool3DGrad:function(){return js},MaxPoolGrad:function(){return Bs},MaxPoolWithArgmax:function(){return Vs},Maximum:function(){return Ls},Mean:function(){return Hs},Min:function(){return Us},Minimum:function(){return Gs},MirrorPad:function(){return Xs},Mod:function(){return qs},MomentumOptimizer:function(){return qb},Multinomial:function(){return Ys},Multiply:function(){return Ks},Neg:function(){return Zs},NonMaxSuppressionV3:function(){return Qs},NonMaxSuppressionV4:function(){return $s},NonMaxSuppressionV5:function(){return eu},NotEqual:function(){return Js},OP_SCOPE_SUFFIX:function(){return Vc},OneHot:function(){return nu},OnesLike:function(){return tu},Optimizer:function(){return jb},OptimizerConstructors:function(){return Kb},Pack:function(){return ru},PadV2:function(){return au},Pool:function(){return iu},Pow:function(){return ou},Prelu:function(){return su},Prod:function(){return uu},RMSPropOptimizer:function(){return Yb},RNN:function(){return RT},Range:function(){return lu},Rank:function(){return cc},Real:function(){return cu},RealDiv:function(){return Jo},Reciprocal:function(){return du},Reduction:function(){return mb},Relu:function(){return hu},Relu6:function(){return yu},Reshape:function(){return pu},ResizeBilinear:function(){return gu},ResizeBilinearGrad:function(){return vu},ResizeNearestNeighbor:function(){return fu},ResizeNearestNeighborGrad:function(){return mu},Reverse:function(){return bu},RotateWithOffset:function(){return ul},Round:function(){return xu},Rsqrt:function(){return Au},SGDOptimizer:function(){return Xb},ScatterNd:function(){return wu},SearchSorted:function(){return ku},Select:function(){return Su},Selu:function(){return Cu},Sequential:function(){return CE},Sigmoid:function(){return _u},Sign:function(){return Nu},Sin:function(){return Eu},Sinh:function(){return Tu},Slice:function(){return Iu},Softmax:function(){return Du},Softplus:function(){return Mu},SpaceToBatchND:function(){return Pu},SparseFillEmptyRows:function(){return Lu},SparseReshape:function(){return zu},SparseSegmentMean:function(){return Bu},SparseSegmentSum:function(){return Wu},SparseToDense:function(){return ju},SplitV:function(){return Fu},Sqrt:function(){return Ru},Square:function(){return Hu},SquaredDifference:function(){return Vu},Step:function(){return ol},StridedSlice:function(){return Uu},StringNGrams:function(){return Gu},StringSplit:function(){return Xu},StringToHashBucketFast:function(){return qu},Sub:function(){return Yu},Sum:function(){return Ou},SymbolicTensor:function(){return qw},Tan:function(){return Ku},Tanh:function(){return Zu},Tensor:function(){return sc},TensorBuffer:function(){return ac},Tile:function(){return Ju},TopK:function(){return Qu},Transform:function(){return $u},Transpose:function(){return el},Unique:function(){return tl},Unpack:function(){return nl},UnsortedSegmentSum:function(){return rl},UpperBound:function(){return al},Variable:function(){return uc},ZerosLike:function(){return il},_FusedMatMul:function(){return ll},abs:function(){return cf},acos:function(){return df},acosh:function(){return hf},add:function(){return of},addN:function(){return pf},all:function(){return ff},any:function(){return mf},argMax:function(){return gf},argMin:function(){return vf},asin:function(){return yf},asinh:function(){return bf},atan:function(){return xf},atan2:function(){return Af},atanh:function(){return wf},avgPool:function(){return Wf},avgPool3d:function(){return jf},backend:function(){return Jh},backend_util:function(){return $b},basicLSTMCell:function(){return Xf},batchNorm:function(){return Kf},batchNorm2d:function(){return Zf},batchNorm3d:function(){return Jf},batchNorm4d:function(){return Qf},batchToSpaceND:function(){return qf},bincount:function(){return $f},booleanMaskAsync:function(){return dy},broadcastArgs:function(){return em},broadcastTo:function(){return tm},broadcast_util:function(){return ap},browser:function(){return lp},buffer:function(){return eh},callbacks:function(){return EM},cast:function(){return th},ceil:function(){return nm},clipByValue:function(){return rm},clone:function(){return nh},complex:function(){return Uc},concat:function(){return Vf},concat1d:function(){return am},concat2d:function(){return im},concat3d:function(){return om},concat4d:function(){return sm},constraints:function(){return pC},conv1d:function(){return lm},conv2d:function(){return um},conv2dTranspose:function(){return dm},conv3d:function(){return hm},conv3dTranspose:function(){return fm},copyRegisteredKernels:function(){return kl},cos:function(){return mm},cosh:function(){return gm},cosineWindow:function(){return by},cumprod:function(){return vm},cumsum:function(){return ym},customGrad:function(){return Ag},data:function(){return xO},denseBincount:function(){return bm},deprecationWarn:function(){return Fh},depthToSpace:function(){return xm},depthwiseConv2d:function(){return Am},deregisterOp:function(){return OM},device_util:function(){return Rc},diag:function(){return wm},dilation2d:function(){return km},disableDeprecationWarnings:function(){return Ph},dispose:function(){return jh},disposeVariables:function(){return Dh},div:function(){return uf},divNoNan:function(){return Em},dot:function(){return Tm},dropout:function(){return vy},einsum:function(){return Nm},elu:function(){return _m},enableDebugMode:function(){return Oh},enableProdMode:function(){return Rh},enclosingPowerOfTwo:function(){return yy},engine:function(){return Lh},env:function(){return Zi},equal:function(){return Sm},erf:function(){return Mm},euclideanNorm:function(){return Km},exp:function(){return Zm},expandDims:function(){return Jm},expm1:function(){return Qm},eye:function(){return eg},fft:function(){return zv},fill:function(){return tg},findBackend:function(){return Yh},findBackendFactory:function(){return Kh},floor:function(){return ng},floorDiv:function(){return sf},forceHalfFloat:function(){return BU},fused:function(){return wy},gather:function(){return rg},gatherND:function(){return gy},gather_util:function(){return yp},getBackend:function(){return Xh},getGradient:function(){return vl},getKernel:function(){return gl},getKernelsForBackend:function(){return yl},getThreadsCount:function(){return E7},gpgpu_util:function(){return ZV},grad:function(){return gg},grads:function(){return vg},greater:function(){return ag},greaterEqual:function(){return ig},ifft:function(){return Bv},imag:function(){return $h},image:function(){return Db},inTopKAsync:function(){return Ay},initializers:function(){return TC},input:function(){return NE},io:function(){return ah},irfft:function(){return Wv},isFinite:function(){return og},isInf:function(){return sg},isNaN:function(){return ug},keep:function(){return Vh},kernel_impls:function(){return $x},layers:function(){return UC},leakyRelu:function(){return lg},less:function(){return cg},lessEqual:function(){return dg},linalg:function(){return Lb},linspace:function(){return hg},loadGraphModel:function(){return mO},loadGraphModelSync:function(){return vO},loadLayersModel:function(){return TE},localResponseNormalization:function(){return pg},log:function(){return fg},log1p:function(){return mg},logSigmoid:function(){return Sg},logSoftmax:function(){return Ig},logSumExp:function(){return Eg},logicalAnd:function(){return Tg},logicalNot:function(){return Ng},logicalOr:function(){return _g},logicalXor:function(){return Mg},losses:function(){return zb},lowerBound:function(){return Pg},matMul:function(){return _h},math:function(){return Nh},max:function(){return Wm},maxPool:function(){return Fg},maxPool3d:function(){return Dg},maxPoolWithArgmax:function(){return Lg},maximum:function(){return zg},mean:function(){return Bg},memory:function(){return zh},meshgrid:function(){return Vg},metrics:function(){return nM},min:function(){return jm},minimum:function(){return Hg},mirrorPad:function(){return Ug},mod:function(){return Gg},model:function(){return IE},models:function(){return yM},moments:function(){return Xg},movingAverage:function(){return hy},mul:function(){return lf},multiRNNCell:function(){return qg},multinomial:function(){return Yg},neg:function(){return ep},nextFrame:function(){return Qb},norm:function(){return Ym},notEqual:function(){return Kg},oneHot:function(){return Mh},ones:function(){return jg},onesLike:function(){return Zg},op:function(){return Hc},outerProduct:function(){return Jg},pad:function(){return Qg},pad1d:function(){return $g},pad2d:function(){return ev},pad3d:function(){return tv},pad4d:function(){return nv},pool:function(){return av},pow:function(){return Vm},prelu:function(){return iv},print:function(){return rh},prod:function(){return ov},profile:function(){return Bh},rand:function(){return sv},randomGamma:function(){return hv},randomNormal:function(){return pv},randomUniform:function(){return fv},range:function(){return mv},ready:function(){return Gh},real:function(){return tp},reciprocal:function(){return gv},registerBackend:function(){return Zh},registerCallbackConstructor:function(){return _E},registerGradient:function(){return xl},registerKernel:function(){return bl},registerOp:function(){return MM},regularizers:function(){return bM},relu:function(){return vv},relu6:function(){return yv},removeBackend:function(){return qh},reshape:function(){return Bf},reverse:function(){return bv},reverse1d:function(){return xv},reverse2d:function(){return Av},reverse3d:function(){return wv},reverse4d:function(){return kv},rfft:function(){return Vv},round:function(){return Sv},rsqrt:function(){return Cv},scalar:function(){return Hm},scatterND:function(){return py},scatter_util:function(){return xp},searchSorted:function(){return Og},selu:function(){return Iv},separableConv2d:function(){return Ev},sequential:function(){return EE},serialization:function(){return Vp},setBackend:function(){return Uh},setPlatform:function(){return Qh},setThreadsCount:function(){return I7},setWasmPath:function(){return w7},setWasmPaths:function(){return k7},setWebGLContext:function(){return oj},setdiff1dAsync:function(){return Nv},shared:function(){return GP},sigmoid:function(){return Hf},sign:function(){return _v},signal:function(){return Fb},sin:function(){return Mv},sinh:function(){return Rv},slice:function(){return Uf},slice1d:function(){return Ov},slice2d:function(){return Pv},slice3d:function(){return Fv},slice4d:function(){return Dv},slice_util:function(){return Sp},softmax:function(){return Lv},softplus:function(){return kg},spaceToBatchND:function(){return rv},sparse:function(){return Bb},sparseToDense:function(){return my},spectral:function(){return Pb},split:function(){return jv},sqrt:function(){return Um},square:function(){return Gm},squaredDifference:function(){return Hv},squeeze:function(){return Uv},stack:function(){return Gv},step:function(){return Xv},stridedSlice:function(){return qv},string:function(){return Wb},sub:function(){return Cg},sum:function(){return Xm},sumOutType:function(){return vc},tan:function(){return Yv},tanh:function(){return Gf},tensor:function(){return Xc},tensor1d:function(){return Kv},tensor2d:function(){return Zv},tensor3d:function(){return cp},tensor4d:function(){return Jv},tensor5d:function(){return Qv},tensor6d:function(){return $v},tensor_util:function(){return lc},test_util:function(){return Xp},tidy:function(){return Wh},tile:function(){return $m},time:function(){return Hh},topk:function(){return ey},train:function(){return Zb},transpose:function(){return np},truncatedNormal:function(){return ty},unique:function(){return ny},unregisterGradient:function(){return wl},unregisterKernel:function(){return Al},unsortedSegmentSum:function(){return ry},unstack:function(){return ay},upcastType:function(){return gc},upperBound:function(){return iy},util:function(){return Cl},valueAndGrad:function(){return yg},valueAndGrads:function(){return bg},variable:function(){return oy},variableGrads:function(){return xg},version:function(){return _7},version_converter:function(){return bO},version_core:function(){return af},version_cpu:function(){return JD},version_layers:function(){return zI},version_wasm:function(){return T7},version_webgl:function(){return zU},webgl:function(){return WU},webgl_util:function(){return rj},webgpu:function(){return q2},where:function(){return Cm},whereAsync:function(){return ly},zeros:function(){return Wg},zerosLike:function(){return Im}});var xa=Object.create,Aa=Object.defineProperty,wa=Object.getOwnPropertyDescriptor,ka=Object.getOwnPropertyNames,Sa=Object.getPrototypeOf,Ca=Object.prototype.hasOwnProperty,Ia=function(e,t){return function(){return t||(0,e[ka(e)[0]])((t={exports:{}}).exports,t),t.exports}},Ea=function(e,t){for(var n in t)Aa(e,n,{get:t[n],enumerable:!0})},Ta=function(e,t){return function(e,t,n,r){if(t&&"object"==typeof t||"function"==typeof t){var a,i=ea(ka(t));try{var o=function(){var i=a.value;!Ca.call(e,i)&&(n||"default"!==i)&&Aa(e,i,{get:function(){return t[i]},enumerable:!(r=wa(t,i))||r.enumerable})};for(i.s();!(a=i.n()).done;)o()}catch(s){i.e(s)}finally{i.f()}}return e}(function(e){return Aa(e,"__esModule",{value:!0})}(Aa(null!=e?xa(Sa(e)):{},"default",!t&&e&&e.__esModule?{get:function(){return e.default},enumerable:!0}:{value:e,enumerable:!0})),e)},Na=Ia({"src/node_modules/long/src/long.js":function(e,t){t.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(kt){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function a(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=a;var i={},o={};function s(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=l(e,(0|e)<0?-1:0,!0),a&&(o[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=l(e,e<0?-1:0,!1),a&&(i[e]=n),n)}function u(e,t){if(isNaN(e))return t?y:v;if(t){if(e<0)return y;if(e>=f)return k}else{if(e<=-m)return S;if(e+1>=m)return w}return e<0?u(-e,t).neg():l(e%p|0,e/p|0,t)}function l(e,t,n){return new r(e,t,n)}r.fromInt=s,r.fromNumber=u,r.fromBits=l;var c=Math.pow;function d(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return v;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return d(e.substring(1),t,n).neg();for(var a=u(c(n,8)),i=v,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),l=parseInt(e.substring(o,o+s),n);if(s<8){var h=u(c(n,s));i=i.mul(h).add(u(l))}else i=(i=i.mul(a)).add(u(l))}return i.unsigned=t,i}function h(e,t){return"number"==typeof e?u(e,t):"string"==typeof e?d(e,t):l(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=h;var p=4294967296,f=p*p,m=f/2,g=s(1<<24),v=s(0);r.ZERO=v;var y=s(0,!0);r.UZERO=y;var b=s(1);r.ONE=b;var x=s(1,!0);r.UONE=x;var A=s(-1);r.NEG_ONE=A;var w=l(-1,2147483647,!1);r.MAX_VALUE=w;var k=l(-1,-1,!0);r.MAX_UNSIGNED_VALUE=k;var S=l(0,-2147483648,!1);r.MIN_VALUE=S;var C=r.prototype;C.toInt=function(){return this.unsigned?this.low>>>0:this.low},C.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},C.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=u(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=u(c(e,6),this.unsigned),i=this,o="";;){var s=i.div(a),l=(i.sub(s.mul(a)).toInt()>>>0).toString(e);if((i=s).isZero())return l+o;for(;l.length<6;)l="0"+l;o=""+l+o}},C.getHighBits=function(){return this.high},C.getHighBitsUnsigned=function(){return this.high>>>0},C.getLowBits=function(){return this.low},C.getLowBitsUnsigned=function(){return this.low>>>0},C.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},C.isZero=function(){return 0===this.high&&0===this.low},C.eqz=C.isZero,C.isNegative=function(){return!this.unsigned&&this.high<0},C.isPositive=function(){return this.unsigned||this.high>=0},C.isOdd=function(){return 1===(1&this.low)},C.isEven=function(){return 0===(1&this.low)},C.equals=function(e){return a(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},C.eq=C.equals,C.notEquals=function(e){return!this.eq(e)},C.neq=C.notEquals,C.ne=C.notEquals,C.lessThan=function(e){return this.comp(e)<0},C.lt=C.lessThan,C.lessThanOrEqual=function(e){return this.comp(e)<=0},C.lte=C.lessThanOrEqual,C.le=C.lessThanOrEqual,C.greaterThan=function(e){return this.comp(e)>0},C.gt=C.greaterThan,C.greaterThanOrEqual=function(e){return this.comp(e)>=0},C.gte=C.greaterThanOrEqual,C.ge=C.greaterThanOrEqual,C.compare=function(e){if(a(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},C.comp=C.compare,C.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(b)},C.neg=C.negate,C.add=function(e){a(e)||(e=h(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,u=e.low>>>16,c=0,d=0,p=0,f=0;return p+=(f+=i+(65535&e.low))>>>16,d+=(p+=r+u)>>>16,c+=(d+=n+s)>>>16,c+=t+o,l((p&=65535)<<16|(f&=65535),(c&=65535)<<16|(d&=65535),this.unsigned)},C.subtract=function(e){return a(e)||(e=h(e)),this.add(e.neg())},C.sub=C.subtract,C.multiply=function(e){if(this.isZero())return v;if(a(e)||(e=h(e)),n)return l(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return v;if(this.eq(S))return e.isOdd()?S:v;if(e.eq(S))return this.isOdd()?S:v;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return u(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,c=65535&e.high,d=e.low>>>16,p=65535&e.low,f=0,m=0,y=0,b=0;return y+=(b+=o*p)>>>16,m+=(y+=i*p)>>>16,y&=65535,m+=(y+=o*d)>>>16,f+=(m+=r*p)>>>16,m&=65535,f+=(m+=i*d)>>>16,m&=65535,f+=(m+=o*c)>>>16,f+=t*p+r*d+i*c+o*s,l((y&=65535)<<16|(b&=65535),(f&=65535)<<16|(m&=65535),this.unsigned)},C.mul=C.multiply,C.divide=function(e){if(a(e)||(e=h(e)),e.isZero())throw Error("division by zero");var t,r,i;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?l((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:v;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return x;i=y}else{if(this.eq(S))return e.eq(b)||e.eq(A)?S:e.eq(S)?b:(t=this.shr(1).div(e).shl(1)).eq(v)?e.isNegative()?b:A:(r=this.sub(e.mul(t)),i=t.add(r.div(e)));if(e.eq(S))return this.unsigned?y:v;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=v}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),s=o<=48?1:c(2,o-48),d=u(t),p=d.mul(e);p.isNegative()||p.gt(r);)p=(d=u(t-=s,this.unsigned)).mul(e);d.isZero()&&(d=b),i=i.add(d),r=r.sub(p)}return i},C.div=C.divide,C.modulo=function(e){return a(e)||(e=h(e)),n?l((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},C.mod=C.modulo,C.rem=C.modulo,C.not=function(){return l(~this.low,~this.high,this.unsigned)},C.and=function(e){return a(e)||(e=h(e)),l(this.low&e.low,this.high&e.high,this.unsigned)},C.or=function(e){return a(e)||(e=h(e)),l(this.low|e.low,this.high|e.high,this.unsigned)},C.xor=function(e){return a(e)||(e=h(e)),l(this.low^e.low,this.high^e.high,this.unsigned)},C.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):l(0,this.low<<e-32,this.unsigned)},C.shl=C.shiftLeft,C.shiftRight=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?l(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):l(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},C.shr=C.shiftRight,C.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?l(this.low>>>e|t<<32-e,t>>>e,this.unsigned):l(32===e?t:t>>>e-32,0,this.unsigned)},C.shru=C.shiftRightUnsigned,C.shr_u=C.shiftRightUnsigned,C.toSigned=function(){return this.unsigned?l(this.low,this.high,!1):this},C.toUnsigned=function(){return this.unsigned?this:l(this.low,this.high,!0)},C.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},C.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},C.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}}}),_a=Ia({"(disabled):src/node_modules/node-fetch/browser.js":function(){}}),Ma=Ia({"(disabled):util":function(){}}),Ra=Ia({"src/node_modules/seedrandom/lib/alea.js":function(e,t){!function(e,t,n){function r(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){var n=new r(e),i=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.alea=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),Oa=Ia({"src/node_modules/seedrandom/lib/xor128.js":function(e,t){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xor128=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),Pa=Ia({"src/node_modules/seedrandom/lib/xorwow.js":function(e,t){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xorwow=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),Fa=Ia({"src/node_modules/seedrandom/lib/xorshift7.js":function(e,t){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&(i.x&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xorshift7=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),Da=Ia({"src/node_modules/seedrandom/lib/xor4096.js":function(e,t){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&(i.X&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xor4096=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),La=Ia({"src/node_modules/seedrandom/lib/tychei.js":function(e,t){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.tychei=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),za=Ia({"(disabled):crypto":function(){}}),Ba=Ia({"src/node_modules/seedrandom/seedrandom.js":function(e,t){!function(e,r,a){var i,o=256,s="random",u=a.pow(o,6),l=a.pow(2,52),c=2*l,d=255;function h(t,n,d){var h=[],y=g(m((n=1==n?{entropy:!0}:n||{}).entropy?[t,v(r)]:null==t?function(){try{var t;return i&&(t=i.randomBytes)?t=t(o):(t=new Uint8Array(o),(e.crypto||e.msCrypto).getRandomValues(t)),v(t)}catch(h){var n=e.navigator,a=n&&n.plugins;return[+new Date,e,a,e.screen,v(r)]}}():t,3),h),b=new p(h),x=function(){for(var e=b.g(6),t=u,n=0;e<l;)e=(e+n)*o,t*=o,n=b.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return x.int32=function(){return 0|b.g(4)},x.quick=function(){return b.g(4)/4294967296},x.double=x,g(v(b.S),r),(n.pass||d||function(e,t,n,r){return r&&(r.S&&f(r,b),e.state=function(){return f(b,{})}),n?(a[s]=e,t):e})(x,y,"global"in n?n.global:this==a,n.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);a<o;)s[a]=a++;for(a=0;a<o;a++)s[a]=s[i=d&i+e[a%n]+(t=s[a])],s[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,s=r.S;e--;)t=s[a=d&a+1],n=n*o+s[d&(s[a]=s[i=d&i+t])+(s[i]=t)];return r.i=a,r.j=i,n})(o)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(ft){}return r.length?r:"string"==a?e:e+"\0"}function g(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return v(t)}function v(e){return String.fromCharCode.apply(0,e)}if(g(a.random(),r),"object"==typeof t&&t.exports){t.exports=h;try{i=za()}catch(xt){}}else"function"==typeof define&&n.amdO?define((function(){return h})):a["seed"+s]=h}("undefined"!=typeof self?self:e,[],Math)}}),Wa=Ia({"src/node_modules/seedrandom/index.js":function(e,t){var n=Ra(),r=Oa(),a=Pa(),i=Fa(),o=Da(),s=La(),u=Ba();u.alea=n,u.xor128=r,u.xorwow=a,u.xorshift7=i,u.xor4096=o,u.tychei=s,t.exports=u}}),ja=Ia({"(disabled):src/node_modules/string_decoder/index.js":function(){}}),Va=Ia({"(disabled):fs":function(){}}),Ha=Ia({"(disabled):path":function(){}}),Ua=Ia({"(disabled):worker_threads":function(){}}),Ga=Ia({"(disabled):perf_hooks":function(){}}),Xa=Ia({"(disabled):os":function(){}}),qa=Ia({"src/tfjs-backend-wasm/wasm-out/tfjs-backend-wasm-threaded-simd.js":function(e,t){var r=function(){var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||aa,function(t){function r(){return P.buffer!=G&&J(P.buffer),X}function a(){return P.buffer!=G&&J(P.buffer),q}function i(){return P.buffer!=G&&J(P.buffer),Y}function o(){return P.buffer!=G&&J(P.buffer),K}var s,u,l,c="undefined"!=typeof(t=t||{})?t:{};c.ready=new Promise((function(e,t){s=e,u=t})),"undefined"!=typeof process&&process.listeners&&(l={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var d,h,p,f,m,g,v=Object.assign({},c),y=[],b=function(e,t){throw t},x="object"==typeof window,A="function"==typeof importScripts,w="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,k=c.ENVIRONMENT_IS_PTHREAD||!1,S="";function C(e){return c.locateFile?c.locateFile(e,S):S+e}if(w){var I;S=A?Ha().dirname(S)+"/":"//",g=function(){m||(f=Va(),m=Ha())},d=function(e,t){return g(),e=m.normalize(e),f.readFileSync(e,t?void 0:"utf8")},p=function(e){var t=d(e,!0);return t.buffer||(t=new Uint8Array(t)),t},h=function(e,t,n){g(),e=m.normalize(e),f.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),y=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ht))throw e})),process.on("unhandledRejection",(function(e){throw e})),b=function(e,t){if(ae())throw process.exitCode=e,t;(function(e){e instanceof ht||_("exiting due to exception: "+e)})(t),process.exit(e)},c.inspect=function(){return"[Emscripten Module object]"};try{I=Ua()}catch(St){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),St}n.g.Worker=I.Worker}else(x||A)&&(A?S=self.location.href:"undefined"!=typeof document&&document.currentScript&&(S=document.currentScript.src),"undefined"!=typeof e&&e&&(S=e),S=0!==S.indexOf("blob:")?S.substr(0,S.replace(/[?#].*/,"").lastIndexOf("/")+1):"",w||(d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},A&&(p=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),h=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}),function(e){return document.title=e});w&&"undefined"==typeof performance&&(n.g.performance=Ga().performance);var E=console.log.bind(console),T=console.warn.bind(console);w&&(g(),E=function(e){return f.writeSync(1,e+"\n")},T=function(e){return f.writeSync(2,e+"\n")});var N=c.print||E,_=c.printErr||T;Object.assign(c,v),v=null,c.arguments&&(y=c.arguments),c.thisProgram&&c.thisProgram,c.quit&&(b=c.quit);function M(e){M.shown||(M.shown={}),M.shown[e]||(M.shown[e]=1,_(e))}var R;Atomics.load,Atomics.store,Atomics.compareExchange;c.wasmBinary&&(R=c.wasmBinary);var O=c.noExitRuntime||!0;"object"!=typeof WebAssembly&&de("no native wasm support detected");var P,F,D,L=!1;function z(e){return c["_"+e]}function B(e,t,n,a,i){var o={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);U(e,t=ct(n),n)}return t},array:function(e){var t=ct(e.length);return function(e,t){r().set(e,t)}(e,t),t}};var s=z(e),u=[],l=0;if(a)for(var c=0;c<a.length;c++){var d=o[n[c]];d?(0===l&&(l=ut()),u[c]=d(a[c])):u[c]=a[c]}var h,p=s.apply(null,u);return h=p,0!==l&&lt(l),p=function(e){return"string"===t?H(e):"boolean"===t?Boolean(e):e}(h),p}function W(e){var t=new TextDecoder(e);this.decode=function(e){return e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),t.decode.call(t,e)}}var j="undefined"!=typeof TextDecoder?new W("utf8"):void 0;function V(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&j)return j.decode(e.subarray(t,a));for(var i="";t<a;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var u=63&e[t++];if((o=224==(240&o)?(15&o)<<12|s<<6|u:(7&o)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(o);else{var l=o-65536;i+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else i+=String.fromCharCode((31&o)<<6|s)}else i+=String.fromCharCode(o)}return i}function H(e,t){return e?V(a(),e,t):""}function U(e,t,n){return function(e,t,n,r){if(!(r>0))return 0;for(var a=n,i=n+r-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-a}(e,a(),t,n)}var G,X,q,Y,K;"undefined"!=typeof TextDecoder&&new W("utf-16le");function Z(e,t){return e%t>0&&(e+=t-e%t),e}function J(e){G=e,c.HEAP8=X=new Int8Array(e),c.HEAP16=new Int16Array(e),c.HEAP32=Y=new Int32Array(e),c.HEAPU8=q=new Uint8Array(e),c.HEAPU16=new Uint16Array(e),c.HEAPU32=new Uint32Array(e),c.HEAPF32=new Float32Array(e),c.HEAPF64=K=new Float64Array(e)}k&&(G=c.buffer);var Q=c.INITIAL_MEMORY||16777216;if(k)P=c.wasmMemory,G=c.buffer;else if(c.wasmMemory)P=c.wasmMemory;else if(!((P=new WebAssembly.Memory({initial:Q/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw _("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),w&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");P&&(G=P.buffer),Q=G.byteLength,J(G);var $,ee=[],te=[],ne=[],re=[];function ae(){return O||!1}function ie(){!0,!k&&ve(te)}function oe(e){ee.unshift(e)}function se(e){re.unshift(e)}var ue=0,le=null,ce=null;function de(e){k?postMessage({cmd:"onAbort",arg:e}):c.onAbort&&c.onAbort(e),_(e="Aborted("+e+")"),L=!0,D=1,e+=". Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw u(t),t}c.preloadedImages={},c.preloadedAudios={};var he;function pe(e){return e.startsWith("data:application/octet-stream;base64,")}function fe(e){return e.startsWith("file://")}function me(e){try{if(e==he&&R)return new Uint8Array(R);if(p)return p(e);throw"both async and sync fetching of the wasm failed"}catch(St){de(St)}}pe(he="tfjs-backend-wasm-threaded-simd.wasm")||(he=C(he));var ge={};function ve(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?Ce(n)():Ce(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(c)}}function ye(e){var t=ut(),n=e();return lt(t),n}function be(e){var t=Ae.pthreads[e];if(t){i()[e>>2]=0;var n=t.worker;Ae.returnWorkerToPool(n)}}function xe(e){!function(e,t){if(D=e,!t&&k)throw we(e),"unwind";ae()||k||(Ae.terminateAllThreads(),!0),function(e){D=e,ae()||(Ae.terminateAllThreads(),c.onExit&&c.onExit(e),L=!0),b(e,new ht(e))}(e)}(e)}var Ae={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],init:function(){k?Ae.initWorker():Ae.initMainThread()},initMainThread:function(){for(var e=0;e<8;++e)Ae.allocateUnusedWorker()},initWorker:function(){O=!1},pthreads:{},setExitStatus:function(e){D=e},terminateAllThreads:function(){for(var e in Ae.pthreads){var t=Ae.pthreads[e];t&&t.worker&&Ae.returnWorkerToPool(t.worker)}for(var n=0;n<Ae.unusedWorkers.length;++n){Ae.unusedWorkers[n].terminate()}Ae.unusedWorkers=[]},returnWorkerToPool:function(e){Ae.runWithoutMainThreadQueuedCalls((function(){delete Ae.pthreads[e.pthread.threadInfoStruct],Ae.unusedWorkers.push(e),Ae.runningWorkers.splice(Ae.runningWorkers.indexOf(e),1),ot(e.pthread.threadInfoStruct),e.pthread=void 0}))},runWithoutMainThreadQueuedCalls:function(e){i()[dt>>2]=0;try{e()}finally{i()[dt>>2]=1}},receiveObjectTransfer:function(e){},threadInit:function(){for(var e in Ae.tlsInitFunctions)Ae.tlsInitFunctions[e]()},loadWasmModuleToWorker:function(t,n){t.onmessage=function(e){var r=e.data,a=r.cmd;if(t.pthread&&(Ae.currentProxiedOperationCallerThread=t.pthread.threadInfoStruct),r.targetThread&&r.targetThread!=et()){var o=Ae.pthreads[r.targetThread];return o?o.worker.postMessage(r,r.transferList):_('Internal error! Worker sent a message "'+a+'" to target pthread '+r.targetThread+", but that thread no longer exists!"),void(Ae.currentProxiedOperationCallerThread=void 0)}"processQueuedMainThreadWork"===a?tt():"spawnThread"===a?Ee(r):"cleanupThread"===a?be(r.thread):"killThread"===a?function(e){i()[e>>2]=0;var t=Ae.pthreads[e];delete Ae.pthreads[e],t.worker.terminate(),ot(e),Ae.runningWorkers.splice(Ae.runningWorkers.indexOf(t.worker),1),t.worker.pthread=void 0}(r.thread):"cancelThread"===a?function(e){Ae.pthreads[e].worker.postMessage({cmd:"cancel"})}(r.thread):"loaded"===a?(t.loaded=!0,n&&n(t),t.runPthread&&(t.runPthread(),delete t.runPthread)):"print"===a?N("Thread "+r.threadId+": "+r.text):"printErr"===a?_("Thread "+r.threadId+": "+r.text):"alert"===a?alert("Thread "+r.threadId+": "+r.text):"setimmediate"===r.target?t.postMessage(r):"onAbort"===a?c.onAbort&&c.onAbort(r.arg):_("worker sent an unknown command "+a),Ae.currentProxiedOperationCallerThread=void 0},t.onerror=function(e){throw _("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},w&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:c.mainScriptUrlOrBlob||e,wasmMemory:P,wasmModule:F})},allocateUnusedWorker:function(){var e=C("tfjs-backend-wasm-threaded-simd.worker.js");Ae.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return 0==Ae.unusedWorkers.length&&(Ae.allocateUnusedWorker(),Ae.loadWasmModuleToWorker(Ae.unusedWorkers[0])),Ae.unusedWorkers.pop()}};function we(e){if(k)return Ne(1,0,e);try{xe(e)}catch(St){!function(e){if(e instanceof ht||"unwind"==e)return D;b(1,e)}(St)}}c.establishStackSpace=function(){var e=et(),t=i()[e+44>>2],n=i()[e+48>>2];st(t,t-n),lt(t)};var ke,Se=[];function Ce(e){var t=Se[e];return t||(e>=Se.length&&(Se.length=e+1),Se[e]=t=$.get(e)),t}c.invokeEntryPoint=function(e,t){return Ce(e)(t)},ke=w?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:k?function(){return performance.now()-c.__performance_now_clock_drift}:function(){return performance.now()};function Ie(e,t){var n;if(0===e)n=Date.now();else{if(1!==e&&4!==e)return function(e){i()[$e()>>2]=e}(28),-1;n=ke()}return i()[t>>2]=n/1e3|0,i()[t+4>>2]=n%1e3*1e3*1e3|0,0}function Ee(e){var t=Ae.getNewWorker();if(!t)return 6;Ae.runningWorkers.push(t);var n=Ae.pthreads[e.pthread_ptr]={worker:t,threadInfoStruct:e.pthread_ptr};t.pthread=n;var r={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr};return t.runPthread=function(){r.time=performance.now(),t.postMessage(r,e.transferList)},t.loaded&&(t.runPthread(),delete t.runPthread),0}function Te(){return 2147483648}function Ne(e,t){var n=arguments.length-2,r=arguments;return ye((function(){for(var a=n,i=ct(8*a),s=i>>3,u=0;u<n;u++){var l=r[2+u];o()[s+u]=l}return at(e,a,i,t)}))}var _e=[];function Me(e){try{return P.grow(e-G.byteLength+65535>>>16),J(P.buffer),1}catch(St){}}var Re={inEventHandler:0,removeAllEventListeners:function(){for(var e=Re.eventHandlers.length-1;e>=0;--e)Re._removeHandler(e);Re.eventHandlers=[],Re.deferredCalls=[]},registerRemoveEventListeners:function(){Re.removeEventListenersRegistered||(ne.push(Re.removeAllEventListeners),Re.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,n){function r(e,t){if(e.length!=t.length)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0}for(var a in Re.deferredCalls){var i=Re.deferredCalls[a];if(i.targetFunction==e&&r(i.argsList,n))return}Re.deferredCalls.push({targetFunction:e,precedence:t,argsList:n}),Re.deferredCalls.sort((function(e,t){return e.precedence<t.precedence}))},removeDeferredCalls:function(e){for(var t=0;t<Re.deferredCalls.length;++t)Re.deferredCalls[t].targetFunction==e&&(Re.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return Re.inEventHandler&&Re.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(Re.canPerformEventHandlerRequests())for(var e=0;e<Re.deferredCalls.length;++e){var t=Re.deferredCalls[e];Re.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var n=0;n<Re.eventHandlers.length;++n)Re.eventHandlers[n].target==e&&(!t||t==Re.eventHandlers[n].eventTypeString)&&Re._removeHandler(n--)},_removeHandler:function(e){var t=Re.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),Re.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(t){++Re.inEventHandler,Re.currentEventHandler=e,Re.runDeferredCalls(),e.handlerFunc(t),Re.runDeferredCalls(),--Re.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),Re.eventHandlers.push(e),Re.registerRemoveEventListeners();else for(var n=0;n<Re.eventHandlers.length;++n)Re.eventHandlers[n].target==e.target&&Re.eventHandlers[n].eventTypeString==e.eventTypeString&&Re._removeHandler(n--)},queueEventHandlerOnThread_iiii:function(e,t,n,r,a){ye((function(){var o=ct(12);i()[o>>2]=n,i()[o+4>>2]=r,i()[o+8>>2]=a,it(e,637534208,t,r,o)}))},getTargetThreadForEventCallback:function(e){switch(e){case 1:return 0;case 2:return Ae.currentProxiedOperationCallerThread;default:return e}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function Oe(e,t,n,r){ye((function(){var a=ct(12),o=0;t&&(o=function(e){var t=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}(e)+1,n=Je(t);return U(e,n,t),n}(t)),i()[a>>2]=o,i()[a+4>>2]=n,i()[a+8>>2]=r,it(e,657457152,0,o,a)}))}var Pe=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function Fe(e){return e=function(e){return e>2?H(e):e}(e),Pe[e]||("undefined"!=typeof document?document.querySelector(e):void 0)}function De(e){return Fe(e)}function Le(e,t,n){var r=De(e);if(!r)return-4;if(r.canvasSharedPtr&&(i()[r.canvasSharedPtr>>2]=t,i()[r.canvasSharedPtr+4>>2]=n),!r.offscreenCanvas&&r.controlTransferredOffscreen)return r.canvasSharedPtr?(function(e,t,n,r){Oe(e,t=t?H(t):"",n,r)}(i()[r.canvasSharedPtr+8>>2],e,t,n),1):-4;r.offscreenCanvas&&(r=r.offscreenCanvas);var a=!1;if(r.GLctxObject&&r.GLctxObject.GLctx){var o=r.GLctxObject.GLctx.getParameter(2978);a=0===o[0]&&0===o[1]&&o[2]===r.width&&o[3]===r.height}return r.width=t,r.height=n,a&&r.GLctxObject.GLctx.viewport(0,0,t,n),0}function ze(e,t,n){return k?Ne(2,1,e,t,n):Le(e,t,n)}var Be={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},queries:[],stringCache:{},unpackAlignment:4,recordError:function(e){Be.lastError||(Be.lastError=e)},getNewId:function(e){for(var t=Be.counter++,n=e.length;n<t;n++)e[n]=null;return t},getSource:function(e,t,n,r){for(var a="",o=0;o<t;++o){var s=r?i()[r+4*o>>2]:-1;a+=H(i()[n+4*o>>2],s<0?void 0:s)}return a},createContext:function(e,t){e.getContextSafariWebGL2Fixed||(e.getContextSafariWebGL2Fixed=e.getContext,e.getContext=function(t,n){var r=e.getContextSafariWebGL2Fixed(t,n);return"webgl"==t==r instanceof WebGLRenderingContext?r:null});var n=e.getContext("webgl",t);return n?Be.registerContext(n,t):0},registerContext:function(e,t){var n=Je(8);i()[n+4>>2]=et();var r={handle:n,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=r),Be.contexts[n]=r,("undefined"==typeof t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&Be.initExtensions(r),n},makeContextCurrent:function(e){return Be.currentContext=Be.contexts[e],c.ctx=Ge=Be.currentContext&&Be.currentContext.GLctx,!(e&&!Ge)},getContext:function(e){return Be.contexts[e]},deleteContext:function(e){Be.currentContext===Be.contexts[e]&&(Be.currentContext=null),"object"==typeof Re&&Re.removeAllHandlersOnTarget(Be.contexts[e].GLctx.canvas),Be.contexts[e]&&Be.contexts[e].GLctx.canvas&&(Be.contexts[e].GLctx.canvas.GLctxObject=void 0),Qe(Be.contexts[e].handle),Be.contexts[e]=null},initExtensions:function(e){if(e||(e=Be.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t=e.GLctx;(function(e){var t=e.getExtension("ANGLE_instanced_arrays");if(t)e.vertexAttribDivisor=function(e,n){t.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,r,a){t.drawArraysInstancedANGLE(e,n,r,a)},e.drawElementsInstanced=function(e,n,r,a,i){t.drawElementsInstancedANGLE(e,n,r,a,i)}})(t),function(e){var t=e.getExtension("OES_vertex_array_object");if(t)e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)}}(t),function(e){var t=e.getExtension("WEBGL_draw_buffers");if(t)e.drawBuffers=function(e,n){t.drawBuffersWEBGL(e,n)}}(t),t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query"),function(e){e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw")}(t),(t.getSupportedExtensions()||[]).forEach((function(e){!e.includes("lose_context")&&!e.includes("debug")&&t.getExtension(e)}))}}},We=["default","low-power","high-performance"];var je={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=je.buffers[e];0===t||10===t?((1===e?N:_)(V(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return je.varargs+=4,i()[je.varargs-4>>2]},getStr:function(e){return H(e)},get64:function(e,t){return e}};function Ve(e){return k?Ne(3,1,e):0}function He(e,t,n,r,a){if(k)return Ne(4,1,e,t,n,r,a)}function Ue(e,t,n,r){if(k)return Ne(5,1,e,t,n,r);for(var o=0,s=0;s<n;s++){var u=i()[t>>2],l=i()[t+4>>2];t+=8;for(var c=0;c<l;c++)je.printChar(e,a()[u+c]);o+=l}return i()[r>>2]=o,0}Ae.init();var Ge,Xe,qe,Ye,Ke=[null,we,ze,Ve,He,Ue],Ze={__clock_gettime:function(e,t){return Ie(e,t)},__emscripten_init_main_thread_js:function(e){nt(e,!A,1,!x),Ae.threadInit()},__emscripten_thread_cleanup:function(e){k?postMessage({cmd:"cleanupThread",thread:e}):be(e)},__pthread_create_js:function(e,t,n,r){if("undefined"==typeof SharedArrayBuffer)return _("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];if(k&&0===a.length)return rt(687865856,e,t,n,r);var i={startRoutine:n,pthread_ptr:e,arg:r,transferList:a};return k?(i.cmd="spawnThread",postMessage(i,a),0):Ee(i)},_emscripten_default_pthread_stack_size:function(){return 2097152},_emscripten_notify_thread_queue:function(e,t){if(e==t)postMessage({cmd:"processQueuedMainThreadWork"});else if(k)postMessage({targetThread:e,cmd:"processThreadQueue"});else{var n=Ae.pthreads[e],r=n&&n.worker;if(!r)return;r.postMessage({cmd:"processThreadQueue"})}return 1},abort:function(){de("")},emscripten_check_blocking_allowed:function(){w||A||M("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},emscripten_get_heap_max:Te,emscripten_get_now:ke,emscripten_memcpy_big:function(e,t,n){a().copyWithin(e,t,t+n)},emscripten_num_logical_cores:function(){return w?Xa().cpus().length:navigator.hardwareConcurrency},emscripten_receive_on_main_thread_js:function(e,t,n){_e.length=t;for(var r=n>>3,a=0;a<t;a++)_e[a]=o()[r+a];return(e<0?ge[-e-1]:Ke[e]).apply(null,_e)},emscripten_resize_heap:function(e){var t=a().length;if((e>>>=0)<=t)return!1;var n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var i=t*(1+.2/r);if(i=Math.min(i,e+100663296),Me(Math.min(n,Z(Math.max(e,i),65536))))return!0}return!1},emscripten_set_canvas_element_size:function(e,t,n){return De(e)?Le(e,t,n):ze(e,t,n)},emscripten_unwind_to_js_event_loop:function(){throw"unwind"},emscripten_webgl_create_context:function(e,t){return function(e,t){var n=t>>2,r=i()[n+6],a={alpha:!!i()[n+0],depth:!!i()[n+1],stencil:!!i()[n+2],antialias:!!i()[n+3],premultipliedAlpha:!!i()[n+4],preserveDrawingBuffer:!!i()[n+5],powerPreference:We[r],failIfMajorPerformanceCaveat:!!i()[n+7],majorVersion:i()[n+8],minorVersion:i()[n+9],enableExtensionsByDefault:i()[n+10],explicitSwapControl:i()[n+11],proxyContextToMainThread:i()[n+12],renderViaOffscreenBackBuffer:i()[n+13]},o=De(e);return!o||a.explicitSwapControl?0:Be.createContext(o,a)}(e,t)},exit:xe,fd_close:Ve,fd_seek:He,fd_write:Ue,memory:P||c.wasmMemory,setTempRet0:function(e){!function(e){e}(e)}},Je=(function(){var e={env:Ze,wasi_snapshot_preview1:Ze};function t(e,t){var n=e.exports;if(c.asm=n,function(e,t,n){Ae.tlsInitFunctions.push(e)}(c.asm.emscripten_tls_init),$=c.asm.__indirect_function_table,function(e){te.unshift(e)}(c.asm.__wasm_call_ctors),F=t,!k){var r=Ae.unusedWorkers.length;Ae.unusedWorkers.forEach((function(e){Ae.loadWasmModuleToWorker(e,(function(){--r||function(e){if(ue--,c.monitorRunDependencies&&c.monitorRunDependencies(ue),0==ue&&(null!==le&&(clearInterval(le),le=null),ce)){var t=ce;ce=null,t()}}()}))}))}}function n(e){t(e.instance,e.module)}function r(t){return function(){if(!R&&(x||A)){if("function"==typeof fetch&&!fe(he))return fetch(he,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+he+"'";return e.arrayBuffer()})).catch((function(){return me(he)}));if(h)return new Promise((function(e,t){h(he,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return me(he)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){_("failed to asynchronously prepare wasm: "+e),de(e)}))}if(k||(ue++,c.monitorRunDependencies&&c.monitorRunDependencies(ue)),c.instantiateWasm)try{return c.instantiateWasm(e,t)}catch(a){return _("Module.instantiateWasm callback failed with error: "+a),!1}(R||"function"!=typeof WebAssembly.instantiateStreaming||pe(he)||fe(he)||"function"!=typeof fetch?r(n):fetch(he,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return _("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(u)}(),c.___wasm_call_ctors=function(){return(c.___wasm_call_ctors=c.asm.__wasm_call_ctors).apply(null,arguments)},c._init=function(){return(c._init=c.asm.init).apply(null,arguments)},c._init_with_threads_count=function(){return(c._init_with_threads_count=c.asm.init_with_threads_count).apply(null,arguments)},c._get_threads_count=function(){return(c._get_threads_count=c.asm.get_threads_count).apply(null,arguments)},c._register_tensor=function(){return(c._register_tensor=c.asm.register_tensor).apply(null,arguments)},c._dispose_data=function(){return(c._dispose_data=c.asm.dispose_data).apply(null,arguments)},c._dispose=function(){return(c._dispose=c.asm.dispose).apply(null,arguments)},c._Abs=function(){return(c._Abs=c.asm.Abs).apply(null,arguments)},c._Add=function(){return(c._Add=c.asm.Add).apply(null,arguments)},c._AddN=function(){return(c._AddN=c.asm.AddN).apply(null,arguments)},c._All=function(){return(c._All=c.asm.All).apply(null,arguments)},c._Any=function(){return(c._Any=c.asm.Any).apply(null,arguments)},c._ArgMax=function(){return(c._ArgMax=c.asm.ArgMax).apply(null,arguments)},c._AvgPool=function(){return(c._AvgPool=c.asm.AvgPool).apply(null,arguments)},c._BatchMatMul=function(){return(c._BatchMatMul=c.asm.BatchMatMul).apply(null,arguments)},c._Ceil=function(){return(c._Ceil=c.asm.Ceil).apply(null,arguments)},c._ClipByValue=function(){return(c._ClipByValue=c.asm.ClipByValue).apply(null,arguments)},c._Conv2D=function(){return(c._Conv2D=c.asm.Conv2D).apply(null,arguments)},c._Conv2DBackpropInput=function(){return(c._Conv2DBackpropInput=c.asm.Conv2DBackpropInput).apply(null,arguments)},c._Cos=function(){return(c._Cos=c.asm.Cos).apply(null,arguments)},c._Cosh=function(){return(c._Cosh=c.asm.Cosh).apply(null,arguments)},c._CropAndResize=function(){return(c._CropAndResize=c.asm.CropAndResize).apply(null,arguments)},c._Cumprod=function(){return(c._Cumprod=c.asm.Cumprod).apply(null,arguments)},c._Cumsum=function(){return(c._Cumsum=c.asm.Cumsum).apply(null,arguments)},c._DepthToSpace=function(){return(c._DepthToSpace=c.asm.DepthToSpace).apply(null,arguments)},c._DepthwiseConv2dNative=function(){return(c._DepthwiseConv2dNative=c.asm.DepthwiseConv2dNative).apply(null,arguments)},c._Elu=function(){return(c._Elu=c.asm.Elu).apply(null,arguments)},c._Equal=function(){return(c._Equal=c.asm.Equal).apply(null,arguments)},c._Exp=function(){return(c._Exp=c.asm.Exp).apply(null,arguments)},c._FlipLeftRight=function(){return(c._FlipLeftRight=c.asm.FlipLeftRight).apply(null,arguments)},c._Floor=function(){return(c._Floor=c.asm.Floor).apply(null,arguments)},c._FloorDiv=function(){return(c._FloorDiv=c.asm.FloorDiv).apply(null,arguments)},c._FusedBatchNorm=function(){return(c._FusedBatchNorm=c.asm.FusedBatchNorm).apply(null,arguments)},c._FusedConv2D=function(){return(c._FusedConv2D=c.asm.FusedConv2D).apply(null,arguments)},c._FusedDepthwiseConv2D=function(){return(c._FusedDepthwiseConv2D=c.asm.FusedDepthwiseConv2D).apply(null,arguments)},c._Gather=function(){return(c._Gather=c.asm.Gather).apply(null,arguments)},c._GatherNd=function(){return(c._GatherNd=c.asm.GatherNd).apply(null,arguments)},c._Greater=function(){return(c._Greater=c.asm.Greater).apply(null,arguments)},c._GreaterEqual=function(){return(c._GreaterEqual=c.asm.GreaterEqual).apply(null,arguments)},c._LeakyRelu=function(){return(c._LeakyRelu=c.asm.LeakyRelu).apply(null,arguments)},c._Less=function(){return(c._Less=c.asm.Less).apply(null,arguments)},c._LessEqual=function(){return(c._LessEqual=c.asm.LessEqual).apply(null,arguments)},c._Log=function(){return(c._Log=c.asm.Log).apply(null,arguments)},c._LogicalAnd=function(){return(c._LogicalAnd=c.asm.LogicalAnd).apply(null,arguments)},c._LogicalNot=function(){return(c._LogicalNot=c.asm.LogicalNot).apply(null,arguments)},c._LogicalOr=function(){return(c._LogicalOr=c.asm.LogicalOr).apply(null,arguments)},c._LogicalXor=function(){return(c._LogicalXor=c.asm.LogicalXor).apply(null,arguments)},c._Max=function(){return(c._Max=c.asm.Max).apply(null,arguments)},c._MaxPool=function(){return(c._MaxPool=c.asm.MaxPool).apply(null,arguments)},c._Maximum=function(){return(c._Maximum=c.asm.Maximum).apply(null,arguments)},c._Mean=function(){return(c._Mean=c.asm.Mean).apply(null,arguments)},c._Min=function(){return(c._Min=c.asm.Min).apply(null,arguments)},c._Minimum=function(){return(c._Minimum=c.asm.Minimum).apply(null,arguments)},c._MirrorPad=function(){return(c._MirrorPad=c.asm.MirrorPad).apply(null,arguments)},c._Multiply=function(){return(c._Multiply=c.asm.Multiply).apply(null,arguments)},c._Neg=function(){return(c._Neg=c.asm.Neg).apply(null,arguments)},c._NonMaxSuppressionV3=function(){return(c._NonMaxSuppressionV3=c.asm.NonMaxSuppressionV3).apply(null,arguments)},c._NonMaxSuppressionV4=function(){return(c._NonMaxSuppressionV4=c.asm.NonMaxSuppressionV4).apply(null,arguments)},c._NonMaxSuppressionV5=function(){return(c._NonMaxSuppressionV5=c.asm.NonMaxSuppressionV5).apply(null,arguments)},c._NotEqual=function(){return(c._NotEqual=c.asm.NotEqual).apply(null,arguments)},c._OneHot=function(){return(c._OneHot=c.asm.OneHot).apply(null,arguments)},c._PadV2=function(){return(c._PadV2=c.asm.PadV2).apply(null,arguments)},c._Pow=function(){return(c._Pow=c.asm.Pow).apply(null,arguments)},c._Prelu=function(){return(c._Prelu=c.asm.Prelu).apply(null,arguments)},c._Prod=function(){return(c._Prod=c.asm.Prod).apply(null,arguments)},c._RealDiv=function(){return(c._RealDiv=c.asm.RealDiv).apply(null,arguments)},c._Relu=function(){return(c._Relu=c.asm.Relu).apply(null,arguments)},c._Relu6=function(){return(c._Relu6=c.asm.Relu6).apply(null,arguments)},c._ResizeBilinear=function(){return(c._ResizeBilinear=c.asm.ResizeBilinear).apply(null,arguments)},c._Reverse=function(){return(c._Reverse=c.asm.Reverse).apply(null,arguments)},c._RotateWithOffset=function(){return(c._RotateWithOffset=c.asm.RotateWithOffset).apply(null,arguments)},c._Round=function(){return(c._Round=c.asm.Round).apply(null,arguments)},c._Rsqrt=function(){return(c._Rsqrt=c.asm.Rsqrt).apply(null,arguments)},c._ScatterNd=function(){return(c._ScatterNd=c.asm.ScatterNd).apply(null,arguments)},c._SelectV2=function(){return(c._SelectV2=c.asm.SelectV2).apply(null,arguments)},c._Sigmoid=function(){return(c._Sigmoid=c.asm.Sigmoid).apply(null,arguments)},c._Sin=function(){return(c._Sin=c.asm.Sin).apply(null,arguments)},c._Softmax=function(){return(c._Softmax=c.asm.Softmax).apply(null,arguments)},c._SparseFillEmptyRows=function(){return(c._SparseFillEmptyRows=c.asm.SparseFillEmptyRows).apply(null,arguments)},c._SparseReshape=function(){return(c._SparseReshape=c.asm.SparseReshape).apply(null,arguments)},c._SparseSegmentReduction=function(){return(c._SparseSegmentReduction=c.asm.SparseSegmentReduction).apply(null,arguments)},c._Sqrt=function(){return(c._Sqrt=c.asm.Sqrt).apply(null,arguments)},c._Square=function(){return(c._Square=c.asm.Square).apply(null,arguments)},c._SquaredDifference=function(){return(c._SquaredDifference=c.asm.SquaredDifference).apply(null,arguments)},c._Step=function(){return(c._Step=c.asm.Step).apply(null,arguments)},c._StridedSlice=function(){return(c._StridedSlice=c.asm.StridedSlice).apply(null,arguments)},c._Sub=function(){return(c._Sub=c.asm.Sub).apply(null,arguments)},c._Sum=function(){return(c._Sum=c.asm.Sum).apply(null,arguments)},c._Tan=function(){return(c._Tan=c.asm.Tan).apply(null,arguments)},c._Tanh=function(){return(c._Tanh=c.asm.Tanh).apply(null,arguments)},c._Tile=function(){return(c._Tile=c.asm.Tile).apply(null,arguments)},c._TopK=function(){return(c._TopK=c.asm.TopK).apply(null,arguments)},c._Transform=function(){return(c._Transform=c.asm.Transform).apply(null,arguments)},c._Transpose=function(){return(c._Transpose=c.asm.Transpose).apply(null,arguments)},c.__FusedMatMul=function(){return(c.__FusedMatMul=c.asm._FusedMatMul).apply(null,arguments)},c._malloc=function(){return(Je=c._malloc=c.asm.malloc).apply(null,arguments)}),Qe=c._free=function(){return(Qe=c._free=c.asm.free).apply(null,arguments)},$e=(c._emscripten_tls_init=function(){return(c._emscripten_tls_init=c.asm.emscripten_tls_init).apply(null,arguments)},c.___errno_location=function(){return($e=c.___errno_location=c.asm.__errno_location).apply(null,arguments)}),et=c._pthread_self=function(){return(et=c._pthread_self=c.asm.pthread_self).apply(null,arguments)},tt=c._emscripten_main_thread_process_queued_calls=function(){return(tt=c._emscripten_main_thread_process_queued_calls=c.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},nt=(c.__emscripten_thread_crashed=function(){return(c.__emscripten_thread_crashed=c.asm._emscripten_thread_crashed).apply(null,arguments)},c.__emscripten_thread_init=function(){return(nt=c.__emscripten_thread_init=c.asm._emscripten_thread_init).apply(null,arguments)}),rt=(c._emscripten_current_thread_process_queued_calls=function(){return(c._emscripten_current_thread_process_queued_calls=c.asm.emscripten_current_thread_process_queued_calls).apply(null,arguments)},c._emscripten_main_browser_thread_id=function(){return(c._emscripten_main_browser_thread_id=c.asm.emscripten_main_browser_thread_id).apply(null,arguments)},c._emscripten_sync_run_in_main_thread_2=function(){return(c._emscripten_sync_run_in_main_thread_2=c.asm.emscripten_sync_run_in_main_thread_2).apply(null,arguments)},c._emscripten_sync_run_in_main_thread_4=function(){return(rt=c._emscripten_sync_run_in_main_thread_4=c.asm.emscripten_sync_run_in_main_thread_4).apply(null,arguments)}),at=c._emscripten_run_in_main_runtime_thread_js=function(){return(at=c._emscripten_run_in_main_runtime_thread_js=c.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)},it=c._emscripten_dispatch_to_thread_=function(){return(it=c._emscripten_dispatch_to_thread_=c.asm.emscripten_dispatch_to_thread_).apply(null,arguments)},ot=c.__emscripten_thread_free_data=function(){return(ot=c.__emscripten_thread_free_data=c.asm._emscripten_thread_free_data).apply(null,arguments)},st=(c.__emscripten_thread_exit=function(){return(c.__emscripten_thread_exit=c.asm._emscripten_thread_exit).apply(null,arguments)},c._memalign=function(){return(c._memalign=c.asm.memalign).apply(null,arguments)},c._emscripten_stack_set_limits=function(){return(st=c._emscripten_stack_set_limits=c.asm.emscripten_stack_set_limits).apply(null,arguments)}),ut=c.stackSave=function(){return(ut=c.stackSave=c.asm.stackSave).apply(null,arguments)},lt=c.stackRestore=function(){return(lt=c.stackRestore=c.asm.stackRestore).apply(null,arguments)},ct=c.stackAlloc=function(){return(ct=c.stackAlloc=c.asm.stackAlloc).apply(null,arguments)},dt=(c.dynCall_iijjiiii=function(){return(c.dynCall_iijjiiii=c.asm.dynCall_iijjiiii).apply(null,arguments)},c.dynCall_jiji=function(){return(c.dynCall_jiji=c.asm.dynCall_jiji).apply(null,arguments)},c.__emscripten_allow_main_runtime_queued_calls=21664);function ht(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function pt(e){if(e=e||y,!(ue>0)){if(k)return s(c),ie(),void postMessage({cmd:"loaded"});(function(){if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)oe(c.preRun.shift());ve(ee)})(),ue>0||(c.setStatus?(c.setStatus("Running..."),setTimeout((function(){setTimeout((function(){c.setStatus("")}),1),t()}),1)):t())}function t(){Xe||(Xe=!0,c.calledRun=!0,!L&&(ie(),s(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),function(){if(!k){if(c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;)se(c.postRun.shift());ve(re)}}()))}}if(c.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?z(e):function(){return B(e,t,n,arguments)}},c.keepRuntimeAlive=ae,c.PThread=Ae,c.PThread=Ae,c.wasmMemory=P,c.ExitStatus=ht,ce=function e(){Xe||pt(),Xe||(ce=e)},c.run=pt,c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();if(pt(),l&&(qe={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!l.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!l.unhandledRejection.indexOf(e)>-1}))}),"undefined"!=typeof WasmBackendModule)Ye=WasmBackendModule;else{if("undefined"==typeof t)throw new Error("Could not find wasm module in post.js");Ye=t}if(qe){var ft=Ye._dispose;Ye._dispose=function(){ft(),qe.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),qe.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return t.ready}}();"object"==typeof e&&"object"==typeof t?t.exports=r:"function"==typeof define&&n.amdO?define([],(function(){return r})):"object"==typeof e&&(e.WasmBackendModuleThreadedSimd=r)}}),Ya=Ia({"src/tfjs-backend-wasm/wasm-out/tfjs-backend-wasm.js":function(e,t){var r=function(){var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||aa,function(t){var n,r,a,i="undefined"!=typeof(t=t||{})?t:{};i.ready=new Promise((function(e,t){n=e,r=t})),"undefined"!=typeof process&&process.listeners&&(a={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var o,s,u,l,c,d,h=Object.assign({},i),p=[],f="object"==typeof window,m="function"==typeof importScripts,g="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,v="";g?(v=m?Ha().dirname(v)+"/":"//",d=function(){c||(l=Va(),c=Ha())},o=function(e,t){return d(),e=c.normalize(e),l.readFileSync(e,t?void 0:"utf8")},u=function(e){var t=o(e,!0);return t.buffer||(t=new Uint8Array(t)),t},s=function(e,t,n){d(),e=c.normalize(e),l.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),p=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ue))throw e})),process.on("unhandledRejection",(function(e){throw e})),function(e,t){if(B())throw process.exitCode=e,t;(function(e){e instanceof ue||b("exiting due to exception: "+e)})(t),process.exit(e)},i.inspect=function(){return"[Emscripten Module object]"}):(f||m)&&(m?v=self.location.href:"undefined"!=typeof document&&document.currentScript&&(v=document.currentScript.src),e&&(v=e),v=0!==v.indexOf("blob:")?v.substr(0,v.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},m&&(u=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),s=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var y=i.print||console.log.bind(console),b=i.printErr||console.warn.bind(console);Object.assign(i,h),h=null,i.arguments&&(p=i.arguments),i.thisProgram&&i.thisProgram,i.quit&&i.quit;var x;i.wasmBinary&&(x=i.wasmBinary);var A=i.noExitRuntime||!0;"object"!=typeof WebAssembly&&G("no native wasm support detected");var w,k=!1;function S(e){return i["_"+e]}function C(e,t,n,r,a){var i={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);(function(e,t,n){(function(e,t,n,r){if(!(r>0))return 0;for(var a=n,i=n+r-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o);if(s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}t[n]=0})(e,M,t,n)})(e,t=se(n),n)}return t},array:function(e){var t=se(e.length);return function(e,t){_.set(e,t)}(e,t),t}};var o=S(e),s=[],u=0;if(r)for(var l=0;l<r.length;l++){var c=i[n[l]];c?(0===u&&(u=ie()),s[l]=c(r[l])):s[l]=r[l]}var d=o.apply(null,s);return d=function(e){return 0!==u&&oe(u),function(e){return"string"===t?T(e):"boolean"===t?Boolean(e):e}(e)}(d),d}var I="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function E(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&I)return I.decode(e.subarray(t,a));for(var i="";t<a;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var u=63&e[t++];if((o=224==(240&o)?(15&o)<<12|s<<6|u:(7&o)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(o);else{var l=o-65536;i+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else i+=String.fromCharCode((31&o)<<6|s)}else i+=String.fromCharCode(o)}return i}function T(e,t){return e?E(M,e,t):""}var N,_,M,R;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");function O(e,t){return e%t>0&&(e+=t-e%t),e}function P(e){N=e,i.HEAP8=_=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAP32=R=new Int32Array(e),i.HEAPU8=M=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=new Float64Array(e)}i.INITIAL_MEMORY;var F,D=[],L=[],z=[];function B(){return A||!1}function W(e){D.unshift(e)}function j(e){z.unshift(e)}var V=0,H=null,U=null;function G(e){i.onAbort&&i.onAbort(e),b(e="Aborted("+e+")"),k=!0,1,e+=". Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw r(t),t}i.preloadedImages={},i.preloadedAudios={};var X;function q(e){return e.startsWith("data:application/octet-stream;base64,")}function Y(e){return e.startsWith("file://")}function K(e){try{if(e==X&&x)return new Uint8Array(x);if(u)return u(e);throw"both async and sync fetching of the wasm failed"}catch(t){G(t)}}function Z(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?Q(n)():Q(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(i)}}q(X="tfjs-backend-wasm.wasm")||(X=function(e){return i.locateFile?i.locateFile(e,v):v+e}(X));var J=[];function Q(e){var t=J[e];return t||(e>=J.length&&(J.length=e+1),J[e]=t=F.get(e)),t}function $(e){try{return w.grow(e-N.byteLength+65535>>>16),P(w.buffer),1}catch(t){}}var ee={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=ee.buffers[e];0===t||10===t?((1===e?y:b)(E(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return ee.varargs+=4,R[ee.varargs-4>>2]},getStr:function(e){return T(e)},get64:function(e,t){return e}};var te,ne,re,ae={abort:function(){G("")},emscripten_memcpy_big:function(e,t,n){M.copyWithin(e,t,t+n)},emscripten_resize_heap:function(e){var t=M.length,n=2147483648;if((e>>>=0)>n)return!1;for(var r=1;r<=4;r*=2){var a=t*(1+.2/r);if(a=Math.min(a,e+100663296),$(Math.min(n,O(Math.max(e,a),65536))))return!0}return!1},fd_close:function(e){return 0},fd_seek:function(e,t,n,r,a){},fd_write:function(e,t,n,r){for(var a=0,i=0;i<n;i++){var o=R[t>>2],s=R[t+4>>2];t+=8;for(var u=0;u<s;u++)ee.printChar(e,M[o+u]);a+=s}return R[r>>2]=a,0},setTempRet0:function(e){!function(e){e}(e)}},ie=(function(){var e={env:ae,wasi_snapshot_preview1:ae};function t(e,t){var n=e.exports;i.asm=n,P((w=i.asm.memory).buffer),F=i.asm.__indirect_function_table,function(e){L.unshift(e)}(i.asm.__wasm_call_ctors),function(e){if(V--,i.monitorRunDependencies&&i.monitorRunDependencies(V),0==V&&(null!==H&&(clearInterval(H),H=null),U)){var t=U;U=null,t()}}()}function n(e){t(e.instance)}function a(t){return function(){if(!x&&(f||m)){if("function"==typeof fetch&&!Y(X))return fetch(X,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+X+"'";return e.arrayBuffer()})).catch((function(){return K(X)}));if(s)return new Promise((function(e,t){s(X,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return K(X)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){b("failed to asynchronously prepare wasm: "+e),G(e)}))}if(V++,i.monitorRunDependencies&&i.monitorRunDependencies(V),i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(o){return b("Module.instantiateWasm callback failed with error: "+o),!1}(x||"function"!=typeof WebAssembly.instantiateStreaming||q(X)||Y(X)||"function"!=typeof fetch?a(n):fetch(X,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return b("wasm streaming compile failed: "+e),b("falling back to ArrayBuffer instantiation"),a(n)}))}))).catch(r)}(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.__wasm_call_ctors).apply(null,arguments)},i._init=function(){return(i._init=i.asm.init).apply(null,arguments)},i._init_with_threads_count=function(){return(i._init_with_threads_count=i.asm.init_with_threads_count).apply(null,arguments)},i._get_threads_count=function(){return(i._get_threads_count=i.asm.get_threads_count).apply(null,arguments)},i._register_tensor=function(){return(i._register_tensor=i.asm.register_tensor).apply(null,arguments)},i._dispose_data=function(){return(i._dispose_data=i.asm.dispose_data).apply(null,arguments)},i._dispose=function(){return(i._dispose=i.asm.dispose).apply(null,arguments)},i._Abs=function(){return(i._Abs=i.asm.Abs).apply(null,arguments)},i._Add=function(){return(i._Add=i.asm.Add).apply(null,arguments)},i._AddN=function(){return(i._AddN=i.asm.AddN).apply(null,arguments)},i._All=function(){return(i._All=i.asm.All).apply(null,arguments)},i._Any=function(){return(i._Any=i.asm.Any).apply(null,arguments)},i._ArgMax=function(){return(i._ArgMax=i.asm.ArgMax).apply(null,arguments)},i._AvgPool=function(){return(i._AvgPool=i.asm.AvgPool).apply(null,arguments)},i._BatchMatMul=function(){return(i._BatchMatMul=i.asm.BatchMatMul).apply(null,arguments)},i._Ceil=function(){return(i._Ceil=i.asm.Ceil).apply(null,arguments)},i._ClipByValue=function(){return(i._ClipByValue=i.asm.ClipByValue).apply(null,arguments)},i._Conv2D=function(){return(i._Conv2D=i.asm.Conv2D).apply(null,arguments)},i._Conv2DBackpropInput=function(){return(i._Conv2DBackpropInput=i.asm.Conv2DBackpropInput).apply(null,arguments)},i._Cos=function(){return(i._Cos=i.asm.Cos).apply(null,arguments)},i._Cosh=function(){return(i._Cosh=i.asm.Cosh).apply(null,arguments)},i._CropAndResize=function(){return(i._CropAndResize=i.asm.CropAndResize).apply(null,arguments)},i._Cumprod=function(){return(i._Cumprod=i.asm.Cumprod).apply(null,arguments)},i._Cumsum=function(){return(i._Cumsum=i.asm.Cumsum).apply(null,arguments)},i._DepthToSpace=function(){return(i._DepthToSpace=i.asm.DepthToSpace).apply(null,arguments)},i._DepthwiseConv2dNative=function(){return(i._DepthwiseConv2dNative=i.asm.DepthwiseConv2dNative).apply(null,arguments)},i._Elu=function(){return(i._Elu=i.asm.Elu).apply(null,arguments)},i._Equal=function(){return(i._Equal=i.asm.Equal).apply(null,arguments)},i._Exp=function(){return(i._Exp=i.asm.Exp).apply(null,arguments)},i._FlipLeftRight=function(){return(i._FlipLeftRight=i.asm.FlipLeftRight).apply(null,arguments)},i._Floor=function(){return(i._Floor=i.asm.Floor).apply(null,arguments)},i._FloorDiv=function(){return(i._FloorDiv=i.asm.FloorDiv).apply(null,arguments)},i._FusedBatchNorm=function(){return(i._FusedBatchNorm=i.asm.FusedBatchNorm).apply(null,arguments)},i._FusedConv2D=function(){return(i._FusedConv2D=i.asm.FusedConv2D).apply(null,arguments)},i._FusedDepthwiseConv2D=function(){return(i._FusedDepthwiseConv2D=i.asm.FusedDepthwiseConv2D).apply(null,arguments)},i._Gather=function(){return(i._Gather=i.asm.Gather).apply(null,arguments)},i._GatherNd=function(){return(i._GatherNd=i.asm.GatherNd).apply(null,arguments)},i._Greater=function(){return(i._Greater=i.asm.Greater).apply(null,arguments)},i._GreaterEqual=function(){return(i._GreaterEqual=i.asm.GreaterEqual).apply(null,arguments)},i._LeakyRelu=function(){return(i._LeakyRelu=i.asm.LeakyRelu).apply(null,arguments)},i._Less=function(){return(i._Less=i.asm.Less).apply(null,arguments)},i._LessEqual=function(){return(i._LessEqual=i.asm.LessEqual).apply(null,arguments)},i._Log=function(){return(i._Log=i.asm.Log).apply(null,arguments)},i._LogicalAnd=function(){return(i._LogicalAnd=i.asm.LogicalAnd).apply(null,arguments)},i._LogicalNot=function(){return(i._LogicalNot=i.asm.LogicalNot).apply(null,arguments)},i._LogicalOr=function(){return(i._LogicalOr=i.asm.LogicalOr).apply(null,arguments)},i._LogicalXor=function(){return(i._LogicalXor=i.asm.LogicalXor).apply(null,arguments)},i._Max=function(){return(i._Max=i.asm.Max).apply(null,arguments)},i._MaxPool=function(){return(i._MaxPool=i.asm.MaxPool).apply(null,arguments)},i._Maximum=function(){return(i._Maximum=i.asm.Maximum).apply(null,arguments)},i._Mean=function(){return(i._Mean=i.asm.Mean).apply(null,arguments)},i._Min=function(){return(i._Min=i.asm.Min).apply(null,arguments)},i._Minimum=function(){return(i._Minimum=i.asm.Minimum).apply(null,arguments)},i._MirrorPad=function(){return(i._MirrorPad=i.asm.MirrorPad).apply(null,arguments)},i._Multiply=function(){return(i._Multiply=i.asm.Multiply).apply(null,arguments)},i._Neg=function(){return(i._Neg=i.asm.Neg).apply(null,arguments)},i._NonMaxSuppressionV3=function(){return(i._NonMaxSuppressionV3=i.asm.NonMaxSuppressionV3).apply(null,arguments)},i._NonMaxSuppressionV4=function(){return(i._NonMaxSuppressionV4=i.asm.NonMaxSuppressionV4).apply(null,arguments)},i._NonMaxSuppressionV5=function(){return(i._NonMaxSuppressionV5=i.asm.NonMaxSuppressionV5).apply(null,arguments)},i._NotEqual=function(){return(i._NotEqual=i.asm.NotEqual).apply(null,arguments)},i._OneHot=function(){return(i._OneHot=i.asm.OneHot).apply(null,arguments)},i._PadV2=function(){return(i._PadV2=i.asm.PadV2).apply(null,arguments)},i._Pow=function(){return(i._Pow=i.asm.Pow).apply(null,arguments)},i._Prelu=function(){return(i._Prelu=i.asm.Prelu).apply(null,arguments)},i._Prod=function(){return(i._Prod=i.asm.Prod).apply(null,arguments)},i._RealDiv=function(){return(i._RealDiv=i.asm.RealDiv).apply(null,arguments)},i._Relu=function(){return(i._Relu=i.asm.Relu).apply(null,arguments)},i._Relu6=function(){return(i._Relu6=i.asm.Relu6).apply(null,arguments)},i._ResizeBilinear=function(){return(i._ResizeBilinear=i.asm.ResizeBilinear).apply(null,arguments)},i._Reverse=function(){return(i._Reverse=i.asm.Reverse).apply(null,arguments)},i._RotateWithOffset=function(){return(i._RotateWithOffset=i.asm.RotateWithOffset).apply(null,arguments)},i._Round=function(){return(i._Round=i.asm.Round).apply(null,arguments)},i._Rsqrt=function(){return(i._Rsqrt=i.asm.Rsqrt).apply(null,arguments)},i._ScatterNd=function(){return(i._ScatterNd=i.asm.ScatterNd).apply(null,arguments)},i._SelectV2=function(){return(i._SelectV2=i.asm.SelectV2).apply(null,arguments)},i._Sigmoid=function(){return(i._Sigmoid=i.asm.Sigmoid).apply(null,arguments)},i._Sin=function(){return(i._Sin=i.asm.Sin).apply(null,arguments)},i._Softmax=function(){return(i._Softmax=i.asm.Softmax).apply(null,arguments)},i._SparseFillEmptyRows=function(){return(i._SparseFillEmptyRows=i.asm.SparseFillEmptyRows).apply(null,arguments)},i._SparseReshape=function(){return(i._SparseReshape=i.asm.SparseReshape).apply(null,arguments)},i._SparseSegmentReduction=function(){return(i._SparseSegmentReduction=i.asm.SparseSegmentReduction).apply(null,arguments)},i._Sqrt=function(){return(i._Sqrt=i.asm.Sqrt).apply(null,arguments)},i._Square=function(){return(i._Square=i.asm.Square).apply(null,arguments)},i._SquaredDifference=function(){return(i._SquaredDifference=i.asm.SquaredDifference).apply(null,arguments)},i._Step=function(){return(i._Step=i.asm.Step).apply(null,arguments)},i._StridedSlice=function(){return(i._StridedSlice=i.asm.StridedSlice).apply(null,arguments)},i._Sub=function(){return(i._Sub=i.asm.Sub).apply(null,arguments)},i._Sum=function(){return(i._Sum=i.asm.Sum).apply(null,arguments)},i._Tan=function(){return(i._Tan=i.asm.Tan).apply(null,arguments)},i._Tanh=function(){return(i._Tanh=i.asm.Tanh).apply(null,arguments)},i._Tile=function(){return(i._Tile=i.asm.Tile).apply(null,arguments)},i._TopK=function(){return(i._TopK=i.asm.TopK).apply(null,arguments)},i._Transform=function(){return(i._Transform=i.asm.Transform).apply(null,arguments)},i._Transpose=function(){return(i._Transpose=i.asm.Transpose).apply(null,arguments)},i.__FusedMatMul=function(){return(i.__FusedMatMul=i.asm._FusedMatMul).apply(null,arguments)},i._malloc=function(){return(i._malloc=i.asm.malloc).apply(null,arguments)},i._free=function(){return(i._free=i.asm.free).apply(null,arguments)},i.___errno_location=function(){return(i.___errno_location=i.asm.__errno_location).apply(null,arguments)},i._emscripten_main_thread_process_queued_calls=function(){return(i._emscripten_main_thread_process_queued_calls=i.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},i.stackSave=function(){return(ie=i.stackSave=i.asm.stackSave).apply(null,arguments)}),oe=i.stackRestore=function(){return(oe=i.stackRestore=i.asm.stackRestore).apply(null,arguments)},se=i.stackAlloc=function(){return(se=i.stackAlloc=i.asm.stackAlloc).apply(null,arguments)};i.dynCall_iijjiiii=function(){return(i.dynCall_iijjiiii=i.asm.dynCall_iijjiiii).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.dynCall_jiji).apply(null,arguments)};function ue(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function le(e){function t(){te||(te=!0,i.calledRun=!0,!k&&(!0,Z(L),n(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),function(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)j(i.postRun.shift());Z(z)}()))}e=e||p,V>0||(function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)W(i.preRun.shift());Z(D)}(),V>0)||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),t()}),1)):t())}if(i.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?S(e):function(){return C(e,t,n,arguments)}},U=function e(){te||le(),te||(U=e)},i.run=le,i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();if(le(),a&&(ne={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!a.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!a.unhandledRejection.indexOf(e)>-1}))}),"undefined"!=typeof t)re=t;else{if("undefined"==typeof WasmBackendModuleThreadedSimd)throw new Error("Could not find wasm module in post.js");re=WasmBackendModuleThreadedSimd}if(ne){var ce=re._dispose;re._dispose=function(){ce(),ne.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),ne.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return t.ready}}();"object"==typeof e&&"object"==typeof t?t.exports=r:"function"==typeof define&&n.amdO?define([],(function(){return r})):"object"==typeof e&&(e.WasmBackendModule=r)}}),Ka=function(){function e(t,n){Jr(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return $r(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),Za=function(){function e(){Jr(this,e)}return $r(e,[{key:"refCount",value:function(e){return Ja("refCount")}},{key:"incRef",value:function(e){return Ja("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return Ja("time")}},{key:"read",value:function(e){return Ja("read")}},{key:"readSync",value:function(e){return Ja("readSync")}},{key:"readToGPU",value:function(e,t){return Ja("readToGPU")}},{key:"numDataIds",value:function(){return Ja("numDataIds")}},{key:"disposeData",value:function(e,t){return Ja("disposeData")}},{key:"write",value:function(e,t,n){return Ja("write")}},{key:"move",value:function(e,t,n,r,a){return Ja("move")}},{key:"memory",value:function(){return Ja("memory")}},{key:"floatPrecision",value:function(){return Ja("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return Ja("dispose")}}]),e}();function Ja(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen"))}function Qa(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,ni(e,--t,n)}function $a(e,t){if(e.length!==t.length)throw new Error("Array sizes must match to be shuffled together First array length was ".concat(e.length,"Second array length was ").concat(t.length));for(var n=e.length,r=0;n>0;)r=Math.random()*n|0,ni(e,--n,r),ni(t,n,r)}function ei(e,t,n){return Math.max(e,Math.min(t,n))}function ti(e){return e%2===0?e:e+1}function ni(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function ri(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function ai(e,t){var n=Math.random();return t*n+(1-n)*e}function ii(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n}function oi(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function si(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";oi(hi(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function ui(e){oi(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function li(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||Ei(e)&&!n)for(var r=0;r<e.length;++r)li(e[r],t,n);else t.push(e);return t}function ci(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function di(e){return 0===e.length}function hi(e,t){if(e===t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function pi(e){return e%1===0}function fi(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function mi(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function gi(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return Qa(t),t}function vi(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function yi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var i=0;!function o(){if(e())r();else{i++;var s=t(i);null!=n&&i>=n?a():setTimeout(o,s)}}()}))}function bi(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when there are 0 elements"));if(t%n!==0)throw Error("The implicit shape can't be a fractional number. Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function xi(e,t){var n=t.length;return e=null==e?t.map((function(e,t){return t})):[].concat(e),oi(e.every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but got axis ").concat(e)})),oi(e.every((function(e){return pi(e)})),(function(){return"All values in axis param must be integers but got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function Ai(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:xi(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function wi(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function ki(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function Si(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function Ci(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function Ii(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function Ei(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function Ti(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function Ni(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function _i(e){return"string"==typeof e||e instanceof String}function Mi(e){return"boolean"==typeof e}function Ri(e){return"number"==typeof e}function Oi(e){return Array.isArray(e)?Oi(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":Ri(e)?"float32":_i(e)?"string":Mi(e)?"bool":"float32"}function Pi(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Fi(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function Di(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Li(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var s=t[0],u=t.slice(1),l=u.reduce((function(e,t){return e*t}))*(r?2:1),c=0;c<s;c++)a[c]=Li(e+c*l,u,n,r);return a}function zi(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return Li(0,e,t,n)}function Bi(e,t){for(var n=Wi(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Wi(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function ji(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return zi(e,new Float32Array(n));if("int32"===t)return zi(e,new Int32Array(n));if("bool"===t)return zi(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function Vi(e){e.forEach((function(t){oi(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape [".concat(e,"].")}))}))}function Hi(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function Ui(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function Gi(e){return e&&e.then&&"function"==typeof e.then}var Xi="tfjsflags",qi=function(){function e(t){Jr(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Yi,this.populateURLFlags()}return $r(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(Zi().getBool("IS_TEST")||Zi().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. Overwriting the platform with ").concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];Zi().getBool("IS_TEST")||Zi().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=4;break}e.t0=this.flags[t],e.next=8;break;case 4:return e.next=6,this.evaluateFlag(t);case 6:this.flags[t]=e.sent,e.t0=this.flags[t];case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(Gi(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. Please use getAsync() instead."));return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!=typeof this.global&&"undefined"!=typeof this.global.location&&"undefined"!=typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);Xi in t&&t[Xi].split(",").forEach((function(t){var n=u(t.split(":"),2),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(r,a)}))}}}]),e}();function Yi(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return Ki(t,r[0],r[1]),r.join("=")})),t}function Ki(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function Zi(){return Qi}var Ji,Qi=null;function $i(){if(null==Ji){var e;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}Ji=e}return Ji}function eo(e,t){var n=function(){var e=$i();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var to="Abs",no="Acos",ro="Acosh",ao="Add",io="AddN",oo="All",so="Any",uo="ArgMax",lo="ArgMin",co="Asin",ho="Asinh",po="Atan",fo="Atanh",mo="Atan2",go="AvgPool",vo="AvgPoolGrad",yo="AvgPool3D",bo="AvgPool3DGrad",xo="BatchMatMul",Ao="BatchToSpaceND",wo="Bincount",ko="BroadcastTo",So="BroadcastArgs",Co="Cast",Io="Ceil",Eo="ClipByValue",To="Complex",No="ComplexAbs",_o="Concat",Mo="Conv2D",Ro="Conv2DBackpropFilter",Oo="Conv2DBackpropInput",Po="Conv3D",Fo="Conv3DBackpropFilterV2",Do="Conv3DBackpropInputV2",Lo="Cos",zo="Cosh",Bo="Cumprod",Wo="Cumsum",jo="CropAndResize",Vo="DenseBincount",Ho="DepthToSpace",Uo="DepthwiseConv2dNative",Go="DepthwiseConv2dNativeBackpropFilter",Xo="DepthwiseConv2dNativeBackpropInput",qo="Diag",Yo="Dilation2D",Ko="Dilation2DBackpropInput",Zo="Dilation2DBackpropFilter",Jo="RealDiv",Qo="Einsum",$o="Elu",es="EluGrad",ts="Erf",ns="Equal",rs="Exp",as="ExpandDims",is="Expm1",os="FFT",ss="Fill",us="FlipLeftRight",ls="Floor",cs="FloorDiv",ds="FusedBatchNorm",hs="GatherV2",ps="GatherNd",fs="Greater",ms="GreaterEqual",gs="Identity",vs="IFFT",ys="Imag",bs="IsFinite",xs="IsInf",As="IsNan",ws="LeakyRelu",ks="Less",Ss="LessEqual",Cs="LinSpace",Is="Log",Es="Log1p",Ts="LogicalAnd",Ns="LogicalNot",_s="LogicalOr",Ms="LogicalXor",Rs="LogSoftmax",Os="LowerBound",Ps="LRN",Fs="LRNGrad",Ds="Max",Ls="Maximum",zs="MaxPool",Bs="MaxPoolGrad",Ws="MaxPool3D",js="MaxPool3DGrad",Vs="MaxPoolWithArgmax",Hs="Mean",Us="Min",Gs="Minimum",Xs="MirrorPad",qs="Mod",Ys="Multinomial",Ks="Multiply",Zs="Neg",Js="NotEqual",Qs="NonMaxSuppressionV3",$s="NonMaxSuppressionV4",eu="NonMaxSuppressionV5",tu="OnesLike",nu="OneHot",ru="Pack",au="PadV2",iu="Pool",ou="Pow",su="Prelu",uu="Prod",lu="Range",cu="Real",du="Reciprocal",hu="Relu",pu="Reshape",fu="ResizeNearestNeighbor",mu="ResizeNearestNeighborGrad",gu="ResizeBilinear",vu="ResizeBilinearGrad",yu="Relu6",bu="Reverse",xu="Round",Au="Rsqrt",wu="ScatterNd",ku="SearchSorted",Su="Select",Cu="Selu",Iu="Slice",Eu="Sin",Tu="Sinh",Nu="Sign",_u="Sigmoid",Mu="Softplus",Ru="Sqrt",Ou="Sum",Pu="SpaceToBatchND",Fu="SplitV",Du="Softmax",Lu="SparseFillEmptyRows",zu="SparseReshape",Bu="SparseSegmentMean",Wu="SparseSegmentSum",ju="SparseToDense",Vu="SquaredDifference",Hu="Square",Uu="StridedSlice",Gu="StringNGrams",Xu="StringSplit",qu="StringToHashBucketFast",Yu="Sub",Ku="Tan",Zu="Tanh",Ju="Tile",Qu="TopK",$u="Transform",el="Transpose",tl="Unique",nl="Unpack",rl="UnsortedSegmentSum",al="UpperBound",il="ZerosLike",ol="Step",sl="FromPixels",ul="RotateWithOffset",ll="_FusedMatMul",cl="FusedConv2D",dl="FusedDepthwiseConv2D";function hl(){var e;Zi().getBool("IS_TEST")||Zi().getBool("PROD")||(e=console).warn.apply(e,arguments)}function pl(){var e;Zi().getBool("IS_TEST")||Zi().getBool("PROD")||(e=console).log.apply(e,arguments)}var fl=eo("kernelRegistry",(function(){return new Map})),ml=eo("gradRegistry",(function(){return new Map}));function gl(e,t){var n=Sl(e,t);return fl.get(n)}function vl(e){return ml.get(e)}function yl(e){for(var t=fl.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=u(i,2),s=o[0],l=o[1];u(s.split("_"),1)[0]===e&&n.push(l)}return n}function bl(e){var t=e.kernelName,n=e.backendName,r=Sl(t,n);fl.has(r)&&hl("The kernel '".concat(t,"' for backend '").concat(n,"' is already registered")),fl.set(r,e)}function xl(e){var t=e.kernelName;ml.has(t)&&Zi().getBool("DEBUG")&&hl("Overriding the gradient for '".concat(t,"'")),ml.set(t,e)}function Al(e,t){var n=Sl(e,t);if(!fl.has(n))throw new Error("The kernel '".concat(e,"' for backend '").concat(t,"' is not registered"));fl.delete(n)}function wl(e){if(!ml.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));ml.delete(e)}function kl(e,t){yl(e).forEach((function(e){bl(Object.assign({},e,{backendName:t}))}))}function Sl(e,t){return"".concat(t,"_").concat(e)}var Cl={};Ea(Cl,{arraysEqual:function(){return hi},assert:function(){return oi},assertNonNegativeIntegerDimensions:function(){return Vi},assertNonNull:function(){return ui},assertShapesMatch:function(){return si},bytesFromStringArray:function(){return Ni},bytesPerElement:function(){return Ti},checkConversionForErrors:function(){return Si},clamp:function(){return ei},computeStrides:function(){return Di},createScalarValue:function(){return Hl},createShuffledIndices:function(){return gi},decodeString:function(){return Yl},distSquared:function(){return ii},encodeString:function(){return ql},fetch:function(){return Xl},fingerPrint64:function(){return Vl},flatten:function(){return li},getArrayFromDType:function(){return ki},getTypedArrayFromDType:function(){return wi},hasEncodingLoss:function(){return Ii},hexToLong:function(){return Tl},indexToLoc:function(){return Ui},inferDtype:function(){return Oi},inferFromImplicitShape:function(){return bi},isBoolean:function(){return Mi},isFunction:function(){return Pi},isInt:function(){return pi},isNumber:function(){return Ri},isPromise:function(){return Gi},isScalarShape:function(){return di},isString:function(){return _i},isTypedArray:function(){return Ei},isValidDtype:function(){return Ci},locToIndex:function(){return Hi},makeOnesTypedArray:function(){return Bi},makeZerosNestedTypedArray:function(){return ji},makeZerosTypedArray:function(){return Wi},nearestDivisor:function(){return Fi},nearestLargerEven:function(){return ti},now:function(){return Gl},parseAxisParam:function(){return xi},randUniform:function(){return ai},repeatedTry:function(){return yi},rightPad:function(){return vi},shuffle:function(){return Qa},shuffleCombo:function(){return $a},sizeFromShape:function(){return ci},sizeToSquarishShape:function(){return mi},squeezeShape:function(){return Ai},sum:function(){return ri},swap:function(){return ni},tanh:function(){return fi},toNestedArray:function(){return zi},toTypedArray:function(){return Ul}});var Il=Ta(Na()),El=Il.default||Il;function Tl(e){return El.fromString(e,!0,16)}var Nl=Tl("c3a5c85c97cb3127"),_l=Tl("b492b66fbe98f273"),Ml=Tl("9ae16a3b2f90404f");function Rl(e){return e.xor(e.shru(47))}function Ol(e,t,n){var r=e.slice(t,t+n);return El.fromBytes(Array.from(r),!0,!0)}function Pl(e,t){return Ol(e,t,8)}function Fl(e,t){return Ol(e,t,4)}function Dl(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function Ll(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tl("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function zl(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=Dl(i.add(a).add(r),21);var o=a;return a=(a=a.add(t)).add(n),i=i.add(Dl(a,44)),[a.add(r),i.add(o)]}(Pl(e,t),Pl(e,t+8),Pl(e,t+16),Pl(e,t+24),n,r)}function Bl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=Ml.add(2*t),r=Pl(e,0).add(Ml),a=Pl(e,t-8),i=Dl(a,37).mul(n).add(r),o=Dl(r,25).add(a).mul(n);return Ll(i,o,n)}if(t>=4){var s=Ml.add(2*t),u=Fl(e,0);return Ll(u.shl(3).add(t),Fl(e,t-4),s)}if(t>0){var l=e[0],c=e[t>>1],d=e[t-1],h=l+(c<<8),p=t+(d<<2);return Rl(Ml.mul(h).xor(Nl.mul(p))).mul(Ml)}return Ml}function Wl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Ml.add(2*t),r=Pl(e,0).mul(_l),a=Pl(e,8),i=Pl(e,t-8).mul(n),o=Pl(e,t-16).mul(Ml);return Ll(Dl(r.add(a),43).add(Dl(i,30)).add(o),r.add(Dl(a.add(Ml),18)).add(i),n)}function jl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Ml.add(2*t),r=Pl(e,0).mul(Ml),a=Pl(e,8),i=Pl(e,t-8).mul(n),o=Pl(e,t-16).mul(Ml),s=Dl(r.add(a),43).add(Dl(i,30)).add(o),u=Ll(s,r.add(Dl(a.add(Ml),18)).add(i),n),l=Pl(e,16).mul(n),c=Pl(e,24),d=s.add(Pl(e,t-32)).mul(n),h=u.add(Pl(e,t-24)).mul(n);return Ll(Dl(l.add(c),43).add(Dl(d,30)).add(h),l.add(Dl(c.add(r),18)).add(d),n)}function Vl(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,r=El.fromNumber(81,!0);if(n<=32)return n<=16?Bl(e,n):Wl(e,n);if(n<=64)return jl(e,n);var a=r,i=r.mul(_l).add(113),o=Rl(i.mul(Ml).add(113)).mul(Ml),s=[El.UZERO,El.UZERO],u=[El.UZERO,El.UZERO];a=a.mul(Ml).add(Pl(e,0));var l=0,c=64*(n-1>>6),d=c+(n-1&63)-63;do{var h;a=Dl(a.add(i).add(s[0]).add(Pl(e,l+8)),37).mul(_l),i=Dl(i.add(s[1]).add(Pl(e,l+48)),42).mul(_l),a=a.xor(u[1]),i=i.add(s[0]).add(Pl(e,l+40)),o=Dl(o.add(u[0]),33).mul(_l),s=zl(e,l,s[1].mul(_l),a.add(u[0])),u=zl(e,l+32,o.add(u[1]),i.add(Pl(e,l+16))),o=(h=[a,o])[0],a=h[1],l+=64}while(l!==c);var p=_l.add(o.and(255).shl(1));return l=d,u[0]=u[0].add(n-1&63),s[0]=s[0].add(u[0]),u[0]=u[0].add(s[0]),a=Dl(a.add(i).add(s[0]).add(Pl(e,l+8)),37).mul(p),i=Dl(i.add(s[1]).add(Pl(e,l+48)),42).mul(p),a=a.xor(u[1].mul(9)),i=i.add(s[0].mul(9).add(Pl(e,l+40))),o=Dl(o.add(u[0]),33).mul(p),s=zl(e,l,s[1].mul(p),a.add(u[0])),u=zl(e,l+32,o.add(u[1]),i.add(Pl(e,l+16))),o=(t=[a,o])[0],a=t[1],Ll(Ll(s[0],u[0],p).add(Rl(i).mul(Nl)).add(o),Ll(s[1],u[1],p).add(a),p)}function Hl(e,t){return"string"===t?ql(e):Ul([e],t)}function Ul(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=li(e)),Zi().getBool("DEBUG")&&Si(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function Gl(){return Zi().platform.now()}function Xl(e,t){return Zi().platform.fetch(e,t)}function ql(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Zi().platform.encode(e,t)}function Yl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Zi().platform.decode(e,t)}var Kl=function(){function e(t,n){Jr(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new Zl)}return $r(e,[{key:"profileKernel",value:function(e,t,n){var r,a,i=function(){r=n()},o=Gl();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();var s,u=ea(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(d){u.e(d)}finally{u.f()}a=Promise.resolve({kernelMs:Gl()-o})}if(Zi().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var l=function(t){var n=r[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},c=0;c<r.length;c++)l(c);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var Zl=function(){function e(){Jr(this,e)}return $r(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"==typeof r?vi("".concat(r,"ms"),9):r.error,s=vi(e,25),u=t.rank,l=t.size,c=vi(t.shape.toString(),14),d="";for(var h in a){var p=a[h];if(null!=p){var f=p.shape||t.shape,m=f.length;d+="".concat(h,": ").concat(m,"D ").concat(m>0?f:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(c,"\t%c").concat(l,"\t%c").concat(d,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function Jl(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var l in u){for(var c=u[l],d=!1,h=0;h<t.length;h++)if(r[c.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),d=!0,a[s.id]=!0;break}if(d)break}}var p={};p[n.id]=!0;for(var f={},m=e.length-1;m>=0;m--)for(var g=e[m],v=g.inputs,y=0;y<g.outputs.length;y++)if(p[g.outputs[y].id]){for(var b in v)p[v[b].id]=!0,f[g.id]=!0;break}for(var x=[],A=0;A<e.length;A++){var w=e[A];if(a[w.id]&&f[w.id]){var k={};for(var S in w.inputs){var C=w.inputs[S];r[C.id]&&(k[S]=C)}var I=Object.assign({},w);I.inputs=k,I.outputs=w.outputs,x.push(I)}}return x}function Ql(e,t,n,r){for(var a=function(a){var i=t[a],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found for ".concat(i.kernelName,"."));var s=i.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". Available gradients found: ").concat(Object.keys(s),"."));var a=n((function(){return s[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ").concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var o=i.inputs[t];if(!hi(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input '").concat(t,"' has shape '").concat(a.shape,"', which does not match the shape of the input '").concat(o.shape,"'"));if(null==e[o.id])e[o.id]=a;else{var u=e[o.id];e[o.id]=r(u,a),u.dispose()}};for(var l in i.inputs)u(l)},i=t.length-1;i>=0;i--)a(i)}function $l(e,t,n,r){var a=Di(t),i=function(e,t,n,r){var a=ci(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?rc(e):e;if(s>1)for(var l=0;l<a/i;l++)for(var c=l*i,d=0;d<i;d++)o[d]=Math.max(o[d],ec(u[c+d],0,n).length);return o}(e,t,n,a),o=t.length,s=nc(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function ec(e,t,n){return vi(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ").concat(parseFloat(e[1].toFixed(7)),"j"):_i(e)?"'".concat(e,"'"):"bool"===n?tc(e):parseFloat(e.toFixed(7)).toString(),t)}function tc(e){return 0===e?"false":"true"}function nc(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u){if("complex64"===n){var l=rc(e);return[ec(l[0],0,n)]}return"bool"===n?[tc(e[0])]:[e[0].toString()]}if(1===u){if(s>20){var c=3*o,d=Array.from(e.slice(0,c)),h=Array.from(e.slice((s-3)*o,s*o));return"complex64"===n&&(d=rc(d),h=rc(h)),["["+d.map((function(e,t){return ec(e,a[t],n)})).join(", ")+", ..., "+h.map((function(e,t){return ec(e,a[s-3+t],n)})).join(", ")+"]"]}var p="complex64"===n?rc(e):Array.from(e);return["["+p.map((function(e,t){return ec(e,a[t],n)})).join(", ")+"]"]}var f=t.slice(1),m=r.slice(1),g=r[0]*o,v=[];if(s>20){for(var y=0;y<3;y++){var b=y*g,x=b+g;v.push.apply(v,ta(nc(e.slice(b,x),f,n,m,a,!1)))}v.push("...");for(var A=s-3;A<s;A++){var w=A*g,k=w+g;v.push.apply(v,ta(nc(e.slice(w,k),f,n,m,a,A===s-1)))}}else for(var S=0;S<s;S++){var C=S*g,I=C+g;v.push.apply(v,ta(nc(e.slice(C,I),f,n,m,a,S===s-1)))}var E=2===u?",":"";v[0]="["+v[0]+E;for(var T=1;T<v.length-1;T++)v[T]=" "+v[T]+E;for(var N=",\n",_=2;_<u;_++)N+="\n";return v[v.length-1]=" "+v[v.length-1]+"]"+(i?"":N),v}function rc(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var ac=function(){function e(t,n,r){var a=this;if(Jr(this,e),this.dtype=n,this.shape=t.slice(),this.size=ci(t),null!=r){var i=r.length;oi(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size inferred by the shape '").concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||ki(n,this.size),this.strides=Di(t)}return $r(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),oi(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must match the rank (").concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,".   Buffer shape=").concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],l=0;l<t.length-1;++l)u+=this.strides[l]*t[l];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return ic().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),ic=null,oc=null;var sc=function(){function e(t,n,r,a){Jr(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=ci(t),this.strides=Di(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return $r(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=Mr(Nr().mark((function e(){var t;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",oc.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return oc.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=Mr(Nr().mark((function e(){var t;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",zi(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return zi(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=Mr(Nr().mark((function e(){var t,n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=ic().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return Yl(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),ic().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=ic().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return Yl(e)}))}catch(qe){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=Mr(Nr().mark((function e(){var t;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,ic().read(this.dataId);case 3:return t=e.sent,e.abrupt("return","string"===this.dtype?t:new Uint8Array(t.buffer));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(ic().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return oc.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),oc.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return $l(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),oc.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),ic().makeVariable(this,e,t,n)}}]),e}();Object.defineProperty(sc,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),eo("Tensor",(function(){return sc}));var uc=function(e){Kr(n,e);var t=Zr(n);function n(e,r,a,i){var o;return Jr(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return $r(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and previous value (").concat(this.dtype,") must match"));if(!hi(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and previous value (").concat(this.shape,") must match"));ic().disposeTensor(this),this.dataId=e.dataId,ic().incRef(this,null)}},{key:"dispose",value:function(){ic().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(sc);Object.defineProperty(uc,Symbol.hasInstance,{value:function(e){return e instanceof sc&&null!=e.assign&&e.assign instanceof Function}});var lc={};Ea(lc,{assertTypesMatch:function(){return bc},getTensorsInContainer:function(){return Ac},isTensorInList:function(){return xc},makeTypesMatch:function(){return yc}});var cc=function(e){return e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6",e}(cc||{}),dc=function(e){return e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64",e}(dc||{}),hc=function(e){return e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64",e}(hc||{}),pc=function(e){return e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64",e}(pc||{}),fc=function(e){return e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64",e}(fc||{}),mc={float32:pc,int32:dc,bool:hc,complex64:fc};function gc(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return mc[e][t]}function vc(e){return gc(e,"int32")}function yc(e,t){if(e.dtype===t.dtype)return[e,t];var n=gc(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function bc(e,t){oi(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and second(").concat(t.dtype,") input must match")}))}function xc(e,t){return t.some((function(t){return t.id===e.id}))}function Ac(e){var t=[];return wc(e,t,new Set),t}function wc(e,t,n){if(null!=e)if(e instanceof sc)t.push(e);else if(function(e){return Array.isArray(e)||"object"==typeof e}(e)){var r=e;for(var a in r){var i=r[a];n.has(i)||(n.add(i),wc(i,t,n))}}}function kc(e){return null!=e.kernelName}var Sc=function(){function e(){Jr(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return $r(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),Cc=function(){function e(t){Jr(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Sc}return $r(e,[{key:"ready",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=17;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=14;break}return e.next=13,this.setBackend(r);case 13:return e.abrupt("return");case 14:n++,e.next=6;break;case 17:throw new Error("Could not initialize any backends, all backend initializations failed.");case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(hl("".concat(e," backend was already registered. Reusing existing backend factory.")),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=Mr(Nr().mark((function e(t){var n,r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=14;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=11;break}return e.next=8,r;case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=r;case 12:if(e.t0){e.next=14;break}return e.abrupt("return",!1);case 14:return e.abrupt("return",(this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new Kl(this.backendInstance),!0));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;yl(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;yl(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof Za||"function"!=typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,hl("Initialization of backend ".concat(e," failed")),hl(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(r){return hl("Initialization of backend ".concat(e," failed")),hl(r.stack||r.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(r){throw t(),r}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=Nc.runKernel(gs,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return Nc.runKernel(Co,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,null==gl(e,this.backendName))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak (").concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r=this,a=[],i=this.isTapeOn(),o=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var u,l=kc(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(kc(e)){var c=e.kernelName,d=e.inputs,h=e.attrs;null==this.backendName&&this.backend;var p=gl(c,this.backendName);oi(null!=p,(function(){return"Cannot find registered kernel '".concat(c,"' for backend '").concat(r.backendName,"'")})),n=function(){var e=r.backend.numDataIds();u=p.kernelFunc({inputs:d,attrs:h,backend:r.backend});var t=Array.isArray(u)?u:[u];r.shouldCheckForMemLeaks()&&r.checkKernelForMemLeak(c,e,t);var n=t.map((function(e){return null!=e.rank?e:r.makeTensorFromTensorInfo(e)}));if(i){var o=r.getTensorsForGradient(c,d,n);a=r.saveTensorsForBackwardMode(o)}return n}}else{var f=e.forwardFunc,m=function(e){!i||(a=e.map((function(e){return r.keep(r.clone(e))})))};n=function(){var e=r.backend.numDataIds();u=r.tidy((function(){return f(r.backend,m)}));var t=Array.isArray(u)?u:[u];return r.shouldCheckForMemLeaks()&&r.checkKernelForMemLeak(l,e,t),t}}var g,v=e.inputs,y=e.attrs,b=kc(e)?null:e.backwardsFunc;return this.scopedRun((function(){return r.state.kernelDepth++}),(function(){return r.state.kernelDepth--}),(function(){r.ENV.getBool("DEBUG")||r.state.profiling?(g=r.profiler.profileKernel(l,v,(function(){return n()})),r.ENV.getBool("DEBUG")&&r.profiler.logKernelProfile(g),t=g.outputs):t=n()})),i&&this.addTapeNode(l,v,t,b,a,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(v).map((function(e){return null!=v[e]?v[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(u)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=vl(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(oi(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&_i(e[0])&&(a=e.map((function(e){return ql(e)})));var i=r.write(a,t,n),o=new sc(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=Ni(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}},{key:"makeTensorFromTensorInfo",value:function(e,t){var n=e.dataId,r=e.shape,a=e.dtype,i=new sc(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new uc(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*Ti(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof uc||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*Ti(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=Mr(Nr().mark((function e(t){var n,r,a,i,o;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=5,t();case 5:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,ta(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=ea(this.state.activeProfile.kernels),e.prev=11,a.s();case 13:if((i=a.n()).done){e.next=23;break}return o=i.value,e.next=17,o.kernelTimeMs;case 17:return o.kernelTimeMs=e.sent,e.next=20,o.extraInfo;case 20:o.extraInfo=e.sent;case 21:e.next=13;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(11),a.e(e.t0);case 28:return e.prev=28,a.f(),e.finish(28);case 31:return e.abrupt("return",this.state.activeProfile);case 32:case"end":return e.stop()}}),e,this,[[11,25,28,31]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=vl(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=Wi(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=Ac(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];!i.kept&&!r.has(i.id)&&i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){!e.kept&&e.scopeId===o.id&&t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(oi(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));oi(i instanceof sc,(function(){return"The result y returned by f() must be a tensor."}));var o=Jl(this.state.activeTape,t,i);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?Ec(i.shape):n,Ql(e,o,(function(e){return r.tidy(e)}),_c);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=ea(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:i,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return oi(Pi(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];oi(r.every((function(e){return e instanceof sc})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i,o={};r.forEach((function(e,t){o[t]=e}));var s=function(t,n){return oi((i=e.apply(void 0,r.concat([n]))).value instanceof sc,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),oi(Pi(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},u=function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];oi(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),oi(a.every((function(e){return e instanceof sc})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o};return t.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=Mr(Nr().mark((function e(t){var n,r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Gl(),e.next=3,this.backend.time(t);case 3:return r=e.sent,e.abrupt("return",(r.wallMs=Gl()-n,r));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Sc,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}(),Ic=Cc;function Ec(e){var t=Bi(ci(e),"float32");return Nc.makeTensor(t,e,"float32")}function Tc(){var e=$i();if(null==e._tfengine){var t=new qi(e);e._tfengine=new Ic(t)}return function(e){Qi=e}(e._tfengine.ENV),function(e){ic=e}((function(){return e._tfengine})),e._tfengine}Ic.nextTensorId=0,Ic.nextVariableId=0;var Nc=Tc();function _c(e,t){var n={a:e,b:t};return Nc.runKernel(ao,n)}var Mc,Rc={};function Oc(e){Mc=e}function Pc(e){if(void 0!==Mc)return Mc;if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!=typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function Fc(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}Ea(Rc,{isBrowser:function(){return Fc},isMobile:function(){return Pc},mockIsMobile:function(){return Oc}});var Dc=Zi();function Lc(e,t){var n=e;if(Ei(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||Ei(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Zi().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&zc(e,r,[]),r}function zc(e,t,n){if(n=n||[],Array.isArray(e)||Ei(e)){oi(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, but is an array of ").concat(e.length," elements")})),oi(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," elements, but has ").concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)zc(e[a],r,n.concat(a))}else oi(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, but should be an array/TypedArray of ").concat(t[0]," elements")}))}function Bc(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must be ").concat(e," tensor, but got ").concat(t," tensor"))}}function Wc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof sc)return Bc(r,e.dtype,t,n),e;var a=Oi(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Bc(r,a,t,n),null==e||!Ei(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a Tensor or TensorLike, but got '").concat(i,"'"))}var o=Lc(e,a);!Ei(e)&&!Array.isArray(e)&&(e=[e]);var s="string"!==a?Ul(e,a):li(e,[],!0);return Nc.makeTensor(s,o,a)}function jc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a `Tensor[]` or `TensorLike[]`"));return e.map((function(e,a){return Wc(e,"".concat(t,"[").concat(a,"]"),n,r)}))}Dc.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Dc.registerFlag("IS_BROWSER",(function(){return Fc()})),Dc.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&"undefined"!=typeof process.versions&&"undefined"!=typeof process.versions.node})),Dc.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),Dc.registerFlag("PROD",(function(){return!1})),Dc.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return Dc.getBool("DEBUG")})),Dc.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),Dc.registerFlag("IS_TEST",(function(){return!1})),Dc.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),Dc.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),Dc.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1})),Dc.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY",(function(){return!1}));var Vc="__op";function Hc(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with ".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=Vc;var a=function(){Nc.startScope(n);try{var e=r.apply(void 0,arguments);return Gi(e)&&console.error("Cannot return a Promise inside of tidy."),Nc.endScope(e),e}catch(e){throw Nc.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var Uc=Hc({complex_:function(e,t){var n=Wc(e,"real","complex"),r=Wc(t,"imag","complex");si(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", must match in call to tf.complex()."));var a={real:n,imag:r};return Nc.runKernel(To,a)}});function Gc(e,t,n,r){if(null==r&&(r=Oi(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Ei(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Vi(t);var a=ci(t),i=ci(n);oi(a===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ").concat(a," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==ci(t.slice(o));oi(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape (".concat(n,") does not match the provided shape (").concat(t,"). ")}))}}return!Ei(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e="string"!==r?Ul(e,r):li(e,[],!0),Nc.makeTensor(e,t,r)}function Xc(e,t,n){return Gc(e,t,Lc(e,n),n)}var qc={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};function Yc(e,t){return Kc.apply(this,arguments)}function Kc(){return Kc=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,u;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=[],i=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),o=function(e){var o=i[e],s=Array.isArray(t)?t[e].tensor:t[o];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(s.dtype));var u={name:o,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){var l=new Promise(function(){var e=Mr(Nr().mark((function e(t){var n,r,a,i,o,u,l;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,a=new Uint8Array(r),i=0,o=0;o<n.length;o++)u=n[o],l=new Uint8Array(new Uint32Array([u.length]).buffer),a.set(l,i),i+=4,a.set(u,i),i+=u.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.push(l)}else a.push(s.data());null!=n&&(u.group=n),r.push(u)},s=0;s<i.length;++s)o(s);return e.next=5,Promise.all(a);case 5:return u=e.sent,e.abrupt("return",{data:Jc(u),specs:r});case 7:case"end":return e.stop()}}),e)}))),Kc.apply(this,arguments)}function Zc(e,t){var n,r,a={},i=0,o=ea(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.name,l=s.dtype,c=s.shape,d=ci(c),h=void 0;if("quantization"in s){var p=s.quantization;if("uint8"===p.dtype||"uint16"===p.dtype){if(!("min"in p)||!("scale"in p))throw new Error("Weight ".concat(s.name," with quantization ").concat(p.dtype," doesn't have corresponding metadata min and scale."))}else{if("float16"!==p.dtype)throw new Error("Weight ".concat(s.name," has unknown quantization dtype ").concat(p.dtype,". Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'."));if("float32"!==l)throw new Error("Weight ".concat(s.name," is quantized with ").concat(p.dtype," which only supports weights of type float32 not ").concat(l,"."))}var f=qc[p.dtype],m=e.slice(i,i+d*f),g="uint8"===p.dtype?new Uint8Array(m):new Uint16Array(m);if("float32"===l)if("uint8"===p.dtype||"uint16"===p.dtype){h=new Float32Array(g.length);for(var v=0;v<g.length;v++){var y=g[v];h[v]=y*p.scale+p.min}}else{if("float16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," for weight type float32."));void 0===n&&(n=ud()),h=n(g)}else{if("int32"!==l)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(l));if("uint8"!==p.dtype&&"uint16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," for weight type int32."));h=new Int32Array(g.length);for(var b=0;b<g.length;b++){var x=g[b];h[b]=Math.round(x*p.scale+p.min)}}i+=d*f}else if("string"===l){var A=ci(s.shape);h=[];for(var w=0;w<A;w++){var k=new Uint32Array(e.slice(i,i+4))[0];i+=4;var S=new Uint8Array(e.slice(i,i+k));h.push(S),i+=k}}else{var C=qc[l],I=e.slice(i,i+d*C);if("float32"===l)h=new Float32Array(I);else if("int32"===l)h=new Int32Array(I);else if("bool"===l)h=new Uint8Array(I);else{if("complex64"!==l)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(l));h=new Float32Array(I);for(var E=new Float32Array(h.length/2),T=new Float32Array(h.length/2),N=0;N<E.length;N++)E[N]=h[2*N],T[N]=h[2*N+1];var _=Xc(E,c,"float32"),M=Xc(T,c,"float32");a[u]=Uc(_,M),_.dispose(),M.dispose()}i+=d*C}"complex64"!==l&&(a[u]=Xc(h,c,l))}}catch(R){o.e(R)}finally{o.f()}return a}function Jc(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var Qc="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function $c(e){return Qc?Buffer.byteLength(e):new Blob([e]).size}function ed(e){if(Qc)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function td(e){if(Qc){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function nd(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function rd(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function ad(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function id(e,t){return od.apply(this,arguments)}function od(){return od=Mr(Nr().mark((function e(t,n){var r,a,i,o,s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null==t.weightsManifest){e.next=9;break}return e.next=4,n(t.weightsManifest);case 4:a=e.sent,i=u(a,2),o=i[0],s=i[1],r.weightSpecs=o,r.weightData=s;case 9:return e.abrupt("return",(null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),r));case 10:case"end":return e.stop()}}),e)}))),od.apply(this,arguments)}function sd(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:$c(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:$c(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function ud(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=u}return new Float32Array(a)}}var ld=function(){function e(){Jr(this,e),this.saveRouters=[],this.loadRouters=[]}return $r(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),cd=function(e){return ld.registerSaveRouter(e)},dd=function(e){return ld.registerLoadRouter(e)},hd=function(e){return ld.getSaveHandlers(e)},pd=function(e,t){return ld.getLoadHandlers(e,t)},fd="tensorflowjs",md="models_store",gd="model_info_store";function vd(){if(!Zi().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function yd(e){var t=e.result;t.createObjectStore(md,{keyPath:"modelPath"}),t.createObjectStore(gd,{keyPath:"modelPath"})}var bd=function(){function e(t){if(Jr(this,e),this.indexedDB=vd(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return $r(e,[{key:"save",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(fd,1);a.onupgradeneeded=function(){return yd(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(md,"readonly"),s=o.objectStore(md).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' in IndexedDB.")));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,l=sd(t),c=i.transaction(gd,"readwrite"),d=c.objectStore(gd),h=d.put({modelPath:n.modelPath,modelArtifactsInfo:l});h.onsuccess=function(){var a=(u=i.transaction(md,"readwrite")).objectStore(md).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l});a.onsuccess=function(){return e({modelArtifactsInfo:l})},a.onerror=function(e){var t=(d=c.objectStore(gd)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},h.onerror=function(e){return i.close(),r(h.error)},c.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();bd.URL_SCHEME="indexeddb://";var xd=function(e){return Zi().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(bd.URL_SCHEME)?function(e){return new bd(e)}(e.slice(bd.URL_SCHEME.length)):null};function Ad(e){return e.startsWith(bd.URL_SCHEME)?e.slice(bd.URL_SCHEME.length):e}ld.registerSaveRouter(xd),ld.registerLoadRouter(xd);var wd=function(){function e(){Jr(this,e),this.indexedDB=vd()}return $r(e,[{key:"listModels",value:function(){var e=Mr(Nr().mark((function e(){var t=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(fd,1);r.onupgradeneeded=function(){return yd(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(gd,"readonly"),i=a.objectStore(gd).getAll();i.onsuccess=function(){var t,n={},r=ea(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Mr(Nr().mark((function e(t){var n=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(t=Ad(t),new Promise((function(e,r){var a=n.indexedDB.open(fd,1);a.onupgradeneeded=function(){return yd(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(gd,"readwrite"),s=o.objectStore(gd),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' in IndexedDB.")));var a=s.delete(t),o=function(){var a=(n=i.transaction(md,"readwrite")).objectStore(md).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),kd="/",Sd="tensorflowjs_models",Cd="info",Id="model_topology",Ed="weight_specs",Td="weight_data",Nd="model_metadata";function _d(e){return{info:[Sd,e,Cd].join(kd),topology:[Sd,e,Id].join(kd),weightSpecs:[Sd,e,Ed].join(kd),weightData:[Sd,e,Td].join(kd),modelMetadata:[Sd,e,Nd].join(kd)}}function Md(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function Rd(e){var t=e.split(kd);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(kd)}function Od(e){return e.startsWith(Pd.URL_SCHEME)?e.slice(Pd.URL_SCHEME.length):e}var Pd=function(){function e(t){if(Jr(this,e),!Zi().getBool("IS_BROWSER")||"undefined"==typeof window||"undefined"==typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=_d(this.modelPath)}return $r(e,[{key:"save",value:function(){var e=Mr(Nr().mark((function e(t){var n,r,a,i;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=sd(t),e.prev=3,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,ed(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},e.abrupt("return",(this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:a}));case 9:throw e.prev=9,e.t0=e.catch(3),Md(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=").concat(a.modelTopologyBytes,", weightSpecsBytes=").concat(a.weightSpecsBytes,", weightDataBytes=").concat(a.weightDataBytes,"."));case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r,a,i,o,s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=8;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' is missing."));case 8:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=12;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' are missing."));case 12:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=18;break}throw new Error("In local storage, the binary weight values of model '".concat(this.modelPath,"' are missing."));case 18:return e.abrupt("return",(n.weightData=td(s),n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();Pd.URL_SCHEME="localstorage://";var Fd=function(e){return Zi().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Pd.URL_SCHEME)?function(e){return new Pd(e)}(e.slice(Pd.URL_SCHEME.length)):null};ld.registerSaveRouter(Fd),ld.registerLoadRouter(Fd);var Dd=function(){function e(){Jr(this,e),oi(Zi().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),oi("undefined"==typeof window||"undefined"!=typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return $r(e,[{key:"listModels",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r,a,i,o;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=Sd+kd,r=kd+Cd,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=Rd(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Mr(Nr().mark((function e(t){var n,r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Od(t),n=_d(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),e.abrupt("return",(Md(n),r));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ld="://",zd=function(){function e(){Jr(this,e),this.managers={}}return $r(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){oi(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(Ld)&&(t=t.slice(0,t.indexOf(Ld))),oi(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();oi(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();function Bd(e){if(-1===e.indexOf(Ld))throw new Error("The url string provided does not contain a scheme. Supported schemes are: ".concat(zd.getSchemes().join(",")));return{scheme:e.split(Ld)[0],path:e.split(Ld)[1]}}function Wd(e,t){return jd.apply(this,arguments)}function jd(){return jd=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,u,l,c,d,h,p=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]&&p[2],oi(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),oi((a=ld.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),oi(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") load handlers for source URL ").concat(t,".")})),i=a[0],oi((o=ld.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination URL ".concat(n,".")})),oi(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") save handlers for destination URL ").concat(n,".")})),s=o[0],u=Bd(t).scheme,l=Bd(t).path,c=u===Bd(t).scheme,e.next=12,i.load();case 12:if(d=e.sent,e.t0=r&&c,!e.t0){e.next=17;break}return e.next=17,zd.getManager(u).removeModel(l);case 17:return e.next=19,s.save(d);case 19:if(h=e.sent,e.t1=r&&!c,!e.t1){e.next=24;break}return e.next=24,zd.getManager(u).removeModel(l);case 24:return e.abrupt("return",h.modelArtifactsInfo);case 25:case"end":return e.stop()}}),e)}))),jd.apply(this,arguments)}function Vd(){return Hd.apply(this,arguments)}function Hd(){return Hd=Mr(Nr().mark((function e(){var t,n,r,a,i,o,s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=zd.getSchemes(),n={},r=ea(t),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=12;break}return i=a.value,e.next=8,zd.getManager(i).listModels();case 8:for(s in o=e.sent)n[i+Ld+s]=o[s];case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])}))),Hd.apply(this,arguments)}function Ud(e){return Gd.apply(this,arguments)}function Gd(){return Gd=Mr(Nr().mark((function e(t){var n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bd(t),e.abrupt("return",zd.getManager(n.scheme).removeModel(n.path));case 2:case"end":return e.stop()}}),e)}))),Gd.apply(this,arguments)}function Xd(e,t){return qd.apply(this,arguments)}function qd(){return qd=Mr(Nr().mark((function e(t,n){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wd(t,n,!1));case 1:case"end":return e.stop()}}),e)}))),qd.apply(this,arguments)}function Yd(e,t){return Kd.apply(this,arguments)}function Kd(){return Kd=Mr(Nr().mark((function e(t,n){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wd(t,n,!0));case 1:case"end":return e.stop()}}),e)}))),Kd.apply(this,arguments)}var Zd=function(){function e(){Jr(this,e)}return $r(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if(Zi().get("IS_BROWSER")){Zi().setPlatform("browser",new Zd);try{zd.registerManager(Pd.URL_SCHEME,new Dd)}catch(QIe){}try{zd.registerManager(bd.URL_SCHEME,new wd)}catch(QIe){}}var Jd,Qd=function(){return _a()},$d=function(){function e(){Jr(this,e),this.util=Ma(),this.textEncoder=new this.util.TextEncoder}return $r(e,[{key:"fetch",value:function(e,t){return null!=Zi().global.fetch?Zi().global.fetch(e,t):(null==Jd&&(Jd=Qd()),Jd(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();function eh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",Vi(e),new ac(e,t,n)}Zi().get("IS_NODE")&&!Zi().get("IS_BROWSER")&&Zi().setPlatform("node",new $d);var th=Hc({cast_:function(e,t){var n=Wc(e,"x","cast");if(!Ci(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return Nc.runKernel(Co,r,a)}});var nh=Hc({clone_:function(e){var t={x:Wc(e,"x","clone","string_or_numeric")};return Nc.runKernel(gs,t)}});function rh(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}Tc(),function(e){oc=e}({buffer:eh,cast:th,clone:nh,print:rh});var ah={};Ea(ah,{browserFiles:function(){return lh},browserHTTPRequest:function(){return Ah},concatenateArrayBuffers:function(){return nd},copyModel:function(){return Xd},decodeWeights:function(){return Zc},encodeWeights:function(){return Yc},fromMemory:function(){return Ch},fromMemorySync:function(){return Ih},getLoadHandlers:function(){return pd},getModelArtifactsForJSON:function(){return id},getModelArtifactsInfoForJSON:function(){return sd},getSaveHandlers:function(){return hd},http:function(){return xh},isHTTPScheme:function(){return yh},listModels:function(){return Vd},loadWeights:function(){return ph},moveModel:function(){return Yd},registerLoadRouter:function(){return dd},registerSaveRouter:function(){return cd},removeModel:function(){return Ud},weightsLoaderFactory:function(){return mh},withSaveHandler:function(){return Eh},withSaveHandlerSync:function(){return Th}});function ih(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var oh=function(){function e(t){if(Jr(this,e),!Zi().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),(null==t||0===t.length)&&(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return $r(e,[{key:"save",value:function(){var e=Mr(Nr().mark((function e(t){var n,r,a,i,o,s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=5;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 5:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=ad(t,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,o.href=i,e.next=10,ih((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 10:if(null==t.weightData){e.next=16;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=16,ih((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 16:return e.abrupt("return",{modelArtifactsInfo:sd(t)});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),sh=oh;sh.URL_SCHEME="downloads://";var uh=function(){function e(t){if(Jr(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return $r(e,[{key:"load",value:function(){var e=Mr(Nr().mark((function e(){var t=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),i=a.modelTopology;if(null!=i)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var o=id(a,(function(e){return t.loadWeights(e)}));e(o)}else e({modelTopology:i});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading Keras-style tf.Model artifacts only."))},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],i=ea(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push.apply(r,ta(o.weights)),a.push.apply(a,ta(o.paths))}}catch(l){i.e(l)}finally{i.f()}var s=this.checkManifestAndWeightFiles(e),u=a.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(u).then((function(e){return[r,nd(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return rd(e.name)})),i={},o=ea(e);try{for(o.s();!(t=o.n()).done;){t.value.paths.forEach((function(e){var t=rd(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: '".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));i[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(s){o.e(s)}finally{o.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest (".concat(r.length,") and the number of weight files provided (").concat(this.weightsFiles.length,")."));return i}}]),e}();function lh(e){return new uh(e)}function ch(e,t,n,r){(function(e){oi(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))})(e),function(e,t){oi(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction ".concat(e)})),oi(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction ".concat(t)})),oi(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction ".concat(e," and endFraction ").concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function dh(e,t){return hh.apply(this,arguments)}function hh(){return hh=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,u,l;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?Zi().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,ch(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0.map((function(e){return e.arrayBuffer()})),u=.5,l=1,null!=n.onProgress){e.next=23;break}return e.next=20,Promise.all(s);case 20:e.t1=e.sent,e.next=26;break;case 23:return e.next=25,ch(s,n.onProgress,u,l);case 25:e.t1=e.sent;case 26:return e.abrupt("return",e.t1);case 27:case"end":return e.stop()}}),e)}))),hh.apply(this,arguments)}function ph(e){return fh.apply(this,arguments)}function fh(){return fh=Mr(Nr().mark((function e(t){var n,r,a,i=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"",r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,e.abrupt("return",mh((function(e){return dh(e,{requestInit:a})}))(t,n,r));case 4:case"end":return e.stop()}}),e)}))),fh.apply(this,arguments)}function mh(e){return function(){var t=Mr(Nr().mark((function t(n){var r,a,i,o,s,u,l,c,d,h,p,f,m=arguments;return Nr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:"",a=m.length>2?m[2]:void 0,i=n.map((function(){return!1})),o={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,l=qc[r]*ci(e.shape),c=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:l})};null!=a?a.forEach((function(t,n){t===e.name&&(c(),s[n]=!0)})):c(),u.push(e.name),n+=l}))})),s.every((function(e){return e}))){t.next=6;break}throw l=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: ".concat(l.join(", "),". \nManifest JSON has weights with names: ").concat(u.join(", "),"."));case 6:return c=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),d=[],c.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;d.push(t)}))})),t.next=10,e(d);case 10:return h=t.sent,p={},f=0,t.abrupt("return",(c.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=h[f+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,l=0;l<t;l++){var c=new Uint8Array(h[f+l]);s.set(c,u),u+=c.byteLength}o[e].forEach((function(e){var t=Zc(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)p[n]=t[n]})),f+=t})),p));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}ld.registerSaveRouter((function(e){return Zi().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(sh.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new sh(e)}(e.slice(sh.URL_SCHEME.length)):null}));var gh=function(){function e(t,n){if(Jr(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(oi("function"==typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=Zi().platform.fetch,oi(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&oi(2===t.length,(function(){return"URL paths for http must have a length of 2, (actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return $r(e,[{key:"save",value:function(){var e=Mr(Nr().mark((function e(t){var n,r,a,i;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=ad(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=8,this.fetch(this.path,n);case 8:if(!(i=e.sent).ok){e.next=11;break}return e.abrupt("return",{modelArtifactsInfo:sd(t),responses:[i]});case 11:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status ".concat(i.status,"."));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r,a,i,o=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ").concat(t.status,". Please verify this URL points to the model JSON of the model to load."));case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 15:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=18;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model topology or manifest for weights."));case 18:return e.abrupt("return",id(n,(function(e){return o.loadWeights(e)})));case 19:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=Mr(Nr().mark((function e(t){var n,r,a,i,o,s,l,c,d,h,p,f,m,g,v,y,b,x,A;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=vh(n),a=u(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,l=[],c=ea(t);try{for(c.s();!(d=c.n()).done;)h=d.value,l.push.apply(l,ta(h.weights))}catch(w){c.e(w)}finally{c.f()}p=[],f=[],m=ea(t);try{for(m.s();!(g=m.n()).done;){v=g.value,y=ea(v.paths);try{for(y.s();!(b=y.n()).done;)x=b.value,null!=this.weightUrlConverter?f.push(this.weightUrlConverter(x)):p.push(s+x+o)}catch(w){y.e(w)}finally{y.f()}}}catch(w){m.e(w)}finally{m.f()}if(e.t0=this.weightUrlConverter,!e.t0){e.next=16;break}return e.t1=p.push,e.t2=p,e.t3=ta,e.next=13,Promise.all(f);case 13:e.t4=e.sent,e.t5=(0,e.t3)(e.t4),e.t1.apply.call(e.t1,e.t2,e.t5);case 16:return e.next=18,dh(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 18:return A=e.sent,e.abrupt("return",[l,nd(A)]);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function vh(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function yh(e){return null!=e.match(gh.URL_SCHEME_REGEX)}gh.URL_SCHEME_REGEX=/^https?:\/\//;var bh=function(e,t){if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;var n=!0;return n=Array.isArray(e)?e.every((function(e){return yh(e)})):yh(e),n?xh(e,t):null};function xh(e,t){return new gh(e,t)}function Ah(e,t){return xh(e,t)}ld.registerSaveRouter(bh),ld.registerLoadRouter(bh);var wh=function(){function e(t){Jr(this,e),this.modelArtifacts=t}return $r(e,[{key:"load",value:function(){return this.modelArtifacts}}]),e}(),kh=function(){function e(t){Jr(this,e),this.saveHandler=t}return $r(e,[{key:"save",value:function(e){return this.saveHandler(e)}}]),e}(),Sh=$r((function e(t){Jr(this,e),t.load&&(this.load=function(){return Promise.resolve(t.load())}),t.save&&(this.save=function(e){return Promise.resolve(t.save(e))})}));function Ch(e,t,n,r){var a=arguments;return new Sh(Ih.apply(void 0,ta(a)))}function Ih(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new wh(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new wh({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new wh({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function Eh(e){return new kh(e)}function Th(e){return new kh(e)}var Nh={};Ea(Nh,{confusionMatrix:function(){return rp}});var _h=Hc({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Wc(e,"a","matMul"),i=Wc(t,"b","matMul"),o=yc(a,i),s=u(o,2),l={a:a=s[0],b:i=s[1]},c={transposeA:n,transposeB:r};return Nc.runKernel(xo,l,c)}});var Mh=Hc({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var a={indices:Wc(e,"indices","oneHot","int32")},i={depth:t,onValue:n,offValue:r};return Nc.runKernel(nu,a,i)}});function Rh(){Zi().set("PROD",!0)}function Oh(){Zi().set("DEBUG",!0)}function Ph(){Zi().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Fh(e){Zi().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Dh(){Nc.disposeVariables()}function Lh(){return Nc}function zh(){return Nc.memory()}function Bh(e){return Nc.profile(e)}function Wh(e,t){return Nc.tidy(e,t)}function jh(e){Ac(e).forEach((function(e){return e.dispose()}))}function Vh(e){return Nc.keep(e)}function Hh(e){return Nc.time(e)}function Uh(e){return Nc.setBackend(e)}function Gh(){return Nc.ready()}function Xh(){return Nc.backendName}function qh(e){Nc.removeBackend(e)}function Yh(e){return Nc.findBackend(e)}function Kh(e){return Nc.findBackendFactory(e)}function Zh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Nc.registerBackend(e,t,n)}function Jh(){return Nc.backend}function Qh(e,t){Zi().setPlatform(e,t)}!function(e){e}(Fh);var $h=Hc({imag_:function(e){var t={input:Wc(e,"input","imag")};return Nc.runKernel(ys,t)}});var ep=Hc({neg_:function(e){var t={x:Wc(e,"x","neg")};return Nc.runKernel(Zs,t)}});var tp=Hc({real_:function(e){var t={input:Wc(e,"input","real")};return Nc.runKernel(cu,t)}});var np=Hc({transpose_:function(e,t,n){var r=Wc(e,"x","transpose");if(null==t&&(t=r.shape.map((function(e,t){return t})).reverse()),oi(r.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(r.rank," must match length of perm ").concat(t,".")})),t.forEach((function(e){oi(e>=0&&e<r.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(r.rank-1," but got ").concat(t)}))})),r.rank<=1)return r.clone();var a={x:r},i={perm:t};return"complex64"===r.dtype?Wh((function(){var e=tp(r),t=$h(r);return e=Nc.runKernel(el,{x:e},i),t=Nc.runKernel(el,{x:t},i),n&&(t=ep(t)),Uc(e,t)})):Nc.runKernel(el,a,i)}});var rp=Hc({confusionMatrix_:function(e,t,n){var r=Wc(e,"labels","confusionMatrix"),a=Wc(t,"predictions","confusionMatrix");oi(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got ".concat(n)})),oi(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got ".concat(r.rank)})),oi(1===a.rank,(function(){return"Expected the rank of predictions to be 1, but got ".concat(a.rank)})),oi(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: ".concat(r.shape[0]," vs. ").concat(a.shape[0],". Labels and predictions should have the same number of elements.")})),oi(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got ".concat(n)}));var i=Mh(th(r,"int32"),n),o=Mh(th(a,"int32"),n),s=np(i),u=_h(s,o);return th(u,"int32")}}),ap={};function ip(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function op(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function sp(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes ".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(i)}}return n}Ea(ap,{assertAndGetBroadcastShape:function(){return sp},getBroadcastDims:function(){return ip},getReductionAxes:function(){return op}});var up,lp={};function cp(e,t,n){if(ui(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=Lc(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Gc(e,t,r,n)}function dp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ".concat(e.constructor.name));s=!0}if(a&&a&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=gl(sl,Nc.backendName)){var l={pixels:e},c={numChannels:t};return Nc.runKernel(sl,l,c)}var d,h,p=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],f=u(p,2),m=f[0],g=f[1];if(o)d=e.getContext("2d").getImageData(0,0,m,g).data;else if(r||n)d=e.data;else if(i||a||s){if(null==up)if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas||"undefined"==typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");up=new OffscreenCanvas(1,1).getContext("2d")}else{l=Zi().getBool("CANVAS2D_WILL_READ_FREQUENTLY");up=document.createElement("canvas").getContext("2d",{willReadFrequently:l})}up.canvas.width=m,up.canvas.height=g,up.drawImage(e,0,0,m,g),d=up.getImageData(0,0,m,g).data}if(4===t)h=new Int32Array(d);else{var v=m*g;h=new Int32Array(v*t);for(c=0;c<v;c++)for(var y=0;y<t;++y)h[c*t+y]=d[4*c+y]}return cp(h,[g,m,t],"int32")}function hp(e){return"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}function pp(e){return fp.apply(this,arguments)}function fp(){return fp=Mr(Nr().mark((function e(t){var n,r,a,i=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:3,r=null,!Zi().getBool("WRAP_TO_IMAGEBITMAP")||!hp(t)){e.next=15;break}return e.prev=3,e.next=6,createImageBitmap(t,{premultiplyAlpha:"none"});case 6:a=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a=null;case 12:r=null!=a&&a.width===t.width&&a.height===t.height?a:t,e.next=16;break;case 15:r=t;case 16:return e.abrupt("return",dp(r,n));case 17:case"end":return e.stop()}}),e,null,[[3,9]])}))),fp.apply(this,arguments)}function mp(e,t){return gp.apply(this,arguments)}function gp(){return gp=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,l,c,d,h,p,f,m,g,v,y,b;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Wc(t,"img","toPixels"),t instanceof sc||(r=th(a=r,"int32"),a.dispose()),2===r.rank||3===r.rank){e.next=4;break}throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(r.rank,"."));case 4:if(i=r.shape.slice(0,2),o=u(i,2),s=o[0],l=o[1],!((c=2===r.rank?1:r.shape[2])>4||2===c)){e.next=7;break}throw new Error("toPixels only supports depth of size 1, 3 or 4 but got ".concat(c));case 7:if("float32"===r.dtype||"int32"===r.dtype){e.next=9;break}throw new Error("Unsupported type for toPixels: ".concat(r.dtype,". Please use float32 or int32 tensors."));case 9:return e.next=11,r.data();case 11:d=e.sent,h="float32"===r.dtype?255:1,p=new Uint8ClampedArray(l*s*4),a=0;case 15:if(!(a<s*l)){e.next=36;break}f=[0,0,0,255],m=0;case 18:if(!(m<c)){e.next=31;break}if(g=d[a*c+m],"float32"!==r.dtype){e.next=25;break}if(!(g<0||g>1)){e.next=23;break}throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ".concat(g,"."));case 23:e.next=27;break;case 25:if("int32"!==r.dtype||!(g<0||g>255)){e.next=27;break}throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ".concat(g,"."));case 27:1===c?(f[0]=g*h,f[1]=g*h,f[2]=g*h):f[m]=g*h;case 28:m++,e.next=18;break;case 31:p[(v=4*a)+0]=Math.round(f[0]),p[v+1]=Math.round(f[1]),p[v+2]=Math.round(f[2]),p[v+3]=Math.round(f[3]);case 33:++a,e.next=15;break;case 36:return null!=n&&(n.width=l,n.height=s,y=n.getContext("2d"),b=new ImageData(p,l,s),y.putImageData(b,0,0)),e.abrupt("return",(r!==t&&r.dispose(),p));case 38:case"end":return e.stop()}}),e)}))),gp.apply(this,arguments)}Ea(lp,{fromPixels:function(){return vp},fromPixelsAsync:function(){return pp},toPixels:function(){return mp}});var vp=Hc({fromPixels_:dp}),yp={};function bp(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: ".concat(t.shape[r-1]," vs. ").concat(n));if(0===ci(e.shape))throw new Error("Requested more than 0 entries, but input is empty. Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,l=a.slice();l.pop();for(var c=1,d=i;d<n;++d)c*=u[d],l.push(u[d]);var h=[].concat(ta(Di(e.shape).map((function(e){return e/c}))),[1]).slice(0,i);return[l,o,c,h]}Ea(yp,{prepareAndValidate:function(){return bp}});var xp={};function Ap(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ".concat(n.shape,", indices.shape: ").concat(t.shape,", shape: ").concat(e,", sliceDim: ").concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function wp(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}Ap(n,t,e)}function kp(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:ci(t.shape)/u,sliceSize:o,strides:[].concat(ta(Di(n.slice(0,a))),[1]),outputSize:ci(n)}}Ea(xp,{calculateShapes:function(){return kp},validateInput:function(){return wp},validateUpdateShape:function(){return Ap}});var Sp={};Ea(Sp,{assertParamsValid:function(){return Cp},computeFlatOffset:function(){return zp},computeOutShape:function(){return Ep},getNormalizedAxes:function(){return Mp},isSliceContinous:function(){return Lp},maskToAxes:function(){return Ip},parseSliceParams:function(){return Bp},sliceInfo:function(){return Wp},startForAxis:function(){return Fp},startIndicesWithElidedDims:function(){return Rp},stopForAxis:function(){return Dp},stopIndicesWithElidedDims:function(){return Op},stridesForAxis:function(){return Pp},stridesWithElidedDims:function(){return Tp}});function Cp(e,t,n){var r=e.shape.length;oi(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must match the rank of the array (").concat(r,").")})),oi(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must match the rank of the array (").concat(r,").")}));for(var a=function(a){oi(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] (").concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},i=0;i<r;++i)a(i)}function Ip(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Ep(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function Tp(e,t,n,r){for(var a=ta(e),i=a.length;i<r.length;i++)a.push(1);for(var o=0;o<n;o++)0===o?a[t]=1:(a.splice(t,0,1),a.pop());return a}function Np(e,t,n){return n<=e?n:n-(t-1)}function _p(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function Mp(e,t,n,r,a,i,o,s,u){var l=e.length,c=new Array(l),d=new Array(l),h=new Array(l);if(t.length&&n>0){var p=t[0],f=n+1;c=Rp(o,p,f,r,e),d=Op(s,p,f,a,e),h=Tp(i,p,f,e)}else for(var m=0;m<l;m++)c[m]=Fp(o,r,i,e,m,u),d[m]=Dp(s,a,i,e,m,u),h[m]=Pp(i,m,u);return{begin:c,end:d,strides:h}}function Rp(e,t,n,r,a){for(var i=ta(a),o=_p(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=0;else{var u=Np(t,n,s),l=r[u];e&1<<u&&(l=0),i[s]=l}return i}function Op(e,t,n,r,a){for(var i=ta(a),o=_p(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=Number.MAX_SAFE_INTEGER;else{var u=Np(t,n,s),l=r[u];e&1<<u&&(l=Number.MAX_SAFE_INTEGER),i[s]=l}for(var c=0;c<i.length;c++){var d=a[c];i[c]<0&&(i[c]+=d),i[c]=ei(0,i[c],a[c])}return i}function Pp(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function Fp(e,t,n,r,a,i){var o=t[a],s=n[a]||1;(e&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[a];return o<0&&(o+=u),o=ei(0,o,u-1)}function Dp(e,t,n,r,a,i){var o=t[a],s=n[a]||1;(e&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[a];return o<0&&(o+=u),o=s>0?ei(0,o,u):ei(-1,o,u-1)}function Lp(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function zp(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Bp(e,t,n){var r,a,i=e.shape.length;return(r="number"==typeof t?[t].concat(ta(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){oi(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"==typeof n?[n].concat(ta(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(oi(-1===t,(function(){return"Negative size values should be exactly -1 but got ".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function Wp(e,t,n,r,a,i,o,s,u){var l;if(null==r?(l=new Array(t.length)).fill(1):l=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var c=!1,d={dims:l.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:l.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u},h=0;h<d.dims;h++)c&&0!==(1<<h&s)&&d.numAddAxisAfterEllipsis++,1<<h&o&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);var p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input has only ").concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,p);for(var f=!0,m=!0,g=!0,v=[],y=[],b=0;b<e.length;++b){if(0===p.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(p.shrinkAxisMask&1<<b),A=e[b];if(-1!==A){var w=[p.beginMask&1<<b,p.endMask&1<<b],k=[p.strides[b]>0?0:-1,p.strides[b]>0?A:A-1];if(x&&p.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&1===p.strides[b];var S=!!(p.beginMask&1<<b&&p.endMask&1<<b);if(p.beginValid&&p.endValid){if(x){var C=p.begin[b]<0?A+p.begin[b]:p.begin[b];if(p.begin[b]=C,p.end[b]=p.begin[b]+1,C<0||C>=A)throw Error("slice index ".concat(p.begin[b]," of dimension ").concat(b," out of bounds."))}else p.begin[b]=jp(p.begin[b],0,p.strides[b],A,w,k),p.end[b]=jp(p.end[b],1,p.strides[b],A,w,k);var I=1===p.strides[b]&&0===p.begin[b]&&p.end[b]===A;f=f&&I,m=m&&(0===b&&1===p.strides[b]||I)}else f=f&&1===p.strides[b]&&S,m=m&&(0===b&&1===p.strides[b]||S);var E=void 0,T=!1;if(p.beginValid&&p.endValid?(E=p.end[b]-p.begin[b],T=!0):x?(E=1,T=!0):S&&A>=0&&(E=p.strides[b]<0?-A:A,T=!0),T){var N=void 0;N=0===E||E<0!=p.strides[b]<0?0:Math.trunc(E/p.strides[b])+(E%p.strides[b]!==0?1:0),v.push(N)}else v.push(-1)}else v.push(x?1:-1)}for(var _=0;_<p.finalShapeGatherIndices.length;++_){var M=p.finalShapeGatherIndices[_];M>=0?y.push(v[M]):-2===M&&y.push(1)}return{finalShapeSparse:y.filter((function(e,t){return-2!==p.finalShapeGatherIndices[t]})),finalShape:y,isIdentity:f,sliceDim0:m,isSimpleSlice:g,begin:p.begin,end:p.end,strides:p.strides}}function jp(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}var Vp={};Ea(Vp,{Serializable:function(){return Hp},SerializationMap:function(){return Up},registerClass:function(){return Gp}});var Hp=function(){function e(){Jr(this,e)}return $r(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),Up=function(){function e(){Jr(this,e),this.classNameMap={}}return $r(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function Gp(e){oi(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),oi("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),oi(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),Up.register(e)}var Xp={};Ea(Xp,{TEST_EPSILON_FLOAT16:function(){return qp},encodeStrings:function(){return rf},expectArrayBuffersEqual:function(){return nf},expectArraysClose:function(){return Yp},expectArraysEqual:function(){return Qp},expectNumbersClose:function(){return $p},expectPromiseToFail:function(){return Jp},expectValuesInRange:function(){return tf},testEpsilon:function(){return Kp}});var qp=.1;function Yp(e,t,n){return null==n&&(n=Kp()),Zp(e,t,(function(e,t){return ef(e,t,n)}))}function Kp(){return 32===Nc.backend.floatPrecision()?.001:qp}function Zp(e,t,n){var r=!0;if((Ei(e)||Ei(t))&&(r=!1),Ei(e)&&Ei(t)&&(r=!0),r){var a=e.constructor.name,i=t.constructor.name;if(a!==i)throw new Error("Arrays are of different type. Actual: ".concat(a,". Expected: ").concat(i))}if(Array.isArray(e)&&Array.isArray(t)){var o=Lc(e),s=Lc(t);if(!hi(o,s))throw new Error("Arrays have different shapes. Actual: [".concat(o,"]. Expected: [").concat(s,"]"))}var u=Ei(e)?e:li(e),l=Ei(t)?t:li(t);if(u.length!==l.length)throw new Error("Arrays have different lengths actual: ".concat(u.length," vs expected: ").concat(l.length,".\nActual:   ").concat(u,".\nExpected: ").concat(l,"."));for(var c=0;c<l.length;++c){var d=u[c],h=l[c];if(!n(d,h))throw new Error("Arrays differ: actual[".concat(c,"] = ").concat(d,", expected[").concat(c,"] = ").concat(h,".\nActual:   ").concat(u,".\nExpected: ").concat(l,"."))}}function Jp(e,t){e().then((function(){return t.fail()}),(function(){return t()}))}function Qp(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return _i(e)||_i(e[0])||_i(t)||_i(t[0])?Zp(e,n,(function(e,t){return e==t})):Zp(e,t,(function(e,t){return ef(e,t,0)}))}function $p(e,t,n){if(null==n&&(n=Kp()),!ef(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t))}function ef(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function tf(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))}function nf(e,t){var n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error("Expected ArrayBuffer to be of length ".concat(r.length,", but it was ").concat(n.length));for(var a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error("Expected ArrayBuffer value at ".concat(a," to be ").concat(r[a]," but got ").concat(n[a]," instead"))}function rf(e){for(var t=0;t<e.length;t++){var n=e[t];Array.isArray(n)?rf(n):e[t]=ql(n)}return e}var af="0.0.0";var of=Hc({add_:function(e,t){var n=Wc(e,"a","add"),r=Wc(t,"b","add"),a=u(yc(n,r),2),i={a:n=a[0],b:r=a[1]};return Nc.runKernel(ao,i)}});var sf=Hc({floorDiv_:function(e,t){var n=Wc(e,"a","floorDiv"),r=Wc(t,"b","floorDiv"),a=u(yc(n,r),2),i={a:n=a[0],b:r=a[1]};return Nc.runKernel(cs,i)}});var uf=Hc({div_:function(e,t){var n,r=Wc(e,"a","div"),a=Wc(t,"b","div");if(r=(n=u(yc(r,a),2))[0],a=n[1],"int32"===r.dtype&&"int32"===a.dtype)return sf(r,a);var i={a:r,b:a};return Nc.runKernel(Jo,i,{})}});var lf=Hc({mul_:function(e,t){var n=Wc(e,"a","mul"),r=Wc(t,"b","mul"),a=u(yc(n,r),2),i={a:n=a[0],b:r=a[1]};return Nc.runKernel(Ks,i)}});var cf=Hc({abs_:function(e){var t=Wc(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return Nc.runKernel(No,n)}var r={x:t};return Nc.runKernel(to,r)}});var df=Hc({acos_:function(e){var t={x:Wc(e,"x","acos")};return Nc.runKernel(no,t)}});var hf=Hc({acosh_:function(e){var t={x:Wc(e,"x","acosh")};return Nc.runKernel(ro,t)}});var pf=Hc({addN_:function(e){oi(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),oi(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got ".concat(e.length)}));var t=e.map((function(e,t){return Wc(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!hi(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return Nc.runKernel(io,r)}});var ff=Hc({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Wc(e,"x","all","bool")},a={axis:t,keepDims:n};return Nc.runKernel(oo,r,a)}});var mf=Hc({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Wc(e,"x","any","bool")},a={axis:t,keepDims:n};return Nc.runKernel(so,r,a)}});var gf=Hc({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:Wc(e,"x","argMax")},r={axis:t};return Nc.runKernel(uo,n,r)}});var vf=Hc({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:Wc(e,"x","argMin")},r={axis:t};return Nc.runKernel(lo,n,r)}});var yf=Hc({asin_:function(e){var t={x:Wc(e,"x","asin")};return Nc.runKernel(co,t)}});var bf=Hc({asinh_:function(e){var t={x:Wc(e,"x","asinh")};return Nc.runKernel(ho,t)}});var xf=Hc({atan_:function(e){var t={x:Wc(e,"x","atan")};return Nc.runKernel(po,t)}});var Af=Hc({atan2_:function(e,t){var n=Wc(e,"a","atan2"),r=Wc(t,"b","atan2"),a=u(yc(n,r),2),i={a:n=a[0],b:r=a[1]};return Nc.runKernel(mo,i)}});var wf=Hc({atanh_:function(e){var t={x:Wc(e,"x","atanh")};return Nc.runKernel(fo,t)}});function kf(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0,o=e[3],s=[].concat(ta(t),[o]),u=Lf(a);return If(e,s,n,i,r,null,null,u)}function Sf(e,t,n,r,a,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",l=Nf(t),c=u(l,2),d=c[0],h=c[1];if("channelsLast"===s)o=[d,h,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[d,h,e[1],e[1]]}return If(e,o,n,r,a,i,!1,s)}function Cf(e,t,n,r,a,i){var o,s,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",c=_f(t),d=u(c,3),h=d[0],p=d[1],f=d[2];if("NDHWC"===l)s="channelsLast",o=[h,p,f,e[4],e[4]];else{if("NCDHW"!==l)throw new Error("Unknown dataFormat ".concat(l));s="channelsFirst",o=[h,p,f,e[1],e[1]]}return Ef(e,o,n,r,a,!1,s,i)}function If(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",l=-1,c=-1,d=-1,h=-1;if("channelsLast"===s){var p=u(e,4);l=p[0],c=p[1],d=p[2],h=p[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var f=u(e,4);l=f[0],h=f[1],c=f[2],d=f[3]}var m,g=u(t,4),v=g[0],y=g[1],b=g[3],x=Nf(n),A=u(x,2),w=A[0],k=A[1],S=Nf(r),C=u(S,2),I=C[0],E=C[1],T=Mf(v,I),N=Mf(y,E),_=Rf(a,c,d,w,k,T,N,i,s),M=_.padInfo,R=_.outHeight,O=_.outWidth,P=o?b*h:b;return"channelsFirst"===s?m=[l,P,R,O]:"channelsLast"===s&&(m=[l,R,O,P]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:d,inChannels:h,outHeight:R,outWidth:O,outChannels:P,padInfo:M,strideHeight:w,strideWidth:k,filterHeight:v,filterWidth:y,effectiveFilterHeight:T,effectiveFilterWidth:N,dilationHeight:I,dilationWidth:E,inShape:e,outShape:m,filterShape:t}}function Ef(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,l=-1,c=-1,d=-1,h=-1,p=-1;if("channelsLast"===o){var f=u(e,5);l=f[0],c=f[1],d=f[2],h=f[3],p=f[4]}else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));var m=u(e,5);l=m[0],p=m[1],c=m[2],d=m[3],h=m[4]}var g,v=u(t,5),y=v[0],b=v[1],x=v[2],A=v[4],w=_f(n),k=u(w,3),S=k[0],C=k[1],I=k[2],E=_f(r),T=u(E,3),N=T[0],_=T[1],M=T[2],R=Mf(y,N),O=Mf(b,_),P=Mf(x,M),F=Of(a,c,d,h,S,C,I,R,O,P,s),D=F.padInfo,L=F.outDepth,z=F.outHeight,B=F.outWidth,W=i?A*p:A;return"channelsFirst"===o?g=[l,W,L,z,B]:"channelsLast"===o&&(g=[l,L,z,B,W]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:d,inWidth:h,inChannels:p,outDepth:L,outHeight:z,outWidth:B,outChannels:W,padInfo:D,strideDepth:S,strideHeight:C,strideWidth:I,filterDepth:y,filterHeight:b,filterWidth:x,effectiveFilterDepth:R,effectiveFilterHeight:O,effectiveFilterWidth:P,dilationDepth:N,dilationHeight:_,dilationWidth:M,inShape:e,outShape:g,filterShape:t}}function Tf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=Mf(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function Nf(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function _f(e){return"number"==typeof e?[e,e,e]:e}function Mf(e,t){return t<=1?e:e+(e-1)*(t-1)}function Rf(e,t,n,r,a,i,o,s,u){var l,c,d;if("number"==typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var h=function(e,t,n,r,a){null==r&&(r=Tf(e,t,n));var i=e[0],o=e[1];return[Pf((i-t+2*r)/n+1,a),Pf((o-t+2*r)/n+1,a)]}([t,n],i,r,e,s);c=h[0],d=h[1]}else if("same"===e){c=Math.ceil(t/r),d=Math.ceil(n/a);var p=Math.max(0,(c-1)*r+i-t),f=Math.max(0,(d-1)*a+o-n),m=Math.floor(p/2),g=p-m,v=Math.floor(f/2);l={top:m,bottom:g,left:v,right:f-v,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-i+1)/r),d=Math.ceil((n-o+1)/a);else{if("object"!=typeof e)throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],x="channelsLast"===u?e[2][0]:e[3][0],A="channelsLast"===u?e[2][1]:e[3][1];l={top:y,bottom:b,left:x,right:A,type:0===y&&0===b&&0===x&&0===A?"VALID":"EXPLICIT"},c=Pf((t-i+y+b)/r+1,s),d=Pf((n-o+x+A)/a+1,s)}return{padInfo:l,outHeight:c,outWidth:d}}function Of(e,t,n,r,a,i,o,s,u,l,c){var d,h,p,f;if("number"==typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,a,i){null==a&&(a=Tf(e,t,r));var o=e[0],s=e[1],u=e[2];return[Pf((o-t+2*a)/r+1,i),Pf((s-t+2*a)/r+1,i),Pf((u-t+2*a)/r+1,i),n]}([t,n,r,1],s,1,a,e,c);h=m[0],p=m[1],f=m[2]}else if("same"===e){var g=((h=Math.ceil(t/a))-1)*a+s-t,v=((p=Math.ceil(n/i))-1)*i+u-n,y=((f=Math.ceil(r/o))-1)*o+l-r,b=Math.floor(g/2),x=g-b,A=Math.floor(v/2),w=v-A,k=Math.floor(y/2);d={top:A,bottom:w,left:k,right:y-k,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((t-s+1)/a),p=Math.ceil((n-u+1)/i),f=Math.ceil((r-l+1)/o)}return{padInfo:d,outDepth:h,outHeight:p,outWidth:f}}function Pf(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function Ff(e){var t=u(Nf(e),3),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function Df(e,t){return Ff(e)||Ff(t)}function Lf(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function zf(e,t,n){if(null!=n){if("string"==typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using dimRoundingMode ").concat(n," but got pad ").concat(t,"."));if("number"==typeof t)oi(pi(t),(function(){return"Error in ".concat(e,": pad must be an integer when using dimRoundingMode ").concat(n," but got pad ").concat(t,".")}));else{if("object"!=typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){oi(pi(t),(function(){return"Error in ".concat(e,": pad must be an integer when using dimRoundingMode ").concat(n," but got pad ").concat(t,".")}))}))}))}}}var Bf=Hc({reshape_:function(e,t){var n={x:Wc(e,"x","reshape","string_or_numeric")},r={shape:t};return Nc.runKernel(pu,n,r)}});var Wf=Hc({avgPool_:function(e,t,n,r,a){var i=Wc(e,"x","avgPool","float32");oi(Df(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(1,"'")}));var o=i,s=!1;3===i.rank&&(s=!0,o=Bf(i,[1,i.shape[0],i.shape[1],i.shape[2]])),oi(4===o.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")})),zf("avgPool",r,a);var u={x:o},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a},c=Nc.runKernel(go,u,l);return c=th(c,i.dtype),s?Bf(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var jf=Hc({avgPool3d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=Wc(e,"x","avgPool3d","float32"),s=o,u=!1;4===o.rank&&(u=!0,s=Bf(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),oi(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),oi("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ".concat(i)})),zf("avgPool3d",r,a);var l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=Nc.runKernel(yo,l,c);return d=th(d,s.dtype),u?Bf(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var Vf=Hc({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;oi(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=jc(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return nh(n[0]);var r=n,a={axis:t};return Nc.runKernel(_o,r,a)}});var Hf=Hc({sigmoid_:function(e){var t={x:Wc(e,"x","sigmoid","float32")};return Nc.runKernel(_u,t)}});var Uf=Hc({slice_:function(e,t,n){var r=Wc(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return Nc.runKernel(Iu,a,i)}});var Gf=Hc({tanh_:function(e){var t={x:Wc(e,"x","tanh","float32")};return Nc.runKernel(Zu,t)}});var Xf=Hc({basicLSTMCell_:function(e,t,n,r,a,i){var o=Wc(e,"forgetBias","basicLSTMCell"),s=Wc(t,"lstmKernel","basicLSTMCell"),u=Wc(n,"lstmBias","basicLSTMCell"),l=Wc(r,"data","basicLSTMCell"),c=Wc(a,"c","basicLSTMCell"),d=Wc(i,"h","basicLSTMCell"),h=Vf([l,d],1),p=_h(h,s),f=of(p,u),m=f.shape[0],g=f.shape[1]/4,v=[m,g],y=Uf(f,[0,0],v),b=Uf(f,[0,g],v),x=Uf(f,[0,2*g],v),A=Uf(f,[0,3*g],v),w=of(lf(Hf(y),Gf(b)),lf(c,Hf(of(o,x))));return[w,lf(Gf(w),Hf(A))]}});var qf=Hc({batchToSpaceND_:function(e,t,n){var r=Wc(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));oi(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),oi(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),oi(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of the elements of blockShape ").concat(t.join(" * ")," === ").concat(a)}));var i={x:r},o={blockShape:t,crops:n};return Nc.runKernel(Ao,i,o)}});function Yf(e){return 0===e.rank||1===e.rank?Bf(e,[1,1,1,e.size]):2===e.rank?Bf(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Bf(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}var Kf=Hc({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);var o,s,u=Wc(e,"x","batchNorm"),l=Wc(t,"mean","batchNorm"),c=Wc(n,"variance","batchNorm");null!=a&&(o=Wc(a,"scale","batchNorm")),null!=r&&(s=Wc(r,"offset","batchNorm")),oi(l.rank===c.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),oi(null==s||l.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),oi(null==o||l.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var d={x:Yf(u),scale:o,offset:s,mean:l,variance:c},h={varianceEpsilon:i},p=Nc.runKernel(ds,d,h);return Bf(p,u.shape)}});var Zf=Hc({batchNorm2d_:function(e,t,n,r,a,i){var o,s,u=Wc(e,"x","batchNorm"),l=Wc(t,"mean","batchNorm"),c=Wc(n,"variance","batchNorm");return null!=a&&(o=Wc(a,"scale","batchNorm")),null!=r&&(s=Wc(r,"offset","batchNorm")),oi(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank ".concat(u.rank,".")})),oi(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ".concat(l.rank,".")})),oi(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ".concat(c.rank,".")})),null!=o&&oi(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ".concat(o.rank,".")})),null!=s&&oi(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ".concat(s.rank,".")})),Kf(u,l,c,s,o,i)}});var Jf=Hc({batchNorm3d_:function(e,t,n,r,a,i){var o,s,u=Wc(e,"x","batchNorm"),l=Wc(t,"mean","batchNorm"),c=Wc(n,"variance","batchNorm");return null!=a&&(o=Wc(a,"scale","batchNorm")),null!=r&&(s=Wc(r,"offset","batchNorm")),oi(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank ".concat(u.rank,".")})),oi(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ".concat(l.rank,".")})),oi(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ".concat(c.rank,".")})),null!=o&&oi(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ".concat(o.rank,".")})),null!=s&&oi(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ".concat(s.rank,".")})),Kf(u,l,c,s,o,i)}});var Qf=Hc({batchNorm4d_:function(e,t,n,r,a,i){var o,s,u=Wc(e,"x","batchNorm"),l=Wc(t,"mean","batchNorm"),c=Wc(n,"variance","batchNorm");return null!=a&&(o=Wc(a,"scale","batchNorm")),null!=r&&(s=Wc(r,"offset","batchNorm")),oi(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank ".concat(u.rank,".")})),oi(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ".concat(l.rank,".")})),oi(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ".concat(c.rank,".")})),null!=o&&oi(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ".concat(o.rank,".")})),null!=s&&oi(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ".concat(s.rank,".")})),Kf(u,l,c,s,o,i)}});var $f=Hc({bincount_:function(e,t,n){var r=Wc(e,"x","bincount"),a=Wc(t,"weights","bincount");oi("int32"===r.dtype,(function(){return"Error in bincount: input dtype must be int32, but got ".concat(r.dtype)})),oi(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),oi(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or0-length, but got input shape: ".concat(r.shape,", weights shape: ").concat(a.shape,".")}));var i={x:r,weights:a},o={size:n};return Nc.runKernel(wo,i,o)}});var em=Hc({broadcastArgs_:function(e,t){var n=Wc(e,"s0","broadcastArgs","int32"),r=Wc(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). Has rank ".concat(r.rank));var a={s0:n,s1:r};return Nc.runKernel(So,a)}});var tm=Hc({broadcastTo_:function(e,t){var n=Wc(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=Bf(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));if(0===o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0})).length)return nh(n);var u={x:n},l={reps:o};return Nc.runKernel(Ju,u,l)}});var nm=Hc({ceil_:function(e){var t={x:Wc(e,"x","ceil","float32")};return Nc.runKernel(Io,t)}});var rm=Hc({clipByValue_:function(e,t,n){var r=Wc(e,"x","clipByValue");oi(t<=n,(function(){return"Error in clip: min (".concat(t,") must be less than or equal to max (").concat(n,").")}));var a={x:r},i={clipValueMin:t,clipValueMax:n};return Nc.runKernel(Eo,a,i)}});var am=Hc({concat1d_:function(e){return Vf(e,0)}});var im=Hc({concat2d_:function(e,t){return Vf(e,t)}});var om=Hc({concat3d_:function(e,t){return Vf(e,t)}});var sm=Hc({concat4d_:function(e,t){return Vf(e,t)}});var um=Hc({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=Wc(e,"x","conv2d","float32"),u=Wc(t,"filter","conv2d","float32"),l=s,c=!1;3===s.rank&&(c=!0,l=Bf(s,[1,s.shape[0],s.shape[1],s.shape[2]])),oi(4===l.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(l.rank,".")})),oi(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank ".concat(u.rank,".")})),zf("conv2d",r,o);var d="NHWC"===a?l.shape[3]:l.shape[1];oi(d===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(d,") must match input depth for filter ").concat(u.shape[2],".")})),oi(Df(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(i,"'")}));var h={x:l,filter:u},p={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},f=Nc.runKernel(Mo,h,p);return c?Bf(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var lm=Hc({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0,s=Wc(e,"x","conv1d"),u=Wc(t,"filter","conv1d"),l=s,c=!1;2===s.rank&&(c=!0,l=Bf(s,[1,s.shape[0],s.shape[1]])),oi(3===l.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(l.rank,".")})),oi(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank ".concat(u.rank,".")})),zf("conv1d",r,o),oi(l.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(l.shape[2],") must match input depth for filter ").concat(u.shape[1],".")})),oi(Df(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride ".concat(n," and dilation '").concat(i,"'")})),oi("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var d=Bf(u,[1,u.shape[0],u.shape[1],u.shape[2]]),h=Bf(l,[l.shape[0],1,l.shape[1],l.shape[2]]),p=um(h,d,[1,n],r,"NHWC",[1,i],o);return Bf(p,c?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}});var cm=Hc({conv2DBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0;oi(e.length===t.rank,(function(){return"Length of inShape (".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,l=!1;3===t.rank&&(l=!0,u=Bf(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),oi(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length ".concat(s.length,".")})),oi(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank ".concat(u.rank)})),oi(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank ".concat(n.rank)}));var c="NHWC"===i?s[3]:s[1],d="NHWC"===i?u.shape[3]:u.shape[1];oi(c===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(c,") must match input depth for filter ").concat(n.shape[2],".")})),oi(d===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(d,") must match output depth for filter ").concat(n.shape[3],".")})),zf("conv2dDerInput",a,o);var h={dy:u,filter:n},p={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},f=Nc.runKernel(Oo,h,p);return l?Bf(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var dm=Hc({conv2dTranspose_:function(e,t,n,r,a,i){var o=Wc(e,"x","conv2dTranspose"),s=Wc(t,"filter","conv2dTranspose");return cm(n,o,s,r,a,"NHWC",i)}});var hm=Hc({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=Wc(e,"x","conv3d"),s=Wc(t,"filter","conv3d"),u=o,l=!1;4===o.rank&&(l=!0,u=Bf(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),oi(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),oi(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank ".concat(s.rank,".")})),oi(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match input depth for filter ").concat(s.shape[3],".")})),oi(Df(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(i,"'")})),oi("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var c={x:u,filter:s},d={strides:n,pad:r,dataFormat:a,dilations:i},h=Nc.runKernel(Po,c,d);return l?Bf(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var pm=Hc({conv3DBackpropInput_:function(e,t,n,r,a){oi(e.length===t.rank,(function(){return"Length of inShape (".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=Bf(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],l=o.shape[4];oi(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length ".concat(i.length,".")})),oi(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank ".concat(o.rank)})),oi(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank ".concat(n.rank)})),oi(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must match input depth for filter ").concat(n.shape[3],".")})),oi(l===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(l,") must match output depth for filter ").concat(n.shape[4],".")}));var c={dy:o,filter:n},d={pad:a,strides:r,inputShape:i},h=Nc.runKernel(Do,c,d);return s?Bf(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}});var fm=Hc({conv3dTranspose_:function(e,t,n,r,a){var i=Wc(e,"x","conv3dTranspose"),o=Wc(t,"filter","conv3dTranspose");return pm(n,i,o,r,a)}});var mm=Hc({cos_:function(e){var t={x:Wc(e,"x","cos","float32")};return Nc.runKernel(Lo,t)}});var gm=Hc({cosh_:function(e){var t={x:Wc(e,"x","cosh","float32")};return Nc.runKernel(zo,t)}});var vm=Hc({cumprod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:Wc(e,"x","cumprod")},i={axis:t,exclusive:n,reverse:r};return Nc.runKernel(Bo,a,i)}});var ym=Hc({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:Wc(e,"x","cumsum")},i={axis:t,exclusive:n,reverse:r};return Nc.runKernel(Wo,a,i)}});var bm=Hc({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Wc(e,"x","denseBincount"),i=Wc(t,"weights","denseBincount");oi("int32"===a.dtype,(function(){return"Error in denseBincount: input dtype must be int32, but got ".concat(a.dtype)})),oi(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got rank ".concat(a.rank,".")})),oi(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),oi(i.size===a.size||0===i.size,(function(){return"Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ".concat(a.shape,", weights shape: ").concat(i.shape,".")}));var o={x:a,weights:i},s={size:n,binaryOutput:r};return Nc.runKernel(Vo,o,s)}});var xm=Hc({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=Wc(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];oi(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),oi(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),oi(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),oi(o%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},u={blockSize:t,dataFormat:n};return Nc.runKernel(Ho,s,u)}});var Am=Hc({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=Wc(e,"x","depthwiseConv2d","float32"),u=Wc(t,"filter","depthwiseConv2d","float32"),l=s,c=!1;3===s.rank&&(c=!0,l=Bf(s,[1,s.shape[0],s.shape[1],s.shape[2]])),oi(4===l.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank ".concat(l.rank,".")})),oi(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank ".concat(u.rank,".")})),oi(l.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels (".concat(l.shape[3],") must match the inChannels dimension in filter ").concat(u.shape[2],".")})),zf("depthwiseConv2d",r,o);var d={x:l,filter:u},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},p=Nc.runKernel(Uo,d,h);return c?Bf(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var wm=Hc({diag_:function(e){var t={x:Wc(e,"x","diag")};return Nc.runKernel(qo,t)}});var km=Hc({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=Wc(e,"x","dilation2d"),s=Wc(t,"filter","dilation2d");oi(3===o.rank||4===o.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank ".concat(o.rank,".")})),oi(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank ".concat(s.rank,".")})),oi("NHWC"===i,(function(){return"Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ".concat(i)}));var u=o,l=!1;3===o.rank&&(u=Bf(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=!0);var c={x:u,filter:s},d={strides:n,pad:r,dilations:a},h=Nc.runKernel(Yo,c,d);return l?Bf(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var Sm=Hc({equal_:function(e,t){var n,r=Wc(e,"a","equal","string_or_numeric"),a=Wc(t,"b","equal","string_or_numeric");r=(n=u(yc(r,a),2))[0],a=n[1],sp(r.shape,a.shape);var i={a:r,b:a};return Nc.runKernel(ns,i)}});var Cm=Hc({where_:function(e,t,n){var r=Wc(t,"a","where"),a=Wc(n,"b","where"),i=Wc(e,"condition","where","bool"),o=sp(sp(i.shape,r.shape),a.shape),s={condition:tm(i,o),t:tm(r,o),e:tm(a,o)};return Nc.runKernel(Su,s)}});var Im=Hc({zerosLike_:function(e){var t={x:Wc(e,"x","zerosLike")};return Nc.runKernel(il,t)}});var Em=Hc({divNoNan_:function(e,t){var n=Wc(e,"a","div"),r=Wc(t,"b","div"),a=u(yc(n,r),2);n=a[0],r=a[1];var i=uf(n,r),o=Im(i),s=Sm(r,o);return Cm(s,o,i)}});var Tm=Hc({dot_:function(e,t){var n=Wc(e,"t1","dot"),r=Wc(t,"t2","dot");oi((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks ".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(oi(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got ".concat(a," and ").concat(i,".")})),1===n.rank&&1===r.rank){var o=Bf(n,[1,-1]),s=Bf(r,[-1,1]),u=_h(o,s);return Bf(u,[])}if(1===n.rank&&2===r.rank){var l=Bf(n,[1,-1]),c=Bf(r,[r.shape[0],r.shape[1]]),d=_h(l,c);return Bf(d,[d.size])}if(2===n.rank&&1===r.rank){var h=Bf(r,[-1,1]),p=_h(n,h);return Bf(p,[p.size])}var f=Bf(r,[r.shape[0],r.shape[1]]);return _h(n,f)}});var Nm=Hc({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map((function(e,t){return Wc(e,"tensors".concat(t),"einsum")})),i={equation:e};return Nc.runKernel(Qo,a,i)}});var _m=Hc({elu_:function(e){var t={x:Wc(e,"x","elu","float32")};return Nc.runKernel($o,t)}});var Mm=Hc({erf_:function(e){var t=Wc(e,"x","erf");oi("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=th(t,"float32"));var n={x:t};return Nc.runKernel(ts,n)}});function Rm(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Om(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}function Pm(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function Fm(e,t){return Om(e,t.map((function(e){return 1})),t)}function Dm(e,t,n){oi(Rm(t,n),(function(){return"".concat(e," supports only inner-most axes for now. Got axes ").concat(t," and rank-").concat(n," input.")}))}function Lm(e,t){if(Rm(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function zm(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function Bm(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var Wm=Hc({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Wc(e,"x","max")},a={reductionIndices:t,keepDims:n};return Nc.runKernel(Ds,r,a)}});var jm=Hc({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Wc(e,"x","min")},a={axis:t,keepDims:n};return Nc.runKernel(Us,r,a)}});var Vm=Hc({pow_:function(e,t){var n=Wc(e,"base","pow"),r=Wc(t,"exp","pow"),a=u(yc(n,r),2),i={a:n=a[0],b:r=a[1]};return Nc.runKernel(ou,i)}});function Hm(e,t){if((Ei(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Ei(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Gc(e,[],[],t)}var Um=Hc({sqrt_:function(e){var t={x:Wc(e,"x","sqrt","float32")};return Nc.runKernel(Ru,t)}});var Gm=Hc({square_:function(e){var t=Wc(e,"x","square");return Nc.runKernel("Square",{x:t},{})}});var Xm=Hc({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Wc(e,"x","sum");"bool"===r.dtype&&(r=th(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return Nc.runKernel(Ou,a,i)}});function qm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return cf(e);if(1!==e.rank&&null===n)return qm(Bf(e,[-1]),t,n);if(1===e.rank||"number"==typeof n||Array.isArray(n)&&1===n.length){if(1===t)return Xm(cf(e),n);if(t===1/0)return Wm(cf(e),n);if(t===-1/0)return jm(cf(e),n);if("euclidean"===t||2===t)return Um(Xm(Vm(cf(e),Hm(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return Wm(Xm(cf(e),n[0]),n[1]-1);if(t===1/0)return Wm(Xm(cf(e),n[1]),n[0]);if(t===-1/0)return jm(Xm(cf(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Um(Xm(Gm(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var Ym=Hc({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=qm(e=Wc(e,"x","norm"),t,n),i=a.shape;if(r){var o=xi(n,e.shape);i=Fm(a.shape,o)}return Bf(a,i)}});var Km=Hc({euclideanNorm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ym(e,"euclidean",t,n)}});var Zm=Hc({exp_:function(e){var t={x:Wc(e,"x","exp")};return Nc.runKernel(rs,t)}});var Jm=Hc({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Wc(e,"x","expandDims","string_or_numeric");oi(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return Nc.runKernel(as,r,a)}});var Qm=Hc({expm1_:function(e){var t={x:Wc(e,"x","expm1")};return Nc.runKernel(is,t)}});var $m=Hc({tile_:function(e,t){var n=Wc(e,"x","tile","string_or_numeric");oi(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," must match length of reps ").concat(t,".")}));var r={x:n},a={reps:t};return Nc.runKernel(Ju,r,a)}});var eg=Hc({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=eh([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=Bf(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return $m(Jm(s,0),[n[0],1,1]);if(2===n.length)return $m(Jm(Jm(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return $m(Jm(Jm(Jm(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received ".concat(n.length,"D."))}});function tg(e,t,n){var r={shape:e,value:t,dtype:n};return Nc.runKernel(ss,{},r)}var ng=Hc({floor_:function(e){var t={x:Wc(e,"x","floor","float32")};return Nc.runKernel(ls,t)}});var rg=Hc({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=Wc(e,"x","gather"),i=Wc(t,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return Nc.runKernel(hs,o,s)}});var ag=Hc({greater_:function(e,t){var n,r=Wc(e,"a","greater","string_or_numeric"),a=Wc(t,"b","greater","string_or_numeric");r=(n=u(yc(r,a),2))[0],a=n[1],sp(r.shape,a.shape);var i={a:r,b:a};return Nc.runKernel(fs,i)}});var ig=Hc({greaterEqual_:function(e,t){var n,r=Wc(e,"a","greaterEqual","string_or_numeric"),a=Wc(t,"b","greaterEqual","string_or_numeric");r=(n=u(yc(r,a),2))[0],a=n[1],sp(r.shape,a.shape);var i={a:r,b:a};return Nc.runKernel(ms,i)}});var og=Hc({isFinite_:function(e){var t={x:Wc(e,"x","isFinite")};return Nc.runKernel(bs,t)}});var sg=Hc({isInf_:function(e){var t={x:Wc(e,"x","isInf")};return Nc.runKernel(xs,t)}});var ug=Hc({isNaN_:function(e){var t={x:Wc(e,"x","isNaN")};return Nc.runKernel(As,t)}});var lg=Hc({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n={x:Wc(e,"x","leakyRelu")},r={alpha:t};return Nc.runKernel(ws,n,r)}});var cg=Hc({less_:function(e,t){var n,r=Wc(e,"a","less","string_or_numeric"),a=Wc(t,"b","less","string_or_numeric");r=(n=u(yc(r,a),2))[0],a=n[1],sp(r.shape,a.shape);var i={a:r,b:a};return Nc.runKernel(ks,i)}});var dg=Hc({lessEqual_:function(e,t){var n,r=Wc(e,"a","lessEqual","string_or_numeric"),a=Wc(t,"b","lessEqual","string_or_numeric");r=(n=u(yc(r,a),2))[0],a=n[1],sp(r.shape,a.shape);var i={a:r,b:a};return Nc.runKernel(Ss,i)}});function hg(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return Nc.runKernel(Cs,{},r)}var pg=Hc({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=Wc(e,"x","localResponseNormalization");oi(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")})),oi(pi(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ".concat(t,".")}));var o=i,s=!1;3===i.rank&&(s=!0,o=Bf(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var u={x:o},l={depthRadius:t,bias:n,alpha:r,beta:a},c=Nc.runKernel(Ps,u,l);return s?Bf(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var fg=Hc({log_:function(e){var t={x:Wc(e,"x","log","float32")};return Nc.runKernel(Is,t)}});var mg=Hc({log1p_:function(e){var t={x:Wc(e,"x","log1p")};return Nc.runKernel(Es,t)}});function gg(e){return oi(Pi(e),(function(){return"The f passed in grad(f) must be a function"})),function(t,n){var r=Wc(t,"x","tf.grad","string_or_numeric"),a=null!=n?Wc(n,"dy","tf.grad"):null;return Nc.tidy((function(){var t=Nc.gradients((function(){return e(r)}),[r],a),n=t.value,i=t.grads;return null!=a&&si(n.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),wg(i),i[0]}))}}function vg(e){return oi(Pi(e),(function(){return"The f passed in grads(f) must be a function"})),function(t,n){oi(Array.isArray(t),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var r=jc(t,"args","tf.grads","string_or_numeric"),a=null!=n?Wc(n,"dy","tf.grads"):null;return Nc.tidy((function(){var t=Nc.gradients((function(){return e.apply(void 0,ta(r))}),r,a),n=t.value,i=t.grads;return null!=a&&si(n.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),wg(i),i}))}}function yg(e){return oi(Pi(e),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(t,n){oi(t instanceof sc,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),oi(null==n||n instanceof sc,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=Nc.gradients((function(){return e(t)}),[t],n),a=r.grads,i=r.value;return wg(a),{grad:a[0],value:i}}}function bg(e){return oi(Pi(e),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(t,n){oi(Array.isArray(t)&&t.every((function(e){return e instanceof sc})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),oi(null==n||n instanceof sc,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var r=Nc.gradients((function(){return e.apply(void 0,ta(t))}),t,n);return null!=n&&si(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),wg(r.grads),r}}function xg(e,t){oi(Pi(e),(function(){return"The f passed in variableGrads(f) must be a function"})),oi(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof uc})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],Nc.registeredVariables)t.push(Nc.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,i=t.length;t=t.filter((function(e){return e.trainable})),oi(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the ".concat(i," variables is trainable.")}));var o=Nc.gradients(e,t,null,!0),s=o.value,u=o.grads;oi(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),oi(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-".concat(s.rank," tensor")}));var l={};return t.forEach((function(e,t){null!=u[t]&&(l[e.name]=u[t])})),null!=a&&a.forEach((function(e){return l[e.name]=null})),{value:s,grads:l}}function Ag(e){return Nc.customGrad(e)}function wg(e){if(e.filter((function(e){return null==e})).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}var kg=Hc({softplus_:function(e){var t={x:Wc(e,"x","softplus")};return Nc.runKernel(Mu,t)}});var Sg=Hc({logSigmoid_:function(e){var t=Wc(e,"x","logSigmoid");return Ag((function(e){return{value:ep(kg(ep(e))),gradFunc:function(t){return lf(t,Hf(ep(e)))}}}))(t)}});var Cg=Hc({sub_:function(e,t){var n=Wc(e,"a","sub"),r=Wc(t,"b","sub"),a=u(yc(n,r),2),i={a:n=a[0],b:r=a[1]};return Nc.runKernel(Yu,i)}});var Ig=Hc({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Wc(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(n.rank," and axis was ").concat(t));return Ag((function(e,n){var r=Wm(e,t,!0),a=Cg(e,r),i=Cg(th(a,"float32"),fg(Xm(Zm(a),t,!0)));return n([i]),{value:i,gradFunc:function(e,n){var r=u(n,1)[0],a=Zm(r);return Cg(e,lf(Xm(e,t,!0),a))}}}))(n)}});var Eg=Hc({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Wc(e,"x","logSumExp"),a=xi(t,r.shape),i=Wm(r,a,!0),o=Cg(r,i),s=Zm(o),u=Xm(s,a),l=fg(u),c=of(Bf(i,l.shape),l);if(n){var d=Fm(c.shape,a);return Bf(c,d)}return c}});var Tg=Hc({logicalAnd_:function(e,t){var n=Wc(e,"a","logicalAnd","bool"),r=Wc(t,"b","logicalAnd","bool");sp(n.shape,r.shape);var a={a:n,b:r};return Nc.runKernel(Ts,a)}});var Ng=Hc({logicalNot_:function(e){var t={x:Wc(e,"x","logicalNot","bool")};return Nc.runKernel(Ns,t)}});var _g=Hc({logicalOr_:function(e,t){var n=Wc(e,"a","logicalOr","bool"),r=Wc(t,"b","logicalOr","bool");sp(n.shape,r.shape);var a={a:n,b:r};return Nc.runKernel(_s,a)}});var Mg=Hc({logicalXor_:function(e,t){var n=Wc(e,"a","logicalXor","bool"),r=Wc(t,"b","logicalXor","bool");return sp(n.shape,r.shape),Tg(_g(e,t),Ng(Tg(e,t)))}}),Rg=2147483648;var Og=Hc({searchSorted_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",r=Wc(e,"sortedSequence","searchSorted"),a=Wc(t,"values","searchSorted"),i=r.shape[r.shape.length-1],o=a.shape[a.shape.length-1],s=Bf(r,[-1,i]),u=Bf(a,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(ci(u.shape)>=Rg)throw new Error("values tensor size must less than ".concat(Rg));if(s.shape[1]>=Rg)throw new Error("trailing dim_size must less than ".concat(Rg," for int32 output type, was ").concat(s.shape[1]));var l={sortedSequence:s,values:u},c={side:n};return Nc.runKernel(ku,l,c)}});function Pg(e,t){return Og(e,t,"left")}var Fg=Hc({maxPool_:function(e,t,n,r,a){var i=Wc(e,"x","maxPool"),o=i,s=!1;3===i.rank&&(s=!0,o=Bf(i,[1,i.shape[0],i.shape[1],i.shape[2]])),oi(4===o.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")})),oi(Df(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(1,"'")})),zf("maxPool",r,a);var u={x:o},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a},c=Nc.runKernel(zs,u,l);return s?Bf(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var Dg=Hc({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=Wc(e,"x","maxPool3d"),s=o,u=!1;4===o.rank&&(u=!0,s=Bf(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),oi(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),oi("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ".concat(i)})),zf("maxPool3d",r,a);var l={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=Nc.runKernel(Ws,l,c);return u?Bf(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var Lg=Hc({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i={x:Wc(e,"x","maxPoolWithArgmax")},o={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},s=Nc.runKernel(Vs,i,o);return{result:s[0],indexes:s[1]}}});var zg=Hc({maximum_:function(e,t){var n,r=Wc(e,"a","maximum"),a=Wc(t,"b","maximum");r=(n=u(yc(r,a),2))[0],a=n[1],"bool"===r.dtype&&(r=th(r,"int32"),a=th(a,"int32")),sp(r.shape,a.shape);var i={a:r,b:a};return Nc.runKernel(Ls,i)}});var Bg=Hc({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Wc(e,"x","mean")},a={axis:t,keepDims:n};return Nc.runKernel(Hs,r,a)}});function Wg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=Wg(e,"float32"),r=Wg(e,"float32");return Uc(n,r)}var a=Wi(ci(e),t);return Nc.makeTensor(a,e,t)}function jg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=jg(e,"float32"),r=Wg(e,"float32");return Uc(n,r)}var a=Bi(ci(e),t);return Nc.makeTensor(a,e,t)}function Vg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.indexing,a=void 0===r?"xy":r;if("xy"!==a&&"ij"!==a)throw new TypeError("".concat(a," is not a valid third argument to meshgrid"));if(void 0===e)return[];var i=Wc(e,"x","meshgrid",e instanceof sc?e.dtype:"float32");if(void 0===t)return[i];var o=Wc(t,"y","meshgrid",t instanceof sc?t.dtype:"float32"),s=ci(i.shape),u=ci(o.shape);return"xy"===a?(i=Bf(i,[1,-1]),o=Bf(o,[-1,1]),[_h(jg([u,1],i.dtype),i),_h(o,jg([1,s],o.dtype))]):(i=Bf(i,[-1,1]),o=Bf(o,[1,-1]),[_h(i,jg([1,u],i.dtype)),_h(jg([s,1],o.dtype),o)])}var Hg=Hc({minimum_:function(e,t){var n,r=Wc(e,"a","minimum"),a=Wc(t,"b","minimum");r=(n=u(yc(r,a),2))[0],a=n[1],"bool"===r.dtype&&(r=th(r,"int32"),a=th(a,"int32")),sp(r.shape,a.shape);var i={a:r,b:a};return Nc.runKernel(Gs,i)}});var Ug=Hc({mirrorPad_:function(e,t,n){oi("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. Got ".concat(n,".")}));var r=Wc(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");oi(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". Got ").concat(t.length,".")}));for(var a="reflect"===n?1:0,i=function(e){oi(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),oi(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal to ").concat(r.shape[e]-a," or less than 0 for input of shape ").concat(r.shape)}))},o=0;o<r.rank;o++)i(o);var s={paddings:t,mode:n},u={x:r};return Nc.runKernel(Xs,u,s)}});var Gg=Hc({mod_:function(e,t){var n=Wc(e,"a","mod"),r=Wc(t,"b","mod"),a=u(yc(n,r),2),i={a:n=a[0],b:r=a[1]};return Nc.runKernel(qs,i)}});var Xg=Hc({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=xi(t,(e=Wc(e,"x","moments")).shape),a=Bg(e,r,n),i=a.shape;n||(i=Fm(a.shape,r));var o=Gm(Cg(th(e,"float32"),Bf(a,i))),s=Bg(o,r,n);return{mean:a,variance:s}}});var qg=Hc({multiRNNCell_:function(e,t,n,r){for(var a=Wc(t,"data","multiRNNCell"),i=jc(n,"c","multiRNNCell"),o=jc(r,"h","multiRNNCell"),s=a,u=[],l=0;l<e.length;l++){var c=e[l](s,i[l],o[l]);u.push(c[0]),u.push(c[1]),s=c[1]}for(var d=[],h=[],p=0;p<u.length;p+=2)d.push(u[p]),h.push(u[p+1]);return[d,h]}});var Yg=Hc({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Wc(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got ".concat(i,"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(o));n=n||Math.random();var s={logits:1===o?Bf(a,[1,-1]):a},u={numSamples:t,seed:n,normalized:r},l=Nc.runKernel(Ys,s,u);return 1===o?Bf(l,[l.size]):l}});var Kg=Hc({notEqual_:function(e,t){var n,r=Wc(e,"a","notEqual","string_or_numeric"),a=Wc(t,"b","notEqual","string_or_numeric");r=(n=u(yc(r,a),2))[0],a=n[1],sp(r.shape,a.shape);var i={a:r,b:a};return Nc.runKernel(Js,i)}});var Zg=Hc({onesLike_:function(e){var t={x:Wc(e,"x","onesLike")};return Nc.runKernel(tu,t)}});var Jg=Hc({outerProduct_:function(e,t){var n=Wc(e,"v1","outerProduct"),r=Wc(t,"v2","outerProduct");oi(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks ".concat(n.rank," and ").concat(r.rank,".")}));var a=Bf(n,[-1,1]),i=Bf(r,[1,-1]);return _h(a,i)}});var Qg=Hc({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Wc(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},i={x:r};return Nc.runKernel(au,i,a)}});var $g=Hc({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return oi(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),Qg(e,[t],n)}});var ev=Hc({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return oi(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Qg(e,t,n)}});var tv=Hc({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return oi(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Qg(e,t,n)}});var nv=Hc({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return oi(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Qg(e,t,n)}});var rv=Hc({spaceToBatchND_:function(e,t,n){var r=Wc(e,"x","spaceToBatchND");oi(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),oi(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),oi(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},i={blockShape:t,paddings:n};return Nc.runKernel(Pu,a,i)}});var av=Hc({pool_:function(e,t,n,r,a,i,o){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var s=Wc(e,"x","maxPool"),l=s,c=!1;3===s.rank&&(c=!0,l=Bf(s,[1,s.shape[0],s.shape[1],s.shape[2]])),oi(Df(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(a,"'")}));var d,h=Sf(l.shape,t,i,a,r),p=[h.dilationHeight,h.dilationWidth];d="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([h.filterHeight,h.filterWidth],p):[[0,0],[0,0]];var f=1===p[0]&&1===p[1],m=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),l=t.map((function(e,t){return[0,o[t]]}));return[u,l]}([h.inHeight,h.inWidth],p,d),g=u(m,2),v=g[0],y=g[1],b=f?r:"valid",x=f?l:rv(l,p,v),A=("avg"===n?function(){return Wf(x,t,i,b,o)}:function(){return Fg(x,t,i,b,o)})(),w=f?A:qf(A,p,y);return c?Bf(w,[w.shape[1],w.shape[2],w.shape[3]]):w}});var iv=Hc({prelu_:function(e,t){var n={x:Wc(e,"x","prelu"),alpha:Wc(t,"alpha","prelu")};return Nc.runKernel(su,n)}});var ov=Hc({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Wc(e,"x","prod");"bool"===r.dtype&&(r=th(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return Nc.runKernel(uu,a,i)}});var sv=Hc({rand_:function(e,t,n){var r=ci(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return Nc.makeTensor(a,e,n)}}),uv=Ta(Wa()),lv=function(){function e(t,n,r,a,i){Jr(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=uv.alea(o.toString())}return $r(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,(!this.truncated||this.isValidTruncated(t))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),cv=function(){function e(t,n,r,a){Jr(this,e),this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=uv.alea(i.toString()),this.randn=new lv(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return $r(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),dv=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(Jr(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==i&&(i=Math.random()),"number"==typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=uv.alea(i)}return $r(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var hv=Hc({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new cv(t,n,r,a),o=eh(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var pv=Hc({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new lv(t,n,r,!1,a),o=eh(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var fv=Hc({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0,i=eh(e,r),o=new dv(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});function mv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return Nc.runKernel(lu,{},a)}var gv=Hc({reciprocal_:function(e){var t={x:Wc(e,"x","reciprocal")};return Nc.runKernel(du,t)}});var vv=Hc({relu_:function(e){var t={x:Wc(e,"x","relu")};return Nc.runKernel(hu,t)}});var yv=Hc({relu6_:function(e){var t={x:Wc(e,"x","relu6")};return Nc.runKernel(yu,t)}});var bv=Hc({reverse_:function(e,t){var n={x:Wc(e,"x","reverse")},r={dims:t};return Nc.runKernel(bu,n,r)}});var xv=Hc({reverse1d_:function(e){var t=Wc(e,"x","reverse");return oi(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),bv(t,0)}});var Av=Hc({reverse2d_:function(e,t){var n=Wc(e,"x","reverse");return oi(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),bv(n,t)}});var wv=Hc({reverse3d_:function(e,t){var n=Wc(e,"x","reverse");return oi(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),bv(n,t)}});var kv=Hc({reverse4d_:function(e,t){var n=Wc(e,"x","reverse");return oi(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),bv(n,t)}});var Sv=Hc({round_:function(e){var t={x:Wc(e,"x","round")};return Nc.runKernel(xu,t)}});var Cv=Hc({rsqrt_:function(e){var t={x:Wc(e,"x","rsqrt","float32")};return Nc.runKernel(Au,t)}});var Iv=Hc({selu_:function(e){var t={x:Wc(e,"x","selu")};return Nc.runKernel(Cu,t)}});var Ev=Hc({separableConv2d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=Wc(e,"x","separableConv2d"),u=Wc(t,"depthwiseFilter","separableConv2d"),l=Wc(n,"pointwiseFilter","separableConv2d"),c=s,d=!1;if(3===s.rank&&(d=!0,c=Bf(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");oi(4===c.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),oi(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank ".concat(u.rank,".")})),oi(4===l.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank ".concat(u.rank,".")})),oi(1===l.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ".concat(l.shape[0],".")})),oi(1===l.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ".concat(l.shape[1],".")}));var h=u.shape[2],p=u.shape[3];oi(l.shape[2]===h*p,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be ".concat(h*p,", but got ").concat(l.shape[2],".")}));var f=Am(c,u,r,a,o,i),m=um(f,l,1,"valid",o);return d?Bf(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});function Tv(){return Tv=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,u,l,c,d,h,p;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wc(t,"x","setdiff1d"),a=Wc(n,"y","setdiff1d"),oi(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),oi(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),oi(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=4,r.data();case 4:return i=e.sent,e.next=7,a.data();case 7:for(o=e.sent,s=new Set(o),u=0,l=0;l<i.length;l++)s.has(i[l])||u++;for(c=new ac([u],r.dtype),d=new ac([u],"int32"),h=0,p=0;h<i.length;h++)s.has(i[h])||(c.values[p]=i[h],d.values[p]=h,p++);return e.abrupt("return",[c.toTensor(),d.toTensor()]);case 14:case"end":return e.stop()}}),e)}))),Tv.apply(this,arguments)}var Nv=function(e,t){return Tv.apply(this,arguments)};var _v=Hc({sign_:function(e){var t={x:Wc(e,"x","sign")};return Nc.runKernel(Nu,t)}});var Mv=Hc({sin_:function(e){var t={x:Wc(e,"x","sin","float32")};return Nc.runKernel(Eu,t)}});var Rv=Hc({sinh_:function(e){var t={x:Wc(e,"x","sinh")};return Nc.runKernel(Tu,t)}});var Ov=Hc({slice1d_:function(e,t,n){var r=Wc(e,"x","slice1d");return oi(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),Uf(r,[t],[n])}});var Pv=Hc({slice2d_:function(e,t,n){var r=Wc(e,"x","slice2d");return oi(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),Uf(r,t,n)}});var Fv=Hc({slice3d_:function(e,t,n){var r=Wc(e,"x","slice3d");return oi(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),Uf(r,t,n)}});var Dv=Hc({slice4d_:function(e,t,n){var r=Wc(e,"x","slice4d");return oi(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),Uf(r,t,n)}});var Lv=Hc({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Wc(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return Nc.runKernel(Du,r,a)}});var zv=Hc({fft_:function(e){oi("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got ".concat(e.dtype,".")}));var t={input:e};return Nc.runKernel(os,t)}});var Bv=Hc({ifft_:function(e){oi("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got ".concat(e.dtype,".")}));var t={input:e};return Nc.runKernel(vs,t)}});var Wv=Hc({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=Bf(e,[r,n]);t=Bv(a)}else{var i=[r,2*(n-1)],o=Bf(tp(e),[r,n]),s=Bf($h(e),[r,n]),u=bv(Uf(o,[0,1],[r,n-2]),1),l=lf(bv(Uf(s,[0,1],[r,n-2]),1),Hm(-1)),c=Vf([o,u],1),d=Vf([s,l],1),h=Bf(Uc(c,d),[i[0],i[1]]);t=Bv(h)}if(t=tp(t),3===e.rank&&0!==e.shape[0]){var p=t,f=e.shape[0];t=Bf(t,[f,t.shape[0]/f,t.shape[1]]),p.dispose()}return t}});var jv=Hc({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={x:Wc(e,"x","split")},a={numOrSizeSplits:t,axis:n};return Nc.runKernel(Fu,r,a)}});var Vv=Hc({rfft_:function(e,t){oi("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=Uf(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=Vf([e,Wg(s)],e.shape.length-1),r=t}else n=e;var u=Im(n),l=Bf(Uc(n,u),[a,r]),c=zv(l),d=Math.floor(r/2)+1,h=tp(c),p=$h(c),f=jv(h,[d,r-d],h.shape.length-1),m=jv(p,[d,r-d],p.shape.length-1),g=n.shape.slice();return g[n.shape.length-1]=d,Bf(Uc(f[0],m[0]),g)}});var Hv=Hc({squaredDifference_:function(e,t){var n,r=Wc(e,"a","squaredDifference"),a=Wc(t,"b","squaredDifference");r=(n=u(yc(r,a),2))[0],a=n[1],sp(r.shape,a.shape);var i={a:r,b:a};return Nc.runKernel(Vu,i,{})}});var Uv=Hc({squeeze_:function(e,t){var n=Wc(e,"x","squeeze");return Bf(n,Ai(n.shape,t).newShape)}});var Gv=Hc({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=jc(e,"tensors","stack","string_or_numeric");oi(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&oi(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return Nc.runKernel(ru,r,a)}});var Xv=Hc({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:Wc(e,"x","step")},r={alpha:t};return Nc.runKernel(ol,n,r)}});var qv=Hc({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l={x:Wc(e,"x","stridedSlice","string_or_numeric")},c={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return Nc.runKernel(Uu,l,c)}});var Yv=Hc({tan_:function(e){var t={x:Wc(e,"x","tan","float32")};return Nc.runKernel(Ku,t)}});function Kv(e,t){ui(e);var n=Lc(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Gc(e,null,n,t)}function Zv(e,t,n){if(ui(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=Lc(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Gc(e,t,r,n)}function Jv(e,t,n){if(ui(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=Lc(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Gc(e,t,r,n)}function Qv(e,t,n){if(ui(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=Lc(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Gc(e,t,r,n)}function $v(e,t,n){if(ui(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=Lc(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Gc(e,t=t||r,r,n)}var ey=Hc({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Wc(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") but got ").concat(t));var i={x:r},o={k:t,sorted:n},s=Nc.runKernel(Qu,i,o),l=u(s,2),c=l[0],d=l[1];return{values:c,indices:d}}});var ty=Hc({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new lv(t,n,r,!0,a),o=eh(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var ny=Hc({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Wc(e,"x","unique","string_or_numeric");oi(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},i=Nc.runKernel(tl,r,a),o=u(i,2),s=o[0],l=o[1];return{values:s,indices:l}}});var ry=Hc({unsortedSegmentSum_:function(e,t,n){var r=Wc(e,"x","unsortedSegmentSum"),a=Wc(t,"segmentIds","unsortedSegmentSum","int32");oi(pi(n),(function(){return"numSegments must be of dtype int"}));var i={x:r,segmentIds:a},o={numSegments:n};return Nc.runKernel(rl,i,o)}});var ay=Hc({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Wc(e,"x","unstack","string_or_numeric");oi(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return Nc.runKernel(nl,r,a)}});function iy(e,t){return Og(e,t,"right")}function oy(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return Nc.makeVariable(e,t,n,r)}function sy(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=eh(e,"int32"),i=eh([n.length,e.length],"int32"),o=0;o<n.length;o++){var s=a.indexToLoc(n[o]),u=o*e.length;i.values.set(s,u)}return i.toTensor()}function uy(){return uy=Mr(Nr().mark((function e(t){var n,r,a;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Wc(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=sy(n.shape,r),e.abrupt("return",(t!==n&&n.dispose(),a));case 6:case"end":return e.stop()}}),e)}))),uy.apply(this,arguments)}var ly=function(e){return uy.apply(this,arguments)};function cy(){return cy=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h,p,f,m,g;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=Wc(t,"tensor","boolMask"),i=Wc(n,"mask","boolMask","bool"),o=null==r?0:r,s=i.rank,u=a.shape,oi(s>0,(function(){return"mask cannot be scalar"})),si(u.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,c=o;c<o+s;c++)l*=u[c];return d=u.slice(0,o).concat([l],u.slice(o+s)),h=Bf(a,d),p=Bf(i,[-1]),e.next=9,ly(p);case 9:return f=e.sent,m=Uv(f,[1]),g=rg(h,m,o),e.abrupt("return",(t!==a&&a.dispose(),n!==i&&i.dispose(),m.dispose(),h.dispose(),p.dispose(),f.dispose(),g));case 13:case"end":return e.stop()}}),e)}))),cy.apply(this,arguments)}var dy=function(e,t,n){return cy.apply(this,arguments)};var hy=Hc({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=Wc(e,"v","movingAverage"),o=Wc(t,"x","movingAverage"),s=Wc(n,"decay","movingAverage");bc(i,o),oi(hi(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var u=Hm(1),l=Cg(u,s),c=lf(Cg(o,i),l);if(a){oi(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var d=Wc(r,"step","movingAverage");c=uf(c,Cg(u,Vm(s,d)))}return of(i,c)}});var py=Hc({scatterND_:function(e,t,n){var r=Wc(e,"indices","scatterND","int32"),a=Wc(t,"updates","scatterND");wp(a,r,n);var i={indices:r,updates:a},o={shape:n};return Nc.runKernel(wu,i,o)}});function fy(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:, ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape ".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var my=Hc({sparseToDense_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=Wc(e,"sparseIndices","sparseToDense","int32"),i=Wc(t,"sparseValues","sparseToDense","string_or_numeric"),o=Wc(r,"defaultValue","sparseToDense",i.dtype);fy(a,i,n,o);var s={sparseIndices:a,sparseValues:i,defaultValue:o},u={outputShape:n};return Nc.runKernel(ju,s,u)}});var gy=Hc({gatherND_:function(e,t){var n=Wc(t,"indices","gatherND","int32"),r={params:Wc(e,"x","gatherND","string_or_numeric"),indices:n};return Nc.runKernel(ps,r)}});var vy=Hc({dropout_:function(e,t,n,r){var a=Wc(e,"x","dropout");if(oi("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a ".concat(a.dtype," tensor instead.")})),oi(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof sc?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(hi(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=uf(ng(of(fv(i,0,1,"float32",r),o)),o);return lf(a,s)}});function yy(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function by(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return Kv(a,"float32")}function xy(){return xy=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,u,l,c,d,h,p,f,m,g,v,y=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>2&&void 0!==y[2]?y[2]:1,a=Wc(t,"predictions","inTopK"),i=Wc(n,"targets","inTopK"),oi(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got ".concat(a.rank)})),oi(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank ".concat(a.rank," and targets rank ").concat(i.rank)})),si(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],oi(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension (".concat(o,"), but got ").concat(r)})),e.next=7,a.data();case 7:return s=e.sent,e.next=10,i.data();case 10:u=e.sent,l=s.length/o,c=o,d=wi("bool",l),h=0;case 15:if(!(h<l)){e.next=30;break}for(p=h*c,f=s.subarray(p,p+c),m=[],g=0;g<f.length;g++)m.push({value:f[g],index:g});m.sort((function(e,t){return t.value-e.value})),d[h]=0,v=0;case 20:if(!(v<r)){e.next=27;break}if(m[v].index!==u[h]){e.next=24;break}return d[h]=1,e.abrupt("break",27);case 24:v++,e.next=20;break;case 27:h++,e.next=15;break;case 30:return e.abrupt("return",(t!==a&&a.dispose(),n!==i&&i.dispose(),Xc(d,i.shape,"bool")));case 31:case"end":return e.stop()}}),e)}))),xy.apply(this,arguments)}var Ay=function(e,t){return xy.apply(this,arguments)},wy={};Ea(wy,{conv2d:function(){return Ty},depthwiseConv2d:function(){return My},matMul:function(){return Ry}});var ky=Hc({conv2DBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Bf(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=Bf(t,[1,t.shape[0],t.shape[1],t.shape[2]])),oi(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape ".concat(s.shape,".")})),oi(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape ".concat(u.shape,".")})),oi(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got ".concat(n,".")}));var l="NHWC"===i?s.shape[3]:s.shape[1],c="NHWC"===i?u.shape[3]:u.shape[1];oi(l===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(l,") must match input depth in filter (").concat(n[2],".")})),oi(c===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(c,") must match output depth for filter (").concat(n[3],").")})),zf("conv2dDerFilter",a,o);var d={x:s,dy:u},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return Nc.runKernel(Ro,d,h)}});function Sy(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return lf(e,Xv(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function Cy(e,t){var n=t,r=op(e.shape,t.shape);return r.length>0&&(n=Xm(n,r)),Bf(n,e.shape)}function Iy(e,t,n,r){if("linear"===t)return e;if("relu"===t)return vv(e);if("elu"===t)return _m(e);if("relu6"===t)return yv(e);if("prelu"===t)return iv(e,n);if("leakyrelu"===t)return lg(e,r);if("sigmoid"===t)return Hf(e);throw new Error("Unknown fused activation ".concat(t,"."))}var Ey=function(e,t){return!(e>0)||"linear"===t};var Ty=Hc({fusedConv2d_:function(e){var t,n=e.x,r=e.filter,a=e.strides,i=e.pad,o=e.dataFormat,s=void 0===o?"NHWC":o,l=e.dilations,c=void 0===l?[1,1]:l,d=e.dimRoundingMode,h=e.bias,p=e.activation,f=void 0===p?"linear":p,m=e.preluActivationWeights,g=e.leakyreluAlpha;if(f=f||"linear",!1===Ey(Nc.state.gradientDepth,f)){oi("NHWC"===s,(function(){return"Error in fused conv2d: got dataFormat of ".concat(s," but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.")}));var v=um(n,r,a,i,s,c,d);return null!=h&&(v=of(v,h)),Iy(v,f,m,g)}var y=Wc(n,"x","conv2d","float32"),b=Wc(r,"filter","conv2d","float32"),x=y,A=!1;3===y.rank&&(A=!0,x=Bf(y,[1,y.shape[0],y.shape[1],y.shape[2]])),oi(4===x.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank ".concat(x.rank,".")})),oi(4===b.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank ".concat(b.rank,".")})),zf("fused conv2d",i,d);var w="NHWC"===s?x.shape[3]:x.shape[1];oi(b.shape[2]===w,(function(){return"Error in conv2d: depth of input (".concat(w,") must match input depth for filter ").concat(b.shape[2],".")})),oi(Df(a,c),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides ".concat(a," and dilations '").concat(c,"'")}));var k,S,C=If(x.shape,b.shape,a,c,i,d);if(null!=h&&(t=u(yc(k=Wc(h,"bias","fused conv2d"),y),1),k=t[0],"NHWC"===s?sp(C.outShape,k.shape):(oi(k.shape.length<=1,(function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-".concat(k.shape.length,".")})),oi(0===k.shape.length||k.shape[0]===C.outChannels||1===k.shape[0],(function(){return"Error in fused conv2d: bias shape (".concat(k.shape,") is not compatible with the number of output channels (").concat(C.outChannels,")")})))),null!=m){if(oi((v=m.shape).length<=1||3===v.length,(function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-".concat(v.length,".")})),1===v.length)oi(1===v[0]||v[0]===C.outChannels,(function(){return"Error in fused conv2d: PReLU activation weights (".concat(v,") is not compatible with the number of output channels (").concat(C.outChannels,").")}));else if(3===v.length)try{sp(v,C.outShape)}catch(_){var I="Error in fused conv2d: PReLU activation weights (".concat(v,") is not compatible with the output shape of the conv2d (").concat(C.outShape,").");throw Error(I)}S=Wc(m,"prelu weights","fused conv2d")}var E=function(e,t){oi("NHWC"===s,(function(){return"Error in gradient of fused conv2D: got dataFormat of ".concat(s," but only NHWC is currently supported.")}));var n=u(t,4),r=n[0],o=n[1],l=n[2],d=n[3],h=Sy(e,l,f);oi(Ff(c),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(c,"'")}));var p=[cm(o.shape,h,r,a,i),ky(o,h,r.shape,a,i)];if(null!=d){var m=Cy(d,h);p.push(m)}return p},T={x:x,filter:b,bias:k,preluActivationWeights:S},N={strides:a,pad:i,dataFormat:s,dilations:c,dimRoundingMode:d,activation:f,leakyreluAlpha:g};return null==h?Ag((function(e,t,n){var r=Nc.runKernel(cl,T,N);return n([t,e,r]),A&&(r=Bf(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:E}}))(x,b):Ag((function(e,t,n,r){var a=Nc.runKernel(cl,T,N);return r([t,e,a,n]),A&&(a=Bf(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:E}}))(x,b,k)}});var Ny=Hc({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Bf(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=Bf(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l={x:s,dy:u},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return Nc.runKernel(Go,l,c)}});var _y=Hc({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=Bf(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l={dy:s,filter:n},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},d=Nc.runKernel(Xo,l,c);return u?Bf(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var My=Hc({fusedDepthwiseConv2d_:function(e){var t,n=e.x,r=e.filter,a=e.strides,i=e.pad,o=e.dataFormat,s=void 0===o?"NHWC":o,l=e.dilations,c=void 0===l?[1,1]:l,d=e.dimRoundingMode,h=e.bias,p=e.activation,f=void 0===p?"linear":p,m=e.preluActivationWeights,g=e.leakyreluAlpha;if(!1===Ey(Nc.state.gradientDepth,f)){var v=Am(n,r,a,i,s,c,d);return null!=h&&(v=of(v,h)),Iy(v,f,m,g)}var y=Wc(n,"x","depthwiseConv2d","float32"),b=Wc(r,"filter","depthwiseConv2d","float32"),x=y,A=!1;3===y.rank&&(A=!0,x=Bf(y,[1,y.shape[0],y.shape[1],y.shape[2]])),oi(4===x.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank ".concat(x.rank,".")})),oi(4===b.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank ".concat(b.rank,".")})),oi(x.shape[3]===b.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels (".concat(x.shape[3],") must match the inChannels dimension in filter ").concat(b.shape[2],".")})),null==c&&(c=[1,1]),oi(Df(a,c),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(a," and dilations '").concat(c,"'")})),zf("fused depthwiseConv2d",i,d);var w,k,S=If(x.shape,b.shape,a,c,i,d,!0);null!=h&&(t=u(yc(w=Wc(h,"bias","fused conv2d"),y),1),w=t[0],sp(S.outShape,w.shape)),null!=m&&(k=Wc(m,"prelu weights","fused depthwiseConv2d"));var C=function(e,t){oi(Ff(c),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '".concat(c,"'")}));var n=u(t,4),r=n[0],o=n[1],s=n[2],l=n[3],h=Sy(e,s,f),p=_y(o.shape,h,r,a,i,c,d),m=Ny(o,h,r.shape,a,i,c,d);return null!=l?[p,m,Cy(w,h)]:[p,m]},I={x:x,filter:b,bias:w,preluActivationWeights:k},E={strides:a,pad:i,dataFormat:s,dilations:c,dimRoundingMode:d,activation:f,leakyreluAlpha:g};return null==h?Ag((function(e,t,n){var r=Nc.runKernel(dl,I,E);return n([t,e,r]),A&&(r=Bf(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:C}}))(x,b):Ag((function(e,t,n,r){var a=Nc.runKernel(dl,I,E);return r([t,e,a,n]),A&&(a=Bf(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:C}}))(x,b,w)}});var Ry=Hc({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,s=e.bias,l=e.activation,c=void 0===l?"linear":l,d=e.preluActivationWeights,h=e.leakyreluAlpha,p=void 0===h?.2:h;if(!1===Ey(Nc.state.gradientDepth,c)){var f=_h(t,n,a,o);return null!=s&&(f=of(f,s)),Iy(f,c,d,p)}var m=Wc(t,"a","fused matMul"),g=Wc(n,"b","fused matMul"),v=u(yc(m,g),2);m=v[0],g=v[1];var y=a?m.shape[m.rank-2]:m.shape[m.rank-1],b=o?g.shape[g.rank-1]:g.shape[g.rank-2],x=a?m.shape[m.rank-1]:m.shape[m.rank-2],A=o?g.shape[g.rank-2]:g.shape[g.rank-1],w=m.shape.slice(0,-2),k=g.shape.slice(0,-2),S=ci(w),C=ci(k);oi(y===b,(function(){return"Error in fused matMul: inner shapes (".concat(y,") and (").concat(b,") of Tensors with shapes ").concat(m.shape," and ").concat(g.shape," and transposeA=").concat(a," and transposeB=").concat(o," must match.")}));var I,E,T=sp(m.shape.slice(0,-2),g.shape.slice(0,-2)).concat([x,A]),N=Bf(m,a?[S,y,x]:[S,x,y]),_=Bf(g,o?[C,A,b]:[C,b,A]);null!=s&&(I=u(yc(I=Wc(s,"bias","fused matMul"),m),1)[0],sp(T,I.shape)),null!=d&&(E=Wc(d,"prelu weights","fused matMul"));var M=function(e,t){var n,r,i=u(t,4),l=i[0],d=i[1],h=i[2],p=i[3],f=Sy(Bf(e,h.shape),h,c);return a||o?!a&&o?(n=_h(f,d,!1,!1),r=_h(f,l,!0,!1)):a&&!o?(n=_h(d,f,!1,!0),r=_h(l,f,!1,!1)):(n=_h(d,f,!0,!0),r=_h(f,l,!0,!0)):(n=_h(f,d,!1,!0),r=_h(l,f,!0,!1)),null!=s?[n,r,Cy(p,f)]:[n,r]},R={a:N,b:_,bias:I,preluActivationWeights:E},O={transposeA:a,transposeB:o,activation:c,leakyreluAlpha:p};return null==s?Ag((function(e,t,n){var r=Nc.runKernel(ll,R,O);return n([e,t,r]),{value:Bf(r,T),gradFunc:M}}))(N,_):Ag((function(e,t,n,r){var a=Nc.runKernel(ll,R,O);return r([e,t,a,n]),{value:Bf(a,T),gradFunc:M}}))(N,_,I)}});var Oy=Hc({hammingWindow_:function(e){return by(e,.54,.46)}});var Py=Hc({hannWindow_:function(e){return by(e,.5,.5)}});var Fy=Hc({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(Uf(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=Vf([Uf(e,i,t-s),tg([s],a)]);o.push(u),i+=n}return 0===o.length?Zv([],[0,t]):Bf(Vf(o),[o.length,t])}});var Dy=Hc({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Py;null==r&&(r=yy(t));var i=Fy(e,t,n),o=lf(i,a(t));return Vv(o,r)}});var Ly=Hc({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Wc(e,"image","cropAndResize"),s=Wc(t,"boxes","cropAndResize","float32"),u=Wc(n,"boxInd","cropAndResize","int32"),l=s.shape[0];oi(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank ".concat(o.rank,".")})),oi(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(l,",4] but had shape ").concat(s.shape,".")})),oi(1===u.rank&&u.shape[0]===l,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(l,"] but had shape ").concat(s.shape,".")})),oi(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length ".concat(r.length,".")})),oi(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),oi("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var c={image:o,boxes:s,boxInd:u},d={method:a,extrapolationValue:i,cropSize:r};return Nc.runKernel(jo,c,d)}});var zy=Hc({flipLeftRight_:function(e){var t=Wc(e,"image","flipLeftRight","float32");oi(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,but got rank ".concat(t.rank,".")}));var n={image:t};return Nc.runKernel(us,n,{})}});var By=Hc({grayscaleToRGB_:function(e){var t=Wc(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];oi(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, but got rank ".concat(t.rank,".")})),oi(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,$m(t,a)}});var Wy=Hc({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=Wc(e,"image","rotateWithOffset","float32");oi(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r};return Nc.runKernel(ul,i,o)}});function jy(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),oi(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),oi(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),oi(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),oi(1===t.rank,(function(){return"scores must be a 1D tensor"})),oi(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", but was ").concat(t.shape[0])})),oi(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var Vy=Hc({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=Wc(e,"boxes","nonMaxSuppression","float32"),o=Wc(t,"scores","nonMaxSuppression","float32"),s=jy(i,o,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return Nc.runKernel(Qs,{boxes:i,scores:o},u)}});function Hy(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,a=e.length,i=0,o=!1;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||Uy)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function Uy(e,t){return e>t?1:e<t?-1:0}function Gy(e,t,n,r,a){return Yy(e,t,n,r,a,0)}function Xy(e,t,n,r,a,i){return Yy(e,t,n,r,a,0,!1,i,!0)}function qy(e,t,n,r,a,i){return Yy(e,t,n,r,a,i,!0)}function Yy(e,t,n,r,a,i){for(var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],l=[],c=0;c<t.length;c++)t[c]>a&&l.push({score:t[c],boxIndex:c,suppressBeginIndex:0});l.sort(Jy);for(var d=i>0?-.5/i:0,h=[],p=[];h.length<n&&l.length>0;){var f=l.pop(),m=f.score,g=f.boxIndex,v=f.suppressBeginIndex;if(m<a)break;for(var y=!1,b=h.length-1;b>=v;--b){var x=Ky(e,g,h[b]);if(x>=r){y=!0;break}if(f.score=f.score*Zy(r,d,x),f.score<=a)break}f.suppressBeginIndex=h.length,y||(f.score===m?(h.push(g),p.push(f.score)):f.score>a&&Hy(l,f,Jy))}var A=h.length,w=n-A;s&&w>0&&(h.push.apply(h,ta(new Array(w).fill(0))),p.push.apply(p,ta(new Array(w).fill(0))));var k={selectedIndices:h};return o&&(k.selectedScores=p),u&&(k.validOutputs=A),k}function Ky(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),h=Math.max(a[1],a[3]),p=(s-i)*(u-o),f=(d-l)*(h-c);if(p<=0||f<=0)return 0;var m=Math.max(i,l),g=Math.max(o,c),v=Math.min(s,d),y=Math.min(u,h),b=Math.max(v-m,0)*Math.max(y-g,0);return b/(p+f-b)}function Zy(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function Jy(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function Qy(){return Qy=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h,p,f=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>3&&void 0!==f[3]?f[3]:.5,i=f.length>4&&void 0!==f[4]?f[4]:Number.NEGATIVE_INFINITY,o=Wc(t,"boxes","nonMaxSuppressionAsync"),s=Wc(n,"scores","nonMaxSuppressionAsync"),u=jy(o,s,r,a,i),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,e.next=6,Promise.all([o.data(),s.data()]);case 6:return l=e.sent,c=l[0],d=l[1],h=Gy(c,d,r,a,i),p=h.selectedIndices,e.abrupt("return",(o!==t&&o.dispose(),s!==n&&s.dispose(),Kv(p,"int32")));case 12:case"end":return e.stop()}}),e)}))),Qy.apply(this,arguments)}var $y=function(e,t,n){return Qy.apply(this,arguments)};var eb=Hc({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Wc(e,"boxes","nonMaxSuppression"),s=Wc(t,"scores","nonMaxSuppression"),u=jy(o,s,n,r,a,i),l={boxes:o,scores:s},c={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},d=Nc.runKernel(eu,l,c);return{selectedIndices:d[0],selectedScores:d[1]}}});function tb(){return tb=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h,p,f,m,g=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g.length>3&&void 0!==g[3]?g[3]:.5,i=g.length>4&&void 0!==g[4]?g[4]:Number.NEGATIVE_INFINITY,o=g.length>5&&void 0!==g[5]?g[5]:0,s=Wc(t,"boxes","nonMaxSuppressionAsync"),u=Wc(n,"scores","nonMaxSuppressionAsync"),l=jy(s,u,r,a,i,o),r=l.maxOutputSize,a=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma,e.next=7,Promise.all([s.data(),u.data()]);case 7:return c=e.sent,d=c[0],h=c[1],p=qy(d,h,r,a,i,o),f=p.selectedIndices,m=p.selectedScores,e.abrupt("return",(s!==t&&s.dispose(),u!==n&&u.dispose(),{selectedIndices:Kv(f,"int32"),selectedScores:Kv(m)}));case 14:case"end":return e.stop()}}),e)}))),tb.apply(this,arguments)}var nb=function(e,t,n){return tb.apply(this,arguments)};var rb=Hc({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Wc(e,"boxes","nonMaxSuppression"),s=Wc(t,"scores","nonMaxSuppression"),u=jy(o,s,n,r,a,null),l=u.maxOutputSize,c=u.iouThreshold,d=u.scoreThreshold,h={boxes:o,scores:s},p={maxOutputSize:l,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:i},f=Nc.runKernel($s,h,p);return{selectedIndices:f[0],validOutputs:f[1]}}});function ab(){return ab=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,l,c,d,h,p,f,m,g,v,y,b,x,A=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=A.length>3&&void 0!==A[3]?A[3]:.5,i=A.length>4&&void 0!==A[4]?A[4]:Number.NEGATIVE_INFINITY,o=A.length>5&&void 0!==A[5]&&A[5],s=Wc(t,"boxes","nonMaxSuppressionAsync"),l=Wc(n,"scores","nonMaxSuppressionAsync"),c=jy(s,l,r,a,i,null),d=c.maxOutputSize,h=c.iouThreshold,p=c.scoreThreshold,e.next=11,Promise.all([s.data(),l.data()]);case 11:return f=e.sent,m=u(f,2),g=m[0],v=m[1],y=Xy(g,v,d,h,p,o),b=y.selectedIndices,x=y.validOutputs,e.abrupt("return",(s!==t&&s.dispose(),l!==n&&l.dispose(),{selectedIndices:Kv(b,"int32"),validOutputs:Hm(x,"int32")}));case 19:case"end":return e.stop()}}),e)}))),ab.apply(this,arguments)}var ib=function(e,t,n){return ab.apply(this,arguments)};var ob=Hc({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Wc(e,"images","resizeBilinear");oi(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank ".concat(a.rank,".")})),oi(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape ".concat(t,".")})),oi(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=Bf(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Yr(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},l=Nc.runKernel(gu,s,u);return o?Bf(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var sb=Hc({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Wc(e,"images","resizeNearestNeighbor");oi(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ".concat(a.rank,".")})),oi(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape ".concat(t,".")})),oi("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),oi(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=Bf(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Yr(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},l=Nc.runKernel(fu,s,u);return o?Bf(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});function ub(e,t){for(var n,r,a,i,o,s,u=Kv([-1]),l=Kv([0]),c=Kv([0]),d=0;d<e.size-1;d++){n=Uf(e,0,d+1),r=Uf(e,d+1),o=uf(Xm(n),t),s=uf(Xm(r),t);var h=Xm(lf(n,mv(0,n.size)));a=uf(h,Xm(n));var p=tg(r.shape,n.size),f=of(mv(0,r.size),p),m=lf(r,f);i=uf(Xm(m),Xm(r));var g=Cg(a,i),v=Cg(a,i),y=lf(o,s);c=lf(lf(y,g),v);var b=ag(c,l);l=Cm(b,c,l),u=Cm(b,Kv([d]),u)}return u}var lb=Hc({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,l=Wc(e,"image","threshold"),c=.2989,d=.587,h=.114,p=l.shape[0]*l.shape[1],f=lf(Kv([s]),255);if(oi(3===l.rank,(function(){return"Error in threshold: image must be rank 3,but got rank ".concat(l.rank,".")})),oi(3===l.shape[2]||1===l.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1but got ".concat(l.shape[2],".")})),oi("int32"===l.dtype||"float32"===l.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,but got dtype ".concat(l.dtype,".")})),oi("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===l.shape[2]){var m=jv(l,[1,1,1],-1),g=u(m,3);t=g[0],n=g[1],r=g[2];var v=lf(t,c),y=lf(n,d),b=lf(r,h);a=of(of(v,y),b)}else a=e;if("otsu"===i){var x=$f(th(Sv(a),"int32"),Xc([]),256);f=ub(x,p)}var A=o?dg(a,f):ag(a,f);return th(lf(A,255),"int32")}});var cb=Hc({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=Wc(e,"image","transform","float32"),s=Wc(t,"transforms","transform","float32");oi(4===o.rank,(function(){return"Error in transform: image must be rank 4,but got rank ".concat(o.rank,".")})),oi(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),oi(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, but got ".concat(i,".")}));var u={image:o,transforms:s},l={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return Nc.runKernel($u,u,l)}});var db=Hc({bandPart_:function(e,t,n){oi(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),oi(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=Wc(e,"a","bandPart");oi(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=u(r.shape.slice(-2),2),o=i[0],s=i[1];if(!(t<=o))throw new Error("bandPart(): numLower (".concat(t,") must not be greater than the number of rows (").concat(o,")."));if(!(n<=s))throw new Error("bandPart(): numUpper (".concat(n,") must not be greater than the number of columns (").concat(s,")."));t<0&&(t=o),n<0&&(n=s);var l=Bf(mv(0,o,1,"int32"),[-1,1]),c=mv(0,s,1,"int32"),d=Cg(l,c),h=Tg(dg(d,Hm(+t,"int32")),ig(d,Hm(-n,"int32"))),p=Wg([o,s],r.dtype);return Bf(Gv(ay(Bf(r,[-1,o,s])).map((function(e){return Cm(h,e,p)}))),a)}});var hb=Hc({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,oi(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){oi(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: (".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=jv(e,e.shape[0],0).map((function(e){return Uv(e,[0])}))),oi(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds number of dimensions (").concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(Nc.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=lf(Xm(lf(n[a],t)),n[a]);t=Cg(t,i)}return uf(t,Ym(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?Gv(n,0):n}});function pb(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Nc.tidy((function(){oi(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=eg(n),i=nh(e),o=Zv([[1]],[1,1]),s=nh(o),l=n>=r?r:n,c=function(e){var t,l,c=i,d=s,h=a;t=Nc.tidy((function(){var t=Uf(i,[e,e],[n-e,1]),u=Ym(t),l=Uf(i,[e,e],[1,1]),c=Cm(ag(l,0),Zv([[-1]]),Zv([[1]])),d=Cg(l,lf(c,u)),h=uf(t,d);s=1===h.shape[0]?nh(o):Vf([o,Uf(h,[1,0],[h.shape[0]-1,h.shape[1]])],0);var p=ep(uf(_h(c,d),u)),f=Uf(i,[e,0],[n-e,r]),m=lf(p,s),g=np(s);if(0===e)i=Cg(f,_h(m,_h(g,f)));else{var v=Cg(f,_h(m,_h(g,f)));i=Vf([Uf(i,[0,0],[e,r]),v],0)}var y=np(m),b=Uf(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=Cg(b,_h(_h(b,s),y));else{var x=Cg(b,_h(_h(b,s),y));a=Vf([Uf(a,[0,0],[n,e]),x],1)}return[s,i,a]})),l=u(t,3),s=l[0],i=l[1],a=l[2],jh([c,d,h])},d=0;d<l;++d)c(d);return!t&&n>r&&(a=Uf(a,[0,0],[n,r]),i=Uf(i,[0,0],[r,r])),[a,i]}))}var fb=Hc({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(oi(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return pb(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=ay(Bf(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach((function(e){var n=u(pb(e,t),2),r=n[0],o=n[1];a.push(r),i.push(o)}));var o=Bf(Gv(a,0),e.shape),s=Bf(Gv(i,0),e.shape);return[o,s]}}),mb=function(e){return e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",e}(mb||{});var gb=Hc({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=Wc(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=Wc(t,"weights","computeWeightedLoss"));var i=null==a?r:lf(r,a);if(0===n)return i;if(2===n)return Xm(i);if(1===n){if(null==a)return Bg(i);var o=r.size/a.size,s=uf(Xm(i),Xm(a));return o>1?uf(s,Hm(o)):s}if(3===n){if(null==a)return uf(Xm(i),Hm(r.size));var u=lf(a,jg(r.shape)),l=th(Xm(Kg(u,Hm(0))),"float32");return uf(Xm(i),l)}throw Error("Unknown reduction: ".concat(n))}});var vb=Hc({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=Wc(e,"labels","absoluteDifference"),i=Wc(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=Wc(n,"weights","absoluteDifference")),si(a.shape,i.shape,"Error in absoluteDifference: ");var s=cf(Cg(a,i));return gb(s,o,r)}});var yb=Hc({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,i=Wc(e,"labels","cosineDistance"),o=Wc(t,"predictions","cosineDistance"),s=null;null!=r&&(s=Wc(r,"weights","cosineDistance")),si(i.shape,o.shape,"Error in cosineDistance: ");var u=Hm(1),l=Cg(u,Xm(lf(i,o),n,!0));return gb(l,s,a)}});var bb=Hc({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=Wc(e,"labels","hingeLoss"),i=Wc(t,"predictions","hingeLoss"),o=null;null!=n&&(o=Wc(n,"weights","hingeLoss")),si(a.shape,i.shape,"Error in hingeLoss: ");var s=Hm(1);a=Cg(lf(Hm(2),a),s);var u=vv(Cg(s,lf(a,i)));return gb(u,o,r)}});var xb=Hc({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,i=Wc(e,"labels","huberLoss"),o=Wc(t,"predictions","huberLoss"),s=null;null!=n&&(s=Wc(n,"weights","huberLoss")),si(i.shape,o.shape,"Error in huberLoss: ");var u=Hm(r),l=cf(Cg(o,i)),c=Hg(l,u),d=Cg(l,c),h=of(lf(Hm(.5),Gm(c)),lf(u,d));return gb(h,s,a)}});var Ab=Hc({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,i=Wc(e,"labels","logLoss"),o=Wc(t,"predictions","logLoss"),s=null;null!=n&&(s=Wc(n,"weights","logLoss")),si(i.shape,o.shape,"Error in logLoss: ");var u=Hm(1),l=Hm(r),c=ep(lf(i,fg(of(o,l)))),d=lf(Cg(u,i),fg(of(Cg(u,o),l))),h=Cg(c,d);return gb(h,s,a)}});var wb=Hc({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=Wc(e,"labels","meanSquaredError"),i=Wc(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=Wc(n,"weights","meanSquaredError")),si(a.shape,i.shape,"Error in meanSquaredError: ");var s=Hv(a,i);return gb(s,o,r)}});function kb(e,t){var n=Wc(e,"labels","sigmoidCrossEntropyWithLogits"),r=Wc(t,"logits","sigmoidCrossEntropyWithLogits");si(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=vv(r),i=lf(r,n),o=mg(Zm(ep(cf(r))));return of(Cg(a,i),o)}var Sb=Hc({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,i=Wc(e,"multiClassLabels","sigmoidCrossEntropy"),o=Wc(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=Wc(n,"weights","sigmoidCrossEntropy")),si(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Hm(r),l=Hm(1),c=Hm(.5);i=of(lf(i,Cg(l,u)),lf(c,u))}var d=kb(i,o);return gb(d,s,a)}});function Cb(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ".concat(t.rank," and dim was ").concat(n));return Ag((function(e,t,r){var a=Eg(t,[n],!0),i=Cg(th(t,"float32"),a);r([e,i]);var o=ep(lf(i,e));return{value:Xm(o,[n]),gradFunc:function(e,t){var r=u(t,2),a=r[0],i=r[1],o=Fm(e.shape,[n]);return[lf(Bf(e,o),Cg(th(a,"float32"),Zm(i))),lf(Bf(e,o),Cg(Zm(i),th(a,"float32")))]}}}))(e,t)}var Ib=Hc({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,i=Wc(e,"onehotLabels","softmaxCrossEntropy"),o=Wc(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=Wc(n,"weights","softmaxCrossEntropy")),si(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Hm(r),l=Hm(1),c=Hm(i.shape[1]);i=of(lf(i,Cg(l,u)),uf(u,c))}var d=Cb(i,o);return gb(d,s,a)}});var Eb=Hc({sparseFillEmptyRows_:function(e,t,n,r){var a=Wc(e,"indices","sparseFillEmptyRows","int32"),i=Wc(t,"values","sparseFillEmptyRows"),o=Wc(n,"denseShape","sparseFillEmptyRows","int32"),s=Wc(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:i,denseShape:o,defaultValue:s},l=Nc.runKernel(Lu,u);return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}});var Tb=Hc({sparseReshape_:function(e,t,n){var r=Wc(e,"inputIndices","sparseReshape","int32"),a=Wc(t,"inputShape","sparseReshape","int32"),i=Wc(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},s=Nc.runKernel(zu,o);return{outputIndices:s[0],outputShape:s[1]}}});var Nb=Hc({sparseSegmentMean_:function(e,t,n){var r=Wc(e,"data","sparseSegmentMean"),a=Wc(t,"indices","sparseSegmentMean","int32"),i=Wc(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return Nc.runKernel(Bu,o)}});var _b=Hc({sparseSegmentSum_:function(e,t,n){var r=Wc(e,"data","sparseSegmentSum"),a=Wc(t,"indices","sparseSegmentSum","int32"),i=Wc(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return Nc.runKernel(Wu,o)}});var Mb=Hc({stringNGrams_:function(e,t,n,r,a,i,o,s){var u=Wc(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var l=Wc(t,"dataSplits","stringNGrams");if("int32"!==l.dtype)throw new Error("Data splits must be of datatype int32");var c={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},d={data:u,dataSplits:l},h=Nc.runKernel(Gu,d,c);return{nGrams:h[0],nGramsSplits:h[1]}}});var Rb=Hc({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Wc(e,"input","stringSplit","string"),a=Wc(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},s=Nc.runKernel(Xu,o,i);return{indices:s[0],values:s[1],shape:s[2]}}});var Ob=Hc({stringToHashBucketFast_:function(e,t){var n=Wc(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return Nc.runKernel(qu,a,r)}}),Pb={fft:zv,ifft:Bv,rfft:Vv,irfft:Wv},Fb={hammingWindow:Oy,hannWindow:Py,frame:Fy,stft:Dy},Db={flipLeftRight:zy,grayscaleToRGB:By,resizeNearestNeighbor:sb,resizeBilinear:ob,rotateWithOffset:Wy,cropAndResize:Ly,nonMaxSuppression:Vy,nonMaxSuppressionAsync:$y,nonMaxSuppressionWithScore:eb,nonMaxSuppressionWithScoreAsync:nb,nonMaxSuppressionPadded:rb,nonMaxSuppressionPaddedAsync:ib,threshold:lb,transform:cb},Lb={bandPart:db,gramSchmidt:hb,qr:fb},zb={absoluteDifference:vb,computeWeightedLoss:gb,cosineDistance:yb,hingeLoss:bb,huberLoss:xb,logLoss:Ab,meanSquaredError:wb,sigmoidCrossEntropy:Sb,softmaxCrossEntropy:Ib},Bb={sparseFillEmptyRows:Eb,sparseReshape:Tb,sparseSegmentMean:Nb,sparseSegmentSum:_b},Wb={stringNGrams:Mb,stringSplit:Rb,stringToHashBucketFast:Ob},jb=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return jh(i),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return xg(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&jh(this.iterations_)}},{key:"saveIterations",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:Hm(this.iterations_,"int32")}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class ".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Hp);Object.defineProperty(jb,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var Vb=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Jr(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==i&&(a.epsilon=Nc.backend.epsilon()),a}return $r(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Nc.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:Wh((function(){return Im(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:Wh((function(){return Im(a).variable(false)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;Wh((function(){var e=of(lf(o,t.rho),lf(Gm(i),1-t.rho)),n=lf(uf(Um(of(s,t.epsilon)),Um(of(o,t.epsilon))),i),r=of(lf(s,t.rho),lf(Gm(n),1-t.rho));o.assign(e),s.assign(r);var u=of(lf(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(jh(this.accumulatedGrads.map((function(e){return e.variable}))),jh(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=Mr(Nr().mark((function e(){var t;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(ta(this.accumulatedGrads),ta(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Mr(Nr().mark((function e(t){var n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(jb);Vb.className="Adadelta",Gp(Vb);var Hb=function(e){Kr(n,e);var t=Zr(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return Jr(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return $r(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Nc.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:Wh((function(){return tg(a.shape,t.initialAccumulatorValue).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;Wh((function(){var e=of(o,Gm(i));o.assign(e);var n=of(lf(uf(i,Um(of(e,Nc.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&jh(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(jb);Hb.className="Adagrad",Gp(Hb);var Ub=function(e){Kr(n,e);var t=Zr(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Jr(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],Wh((function(){i.accBeta1=Hm(r).variable(),i.accBeta2=Hm(a).variable()})),null==o&&(i.epsilon=Nc.backend.epsilon()),i}return $r(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Wh((function(){var r=Cg(1,t.accBeta1),a=Cg(1,t.accBeta2);n.forEach((function(n,i){var o=Nc.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:Wh((function(){return Im(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:Wh((function(){return Im(o).variable(false)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,l=t.accumulatedSecondMoment[i].variable,c=of(lf(u,t.beta1),lf(s,1-t.beta1)),d=of(lf(l,t.beta2),lf(Gm(s),1-t.beta2)),h=uf(c,r),p=uf(d,a);u.assign(c),l.assign(d);var f=of(lf(uf(h,of(Um(p),t.epsilon)),-t.learningRate),o);o.assign(f)}})),t.accBeta1.assign(lf(t.accBeta1,t.beta1)),t.accBeta2.assign(lf(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&jh(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&jh(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Mr(Nr().mark((function e(){var t;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(ta(this.accumulatedFirstMoment),ta(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Mr(Nr().mark((function e(t){var n,r=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,Wh((function(){r.accBeta1.assign(Vm(r.beta1,r.iterations_+1)),r.accBeta2.assign(Vm(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(jb);Ub.className="Adam",Gp(Ub);var Gb=function(e){Kr(n,e);var t=Zr(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return Jr(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.decay=s,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],Wh((function(){i.iteration=Hm(0).variable(),i.accBeta1=Hm(r).variable()})),null==o&&(i.epsilon=Nc.backend.epsilon()),i}return $r(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Wh((function(){var r=Cg(1,t.accBeta1),a=uf(-t.learningRate,of(lf(t.iteration,t.decay),1));n.forEach((function(n,i){var o=Nc.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:Im(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:Im(o).variable(false)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,l=t.accumulatedWeightedInfNorm[i].variable,c=of(lf(u,t.beta1),lf(s,1-t.beta1)),d=lf(l,t.beta2),h=cf(s),p=zg(d,h);u.assign(c),l.assign(p);var f=of(lf(uf(a,r),uf(c,of(p,t.epsilon))),o);o.assign(f)}})),t.iteration.assign(of(t.iteration,1)),t.accBeta1.assign(lf(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&jh(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&jh(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(jb);Gb.className="Adamax",Gp(Gb);var Xb=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return $r(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=Nc.registeredVariables[n];Wh((function(){var e=of(lf(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Vh(Hm(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(jb);Xb.className="SGD",Gp(Xb);var qb=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Jr(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=Hm(a.momentum),a}return $r(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Nc.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:Wh((function(){return Im(a).variable(!1)}))});var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&Wh((function(){var e,n=of(lf(t.m,i),o);e=t.useNesterov?of(lf(t.c,of(o,lf(n,t.m))),a):of(lf(t.c,n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&jh(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(Xb);qb.className="Momentum",Gp(qb);var Yb=function(e){Kr(n,e);var t=Zr(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Jr(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=i,r.epsilon=o,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=s,null==o&&(r.epsilon=Nc.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return Xr(r)}return $r(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Nc.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:Wh((function(){return Im(a).variable(i)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:Wh((function(){return Im(a).variable(i)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:Wh((function(){return Im(a).variable(i)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var s=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;Wh((function(){var e=of(lf(s,t.decay),lf(Gm(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,i=of(lf(n,t.decay),lf(o,1-t.decay)),l=uf(lf(o,t.learningRate),Um(Cg(e,of(Gm(i),t.epsilon)))),c=of(lf(u,t.momentum),l);s.assign(e),n.assign(i),u.assign(c);var d=Cg(a,c);a.assign(d)}else{var h=of(lf(s,t.decay),lf(Gm(o),1-t.decay)),p=of(lf(u,t.momentum),uf(lf(o,t.learningRate),Um(of(h,t.epsilon))));s.assign(h),u.assign(p);var f=Cg(a,p);a.assign(f)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&jh(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&jh(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&jh(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=Mr(Nr().mark((function e(){var t;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(ta(this.accumulatedMeanSquares),ta(this.accumulatedMoments)),this.centered&&t.push.apply(t,ta(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=Mr(Nr().mark((function e(t){var n,r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(jb);Yb.className="RMSProp",Gp(Yb);var Kb=function(){function e(){Jr(this,e)}return $r(e,null,[{key:"sgd",value:function(e){return new Xb(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new qb(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Yb(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Ub(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Vb(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new Gb(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new Hb(e,t)}}]),e}(),Zb={sgd:Kb.sgd,momentum:Kb.momentum,adadelta:Kb.adadelta,adagrad:Kb.adagrad,rmsprop:Kb.rmsprop,adamax:Kb.adamax,adam:Kb.adam},Jb="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:function(e){return e()};function Qb(){return new Promise((function(e){return Jb((function(){return e()}))}))}var $b={};function ex(e,t){var n=e[0].length;e.forEach((function(e,t){oi(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same as the rank of the rest (").concat(n,")")}))})),oi(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)oi(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") does not match the shape of the rest (").concat(r,") along the non-concatenated axis ").concat(a,".")}))}))}function tx(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}Ea($b,{ERF_A1:function(){return px},ERF_A2:function(){return fx},ERF_A3:function(){return mx},ERF_A4:function(){return gx},ERF_A5:function(){return vx},ERF_P:function(){return hx},PARALLELIZE_THRESHOLD:function(){return nx},SELU_SCALE:function(){return dx},SELU_SCALEALPHA:function(){return cx},applyActivation:function(){return Iy},assertAndGetBroadcastShape:function(){return sp},assertAxesAreInnerMostDims:function(){return Dm},assertParamsConsistent:function(){return ex},assignToTypedArray:function(){return kx},axesAreInnerMostDims:function(){return Rm},calculateShapes:function(){return kp},checkEinsumDimSizes:function(){return _x},checkPadOnDimRoundingMode:function(){return zf},combineLocations:function(){return Om},complexWithEvenIndex:function(){return xx},complexWithOddIndex:function(){return Ax},computeConv2DInfo:function(){return If},computeConv3DInfo:function(){return Ef},computeDefaultPad:function(){return Tf},computeDilation2DInfo:function(){return kf},computeOptimalWindowSize:function(){return rx},computeOutAndReduceShapes:function(){return Pm},computeOutShape:function(){return tx},computePool2DInfo:function(){return Sf},computePool3DInfo:function(){return Cf},convertConv2DDataFormat:function(){return Lf},decodeEinsumEquation:function(){return Tx},eitherStridesOrDilationsAreOne:function(){return Df},expandShapeToKeepDim:function(){return Fm},exponent:function(){return Cx},exponents:function(){return Sx},fromStringArrayToUint8:function(){return Qx},fromUint8ToStringArray:function(){return Jx},getAxesPermutation:function(){return Lm},getBroadcastDims:function(){return ip},getComplexWithIndex:function(){return wx},getEinsumComputePath:function(){return Mx},getEinsumPermutation:function(){return Nx},getFusedBiasGradient:function(){return Cy},getFusedDyActivation:function(){return Sy},getImageCenter:function(){return ax},getInnerMostAxes:function(){return Bm},getPermuted:function(){return ox},getReductionAxes:function(){return op},getReshaped:function(){return ix},getReshapedPermuted:function(){return sx},getSliceBeginCoords:function(){return ux},getSliceSize:function(){return lx},getSparseFillEmptyRowsIndicesDenseShapeMismatch:function(){return Fx},getSparseFillEmptyRowsNegativeIndexErrorMessage:function(){return Dx},getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:function(){return Lx},getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:function(){return Wx},getSparseReshapeInputOutputMismatchErrorMessage:function(){return Vx},getSparseReshapeInputOutputMultipleErrorMessage:function(){return jx},getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:function(){return zx},getSparseReshapeNegativeOutputDimErrorMessage:function(){return Bx},getSparseSegmentReductionIndicesOutOfRangeErrorMessage:function(){return Xx},getSparseSegmentReductionNegativeSegmentIdsErrorMessage:function(){return Hx},getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:function(){return Ux},getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:function(){return Gx},getUndoAxesPermutation:function(){return zm},isIdentityPermutation:function(){return Rx},log:function(){return pl},mergeRealAndImagArrays:function(){return yx},prepareAndValidate:function(){return bp},prepareSplitSize:function(){return Px},segment_util:function(){return qx},shouldFuse:function(){return Ey},slice_util:function(){return Sp},splitRealAndImagArrays:function(){return bx},tupleValuesAreOne:function(){return Ff},upcastType:function(){return gc},validateInput:function(){return wp},validateUpdateShape:function(){return Ap},warn:function(){return hl}});var nx=30;function rx(e){return e<=nx?e:Fi(e,Math.floor(Math.sqrt(e)))}function ax(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function ix(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function ox(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2===1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function sx(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function ux(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function lx(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var cx=1.7580993408473768,dx=1.0507009873554805,hx=.3275911,px=.254829592,fx=-.284496736,mx=1.421413741,gx=-1.453152027,vx=1.061405429;function yx(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function bx(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function xx(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function Ax(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function wx(e,t){return{real:e[2*t],imag:e[2*t+1]}}function kx(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function Sx(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function Cx(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var Ix="->",Ex=/->/g;function Tx(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(Ex,"").length)/Ix.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(Ix,'").'));var r=u(e.split(Ix),2),a=r[0],i=r[1];oi(-1===a.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var o=a.split(","),s=o.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var l=[],c=function(e){var t=i[e];if(!o.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," not present in the input subscripts."));-1===l.indexOf(t)&&l.push(t)},d=0;d<i.length;++d)c(d);for(var h=0;h<a.length;++h){var p=a[h];-1===l.indexOf(p)&&","!==p&&l.push(p)}for(var f=new Array(o.length),m=0;m<s;++m){if(new Set(o[m].split("")).size!==o[m].length)throw new Error("Found duplicate axes in input component ".concat(o[m],". Support for duplicate axes in input is not implemented yet."));f[m]=[];for(var g=0;g<o[m].length;++g)f[m].push(l.indexOf(o[m][g]))}for(var v=l.length,y=[],b=i.length;b<v;++b)y.push(b);return{allDims:l,summedDims:y,idDims:f}}function Nx(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],i=0;i<e;++i)-1===n[i]&&a.push(i);return n=n.filter((function(e){return-1!==e})),{permutationIndices:n,expandDims:a}}function _x(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,i=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:oi(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," of input shaped ").concat(JSON.stringify(a),", but got dimension ").concat(a[n])}))},o=0;o<t[e].length;++o)i(o)},i=0;i<n.length;++i)a(i)}function Mx(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var i=0;i<n;++i)a.push([]);for(var o=[],s=0;s<r.length;++s){var u,l=ea(Ox(t,r[s]));try{for(l.s();!(u=l.n()).done;){var c=u.value;-1===o.indexOf(c)&&(a[s].push(c),o.push(c))}}catch(d){l.e(d)}finally{l.f()}}return{path:r,steps:a}}function Rx(e){return e.every((function(e,t){return e===t}))}function Ox(e,t){for(var n=[],r=0;r<e.length;++r)(0===e[r].length||-1!==e[r].indexOf(t)||-1===t)&&n.push(r);return n}function Px(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"==typeof t)oi(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);oi(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}oi(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function Fx(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function Dx(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function Lx(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function zx(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function Bx(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function Wx(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function jx(e,t){var n=ci(e),r=ci(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function Vx(e,t){var n=ci(e),r=ci(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function Hx(){return"segment ids must be >= 0"}function Ux(){return"segment ids are not increasing"}function Gx(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function Xx(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}var qx={};function Yx(e,t){var n,r=!1;for(e<=nx?(n=e,r=!0):n=Fi(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Fi(e,n+1);return n}function Kx(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}function Zx(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],l=1,c=1,d=1,h=0;h<r;++h)u.push(e.shape[h]),l*=e.shape[h];for(var p=r;p<n;p++)u.push(e.shape[p]),c*=e.shape[p];for(var f=r;f<a;f++)u.push(t.shape[f]);for(var m=n+1;m<i;m++)u.push(e.shape[m]),d*=e.shape[m];return{batchSize:l,sliceSize:d,outerSize:c,dimSize:s,outputShape:u}}function Jx(e){try{return e.map((function(e){return Yl(e)}))}catch(qe){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(qe))}}function Qx(e){return e.map((function(e){return ql(e)}))}Ea(qx,{collectGatherOpShapeInfo:function(){return Zx},computeOutShape:function(){return Kx},segOpComputeOptimalWindowSize:function(){return Yx}});var $x={};Ea($x,{nonMaxSuppressionV3Impl:function(){return Gy},nonMaxSuppressionV4Impl:function(){return Xy},nonMaxSuppressionV5Impl:function(){return qy},whereImpl:function(){return sy}});var eA=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),r=t.call(this,e),Object.setPrototypeOf(jr(r),n.prototype),r}return $r(n)}(Gr(Error)),tA=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),r=t.call(this,e),Object.setPrototypeOf(jr(r),n.prototype),r}return $r(n)}(Gr(Error)),nA=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),r=t.call(this,e),Object.setPrototypeOf(jr(r),n.prototype),r}return $r(n)}(Gr(Error)),rA=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),r=t.call(this,e),Object.setPrototypeOf(jr(r),n.prototype),r}return $r(n)}(Gr(Error)),aA=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),r=t.call(this,e),Object.setPrototypeOf(jr(r),n.prototype),r}return $r(n)}(Gr(Error)),iA=function(){function e(t){Jr(this,e),this.maxEntries=t||100,this.cache=new Map}return $r(e,[{key:"get",value:function(e){var t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}},{key:"put",value:function(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}},{key:"getMaxEntries",value:function(){return this.maxEntries}},{key:"setMaxEntries",value:function(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(var t=0;t<this.maxEntries-e;t++){var n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=e}}]),e}();function oA(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function sA(e,t){if(!e)throw new aA(t)}function uA(e,t){var n,r=0,a=ea(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(i){a.e(i)}finally{a.f()}return r}function lA(e){return 1===e.length?e[0]:e}function cA(e){return Array.isArray(e)?e:[e]}function dA(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function hA(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var pA={};function fA(e){if(null==e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function mA(e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))e.forEach((function(e){return mA(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"==typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!=typeof a.value?mA(a):e[r]=a.value)}}function gA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"==typeof e){var i,o=e;if(o in n)i=n[o];else if(o in pA)i=pA[o];else if(null==(i=t[o]))throw new nA("Unknown ".concat(r,": ").concat(e,". This may be due to one of the following reasons:\n1. The ").concat(r," is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ").concat(r," is defined in JavaScript, but is not registered properly with tf.serialization.registerClass()."));return i}var s,l,c,d=e;if(null==d.className||null==d.config)throw new nA("".concat(r,": Improper config format: ").concat(JSON.stringify(d),".\n'className' and 'config' must set."));var h,p,f=d.className;if(f in n?(h=(s=u(n[f],2))[0],p=s[1]):f in pA?(h=(l=u(pA.className,2))[0],p=l[1]):f in t&&(h=(c=u(t[f],2))[0],p=c[1]),null==h)throw new nA("Unknown ".concat(r,": ").concat(f,". This may be due to one of the following reasons:\n1. The ").concat(r," is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ").concat(r," is defined in JavaScript, but is not registered properly with tf.serialization.registerClass()."));if(null!=p){for(var m={},g=0,v=Object.keys(pA);g<v.length;g++){var y=v[g];m[y]=pA[y]}for(var b=0,x=Object.keys(n);b<x.length;b++){var A=x[b];m[A]=n[A]}var w=d.config;w.customObjects=m;for(var k=Wr({},pA),S=0,C=Object.keys(n);S<C.length;S++){var I=C[S];pA[I]=n[I]}mA(d.config);var E=p(h,d.config,n,a);return pA=Wr({},k),E}for(var T=Wr({},pA),N=0,_=Object.keys(n);N<_.length;N++){var M=_[N];pA[M]=n[M]}var R=new h(d.config);return pA=Wr({},T),R}function vA(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function yA(e){if(null==e)return e;var t,n=[],r=ea(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(i){r.e(i)}finally{r.f()}return n}function bA(e){if(null==e)throw new nA("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function xA(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new nA("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function AA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return sA(n>=0),sA(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function wA(e,t){Array.isArray(e)?(Cl.assert(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return wA(e,"element ".concat(n+1," of ").concat(t))}))):Cl.assert(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ").concat(kA(e),".")}))}function kA(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return kA(e)})).join(",")+"]":"string"==typeof e?'"'.concat(e,'"'):"".concat(e)}function SA(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}var CA=0;function IA(){return CA++}var EA={};function TA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in EA||(EA[e]=0),EA[e]+=1,e+EA[e].toString()}var NA=["channelsFirst","channelsLast"],_A=["nearest","bilinear"],MA=["valid","same","causal"],RA=["max","avg"],OA=["sum","mul","concat","ave"],PA=new Map;function FA(e){xA(NA,"DataFormat",e)}function DA(e){xA(MA,"PaddingMode",e)}function LA(e){xA(RA,"PoolMode",e)}var zA=[];function BA(e,t){zA.push(e);try{var n=t();return zA.pop(),n}catch(n){throw zA.pop(),n}}function WA(e){if(!UA(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===zA.length?"":zA.join("/")+"/")+e}function jA(e){if(!UA(e))throw new Error("Not a valid tensor name: '"+e+"'");PA.has(e)||PA.set(e,0);var t=PA.get(e);if(PA.set(e,PA.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return PA.set(n,1),n}return e}var VA,HA=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function UA(e){return!!e.match(HA)}function GA(e){return e===parseInt(e.toString(),10)}function XA(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function qA(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function YA(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function KA(e,t){if(t<e)throw new nA("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function ZA(){return null==VA&&(VA=Jh().epsilon()),VA}function JA(e,t){return th(e,t)}function QA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),Bf(e,n)}function $A(e){var t=[XA(e.shape)];return Bf(e,t)}function ew(e,t,n){return Wh((function(){switch(e.rank){case 1:return Ov(e,t,n);case 2:return Pv(e,[t,0],[n,e.shape[1]]);case 3:return Fv(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return Dv(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Uf(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Uf(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new nA("sliceAlongFirstAxis() received an unsupported tensor rank: ".concat(e.rank))}}))}function tw(e,t,n){return Wh((function(){switch(e.rank){case 1:return Ov(e,t,n);case 2:return Pv(e,[0,t],[e.shape[0],n]);case 3:return Fv(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return Dv(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new nA("sliceAlongLastAxis() received an unsupported tensor rank: ".concat(e.rank))}}))}function nw(e,t,n,r){return Wh((function(){switch(e.rank){case 1:return Ov(e,t,n);case 2:switch(r){case 1:return ew(e,t,n);case 2:return tw(e,t,n);default:throw new nA("The axis is not within the rank of the tensor ".concat(r))}case 3:switch(r){case 1:return ew(e,t,n);case 2:return Fv(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return tw(e,t,n);default:throw new nA("The axis is not within the rank of the tensor ".concat(r))}case 4:switch(r){case 1:return ew(e,t,n);case 2:return Dv(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return Dv(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return tw(e,t,n);default:throw new nA("The axis is not within the rank of the tensor ".concat(r))}default:throw new nA("sliceAlongLastAxis() received an unsupported tensor rank: ".concat(e.rank))}}))}function rw(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),Vf(e,n)}function aw(e,t){switch(e.rank){case 1:return am([e,t]);case 2:return im([e,t],0);case 3:return om([e,t],0);case 4:return sm([e,t],0);default:throw new nA("concatAlongFirstAxis() received an unsupported tensor rank: ".concat(e.rank))}}function iw(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new nA("The length of input n (".concat(t.length,") does not match the number of dimensions in input x (").concat(e.rank,")"));return $m(e,t)}function ow(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return pv(e,t,n,r,a)}function sw(e,t,n,r){if(e.rank<2||t.rank<2)throw new rA("dot requires both inputs to be rank >= 2 but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new rA("If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ".concat(e.shape," and  y shape = ").concat(t.shape));if(2===e.rank&&2===t.rank)return wy.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?cw(e.rank,r,"channelsLast"):null,activation:n});var a=e.shape.slice(),i=a.pop();e=Bf(e,[-1,i]);var o=t.shape.slice(),s=o.pop(),u=o.pop(),l=[].concat(ta(o),[s]),c=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=Bf(np(t,c),[u,-1]);var d=[].concat(ta(a),ta(l));return Bf(wy.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?cw(e.rank,r,"channelsLast"):null,activation:n}),d)}function uw(e,t,n){return Wh((function(){return t=Array.isArray(t)?Kv(t,"int32"):th(t,"int32"),rg(e,t,n)}))}function lw(e){return lf(e,e)}function cw(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new nA("Unexpected bias dimensions: ".concat(t.rank,"; expected it to be 1 or ").concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?Bf(t,[1,r[0],1,1,1]):Bf(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?Bf(t,[1,1,1,1,r[0]]):Bf(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?Bf(t,[1,r[0],1,1]):Bf(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?Bf(t,[1,1,1,r[0]]):Bf(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?Bf(t,[1,r[0],1]):Bf(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?Bf(t,[1,1,r[0]]):Bf(t,[1].concat(r))}else if(e<3)return t;throw new nA("Unsupported input rank by biasAdd: ".concat(t.rank))}function dw(e,t,n){return Wh((function(){return null==n&&(n="channelsLast"),FA(n),of(e,cw(e.rank,t,n))}))}function hw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new rA("Support for alpha values other than 1 (".concat(t,") is not implemented yet."));return _m(e)}function pw(e,t,n,r){return Wh((function(){return vy(e,t,n,r)}))}function fw(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e():t()}var mw=["fanIn","fanOut","fanAvg"],gw=["normal","uniform","truncatedNormal"];var vw=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(Vp.Serializable),yw=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"apply",value:function(e,t){return Wg(e,t)}}]),n}(vw);yw.className="Zeros",Vp.registerClass(yw);var bw=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"apply",value:function(e,t){return jg(e,t)}}]),n}(vw);bw.className="Ones",Vp.registerClass(bw);var xw=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),r=t.call(this),"object"!=typeof e)throw new nA("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new nA("config must have value set but got ".concat(e));return r.value=e.value,Xr(r)}return $r(n,[{key:"apply",value:function(e,t){var n=this;return Wh((function(){return lf(Hm(n.value),jg(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(vw);xw.className="Constant",Vp.registerClass(xw);var Aw=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return $r(n,[{key:"apply",value:function(e,t){return fv(e,this.minval,this.maxval,t)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(vw);Aw.className="RandomUniform",Vp.registerClass(Aw);var ww=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return $r(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new rA("randomNormal does not support dType ".concat(t,"."));return ow(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(vw);ww.className="RandomNormal",Vp.registerClass(ww);var kw=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return $r(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new rA("truncatedNormal does not support dType ".concat(t,"."));return ty(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(vw);kw.className="TruncatedNormal",Vp.registerClass(kw);var Sw=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return $r(n,[{key:"apply",value:function(e,t){var n=this;return Wh((function(){if(2!==e.length||e[0]!==e[1])throw new nA("Identity matrix initializer can only be used for 2D square matrices.");return lf(n.gain,eg(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(vw);Sw.className="Identity",Vp.registerClass(Sw);var Cw=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),r=t.call(this),e.scale<0)throw new nA("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,function(e){xA(mw,"FanMode",e)}(r.mode),r.distribution=null==e.distribution?"normal":e.distribution,function(e){xA(gw,"Distribution",e)}(r.distribution),r.seed=e.seed,Xr(r)}return $r(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(FA(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=XA(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var i=XA(e,0,e.length-2);t=e[e.length-2]*i,n=e[e.length-1]*i}}else{var o=XA(e);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}(e),r=n[0],a=n[1],i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new rA("".concat(this.getClassName()," does not support dType ").concat(t,"."));return ty(e,0,o,t,this.seed)}var s=Math.sqrt(3*i);return fv(e,-s,s,t)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(vw);Cw.className="VarianceScaling",Vp.registerClass(Cw);var Iw=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return $r(n,[{key:"getClassName",value:function(){return Cw.className}}]),n}(Cw);Iw.className="GlorotUniform",Vp.registerClass(Iw);var Ew=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return $r(n,[{key:"getClassName",value:function(){return Cw.className}}]),n}(Cw);Ew.className="GlorotNormal",Vp.registerClass(Ew);var Tw=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return $r(n,[{key:"getClassName",value:function(){return Cw.className}}]),n}(Cw);Tw.className="HeNormal",Vp.registerClass(Tw);var Nw=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return $r(n,[{key:"getClassName",value:function(){return Cw.className}}]),n}(Cw);Nw.className="HeUniform",Vp.registerClass(Nw);var _w=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return $r(n,[{key:"getClassName",value:function(){return Cw.className}}]),n}(Cw);_w.className="LeCunNormal",Vp.registerClass(_w);var Mw=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return $r(n,[{key:"getClassName",value:function(){return Cw.className}}]),n}(Cw);Mw.className="LeCunNormal",Vp.registerClass(Mw);var Rw=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,null!=r.seed)throw new rA("Random seed is not implemented for Orthogonal Initializer yet.");return Xr(r)}return $r(n,[{key:"apply",value:function(e,t){var n=this;return Wh((function(){if(e.length<2)throw new rA("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more than 2000 (".concat(e[0]*e[1],") elements: Slowness may result."));var t=ow(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=Lb.gramSchmidt(t);return e[0]>e[1]&&(r=np(r)),lf(n.gain,r)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(vw);Rw.className="Orthogonal",Vp.registerClass(Rw);var Ow={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Pw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return gA(e,Vp.SerializationMap.getMap().classNameMap,t,"initializer")}function Fw(e){return fA(e)}function Dw(e){if("string"==typeof e){var t=e in Ow?Ow[e]:e;if("GlorotNormal"===t)return new Ew;if("GlorotUniform"===t)return new Iw;if("HeNormal"===t)return new Tw;if("HeUniform"===t)return new Nw;if("LeCunNormal"===t)return new _w;if("LeCunUniform"===t)return new Mw;var n={};return n.className=t,n.config={},Pw(n)}return e instanceof vw?e:Pw(e)}function Lw(e){return Array.isArray(e)&&Array.isArray(e[0])}function zw(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function Bw(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new nA("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function Ww(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new nA("Expected exactly 1 Shape; got ".concat(e.length))}return e}function jw(e){var t,n=0,r=ea(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(i){r.e(i)}finally{r.f()}return n}var Vw="Variable",Hw=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Vw,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Jr(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=IA(),r=null==r?Vw:r,this.originalName=WA(r),this.name=jA(this.originalName),this.trainable_=a,this.constraint=i,this.val=oy(t,this.trainable_,this.name,this.dtype)}return $r(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function Uw(e){return e.map((function(e){return e.read()}))}function Gw(e){e.forEach((function(e){e[0].write(e[1])}))}var Xw=$r((function e(t){Jr(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),qw=$r((function e(t,n,r,a,i,o,s){Jr(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=s,this.id=IA(),null!=o&&(this.originalName=WA(o),this.name=jA(this.originalName)),this.rank=n.length})),Yw=0,Kw=function(){function e(t,n){Jr(this,e),this.callArgs=n,this.id=Yw++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=ea(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&i.outboundNodes.push(this)}}catch(o){a.e(o)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return $r(e,[{key:"getConfig",value:function(){var e,t=[],n=ea(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(a){n.e(a)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),Zw=0,Jw=function(e){Kr(n,e);var t=Zr(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Jr(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=Zw++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var i=e.getClassName();a=dA(i)+"_"+TA(i)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var o;if(null!=r.batchInputShape)o=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),o=[s].concat(r.inputShape)}e.batchInputShape=o;var u=r.dtype;null==u&&(u=r.inputDType),null==u&&(u="float32"),e.dtype=u}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return $r(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new tA("The layer has never been called and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new nA("Asked to get ".concat(t," at node ").concat(e,", but the layer has only ").concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return lA(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return lA(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new eA("Layer ".concat(this.name,' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.'));if(0===this.inboundNodes.length)throw new eA("Layer ".concat(this.name," is not connected, no input to return."));return lA(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new eA("Layer ".concat(this.name," has no inbound nodes."));if(this.inboundNodes.length>1)throw new eA("Layer ".concat(this.name,' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.'));return lA(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=cA(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=cA(this.inputSpec);if(e.length!==t.length)throw new nA("Layer ".concat(this.name," expects ").concat(t.length," inputs, but it received ").concat(e.length," input tensors. Input received: ").concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new nA("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected ndim=").concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new nA("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected max_ndim=").concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new nA("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected min_ndim=").concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new nA("Input ".concat(n," is incompatible with layer ").concat(this.name," : expected dtype=").concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var o=r.shape;for(var s in a.axes){var u=Number(s),l=a.axes[s],c=u>=0?o[u]:o[o.length+u];if(null!=l&&-1===[l,null].indexOf(c))throw new nA("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected axis ").concat(u," of input shape to have value ").concat(l," but got shape ").concat(o,"."))}}if(null!=a.shape)for(var d=0;d<a.shape.length;++d){var h=a.shape[d],p=r.shape[d];if(null!=h&&null!=p&&h!==p)throw new nA("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected shape=").concat(a.shape,", found shape=").concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=cA(e),i=!0,o=ea(a);try{for(o.s();!(r=o.n()).done;){if(!(r.value instanceof qw)){i=!1;break}}}catch(c){o.e(c)}finally{o.f()}var s,u=!0,l=ea(a);try{for(l.s();!(s=l.n()).done;){if(s.value instanceof qw){u=!1;break}}}catch(c){l.e(c)}finally{l.f()}if(i===u)throw new nA("Arguments to apply() must be all SymbolicTensors or all Tensors");return BA(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,i=[],o=ea(cA(e));try{for(o.s();!(r=o.n()).done;){var s=r.value;i.push(s.shape)}}catch(c){o.e(c)}finally{o.f()}n.build(lA(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&u&&(n._refCount=1)}if(n.assertInputCompatibility(e),u){var l,d=n.call(e,t),h=[],p=ea(cA(d));try{for(p.s();!(l=p.n()).done;){var f=l.value;-1!==a.indexOf(f)&&(f=f.clone()),h.push(f)}}catch(c){p.e(c)}finally{p.f()}if(d=lA(h),null!=n.activityRegularizer)throw new rA("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return d}var m,g=function(e){e=cA(e);var t,n=[],r=ea(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(c){r.e(c)}finally{r.f()}return lA(n)}(e),v=n.computeOutputShape(g),y="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?g[0]:g),m=null!=v&&v.length>0&&Array.isArray(v[0])?v.map((function(r,a){return new qw(y,r,n,cA(e),t,n.name,a)})):new qw(y,v,n,cA(e),t,n.name),n.addInboundNode(e,m,null,null,g,v,t),n._refCount++,null!=n.activityRegularizer)throw new rA("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return m}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: ".concat(JSON.stringify(e),") does not match that of the batchInputShape (").concat(JSON.stringify(this.batchInputShape),") of the layer ").concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor (".concat(JSON.stringify(e),") does not match the expectation of layer ").concat(this.name,": ").concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new eA("The layer ".concat(this.name," has never been called and thus has no defined output shape."));var e,t=[],n=ea(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(o){n.e(o)}finally{n.f()}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new eA("The layer ".concat(this.name,' has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.'))}},{key:"countParams",value:function(){if(!this.built)throw new tA("You tried to call countParams() on ".concat(this.name,", but the layer is not built yet. Build it first by calling build(batchInputShape)."));return jw(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Uw(e?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;Wh((function(){var n=t.weights;if(n.length!==e.length)throw new nA('You called setWeights(weights) on layer "'.concat(t.name,'" with a weight list of length ').concat(e.length,", but the layer was expecting ").concat(n.length," weights. Provided weights: ").concat(e,"..."));if(0!==n.length){for(var r=[],a=Uw(n),i=0;i<a.length;++i){var o=a[i],s=n[i],u=e[i];if(!Cl.arraysEqual(o.shape,u.shape))throw new nA("Layer weight shape ".concat(o.shape," not compatible with provided weight shape ").concat(u.shape));r.push([s,u])}Gw(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,i,o,s){if(-1!==this._addedWeightNames.indexOf(e))throw new nA("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():Dw("zeros"));var u=r.apply(t,n),l=new Hw(u,n,e,i,o);return u.dispose(),null!=a&&this.addLoss((function(){return a.apply(l.read())})),null==i&&(i=!0),i?this._trainableWeights.push(l):this._nonTrainableWeights.push(l),l}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=cA(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,ta(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, but was passed an inputMask."));t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, but was passed an inputMask."))}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=cA(e);t=cA(t),n=cA(n),r=cA(r),a=zw(a),i=zw(i);var u,l=[],c=[],d=[],h=ea(s);try{for(h.s();!(u=h.n()).done;){var p=u.value;l.push(p.sourceLayer),c.push(p.nodeIndex),d.push(p.tensorIndex)}}catch(m){h.e(m)}finally{h.f()}new Kw({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:d,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var f=0;f<t.length;f++)t[f].sourceLayer=this,t[f].nodeIndex=this.inboundNodes.length-1,t[f].tensorIndex=f}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been built yet."));if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used yet."));this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(Vp.Serializable);function Qw(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++){var o,s=ea(Qw(r.inputTensors[i],r.inboundLayers[i],r.nodeIndices[i]));try{for(s.s();!(o=s.n()).done;){var u=o.value;-1===a.indexOf(u)&&a.push(u)}}catch(l){s.e(l)}finally{s.f()}}return a}var $w=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:TA("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new nA("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new nA("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new nA("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";r.batchInputShape=a,r.dtype=i,r.inputSpec=[{shape:a}];var o=new qw(r.dtype,r.batchInputShape,jr(r),[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new Kw({outboundLayer:jr(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),Xr(r)}return $r(n,[{key:"apply",value:function(e,t){throw new nA("Cannot pass any input to an InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(Jw);function ek(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new nA("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new $w({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}$w.className="InputLayer",Vp.registerClass($w);var tk=function(){function e(t){if(Jr(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=ea(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.add(i.key,i.value)}}catch(o){a.e(o)}finally{a.f()}}}return $r(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new nA("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return th(t,e.dtype)}catch(n){throw new nA("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype of the key '").concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof qw){if(null==this.id2Value[e.id])throw new nA("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new nA("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof qw){if(null==this.id2Value[e.id])throw new nA("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new nA("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&jh(this.id2Mask)}}]),e}(),nk=new iA,rk=new iA;function ak(e,t,n,r){var a,i=null!=n&&n.training,o=Array.isArray(e),s=o?e:[e],u=s.map((function(e){return e.name})),l=[],c=t.names(),d=ea(u);try{for(d.s();!(a=d.n()).done;){var h=a.value;-1!==c.indexOf(h)?l.push(t.getValue(h)):l.push(null)}}catch(L){d.e(L)}finally{d.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var p,f=u.join(",")+"|"+t.names().sort().join(","),m=nk.get(f);if(null==m){var g=function(e,t){Cl.assert(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=ok(e[0],t);n=a.sorted,r=a.recipientMap}else{var i,o=new Set,s=ea(e);try{for(s.s();!(i=s.n()).done;){var u,l=ok(i.value,t),c=l.sorted,d=l.recipientMap,h=ea(c);try{for(h.s();!(u=h.n()).done;){var p=u.value;o.has(p.name)||(n.push(p),o.add(p.name))}}catch(L){h.e(L)}finally{h.f()}var f=function(e){null==r[e]&&(r[e]=new Set),d[e].forEach((function(t){return r[e].add(t)}))};for(var m in d)f(m)}}catch(L){s.e(L)}finally{s.f()}}return{sorted:n,recipientCounts:ik(r)}}(s,t);m=g.sorted,p=g.recipientCounts,nk.put(f,m),rk.put(f,p)}p={},i||Object.assign(p,rk.get(f));for(var v=new tk(t),y=0;y<m.length;++y){if(null!=r){var b=zh().numTensors;b>r.maxNumTensors&&(r.maxNumTensors=b),b<r.minNumTensors&&(r.minNumTensors=b)}var x=m[y],A=x.sourceLayer;if(!(A instanceof $w)){var w,k=[],S=[],C=[],I=!1,E=ea(x.inputs);try{for(E.s();!(w=E.n()).done;){var T=w.value,N=v.getValue(T),_=v.getMask(T);k.push(N),S.push(_),null!=_&&(I=!0),i||(p[T.name]--,0===p[T.name]&&!t.hasKey(T)&&-1===u.indexOf(T.name)&&!N.isDisposed&&!0!==T.sourceLayer.stateful&&C.push(N))}}catch(L){E.e(L)}finally{E.f()}I&&((n=n||{}).mask=S[0]);var M=cA(A.apply(k,n)),R=null;A.supportsMasking&&(R=A.computeMask(k,S));for(var O=sk(x),P=Array.isArray(O)?O:[O],F=0;F<P.length;++F){v.hasKey(P[F])||v.add(P[F],M[F],Array.isArray(R)?R[0]:R);var D=u.indexOf(P[F].name);-1!==D&&(l[D]=M[F])}i||jh(C)}}return v.disposeMasks(),o?l:l[0]}function ik(e){var t={};for(var n in e)t[n]=e[n].size;return t}function ok(e,t){var n,r=new Set,a=[],i={},o=ea(t.names());try{for(o.s();!(n=o.n()).done;){var s=n.value;r.add(s)}}catch(m){o.e(m)}finally{o.f()}var u=[],l=[];for(u.push(e);u.length>0;){var c=u[u.length-1];if(r.has(c.name))u.pop();else{var d=l[l.length-1]===u.length-1;if(0===c.inputs.length||d)u.pop(),a.push(c),r.add(c.name),d&&l.pop();else{l.push(u.length-1);var h,p=ea(c.inputs);try{for(p.s();!(h=p.n()).done;){var f=h.value;null==i[f.name]&&(i[f.name]=new Set),i[f.name].add(c.name),!r.has(f.name)&&u.push(f)}}catch(m){p.e(m)}finally{p.f()}}}}return{sorted:a,recipientMap:i}}function sk(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,i=ea(e.sourceLayer.inboundNodes[r].outputTensors);try{for(i.s();!(a=i.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(o){i.e(o)}finally{i.f()}}t=e.sourceLayer.getOutputAt(n)}return t}Zi().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(function(){return 100}),(function(e){null!=nk&&nk.setMaxEntries(e),null!=rk&&rk.setMaxEntries(e)}));var uk={kernelName:to,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return lf(e,Xv(th(n,"float32"),-1))}}}},lk={kernelName:no,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){var t=Gm(th(n,"float32")),r=Um(Cg(Hm(1),t));return ep(uf(e,r))}}}},ck={kernelName:ro,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){var t=Um(Cg(Gm(th(n,"float32")),1));return uf(e,t)}}}},dk={kernelName:ao,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1],i=sp(r.shape,a.shape);return{a:function(){var t=e,n=op(r.shape,i);return n.length>0&&(t=Xm(t,n)),Bf(t,r.shape)},b:function(){var t=e,n=op(a.shape,i);return n.length>0&&(t=Xm(t,n)),Bf(t,a.shape)}}}},hk={kernelName:io,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},pk={kernelName:uo,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return Im(n)}}}},fk={kernelName:lo,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return Im(n)}}}},mk={kernelName:co,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return uf(e,Um(Cg(Hm(1),Gm(th(n,"float32")))))}}}},gk={kernelName:ho,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){var t=Um(of(Hm(1),Gm(th(n,"float32"))));return uf(e,t)}}}},vk={kernelName:mo,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1],i=sp(r.shape,a.shape);return{a:function(){var t=of(Gm(r),Gm(a)),n=lf(e,uf(a,t)),o=op(r.shape,i);return o.length>0&&(n=Xm(n,o)),Bf(n,r.shape)},b:function(){var t=of(Gm(r),Gm(a)),n=ep(lf(e,uf(r,t))),o=op(a.shape,i);return o.length>0&&(n=Xm(n,o)),Bf(n,a.shape)}}}},yk={kernelName:po,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return uf(e,of(Gm(th(n,"float32")),1))}}}},bk={kernelName:fo,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return uf(e,Cg(Hm(1),Gm(th(n,"float32"))))}}}};var xk=Hc({avgPool3dGrad_:function(e,t,n,r,a,i){var o=Wc(e,"dy","avgPool3dGrad"),s=Wc(t,"input","avgPool3dGrad"),u=o,l=s,c=!1;4===s.rank&&(c=!0,u=Bf(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),l=Bf(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),oi(5===u.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank ".concat(u.rank,".")})),oi(5===l.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank ".concat(l.rank,".")})),zf("avgPool3dGrad",a,i);var d={dy:u,input:l},h={filterSize:n,strides:r,pad:a,dimRoundingMode:i},p=Nc.runKernel(bo,d,h);return c?Bf(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),Ak={kernelName:yo,inputsToSave:["x"],gradFunc:function(e,t,n){var r=u(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad,s=n.dimRoundingMode;return{x:function(){return xk(e,r,a,i,o,s)}}}};var wk=Hc({avgPoolGrad_:function(e,t,n,r,a){var i=Wc(e,"dy","avgPoolGrad"),o=Wc(t,"input","avgPoolGrad");oi(o.rank===i.rank,(function(){return"Rank of input (".concat(o.rank,") does not match rank of dy (").concat(i.rank,")")}));var s=o,u=i,l=!1;3===o.rank&&(l=!0,s=Bf(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=Bf(i,[1,i.shape[0],i.shape[1],i.shape[2]])),oi(4===u.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank ".concat(u.rank,".")})),oi(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank ".concat(s.rank,".")}));var c={dy:u,input:s},d={filterSize:n,strides:r,pad:a},h=Nc.runKernel(vo,c,d);return l?Bf(h,[h.shape[1],h.shape[2],h.shape[3]]):h}}),kk={kernelName:go,inputsToSave:["x"],gradFunc:function(e,t,n){var r=u(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad;return{x:function(){return wk(e,r,a,i,o)}}}},Sk={kernelName:xo,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=u(t,2),a=r[0],i=r[1],o=n.transposeA,s=n.transposeB;return o||s?!o&&s?{a:function(){return _h(e,i,!1,!1)},b:function(){return _h(e,a,!0,!1)}}:o&&!s?{a:function(){return _h(i,e,!1,!0)},b:function(){return _h(a,e,!1,!1)}}:{a:function(){return _h(i,e,!0,!0)},b:function(){return _h(e,a,!0,!0)}}:{a:function(){return _h(e,i,!1,!0)},b:function(){return _h(a,e,!0,!1)}}}},Ck={kernelName:Ao,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return rv(e,r,a)}}}},Ik={kernelName:ko,gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,i=r.shape,o=Array.from(i),s=a.length-1;s>=0;s--)if(a[s]===i[s])o[s]=1;else if(1!==a[s])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));for(var u=[],l=0;l<o.length;l++)o[l]>1&&u.push(l);return{x:function(){return Xm(e,u,!0)}}}},Ek={kernelName:Co,gradFunc:function(e){return{x:function(){return e.clone()}}}},Tk={kernelName:Io,gradFunc:function(e){return{x:function(){return Im(e)}}}},Nk={kernelName:Eo,inputsToSave:["x"],gradFunc:function(e,t,n){var r=u(t,1)[0],a=n.clipValueMin,i=n.clipValueMax;return{x:function(){return Cm(Tg(ig(r,a),dg(r,i)),e,Im(e))}}}},_k={kernelName:No,inputsToSave:["x"],gradFunc:uk.gradFunc},Mk={kernelName:_o,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=xi(n.axis,t[0].shape)[0],i=r.map((function(e){return e[a]}));return jv(e,i,a).map((function(e){return function(){return e}}))}},Rk={kernelName:Mo,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=u(t,2),a=r[0],i=r[1],o=n.dilations,s=n.strides,l=n.pad,c=n.dataFormat;return oi(Ff(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(o,"'")})),{x:function(){return cm(a.shape,e,i,s,l,c)},filter:function(){return ky(a,e,i.shape,s,l,c)}}}},Ok={kernelName:Oo,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=u(t,2),a=r[0],i=r[1],o=n.strides,s=n.pad,l=n.dataFormat,c=n.dimRoundingMode;return{dy:function(){return um(e,i,o,s,l,1,c)},filter:function(){return ky(e,a,i.shape,o,s,l,c)}}}};var Pk=Hc({conv3DBackpropFilter_:function(e,t,n,r,a){var i=e;4===e.rank&&(i=Bf(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var o=t;4===o.rank&&(o=Bf(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),oi(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape ".concat(i.shape,".")})),oi(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape ".concat(o.shape,".")})),oi(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got ".concat(n,".")})),oi(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must match input depth in filter (").concat(n[3],".")})),oi(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(o.shape[4],") must match output depth for filter (").concat(n[4],").")}));var s={x:i,dy:o},u={strides:r,pad:a,filterShape:n};return Nc.runKernel(Fo,s,u)}}),Fk={kernelName:Po,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad;oi(Ff(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(r,"'")}));var o=u(t,2),s=o[0],l=o[1];return{x:function(){return pm(s.shape,e,l,a,i)},filter:function(){return Pk(s,e,l.shape,a,i)}}}},Dk={kernelName:Lo,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return lf(ep(Mv(th(n,"float32"))),e)}}}},Lk={kernelName:zo,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return lf(Rv(th(n,"float32")),e)}}}},zk={kernelName:Wo,inputsToSave:["x"],gradFunc:function(e,t,n){var r=u(t,1)[0],a=n.axis,i=n.exclusive,o=n.reverse;return{x:function(){var t=Lm([a],r.rank),n=ym(e,a,i,!o);return null!=t&&(n=np(n,t)),n}}}},Bk={kernelName:Uo,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad,o=n.dimRoundingMode,s=null==r?[1,1]:r;oi(Ff(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '".concat(s,"'")}));var l=u(t,2),c=l[0],d=l[1];return oi(4===c.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ".concat(c.rank,".")})),oi(4===d.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ".concat(d.rank,".")})),oi(c.shape[3]===d.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input channels (".concat(c.shape[3],") must match the inChannels dimension in filter ").concat(d.shape[2],".")})),oi(Df(a,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ".concat(a," and dilations '").concat(s,"'.")})),zf("depthwiseConv2d",i,o),{x:function(){return _y(c.shape,e,d,a,i,s,o)},filter:function(){return Ny(c,e,d.shape,a,i,s,o)}}}},Wk={kernelName:Yo,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=u(t,2),a=r[0],i=r[1],o={x:a,filter:i,dy:e},s={x:a,filter:i,dy:e};return{x:function(){return Nc.runKernel(Ko,o,n)},filter:function(){return Nc.runKernel(Zo,s,n)}}}},jk={kernelName:$o,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:u(t,1)[0]};return{x:function(){return Nc.runKernel(es,n)}}}},Vk={kernelName:ts,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0],r=lf(Zm(ep(Gm(n))),2/Math.sqrt(Math.PI));return{x:function(){return lf(e,r)}}}},Hk={kernelName:rs,outputsToSave:[!0],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return lf(e,n)}}}},Uk={kernelName:as,inputsToSave:["input"],gradFunc:function(e,t){var n=u(t,1)[0];return{input:function(){return Bf(e,n.shape)}}}},Gk={kernelName:is,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return lf(e,Zm(n))}}}},Xk={kernelName:ls,gradFunc:function(e){return{x:function(){return Im(e)}}}},qk={kernelName:cs,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1],i=sp(r.shape,a.shape);return{a:function(){var t=uf(e,th(a,"float32")),n=op(r.shape,i);return n.length>0?Bf(Xm(t,n),r.shape):t},b:function(){var t=lf(e,th(r,"float32")),n=op(a.shape,i);n.length>0&&(t=Bf(Xm(t,n),a.shape));var o=Gm(a);return ep(uf(t,th(o,"float32")))}}}},Yk={kernelName:ds,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=u(t,4),i=a[0],o=a[1],s=a[2],l=a[3],c=null==l?Hm(1):l,d=op(o.shape,i.shape),h=[];if(1===o.rank){for(var p=0;p<i.shape.length-1;++p)h.push(i.shape[p]);h.push(1)}var f=Cg(i,o),m=lf(e,c),g=Cv(of(s,Hm(r))),v=lf(lf(lf(g,g),g),Hm(-.5));return{x:function(){return 1===o.rank?Bf(lf(lf(e,$m(Bf(g,[1,1,1,o.shape[0]]),h)),c),i.shape):Bf(lf(lf(e,g),c),i.shape)},mean:function(){var e=lf(lf(g,Hm(-1)),m);return 1===o.rank&&(e=Xm(e,d)),Bf(e,o.shape)},variance:function(){var e=lf(lf(v,f),m);return 1===o.rank&&(e=Xm(e,d)),Bf(e,o.shape)},scale:function(){var t=lf(f,g),n=lf(e,t);return 1===o.rank&&(n=Xm(n,d)),Bf(n,o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=Xm(t,d)),Bf(t,o.shape)}}}},Kk={kernelName:hs,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=u(t,2),a=r[0],i=r[1],o=n.axis,s=xi(o,a.shape)[0];return{x:function(){var t=a.shape,n=i.size,r=t.slice(0,s),u=r.length,l=t.slice(o,t.length).slice(1),c=l.length,d=Zk(0,u),h=Zk(u+1,u+1+c),p=Jk([r,[n],l]),f=Bf(e,p),m=Bf(i,[n]),g=Jk([[u],d,h]),v=np(f,g),y=ry(v,m,a.shape[s]),b=zm(g);return y=np(y,b)},indices:function(){return i}}}};function Zk(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function Jk(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Qk={kernelName:ms,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1];return{a:function(){return Im(r)},b:function(){return Im(a)}}}},$k={kernelName:gs,gradFunc:function(e){return{x:function(){return th(e,"float32")}}}},eS={kernelName:bs,gradFunc:function(e){return{x:function(){return Im(e)}}}},tS={kernelName:xs,gradFunc:function(e){return{x:function(){return Im(e)}}}},nS={kernelName:As,gradFunc:function(e){return{x:function(){return Im(e)}}}},rS={kernelName:ws,inputsToSave:["x"],gradFunc:function(e,t,n){var r=u(t,1)[0],a=n.alpha,i=ag(r,0);return{x:function(){return Cm(i,e,lf(e,a))}}}},aS={kernelName:Es,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return uf(e,of(n,1))}}}},iS={kernelName:Is,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return uf(e,th(n,"float32"))}}}},oS={kernelName:Rs,inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=u(t,1)[0],a=n.axis;return{logits:function(){var t=Zm(r);return Cg(e,lf(Xm(e,a,!0),t))}}}};var sS=Hc({localResponseNormalizationBackprop_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,s={x:e,y:t,dy:n},u={depthRadius:r,bias:a,alpha:i,beta:o};return Nc.runKernel(Fs,s,u)}}),uS={kernelName:Ps,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=u(t,2),a=r[0],i=r[1],o=n.depthRadius,s=n.bias,l=n.alpha,c=n.beta;return{x:function(){return sS(a,i,e,o,s,l,c)}}}};function lS(e,t,n,r){return t.rank<n.rank&&(t=Bf(t,Fm(t.shape,r))),e.rank<n.rank&&(e=Bf(e,Fm(e.shape,r))),{x:function(){return lf(e,th(Sm(n,t),e.dtype))}}}var cS={kernelName:Ds,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],i=lS(e,t[1],a,xi(r,a.shape));return{x:function(){return i.x()}}}},dS={kernelName:Ls,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1];return{a:function(){return lf(e,th(ig(r,a),"float32"))},b:function(){return lf(e,th(cg(r,a),"float32"))}}}};var hS=Hc({maxPool3dGrad_:function(e,t,n,r,a,i,o){var s=Wc(e,"dy","maxPool3dGrad"),u=Wc(t,"input","maxPool3dGrad"),l=Wc(n,"output","maxPool3dGrad"),c=s,d=u,h=l,p=!1;4===u.rank&&(p=!0,c=Bf(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),d=Bf(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),h=Bf(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]])),oi(5===c.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank ".concat(c.rank,".")})),oi(5===d.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank ".concat(d.rank,".")})),oi(5===h.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank ".concat(h.rank,".")})),zf("maxPool3dGrad",i,o);var f={dy:c,input:d,output:h},m={filterSize:r,strides:a,pad:i,dimRoundingMode:o},g=Nc.runKernel(js,f,m);return p?Bf(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),pS={kernelName:Ws,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=u(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,l=n.pad,c=n.dimRoundingMode;return{x:function(){return hS(e,a,i,o,s,l,c)}}}};var fS=Hc({maxPoolGrad_:function(e,t,n,r,a,i,o){var s=Wc(e,"dy","maxPoolGrad"),u=Wc(t,"input","maxPoolGrad"),l=Wc(n,"output","maxPoolGrad");oi(u.rank===s.rank,(function(){return"Rank of input (".concat(u.rank,") does not match rank of dy (").concat(s.rank,")")})),oi(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank ".concat(s.rank,".")})),oi(4===u.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank ".concat(u.rank,".")})),zf("maxPoolGrad",i,o);var c={dy:s,input:u,output:l},d={filterSize:r,strides:a,pad:i,dimRoundingMode:o};return Nc.runKernel(Bs,c,d)}}),mS={kernelName:zs,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=u(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,l=n.pad;return{x:function(){return fS(e,a,i,o,s,l)}}}},gS={kernelName:Hs,inputsToSave:["x"],gradFunc:function(e,t,n){var r=u(t,1)[0],a=xi(n.axis,r.shape),i=ci(Pm(r.shape,a)[1]);return{x:function(){var t=r.shape.slice();a.forEach((function(e){t[e]=1}));var n=Bf(e,t);return uf(lf(n,jg(r.shape,"float32")),i)}}}},vS={kernelName:Us,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=u(t,2),i=a[0],o=lS(e,a[1],i,xi(r,i.shape));return{x:function(){return o.x()}}}},yS={kernelName:Gs,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1];return{a:function(){return lf(e,th(dg(r,a),"float32"))},b:function(){return lf(e,th(ag(r,a),"float32"))}}}},bS={kernelName:Xs,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Uf(e,a,r.shape)}}}},xS={kernelName:qs,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1],i=sp(r.shape,a.shape);return{a:function(){var t=op(r.shape,i);return t.length>0?Bf(Xm(e,t),r.shape):e},b:function(){var t=lf(e,ep(ng(uf(r,a)))),n=op(a.shape,i);return n.length>0?Bf(Xm(t,n),a.shape):t}}}},AS={kernelName:Ks,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1],i=sp(r.shape,a.shape);return{a:function(){var t=lf(e,th(a,"float32")),n=op(r.shape,i);return n.length>0?Bf(Xm(t,n),r.shape):t},b:function(){var t=lf(e,th(r,"float32")),n=op(a.shape,i);return n.length>0?Bf(Xm(t,n),a.shape):t}}}},wS={kernelName:Zs,gradFunc:function(e){return{x:function(){return ep(e)}}}},kS={kernelName:nu,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return Wg(n.shape,"float32")}}}},SS={kernelName:tu,gradFunc:function(e){return{x:function(){return Im(e)}}}},CS={kernelName:ru,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return ay(e,r).map((function(e){return function(){return e}}))}},IS={kernelName:au,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Uf(e,a,r.shape)}}}},ES={kernelName:ou,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=u(t,3),r=n[0],a=n[1],i=n[2],o=r,s=a,l=sp(o.shape,s.shape);return{a:function(){var t=th(s,"float32"),n=lf(e,lf(t,Vm(o,Cg(t,Hm(1))))),r=op(o.shape,l);return r.length>0&&(n=Xm(n,r)),Bf(n,o.shape)},b:function(){var t=ag(o,0),n=Cm(t,fg(o),Im(o)),r=lf(e,lf(i,n)),a=op(s.shape,l);return a.length>0&&(r=Xm(r,a)),Bf(r,s.shape)}}}},TS={kernelName:su,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1],i=ag(r,0);return{x:function(){return Cm(i,e,lf(e,a))},alpha:function(){var t=Cm(i,Im(e),lf(e,r)),n=op(a.shape,e.shape);return n.length>0&&(t=Xm(t,n)),Bf(t,a.shape)}}}};function NS(e,t,n){var r=e.shape.length,a=r-n.length,i=$b.getAxesPermutation(n,r),o=e;null!=i&&(o=np(e,i));var s=o.shape.slice(),u=s.splice(r-n.length,n.length).reduce((function(e,t){return e*t}),1);s.push(u);var l=function(e,t,n){var r=e.shape.slice();r[n]=1;var a=Bf(t,r),i=vm(e,n,!0,!1),o=vm(e,n,!0,!0),s=lf(i,o);return lf(a,s)}(o.reshape(s),t,a);if(l=l.reshape(o.shape),null!=i){var c=$b.getUndoAxesPermutation(i);l=np(l,c)}return l}var _S={kernelName:uu,inputsToSave:["x"],gradFunc:function(e,t,n){var r=u(t,1)[0],a=n.axis,i=[];return i=null==a?r.shape.map((function(e,t){return t})):"number"==typeof a?[a]:a,{x:function(){return NS(r,e,i)}}}},MS={kernelName:Jo,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1],i=sp(r.shape,a.shape);return{a:function(){var t=uf(e,th(a,"float32")),n=op(r.shape,i);return n.length>0?Bf(Xm(t,n),r.shape):t},b:function(){var t=lf(e,th(r,"float32")),n=op(a.shape,i);n.length>0&&(t=Bf(Xm(t,n),a.shape));var o=Gm(a);return ep(uf(t,th(o,"float32")))}}}},RS={kernelName:du,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return uf(e,ep(Gm(n)))}}}},OS={kernelName:yu,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0],r=lf(dg(n,6),Xv(n));return{x:function(){return lf(e,th(r,"float32"))}}}},PS={kernelName:hu,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return lf(e,th(Xv(n),"float32"))}}}},FS={kernelName:pu,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return Bf(e,n.shape)}}}},DS={kernelName:gu,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:u(t,1)[0]};return{images:function(){return Nc.runKernel(vu,r,n)}}}},LS={kernelName:fu,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:u(t,1)[0]};return{images:function(){return Nc.runKernel(mu,r,n)}}}},zS={kernelName:bu,gradFunc:function(e,t,n){var r=xi(n.dims,e.shape);return{x:function(){return bv(e,r)}}}},BS={kernelName:xu,gradFunc:function(e){return{x:function(){return Im(e)}}}},WS={kernelName:Au,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return ep(uf(e,lf(Vm(n,1.5),2)))}}}},jS={kernelName:Su,inputsToSave:["condition"],gradFunc:function(e,t){var n=u(t,1)[0];return{condition:function(){return th(Im(n),"float32")},t:function(){return lf(e,th(n,e.dtype))},e:function(){return lf(e,th(Ng(n),e.dtype))}}}},VS={kernelName:Cu,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){var t=ag(n,Hm(0)),r=Hm(cx),a=Hm(dx),i=lf(e,a),o=lf(lf(e,r),Zm(th(n,"float32")));return Cm(t,i,o)}}}},HS={kernelName:_u,outputsToSave:[!0],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return lf(e,lf(n,Cg(Hm(1),n)))}}}},US={kernelName:Nu,gradFunc:function(e){return{x:function(){return Im(e)}}}},GS={kernelName:Eu,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return lf(mm(th(n,"float32")),e)}}}},XS={kernelName:Tu,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return lf(gm(th(n,"float32")),e)}}}},qS={kernelName:Iu,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=u(t,1)[0],a=n.begin,i=n.size,o=r.shape,s=u(Bp(r,a,i),2),l=s[0],c=s[1],d=[],h=0;h<e.rank;h++)d.push([l[h],o[h]-l[h]-c[h]]);return{x:function(){return Qg(e,d)}}}},YS={kernelName:Du,outputsToSave:[!0],gradFunc:function(e,t,n){var r=u(t,1)[0],a=n.dim,i=lf(e,r);return{logits:function(){return Cg(i,lf(Xm(i,[a],true),r))}}}},KS={kernelName:Mu,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return lf(e,Hf(n))}}}},ZS={kernelName:Pu,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return qf(e,r,a)}}}},JS={kernelName:Fu,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return Vf(e,r)}}}},QS={kernelName:Ru,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return uf(e,lf(Um(th(n,"float32")),2))}}}},$S={kernelName:Hu,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return lf(e,lf(th(n,"float32"),2))}}}},eC={kernelName:Vu,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1],i=Hm(2);return{a:function(){return lf(e,lf(i,Cg(r,a)))},b:function(){return lf(e,lf(i,Cg(a,r)))}}}},tC={kernelName:ol,gradFunc:function(e){return{x:function(){return Im(e)}}}},nC={kernelName:Yu,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1],i=sp(r.shape,a.shape);return{a:function(){var t=e,n=op(r.shape,i);return n.length>0&&(t=Xm(t,n)),Bf(t,r.shape)},b:function(){var t=e,n=op(a.shape,i);return n.length>0&&(t=Xm(t,n)),Bf(ep(t),a.shape)}}}},rC={kernelName:Ou,inputsToSave:["x"],gradFunc:function(e,t,n){var r=u(t,1)[0],a=r.shape.slice();xi(n.axis,r.shape).forEach((function(e){a[e]=1}));var i=Bf(e,a),o=lf(i,jg(r.shape,"float32"));return{x:function(){return o}}}},aC={kernelName:Ku,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return uf(e,Gm(mm(n)))}}}},iC={kernelName:Zu,outputsToSave:[!0],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return lf(Cg(Hm(1),Gm(n)),e)}}}},oC={kernelName:Ju,inputsToSave:["x"],gradFunc:function(e,t,n){var r=u(t,1)[0],a=n.reps;return{x:function(){var t=Im(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=of(t,Uf(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var i=0;i<a[0];++i)for(var o=0;o<a[1];++o)t=of(t,Uf(e,[i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var s=0;s<a[0];++s)for(var u=0;u<a[1];++u)for(var l=0;l<a[2];++l)t=of(t,Uf(e,[s*r.shape[0],u*r.shape[1],l*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-".concat(r.rank," tensors yet."));for(var c=0;c<a[0];++c)for(var d=0;d<a[1];++d)for(var h=0;h<a[2];++h)for(var p=0;p<a[3];++p)t=of(t,Uf(e,[c*r.shape[0],d*r.shape[1],h*r.shape[2],p*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},sC={kernelName:el,gradFunc:function(e,t,n){var r=zm(n.perm);return{x:function(){return np(e,r)}}}},uC={kernelName:nl,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return Gv(e,r)}}}},lC={kernelName:rl,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return function(e,t){for(var n=zg(t,Im(t)),r=rg(e,n),a=ig(t,Hm(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=Jm(a,o+1);a=Tg(a,jg(r.shape,"bool"));var s=Im(r);return Cm(a,r,s)}(e,n)}}}};for(var cC={kernelName:il,gradFunc:function(e){return{x:function(){return Im(e)}}}},dC=0,hC=[uk,lk,ck,dk,hk,pk,fk,mk,gk,vk,yk,bk,Ak,kk,Sk,Ck,Ik,Ek,Tk,Nk,_k,Mk,Ok,Rk,Fk,Dk,Lk,zk,Bk,Wk,MS,jk,Vk,Hk,Uk,Gk,qk,Xk,Yk,Kk,Qk,$k,eS,tS,nS,rS,aS,iS,oS,uS,cS,cS,dS,pS,mS,gS,vS,yS,bS,xS,AS,wS,kS,SS,CS,IS,IS,ES,TS,_S,RS,OS,PS,FS,DS,LS,zS,BS,WS,jS,VS,HS,US,GS,XS,qS,YS,KS,ZS,ZS,JS,JS,QS,eC,$S,tC,nC,rC,aC,iC,oC,sC,uC,lC,cC];dC<hC.length;dC++){xl(hC[dC])}var pC={};function fC(e,t){return Wh((function(){return Um(Xm(lf(e,e),t,!0))}))}Ea(pC,{maxNorm:function(){return SC},minMaxNorm:function(){return EC},nonNeg:function(){return IC},unitNorm:function(){return CC}});var mC=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"getConfig",value:function(){return{}}}]),n}(Vp.Serializable),gC=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return $r(n,[{key:"apply",value:function(e){var t=this;return Wh((function(){var n=fC(e,t.axis),r=rm(n,0,t.maxValue);return lf(e,uf(r,of(ZA(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(mC);gC.className="MaxNorm",Vp.registerClass(gC);var vC=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return $r(n,[{key:"apply",value:function(e){var t=this;return Wh((function(){return uf(e,of(ZA(),fC(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(mC);vC.className="UnitNorm",Vp.registerClass(vC);var yC=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"apply",value:function(e){return vv(e)}}]),n}(mC);yC.className="NonNeg",Vp.registerClass(yC);var bC=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return $r(n,[{key:"apply",value:function(e){var t=this;return Wh((function(){var n=fC(e,t.axis),r=of(lf(t.rate,rm(n,t.minValue,t.maxValue)),lf(1-t.rate,n));return lf(e,uf(r,of(ZA(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(mC);bC.className="MinMaxNorm",Vp.registerClass(bC);var xC={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function AC(e){return fA(e)}function wC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return gA(e,Vp.SerializationMap.getMap().classNameMap,t,"constraint")}function kC(e){return null==e?null:"string"==typeof e?wC({className:e in xC?xC[e]:e,config:{}}):e instanceof mC?e:wC(e)}function SC(e){return new gC(e)}function CC(e){return new vC(e)}function IC(){return new yC}function EC(e){return new bC(e)}var TC={};function NC(){return new yw}function _C(){return new bw}function MC(e){return new xw(e)}function RC(e){return new Aw(e)}function OC(e){return new ww(e)}function PC(e){return new kw(e)}function FC(e){return new Sw(e)}function DC(e){return new Cw(e)}function LC(e){return new Iw(e)}function zC(e){return new Ew(e)}function BC(e){return new Tw(e)}function WC(e){return new Nw(e)}function jC(e){return new _w(e)}function VC(e){return new Mw(e)}function HC(e){return new Rw(e)}Ea(TC,{constant:function(){return MC},glorotNormal:function(){return zC},glorotUniform:function(){return LC},heNormal:function(){return BC},heUniform:function(){return WC},identity:function(){return FC},leCunNormal:function(){return jC},leCunUniform:function(){return VC},ones:function(){return _C},orthogonal:function(){return HC},randomNormal:function(){return OC},randomUniform:function(){return RC},truncatedNormal:function(){return PC},varianceScaling:function(){return DC},zeros:function(){return NC}});var UC={};function GC(e){return XC.apply(this,arguments)}function XC(){return XC=Mr(Nr().mark((function e(t){var n,r,a,i,o,s,u,l;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(i in n=[],r=[],a=[],t)"number"!=typeof(o=t[i])&&(s=o,n.push(s.data()),r.push(i),a.push(s));if(!(n.length>0)){e.next=10;break}return e.next=7,Promise.all(n);case 7:for(u=e.sent,l=0;l<u.length;++l)t[r[l]]=u[l][0];jh(a);case 10:case"end":return e.stop()}}),e)}))),XC.apply(this,arguments)}function qC(e){if(null!=e)for(var t in e){var n=e[t];"number"!=typeof n&&n.dispose()}}Ea(UC,{Layer:function(){return Jw},RNN:function(){return RT},RNNCell:function(){return OT},activation:function(){return t_},add:function(){return c_},alphaDropout:function(){return eM},average:function(){return d_},averagePooling1d:function(){return x_},averagePooling2d:function(){return k_},averagePooling3d:function(){return I_},avgPool1d:function(){return A_},avgPool2d:function(){return S_},avgPool3d:function(){return E_},avgPooling1d:function(){return w_},avgPooling2d:function(){return C_},avgPooling3d:function(){return T_},batchNormalization:function(){return v_},bidirectional:function(){return X_},concatenate:function(){return h_},conv1d:function(){return XN},conv2d:function(){return qN},conv2dTranspose:function(){return YN},conv3d:function(){return KN},conv3dTranspose:function(){return ZN},convLstm2d:function(){return V_},convLstm2dCell:function(){return H_},cropping2D:function(){return QN},dense:function(){return n_},depthwiseConv2d:function(){return e_},dot:function(){return g_},dropout:function(){return r_},elu:function(){return WN},embedding:function(){return l_},flatten:function(){return i_},gaussianDropout:function(){return $_},gaussianNoise:function(){return Q_},globalAveragePooling1d:function(){return N_},globalAveragePooling2d:function(){return __},globalMaxPool1d:function(){return Y_},globalMaxPool2d:function(){return K_},globalMaxPooling1d:function(){return M_},globalMaxPooling2d:function(){return R_},gru:function(){return D_},gruCell:function(){return L_},input:function(){return NE},inputLayer:function(){return BN},layerNormalization:function(){return y_},leakyReLU:function(){return VN},lstm:function(){return z_},lstmCell:function(){return B_},masking:function(){return tM},maxPool1d:function(){return Z_},maxPool2d:function(){return J_},maxPooling1d:function(){return O_},maxPooling2d:function(){return P_},maxPooling3d:function(){return F_},maximum:function(){return p_},minimum:function(){return f_},multiply:function(){return m_},permute:function(){return u_},prelu:function(){return HN},reLU:function(){return jN},repeatVector:function(){return o_},reshape:function(){return s_},rnn:function(){return U_},separableConv2d:function(){return JN},simpleRNN:function(){return W_},simpleRNNCell:function(){return j_},softmax:function(){return UN},spatialDropout1d:function(){return a_},stackedRNNCells:function(){return G_},thresholdedReLU:function(){return GN},timeDistributed:function(){return q_},upSampling2d:function(){return $N},zeroPadding2d:function(){return b_}});var YC=function(){function e(){Jr(this,e),this.validationData=null}return $r(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=Mr(Nr().mark((function e(t,n){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Mr(Nr().mark((function e(t,n){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Mr(Nr().mark((function e(t,n){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Mr(Nr().mark((function e(t,n){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),KC=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;Jr(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return $r(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=ea(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=ea(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=Mr(Nr().mark((function e(t,n){var r,a,i;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=ea(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Mr(Nr().mark((function e(t,n){var r,a,i;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=ea(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Mr(Nr().mark((function e(t,n){var r,a,i;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=ea(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Mr(Nr().mark((function e(t,n){var r,a,i;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=ea(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Mr(Nr().mark((function e(t){var n,r,a;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=ea(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Mr(Nr().mark((function e(t){var n,r,a;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=ea(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ZC=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.call(this)}return $r(n,[{key:"onEpochBegin",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Mr(Nr().mark((function e(t,n){var r,a,i,o=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=function(e){var t=n[e];if("number"==typeof t)o.totals.hasOwnProperty(e)||(o.totals[e]=0),o.totals[e]=o.totals[e]+t*r;else{var a;e in o.totals?a=o.totals[e]:o.totals[e]=0;var i=Wh((function(){return of(o.totals[e],lf(t,r))}));o.totals[e]=i,null!=a&&a.dispose()}},n)a(i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Mr(Nr().mark((function e(t,n){var r,a,i,o=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n){r=ea(this.params.metrics);try{for(i=function(){var e=a.value;null!=o.totals[e]&&("number"==typeof o.totals[e]?n[e]=o.totals[e]/o.seen:Wh((function(){var t=lf(uf(1,o.seen),o.totals[e]);n[e]=t,o.totals[e].dispose(),Vh(n[e])})))},r.s();!(a=r.n()).done;)i()}catch(t){r.e(t)}finally{r.f()}}case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(YC),JC=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"onTrainBegin",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Mr(Nr().mark((function e(t,n){var r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r,a,i,o,s,u,l;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(i=this.history[a],o=0;o<i.length;++o)"number"!=typeof i[o]&&(s=i[o],t.push(s.data()),n.push(a),r.push(o));return e.next=4,Promise.all(t);case 4:for(u=e.sent,l=0;l<u.length;++l)this.history[n[l]][r[l]].dispose(),this.history[n[l]][r[l]]=u[l][0];case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(YC),QC=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a;if(Jr(this,n),(a=t.call(this)).currentEpoch=0,a.nowFunc=e.nowFunc,a.nextFrameFunc=e.nextFrameFunc||Qb,a.yieldEvery=r||"auto","auto"===a.yieldEvery&&(a.yieldEvery=125),"never"===a.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return Cl.isNumber(a.yieldEvery)&&(a.maybeWait=function(e,t,n){var r,a=null!=n?n():Cl.now();return function(){var i=null!=n?n():Cl.now();return i-a<t||(a=i,r=e.apply(void 0,arguments)),r}}(a.maybeWait.bind(jr(a)),a.yieldEvery,a.nowFunc)),a.trainBegin=e.onTrainBegin,a.trainEnd=e.onTrainEnd,a.epochBegin=e.onEpochBegin,a.epochEnd=e.onEpochEnd,a.batchBegin=e.onBatchBegin,a.batchEnd=e.onBatchEnd,a.yield=e.onYield,Xr(a)}return $r(n,[{key:"maybeWait",value:function(){var e=Mr(Nr().mark((function e(t,n,r){var a;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],e.t0=null!=this.yield,!e.t0){e.next=6;break}return e.next=5,GC(r);case 5:a.push(this.yield(t,n,r));case 6:return a.push(this.nextFrameFunc()),e.next=9,Promise.all(a);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=Mr(Nr().mark((function e(t,n){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,e.t0=null!=this.epochBegin,!e.t0){e.next=7;break}return e.next=5,GC(n);case 5:return e.next=7,this.epochBegin(t,n);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Mr(Nr().mark((function e(t,n){var r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],e.t0=null!=this.epochEnd,!e.t0){e.next=6;break}return e.next=5,GC(n);case 5:r.push(this.epochEnd(t,n));case 6:return"epoch"===this.yieldEvery&&r.push(this.nextFrameFunc()),e.next=9,Promise.all(r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=Mr(Nr().mark((function e(t,n){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null!=this.batchBegin,!e.t0){e.next=6;break}return e.next=4,GC(n);case 4:return e.next=6,this.batchBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=Mr(Nr().mark((function e(t,n){var r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],e.t0=null!=this.batchEnd,!e.t0){e.next=6;break}return e.next=5,GC(n);case 5:r.push(this.batchEnd(t,n));case 6:return"batch"===this.yieldEvery?r.push(this.nextFrameFunc()):Cl.isNumber(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=9,Promise.all(r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null!=this.trainBegin,!e.t0){e.next=6;break}return e.next=4,GC(t);case 4:return e.next=6,this.trainBegin(t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null!=this.trainEnd,!e.t0){e.next=6;break}return e.next=4,GC(t);case 4:return e.next=6,this.trainEnd(t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(YC);function $C(e,t){return null==e&&(e={}),e instanceof YC?[e]:Array.isArray(e)&&e[0]instanceof YC?e:cA(e).map((function(e){return new QC(e,t)}))}var eI=function(){function e(){Jr(this,e)}return $r(e,null,[{key:"registerCallbackConstructor",value:function(t,n){Cl.assert(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors)e.constructors[+n].forEach((function(e){if(e===t)throw new nA("Duplicate callback constructor.")}))}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,ta(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}(),tI=eI;function nI(e,t,n,r,a,i,o,s,u){var l=new JC,c=[new ZC].concat(ta(tI.createCallbacks(t)));null!=e&&c.push.apply(c,ta(e)),c.push(l);var d=new KC(c);return d.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:u}),{callbackList:d,history:l}}function rI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return gA(e,Vp.SerializationMap.getMap().classNameMap,t,"layer",n)}function aI(e,t){return Wh((function(){"float32"!==e.dtype&&(e=th(e,"float32"));var n=Xm(lw(e),t,!0),r=tg(n.shape,ZA()),a=Um(zg(n,r));return uf(e,a)}))}function iI(e,t){return Wh((function(){return Bg(lw(Cg(t,e)),-1)}))}function oI(e,t){return Wh((function(){return Bg(cf(Cg(t,e)),-1)}))}function sI(e,t){return Wh((function(){var n=Cg(e,t),r=rm(cf(e),ZA(),Number.MAX_VALUE),a=cf(uf(n,r));return lf(100,Bg(a,-1))}))}function uI(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Wh((function(){if(n)t=Lv(t);else{var r=Xm(t,t.shape.length-1,!0);t=uf(t,r)}return t=rm(t,ZA(),1-ZA()),ep(Xm(lf(th(e,"float32"),fg(t)),t.shape.length-1))}))}function lI(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Wh((function(){var r=th(ng($A(e)),"int32"),a=(t=rm(t,ZA(),1-ZA())).shape;return uI(Bf(Mh(r,a[a.length-1]),a),t,n)}))}function cI(e,t){return Wh((function(){var n;return n=rm(t,ZA(),1-ZA()),n=fg(uf(n,Cg(1,n))),Bg(function(e,t){if(!Cl.arraysEqual(e.shape,t.shape))throw new nA("logits and labels must have the same shape, but got shapes ".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return Wh((function(){var n=vv(t),r=ep(cf(t));return of(Cg(n,lf(t,e)),mg(Zm(r)))}))}(e,n),-1)}))}function dI(e,t){return Wh((function(){var n=aI(e,-1),r=aI(t,-1),a=lf(n,r);return ep(Xm(a,-1))}))}tI.constructors={};var hI={meanSquaredError:iI,meanAbsoluteError:oI,meanAbsolutePercentageError:sI,meanSquaredLogarithmicError:function(e,t){return Wh((function(){var n=rm(t,ZA(),Number.MAX_VALUE),r=fg(of(1,n)),a=rm(e,ZA(),Number.MAX_VALUE),i=fg(of(1,a));return Bg(lw(Cg(r,i)),-1)}))},squaredHinge:function(e,t){return Wh((function(){var n=zg(0,Cg(1,lf(e,t)));return Bg(lw(n),-1)}))},hinge:function(e,t){return Wh((function(){var n=zg(0,Cg(1,lf(e,t)));return Bg(n,-1)}))},categoricalHinge:function(e,t){return Wh((function(){var n=Xm(lf(e,t),-1),r=Wm(lf(Cg(1,e),t),-1);return zg(0,of(1,Cg(r,n)))}))},logcosh:function(e,t){return Wh((function(){var n=Math.log(2),r=Cg(t,e),a=Cg(of(r,kg(lf(-2,r))),n);return Bg(a,-1)}))},categoricalCrossentropy:uI,sparseCategoricalCrossentropy:lI,binaryCrossentropy:cI,kullbackLeiblerDivergence:function(e,t){return Wh((function(){var n=rm(e,ZA(),1),r=rm(t,ZA(),1);return Xm(lf(e,fg(uf(n,r))),-1)}))},poisson:function(e,t){return Wh((function(){var n=fg(of(ZA(),t));return Bg(Cg(t,lf(e,n)),-1)}))},cosineProximity:dI};function pI(e){if("string"==typeof e){if(e in hI)return hI[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,'. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy')),new nA(t)}return e}function fI(e,t){return Wh((function(){var n=lf(.5,Zg(t)),r=JA(ag(t,n),e.dtype);return Bg(Sm(e,r),-1)}))}function mI(e,t){return Wh((function(){return JA(Sm(gf(e,-1),gf(t,-1)),"float32")}))}function gI(e,t){return Wh((function(){return th(Xm(Tg(Sm(e,1),Sm(t,1))),"float32")}))}function vI(e,t){return Wh((function(){var n=gI(e,t),r=function(e,t){return Wh((function(){return th(Xm(Tg(Sm(e,0),Sm(t,1))),"float32")}))}(e,t),a=of(n,r);return th(Cm(ag(a,0),uf(n,a),0),"float32")}))}function yI(e,t){return Wh((function(){var n=gI(e,t),r=function(e,t){return Wh((function(){return th(Xm(Tg(Sm(e,1),Sm(t,0))),"float32")}))}(e,t),a=of(n,r);return th(Cm(ag(a,0),uf(n,a),0),"float32")}))}function bI(e,t){return cI(e,t)}function xI(e,t){return e.rank===t.rank&&(e=Uv(e,[e.rank-1])),(t=gf(t,-1)).dtype!==e.dtype&&(t=th(t,e.dtype)),th(Sm(e,t),"float32")}var AI=uI,wI=lI,kI={binaryAccuracy:fI,categoricalAccuracy:mI,precision:vI,categoricalCrossentropy:AI,sparseCategoricalCrossentropy:wI,mse:iI,MSE:iI,mae:oI,MAE:oI,mape:sI,MAPE:sI,cosine:dI};function SI(e){if("string"==typeof e&&e in kI)return kI[e];if("string"!=typeof e&&null!=e)return e;throw new nA("Unknown metric ".concat(e))}function CI(e){if(sA(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"==typeof e)return e;for(var t,n=0,r=Object.keys(hI);n<r.length;n++){var a=r[n];if(hI[a]===e){t=a;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(kI);i<o.length;i++){var s=o[i];if(kI[s]===e){t=s;break}}return void 0!==t?t:e.name}var II=1048576;function EI(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!TI(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>II&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in size (length=').concat(r.length," when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ").concat(II,"."))}}function TI(e){if(null===e)return!0;if("object"==typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!=typeof r||!TI(e[r]))return!1}return!0}if(Array.isArray(e)){var a,i=ea(e);try{for(i.s();!(a=i.n()).done;){if(!TI(a.value))return!1}}catch(s){i.e(s)}finally{i.f()}return!0}return!1}var o=typeof e;return"string"===o||"number"===o||"boolean"===o}function NI(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=MI(e),o=["Layer (type)","Input Shape","Output shape","Param #"];if(i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var s in o.push("Receives inputs"),r=[],e.nodesByDepth){var u;(u=r).push.apply(u,ta(e.nodesByDepth[s]))}a("_".repeat(t)),RI(o,n,a),a("=".repeat(t));for(var l=e.layers,c=0;c<l.length;++c)i?OI(l[c],n,a):PI(l[c],n,r,a),a((c===l.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var d=_I(e),h=jw(e.nonTrainableWeights);a("Total params: ".concat(d+h)),a("Trainable params: ".concat(d)),a("Non-trainable params: ".concat(h)),a("_".repeat(t))}function _I(e){return null!=e.collectedTrainableWeights?jw(e.collectedTrainableWeights):jw(e.trainableWeights)}function MI(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var s=o[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,ta(s))}if(t){var u,l=ea(e.layers);try{for(l.s();!(u=l.n()).done;){var c,d=u.value,h=!1,p=ea(d.inboundNodes);try{for(p.s();!(c=p.n()).done;){var f=c.value;if(-1!==r.indexOf(f)){if(h){t=!1;break}h=!0}}}catch(m){p.e(m)}finally{p.f()}if(!t)break}}catch(m){l.e(m)}finally{l.f()}}return t}function RI(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function OI(e,t,n){var r,a;try{a=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(s){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(s){r="multiple"}var i=e.name,o=e.getClassName();RI(["".concat(i," (").concat(o,")"),a,r,e.countParams().toString()],t,n)}function PI(e,t,n,r){var a,i;try{i=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(v){i="multiple"}try{a=JSON.stringify(e.outputShape)}catch(v){a="multiple"}var o,s=[],u=ea(e.inboundNodes);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(l)))for(var c=0;c<l.inboundLayers.length;++c){var d=l.inboundLayers[c].name,h=l.nodeIndices[c],p=l.tensorIndices[c];s.push("".concat(d,"[").concat(h,"][").concat(p,"]"))}}}catch(y){u.e(y)}finally{u.f()}var f=e.name,m=e.getClassName(),g=0===s.length?"":s[0];RI(["".concat(f," (").concat(m,")"),i,a,e.countParams().toString(),g],t,r);for(var v=1;v<s.length;++v)RI(["","","","",s[v]],t,r)}function FI(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function DI(e,t){if(null===e)return null;if("string"==typeof e)return hA(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];FI(t,a,i)?n.push(i):n.push(DI(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var l=u[s],c=e[l];if("name"===l&&"string"==typeof c)o[l]=c;else{var d=hA(l);o[d]=DI(c,d)}}return o}function LI(e,t){if(null==e)return null;if("string"==typeof e)return dA(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];FI(t,a,i)?n.push(i):n.push(LI(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var l=u[s],c=e[l],d=dA(l);o[d]="name"!==l&&"className"!==l||"string"!=typeof c?LI(c,l):c}return o}var zI="0.0.0",BI=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=TA(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],yA(r.inputs).length!==r.inputs.length)throw new nA("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ".concat(r.inputs.map((function(e){return e.name}))));yA(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var i,o=ea(r.outputs);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.sourceLayer,l=s.nodeIndex,c=s.tensorIndex;r.outputLayers.push(u),r.outputLayersNodeIndices.push(l),r.outputLayersTensorIndices.push(c)}}catch(xe){o.e(xe)}finally{o.f()}var d,h=ea(r.inputs);try{for(h.s();!(d=h.n()).done;){var p=d.value,f=p.sourceLayer,m=p.nodeIndex,g=p.tensorIndex;sA(0===m,"input layer has >1 nodes"),sA(0===g,"input layer has >1 tensors"),r.inputLayers.push(f),r.inputLayersNodeIndices.push(m),r.inputLayersTensorIndices.push(g)}}catch(xe){h.e(xe)}finally{h.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var v=0;v<r.inputLayers.length;v++){var y=r.inputLayers[v];if(!(y instanceof $w))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. Received inputs: ".concat(e.inputs,". Input ").concat(v," (0-based) originates from layer type ").concat(y.getClassName(),"."));r.inputNames.push(y.name),r.feedInputShapes.push(y.batchInputShape),r.feedInputNames.push(y.name)}var b,x=ea(r.outputLayers);try{for(x.s();!(b=x.n()).done;){var A=b.value;r.outputNames.push(A.name)}}catch(xe){x.e(xe)}finally{x.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var w,k={},S={},C={},I={},E={},T=[],N=function e(t,a,i,o,s,u){(null==o||null==s||null==u)&&(o=t.sourceLayer,s=t.nodeIndex,u=t.tensorIndex);var l=o.inboundNodes[s];if(-1!==i.indexOf(l))throw new tA("The tensor ".concat(t.name,' at layer "').concat(o.name,'" is part of a cycle.'));if(-1===a.indexOf(l)){r.containerNodes.add(n.nodeKey(o,s)),o.id in E||(E[o.id]=Object.keys(E).length),-1===i.indexOf(l)&&i.push(l);for(var c=l.inboundLayers.length,d=0;d<c;d++){e(l.inputTensors[d],a,i,l.inboundLayers[d],l.nodeIndices[d],l.tensorIndices[d])}for(a.push(l);i.indexOf(l)>=0;)i.splice(i.indexOf(l),1);T.push(l)}},_=[],M=[],R=ea(r.outputs);try{for(R.s();!(w=R.n()).done;){N(w.value,_,M)}}catch(xe){R.e(xe)}finally{R.f()}var O,P=ea(T.slice().reverse());try{for(P.s();!(O=P.n()).done;){var F=O.value;S[F.id]=F,F.id in k||(k[F.id]=0);var D=k[F.id],L=null==C[F.outboundLayer.id]?0:C[F.outboundLayer.id];D=Math.max(D,L),C[F.outboundLayer.id]=D,I[F.outboundLayer.id]=F.outboundLayer,k[F.id]=D;for(var z=0;z<F.inboundLayers.length;z++){var B=F.inboundLayers[z],W=F.nodeIndices[z],j=B.inboundNodes[W],V=null==k[j.id]?0:k[j.id];k[j.id]=Math.max(D+1,V),S[j.id]=j}}}catch(xe){P.e(xe)}finally{P.f()}var H={};for(var U in k){var G=k[U];G in H||(H[G]=[]),H[G].push(S[U])}var X={};for(var q in C){var Y=C[q];Y in X||(X[Y]=[]),X[Y].push(I[q])}var K=Object.keys(X).map((function(e){return parseInt(e,10)})).sort(vA);r.layers=[];var Z,J=ea(K);try{for(J.s();!(Z=J.n()).done;){var Q=X[Z.value];Q.sort((function(e,t){var n=E[e.id],r=E[t.id];return n<r?-1:n>r?1:0}));var $,ee=ea(Q);try{for(ee.s();!($=ee.n()).done;){var te=$.value;te instanceof n&&r.internalContainerRefs.push(te),r.layers.push(te)}}catch(xe){ee.e(xe)}finally{ee.f()}}}catch(xe){J.e(xe)}finally{J.f()}r.layersByDepth=X,K=Object.keys(H).map((function(e){return parseInt(e,10)})).sort(vA);var ne,re=r.inputs.slice(),ae=[],ie=ea(K);try{for(ie.s();!(ne=ie.n()).done;){var oe,se=ea(H[ne.value]);try{for(se.s();!(oe=se.n()).done;){var ue=oe.value,le=ue.outboundLayer;if(null!=le){var ce,de=ea(ue.inputTensors);try{for(de.s();!(ce=de.n()).done;){var he=ce.value;if(-1===re.indexOf(he))throw new tA("Graph disconnected: cannot obtain value for tensor ".concat(he,' at layer "').concat(le.name,'". The following previous layers were accessed without issue: ').concat(ae))}}catch(xe){de.e(xe)}finally{de.f()}var pe,fe=ea(ue.outputTensors);try{for(fe.s();!(pe=fe.n()).done;){var me=pe.value;re.push(me)}}catch(xe){fe.e(xe)}finally{fe.f()}ae.push(le.name)}}}catch(xe){se.e(xe)}finally{se.f()}}}catch(xe){ie.e(xe)}finally{ie.f()}r.nodesByDepth=H;var ge,ve=r.layers.map((function(e){return e.name})),ye=ea(ve);try{var be=function(){var e=ge.value,t=ve.filter((function(t){return t===e})).length;if(1!==t)throw new tA('The name "'.concat(e,'" is used ').concat(t," times in the model. All layer names should be unique. Layer names: ")+JSON.stringify(ve))};for(ye.s();!(ge=ye.n()).done;)be()}catch(xe){ye.e(xe)}finally{ye.f()}return r.outboundNodes=[],r.inboundNodes=[],new Kw({outboundLayer:jr(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,Xr(r)}return $r(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=ea(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(s){n.e(s)}finally{n.f()}var a,i=ea(this.internalContainerRefs);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}catch(s){i.e(s)}finally{i.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new nA("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=ea(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=ea(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,ta(r.nonTrainableWeights))}}catch(u){n.e(u)}finally{n.f()}if(!this.trainable){var a,i=[],o=ea(this.layers);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,ta(s.trainableWeights))}}catch(u){o.e(u)}finally{o.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,i=ea(this.layers);try{for(i.s();!(t=i.n()).done;){var o,s=t.value,u=ea(s.weights);try{for(u.s();!(o=u.n()).done;){var l=o.value;if(null!=r[l.originalName])throw new nA("Duplicate weight name: ".concat(l.originalName));r[l.originalName]=l,a++}}catch(g){u.e(g)}finally{u.f()}}}catch(g){i.e(g)}finally{i.f()}var c=[];for(var d in e){var h=d;if(null==r[d]){var p=d.split("/");h=p.slice(0,-2).concat([p[p.length-1]]).join("/")}if(null!=r[h])c.push([r[h],e[d]]);else if(n)throw new nA("Provided weight data has no target variable: ".concat(d));delete r[h]}if(n){var f=[];for(var m in r)f.push(m);if(f.length>0)throw new nA("".concat(f.length," of ").concat(a," weights are not set: ").concat(f))}Gw(c)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(zI),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=LI(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return Wh((function(){e=cA(e);for(var r=new tk,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return ak(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return Wh((function(){var r;return e=cA(e),r=null==t?oA(null,e.length):cA(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=zw(e);if(t.length!==this.inputLayers.length)throw new nA("Invalid inputShape argument ".concat(e,": model has ").concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],i=t[r];n[a.name+"_0_0"]=i}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(vA);if(o.length>1){var s,u=ea(o);try{for(u.s();!(s=u.n()).done;){var l,c=s.value,d=ea(this.nodesByDepth[c]);try{for(d.s();!(l=d.n()).done;){var h=l.value,p=h.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(p.id)){for(var f=[],m=0;m<h.inboundLayers.length;m++){var g=h.inboundLayers[m],v=h.nodeIndices[m],y=h.tensorIndices[m],b=n["".concat(g.name,"_").concat(v,"_").concat(y)];f.push(b)}for(var x=zw(p.computeOutputShape(lA(f))),A=p.inboundNodes.indexOf(h),w=0;w<x.length;w++){n["".concat(p.name,"_").concat(A,"_").concat(w)]=x[w]}}}}catch(R){d.e(R)}finally{d.f()}}}catch(R){u.e(R)}finally{u.f()}}for(var k=[],S=[],C=0;C<this.outputLayers.length;C++){var I=this.outputLayers[C],E=this.outputLayersNodeIndices[C],T=this.outputLayersTensorIndices[C],N="".concat(I.name,"_").concat(E,"_").concat(T);S.push(N)}for(var _=0;_<S.length;_++){var M=S[_];sA(M in n),k.push(n[M])}return lA(k)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=oA(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],i=e[r],o=t[r];n[a.id]=[i,o]}var s,l=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(vA),c=ea(l);try{for(c.s();!(s=c.n()).done;){var d,h=s.value,p=ea(this.nodesByDepth[h]);try{for(p.s();!(d=p.n()).done;){var f,m=d.value,g=m.outboundLayer,v=m.inputTensors,y=m.outputTensors,b=new Array,x=ea(v);try{for(x.s();!(f=x.n()).done;){var A=f.value;A.id in n&&b.push(n[A.id])}}catch(H){x.e(H)}finally{x.f()}if(b.length===v.length){var w={},k=void 0,S=void 0,C=void 0,I=void 0;if(null!=m.callArgs&&(w=m.callArgs),1===b.length){var E=u(b[0],2),T=E[0],N=E[1];null==w.mask&&(w.mask=N),C=cA(g.call(T,w)),I=cA(g.computeMask(T,N)),k=[T],S=[N]}else k=b.map((function(e){return e[0]})),S=b.map((function(e){return e[1]})),null==w.mask&&(w.mask=S),C=cA(g.call(k,w)),I=cA(g.computeMask(k,S));if(g.activityRegularizer)throw new rA("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var _=0;_<y.length;++_){var M=y[_],R=C[_],O=I[_];n[M.id]=[R,O]}}}}catch(H){p.e(H)}finally{p.f()}}}catch(H){c.e(H)}finally{c.f()}var P,F=[],D=[],L=[],z=ea(this.outputs);try{for(z.s();!(P=z.n()).done;){var B=P.value;sA(B.id in n,"Could not compute output ".concat(B.name," : ").concat(B.id));var W=u(n[B.id],2),j=W[0],V=W[1];L.push(j.shape),F.push(j),D.push(V)}}catch(H){z.e(H)}finally{z.f()}return[F,D,L]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},i=ea(this.layers);try{for(i.s();!(r=i.n()).done;){var o=r.value;t=o instanceof n?1:0;for(var s=0;s<o.inboundNodes.length;s++){var u=n.nodeKey(o,s);this.containerNodes.has(u)&&(a[u]=t,t+=1)}}}catch(l){i.e(l)}finally{i.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new nA("Was asked to retrieve layer at index ".concat(t,", but model only has ").concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new nA("Provide either a layer name or layer index");var n,r=ea(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(i){r.e(i)}finally{r.f()}throw new nA("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return Wh((function(){var t,r=[],a=ea(e.layers);try{for(a.s();!(t=a.n()).done;)for(var i=t.value,o=0;o<i.inboundNodes.length;++o){var s=n.nodeKey(i,o);e.containerNodes.has(s)&&r.push.apply(r,ta(i.calculateLosses()))}}catch(u){a.e(u)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],i=ea(this.layers);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,s=o.getClassName(),u=o.getConfig(),l=[],c=0;c<o.inboundNodes.length;c++){var d=o.inboundNodes[c],h=n.nodeKey(o,c),p={};if(this.containerNodes.has(h)){if(d.callArgs)try{JSON.stringify(d.callArgs),p=d.callArgs}catch(f){console.warn("Layer ".concat(o.name," was passed non-serializable keyword arguments: ").concat(d.callArgs,". They will not be included in the serialized model (and thus will be missing at deserialization time).")),p={}}if(d.inboundLayers.length>0){for(var f=[],m=0;m<d.inboundLayers.length;m++){var g=d.inboundLayers[m],v=d.nodeIndices[m],y=d.tensorIndices[m],b=r[n.nodeKey(g,v)];null==b&&(b=0),f.push([g.name,b,y,p])}l.push(f)}}}var x={};x.name=o.name,x.className=s,x.config=u,x.inboundNodes=l,a.push(x)}}catch(F){i.e(F)}finally{i.f()}t.layers=a;for(var A=[],w=0;w<this.inputLayers.length;w++){var k=this.inputLayers[w],S=this.inputLayersNodeIndices[w],C=n.nodeKey(k,S);if(this.containerNodes.has(C)){var I=r[C];null==I&&(I=0);var E=this.inputLayersTensorIndices[w];A.push([k.name,I,E])}}t.inputLayers=A;for(var T=[],N=0;N<this.outputLayers.length;N++){var _=this.outputLayers[N],M=this.outputLayersNodeIndices[N],R=n.nodeKey(_,M);if(this.containerNodes.has(R)){var O=r[R];null==O&&(O=0);var P=this.outputLayersTensorIndices[N];T.push([_.name,O,P])}}return t.outputLayers=T,t}},{key:"stateful",get:function(){if(this._stateful)throw new nA("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=ea(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;Wh((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function o(e,t){var n,a,o=[],s=ea(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,l=u[0],c=u[1],d=u[2];if(n=null==u[3]?{}:u[3],!(l in r))return void i(e,t);var h=r[l];if(h.inboundNodes.length<=c)return void i(e,t);var p=h.inboundNodes[c];o.push(p.outputTensors[d])}}catch(f){s.e(f)}finally{s.f()}o.length>0&&e.apply(lA(o),n)}function s(e){var a=e.name,o=rI(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),r[a]=o,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new nA("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)}))}var u,l=t.name,c=t.layers,d=ea(c);try{for(d.s();!(u=d.n()).done;){var h=u.value;s(h)}}catch(B){d.e(B)}finally{d.f()}for(;!bA(a);){var p,f=ea(c);try{for(f.s();!(p=f.n()).done;){var m=p.value,g=r[m.name];if(g.name in a){var v=a[g.name];delete a[g.name];var y,b=ea(v);try{for(b.s();!(y=b.n()).done;){var x=y.value;o(g,x)}}catch(B){b.e(B)}finally{b.f()}}}}catch(B){f.e(B)}finally{f.f()}}var A,w=[],k=[],S=t.inputLayers,C=ea(S);try{for(C.s();!(A=C.n()).done;){var I=A.value,E=I[0],T=I[1],N=I[2];sA(E in r);var _=r[E].inboundNodes[T].outputTensors;w.push(_[N])}}catch(B){C.e(B)}finally{C.f()}var M,R=t.outputLayers,O=ea(R);try{for(O.s();!(M=O.n()).done;){var P=M.value,F=P[0],D=P[1],L=P[2];sA(F in r);var z=r[F].inboundNodes[D].outputTensors;k.push(z[L])}}catch(B){O.e(B)}finally{O.f()}return new e({inputs:w,outputs:k,name:l})}}]),n}(Jw);function WI(e,t){return function(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," element(s), but the model has ").concat(r," outputs. Make sure a set of weights is provided for each model output."));return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, so ").concat(n," must be either an array with ").concat(r," elements or an object with ").concat(t," keys. Provided ").concat(n," not understood: ").concat(JSON.stringify(e)))}(e,t,"classWeight")}function jI(e,t,n,r){return VI.apply(this,arguments)}function VI(){return VI=Mr(Nr().mark((function e(t,n,r,a){var i,o,s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=14;break}return i=Wh((function(){if(1===t.shape.length)return nh(t);if(2===t.shape.length){if(t.shape[1]>1)return gf(t,1);if(1===t.shape[1])return Bf(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") during handling of class weights. The size is expected to be >= 1."))}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during handling of class weights. The rank is expected to be 1 or 2."))})),e.t0=Array,e.next=7,i.data();case 7:return e.t1=e.sent,o=e.t0.from.call(e.t0,e.t1),jh(i),s=[],e.abrupt("return",(o.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. The class ".concat(e," exists in the data but not in classWeight"));s.push(r[e])})),Kv(s,"float32")));case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e)}))),VI.apply(this,arguments)}function HI(e,t){return lf(e,t)}function UI(e,t){var n,r,a=t;n=a.xs,r=a.ys,Cl.assert(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ".concat(t)}));var i=GI("input",e.inputNames,n),o=GI("output",e.outputNames,r),s=i[0].shape[0];Cl.assert(i.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset provides ").concat(i.length," inputs.  (Expected input keys: ").concat(JSON.stringify(e.inputNames),")")})),Cl.assert(o.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset provides ").concat(o.length," outputs.  (Expected output keys: ").concat(JSON.stringify(e.outputNames),")")}));for(var u=function(t){Cl.assert(i[t].shape[0]===s,(function(){return"Batch size mismatch: input ".concat(e.inputNames[t]," has ").concat(i[t].shape[0],"; expected  ").concat(s," based on input ").concat(e.inputNames[0],".")}))},l=0;l<i.length;l++)u(l);for(var c=function(t){Cl.assert(o[t].shape[0]===s,(function(){return"Batch size mismatch: output ".concat(e.outputNames[t]," has ").concat(o[t].shape[0],"; expected  ").concat(s," based on input ").concat(e.inputNames[0],".")}))},d=0;d<o.length;d++)c(d);return{xs:i,ys:o}}function GI(e,t,n){if(n instanceof sc)return[n];if(Array.isArray(n))return Cl.assert(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,a=[],i=ea(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(null==n[o])throw new nA("The feature data generated by the dataset lacks the required ".concat(e," key '").concat(o,"'."));a.push(n[o])}}catch(s){i.e(s)}finally{i.f()}return a}function XI(e){if(3===e.length)throw new rA("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function qI(e,t,n){return YI.apply(this,arguments)}function YI(){return YI=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h,p,f,m,g,v,y,b,x,A,w,k,S,C,I,E,T,N,_,M,R,O,P,F,D;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,Cl.assert(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),Cl.assert(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),Cl.assert(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive integer, but got ".concat(r.epochs)})),Cl.assert(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ".concat(r.batchesPerEpoch)})),Cl.assert(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,(i=null!=r.validationData)&&(ZI(r.validationData)?Cl.assert(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ".concat(r.validationBatches)})):(u=XI(r.validationData),o=u.xs,s=u.ys)),l=t.makeTrainFunction(),c=t.getDedupedMetricsNames(),d=i?c.slice().concat(c.map((function(e){return"val_"+e}))):c.slice(),h=$C(r.callbacks,r.yieldEvery),p=null==r.verbose?1:r.verbose,f=nI(h,p,r.epochs,null,null,KI(n,r),null,i,d),m=f.callbackList,g=f.history,m.setModel(t),t.history=g,e.next=14,m.onTrainBegin();case 14:return t.stopTraining_=!1,v=null==r.initialEpoch?0:r.initialEpoch,e.next=18,n.iterator();case 18:y=e.sent;case 19:if(!(v<r.epochs)){e.next=88;break}return b={},e.next=23,m.onEpochBegin(v);case 23:if(x=0,A=0,e.t0=a,e.t0){e.next=29;break}return e.next=28,n.iterator();case 28:y=e.sent;case 29:if(a&&!(x<r.batchesPerEpoch)){e.next=81;break}return e.next=32,y.next();case 32:if(w=e.sent,!a||!w.done){e.next=36;break}return console.warn("You provided `batchesPerEpoch` as ".concat(r.batchesPerEpoch,", but your dataset iterator ran out of data after ").concat(x," batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, ").concat(r.batchesPerEpoch*r.epochs," batches). You may need to use the repeat() function when building your dataset.")),e.abrupt("break",81);case 36:if(null==w.value){e.next=63;break}return k=UI(t,w.value),S=k.xs,C=k.ys,(I={}).batch=A,I.size=S[0].shape[0],e.next=42,m.onBatchBegin(A,I);case 42:if(E=[],null==r.classWeight){e.next=55;break}T=WI(r.classWeight,t.outputNames),N=0;case 46:if(!(N<T.length)){e.next=55;break}return e.t1=E,e.next=50,jI(C[N],null,T[N]);case 50:e.t2=e.sent,e.t1.push.call(e.t1,e.t2);case 52:++N,e.next=46;break;case 55:for(_=S.concat(C).concat(E),M=l(_),jh(_),R=0;R<c.length;++R)O=c[R],P=M[R],I[O]=P,Vh(P);return e.next=60,m.onBatchEnd(A,I);case 60:qC(I),A++,x++;case 63:if(!(a?x>=r.batchesPerEpoch:w.done)){e.next=77;break}if(!i){e.next=76;break}if(F=void 0,!ZI(r.validationData)){e.next=74;break}return e.t3=cA,e.next=70,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 70:e.t4=e.sent,F=(0,e.t3)(e.t4),e.next=75;break;case 74:F=cA(t.evaluate(o,s,{batchSize:null==r.validationBatchSize?32:r.validationBatchSize,verbose:0}));case 75:for(D=0;D<t.metricsNames.length;++D)b["val_".concat(t.metricsNames[D])]=F[D];case 76:return e.abrupt("break",81);case 77:if(!t.stopTraining_){e.next=79;break}return e.abrupt("break",81);case 79:e.next=29;break;case 81:return e.next=83,m.onEpochEnd(v,b);case 83:if(v++,!t.stopTraining_){e.next=86;break}return e.abrupt("break",88);case 86:e.next=19;break;case 88:return e.next=90,m.onTrainEnd();case 90:return e.next=92,t.history.syncData();case 92:return e.abrupt("return",t.history);case 93:return e.prev=93,t.isTraining=!1,e.finish(93);case 96:case"end":return e.stop()}}),e,null,[[4,,93,96]])}))),YI.apply(this,arguments)}function KI(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function ZI(e){return"function"==typeof e.iterator}function JI(e){return"function"==typeof e.next}function QI(e,t,n){return $I.apply(this,arguments)}function $I(){return $I=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,i=t.testFunction,o=[],!(r.verbose>0)){e.next=4;break}throw new rA("Verbose mode is not implemented yet.");case 4:if(Cl.assert(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but received ".concat(JSON.stringify(r.batches))})),!JI(n)){e.next=9;break}e.t0=n,e.next=12;break;case 9:return e.next=11,n.iterator();case 11:e.t0=e.sent;case 12:s=e.t0,u=0,l=0,c=Nr().mark((function e(){var n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,o=Wh((function(){return n.value&&function(){var e=UI(t,n.value),r=e.xs,a=e.ys,s=r.concat(a),c=Wh((function(){return i(s)}));if(jh(s),0===l)for(var d=0;d<c.length;++d)o.push(Hm(0));for(var h=s[0].shape[0],p=function(e){var t=c[e],n=o[e];o[e]=Wh((function(){return of(o[e],lf(h,t))})),l>0&&jh(n)},f=0;f<c.length;++f)p(f);jh(c),u+=h,++l}(),o})),!n.done){e.next=6;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` batches (in this case, ".concat(r.batches," batches). You may need to use the repeat() function when building your dataset.")),e.abrupt("return","break");case 6:case"end":return e.stop()}}),e)}));case 16:if(a&&!(l<r.batches)){e.next=23;break}return e.delegateYield(c(),"t1",18);case 18:if("break"!==e.t1){e.next=21;break}return e.abrupt("break",23);case 21:e.next=16;break;case 23:for(d=0;d<o.length;++d)h=o[d],o[d]=uf(o[d],u),jh(h);return e.abrupt("return",lA(o));case 25:case"end":return e.stop()}}),e)}))),$I.apply(this,arguments)}function eE(e){Cl.assert(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function tE(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return ew(e,t,n-t)})):ew(e,t,n-t)}function nE(e,t){return Wh((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return nE(e,t)})):uw(e,"int32"===t.dtype?t:th(t,"int32"))}))}function rE(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function aE(e,t,n,r,a,i,o,s,u,l,c,d,h,p,f){return iE.apply(this,arguments)}function iE(){return iE=Mr(Nr().mark((function e(t,n,r,a,i,o,s,u,l,c,d,h,p,f,m){var g,v,y,b,x,A,w,k;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==i&&(i=32),null==o&&(o=1),null==d&&(d=!0),null==p&&(p=0),g=!1,null!=l&&null!=c&&(g=!0),null==m||(g=!0,null!=f)){e.next=4;break}throw new nA("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 4:return null!=(v=t.checkNumSamples(r,i,f,"steps_per_epoch"))&&(y=KA(0,v)),null==s&&(s=1),b=nI(u,s,o,p,v,f,i,g,h),x=b.callbackList,A=b.history,x.setModel(t),t.history=A,e.next=11,x.onTrainBegin();case 11:t.stopTraining_=!1,w=Nr().mark((function e(o){var s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.onEpochBegin(o);case 2:if(s={},null==f){e.next=5;break}throw new rA("stepsPerEpoch mode is not implemented yet.");case 5:return e.delegateYield(Nr().mark((function e(){var o,u,h,p;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("batch"!==d){e.next=2;break}throw new rA("batch shuffling is not implemneted yet");case 2:d&&Cl.shuffle(y),o=Kv(y),u=rE(v,i),h=Nr().mark((function e(d){var h;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h={},e.next=3,x.onBatchBegin(d,h);case 3:return Wh((function(){var e=u[d][0],p=u[d][1],f=ew(o,e,p-e);h.batch=d,h.size=p-e;for(var m=nE(r,f),v=n(m),y=0;y<a.length;++y){var b=a[y],x=v[y];h[b]=x,Vh(x)}if(d===u.length-1&&g)for(var A=t.testLoop(l,c,i),w=0;w<a.length;++w){var k=a[w],S=A[w];Vh(S),s["val_"+k]=S}})),e.next=6,x.onBatchEnd(d,h);case 6:if(qC(h),!t.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),p=0;case 6:if(!(p<u.length)){e.next=14;break}return e.delegateYield(h(p),"t0",8);case 8:if("break"!==e.t0){e.next=11;break}return e.abrupt("break",14);case 11:++p,e.next=6;break;case 14:o.dispose();case 15:case"end":return e.stop()}}),e)}))(),"t0",6);case 6:return e.next=8,x.onEpochEnd(o,s);case 8:if(!t.stopTraining_){e.next=10;break}return e.abrupt("return","break");case 10:case"end":return e.stop()}}),e)})),k=p;case 14:if(!(k<o)){e.next=22;break}return e.delegateYield(w(k),"t0",16);case 16:if("break"!==e.t0){e.next=19;break}return e.abrupt("break",22);case 19:++k,e.next=14;break;case 22:return e.next=24,x.onTrainEnd();case 24:return e.next=26,t.history.syncData();case 26:return e.abrupt("return",t.history);case 27:case"end":return e.stop()}}),e)}))),iE.apply(this,arguments)}function oE(e,t,n){return sE.apply(this,arguments)}function sE(){return sE=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h,p,f,m,g,v,y,b,x,A,w,k,S,C,I,E,T,N=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=N.length>3&&void 0!==N[3]?N[3]:{},!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,eE(f=null==a.batchSize?32:a.batchSize),m=!1,e.next=10,t.standardizeUserData(n,r,a.sampleWeight,a.classWeight,m,f);case 10:if(g=e.sent,i=g[0],o=g[1],p=g[2],v=!1,!(null!=a.validationData&&a.validationData.length>0)){e.next=26;break}if(v=!0,2!==a.validationData.length){e.next=18;break}l=a.validationData[0],c=a.validationData[1],e.next=19;break;case 18:throw 3===a.validationData.length?new rA("validationData including sample weights is not supported yet."):new nA("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ".concat(a.validationData," is invalid."));case 19:return b=!0,e.next=22,t.standardizeUserData(l,c,null,null,b,f);case 22:x=e.sent,d=x[0],h=x[1],y=d.concat(h),e.next=27;break;case 26:null!=a.validationSplit&&a.validationSplit>0&&a.validationSplit<1?(v=!0,A=Math.floor(i[0].shape[0]*(1-a.validationSplit)),w=i[0].shape[0],d=tE(i,A,w),s=i,i=tE(i,0,A),h=tE(o,A,w),u=o,o=tE(o,0,A),y=d.concat(h)):null!=a.validationSteps&&(v=!0);case 27:return k=i.concat(o).concat(p),t.checkTrainableWeightsConsistency(),S=t.makeTrainFunction(),C=t.getDedupedMetricsNames(),v?(t.makeTestFunction(),I=t.testFunction,E=C.slice().concat(C.map((function(e){return"val_"+e})))):(I=null,y=[],E=C.slice()),T=$C(a.callbacks,a.yieldEvery),e.next=34,aE(t,S,k,C,f,a.epochs,a.verbose,T,I,y,a.shuffle,E,a.initialEpoch,null,null);case 34:return e.abrupt("return",e.sent);case 35:return e.prev=35,t.isTraining=!1,lE(i,n),lE(o,r),lE(s,n),lE(u,r),lE(d,l),lE(h,c),null!=p&&jh(p),e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[4,,35,38]])}))),sE.apply(this,arguments)}function uE(e){var t=[];e instanceof sc&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(QA(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function lE(e,t){if(null!=e){var n=[];if(t instanceof sc)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var i=[];if(e instanceof sc)-1===n.indexOf(e.id)&&i.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&i.push(e)}));else if(null!=e)for(var o in e){var s=e[o];-1===n.indexOf(s.id)&&i.push(s)}i.forEach((function(e){e.isDisposed||e.dispose()}))}}function cE(e){return Array.isArray(e)}function dE(e){return!function(e){return e instanceof sc}(e)&&!cE(e)}function hE(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var o=!1;if(cE(e)&&e.length>0)o=!0;else if(dE(e)){for(var s in e)if(e.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new nA("Error when checking model ".concat(i," expected no data, but got ").concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(dE(e)){r=[];var u,l=ea(t);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(null==e[c])throw new nA('No data provided for "'.concat(c,'". Need data for each key in: ').concat(t));r.push(e[c])}}catch(g){l.e(g)}finally{l.f()}}else if(cE(e)){if(e.length!==t.length)throw new nA("Error when checking model ".concat(i,": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ").concat(t.length," Tensor(s), but instead got the following list of Tensor(s): ").concat(e));r=e}else{if(t.length>1)throw new nA("The model ".concat(i," expects ").concat(t.length," Tensor(s), but only received one Tensor. Found: Tensor with shape ").concat(e.shape));r=[e]}if(r=uE(r),null!=n)for(var d=0;d<t.length;++d)if(null!=n[d]){var h=r[d];if(h.shape.length!==n[d].length)throw new nA("Error when checking ".concat(i,": expected ").concat(t[d]," to have ").concat(n[d].length," dimension(s). but got array with shape ").concat(h.shape));for(var p=0;p<n[d].length;++p)if(0!==p||a){var f=h.shape[p],m=n[d][p];if(null!=m&&m>=0&&f!==m)throw new nA("".concat(i," expected a batch of elements where each example has shape [").concat(n[d].slice(1,n[d].length),"] (i.e.,tensor shape [*,").concat(n[d].slice(1,n[d].length),"]) but the ").concat(i," received an input with ").concat(h.shape[0]," examples, each with shape [").concat(h.shape.slice(1,h.shape.length),"] (tensor shape [").concat(h.shape,"])"))}}return r}function pE(e,t,n){var r=yA(e.map((function(e){return e.shape[0]})));r.sort();var a=yA(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new nA("All input Tensors (x) should have the same number of samples. Got array shapes: ".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(a.length>1)throw new nA("All target Tensors (y) should have the same number of samples. Got array shapes: ".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&a.length>0&&!Cl.arraysEqual(r,a))throw new nA("Input Tensors should have the same number of samples as target Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target sample(s)."))}function fE(e,t,n){for(var r=[iI,cI,uI],a=0;a<e.length;++a){var i=e[a],o=t[a],s=n[a];if(null!=o){if(o===uI&&1===i.shape[i.shape.length-1])throw new nA("You are passing a target array of shape ".concat(i.shape," while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes]."));if(-1!==r.indexOf(o))for(var u=i.shape.slice(1),l=s.slice(1),c=0;c<u.length;++c){var d=u[c],h=l[c];if(null!=h&&d!==h)throw new nA("A target Tensor with shape ".concat(i.shape," was passed for an output of shape ").concat(s,", while using a loss function that expects targets to have the same shape as the output."))}}}}function mE(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new nA("Error when checking model ".concat(i,": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ").concat(t.length," Tensor(s), but instead got ").concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new nA("The model expects ".concat(t.length," ").concat(i," Tensors, but only received one Tensor. Found: array with shape ").concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var s=r[o];if(s.shape.length!==n[o].length)throw new nA("Error when checking ".concat(i,": expected ").concat(t[o]," to have ").concat(n[o].length," dimension(s), but got array with shape ").concat(JSON.stringify(s.shape)));for(var u=0;u<n[o].length;++u)if(0!==u||a){var l=s.shape[u],c=n[o][u];if(null!=c&&c!==l)throw new nA("Error when checking ".concat(i,": expected ").concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but got array with shape ").concat(JSON.stringify(s.shape),"."))}}}var gE=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,e)).isTraining=!1,r}return $r(n,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new nA("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");NI(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return Zb.adagrad(.01)},Adadelta:function(){return Zb.adadelta(1,.95,ZA())},Adam:function(){return Zb.adam(.001,.9,.999,ZA())},Adamax:function(){return Zb.adamax(.002,.9,.999,ZA(),0)},RMSProp:function(){return Zb.rmsprop(.001,.9,0,ZA())},SGD:function(){return Zb.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new nA("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof jb))throw new nA("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new nA("When passing an Array as loss, it should have one entry per model output. The model has ".concat(this.outputs.length," output(s), but you passed loss=").concat(e.loss,"."));n=e.loss.map((function(e){return pI(e)}))}else{var r=pI(e.loss);this.outputs.forEach((function(e){n.push(r)}))}else{for(var a in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(a))throw new nA('Unknown entry in loss dictionary: "'.concat(a,'". Only expected the following keys: ').concat(this.outputNames));var i,o=ea(this.outputNames);try{for(o.s();!(i=o.n()).done;){var s=i.value;null==e.loss[s]&&console.warn('Output "'.concat(s,'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ').concat(s," during training")),n.push(pI(e.loss[s]))}}catch(f){o.e(f)}finally{o.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var u=0;u<this.outputs.length;++u){var l=this.internalOutputShapes[u],c=this.outputNames[u];this.feedOutputNames.push(c),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[u])}var d=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],BA("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===d.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var h=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"==typeof e||"function"==typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],i=ea(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),a.push(s)}}catch(f){i.e(f)}finally{i.f()}return a}(e.metrics,this.outputNames),p=function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])};BA("metric",(function(){for(var e=function(e){if(-1!==d.indexOf(e))return"continue";!function(n){var r,a,i,o,s=ea(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;if("string"==typeof u&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(u)){var l=t.internalOutputShapes[e];1===l[l.length-1]||t.lossFunctions[e]===cI?-1!==["accuracy","acc"].indexOf(u)?a=fI:-1!==["crossentropy","ce"].indexOf(u)&&(a=bI):t.lossFunctions[e]===lI?-1!==["accuracy","acc"].indexOf(u)?a=xI:-1!==["crossentropy","ce"].indexOf(u)&&(a=wI):-1!==["accuracy","acc"].indexOf(u)?a=mI:-1!==["crossentropy","ce"].indexOf(u)&&(a=AI);var c=void 0;-1!==["accuracy","acc"].indexOf(u)?c="acc":-1!==["crossentropy","ce"].indexOf(u)&&(c="ce"),i=a,r=""+c}else i=SI(u),r=""+CI(u);var d=void 0;BA(r,(function(){d=i})),p(e,r,d)}}catch(f){s.e(f)}finally{s.f()}}(h[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;eE(r);var a=!0,i=this.standardizeUserDataXY(e,t,a,r);try{var o=i[0].concat(i[1]);this.makeTestFunction();var s=this.testFunction,u=this.testLoop(s,o,r,n.verbose,n.steps);return lA(u)}finally{lE(i[0],e),lE(i[1],t)}}},{key:"evaluateDataset",value:function(){var e=Mr(Nr().mark((function e(t,n){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.makeTestFunction(),QI(this,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new nA("If ".concat(a," is set, batchSize must be null or undefined.Got batchSize = ").concat(t))}else{if(null==e)throw new nA("Either the input data should have a defined shape, or ".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new nA("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new tk;if(e instanceof sc&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new nA("The number of inputs provided (".concat(e.length,") does not match the number of inputs of this model (").concat(this.inputs.length,")."));for(var o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else{var s,u=ea(this.inputs);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=e[l.name];if(null==c)throw new nA("No value is provided for the model's input ".concat(l.name));i.add(l,c)}}catch(h){u.e(h)}finally{u.f()}}var d=ak(a,i);return n?d:d[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=oA(null,e.length),r=e.length,a=ea(this.layers);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],s=o.map((function(e){return e.name})),u=0;u<e.length;++u){var l=s.indexOf(e[u]);if(-1!==l&&(n[u]=o[l],r--),0===r)break}if(0===r)break}}catch(d){a.e(d)}finally{a.f()}if(r>0){var c=[];throw n.forEach((function(t,n){null==t&&c.push(e[n])})),new nA("Cannot find SymbolicTensors for output name(s): ".concat(JSON.stringify(c)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Wh((function(){var a=t.checkNumSamples(e);if(r)throw new rA("Verbose predictLoop() is not implemented yet.");for(var i=rE(a,n),o=t.outputs.map((function(e){return[]})),s=function(n){Wh((function(){var r=i[n][0],a=i[n][1],o=tE(e,r,a),s=[];if(Array.isArray(o))for(var u=0;u<o.length;++u)s.push({key:t.inputs[u],value:o[u]});else s.push({key:t.inputs[0],value:o});var l=new tk(s);return ak(t.outputs,l)})).forEach((function(e,t){return o[t].push(e)}))},u=0;u<i.length;++u)s(u);return lA(o.map((function(e){return Vf(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=uE(e);mE(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return eE(r),this.predictLoop(n,r)}finally{lE(n,e)}}},{key:"predictOnBatch",value:function(e){mE(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new tA("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var i=this.feedOutputShapes[a];this.feedLossFns[a]===lI?r.push(i.slice(0,i.length-1).concat([1])):r.push(i)}if(pE(e=hE(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=hE(t,this.feedOutputNames,r,!1,"target")),fE(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new nA("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=Mr(Nr().mark((function e(t,n,r,a){var i,o,s,l,c,d,h,p,f,m=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(m.length>4&&void 0!==m[4])||m[4],o=m.length>5?m[5]:void 0,s=this.standardizeUserDataXY(t,n,i,o),l=u(s,2),c=l[0],d=l[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(h=null,null==a){e.next=19;break}p=WI(a,this.outputNames),h=[],f=0;case 10:if(!(f<p.length)){e.next=19;break}return e.t0=h,e.next=14,jI(d[f],null,p[f]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++f,e.next=10;break;case 19:return e.abrupt("return",[c,d,h]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return Wh((function(){var o=r.checkNumSamples(t,n,i,"steps"),s=[];if(a>0)throw new rA("Verbose mode is not implemented yet.");if(null!=i)throw new rA("steps mode in testLoop() is not implemented yet");for(var u=rE(o,n),l=Kv(KA(0,o)),c=0;c<u.length;++c){var d=u[c][0],h=u[c][1],p=ew(l,d,h-d),f=nE(t,p),m=e(f);if(0===c)for(var g=0;g<m.length;++g)s.push(Hm(0));for(var v=0;v<m.length;++v){var y=m[v];s[v]=of(s[v],lf(h-d,y))}}for(var b=0;b<s.length;++b)s[b]=uf(s[b],o);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;uA(e,r)>1&&(a+="_".concat(uA(e.slice(0,n),r))),t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),o=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var u,l=new tk(t),c=ak(e.outputs,l,{training:!0}),d=0;d<e.lossFunctions.length;++d){var h=e.lossFunctions[d](a[d],c[d]);null!=i[d]&&(h=HI(h,i[d]));var p=Bg(h);n.push(p),u=0===d?h:of(u,h)}for(var f=0;f<e.metricsTensors.length;++f){var m=void 0;if(e.outputs.length>1&&f<e.outputs.length)m=n[f];else{var g=e.metricsTensors[f][0],v=e.metricsTensors[f][1];m=Bg(g(a[v],c[v]))}Vh(m),o.push(m)}return u=Bg(u),e.calculateLosses().forEach((function(e){u=of(u,e)})),u}),!0,s)].concat(o)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return Wh((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],s=0;s<e.inputs.length;++s)o.push({key:e.inputs[s],value:a[s]});for(var u=new tk(o),l=ak(e.outputs,u),c=0;c<e.lossFunctions.length;++c){var d=e.lossFunctions[c],h=Bg(d(i[c],l[c]));n=0===c?h:of(n,h),r.push(n)}for(var p=0;p<e.metricsTensors.length;++p){var f=e.metricsTensors[p][0],m=e.metricsTensors[p][1],g=Bg(f(i[m],l[m]));r.push(g)}return r}))}}},{key:"fit",value:function(){var e=Mr(Nr().mark((function e(t,n){var r,a=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",oE(this,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=Mr(Nr().mark((function e(t,n){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qI(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,u,l,c,d;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],i=r[1],o=this.makeTrainFunction()(a.concat(i)),s=[],u=ea(o),e.prev=8,u.s();case 10:if((l=u.n()).done){e.next=18;break}return c=l.value,e.next=14,c.data();case 14:d=e.sent,s.push(d[0]);case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),u.e(e.t0);case 23:return e.prev=23,u.f(),e.finish(23);case 26:return e.abrupt("return",(jh(o),lE(r[0],t),lE(r[1],n),lA(s)));case 27:case"end":return e.stop()}}),e,this,[[8,20,23,26]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=zr(Dr(n.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=zh().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-zh().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"==typeof this.loss)e=dA(this.loss);else if(Array.isArray(this.loss)){var t,n=ea(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!=typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(u){n.e(u)}finally{n.f()}e=this.loss.map((function(e){return dA(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var s=o[i];if("string"!=typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=dA(a[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[dA(CI(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return dA(CI(e))}));var e={};for(var t in this.metrics)e[t]=dA(CI(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=rI(DI(e.optimizer_config));if("string"==typeof e.loss)t=hA(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return hA(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=hA(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return hA(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=hA(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var e=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,u,l,c;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=7;break}if(0!==(r=ah.getSaveHandlers(t)).length){e.next=4;break}throw new nA("Cannot find any save handlers for URL '".concat(t,"'"));case 4:if(!(r.length>1)){e.next=6;break}throw new nA("Found more than one (".concat(r.length,") save handlers for URL '").concat(t,"'"));case 6:t=r[0];case 7:if(null!=t.save){e.next=9;break}throw new nA("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 9:return e.next=11,ah.encodeWeights(this.getNamedWeights(n));case 11:if(a=e.sent,!1,null,i={modelTopology:this.toJSON(null,false),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(zI),convertedBy:null},null==n||!n.includeOptimizer||null==this.optimizer){e.next=29;break}return i.trainingConfig=this.getTrainingConfig(),s="optimizer",e.t0=ah,e.next=21,this.optimizer.getWeights();case 21:return e.t1=e.sent,e.t2=s,e.next=25,e.t0.encodeWeights.call(e.t0,e.t1,e.t2);case 25:u=e.sent,l=u.data,c=u.specs,(o=a.specs).push.apply(o,ta(c)),a.data=ah.concatenateArrayBuffers([a.data,l]);case 29:return e.abrupt("return",(null!=this.userDefinedMetadata&&(EI(this.userDefinedMetadata,this.name,!0),i.userDefinedMetadata=this.userDefinedMetadata),i.weightData=a.data,i.weightSpecs=a.specs,t.save(i)));case 30:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){EI(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),n}(BI);gE.className="Model",Vp.registerClass(gE);var vE=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n)}(gE);function yE(e,t){return bE.apply(this,arguments)}function bE(){return bE=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,u,l,c;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("modelTopology"in t||(t={modelTopology:t}),null!=(r=t.modelTopology).model_config&&(r=r.model_config),a=DI(r),i=rI(a,n),null==t.weightsManifest){e.next=12;break}return e.next=7,ah.loadWeights(t.weightsManifest,t.pathPrefix,i.weights.map((function(e){return e.originalName})));case 7:o=e.sent,s={},u=ea(i.weights);try{for(u.s();!(l=u.n()).done;)c=l.value,s[c.originalName]=o[c.originalName]}catch(d){u.e(d)}finally{u.f()}i.loadWeights(s),jh(o);case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)}))),bE.apply(this,arguments)}function xE(){return xE=Mr(Nr().mark((function e(t,n){var r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),"string"!=typeof t){e.next=9;break}if(0!==(r=ah.getLoadHandlers(t,n)).length){e.next=6;break}r.push(ah.browserHTTPRequest(t,n)),e.next=8;break;case 6:if(!(r.length>1)){e.next=8;break}throw new nA("Found more than one (".concat(r.length,") load handlers for URL '").concat(t,"'"));case 8:t=r[0];case 9:return e.abrupt("return",AE(t,void 0,n));case 10:case"end":return e.stop()}}),e)}))),xE.apply(this,arguments)}function AE(e,t,n){return wE.apply(this,arguments)}function wE(){return wE=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r&&(r={}),null!=t.load){e.next=2;break}throw new nA("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 2:return e.next=4,t.load();case 4:if(a=e.sent,null!=(i=a.modelTopology).model_config&&(i=i.model_config),o=null==r.strict||r.strict,s=null!=a.weightData&&null!=a.weightSpecs&&o,u=rI(DI(i),n,s),null!=(l=a.trainingConfig)&&u.loadTrainingConfig(l),null!=a.userDefinedMetadata&&u.setUserDefinedMetadata(a.userDefinedMetadata),null==a.weightData){e.next=19;break}if(null!=a.weightSpecs){e.next=11;break}throw new nA("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");case 11:if(c=kE(a.weightData,a.weightSpecs),d=c.modelWeights,h=c.optimizerWeights,u.loadWeights(d,o),e.t0=null!=u.optimizer&&h.length>0,!e.t0){e.next=17;break}return e.next=17,u.optimizer.setWeights(h);case 17:jh(d),jh(h.map((function(e){return e.tensor})));case 19:return e.abrupt("return",u);case 20:case"end":return e.stop()}}),e)}))),wE.apply(this,arguments)}function kE(e,t){var n=ah.decodeWeights(e,t),r={},a=[];return t.forEach((function(e){"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]})),{modelWeights:r,optimizerWeights:a}}vE.className="Functional",Vp.registerClass(vE);var SE=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:TA("sequential_"),null!=e.layers){var a,i=ea(e.layers);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.add(o)}}catch(s){i.e(s)}finally{i.f()}}return Xr(r)}return $r(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new nA("Negative dimension size caused by adding layer ".concat(e.name," with input shape [").concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof gE;if(r){if(1!==(t=e).outputs.length)throw new nA("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new nA("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new nA("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=ek({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new nA("A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ".concat(e.name," which has ").concat(e.inboundNodes.length," pre-existing inbound connections."));if(1!==e.inboundNodes[0].outputTensors.length)throw new nA("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=Qw(this.outputs[0])}this.inboundNodes=[],new Kw({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:oA(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(Ww(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new gE({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),zr(Dr(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),zr(Dr(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new tA("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=Mr(Nr().mark((function e(t,n){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new tA("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=Mr(Nr().mark((function e(t,n){var r,a=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new tA("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=Mr(Nr().mark((function e(t,n){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new tA("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=Mr(Nr().mark((function e(t,n){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new nA("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new nA("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=ea(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(i){n.e(i)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new nA("Legacy serialization format not supported yet.");r=t}else Cl.assert(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,i=t;var o=new e(i);if(!(o instanceof n))throw new rA("Sequential.fromConfig called on non-Sequential input: ".concat(o));var s,u=ea(r);try{for(u.s();!(s=u.n()).done;){var l=s.value,c=rI(l,void 0,a);a&&c.setFastWeightInitDuringBuild(!0),o.add(c)}}catch(d){u.e(d)}finally{u.f()}return o}}]),n}(gE),CE=SE;function IE(e){return new gE(e)}function EE(e){return new CE(e)}function TE(e,t){return null==t&&(t={}),function(e,t){return xE.apply(this,arguments)}(e,t)}function NE(e){return ek(e)}function _E(e,t){tI.registerCallbackConstructor(e,t)}CE.className="Sequential",Vp.registerClass(CE);var ME=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"getConfig",value:function(){return{}}}]),n}(Vp.Serializable),RE=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return hw(e,t)}}]),n}(ME);RE.className="elu",Vp.registerClass(RE);var OE=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"apply",value:function(e){return Iv(e)}}]),n}(ME);OE.className="selu",Vp.registerClass(OE);var PE=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"apply",value:function(e){return vv(e)}}]),n}(ME);PE.className="relu",Vp.registerClass(PE);var FE=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"apply",value:function(e){return Wh((function(){return Hg(6,vv(e))}))}}]),n}(ME);FE.className="relu6",Vp.registerClass(FE);var DE=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"apply",value:function(e){return e}}]),n}(ME);DE.className="linear",Vp.registerClass(DE);var LE=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"apply",value:function(e){return Hf(e)}}]),n}(ME);LE.className="sigmoid",Vp.registerClass(LE);var zE=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"apply",value:function(e){return function(e){return Wh((function(){var t=of(.5,lf(.2,e));return rm(t,0,1)}))}(e)}}]),n}(ME);zE.className="hardSigmoid",Vp.registerClass(zE);var BE=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"apply",value:function(e){return kg(e)}}]),n}(ME);BE.className="softplus",Vp.registerClass(BE);var WE=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"apply",value:function(e){return function(e){return Wh((function(){return uf(e,of(cf(e),1))}))}(e)}}]),n}(ME);WE.className="softsign",Vp.registerClass(WE);var jE=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"apply",value:function(e){return Gf(e)}}]),n}(ME);jE.className="tanh",Vp.registerClass(jE);var VE=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return Lv(e,t)}}]),n}(ME);VE.className="softmax",Vp.registerClass(VE);var HE=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return Ig(e,t)}}]),n}(ME);HE.className="logSoftmax",Vp.registerClass(HE);var UE=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Wh((function(){return lf(Hf(lf(e,t)),e)}))}}]),n}(ME);UE.className="swish",Vp.registerClass(UE);var GE=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"apply",value:function(e){return Wh((function(){return lf(e,Gf(kg(e)))}))}}]),n}(ME);function XE(e){return e.getClassName()}function qE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return gA(e,Vp.SerializationMap.getMap().classNameMap,t,"activation")}function YE(e){if(null==e){var t={className:"linear",config:{}};return qE(t)}if("string"==typeof e){var n={};return n.className=e,n.config={},qE(n)}return e instanceof ME?e:qE(e)}function KE(e){if(null!=e&&"object"!=typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: ".concat(e))}GE.className="mish",Vp.registerClass(GE);var ZE=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n)}(Vp.Serializable),JE=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),r=t.call(this),KE(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return $r(n,[{key:"apply",value:function(e){var t=this;return Wh((function(){var n=Wg([1]);return t.hasL1&&(n=of(n,Xm(lf(t.l1,cf(e))))),t.hasL2&&(n=of(n,Xm(lf(t.l2,lw(e))))),Bf(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(ZE);JE.className="L1L2",Vp.registerClass(JE);var QE={l1l2:"L1L2"};function $E(e){return fA(e)}function eT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return gA(e,Vp.SerializationMap.getMap().classNameMap,t,"regularizer")}function tT(e){return null==e?null:"string"==typeof e?eT({className:e in QE?QE[e]:e,config:{}}):e instanceof ZE?e:eT(e)}var nT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return $r(n,[{key:"call",value:function(e,t){e=Bw(e);var n=vv(e);return null!=this.maxValue&&(n=rm(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw);nT.className="ReLU",Vp.registerClass(nT);var rT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return $r(n,[{key:"call",value:function(e,t){var n=Bw(e);return lg(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw);rT.className="LeakyReLU",Vp.registerClass(rT);var aT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=Dw(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=tT(e.alphaRegularizer),r.alphaConstraint=kC(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new nA("Expected sharedAxes to be a number or an array of numbers, but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return Xr(r)}return $r(n,[{key:"build",value:function(e){var t=(e=Ww(e)).slice(1);if(null!=this.sharedAxes){var n,r=ea(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(o){r.e(o)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)a[i]=e[i];this.inputSpec=[new Xw({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=Bw(e),iv(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:Fw(this.alphaInitializer),alphaRegularizer:$E(this.alphaRegularizer),alphaConstraint:AC(this.alphaConstraint),sharedAxes:this.sharedAxes},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw);aT.className="PReLU",Vp.registerClass(aT);var iT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new rA("Non-default alpha value (".concat(e.alpha,") is not supported by the ELU layer yet."));return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,Xr(r)}return $r(n,[{key:"call",value:function(e,t){var n=Bw(e);return _m(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw);iT.className="ELU",Vp.registerClass(iT);var oT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return $r(n,[{key:"call",value:function(e,t){var n=Bw(e);return lf(n,th(ag(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw);oT.className="ThresholdedReLU",Vp.registerClass(oT);var sT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new VE).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return $r(n,[{key:"call",value:function(e,t){var n=Bw(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw);function uT(e,t,n){if("number"==typeof e)return oA(e,t);if(e.length!==t)throw new nA("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers. Received: ").concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if(!GA(a))throw new nA("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers. Received: ").concat(JSON.stringify(e)," including a non-integer number ").concat(a))}return e}function lT(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(null==e)return e;var i,o=t+(t-1)*(a-1);return i="same"===n?e:e-o+1,Math.floor((i+r-1)/r)}function cT(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+YA([n-t,0]);else{if("same"!==r)throw new nA("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function dT(e,t){return Wh((function(){return FA(t),"channelsFirst"===t?np(e,[0,2,3,1]):e}))}function hT(e,t){return Wh((function(){return FA(t),"channelsFirst"===t?np(e,[0,2,3,4,1]):e}))}function pT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return Wh((function(){if(null==i&&(i="channelsLast"),FA(i),3!==e.rank&&4!==e.rank)throw new nA("conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new nA("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ".concat(e.rank,"."));var u=dT(e,i);if("causal"===a)throw new rA("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=wy.conv2d({x:u,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(u=np(u,[0,3,1,2])),u}))}sT.className="Softmax",Vp.registerClass(sT);var fT=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a;if(Jr(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,wA(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new rA("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is not implemented yet."));if(a.kernelSize=uT(r.kernelSize,e,"kernelSize"),a.strides=uT(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,DA(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,FA(a.dataFormat),a.activation=YE(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=Dw(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=kC(r.biasConstraint),a.biasRegularizer=tT(r.biasRegularizer),a.activityRegularizer=tT(r.activityRegularizer),a.dilationRate=uT(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new nA("dilationRate must be a number or an array of a single number for 1D convolution, but received ".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"==typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new nA("dilationRate must be a number or array of two numbers for 2D convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"==typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new nA("dilationRate must be a number or array of three numbers for 3D convolution, but received ".concat(JSON.stringify(a.dilationRate)));return Xr(a)}return $r(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:XE(this.activation),useBias:this.useBias,biasInitializer:Fw(this.biasInitializer),biasRegularizer:$E(this.biasRegularizer),activityRegularizer:$E(this.activityRegularizer),biasConstraint:AC(this.biasConstraint)},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(sA("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!AA(e.kernelSize,"number",1,3))throw new nA("BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(Jw),mT=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a;return Jr(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,wA(a.filters,"filters"),a.kernelInitializer=Dw(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=kC(r.kernelConstraint),a.kernelRegularizer=tT(r.kernelRegularizer),a}return $r(n,[{key:"build",value:function(e){e=Ww(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new nA("The channel dimension of the input should be defined. Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:Fr({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Wh((function(){e=Bw(e);var t,r=null==n.bias?null:n.bias.read(),a=SA(n.activation.getClassName());if(null!=a&&2===n.rank)t=pT(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Wh((function(){if(null==i&&(i="channelsLast"),FA(i),3!==e.shape.length)throw new nA("The input of a conv1dWithBias operation should be 3, but is ".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new nA("The kernel for a conv1dWithBias operation should be 3, but is ".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new nA("The bias for a conv1dWithBias operation should be 1, but is ".concat(t.shape.length," instead"));if("channelsFirst"===i&&(e=np(e,[0,2,1])),"causal"===a)throw new rA("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=lm(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(s=dw(s,n)),s}))}(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=pT(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new rA("convolutions greater than 3D are not implemented yet.");t=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return Wh((function(){if(null==i&&(i="channelsLast"),FA(i),4!==e.rank&&5!==e.rank)throw new nA("conv3dWithBias expects input to be of rank 4 or 5, but received ".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new nA("conv3dWithBias expects kernel to be of rank 4 or 5, but received ".concat(e.rank,"."));var s=hT(e,i);if("causal"===a)throw new rA("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=hm(s,t,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(s=dw(s,n)),"channelsFirst"===i&&(s=np(s,[0,4,1,2,3])),s}))}(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=Ww(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=lT(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:Fw(this.kernelInitializer),kernelRegularizer:$E(this.kernelRegularizer),kernelConstraint:AC(this.kernelConstraint)},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new nA("Convolution layer expected config.filters to be a 'number' > 0 but got ".concat(JSON.stringify(e.filters)))}}]),n}(fT),gT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return $r(n,[{key:"getConfig",value:function(){var e=zr(Dr(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!=typeof e.kernelSize&&!AA(e.kernelSize,"number",1,2))throw new nA("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(mT),vT=gT;vT.className="Conv2D",Vp.registerClass(vT);var yT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return $r(n,[{key:"getConfig",value:function(){var e=zr(Dr(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new nA("Conv3D expects config.kernelSize to be number or [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(mT),bT=yT;bT.className="Conv3D",Vp.registerClass(bT);var xT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),(r=t.call(this,e)).inputSpec=[new Xw({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new nA("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ".concat(r.padding));return Xr(r)}return $r(n,[{key:"build",value:function(e){if(4!==(e=Ww(e)).length)throw new nA("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new nA("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Xw({ndim:4,axes:Fr({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Wh((function(){var t=Bw(e);if(4!==t.shape.length)throw new nA("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-".concat(t.shape.length));var r,a,i=t.shape,o=i[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=i[r],u=i[a],l=n.kernelSize[0],c=n.kernelSize[1],d=n.strides[0],h=n.strides[1],p=[o,cT(s,d,l,n.padding),cT(u,h,c,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=np(t,[0,2,3,1]));var f=dm(t,n.kernel.read(),p,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(f=np(f,[0,3,1,2])),null!=n.bias&&(f=dw(f,n.bias.read(),n.dataFormat)),null!=n.activation&&(f=n.activation.apply(f)),f}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=Ww(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=cT(a[n],s,i,this.padding),a[r]=cT(a[r],u,o,this.padding),a}},{key:"getConfig",value:function(){var e=zr(Dr(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(vT);xT.className="Conv2DTranspose",Vp.registerClass(xT);var AT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),(r=t.call(this,e)).inputSpec=[new Xw({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new nA("Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ".concat(r.padding));return Xr(r)}return $r(n,[{key:"build",value:function(e){if(5!==(e=Ww(e)).length)throw new nA("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new nA("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Xw({ndim:5,axes:Fr({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Wh((function(){var t=Bw(e);if(5!==t.shape.length)throw new nA("Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-".concat(t.shape.length));var r,a,i,o=t.shape,s=o[0];"channelsFirst"===n.dataFormat?(i=2,r=3,a=4):(i=1,r=2,a=3);var u=o[i],l=o[r],c=o[a],d=n.kernelSize[0],h=n.kernelSize[1],p=n.kernelSize[2],f=n.strides[0],m=n.strides[1],g=n.strides[2],v=[s,cT(u,f,d,n.padding),cT(l,m,h,n.padding),cT(c,g,p,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=np(t,[0,2,3,4,1]));var y=fm(t,n.kernel.read(),v,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(y=np(y,[0,4,1,2,3])),null!==n.bias&&(y=dw(y,n.bias.read(),n.dataFormat)),null!==n.activation&&(y=n.activation.apply(y)),y}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a,i=(e=Ww(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);var o=this.kernelSize[0],s=this.kernelSize[1],u=this.kernelSize[2],l=this.strides[0],c=this.strides[1],d=this.strides[2];return i[t]=this.filters,i[n]=cT(i[n],l,o,this.padding),i[r]=cT(i[r],c,s,this.padding),i[a]=cT(i[a],d,u,this.padding),i}},{key:"getConfig",value:function(){var e=zr(Dr(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(bT);AT.className="Conv3DTranspose",Vp.registerClass(AT);var wT=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a;if(Jr(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new nA("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new nA("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new nA("SeparableConv".concat(a.rank,"D supports only padding modes: 'same' and 'valid', but received ").concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=Dw(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=tT(r.depthwiseRegularizer),a.depthwiseConstraint=kC(r.depthwiseConstraint),a.pointwiseInitializer=Dw(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=tT(r.pointwiseRegularizer),a.pointwiseConstraint=kC(r.pointwiseConstraint),Xr(a)}return $r(n,[{key:"build",value:function(e){if((e=Ww(e)).length<this.rank+2)throw new nA("Inputs to SeparableConv".concat(this.rank,"D should have rank ").concat(this.rank+2,", but received input shape: ").concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new nA("The channel dimension of the inputs should be defined, but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters);var o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new Xw({ndim:this.rank+2,axes:Fr({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Wh((function(){var t;if(e=Bw(e),1===n.rank)throw new rA("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=np(e,[0,2,3,1])),t=Ev(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=dw(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=np(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=zr(Dr(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Fw(this.depthwiseInitializer),e.pointwiseInitializer=Fw(this.pointwiseInitializer),e.depthwiseRegularizer=$E(this.depthwiseRegularizer),e.pointwiseRegularizer=$E(this.pointwiseRegularizer),e.depthwiseConstraint=AC(this.depthwiseConstraint),e.pointwiseConstraint=AC(this.pointwiseConstraint),e}}]),n}(mT);wT.className="SeparableConv";var kT=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,2,e)}return $r(n)}(wT);kT.className="SeparableConv2D",Vp.registerClass(kT);var ST=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return $r(n,[{key:"getConfig",value:function(){var e=zr(Dr(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!=typeof e.kernelSize&&!AA(e.kernelSize,"number",1,1))throw new nA("Conv1D expects config.kernelSize to be number or number[] with length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(mT),CT=ST;CT.className="Conv1D",Vp.registerClass(CT);var IT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),r=t.call(this,e),"number"==typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return $r(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return Wh((function(){if(e=Bw(e),"channelsLast"===n.dataFormat){var t=nw(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return nw(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=nw(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return nw(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw);IT.className="Cropping2D",Vp.registerClass(IT);var ET=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,FA(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,function(e){xA(_A,"InterpolationFormat",e)}(r.interpolation),r}return $r(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return Wh((function(){var t=Bw(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=np(t,[0,2,3,1]);var a=n.size[0]*r[2],i=n.size[1]*r[3],o="nearest"===n.interpolation?Db.resizeNearestNeighbor(t,[a,i]):Db.resizeBilinear(t,[a,i]);return np(o,[0,3,1,2])}var s=n.size[0]*r[1],u=n.size[1]*r[2];return"nearest"===n.interpolation?Db.resizeNearestNeighbor(t,[s,u]):Db.resizeBilinear(t,[s,u])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw);ET.className="UpSampling2D",Vp.registerClass(ET);var TT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=Dw(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=kC(e.depthwiseConstraint),r.depthwiseRegularizer=tT(e.depthwiseRegularizer),r}return $r(n,[{key:"build",value:function(e){if((e=Ww(e)).length<4)throw new nA("Inputs to DepthwiseConv2D should have rank 4. Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new nA("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Wh((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return Wh((function(){null==a&&(a="channelsLast"),FA(a);var o=dT(e,a);if(4!==e.rank)throw new nA("Input for depthwiseConv2d is required to be 4-D, but is instead ".concat(e.rank,"-D"));if(4!==t.rank)throw new nA("depthwiseKernel is required to be 4-D, but is instead ".concat(t.rank,"-D"));return o=Am(o,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(o=np(o,[0,3,1,2])),o}))}(e=Bw(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=dw(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=Ww(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=lT(t,this.kernelSize[0],this.padding,this.strides[0]),i=lT(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}},{key:"getConfig",value:function(){var e=zr(Dr(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Fw(this.depthwiseInitializer),e.depthwiseRegularizer=$E(this.depthwiseRegularizer),e.depthwiseConstraint=AC(this.depthwiseRegularizer),e}}]),n}(fT);function NT(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new nA("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function _T(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return Wh((function(){var u=t.shape.length;if(u<3)throw new nA("Input should be at least 3D, but is ".concat(u,"D."));var l=[1,0].concat(KA(2,u));if(t=np(t,l),null!=i)throw new rA("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=th(th(a,"bool"),"float32")).rank===u-1&&(a=Jm(a,-1)),a=np(a,l)),r&&(t=bv(t,0),null!=a&&(a=bv(a,0)));var c,d,h=[],p=n,f=t.shape[0],m=ay(t);null!=a&&(d=ay(a));for(var g,v=function(t){var n=m[t],r=Wh((function(){return e(n,p)}));if(null==a)c=r[0],p=r[1];else{var i=Wh((function(){var e=d[t],n=Cg(Zg(e),e),a=of(lf(r[0],e),lf(p[0],n)),i=p.map((function(t,a){return of(lf(r[1][a],e),lf(t,n))}));return{output:a,newStates:i}}));c=i.output,p=i.newStates}s&&h.push(c)},y=0;y<f;++y)v(y);return s&&(g=Gv(h,1)),[c,g,p]}))}TT.className="DepthwiseConv2D",Vp.registerClass(TT);var MT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r,a;if(Jr(this,n),r=t.call(this,e),null==e.cell)throw new nA("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new WT({cells:e.cell}):e.cell).stateSize)throw new nA("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new Xw({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return $r(n,[{key:"getStates",value:function(){return null==this.states_?KA(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){Lw(e)&&(e=e[0]);var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,i=[],o=ea(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push([e[0],s])}}catch(u){o.e(u)}finally{o.f()}return[n].concat(i)}return n}},{key:"computeMask",value:function(e,t){var n=this;return Wh((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new rA("Constants support is not implemented in RNN yet.");Lw(e)&&(e=e[0]);var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new Xw({shape:[t,null].concat(ta(n))});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!Cl.arraysEqual(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new nA("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; However cell.stateSize is ").concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new Xw({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Wh((function(){if(!t.stateful)throw new eA("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new nA("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return Wg([r,e])})):t.states_=[Wg([r,t.cell.stateSize])];else if(null==e)jh(t.states_),null!=t.keptStates&&(jh(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return Wg([r,e])})):t.states_[0]=Wg([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new nA("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), but it received ").concat(e.length," state value(s). Input received: ").concat(e));!0===n?t.keptStates.push(t.states_.slice()):jh(t.states_);for(var a=0;a<t.states_.length;++a){var i=e[a],o=Array.isArray(t.cell.stateSize)?t.cell.stateSize[a]:t.cell.stateSize,s=[r,o];if(!Cl.arraysEqual(i.shape,s))throw new nA("State ".concat(a," is incompatible with layer ").concat(t.name,": expected shape=").concat(s,", received shape=").concat(i.shape));t.states_[a]=i}}t.states_=t.states_.map((function(e){return Vh(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=NT(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;var o=[],s=[];if(null!=r){t.initialState=r,o=o.concat(r),this.stateSpec=[];var u,l=ea(r);try{for(l.s();!(u=l.n()).done;){var c=u.value;this.stateSpec.push(new Xw({shape:c.shape}))}}catch(m){l.e(m)}finally{l.f()}s=s.concat(this.stateSpec)}if(null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof qw){var d=[e].concat(o),h=this.inputSpec.concat(s),p=this.inputSpec;this.inputSpec=h;var f=zr(Dr(n.prototype),"apply",this).call(this,d,t);return this.inputSpec=p,f}return zr(Dr(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Wh((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;e=Bw(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new nA("RNN Layer has ".concat(o," state(s) but was passed ").concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},u=_T((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,i,n.goBackwards,r,null,n.unroll,n.returnSequences),l=u[0],c=u[1],d=u[2];n.stateful&&n.resetStates(d,a);var h=n.returnSequences?c:l;return n.returnState?[h].concat(d):h}))}},{key:"getInitialState",value:function(e){var t=this;return Wh((function(){var n=Wg(e.shape);return n=QA(n=Xm(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?iw(n,[1,e]):n})):t.cell.stateSize>1?[iw(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){zr(Dr(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=zr(Dr(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Wr(Wr(Wr({},r),e),t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.cell,a=rI(r,n);return new e(Object.assign(t,{cell:a}))}}]),n}(Jw),RT=MT;RT.className="RNN",Vp.registerClass(RT);var OT=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n)}(Jw),PT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,wA(r.units,"units"),r.activation=YE(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=Dw(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=Dw(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=Dw(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=tT(e.kernelRegularizer),r.recurrentRegularizer=tT(e.recurrentRegularizer),r.biasRegularizer=tT(e.biasRegularizer),r.kernelConstraint=kC(e.kernelConstraint),r.recurrentConstraint=kC(e.recurrentConstraint),r.biasConstraint=kC(e.biasConstraint),r.dropout=qA([1,YA([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=qA([1,YA([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return $r(n,[{key:"build",value:function(e){e=Ww(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Wh((function(){if(2!==e.length)throw new nA("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=jT({ones:function(){return Zg(e)},rate:n.dropout,training:a,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=jT({ones:function(){return Zg(r)},rate:n.recurrentDropout,training:a,dropoutFunc:n.dropoutFunc}));var i,o=n.dropoutMask,s=n.recurrentDropoutMask;i=sw(null!=o?lf(e,o):e,n.kernel.read()),null!=n.bias&&(i=dw(i,n.bias.read())),null!=s&&(r=lf(r,s));var u=of(i,sw(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))}},{key:"getConfig",value:function(){var e=zr(Dr(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:XE(this.activation),useBias:this.useBias,kernelInitializer:Fw(this.kernelInitializer),recurrentInitializer:Fw(this.recurrentInitializer),biasInitializer:Fw(this.biasInitializer),kernelRegularizer:$E(this.kernelRegularizer),recurrentRegularizer:$E(this.recurrentRegularizer),biasRegularizer:$E(this.biasRegularizer),activityRegularizer:$E(this.activityRegularizer),kernelConstraint:AC(this.kernelConstraint),recurrentConstraint:AC(this.recurrentConstraint),biasConstraint:AC(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Wr(Wr({},e),t)}}]),n}(OT);PT.className="SimpleRNNCell",Vp.registerClass(PT);var FT=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),e.cell=new PT(e),t.call(this,e)}return $r(n,[{key:"call",value:function(e,t){var r=this;return Wh((function(){null!=r.cell.dropoutMask&&(jh(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(jh(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return zr(Dr(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(RT);FT.className="SimpleRNN",Vp.registerClass(FT);var DT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new nA("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,wA(r.units,"units"),r.activation=YE(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=YE(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=Dw(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=Dw(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=Dw(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=tT(e.kernelRegularizer),r.recurrentRegularizer=tT(e.recurrentRegularizer),r.biasRegularizer=tT(e.biasRegularizer),r.kernelConstraint=kC(e.kernelConstraint),r.recurrentConstraint=kC(e.recurrentConstraint),r.biasConstraint=kC(e.biasConstraint),r.dropout=qA([1,YA([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=qA([1,YA([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,Xr(r)}return $r(n,[{key:"build",value:function(e){var t=(e=Ww(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Wh((function(){if(2!==e.length)throw new nA("GRUCell expects 2 input Tensors (inputs, h, c), got ".concat(e.length,"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=jT({ones:function(){return Zg(e)},rate:n.dropout,training:r,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=jT({ones:function(){return Zg(a)},rate:n.recurrentDropout,training:r,count:3,dropoutFunc:n.dropoutFunc}));var i,o,s,l=n.dropoutMask,c=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=lf(e,l[0]));var d=sw(e,n.kernel.read());n.useBias&&(d=dw(d,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=lf(a,c[0]));var h=n.recurrentKernel.read(),p=u(jv(h,[2*n.units,n.units],h.rank-1),2),f=p[0],m=p[1],g=sw(a,f),v=u(jv(d,3,d.rank-1),3),y=v[0],b=v[1],x=v[2],A=u(jv(g,2,g.rank-1),2),w=A[0],k=A[1];i=n.recurrentActivation.apply(of(y,w)),o=n.recurrentActivation.apply(of(b,k));var S=sw(lf(o,a),m);s=n.activation.apply(of(x,S));var C=of(lf(i,a),lf(of(1,ep(i)),s));return[C,C]}))}},{key:"getConfig",value:function(){var e=zr(Dr(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:XE(this.activation),recurrentActivation:XE(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Fw(this.kernelInitializer),recurrentInitializer:Fw(this.recurrentInitializer),biasInitializer:Fw(this.biasInitializer),kernelRegularizer:$E(this.kernelRegularizer),recurrentRegularizer:$E(this.recurrentRegularizer),biasRegularizer:$E(this.biasRegularizer),activityRegularizer:$E(this.activityRegularizer),kernelConstraint:AC(this.kernelConstraint),recurrentConstraint:AC(this.recurrentConstraint),biasConstraint:AC(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Wr(Wr({},e),t)}}]),n}(OT);DT.className="GRUCell",Vp.registerClass(DT);var LT=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new DT(e),t.call(this,e)}return $r(n,[{key:"call",value:function(e,t){var r=this;return Wh((function(){null!=r.cell.dropoutMask&&(jh(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(jh(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return zr(Dr(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(RT);LT.className="GRU",Vp.registerClass(LT);var zT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,wA(r.units,"units"),r.activation=YE(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=YE(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=Dw(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=Dw(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=Dw(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=tT(e.kernelRegularizer),r.recurrentRegularizer=tT(e.recurrentRegularizer),r.biasRegularizer=tT(e.biasRegularizer),r.kernelConstraint=kC(e.kernelConstraint),r.recurrentConstraint=kC(e.recurrentConstraint),r.biasConstraint=kC(e.biasConstraint),r.dropout=qA([1,YA([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=qA([1,YA([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return $r(n,[{key:"build",value:function(e){var t,n,r=(e=Ww(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,i=this.units;n=new(t=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"apply",value:function(e,t){var n=a.apply([i]),r=(new bw).apply([i]),o=a.apply([2*i]);return aw(aw(n,r),o)}}]),n}(vw),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return Wh((function(){var r=null!=t.training&&t.training;if(3!==e.length)throw new nA("LSTMCell expects 3 input Tensors (inputs, h, c), got ".concat(e.length,"."));var a=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=jT({ones:function(){return Zg(e)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=jT({ones:function(){return Zg(a)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var o,s,l,c,d=n.dropoutMask,h=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=lf(e,d[0]));var p=sw(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=lf(a,h[0])),p=of(p,sw(a,n.recurrentKernel.read())),n.useBias&&(p=dw(p,n.bias.read()));var f=u(jv(p,4,p.rank-1),4),m=f[0],g=f[1],v=f[2],y=f[3];o=n.recurrentActivation.apply(m),s=n.recurrentActivation.apply(g),l=of(lf(s,i),lf(o,n.activation.apply(v))),c=n.recurrentActivation.apply(y);var b=lf(c,n.activation.apply(l));return[b,b,l]}))}},{key:"getConfig",value:function(){var e=zr(Dr(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:XE(this.activation),recurrentActivation:XE(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Fw(this.kernelInitializer),recurrentInitializer:Fw(this.recurrentInitializer),biasInitializer:Fw(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:$E(this.kernelRegularizer),recurrentRegularizer:$E(this.recurrentRegularizer),biasRegularizer:$E(this.biasRegularizer),activityRegularizer:$E(this.activityRegularizer),kernelConstraint:AC(this.kernelConstraint),recurrentConstraint:AC(this.recurrentConstraint),biasConstraint:AC(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Wr(Wr({},e),t)}}]),n}(OT);zT.className="LSTMCell",Vp.registerClass(zT);var BT=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new zT(e),t.call(this,e)}return $r(n,[{key:"call",value:function(e,t){var r=this;return Wh((function(){null!=r.cell.dropoutMask&&(jh(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(jh(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return zr(Dr(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(RT);BT.className="LSTM",Vp.registerClass(BT);var WT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,e)).cells=e.cells,r}return $r(n,[{key:"stateSize",get:function(){var e,t=[],n=ea(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,ta(r.stateSize)):t.push(r.stateSize)}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return Wh((function(){var r,a=e.slice(1),i=[],o=ea(n.cells.slice().reverse());try{for(o.s();!(r=o.n()).done;){var s=r.value;Array.isArray(s.stateSize)?i.push(a.splice(0,s.stateSize.length)):i.push(a.splice(0,1))}}catch(g){o.e(g)}finally{o.f()}i.reverse();for(var u,l=[],c=0;c<n.cells.length;++c){var d=n.cells[c];a=i[c],u=0===c?[e[0]].concat(a):[u[0]].concat(a),u=d.call(u,t),l.push(u.slice(1))}a=[];var h,p=ea(l.slice().reverse());try{for(p.s();!(h=p.n()).done;){var f,m=h.value;(f=a).push.apply(f,ta(m))}}catch(g){p.e(g)}finally{p.f()}return[u[0]].concat(a)}))}},{key:"build",value:function(e){var t;Lw(e)&&(e=e[0]),this.cells.forEach((function(n,r){BA("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=zr(Dr(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Wr(Wr({},e),t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=ea(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,ta(r.trainableWeights))}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=ea(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,ta(r.nonTrainableWeights))}}catch(u){n.e(u)}finally{n.f()}if(!this.trainable){var a,i=[],o=ea(this.cells);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,ta(s.trainableWeights))}}catch(u){o.e(u)}finally{o.f()}return i.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=ea(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,ta(r.weights))}}catch(a){n.e(a)}finally{n.f()}return Uw(t)}},{key:"setWeights",value:function(e){var t,n=[],r=ea(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,i=a.weights.length,o=e.splice(i),s=0;s<a.weights.length;++s)n.push([a.weights[s],o[s]])}catch(u){r.e(u)}finally{r.f()}Gw(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],i=ea(t.cells);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(rI(o,r))}}catch(s){i.e(s)}finally{i.f()}return new e({cells:a})}}]),n}(OT);function jT(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,i=e.count,o=void 0===i?1:i,s=e.dropoutFunc,u=function(){return null!=s?s(t(),n):pw(t(),n)},l=function(){return fw(u,t,a)};return!o||o<=1?Vh(l().clone()):Array(o).fill(void 0).map(l).map((function(e){return Vh(e.clone())}))}WT.className="StackedRNNCells",Vp.registerClass(WT);var VT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),e.unroll)throw new rA("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new rA("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new Xw({ndim:5})],r}return $r(n,[{key:"call",value:function(e,t){var r=this;return Wh((function(){if(null!=r.cell.dropoutMask&&(jh(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(jh(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new nA("ConvRNN2D cell does not support constants");var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return zr(Dr(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat(ta(t.slice(2)))),this.returnState&&(t=[t].concat(ta(Array(2).fill([e[0]].concat(ta(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return Wh((function(){var n=t.cell.stateSize,r=e.shape,a=t.computeSingleOutputShape(r),i=Wg([a[0]].concat(ta(a.slice(2))));return Array.isArray(n)?Array(n.length).fill(i):[i]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Wh((function(){if(!t.stateful)throw new eA("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,a=t.computeSingleOutputShape(r),i=[a[0]].concat(ta(a.slice(2)));if(null==r[0])throw new nA("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return Wg(i)})):t.states_=[Wg(i)];else if(null==e)jh(t.states_),null!=t.keptStates&&(jh(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return Wg(i)})):t.states_[0]=Wg(i);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new nA("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), but it received ").concat(e.length," state value(s). Input received: ").concat(e));n?t.keptStates.push(t.states_.slice()):jh(t.states_);for(var o=0;o<t.states_.length;++o){var s=e[o],u=i;if(!Cl.arraysEqual(s.shape,u))throw new nA("State ".concat(o," is incompatible with layer ").concat(t.name,": expected shape=").concat(u,", received shape=").concat(s.shape));t.states_[o]=s}}t.states_=t.states_.map((function(e){return Vh(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,i=t.padding,o=t.strides,s=t.dilationRate,u="channelsFirst"===n,l=e[u?3:2],c=e[u?4:3],d=lT(l,a[0],i,o[0],s[0]),h=lT(c,a[1],i,o[1],s[1]);return[].concat(ta(e.slice(0,2)),ta(u?[r,d,h]:[d,h,r]))}}]),n}(RT);VT.className="ConvRNN2D";var HT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;Jr(this,n);var a=e.filters,i=e.kernelSize,o=e.strides,s=e.padding,u=e.dataFormat,l=e.dilationRate;return(r=t.call(this,Wr(Wr({},e),{},{units:a}))).filters=a,wA(r.filters,"filters"),r.kernelSize=uT(i,2,"kernelSize"),r.kernelSize.forEach((function(e){return wA(e,"kernelSize")})),r.strides=uT(o||1,2,"strides"),r.strides.forEach((function(e){return wA(e,"strides")})),r.padding=s||"valid",DA(r.padding),r.dataFormat=u||"channelsLast",FA(r.dataFormat),r.dilationRate=uT(l||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return wA(e,"dilationRate")})),r}return $r(n,[{key:"build",value:function(e){var t;e=Ww(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new nA("The channel dimension of the input should be defined. Found ".concat(e[n]));var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var o;if(this.unitForgetBias){var s=this.biasInitializer,u=this.filters;o=new(t=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"apply",value:function(e,t){return rw([s.apply([u]),jg([u]),s.apply([2*u])])}}]),n}(vw),t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return Wh((function(){if(3!==e.length)throw new nA("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ".concat(e.length,"."));var r=t.training||!1,a=e[0],i=e[1],o=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=jT({ones:function(){return Zg(a)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var s=n.dropoutMask,l=function(e,t,n){return t&&t[n]?lf(t[n],e):e},c=l(a,s,0),d=l(a,s,1),h=l(a,s,2),p=l(a,s,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=jT({ones:function(){return Zg(i)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var f=n.recurrentDropoutMask,m=l(i,f,0),g=l(i,f,1),v=l(i,f,2),y=l(i,f,3),b=u(jv(n.kernel.read(),4,3),4),x=b[0],A=b[1],w=b[2],k=b[3],S=u(n.useBias?jv(n.bias.read(),4):[null,null,null,null],4),C=S[0],I=S[1],E=S[2],T=S[3];c=n.inputConv(c,x,C,n.padding),d=n.inputConv(d,A,I,n.padding),h=n.inputConv(h,w,E,n.padding),p=n.inputConv(p,k,T,n.padding);var N=u(jv(n.recurrentKernel.read(),4,3),4),_=N[0],M=N[1],R=N[2],O=N[3];m=n.recurrentConv(m,_),g=n.recurrentConv(g,M),v=n.recurrentConv(v,R),y=n.recurrentConv(y,O);var P=n.recurrentActivation.apply(of(c,m)),F=n.recurrentActivation.apply(of(d,g)),D=of(lf(F,o),lf(P,n.activation.apply(of(h,v)))),L=lf(n.recurrentActivation.apply(of(p,y)),n.activation.apply(D));return[L,L,D]}))}},{key:"getConfig",value:function(){var e=zr(Dr(n.prototype),"getConfig",this).call(this),t=(e.units,Pr(e,ia)),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Wr(Wr({},t),r)}},{key:"inputConv",value:function(e,t,n,r){var a=um(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?dw(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return um(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(zT);HT.className="ConvLSTM2DCell",Vp.registerClass(HT);var UT=function(e){Kr(n,e);var t=Zr(n);function n(e){Jr(this,n);var r=new HT(e);return t.call(this,Wr(Wr({},e),{},{cell:r}))}return $r(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(VT);UT.className="ConvLSTM2D",Vp.registerClass(UT);var GT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return $r(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return Wh((function(){n.invokeCallHook(e,t);var r=Bw(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return fw((function(){return pw(r,n.rate,i,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return zr(Dr(n.prototype),"dispose",this).call(this)}}]),n}(Jw);GT.className="Dropout",Vp.registerClass(GT);var XT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return $r(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}(GT);XT.className="SpatialDropout1D",Vp.registerClass(XT);var qT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,wA(r.units,"units"),r.activation=YE(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=Dw(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=Dw(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=kC(e.kernelConstraint),r.biasConstraint=kC(e.biasConstraint),r.kernelRegularizer=tT(e.kernelRegularizer),r.biasRegularizer=tT(e.biasRegularizer),r.activityRegularizer=tT(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],Xr(r)}return $r(n,[{key:"build",value:function(e){var t=(e=Ww(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:Fr({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=Ww(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return Wh((function(){n.invokeCallHook(e,t);var r,a=Bw(e),i=SA(n.activation.getClassName());return null!=i?r=sw(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=sw(a,n.kernel.read()),null!=n.bias&&(r=dw(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:XE(this.activation),useBias:this.useBias,kernelInitializer:Fw(this.kernelInitializer),biasInitializer:Fw(this.biasInitializer),kernelRegularizer:$E(this.kernelRegularizer),biasRegularizer:$E(this.biasRegularizer),activityRegularizer:$E(this.activityRegularizer),kernelConstraint:AC(this.kernelConstraint),biasConstraint:AC(this.biasConstraint)},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw);qT.className="Dense",Vp.registerClass(qT);var YT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return $r(n,[{key:"computeOutputShape",value:function(e){var t,n=ea((e=Ww(e)).slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new nA('The shape of the input to "Flatten" is not fully defined (got '.concat(e.slice(1),'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.'))}}catch(r){n.e(r)}finally{n.f()}return[e[0],XA(e,1)]}},{key:"call",value:function(e,t){var n=this;return Wh((function(){n.invokeCallHook(e,t);var r=Bw(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],i=2;i<r.rank;++i)a.push(i);a.push(1),r=np(r,a)}return function(e){if(e.rank<=1)throw new nA("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],XA(e.shape,1)];return Bf(e,t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw);YT.className="Flatten",Vp.registerClass(YT);var KT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=YE(e.activation),r}return $r(n,[{key:"call",value:function(e,t){var n=this;return Wh((function(){n.invokeCallHook(e,t);var r=Bw(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:XE(this.activation)},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw);KT.className="Activation",Vp.registerClass(KT);var ZT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return $r(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return Wh((function(){return function(e,t){return Wh((function(){if(2!==e.shape.length)throw new nA("repeat() expects a rank-2 tensor, but received a rank-".concat(e.shape.length," tensor."));return iw(QA(e,1),[1,t,1])}))}(e=Bw(e),n.n)}))}},{key:"getConfig",value:function(){var e={n:this.n},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw);ZT.className="RepeatVector",Vp.registerClass(ZT);var JT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;Jr(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return $r(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==i)throw new nA("Can only specifiy one unknown dimension.");i=o}else a*=s}var u=XA(e);if(null!==i){if(0===a||u%a!==0)throw new nA(n);r[i]=u/a}else if(u!==a)throw new nA(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return Wh((function(){n.invokeCallHook(e,t);var r=Bw(e),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return Bf(r,i)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw);JT.className="Reshape",Vp.registerClass(JT);var QT=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received ".concat(e.dims," instead."));var a=KA(1,e.dims.length+1);if(!Cl.arraysEqual(e.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new Xw({ndim:r.dims.length+1})],Xr(r)}return $r(n,[{key:"computeOutputShape",value:function(e){var t=(e=Ww(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return np(Bw(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw);QT.className="Permute",Vp.registerClass(QT);var $T=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return $r(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=zr(Dr(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=Bw(e);return mf(Kg(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return Wh((function(){n.invokeCallHook(e,t);var r=Bw(e),a=mf(Kg(r,n.maskValue),-1,!0);return lf(r,th(a,r.dtype))}))}}]),n}(Jw);$T.className="Masking",Vp.registerClass($T);var eN=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(cA(e.inputLength))}return r.inputDim=e.inputDim,wA(r.inputDim,"inputDim"),r.outputDim=e.outputDim,wA(r.outputDim,"outputDim"),r.embeddingsInitializer=Dw(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=tT(e.embeddingsRegularizer),r.activityRegularizer=tT(e.activityRegularizer),r.embeddingsConstraint=kC(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,Xr(r)}return $r(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return Wh((function(){return n.maskZero?(e=Bw(e),Kg(e,Im(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=Ww(e),null==this.inputLength)return[].concat(ta(e),[this.outputDim]);var t=cA(this.inputLength);if(t.length!==e.length-1)throw new nA('"inputLength" is '.concat(this.inputLength,", but received input shape has shape ").concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new nA('"inputLength" is '.concat(this.inputLength,", but received input shape has shape ").concat(e));null==a&&(t[n]=i),n++}return[e[0]].concat(ta(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return Wh((function(){n.invokeCallHook(e,t);var r=Bw(e);"int32"!==r.dtype&&(r=JA(r,"int32"));var a=uw(n.embeddings.read(),Bf(r,[r.size]));return Bf(a,Ww(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Fw(this.embeddingsInitializer),embeddingsRegularizer:$E(this.embeddingsRegularizer),activityRegularizer:$E(this.activityRegularizer),embeddingsConstraint:AC(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw);eN.className="Embedding",Vp.registerClass(eN);var tN=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return $r(n,[{key:"mergeFunction",value:function(e){throw new rA}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new nA("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Ww(e)]),e.length<2)throw new nA("A merge layer should be called on an Array of at least 2 inputs. Got ".concat(e.length," input(s)."));var t,n=[],r=ea(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(l){r.e(l)}finally{r.f()}if((n=yA(n)).length>1)throw new nA("Can not merge tensors with different batch sizes. Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var s=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}var u=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===yA(u).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return Wh((function(){if(n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,i=YA(r),o=ea(e);try{for(o.s();!(a=o.n()).done;){for(var s=a.value,u=s.rank,l=0;l<i-u;++l)s=QA(s,1);t.push(s)}}catch(I){o.e(I)}finally{o.f()}return n.mergeFunction(t)}var c,d=!1,h=ea(e);try{for(h.s();!(c=h.n()).done;){var p=c.value,f=p.rank;if(null==f){var m=p.shape,g=m[0],v=m.slice(1).concat([g]),y=Bf(p,[g].concat(XA(m.slice(1))));y=np(y,[1,0]),y=Bf(y,v),t.push(y),d=!0}else if(f>1){var b=KA(1,f).concat([0]);t.push(np(p,b)),d=!0}else t.push(p)}}catch(I){h.e(I)}finally{h.f()}var x=n.mergeFunction(t),A=x.rank;if(d)if(null==A){var w=x.shape,k=w[w.length-1],S=[k].concat(w.slice(0,w.length-1));x=Bf(np(Bf(x,[-1,k]),[1,0]),S)}else if(A>1){var C=[A-1].concat(KA(0,A-1));x=np(x,C)}return x}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==e[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,i=[],o=ea(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;null!=s&&null!==s[0]&&i.push(s[0])}}catch(u){o.e(u)}finally{o.f()}return t=1===(i=yA(i)).length?i.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return Wh((function(){if(null==t)return null;if(!Array.isArray(t))throw new nA("`mask` should be an Array");if(!Array.isArray(e))throw new nA("`inputs` should be an Array");if(t.length!==e.length)throw new nA("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;t=t.map((function(e){return null==e?e:Jm(e,0)}));for(var n=t[0],r=1;r<t.length-1;++r)n=Tg(n,t[r]);return n}))}}]),n}(Jw),nN=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,e)}return $r(n,[{key:"mergeFunction",value:function(e){return Wh((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=of(t,e[n]);return t}))}}]),n}(tN);nN.className="Add",Vp.registerClass(nN);var rN=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,e)}return $r(n,[{key:"mergeFunction",value:function(e){return Wh((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=lf(t,e[n]);return t}))}}]),n}(tN);rN.className="Multiply",Vp.registerClass(rN);var aN=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,e)}return $r(n,[{key:"mergeFunction",value:function(e){return Wh((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=of(t,e[n]);return lf(1/e.length,t)}))}}]),n}(tN);aN.className="Average",Vp.registerClass(aN);var iN=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,e)}return $r(n,[{key:"mergeFunction",value:function(e){return Wh((function(){for(var t=e[0],n=1;n<e.length;++n)t=zg(t,e[n]);return t}))}}]),n}(tN);iN.className="Maximum",Vp.registerClass(iN);var oN=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,e)}return $r(n,[{key:"mergeFunction",value:function(e){return Wh((function(){for(var t=e[0],n=1;n<e.length;++n)t=Hg(t,e[n]);return t}))}}]),n}(tN);oN.className="Minimum",Vp.registerClass(oN);var sN=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return $r(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new nA("A `Concatenate` layer should be called on a list of at least 2 inputs");var t,n=!0,r=ea(e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(d){r.e(d)}finally{r.f()}if(!n){for(var a=[],i=0;i<e.length;++i){var o=e[i].slice();o.splice(this.axis,1);var s,u=!1,l=ea(a);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(Cl.arraysEqual(c,o)){u=!0;break}}}catch(d){l.e(d)}finally{l.f()}u||a.push(o)}if(a.length>1)throw new nA("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return Wh((function(){return rw(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new nA("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,i=ea(n.slice(1));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null==r[a]||null==o[a]){r[a]=null;break}r[a]+=o[a]}}catch(s){i.e(s)}finally{i.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new nA("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new nA("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new nA("Mismatch in the length of mask (".concat(t.length,") and the legnth of inputs (").concat(e.length,")"));return Wh((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],i=0;i<e.length;++i)null==t[i]?a.push(th(Zg(e[i]),"bool")):t[i].rank<e[i].rank?a.push(Jm(t[i],-1)):a.push(t[i]);var o=Vf(a,n.axis);return ff(o,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(tN);function uN(e,t){for(;e<0;)e+=t;return e}sN.className="Concatenate",Vp.registerClass(sN);var lN=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return $r(n,[{key:"build",value:function(e){Cl.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new rA("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new nA("Dimension incompatibility: ".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new nA("A `Dot` layer must be called on exactly 2 inputs, but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return uN(t,e[n].shape.length)})):[uN(this.axes,n.shape.length),uN(this.axes,r.shape.length)],this.normalize&&(n=aI(n,t[0]),r=aI(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new rA("batchDot is not implemented for tensors of 4D or higher rank yet");if(Cl.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, but got ".concat(e.shape.length)})),Cl.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, but got ".concat(t.shape.length)})),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new rA("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var i=n;return Wh((function(){var n,o;if(r>a){n=r-a;for(var s=[],u=0;u<n;++u)s.push(1);t=Bf(t,t.shape.concat(s))}else if(a>r){n=a-r;for(var l=[],c=0;c<n;++c)l.push(1);e=Bf(e,e.shape.concat(l))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=i[0]===i[1]?Xm(lf(e,t),i[0]):Xm(lf(np(e,[1,0]),t),i[1]);else{var d=i[0]!==e.shape.length-1,h=i[1]===t.shape.length-1;o=_h(e,t,d,h)}if(n>0){for(var p,f=[],m=p=r>a?r+a-3:r-1;m<p+n;++m)f.push(m);o=Uv(o,f)}return 1===o.shape.length&&(o=Jm(o,1)),o}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[uN(this.axes,e.length),uN(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){Cl.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new rA("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(tN);lN.className="Dot",Vp.registerClass(lN);var cN=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return $r(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=zr(Dr(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Wh((function(){n.invokeCallHook(e,t);var r=Bw(e);return fw((function(){return of(ow(r.shape,0,n.stddev),r)}),(function(){return r}),t.training||!1)}))}}]),n}(Jw);cN.className="GaussianNoise",Vp.registerClass(cN);var dN=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return $r(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=zr(Dr(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Wh((function(){n.invokeCallHook(e,t);var r=Bw(e);return n.rate>0&&n.rate<1?fw((function(){var e=Math.sqrt(n.rate/(1-n.rate));return lf(r,ow(r.shape,1,e))}),(function(){return r}),t.training||!1):r}))}}]),n}(Jw);dN.className="GaussianDropout",Vp.registerClass(dN);var hN=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return $r(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||Bw(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=zr(Dr(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Wh((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return fw((function(){var t=Bw(e),a=-1.7580993408473766,i=ig(fv(r),n.rate);i=JA(i,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-o*a*n.rate,u=of(lf(t,i),lf(of(i,-1),a));return of(lf(u,o),s)}),(function(){return Bw(e)}),t.training||!1)}return e}))}}]),n}(Jw);function pN(e,t,n,r,a){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=Zf(e,t,n,r,a,o);else if(3===e.rank)i=Jf(e,t,n,r,a,o);else{if(4!==e.rank)throw new rA("batchNormalization is not implemented for array of rank ".concat(e.rank," yet"));i=Qf(e,t,n,r,a,o)}return i}function fN(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Wh((function(){var i=Xg(e,r),o=i.mean,s=i.variance;return[pN(e,o,s,n,t,a),o,s]}))}function mN(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Wh((function(){var i,o=Xg(e,r),s=o.mean,u=o.variance,l=[],c=ea(KA(0,e.rank));try{for(c.s();!(i=c.n()).done;){var d=i.value;-1!==r.indexOf(d)?l.push(1):l.push(e.shape[d])}}catch(g){c.e(g)}finally{c.f()}var h=Bf(s,l),p=Bf(u,l),f=null==t?null:Bf(t,l),m=null==n?null:Bf(n,l);return[pN(e,h,p,m,f,a),s,u]}))}hN.className="AlphaDropout",Vp.registerClass(hN);var gN=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=Dw(e.betaInitializer||"zeros"),r.gammaInitializer=Dw(e.gammaInitializer||"ones"),r.movingMeanInitializer=Dw(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=Dw(e.movingVarianceInitializer||"ones"),r.betaConstraint=kC(e.betaConstraint),r.gammaConstraint=kC(e.gammaConstraint),r.betaRegularizer=tT(e.betaRegularizer),r.gammaRegularizer=tT(e.gammaRegularizer),r}return $r(n,[{key:"build",value:function(e){e=Ww(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new nA("Axis ".concat(t," of input tensor should have a defined dimension but the layer received an input with shape ").concat(JSON.stringify(e),"."));this.inputSpec=[new Xw({ndim:e.length,axes:Fr({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return Wh((function(){var r=null!=t.training&&t.training,a=Bw(e),i=a.shape,o=i.length,s=KA(0,o),l=n.axis>=0?n.axis:n.axis+o;s.splice(l,1);var c=oA(1,o);c[l]=i[l];var d=s.slice();d.sort();var h=!Cl.arraysEqual(d,KA(0,o).slice(0,o-1));if(!r)return function(){if(h){var e=Bf(n.movingMean.read(),c),t=Bf(n.movingVariance.read(),c),r=n.center?Bf(n.beta.read(),c):null,i=n.scale?Bf(n.gamma.read(),c):null;return pN(a,e,t,r,i,n.epsilon)}return pN(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var p=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Cl.arraysEqual(r.slice().sort(),KA(0,e.rank-1))?fN(e,t,n,r,a):mN(e,t,n,r,a)}(a,n.gamma.read(),n.beta.read(),s,n.epsilon),f=u(p,3),m=f[0],g=f[1],v=f[2],y=function(e,t,n){Wh((function(){var r=1-n,a=e.read(),i=lf(Cg(a,t),r);e.write(Cg(a,i))}))};return y(n.movingMean,g,n.momentum),y(n.movingVariance,v,n.momentum),m}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Fw(this.betaInitializer),gammaInitializer:Fw(this.gammaInitializer),movingMeanInitializer:Fw(this.movingMeanInitializer),movingVarianceInitializer:Fw(this.movingVarianceInitializer),betaRegularizer:$E(this.betaRegularizer),gammaRegularizer:$E(this.gammaRegularizer),betaConstraint:AC(this.betaConstraint),gammaConstraint:AC(this.gammaConstraint)},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw);gN.className="BatchNormalization",Vp.registerClass(gN);var vN=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"==typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, but received ".concat(JSON.stringify(r.axis)));var a,i=ea(r.axis);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, but received ".concat(JSON.stringify(r.axis)))}}catch(s){i.e(s)}finally{i.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=Dw(e.betaInitializer||"zeros"),r.gammaInitializer=Dw(e.gammaInitializer||"ones"),r.betaRegularizer=tT(e.betaRegularizer),r.gammaRegularizer=tT(e.gammaRegularizer),r.supportsMasking=!0,Xr(r)}return $r(n,[{key:"build",value:function(e){var t=(e=Ww(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=ea(this.axis);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i))}}catch(s){a.e(s)}finally{a.f()}if(this.axis.length!==yA(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=Bw(e),a=r.shape,i=a.length;return Wh((function(){var e,t=Xg(r,n.axis,!0),o=t.mean,s=t.variance,u=oA(1,i),l=ea(n.axis);try{for(l.s();!(e=l.n()).done;){var c=e.value;u[c]=a[c]}}catch(v){l.e(v)}finally{l.f()}for(var d=function(e){return null!=e&&e.shape.length!==i?Bf(e,u):e},h=n.scale?d(n.gamma.read()):null,p=n.center?d(n.beta.read()):null,f=[],m=[],g=0;g<i;++g)-1!==n.axis.indexOf(g)?(f.push(a[g]),m.push(1)):(f.push(1),m.push(a[g]));return o=$m(o,f),s=$m(s,f),null!=h&&(h=$m(h,m)),null!=p&&(p=$m(p,m)),pN(r,o,s,p,h,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Fw(this.betaInitializer),gammaInitializer:Fw(this.gammaInitializer),betaRegularizer:$E(this.betaRegularizer),gammaRegularizer:$E(this.gammaRegularizer)},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw);vN.className="LayerNormalization",Vp.registerClass(vN);var yN=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new nA("ZeroPadding2D expects padding to be a length-2 array, but received a length-".concat(e.padding.length," array."));var a,i;if("number"==typeof e.padding[0])a=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new nA("ZeroPadding2D expects height padding to be a length-2 array, but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new nA("ZeroPadding2D expects width padding to be a length-2 array, but received a length-".concat(e.padding[1].length," array."));i=e.padding[1]}r.padding=[a,i]}return r.inputSpec=[new Xw({ndim:4})],Xr(r)}return $r(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=Ww(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return Wh((function(){return function(e,t,n){return Wh((function(){if(4!==e.rank)throw new nA("temporalPadding expects input tensor to be 4-D, but received a ".concat(e.rank,"-D tensor."));if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new nA("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new nA("Unknown data format: ".concat(n,". Supported data formats are 'channelsLast' and 'channelsFirst."));var r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],Qg(e,r)}))}(Bw(e),n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw);function bN(e,t,n,r,a,i){return Wh((function(){FA(a),LA(i),DA(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=dT(e,a);var o,s="same"===r?"same":"valid";return o="max"===i?Fg(e,t,n,s):Wf(e,t,n,s),"channelsFirst"===a&&(o=np(o,[0,3,1,2])),o}))}function xN(e,t,n,r,a,i){return Wh((function(){FA(a),LA(i),DA(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=hT(e,a);var o,s="same"===r?"same":"valid";return o="max"===i?Dg(e,t,n,s):jf(e,t,n,s),"channelsFirst"===a&&(o=np(o,[0,4,1,2,3])),o}))}yN.className="ZeroPadding2D",Vp.registerClass(yN);var AN=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"==typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new nA("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(wA(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"==typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new nA("strides for 1D convolutional layer must be a number or an Array of a single number, but received ".concat(JSON.stringify(e.strides)));r.strides=e.strides}return wA(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,DA(r.padding),r.inputSpec=[new Xw({ndim:3})],Xr(r)}return $r(n,[{key:"computeOutputShape",value:function(e){var t=lT((e=Ww(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return Wh((function(){n.invokeCallHook(e,t),e=QA(Bw(e),2);var r=n.poolingFunction(Bw(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return Uv(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw),wN=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,e)}return $r(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return FA(a),DA(r),bN(e,t,n,r,a,"max")}}]),n}(AN);wN.className="MaxPooling1D",Vp.registerClass(wN);var kN=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,e)}return $r(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return FA(a),DA(r),bN(e,t,n,r,a,"avg")}}]),n}(AN);kN.className="AveragePooling1D",Vp.registerClass(kN);var SN=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new nA("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return wA(r.poolSize,"poolSize"),wA(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,FA(r.dataFormat),DA(r.padding),r.inputSpec=[new Xw({ndim:4})],Xr(r)}return $r(n,[{key:"computeOutputShape",value:function(e){e=Ww(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=lT(t,this.poolSize[0],this.padding,this.strides[0]),n=lT(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return Wh((function(){return n.invokeCallHook(e,t),n.poolingFunction(Bw(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw),CN=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,e)}return $r(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return FA(a),DA(r),bN(e,t,n,r,a,"max")}}]),n}(SN);CN.className="MaxPooling2D",Vp.registerClass(CN);var IN=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,e)}return $r(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return FA(a),DA(r),bN(e,t,n,r,a,"avg")}}]),n}(SN);IN.className="AveragePooling2D",Vp.registerClass(IN);var EN=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new nA("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return wA(r.poolSize,"poolSize"),wA(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,FA(r.dataFormat),DA(r.padding),r.inputSpec=[new Xw({ndim:5})],Xr(r)}return $r(n,[{key:"computeOutputShape",value:function(e){e=Ww(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=lT(t,this.poolSize[0],this.padding,this.strides[0]),n=lT(n,this.poolSize[1],this.padding,this.strides[1]),r=lT(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return Wh((function(){return n.invokeCallHook(e,t),n.poolingFunction(Bw(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw),TN=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,e)}return $r(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return FA(a),DA(r),xN(e,t,n,r,a,"max")}}]),n}(EN);TN.className="MaxPooling3D",Vp.registerClass(TN);var NN=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,e)}return $r(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return FA(a),DA(r),xN(e,t,n,r,a,"avg")}}]),n}(EN);NN.className="AveragePooling3D",Vp.registerClass(NN);var _N=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,e)).inputSpec=[new Xw({ndim:3})],r}return $r(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new rA}}]),n}(Jw),MN=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,e||{})}return $r(n,[{key:"call",value:function(e,t){return Wh((function(){var t=Bw(e);return Bg(t,1)}))}}]),n}(_N);MN.className="GlobalAveragePooling1D",Vp.registerClass(MN);var RN=function(e){Kr(n,e);var t=Zr(n);function n(e){return Jr(this,n),t.call(this,e||{})}return $r(n,[{key:"call",value:function(e,t){return Wh((function(){var t=Bw(e);return Wm(t,1)}))}}]),n}(_N);RN.className="GlobalMaxPooling1D",Vp.registerClass(RN);var ON=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,FA(r.dataFormat),r.inputSpec=[new Xw({ndim:4})],r}return $r(n,[{key:"computeOutputShape",value:function(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new rA}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(Jw),PN=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"call",value:function(e,t){var n=this;return Wh((function(){var t=Bw(e);return"channelsLast"===n.dataFormat?Bg(t,[1,2]):Bg(t,[2,3])}))}}]),n}(ON);PN.className="GlobalAveragePooling2D",Vp.registerClass(PN);var FN=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"call",value:function(e,t){var n=this;return Wh((function(){var t=Bw(e);return"channelsLast"===n.dataFormat?Wm(t,[1,2]):Wm(t,[2,3])}))}}]),n}(ON);FN.className="GlobalMaxPooling2D",Vp.registerClass(FN);var DN=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,e)).layer=e.layer,r}return $r(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){zr(Dr(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.layer,a=rI(r,n);delete t.layer;var i={layer:a};return Object.assign(i,t),new e(i)}}]),n}(Jw),LN=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return $r(n,[{key:"build",value:function(e){if((e=Ww(e)).length<3)throw new nA("TimeDistributed layer expects an input shape >= 3D, but received input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),zr(Dr(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=Ww(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return Wh((function(){return _T((function(e,r){return[Bw(n.layer.call(e,t)),[]]}),e=Bw(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(DN);LN.className="TimeDistributed",Vp.registerClass(LN);var zN=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;Jr(this,n),r=t.call(this,e);var a=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=a,r.forwardLayer=rI(i),a.goBackwards=!0!==a.goBackwards;var o={};if(o.className=e.layer.getClassName(),o.config=a,r.backwardLayer=rI(o),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function(e){xA(OA,"BidirectionalMergeMode",e)}(r.mergeMode),e.weights)throw new rA("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return $r(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState&&(r=a.slice(1)),t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):lA(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=NT(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return zr(Dr(n.prototype),"apply",this).call(this,e,t);var o=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new nA("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push.apply(o,ta(r));var l=r.map((function(e){return new Xw({shape:e.shape})}));this.forwardLayer.stateSpec=l.slice(0,u/2),this.backwardLayer.stateSpec=l.slice(u/2),s.push.apply(s,ta(l))}if(null!=a)throw new rA("Support for constants in Bidirectional layers is not implemented yet.");for(var c=o[0]instanceof qw,d=0,h=o;d<h.length;d++){if(h[d]instanceof qw!==c)throw new nA("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(c){var p=[e].concat(o),f=this.inputSpec.concat(s),m=this.inputSpec;this.inputSpec=f;var g=zr(Dr(n.prototype),"apply",this).call(this,p,t);return this.inputSpec=m,g}return zr(Dr(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Wh((function(){var r,a,i,o,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var u=s.slice(0,s.length/2),l=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:l}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=bv(a,1)),"concat"===n.mergeMode?o=rw([r,a]):"sum"===n.mergeMode?o=of(r,a):"ave"===n.mergeMode?o=lf(.5,of(r,a)):"mul"===n.mergeMode?o=lf(r,a):null==n.mergeMode&&(o=[r,a]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;BA(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),BA(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){zr(Dr(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=zr(Dr(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=rI(t.layer);if(delete t.layer,null!=t.numConstants)throw new rA("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(DN);function BN(e){return new $w(e)}function WN(e){return new iT(e)}function jN(e){return new nT(e)}function VN(e){return new rT(e)}function HN(e){return new aT(e)}function UN(e){return new sT(e)}function GN(e){return new oT(e)}function XN(e){return new CT(e)}function qN(e){return new vT(e)}function YN(e){return new xT(e)}function KN(e){return new bT(e)}function ZN(e){return new AT(e)}function JN(e){return new kT(e)}function QN(e){return new IT(e)}function $N(e){return new ET(e)}function e_(e){return new TT(e)}function t_(e){return new KT(e)}function n_(e){return new qT(e)}function r_(e){return new GT(e)}function a_(e){return new XT(e)}function i_(e){return new YT(e)}function o_(e){return new ZT(e)}function s_(e){return new JT(e)}function u_(e){return new QT(e)}function l_(e){return new eN(e)}function c_(e){return new nN(e)}function d_(e){return new aN(e)}function h_(e){return new sN(e)}function p_(e){return new iN(e)}function f_(e){return new oN(e)}function m_(e){return new rN(e)}function g_(e){return new lN(e)}function v_(e){return new gN(e)}function y_(e){return new vN(e)}function b_(e){return new yN(e)}function x_(e){return new kN(e)}function A_(e){return x_(e)}function w_(e){return x_(e)}function k_(e){return new IN(e)}function S_(e){return k_(e)}function C_(e){return k_(e)}function I_(e){return new NN(e)}function E_(e){return I_(e)}function T_(e){return I_(e)}function N_(e){return new MN(e)}function __(e){return new PN(e)}function M_(e){return new RN(e)}function R_(e){return new FN(e)}function O_(e){return new wN(e)}function P_(e){return new CN(e)}function F_(e){return new TN(e)}function D_(e){return new LT(e)}function L_(e){return new DT(e)}function z_(e){return new BT(e)}function B_(e){return new zT(e)}function W_(e){return new FT(e)}function j_(e){return new PT(e)}function V_(e){return new UT(e)}function H_(e){return new HT(e)}function U_(e){return new RT(e)}function G_(e){return new WT(e)}function X_(e){return new zN(e)}function q_(e){return new LN(e)}zN.className="Bidirectional",Vp.registerClass(zN);var Y_=M_,K_=R_,Z_=O_,J_=P_;function Q_(e){return new cN(e)}function $_(e){return new dN(e)}function eM(e){return new hN(e)}function tM(e){return new $T(e)}var nM={};function rM(e,t){return fI(e,t)}function aM(e,t){return bI(e,t)}function iM(e,t){return xI(e,t)}function oM(e,t){return mI(e,t)}function sM(e,t){return AI(e,t)}function uM(e,t){return vI(e,t)}function lM(e,t){return yI(e,t)}function cM(e,t){return dI(e,t)}function dM(e,t){return oI(e,t)}function hM(e,t){return sI(e,t)}function pM(e,t){return sI(e,t)}function fM(e,t){return sI(e,t)}function mM(e,t){return iI(e,t)}function gM(e,t){return iI(e,t)}function vM(e,t){return iI(e,t)}Ea(nM,{MAPE:function(){return pM},MSE:function(){return gM},binaryAccuracy:function(){return rM},binaryCrossentropy:function(){return aM},categoricalAccuracy:function(){return oM},categoricalCrossentropy:function(){return sM},cosineProximity:function(){return cM},mape:function(){return fM},meanAbsoluteError:function(){return dM},meanAbsolutePercentageError:function(){return hM},meanSquaredError:function(){return mM},mse:function(){return vM},precision:function(){return uM},recall:function(){return lM},sparseCategoricalAccuracy:function(){return iM}});var yM={};Ea(yM,{modelFromJSON:function(){return yE}});var bM={};function xM(e){return new JE(e)}function AM(e){return function(e){return KE(e),new JE({l1:null!=e?e.l1:null,l2:0})}(e)}function wM(e){return function(e){return KE(e),new JE({l2:null!=e?e.l2:null,l1:0})}(e)}Ea(bM,{l1:function(){return AM},l1l2:function(){return xM},l2:function(){return wM}});var kM=function(e){Kr(n,e);var t=Zr(n);function n(){var e;return Jr(this,n),(e=t.apply(this,arguments)).model=null,e}return $r(n,[{key:"setModel",value:function(e){if(!(e instanceof gE))throw new Error("model must be a LayersModel, not some other Container");this.model=e}}]),n}(YC);function SM(e,t){return e<t}function CM(e,t){return e>t}var IM=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),r=t.call(this),null==e&&(e={}),e.restoreBestWeights)throw new rA("restoreBestWeights = True is not implemented in EarlyStopping yet.");return r.monitor=e.monitor||"val_loss",r.minDelta=Math.abs(e.minDelta||0),r.patience=e.patience||0,r.verbose=e.verbose||0,r.mode=e.mode||"auto",r.baseline=e.baseline,-1===["auto","min","max"].indexOf(r.mode)&&(console.warn("EarlyStopping mode '".concat(r.mode,"' is invalid. Falling back to mode 'auto'.")),r.mode="auto"),"min"===r.mode?r.monitorFunc=SM:"max"===r.mode||-1!==r.monitor.indexOf("acc")?r.monitorFunc=CM:r.monitorFunc=SM,r.monitorFunc===SM&&(r.minDelta*=-1),Xr(r)}return $r(n,[{key:"onTrainBegin",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===SM?1/0:-1/0;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=Mr(Nr().mark((function e(t,n){var r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GC(n);case 2:null!=(r=this.getMonitorValue(n))&&(this.monitorFunc(r-this.minDelta,this.best)?(this.best=r,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=t,this.model.stopTraining=!0)));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.stoppedEpoch>0&&this.verbose&&console.log("Epoch ".concat(this.stoppedEpoch,": early stopping."));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMonitorValue",value:function(e){null==e&&(e={});var t=e[this.monitor];return null==t&&console.warn("Metric for EarlyStopping ".concat(this.monitor," is not available. Available metrics are: ").concat(Object.keys(e))),t}}]),n}(kM);var EM={earlyStopping:function(e){return new IM(e)}};Zi().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}));var TM,NM=function(e){return e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF",e}(NM||{});!function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(TM||(TM={}));var _M={};function MM(e,t){var n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};_M[e]=n}function RM(e){return _M[e]}function OM(e){delete _M[e]}function PM(e,t,n,r,a){var i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){var o=i.inputIndexStart,s=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?o+1:i.inputIndexEnd;if("tensor"===i.type)return FM(t.inputNames[i.inputIndexStart],n,r,a);if("tensors"===i.type)return t.inputNames.slice(o,s).map((function(e){return FM(e,n,r,a)}));var u=FM(t.inputNames.slice(o)[0],n,r,a),l=u.dataSync();return"number"===i.type?l[0]:Cl.toNestedArray(u.shape,l)}var c=t.attrParams[e];return c&&c.value}function FM(e,t,n,r){var a=u(zM(e),2),i=a[0],o=a[1];if(null!=r){var s=r.getHashTableHandleByName(i);if(null!=s)return s}var l=n.currentContextIds.find((function(e){return!!t[LM(i,e)]}));return void 0!==l?t[LM(i,l)][o]:void 0}function DM(e,t){var n=u(zM(e),3),r=n[0],a=n[1],i=n[2];return[LM(r,t&&t.currentContextId),a,i]}function LM(e,t){return t?"".concat(e,"-").concat(t):e}function zM(e){var t=e.split(":");if(1===t.length)return[e,0,void 0];var n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function BM(e,t,n){var r=PM("pad",e,t,n);if("explicit"===r){r=PM("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],i=0;i<4;i++)a[i][0]=r[2*i],a[i][1]=r[2*i+1];return a}return r}function WM(e){return e.kept?e:nh(e)}var jM={};Ea(jM,{json:function(){return VM}});var VM=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],HM={};Ea(HM,{json:function(){return UM}});var UM=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],GM={};Ea(GM,{json:function(){return XM}});var XM=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],qM={};Ea(qM,{json:function(){return YM}});var YM=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],KM={};Ea(KM,{json:function(){return ZM}});var ZM=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],JM={};Ea(JM,{json:function(){return QM}});var QM=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],$M={};Ea($M,{json:function(){return eR}});var eR=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],tR={};Ea(tR,{json:function(){return nR}});var nR=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],rR={};Ea(rR,{json:function(){return aR}});var aR=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],iR={};Ea(iR,{json:function(){return oR}});var oR=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],sR={};Ea(sR,{json:function(){return uR}});var uR=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],lR={};Ea(lR,{json:function(){return cR}});var cR=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],dR={};Ea(dR,{json:function(){return hR}});var hR=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],pR={};Ea(pR,{json:function(){return fR}});var fR=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],mR={};Ea(mR,{json:function(){return gR}});var gR=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],vR={};Ea(vR,{json:function(){return yR}});var yR=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],bR={};Ea(bR,{json:function(){return xR}});var xR=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],AR={};Ea(AR,{json:function(){return wR}});var wR=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],kR={};Ea(kR,{json:function(){return SR}});var SR=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],CR=function(){function e(){var t;Jr(this,e);var n=[jM,HM,GM,qM,KM,JM,$M,tR,rR,iR,sR,lR,dR,pR,mR,vR,bR,AR,kR],r=(t=[]).concat.apply(t,ta(n.map((function(e){return e.json}))));this.opMappers=r.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return $r(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],i=[],o=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?i.push(e[n.name]):(null==n.input||0===n.input.length)&&o.push(e[n.name]),e}),{}),l=[],c=[],d={},h={};null!=n&&(d=this.mapSignatureEntries(n.inputs),h=this.mapSignatureEntries(n.outputs));var p=Object.keys(s);p.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e,n){var r=u(DM(e),3),a=r[0],i=r[2],o=s[a];if(null!=o.outputs){var l=o.outputs.indexOf(i);if(-1!==l){var c="".concat(a,":").concat(l);t.inputNames[n]=c}}t.inputs.push(o),o.children.push(t)}))})),0===Object.keys(h).length?p.forEach((function(e){var t=s[e];0===t.children.length&&c.push(t)})):Object.keys(h).forEach((function(e){var t=u(DM(e),1)[0],n=s[t];null!=n&&(n.signatureKey=h[e],c.push(n))})),Object.keys(d).length>0?Object.keys(d).forEach((function(e){var t=u(DM(e),1)[0],n=s[t];n&&(n.signatureKey=d[e],l.push(n))})):l=a;var f={};null!=e.library&&null!=e.library.function&&(f=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var m={nodes:s,inputs:l,outputs:c,weights:i,placeholders:a,signature:n,functions:f};return o.length>0&&(m.initNodes=o),m}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=RM(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.slice(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r,a=n.type;switch(n.type){case"string":void 0===(r=ER(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=ER(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(r=LR(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=LR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(r=NR(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(r=NR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(r=DR(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=DR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(r=TR(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=TR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(r=BR(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=BR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(r=FR(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=FR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(r=zR(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=zR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(r=RR(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=RR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(r=OR(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=OR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(r=MR(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=MR(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:r,type:a},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var i=[],o=[];e.signature.inputArg.forEach((function(e){var t=u(DM(e.name),1)[0],n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:_R(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,i.push(n),a[t]=n})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=u(DM(e),3),i=r[0],o=r[2],s=a[i];if(null!=s.outputs){var l=s.outputs.indexOf(o);if(-1!==l){var c="".concat(i,":").concat(l);t.inputNames[n]=c}}t.inputs.push(s),s.children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=u(DM(s[e.name]),2),n=t[0],r=t[1],i=a[n];null!=i&&(i.defaultOutput=r,o.push(i))}));var l=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:r,placeholders:[],signature:l}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function IR(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=Zi().global;if("undefined"!=typeof t.atob)return t.atob(e);if("undefined"!=typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function ER(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?IR(a.s,r):n}function TR(e,t,n){var r=e[t];return r?r.b:n}function NR(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof a?a:parseInt(a,10)}function _R(e){switch("string"==typeof e&&(e=NM[e]),e){case 1:case 19:case 2:return"float32";case 3:case 9:case 6:case 4:return"int32";case 10:return"bool";case 7:return"string";default:return null}}function MR(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function RR(e,t,n){var r=e[t];return r&&r.type?_R(r.type):n}function OR(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return _R(e)})):n}function PR(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"==typeof e.size?e.size:parseInt(e.size,10)})):[]}function FR(e,t,n){var r=e[t];return r&&r.shape?PR(r.shape):n}function DR(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"==typeof e?e:parseInt(e,10)})):n}function LR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return IR(e,r)})):n}function zR(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return PR(e)})):n}function BR(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var WR=function(){function e(t,n,r){var a=this;Jr(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return $r(e,[{key:"getInput",value:function(e){return FM(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return FM(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return NR(this.node.rawAttrs,e,t);if(null!=n.s)return ER(this.node.rawAttrs,e,t);if(null!=n.b)return TR(this.node.rawAttrs,e,t);if(null!=n.shape)return FR(this.node.rawAttrs,e,t);if(null!=n.type)return RR(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return DR(this.node.rawAttrs,e,t);if(null!=n.list.s)return LR(this.node.rawAttrs,e,t);if(null!=n.list.shape)return zR(this.node.rawAttrs,e,t);if(null!=n.list.b)return BR(this.node.rawAttrs,e,t);if(null!=n.list.type)return OR(this.node.rawAttrs,e,t)}return t}}]),e}();function jR(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!=typeof e&&"number"!=typeof t){Cl.assert(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],i=t[r];Cl.assert(a<0||i<0||a===i,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function VR(e){return!("number"==typeof e||e.some((function(e){return e<0})))}function HR(e,t,n){var r=UR(e,n),a=!VR(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=UR(e.shape,r)})),!VR(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function UR(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var GR=function(){function e(t,n,r,a,i,o,s){Jr(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=Hm(0),Vh(this.idTensor)}return $r(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){(null==e||!e.has(t.tensor.id))&&t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?)."));return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0===this.size()&&(null==this.elementShape||0===this.elementShape.length)&&(this.elementShape=t.shape),jR(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,Vh(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,because the index size: ").concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return Xc([],[0].concat(this.elementShape));var r=this.readMany(e);return jR(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Gv(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return Xc([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return jR(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),Vf(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,ta(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,ay(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), and the TensorArray is not marked as dynamically resizeable"));var i=0===r?0:t.size/r,o=[];Wh((function(){t=Bf(t,[1,r,i]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],l=[1,e[s],i];o[s]=Bf(Uf(t,u,l),n.elementShape)}return o}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,o)}}]),e}(),XR=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;Jr(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));jR(n,e.shape,"TensorList shape mismatch: "),Vh(e)})),this.idTensor=Hm(0),this.maxNumElements=a,Vh(this.idTensor)}return $r(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e(ta(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){(null==e||!e.has(t.id))&&t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));jR(e,this.elementShape,"TensorList shape mismatch: ");var a=HR(this.elementShape,this.tensors,e);return Wh((function(){var e=n.tensors.map((function(e){return Bf(e,a)}));return Gv(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=HR(this.elementShape,this.tensors,e),r=this.tensors.pop();return jR(r.shape,e,"TensorList shape mismatch: "),Bf(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(jR(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Vh(e),this.tensors.push(e)}},{key:"resize",value:function(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(t));if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error("TensorListResize input size ".concat(t," is greater maxNumElement ").concat(this.maxNumElements,"."));var n=new e([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(var r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));jR(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=HR(this.elementShape,this.tensors,t);return Bf(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));jR(this.elementShape,t.shape,"TensorList shape mismatch: "),Vh(t),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));jR(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=HR(this.elementShape,this.tensors,n);return 0===e.length?Xc([],[0].concat(a)):Wh((function(){var t=e.map((function(e){return Bf(r.tensors[e],a)}));return Gv(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));jR(this.elementShape,t,"TensorList shape mismatch: ");var r=HR(this.elementShape,this.tensors,t);return 0===this.size()?Xc([],[0].concat(r)):Wh((function(){var e=n.tensors.map((function(e){return Bf(e,r)}));return Vf(e,0)}))}}]),e}();function qR(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));jR(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=ay(e);return new XR(a,t,r)}function YR(e,t,n){return new XR([],e,t,n)}function KR(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,ta(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var i=new XR([],n,e.dtype,r),o=ay(e,0);return t.forEach((function(e,t){i.setItem(e,o[t])})),i}function ZR(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var i=UR(e.shape.slice(1),n),o=0===r?0:e.size/r,s=Wh((function(){var n=[];e=Bf(e,[1,r,o]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:a[s-1],0],l=[1,t[s],o];n[s]=Bf(Uf(e,u,l),i)}return e.dispose(),n})),u=new XR([],n,e.dtype,t.length),l=0;l<s.length;l++)u.setItem(l,s[l]);return u}var JR=function(){var e=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h,p,f,m,g,v,y,b,x,A,w,k,S,C,I,E,T,N,_,M,R,O,P,F,D,L,z,B,W,j,V,H,U,G,X,q,Y,K,Z,J,Q,$,ee,te,ne,re,ae,ie,oe,se,ue,le,ce,de,he,pe,fe,me,ge,ve,ye,be,xe,Ae,we,ke,Se,Ce,Ie,Ee,Te,Ne,_e,Me,Re,Oe,Pe,Fe,De,Le,ze,Be,We,je,Ve,He,Ue;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?12:"LoopCond"===e.t0?16:"Switch"===e.t0?18:"Merge"===e.t0?28:"Enter"===e.t0?33:"Exit"===e.t0?35:"NextIteration"===e.t0?37:"TensorArrayV3"===e.t0?39:"TensorArrayWriteV3"===e.t0?41:"TensorArrayReadV3"===e.t0?43:"TensorArrayGatherV3"===e.t0?45:"TensorArrayScatterV3"===e.t0?47:"TensorArrayConcatV3"===e.t0?49:"TensorArraySplitV3"===e.t0?51:"TensorArraySizeV3"===e.t0?53:"TensorArrayCloseV3"===e.t0?55:"TensorListSetItem"===e.t0?57:"TensorListGetItem"===e.t0?59:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?61:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?63:"TensorListGather"===e.t0?67:"TensorListStack"===e.t0?69:"TensorListFromTensor"===e.t0?71:"TensorListConcat"===e.t0||"TensorListConcatV2"===e.t0?73:"TensorListPushBack"===e.t0?75:"TensorListPopBack"===e.t0?77:"TensorListSplit"===e.t0?79:"TensorListLength"===e.t0?81:"TensorListResize"===e.t0?83:85;break;case 3:return a=PM("thenBranch",t,n,r),i=PM("elseBranch",t,n,r),o=PM("cond",t,n,r),s=PM("args",t,n,r),e.next=6,o.data();case 6:if(!e.sent[0]){e.next=10;break}e.t1=r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap),e.next=11;break;case 10:e.t1=r.functionMap[i].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap);case 11:return e.abrupt("return",e.t1);case 12:return e.delegateYield(Nr().mark((function e(){var a,i,o,s,u,l,c,d;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=PM("body",t,n,r),i=PM("cond",t,n,r),o=PM("args",t,n,r),e.next=5,r.functionMap[i].executeFunctionAsync(o,r.tensorArrayMap,r.tensorListMap);case 5:return s=e.sent,u=o.map((function(e){return e.id})),e.next=9,s[0].data();case 9:l=e.sent,s.forEach((function(e){!e.kept&&-1===u.indexOf(e.id)&&e.dispose()})),c=o,d=Nr().mark((function e(){var t,n,o;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c,e.next=3,r.functionMap[a].executeFunctionAsync(c,r.tensorArrayMap,r.tensorListMap);case 3:return c=e.sent,n=c.map((function(e){return e.id})),t.forEach((function(e){!e.kept&&-1===u.indexOf(e.id)&&-1===n.indexOf(e.id)&&e.dispose()})),e.next=8,r.functionMap[i].executeFunctionAsync(c,r.tensorArrayMap,r.tensorListMap);case 8:return o=e.sent,e.next=11,o[0].data();case 11:l=e.sent,o.forEach((function(e){!e.kept&&-1===u.indexOf(e.id)&&-1===n.indexOf(e.id)&&e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 13:if(!l[0]){e.next=17;break}return e.delegateYield(d(),"t0",15);case 15:e.next=13;break;case 17:return e.abrupt("return",{v:c});case 18:case"end":return e.stop()}}),e)}))(),"t2",13);case 13:if("object"!==typeof(u=e.t2)){e.next=16;break}return e.abrupt("return",u.v);case 16:return l=PM("pred",t,n,r),e.abrupt("return",[WM(l)]);case 18:return c=PM("pred",t,n,r),(d=PM("data",t,n,r)).kept||(d=WM(d)),e.next=22,c.data();case 22:if(!e.sent[0]){e.next=26;break}e.t3=[void 0,d],e.next=27;break;case 26:e.t3=[d,void 0];case 27:return e.abrupt("return",e.t3);case 28:if(h=t.inputNames.find((function(e){return void 0!==FM(e,n,r)})),!h){e.next=32;break}return p=FM(h,n,r),e.abrupt("return",[WM(p)]);case 32:return e.abrupt("return");case 33:return f=PM("frameName",t,n,r),m=PM("tensor",t,n,r),e.abrupt("return",(r.enterFrame(f),[WM(m)]));case 35:return g=PM("tensor",t,n,r),e.abrupt("return",(r.exitFrame(),[WM(g)]));case 37:return v=PM("tensor",t,n,r),e.abrupt("return",(r.nextIteration(),[WM(v)]));case 39:return y=PM("size",t,n,r),b=PM("dtype",t,n,r),x=PM("elementShape",t,n,r),A=PM("dynamicSize",t,n,r),w=PM("clearAfterRead",t,n,r),k=PM("identicalElementShapes",t,n,r),S=PM("name",t,n,r),C=new GR(S,b,y,x,k,A,w),e.abrupt("return",(r.addTensorArray(C),[C.idTensor,Hm(1)]));case 41:return I=PM("tensorArrayId",t,n,r),E=PM("index",t,n,r),T=PM("tensor",t,n,r),N=r.getTensorArray(I.id),e.abrupt("return",(N.write(E,T),[N.idTensor]));case 43:return _=PM("tensorArrayId",t,n,r),M=PM("index",t,n,r),e.abrupt("return",[r.getTensorArray(_.id).read(M)]);case 45:return R=PM("tensorArrayId",t,n,r),O=PM("indices",t,n,r),P=PM("dtype",t,n,r),e.abrupt("return",[r.getTensorArray(R.id).gather(O,P)]);case 47:return F=PM("tensorArrayId",t,n,r),D=PM("indices",t,n,r),L=PM("tensor",t,n,r),z=r.getTensorArray(F.id),e.abrupt("return",(z.scatter(D,L),[z.idTensor]));case 49:return B=PM("tensorArrayId",t,n,r),W=r.getTensorArray(B.id),j=PM("dtype",t,n,r),e.abrupt("return",[W.concat(j)]);case 51:return V=PM("tensorArrayId",t,n,r),H=PM("tensor",t,n,r),U=PM("lengths",t,n,r),G=r.getTensorArray(V.id),e.abrupt("return",(G.split(U,H),[G.idTensor]));case 53:return X=PM("tensorArrayId",t,n,r),q=r.getTensorArray(X.id),e.abrupt("return",[Hm(q.size(),"int32")]);case 55:return Y=PM("tensorArrayId",t,n,r),K=r.getTensorArray(Y.id),e.abrupt("return",(K.clearAndClose(),[K.idTensor]));case 57:return Z=PM("tensorListId",t,n,r),J=PM("index",t,n,r),Q=PM("tensor",t,n,r),$=r.getTensorList(Z.id),e.abrupt("return",($.setItem(J,Q),[$.idTensor]));case 59:return ee=PM("tensorListId",t,n,r),te=PM("index",t,n,r),ne=PM("elementShape",t,n,r),re=PM("elementDType",t,n,r),e.abrupt("return",[r.getTensorList(ee.id).getItem(te,ne,re)]);case 61:return ae=PM("indices",t,n,r),ie=PM("tensor",t,n,r),oe=PM("elementShape",t,n,r),se=PM("numElements",t,n,r),ue=KR(ie,ae,oe,se),e.abrupt("return",(r.addTensorList(ue),[ue.idTensor]));case 63:return le=PM("elementShape",t,n,r),ce=PM("elementDType",t,n,r),de="TensorListReserve"===t.op?"numElements":"maxNumElements",he=PM(de,t,n,r),pe=YR(le,ce,he),e.abrupt("return",(r.addTensorList(pe),[pe.idTensor]));case 67:return fe=PM("tensorListId",t,n,r),me=PM("indices",t,n,r),ge=PM("elementShape",t,n,r),ve=PM("elementDType",t,n,r),e.abrupt("return",[r.getTensorList(fe.id).gather(me,ve,ge)]);case 69:return ye=PM("tensorListId",t,n,r),be=PM("elementShape",t,n,r),xe=PM("elementDType",t,n,r),Ae=PM("numElements",t,n,r),e.abrupt("return",[r.getTensorList(ye.id).stack(be,xe,Ae)]);case 71:return we=PM("tensor",t,n,r),ke=PM("elementShape",t,n,r),Se=PM("elementDType",t,n,r),Ce=qR(we,ke,Se),e.abrupt("return",(r.addTensorList(Ce),[Ce.idTensor]));case 73:return Ie=PM("tensorListId",t,n,r),Ee=r.getTensorList(Ie.id),Te=PM("dtype",t,n,r),Ne=PM("elementShape",t,n,r),e.abrupt("return",[Ee.concat(Te,Ne)]);case 75:return _e=PM("tensorListId",t,n,r),Me=PM("tensor",t,n,r),Re=r.getTensorList(_e.id),e.abrupt("return",(Re.pushBack(Me),[Re.idTensor]));case 77:return Oe=PM("tensorListId",t,n,r),Pe=PM("elementShape",t,n,r),Fe=PM("elementDType",t,n,r),e.abrupt("return",[r.getTensorList(Oe.id).popBack(Pe,Fe)]);case 79:return De=PM("tensor",t,n,r),Le=PM("elementShape",t,n,r),ze=PM("lengths",t,n,r),Be=ZR(De,ze,Le),e.abrupt("return",(r.addTensorList(Be),[Be.idTensor]));case 81:return We=PM("tensorListId",t,n,r),je=r.getTensorList(We.id),e.abrupt("return",[Hm(je.size(),"int32")]);case 83:return Ve=PM("tensorListId",t,n,r),He=PM("size",t,n,r),Ue=r.getTensorList(Ve.id).resize(He),e.abrupt("return",(r.addTensorList(Ue),[Ue.idTensor]));case 85:throw TypeError("Node type ".concat(t.op," is not implemented"));case 86:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function QR(e,t,n){var r=u(PM("fusedOps",e,t,n),2),a=r[0],i=r[1],o="biasadd"===a,s=!o,l="prelu"===i,c="fusedbatchnorm"===a,d=PM("numArgs",e,t,n);if(o){if(l&&2!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!l&&o&&1!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var h=PM("strides",e,t,n),p=BM(e,t,n),f=PM("dataFormat",e,t,n).toUpperCase(),m=PM("dilations",e,t,n),g=u(PM("args",e,t,n),2),v=g[0],y=g[1];return s&&(y=v,v=void 0),{stride:h,pad:p,dataFormat:f,dilations:m,biasArg:v,preluArg:y,activationFunc:i,leakyreluAlpha:PM("leakyreluAlpha",e,t,n)}}function $R(e,t,n){return{boxes:PM("boxes",e,t,n),scores:PM("scores",e,t,n),maxOutputSize:PM("maxOutputSize",e,t,n),iouThreshold:PM("iouThreshold",e,t,n),scoreThreshold:PM("scoreThreshold",e,t,n),softNmsSigma:PM("softNmsSigma",e,t,n)}}var eO=function(){var e=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h,p,f,m,g,v,y,b,x,A,w,k,S,C,I,E;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?3:"NonMaxSuppressionV4"===e.t0?14:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?25:"Where"===e.t0?30:"ListDiff"===e.t0?36:37;break;case 3:return a=$R(t,n,r),i=a.boxes,o=a.scores,s=a.maxOutputSize,u=a.iouThreshold,l=a.scoreThreshold,c=a.softNmsSigma,e.next=12,Db.nonMaxSuppressionWithScoreAsync(i,o,s,u,l,c);case 12:return d=e.sent,e.abrupt("return",[d.selectedIndices,d.selectedScores]);case 14:return h=$R(t,n,r),p=h.boxes,f=h.scores,m=h.maxOutputSize,g=h.iouThreshold,v=h.scoreThreshold,y=PM("padToMaxOutputSize",t,n,r),e.next=23,Db.nonMaxSuppressionPaddedAsync(p,f,m,g,v,y);case 23:return b=e.sent,e.abrupt("return",[b.selectedIndices,b.validOutputs]);case 25:return x=$R(t,n,r),A=x.boxes,w=x.scores,k=x.maxOutputSize,S=x.iouThreshold,C=x.scoreThreshold,e.next=28,Db.nonMaxSuppressionAsync(A,w,k,S,C);case 28:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 30:return I=th(PM("condition",t,n,r),"bool"),e.next=33,ly(I);case 33:return e.t2=e.sent,E=[e.t2],e.abrupt("return",(I.dispose(),E));case 36:return e.abrupt("return",Nv(PM("x",t,n,r),PM("y",t,n,r)));case 37:throw TypeError("Node type ".concat(t.op," is not implemented"));case 38:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),tO=function(){function e(t,n){Jr(this,e),this.keyDType=t,this.valueDType=n,this.handle=Hm(0),this.tensorMap=new Map,Vh(this.handle)}return $r(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return Hm(this.size(),"int32")}},{key:"import",value:function(){var e=Mr(Nr().mark((function e(t,n){var r,a=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",(this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),Wh((function(){var e=ay(n),t=r.length,i=e.length;Cl.assert(t===i,(function(){return"The number of elements doesn't match, keys has ".concat(t," elements, the values has ").concat(i," elements.")}));for(var o=0;o<t;o++){var s=r[o],u=e[o];Vh(u),a.tensorMap.set(s,u)}return a.handle}))));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=Mr(Nr().mark((function e(t,n){var r,a=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",Wh((function(){for(var e=[],t=0;t<r.length;t++){var i=r[t],o=a.findWithDefault(i,n);e.push(o)}return Gv(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ").concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ").concat(t.dtype))}}]),e}(),nO=function(){var e=Mr(Nr().mark((function e(t,n,r,a){var i,o,s,u,l,c,d,h,p,f;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?5:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?10:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?15:17;break;case 3:return i=PM("keyDType",t,n,r),o=PM("valueDType",t,n,r),s=new tO(i,o),e.abrupt("return",(a.addHashTable(t.name,s),[s.handle]));case 5:return u=PM("tableHandle",t,n,r,a),l=PM("keys",t,n,r),c=PM("values",t,n,r),e.next=8,a.getHashTableById(u.id).import(l,c);case 8:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 10:return d=PM("tableHandle",t,n,r,a),h=PM("keys",t,n,r),p=PM("defaultValue",t,n,r),e.next=13,a.getHashTableById(d.id).find(h,p);case 13:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 15:return f=PM("tableHandle",t,n,r,a),e.abrupt("return",[a.getHashTableById(f.id).tensorSize()]);case 17:throw TypeError("Node type ".concat(t.op," is not implemented"));case 18:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}();function rO(e,t,n,r){var a=function(e,t,n){switch(e.category){case"arithmetic":return Wh((function(){return function(e,t,n){switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[of(PM("a",e,t,n),PM("b",e,t,n))];case"AddN":return[pf(PM("tensors",e,t,n))];case"FloorMod":case"Mod":return[Gg(PM("a",e,t,n),PM("b",e,t,n))];case"Mul":return[lf(PM("a",e,t,n),PM("b",e,t,n))];case"RealDiv":case"Div":return[uf(PM("a",e,t,n),PM("b",e,t,n))];case"DivNoNan":return[Em(PM("a",e,t,n),PM("b",e,t,n))];case"FloorDiv":return[sf(PM("a",e,t,n),PM("b",e,t,n))];case"Sub":return[Cg(PM("a",e,t,n),PM("b",e,t,n))];case"Minimum":return[Hg(PM("a",e,t,n),PM("b",e,t,n))];case"Maximum":return[zg(PM("a",e,t,n),PM("b",e,t,n))];case"Pow":return[Vm(PM("a",e,t,n),PM("b",e,t,n))];case"SquaredDifference":return[Hv(PM("a",e,t,n),PM("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"basic_math":return Wh((function(){return function(e,t,n){switch(e.op){case"Abs":case"ComplexAbs":return[cf(PM("x",e,t,n))];case"Acos":return[df(PM("x",e,t,n))];case"Acosh":return[hf(PM("x",e,t,n))];case"Asin":return[yf(PM("x",e,t,n))];case"Asinh":return[bf(PM("x",e,t,n))];case"Atan":return[xf(PM("x",e,t,n))];case"Atan2":return[Af(PM("x",e,t,n),PM("y",e,t,n))];case"Atanh":return[wf(PM("x",e,t,n))];case"Ceil":return[nm(PM("x",e,t,n))];case"Complex":return[Uc(PM("real",e,t,n),PM("imag",e,t,n))];case"Cos":return[mm(PM("x",e,t,n))];case"Cosh":return[gm(PM("x",e,t,n))];case"Elu":return[_m(PM("x",e,t,n))];case"Erf":return[Mm(PM("x",e,t,n))];case"Exp":return[Zm(PM("x",e,t,n))];case"Expm1":return[Qm(PM("x",e,t,n))];case"Floor":return[ng(PM("x",e,t,n))];case"Log":return[fg(PM("x",e,t,n))];case"Log1p":return[mg(PM("x",e,t,n))];case"Imag":return[$h(PM("x",e,t,n))];case"Neg":return[ep(PM("x",e,t,n))];case"Reciprocal":return[gv(PM("x",e,t,n))];case"Real":return[tp(PM("x",e,t,n))];case"Relu":return[vv(PM("x",e,t,n))];case"Round":return[Sv(PM("x",e,t,n))];case"Selu":return[Iv(PM("x",e,t,n))];case"Sigmoid":return[Hf(PM("x",e,t,n))];case"Sin":return[Mv(PM("x",e,t,n))];case"Sign":return[_v(PM("x",e,t,n))];case"Sinh":return[Rv(PM("x",e,t,n))];case"Softplus":return[kg(PM("x",e,t,n))];case"Sqrt":return[Um(PM("x",e,t,n))];case"Square":return[Gm(PM("x",e,t,n))];case"Tanh":return[Gf(PM("x",e,t,n))];case"Tan":return[Yv(PM("x",e,t,n))];case"ClipByValue":return[rm(PM("x",e,t,n),PM("clipValueMin",e,t,n),PM("clipValueMax",e,t,n))];case"Relu6":return[yv(PM("x",e,t,n))];case"Rsqrt":return[Cv(FM(e.inputNames[0],t,n))];case"Prod":return[ov(PM("x",e,t,n),PM("axes",e,t,n))];case"LeakyRelu":return[lg(PM("x",e,t,n),PM("alpha",e,t,n))];case"Prelu":return[iv(PM("x",e,t,n),PM("alpha",e,t,n))];case"IsNan":return[ug(FM(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"control":return JR(e,t,n);case"convolution":return Wh((function(){return function(e,t,n){switch(e.op){case"Conv1D":var r=PM("stride",e,t,n),a=PM("pad",e,t,n),i=PM("dataFormat",e,t,n).toUpperCase(),o=PM("dilation",e,t,n);return[lm(PM("x",e,t,n),PM("filter",e,t,n),r,a,i,o)];case"Conv2D":var s=PM("strides",e,t,n),u=BM(e,t,n),l=PM("dataFormat",e,t,n).toUpperCase(),c=PM("dilations",e,t,n);return[um(PM("x",e,t,n),PM("filter",e,t,n),[s[1],s[2]],u,l,[c[1],c[2]])];case"_FusedConv2D":var d=QR(e,t,n),h=d.stride,p=d.pad,f=d.dataFormat,m=d.dilations,g=d.biasArg,v=d.preluArg,y=d.activationFunc,b=d.leakyreluAlpha;return[wy.conv2d({x:PM("x",e,t,n),filter:PM("filter",e,t,n),strides:[h[1],h[2]],pad:p,dataFormat:f,dilations:[m[1],m[2]],bias:g,activation:y,preluActivationWeights:v,leakyreluAlpha:b})];case"FusedDepthwiseConv2dNative":var x=QR(e,t,n),A=x.stride,w=x.pad,k=x.dataFormat,S=x.dilations,C=x.biasArg,I=x.preluArg,E=x.activationFunc,T=x.leakyreluAlpha;return[wy.depthwiseConv2d({x:PM("x",e,t,n),filter:PM("filter",e,t,n),strides:[A[1],A[2]],pad:w,dataFormat:k,dilations:[S[1],S[2]],bias:C,activation:E,preluActivationWeights:I,leakyreluAlpha:T})];case"Conv2DBackpropInput":case"Conv2dTranspose":var N=PM("outputShape",e,t,n),_=PM("strides",e,t,n),M=BM(e,t,n);return[dm(PM("x",e,t,n),PM("filter",e,t,n),N,[_[1],_[2]],M)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var R=PM("strides",e,t,n),O=BM(e,t,n),P=PM("dilations",e,t,n),F=PM("dataFormat",e,t,n).toUpperCase();return[Am(PM("input",e,t,n),PM("filter",e,t,n),[R[1],R[2]],O,F,[P[1],P[2]])];case"Conv3D":var D=PM("strides",e,t,n),L=PM("pad",e,t,n),z=PM("dataFormat",e,t,n).toUpperCase(),B=PM("dilations",e,t,n);return[hm(PM("x",e,t,n),PM("filter",e,t,n),[D[1],D[2],D[3]],L,z,[B[1],B[2],B[3]])];case"AvgPool":var W=PM("strides",e,t,n),j=PM("pad",e,t,n),V=PM("kernelSize",e,t,n);return[Wf(PM("x",e,t,n),[V[1],V[2]],[W[1],W[2]],j)];case"MaxPool":var H=PM("strides",e,t,n),U=PM("pad",e,t,n),G=PM("kernelSize",e,t,n);return[Fg(PM("x",e,t,n),[G[1],G[2]],[H[1],H[2]],U)];case"MaxPoolWithArgmax":var X=PM("strides",e,t,n),q=PM("pad",e,t,n),Y=PM("kernelSize",e,t,n),K=PM("includeBatchInIndex",e,t,n),Z=Lg(PM("x",e,t,n),[Y[1],Y[2]],[X[1],X[2]],q,K);return[Z.result,Z.indexes];case"AvgPool3D":var J=PM("strides",e,t,n),Q=PM("pad",e,t,n),$=PM("kernelSize",e,t,n);return[jf(PM("x",e,t,n),[$[1],$[2],$[3]],[J[1],J[2],J[3]],Q)];case"MaxPool3D":var ee=PM("strides",e,t,n),te=PM("pad",e,t,n),ne=PM("kernelSize",e,t,n);return[Dg(PM("x",e,t,n),[ne[1],ne[2],ne[3]],[ee[1],ee[2],ee[3]],te)];case"Dilation2D":var re=PM("strides",e,t,n),ae=PM("pad",e,t,n),ie=PM("dilations",e,t,n),oe=re[1],se=re[2],ue=ie[1],le=ie[2];return[km(PM("x",e,t,n),PM("filter",e,t,n),[oe,se],ae,[ue,le],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"creation":return Wh((function(){return function(e,t,n){switch(e.op){case"Fill":var r=PM("shape",e,t,n),a=PM("dtype",e,t,n);return[tg(r,PM("value",e,t,n),a)];case"LinSpace":return[hg(PM("start",e,t,n),PM("stop",e,t,n),PM("num",e,t,n))];case"Multinomial":var i=PM("logits",e,t,n),o=PM("numSamples",e,t,n),s=PM("seed",e,t,n);return[Yg(i,o,s)];case"OneHot":var u=PM("indices",e,t,n),l=PM("depth",e,t,n),c=PM("onValue",e,t,n),d=PM("offValue",e,t,n);return[Mh(u,l,c,d)];case"Ones":return[jg(PM("shape",e,t,n),PM("dtype",e,t,n))];case"OnesLike":return[Zg(PM("x",e,t,n))];case"RandomUniform":return[fv(PM("shape",e,t,n),PM("minval",e,t,n),PM("maxval",e,t,n),PM("dtype",e,t,n))];case"Range":return[mv(PM("start",e,t,n),PM("stop",e,t,n),PM("step",e,t,n),PM("dtype",e,t,n))];case"TruncatedNormal":var h=PM("shape",e,t,n),p=PM("mean",e,t,n),f=PM("stdDev",e,t,n),m=PM("seed",e,t,n);return[ty(h,p,f,PM("dtype",e,t,n),m)];case"Zeros":return[Wg(PM("shape",e,t,n),PM("dtype",e,t,n))];case"ZerosLike":return[Im(PM("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"dynamic":return eO(e,t,n);case"evaluation":return Wh((function(){return function(e,t,n){switch(e.op){case"LowerBound":return[Pg(PM("sortedSequence",e,t,n),PM("values",e,t,n))];case"TopKV2":var r=PM("x",e,t,n),a=PM("k",e,t,n),i=PM("sorted",e,t,n),o=ey(r,a,i);return[o.values,o.indices];case"UpperBound":return[iy(PM("sortedSequence",e,t,n),PM("values",e,t,n))];case"Unique":var s=PM("x",e,t,n),u=ny(s);return[u.values,u.indices];case"UniqueV2":var l=PM("x",e,t,n),c=PM("axis",e,t,n),d=ny(l,c);return[d.values,d.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"image":return Wh((function(){return function(e,t,n){switch(e.op){case"ResizeBilinear":var r=PM("images",e,t,n),a=PM("size",e,t,n),i=PM("alignCorners",e,t,n),o=PM("halfPixelCenters",e,t,n);return[Db.resizeBilinear(r,[a[0],a[1]],i,o)];case"ResizeNearestNeighbor":var s=PM("images",e,t,n),u=PM("size",e,t,n),l=PM("alignCorners",e,t,n),c=PM("halfPixelCenters",e,t,n);return[Db.resizeNearestNeighbor(s,[u[0],u[1]],l,c)];case"CropAndResize":var d=PM("image",e,t,n),h=PM("boxes",e,t,n),p=PM("boxInd",e,t,n),f=PM("cropSize",e,t,n),m=PM("method",e,t,n),g=PM("extrapolationValue",e,t,n);return[Db.cropAndResize(d,h,p,f,m,g)];case"ImageProjectiveTransformV3":var v=PM("images",e,t,n),y=PM("transforms",e,t,n),b=PM("outputShape",e,t,n),x=PM("fillValue",e,t,n),A=PM("interpolation",e,t,n),w=PM("fillMode",e,t,n);return[Db.transform(v,y,A.toLowerCase(),w.toLowerCase(),x,b)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"graph":return Wh((function(){return function(e,t,n){switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var r=PM("default",e,t,n);return[FM(e.name,t,n)||r];case"Placeholder":return[FM(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[WM(PM("x",e,t,n))];case"IdentityN":return PM("x",e,t,n).map((function(e){return WM(e)}));case"Shape":return[Kv(PM("x",e,t,n).shape,"int32")];case"ShapeN":return PM("x",e,t,n).map((function(e){return Kv(e.shape)}));case"Size":return[Hm(PM("x",e,t,n).size,"int32")];case"Rank":return[Hm(PM("x",e,t,n).rank,"int32")];case"NoOp":return[Hm(1)];case"Print":var a=PM("x",e,t,n),i=PM("data",e,t,n),o=PM("message",e,t,n),s=PM("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(var u=0;u<i.length;u++)console.log(Array.prototype.slice.call(i[u].dataSync()).slice(0,s));return[a];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"logical":return Wh((function(){return function(e,t,n){switch(e.op){case"Equal":return[Sm(PM("a",e,t,n),PM("b",e,t,n))];case"NotEqual":return[Kg(PM("a",e,t,n),PM("b",e,t,n))];case"Greater":return[ag(PM("a",e,t,n),PM("b",e,t,n))];case"GreaterEqual":return[ig(PM("a",e,t,n),PM("b",e,t,n))];case"Less":return[cg(PM("a",e,t,n),PM("b",e,t,n))];case"LessEqual":return[dg(PM("a",e,t,n),PM("b",e,t,n))];case"LogicalAnd":return[Tg(PM("a",e,t,n),PM("b",e,t,n))];case"LogicalNot":return[Ng(PM("a",e,t,n))];case"LogicalOr":return[_g(PM("a",e,t,n),PM("b",e,t,n))];case"Select":case"SelectV2":return[Cm(PM("condition",e,t,n),PM("a",e,t,n),PM("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"matrices":return Wh((function(){return function(e,t,n){switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[_h(PM("a",e,t,n),PM("b",e,t,n),PM("transposeA",e,t,n),PM("transposeB",e,t,n))];case"Einsum":return[Nm.apply(void 0,[PM("equation",e,t,n)].concat(ta(PM("tensors",e,t,n))))];case"Transpose":return[np(PM("x",e,t,n),PM("perm",e,t,n))];case"_FusedMatMul":var r=u(PM("fusedOps",e,t,n),2),a=r[0],i=r[1],o="biasadd"===a,s="prelu"===i,l=PM("numArgs",e,t,n),c=PM("leakyreluAlpha",e,t,n);if(o){if(s&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var d=u(PM("args",e,t,n),2),h=d[0],p=d[1];return[wy.matMul({a:PM("a",e,t,n),b:PM("b",e,t,n),transposeA:PM("transposeA",e,t,n),transposeB:PM("transposeB",e,t,n),bias:h,activation:i,preluActivationWeights:p,leakyreluAlpha:c})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"normalization":return Wh((function(){return function(e,t,n){switch(e.op){case"EuclideanNorm":return[Km(PM("x",e,t,n),PM("axis",e,t,n),PM("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[Kf(PM("x",e,t,n),PM("mean",e,t,n),PM("variance",e,t,n),PM("offset",e,t,n),PM("scale",e,t,n),PM("epsilon",e,t,n))];case"LRN":return[pg(PM("x",e,t,n),PM("radius",e,t,n),PM("bias",e,t,n),PM("alpha",e,t,n),PM("beta",e,t,n))];case"Softmax":return[Lv(PM("x",e,t,n))];case"LogSoftmax":return[Ig(PM("x",e,t,n))];case"SparseToDense":return[my(PM("sparseIndices",e,t,n),PM("outputShape",e,t,n),PM("sparseValues",e,t,n),PM("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"reduction":return Wh((function(){return function(e,t,n){switch(e.op){case"Max":var r=PM("axis",e,t,n),a=PM("keepDims",e,t,n);return[Wm(PM("x",e,t,n),r,a)];case"Mean":var i=PM("axis",e,t,n),o=PM("keepDims",e,t,n);return[Bg(PM("x",e,t,n),i,o)];case"Min":var s=PM("axis",e,t,n),u=PM("keepDims",e,t,n);return[jm(PM("x",e,t,n),s,u)];case"Sum":var l=PM("axis",e,t,n),c=PM("keepDims",e,t,n);return[Xm(PM("x",e,t,n),l,c)];case"All":var d=PM("axis",e,t,n),h=PM("keepDims",e,t,n);return[ff(PM("x",e,t,n),d,h)];case"Any":var p=PM("axis",e,t,n),f=PM("keepDims",e,t,n);return[mf(PM("x",e,t,n),p,f)];case"ArgMax":var m=PM("axis",e,t,n);return[gf(PM("x",e,t,n),m)];case"ArgMin":var g=PM("axis",e,t,n);return[vf(PM("x",e,t,n),g)];case"Prod":var v=PM("axis",e,t,n),y=PM("keepDims",e,t,n);return[ov(PM("x",e,t,n),v,y)];case"Cumprod":var b=PM("axis",e,t,n),x=PM("exclusive",e,t,n),A=PM("reverse",e,t,n);return[vm(PM("x",e,t,n),b,x,A)];case"Cumsum":var w=PM("axis",e,t,n),k=PM("exclusive",e,t,n),S=PM("reverse",e,t,n);return[ym(PM("x",e,t,n),w,k,S)];case"Bincount":var C=PM("x",e,t,n),I=PM("weights",e,t,n),E=PM("size",e,t,n);return[$f(C,I,E)];case"DenseBincount":var T=PM("x",e,t,n),N=PM("weights",e,t,n),_=PM("size",e,t,n),M=PM("binaryOutput",e,t,n);return[bm(T,N,_,M)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"slice_join":return Wh((function(){return function(e,t,n){switch(e.op){case"ConcatV2":case"Concat":var r=PM("n",e,t,n),a=PM("axis",e,t,n),i=PM("tensors",e,t,n);return i=i.slice(0,r),[Vf(i,a)];case"Gather":var o=PM("x",e,t,n),s=PM("indices",e,t,n);return[rg(o,th(s,"int32"),0)];case"GatherV2":var u=PM("axis",e,t,n),l=PM("batchDims",e,t,n),c=PM("x",e,t,n),d=PM("indices",e,t,n);return[rg(c,th(d,"int32"),u,l)];case"Reverse":for(var h=PM("dims",e,t,n),p=[],f=0;f<h.length;f++)h[f]&&p.push(f);var m=PM("x",e,t,n);return[bv(m,p)];case"ReverseV2":var g=PM("axis",e,t,n),v=PM("x",e,t,n);return[bv(v,g)];case"Slice":var y=PM("begin",e,t,n),b=PM("size",e,t,n);return[Uf(PM("x",e,t,n),y,b)];case"StridedSlice":var x=PM("begin",e,t,n),A=PM("end",e,t,n),w=PM("strides",e,t,n),k=PM("beginMask",e,t,n),S=PM("endMask",e,t,n),C=PM("ellipsisMask",e,t,n),I=PM("newAxisMask",e,t,n),E=PM("shrinkAxisMask",e,t,n),T=PM("x",e,t,n);return[qv(T,x,A,w,k,S,C,I,E)];case"Pack":return Wh((function(){var r=PM("axis",e,t,n),a=PM("tensors",e,t,n),i=a[0].shape,o=Uv(a[0]).shape,s=a.map((function(e){var t=Cl.arraysEqual(e.shape,i);if(!t&&!Cl.arraysEqual(Uv(e).shape,o))throw new Error("the input tensors shape does not match");return t?e:Bf(e,i)}));return[Gv(s,r)]}));case"Unpack":var N=PM("axis",e,t,n),_=PM("tensor",e,t,n);return ay(_,N);case"Tile":var M=PM("reps",e,t,n);return[$m(PM("x",e,t,n),M)];case"Split":case"SplitV":var R=PM("axis",e,t,n),O=PM("numOrSizeSplits",e,t,n),P=PM("x",e,t,n);return jv(P,O,R);case"ScatterNd":var F=PM("indices",e,t,n),D=PM("values",e,t,n),L=PM("shape",e,t,n);return[py(F,D,L)];case"GatherNd":var z=PM("x",e,t,n),B=PM("indices",e,t,n);return[gy(z,B)];case"SparseToDense":var W=PM("sparseIndices",e,t,n),j=PM("outputShape",e,t,n),V=PM("sparseValues",e,t,n),H=PM("defaultValue",e,t,n);return[my(W,V,j,V.dtype===H.dtype?H:th(H,V.dtype))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"sparse":return Wh((function(){return function(e,t,n){switch(e.op){case"SparseFillEmptyRows":var r=Bb.sparseFillEmptyRows(PM("indices",e,t,n),PM("values",e,t,n),PM("denseShape",e,t,n),PM("defaultValue",e,t,n));return[r.outputIndices,r.outputValues,r.emptyRowIndicator,r.reverseIndexMap];case"SparseReshape":var a=Bb.sparseReshape(PM("inputIndices",e,t,n),PM("inputShape",e,t,n),PM("newShape",e,t,n));return[a.outputIndices,a.outputShape];case"SparseSegmentMean":return[Bb.sparseSegmentMean(PM("data",e,t,n),PM("indices",e,t,n),PM("segmentIds",e,t,n))];case"SparseSegmentSum":return[Bb.sparseSegmentSum(PM("data",e,t,n),PM("indices",e,t,n),PM("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"spectral":return Wh((function(){return function(e,t,n){switch(e.op){case"FFT":return[zv(PM("x",e,t,n))];case"IFFT":return[Bv(PM("x",e,t,n))];case"RFFT":return[Vv(PM("x",e,t,n))];case"IRFFT":return[Wv(PM("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"string":return Wh((function(){return function(e,t,n){switch(e.op){case"StringNGrams":var r=Wb.stringNGrams(PM("data",e,t,n),PM("dataSplits",e,t,n),PM("separator",e,t,n),PM("nGramWidths",e,t,n),PM("leftPad",e,t,n),PM("rightPad",e,t,n),PM("padWidth",e,t,n),PM("preserveShortSequences",e,t,n));return[r.nGrams,r.nGramsSplits];case"StringSplit":var a=Wb.stringSplit(PM("input",e,t,n),PM("delimiter",e,t,n),PM("skipEmpty",e,t,n));return[a.indices,a.values,a.shape];case"StringToHashBucketFast":return[Wb.stringToHashBucketFast(PM("input",e,t,n),PM("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"transformation":return Wh((function(){return function(e,t,n){switch(e.op){case"Cast":return[th(PM("x",e,t,n),PM("dtype",e,t,n))];case"ExpandDims":var r=PM("axis",e,t,n);return[Jm(PM("x",e,t,n),r)];case"Squeeze":var a=PM("axis",e,t,n);return[Uv(PM("x",e,t,n),a)];case"Reshape":return[Bf(PM("x",e,t,n),PM("shape",e,t,n))];case"MirrorPad":return[Ug(PM("x",e,t,n),PM("padding",e,t,n),PM("mode",e,t,n))];case"PadV2":case"Pad":return[Qg(PM("x",e,t,n),PM("padding",e,t,n),PM("constantValue",e,t,n))];case"SpaceToBatchND":var i=PM("blockShape",e,t,n),o=PM("paddings",e,t,n);return[rv(PM("x",e,t,n),i,o)];case"BatchToSpaceND":var s=PM("blockShape",e,t,n),u=PM("crops",e,t,n);return[qf(PM("x",e,t,n),s,u)];case"DepthToSpace":var l=PM("blockSize",e,t,n),c=PM("dataFormat",e,t,n).toUpperCase();return[xm(PM("x",e,t,n),l,c)];case"BroadcastTo":return[tm(PM("x",e,t,n),PM("shape",e,t,n))];case"BroadcastArgs":return[em(PM("s0",e,t,n),PM("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"hash_table":return nO(e,t,n,r);case"custom":var a=RM(e.op);if(a&&a.customExecutor)return a.customExecutor(new WR(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()"))}}(e,t,n);return Cl.isPromise(a)?a.then((function(e){return[].concat(e)})):[].concat(a)}var aO=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Jr(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return $r(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function iO(e,t,n,r){var a=new Set,i=[],o=null,s=null,u=new Set,l=Object.keys(e).map((function(e){return zM(e)[0]})),c=[];null!=r&&(c=r.map((function(e){return zM(e.name)[0]})));for(var d=ta(t);d.length>0;){var h=d.pop();if((lO(h)||cO(h)||dO(h))&&null==o&&(s=(o=h).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(h.name),null==n[h.name]&&-1===l.indexOf(h.name)&&-1===c.indexOf(h.name)){if(0===h.inputs.length){i.push(h.name);continue}h.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),d.push(e))}))}}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}var oO=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],sO=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],uO=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function lO(e){return oO.indexOf(e.op)>=0}function cO(e){return sO.indexOf(e.op)>=0}function dO(e){return uO.indexOf(e.op)>=0}var hO=function(){function e(t,n){var r=this;Jr(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}return $r(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,ta(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(e,t){var n=iO(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,i=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has the dynamic op '").concat(a.op,"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [").concat(i,"]"));if(r.length>0){var o=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(o,"] from the provided inputs [").concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(e,t,n){var r=n.usedNodes,a=n.inputs,i=[],o=Object.keys(a).map((function(e){return zM(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;o.forEach((function(e){r.has(e.name)&&i.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&i.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&i.push(e)}));for(var u=new Set,l=[];i.length>0;){var c=i.pop();u.add(c.name),t[c.name]||l.push(c),c.children.forEach((function(e){!u.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return u.has(e.name)}))&&i.push(e)}))}return l}(this.graph,this.weightMap,n)}},{key:"execute",value:function(e,t){var n=this;e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[zM(e)[0]]})),i=t.map((function(e){return zM(e)[0]})),o=i.map((function(e){return n.graph.nodes[e]}));this.resetIntermediateTensors(),0===o.length&&(o=this._outputs);var s=this.getCompilationKey(a,o),l=this.compiledMap.get(s);null==l&&(l=this.compile(e,o),this.compiledMap.set(s,l));var c={},d={};return Wh((function(){var r=new aO(n.weightMap,c,d,n.functionExecutorMap),a=Wr({},n.weightMap);Object.keys(e).forEach((function(t){var n=u(zM(t),2),r=n[0],i=[];i[n[1]]=e[t],a[r]=i}));for(var o=n.getFrozenTensorIds(a),s={},h=0;h<l.length;h++){var p=l[h];if(!a[p.name]){var f=rO(p,a,r,n._resourceManager);if(Cl.isPromise(f))throw new Error("The execution of the op '".concat(p.op,"' returned a promise. Please use model.executeAsync() instead."));a[p.name]=f,n.checkTensorForDisposal(p.name,p,a,r,o,i,s)}}return null==n.parent&&r.dispose(o),t.map((function(e){return FM(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,i,o){var s=this;"control"===t.category||-1!==i.indexOf(e)||(n[e].forEach((function(e){null!=e&&(o[e.id]=(o[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var i=function(e,t,n){return t[LM(e,n.currentContextId)]}(e.name,n,r);null!=i&&i.forEach((function(e){if(e&&!e.kept&&!a.has(e.id)){var n=o[e.id];if(1===n){if(s.keepTensorForDebug){var i=u(DM(t.name,r),2),l=i[0],c=i[1];s.intermediateTensors[l]||(s.intermediateTensors[l]=[]),s.intermediateTensors[l][c]=e}else e.dispose();delete o[e.id]}else null!=n&&o[e.id]--}}))}})))}},{key:"executeAsync",value:function(){var e=Mr(Nr().mark((function e(t,n){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"disposeIntermediateTensors",value:function(){var e=this;!this.intermediateTensors||(Object.keys(this.intermediateTensors).forEach((function(t){return e.intermediateTensors[t].forEach((function(e){return e.dispose()}))})),this.disposeTensorsMap())}},{key:"disposeTensorsMap",value:function(){var e=this;!this.tensorsMap||Object.keys(this.tensorsMap).forEach((function(t){e.tensorsMap[t].forEach((function(t){t&&!t.kept&&!t.isDisposed&&!e.keepIds.has(t.id)&&t.dispose()}))}))}},{key:"getIntermediateTensors",value:function(){return this.tensorsMap}},{key:"resetIntermediateTensors",value:function(){for(var e in this.intermediateTensors)this.intermediateTensors[e].forEach((function(e){return e.dispose()})),delete this.intermediateTensors[e]}},{key:"_executeAsync",value:function(){var e=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,u,l,c=this,d=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=d.length>2&&void 0!==d[2]&&d[2],a=d.length>3&&void 0!==d[3]?d[3]:{},i=d.length>4&&void 0!==d[4]?d[4]:{},r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=Zi().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(rt){console.warn(rt.message)}return this.resetIntermediateTensors(),o=new aO(this.weightMap,a,i,this.functionExecutorMap),e.next=9,this.executeWithControlFlow(t,o,n,r);case 9:return this.tensorsMap=e.sent,s=n.map((function(e){return FM(e,c.tensorsMap,o)})),u=s.map((function(e){return e.id})),l=Object.keys(t).map((function(e){return t[e].id})),e.abrupt("return",(this.keepIds=new Set([].concat(ta(u),ta(l),ta(this.weightIds))),this.keepTensorForDebug||this.disposeTensorsMap(),null==this.parent&&o.dispose(this.keepIds),s));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var e=Mr(Nr().mark((function e(t,n,r){var a,i=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[i.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var e=Mr(Nr().mark((function e(t,n,r,a){var i,o,s,l,c,d,h,p,f,m,g,v,y,b,x,A,w,k=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object.keys(t),o=i.map((function(e){return k.graph.nodes[zM(e)[0]]})),s=r.map((function(e){return zM(e)[0]})),l=s.map((function(e){return k.graph.nodes[e]})),0===l.length&&(l=this._outputs),c=iO(t,l,this.weightMap,this._initNodes),d=c.usedNodes,h=c.missingInputs,p=c.dynamicNode,f=c.syncInputs,m=[].concat(ta(o),ta(this.graph.weights),ta(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),g=Wr({},this.weightMap),Object.keys(t).forEach((function(e){var n=u(zM(e),2),r=n[0],a=[];a[n[1]]=t[e],g[r]=a})),v={},y=this.getFrozenTensorIds(g),b={};case 5:if(!(m.length>0)){e.next=11;break}return x=this.processStack(o,m,n,g,b,y,s,v,d),e.next=9,Promise.all(x);case 9:e.next=5;break;case 11:if(null==p&&!a&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),A=l.filter((function(e){return!lO(e)&&!FM(e.name,g,n)})).map((function(e){return e.name})),!(A.length>0)){e.next=16;break}throw w="",null!=p&&(w="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [".concat(f,"]")),new Error("Cannot compute the outputs [".concat(A,"] from the provided inputs [").concat(i,"]. Consider providing the following inputs: [").concat(h,"]. ").concat(w));case 16:return e.abrupt("return",g);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"processStack",value:function(e,t,n,r,a,i,o,s,l){for(var c=this,d=[],h=function(){var e,h=t.pop();n.currentContext=h.contexts;var p="";if("Enter"===h.node.op&&PM("isConstant",h.node,r,n)&&(e=u(DM(h.node.name,n),1),p=e[0]),null==r[h.node.name]){var f,m=rO(h.node,r,n,c._resourceManager);p||(f=u(DM(h.node.name,n),1),p=f[0]);var g=n.currentContext;Cl.isPromise(m)?d.push(m.then((function(e){return r[p]=e,n.currentContext=g,c.checkTensorForDisposal(p,h.node,r,n,i,o,s),c.processChildNodes(h.node,t,n,r,a,l),e}))):(r[p]=m,c.checkTensorForDisposal(p,h.node,r,n,i,o,s),c.processChildNodes(h.node,t,n,r,a,l))}else c.processChildNodes(h.node,t,n,r,a,l)};t.length>0;)h();return d}},{key:"processChildNodes",value:function(e,t,n,r,a,i){e.children.forEach((function(e){var o=u(DM(e.name,n),1)[0];a[o]||!i.has(e.name)||("Merge"===e.op?e.inputNames.some((function(e){return!!FM(e,r,n)}))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!FM(e,r,n)}))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=u(zM(n),1)[0],i=t.graph.nodes[a];if(i.attrParams.shape&&i.attrParams.shape.value){var o=i.attrParams.shape.value,s=o.length===r.shape.length&&r.shape.every((function(e,t){return-1===o[t]||o[t]===e}));Cl.assert(s,(function(){return"The shape of dict['".concat(i.name,"'] provided in model.execute(dict) must be [").concat(o,"], but was [").concat(r.shape,"]")}))}i.attrParams.dtype&&i.attrParams.dtype.value&&Cl.assert(r.dtype===i.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(i.name,"'] provided in model.execute(dict) must be ").concat(i.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t={};for(var n in e){if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n])t[this._signature.inputs[n].name]=e[n];else t[n]=e[n]}return t}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=u(zM(e),1)[0];return null==t.graph.nodes[n]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=u(zM(e),1)[0];if(!t.graph.nodes[n])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),pO=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Jr(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return $r(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),fO=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Jr(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",null==n&&(this.loadOptions={}),this.resourceManager=new pO}return $r(e,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"findIOHandler",value:function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=ah.browserHTTPRequest(e,this.loadOptions);else{var t=ah.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(ah.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for URL '").concat([e],"'"));this.handler=t[0]}}},{key:"load",value:function(){var e=this;if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");var t=this.handler.load();return Cl.isPromise(t)?t.then((function(t){return e.loadSync(t)})):this.loadSync(t)}},{key:"loadSync",value:function(e){this.artifacts=e;var t,n=this.artifacts.modelTopology;t=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=t,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer);var r=ah.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new hO(CR.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var a=CR.Instance.transformGraph(e.modelInitializer);this.initializer=new hO(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}},{key:"save",value:function(){var e=Mr(Nr().mark((function e(t,n){var r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=7;break}if(0!==(r=ah.getSaveHandlers(t)).length){e.next=4;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 4:if(!(r.length>1)){e.next=6;break}throw new Error("Found more than one (".concat(r.length,") save handlers for URL '").concat(t,"'"));case 6:t=r[0];case 7:if(null!=t.save){e.next=9;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 9:return e.abrupt("return",t.save(this.artifacts));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e,t){return this.execute(e,this.outputNodes)}},{key:"normalizeInputs",value:function(e){if(!(e instanceof sc)&&!Array.isArray(e))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the graph model has ".concat(this.inputNodes.length," placeholders, while there are ").concat(e.length," input tensors."));return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"execute",value:function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var e=Mr(Nr().mark((function e(t,n){var r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=3,this.executor.executeAsync(t,n);case 3:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getIntermediateTensors",value:function(){return this.executor.getIntermediateTensors()}},{key:"disposeIntermediateTensors",value:function(){this.executor.disposeIntermediateTensors()}},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}]),e}();function mO(e){return gO.apply(this,arguments)}function gO(){return gO=Mr(Nr().mark((function e(t){var n,r,a=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},null!=t){e.next=3;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 3:return null==n&&(n={}),n.fromTFHub&&"string"==typeof t&&(t=yO(t)),r=new fO(t,n),e.next=7,r.load();case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)}))),gO.apply(this,arguments)}function vO(e){if(null==e)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide a url or an IOHandler that loads the model");if(!e.load)throw new Error("modelUrl IO Handler ".concat(e," has no load function"));var t=new fO(e);return t.load(),t}function yO(e){return e.endsWith("/")||(e+="/"),"".concat(e).concat("model.json").concat("?tfjs-format=file")}var bO="0.0.0",xO={};Ea(xO,{CSVDataset:function(){return gP},Dataset:function(){return rP},FileDataSource:function(){return MP},TextLineDataset:function(){return lP},URLDataSource:function(){return RP},array:function(){return iP},csv:function(){return OP},func:function(){return PP},generator:function(){return FP},microphone:function(){return zP},version_data:function(){return WP},webcam:function(){return DP},zip:function(){return oP}});var AO=Ta(Wa()),wO=Ta(Wa());function kO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"==typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(NO(e)){var i=Array.isArray(e)?[]:{};for(var o in r.add(e),e){var s=e[o],u=kO(s,t,n,r);i[o]=u}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function SO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:IO;return CO(e,t)}function CO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(NO(r)){var i=Array.isArray(r)?[]:{};n.add(r);var o=function(r){var a=e.map((function(e){return e[r]})),o=CO(a,t,n);i[r]=o};for(var s in r)o(s);return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function IO(e){return null===e?null:NO(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function EO(e,t){return TO.apply(this,arguments)}function TO(){return TO=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,u;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:kO(t,n,r=new Map),a=0,i=Array.from(r.keys());case 3:if(!(a<i.length)){e.next=14;break}if(o=i[a],s=r.get(o),!Cl.isPromise(s)){e.next=11;break}return e.next=9,s;case 9:u=e.sent,r.set(o,u);case 11:a++,e.next=3;break;case 14:return e.abrupt("return",kO(t,n,r));case 15:case"end":return e.stop()}}),e)}))),TO.apply(this,arguments)}function NO(e){var t=!1;Zi().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof ja().StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof sc)&&!(e instanceof Promise)&&!t)}function _O(e){return function(e,t){return kO(e,t)}(e,MO)}function MO(e){return e instanceof sc?{value:e.clone(),recurse:!1}:NO(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var RO=function(){function e(t){if(Jr(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return $r(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=ea(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch(a){n.e(a)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),OO=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.call(this,n.INITIAL_CAPACITY)}return $r(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){zr(Dr(n.prototype),"isFull",this).call(this)&&this.expand(),zr(Dr(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){zr(Dr(n.prototype),"isFull",this).call(this)&&this.expand(),zr(Dr(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(RO),PO=OO;function FO(e){return new WO(e)}function DO(e){return new jO(e)}function LO(e,t){return new QO(e,t)}function zO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$O.FAIL;return new eP(e,t)}PO.INITIAL_CAPACITY=32;var BO=function(){function e(){Jr(this,e)}return $r(e,[{key:"toArray",value:function(){var e=Mr(Nr().mark((function e(){var t,n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent;case 9:e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent;case 10:e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=Mr(Nr().mark((function e(){var t;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent;case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=Mr(Nr().mark((function e(t){var n,r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value);case 9:e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new YO(this,e)}},{key:"filter",value:function(e){return new XO(this,e)}},{key:"map",value:function(e){return new qO(this,e)}},{key:"mapAsync",value:function(e){return new KO(this,e)}},{key:"serialMapAsync",value:function(e){return new KO(this,e).serial()}},{key:"flatmap",value:function(e){return new JO(this,e)}},{key:"forEachAsync",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new GO(this,e,t)}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:IO;return this.rowMajorBatch(e,t).map((function(e){return SO(e,n)}))}},{key:"concatenate",value:function(e,t){return new QO(FO([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new UO(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new HO(this,e)}},{key:"prefetch",value:function(e){return new tP(this,e)}},{key:"shuffle",value:function(e,t){return new nP(this,e,t)}},{key:"serial",value:function(){return new VO(this)}}]),e}(),WO=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this)).items=e,r.trav=0,r}return $r(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=Mr(Nr().mark((function e(){var t;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],e.abrupt("return",(this.trav++,{value:_O(t),done:!1}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(BO),jO=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this)).nextFn=e,r}return $r(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 7:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(BO),VO=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return $r(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=Mr(Nr().mark((function e(){var t=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(BO),HO=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a;return Jr(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return $r(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=Mr(Nr().mark((function e(){var t=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Mr(Nr().mark((function e(){var t;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:jh(t.value);case 7:e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(BO),UO=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a;return Jr(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return $r(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(BO),GO=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Jr(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=i,a.lastRead=Promise.resolve({value:null,done:!1}),a}return $r(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=Mr(Nr().mark((function e(){var t=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Mr(Nr().mark((function e(){var t,n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=10;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=7;break}return e.abrupt("return",this.enableSmallLastBatch&&t.length>0?{value:t,done:!1}:{value:null,done:!0});case 7:t.push(n.value);case 8:e.next=1;break;case 10:return e.abrupt("return",{value:t,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(BO),XO=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a;return Jr(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return $r(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=Mr(Nr().mark((function e(){var t=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Mr(Nr().mark((function e(){var t;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=5;break}return e.abrupt("return",t);case 5:jh(t.value);case 6:e.next=0;break;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(BO),qO=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a;return Jr(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return $r(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r,a,i,o,s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=lc.getTensorsInContainer(t.value),r=this.transform(t.value),a=lc.getTensorsInContainer(r),i=ea(n);try{for(i.s();!(o=i.n()).done;)s=o.value,lc.isTensorInList(s,a)||s.dispose()}catch(u){i.e(u)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(BO),YO=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a;return Jr(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return $r(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=Mr(Nr().mark((function e(){var t=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.upstream.next();case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),this.handler(e.t0)){e.next=10;break}return e.abrupt("return",{value:null,done:!0});case 10:e.next=0;break;case 12:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()}]),n}(BO),KO=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a;return Jr(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return $r(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r,a,i,o,s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=lc.getTensorsInContainer(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,a=lc.getTensorsInContainer(r),i=ea(n);try{for(i.s();!(o=i.n()).done;)s=o.value,lc.isTensorInList(s,a)||s.dispose()}catch(u){i.e(u)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(BO),ZO=function(e){Kr(n,e);var t=Zr(n);function n(){var e;return Jr(this,n),(e=t.call(this)).outputQueue=new PO,e.lastRead=Promise.resolve({value:null,done:!1}),e}return $r(n,[{key:"next",value:function(){var e=Mr(Nr().mark((function e(){var t=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(BO),JO=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a;return Jr(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return $r(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r,a,i,o,s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=lc.getTensorsInContainer(t.value),r=this.transform(t.value),a=lc.getTensorsInContainer(r),this.outputQueue.pushAll(r),i=ea(n);try{for(i.s();!(o=i.n()).done;)s=o.value,lc.isTensorInList(s,a)||s.dispose()}catch(u){i.e(u)}finally{i.f()}return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(ZO),QO=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a;return Jr(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return $r(n,[{key:"summary",value:function(){return"TODO: fill in upstream of chained summaries -> Chained"}},{key:"next",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.readFromChain(this.lastRead),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=Mr(Nr().mark((function e(t){var n,r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=9;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 9:return e.next=11,this.iterator.next();case 11:return r=e.sent,e.abrupt("return",r.done?(this.iterator=null,this.readFromChain(t)):r);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(BO),$O=function(e){return e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST",e}($O||{}),eP=function(e){Kr(n,e);var t=Zr(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Jr(this,n),(r=t.call(this)).iterators=e,r.mismatchMode=a,r.count=0,r.currentPromise=null,r}return $r(n,[{key:"summary",value:function(){return"{TODO: fill in upstream of zip summaries} -> Zip"}},{key:"nextState",value:function(){var e=Mr(Nr().mark((function e(t){var n,r,a,i;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return e instanceof BO?{value:e.next().then((function(e){return n++,e.done&&r++,e.value})),recurse:!1}:{value:null,recurse:!0}},e.next=3,t;case 3:return n=0,r=0,e.next=6,EO(this.iterators,a);case 6:if(i=e.sent,n!==r){e.next=9;break}return e.abrupt("return",{value:null,done:!0});case 9:if(!(r>0)){e.next=15;break}e.t0=this.mismatchMode,e.next=0===e.t0?13:1===e.t0?14:(e.t0,15);break;case 13:throw new Error("Zipped streams should have the same length. Mismatched at element ".concat(this.count,"."));case 14:return e.abrupt("return",{value:null,done:!0});case 15:return e.abrupt("return",(this.count++,{value:i,done:!1}));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.currentPromise=this.nextState(this.currentPromise),this.currentPromise));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(BO),tP=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a;return Jr(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new RO(r),a}return $r(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(BO),nP=function(e){Kr(n,e);var t=Zr(n);function n(e,r,a){var i;return Jr(this,n),(i=t.call(this,e,r)).upstream=e,i.windowSize=r,i.upstreamExhausted=!1,i.random=wO.alea(a||Cl.now().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return $r(n,[{key:"next",value:function(){var e=Mr(Nr().mark((function e(){var t=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=Mr(Nr().mark((function e(){var t,n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=13;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=11;break;case 10:return e.abrupt("return",(this.refill(),n));case 11:e.next=1;break;case 13:return e.abrupt("return",{value:null,done:!0});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(tP),rP=function(){function e(){Jr(this,e),this.size=null}return $r(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return Cl.assert(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),aP(Mr(Nr().mark((function t(){return Nr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,sP));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,aP(Mr(Nr().mark((function t(){return Nr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,aP(Mr(Nr().mark((function t(){return Nr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return Wh((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return aP(Mr(Nr().mark((function n(){return Nr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return Wh((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return aP(Mr(Nr().mark((function n(){return Nr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return aP(Mr(Nr().mark((function n(){return Nr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,aP(Mr(Nr().mark((function t(){var r;return Nr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=DO(Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",LO(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,aP(Mr(Nr().mark((function t(){return Nr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=AO.alea(t||Cl.now().toString());return aP(Mr(Nr().mark((function t(){var i;return Nr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.int32(),n&&(i+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,i.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,aP(Mr(Nr().mark((function t(){return Nr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function aP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){Kr(a,n);var r=Zr(a);function a(){var e;return Jr(this,a),(e=r.apply(this,arguments)).size=t,e}return $r(a,[{key:"iterator",value:function(){var t=Mr(Nr().mark((function t(){return Nr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}(rP))}function iP(e){return aP(Mr(Nr().mark((function t(){return Nr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",FO(e));case 1:case"end":return t.stop()}}),t)}))),e.length)}function oP(e){if(!NO(e))throw new Error("The argument to zip() must be an object or array.");var t;if(Array.isArray(e))for(var n=0;n<e.length;n++)t=null==t?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(var r in e)t=null==t?e[r].size:Math.min(t,e[r].size);return aP(Mr(Nr().mark((function t(){var n;return Nr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,EO(e,(function(e){if(e instanceof rP)return{value:e.iterator(),recurse:!1};if(NO(e))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")}));case 2:return n=t.sent,t.abrupt("return",zO(n,1));case 4:case"end":return t.stop()}}),t)}))),t)}function sP(e){return null===e?null:function(e){return null==e||function(e){return null===e||"object"!=typeof e&&"function"!=typeof e}(e)||Array.isArray(e)||"object"==typeof e&&e instanceof sc||Cl.isTypedArray(e)}(e[0])?{value:uP(e),recurse:!1}:{value:null,recurse:!0}}function uP(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof sc?Gv(e):Xc(e)}rP.MAX_BUFFER_SIZE=1e4;var lP=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this)).input=e,r}return $r(n,[{key:"iterator",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.input.iterator();case 2:return e.abrupt("return",e.sent.decodeUTF8().split("\n").map((function(e){return e.endsWith("\r")&&(e=e.slice(0,-1)),e})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(rP),cP='"',dP=Symbol("out"),hP=Symbol("field"),pP=Symbol("quote"),fP=Symbol("quoteafterquote"),mP=Symbol("quoteinquote"),gP=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a;return Jr(this,n),(a=t.call(this)).input=e,a.hasHeader=!0,a.fullColumnNames=null,a.columnNamesValidated=!1,a.columnConfigs=null,a.configuredColumnsOnly=!1,a.delimiter=",",a.delimWhitespace=!1,a.base=new lP(e),r||(r={}),a.hasHeader=!1!==r.hasHeader,a.fullColumnNames=r.columnNames,a.columnConfigs=r.columnConfigs,a.configuredColumnsOnly=r.configuredColumnsOnly,r.delimWhitespace?(Cl.assert(null==r.delimiter,(function(){return"Delimiter should not be provided when delimWhitespace is true."})),a.delimWhitespace=!0,a.delimiter=" "):a.delimiter=r.delimiter?r.delimiter:",",a}return $r(n,[{key:"columnNames",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.columnNamesValidated,e.t0){e.next=4;break}return e.next=4,this.setColumnNames();case 4:return e.abrupt("return",this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setColumnNames",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r,a,i,o,s=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.maybeReadHeaderLine();case 2:if(t=e.sent,this.fullColumnNames||t){e.next=5;break}throw new Error("Column names must be provided if there is no header line.");case 5:if(this.fullColumnNames&&t&&Cl.assert(t.length===this.fullColumnNames.length,(function(){return"The length of provided columnNames ("+s.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."})),this.fullColumnNames||(this.fullColumnNames=t),n=this.fullColumnNames.reduce((function(e,t){return e[t]=e[t]+1||1,e}),{}),r=Object.keys(n).filter((function(e){return n[e]>1})),Cl.assert(0===r.length,(function(){return"Duplicate column names found: "+r.toString()})),!this.columnConfigs){e.next=16;break}a=0,i=Object.keys(this.columnConfigs);case 9:if(!(a<i.length)){e.next=16;break}if(o=i[a],-1!==this.fullColumnNames.indexOf(o)){e.next=13;break}throw new Error('The key "'+o+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").");case 13:a++,e.next=9;break;case 16:this.columnNamesValidated=!0;case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"maybeReadHeaderLine",value:function(){var e=Mr(Nr().mark((function e(){var t,n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasHeader){e.next=12;break}return e.next=3,this.base.iterator();case 3:return e.next=5,e.sent.next();case 5:if(!(t=e.sent).done){e.next=8;break}throw new Error("No data was found for CSV parsing.");case 8:return n=t.value,e.abrupt("return",this.parseRow(n,!1));case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"iterator",value:function(){var e=Mr(Nr().mark((function e(){var t,n=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.columnNamesValidated,e.t0){e.next=4;break}return e.next=4,this.setColumnNames();case 4:return e.next=6,this.base.iterator();case 6:return t=e.sent,e.abrupt("return",(this.hasHeader&&(t=t.skip(1)),t.map((function(e){return n.makeDataElement(e)}))));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"makeDataElement",value:function(e){for(var t=this.parseRow(e),n={},r={},a=0;a<this.fullColumnNames.length;a++){var i=this.fullColumnNames[a],o=this.columnConfigs?this.columnConfigs[i]:null;if(!this.configuredColumnsOnly||o){var s=t[a],u=null;if(""===s)if(o&&void 0!==o.default)u=o.default;else{if(o&&(o.required||o.isLabel))throw new Error("Required column ".concat(i," is empty in this line: ").concat(e));u=void 0}else{var l=Number(s);if(isNaN(l))u=o&&"bool"===o.dtype?this.getBoolean(s):s;else if(o&&o.dtype)switch(o.dtype){case"float32":default:u=l;break;case"int32":u=Math.floor(l);break;case"bool":u=this.getBoolean(s)}else u=l}o&&o.isLabel?r[i]=u:n[i]=u}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}},{key:"getBoolean",value:function(e){return"1"===e||"true"===e.toLowerCase()?1:0}},{key:"parseRow",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],r=0,a=e.length,i=dP,o=0;o<a;o++)switch(i){case dP:switch(e.charAt(o)){case cP:r=o+1,i=pP;break;case this.delimiter:if(r=o+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),i=dP;break;default:i=hP,r=o}break;case hP:if(e.charAt(o)===this.delimiter)n.push(e.substring(r,o)),i=dP,r=o+1;break;case pP:if(e.charAt(o)===cP)i=fP;break;case fP:switch(e.charAt(o)){case this.delimiter:n.push(e.substring(r,o-1)),i=dP,r=o+1;break;case cP:i=pP;break;default:i=mP}break;case mP:if(e.charAt(o)===cP)i=pP}if(i===fP?n.push(e.substring(r,a-1)):n.push(e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have ".concat(this.fullColumnNames.length," elements in a row, but got ").concat(n));return n}}]),n}(rP),vP=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;Jr(this,n),(r=t.call(this)).microphoneConfig=e,r.isClosed=!1,r.fftSize=e.fftSize||1024;var a=Math.log2(r.fftSize);if(r.fftSize<0||a<4||a>14||!Number.isInteger(a))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ".concat(r.fftSize));if(r.numFrames=e.numFramesPerSpectrogram||43,r.sampleRateHz=e.sampleRateHz,r.columnTruncateLength=e.columnTruncateLength||r.fftSize,r.audioTrackConstraints=e.audioTrackConstraints,r.smoothingTimeConstant=e.smoothingTimeConstant||0,r.includeSpectrogram=!1!==e.includeSpectrogram,r.includeWaveform=!0===e.includeWaveform,!r.includeSpectrogram&&!r.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.");return r}return $r(n,[{key:"summary",value:function(){return"microphone"}},{key:"start",value:function(){var e=Mr(Nr().mark((function e(){var t,n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1});case 3:this.stream=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error thrown while initializing video stream: ".concat(e.t0.message));case 9:if(this.stream){e.next=11;break}throw new Error("Could not obtain audio from microphone.");case 11:if(t=window.AudioContext||window.webkitAudioContext,this.audioContext=new t,this.sampleRateHz){e.next=16;break}this.sampleRateHz=this.audioContext.sampleRate,e.next=18;break;case 16:if(this.audioContext.sampleRate===this.sampleRateHz){e.next=18;break}throw new Error("Mismatch in sampling rate: Expected: ".concat(this.sampleRateHz,"; Actual: ").concat(this.audioContext.sampleRate));case 18:n=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,n.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize);case 20:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r,a,i;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClosed){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.next=4,this.getAudioData();case 4:return r=e.sent,this.includeSpectrogram&&(a=this.flattenQueue(r.freqDataQueue),t=this.getTensorFromAudioDataArray(a,[this.numFrames,this.columnTruncateLength,1])),this.includeWaveform&&(i=this.flattenQueue(r.timeDataQueue),n=this.getTensorFromAudioDataArray(i,[this.numFrames*this.fftSize,1])),e.abrupt("return",{value:{spectrogram:t,waveform:n},done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"capture",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAudioData",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r,a=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],r=0,e.abrupt("return",new Promise((function(e){var i=setInterval((function(){a.includeSpectrogram&&(a.analyser.getFloatFrequencyData(a.freqData),a.freqData[0]===-1/0&&e({freqDataQueue:t,timeDataQueue:n}),t.push(a.freqData.slice(0,a.columnTruncateLength))),a.includeWaveform&&(a.analyser.getFloatTimeDomainData(a.timeData),n.push(a.timeData.slice())),++r===a.numFrames&&(clearInterval(i),e({freqDataQueue:t,timeDataQueue:n}))}),a.fftSize/a.sampleRateHz*1e3)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}},{key:"toArray",value:function(){throw new Error("Can not convert infinite audio stream to array.")}},{key:"getSampleRate",value:function(){return this.sampleRateHz}},{key:"flattenQueue",value:function(e){var t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((function(e,r){return n.set(e,r*t)})),n}},{key:"getTensorFromAudioDataArray",value:function(e,t){var n=new Float32Array(Cl.sizeFromShape(t));return n.set(e,n.length-e.length),Xc(n,t)}}],[{key:"create",value:function(){var e=Mr(Nr().mark((function e(){var t,r,a=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},Zi().get("IS_BROWSER")){e.next=3;break}throw new Error("microphone API is only supported in browser environment.");case 3:return r=new n(t),e.next=6,r.start();case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(BO),yP=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a;if(Jr(this,n),(a=t.call(this)).webcamVideoElement=e,a.webcamConfig=r,a.isClosed=!0,a.resize=!1,a.needToResize())if(a.resize=!0,a.cropSize=[a.webcamConfig.resizeHeight,a.webcamConfig.resizeWidth],a.cropBoxInd=Kv([0],"int32"),a.webcamConfig.centerCrop){var i=1*a.webcamConfig.resizeWidth/a.webcamVideoElement.width,o=1*a.webcamConfig.resizeHeight/a.webcamVideoElement.height,s=(1-i)/2,u=(1-o)/2,l=s+i,c=o+u;a.cropBox=Zv([u,s,c,l],[1,4])}else a.cropBox=Zv([0,0,1,1],[1,4]);return Xr(a)}return $r(n,[{key:"summary",value:function(){return"webcam"}},{key:"start",value:function(){var e=Mr(Nr().mark((function e(){var t=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.webcamConfig.facingMode&&Cl.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,(function(){return"Invalid webcam facing mode: ".concat(t.webcamConfig.facingMode,". Please provide 'user' or 'environment'")})),e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}});case 4:this.stream=e.sent,e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0.message="Error thrown while initializing video stream: ".concat(e.t0.message),e.t0;case 10:if(this.stream){e.next=12;break}throw new Error("Could not obtain video from webcam.");case 12:try{this.webcamVideoElement.srcObject=this.stream}catch(QIe){console.log(QIe),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return e.abrupt("return",(this.webcamVideoElement.play(),this.isClosed=!1,new Promise((function(e){t.webcamVideoElement.onloadedmetadata=function(){e()}}))));case 14:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=Mr(Nr().mark((function e(){var t;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClosed){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:e.prev=2,t=lp.fromPixels(this.webcamVideoElement),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),new Error("Error thrown converting video to pixels: ".concat(JSON.stringify(e.t0)));case 9:if(!this.resize){e.next=22;break}return e.prev=10,e.abrupt("return",{value:this.cropAndResizeFrame(t),done:!1});case 14:throw e.prev=14,e.t1=e.catch(10),new Error("Error thrown cropping the video: ".concat(e.t1.message));case 17:return e.prev=17,t.dispose(),e.finish(17);case 20:e.next=23;break;case 22:return e.abrupt("return",{value:t,done:!1});case 23:case"end":return e.stop()}}),e,this,[[2,6],[10,14,17,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"needToResize",value:function(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}},{key:"cropAndResizeFrame",value:function(e){var t=this;return Wh((function(){var n,r=Jm(th(e,"float32"),0),a=(n=Db.cropAndResize(r,t.cropBox,t.cropBoxInd,t.cropSize,"bilinear")).shape;return Bf(n,a.slice(1))}))}},{key:"capture",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.stream.getTracks().forEach((function(e){return e.stop()}));try{this.webcamVideoElement.srcObject=null}catch(qe){console.log(qe),this.webcamVideoElement.src=null}this.isClosed=!0}},{key:"toArray",value:function(){throw new Error("Can not convert infinite video stream to array.")}}],[{key:"create",value:function(){var e=Mr(Nr().mark((function e(t){var r,a,i=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:{},Zi().get("IS_BROWSER")){e.next=3;break}throw new Error("tf.data.webcam is only supported in browser environment.");case 3:if(t){e.next=7;break}if(t=document.createElement("video"),r.resizeWidth&&r.resizeHeight){e.next=6;break}throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");case 6:t.width=r.resizeWidth,t.height=r.resizeHeight;case 7:return a=new n(t,r),e.next=10,a.start();case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(BO),bP=$r((function e(){Jr(this,e)})),xP=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"split",value:function(e){return new AP(this,e)}}]),n}(BO),AP=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a;return Jr(this,n),(a=t.call(this)).upstream=e,a.impl=new wP(e,r),a}return $r(n,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(xP),wP=function(e){Kr(n,e);var t=Zr(n);function n(e,r){var a;return Jr(this,n),(a=t.call(this)).upstream=e,a.separator=r,a.carryover="",a}return $r(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Split('").concat(this.separator,"')")}},{key:"pump",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r,a,i;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0));case 5:(n=t.value.split(this.separator))[0]=this.carryover+n[0],r=ea(n.slice(0,-1));try{for(r.s();!(a=r.n()).done;)i=a.value,this.outputQueue.push(i)}catch(o){r.e(o)}finally{r.f()}return e.abrupt("return",(this.carryover=n[n.length-1],!0));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(ZO),kP=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"decodeUTF8",value:function(){return new SP(this)}}]),n}(BO),SP=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this)).upstream=e,r.impl=new CP(e),r}return $r(n,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(xP),CP=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;if(Jr(this,n),(r=t.call(this)).upstream=e,Zi().get("IS_BROWSER"))r.decoder=new TextDecoder("utf-8");else{var a=ja().StringDecoder;r.decoder=new a("utf8")}return Xr(r)}return $r(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Utf8")}},{key:"pump",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:return n=t.value,e.abrupt("return",(r=Zi().get("IS_BROWSER")?this.decoder.decode(n,{stream:!0}):this.decoder.write(Buffer.from(n.buffer)),this.outputQueue.push(r),!0));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(ZO),IP=function(e){Kr(n,e);var t=Zr(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Jr(this,n),(r=t.call(this)).file=e,r.options=a,Cl.assert(e instanceof Uint8Array||!!Zi().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),(function(){return"FileChunkIterator only supports File, Blob and Uint8Array right now."})),r.offset=a.offset||0,r.chunkSize=a.chunkSize||1048576,r}return $r(n,[{key:"summary",value:function(){return"FileChunks ".concat(this.file)}},{key:"next",value:function(){var e=Mr(Nr().mark((function e(){var t=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))){e.next=4;break}e.t0={value:null,done:!0},e.next=8;break;case 4:return e.next=6,new Promise((function(e,n){var r=t.offset+t.chunkSize;if(t.file instanceof Uint8Array)e(new Uint8Array(t.file.slice(t.offset,r)));else{var a=new FileReader;a.onload=function(t){var r=a.result;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),!(r instanceof Uint8Array))return n(new TypeError("FileReader returned unknown type."));e(r)},a.onabort=function(e){return n(new Error("Aborted"))},a.onerror=function(e){return n(new Error(e.type))};var i=t.file.slice(t.offset,r);a.readAsArrayBuffer(i)}t.offset=r}));case 6:e.t1=e.sent,e.t0={value:e.t1,done:!1};case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(kP);function EP(e){return TP.apply(this,arguments)}function TP(){return TP=Mr(Nr().mark((function e(t){var n,r,a,i,o,s,u=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},r=u.length>2?u[2]:void 0,"string"==typeof t?a=t:(a=t.url,i=NP(t)),e.next=5,(r||Cl.fetch)(a,i);case 5:if(!(o=e.sent).ok){e.next=15;break}return e.t0=Uint8Array,e.next=10,o.arrayBuffer();case 10:return e.t1=e.sent,s=new e.t0(e.t1),e.abrupt("return",new IP(s,n));case 15:throw new Error(o.statusText);case 16:case"end":return e.stop()}}),e)}))),TP.apply(this,arguments)}var NP=function(e){return{method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity}};function _P(e){return"string"==typeof e&&"file://"===e.slice(0,7)}var MP=function(e){Kr(n,e);var t=Zr(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Jr(this,n),(r=t.call(this)).input=e,r.options=a,r}return $r(n,[{key:"iterator",value:function(){var e=Mr(Nr().mark((function e(){var t;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _P(this.input)&&Zi().get("IS_NODE")&&(t=Va(),this.input=t.readFileSync(this.input.slice(7))),e.abrupt("return",new IP(this.input,this.options));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(bP),RP=function(e){Kr(n,e);var t=Zr(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Jr(this,n),(r=t.call(this)).url=e,r.fileOptions=a,r}return $r(n,[{key:"iterator",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_P(this.url)?new MP(this.url,this.fileOptions).iterator():EP(this.url,this.fileOptions));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(bP);function OP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new gP(new RP(e),t)}function PP(e){var t=DO(e);return aP(Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))))}function FP(e){return aP(Mr(Nr().mark((function t(){var n;return Nr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return n=t.sent,t.abrupt("return",DO((function(){return n.next()})));case 4:case"end":return t.stop()}}),t)}))))}function DP(e,t){return LP.apply(this,arguments)}function LP(){return LP=Mr(Nr().mark((function e(t,n){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",yP.create(t,n));case 1:case"end":return e.stop()}}),e)}))),LP.apply(this,arguments)}function zP(e){return BP.apply(this,arguments)}function BP(){return BP=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vP.create(t));case 1:case"end":return e.stop()}}),e)}))),BP.apply(this,arguments)}var WP="0.0.0";function jP(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Cl.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var VP=$x.whereImpl,HP=function(e){Kr(n,e);var t=Zr(n);function n(){var e;return Jr(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new Ka(jr(e),Lh()),e}return $r(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,Zi().get("IS_NODE")&&$b.warn("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&Cl.isString(n[0])){var a=n.map((function(e){return Cl.encodeString(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;if("complex64"===n){var a=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return $b.mergeRealAndImagArrays(a,i)}return this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return Cl.decodeString(e)}));return eh(e.shape,e.dtype,n)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return eh(e.shape,e.dtype,t)}},{key:"makeOutput",value:function(e,t,n){return Lh().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=Mr(Nr().mark((function e(t){var n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Cl.now(),e.abrupt("return",(t(),{kernelMs:Cl.now()-n}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){jP([e],"where");var t=this.readSync(e.dataId);return VP(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return zr(Dr(n.prototype),"epsilon",this).call(this)}}]),n}(Za),UP=HP;UP.nextDataId=0;var GP={};function XP(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}Ea(GP,{addImpl:function(){return oF},bincountImpl:function(){return cF},bincountReduceImpl:function(){return dF},ceilImpl:function(){return mF},concatImpl:function(){return yF},equalImpl:function(){return bF},expImpl:function(){return wF},expm1Impl:function(){return CF},floorImpl:function(){return TF},gatherNdImpl:function(){return MF},gatherV2Impl:function(){return RF},greaterEqualImpl:function(){return DF},greaterImpl:function(){return OF},lessEqualImpl:function(){return VF},lessImpl:function(){return BF},linSpaceImpl:function(){return GF},logImpl:function(){return XF},maxImpl:function(){return KF},maximumImpl:function(){return ZF},minimumImpl:function(){return $F},multiplyImpl:function(){return nD},negImpl:function(){return oD},notEqualImpl:function(){return uD},prodImpl:function(){return fD},rangeImpl:function(){return gD},rsqrtImpl:function(){return vD},scatterImpl:function(){return xD},sigmoidImpl:function(){return AD},simpleAbsImpl:function(){return XP},sliceImpl:function(){return SD},sparseFillEmptyRowsImpl:function(){return ED},sparseReshapeImpl:function(){return TD},sparseSegmentReductionImpl:function(){return ND},sqrtImpl:function(){return _D},squaredDifferenceImpl:function(){return OD},stridedSliceImpl:function(){return DD},stringNGramsImpl:function(){return zD},stringSplitImpl:function(){return WD},stringToHashBucketFastImpl:function(){return jD},subImpl:function(){return VD},tileImpl:function(){return XD},topKImpl:function(){return KD},transposeImpl:function(){return dD},uniqueImpl:function(){return ZD}});var qP={kernelName:to,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;jP(t,"abs");var r=new Float32Array(Cl.sizeFromShape(t.shape));return r=XP(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}};function YP(e){return function(t,n,r,a,i){var o=$b.assertAndGetBroadcastShape(t,n),s=o.length,u=Cl.computeStrides(o),l=Cl.sizeFromShape(o),c=Cl.getTypedArrayFromDType(i,l),d=t.length,h=n.length,p=Cl.computeStrides(t),f=Cl.computeStrides(n),m=$b.getBroadcastDims(t,o),g=$b.getBroadcastDims(n,o);if(m.length+g.length===0)for(var v=0;v<c.length;++v)c[v]=e(r[v%r.length],a[v%a.length]);else for(var y=function(t){var n=Cl.indexToLoc(t,s,u),i=n.slice(-d);m.forEach((function(e){return i[e]=0}));var o=Cl.locToIndex(i,d,p),l=n.slice(-h);g.forEach((function(e){return l[e]=0}));var v=Cl.locToIndex(l,h,f);c[t]=e(r[o],a[v])},b=0;b<c.length;++b)y(b);return[c,o]}}function KP(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}var ZP={kernelName:To,backendName:"cpu",kernelFunc:KP};function JP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=JP(e,t,"float32"),a=JP(e,t,"float32");return KP({inputs:{real:r,imag:a},backend:e})}var i=Cl.makeZerosTypedArray(Cl.sizeFromShape(t),n);return e.makeTensorInfo(t,n,i)}function QP(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var $P={kernelName:gs,backendName:"cpu",kernelFunc:QP};function eF(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var tF={kernelName:cu,backendName:"cpu",kernelFunc:eF};function nF(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if("complex64"===i){if("complex64"===a.dtype)return QP({inputs:{x:a},backend:n});var o=JP(n,a.shape,a.dtype),s=nF({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),l=KP({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),l}if("complex64"===a.dtype){var c=eF({inputs:{input:a},backend:n}),d=nF({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),d}if(!Cl.hasEncodingLoss(a.dtype,i)){var h=QP({inputs:{x:a},backend:n});return{dataId:h.dataId,shape:h.shape,dtype:i}}if("int32"===i){var p=n.data.get(a.dataId).values,f=Int32Array.from(p);return n.makeTensorInfo(a.shape,"int32",f)}if("bool"===i){var m=n.data.get(a.dataId).values,g=Cl.toTypedArray([0],a.dtype),v=YP((function(e,t){return e!==t?1:0}))(a.shape,[],m,g,"bool"),y=u(v,2),b=y[0],x=y[1];return n.makeTensorInfo(x,"bool",b)}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(i))}var rF={kernelName:Co,backendName:"cpu",kernelFunc:nF};function aF(e,t,n,r){return null==n?function(n){var a=n.inputs,i=n.backend,o=a.a,s=a.b,l=i;jP([o,s],e);var c=l.data.get(o.dataId).values,d=l.data.get(s.dataId).values,h="string"===o.dtype?$b.fromUint8ToStringArray(c):c,p="string"===o.dtype?$b.fromUint8ToStringArray(d):d,f=r||o.dtype,m=u(t(o.shape,s.shape,h,p,f),2),g=m[0],v=m[1];return l.makeTensorInfo(v,f,g)}:function(e){var a=e.inputs,i=e.backend,o=a.a,s=a.b,l=i;if("complex64"===o.dtype||"complex64"===s.dtype){var c=nF({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),d=l.data.get(c.dataId),h=d.complexTensorInfos.real,p=d.complexTensorInfos.imag,f=l.data.get(h.dataId).values,m=l.data.get(p.dataId).values,g=nF({inputs:{x:s},backend:l,attrs:{dtype:"complex64"}}),v=l.data.get(g.dataId),y=v.complexTensorInfos.real,b=v.complexTensorInfos.imag,x=l.data.get(y.dataId).values,A=l.data.get(b.dataId).values,w=u(n(o.shape,s.shape,f,m,x,A),3),k=w[0],S=w[1],C=w[2],I=l.makeTensorInfo(C,"float32",k),E=l.makeTensorInfo(C,"float32",S),T=KP({inputs:{real:I,imag:E},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(g),l.disposeIntermediateTensorInfo(I),l.disposeIntermediateTensorInfo(E),T}var N=l.data.get(o.dataId).values,_=l.data.get(s.dataId).values,M=r||o.dtype,R=u(t(o.shape,s.shape,N,_,M),2),O=R[0],P=R[1];return l.makeTensorInfo(P,M,O)}}function iF(e){return function(t,n,r,a,i,o){var s=$b.assertAndGetBroadcastShape(t,n),u=Cl.sizeFromShape(s),l=s.length,c=Cl.computeStrides(s),d=Cl.getTypedArrayFromDType("float32",u),h=Cl.getTypedArrayFromDType("float32",u),p=$b.getBroadcastDims(t,s),f=$b.getBroadcastDims(n,s),m=$b.mergeRealAndImagArrays(r,a),g=$b.mergeRealAndImagArrays(i,o),v=t.length,y=Cl.computeStrides(t),b=n.length,x=Cl.computeStrides(n);if(p.length+f.length===0)for(var A=0;A<d.length;A++){var w=A%m.length,k=A%g.length,S=e(m[2*w],m[2*w+1],g[2*k],g[2*k+1]);d[A]=S.real,h[A]=S.imag}else for(var C=function(t){var n=Cl.indexToLoc(t,l,c),r=n.slice(-v);p.forEach((function(e){return r[e]=0}));var a=Cl.locToIndex(r,v,y),i=n.slice(-b);f.forEach((function(e){return i[e]=0}));var o=Cl.locToIndex(i,b,x),s=e(m[2*a],m[2*a+1],g[2*o],g[2*o+1]);d[t]=s.real,h[t]=s.imag},I=0;I<d.length;I++)C(I);return[d,h,s]}}var oF=YP((function(e,t){return e+t})),sF=iF((function(e,t,n,r){return{real:e+n,imag:t+r}})),uF=aF(ao,oF,sF),lF={kernelName:ao,backendName:"cpu",kernelFunc:uF};function cF(e,t,n,r,a){for(var i=Cl.sizeFromShape(r),o=Cl.makeZerosTypedArray(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(o[u]+=i>0?t[s]:1)}return o}function dF(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],i=e.shape[1],o=eh([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<i;u++){var l=e.get(s,u);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(r?o.set(1,s,l):t.size>0?o.set(o.get(s,l)+t.get(s,u),s,l):o.set(o.get(s,l)+1,s,l))}return o}function hF(e){return function(t,n,r){for(var a=Cl.getTypedArrayFromDType(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}function pF(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(jP(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=o,l=u.data.get(s.dataId).values,c=Cl.sizeFromShape(s.shape),d=n||s.dtype,h=Cl.getArrayFromDType(d,c),p=0;p<c;++p)h[p]=t(l[p],i);return u.makeTensorInfo(s.shape,d,h)}}function fF(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(jP(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=o,l=u.data.get(s.dataId).values,c=n||s.dtype,d=t(l,c,i);return u.makeTensorInfo(s.shape,c,d)}}var mF=hF((function(e){return Math.ceil(e)})),gF=fF(Io,mF),vF={kernelName:Io,backendName:"cpu",kernelFunc:gF};function yF(e,t,n,r){var a=Cl.getArrayFromDType(n,Cl.sizeFromShape(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=Cl.sizeFromShape(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?$b.fromUint8ToStringArray(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+o,l=0;l<e.shape[1];++l)a[u+l]=r[i++];o+=e.shape[1]}))}return a}var bF=YP((function(e,t){return e===t?1:0})),xF=aF(ns,bF,null,"bool"),AF={kernelName:ns,backendName:"cpu",kernelFunc:xF},wF=hF((function(e){return Math.exp(e)})),kF=fF(rs,wF,"float32"),SF={kernelName:rs,backendName:"cpu",kernelFunc:kF},CF=hF((function(e){return Math.expm1(e)})),IF=fF(is,CF),EF={kernelName:is,backendName:"cpu",kernelFunc:IF},TF=hF((function(e){return Math.floor(e)})),NF=fF(ls,TF),_F={kernelName:ls,backendName:"cpu",kernelFunc:NF};function MF(e,t,n,r,a,i,o,s,u){for(var l=eh([r,i],n),c=0;c<r;c++){for(var d=[],h=0,p=0;p<a;p++){var f=e[c*a+p];h+=f*o[p],d.push(f)}if(h<0||h>=u/i)throw new Error("Invalid indices: ".concat(d," does not index into ").concat(s));for(var m=0;m<i;m++)l.values[c*i+m]=t.get.apply(t,ta(t.indexToLoc(h*i+m)))}return l}function RF(e,t,n){for(var r=eh(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a).slice(),o=i[0],s=i[2],u=t.locToIndex([o,s]);i[2]=t.values[u];var l=e.locToIndex(i);0<=l&&l<e.values.length&&(r.values[a]=e.values[l])}return r}var OF=YP((function(e,t){return e>t?1:0})),PF=aF(fs,OF,null,"bool"),FF={kernelName:fs,backendName:"cpu",kernelFunc:PF},DF=YP((function(e,t){return e>=t?1:0})),LF=aF(ms,DF,null,"bool"),zF={kernelName:ms,backendName:"cpu",kernelFunc:LF},BF=YP((function(e,t){return e<t?1:0})),WF=aF(ks,BF,null,"bool"),jF={kernelName:ks,backendName:"cpu",kernelFunc:WF},VF=YP((function(e,t){return e<=t?1:0})),HF=aF(Ss,VF,null,"bool"),UF={kernelName:Ss,backendName:"cpu",kernelFunc:HF};function GF(e,t,n){var r=(t-e)/(n-1),a=Cl.makeZerosTypedArray(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}var XF=hF((function(e){return Math.log(e)})),qF=fF(Is,XF),YF={kernelName:Is,backendName:"cpu",kernelFunc:qF};function KF(e,t,n,r){for(var a=Cl.getTypedArrayFromDType(r,Cl.sizeFromShape(n)),i=0;i<a.length;++i){for(var o=i*t,s=e[o],u=0;u<t;++u){var l=e[o+u];(Number.isNaN(l)||l>s)&&(s=l)}a[i]=s}return a}var ZF=YP((function(e,t){return Math.max(e,t)})),JF=aF(Ls,ZF),QF={kernelName:Ls,backendName:"cpu",kernelFunc:JF},$F=YP((function(e,t){return Math.min(e,t)})),eD=aF(Gs,$F),tD={kernelName:Gs,backendName:"cpu",kernelFunc:eD},nD=YP((function(e,t){return e*t})),rD=iF((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),aD=aF(Ks,nD,rD),iD={kernelName:Ks,backendName:"cpu",kernelFunc:aD};function oD(e,t,n){var r=Cl.createScalarValue(-1,n);return nD([],t,r,e,n)}var sD={kernelName:Zs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;jP(r,"neg");var a=u(oD(n.data.get(r.dataId).values,r.shape,r.dtype),2),i=a[0],o=a[1];return n.makeTensorInfo(o,r.dtype,i)}},uD=YP((function(e,t){return e!==t?1:0})),lD=aF(Js,uD,null,"bool"),cD={kernelName:Js,backendName:"cpu",kernelFunc:lD};function dD(e,t,n,r,a){for(var i=t.length,o=Cl.sizeFromShape(t),s=Cl.computeStrides(t),u=Cl.computeStrides(a),l=Cl.getTypedArrayFromDType(n,Cl.sizeFromShape(a)),c=0;c<o;++c){for(var d=Cl.indexToLoc(c,i,s),h=new Array(d.length),p=0;p<h.length;p++)h[p]=d[r[p]];l[Cl.locToIndex(h,i,u)]=e[c]}return l}function hD(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm;jP(a,"transpose");for(var o=a.shape.length,s=new Array(o),u=0;u<s.length;u++)s[u]=a.shape[i[u]];var l=dD(r.data.get(a.dataId).values,a.shape,a.dtype,i,s);return{dataId:r.write(l,s,a.dtype),shape:s,dtype:a.dtype}}var pD={kernelName:el,backendName:"cpu",kernelFunc:hD};function fD(e,t,n,r){for(var a=u($b.computeOutAndReduceShapes(e,r),2),i=a[0],o=a[1],s=gc(t,"int32"),l=Cl.makeZerosTypedArray(Cl.sizeFromShape(i),s),c=Cl.sizeFromShape(o),d=0;d<l.length;++d){for(var h=d*c,p=1,f=0;f<c;++f)p*=n[h+f];l[d]=p}return{outVals:l,outShape:i,outDtype:s}}var mD={kernelName:uu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;jP(a,"prod");var s=a.shape.length,u=Cl.parseAxisParam(i,a.shape),l=$b.getAxesPermutation(u,s),c=u,d=a,h=[];null!=l&&(d=hD({inputs:{x:a},backend:n,attrs:{perm:l}}),h.push(d),c=$b.getInnerMostAxes(c.length,s));var p=n.data.get(d.dataId).values,f=fD(d.shape,d.dtype,p,c),m=f.outVals,g=f.outShape,v=f.outDtype,y=g;return o&&(y=$b.expandShapeToKeepDim(g,u)),h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,v,m)}};function gD(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return Cl.makeZerosTypedArray(0,r);var a=Math.abs(Math.ceil((t-e)/n)),i=Cl.makeZerosTypedArray(a,r);t<e&&1===n&&(n=-1),i[0]=e;for(var o=1;o<i.length;o++)i[o]=i[o-1]+n;return i}var vD=hF((function(e){return 1/Math.sqrt(e)})),yD=fF(Au,vD),bD={kernelName:Au,backendName:"cpu",kernelFunc:yD};function xD(e,t,n,r,a,i,o,s,u,l){var c=[r/a,a],d=e.values,h=t.values;if(0===r)return eh(n,t.dtype);var p=eh(c,t.dtype);"string"==typeof u||"number"==typeof u?p.values.fill(u):"boolean"==typeof u&&p.values.fill(+u);for(var f=0;f<i;f++){for(var m=[],g=0,v=0;v<o;v++){var y=d[f*o+v];m.push(y),g+=y*s[v]}if(g<0||g>=r/a)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(var b=0;b<a;b++)l?p.values[g*a+b]+=h[f*a+b]:p.values[g*a+b]=0===t.rank?h[0]:h[f*a+b]}return p}var AD=hF((function(e){return 1/(1+Math.exp(-e))})),wD=pF(_u,(function(e){return 1/(1+Math.exp(-e))})),kD={kernelName:_u,backendName:"cpu",kernelFunc:wD};function SD(e,t,n,r,a){var i=Sp.isSliceContinous(r,t,n),o=Cl.sizeFromShape(n),s=Cl.computeStrides(r);if(i){var u=Sp.computeFlatOffset(t,s);return"string"===a?e.slice(u,u+o):e.subarray(u,u+o)}for(var l=eh(r,a,"string"===a?$b.fromUint8ToStringArray(e):e),c=eh(n,a),d=0;d<c.size;++d){var h=c.indexToLoc(d),p=h.map((function(e,n){return e+t[n]}));c.set.apply(c,[l.get.apply(l,ta(p))].concat(ta(h)))}return"string"===a?$b.fromStringArrayToUint8(c.values):c.values}function CD(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size;jP(a,"slice");var s=u(Sp.parseSliceParams(a,i,o),2),l=s[0],c=s[1];Sp.assertParamsValid(a,l,c);var d=SD(n.data.get(a.dataId).values,l,c,a.shape,a.dtype);return n.makeTensorInfo(c,a.dtype,d)}var ID={kernelName:Iu,backendName:"cpu",kernelFunc:CD};function ED(e,t,n,r,a,i,o){var s=t[0],u=i[0],l=new Array(u),c=new Array(s),d=t[1];if(0===u){if(0!==s)throw new Error($b.getSparseFillEmptyRowsIndicesDenseShapeMismatch(s));return[Cl.getArrayFromDType(n,0),[0,d],Cl.getArrayFromDType(a,0),l,c]}for(var h=!0,p=0,f=new Array(u).fill(0),m=0;m<s;++m){var g=e[m*d];if(g<0)throw new Error($b.getSparseFillEmptyRowsNegativeIndexErrorMessage(m,g));if(g>=u)throw new Error($b.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(m,g,u));++f[g],h=h&&g>=p,p=g}for(var v=!0,y=0;y<u;++y){var b=0===f[y];l[y]=b,v=v&&!b,f[y]=Math.max(f[y],1),y>0&&(f[y]+=f[y-1])}if(v&&h){for(var x=e,A=r,w=0;w<s;++w)c[w]=w;return[x,[s,d],A,l,c]}for(var k=f[u-1],S=Cl.getArrayFromDType(n,k*d),C=Cl.getArrayFromDType(a,k),I=new Array(u).fill(0),E=0;E<s;++E){var T=e[E*d],N=I[T],_=(0===T?0:f[T-1])+N;I[T]++;for(var M=0;M<d;++M)S[_*d+M]=e[E*d+M];C[_]=r[E],c[E]=_}for(var R=0;R<u;++R)if(0===I[R]){var O=0===R?0:f[R-1];S[O*d+0]=R;for(var P=1;P<d;++P)S[O*d+P]=0;C[O]=o}return[S,[k,d],C,l,c]}function TD(e,t,n,r,a){for(var i=Cl.sizeFromShape(r),o=t[0],s=a.length,u=[],l=1,c=-1,d=0;d<s;++d){var h=a[d];if(-1===h){if(-1!==c)throw new Error($b.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(c,d));c=d,u.push(1)}else{if(h<0)throw new Error($b.getSparseReshapeNegativeOutputDimErrorMessage(d,h));l*=h,u.push(h)}}if(-1!==c){if(l<=0)throw new Error($b.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());var p=Math.trunc(i/l);if(l*p!==i)throw new Error($b.getSparseReshapeInputOutputMultipleErrorMessage(r,u));u[c]=p}if(Cl.sizeFromShape(u)!==i)throw new Error($b.getSparseReshapeInputOutputMismatchErrorMessage(r,u));var f=r.length,m=[];if(f>0){m[f-1]=1;for(var g=f-2;g>=0;--g)m[g]=m[g+1]*r[g+1]}var v=[];if(s>0){v[s-1]=1;for(var y=s-2;y>=0;--y)v[y]=v[y+1]*u[y+1]}for(var b=Cl.getArrayFromDType(n,o*s),x=0;x<o;++x){for(var A=0,w=0;w<f;++w)A+=e[x*f+w]*m[w];for(var k=0;k<s;++k)b[x*s+k]=Math.trunc(A/v[k]),A%=v[k]}return[b,[o,s],u]}function ND(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,u=[t[0],e.length/t[0]],l=u[1],c=s>0?a[s-1]+1:0;if(c<0)throw new Error($b.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());var d=t.slice();d[0]=c;var h=d.reduce((function(e,t){return e*t}),1),p=Cl.getArrayFromDType(n,h);if(0===s)return c>0&&p.fill(o),[p,d];if(c<=0)throw new Error($b.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());for(var f=0,m=1,g=0,v=a[f];;){var y=0;if(m<s){if(v===(y=a[m])){++m;continue}if(v>=y)throw new Error($b.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(v<0||v>=c)throw new Error($b.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(v,c));v>g&&p.fill(o,g*l,v*l);for(var b=f;b<m;++b){var x=r[b];if(x<0||x>=u[0])throw new Error($b.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(b,r[b],u[0]));for(var A=0;A<l;A++)p[v*l+A]+=e[x*l+A]}if(i)for(var w=0;w<l;w++)p[v*l+w]/=m-f;if(f=m,g=v+1,v=y,++m>s)break}return g<c&&p.fill(o,g*l,c*l),[p,d]}var _D=hF((function(e){return Math.sqrt(e)})),MD=pF(Ru,(function(e){return Math.sqrt(e)})),RD={kernelName:Ru,backendName:"cpu",kernelFunc:MD},OD=YP((function(e,t){var n=e-t;return n*n})),PD=aF(Vu,OD),FD={kernelName:Vu,backendName:"cpu",kernelFunc:PD};function DD(e,t,n,r){for(var a=eh(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),u=0;u<s.length;u++)s[u]=o[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat(ta(o)))}return a}var LD=function(){function e(t,n,r,a,i,o){Jr(this,e),this.separator=Cl.encodeString(t),this.nGramWidths=n,this.leftPad=Cl.encodeString(r),this.rightPad=Cl.encodeString(a),this.padWidth=i,this.preserveShort=o}return $r(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,i){for(var o=this,s=function(s){var u=o.getPadWidth(i),l=Math.max(0,u-s),c=Math.max(0,u-(a-(s+1))),d=i-(l+c),h=t+(l>0?0:s-u),p=0;p+=l*o.leftPad.length;for(var f=0;f<d;++f)p+=e[h+f].length;p+=c*o.rightPad.length,p+=(l+c+d-1)*o.separator.length,n[r+s]=new Uint8Array(p);for(var m=n[r+s],g=0,v=function(e){return e.forEach((function(e){return m[g++]=e}))},y=0;y<l;++y)v(o.leftPad),v(o.separator);for(var b=0;b<d-1;++b)v(e[h+b]),v(o.separator);if(d>0){v(e[h+d-1]);for(var x=0;x<c;++x)v(o.separator),v(o.rightPad)}else{for(var A=0;A<c-1;++A)v(o.rightPad),v(o.separator);v(o.rightPad)}},u=0;u<a;++u)s(u)}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var i=t[0];if(0!==i)throw new Error("First split value must be 0, got ".concat(i));for(var o=1;o<a;++o){var s=t[o]>=i;if(!(s=s&&t[o]<=r))throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(i,", ").concat(r,"]"));i=t[o]}if(i!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(i))}var u=a-1,l=Cl.getArrayFromDType("int32",a);if(0===r||0===a){for(var c=new Array(r),d=0;d<=u;++d)l[d]=0;return[c,l]}l[0]=0;for(var h=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),l[e]=l[e-1]+a},p=1;p<=u;++p)h(p);for(var f=new Array(l[u]),m=function(r){var a=t[r],i=l[r];if(n.nGramWidths.forEach((function(o){var s=t[r+1]-t[r],u=n.getNumNGrams(s,o);n.createNGrams(e,a,f,i,u,o),i+=u})),n.preserveShort&&i===l[r]){var o=t[r+1]-t[r];if(0===o)return"continue";var s=o+2*n.padWidth;n.createNGrams(e,a,f,i,1,s)}},g=0;g<u;++g)m(g);return[f,l]}}]),e}();function zD(e,t,n,r,a,i,o,s){return new LD(n,r,a,i,o,s).compute(e,t)}function BD(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){var o=e.subarray(a,i);(!n||0!==o.length)&&r.push(o),a=i+1}}else{for(var s=t[0],u=e.indexOf(s);-1!==u;){var l=e.subarray(0,u);(!n||0!==l.length)&&r.push(l),u=(e=e.subarray(u+1)).indexOf(s)}(!n||0!==e.length)&&r.push(e)}else for(var c=0;c<e.length;++c)r.push(e.subarray(c,c+1))}function WD(e,t,n){for(var r=e.length,a=[],i=0,o=0,s=new Array(r),u=0;u<r;++u){var l=a.length;BD(e[u],t,n,a);var c=a.length-l;s[u]=c,i+=c,o=Math.max(o,c)}for(var d=Cl.getArrayFromDType("int32",2*i),h=new Array(i),p=[r,o],f=0,m=0;m<r;++m)for(var g=0;g<s[m];++g)d[2*f]=m,d[2*f+1]=g,h[f]=a[f],++f;return[d,h,p]}function jD(e,t){for(var n=Cl.getArrayFromDType("int32",e.length),r=0;r<e.length;++r)n[r]=Cl.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}var VD=YP((function(e,t){return e-t})),HD=iF((function(e,t,n,r){return{real:e-n,imag:t-r}})),UD=aF(Yu,VD,HD),GD={kernelName:Yu,backendName:"cpu",kernelFunc:UD};function XD(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=eh(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=o[u]%e.shape[u];var l=e.locToIndex(s);a.values[i]=e.values[l]}return a}var qD=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function YD(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,i=t-n+1,o=Math.log(a),s=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*s*(a-s)/a)*Math.sign(i-a/2),l=Math.max(n,Math.floor(t-i*s/a+u)),c=Math.min(r,Math.floor(t+(a-i)*s/a+u));YD(e,t,l,c)}var d=e[t],h=n,p=r;for(Cl.swap(e,n,t),qD(e[r],d)>0&&Cl.swap(e,n,r);h<p;){for(Cl.swap(e,h,p),h++,p--;qD(e[h],d)<0;)h+=1;for(;qD(e[p],d)>0;)p-=1}0===qD(e[n],d)?Cl.swap(e,n,p):(p+=1,Cl.swap(e,p,r)),p<=t&&(n=p+1),t<=p&&(r=p-1)}}function KD(e,t,n,r,a){for(var i=t[t.length-1],o=e.length/i,s=i,u=Cl.getTypedArrayFromDType(n,o*r),l=Cl.getTypedArrayFromDType("int32",o*r),c=function(t){var n=t*s,i=e.subarray(n,n+s),o=new Array(i.length);i.forEach((function(e,t){return o[t]={value:e,index:t}})),r<o.length&&(YD(o,r),o=o.slice(0,r)),a&&o.sort(qD);for(var c=t*r,d=u.subarray(c,c+r),h=l.subarray(c,c+r),p=0;p<r;p++)d[p]=o[p].value,h[p]=o[p].index},d=0;d<o;d++)c(d);var h=t.slice();return h[h.length-1]=r,[eh(h,n,u),eh(h,"int32",l)]}function ZD(e,t,n,r){for(var a=Cl.parseAxisParam(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var s=a+1;s<n.length;s++)i[2]*=n[s];for(var u={},l=new Int32Array(n[a]),c=new ac(i,r,e),d=[],h=1===i[0]&&1===i[2],p=0;p<n[a];p++){var f=void 0;if(h)f=e[p].toString();else{for(var m=[],g=0;g<i[0];g++)for(var v=0;v<i[2];v++)m.push(c.get(g,p,v));f=m.join(",")}if(void 0!==u[f])l[p]=u[f];else{var y=Object.keys(u).length;u[f]=y,l[p]=y,d.push(p)}}var b=i.slice();b[1]=Object.keys(u).length;var x=new ac(b,r);d.forEach((function(e,t){for(var n=0;n<i[0];n++)for(var r=0;r<i[2];r++)x.set(c.get(n,e,r),n,t,r)}));var A=n.slice();return A[a]=b[1],{outputValues:x.values,outputShape:A,indices:l}}var JD="0.0.0";Zh("cpu",(function(){return new UP}),1);var QD=pF($o,(function(e){return e>=0?e:Math.exp(e)-1})),$D={kernelName:$o,backendName:"cpu",kernelFunc:QD};function eL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha;jP([a],"leakyRelu");for(var o=Cl.sizeFromShape(a.shape),s=n.data.get(a.dataId).values,u=Cl.getTypedArrayFromDType("float32",o),l=0;l<s.length;l++)u[l]=s[l]<0?i*s[l]:s[l];return n.makeTensorInfo(a.shape,"float32",u)}var tL={kernelName:ws,backendName:"cpu",kernelFunc:eL},nL=YP((function(e,t){return e<0?t*e:e}));function rL(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;jP([r,a],"prelu");var i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=u(nL(r.shape,a.shape,i,o,"float32"),2),l=s[0],c=s[1];return n.makeTensorInfo(c,"float32",l)}var aL={kernelName:su,backendName:"cpu",kernelFunc:rL},iL=pF(hu,(function(e){return Math.max(0,e)})),oL={kernelName:hu,backendName:"cpu",kernelFunc:iL},sL=pF(yu,(function(e){return Math.min(Math.max(0,e),6)})),uL={kernelName:yu,backendName:"cpu",kernelFunc:sL};function lL(e,t,n,r,a){if("linear"===n)return QP({inputs:{x:t},backend:e});if("relu"===n)return iL({inputs:{x:t},backend:e});if("elu"===n)return QD({inputs:{x:t},backend:e});if("relu6"===n)return sL({inputs:{x:t},backend:e});if("prelu"===n)return rL({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return eL({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return wD({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function cL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=Cl.sizeFromShape(a.shape),s=Cl.inferFromImplicitShape(i,o),u=Cl.sizeFromShape(s);Cl.assert(o===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old shape (").concat(a.shape,") has ").concat(o," elements. The new shape and old shape must have the same number of elements.")})),n.incRef(a.dataId);var l=n.data.get(a.dataId);if(null!=l.complexTensorInfos){var c=l.complexTensorInfos.real,d=l.complexTensorInfos.imag;c.shape=s,d.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var dL={kernelName:pu,backendName:"cpu",kernelFunc:cL};function hL(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;jP([a,i],"matMul");var l=a.shape.length,c=i.shape.length,d=o?a.shape[l-2]:a.shape[l-1],h=s?i.shape[c-1]:i.shape[c-2],p=o?a.shape[l-1]:a.shape[l-2],f=s?i.shape[c-2]:i.shape[c-1],m=a.shape.slice(0,-2),g=i.shape.slice(0,-2),v=Cl.sizeFromShape(m),y=Cl.sizeFromShape(g),b=ap.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([p,f]);Cl.assert(d===h,(function(){return"Error in matMul: inner shapes (".concat(d,") and (").concat(h,") of Tensors with shapes ").concat(a.shape," and ").concat(i.shape," and transposeA=").concat(o," and transposeB=").concat(s," must match.")}));for(var x=s?[y,f,h]:[y,h,f],A=cL({inputs:{x:a},backend:n,attrs:{shape:o?[v,d,p]:[v,p,d]}}),w=cL({inputs:{x:i},backend:n,attrs:{shape:x}}),k=o?A.shape[1]:A.shape[2],S=o?A.shape[2]:A.shape[1],C=s?w.shape[1]:w.shape[2],I=Math.max(v,y),E=n.data.get(A.dataId).values,T=n.data.get(w.dataId).values,N=Cl.computeStrides(A.shape),_=Cl.computeStrides(w.shape),M=u(o?[N[0],1,N[1]]:[N[0],N[1],1],3),R=M[0],O=M[1],P=M[2],F=u(s?[1,_[1],_[0]]:[_[1],1,_[0]],3),D=F[0],L=F[1],z=F[2],B=S*C,W=eh([I,S,C],A.dtype),j=W.values,V=n.blockSize,H=0;H<I;H++)for(var U=0;U<S;U+=V)for(var G=0;G<C;G+=V)for(var X=0;X<k;X+=V)for(var q=Math.min(U+V,S),Y=Math.min(G+V,C),K=Math.min(X+V,k),Z=U;Z<q;Z++)for(var J=G;J<Y;J++){for(var Q=0,$=X;$<K;$++){var ee=Math.min(H,v-1)*R,te=Math.min(H,y-1)*z;Q+=E[ee+Z*O+$*P]*T[$*D+J*L+te]}j[H*B+(Z*C+J)]+=Q}return n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(b,W.dtype,W.values)}var pL={kernelName:xo,backendName:"cpu",kernelFunc:hL};var fL={kernelName:ll,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,i=e.backend,o=e.attrs,s=a.a,u=a.b,l=a.bias,c=a.preluActivationWeights,d=o.transposeA,h=o.transposeB,p=o.activation,f=o.leakyreluAlpha,m=[];t=hL({inputs:{a:s,b:u},attrs:{transposeA:d,transposeB:h},backend:i}),l&&(n=uF({inputs:{a:t,b:l},backend:i}),m.push(t),t=n),p&&(r=lL(i,t,p,c,f),m.push(t),t=r);for(var g=0,v=m;g<v.length;g++){var y=v[g];i.disposeIntermediateTensorInfo(y)}return t}},mL=pF(no,(function(e){return Math.acos(e)})),gL={kernelName:no,backendName:"cpu",kernelFunc:mL},vL=pF(ro,(function(e){return Math.acosh(e)})),yL={kernelName:ro,backendName:"cpu",kernelFunc:vL};var bL={kernelName:io,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;jP(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),i=eh(r[0].shape,r[0].dtype),o=i.values,s=0;s<r.length;s++)for(var u=a[s],l=0;l<o.length;l++)o[l]+=u[l];return n.makeTensorInfo(i.shape,i.dtype,i.values)}};var xL={kernelName:oo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;jP(a,"all");var s=Cl.parseAxisParam(i,a.shape),l=s,c=$b.getAxesPermutation(l,a.shape.length),d=a;null!=c&&(d=hD({inputs:{x:a},backend:n,attrs:{perm:c}}),l=$b.getInnerMostAxes(l.length,a.shape.length)),$b.assertAxesAreInnerMostDims("all",l,d.shape.length);for(var h=u($b.computeOutAndReduceShapes(d.shape,l),2),p=h[0],f=h[1],m=Cl.sizeFromShape(f),g=Cl.makeZerosTypedArray(Cl.sizeFromShape(p),d.dtype),v=n.data.get(d.dataId).values,y=0;y<g.length;++y){for(var b=y*m,x=v[b],A=0;A<m;++A){var w=v[b+A];x=x&&w}g[y]=x}null!=c&&n.disposeIntermediateTensorInfo(d);var k=n.makeTensorInfo(p,d.dtype,g);if(o){var S=cL({inputs:{x:k},backend:n,attrs:{shape:$b.expandShapeToKeepDim(p,s)}});return n.disposeIntermediateTensorInfo(k),S}return k}};var AL={kernelName:so,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;jP(a,"any");var s=Cl.parseAxisParam(i,a.shape),l=s,c=$b.getAxesPermutation(l,a.shape.length),d=a;null!=c&&(d=hD({inputs:{x:a},backend:n,attrs:{perm:c}}),l=$b.getInnerMostAxes(l.length,a.shape.length)),$b.assertAxesAreInnerMostDims("any",l,d.shape.length);for(var h=u($b.computeOutAndReduceShapes(d.shape,l),2),p=h[0],f=h[1],m=Cl.sizeFromShape(f),g=Cl.makeZerosTypedArray(Cl.sizeFromShape(p),d.dtype),v=n.data.get(d.dataId).values,y=0;y<g.length;++y){for(var b=y*m,x=v[b],A=0;A<m;++A){var w=v[b+A];x=x||w}g[y]=x}null!=c&&n.disposeIntermediateTensorInfo(d);var k=n.makeTensorInfo(p,d.dtype,g);if(o){var S=cL({inputs:{x:k},backend:n,attrs:{shape:$b.expandShapeToKeepDim(p,s)}});return n.disposeIntermediateTensorInfo(k),S}return k}};var wL={kernelName:uo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;jP(a,"argMax");var o=Cl.parseAxisParam(i,a.shape),s=$b.getAxesPermutation(o,a.shape.length),l=a,c=[];null!=s&&(l=hD({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(l),o=$b.getInnerMostAxes(o.length,l.shape.length)),o=[o[0]],$b.assertAxesAreInnerMostDims("argMax",o,l.shape.length);for(var d=u($b.computeOutAndReduceShapes(l.shape,o),2),h=d[0],p=d[1],f=Cl.sizeFromShape(h),m=Cl.makeZerosTypedArray(f,"int32"),g=Cl.sizeFromShape(p),v=n.data.get(l.dataId).values,y=0;y<m.length;++y){for(var b=y*g,x=v[b],A=0,w=0;w<g;++w){var k=v[b+w];k>x&&(x=k,A=w)}m[y]=A}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(h,"int32",m)}};var kL={kernelName:lo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;jP(a,"argMin");var o=Cl.parseAxisParam(i,a.shape),s=$b.getAxesPermutation(o,a.shape.length),l=a,c=[];null!=s&&(l=hD({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(l),o=$b.getInnerMostAxes(o.length,l.shape.length)),o=[o[0]],$b.assertAxesAreInnerMostDims("argMin",o,l.shape.length);for(var d=u($b.computeOutAndReduceShapes(l.shape,o),2),h=d[0],p=d[1],f=Cl.sizeFromShape(h),m=Cl.makeZerosTypedArray(f,"int32"),g=Cl.sizeFromShape(p),v=n.data.get(l.dataId).values,y=0;y<m.length;++y){for(var b=y*g,x=v[b],A=0,w=0;w<g;++w){var k=v[b+w];k<x&&(x=k,A=w)}m[y]=A}return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(h,"int32",m)}},SL=pF(co,(function(e){return Math.asin(e)})),CL={kernelName:co,backendName:"cpu",kernelFunc:SL},IL=pF(ho,(function(e){return Math.asinh(e)})),EL={kernelName:ho,backendName:"cpu",kernelFunc:IL},TL=pF(po,(function(e){return Math.atan(e)})),NL={kernelName:po,backendName:"cpu",kernelFunc:TL},_L=YP((function(e,t){return Math.atan2(e,t)})),ML=aF(mo,_L),RL={kernelName:mo,backendName:"cpu",kernelFunc:ML},OL=pF(fo,(function(e){return Math.atanh(e)})),PL={kernelName:fo,backendName:"cpu",kernelFunc:OL};function FL(e,t,n,r,a,i){for(var o=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,l=a.dilationWidth,c=a.effectiveFilterHeight,d=a.effectiveFilterWidth,h=a.padInfo.top,p=a.padInfo.left,f="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=eh(a.outShape,n),g=m.values,v=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var A=x*v,w=x*r[0],k=0;k<a.inChannels;++k)for(var S=0;S<a.outHeight;++S)for(var C=S*o-h,I=Math.max(0,C),E=Math.min(a.inHeight,c+C),T=A+S*y,N=0;N<a.outWidth;++N){for(var _=N*s-p,M=Math.max(0,_),R=Math.min(a.inWidth,d+_),O=f,P=0,F=0,D=I;D<E;D+=u){for(var L=w+D*r[1],z=M;z<R;z+=l){var B=e[L+z*r[2]+k];"max"===i&&B>O?O=B:"avg"===i&&(P+=B,F++)}if(isNaN(O))break}g[T+N*b+k]="avg"===i?P/F:O}return m}function DL(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=eh(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.top,f=r.padInfo.left,m=eh(t,n,e),g=0;g<r.batchSize;++g)for(var v=0;v<r.inChannels;++v)for(var y=0;y<r.outHeight;++y){for(var b=y*s-p,x=b;x<0;)x+=l;for(var A=Math.min(r.inHeight,d+b),w=0;w<r.outWidth;++w){for(var k=w*u-f,S=k;S<0;)S+=c;for(var C=Math.min(r.inWidth,h+k),I=Number.NEGATIVE_INFINITY,E=-1,T=x;T<A;T+=l)for(var N=T-b,_=S;_<C;_+=c){var M=_-k,R=m.get(g,T,_,v);R>I&&(I=R,E=a?i?((g*r.inHeight+T)*r.inWidth+_)*r.inChannels+v:(T*r.inWidth+_)*r.inChannels+v:N*h+M)}o.set(E,g,y,w,v)}}return o}function LL(e,t,n,r,a,i){for(var o=a.strideDepth,s=a.strideHeight,u=a.strideWidth,l=a.dilationDepth,c=a.dilationHeight,d=a.dilationWidth,h=a.effectiveFilterDepth,p=a.effectiveFilterHeight,f=a.effectiveFilterWidth,m=a.padInfo.front,g=a.padInfo.top,v=a.padInfo.left,y="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=eh(a.outShape,n),x=b.values,A=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],w=a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[3]*a.outShape[4],S=a.outShape[4],C=0;C<a.batchSize;++C)for(var I=C*A,E=C*r[0],T=0;T<a.inChannels;++T)for(var N=0;N<a.outDepth;++N){for(var _=N*o-m,M=_;M<0;)M+=l;for(var R=Math.min(a.inDepth,h+_),O=I+N*w,P=0;P<a.outHeight;++P){for(var F=P*s-g,D=F;D<0;)D+=c;for(var L=Math.min(a.inHeight,p+F),z=O+P*k,B=0;B<a.outWidth;++B){for(var W=B*u-v,j=W;j<0;)j+=d;for(var V=Math.min(a.inWidth,f+W),H=z+B*S,U=y,G=0,X=0,q=M;q<R;q+=l){for(var Y=E+q*r[1],K=D;K<L;K+=c){for(var Z=Y+K*r[2],J=j;J<V;J+=d){var Q=e[Z+J*r[3]+T];if("max"===i&&Q>U?U=Q:"avg"===i&&(G+=Q,X++),isNaN(U))break}if(isNaN(U))break}if(isNaN(U))break}x[H+T]="avg"===i?G/X:U}}}return b}var zL={kernelName:go,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;jP(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Cl.assert($b.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(1,"'")}));var l,c=$b.computePool2DInfo(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&Cl.arraysEqual(c.inShape,c.outShape))l=QP({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,h=Cl.computeStrides(a.shape),p=FL(d,a.shape,a.dtype,h,c,"avg");l=n.makeTensorInfo(c.outShape,a.dtype,p.values)}return l}};var BL={kernelName:yo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat;jP(a,"avgPool3d");var c=$b.computePool3DInfo(a.shape,i,o,1,s,u,l),d=LL(n.data.get(a.dataId).values,a.shape,a.dtype,Cl.computeStrides(a.shape),c,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}};var WL={kernelName:bo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode;jP([a,i],"avgPool3DGrad");for(var c=$b.computePool3DInfo(i.shape,o,s,1,u,l),d=c.strideDepth,h=c.strideHeight,p=c.strideWidth,f=c.filterDepth,m=c.filterHeight,g=c.filterWidth,v=c.dilationDepth,y=c.dilationHeight,b=c.dilationWidth,x=c.effectiveFilterDepth,A=c.effectiveFilterHeight,w=c.effectiveFilterWidth,k=x-1-c.padInfo.front,S=w-1-c.padInfo.left,C=A-1-c.padInfo.top,I=eh(i.shape,"float32"),E=1/(f*m*g),T=n.bufferSync(a),N=0;N<c.batchSize;++N)for(var _=0;_<c.inChannels;++_)for(var M=0;M<c.inDepth;++M)for(var R=0;R<c.inHeight;++R)for(var O=0;O<c.inWidth;++O){for(var P=M-k,F=R-C,D=O-S,L=0,z=0;z<x;z+=v){var B=(P+z)/d;if(!(B<0||B>=c.outDepth||Math.floor(B)!==B))for(var W=0;W<A;W+=y){var j=(F+W)/h;if(!(j<0||j>=c.outHeight||Math.floor(j)!==j))for(var V=0;V<w;V+=b){var H=(D+V)/p;H<0||H>=c.outWidth||Math.floor(H)!==H||(L+=T.get(N,B,j,H,_))}}}I.set(L*E,N,M,R,O,_)}return n.makeTensorInfo(I.shape,I.dtype,I.values)}};var jL={kernelName:vo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;jP([a,i],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,l=r.pad,c=$b.computePool2DInfo(o.shape,s,u,1,l),d=c.strideHeight,h=c.strideWidth,p=c.filterHeight,f=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,v=c.effectiveFilterHeight,y=c.effectiveFilterWidth,b=y-1-c.padInfo.left,x=v-1-c.padInfo.top,A=eh(o.shape,"float32"),w=1/(p*f),k=n.data.get(a.dataId).values,S=eh(a.shape,"float32",k),C=0;C<c.batchSize;++C)for(var I=0;I<c.inChannels;++I)for(var E=0;E<c.inHeight;++E)for(var T=0;T<c.inWidth;++T){for(var N=E-x,_=T-b,M=0,R=0;R<v;R+=m){var O=(N+R)/d;if(!(O<0||O>=c.outHeight||Math.floor(O)!==O))for(var P=0;P<y;P+=g){var F=(_+P)/h;F<0||F>=c.outWidth||Math.floor(F)!==F||(M+=S.get(C,O,F,I))}}A.set(M*w,C,E,T,I)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}};var VL={kernelName:ds,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.scale,o=t.offset,s=t.mean,u=t.variance;Cl.assert(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Cl.assert(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Cl.assert(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),jP([a,s,u,i,o],"batchNorm");var l=r.varianceEpsilon;null==l&&(l=.001);for(var c=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,h=n.data.get(u.dataId).values,p=i?n.data.get(i.dataId).values:new Float32Array([1]),f=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=f.length,v=p.length,y=h.length,b=d.length,x=0,A=0,w=0,k=0,S=0;S<c.length;++S)m[S]=f[x++]+(c[S]-d[A++])*p[w++]/Math.sqrt(h[k++]+l),x>=g&&(x=0),A>=b&&(A=0),w>=v&&(w=0),k>=y&&(k=0);return n.makeTensorInfo(a.shape,a.dtype,m)}};var HL={kernelName:Ao,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;jP([a],"batchToSpaceND");var s=i.reduce((function(e,t){return e*t})),u=$b.getReshaped(a.shape,i,s),l=$b.getPermuted(u.length,i.length),c=$b.getReshapedPermuted(a.shape,i,s),d=$b.getSliceBeginCoords(o,i.length),h=$b.getSliceSize(c,o,i.length),p=cL({inputs:{x:a},backend:n,attrs:{shape:u}}),f=hD({inputs:{x:p},backend:n,attrs:{perm:l}}),m=cL({inputs:{x:f},backend:n,attrs:{shape:c}}),g=CD({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}};var UL={kernelName:wo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=cF(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}};var GL={kernelName:So,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=$b.assertAndGetBroadcastShape(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},XL=pF(Eo,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),qL={kernelName:Eo,backendName:"cpu",kernelFunc:XL},YL={kernelName:No,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(Cl.sizeFromShape(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,l=0;l<s.length;l++){var c=s[l],d=u[l];r[l]=Math.hypot(c,d)}return n.makeOutput(r,t.shape,"float32")}};function KL(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var ZL={kernelName:ys,backendName:"cpu",kernelFunc:KL};function JL(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,a=Cl.parseAxisParam(r,t[0].shape)[0],i=$b.computeOutShape(t.map((function(e){return e.shape})),a);if(0===Cl.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);var o=t.filter((function(e){return Cl.sizeFromShape(e.shape)>0}));if(1===o.length)return QP({inputs:{x:o[0]},backend:n});var s=o.map((function(e){return e.shape}));if($b.assertParamsConsistent(s,a),"complex64"===o[0].dtype){var u=o.map((function(e){return eF({inputs:{input:e},backend:n})})),l=o.map((function(e){return KL({inputs:{input:e},backend:n})})),c=JL({inputs:u,backend:n,attrs:{axis:a}}),d=JL({inputs:l,backend:n,attrs:{axis:a}}),h=KP({inputs:{real:c,imag:d},backend:n});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),h}var p=o.map((function(e){var t=Cl.sizeFromShape(e.shape.slice(a));return cL({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),f=p.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));i=$b.computeOutShape(p.map((function(e){return e.shape})),1);var m=1===p[0].shape[0],g=yF(f,i,t[0].dtype,m),v=$b.computeOutShape(o.map((function(e){return e.shape})),a),y=n.makeTensorInfo(v,t[0].dtype,g);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}var QL={kernelName:_o,backendName:"cpu",kernelFunc:JL};function $L(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dilations,c=r.dimRoundingMode;jP([a,i],"conv2d");for(var d=$b.convertConv2DDataFormat(u),h=$b.computeConv2DInfo(a.shape,i.shape,o,l,s,c,!1,d),p=h.filterHeight,f=h.filterWidth,m=h.dilationHeight,g=h.dilationWidth,v=h.padInfo.left,y=h.padInfo.top,b="channelsLast"===h.dataFormat,x=new ac(h.outShape,a.dtype),A=Cl.computeStrides(a.shape),w=Cl.computeStrides(i.shape),k=A[0],S=b?A[1]:A[2],C=b?A[2]:1,I=b?1:A[1],E=x.strides[0],T=b?x.strides[1]:x.strides[2],N=b?x.strides[2]:1,_=b?1:x.strides[1],M=n.data.get(a.dataId).values,R=n.data.get(i.dataId).values,O=x.values,P=0;P<h.batchSize;++P)for(var F=P*k,D=P*E,L=0;L<h.outHeight;++L)for(var z=D+L*T,B=L*h.strideHeight-y,W=0;W<p;++W){var j=B+W*m;if(!(j<0||j>=h.inHeight))for(var V=W*w[0],H=F+j*S,U=0;U<h.outWidth;++U)for(var G=z+U*N,X=U*h.strideWidth-v,q=0;q<f;++q){var Y=X+q*g;if(!(Y<0||Y>=h.inWidth))for(var K=H+Y*C,Z=V+q*w[1],J=0;J<h.inChannels;++J){for(var Q=M[K+J*I],$=0;$<h.outChannels;++$)O[G+$*_]+=Q*R[Z+$];Z+=h.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,O)}var ez={kernelName:Mo,backendName:"cpu",kernelFunc:$L};var tz={kernelName:Ro,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,c=r.filterShape;jP([a,i],"conv2dBackpropFilter");for(var d=$b.convertConv2DDataFormat(u),h=$b.computeConv2DInfo(a.shape,c,o,1,s,l,!1,d),p=h.strideHeight,f=h.strideWidth,m=h.filterHeight,g=h.filterWidth,v="channelsLast"===h.dataFormat,y=new ac(h.filterShape,"float32"),b=h.padInfo.left,x=h.padInfo.top,A=n.data.get(a.dataId).values,w=n.data.get(i.dataId).values,k=new ac(a.shape,a.dtype,A),S=new ac(i.shape,i.dtype,w),C=0;C<m;++C)for(var I=Math.max(0,Math.ceil((x-C)/p)),E=Math.min(h.outHeight,(h.inHeight+x-C)/p),T=0;T<g;++T)for(var N=Math.max(0,Math.ceil((b-T)/f)),_=Math.min(h.outWidth,(h.inWidth+b-T)/f),M=0;M<h.inChannels;++M)for(var R=0;R<h.outChannels;++R){for(var O=0,P=0;P<h.batchSize;++P)for(var F=I;F<E;++F)for(var D=C+F*p-x,L=N;L<_;++L){var z=T+L*f-b;O+=v?k.get(P,D,z,M)*S.get(P,F,L,R):k.get(P,M,D,z)*S.get(P,R,F,L)}y.set(O,C,T,M,R)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var nz={kernelName:Oo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,l=r.pad,c=r.dataFormat,d=r.dimRoundingMode;jP([a,i],"conv2dBackpropInput");var h=Cl.computeStrides(i.shape),p=Cl.computeStrides(a.shape),f=$b.convertConv2DDataFormat(c),m=$b.computeConv2DInfo(o,i.shape,s,1,l,d,!1,f),g=new ac(m.inShape,"float32"),v=g.values,y=n.data.get(a.dataId).values,b=n.data.get(i.dataId).values,x=u(h,3),A=x[0],w=x[1],k=x[2],S=m.batchSize,C=m.filterHeight,I=m.filterWidth,E=m.inChannels,T=m.inHeight,N=m.inWidth,_=m.outChannels,M=m.outHeight,R=m.outWidth,O=m.strideHeight,P=m.strideWidth;f=m.dataFormat;for(var F=C-1-m.padInfo.top,D=I-1-m.padInfo.left,L="channelsLast"===f,z=g.strides[0],B=L?g.strides[1]:g.strides[2],W=L?g.strides[2]:1,j=L?1:g.strides[1],V=p[0],H=L?p[1]:p[2],U=L?p[2]:1,G=L?1:p[1],X=0;X<S;++X)for(var q=0;q<E;++q)for(var Y=0;Y<T;++Y)for(var K=Y-F,Z=Math.max(0,Math.ceil(K/O)),J=Math.min(M,(C+K)/O),Q=0;Q<N;++Q){for(var $=Q-D,ee=Math.max(0,Math.ceil($/P)),te=Math.min(R,(I+$)/P),ne=0,re=Z;re<J;++re)for(var ae=re*O-K,ie=ee;ie<te;++ie)for(var oe=V*X+H*re+U*ie,se=A*(C-1-ae)+w*(I-1-(ie*P-$))+k*q,ue=0;ue<_;++ue){ne+=y[oe+G*ue]*b[se+ue]}v[z*X+B*Y+W*Q+j*q]=ne}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var rz={kernelName:Po,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations;jP([a,i],"conv3d");for(var l=$b.computeConv3DInfo(a.shape,i.shape,o,u,s),c=l.filterDepth,d=l.filterHeight,h=l.filterWidth,p=l.dilationDepth,f=l.dilationHeight,m=l.dilationWidth,g=l.padInfo,v=g.front,y=g.left,b=g.top,x=new ac(l.outShape,a.dtype),A=n.data.get(a.dataId).values,w=n.data.get(i.dataId).values,k=x.values,S=Cl.computeStrides(a.shape),C=Cl.computeStrides(i.shape),I=0;I<l.batchSize;++I)for(var E=I*S[0],T=I*x.strides[0],N=0;N<l.outDepth;++N)for(var _=T+N*x.strides[1],M=N*l.strideDepth-v,R=0;R<c;++R){var O=M+R*p;if(!(O<0||O>=l.inDepth))for(var P=R*C[0],F=E+O*S[1],D=0;D<l.outHeight;++D)for(var L=_+D*x.strides[2],z=D*l.strideHeight-b,B=0;B<d;++B){var W=z+B*f;if(!(W<0||W>=l.inHeight))for(var j=P+B*C[1],V=F+W*S[2],H=0;H<l.outWidth;++H)for(var U=L+H*l.outChannels,G=H*l.strideWidth-y,X=0;X<h;++X){var q=G+X*m;if(!(q<0||q>=l.inWidth))for(var Y=j+X*C[2],K=V+q*l.inChannels,Z=Y,J=0;J<l.inChannels;++J){for(var Q=A[K+J],$=0;$<l.outChannels;++$)k[U+$]+=Q*w[Z+$];Z+=l.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var az={kernelName:Fo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,l=r.filterShape;jP([a,i],"conv3dBackpropFilterV2");for(var c=Cl.computeStrides(a.shape),d=Cl.computeStrides(i.shape),h=$b.computeConv3DInfo(a.shape,l,o,1,s),p=h.strideDepth,f=h.strideHeight,m=h.strideWidth,g=h.filterDepth,v=h.filterHeight,y=h.filterWidth,b=new ac(h.filterShape,"float32"),x=b.values,A=u(b.strides,4),w=A[0],k=A[1],S=A[2],C=A[3],I=n.data.get(i.dataId).values,E=u(d,4),T=E[0],N=E[1],_=E[2],M=E[3],R=n.data.get(a.dataId).values,O=u(c,4),P=O[0],F=O[1],D=O[2],L=O[3],z=h.padInfo.front,B=h.padInfo.left,W=h.padInfo.top,j=0;j<g;++j)for(var V=Math.max(0,Math.ceil((z-j)/p)),H=Math.min(h.outDepth,(h.inDepth+z-j)/p),U=j*w,G=0;G<v;++G)for(var X=Math.max(0,Math.ceil((W-G)/f)),q=Math.min(h.outHeight,(h.inHeight+W-G)/f),Y=G*k+U,K=0;K<y;++K)for(var Z=Math.max(0,Math.ceil((B-K)/m)),J=Math.min(h.outWidth,(h.inWidth+B-K)/m),Q=K*S+Y,$=0;$<h.inChannels;++$)for(var ee=$*C+Q,te=0;te<h.outChannels;++te){for(var ne=0,re=0;re<h.batchSize;++re)for(var ae=re*P,ie=re*T,oe=V;oe<H;++oe)for(var se=(j+oe*p-z)*F+ae,ue=oe*N+ie,le=X;le<q;++le)for(var ce=(G+le*f-W)*D+se,de=le*_+ue,he=Z;he<J;++he){var pe=he*M+de;ne+=R[(K+he*m-B)*L+ce+$]*I[pe+te]}x[ee+te]=ne}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var iz={kernelName:Do,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,l=r.inputShape;jP([a],"conv3dBackpropInputV2");for(var c=Cl.computeStrides(a.shape),d=Cl.computeStrides(i.shape),h=$b.computeConv3DInfo(l,i.shape,s,1,o),p=new ac(h.inShape,"float32"),f=p.values,m=u(p.strides,4),g=m[0],v=m[1],y=m[2],b=m[3],x=n.data.get(a.dataId).values,A=u(c,4),w=A[0],k=A[1],S=A[2],C=A[3],I=n.data.get(i.dataId).values,E=u(d,4),T=E[0],N=E[1],_=E[2],M=E[3],R=h.batchSize,O=h.filterDepth,P=h.filterHeight,F=h.filterWidth,D=h.inChannels,L=h.inDepth,z=h.inHeight,B=h.inWidth,W=h.outChannels,j=h.outDepth,V=h.outHeight,H=h.outWidth,U=h.strideDepth,G=h.strideHeight,X=h.strideWidth,q=O-1-h.padInfo.front,Y=P-1-h.padInfo.top,K=F-1-h.padInfo.left,Z=0;Z<R;++Z)for(var J=0;J<D;++J)for(var Q=0;Q<L;++Q)for(var $=Q-q,ee=Math.max(0,Math.ceil($/U)),te=Math.min(j,(O+$)/U),ne=0;ne<z;++ne)for(var re=ne-Y,ae=Math.max(0,Math.ceil(re/G)),ie=Math.min(V,(P+re)/G),oe=0;oe<B;++oe){for(var se=oe-K,ue=Math.max(0,Math.ceil(se/X)),le=Math.min(H,(F+se)/X),ce=0,de=ee;de<te;++de)for(var he=de*U-$,pe=ae;pe<ie;++pe)for(var fe=pe*G-re,me=ue;me<le;++me)for(var ge=w*Z+k*de+S*pe+C*me,ve=T*(O-1-he)+N*(P-1-fe)+_*(F-1-(me*X-se))+M*J,ye=0;ye<W;++ye){ce+=x[ge+ye]*I[ve+ye]}f[g*Z+v*Q+y*ne+b*oe+J]=ce}return n.makeTensorInfo(p.shape,p.dtype,p.values)}},oz=pF(Lo,(function(e){return Math.cos(e)})),sz={kernelName:Lo,backendName:"cpu",kernelFunc:oz},uz=pF(zo,(function(e){return Math.cosh(e)})),lz={kernelName:zo,backendName:"cpu",kernelFunc:uz};var cz={kernelName:jo,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,l=r.method,c=r.extrapolationValue,d=u(a.shape,4),h=d[0],p=d[1],f=d[2],m=d[3],g=i.shape[0],v=u(s,2),y=v[0],b=v[1],x=eh([g,y,b,m],"float32"),A=n.data.get(i.dataId).values,w=n.data.get(o.dataId).values,k=n.data.get(a.dataId).values,S=Cl.computeStrides(a.shape),C=Cl.computeStrides(x.shape),I=0;I<g;I++){var E=4*I,T=A[E],N=A[E+1],_=A[E+2],M=A[E+3],R=w[I];if(!(R>=h))for(var O=y>1?(_-T)*(p-1)/(y-1):0,P=b>1?(M-N)*(f-1)/(b-1):0,F=0;F<y;F++){var D=y>1?T*(p-1)+F*O:.5*(T+_)*(p-1);if(D<0||D>p-1)for(var L=0;L<b;L++)for(var z=0;z<m;z++){var B=z+L*C[2]+F*C[1]+I*C[0];x.values[B]=c}else if("bilinear"===l)for(var W=Math.floor(D),j=Math.ceil(D),V=D-W,H=0;H<b;H++){var U=b>1?N*(f-1)+H*P:.5*(N+M)*(f-1);if(U<0||U>f-1)for(var G=0;G<m;G++){var X=G+H*C[2]+F*C[1]+I*C[0];x.values[X]=c}else for(var q=Math.floor(U),Y=Math.ceil(U),K=U-q,Z=0;Z<m;Z++){var J=Z+q*S[2]+W*S[1]+R*S[0],Q=k[J],$=k[J=Z+Y*S[2]+W*S[1]+R*S[0]],ee=k[J=Z+q*S[2]+j*S[1]+R*S[0]],te=Q+($-Q)*K,ne=ee+(k[J=Z+Y*S[2]+j*S[1]+R*S[0]]-ee)*K;J=Z+H*C[2]+F*C[1]+I*C[0],x.values[J]=te+(ne-te)*V}}else for(var re=0;re<b;++re){var ae=b>1?N*(f-1)+re*P:.5*(N+M)*(f-1);if(ae<0||ae>f-1)for(var ie=0;ie<m;ie++){var oe=ie+re*C[2]+F*C[1]+I*C[0];x.values[oe]=c}else for(var se=Math.round(ae),ue=Math.round(D),le=0;le<m;le++){var ce=le+se*S[2]+ue*S[1]+R*S[0],de=le+re*C[2]+F*C[1]+I*C[0];x.values[de]=k[ce]}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var dz={kernelName:Bo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;jP(a,"cumprod");var u=$b.getAxesPermutation([i],a.shape.length),l=a;null!=u&&(l=hD({inputs:{x:a},backend:n,attrs:{perm:u}}));var c=$b.getInnerMostAxes(1,a.shape.length)[0];if(c!==l.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most axis=".concat(l.shape.length-1," but got axis=").concat(c));for(var d=gc(l.dtype,"int32"),h=Cl.makeOnesTypedArray(Cl.sizeFromShape(l.shape),d),p=n.data.get(l.dataId).values,f=l.shape[l.shape.length-1],m=s?function(e,t){return e+f-t-1}:function(e,t){return e+t},g=0;g<p.length;g+=f)for(var v=0;v<f;v++){var y=m(g,v);if(0===v)h[y]=o?1:p[y];else{var b=m(g,v-1);h[y]=o?p[b]*h[b]:p[y]*h[b]}}var x=n.makeTensorInfo(l.shape,d,h);if(null!=u){var A=hD({inputs:{x:x},backend:n,attrs:{perm:$b.getUndoAxesPermutation(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(l),A}return x}};var hz={kernelName:Wo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;jP(a,"cumsum");var u=$b.getAxesPermutation([i],a.shape.length),l=a;null!=u&&(l=hD({inputs:{x:a},backend:n,attrs:{perm:u}}));var c=$b.getInnerMostAxes(1,a.shape.length)[0];if(c!==l.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most axis=".concat(l.shape.length-1," but got axis=").concat(c));for(var d=gc(l.dtype,"int32"),h=Cl.makeZerosTypedArray(Cl.sizeFromShape(l.shape),d),p=n.data.get(l.dataId).values,f=l.shape[l.shape.length-1],m=s?function(e,t){return e+f-t-1}:function(e,t){return e+t},g=0;g<p.length;g+=f)for(var v=0;v<f;v++){var y=m(g,v);if(0===v)h[y]=o?0:p[y];else{var b=m(g,v-1);h[y]=o?p[b]+h[b]:p[y]+h[b]}}var x=n.makeTensorInfo(l.shape,d,h);if(null!=u){var A=hD({inputs:{x:x},backend:n,attrs:{perm:$b.getUndoAxesPermutation(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(l),A}return x}};var pz={kernelName:Vo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=cF(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}if(2===a.shape.length){var l=dF(n.bufferSync(a),n.bufferSync(i),o,s);return n.makeTensorInfo(l.shape,i.dtype,l.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}};var fz={kernelName:Ho,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat;Cl.assert("NHWC"===o,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(o)}));for(var s=a.shape[0],u=a.shape[1],l=a.shape[2],c=a.shape[3],d=u*i,h=l*i,p=c/(i*i),f=n.data.get(a.dataId).values,m=new Float32Array(s*d*h*p),g=0,v=0;v<s;++v)for(var y=0;y<d;++y)for(var b=Math.floor(y/i),x=y%i,A=0;A<h;++A)for(var w=Math.floor(A/i),k=(x*i+A%i)*p,S=0;S<p;++S){var C=S+k+c*(w+l*(b+u*v));m[g++]=f[C]}return n.makeTensorInfo([s,d,h,p],a.dtype,m)}};function mz(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=r.dimRoundingMode;jP([a,i],"depthwiseConv2DNative");var c=Cl.computeStrides(a.shape),d=Cl.computeStrides(i.shape),h=u;null==h&&(h=[1,1]),Cl.assert($b.eitherStridesOrDilationsAreOne(o,h),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(h,"'")}));for(var p=$b.computeConv2DInfo(a.shape,i.shape,o,h,s,l,!0),f=p.filterHeight,m=p.filterWidth,g=p.dilationHeight,v=p.dilationWidth,y=p.padInfo,b=y.left,x=y.top,A=p.outChannels/p.inChannels,w=new ac(p.outShape,a.dtype),k=n.data.get(a.dataId).values,S=n.data.get(i.dataId).values,C=w.values,I=0;I<p.batchSize;++I)for(var E=I*c[0],T=I*w.strides[0],N=0;N<p.outHeight;++N)for(var _=T+N*w.strides[1],M=N*p.strideHeight-x,R=0;R<f;++R){var O=M+R*g;if(!(O<0||O>=p.inHeight))for(var P=R*d[0],F=E+O*c[1],D=0;D<p.outWidth;++D)for(var L=_+D*w.strides[2],z=D*p.strideWidth-b,B=0;B<m;++B){var W=z+B*v;if(!(W<0||W>=p.inWidth))for(var j=P+B*d[1],V=F+W*p.inChannels,H=L,U=j,G=0;G<p.inChannels;++G){for(var X=k[V+G],q=0;q<A;++q)C[H+q]+=X*S[U+q];H+=A,U+=A}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}var gz={kernelName:Uo,backendName:"cpu",kernelFunc:mz};var vz={kernelName:Go,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=r.filterShape;jP([a,i],"depthwiseConv2dNativeBackpropFilter");for(var d=$b.computeConv2DInfo(a.shape,c,o,s,u,l,!0),h=d.strideHeight,p=d.strideWidth,f=d.filterHeight,m=d.filterWidth,g=new ac(d.filterShape,"float32"),v=d.padInfo.left,y=d.padInfo.top,b=d.outChannels/d.inChannels,x=n.data.get(a.dataId).values,A=new ac(a.shape,a.dtype,x),w=n.data.get(i.dataId).values,k=new ac(i.shape,i.dtype,w),S=0;S<f;++S)for(var C=Math.max(0,Math.ceil((y-S)/h)),I=Math.min(d.outHeight,(d.inHeight+y-S)/h),E=0;E<m;++E)for(var T=Math.max(0,Math.ceil((v-E)/p)),N=Math.min(d.outWidth,(d.inWidth+v-E)/p),_=0;_<d.outChannels;++_){for(var M=Math.trunc(_/b),R=_%b,O=0,P=0;P<d.batchSize;++P)for(var F=C;F<I;++F)for(var D=S+F*h-y,L=T;L<N;++L){var z=E+L*p-v;O+=A.get(P,D,z,M)*k.get(P,F,L,_)}g.set(O,S,E,M,R)}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var yz={kernelName:Xo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,l=r.pad,c=r.dimRoundingMode,d=r.inputShape;jP([a,i],"depthwiseConv2DNativeBackpropInput");for(var h=Cl.computeStrides(a.shape),p=Cl.computeStrides(i.shape),f=$b.computeConv2DInfo(d,i.shape,o,s,l,c,!0),m=new ac(f.inShape,"float32"),g=m.values,v=u(m.strides,3),y=v[0],b=v[1],x=v[2],A=n.data.get(a.dataId).values,w=u(h,3),k=w[0],S=w[1],C=w[2],I=n.data.get(i.dataId).values,E=u(p,3),T=E[0],N=E[1],_=E[2],M=f.batchSize,R=f.filterHeight,O=f.filterWidth,P=f.inChannels,F=f.inHeight,D=f.inWidth,L=f.outChannels,z=f.outHeight,B=f.outWidth,W=f.strideHeight,j=f.strideWidth,V=R-1-f.padInfo.top,H=O-1-f.padInfo.left,U=L/P,G=0;G<M;++G)for(var X=0;X<P;++X)for(var q=0;q<F;++q)for(var Y=q-V,K=Math.max(0,Math.ceil(Y/W)),Z=Math.min(z,(R+Y)/W),J=0;J<D;++J){for(var Q=J-H,$=Math.max(0,Math.ceil(Q/j)),ee=Math.min(B,(O+Q)/j),te=0,ne=K;ne<Z;++ne)for(var re=ne*W-Y,ae=$;ae<ee;++ae)for(var ie=k*G+S*ne+C*ae,oe=T*(R-1-re)+N*(O-1-(ae*j-Q))+_*X,se=0;se<U;++se){te+=A[ie+(X*U+se)]*I[oe+se]}g[y*G+b*q+x*J+X]=te}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var bz={kernelName:qo,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=Cl.sizeFromShape(r.shape),i=n.data.get(r.dataId).values,o=eh([a,a],r.dtype),s=o.values,u=0;u<i.length;u++)s[u*a+u]=i[u];var l=[].concat(ta(r.shape),ta(r.shape));return n.makeTensorInfo(l,o.dtype,o.values)}},xz={kernelName:Yo,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=n,c=l.data.get(a.dataId).values,d=a.shape.length,h=l.data.get(i.dataId).values,p=i.shape.length,f=$b.computeDilation2DInfo(a.shape,i.shape,o,s,"NHWC",u),m=f.batchSize,g=f.inHeight,v=f.inWidth,y=f.inChannels,b=f.outHeight,x=f.outWidth,A=f.padInfo,w=f.strideHeight,k=f.strideWidth,S=f.filterHeight,C=f.filterWidth,I=f.dilationHeight,E=f.dilationWidth,T=f.outShape,N=Cl.sizeFromShape(T),_=T.length,M=Cl.getArrayFromDType(a.dtype,N),R=0;R<m;++R)for(var O=0;O<b;++O)for(var P=O*w-A.top,F=0;F<x;++F)for(var D=F*k-A.left,L=0;L<y;++L){for(var z=Number.MIN_SAFE_INTEGER,B=0;B<S;++B){var W=P+B*I;if(W>=0&&W<g)for(var j=0;j<C;++j){var V=D+j*E;if(V>=0&&V<v){var H=Cl.locToIndex([R,W,V,L],d,Cl.computeStrides(a.shape)),U=Cl.locToIndex([B,j,L],p,Cl.computeStrides(i.shape)),G=c[H]+h[U];G>z&&(z=G)}}}M[Cl.locToIndex([R,O,F,L],_,Cl.computeStrides(T))]=z}return{dataId:l.write(Cl.toTypedArray(M,a.dtype),T,a.dtype),shape:T,dtype:a.dtype}}},Az={kernelName:Zo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,l=r.dilations,c=n,d=Cl.toNestedArray(a.shape,c.data.get(a.dataId).values),h=Cl.toNestedArray(i.shape,c.data.get(i.dataId).values),p=$b.computeDilation2DInfo(a.shape,i.shape,s,u,"NHWC",l),f=p.batchSize,m=p.inHeight,g=p.inWidth,v=p.inChannels,y=p.outHeight,b=p.outWidth,x=p.padInfo,A=p.strideHeight,w=p.strideWidth,k=p.filterHeight,S=p.filterWidth,C=p.dilationHeight,I=p.dilationWidth,E=p.outShape;Cl.assert(o.rank===E.length,(function(){return"Error in ".concat(Zo,", dy must have the same rank as output ").concat(E.length,", but got ").concat(o.rank)}));for(var T=Cl.toNestedArray(E,c.data.get(o.dataId).values),N=Cl.makeZerosNestedTypedArray(i.shape,i.dtype),_=0;_<f;++_)for(var M=0;M<y;++M)for(var R=M*A-x.top,O=0;O<b;++O)for(var P=O*w-x.left,F=0;F<v;++F){for(var D=Number.MIN_SAFE_INTEGER,L=0,z=0,B=0;B<k;++B){var W=R+B*C;if(W>=0&&W<m)for(var j=0;j<S;++j){var V=P+j*I;if(V>=0&&V<g){var H=d[_][W][V][F]+h[B][j][F];H>D&&(D=H,L=B,z=j)}}}N[L][z][F]+=T[_][M][O][F]}return{dataId:c.write(Cl.toTypedArray(N,a.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},wz={kernelName:Ko,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,l=r.dilations,c=n,d=Cl.toNestedArray(a.shape,c.data.get(a.dataId).values),h=Cl.toNestedArray(i.shape,c.data.get(i.dataId).values),p=$b.computeDilation2DInfo(a.shape,i.shape,s,u,"NHWC",l),f=p.batchSize,m=p.inHeight,g=p.inWidth,v=p.inChannels,y=p.outHeight,b=p.outWidth,x=p.padInfo,A=p.strideHeight,w=p.strideWidth,k=p.filterHeight,S=p.filterWidth,C=p.dilationHeight,I=p.dilationWidth,E=p.outShape;Cl.assert(o.rank===E.length,(function(){return"Error in ".concat(Ko,", dy must have the same rank as output ").concat(E.length,", but got ").concat(o.rank)}));for(var T=Cl.toNestedArray(E,c.data.get(o.dataId).values),N=Cl.makeZerosNestedTypedArray(a.shape,a.dtype),_=0;_<f;++_)for(var M=0;M<y;++M)for(var R=M*A-x.top,O=0;O<b;++O)for(var P=O*w-x.left,F=0;F<v;++F){for(var D=Number.MIN_SAFE_INTEGER,L=R<0?0:R,z=P<0?0:P,B=0;B<k;++B){var W=R+B*C;if(W>=0&&W<m)for(var j=0;j<S;++j){var V=P+j*I;if(V>=0&&V<g){var H=d[_][W][V][F]+h[B][j][F];H>D&&(D=H,L=W,z=V)}}}N[_][L][z][F]+=T[_][M][O][F]}return{dataId:c.write(Cl.toTypedArray(N,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};function kz(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims;jP(i,"sum");var l=(t="bool"===i.dtype?nF({inputs:{x:i},backend:r,attrs:{dtype:"int32"}}):QP({inputs:{x:i},backend:r})).shape.length,c=Cl.parseAxisParam(o,t.shape),d=$b.getAxesPermutation(c,l),h=c,p=t;null!=d&&(p=hD({inputs:{x:t},backend:r,attrs:{perm:d}}),h=$b.getInnerMostAxes(h.length,l)),$b.assertAxesAreInnerMostDims("sum",h,p.shape.length);for(var f=u($b.computeOutAndReduceShapes(p.shape,h),2),m=f[0],g=f[1],v=JP(r,m,$b.upcastType(p.dtype,"int32")),y=Cl.sizeFromShape(g),b=r.data.get(v.dataId).values,x=r.data.get(p.dataId).values,A=0;A<b.length;++A){for(var w=A*y,k=0,S=0;S<y;++S)k+=x[w+S];b[A]=k}if(s){var C=v;v=cL({inputs:{x:v},backend:r,attrs:{shape:$b.expandShapeToKeepDim(v.shape,c)}}),r.disposeIntermediateTensorInfo(C)}return r.disposeIntermediateTensorInfo(t),null!=d&&r.disposeIntermediateTensorInfo(p),v}var Sz={kernelName:Ou,backendName:"cpu",kernelFunc:kz};var Cz={kernelName:Qo,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,a=t,i=$b.decodeEinsumEquation(r,a.length),o=i.allDims,s=i.summedDims,u=i.idDims;$b.checkEinsumDimSizes(o.length,u,a);for(var l=$b.getEinsumComputePath(s,u),c=l.path,d=l.steps,h=d.length,p=null,f=o.length,m=[],g=0;g<h;++g){var v,y=ea(d[g]);try{for(y.s();!(v=y.n()).done;){var b=v.value,x=$b.getEinsumPermutation(f,u[b]),A=x.permutationIndices,w=x.expandDims,k=void 0;$b.isIdentityPermutation(A)?k=a[b]:(k=hD({inputs:{x:a[b]},backend:n,attrs:{perm:A}}),m.push(k));for(var S=k.shape.slice(),C=0;C<w.length;++C)S.splice(w[C],0,1);Cl.arraysEqual(k.shape,S)||(k=cL({inputs:{x:k},backend:n,attrs:{shape:S}}),m.push(k)),null===p?p=k:(p=aD({inputs:{a:k,b:p},backend:n}),m.push(p))}}catch(N){y.e(N)}finally{y.f()}g<h-1&&(c[g]>=0&&(p=kz({inputs:{x:p},backend:n,attrs:{axis:c[g]-(o.length-f),keepDims:!1}}),m.push(p)),f--)}for(var I=0,E=m;I<E.length;I++){var T=E[I];T!==p&&n.disposeIntermediateTensorInfo(T)}return p}};var Iz={kernelName:es,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;jP([r,a],"eluGrad");for(var i=new Float32Array(Cl.sizeFromShape(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<o.length;++u){var l=o[u];i[u]=l>=1?s[u]:s[u]*(l+1)}return n.makeTensorInfo(a.shape,"float32",i)}},Ez=$b.ERF_P,Tz=$b.ERF_A1,Nz=$b.ERF_A2,_z=$b.ERF_A3,Mz=$b.ERF_A4,Rz=$b.ERF_A5,Oz=pF(ts,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+Ez*n);return t*(1-((((Rz*r+Mz)*r+_z)*r+Nz)*r+Tz)*r*Math.exp(-n*n))})),Pz={kernelName:ts,backendName:"cpu",kernelFunc:Oz};function Fz(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,i=r.dim,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(Cl.assert(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+i+1),s.splice(u,0,1),cL({inputs:{x:a},backend:n,attrs:{shape:s}})}var Dz={kernelName:as,backendName:"cpu",kernelFunc:Fz},Lz=YP((function(e,t){return e/t})),zz=aF(Jo,Lz),Bz={kernelName:Jo,backendName:"cpu",kernelFunc:zz};function Wz(e,t,n){for(var r=e.shape,a=r[0],i=r[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,u=o.complexTensorInfos.imag,l=[a,i],c=Cl.sizeFromShape(l),d=Cl.getTypedArrayFromDType("float32",c),h=Cl.getTypedArrayFromDType("float32",c),p=0;p<a;p++){for(var f=CD({inputs:{x:s},backend:n,attrs:{begin:[p,0],size:[1,i]}}),m=CD({inputs:{x:u},backend:n,attrs:{begin:[p,0],size:[1,i]}}),g=KP({inputs:{real:f,imag:m},backend:n}),v=jz(g,t,n),y=v.real,b=v.imag,x=$b.mergeRealAndImagArrays(y,b),A=0;A<i;A++){var w=$b.getComplexWithIndex(x,A);d[p*i+A]=w.real,h[p*i+A]=w.imag}n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g)}var k=n.makeTensorInfo(l,"float32",d),S=n.makeTensorInfo(l,"float32",h),C=KP({inputs:{real:k,imag:S},backend:n});return n.disposeIntermediateTensorInfo(k),n.disposeIntermediateTensorInfo(S),C}function jz(e,t,n){var r=Cl.sizeFromShape(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(function(e){return 0===(e&e-1)}(r)){var s=Vz(i,o,r,t,n),u=[e.shape[0],e.shape[1]];if(t){var l=n.makeTensorInfo(u,"float32",s.real),c=n.makeTensorInfo(u,"float32",s.imag),d=n.makeTensorInfo([],"float32",Cl.createScalarValue(r,"float32")),h=QP({inputs:{x:d},backend:n}),p=Bz.kernelFunc({inputs:{a:l,b:d},backend:n}),f=Bz.kernelFunc({inputs:{a:c,b:h},backend:n}),m=n.data.get(p.dataId).values,g=n.data.get(f.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),{real:m,imag:g}}return s}var v=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var u=$b.exponent(a*s,t,n),l=$b.getComplexWithIndex(e,s);i+=l.real*u.real-l.imag*u.imag,o+=l.real*u.imag+l.imag*u.real}n&&(i/=t,o/=t),$b.assignToTypedArray(r,i,o,a)}return r}($b.mergeRealAndImagArrays(i,o),r,t);return $b.splitRealAndImagArrays(v)}function Vz(e,t,n,r,a){if(1===n)return{real:e,imag:t};var i=$b.mergeRealAndImagArrays(e,t),o=n/2,s=$b.complexWithEvenIndex(i),u=s.real,l=s.imag,c=[u.length],d=a.makeTensorInfo(c,"float32",u),h=a.makeTensorInfo(c,"float32",l),p=KP({inputs:{real:d,imag:h},backend:a}),f=$b.complexWithOddIndex(i),m=f.real,g=f.imag,v=[m.length],y=a.makeTensorInfo(v,"float32",m),b=a.makeTensorInfo(v,"float32",g),x=KP({inputs:{real:y,imag:b},backend:a}),A=Vz(u,l,o,r,a),w=A.real,k=A.imag,S=[w.length],C=a.makeTensorInfo(S,"float32",w),I=a.makeTensorInfo(S,"float32",k),E=KP({inputs:{real:C,imag:I},backend:a}),T=Vz(m,g,o,r,a),N=T.real,_=T.imag,M=[N.length],R=a.makeTensorInfo(M,"float32",N),O=a.makeTensorInfo(M,"float32",_),P=KP({inputs:{real:R,imag:O},backend:a}),F=$b.exponents(n,r),D=[F.real.length],L=a.makeTensorInfo(D,"float32",F.real),z=a.makeTensorInfo(D,"float32",F.imag),B=KP({inputs:{real:L,imag:z},backend:a}),W=aD({inputs:{a:B,b:P},backend:a}),j=uF({inputs:{a:E,b:W},backend:a}),V=UD({inputs:{a:E,b:W},backend:a}),H=eF({inputs:{input:j},backend:a}),U=eF({inputs:{input:V},backend:a}),G=KL({inputs:{input:j},backend:a}),X=KL({inputs:{input:V},backend:a}),q=JL({inputs:[H,U],backend:a,attrs:{axis:0}}),Y=JL({inputs:[G,X],backend:a,attrs:{axis:0}}),K=a.data.get(q.dataId).values,Z=a.data.get(Y.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(C),a.disposeIntermediateTensorInfo(I),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(R),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(X),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(Y),{real:K,imag:Z}}var Hz={kernelName:os,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=Cl.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],o=cL({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=Wz(o,!1,n),u=cL({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}};function Uz(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype||Cl.inferDtype(a),o=Cl.getArrayFromDType(i,Cl.sizeFromShape(r));return function(e,t,n){e.fill(t)}(o,a),t.makeTensorInfo(r,i,o)}var Gz={kernelName:ss,backendName:"cpu",kernelFunc:Uz};var Xz={kernelName:us,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,i=Cl.getTypedArrayFromDType(r.dtype,Cl.sizeFromShape(r.shape)),o=u(r.shape,4),s=o[0],l=o[1],c=o[2],d=o[3],h=a.data.get(r.dataId).values,p=0;p<s;p++)for(var f=p*c*l*d,m=0;m<l;m++)for(var g=m*(c*d),v=0;v<c;v++)for(var y=v*d,b=0;b<d;b++){var x=Math.round(c-v-1),A=f+g+y+b,w=h[A];if(x>=0&&x<c)w=h[f+g+x*d+b];i[A]=w}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},qz=YP((function(e,t){return Math.floor(e/t)})),Yz=aF(cs,qz,null,"int32"),Kz={kernelName:cs,backendName:"cpu",kernelFunc:Yz};var Zz={kernelName:cl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dataFormat,d=r.dilations,h=r.dimRoundingMode,p=r.activation,f=r.leakyreluAlpha,m=$L({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:h}});if(o){var g=m;if("NCHW"===c&&1===o.shape.length&&1!==o.shape[0]){var v=cL({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=uF({inputs:{a:m,b:v},backend:n}),n.disposeIntermediateTensorInfo(v)}else m=uF({inputs:{a:m,b:o},backend:n});n.disposeIntermediateTensorInfo(g)}if(p){var y=m;if("NCHW"===c&&"prelu"===p&&1===s.shape.length&&1!==s.shape[0]){var b=cL({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=lL(n,m,p,b,f),n.disposeIntermediateTensorInfo(b)}else m=lL(n,m,p,s,f);n.disposeIntermediateTensorInfo(y)}return m}};var Jz={kernelName:dl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dataFormat,d=r.dilations,h=r.dimRoundingMode,p=r.activation,f=r.leakyreluAlpha,m=mz({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:d,dimRoundingMode:h}});if(o){var g=m;m=uF({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(g)}if(p){var v=m;m=lL(n,m,p,s,f),n.disposeIntermediateTensorInfo(v)}return m}};var Qz={kernelName:ps,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=Cl.sizeFromShape(r.shape),o=a.shape,s=o[o.length-1],l=u($b.prepareAndValidate(r,a),4),c=l[0],d=l[1],h=l[2],p=l[3];if(0===d)return n.makeTensorInfo(c,r.dtype,[]);var f=MF(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,d,s,h,p,r.shape,i);return n.makeTensorInfo(c,r.dtype,f.values)}};var $z={kernelName:hs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims;jP([a,i],"gatherV2");for(var u=Cl.parseAxisParam(o,a.shape)[0],l=n.data.get(i.dataId).values,c=a.shape[u],d=function(e){var t=l[e];Cl.assert(t<=c-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(c-1,"]")}))},h=0;h<l.length;++h)d(h);var p=s;null==s&&(p=0);var f=Cl.sizeFromShape(i.shape),m=$b.segment_util.collectGatherOpShapeInfo(a,i,u,p),g=cL({inputs:{x:a},backend:n,attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]}}),v=cL({inputs:{x:i},backend:n,attrs:{shape:[m.batchSize,f/m.batchSize]}}),y=[m.batchSize,m.outerSize,f/m.batchSize,m.sliceSize],b=n.bufferSync(v),x=RF(n.bufferSync(g),b,y);return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(v),n.makeTensorInfo(m.outputShape,x.dtype,x.values)}};var eB={kernelName:vs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=Cl.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],o=cL({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=Wz(o,!0,n),u=cL({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}},tB=pF(bs,(function(e){return Number.isFinite(e)?1:0}),"bool"),nB={kernelName:bs,backendName:"cpu",kernelFunc:tB},rB=pF(xs,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),aB={kernelName:xs,backendName:"cpu",kernelFunc:rB},iB=pF(As,(function(e){return Number.isNaN(e)?1:0}),"bool"),oB={kernelName:As,backendName:"cpu",kernelFunc:iB};var sB={kernelName:Cs,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=GF(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},uB=pF(Es,(function(e){return Math.log1p(e)})),lB={kernelName:Es,backendName:"cpu",kernelFunc:uB},cB=YP((function(e,t){return e&&t})),dB=aF(Ts,cB,null,"bool"),hB={kernelName:Ts,backendName:"cpu",kernelFunc:dB},pB=pF(Ns,(function(e){return e?0:1}),"bool"),fB={kernelName:Ns,backendName:"cpu",kernelFunc:pB},mB=YP((function(e,t){return e||t})),gB=aF(_s,mB,null,"bool"),vB={kernelName:_s,backendName:"cpu",kernelFunc:gB};var yB={kernelName:Ps,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta;jP(a,"LRN");var l=a.shape[3],c=l-1,d=n.data.get(a.dataId).values,h=Cl.sizeFromShape(a.shape),p=new Float32Array(h);function f(e){for(var t=e%l,n=e-t+Math.max(0,t-i),r=e-t+Math.min(t+i,c),a=0;n<=r;n++){var o=d[n];a+=o*o}return a}for(var m=0;m<h;m++){var g=f(m),v=d[m]*Math.pow(o+s*g,-u);p[m]=v}return n.makeTensorInfo(a.shape,a.dtype,p)}};var bB={kernelName:Fs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,l=r.alpha,c=r.beta;jP(o,"LRNGrad");for(var d=Cl.sizeFromShape(o.shape),h=o.shape[3],p=n.data.get(o.dataId).values,f=n.data.get(a.dataId).values,m=n.data.get(i.dataId).values,g=new Float32Array(d),v=d,y=0;y<v;y++){for(var b=y%h,x=y-b+Math.max(0,b-s),A=y-b+Math.min(h,b+s+1),w=0,k=x;k<A;k++)w+=Math.pow(f[k],2);w=l*w+u;for(var S=x;S<A;S++){var C=-2*l*c*f[S]*m[y]/w;y===S&&(C+=Math.pow(w,-c)),C*=p[y],g[S]+=C}}return n.makeTensorInfo(o.shape,a.dtype,g)}};function xB(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=n,l=a.shape,c=l.length,d=Cl.parseAxisParam(i,l),h=d,p=$b.getAxesPermutation(h,c),f=s.data.get(a.dataId).values;if(null!=p){for(var m=new Array(c),g=0;g<m.length;g++)m[g]=l[p[g]];f=dD(f,l,a.dtype,p,m),h=$b.getInnerMostAxes(h.length,c),l=m}jP(a,"max"),$b.assertAxesAreInnerMostDims("max",h,c);var v=u($b.computeOutAndReduceShapes(l,h),2),y=v[0],b=v[1],x=KF(f,Cl.sizeFromShape(b),y,a.dtype),A=s.write(x,y,a.dtype),w=y;return o&&(w=$b.expandShapeToKeepDim(y,d)),{dataId:A,shape:w,dtype:a.dtype}}var AB={kernelName:Ds,backendName:"cpu",kernelFunc:xB};var wB={kernelName:zs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;jP(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Cl.assert($b.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(1,"'")}));var l,c=$b.computePool2DInfo(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&Cl.arraysEqual(c.inShape,c.outShape))l=QP({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,h=Cl.computeStrides(a.shape),p=FL(d,a.shape,a.dtype,h,c,"max");l=n.makeTensorInfo(c.outShape,a.dtype,p.values)}return l}};var kB={kernelName:Ws,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat;jP(a,"maxPool3d");var c=$b.computePool3DInfo(a.shape,i,o,1,s,u,l),d=LL(n.data.get(a.dataId).values,a.shape,a.dtype,Cl.computeStrides(a.shape),c,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}};var SB={kernelName:js,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode;jP([a,i],"maxPool3DGrad");for(var c=$b.computePool3DInfo(i.shape,o,s,1,u,l),d=function(e,t){for(var n=eh(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left,m=0;m<t.batchSize;++m)for(var g=0;g<t.inChannels;++g)for(var v=0;v<t.outDepth;++v){for(var y=v*r-h,b=y;b<0;)b+=o;for(var x=Math.min(t.inDepth,l+y),A=0;A<t.outHeight;++A){for(var w=A*a-p,k=w;k<0;)k+=s;for(var S=Math.min(t.inHeight,c+w),C=0;C<t.outWidth;++C){for(var I=C*i-f,E=I;E<0;)E+=u;for(var T=Math.min(t.inWidth,d+I),N=Number.NEGATIVE_INFINITY,_=-1,M=b;M<x;M+=o)for(var R=M-y,O=k;O<S;O+=s)for(var P=O-w,F=E;F<T;F+=u){var D=F-I,L=e.get(m,M,O,F,g);L>=N&&(N=L,_=R*c*d+P*c+D)}n.set(_,m,v,A,C,g)}}}return n}(n.bufferSync(i),c),h=c.strideDepth,p=c.strideHeight,f=c.strideWidth,m=c.dilationDepth,g=c.dilationHeight,v=c.dilationWidth,y=c.effectiveFilterDepth,b=c.effectiveFilterHeight,x=c.effectiveFilterWidth,A=y-1-c.padInfo.front,w=x-1-c.padInfo.left,k=b-1-c.padInfo.top,S=eh(i.shape,"float32"),C=n.bufferSync(a),I=0;I<c.batchSize;++I)for(var E=0;E<c.inChannels;++E)for(var T=0;T<c.inDepth;++T)for(var N=0;N<c.inHeight;++N)for(var _=0;_<c.inWidth;++_){for(var M=T-A,R=N-k,O=_-w,P=0,F=0;F<y;F+=m){var D=(M+F)/h;if(!(D<0||D>=c.outDepth||Math.floor(D)!==D))for(var L=0;L<b;L+=g){var z=(R+L)/p;if(!(z<0||z>=c.outHeight||Math.floor(z)!==z))for(var B=0;B<x;B+=v){var W=(O+B)/f;if(!(W<0||W>=c.outWidth||Math.floor(W)!==W)){var j=y*b*x-1-d.get(I,D,z,W,E)===F*b*x+L*x+B?1:0;0!==j&&(P+=C.get(I,D,z,W,E)*j)}}}}S.set(P,I,T,N,_,E)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};var CB={kernelName:Bs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;jP([i,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,l=r.pad,c=r.dimRoundingMode,d=$b.computePool2DInfo(o.shape,s,u,1,l,c),h=n.data.get(o.dataId).values,p=eh(d.outShape,o.dtype,DL(h,o.shape,o.dtype,d).values),f=d.strideHeight,m=d.strideWidth,g=d.dilationHeight,v=d.dilationWidth,y=d.effectiveFilterHeight,b=d.effectiveFilterWidth,x=b-1-d.padInfo.left,A=y-1-d.padInfo.top,w=eh(o.shape,"float32"),k=n.data.get(a.dataId).values,S=eh(a.shape,"float32",k),C=0;C<d.batchSize;++C)for(var I=0;I<d.inChannels;++I)for(var E=0;E<d.inHeight;++E)for(var T=0;T<d.inWidth;++T){for(var N=E-A,_=T-x,M=0,R=0;R<y;R+=g){var O=(N+R)/f;if(!(O<0||O>=d.outHeight||Math.floor(O)!==O))for(var P=0;P<b;P+=v){var F=(_+P)/m;if(!(F<0||F>=d.outWidth||Math.floor(F)!==F)){var D=y*b-1-p.get(C,O,F,I)===R*b+P?1:0;0!==D&&(M+=S.get(C,O,F,I)*D)}}}w.set(M,C,E,T,I)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var IB={kernelName:Vs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,l=n.includeBatchInIndex,c=r;jP(a,"MaxPoolWithArgmax");var d=c.data.get(a.dataId).values,h=$b.computePool2DInfo(a.shape,i,o,[1,1],s),p=function(e,t,n,r,a){var i=FL(e,0,n,Cl.computeStrides(t),a,"max"),o=DL(e,t,n,a,!0,r);return[i.values,o.values]}(d,a.shape,a.dtype,l,h),f=u(p,2),m=f[0],g=f[1],v=c.write(m,h.outShape,a.dtype),y=c.write(g,h.outShape,a.dtype);return[{dataId:v,shape:h.outShape,dtype:a.dtype},{dataId:y,shape:h.outShape,dtype:"int32"}]}};var EB={kernelName:Hs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=Cl.parseAxisParam(i,a.shape),u=$b.computeOutAndReduceShapes(a.shape,s)[1],l=Cl.sizeFromShape(u),c=[],d=n.makeTensorInfo([],"float32",new Float32Array([l]));c.push(d);var h=nF({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});c.push(h);var p=zz({inputs:{a:h,b:d},backend:n});c.push(p);var f=kz({inputs:{x:p},backend:n,attrs:{axis:i,keepDims:o}});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),f}};var TB={kernelName:Us,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;jP(a,"min");var s=Cl.parseAxisParam(i,a.shape),l=s,c=$b.getAxesPermutation(l,a.shape.length),d=a;null!=c&&(d=hD({inputs:{x:a},backend:n,attrs:{perm:c}}),l=$b.getInnerMostAxes(l.length,a.shape.length)),$b.assertAxesAreInnerMostDims("min",l,d.shape.length);for(var h=u($b.computeOutAndReduceShapes(d.shape,l),2),p=h[0],f=h[1],m=Cl.sizeFromShape(f),g=Cl.makeZerosTypedArray(Cl.sizeFromShape(p),d.dtype),v=n.data.get(d.dataId).values,y=0;y<g.length;++y){for(var b=y*m,x=v[b],A=0;A<m;++A){var w=v[b+A];(Number.isNaN(w)||w<x)&&(x=w)}g[y]=x}null!=c&&n.disposeIntermediateTensorInfo(d);var k=n.makeTensorInfo(p,d.dtype,g);if(o){var S=cL({inputs:{x:k},backend:n,attrs:{shape:$b.expandShapeToKeepDim(p,s)}});return n.disposeIntermediateTensorInfo(k),S}return k}};var NB={kernelName:Xs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode;jP(a,"mirrorPad");for(var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),l=i.map((function(e,t){return e[0]+a.shape[t]})),c="reflect"===o?0:1,d=n.data.get(a.dataId).values,h=a.shape.length,p=Cl.computeStrides(a.shape),f=Cl.sizeFromShape(s),m=s.length,g=Cl.computeStrides(s),v=Cl.getTypedArrayFromDType(a.dtype,f),y=0;y<f;y++){for(var b=Cl.indexToLoc(y,m,g),x=0;x<m;x++)b[x]<u[x]?b[x]=2*u[x]-b[x]-c:b[x]>=l[x]&&(b[x]=2*(l[x]-1)-b[x]+c);b=b.map((function(e,t){return e-u[t]}));var A=Cl.locToIndex(b,h,p);v[y]=d[A]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}},_B=YP((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),MB=aF(qs,_B),RB={kernelName:qs,backendName:"cpu",kernelFunc:MB},OB=Ta(Wa());function PB(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=a.shape.length,s=i;if(-1===s&&(s=o-1),s!==o-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(o," and dim was ").concat(s));var u=Cl.parseAxisParam([s],a.shape),l=xB({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),c=$b.expandShapeToKeepDim(l.shape,u),d=cL({inputs:{x:l},backend:n,attrs:{shape:c}}),h=UD({inputs:{a:a,b:d},backend:n}),p=kF({inputs:{x:h},backend:n}),f=kz({inputs:{x:p},backend:n,attrs:{axis:u,keepDims:!1}}),m=cL({inputs:{x:f},backend:n,attrs:{shape:c}}),g=zz({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}var FB={kernelName:Du,backendName:"cpu",kernelFunc:PB};var DB={kernelName:Ys,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized;jP(a,"multinomial");for(var u=s?a:PB({inputs:{logits:a},backend:n,attrs:{dim:-1}}),l=u.shape[0],c=u.shape[1],d=n.data.get(u.dataId).values,h=[l,i],p=Cl.makeZerosTypedArray(Cl.sizeFromShape(h),"int32"),f=0;f<l;++f){var m=f*c,g=new Float32Array(c-1);g[0]=d[m];for(var v=1;v<g.length;++v)g[v]=g[v-1]+d[m+v];for(var y=OB.alea(o.toString()),b=f*i,x=0;x<i;++x){var A=y();p[b+x]=g.length;for(var w=0;w<g.length;w++)if(A<g[w]){p[b+x]=w;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(h,"int32",p)}},LB=$x.nonMaxSuppressionV3Impl;var zB={kernelName:Qs,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;jP(a,"NonMaxSuppression");var l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,d=LB(l,c,o,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},BB=$x.nonMaxSuppressionV4Impl;var WB={kernelName:$s,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.padToMaxOutputSize;jP(a,"NonMaxSuppressionPadded");var c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,h=BB(c,d,o,s,u,l),p=h.selectedIndices,f=h.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}},jB=$x.nonMaxSuppressionV5Impl;var VB={kernelName:eu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.softNmsSigma;jP(a,"NonMaxSuppressionWithScore");var c=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,h=jB(c,d,o,s,u,l),p=h.selectedIndices,f=h.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([f.length],"float32",new Float32Array(f))]}};var HB={kernelName:nu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue;jP(a,"oneHot");var u=Cl.sizeFromShape(a.shape),l=new Float32Array(u*i);l.fill(s);for(var c=n.data.get(a.dataId).values,d=0;d<u;++d)c[d]>=0&&c[d]<i&&(l[d*i+c[d]]=o);return n.makeTensorInfo([].concat(ta(a.shape),[i]),"int32",l)}};function UB(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=eF({inputs:{input:r},backend:n}),i=UB({inputs:{x:a},backend:n}),o=KL({inputs:{input:r},backend:n}),s=UB({inputs:{x:o},backend:n}),u=KP({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return Uz({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var GB={kernelName:il,backendName:"cpu",kernelFunc:UB};var XB={kernelName:tu,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=eF({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=KL({inputs:{input:a},backend:r}),u=UB({inputs:{x:s},backend:r}),l=KP({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),l}return Uz({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function qB(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Fz({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){Cl.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),Cl.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=Fz({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=JL({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}var YB={kernelName:ru,backendName:"cpu",kernelFunc:qB};var KB={kernelName:au,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;jP(a,"pad");var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),l=n.data.get(a.dataId).values,c=Cl.sizeFromShape(a.shape),d=a.shape.length,h=Cl.computeStrides(a.shape),p=Cl.sizeFromShape(s),f=s.length,m=Cl.computeStrides(s),g=Cl.getTypedArrayFromDType(a.dtype,p);0!==o&&g.fill(o);for(var v=0;v<c;v++){var y=Cl.indexToLoc(v,d,h).map((function(e,t){return e+u[t]}));g[Cl.locToIndex(y,f,m)]=l[v]}return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},ZB=YP((function(e,t){return Math.pow(e,t)})),JB=aF(ou,ZB),QB={kernelName:ou,backendName:"cpu",kernelFunc:JB};var $B={kernelName:lu,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=gD(r,a,n.step,i);return t.makeTensorInfo([o.length],i,o)}},eW=pF(du,(function(e){return 1/e})),tW={kernelName:du,backendName:"cpu",kernelFunc:eW};var nW={kernelName:gu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;jP(a,"resizeBilinear");for(var l=Cl.computeStrides(a.shape),c=u(s,2),d=c[0],h=c[1],p=u(a.shape,4),f=p[0],m=p[1],g=p[2],v=p[3],y=n.data.get(a.dataId).values,b=new Float32Array(Cl.sizeFromShape([f,d,h,v])),x=[i&&d>1?m-1:m,i&&h>1?g-1:g],A=[i&&d>1?d-1:d,i&&h>1?h-1:h],w=0,k=x[0]/A[0],S=x[1]/A[1],C=0;C<f;C++)for(var I=0;I<d;I++){var E=void 0;E=o?k*(I+.5)-.5:k*I;for(var T=Math.max(0,Math.floor(E)),N=E-T,_=Math.min(m-1,Math.ceil(E)),M=C*l[0]+T*l[1],R=C*l[0]+_*l[1],O=0;O<h;O++){var P=void 0;P=o?S*(O+.5)-.5:S*O;for(var F=Math.max(0,Math.floor(P)),D=P-F,L=Math.min(g-1,Math.ceil(P)),z=M+F*l[2],B=R+F*l[2],W=M+L*l[2],j=R+L*l[2],V=0;V<v;V++){var H=y[z+V],U=y[B+V],G=H+(y[W+V]-H)*D,X=G+(U+(y[j+V]-U)*D-G)*N;b[w++]=X}}}return n.makeTensorInfo([f,d,h,v],"float32",b)}};var rW={kernelName:vu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;jP([i,a],"resizeBilinearGrad");for(var s=Cl.computeStrides(a.shape),l=u(a.shape,4),c=l[0],d=l[1],h=l[2],p=l[3],f=u(i.shape,3),m=f[1],g=f[2],v=new Float32Array(c*d*h*p),y=[o&&m>1?d-1:d,o&&g>1?h-1:h],b=[o&&m>1?m-1:m,o&&g>1?g-1:g],x=y[0]/b[0],A=y[1]/b[1],w=n.data.get(i.dataId).values,k=0,S=0;S<c;S++)for(var C=S*s[0],I=0;I<m;I++)for(var E=I*x,T=Math.floor(E),N=Math.min(Math.ceil(E),d-1),_=C+T*s[1],M=C+N*s[1],R=E-T,O=1-R,P=0;P<g;P++)for(var F=P*A,D=Math.floor(F),L=Math.min(Math.ceil(F),h-1),z=F-D,B=1-z,W=_+D*s[2],j=_+L*s[2],V=M+D*s[2],H=M+L*s[2],U=O*B,G=O*z,X=R*B,q=R*z,Y=0;Y<p;Y++){var K=w[k++];v[W+Y]+=K*U,v[j+Y]+=K*G,v[V+Y]+=K*X,v[H+Y]+=K*q}return n.makeTensorInfo([c,h,d,p],"float32",v)}};var aW={kernelName:fu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;jP(a,"resizeNearestNeighbor");for(var l=Cl.computeStrides(a.shape),c=u(s,2),d=c[0],h=c[1],p=u(a.shape,4),f=p[0],m=p[1],g=p[2],v=p[3],y=n.data.get(a.dataId).values,b=new Float32Array(f*d*h*v),x=[i&&d>1?m-1:m,i&&h>1?g-1:g],A=[i&&d>1?d-1:d,i&&h>1?h-1:h],w=x[0]/A[0],k=x[1]/A[1],S=0,C=0;C<f;C++)for(var I=C*l[0],E=0;E<d;E++){var T=o?w*(E+.5):w*E,N=Math.min(m-1,i?Math.round(T):Math.floor(T));o&&(N=Math.max(0,N));for(var _=I+N*l[1],M=0;M<h;M++){var R=o?k*(M+.5):k*M,O=Math.min(g-1,i?Math.round(R):Math.floor(R));o&&(O=Math.max(0,O));for(var P=_+O*l[2],F=0;F<v;F++){var D=y[P+F];b[S++]=D}}}return n.makeTensorInfo([f,d,h,v],a.dtype,b)}};var iW={kernelName:mu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;jP([i,a],"resizeNearestNeighborGrad");for(var s=Cl.computeStrides(a.shape),l=Cl.computeStrides(i.shape),c=u(a.shape,4),d=c[0],h=c[1],p=c[2],f=c[3],m=u(i.shape,3),g=m[1],v=m[2],y=new Float32Array(d*h*p*f),b=n.data.get(i.dataId).values,x=[o&&g>1?h-1:h,o&&v>1?p-1:p],A=[o&&g>1?g-1:g,o&&v>1?v-1:v],w=x[0]/A[0],k=x[1]/A[1],S=1/w,C=1/k,I=2*Math.ceil(S)+2,E=2*Math.ceil(C)+2,T=0;T<d;T++)for(var N=T*s[0],_=0;_<h;_++)for(var M=N+_*s[1],R=Math.floor(_*S),O=Math.floor(R-I/2),P=0;P<p;P++)for(var F=M+P*s[2],D=Math.floor(P*C),L=Math.floor(D-E/2),z=0;z<f;z++){for(var B=0,W=0;W<I;W++){var j=W+O;if(!(j<0||j>=g)){var V=N+j*l[1],H=j*w;if(_===Math.min(h-1,o?Math.round(H):Math.floor(H)))for(var U=0;U<E;U++){var G=U+L;if(!(G<0||G>=v)){var X=V+G*l[2],q=G*k;P===Math.min(p-1,o?Math.round(q):Math.floor(q))&&(B+=b[X+z])}}}}y[F+z]=B}return n.makeTensorInfo(a.shape,a.dtype,y)}};var oW={kernelName:bu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims;jP(a,"reverse");var o=a.shape.length,s=Cl.parseAxisParam(i,a.shape);if(0===o)return QP({inputs:{x:a},backend:n});for(var u=new ac(a.shape,a.dtype),l=n.bufferSync(a),c=function(e){var t=u.indexToLoc(e),n=t.slice();s.forEach((function(e){return n[e]=a.shape[e]-1-n[e]})),u.set.apply(u,[l.get.apply(l,ta(n))].concat(ta(t)))},d=0;d<u.size;d++)c(d);return n.makeTensorInfo(u.shape,u.dtype,u.values)}},sW={kernelName:ul,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,l=r,c=Cl.getTypedArrayFromDType(a.dtype,Cl.sizeFromShape(a.shape)),d=u(a.shape,4),h=d[0],p=d[1],f=d[2],m=d[3],g=u($b.getImageCenter(s,p,f),2),v=g[0],y=g[1],b=Math.sin(i),x=Math.cos(i),A=l.data.get(a.dataId).values,w=0;w<h;w++)for(var k=w*f*p*m,S=0;S<p;S++)for(var C=S*(f*m),I=0;I<f;I++)for(var E=I*m,T=0;T<m;T++){var N=[h,S,I,T],_=N[2],M=N[1],R=(_-v)*x-(M-y)*b,O=(_-v)*b+(M-y)*x;R=Math.round(R+v),O=Math.round(O+y);var P=o;if("number"!=typeof o&&(P=3===T?255:o[T]),R>=0&&R<f&&O>=0&&O<p)P=A[k+O*(f*m)+R*m+T];c[k+C+E+T]=P}return{dataId:l.write(c,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},uW=pF(xu,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),lW={kernelName:xu,backendName:"cpu",kernelFunc:uW};var cW={kernelName:wu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=$b.calculateShapes(i,a,o),u=s.sliceRank,l=s.numUpdates,c=s.sliceSize,d=s.strides,h=s.outputSize,p=xD(n.bufferSync(a),n.bufferSync(i),o,h,c,l,u,d,0,!0);return n.makeTensorInfo(o,p.dtype,p.values)}};function dW(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<t?n=a+1:r=a;return r}function hW(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<=t?n=a+1:r=a;return r}var pW={kernelName:ku,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=function(e,t,n,r,a,i){for(var o=Cl.getArrayFromDType("int32",n*a),s=0;s<n;++s)for(var u=e.slice(s*r,(s+1)*r),l=s*a,c=0;c<a;++c)o[l+c]="left"===i?dW(u,t[c+l]):hW(u,t[c+l]);return o}(n.data.get(a.dataId).values,n.data.get(i.dataId).values,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",s)}};var fW={kernelName:Su,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e;jP([r,a,i],"select");for(var o=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=gc(a.dtype,i.dtype),d=Cl.makeZerosTypedArray(Cl.sizeFromShape(a.shape),c),h=0,p=0===o||o>1||1===a.shape.length?1:Cl.sizeFromShape(a.shape.slice(1)),f=0;f<s.length;f++)for(var m=0;m<p;m++)1===s[f]?d[h++]=u[f]:d[h++]=l[f];return n.makeTensorInfo(a.shape,c,d)}},mW=$b.SELU_SCALEALPHA,gW=$b.SELU_SCALE,vW=pF(Cu,(function(e){return e>=0?gW*e:mW*(Math.exp(e)-1)})),yW={kernelName:Cu,backendName:"cpu",kernelFunc:vW},bW=pF(Nu,(function(e){return e<0?-1:e>0?1:0})),xW={kernelName:Nu,backendName:"cpu",kernelFunc:bW},AW=pF(Eu,(function(e){return Math.sin(e)})),wW={kernelName:Eu,backendName:"cpu",kernelFunc:AW},kW=pF(Tu,(function(e){return Math.sinh(e)})),SW={kernelName:Tu,backendName:"cpu",kernelFunc:kW},CW=Math.log(1.1920928955078125e-7)+2,IW=pF(Mu,(function(e){var t=e>-CW,n=e<CW,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),EW={kernelName:Mu,backendName:"cpu",kernelFunc:IW};var TW={kernelName:Pu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;jP([a],"spaceToBatchND");var s=Cl.sizeFromShape(i),u=[[0,0]];u.push.apply(u,ta(o));for(var l=1+i.length;l<a.shape.length;++l)u.push([0,0]);var c=KB.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=$b.getReshaped(c.shape,i,s,!1),h=$b.getPermuted(d.length,i.length,!1),p=$b.getReshapedPermuted(c.shape,i,s,!1),f=cL({inputs:{x:c},backend:n,attrs:{shape:d}}),m=hD({inputs:{x:f},backend:n,attrs:{perm:h}}),g=cL({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}};var NW={kernelName:Lu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.data.get(r.dataId).values,l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values[0],h=u(ED(s,r.shape,r.dtype,l,a.dtype,c,d),5),p=h[0],f=h[1],m=h[2],g=h[3],v=h[4];return[n.makeTensorInfo(f,r.dtype,p),n.makeTensorInfo([f[0]],a.dtype,m),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map((function(e){return Number(e)})))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}};var _W={kernelName:zu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),c=u(TD(s,r.shape,r.dtype,o,l),3),d=c[0],h=c[1],p=c[2];return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([p.length],i.dtype,new Int32Array(p))]}};var MW={kernelName:Bu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=u(ND(o,r.shape,r.dtype,s,l,!0),2),d=c[0],h=c[1];return n.makeTensorInfo(h,r.dtype,d)}};var RW={kernelName:Wu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=u(ND(o,r.shape,r.dtype,s,l),2),d=c[0],h=c[1];return n.makeTensorInfo(h,r.dtype,d)}};var OW={kernelName:ju,backendName:"cpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.sparseIndices,o=n.sparseValues,s=n.defaultValue,u=a.outputShape,l=$b.calculateShapes(o,i,u),c=l.sliceRank,d=l.numUpdates,h=l.sliceSize,p=l.strides,f=l.outputSize,m=!1,g=r.bufferSync(i);switch(o.dtype){case"bool":t=xD(g,r.bufferSync(o),u,f,h,d,c,p,Boolean(r.data.get(s.dataId).values[0]),m);break;case"float32":t=xD(g,r.bufferSync(o),u,f,h,d,c,p,r.data.get(s.dataId).values[0],m);break;case"int32":t=xD(g,r.bufferSync(o),u,f,h,d,c,p,r.data.get(s.dataId).values[0],m);break;case"string":t=xD(g,r.bufferSync(o),u,f,h,d,c,p,Cl.decodeString(r.data.get(s.dataId).values[0]),m);break;default:throw new Error("Unsupported type ".concat(o.dtype))}return r.makeTensorInfo(u,t.dtype,t.values)}};var PW={kernelName:Fu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=r.axis,s=Cl.parseAxisParam(o,a.shape)[0],u=$b.prepareSplitSize(a,i,s),l=new Array(a.shape.length).fill(0),c=a.shape.slice();return u.map((function(e){var t=ta(c);t[s]=e;var r=CD({inputs:{x:a},backend:n,attrs:{begin:l,size:t}});return l[s]+=e,r}))}},FW={kernelName:Hu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;jP(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];o[s]=u*u}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},DW=pF(ol,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),LW={kernelName:ol,backendName:"cpu",kernelFunc:DW};var zW={kernelName:Uu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.end,s=r.strides,u=r.beginMask,l=r.endMask,c=r.ellipsisMask,d=r.newAxisMask,h=r.shrinkAxisMask;jP(a,"stridedSlice");var p,f=Sp.sliceInfo(a.shape,i,o,s,u,l,c,d,h),m=f.finalShapeSparse,g=f.finalShape,v=f.isIdentity,y=f.sliceDim0,b=f.isSimpleSlice,x=f.begin,A=f.end,w=f.strides;if(v)p=cL({inputs:{x:a},backend:n,attrs:{shape:g}});else if(y||b){Cl.assert(a.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)}));var k=Sp.computeOutShape(x,A,w),S=CD({inputs:{x:a},backend:n,attrs:{begin:x,size:k}});p=cL({inputs:{x:S},backend:n,attrs:{shape:g}}),n.disposeIntermediateTensorInfo(S)}else{var C=DD(m,n.bufferSync(a),w,x);p=n.makeTensorInfo(g,C.dtype,C.values)}return p}};var BW={kernelName:Gu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,l=r.padWidth,c=r.preserveShortSequences,d=t.data,h=t.dataSplits,p=u(zD(n.data.get(d.dataId).values,n.data.get(h.dataId).values,a,i,o,s,l,c),2),f=p[0],m=p[1];return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(h.shape,"int32",m)]}};var WW={kernelName:Xu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=u(WD(n.data.get(a.dataId).values,n.data.get(i.dataId).values[0],r),3),s=o[0],l=o[1],c=o[2],d=l.length;return[n.makeTensorInfo([d,2],"int32",s),n.makeTensorInfo([d],"string",l),n.makeTensorInfo([2],"int32",new Int32Array(c))]}};var jW={kernelName:qu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=jD(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",i)}},VW=pF(Ku,(function(e){return Math.tan(e)})),HW={kernelName:Ku,backendName:"cpu",kernelFunc:VW},UW=pF(Zu,(function(e){return Math.tanh(e)}));var GW={kernelName:Ju,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;jP(a,"tile");var o=XD(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}};var XW={kernelName:Qu,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted;jP(a,"topk");var s=u(KD(n.data.get(a.dataId).values,a.shape,a.dtype,i,o),2),l=s[0],c=s[1];return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}};var qW={kernelName:$u,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=t.transforms,o=n.interpolation,s=n.fillMode,l=n.fillValue,c=n.outputShape,d=u(a.shape,4),h=d[0],p=d[1],f=d[2],m=d[3],g=u(null!=c?c:[p,f],2),v=g[0],y=g[1],b=[h,v,y,m],x=Cl.computeStrides(a.shape),A=x[0],w=x[1],k=x[2],S=Cl.getTypedArrayFromDType(a.dtype,Cl.sizeFromShape(b));S.fill(l);for(var C=r.data.get(a.dataId).values,I=r.data.get(i.dataId).values,E=0;E<h;++E){for(var T=1===i.shape[0]?I:I.subarray(8*E,8*E+8),N=0;N<v;++N)for(var _=0;_<y;++_)for(var M=0;M<m;++M){var R=void 0,O=T[6]*_+T[7]*N+1;if(0!==O){var P=(T[0]*_+T[1]*N+T[2])/O,F=(T[3]*_+T[4]*N+T[5])/O,D=YW(P,f,s),L=YW(F,p,s);switch(o){case"nearest":R=ZW(C,p,f,A,w,k,E,L,D,M,l);break;case"bilinear":R=JW(C,p,f,A,w,k,E,L,D,M,l);break;default:throw new Error("Error in Transform: Expect 'nearest' or 'bilinear', but got ".concat(o))}S[E*A+N*w+_*k+M]=R}}return r.makeTensorInfo(b,a.dtype,S)}return{dataId:r.write(S,b,a.dtype),shape:a.shape,dtype:a.dtype}}};function YW(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return Cl.clamp(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return Cl.clamp(0,n,t-1)}(e,t);case"nearest":return function(e,t){return Cl.clamp(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function KW(e,t,n,r,a,i,o,s,u,l,c){return 0<=s&&s<t&&0<=u&&u<n?e[o*r+s*a+u*i+l]:c}function ZW(e,t,n,r,a,i,o,s,u,l,c){return KW(e,t,n,r,a,i,o,Math.round(s),Math.round(u),l,c)}function JW(e,t,n,r,a,i,o,s,u,l,c){var d=Math.floor(s),h=Math.floor(u),p=d+1,f=h+1;return(p-s)*((f-u)*KW(e,t,n,r,a,i,o,d,h,l,c)+(u-h)*KW(e,t,n,r,a,i,o,d,f,l,c))+(s-d)*((f-u)*KW(e,t,n,r,a,i,o,p,h,l,c)+(u-h)*KW(e,t,n,r,a,i,o,p,f,l,c))}var QW={kernelName:tl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;jP(i,"unique");var o=ZD(r.data.get(i.dataId).values,a,i.shape,i.dtype),s=o.outputValues,u=o.outputShape,l=o.indices;return[r.makeTensorInfo(u,i.dtype,s),r.makeTensorInfo([l.length],"int32",l)]}};var $W={kernelName:nl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,s=a.shape[i],u=new Array(o-1),l=0,c=0;c<o;c++)c!==i&&(u[l++]=a.shape[c]);var d=new Array(o).fill(0),h=a.shape.slice();h[i]=1;for(var p=new Array(s),f=0;f<p.length;f++){d[i]=f;var m=CD({inputs:{x:a},backend:n,attrs:{begin:d,size:h}});p[f]=cL({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return p}};for(var ej={kernelName:rl,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments;jP(a,"unsortedSegmentSum");for(var s=[],u=[],l=a.shape.length-i.shape.length,c=i,d=0;d<l;++d){var h=Fz({inputs:{input:c},backend:n,attrs:{dim:d+1}});c=h,u.push(h)}for(var p=0;p<o;++p){var f=Cl.createScalarValue(p,"int32"),m=n.makeTensorInfo([],"int32",f),g=xF({inputs:{a:m,b:c},backend:n}),v=nF({inputs:{x:g},backend:n,attrs:{dtype:"float32"}}),y=aD({inputs:{a:v,b:a},backend:n}),b=kz({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(m),u.push(g),u.push(v),u.push(y),u.push(b)}var x=qB({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},tj=0,nj=[fL,qP,gL,yL,lF,bL,xL,AL,wL,kL,CL,EL,NL,RL,PL,zL,BL,WL,jL,pL,VL,HL,UL,GL,rF,vF,qL,ZP,YL,QL,ez,tz,nz,rz,az,iz,sz,lz,cz,dz,hz,pz,fz,gz,vz,yz,bz,xz,Az,wz,Cz,$D,Iz,AF,Pz,SF,Dz,EF,Hz,Gz,Xz,_F,Kz,Zz,Jz,Qz,$z,FF,zF,$P,eB,ZL,nB,aB,oB,tL,jF,UF,sB,YF,lB,hB,fB,vB,yB,bB,AB,QF,wB,kB,SB,CB,IB,EB,TB,tD,NB,RB,DB,iD,sD,zB,WB,VB,cD,HB,XB,YB,KB,QB,aL,mD,$B,tF,Bz,tW,oL,uL,dL,nW,rW,aW,iW,oW,sW,lW,bD,cW,pW,fW,yW,kD,xW,wW,SW,ID,FB,EW,TW,NW,_W,MW,RW,OW,PW,RD,FW,FD,LW,zW,BW,WW,jW,GD,Sz,HW,{kernelName:Zu,backendName:"cpu",kernelFunc:UW},GW,XW,qW,pD,QW,$W,ej,GB];tj<nj.length;tj++){bl(nj[tj])}var rj={};Ea(rj,{assertNotComplex:function(){return sV},bindCanvasToFramebuffer:function(){return Lj},bindColorTextureToFramebuffer:function(){return zj},bindTextureToProgramUniformSampler:function(){return Dj},bindTextureUnit:function(){return Rj},bindVertexBufferToProgramAttribute:function(){return Mj},callAndCheck:function(){return hj},canBeRepresented:function(){return pj},createFragmentShader:function(){return vj},createFramebuffer:function(){return _j},createProgram:function(){return wj},createStaticIndexBuffer:function(){return Ij},createStaticVertexBuffer:function(){return Cj},createTexture:function(){return Tj},createVertexShader:function(){return gj},getBatchDim:function(){return Uj},getExtensionOrThrow:function(){return mj},getFramebufferErrorMessage:function(){return jj},getMaxTexturesInShader:function(){return $j},getNumChannels:function(){return Ej},getProgramUniformLocation:function(){return Fj},getProgramUniformLocationOrThrow:function(){return Pj},getRowsCols:function(){return Gj},getShapeAs3D:function(){return Xj},getTextureShapeFromLogicalShape:function(){return qj},getWebGLDisjointQueryTimerVersion:function(){return eV},getWebGLErrorMessage:function(){return fj},getWebGLMaxTextureSize:function(){return Zj},hasExtension:function(){return tV},isCapableOfRenderingToFloatTexture:function(){return rV},isDownloadFloatTextureEnabled:function(){return aV},isReshapeFree:function(){return Kj},isWebGLFenceEnabled:function(){return oV},isWebGLVersionEnabled:function(){return nV},linkProgram:function(){return kj},logShaderSourceAndInfoLog:function(){return Aj},resetMaxTextureSize:function(){return Jj},resetMaxTexturesInShader:function(){return Qj},unbindColorTextureFromFramebuffer:function(){return Bj},unbindTextureUnit:function(){return Oj},validateFramebuffer:function(){return Wj},validateProgram:function(){return Sj},validateTextureSize:function(){return Nj}});var aj={},ij={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function oj(e,t){aj[e]=t}function sj(e,t){if(!(e in aj)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;return n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete aj[e]}),!1),1===e?n.getContext("webgl",ij)||n.getContext("experimental-webgl",ij):n.getContext("webgl2",ij)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;aj[e]=n}var r=aj[e];return null==r||r.isContextLost()?(delete aj[e],sj(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),aj[e])}function uj(e,t){return[t,e]}function lj(e){var t=Cl.sizeFromShape(e),n=Math.ceil(t/4);return Cl.sizeToSquarishShape(n)}function cj(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function dj(e,t){var n,r,a,i,o,s,u,l,c,d,h=e;return 2===Zi().getNumber("WEBGL_VERSION")?(n=h.R32F,r=h.R16F,a=h.RGBA16F,i=h.RGBA32F,o=h.RED,u=4,l=1,c=h.HALF_FLOAT,d=h.FLOAT,s=h.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=h.RGBA,o=e.RGBA,u=4,l=4,c=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:l,textureTypeHalfFloat:c,textureTypeFloat:d}}function hj(e,t){var n=t();return Zi().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+fj(e,t))}(e),n}function pj(e){return!!(Zi().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function fj(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}function mj(e,t){return Vj(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function gj(e,t){var n=Vj(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(hj(e,(function(){return e.shaderSource(n,t)})),hj(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function vj(e,t){var n=Vj(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(hj(e,(function(){return e.shaderSource(n,t)})),hj(e,(function(){return e.compileShader(n)})),Zi().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw Aj(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var yj,bj,xj=/ERROR: [0-9]+:([0-9]+):/g;function Aj(e,t){var n=xj.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return Cl.rightPad((t+1).toString(),i)+e})),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var l=o.slice(0,r-1),c=o.slice(r-1,r),d=o.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(Cl.rightPad(c[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}function wj(e){return Vj(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function kj(e,t){if(hj(e,(function(){return e.linkProgram(t)})),!Zi().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function Sj(e,t){if(hj(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function Cj(e,t){var n=Vj(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return hj(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),hj(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}function Ij(e,t){var n=Vj(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return hj(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),hj(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}function Ej(){return 2===Zi().getNumber("WEBGL_VERSION")?1:4}function Tj(e){return Vj(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function Nj(e,t){var n=Zi().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+i+".")}}function _j(e){return Vj(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function Mj(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(hj(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),hj(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),hj(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function Rj(e,t,n){Hj(e,n),hj(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),hj(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}function Oj(e,t){Hj(e,t),hj(e,(function(){return e.activeTexture(e.TEXTURE0+t)})),hj(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function Pj(e,t,n){return Vj(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function Fj(e,t,n){return e.getUniformLocation(t,n)}function Dj(e,t,n,r){hj(e,(function(){return Rj(e,t,r)})),hj(e,(function(){return e.uniform1i(n,r)}))}function Lj(e){hj(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),hj(e,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),hj(e,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))}function zj(e,t,n){hj(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),hj(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function Bj(e,t){hj(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),hj(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Wj(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+jj(e,t))}function jj(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}function Vj(e,t,n){var r=hj(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function Hj(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function Uj(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Cl.sizeFromShape(e.slice(0,e.length-t))}function Gj(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Xj(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[Uj(e)].concat(ta(Gj(e)))),t}function qj(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Zi().getNumber("WEBGL_MAX_TEXTURE_SIZE");t&&(n*=2,e=e.map((function(t,n){return n>=e.length-2?Cl.nearestLargerEven(e[n]):e[n]})),1===e.length&&(e=[2,e[0]])),2!==e.length&&(e=Cl.squeezeShape(e).newShape);var r=Cl.sizeFromShape(e);if(e.length<=1&&r<=n)return[1,r];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var a,i=Uj(e),o=2,s=2;return e.length&&(o=(a=u(Gj(e),2))[0],s=a[1]),r=i*(o/2)*(s/2),Cl.sizeToSquarishShape(r).map((function(e){return 2*e}))}return Cl.sizeToSquarishShape(r)}function Yj(e){return e%2===0}function Kj(e,t){if(e=e.slice(-2),t=t.slice(-2),Cl.arraysEqual(e,t)||!e.length||!t.length||0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r||Yj(n)&&Yj(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Yj(e[0])&&Yj(t[0])}function Zj(e){if(null==yj){var t=sj(e);yj=t.getParameter(t.MAX_TEXTURE_SIZE)}return yj}function Jj(){yj=null}function Qj(){bj=null}function $j(e){if(null==bj){var t=sj(e);bj=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,bj)}function eV(e){if(0===e)return 0;var t=sj(e);return tV(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:tV(t,"EXT_disjoint_timer_query")?1:0}function tV(e,t){return null!=e.getExtension(t)}function nV(e){try{if(null!=sj(e))return!0}catch(qe){return console.log("Error when getting WebGL context: ",qe),!1}return!1}function rV(e){if(0===e)return!1;var t=sj(e);if(1===e){if(!tV(t,"OES_texture_float"))return!1}else if(!tV(t,"EXT_color_buffer_float"))return!1;return iV(t)}function aV(e){if(0===e)return!1;var t=sj(e);if(1!==e){if(tV(t,"EXT_color_buffer_float"))return iV(t);var n="EXT_color_buffer_half_float";if(tV(t,n)){var r=t.getExtension(n);return function(e,t){var n=dj(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,r)}return!1}return!(!tV(t,"OES_texture_float")||!tV(t,"WEBGL_color_buffer_float"))&&iV(t)}function iV(e){var t=dj(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function oV(e){return 2===e&&null!=sj(e).fenceSync}function sV(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Cl.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the WebGL backend.")}))}))}var uV=Zi();function lV(){var e,t,n,r,a,i,o,s,u,l;return 2===Zi().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}function cV(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=Cl.computeStrides(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function dV(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=Cl.computeStrides(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function hV(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}function pV(e){var t=Cl.computeStrides(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}uV.registerFlag("HAS_WEBGL",(function(){return uV.getNumber("WEBGL_VERSION")>0})),uV.registerFlag("WEBGL_VERSION",(function(){return nV(2)?2:nV(1)?1:0})),uV.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),uV.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===uV.get("WEBGL_VERSION")})),uV.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),uV.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),uV.registerFlag("WEBGL_PACK",(function(){return uV.getBool("HAS_WEBGL")})),uV.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return uV.getBool("WEBGL_PACK")})),uV.registerFlag("WEBGL_PACK_CLIP",(function(){return uV.getBool("WEBGL_PACK")})),uV.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return uV.getBool("WEBGL_PACK")})),uV.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return uV.getBool("WEBGL_PACK")})),uV.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return uV.getBool("WEBGL_PACK")})),uV.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return uV.getBool("WEBGL_PACK")})),uV.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return uV.getBool("WEBGL_PACK")})),uV.registerFlag("WEBGL_PACK_REDUCE",(function(){return uV.getBool("WEBGL_PACK")})),uV.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return uV.getBool("WEBGL_PACK")})),uV.registerFlag("WEBGL_CONV_IM2COL",(function(){return uV.getBool("WEBGL_PACK")})),uV.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return Zj(uV.getNumber("WEBGL_VERSION"))})),uV.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return $j(uV.getNumber("WEBGL_VERSION"))})),uV.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=uV.getNumber("WEBGL_VERSION");return 0===e?0:eV(e)})),uV.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return uV.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Rc.isMobile()})),uV.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return rV(uV.getNumber("WEBGL_VERSION"))})),uV.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!uV.getBool("WEBGL_FORCE_F16_TEXTURES")&&uV.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),uV.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return aV(uV.getNumber("WEBGL_VERSION"))})),uV.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return oV(uV.getNumber("WEBGL_VERSION"))})),uV.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return uV.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),uV.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ".concat(e,"."))})),uV.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return Rc.isMobile()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ".concat(e,"."))})),uV.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),uV.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),uV.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),uV.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128}));var fV="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",mV=$b.getBroadcastDims;function gV(e,t,n){var r=[];if(e.forEach((function(e){var t=Cl.sizeFromShape(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(FV(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,i,o=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?yV(e,r):vV(e,r);var i=e.shapeInfo.logicalShape,o=t.logicalShape;return i.length<=o.length&&(a+=n?RV(e,t):OV(e,t)),a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,l=lV(),c=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(l),d=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(bV,"\n    ").concat(xV,"\n    ").concat(AV,"\n  ")}(l);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===r[0]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    "):1===r[1]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    "):n?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Cl.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);return n?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),o=i,s="",u="b, r, c",l=2;l<e.length-1;l++)o*=e[e.length-l-1],s="\n      int b".concat(l," = index / ").concat(o,";\n      index -= b").concat(l," * ").concat(o,";\n    ")+s,u="b".concat(l,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(l)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){return 1===t[0]?n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    "):1===t[1]?n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    "):n?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){return Cl.arraysEqual(e,t)?n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    "):1===e[1]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    "):1===e[0]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    "):n?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(dV(["r","c","d"],e),"\n    return ivec3(r, c, d);\n  }\n");var r=cV(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(dV(["r","c","d","d2"],e),"\n      return ivec4(r, c, d, d2);\n    }\n  ");var r=cV(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=cV(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=cV(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(l)),n.packedInputs&&(d+=wV),[d,c,i,o,a,s,n.userCode].join("\n")}function vV(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return SV(e,t);case 1:return CV(e,t);case 2:return IV(e,t);case 3:return EV(e,t);case 4:return TV(e,t);case 5:return NV(e);case 6:return _V(e);default:throw new Error("".concat(n.length,"-D input sampling is not yet supported"))}}function yV(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=lV();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=lV();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");var o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],u=lV();if(null!=i&&Cl.arraysEqual(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],c=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(c,", ").concat(l[0],", ").concat(l[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var s=[1,2],u=DV(e,n.slice(1)),l=["b","row","col"];return"\n        ".concat(yV(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(LV(l,s),");\n        }\n      ")}var c=lV();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ");var d=o[0],h=o[1],p=Math.ceil(n[2]/2),f=p*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(d,", ").concat(h,", ").concat(f,", ").concat(p,", b, row, col);\n      return ").concat(c.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=lV();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var i=e.shapeInfo.logicalShape,o=i.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],l=u[0],c=u[1],d=Math.ceil(i[o-1]/2),h=d*Math.ceil(i[o-2]/2),p="int b, int row, int col",f="b * ".concat(h," + (row / 2) * ").concat(d," + (col / 2)"),m=2;m<o-1;m++)p="int b".concat(m,", ")+p,h*=i[o-m-1],f="b".concat(m," * ").concat(h," + ")+f;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(f,";\n      int texR = index / ").concat(c,";\n      int texC = index - texR * ").concat(c,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(c,", ").concat(l,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var bV="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",xV="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",AV="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",wV="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function kV(e){return"offset".concat(e)}function SV(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=u(e.shapeInfo.texShape,2),i=a[0],o=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=kV(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var l=u(e.shapeInfo.texShape,2),c=l[0],d=l[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(c,", ").concat(d,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function CV(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(MV(e),"\n      }\n    ");var a=e.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=kV(n);return 1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function IV(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&Cl.arraysEqual(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var o=i[0],s=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=Cl.squeezeShape(n),l=u.newShape,c=u.keptDims,d=l;if(d.length<n.length){o=DV(e,d),s=["row","col"];return"\n      ".concat(vV(o,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(LV(s,c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(MV(e),"\n      }\n    ");var h=i[0],p=i[1],f=kV(r);return 1===p?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(h,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===h?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(f,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(p,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(f,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(f,";\n    vec2 uv = uvFromFlat(").concat(h,", ").concat(p,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function EV(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],s=Cl.squeezeShape(n),u=s.newShape,l=s.keptDims,c=u;if(c.length<n.length){var d=DV(e,c);return"\n        ".concat(vV(d,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(LV(["row","col","depth"],l),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(MV(e),"\n      }\n    ");var h=e.shapeInfo.texShape,p=h[0],f=h[1],m=e.shapeInfo.flatOffset;if(f===i&&null==m)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(f,".0, ").concat(p,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(f===o&&null==m)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(f,".0, ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var g=kV(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(g,";\n        vec2 uv = uvFromFlat(").concat(p,", ").concat(f,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function TV(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,u=Cl.squeezeShape(n),l=u.newShape,c=u.keptDims;if(l.length<n.length){var d=DV(e,l);return"\n      ".concat(vV(d,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(LV(["row","col","depth","depth2"],c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(MV(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,f=p[0],m=p[1],g="int stride2 = ".concat(r,"Shape[3];"),v="int stride1 = ".concat(r,"Shape[2] * stride2;"),y="int stride0 = ".concat(r,"Shape[1] * stride1;");if(m===s&&null==h)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(g,"\n        ").concat(v,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(f,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(m===i&&null==h)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(f,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var b=kV(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(g,"\n      ").concat(v,"\n      ").concat(y,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(f,", ").concat(m,", index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function NV(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,u=Cl.squeezeShape(t),l=u.newShape,c=u.keptDims;if(l.length<t.length){var d=DV(e,l);return"\n      ".concat(vV(d),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(LV(["row","col","depth","depth2","depth3"],c),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(o,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(MV(e),"\n      }\n    ");var h=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,f=p[0],m=p[1];if(m===s&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===a&&null==h)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(f,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=kV(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(f,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function _V(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Cl.squeezeShape(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var s=DV(e,i);return"\n      ".concat(vV(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(LV(["row","col","depth","depth2","depth3","depth4"],o),");\n      }\n    ")}var u=t[5],l=t[4]*u,c=t[3]*l,d=t[2]*c,h=t[1]*d;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(h,", ").concat(d,", ").concat(c,", ").concat(l,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(u,", 1)));\n        ").concat(MV(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,m=f[0],g=f[1];if(g===h&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(d,", ").concat(c,", ").concat(l,", ").concat(u,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(g,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(g===u&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(g,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var v=kV(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(h," + col * ").concat(d," + depth * ").concat(c," +\n          depth2 * ").concat(l," + depth3 * ").concat(u," + depth4 + ").concat(v,";\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(g,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function MV(e){var t=e.name,n=Cl.sizeFromShape(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function RV(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=mV(e.shapeInfo.logicalShape,t.logicalShape),l=PV(s),c=s-o,d=["x","y","z","w","u","v"];n=0===o?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(d[e+c]," = 0;")})).join("\n");var h="";h=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(d[t+c])})).join(", ");var p="return outputValue;",f=1===Cl.sizeFromShape(e.shapeInfo.logicalShape),m=1===Cl.sizeFromShape(t.logicalShape);if(1!==o||f||m){if(f&&!m)p=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var g=o-2,v=o-1;u.indexOf(g)>-1&&u.indexOf(v)>-1?p="return vec4(outputValue.x);":u.indexOf(g)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(v)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(h,");\n      ").concat(p,"\n    }\n  ")}function OV(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&Cl.arraysEqual(o,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var l,c=PV(u),d=mV(e.shapeInfo.logicalShape,t.logicalShape),h=u-s,p=["x","y","z","w","u","v"];l=0===s?"":u<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords.".concat(p[e+h]," = 0;")})).join("\n");var f="";return f=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(p[t+h])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(l,"\n      return get").concat(r,"(").concat(f,");\n    }\n  ")}function PV(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function FV(e,t,n){var r=Cl.squeezeShape(t),a=r.newShape,i=r.keptDims,o=t.length,s=e&&3===o&&1===t[0],u=s?t.slice(1):a,l=!e&&o>1&&!Cl.arraysEqual(t,n)&&a.length<o||s;return{useSqueezeShape:l,uniformShape:l?u:t,keptDims:i}}function DV(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function LV(e,t){return t.map((function(t){return e[t]})).join(", ")}function zV(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=gV(a,o,t),u=vj(e.gl,s),l=e.createProgram(u);return Zi().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:i,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Wr({program:t,fragmentShader:u,source:s,webGLProgram:l,inShapeInfos:i,outShapeInfo:o},BV(e,t,l))}function BV(e,t,n){var r,a,i,o,s={},u={},l={},c=[],d=null;o=e.getUniformLocation(n,"NAN",!1),1===Zi().getNumber("WEBGL_VERSION")&&(d=e.getUniformLocation(n,"INFINITY",!1));for(var h=!1,p=0;p<t.variableNames.length;p++){var f=t.variableNames[p];s[f]=e.getUniformLocation(n,f,h),s["offset".concat(f)]=e.getUniformLocation(n,"offset".concat(f),h),t.enableShapeUniforms&&(u["".concat(f,"Shape")]=e.getUniformLocation(n,"".concat(f,"Shape"),h),l["".concat(f,"TexShape")]=e.getUniformLocation(n,"".concat(f,"TexShape"),h))}return t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",h),i=e.getUniformLocation(n,"outShapeStrides",h),a=e.getUniformLocation(n,"outTexShape",h)),t.customUniforms&&t.customUniforms.forEach((function(t,r){c[r]=e.getUniformLocation(n,t.name,h)})),{uniformLocations:s,customUniformLocations:c,infLoc:d,nanLoc:o,inShapesLocations:u,inTexShapesLocations:l,outShapeLocation:r,outShapeStridesLocation:i,outTexShapeLocation:a}}function WV(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but was executed with ").concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!Cl.arraysEqual(r,i))throw Error("Binary was compiled with different shapes than the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!Cl.arraysEqual(o,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape ".concat(o," and ").concat(s," must match"))}}))}function jV(e,t,n,r,a){t.program.enableShapeUniforms||(WV(t.inShapeInfos,n),WV([t.outShapeInfo],[r]));var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),1===Zi().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],i=t.uniformLocations[a],o=t.uniformLocations["offset".concat(a)],s=t.inShapesLocations["".concat(a,"Shape")],u=t.inTexShapesLocations["".concat(a,"TexShape")];if(s){var l=FV(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(l.length){case 1:e.gl.uniform1iv(s,new Int32Array(l));break;case 2:e.gl.uniform2iv(s,new Int32Array(l));break;case 3:e.gl.uniform3iv(s,new Int32Array(l));break;case 4:e.gl.uniform4iv(s,new Int32Array(l))}}if(u&&e.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=i){if(n.isUniform){if(Cl.sizeFromShape(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var c=n.uniformValues;c instanceof Float32Array||(c=new Float32Array(c)),e.gl.uniform1fv(i,c)}return}null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,i,r)}}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var u=Cl.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var i=t.customUniformLocations[r],o=a[r];if("float"===n.type)e.gl.uniform1fv(i,o);else if("vec2"===n.type)e.gl.uniform2fv(i,o);else if("vec3"===n.type)e.gl.uniform3fv(i,o);else if("vec4"===n.type)e.gl.uniform4fv(i,o);else if("int"===n.type)e.gl.uniform1iv(i,o);else if("ivec2"===n.type)e.gl.uniform2iv(i,o);else if("ivec3"===n.type)e.gl.uniform3iv(i,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(i,o)}})),e.executeProgram()}function VV(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var i=t.texData.texShape,o=FV(e.packedInputs,t.shape,i),s=o.useSqueezeShape,u=o.uniformShape,l=o.keptDims,c="",d="",h="";if(1===u.length&&e.packedInputs){var p=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];c="".concat(p[0]>1,"_").concat(p[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var f=Cl.computeStrides(u);h="".concat(f[0]===i[1],"_").concat(f[f.length-1]===i[1])}}else d="".concat(u[0]>1,"_").concat(u[1]>1);var m=t.shape.length,g=2===u.length&&Cl.arraysEqual(t.shape,i),v=1===Cl.sizeFromShape(t.shape),y=$b.getBroadcastDims(t.shape,n.shape),b=!e.packedInputs&&m===n.shape.length&&Cl.arraysEqual(i,n.texData.texShape),x=e.packedInputs||u.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(m,"_").concat(b,"_").concat(s?l:"","_").concat(u.length,"_").concat(v,"_").concat(y,"_").concat(g,"_").concat(c,"_").concat(d,"_").concat(h,"_").concat(x,"_").concat(a)}else{var A=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(A,"_").concat(a)}}));var a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a+"".concat(Zi().getNumber("WEBGL_VERSION"))}function HV(e){return Zi().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var UV=$r((function e(t){Jr(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=lV();this.outputShape=t,this.enableShapeUniforms=HV(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?dV(["r","c","d"],t):cV(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),GV=$r((function e(t){Jr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=lV();this.outputShape=t,this.enableShapeUniforms=HV(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?dV(["r","c","d"],t):cV(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),XV=$r((function e(t){Jr(this,e),this.variableNames=["A"],this.outTexUsage=3;var n=lV();this.outputShape=t,this.userCode="\n      ".concat(fV,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),qV=$r((function e(t){Jr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=3;var n=lV();this.outputShape=t,this.userCode="\n      ".concat(fV,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),YV=$r((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Jr(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=lV();this.outputShape=t,this.enableShapeUniforms=HV(this.outputShape.length);var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":pV(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ").concat(r.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")})),KV=$r((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Jr(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=lV();this.outputShape=t,this.enableShapeUniforms=HV(this.outputShape.length);var a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var s=0;s<=1;s++){var u=2*o+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":pV(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(i,";\n        }\n    ")})),ZV={};function JV(e){var t=lV();return gj(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function QV(e){return Cj(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function $V(e){return Ij(e,new Uint16Array([0,1,2,2,1,3]))}function eH(e,t,n,r,a,i){Nj(t,n);var o=Tj(e),s=e.TEXTURE_2D;return hj(e,(function(){return e.bindTexture(s,o)})),hj(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),hj(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),hj(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),hj(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===Zi().getNumber("WEBGL_VERSION")?hj(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})):hj(e,(function(){return e.texStorage2D(s,1,r,t,n)})),hj(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:o,texShape:[n,t]}}function tH(e){return e.internalFormatFloat}function nH(e,t,n,r){var a=u(uj(t,n),2);return eH(e,a[0],a[1],tH(r),r.textureFormatFloat,e.FLOAT)}function rH(e){return e.internalFormatHalfFloat}function aH(e,t,n,r){var a=u(uj(t,n),2);return eH(e,a[0],a[1],rH(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function iH(e){return e.downloadTextureFormat}function oH(e,t,n,r){var a=u(uj(t,n),2);return eH(e,a[0],a[1],iH(r),e.RGBA,e.UNSIGNED_BYTE)}function sH(e){return e.internalFormatPackedFloat}function uH(e,t,n,r){var a=u(cj(t,n),2);return eH(e,a[0],a[1],sH(r),e.RGBA,e.FLOAT)}function lH(e){return e.internalFormatPackedHalfFloat}function cH(e,t,n,r){var a=u(cj(t,n),2);return eH(e,a[0],a[1],lH(r),e.RGBA,r.textureTypeHalfFloat)}function dH(e,t,n){return hj(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),Mj(e,t,"clipSpacePos",n,3,20,0)&&Mj(e,t,"uv",n,2,20,12)}function hH(e,t,n,r,a,i){var o,s,u;hj(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,u=i.internalFormatPackedFloat),o.set(a),2===Zi().getNumber("WEBGL_VERSION")?hj(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,o)})):hj(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,o)})),hj(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function pH(e,t,n){hj(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===Zi().getNumber("WEBGL_VERSION")?hj(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):hj(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===Zi().getNumber("WEBGL_VERSION")?hj(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):hj(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),hj(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function fH(e,t,n,r){var a=e.createBuffer();hj(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return hj(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),hj(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),hj(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}function mH(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function gH(e,t,n,r){var a=u(uj(t,n),2),i=a[0],o=a[1],s=new Uint8Array(function(e,t){return e*t}(t*n,4));return hj(e,(function(){return e.readPixels(0,0,i,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)})),new Float32Array(s.buffer)}function vH(e,t,n,r,a,i,o,s){var l=e,c=new Float32Array(function(e,t){var n=u(cj(e,t),2);return n[0]*n[1]*4}(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function yH(e,t,n){var r=new Float32Array(t*n*4);return hj(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}Ea(ZV,{bindVertexProgramAttributeStreams:function(){return dH},createBufferFromOutputTexture:function(){return fH},createFloat16MatrixTexture:function(){return aH},createFloat16PackedMatrixTexture:function(){return cH},createFloat32MatrixTexture:function(){return nH},createIndexBuffer:function(){return $V},createPackedMatrixTexture:function(){return uH},createUnsignedBytesMatrixTexture:function(){return oH},createVertexBuffer:function(){return QV},createVertexShader:function(){return JV},downloadByteEncodedFloatMatrixFromOutputTexture:function(){return gH},downloadFloat32MatrixFromBuffer:function(){return mH},downloadMatrixFromPackedOutputTexture:function(){return yH},downloadPackedMatrixFromBuffer:function(){return vH},getInternalFormatForFloat16MatrixTexture:function(){return rH},getInternalFormatForFloat16PackedMatrixTexture:function(){return lH},getInternalFormatForFloat32MatrixTexture:function(){return tH},getInternalFormatForPackedMatrixTexture:function(){return sH},getInternalFormatForUnsignedBytesMatrixTexture:function(){return iH},uploadDenseMatrixToTexture:function(){return hH},uploadPixelDataToTexture:function(){return pH}});var bH=function(){function e(t){Jr(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=Zi().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,oj(n,t)):this.gl=sj(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===Zi().getNumber("WEBGL_VERSION")){var i="OES_texture_half_float";if(this.textureFloatExtension=mj(this.gl,"OES_texture_float"),tV(this.gl,i))this.textureHalfFloatExtension=mj(this.gl,i);else if(Zi().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),tV(this.gl,a))this.colorBufferHalfFloatExtension=mj(this.gl,a);else if(Zi().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",tV(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!tV(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=QV(this.gl),this.indexBuffer=$V(this.gl),this.framebuffer=_j(this.gl),this.textureConfig=dj(this.gl,this.textureHalfFloatExtension)}return $r(e,[{key:"debug",get:function(){return Zi().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;hj(t,(function(){return t.finish()})),hj(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),hj(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),hj(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),hj(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),hj(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),nH(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),aH(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),oH(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),pH(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),hH(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),cH(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),uH(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(Bj(this.gl,this.framebuffer),this.outputTexture=null),hj(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return gH(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return vH(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return mH(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=fH(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(Zi().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else Zi().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,Zi().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return yH(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=JV(n));var r=wj(n);return hj(n,(function(){return n.attachShader(r,t.vertexShader)})),hj(n,(function(){return n.attachShader(r,e)})),kj(n,r),this.debug&&Sj(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=dH(n,this.program,this.vertexBuffer)),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&hj(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&Sj(this.gl,this.program),hj(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?Pj(this.gl,e,t):Fj(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),hj(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Dj(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=u(cj(t,n),2),a=r[0],i=r[1];this.setOutputMatrixTextureDriver(e,a,i)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&Sj(this.gl,this.program),Wj(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),hj(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),hj(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=mj(this.gl,2===Zi().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===Zi().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==Zi().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=Mr(Nr().mark((function e(t){var n=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cl.repeatedTry((function(){return n.disposed||n.isQueryAvailable(t,Zi().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,Zi().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),!(this.itemsToPoll.length>1)&&Cl.repeatedTry((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),zj(this.gl,e,this.framebuffer),this.debug&&Wj(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(zj(this.gl,this.outputTexture,this.framebuffer),this.debug&&Wj(this.gl)):Bj(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;zj(r,e,this.framebuffer),this.debug&&Wj(r),this.outputTexture=e,hj(r,(function(){return r.viewport(0,0,t,n)})),hj(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),hj(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var xH=GP.addImpl,AH=GP.bincountImpl,wH=GP.bincountReduceImpl,kH=GP.ceilImpl,SH=GP.concatImpl,CH=GP.equalImpl,IH=GP.expImpl,EH=GP.expm1Impl,TH=GP.floorImpl,NH=GP.gatherNdImpl,_H=GP.gatherV2Impl,MH=GP.greaterImpl,RH=GP.greaterEqualImpl,OH=GP.lessImpl,PH=GP.lessEqualImpl,FH=GP.linSpaceImpl,DH=GP.logImpl,LH=GP.maxImpl,zH=GP.maximumImpl,BH=GP.minimumImpl,WH=GP.multiplyImpl,jH=GP.negImpl,VH=GP.notEqualImpl,HH=GP.prodImpl,UH=GP.rangeImpl,GH=GP.rsqrtImpl,XH=GP.scatterImpl,qH=GP.sigmoidImpl,YH=GP.simpleAbsImpl,KH=GP.sliceImpl,ZH=GP.sparseFillEmptyRowsImpl,JH=GP.sparseReshapeImpl,QH=GP.sparseSegmentReductionImpl,$H=GP.sqrtImpl,eU=GP.stridedSliceImpl,tU=GP.stringNGramsImpl,nU=GP.stringSplitImpl,rU=GP.stringToHashBucketFastImpl,aU=GP.subImpl,iU=GP.tileImpl,oU=GP.topKImpl,sU=GP.transposeImpl,uU=GP.uniqueImpl;function lU(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function cU(e,t){return 1===t?[e]:lU(e,t)}var dU=function(){function e(t){if(Jr(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=HV(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=cU("rc",this.rank),r=PV(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}return $r(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),i=2;i<this.rank;i++)a="".concat(e[e.length-1-i],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);return 1===this.rank?"getA(rc), (rc + 1 >= ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]," ? 0. : getA(rc + 1)), 0, 0"):"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),hU=$r((function e(t,n){Jr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=HV(this.outputShape.length);for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((function(e,t){return t})),a=hV(r,t);return a.map((function(t,r){var i="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),o=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(i,"; ").concat(o,";")})).join("")}(["r","c","d"],"inputShape"):cV(["r","c","d"],e),"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":pV(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var pU=function(){function e(t){Jr(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return $r(e,[{key:"acquireTexture",value:function(e,t,n){var r=mU(t,n),a=gU(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=fU(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return 3===r?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):4===r?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):1===r?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):0===r?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):2===r&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=mU(n,r),i=gU(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=fU(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=Zi().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var u=this.usedTextures[i],l=u.indexOf(e);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(l,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function fU(e,t,n,r,a){var i,o=function(e,t){switch(e){case 3:return sH(t);case 4:return lH(t);case 1:return tH(t);case 0:return rH(t);case 2:return iH(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=u(cj(e[0],e[1]),2);i=s[0]*s[1]}else{var l=u(uj(e[0],e[1]),2);i=l[0]*l[1]}var c=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*c}function mU(e,t){if(1===e)return 3;if(0===e||null==e)return function(e){return Zi().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?3:1:e?4:0}(t);if(3===e||2===e)return 2;throw new Error("Unknown logical texture type ".concat(e))}function gU(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var vU=$r((function e(t,n){Jr(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=HV(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),yU="if (isnan(x)) return x;",bU="return x;",xU="return abs(x);",AU="return (x >= 0.0) ? x : (exp(x) - 1.0);",wU=yU+"\n  return (x < 0.0) ? 0.0 : x;\n",kU=yU+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",SU="return x;",CU="return 1.0 / (1.0 + exp(-1.0 * x));",IU="return x;",EU="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",TU="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",NU="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",_U="return 1.0 / (1.0 + exp(-1.0 * x));",MU=$r((function e(t,n){Jr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=HV(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),RU=$r((function e(t){Jr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=HV(this.outputShape.length);var n=t.length,r=cU("rc",n),a=PV(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),OU=$x.whereImpl,PU={};var FU=Zi().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var DU=function(e){Kr(n,e);var t=Zr(n);function n(e){var r,a;if(Jr(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!Zi().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof bH)a=e;else{var i=sj(Zi().getNumber("WEBGL_VERSION"),e);a=new bH(i)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var o=sj(Zi().getNumber("WEBGL_VERSION"));a=new bH(o),r.binaryCache=function(e){return e in PU||(PU[e]={}),PU[e]}(Zi().getNumber("WEBGL_VERSION")),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new pU(r.gpgpu),r.numMBBeforeWarning=null==Zi().global.screen?1024:Zi().global.screen.height*Zi().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new Ka(jr(r),Lh()),Xr(r)}return $r(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"write",value:function(e,t,n){if((Zi().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Zi().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:1,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(Zi().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:1,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var u;u=s?new MU(o,SU):new vU(o,SU);var l=this.runWebGLProgram(u,[{dataId:e,shape:o,dtype:r}],r),c=this.readSync(l.dataId);return this.disposeIntermediateTensorInfo(l),c}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,h,p=null!=this.activeTimers;if(p&&(d=Cl.now()),"complex64"===r){var f=this.readSync(a.real.dataId),m=this.readSync(a.imag.dataId);h=$b.mergeRealAndImagArrays(f,m)}else h=this.getValuesFromTexture(e);return p&&(this.downloadWaitMs+=Cl.now()-d),this.convertAndCacheOnCPU(e,h)}},{key:"read",value:function(){var e=Mr(Nr().mark((function e(t){var n,r,a,i,o,s,u,l,c,d,h,p,f,m,g,v,y,b,x,A,w,k;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,i=r.shape,o=r.slice,s=r.dtype,u=r.complexTensorInfos,l=r.isPacked,null==o){e.next=8;break}return n=l?new MU(i,SU):new vU(i,SU),c=this.runWebGLProgram(n,[{dataId:t,shape:i,dtype:s}],s),d=this.read(c.dataId),e.abrupt("return",(this.disposeIntermediateTensorInfo(c),d));case 8:if(null==a){e.next=10;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 10:if(!Zi().getBool("DEBUG")||Zi().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==Zi().getNumber("WEBGL_VERSION")){e.next=12;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 12:if(h=null,"complex64"!==s&&Zi().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(t),m=this.texData.get(p.dataId),h=(f=this.gpgpu).createBufferFromTexture.apply(f,[m.texture.texture].concat(ta(lj(i))))),this.pendingRead.set(t,[]),e.t0="complex64"!==s,!e.t0){e.next=19;break}return e.next=19,this.gpgpu.createAndWaitForFence();case 19:if("complex64"!==s){e.next=28;break}return e.next=22,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 22:v=e.sent,y=v[0],b=v[1],g=$b.mergeRealAndImagArrays(y,b),e.next=29;break;case 28:null==h?g=this.getValuesFromTexture(t):(x=Cl.sizeFromShape(i),g=this.gpgpu.downloadFloat32MatrixFromBuffer(h,x));case 29:return null!=p&&this.disposeIntermediateTensorInfo(p),null!=h&&hj(A=this.gpgpu.gl,(function(){return A.deleteBuffer(h)})),w=this.convertAndCacheOnCPU(t,g),k=this.pendingRead.get(t),e.abrupt("return",(this.pendingRead.delete(t),k.forEach((function(e){return e(w)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&Lh().removeDataId(t,this),this.pendingDeletes--),w));case 32:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.isPacked,u=n.texture;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var l;l=s?new MU(a,SU):new vU(a,SU);var c=this.runWebGLProgram(l,[{dataId:e,shape:a,dtype:o}],o),d=this.readToGPU(c,t);return this.disposeIntermediateTensorInfo(c),d}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var h=this.decode(e,t.customTexShape),p=Lh().makeTensorFromTensorInfo(h),f=this.texData.get(h.dataId);return Wr({tensorRef:p},f.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return Cl.decodeString(e)}));return eh(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return eh(e.shape,e.dtype,t)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!pj(n))throw Zi().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value ".concat(n," cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'")):Error("The value ".concat(n," cannot be represented on this device."))}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,i=Cl.sizeFromShape(n);if(Zi().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,s=this.decode(e),u=this.texData.get(s.dataId),l=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[u.texture.texture].concat(ta(lj(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(s),l}var c=Zi().getBool("WEBGL_PACK")&&!0===a,d=c?Xj(n):n,h=c?new qV(d):new XV(d),p=this.runWebGLProgram(h,[{shape:d,dtype:r,dataId:e}],"float32"),f=this.texData.get(p.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(f.texture.texture,f.texShape[0],f.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(p),m}},{key:"timerAvailable",value:function(){return Zi().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var i=Cl.flatten(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=Cl.flatten(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return Mr(Nr().mark((function e(){var n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Zi().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=7;break}return e.next=3,Promise.all(i);case 3:n=e.sent,s.kernelMs=Cl.sum(n),s.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=8;break;case 7:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 8:return e.abrupt("return",(t.uploadWaitMs=0,t.downloadWaitMs=0,s));case 9:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return Zi().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Cl.now(),endMs:null}}},{key:"endTimer",value:function(e){return Zi().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Cl.now(),e)}},{key:"getQueryTime",value:function(){var e=Mr(Nr().mark((function e(t){var n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Zi().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:FU;return Zi().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&Cl.sizeFromShape(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){$b.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return OU(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new MU(e.shape,t),a=this.compileAndRun(r,[e],n);return Lh().makeTensorFromTensorInfo(a)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=YH(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Zi().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,xU,e.dtype);var n=new vU(e.shape,xU),r=this.compileAndRun(n,[e]);return Lh().makeTensorFromTensorInfo(r)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&Cl.isString(n[0])){var a=n.map((function(e){return Cl.encodeString(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){return Lh().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}},{key:"unpackTensor",value:function(e){var t=new RU(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new dU(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[Uj(e.shape)].concat(ta(Gj(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[Uj(t)].concat(ta(Gj(t))),i=new hU(a,n),o=[n],s=this.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype;if(null!=t){var o=Cl.sizeFromShape(a),s=t[0]*t[1]*4;Cl.assert(o<=s,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}))}var u,l=Xj(a);u=r?new GV(l):new UV(l);var c=[null!=t?t:lj(l)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(u,[{shape:l,dtype:i,dataId:e}],i,c,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),0===e.outPackingScheme){var l=null!=o?o:lj(e.outputShape);u.texShape=l.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===Cl.sizeFromShape(s.shape))return u.values=Cl.getTypedArrayFromDType(s.dtype,0),s;var c=[],d=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Cl.sizeFromShape(t.shape)<=Zi().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!=!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),c.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!Kj(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),c.push(t),n=a.texData.get(t.dataId),r.shape=i}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var h,p={shape:s.shape,texData:u,isUniform:!1},f=VV(e,d,p),m=this.getAndSaveBinary(f,(function(){return zV(a.gpgpu,e,d,p)})),g=null!=this.activeTimers;g&&(h=this.startTimer()),Zi().get("ENGINE_COMPILE_ONLY")||jV(this.gpgpu,m,d,p,r),c.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),g&&(h=this.endTimer(h),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(h)}));var v=Zi().get("WEBGL_FLUSH_THRESHOLD");if(v>0){var y=Cl.now();y-this.lastGlFlushTime>v&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!Zi().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===i){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,r,a)}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;this.disposed||(Zi().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Wh((function(){if(!Zi().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=Zi().getBool("DEBUG");Zi().set("DEBUG",!1);var n=e.abs(Hm(1e-8)).dataSync()[0];if(Zi().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,i=t.texture,o=t.usage,s=t.isPacked;if(null==i){var l,c=null!=this.activeTimers;c&&(l=Cl.now());var d=t.texShape;if(null==d&&(d=qj(n,s),t.texShape=d),null!=a){var h,p,f=Xj(n),m=d[1],g=d[0],v=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(s||!v)&&(m=(h=u(cj(d[0],d[1]),2))[0],g=h[1]),p=s?new KV(f,v):new YV(f,v);var y=v?[g,m]:d,b=this.makeTensorInfo(y,r),x=this.texData.get(b.dataId);x.usage=v?2:1,x.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),m,g,a);var A=[[g,m]],w=this.runWebGLProgram(p,[b],r,A,!0),k=this.texData.get(w.dataId);t.texShape=k.texShape,t.isPacked=k.isPacked,t.usage=k.usage,Zi().get("ENGINE_COMPILE_ONLY")?this.disposeData(w.dataId):(t.texture=k.texture,t.values=null,this.texData.delete(w.dataId)),this.disposeIntermediateTensorInfo(b),c&&(this.uploadWaitMs+=Cl.now()-l)}else{var S=this.acquireTexture(d,o,r,s);t.texture=S}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, most likely due to a memory leak"))}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*Cl.bytesPerElement(t)}},{key:"checkCompileCompletion",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=u(t[e],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r,a,i,o,s,l,c=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.gpgpu.parallelCompilationExtension){e.next=6;break}for(n=0,r=Object.entries(this.binaryCache);n<r.length;n++)a=u(r[n],2),i=a[1],t.push(this.checkCompletionAsync_(i));return e.abrupt("return",Promise.all(t));case 6:for(o=function(){var e=u(l[s],2)[1],n=new Promise((function(t){try{c.checkCompletion_(e),t(!0)}catch(Xe){throw Xe}}));t.push(n)},s=0,l=Object.entries(this.binaryCache);s<l.length;s++)o();return e.abrupt("return",Promise.all(t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkCompletionAsync_",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){e.next=4;break}e.t0=this.checkCompletion_(t),e.next=7;break;case 4:return e.next=6,Qb();case 6:e.t0=this.checkCompletionAsync_(t);case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCompletion_",value:function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS))throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)?(Aj(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}},{key:"getUniformLocations",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=u(t[e],2)[1],r=BV(this.gpgpu,n.program,n.webGLProgram),a=r.uniformLocations,i=r.customUniformLocations,o=r.infLoc,s=r.nanLoc,l=r.inShapesLocations,c=r.inTexShapesLocations,d=r.outShapeLocation,h=r.outShapeStridesLocation,p=r.outTexShapeLocation;n.uniformLocations=a,n.customUniformLocations=i,n.infLoc=o,n.nanLoc=s,n.inShapesLocations=l,n.inTexShapesLocations=c,n.outShapeLocation=d,n.outShapeStridesLocation=h,n.outTexShapeLocation=p}}}]),n}(Za),LU=DU;LU.nextDataId=0;var zU="0.0.0";function BU(){Zi().set("WEBGL_FORCE_F16_TEXTURES",!0)}Rc.isBrowser()&&Zh("webgl",(function(){return new LU}),2);var WU={forceHalfFloat:BU},jU=$r((function e(t,n,r){Jr(this,e),this.variableNames=["A","B"],this.outputShape=$b.assertAndGetBroadcastShape(n,r),this.enableShapeUniforms=HV(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),VU=$r((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Jr(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=$b.assertAndGetBroadcastShape(n,r);var i=this.outputShape.length;this.enableShapeUniforms=HV(i);var o="";if(a)if(0===i||1===Cl.sizeFromShape(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(o="\n          ".concat(PV(i)," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var s=cU("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(s[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(s[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(s[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(s[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}));function HU(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var UU={kernelName:gs,backendName:"webgl",kernelFunc:HU};function GU(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=HU({inputs:{x:r},backend:n}),u=HU({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var XU={kernelName:To,backendName:"webgl",kernelFunc:GU},qU="return (a < 0.) ? b * a : a;",YU="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var KU={kernelName:ws,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",Cl.createScalarValue(i,"float32")),s=Zi().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new VU(YU,a.shape,o.shape):new jU(qU,a.shape,o.shape),u=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),u}},ZU="return (a < 0.) ? b * a : a;",JU="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var QU={kernelName:su,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=Zi().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new VU(JU,r.shape,a.shape):new jU(ZU,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}};function $U(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,u=o.x,l=s,c=a||u.dtype;if(l.shouldExecuteOnCPU([u])&&null!=r){var d=l.texData.get(u.dataId),h=r(d.values,c);return l.makeTensorInfo(u.shape,c,h)}return i=Zi().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new MU(u.shape,n):new vU(u.shape,t),l.runWebGLProgram(i,[u],c)}}function eG(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,s=e.cpuKernelImpl,l=e.dtype;return function(e){var r=e.inputs,i=e.backend,c=r.a,d=r.b,h=i;if(o&&"complex64"===c.dtype){var p=h.texData.get(c.dataId),f=h.texData.get(d.dataId),m=[[p.complexTensorInfos.real,f.complexTensorInfos.real],[p.complexTensorInfos.imag,f.complexTensorInfos.imag]].map((function(e){var n=u(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:c.shape},o={dataId:a.dataId,dtype:a.dtype,shape:d.shape},s=new jU(t,c.shape,d.shape);return h.runWebGLProgram(s,[i,o],gc(r.dtype,a.dtype))})),g=u(m,2),v=g[0],y=g[1],b=GU({inputs:{real:v,imag:y},backend:h});return h.disposeIntermediateTensorInfo(v),h.disposeIntermediateTensorInfo(y),b}var x,A=l||gc(c.dtype,d.dtype);if(("string"===c.dtype||"string"===d.dtype||h.shouldExecuteOnCPU([c,d]))&&null!=s){var w=h.texData.get(c.dataId).values,k=h.texData.get(d.dataId).values,S="string"===c.dtype?$b.fromUint8ToStringArray(w):w,C="string"===c.dtype?$b.fromUint8ToStringArray(k):k,I=u(s(c.shape,d.shape,S,C,A),2),E=I[0],T=I[1],N=h.makeTensorInfo(T,A);return h.texData.get(N.dataId).values=E,N}return x=Zi().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new VU(n,c.shape,d.shape,a):new jU(t,c.shape,d.shape),h.runWebGLProgram(x,[c,d],A)}}function tG(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?IU:bU;if("relu"===e)return t?TU:wU;if("elu"===e)return t?EU:AU;if("relu6"===e)return t?NU:kU;if("prelu"===e)return t?JU:ZU;if("leakyrelu"===e)return t?YU:qU;if("sigmoid"===e)return t?_U:CU;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var nG=$r((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Jr(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=HV(this.outputShape.length);var c=a?t[1]:t[2],d=Math.ceil(c/2),h=a?"i * 2, rc.y":"rc.y, i * 2",p=i?"rc.z, i * 2":"i * 2, rc.z",f=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",v="";s&&(g=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):l?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),v="result = activation(result);");var y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");var b="rc.x",x="rc.x";t[0]<n[0]?b="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(x="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(g,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(d,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(d,"; i++) {\n          int batchA = ").concat(b,";\n          int batchB = ").concat(x,";\n          vec4 a = getMatrixA(batchA, ").concat(h,");\n          vec4 b = getMatrixB(batchB, ").concat(p,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(f[0]," * ").concat(m[0],");\n          result += (").concat(f[1]," * ").concat(m[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(v,"\n\n        setOutput(result);\n      }\n    ")})),rG="return areal * breal - aimag * bimag;",aG="return areal * bimag + aimag * breal;",iG=$r((function e(t,n,r){Jr(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=$b.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),oG="return a * b;";function sG(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=$b.upcastType(a.dtype,i.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),l=r.texData.get(i.dataId),c=new iG(rG,a.shape,i.shape),d=new iG(aG,a.shape,i.shape),h=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:i.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:i.shape}],p=r.runWebGLProgram(c,h,"float32"),f=r.runWebGLProgram(d,h,"float32"),m=GU({inputs:{real:p,imag:f},backend:r});return r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(f),m}if(r.shouldExecuteOnCPU([a,i])){var g=r.texData.get(a.dataId),v=r.texData.get(i.dataId),y=u(WH(a.shape,i.shape,g.values,v.values,o),2),b=y[0],x=y[1],A=r.makeTensorInfo(x,o);return r.texData.get(A.dataId).values=b,A}return t=Zi().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new VU(oG,a.shape,i.shape):new jU(oG,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var uG={kernelName:Ks,backendName:"webgl",kernelFunc:sG};function lG(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,s=Cl.sizeFromShape(a.shape),u=Cl.inferFromImplicitShape(i,s),l=Cl.sizeFromShape(u);Cl.assert(s===l,(function(){return"The new shape (".concat(u,") has ").concat(l," elements and the old shape (").concat(a.shape,") has ").concat(s," elements. The new shape and old shape must have the same number of elements.")}));var c=o.texData.get(a.dataId);return!c.isPacked||Kj(a.shape,u)||null!==c.texture&&Kj(c.shape,u)?(o.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[Uj(e.shape)].concat(ta(Gj(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[Uj(t)].concat(ta(Gj(t))),o=new hU(i,r),s=[r],u=n.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,u,o)}var cG={kernelName:pu,backendName:"webgl",kernelFunc:lG},dG=$r((function e(t,n){Jr(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s=4*Math.floor(r/4),u=r%4,l="sumValue += dot(values, ones);";if(null!=n){var c=1/n;l="sumValue += dot(values * ".concat(Cl.isInt(c)?c.toPrecision(2):c,", ones);")}var d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(l,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(l,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),hG=$r((function e(t,n){Jr(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var l="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"sum"===n?l="sumValue":"prod"===n?l="prodValue":"all"===n?l="allValue":"any"===n&&(l="anyValue");var c=4*Math.floor(r/4),d=r%4,h="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),p="vec4";"all"===n?(s="1.0",h="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===n&&(s="0.0",h="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(f,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(c,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(h,"\n        }\n\n        int inIdx = inOffset + ").concat(c,";\n        if (").concat(1===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(2===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(h,"\n        } else if (").concat(3===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(h,"\n        }\n        setOutput(").concat(l,");\n      }\n    ")}));function pG(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=$b.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var s,u=a[o],l=u.inSize,c=u.windowSize,d=u.outSize,h=void 0;h="mean"===n?0===o?new dG({windowSize:c,inSize:l,batchSize:e.shape[0],outSize:d},l):new dG({windowSize:c,inSize:l,batchSize:e.shape[0],outSize:d}):new hG({windowSize:c,inSize:l,batchSize:e.shape[0],outSize:d},n),s=i,i=r.runWebGLProgram(h,[i],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return i}var fG=$r((function e(t,n){Jr(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=PV(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}));var mG=$r((function e(t,n){Jr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=PV(this.rank),o=lU("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=o[u];var l="vec2(".concat(s.slice(-2).join(),")"),c="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),d="getChannel(getA(".concat(s.join(),"), ").concat(l,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(d,";\n      if(").concat(c,") {\n        result[1] = ").concat(d,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(d,";\n        if(").concat(c,") {\n          result[3] = ").concat(d,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function gG(e,t,n){var r=Zi().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new mG(e.shape,t):new fG(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function vG(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,i=e.shape.length,o=Cl.parseAxisParam(a,e.shape),s=o,l=$b.getAxesPermutation(s,i),c=null!=l,d=e;c&&(d=gG(e,l,r),s=$b.getInnerMostAxes(s.length,i)),$b.assertAxesAreInnerMostDims("sum",s,i);var h=u($b.computeOutAndReduceShapes(d.shape,s),2),p=h[0],f=h[1],m=p;n&&(m=$b.expandShapeToKeepDim(p,o));var g=Cl.sizeFromShape(f),v=lG({inputs:{x:d},attrs:{shape:[Cl.sizeFromShape(e.shape)/g,g]},backend:r}),y=pG(v,vc(e.dtype),"sum",r),b=lG({inputs:{x:y},attrs:{shape:m},backend:r});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(y),c&&r.disposeIntermediateTensorInfo(d),b}(t.x,r.axis,r.keepDims,n)}var yG={kernelName:Ou,backendName:"webgl",kernelFunc:vG};function bG(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,s=r,u=i.shape.length,l=new Array(u),c=0;c<l.length;c++)l[c]=i.shape[o[c]];if(s.shouldExecuteOnCPU([i])){var d=s.texData.get(i.dataId).values,h=sU(d,i.shape,i.dtype,o,l);t=s.makeTensorInfo(l,i.dtype),s.texData.get(t.dataId).values=h}else t=gG(i,o,s);return t}var xG={kernelName:el,backendName:"webgl",kernelFunc:bG};function AG(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,l=void 0===u?null:u,c=e.leakyreluAlpha,d=void 0===c?0:c,h=e.activation,p=void 0===h?null:h,f=t.shape.length,m=n.shape.length,g=r?t.shape[f-2]:t.shape[f-1],v=a?n.shape[m-1]:n.shape[m-2],y=r?t.shape[f-1]:t.shape[f-2],b=a?n.shape[m-2]:n.shape[m-1],x=t.shape.slice(0,-2),A=n.shape.slice(0,-2),w=Cl.sizeFromShape(x),k=Cl.sizeFromShape(A),S=ap.assertAndGetBroadcastShape(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);Cl.assert(g===v,(function(){return"Error in matMul: inner shapes (".concat(g,") and (").concat(v,") of Tensors with shapes ").concat(t.shape," and ").concat(n.shape," and transposeA=").concat(r," and transposeB=").concat(a," must match.")}));var C,I=r?[w,g,y]:[w,y,g],E=a?[k,b,v]:[k,v,b],T=lG({inputs:{x:t},backend:i,attrs:{shape:I}}),N=lG({inputs:{x:n},backend:i,attrs:{shape:E}}),_=[T,N],M=Math.max(w,k),R=r?T.shape[1]:T.shape[2],O=null!=s,P=null!=l,F="leakyrelu"===p,D=null!=p?tG(p,!0):null;if((1===y||1===b)&&R>1e3&&!1===(O||P||F||null!=D)){var L=T,z=N;r&&(L=bG({inputs:{x:T},backend:i,attrs:{perm:[0,2,1]}}),_.push(L)),a&&(z=bG({inputs:{x:N},backend:i,attrs:{perm:[0,2,1]}}),_.push(z));var B=1===b,W=L;1!==b&&(W=lG({inputs:{x:L},backend:i,attrs:{shape:[M,R,1]}}),_.push(W));var j=1===b?2:1,V=z;B&&(V=lG({inputs:{x:z},backend:i,attrs:{shape:[M,1,R]}}),_.push(V));var H=sG({inputs:{a:W,b:V},backend:i});C=vG({inputs:{x:H},backend:i,attrs:{axis:j,keepDims:!0}}),_.push(H)}else{var U=gc(t.dtype,n.dtype),G=new nG(I,E,[M,y,b],r,a,O,D,P,F),X=[T,N];if(null!=s&&X.push(s),P&&X.push(l),F){var q=i.makeTensorInfo([],"float32",Cl.createScalarValue(d,"float32"));X.push(q),_.push(q)}C=i.runWebGLProgram(G,X,U)}var Y=lG({inputs:{x:C},backend:i,attrs:{shape:S}});_.push(C);for(var K=0,Z=_;K<Z.length;K++){var J=Z[K];i.disposeIntermediateTensorInfo(J)}return Y}var wG={kernelName:ll,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,l=r.transposeB,c=r.activation;return AG({a:a,b:i,transposeA:u,transposeB:l,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:c})}},kG="return abs(x);";var SG={kernelName:to,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=YH(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=Zi().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new MU(a.shape,kG):new vU(a.shape,kG),r.runWebGLProgram(t,[a],a.dtype)}},CG=$U({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),IG={kernelName:no,backendName:"webgl",kernelFunc:CG},EG=$U({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),TG={kernelName:ro,backendName:"webgl",kernelFunc:EG},NG="return a + b;",_G=eG({opSnippet:NG,packedOpSnippet:NG,supportsComplex:!0,cpuKernelImpl:xH}),MG={kernelName:ao,backendName:"webgl",kernelFunc:_G},RG=$r((function e(t,n){Jr(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),OG=$r((function e(t,n){Jr(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var PG={kernelName:io,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return HU({inputs:{x:a[0]},backend:r});if(a.length>Zi().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),s=e({inputs:a.slice(i),backend:r});return e({inputs:[o,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return gc(e,t)})),l=a.map((function(e){return e.shape})),c=Zi().getBool("WEBGL_PACK")?new OG(a[0].shape,l):new RG(a[0].shape,l);return r.runWebGLProgram(c,a,u)}};var FG={kernelName:oo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,l=Cl.parseAxisParam(i,a.shape),c=l,d=$b.getAxesPermutation(c,s),h=a;null!=d&&(h=bG({inputs:{x:a},backend:n,attrs:{perm:d}}),c=$b.getInnerMostAxes(c.length,s)),$b.assertAxesAreInnerMostDims("all",c,s);var p,f=u($b.computeOutAndReduceShapes(h.shape,c),2),m=f[0],g=f[1],v=lG({inputs:{x:h},backend:n,attrs:{shape:[-1,Cl.sizeFromShape(g)]}}),y=pG(v,v.dtype,"all",n);return p=lG(o?{inputs:{x:y},backend:n,attrs:{shape:$b.expandShapeToKeepDim(m,l)}}:{inputs:{x:y},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),null!=d&&n.disposeIntermediateTensorInfo(h),p}};var DG={kernelName:so,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,l=Cl.parseAxisParam(i,a.shape),c=l,d=$b.getAxesPermutation(c,s),h=a;null!=d&&(h=bG({inputs:{x:a},backend:n,attrs:{perm:d}}),c=$b.getInnerMostAxes(c.length,s)),$b.assertAxesAreInnerMostDims("any",c,s);var p,f=u($b.computeOutAndReduceShapes(h.shape,c),2),m=f[0],g=f[1],v=lG({inputs:{x:h},backend:n,attrs:{shape:[-1,Cl.sizeFromShape(g)]}}),y=pG(v,v.dtype,"any",n);return p=lG(o?{inputs:{x:y},backend:n,attrs:{shape:$b.expandShapeToKeepDim(m,l)}}:{inputs:{x:y},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),null!=d&&n.disposeIntermediateTensorInfo(h),p}},LG=$r((function e(t,n,r){Jr(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),zG=$r((function e(t,n,r,a){Jr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Cl.assert(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");var s,u,l=this.outputShape,c=l.length,d=PV(c),h=cU("coords",c);if(1===o){var p=PV(u=c+1);s="\n        ".concat(p," sourceLocR = ").concat(p,"(").concat(h.join(),", 0);\n        ++").concat(h[c-1],";\n        ").concat(p," sourceLocG = ").concat(p,"(").concat(h.join(),", 0);\n        ++").concat(h[c-2],";\n        ").concat(p," sourceLocA = ").concat(p,"(").concat(h.join(),", 0);\n        --").concat(h[c-1],";\n        ").concat(p," sourceLocB = ").concat(p,"(").concat(h.join(),", 0);\n        --").concat(h[c-2],";")}else u=c,s="\n        ".concat(d," sourceLocR = coords;\n        ++").concat(h[c-1],";\n        ").concat(d," sourceLocG = coords;\n        ++").concat(h[c-2],";\n        ").concat(d," sourceLocA = coords;\n        --").concat(h[c-1],";\n        ").concat(d," sourceLocB = coords;\n        --").concat(h[c-2],";");var f=["x","y","z","w","u","v"].slice(0,u),m="."+f[u-1],g=f.map((function(e){return"int "+e})),v=cU("sourceLocR",u-1).concat("inIdx.r"),y=cU("sourceLocG",u-1).concat("inIdx.g"),b=cU("sourceLocB",u-1).concat("inIdx.b"),x=cU("sourceLocA",u-1).concat("inIdx.a"),A="max"===r?"greaterThan":"lessThan",w=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(v.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),k="vec4(\n            getAChannel(".concat(v.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),S=a?"":"\n      float getBestIndicesAChannel(".concat(g.join(),") {\n        return getChannel(getBestIndicesA(").concat(f.join(),"),\n                                          vec2(").concat(f.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(g.join(),") {\n        return getChannel(getA(").concat(f.join(),"),\n                               vec2(").concat(f.slice(-2).join(),"));\n      }\n      ").concat(S,"\n      void main() {\n        ").concat(d," coords = getOutputCoords();\n        bool hasNextCol = ").concat(h[c-1]," < ").concat(l[c-1]-1,";\n        bool hasNextRow = ").concat(h[c-2]," < ").concat(l[c-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(m,", sourceLocG").concat(m,",\n          sourceLocB").concat(m,", sourceLocA").concat(m,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(k,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(k,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(A,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function BG(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);var o=$b.computeOptimalWindowSize(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},u=new LG(s,n,null==r),l=[t];null!=r&&l.push(r);var c=e.runWebGLProgram(u,l,"int32");if(1===c.shape[1])return c;var d=BG(e,t,n,c);return e.disposeIntermediateTensorInfo(c),d}function WG(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,i=a[a.length-1],o=$b.computeOptimalWindowSize(i),s=new zG(a,o,n,null==r),u=null==r?[t]:[t,r],l=e.runWebGLProgram(s,u,"int32");if(l.shape.length===t.shape.length){var c=WG(e,t,n,l);return e.disposeIntermediateTensorInfo(l),c}return l}function jG(e,t,n,r){var a=[n];if($b.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!Zi().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=e.texData.get(t.dataId),s=t;null!==o&&o.isPacked&&(s=e.unpackTensor(t),i.push(s));var l=u($b.computeOutAndReduceShapes(s.shape,a),2),c=l[0],d=l[1],h=Cl.sizeFromShape(d),p=lG({inputs:{x:s},backend:e,attrs:{shape:[-1,h]}});i.push(p);var f=BG(e,p,r);i.push(f);var m=lG({inputs:{x:f},backend:e,attrs:{shape:c}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),m}return WG(e,t,r)}var VG={kernelName:uo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=Cl.parseAxisParam(i,a.shape),s=$b.getAxesPermutation(o,a.shape.length),u=a,l=[];null!=s&&(u=bG({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),o=$b.getInnerMostAxes(o.length,u.shape.length)),$b.assertAxesAreInnerMostDims("argMax",[o[0]],u.shape.length);var c=jG(n,u,o[0],"max");return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}};var HG={kernelName:lo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=Cl.parseAxisParam(i,a.shape),s=$b.getAxesPermutation(o,a.shape.length),u=a,l=[];null!=s&&(u=bG({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),o=$b.getInnerMostAxes(o.length,u.shape.length)),$b.assertAxesAreInnerMostDims("argMin",[o[0]],u.shape.length);var c=jG(n,u,o[0],"min");return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}},UG=$U({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),GG={kernelName:co,backendName:"webgl",kernelFunc:UG},XG=$U({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),qG={kernelName:ho,backendName:"webgl",kernelFunc:XG},YG=$U({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),KG={kernelName:po,backendName:"webgl",kernelFunc:YG},ZG=eG({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),JG={kernelName:mo,backendName:"webgl",kernelFunc:ZG},QG=$U({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),$G={kernelName:fo,backendName:"webgl",kernelFunc:QG},eX=$r((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Jr(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,u=t.strideWidth,l=t.dilationHeight,c=t.dilationWidth,d=t.effectiveFilterHeight,h=t.effectiveFilterWidth,p=t.padInfo.top,f=t.padInfo.left;this.outputShape=t.outShape;var m="avg"===n,g="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),v="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(m||(y="-1.0 / 1e-20"),r){var b=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(p,", ").concat(f,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(l,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(h,";\n                wC += ").concat(c,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(b," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?g:v:"wR * ".concat(h," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var x="max",A="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"avg"===n&&(A="avgValue / count");var w=4*Math.floor(o/4),k=o%4,S="\n      if (".concat(m,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(x,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(p,", ").concat(f,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(d,";\n            wR += ").concat(l,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(c,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              getValue(batch, xR, xC + 3 * ").concat(c,", d)\n            );\n\n            ").concat(S,"\n          }\n\n          int xC = xCCorner + ").concat(w,";\n          if (").concat(1===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(S,"\n          } else if (").concat(2===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(S,"\n          } else if (").concat(3===k,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(c,", d),\n              getValue(batch, xR, xC + 2 * ").concat(c,", d),\n              initializationValue\n            );\n\n            ").concat(S,"\n          }\n        }\n        setOutput(").concat(A,");\n      }\n    ")}})),tX=$r((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Jr(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,u=t.strideHeight,l=t.strideWidth,c=t.dilationDepth,d=t.dilationHeight,h=t.dilationWidth,p=t.effectiveFilterDepth,f=t.effectiveFilterHeight,m=t.effectiveFilterWidth,g=t.padInfo.front,v=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,x="0.0";if(b||(x="-1.0 / 1e-20"),r){var A=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(l,");\n        const ivec3 pads = ivec3(").concat(g,", ").concat(v,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(p,";\n              wD += ").concat(c,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(f,";\n                wR += ").concat(d,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(m,";\n                  wC += ").concat(h,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(A," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(f," * ").concat(m," +\n                      wR * ").concat(m," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="max",k="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"avg"===n&&(k="avgValue / count");var S=4*Math.floor(o/4),C=o%4,I="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(w,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(l,");\n      const ivec3 pads = ivec3(").concat(g,", ").concat(v,", ").concat(y,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(p,";\n            wD += ").concat(c,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(f,";\n            wR += ").concat(d,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(S,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(h,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(h,", ch)\n              );\n\n              ").concat(I,"\n            }\n\n            int xC = xCCorner + ").concat(S,";\n            if (").concat(1===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(I,"\n            } else if (").concat(2===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(I,"\n            } else if (").concat(3===C,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(h,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(h,", ch),\n                initializationValue\n              );\n\n              ").concat(I,"\n            }\n          }\n          setOutput(").concat(k,");\n        }\n      }\n    ")}}));var nX={kernelName:go,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;sV(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Cl.assert($b.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(1,"'")}));var l=$b.computePool2DInfo(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&Cl.arraysEqual(l.inShape,l.outShape))return HU({inputs:{x:a},backend:n});var c=new eX(l,"avg",!1);return n.runWebGLProgram(c,[a],"float32")}};var rX={kernelName:yo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat,c=$b.computePool3DInfo(a.shape,i,o,[1,1,1],s,u,l),d=new tX(c,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}},aX=$r((function e(t){Jr(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=u-1-t.padInfo.top,d=l-1-t.padInfo.left,h=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(c,", ").concat(d,");\n      const float avgMultiplier = float(").concat(h,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(l,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),iX=$r((function e(t){Jr(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,l=t.dilationHeight,c=t.dilationWidth,d=t.effectiveFilterDepth,h=t.effectiveFilterHeight,p=t.effectiveFilterWidth,f=d-1-t.padInfo.front,m=h-1-t.padInfo.top,g=p-1-t.padInfo.left,v=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(f,", ").concat(m,", ").concat(g,");\n      const float avgMultiplier = float(").concat(v,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(h,";\n              wR += ").concat(l,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(c,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var oX={kernelName:bo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode,c=$b.computePool3DInfo(i.shape,o,s,[1,1,1],u,l),d=new iX(c);return n.runWebGLProgram(d,[a],i.dtype)}};var sX={kernelName:vo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;sV([a,i],"avgPoolGrad");var s=r.filterSize,u=r.strides,l=r.pad,c=$b.computePool2DInfo(o.shape,s,u,1,l),d=new aX(c);return n.runWebGLProgram(d,[a],o.dtype)}};var uX={kernelName:xo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return AG({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},lX=$r((function e(t,n,r,a,i,o){Jr(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],$b.assertAndGetBroadcastShape(t,n),$b.assertAndGetBroadcastShape(t,r);var s="0.0";null!=a&&($b.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=i&&($b.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),cX=$r((function e(t,n,r,a,i,o){Jr(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],$b.assertAndGetBroadcastShape(t,n),$b.assertAndGetBroadcastShape(t,r);var s="vec4(0.0)";null!=a&&($b.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=i&&($b.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),dX={kernelName:ds,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,s=t.offset,u=t.scale;Cl.assert(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Cl.assert(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Cl.assert(null==u||i.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var l=r.varianceEpsilon;null==l&&(l=.001);var c=[a,i,o],d=null;null!=s&&(d=s.shape,c.push(s));var h=null;null!=u&&(h=u.shape,c.push(u));var p=Zi().getBool("WEBGL_PACK_NORMALIZATION")?new cX(a.shape,i.shape,o.shape,d,h,l):new lX(a.shape,i.shape,o.shape,d,h,l);return n.runWebGLProgram(p,c,c[0].dtype)}},hX=$r((function e(t){Jr(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=PV(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return pX.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),i=t.map((function(e,t){return"sourceLoc.".concat(pX[t]," = start[").concat(t,"] + coords.").concat(pX[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),pX=["x","y","z","w","u","v"];var fX=$r((function e(t){Jr(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=PV(this.rank),r=cU("coords",this.rank),a=cU("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),l=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(l,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function mX(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size,s=u(Sp.parseSliceParams(a,i,o),2),l=s[0],c=s[1];if(Sp.assertParamsValid(a,l,c),0===Cl.sizeFromShape(c))return n.makeTensorInfo(c,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var d=n.texData.get(a.dataId),h=KH(d.values,l,c,a.shape,a.dtype);return n.makeTensorInfo(c,a.dtype,h)}var p=n.texData.get(a.dataId).isPacked,f=Sp.isSliceContinous(a.shape,l,c);if(p||!f){d=Zi().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new fX(c):new hX(c),h=[l];return n.runWebGLProgram(d,[a],a.dtype,h)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;var s=Sp.computeFlatOffset(t,Cl.computeStrides(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),i}(a,l,c,n)}var gX={kernelName:Iu,backendName:"webgl",kernelFunc:mX},vX={kernelName:Ao,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;Cl.assert(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=$b.getReshaped(a.shape,i,s),l=$b.getPermuted(u.length,i.length),c=$b.getReshapedPermuted(a.shape,i,s),d=$b.getSliceBeginCoords(o,i.length),h=$b.getSliceSize(c,o,i.length),p=[],f=lG({inputs:{x:a},backend:n,attrs:{shape:u}}),m=bG({inputs:{x:f},backend:n,attrs:{perm:l}}),g=lG({inputs:{x:m},backend:n,attrs:{shape:c}}),v=mX({inputs:{x:g},backend:n,attrs:{begin:d,size:h}});return p.push(f),p.push(m),p.push(g),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}};var yX={kernelName:wo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),u=n.readSync(i.dataId),l=AH(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}};var bX={kernelName:So,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=$b.assertAndGetBroadcastShape(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},xX=eG({opSnippet:"return float(a != b);",cpuKernelImpl:VH,dtype:"bool"}),AX={kernelName:Js,backendName:"webgl",kernelFunc:xX};function wX(e){var t=e.inputs,n=e.backend,r=t.input;return HU({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var kX={kernelName:cu,backendName:"webgl",kernelFunc:wX};var SX={kernelName:Co,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return HU({inputs:{x:i},backend:r});var s=Wg(i.shape),u=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),l=GU({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),l}if("complex64"===i.dtype){var c=wX({inputs:{input:i},backend:r}),d=e({inputs:{x:c},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(c),d}if(!Cl.hasEncodingLoss(i.dtype,o)){var h=HU({inputs:{x:i},backend:r});return{dataId:h.dataId,shape:h.shape,dtype:o}}if("int32"===o)return function(e,t){var n=new vU(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var p=r.makeTensorInfo([],"bool",Cl.getTypedArrayFromDType("bool",1)),f=xX({inputs:{a:i,b:p},backend:r});return r.disposeIntermediateTensorInfo(p),f}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},CX="return ceil(x);",IX=$U({opSnippet:CX,packedOpSnippet:CX,cpuKernelImpl:kH}),EX={kernelName:Io,backendName:"webgl",kernelFunc:IX},TX=$r((function e(t){Jr(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),NX=$r((function e(t){Jr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var _X={kernelName:Eo,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,s=a.clipValueMax;t=Zi().getBool("WEBGL_PACK_CLIP")?new NX(i.shape):new TX(i.shape);var u=[[o],[s]];return r.runWebGLProgram(t,[i],i.dtype,u)}},MX=$r((function e(t){Jr(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function RX(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var OX={kernelName:No,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new MX(r.shape),o=[RX(r,a.complexTensorInfos.real),RX(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},PX=$r((function e(t){Jr(this,e),this.outputShape=[],this.outputShape=$b.computeOutShape(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var o=n[i-1];a.push("else if (yC < ".concat(n[i],") setOutput(getT").concat(i,"(yR, yC-").concat(o,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),FX=$r((function e(t,n){Jr(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=$b.computeOutShape(t,n);var r=this.outputShape,a=r.length,i=PV(a),o=cU("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var l=1;l<u.length;l++)u[l]=u[l-1]+t[l][n];for(var c=s[n],d=s.slice(-2),h=s.join(),p="if (".concat(c," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(h,"), vec2(").concat(d.join(),"));\n        }"),f=1;f<u.length;f++){var m=u[f-1];p+="\n        if (".concat(c," < ").concat(u[f],"  && ").concat(c," >= ").concat(u[f-1],") {\n          return getChannel(\n            getT").concat(f,"(").concat(DX(s,c,m),"),\n            vec2(").concat(DX(d,c,m),"));\n        }")}var g=u.length,v=u[u.length-1];p+="\n        return getChannel(\n          getT".concat(g,"(").concat(DX(s,c,v),"),\n          vec2(").concat(DX(d,c,v),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(p,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}));function DX(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function LX(e){var t=e.inputs,n=e.backend,r=t.input;return HU({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var zX={kernelName:ys,backendName:"webgl",kernelFunc:LX};function BX(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return wX({inputs:{input:e},backend:n})})),i=e.map((function(e){return LX({inputs:{input:e},backend:n})})),o=BX(a,t,n),s=BX(i,t,n),u=GU({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}var l=n.shouldExecuteOnCPU(e);if("string"===r&&(l=!0),l){var c=e.map((function(e){var r=Cl.sizeFromShape(e.shape.slice(t));return lG({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),d=c.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),h=$b.computeOutShape(c.map((function(e){return e.shape})),1),p=1===c[0].shape[0],f=SH(d,h,r,p),m=$b.computeOutShape(e.map((function(e){return e.shape})),t),g=n.makeTensorInfo(m,r,f);return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}if(e.length>Zi().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var v=Math.floor(e.length/2),y=BX(e.slice(0,v),t,n),b=BX(e.slice(v),t,n),x=BX([y,b],t,n);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),x}if(Zi().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var A=new FX(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(A,e,r)}var w=function(e,t,n){var r=$b.computeOutShape(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return lG({inputs:{x:e},attrs:{shape:[-1,Cl.sizeFromShape(e.shape.slice(t))]},backend:n})})),outShape:r}}(e,t,n),k=w.tensors2D,S=w.outShape,C=new PX(k.map((function(e){return e.shape}))),I=n.runWebGLProgram(C,k,r);k.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var E=lG({inputs:{x:I},attrs:{shape:S},backend:n});return n.disposeIntermediateTensorInfo(I),E}function WX(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,a=Cl.parseAxisParam(r,t[0].shape)[0],i=$b.computeOutShape(t.map((function(e){return e.shape})),a);if(0===Cl.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);var o=t.filter((function(e){return Cl.sizeFromShape(e.shape)>0}));if(1===o.length)return HU({inputs:{x:o[0]},backend:n});var s=o.map((function(e){return e.shape}));return $b.assertParamsConsistent(s,a),BX(o,a,n)}var jX={kernelName:_o,backendName:"webgl",kernelFunc:WX},VX=$r((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Jr(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,d=t.dilationWidth,h=t.filterHeight,p=t.filterWidth,f=4*Math.floor(t.inChannels/4),m=t.inChannels%4,g="channelsLast"===t.dataFormat,v=g?1:2,y=g?2:3,b=g?3:1,x="",A="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),A="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(l,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(v,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(h,"; wR++) {\n          int xR = xRCorner + wR * ").concat(c,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(p,"; wC++) {\n            int xC = xCCorner + wC * ").concat(d,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(f,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(g,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===m,") {\n\n              if (").concat(g,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(f,") *\n                    getW(wR, wC, ").concat(f,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(f,", xR, xC) *\n                    getW(wR, wC, ").concat(f,", d2);\n              }\n\n            } else if (").concat(2===m,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(f,", d2),\n                getW(wR, wC, ").concat(f," + 1, d2)\n              );\n\n              if (").concat(g,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(f,"),\n                  getX(batch, xR, xC, ").concat(f," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(f,", xR, xC),\n                  getX(batch, ").concat(f," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===m,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(f,", d2),\n                getW(wR, wC, ").concat(f," + 1, d2),\n                getW(wR, wC, ").concat(f," + 2, d2)\n              );\n\n              if (").concat(g,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(f,"),\n                  getX(batch, xR, xC, ").concat(f," + 1),\n                  getX(batch, xR, xC, ").concat(f," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(f,", xR, xC),\n                  getX(batch, ").concat(f," + 1, xR, xC),\n                  getX(batch, ").concat(f," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(A,"\n        setOutput(result);\n      }\n    ")})),HX=$r((function e(t){Jr(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,l=t.dilationHeight,c=t.dilationWidth,d=t.filterDepth,h=t.filterHeight,p=t.filterWidth,f=4*Math.floor(t.inChannels/4),m=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(d,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,"; wR++) {\n            int xR = xRCorner + wR * ").concat(l,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,"; wC++) {\n              int xC = xCCorner + wC * ").concat(c,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(f,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===m,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(f,") *\n                  getW(wF, wR, wC, ").concat(f,", d2);\n              } else if (").concat(2===m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(f,"),\n                  getX(batch, xF, xR, xC, ").concat(f," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(f,", d2),\n                  getW(wF, wR, wC, ").concat(f," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(f,"),\n                  getX(batch, xF, xR, xC, ").concat(f," + 1),\n                  getX(batch, xF, xR, xC, ").concat(f," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(f,", d2),\n                  getW(wF, wR, wC, ").concat(f," + 1, d2),\n                  getW(wF, wR, wC, ").concat(f," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),UX=$r((function e(t,n){Jr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=HV(this.outputShape.length);for(var r=n.dataFormat,a=lV(),i="channelsLast"===r,o=i?1:2,s=i?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(t[2]," && pos < ").concat(t[1],") {"),l="",c=0;c<=1;c++)for(var d=0;d<=1;d++)l+="\n          blockIndex = rc.z + ".concat(d,";\n          pos = rc.y + ").concat(c,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*c+d,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*c+d,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(l,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function GX(e,t){var n=e.length;return n>=3?[].concat(ta(e.slice(0,-3)),t?[e[n-3]*e[n-2],e[n-1]]:[e[n-3],e[n-2]*e[n-1]]):!t&&1===n&&e[0]>1?[e[0],1]:null}function XX(e){var t,n=e.x,r=e.filter,a=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,l=void 0===u?null:u,c=e.leakyreluAlpha,d=void 0===c?0:c,h=e.activation,p=void 0===h?null:h,f=n.shape,m=i.texData.get(n.dataId),g=a.inChannels,v=f[0]*f[1]*f[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[];if(null!=l){var A=GX(l.shape,b);null!=A&&(l=lG({inputs:{x:l},backend:i,attrs:{shape:A}}),x.push(l))}if(null!=s){var w=GX(s.shape,b);null!=w&&(s=lG({inputs:{x:s},backend:i,attrs:{shape:w}}),x.push(s))}if((1!==v&&1!==y||!(g>1e3))&&m.isPacked&&b&&null!=m.texture&&f[2]%2!==0&&Cl.arraysEqual(m.shape.slice(-3),f.slice(-3))){var k=f[0]*f[1]*(f[2]+1),S={dataId:n.dataId,shape:[1,k,a.inChannels],dtype:n.dtype},C=m.shape;m.shape=m.shape.slice(),m.shape[m.shape.length-2]++,Cl.assert(Kj(m.shape,S.shape),(function(){return"packed reshape ".concat(m.shape," to ").concat(S.shape," isn't free")}));var I=lG({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(I);var E=AG({a:S,b:I,backend:i,transposeA:!1,transposeB:false,bias:s,activation:p,preluActivationWeights:l,leakyreluAlpha:d}),T=i.texData.get(E.dataId);Cl.assert(T.isPacked,(function(){return"batchMatMul result is expected to be packed"})),m.shape=C,T.shape=a.outShape,(t=HU({inputs:{x:E},backend:i})).shape=a.outShape,x.push(E)}else{var N=a.outHeight*a.outWidth,_=lG({inputs:{x:n},backend:i,attrs:{shape:b?[a.batchSize,N,a.inChannels]:[a.batchSize,a.inChannels,N]}}),M=lG({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),R=AG({a:b?_:M,b:b?M:_,transposeA:!b,transposeB:false,backend:i,bias:s,activation:p,preluActivationWeights:l,leakyreluAlpha:d});t=lG({inputs:{x:R},backend:i,attrs:{shape:a.outShape}}),x.push(_),x.push(M),x.push(R)}for(var O=0,P=x;O<P.length;O++){var F=P[O];i.disposeIntermediateTensorInfo(F)}return t}function qX(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,u=void 0===s?null:s,l=e.leakyreluAlpha,c=void 0===l?0:l,d=e.activation,h=void 0===d?null:d,p=r.filterWidth,f=r.filterHeight,m=r.inChannels,g=r.outWidth,v=r.outHeight,y="channelsLast"===r.dataFormat,b=p*f*m,x=v*g,A=[r.batchSize,b,x],w=[];if(null!=u){var k=GX(u.shape,y);null!=k&&(u=lG({inputs:{x:u},backend:a,attrs:{shape:k}}),w.push(u))}if(null!=o){var S=GX(o.shape,y);null!=S&&(o=lG({inputs:{x:o},backend:a,attrs:{shape:S}}),w.push(o))}var C=lG({inputs:{x:n},backend:a,attrs:{shape:[1,b,Cl.sizeFromShape(n.shape)/b]}});w.push(C);var I=new UX(A,r),E=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],T=a.runWebGLProgram(I,[t],"float32",E),N=lG({inputs:{x:T},backend:a,attrs:{shape:A}});w.push(T),w.push(N);var _=null!=o,M=null!=u,R="leakyrelu"===h,O=h?tG(h,!0):null,P=new nG(y?N.shape:C.shape,y?C.shape:N.shape,y?[r.batchSize,x,r.outChannels]:[r.batchSize,r.outChannels,x],!0,!1,_,O,M,R),F=y?[N,C]:[C,N];if(o&&F.push(o),M&&F.push(u),R){var D=a.makeTensorInfo([],"float32",Cl.createScalarValue(c,"float32"));F.push(D),w.push(D)}var L=a.runWebGLProgram(P,F,"float32"),z=lG({inputs:{x:L},backend:a,attrs:{shape:r.outShape}});w.push(L);for(var B=0,W=w;B<W.length;B++){var j=W[B];a.disposeIntermediateTensorInfo(j)}return z}var YX={kernelName:Mo,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,l=a.dataFormat,c=a.dilations,d=a.dimRoundingMode,h=$b.convertConv2DDataFormat(l),p=$b.computeConv2DInfo(i.shape,o.shape,s,c,u,d,!1,h);if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(Zi().getBool("WEBGL_CONV_IM2COL"))t=qX({x:i,filter:o,convInfo:p,backend:r});else{var f=new VX(p);t=r.runWebGLProgram(f,[i,o],"float32")}else t=XX({x:i,filter:o,convInfo:p,backend:r});var m=lG({inputs:{x:t},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(t),m}},KX=$r((function e(t){Jr(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(o,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),ZX=$r((function e(t){Jr(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,l=o?1:2,c=o?2:3,d=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(d,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(l,"], coords[").concat(c,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),JX=$r((function e(t){Jr(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),QX=$r((function e(t){Jr(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,l=r-1-t.padInfo.top,c=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(l,", ").concat(c,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var $X={kernelName:Ro,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,c=r.filterShape,d=$b.convertConv2DDataFormat(u),h=$b.computeConv2DInfo(a.shape,c,o,1,s,l,!1,d),p=new KX(h);return n.runWebGLProgram(p,[a,i],"float32")}};var eq={kernelName:Oo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,l=r.dataFormat,c=r.dimRoundingMode,d=$b.convertConv2DDataFormat(l),h=$b.computeConv2DInfo(o,i.shape,s,1,u,c,!1,d),p=new ZX(h);return n.runWebGLProgram(p,[a,i],"float32")}};var tq={kernelName:Po,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=$b.computeConv3DInfo(a.shape,i.shape,o,u,s),c=new HX(l);return n.runWebGLProgram(c,[a,i],"float32")}};var nq={kernelName:Fo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape,l=$b.computeConv3DInfo(a.shape,u,o,1,s),c=new JX(l);return n.runWebGLProgram(c,[a,i],"float32")}};var rq={kernelName:Do,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=r.inputShape,l=$b.computeConv3DInfo(u,i.shape,s,1,o),c=new QX(l);return n.runWebGLProgram(c,[a,i],"float32")}},aq=$U({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),iq={kernelName:Lo,backendName:"webgl",kernelFunc:aq},oq=$U({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),sq={kernelName:zo,backendName:"webgl",kernelFunc:oq},uq=$r((function e(t,n,r,a,i){Jr(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=u(t,4),s=o[0],l=o[1],c=o[2],d=o[3],h=u(n,1)[0],p=u(r,2),f=p[0],m=p[1];this.outputShape=[h,f,m,d];var g="bilinear"===a?1:0,v="".concat(l-1,".0"),y="".concat(c-1,".0"),b=u(f>1?["".concat((l-1)/(f-1)),"(y2-y1) * height_ratio","y1*".concat(v," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(v)],3),x=b[0],A=b[1],w=b[2],k=u(m>1?["".concat((c-1)/(m-1)),"(x2-x1) * width_ratio","x1*".concat(y," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(y)],3),S=k[0],C=k[1],I=k[2];this.userCode="\n      const float height_ratio = float(".concat(x,");\n      const float width_ratio = float(").concat(S,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(A,";\n        float width_scale = ").concat(C,";\n\n        float in_y = ").concat(w,";\n        if( in_y < 0.0 || in_y > ").concat(v," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(I,";\n        if( in_x < 0.0 || in_x > ").concat(y," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(g," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),lq={kernelName:jo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,l=r.extrapolationValue,c=new uq(a.shape,i.shape,s,u,l);return n.runWebGLProgram(c,[a,i,o],"float32")}},cq=$r((function e(t,n,r,a){Jr(this,e),this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];var i=this.outputShape.length,o="*"===this.op?"1.0":"0.0",s=r?o:"getX(".concat(dq(i,"coords",this.op),")"),u=this.outputShape[this.outputShape.length-1],l="",c="";r?(l=a?"end != ".concat(u-1):"end != 0",c=a?"end + 1":"end - 1"):(l=a?"end + pow2 < ".concat(u):"end >= pow2",c=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(PV(i)," coords = getOutputCoords();\n        int end = ").concat(hq(i,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(l,") {\n          int idx = ").concat(c,";\n          ").concat(hq(i,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(dq(i,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}));function dq(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function hq(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function pq(e,t,n,r,a,i){var o=t.shape.length,s=$b.getAxesPermutation([r],o),u=t;null!=s&&(u=bG({inputs:{x:t},backend:n,attrs:{perm:s}}));var l=$b.getInnerMostAxes(1,o)[0];if(l!==o-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," but got axis=").concat(r));for(var c=u.shape[l],d=HU({inputs:{x:u},backend:n}),h=0;h<=Math.ceil(Math.log2(c))-1;h++){var p=new cq(e,u.shape,!1,i),f=[[h]],m=d;d=n.runWebGLProgram(p,[d],d.dtype,f),n.disposeIntermediateTensorInfo(m)}if(a){var g=new cq(e,u.shape,a,i),v=d;d=n.runWebGLProgram(g,[d],d.dtype),n.disposeIntermediateTensorInfo(v)}if(null!=s){var y=bG({inputs:{x:d},backend:n,attrs:{perm:$b.getUndoAxesPermutation(s)}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(u),y}return d}var fq={kernelName:Bo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return pq("*",t.x,n,r.axis,r.exclusive,r.reverse)}};var mq={kernelName:Wo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return pq("+",t.x,n,r.axis,r.exclusive,r.reverse)}};var gq={kernelName:Vo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),l=n.readSync(i.dataId),c=AH(u,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}if(2===a.shape.length){var d=n.bufferSync(a),h=n.bufferSync(i),p=wH(d,h,o,s);return n.makeTensorInfo(p.shape,i.dtype,p.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}},vq=function(){function e(t,n,r){Jr(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return $r(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var yq={kernelName:Ho,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,l=("NHWC"===o?a.shape[2]:a.shape[3])*i,c=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),d=new vq("NHWC"===o?[s,u,l,c]:[s,c,u,l],i,o);return n.runWebGLProgram(d,[a],a.dtype)}},bq=$r((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Jr(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=HV(this.outputShape.length);var o=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,l="",c="";r&&(l=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),c="result = activation(result);");var d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(l,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(d,"\n        ").concat(c,"\n        setOutput(result);\n      }\n    ")})),xq=$r((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Jr(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=HV(this.outputShape.length);for(var o=t.outChannels/t.inChannels,s=t.padInfo.left,u=t.strideWidth,l=t.dilationWidth,c=t.filterHeight,d=t.filterWidth,h=d,p="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",f=0;f<d;f++)p+="\n          vec4 xTexelC".concat(2*f,";\n          int xTexelC").concat(2*f,"Ready;\n          vec4 xTexelC").concat(2*f+1,";\n          int xTexelC").concat(2*f+1,"Ready;\n          vec4 xC").concat(f,";");p+="\n    for (int r = 0; r < ".concat(c,"; r++) {\n      ");for(var m=0;m<d;m++)p+="\n          xTexelC".concat(2*m," = vec4(0.0);\n          xTexelC").concat(2*m,"Ready = 0;\n          xTexelC").concat(2*m+1," = vec4(0.0);\n          xTexelC").concat(2*m+1,"Ready = 0;\n          xC").concat(m," = vec4(0.0);");p+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var g=0;g<(h+1)/2;g++){var v=2*g;if(p+="\n          xC = xCCorner + ".concat(v*l,";\n          "),1===u){if(v<d&&(s%2===1?(p+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                  xTexelC").concat(v," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(v,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v,"Ready = 1;\n                }\n              "),p+=1===l&&v>0?"\n                xC".concat(v," = vec4(xTexelC").concat(v-2,".zw, xTexelC").concat(v,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(v," = vec4(previous.zw, xTexelC").concat(v,".xy);\n                  } else {\n                    xC").concat(v," = vec4(0.0, 0.0, xTexelC").concat(v,".xy);\n                  }\n                  ")):p+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                  xTexelC").concat(v," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(v,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v,"Ready = 1;\n                }\n\n                xC").concat(v," = xTexelC").concat(v,";\n                "),v+1<d)){var y=s%2===0?Cl.nearestLargerEven(l):l;l%2===0&&s%2===1||l%2!==0&&s%2!==1?(p+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                    xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(v+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(v+1,"Ready = 1;\n                  }\n                  "),l>1&&(p+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                      xTexelC").concat(v," = getX(batch, xR, xCOffset, d1);\n                      xTexelC").concat(v,"Ready = 1;\n                    }\n                    ")),p+="\n                  xC".concat(v+1," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".xy);\n                  ")):p+=1===y?"\n                    xC".concat(v+1," = xTexelC").concat(v,";\n                    "):"\n                    xCOffset = xC + ".concat(y,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                      xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(v+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(v+1,"Ready = 1;\n                    }\n\n                    xC").concat(v+1," = xTexelC").concat(v+1,";\n                    ")}}else v<d&&(s%2===1?(p+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                  xTexelC").concat(v," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(v,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                  xTexelC").concat(v+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(v+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v+1,"Ready = 1;\n                }\n\n                xC").concat(v," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".zw);\n              "),v+1<d&&(p+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(v+1," = vec4(xTexelC").concat(v+1,".xy, final.xy);\n                "))):(p+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(v,"Ready == 0) {\n                  xTexelC").concat(v," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(v,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(v,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(v+1,"Ready == 0) {\n                  xTexelC").concat(v+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(v+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(v+1,"Ready = 1;\n                }\n\n                xC").concat(v," = vec4(\n                  xTexelC").concat(v,".xy, xTexelC").concat(v+1,".xy);\n              "),v+1<d&&(p+="\n                  xC".concat(v+1," = vec4(xTexelC").concat(v,".zw, xTexelC").concat(v+1,".zw);\n                "))));v<d&&(p+="\n            wTexel = getW(r, ".concat(v,", d1, q);\n            dotProd += xC").concat(v," * vec4(wTexel.xz, wTexel.xz);\n          "),v+1<d&&(p+="\n              wTexel = getW(r, ".concat(v+1,", d1, q);\n              dotProd += xC").concat(v+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}p+="\n    }\n  ",p+="\n      }\n    ";var b="",x="";r&&(b=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),x="result = activation(result);");var A=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(p,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(A,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}));var Aq={kernelName:Uo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=r.dimRoundingMode,c=u;null==c&&(c=[1,1]),Cl.assert($b.eitherStridesOrDilationsAreOne(o,c),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(c,"'")}));var d,h=$b.computeConv2DInfo(a.shape,i.shape,o,c,s,l,!0);d=Zi().getBool("WEBGL_PACK_DEPTHWISECONV")&&h.strideWidth<=2&&h.outChannels/h.inChannels===1?new xq(h):new bq(h);var p=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];return n.runWebGLProgram(d,[a,i],"float32",p)}},wq=$r((function e(t){Jr(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),kq=$r((function e(t){Jr(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var Sq={kernelName:Go,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=r.filterShape,d=$b.computeConv2DInfo(a.shape,c,o,s,u,l,!0),h=new wq(d);return n.runWebGLProgram(h,[a,i],"float32")}};var Cq={kernelName:Xo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=r.inputShape,d=$b.computeConv2DInfo(c,i.shape,o,s,u,l,!0),h=new kq(d);return n.runWebGLProgram(h,[a,i],"float32")}},Iq=$r((function e(t){Jr(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var Eq={kernelName:qo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat(ta(r.shape),ta(r.shape)),i=Cl.sizeFromShape(r.shape),o=lG({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new Iq(i),u=n.runWebGLProgram(s,[o],o.dtype),l=lG({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),l}},Tq=$r((function e(t){Jr(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,u=t.filterWidth,l=t.dilationHeight,c=t.dilationWidth,d=a.top,h=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(h,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(l,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(c,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var Nq={kernelName:Yo,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,l=a.dilations,c=$b.computeDilation2DInfo(i.shape,o.shape,s,u,"NHWC",l),d=new Tq(c),h=lG({inputs:{x:t=r.runWebGLProgram(d,[i,o],"float32")},backend:r,attrs:{shape:c.outShape}});return r.disposeIntermediateTensorInfo(t),h}};var _q={kernelName:Qo,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,a=t,i=$b.decodeEinsumEquation(r,a.length),o=i.allDims,s=i.summedDims,u=i.idDims;$b.checkEinsumDimSizes(o.length,u,a);for(var l=$b.getEinsumComputePath(s,u),c=l.path,d=l.steps,h=d.length,p=null,f=o.length,m=[],g=0;g<h;++g){var v,y=ea(d[g]);try{for(y.s();!(v=y.n()).done;){var b=v.value,x=$b.getEinsumPermutation(f,u[b]),A=x.permutationIndices,w=x.expandDims,k=void 0;$b.isIdentityPermutation(A)?k=a[b]:(k=bG({inputs:{x:a[b]},backend:n,attrs:{perm:A}}),m.push(k));for(var S=k.shape.slice(),C=0;C<w.length;++C)S.splice(w[C],0,1);Cl.arraysEqual(k.shape,S)||(k=lG({inputs:{x:k},backend:n,attrs:{shape:S}}),m.push(k)),null===p?p=k:(p=sG({inputs:{a:k,b:p},backend:n}),m.push(p))}}catch(N){y.e(N)}finally{y.f()}g<h-1&&(c[g]>=0&&(p=vG({inputs:{x:p},backend:n,attrs:{axis:c[g]-(o.length-f),keepDims:!1}}),m.push(p)),f--)}for(var I=0,E=m;I<E.length;I++){var T=E[I];T!==p&&n.disposeIntermediateTensorInfo(T)}return p}},Mq=$U({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),Rq={kernelName:$o,backendName:"webgl",kernelFunc:Mq},Oq={kernelName:es,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=Zi().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new VU("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new jU("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},Pq=eG({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:CH}),Fq={kernelName:ns,backendName:"webgl",kernelFunc:Pq},Dq=$U({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat($b.ERF_P,";\n  float a1 = ").concat($b.ERF_A1,";\n  float a2 = ").concat($b.ERF_A2,";\n  float a3 = ").concat($b.ERF_A3,";\n  float a4 = ").concat($b.ERF_A4,";\n  float a5 = ").concat($b.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),Lq={kernelName:ts,backendName:"webgl",kernelFunc:Dq},zq=$U({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:IH,dtype:"float32"}),Bq={kernelName:rs,backendName:"webgl",kernelFunc:zq};function Wq(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),u=a;return a<0&&(Cl.assert(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+a+1),s.splice(u,0,1),lG({inputs:{x:i},backend:r,attrs:{shape:s}})}var jq={kernelName:as,backendName:"webgl",kernelFunc:Wq},Vq="return exp(x) - 1.0;",Hq=$U({opSnippet:Vq,packedOpSnippet:Vq,cpuKernelImpl:EH}),Uq={kernelName:is,backendName:"webgl",kernelFunc:Hq},Gq=$r((function e(t,n,r){Jr(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function Xq(e,t,n){var r=n.texData.get(e.dataId),a=Cl.sizeFromShape(e.shape),i=e.shape[e.shape.length-1],o=lG({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),s=o.shape,u=new Gq("real",s,t),l=new Gq("imag",s,t),c=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(u,c,"float32"),h=n.runWebGLProgram(l,c,"float32"),p=GU({inputs:{real:d,imag:h},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h);var f=lG({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(p),f}var qq={kernelName:os,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return Xq(t.input,!1,n)}},Yq=$r((function e(t,n){Jr(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function Kq(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||Cl.inferDtype(a))){var o=Cl.getArrayFromDType(i,Cl.sizeFromShape(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new Yq(r,a),u=[[a]];return t.runWebGLProgram(s,[],i,u)}var Zq,Jq={kernelName:ss,backendName:"webgl",kernelFunc:Kq},Qq=$r((function e(t){Jr(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),$q={kernelName:us,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new Qq(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},eY="return floor(x);",tY=$U({opSnippet:eY,packedOpSnippet:eY,cpuKernelImpl:TH}),nY={kernelName:ls,backendName:"webgl",kernelFunc:tY},rY=eG({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),aY={kernelName:cs,backendName:"webgl",kernelFunc:rY},iY=$r((function e(t){Jr(this,e),this.variableNames=["A"];var n=lV(),r=u(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),oY=$r((function e(t){Jr(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=lV(),r=u(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),sY={kernelName:sl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,l=u(o?[a.videoWidth,a.videoHeight]:[a.width,a.height],2),c=l[0],d=l[1],h=[d,c],p=[d,c,i];(s||o)&&(null==Zq&&(Zq=document.createElement("canvas").getContext("2d")),Zq.canvas.width=c,Zq.canvas.height=d,Zq.drawImage(a,0,0,c,d),a=Zq.canvas);var f=n.makeTensorInfo(h,"int32");n.texData.get(f.dataId).usage=2,n.gpgpu.uploadPixelDataToTexture(n.getTexture(f.dataId),a);var m=Zi().getBool("WEBGL_PACK")?new oY(p):new iY(p),g=n.runWebGLProgram(m,[f],"int32");return n.disposeData(f.dataId),g}};var uY={kernelName:cl,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=n.bias,u=n.preluActivationWeights,l=a.strides,c=a.pad,d=a.dataFormat,h=a.dilations,p=a.dimRoundingMode,f=a.activation,m=a.leakyreluAlpha,g=$b.convertConv2DDataFormat(d),v=$b.computeConv2DInfo(i.shape,o.shape,l,h,c,p,!1,g),y=[];if(1!==v.filterHeight||1!==v.filterWidth||1!==v.dilationHeight||1!==v.dilationWidth||1!==v.strideHeight||1!==v.strideWidth||"SAME"!==v.padInfo.type&&"VALID"!==v.padInfo.type)if(Zi().getBool("WEBGL_CONV_IM2COL"))t=qX({x:i,filter:o,convInfo:v,backend:r,bias:s,activation:f,preluActivationWeights:u,leakyreluAlpha:m});else{var b=null!=s,x=null!=u,A="leakyrelu"===f,w=f?tG(f,!1):null,k=new VX(v,b,w,x,A),S=[i,o],C=function(e,t){if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){var n=lG({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return y.push(n),n}return e};if(b&&S.push(C(s,d)),x&&S.push(C(u,d)),A){var I=r.makeTensorInfo([],"float32",Cl.createScalarValue(m,"float32"));S.push(I),y.push(I)}t=r.runWebGLProgram(k,S,"float32")}else t=XX({x:i,filter:o,convInfo:v,backend:r,bias:s,activation:f,preluActivationWeights:u,leakyreluAlpha:m});var E=lG({inputs:{x:t},backend:r,attrs:{shape:v.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),E}};var lY={kernelName:dl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dilations,d=r.dimRoundingMode,h=r.activation,p=r.leakyreluAlpha,f=[],m=c;null==m&&(m=[1,1]),Cl.assert($b.eitherStridesOrDilationsAreOne(u,m),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(u," and dilations '").concat(m,"'")}));var g,v=$b.computeConv2DInfo(a.shape,i.shape,u,m,l,d,!0),y=Zi().getBool("WEBGL_PACK_DEPTHWISECONV")&&v.strideWidth<=2&&v.outChannels/v.inChannels===1,b=h?tG(h,y):null,x=[a,i],A=null!=o,w=null!=s,k="leakyrelu"===h;if(A&&x.push(o),w&&x.push(s),k){var S=n.makeTensorInfo([],"float32",Cl.createScalarValue(p,"float32"));x.push(S),f.push(S)}g=y?new xq(v,A,b,w,k):new bq(v,A,b,w,k);var C=[[v.padInfo.top,v.padInfo.left],[v.strideHeight,v.strideWidth],[v.dilationHeight,v.dilationWidth],[v.inHeight,v.inWidth]],I=n.runWebGLProgram(g,x,"float32",C);return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),I}},cY=$r((function e(t,n,r,a){Jr(this,e),this.sliceDim=t,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;var i=PV(n.length),o=PV(r.length),s=this.sliceDim>1?"strides[j]":"strides",u=PV(a.length),l=a.length>1?"paramsShape[j]":"paramsShape";this.userCode="\n        ".concat(i," strides = ").concat(i,"(").concat(this.strides,");\n        ").concat(u," paramsShape = ").concat(u,"(").concat(this.paramsShape,");\n         void main() {\n          ").concat(o," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            out_of_bounds = out_of_bounds || index < 0;\n            out_of_bounds = out_of_bounds || index >= ").concat(l,";\n            flattenIndex += index * ").concat(s,";\n          }\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}));var dY={kernelName:ps,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=Cl.sizeFromShape(r.shape),l=u($b.prepareAndValidate(r,a),4),c=l[0],d=l[1],h=l[2],p=l[3],f=lG({inputs:{x:a},backend:n,attrs:{shape:[d,o]}}),m=lG({inputs:{x:r},backend:n,attrs:{shape:[Cl.sizeFromShape(r.shape)/h,h]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var g=n.readSync(a.dataId),v=n.bufferSync(r),y=NH(g,v,r.dtype,d,o,h,p,r.shape,s);return n.makeTensorInfo(c,r.dtype,y.values)}var b=new cY(o,p,[d,h],r.shape),x=n.runWebGLProgram(b,[m,f],m.dtype),A=lG({inputs:{x:x},backend:n,attrs:{shape:c}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(x),A}},hY=$r((function e(t,n){Jr(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=PV(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function pY(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,u=Cl.parseAxisParam(o,a.shape)[0];Zi().get("DEBUG")&&function(){for(var e=n.readSync(i.dataId),t=a.shape[u],r=function(n){var r=e[n];Cl.assert(r<=t-1&&r>=0,(function(){return"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")}))},o=0;o<e.length;++o)r(o)}();var l=$b.segment_util.collectGatherOpShapeInfo(a,i,u,s),c=Cl.sizeFromShape(i.shape),d=[],h=lG({inputs:{x:a},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),p=lG({inputs:{x:i},backend:n,attrs:{shape:[l.batchSize,c/l.batchSize]}});d.push(h),d.push(p);var f=[l.batchSize,l.outerSize,c/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var m=n.bufferSync(p),g=n.bufferSync(h),v=_H(g,m,f);return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(l.outputShape,v.dtype,v.values)}var y=new hY(h.shape,f),b=n.runWebGLProgram(y,[h,p],h.dtype);d.push(b);var x=lG({inputs:{x:b},backend:n,attrs:{shape:l.outputShape}});return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}var fY={kernelName:hs,backendName:"webgl",kernelFunc:pY},mY=eG({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:MH,dtype:"bool"}),gY={kernelName:fs,backendName:"webgl",kernelFunc:mY},vY=eG({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:RH}),yY={kernelName:ms,backendName:"webgl",kernelFunc:vY};var bY={kernelName:vs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return Xq(t.input,!0,n)}},xY=$U({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),AY={kernelName:bs,backendName:"webgl",kernelFunc:xY},wY=$U({opSnippet:"return float(isinf(x));",dtype:"bool"}),kY={kernelName:xs,backendName:"webgl",kernelFunc:wY},SY=$U({opSnippet:"return float(isnan(x));",dtype:"bool"}),CY={kernelName:As,backendName:"webgl",kernelFunc:SY},IY=eG({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:OH,dtype:"bool"}),EY={kernelName:ks,backendName:"webgl",kernelFunc:IY},TY=eG({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:PH,dtype:"bool"}),NY={kernelName:Ss,backendName:"webgl",kernelFunc:TY};var _Y={kernelName:Cs,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=FH(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},MY=$U({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:DH}),RY={kernelName:Is,backendName:"webgl",kernelFunc:MY},OY=$U({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),PY={kernelName:Es,backendName:"webgl",kernelFunc:OY},FY=eG({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),DY={kernelName:Ts,backendName:"webgl",kernelFunc:FY},LY=$U({opSnippet:"return float(!(x >= 1.0));"}),zY={kernelName:Ns,backendName:"webgl",kernelFunc:LY},BY=eG({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),WY={kernelName:_s,backendName:"webgl",kernelFunc:BY},jY=$r((function e(t,n,r,a,i){Jr(this,e),this.variableNames=["x"],this.outputShape=[];var o=n,s=t[3]-1;this.outputShape=t;var u,l="float(".concat(r,") + float(").concat(a,") * sum");u=.5===i?"inversesqrt(".concat(l,")"):1===i?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(o,"; j <= ").concat(o,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(s,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(u,";\n        setOutput(val);\n      }\n    ")})),VY=$r((function e(t,n,r,a,i){Jr(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o=n,s=t[3]-1;this.outputShape=t;var u,l="float(".concat(r,") + float(").concat(a,") * sum");u=.5===i?"inversesqrt(".concat(l,")"):1===i?"1.0/(".concat(l,")"):"exp(log(".concat(l,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(o,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(o,"; j <= ").concat(o,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(s,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(u,";\n        setOutput(result);\n      }\n    ")})),HY={kernelName:Ps,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta,l=Zi().getBool("WEBGL_PACK_NORMALIZATION")?new VY(a.shape,i,o,s,u):new jY(a.shape,i,o,s,u);return n.runWebGLProgram(l,[a],a.dtype)}},UY=$r((function e(t,n,r,a,i){Jr(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),GY={kernelName:Fs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,l=r.alpha,c=r.beta,d=new UY(a.shape,s,u,l,c);return n.runWebGLProgram(d,[a,i,o],a.dtype)}};function XY(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=a.shape.length,l=Cl.parseAxisParam(i,a.shape),c=l,d=$b.getAxesPermutation(c,s),h=null!=d,p=n.shouldExecuteOnCPU([a]),f=a;if(h){if(p){for(var m=n.texData.get(f.dataId).values,g=new Array(s),v=0;v<g.length;v++)g[v]=a.shape[d[v]];var y=sU(m,a.shape,a.dtype,d,g);f=n.makeTensorInfo(g,a.dtype),n.texData.get(f.dataId).values=y}else f=gG(a,d,n);c=$b.getInnerMostAxes(c.length,s)}$b.assertAxesAreInnerMostDims("max",c,s);var b,x=u($b.computeOutAndReduceShapes(f.shape,c),2),A=x[0],w=x[1],k=A;if(o&&(k=$b.expandShapeToKeepDim(A,l)),p){m=n.texData.get(f.dataId).values,g=LH(m,Cl.sizeFromShape(w),k,a.dtype);b=n.makeTensorInfo(k,a.dtype),(y=n.texData.get(b.dataId)).values=g}else b=function(e,t,n,r){var a=Cl.sizeFromShape(t),i=lG({inputs:{x:e},attrs:{shape:[Cl.sizeFromShape(e.shape)/a,a]},backend:r}),o=pG(i,e.dtype,"max",r),s=lG({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(f,w,k,n);return h&&n.disposeIntermediateTensorInfo(f),b}var qY={kernelName:Ds,backendName:"webgl",kernelFunc:XY},YY=eG({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:zH}),KY={kernelName:Ls,backendName:"webgl",kernelFunc:YY};var ZY={kernelName:zs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;sV(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Cl.assert($b.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(1,"'")}));var l=$b.computePool2DInfo(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&Cl.arraysEqual(l.inShape,l.outShape))return HU({inputs:{x:a},backend:n});var c=new eX(l,"max",!1);return n.runWebGLProgram(c,[a],a.dtype)}};var JY={kernelName:Ws,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,c=$b.computePool3DInfo(a.shape,i,o,[1,1,1],s,l,u),d=new tX(c,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}},QY=$r((function e(t){Jr(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,u=o-1-t.padInfo.left,l=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(l," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),$Y=$r((function e(t){Jr(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,l=t.effectiveFilterHeight,c=t.effectiveFilterWidth,d=u-1-t.padInfo.front,h=l-1-t.padInfo.top,p=c-1-t.padInfo.left,f=u*l*c-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(d,", ").concat(h,", ").concat(p,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(l,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(c,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(f," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(l," * ").concat(c," +\n                  wR * ").concat(c," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var eK={kernelName:js,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode,c=$b.computePool3DInfo(i.shape,o,s,[1,1,1],u,l),d=new tX(c,"max",!0),h=n.runWebGLProgram(d,[i],i.dtype),p=new $Y(c),f=n.runWebGLProgram(p,[a,h],i.dtype);return n.disposeIntermediateTensorInfo(h),f}};var tK={kernelName:Bs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;sV([i,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,l=r.pad,c=r.dimRoundingMode,d=$b.computePool2DInfo(o.shape,s,u,1,l,c),h=new eX(d,"max",!0),p=n.runWebGLProgram(h,[o],o.dtype),f=new QY(d),m=n.runWebGLProgram(f,[a,p],o.dtype);return n.disposeIntermediateTensorInfo(p),m}};var nK={kernelName:Vs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,l=n.includeBatchInIndex,c=r;Cl.assert(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var d=[1,1];Cl.assert($b.eitherStridesOrDilationsAreOne(o,d),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(d,"'")}));var h=$b.computePool2DInfo(a.shape,i,o,d,s),p=function(e,t,n,r){var a=new eX(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new eX(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,l,h,c),f=u(p,2);return[f[0],f[1]]}};var rK={kernelName:Hs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.keepDims,o=n.axis,s=r,l=a.shape.length,c=Cl.parseAxisParam(o,a.shape),d=c,h=$b.getAxesPermutation(d,l),p=null!=h,f=s.shouldExecuteOnCPU([a]),m=[],g=a;if(p){if(f){for(var v=s.texData.get(g.dataId).values,y=new Array(l),b=0;b<y.length;b++)y[b]=a.shape[h[b]];var x=sU(v,a.shape,a.dtype,h,y);g=s.makeTensorInfo(y,a.dtype),s.texData.get(g.dataId).values=x}else g=gG(a,h,s);m.push(g),d=$b.getInnerMostAxes(d.length,l)}$b.assertAxesAreInnerMostDims("sum",d,l);var A=u($b.computeOutAndReduceShapes(g.shape,d),2),w=A[0],k=A[1],S=w;i&&(S=$b.expandShapeToKeepDim(w,c));for(var C=function(e,t,n,r){var a=Cl.sizeFromShape(t),i=lG({inputs:{x:e},attrs:{shape:[Cl.sizeFromShape(e.shape)/a,a]},backend:r}),o=pG(i,"float32","mean",r),s=lG({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(g,k,S,s),I=0,E=m;I<E.length;I++){var T=E[I];s.disposeIntermediateTensorInfo(T)}return C}};var aK={kernelName:Us,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,l=Cl.parseAxisParam(i,a.shape),c=l,d=$b.getAxesPermutation(c,s),h=a;null!=d&&(h=bG({inputs:{x:a},backend:n,attrs:{perm:d}}),c=$b.getInnerMostAxes(c.length,a.shape.length)),$b.assertAxesAreInnerMostDims("min",c,s);var p,f=u($b.computeOutAndReduceShapes(h.shape,c),2),m=f[0],g=f[1],v=lG({inputs:{x:h},backend:n,attrs:{shape:[-1,Cl.sizeFromShape(g)]}}),y=pG(v,v.dtype,"min",n);return p=lG(o?{inputs:{x:y},backend:n,attrs:{shape:$b.expandShapeToKeepDim(m,l)}}:{inputs:{x:y},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(y),null!=d&&n.disposeIntermediateTensorInfo(h),p}},iK=eG({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:BH}),oK={kernelName:Gs,backendName:"webgl",kernelFunc:iK},sK=$r((function e(t,n,r){Jr(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=PV(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),l="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(l,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(l,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(l,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(l,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),uK=$r((function e(t,n,r){Jr(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=PV(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=cU("rc",a),l=cU("source",a),c="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(l.slice(-2).join(),")"),h="reflect"===r?0:1,p="";if(1===a){var f="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(h,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(h,";\n        }\n        source -= start;\n      ");p="\n        ".concat(i," rc = outputLoc;\n        ").concat(f,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(c,") {\n          ").concat(f,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(d,");\n        }\n      ")}else{var m="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(h,") +\n                gte * ((end - 1) * 2 - source + ").concat(h,");\n        source -= start;\n      ");p="\n        ".concat(i," rc = outputLoc;\n        ").concat(m,"\n        result[0] = getChannel(getX(").concat(l.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(c,") {\n          ").concat(m,"\n          result[1] = getChannel(getX(").concat(l.join(),"), ").concat(d,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(m,"\n          result[2] = getChannel(getX(").concat(l.join(),"), ").concat(d,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(c,") {\n            ").concat(m,"\n            result[3] = getChannel(getX(").concat(l.join(),"), ").concat(d,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),lK={kernelName:Xs,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=Zi().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new uK(a.shape,i,o):new sK(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},cK=eG({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),dK={kernelName:qs,backendName:"webgl",kernelFunc:cK},hK=$r((function e(t,n,r){Jr(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),pK=eG({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),fK={kernelName:Jo,backendName:"webgl",kernelFunc:pK},mK="return a - b;",gK=eG({opSnippet:mK,packedOpSnippet:mK,supportsComplex:!0,cpuKernelImpl:aU}),vK={kernelName:Yu,backendName:"webgl",kernelFunc:gK};function yK(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=Cl.parseAxisParam([i],a.shape),s=XY({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),u=$b.expandShapeToKeepDim(s.shape,o),l=lG({inputs:{x:s},backend:n,attrs:{shape:u}}),c=gK({inputs:{a:a,b:l},backend:n}),d=zq({inputs:{x:c},backend:n}),h=vG({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),p=lG({inputs:{x:h},backend:n,attrs:{shape:u}}),f=pK({inputs:{a:d,b:p},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(p),f}var bK={kernelName:Du,backendName:"webgl",kernelFunc:yK};var xK={kernelName:Ys,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,u=s?a:yK({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),l=u.shape[0],c=u.shape[1],d=new hK(l,c,i),h=[[o]],p=n.runWebGLProgram(d,[u],"int32",h);return s||n.disposeIntermediateTensorInfo(u),p}};var AK={kernelName:Zs,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=u(jH(i.values,a.shape,a.dtype),2),s=o[0],l=o[1];return r.makeTensorInfo(l,a.dtype,s)}return t=Zi().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new MU(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new vU(a.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[a],a.dtype)}},wK=$x.nonMaxSuppressionV3Impl;var kK={kernelName:Qs,backendName:"webgl",kernelFunc:function(e){$b.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=n.readSync(a.dataId),c=n.readSync(i.dataId),d=wK(l,c,o,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},SK=$x.nonMaxSuppressionV4Impl;var CK={kernelName:$s,backendName:"webgl",kernelFunc:function(e){$b.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.padToMaxOutputSize,c=n.readSync(a.dataId),d=n.readSync(i.dataId),h=SK(c,d,o,s,u,l),p=h.selectedIndices,f=h.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}},IK=$x.nonMaxSuppressionV5Impl;var EK={kernelName:eu,backendName:"webgl",kernelFunc:function(e){$b.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.softNmsSigma,c=n.readSync(a.dataId),d=n.readSync(i.dataId),h=IK(c,d,o,s,u,l),p=h.selectedIndices,f=h.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([f.length],"float32",new Float32Array(f))]}},TK=$r((function e(t,n,r,a){Jr(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),NK={kernelName:nu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue,u=Cl.sizeFromShape(a.shape),l=new TK(u,i,o,s),c=lG({inputs:{x:a},backend:n,attrs:{shape:[u]}}),d=n.runWebGLProgram(l,[c],a.dtype);n.disposeIntermediateTensorInfo(c);var h=lG({inputs:{x:d},backend:n,attrs:{shape:[].concat(ta(a.shape),[i])}});return n.disposeIntermediateTensorInfo(d),h}};function _K(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=wX({inputs:{input:r},backend:n}),i=_K({inputs:{x:a},backend:n}),o=LX({inputs:{input:r},backend:n}),s=_K({inputs:{x:o},backend:n}),u=GU({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return Kq({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var MK={kernelName:il,backendName:"webgl",kernelFunc:_K};var RK={kernelName:tu,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=wX({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=LX({inputs:{input:a},backend:r}),u=_K({inputs:{x:s},backend:r}),l=GU({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),l}return Kq({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var OK={kernelName:ru,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Wq({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){Cl.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),Cl.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=Wq({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=WX({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}},PK=$r((function e(t,n,r){Jr(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=PV(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),FK=$r((function e(t,n,r){Jr(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=PV(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=cU("rc",a),l=cU("source",a),c="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(l.slice(-2).join(),")"),h=["".concat(i," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(c,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(c,") {")],p=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",f="",m=0,g=1===a?2:4;m<g;m++)f+="\n        ".concat(h[m],"\n        if (").concat(p,") {\n          result[").concat(m,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(m,"] = getChannel(getX(").concat(l.join(),"), ").concat(d,");\n        }\n      ");f+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(f,"\n        setOutput(result);\n      }\n    ")})),DK=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(0===Cl.sizeFromShape(a.shape)){var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return Kq({backend:n,attrs:{shape:s,value:o,dtype:a.dtype}})}var u=Zi().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new FK(a.shape,i,o):new PK(a.shape,i,o),l=[[o]];return n.runWebGLProgram(u,[a],a.dtype,l)},LK={kernelName:au,backendName:"webgl",kernelFunc:DK},zK=eG({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),BK={kernelName:ou,backendName:"webgl",kernelFunc:zK};var WK={kernelName:uu,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims,l=i.shape.length,c=[],d=Cl.parseAxisParam(o,i.shape),h=d,p=$b.getAxesPermutation(h,l),f=i;if(null!=p&&(f=bG({inputs:{x:i},backend:r,attrs:{perm:p}}),h=$b.getInnerMostAxes(h.length,l),c.push(f)),$b.assertAxesAreInnerMostDims("prod",h,l),r.shouldExecuteOnCPU([f])){var m=r.texData.get(f.dataId).values,g=HH(f.shape,f.dtype,m,h),v=g.outVals,y=g.outShape,b=g.outDtype;t=r.makeTensorInfo(y,b,v)}else{var x=u($b.computeOutAndReduceShapes(f.shape,h),2),A=x[0],w=x[1],k=Cl.sizeFromShape(w),S=lG({inputs:{x:f},backend:r,attrs:{shape:[-1,k]}}),C=pG(S,vc(i.dtype),"prod",r);t=lG({inputs:{x:C},backend:r,attrs:{shape:A}}),c.push(S),c.push(C)}if(s){c.push(t);var I=$b.expandShapeToKeepDim(t.shape,d);t=lG({inputs:{x:t},backend:r,attrs:{shape:I}})}return c.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},jK=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=UH(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},VK={kernelName:lu,backendName:"webgl",kernelFunc:jK},HK=$U({opSnippet:"return 1.0 / x;"}),UK={kernelName:du,backendName:"webgl",kernelFunc:HK},GK=$U({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),XK={kernelName:hu,backendName:"webgl",kernelFunc:GK},qK=$U({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),YK={kernelName:yu,backendName:"webgl",kernelFunc:qK},KK=$r((function e(t,n,r,a,i){Jr(this,e),this.variableNames=["A"],this.outputShape=[];var o=u(t,4),s=o[0],l=o[1],c=o[2],d=o[3];this.outputShape=[s,n,r,d];var h,p=[a&&n>1?l-1:l,a&&r>1?c-1:c],f=[a&&n>1?n-1:n,a&&r>1?r-1:r];h=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(p[0]/f[0],",\n          ").concat(p[1]/f[1],");\n      const vec2 inputShapeRC = vec2(").concat(l,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),ZK=$r((function e(t,n,r,a,i){Jr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=u(t,4),s=o[0],l=o[1],c=o[2],d=o[3];this.outputShape=[s,n,r,d];var h,p=[a&&n>1?l-1:l,a&&r>1?c-1:c],f=[a&&n>1?n-1:n,a&&r>1?r-1:r];h=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(p[0]/f[0],",\n          ").concat(p[1]/f[1],",\n          ").concat(p[1]/f[1],");\n      const vec3 inputShapeRC = vec3(").concat(l,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(d-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var JK={kernelName:gu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=u(r.size,2),l=s[0],c=s[1],d=Zi().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ZK(a.shape,l,c,i,o):new KK(a.shape,l,c,i,o);return n.runWebGLProgram(d,[a],"float32")}},QK=$r((function e(t,n,r){Jr(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=u(n,3),i=a[1],o=a[2],s=u(t,3),l=s[1],c=s[2],d=[r&&l>1?i-1:i,r&&c>1?o-1:o],h=[r&&l>1?l-1:l,r&&c>1?c-1:c],p=d[0]/h[0],f=d[1]/h[1],m=1/p,g=1/f,v=2*Math.ceil(m)+2,y=2*Math.ceil(g)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(p,");\n        const float widthScale = float(").concat(f,");\n\n        const float invHeightScale = float(").concat(m,");\n        const float invWidthScale = float(").concat(g,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(l,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var $K={kernelName:vu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new QK(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},eZ=$r((function e(t,n,r,a,i){Jr(this,e),this.variableNames=["A"],this.outputShape=[];var o=u(t,4),s=o[0],l=o[1],c=o[2],d=o[3];this.outputShape=[s,n,r,d];var h,p=[a&&n>1?l-1:l,a&&r>1?c-1:c],f=[a&&n>1?n-1:n,a&&r>1?r-1:r],m=a?"0.5":"0.0";h=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(p[0]/f[0],",\n          ").concat(p[1]/f[1],");\n      const vec2 inputShapeRC = vec2(").concat(l,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(m,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),tZ=$r((function e(t,n,r,a,i){Jr(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=u(t,4),s=o[0],l=o[1],c=o[2],d=o[3];this.outputShape=[s,n,r,d];var h,p=[a&&n>1?l-1:l,a&&r>1?c-1:c],f=[a&&n>1?n-1:n,a&&r>1?r-1:r],m=a?"0.5":"0.0";h=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(p[0]/f[0],",\n          ").concat(p[1]/f[1],",\n          ").concat(p[1]/f[1],");\n      const vec3 inputShapeRC = vec3(").concat(l,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(h,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(m,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(d-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var nZ={kernelName:fu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=u(r.size,2),l=s[0],c=s[1],d=Zi().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new tZ(a.shape,l,c,i,o):new eZ(a.shape,l,c,i,o);return n.runWebGLProgram(d,[a],a.dtype)}},rZ=$r((function e(t,n,r){Jr(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=u(n,3),i=a[1],o=a[2],s=u(t,3),l=s[1],c=s[2],d=[r&&l>1?i-1:i,r&&c>1?o-1:o],h=[r&&l>1?l-1:l,r&&c>1?c-1:c],p=d[0]/h[0],f=d[1]/h[1],m=1/p,g=1/f,v=2*Math.ceil(m)+2,y=2*Math.ceil(g)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(p,");\n        const float widthScale = float(").concat(f,");\n\n        const float invHeightScale = float(").concat(m,");\n        const float invWidthScale = float(").concat(g,");\n\n        const int winHeight = int(").concat(v,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(l,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(d[0],") *\n                (float(dyR) / float(").concat(h[0],"));\n\n            float sourceFracCol =\n                float(").concat(d[1],") *\n                  (float(dyC) / float(").concat(h[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var aZ={kernelName:mu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new rZ(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},iZ=$r((function e(t,n){Jr(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=PV(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),oZ=$r((function e(t,n){Jr(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=cU("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=PV(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var sZ={kernelName:bu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,s=Cl.parseAxisParam(i,a.shape);if(0===o)return HU({inputs:{x:a},backend:n});var u=Zi().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new oZ(a.shape,s):new iZ(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},uZ=$r((function e(t,n){Jr(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var i="";i="number"==typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),lZ={kernelName:ul,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,l=r,c=new uZ(a.shape,o),d=u($b.getImageCenter(s,a.shape[1],a.shape[2]),2),h=[[d[0],d[1],Math.sin(i),Math.cos(i)]];return l.runWebGLProgram(c,[a],a.dtype,h)}},cZ=$U({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),dZ={kernelName:xu,backendName:"webgl",kernelFunc:cZ},hZ=$U({opSnippet:"return inversesqrt(x);",cpuKernelImpl:GH}),pZ={kernelName:Au,backendName:"webgl",kernelFunc:hZ},fZ=$r((function e(t,n,r,a,i,o){Jr(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=PV(i.length),u=PV(o.length),l="";1===r?l="i":2===r&&(l="i, j");var c="getIndices(".concat(l,")"),d="";1===a?d="i":2===a&&(d="i, coords[1]");var h="getUpdates(".concat(d,")"),p=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(c,");\n              flattenedIndex += index * ").concat(p,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(h,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}));var mZ={kernelName:wu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=$b.calculateShapes(i,a,o),u=s.sliceRank,l=s.numUpdates,c=s.sliceSize,d=s.strides,h=s.outputSize,p=[h/c,c];if(0===h)return n.makeTensorInfo(o,a.dtype);var f=lG({inputs:{x:a},backend:n,attrs:{shape:[l,u]}}),m=lG({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0])),v=new fZ(l,u,f.shape.length,m.shape.length,d,p),y=n.runWebGLProgram(v,[m,f,g],m.dtype),b=lG({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),b}},gZ=$r((function e(t,n,r,a){Jr(this,e),this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];var i="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),o=2===Zi().getNumber("WEBGL_VERSION")?"while (left < right) {":i,s="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(o,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}));var vZ={kernelName:ku,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=new gZ(a.shape[0],a.shape[1],i.shape[1],o),u=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",u)}},yZ=$r((function e(t,n,r){var a,i;if(Jr(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],l=0;l<n.length;l++)u.push("".concat(o[l])),l<t&&s.push("".concat(o[l]));a=s.join(),i=u.join()}var c=PV(r);this.userCode="\n      void main() {\n        ".concat(c," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}));var bZ={kernelName:Su,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new yZ(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],gc(a.dtype,i.dtype))}},xZ=$U({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat($b.SELU_SCALEALPHA,";\n  float scale = ").concat($b.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),AZ={kernelName:Cu,backendName:"webgl",kernelFunc:xZ},wZ=$U({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:qH}),kZ={kernelName:_u,backendName:"webgl",kernelFunc:wZ},SZ=$U({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),CZ={kernelName:Nu,backendName:"webgl",kernelFunc:SZ},IZ=$U({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),EZ={kernelName:Eu,backendName:"webgl",kernelFunc:IZ},TZ=$U({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),NZ={kernelName:Tu,backendName:"webgl",kernelFunc:TZ},_Z=$U({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),MZ={kernelName:Mu,backendName:"webgl",kernelFunc:_Z},RZ={kernelName:Pu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;Cl.assert(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,ta(o));for(var l=1+i.length;l<a.shape.length;++l)u.push([0,0]);var c=[],d=DK({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),h=$b.getReshaped(d.shape,i,s,!1),p=$b.getPermuted(h.length,i.length,!1),f=$b.getReshapedPermuted(d.shape,i,s,!1),m=lG({inputs:{x:d},backend:n,attrs:{shape:h}}),g=bG({inputs:{x:m},backend:n,attrs:{perm:p}}),v=lG({inputs:{x:g},backend:n,attrs:{shape:f}});return c.push(d),c.push(m),c.push(g),c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}};var OZ={kernelName:Lu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.readSync(r.dataId),l=n.readSync(a.dataId),c=n.readSync(i.dataId),d=n.readSync(o.dataId)[0],h=u(ZH(s,r.shape,r.dtype,l,a.dtype,c,d),5),p=h[0],f=h[1],m=h[2],g=h[3],v=h[4];return[n.makeTensorInfo(f,r.dtype,p),n.makeTensorInfo([f[0]],a.dtype,m),n.makeTensorInfo([g.length],"bool",new Uint8Array(g.map((function(e){return Number(e)})))),n.makeTensorInfo([v.length],r.dtype,new Int32Array(v))]}};var PZ={kernelName:zu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),c=u(JH(s,r.shape,r.dtype,o,l),3),d=c[0],h=c[1],p=c[2];return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([p.length],i.dtype,new Int32Array(p))]}};var FZ={kernelName:Bu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),l=n.readSync(i.dataId),c=u(QH(o,r.shape,r.dtype,s,l,!0),2),d=c[0],h=c[1];return n.makeTensorInfo(h,r.dtype,d)}};var DZ={kernelName:Wu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),l=n.readSync(i.dataId),c=u(QH(o,r.shape,r.dtype,s,l),2),d=c[0],h=c[1];return n.makeTensorInfo(h,r.dtype,d)}};var LZ={kernelName:ju,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=$b.calculateShapes(i,a,s),l=u.sliceRank,c=u.numUpdates,d=u.sliceSize,h=u.strides,p=u.outputSize;if("string"===i.dtype){var f=n.bufferSync(a),m=n.bufferSync(i),g=Cl.decodeString(n.readSync(o.dataId)[0]),v=XH(f,m,s,p,d,c,l,h,g,false);return n.makeTensorInfo(s,v.dtype,v.values)}var y=new fZ(c,l,a.shape.length,i.shape.length,h,[p,1],false),b=n.runWebGLProgram(y,[i,a,o],i.dtype),x=lG({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(b),x}};var zZ={kernelName:Fu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=r.axis,s=Cl.parseAxisParam(o,a.shape)[0],u=$b.prepareSplitSize(a,i,s),l=a.shape.length,c=new Array(l).fill(0),d=a.shape.slice();return u.map((function(e){var t=ta(d);t[s]=e;var r=mX({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[s]+=e,r}))}},BZ="return sqrt(x);",WZ=$U({opSnippet:BZ,packedOpSnippet:BZ,cpuKernelImpl:$H}),jZ={kernelName:Ru,backendName:"webgl",kernelFunc:WZ},VZ=$U({opSnippet:"return x * x;"}),HZ={kernelName:Hu,backendName:"webgl",kernelFunc:VZ},UZ="return (a - b) * (a - b);",GZ=eG({opSnippet:UZ,packedOpSnippet:UZ}),XZ={kernelName:Vu,backendName:"webgl",kernelFunc:GZ};var qZ={kernelName:ol,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=yU+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new vU(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},YZ=$r((function e(t,n,r){Jr(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=PV(r.length),o=PV(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var KZ={kernelName:Uu,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,u=a.strides,l=a.beginMask,c=a.endMask,d=a.ellipsisMask,h=a.newAxisMask,p=a.shrinkAxisMask,f=Sp.sliceInfo(i.shape,o,s,u,l,c,d,h,p),m=f.finalShapeSparse,g=f.finalShape,v=f.isIdentity,y=f.sliceDim0,b=f.isSimpleSlice,x=f.begin,A=f.end,w=f.strides;if(v)t=lG({inputs:{x:i},backend:r,attrs:{shape:g}});else if(y||b){Cl.assert(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var k=Sp.computeOutShape(x,A,w),S=mX({inputs:{x:i},backend:r,attrs:{begin:x,size:k}});t=lG({inputs:{x:S},backend:r,attrs:{shape:g}}),r.disposeIntermediateTensorInfo(S)}else if(r.shouldExecuteOnCPU([i])){var C=r.readSync(i.dataId),I=eh(i.shape,i.dtype,C),E=eU(m,I,w,x);t=r.makeTensorInfo(g,i.dtype,E.values)}else{var T=new YZ(x,w,m);t=r.runWebGLProgram(T,[i],i.dtype)}var N=lG({inputs:{x:t},backend:r,attrs:{shape:g}});return r.disposeIntermediateTensorInfo(t),N}};var ZZ={kernelName:Gu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,l=r.padWidth,c=r.preserveShortSequences,d=t.data,h=t.dataSplits,p=n.readSync(d.dataId),f=n.readSync(h.dataId),m=u(tU(p,f,a,i,o,s,l,c),2),g=m[0],v=m[1];return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(h.shape,"int32",v)]}};var JZ={kernelName:Xu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=n.readSync(a.dataId),s=n.readSync(i.dataId)[0],l=u(nU(o,s,r),3),c=l[0],d=l[1],h=l[2],p=d.length;return[n.makeTensorInfo([p,2],"int32",c),n.makeTensorInfo([p],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(h))]}};var QZ={kernelName:qu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=n.readSync(a.dataId),o=rU(i,r);return n.makeTensorInfo(a.shape,"int32",o)}},$Z=$U({opSnippet:"return tan(x);"}),eJ={kernelName:Ku,backendName:"webgl",kernelFunc:$Z},tJ=$U({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),nJ={kernelName:Zu,backendName:"webgl",kernelFunc:tJ},rJ=$r((function e(t,n){Jr(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=PV(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}));function aJ(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if("string"===a.dtype||a.shape.length>5){var o=n.readSync(a.dataId),s="string"===a.dtype?o.map((function(e){return Cl.decodeString(e)})):o,u=eh(a.shape,a.dtype,s),l=iU(u,i);return n.makeTensorInfo(l.shape,l.dtype,l.values)}var c=new rJ(a.shape,i);return n.runWebGLProgram(c,[a],a.dtype)}var iJ={kernelName:Ju,backendName:"webgl",kernelFunc:aJ},oJ=$r((function e(t){Jr(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),sJ=$r((function e(t){Jr(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function uJ(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function lJ(e){for(var t=1;t<e;)t*=2;return t}var cJ={kernelName:Qu,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=Zi().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=Zi().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=a.shape,d=c[c.length-1];if(n.shouldExecuteOnCPU([a])||d<s||i>l){var h=n.readSync(a.dataId),p=u(oU(h,c,a.dtype,i,o),2),f=p[0],m=p[1];return[n.makeTensorInfo(f.shape,f.dtype,f.values),n.makeTensorInfo(m.shape,m.dtype,m.values)]}if(0===i)return c[c.length-1]=0,[n.makeTensorInfo(c,a.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===d)return[a,Kq({attrs:{shape:c,dtype:"int32",value:0},backend:n})];var g=n.texData.get(a.dataId),v=null!==g&&g.isPacked,y=v?n.unpackTensor(a):a,b=Cl.sizeFromShape(c)/d,x=lG({inputs:{x:y},attrs:{shape:[b,d]},backend:n});v&&uJ(n,y);for(var A=lJ(i),w=lJ(d),k=null,S=function(){return null===k?[x,x]:[x,k]},C=function(e,t,r){var a=S(),i=new oJ(r),o=[[d],[null===k?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=k;k=n.runWebGLProgram(i,a,"int32",o),uJ(n,s)},I=1;I<A;I*=2)for(var E=2*I,T=I;T>=1;T/=2)C(E,T,[b,w]);for(var N=w;N>A;N/=2){var _=S(),M=new sJ([b,N/2]),R=[[d],[null===k?1:0],[A]],O=k;k=n.runWebGLProgram(M,_,"int32",R),uJ(n,O);for(var P=A/2,F=2*P,D=P;D>=1;D/=2)C(F,D,k.shape)}var L=k;k=mX({inputs:{x:k},backend:n,attrs:{begin:0,size:[b,i]}}),uJ(n,L);var z=pY({inputs:{x:x,indices:k},backend:n,attrs:{axis:1,batchDims:1}});uJ(n,x);var B=c.slice(0,-1);B.push(i),L=k,k=lG({inputs:{x:k},attrs:{shape:B},backend:n}),uJ(n,L);var W=z;return z=lG({inputs:{x:z},attrs:{shape:B},backend:n}),uJ(n,W),[z,k]}},dJ=$r((function e(t,n,r,a,i,o){Jr(this,e),this.variableNames=["Image","Transforms"],this.outputShape=o;var s,u="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var hJ={kernelName:$u,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.transforms,o=r.interpolation,s=r.fillMode,l=r.fillValue,c=r.outputShape,d=u(a.shape,4),h=d[0],p=d[1],f=d[2],m=d[3],g=u(null!=c?c:[p,f],2),v=g[0],y=g[1],b=new dJ(p,f,o,s,l,[h,v,y,m]);return n.runWebGLProgram(b,[a,i],"float32")}};var pJ={kernelName:tl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;sV(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=uU(o,a,i.shape,i.dtype),u=s.outputValues,l=s.outputShape,c=s.indices;return[r.makeTensorInfo(l,i.dtype,u),r.makeTensorInfo([c.length],"int32",c)]}};var fJ={kernelName:nl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],l=new Array(s-1),c=0,d=0;d<s;d++)d!==i&&(l[c++]=o.shape[d]);var h=[],p=new Array(s).fill(0),f=o.shape.slice();f[i]=1;for(var m=new Array(u),g=0;g<m.length;g++){p[i]=g;var v=mX({inputs:{x:o},backend:n,attrs:{begin:p,size:f}}),y=lG({inputs:{x:v},backend:n,attrs:{shape:l}});m[g]=y,h.push(v)}return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},mJ=$r((function e(t,n){Jr(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),l=r%4,c="\n        sumValue += dot(values, segFilter);\n    ",d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var h="";i%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(h,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(c,"\n        } else if (").concat(2===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(c,"\n        } else if (").concat(3===l,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(c,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var gJ={kernelName:rl,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,s=a.shape.length,u=[],l=0,c=$b.getAxesPermutation([l],s),d=a;null!=c&&(d=bG({inputs:{x:a},backend:n,attrs:{perm:c}}),u.push(d),l=$b.getInnerMostAxes(1,s)[0]);var h=$b.segment_util.computeOutShape(d.shape,l,o),p=Cl.sizeFromShape([d.shape[l]]),f=lG({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});u.push(f);var m=function e(t,r,a,i,o){var s=t.shape[0],l=t.shape[1],c=$b.segment_util.segOpComputeOptimalWindowSize(l,o),d=new mJ({windowSize:c,inSize:l,batchSize:s,numSegments:o},r),h=n.compileAndRun(d,[t,a],i);if(u.push(h),h.shape[1]===o)return h;var p=jK({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),f=aJ({inputs:{x:p},backend:n,attrs:{reps:[l/c]}});return u.push(p),u.push(f),e(h,r,f,i,o)}(f,"unsortedSegmentSum",i,vc(a.dtype),o),g=lG({inputs:{x:m},backend:n,attrs:{shape:h}}),v=g;if(null!=c){u.push(g);var y=$b.getUndoAxesPermutation(c);v=bG({inputs:{x:v},backend:n,attrs:{perm:y}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},vJ=0,yJ=[wG,SG,IG,TG,MG,PG,FG,DG,VG,HG,GG,qG,KG,JG,$G,nX,rX,oX,sX,uX,dX,vX,yX,bX,SX,EX,_X,XU,OX,jX,YX,$X,eq,tq,nq,rq,iq,sq,lq,fq,mq,gq,yq,Aq,Sq,Cq,Eq,Nq,_q,Rq,Oq,Fq,Lq,Bq,jq,Uq,qq,Jq,$q,nY,aY,sY,uY,lY,dY,fY,gY,yY,UU,bY,zX,AY,kY,CY,KU,EY,NY,_Y,RY,PY,DY,zY,WY,HY,GY,qY,KY,ZY,JY,eK,tK,nK,rK,aK,oK,lK,dK,xK,uG,AK,kK,CK,EK,AX,NK,RK,OK,LK,BK,QU,WK,VK,kX,fK,UK,XK,YK,cG,JK,$K,nZ,aZ,sZ,lZ,dZ,pZ,mZ,vZ,bZ,AZ,kZ,CZ,EZ,NZ,gX,bK,MZ,RZ,OZ,PZ,FZ,DZ,LZ,zZ,jZ,HZ,XZ,qZ,KZ,ZZ,JZ,QZ,vK,yG,eJ,nJ,iJ,cJ,hJ,xG,pJ,fJ,gJ,MK];vJ<yJ.length;vJ++){bl(yJ[vJ])}var bJ=Zi();bJ.registerFlag("WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE",(function(){return 15})),bJ.registerFlag("WEBGPU_CPU_FORWARD",(function(){return!0})),bJ.registerFlag("WEBGPU_MATMUL_WORK_PER_THREAD",(function(){return 4})),bJ.registerFlag("WEBGPU_USE_NAIVE_CONV2D_TRANSPOSE",(function(){return!1})),bJ.registerFlag("WEBGPU_USE_LOW_POWER_GPU",(function(){return!1})),bJ.registerFlag("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e3})),bJ.registerFlag("WEBGPU_USE_PROFILE_TOOL",(function(){return!1})),bJ.registerFlag("WEBGPU_USE_IMPORT",(function(){return!1}));var xJ="\n  if (isNaN.r) {\n    resultTemp.r = uniforms.NAN;\n  }\n  if (isNaN.g) {\n    resultTemp.g = uniforms.NAN;\n  }\n  if (isNaN.b) {\n    resultTemp.b = uniforms.NAN;\n  }\n  if (isNaN.a) {\n    resultTemp.a = uniforms.NAN;\n  }\n  ",AJ="\n  let isModRound1Bool = vec4<i32>(round(abs(b) % vec4<f32>(2.0))) == vec4<i32>(1);\n  let isModRound1 = vec4<f32>(isModRound1Bool);\n  let multiplier = sign(a) * isModRound1 + (vec4<f32>(1.0) - isModRound1);\n  var resultTemp = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  let isExpZero = b == vec4<f32>(0.0);\n  if (isExpZero.r) {\n    resultTemp.r = 1.0;\n  }\n  if (isExpZero.g) {\n    resultTemp.g = 1.0;\n  }\n  if (isExpZero.b) {\n    resultTemp.b = 1.0;\n  }\n  if (isExpZero.a) {\n    resultTemp.a = 1.0;\n  }\n  let isNaN = a < vec4<f32>(0.0) & floor(b) < b;\n  ".concat(xJ,"\n  return resultTemp;\n  ");function wJ(e,t){var n=t?xJ:"\n  if (isnan(a)) { return a; }\n  if (isnan(b)) { return b; }\n  ";return t?"\n    var resultTemp = vec4<f32>(".concat(e,"(a, b));\n    let isNaN = isnanVec4(a) | isnanVec4(b);\n    ")+n+"\n    return resultTemp;\n  ":n+"\n    return ".concat(e,"(a, b);\n  ")}function kJ(e,t){switch(e){case 0:return"return a * b;";case 1:return"return a + b;";case 2:return"return a - b;";case 3:return"return a / b;";case 4:return t?"return vec4<f32>(a == b);":"return f32(a == b);";case 5:return t?"return vec4<f32>(a > b);":"return f32(a > b);";case 6:return t?"return vec4<f32>(a >= b);":"return f32(a >= b);";case 7:return t?"return vec4<f32>(a < b);":"return f32(a < b);";case 8:return t?"return vec4<f32>(a <= b);":"return f32(a <= b);";case 9:return t?"return (vec4<f32>(a >= vec4<f32>(1.0)) *\n  vec4<f32>(b >= vec4<f32>(1.0)));":"return f32(f32(a) >= 1.0 && f32(b) >= 1.0);";case 10:return t?"return vec4<f32>(a != b);":"return f32(a != b);";case 11:return"return (a - b) * (a - b);";case 12:return t?"\n  let ia = vec4<i32>(round(a));\n  let ib = vec4<i32>(round(b));\n  let cond = ib != vec4<i32>(0);\n  var resultTemp = vec4<i32>(0);\n  let s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    resultTemp[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    resultTemp[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    resultTemp[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    resultTemp[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4<f32>(resultTemp);\n  ":"\n  let s = sign(a) * sign(b);\n  let ia = i32(round(a));\n  let ib = i32(round(b));\n  return f32(idiv(ia, ib, s));\n  ";case 14:return t?"\n  let aLessThanZero = vec4<f32>(a < vec4<f32>(0.0));\n  return (aLessThanZero * (b * a)) + ((vec4<f32>(1.0) - aLessThanZero) * a);\n  ":"if (a < 0.0) { return b * a; }  return a;";case 15:return wJ("max",t);case 16:return wJ("min",t);case 13:return t?AJ:"\n  if(a < 0.0 && floor(b) < b) {\n    return uniforms.NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  if (round(abs(b) % 2.0) != 1.0) {\n    return pow(abs(a), b);\n  }\n  return sign(a) * pow(abs(a), b);\n  ";case 17:return"return areal * breal - aimag * bimag;";case 18:return"return areal * bimag + aimag * breal;";default:throw new Error("BinaryType ".concat(e," is not implemented!"))}}function SJ(e,t){switch(e){case 0:return"return abs(a);";case 2:return"return cos(a);";case 3:return"\n  let e2x = exp(-a);\n  return (e2x + 1.0 / e2x) / 2.0;\n";case 1:return"return ceil(a);";case 4:return t?"\n  var resFloat = exp(a) - vec4<f32>(1.0);\n  if (a.r >= 0.0) {\n    resFloat.r = a.r;\n  }\n  if (a.g >= 0.0) {\n    resFloat.g = a.g;\n  }\n  if (a.b >= 0.0) {\n    resFloat.b = a.b;\n  }\n  if (a.a >= 0.0) {\n    resFloat.a = a.a;\n  }\n  return resFloat;\n":"if (a >= 0.0) { return a; }  return (exp(a) - 1.0);";case 5:return"return exp(a);";case 6:return"return exp(a) - 1.0;";case 7:return"return floor(a);";case 8:return"return a;";case 9:return"if (a < 0.0) { return 1.0/0.0; }\n  return log(a);";case 10:return"return f32(!(a >= 1.0));";case 11:return"return -a;";case 14:return t?"\n  let aLessThanZero = vec4<f32>(a < vec4<f32>(0.0));\n  return (aLessThanZero * (uniforms.alpha * a)) + ((vec4<f32>(1.0) - aLessThanZero) * a);\n":"if (a < 0.0) { return uniforms.alpha * a; } return a;";case 12:return t?"\n  return select(a, vec4<f32>(0.0), a < vec4<f32>(0.0));\n":"return select(a, 0.0, a < 0.0);";case 13:return t?"return clamp(a, vec4<f32>(0.0, 0.0, 0.0, 0.0), vec4<f32>(6.0, 6.0, 6.0, 6.0));":"return clamp(a, 0.0, 6.0);";case 15:return"return 1.0/sqrt(a);";case 18:return"return 1.0 / (1.0 + exp(-1.0 * a));";case 16:return"return sin(a);";case 17:return"\n  let e2x = exp(a);\n  return (e2x - 1.0 / e2x) / 2.0;\n";case 19:return"return sqrt(a);";case 20:return"return a * a;";case 21:return"\n  let e2x = exp(-2.0 * abs(a));\n  return sign(a) * (1.0 - e2x) / (1.0 + e2x);\n";case 22:return"return f32(i32((a)));";default:throw new Error("BinaryType ".concat(e," is not implemented!"))}}function CJ(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===e)return null;if("linear"===e)return SJ(8);if("relu"===e)return SJ(12,t);if("elu"===e)return SJ(4,t);if("relu6"===e)return SJ(13,t);if("prelu"===e)return kJ(14,t);if("sigmoid"===e)return SJ(18,t);if("leakyrelu"===e)return SJ(14,t);throw new Error("Activation ".concat(e," has not been implemented for the WebGPU backend."))}var IJ={};Ea(IJ,{ArrayBufferToTypedArray:function(){return FJ},GPUBytesPerElement:function(){return PJ},computeDispatch:function(){return NJ},computeWorkGroupSizeForConv2d:function(){return _J},computeWorkGroupSizeForMatMul:function(){return MJ},computeWorkPerThreadForConv2d:function(){return RJ},flatDispatchLayout:function(){return OJ},isWebGPUSupported:function(){return DJ},tilesFitEvenlyIntoShape:function(){return TJ}});var EJ=function(e){for(var t=1,n=0;n<e.length;n++)t*=e[n];return t};function TJ(e,t){if(e.length!==t.length)throw new Error("Cannot compute whether rank ".concat(e.length," tiles fit evenly into rank ").concat(t.length," shape - ranks must match."));return t.every((function(t,n){return t%e[n]===0}))}function NJ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=[Math.ceil(EJ(e.x.map((function(e){return t[e]})))/(n[0]*r[0])),e.y?Math.ceil(EJ(e.y.map((function(e){return t[e]})))/(n[1]*r[1])):1,e.z?Math.ceil(EJ(e.z.map((function(e){return t[e]})))/(n[2]*r[2])):1],i=a[0],o=a[1],s=a[2];return[i,o,s]}function _J(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n)return[8,8,1];var r=EJ(e.x.map((function(e){return t[e]}))),a=EJ(e.y.map((function(e){return t[e]})));return r<=4?[4,16,1]:a<=4?[16,4,1]:[16,16,1]}function MJ(e,t,n){return 1===e?[32,1,1]:1===n?[1,32,1]:[8,8,1]}function RJ(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n)return[4,4,1];var r=EJ(e.x.map((function(e){return t[e]}))),a=EJ(e.y.map((function(e){return t[e]})));return r<=4?[1,2,1]:a<=4?[2,1,1]:[2,2,1]}function OJ(e){return{x:e.map((function(e,t){return t}))}}function PJ(e){if("float32"===e||"int32"===e||"bool"===e||"string"===e)return 4;if("complex64"===e)return 8;throw new Error("Unknown dtype ".concat(e))}function FJ(e,t){if("float32"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}function DJ(){return("undefined"!=typeof window||"undefined"!=typeof WorkerGlobalScope)&&!!navigator.gpu}var LJ=function(e,t){return e?"\n        mm_Asub[inputRow][inputCol] = mm_readA(\n          t * TileInner + inputRow,\n          globalRowStart / ".concat(t," + inputCol, globalId);\n        "):"\n        mm_Asub[inputRow][inputCol] = mm_readA(\n          globalRow + innerRow,\n          t * TileInner / ".concat(t," + inputCol, globalId);\n        ")},zJ=function(e,t){return e?"\n        let ACached0 = mm_Asub[k * InnerElementSize][localRow];\n        let ACached1 = mm_Asub[k * InnerElementSize + 1][localRow];\n        let ACached2 = mm_Asub[k * InnerElementSize + 2][localRow];\n        ".concat(3===t?"":"let ACached3 = mm_Asub[k * InnerElementSize + 3][localRow];","\n        for (var i = 0; i < RowPerThread; i = i + 1) {\n          acc[i] = BCached[0] * ACached0[i] + acc[i];\n          acc[i] = BCached[1] * ACached1[i] + acc[i];\n          acc[i] = BCached[2] * ACached2[i] + acc[i];\n          ").concat(3===t?"":"acc[i] = BCached[3] * ACached3[i] + acc[i];","\n        }"):"\n        for (var i = 0; i < RowPerThread; i = i + 1) {\n          let ACached = mm_Asub[tileRow + i][k];\n          acc[i] = BCached[0] * ACached.x + acc[i];\n          acc[i] = BCached[1] * ACached.y + acc[i];\n          acc[i] = BCached[2] * ACached.z + acc[i];\n          ".concat(3===t?"":"acc[i] = BCached[3] * ACached.w + acc[i];","\n        }")};function BJ(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=i?t:r,s=i?r:t,u=i?e[1]:a;return Cl.assert((i&&t===n||r%4===0||r%3===0)&&4===e[0]&&(3===a||4===a),(function(){return"tileInner ".concat(r," must be divisible by 4|3. ColPerThread ").concat(e[0]," must be 4.\n           innerElementSize ").concat(a," must be 3|4.")})),"\n  var<workgroup> mm_Asub : array<array<vec".concat(u,"<f32>, ").concat(o/u,">, ").concat(s,">;\n  var<workgroup> mm_Bsub : array<array<vec4<f32>, ").concat(n/e[0],">, ").concat(r,">;\n\n  let RowPerThread = ").concat(e[1],";\n  let ColPerThread = ").concat(e[0],";\n  let InnerElementSize = ").concat(a,";\n  let TileInner = ").concat(r,";\n\n  @stage(compute) @workgroup_size(workGroupSizeX, workGroupSizeY, workGroupSizeZ)\n  fn main(@builtin(local_invocation_id) LocalId : vec3<u32>,\n          @builtin(global_invocation_id) GlobalId : vec3<u32>,\n          @builtin(num_workgroups) NumWorkgroups: vec3<u32>,\n          @builtin(workgroup_id) workgroupId: vec3<u32>) {\n    localId = LocalId;\n    globalId = GlobalId;\n    numWorkgroups = NumWorkgroups;\n\n    let localRow = i32(localId.y);\n    let tileRow = ").concat(1===t?"0":"localRow * RowPerThread",";\n    let tileCol = i32(localId.x);\n\n    let globalRow = ").concat(1===t?"0":"i32(globalId.y) * RowPerThread",";\n    let globalCol = i32(globalId.x);\n    let globalRowStart = i32(workgroupId.y) * ").concat(t,";\n\n    let numTiles = (uniforms.dimInner - 1) / TileInner + 1;\n\n    var acc: array<vec4<f32>, RowPerThread>;\n    var BCached : array<vec4<f32>, 4>;\n\n    // Loop over shared dimension.\n    let RowPerThreadB = TileInner / i32(workGroupSizeY);\n    let tileRowB = localRow * RowPerThreadB;\n    for (var t = 0; t < numTiles; t = t + 1) {\n        // Load one tile of A into local memory.\n        for (var innerRow = 0; innerRow < RowPerThread; innerRow = innerRow + 1) {\n            let inputRow = tileRow + innerRow;\n            let inputCol = tileCol;\n            ").concat(LJ(i,u),"\n        }\n\n        // Load one tile of B into local memory.\n        for (var innerRow = 0; innerRow < RowPerThreadB; innerRow = innerRow + 1) {\n            let inputRow = tileRowB + innerRow;\n            let inputCol = tileCol;\n            mm_Bsub[inputRow][inputCol] = mm_readB(t * TileInner + inputRow, globalCol, globalId);\n        }\n\n        workgroupBarrier();\n\n        // Compute acc values for a single thread.\n        for (var k = 0; k < TileInner / InnerElementSize; k = k + 1) {\n            BCached[0] = mm_Bsub[k * InnerElementSize][tileCol];\n            BCached[1] = mm_Bsub[k * InnerElementSize + 1][tileCol];\n            BCached[2] = mm_Bsub[k * InnerElementSize + 2][tileCol];\n            ").concat(3===a?"":"BCached[3] = mm_Bsub[k * InnerElementSize + 3][tileCol];","\n\n            ").concat(zJ(i,a),"\n        }\n\n        workgroupBarrier();\n    }\n\n    for (var innerRow = 0; innerRow < RowPerThread; innerRow = innerRow + 1) {\n        mm_write(globalRow + innerRow,\n                 globalCol,\n                 acc[innerRow], globalId);\n    }\n  }")}var WJ=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Jr(this,e),this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workGroupSize=[8,8,1],this.isVec4=!0,this.outputShape=n,this.dispatchLayout={x:[2],y:[1],z:[0]},1!==n[1]||i?this.elementsPerThread=[4,4,1]:this.elementsPerThread=[4,1,1],this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize,this.elementsPerThread);var l=null!=o,c=null!=u;l&&this.variableNames.push("bias"),c&&this.variableNames.push("preluActivationWeights"),this.tileAOuter=1!==n[1]||i?this.workGroupSize[1]*this.elementsPerThread[1]:1,this.tileBOuter=this.workGroupSize[0]*this.elementsPerThread[0],this.tileInner=this.tileBOuter,this.aShape=t,this.addBias=l,this.activation=s,this.hasPreluActivationWeights=c,this.batchAEqualOne=r,this.batchBEqualOne=a,this.transposeA=i;var d=i?t[1]:t[2];this.fitAOuter=n[1]%this.tileAOuter===0,this.fitBOuter=n[2]%this.tileBOuter===0,this.fitInner=d%this.tileInner===0,this.shaderKey="matMulPackedVec4_".concat(this.activation,"_").concat(this.fitAOuter,"_").concat(this.fitBOuter,"_").concat(this.fitInner,"_").concat(this.elementsPerThread,"_").concat(this.batchAEqualOne,"_").concat(this.batchBEqualOne,"_").concat(this.transposeA)}return $r(e,[{key:"getUserCode",value:function(){var e=this.fitAOuter&&this.fitInner?"return A[batch * batchASize + row * uniforms.aShape[2] / 4 + col]":"if (coordsInBounds2D(vec2<i32>(row, col * 4), vec2<i32>(uniforms.aShape[1], uniforms.aShape[2]))) {\n            return A[batch * batchASize + row * uniforms.aShape[2] / 4 + col];\n        }\n        return vec4<f32>(0.0)",t=this.fitInner&&this.fitBOuter?"return B[batch * batchBSize + row * uniforms.dimBOuter / 4 + col]":"if(coordsInBounds2D(vec2<i32>(row, col * 4), vec2<i32>(uniforms.dimInner, uniforms.dimBOuter))) {\n             return B[batch * batchBSize + row * uniforms.dimBOuter / 4 + col];\n        }\n        return vec4<f32>(0.0)",n="",r="";if(this.activation){var a=CJ(this.activation,this.isVec4);n=this.hasPreluActivationWeights?"fn activation(a : vec4<f32>, outCoord : vec3<i32>) -> vec4<f32> {\n                  let b = getPreluActivationWeightsByOutputCoords(outCoord);\n                  ".concat(a,"\n                }"):"\n            fn activation(a : vec4<f32>, outCoord : vec3<i32>) -> vec4<f32> {\n              ".concat(a,"\n            }"),r="value = activation(value, outCoord);"}var i=this.addBias?"value = value + getBiasByOutputCoords(outCoord);":"";return"\n      ".concat(n,"\n      fn mm_readA(row : i32, col : i32,  globalId : vec3<u32>) -> vec4<f32> {\n        ").concat(this.batchAEqualOne?"\n          let batchASize = 0;\n          let batch = 0;\n        ":"\n          let batchASize = uniforms.aShape[1] * uniforms.aShape[2] / 4;\n          let batch = i32(globalId.z);\n        ","\n\n        ").concat(e,";\n      }\n\n      fn mm_readB(row : i32, col : i32,  globalId : vec3<u32>) -> vec4<f32> {\n        ").concat(this.batchBEqualOne?"\n          let batchBSize = 0;\n          let batch = 0;\n          ":"\n          let batchBSize = uniforms.bShape[1] * uniforms.bShape[2] / 4;\n          let batch = i32(globalId.z);\n       ","\n        ").concat(t,";\n      }\n\n      fn mm_write(row : i32, col : i32, valueIn : vec4<f32>, globalId : vec3<u32>) {\n        if (row < uniforms.dimAOuter && col * 4 < uniforms.dimBOuter)\n        {\n          var value = valueIn;\n          let batch = i32(globalId.z);\n          let outCoord = vec3<i32>(batch, row, col * 4);\n          ").concat(i,"\n          ").concat(r,"\n          setOutputAtCoords(outCoord[0], outCoord[1], outCoord[2], value);\n        }\n      }\n      ").concat(BJ(this.elementsPerThread,this.tileAOuter,this.tileBOuter,this.tileInner,4,this.transposeA),"\n    ")}}]),e}();function jJ(e,t){if(Math.max.apply(Math,ta(e))>3)throw new Error("Cannot symbolically compute strides for rank > 4 tensor.");var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}var VJ=function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o={dtype:a.dtype,shape:a.shape},s=qJ(r,o,t,i),u=e.createShaderModule({code:s,label:t.constructor.name});return e.createComputePipeline({layout:n,compute:{module:u,entryPoint:"main"},label:t.constructor.name})};function HJ(e){if(e<=1)return"i32";if(2===e)return"vec2<i32>";if(3===e)return"vec3<i32>";if(4===e)return"vec4<i32>";if(5===e)return"vec5";if(6===e)return"vec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function UJ(e){if(0===e)return"x";if(1===e)return"y";if(2===e)return"z";if(3===e)return"w";if(4===e)return"u";if(5===e)return"v";throw Error("Index ".concat(e," is not yet supported"))}function GJ(){return"\n    ".concat(XJ(),"\n      let index = getGlobalIndex();\n")}function XJ(){return"\n  ".concat("\n  @stage(compute) @workgroup_size(workGroupSizeX, workGroupSizeY, workGroupSizeZ)\n","\n  fn main(@builtin(local_invocation_id) LocalId : vec3<u32>,\n          @builtin(global_invocation_id) GlobalId : vec3<u32>,\n          @builtin(num_workgroups) NumWorkgroups: vec3<u32>) {\n    localId = LocalId;\n    globalId = GlobalId;\n    numWorkgroups = NumWorkgroups;\n")}function qJ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=[];if(a.push("\n      let workGroupSizeX = ".concat(n.workGroupSize[0],"u;\n      let workGroupSizeY = ").concat(n.workGroupSize[1],"u;\n      let workGroupSizeZ = ").concat(n.workGroupSize[2],"u;\n\n      var<private> localId: vec3<u32>;\n      var<private> globalId: vec3<u32>;\n      var<private> numWorkgroups: vec3<u32>;\n\n      // Only used when the y/z dimension of workgroup size is 1.\n      fn getGlobalIndex() -> i32 {\n        ").concat(eQ(n)?"  return i32(globalId.x);":"  let localInvocationIndex = localId.z * workGroupSizeX * workGroupSizeY +\n                   localId.y * workGroupSizeX + localId.x;\n               let workGroupID = (globalId - localId)/vec3<u32>(\n                   workGroupSizeX, workGroupSizeY, workGroupSizeZ);\n\n               return i32((workGroupID.z * numWorkgroups.x * numWorkgroups.y +\n                   workGroupID.y * numWorkgroups.x + workGroupID.x) *\n                   (workGroupSizeX * workGroupSizeY * workGroupSizeZ) +\n                   localInvocationIndex);\n        ","\n      }\n    ")),!0===r)return a.push("\n        struct Uniform {\n          size            : i32,\n          numChannels     : i32,\n          outShapeStrides : vec2<i32>,\n          dispatchSize    : vec3<u32>,\n        };\n\n        @group(0) @binding(0) var<storage, write> result: array<".concat(tQ(t.dtype,n.isVec4),">;\n        @group(0) @binding(2) var<uniform> uniforms: Uniform;\n      ")),[KJ,a.join("\n"),ZJ(t.shape),n.getUserCode()].join("\n");var i=!1,o=!1,s="struct Uniforms { NAN : f32, ";n.variableNames.forEach((function(t,n){var r=HJ(e[n].shape.length);("vec5"===r||"vec6"===r)&&(o=!0),(i||o)&&(s+="@align(16) "),i=o,s+="".concat(t.charAt(0).toLowerCase()+t.slice(1),"Shape : ").concat(r,", ")}));var l=HJ(t.shape.length);o="vec5"===l||"vec6"===l,(i||o)&&(s+="@align(16) "),i=o,s+="outShape : ".concat(l,", ");var c=t.shape.length-1,d=HJ(c);o="vec5"===d||"vec6"===d,(i||o)&&(s+="@align(16) "),i=o,s+="\n         outShapeStrides: ".concat(d,", "),n.size&&(i&&(s+="@align(16) "),i=!1,s+="size : i32, "),n.uniforms&&(i&&(s+="@align(16) "),s+=n.uniforms),s+="};",a.push(s),n.atomic?a.push("\n      @group(0) @binding(0) var<storage, read_write> result: array<atomic<i32>>;\n    "):a.push("\n      @group(0) @binding(0) var<storage, write> result: array<".concat(tQ(t.dtype,n.isVec4),">;\n    ")),n.variableNames.forEach((function(t,r){a.push("\n      @group(0) @binding(".concat(1+r,") var<storage, read> ").concat(t,": array<").concat(n.variableTypes?n.variableTypes[r]:tQ(e[r].dtype,n.isVec4),">;\n        "))})),""!==s&&a.push("\n      @group(0) @binding(".concat(1+n.variableNames.length,") var<uniform> uniforms: Uniforms;\n      "));var h=QJ(t.shape,n.dispatchLayout),p=u(h,2),f=p[0],m=p[1],g=[KJ,a.join("\n"),ZJ(t.shape),f,$J(t.shape.length)];if(n.atomic||g.push(nQ(t.shape,t.dtype,n.isVec4)),m===t.shape.length){var v=e.map((function(e,r){return JJ(e,t.shape,n.variableTypes?"vec4<f32>"===n.variableTypes[r]:n.isVec4,n.dispatchLayout.x.length===t.shape.length)})).join("\n");g.push(v)}return g.push(n.getUserCode()),g.join("\n")}function YJ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=eQ(e)?"flatDispatch":"";return e.shaderKey+"_"+(e.workGroupSize?e.workGroupSize.join(","):"")+t.map((function(e){return e.length})).join(",")+n.join(",")+e.variableNames.join(",")+r+a+i}var KJ="\n  struct vec5 {x: i32, y: i32, z: i32, w: i32, u: i32};\n  struct vec6 {x: i32, y: i32, z: i32, w: i32, u: i32, v: i32};\n\n  // Checks whether coordinates lie within the bounds of the shape.\n  fn coordsInBounds2D(coord : vec2<i32>, shape : vec2<i32>) -> bool {\n    return all(coord >= vec2<i32>(0)) && all(coord < shape);\n  }\n  fn coordsInBounds3D(coord : vec3<i32>, shape : vec3<i32>) -> bool {\n    return all(coord >= vec3<i32>(0)) && all(coord < shape);\n  }\n  fn coordsInBounds4D(coord : vec4<i32>, shape : vec4<i32>) -> bool {\n    return all(coord >= vec4<i32>(0)) && all(coord < shape);\n  }\n\n  fn getIndexFromCoords1D(coord : i32, shape : i32) -> i32 {\n    return coord;\n  }\n  fn getIndexFromCoords2D(coords : vec2<i32>, shape : vec2<i32>) -> i32 {\n    return dot(coords, vec2<i32>(shape.y, 1));\n  }\n  fn getIndexFromCoords3D(coords : vec3<i32>, shape : vec3<i32>) -> i32 {\n    return dot(coords, vec3<i32>(shape.y * shape.z, shape.z, 1));\n  }\n  fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\n    return dot(coords, vec4<i32>(\n        shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\n  }\n  fn getIndexFromCoords5D(coords : vec5, shape : vec5) -> i32 {\n    let shapeStrides: vec5 = vec5(shape.y * shape.z * shape.w * shape.u, shape.z * shape.w * shape.u, shape.w * shape.u, shape.u, 1);\n    return coords.x*shapeStrides.x + coords.y*shapeStrides.y + coords.z*shapeStrides.z + coords.w*shapeStrides.w + coords.u*shapeStrides.u;\n  }\n  fn getIndexFromCoords6D(coords : vec6, shape : vec6) -> i32 {\n    let shapeStrides: vec6 = vec6(shape.y * shape.z * shape.w * shape.u * shape.v, shape.z * shape.w * shape.u * shape.v, shape.w * shape.u * shape.v, shape.u * shape.v, shape.v, 1);\n    return coords.x*shapeStrides.x + coords.y*shapeStrides.y + coords.z*shapeStrides.z + coords.w*shapeStrides.w + coords.u*shapeStrides.u + coords.v*shapeStrides.v;\n  }\n\n  fn idiv(a: i32, b: i32, sign: f32) -> i32 {\n    var res: i32 = a / b;\n    let mod: i32 = a % b;\n    if (sign < 0. && mod != 0) {\n      res = res - 1;\n    }\n    return res;\n  }\n\n  // NaN defination in IEEE 754-1985 is :\n  //   - sign = either 0 or 1.\n  //   - biased exponent = all 1 bits.\n  //   - fraction = anything except all 0 bits (since all 0 bits represents infinity).\n  // https://en.wikipedia.org/wiki/IEEE_754-1985#Representation_of_non-numbers\n  fn isnan(val: f32) -> bool {\n    let floatToUint: u32 = bitcast<u32>(val);\n    return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n  }\n  fn isnanVec4(val : vec4<f32>) -> vec4<bool> {\n    return vec4<bool>(isnan(val[0]), isnan(val[1]), isnan(val[2]), isnan(val[3]));\n  }\n";function ZJ(e){var t=e.length;if(t<=1)return"fn getCoordsFromIndex(index : i32) -> i32 { return index; }";for(var n,r=Cl.computeStrides(e),a=HJ(t),i=[],o=0;o<t;o++)i.push("d".concat(o));return 1===r.length?"    fn getCoordsFromIndex(index : i32) -> vec2<i32> {\n      let d0 = index / uniforms.outShapeStrides; let d1 = index - d0 * uniforms.outShapeStrides;\n      return vec2<i32>(d0, d1);\n    }":(n="var index2 = index;"+r.map((function(e,t){var n="let ".concat(i[t]," = index2 / uniforms.outShapeStrides.").concat(UJ(t)),a=t===r.length-1?"let ".concat(i[t+1]," = index2 - ").concat(i[t]," * uniforms.outShapeStrides.").concat(UJ(t)):"index2 = index2 - ".concat(i[t]," * uniforms.outShapeStrides.").concat(UJ(t));return"".concat(n,"; ").concat(a,";")})).join(""),"\n    fn getCoordsFromIndex(index : i32) -> ".concat(a," {\n      ").concat(n,"\n      return ").concat(a,"(").concat(i.join(","),");\n    }\n  "))}function JJ(e,t,n,r){var a=function(e,t){var n=e.name,r=e.shape.length,a=HJ(r),i="get"+n.charAt(0).toUpperCase()+n.slice(1),o=["d0","d1","d2","d3","d4","d5"].slice(0,r),s=o.map((function(e){return"".concat(e," : i32")})).join(", ");if(r<1)return t?"\n        fn ".concat(i,"() -> vec4<f32> {\n          return vec4<f32>(").concat(n,"[0]);\n        }\n      "):"\n      fn ".concat(i,"() ->f32 {\n        return f32(").concat(n,"[0]);\n      }\n    ");var u="uniforms.".concat(n.charAt(0).toLowerCase()+n.slice(1),"Shape"),l="".concat(r,"D");return 0===r&&(l="1D"),t?"\n      fn ".concat(i,"(").concat(s,") -> vec4<f32> {\n        return vec4<f32>(").concat(n,"[getIndexFromCoords").concat(l,"(").concat(a,"(").concat(o.join(","),"),\n          ").concat(u,") / 4]);\n      }\n      "):"\n    fn ".concat(i,"(").concat(s,") -> f32 {\n      return f32(").concat(n,"[getIndexFromCoords").concat(l,"(").concat(a,"(").concat(o.join(","),"),\n        ").concat(u,")]);\n    }\n   ")}(e,n);return e.shape.length<=t.length&&(a+=function(e,t,n,r){var a=e.name,i=a.charAt(0).toUpperCase()+a.slice(1),o="get"+i+"ByOutput",s=e.shape.length,u=t.length,l=HJ(u);if(Cl.arraysEqual(e.shape,t)&&r)return n?"\n      fn ".concat(o,"Index(globalIndex : i32) -> vec4<f32> {\n        return vec4<f32>(").concat(a,"[globalIndex]);\n      }\n\n      fn ").concat(o,"Coords(coords : ").concat(l,") -> vec4<f32> {\n        return vec4<f32>(").concat(a,"[").concat(u>1?"getOutputIndexFromCoords(coords)":"coords"," / 4]);\n      }\n      "):"\n    fn ".concat(o,"Index(globalIndex : i32) -> f32 {\n      return f32(").concat(a,"[globalIndex]);\n    }\n\n    fn ").concat(o,"Coords(coords : ").concat(l,") -> f32 {\n      return f32(").concat(a,"[").concat(u>1?"getOutputIndexFromCoords(coords)":"coords","]);\n    }\n    ");var c=$b.getBroadcastDims(e.shape,t),d=u-s,h="";if(0===s)return n?"\n    fn ".concat(o,"Index(globalIndex : i32) -> vec4<f32> {\n      return get").concat(i,"();\n    }\n\n    fn ").concat(o,"Coords(coords : ").concat(l,") -> vec4<f32> {\n      return get").concat(i,"();\n    }\n  "):"\n    fn ".concat(o,"Index(globalIndex : i32) -> f32{\n      return get").concat(i,"();\n    }\n\n    fn ").concat(o,"Coords(coords : ").concat(l,") -> f32{\n      return get").concat(i,"();\n    }\n  ");h=u<2&&c.length>=1?"coords = 0;":c.map((function(e){return"coords.".concat(UJ(e+d)," = 0;")})).join("\n");var p="";if(u<2&&s>0)p="coords";else if(u>1){var f=HJ(s),m=e.shape.map((function(e,t){return"coords.".concat(UJ(t+d))})).join(", ");p="".concat(f,"(").concat(m,")")}else p="coords";var g="uniforms.".concat(a.charAt(0).toLowerCase()+a.slice(1),"Shape"),v="".concat(s,"D");return n?"\n    fn ".concat(o,"Index(globalIndex : i32) -> vec4<f32> {\n      var coords = getCoordsFromIndex(globalIndex);\n      ").concat(h,"\n      return ").concat(a,"[getIndexFromCoords").concat(v,"(").concat(p,", ").concat(g,") / 4];\n    }\n\n    fn ").concat(o,"Coords(coordsIn : ").concat(l,") -> vec4<f32> {\n      var coords = coordsIn;\n      ").concat(h,"\n      return ").concat(a,"[getIndexFromCoords").concat(v,"(").concat(p,", ").concat(g,") / 4];\n    }\n  "):"\n  fn ".concat(o,"Index(globalIndex : i32) -> f32 {\n    var coords = getCoordsFromIndex(globalIndex);\n    ").concat(h,"\n    return f32(").concat(a,"[getIndexFromCoords").concat(v,"(").concat(p,", ").concat(g,")]);\n  }\n\n  fn ").concat(o,"Coords(coordsIn : ").concat(l,") -> f32 {\n    var coords = coordsIn;\n    ").concat(h,"\n    return f32(").concat(a,"[getIndexFromCoords").concat(v,"(").concat(p,", ").concat(g,")]);\n  }\n")}(e,t,n,r)),a}function QJ(e,t){var n=t.x,r=t.y,a=void 0===r?[]:r,i=t.z,o=void 0===i?[]:i,s=e.length;if(n.length===s)return["fn getOutputCoords() -> ".concat(HJ(s),"{\n    let globalIndex = getGlobalIndex();\n    return getCoordsFromIndex(globalIndex);\n  }\n  "),s];for(var u="",l=[n,a,o],c=0,d=0;d<l.length;d++){var h=l[d];if(0!==h.length)if(c+=h.length,1===h.length)u+="let d".concat(h[0]," = i32(globalId[").concat(d,"]);");else{var p=jJ(h,"uniforms.outShape");u+="var index".concat(d," = i32(globalId[").concat(d,"]);");for(var f=0;f<p.length;f++)u+="let d".concat(h[f]," = index").concat(d," / ").concat(p[f],";"),f===p.length-1?u+="let d".concat(h[f+1]," = index").concat(d," - d").concat(h[f]," * ").concat(p[f],";"):u+="index".concat(d," = index").concat(d," - d").concat(h[f]," * ").concat(p[f],";")}}for(var m=[],g=0;g<c;g++)m.push("d".concat(g));var v=HJ(c),y="fn getOutputCoords() -> ".concat(v," {\n  ").concat(u,"\n");return 0===m.length?y+="return ".concat(v,"(0); }"):y+="return ".concat(v,"(").concat(m.join(","),"); }"),[y,c]}function $J(e){var t="";switch(e){case 0:case 1:t+="\n        fn getOutputIndexFromCoords(coords : i32) -> i32 {\n          return coords;\n        }\n        ";break;case 2:t+="\n        fn getOutputIndexFromCoords(coords : vec2<i32>) -> i32 {\n          return dot(coords, vec2<i32>(uniforms.outShapeStrides, 1));\n        }\n        ";break;case 3:t+="\n        fn getOutputIndexFromCoords(coords : vec3<i32>) -> i32 {\n          return dot(coords, vec3<i32>(uniforms.outShapeStrides.x, uniforms.outShapeStrides.y, 1));\n        }\n        ";break;case 4:t+="\n        fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\n          return dot(coords, vec4<i32>(\n            uniforms.outShapeStrides.x, uniforms.outShapeStrides.y, uniforms.outShapeStrides.z, 1));\n        }\n        ";break;case 5:t+="\n        fn getOutputIndexFromCoords(coords : vec5) -> i32 {\n          return coords.x * uniforms.outShapeStrides.x +\n              coords.y * uniforms.outShapeStrides.y +\n              coords.z * uniforms.outShapeStrides.z +\n              coords.w * uniforms.outShapeStrides.w +\n              coords.u;\n        }\n        ";break;case 6:t+="\n        fn getOutputIndexFromCoords(coords : vec6) -> i32 {\n          return coords.x * uniforms.outShapeStrides.x +\n              coords.y * uniforms.outShapeStrides.y +\n              coords.z * uniforms.outShapeStrides.z +\n              coords.w * uniforms.outShapeStrides.w +\n              coords.u * uniforms.outShapeStrides.u +\n              coords.v;\n        }\n        ";break;default:Cl.assert(!1,(function(){return"Unsupported ".concat(e,"D shape")}))}return t}function eQ(e){return 1===e.dispatch[1]&&1===e.dispatch[2]}function tQ(e,t){return"float32"===e?t?"vec4<f32>":"f32":"int32"===e||"bool"===e?t?"vec4<i32>":"i32":e}function nQ(e,t,n){var r,a=e.length,i=tQ(t,n);if(r=n?"fn setOutputAtIndex(flatIndex : i32, value : vec4<f32>) {\n      result[flatIndex] = ".concat(i,"(value);\n    }\n    fn setOutputAtIndexI32(flatIndex : i32, value : vec4<i32>) {\n      result[flatIndex] = ").concat(i,"(value);\n    }"):"fn setOutputAtIndex(flatIndex : i32, value : f32) {\n      result[flatIndex] = ".concat(i,"(value);\n    }\n    fn setOutputAtIndexI32(flatIndex : i32, value : i32) {\n      result[flatIndex] = ").concat(i,"(value);\n    }"),a>=2){var o=["d0","d1","d2","d3","d4","d5"].slice(0,a),s=HJ(a);r+=n?"\n      fn setOutputAtCoords(".concat(o.map((function(e){return"".concat(e," : i32")})).join(", "),", value : vec4<f32>) {\n        let flatIndex = getOutputIndexFromCoords(").concat(s,"(").concat(o.join(", "),"));\n        setOutputAtIndex(flatIndex / 4, value);\n      }\n      fn setOutputAtCoordsI32(").concat(o.map((function(e){return"".concat(e," : i32")})).join(", "),", value : vec4<i32>) {\n        let flatIndex = getOutputIndexFromCoords(").concat(s,"(").concat(o.join(", "),"));\n        setOutputAtIndexI32(flatIndex / 4, value);\n      }\n    "):"\n      fn setOutputAtCoords(".concat(o.map((function(e){return"".concat(e," : i32")})).join(", "),", value : f32) {\n        let flatIndex = getOutputIndexFromCoords(").concat(s,"(").concat(o.join(", "),"));\n        setOutputAtIndex(flatIndex, value);\n      }\n      fn setOutputAtCoordsI32(").concat(o.map((function(e){return"".concat(e," : i32")})).join(", "),", value : i32) {\n        let flatIndex = getOutputIndexFromCoords(").concat(s,"(").concat(o.join(", "),"));\n        setOutputAtIndexI32(flatIndex, value);\n      }\n    ")}return r}var rQ=function(e){return e?"\n        mm_Asub[inputRow][inputCol] = mm_readA(\n          t * TileInner + inputRow,\n          globalRowStart + inputCol, globalId);\n        ":"\n        mm_Asub[inputRow][inputCol] = mm_readA(\n          globalRowStart + inputRow,\n          t * TileInner + inputCol, globalId);\n        "},aQ=function(e){return e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];"};function iQ(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,a=e[1]*t[1],i=e[0]*t[0],o=n?a:r,s=n?r:a;Cl.assert(s%t[1]===0&&o%t[0]===0&&r%t[1]===0,(function(){return"tileAHight ".concat(s," must be divisible by workGroupSize[1]").concat(t[1],", tileAWidth ").concat(o," must be divisible by workGroupSize[0]").concat(t[0],", tileInner ").concat(r," must be divisible by workGroupSize[1]").concat(t[1])}));var u=s/t[1],l=o/t[0],c=r/t[1];return"\n    var<workgroup> mm_Asub : array<array<f32, ".concat(o,">, ").concat(s,">;\n    var<workgroup> mm_Bsub : array<array<f32, ").concat(i,">, ").concat(r,">;\n    let RowPerThread = ").concat(e[1],";\n    let ColPerThread = ").concat(e[0],";\n    let TileInner = ").concat(r,";\n\n    @stage(compute) @workgroup_size(workGroupSizeX, workGroupSizeY, workGroupSizeZ)\n    fn main(@builtin(local_invocation_id) LocalId : vec3<u32>,\n            @builtin(global_invocation_id) GlobalId : vec3<u32>,\n            @builtin(num_workgroups) NumWorkgroups: vec3<u32>,\n            @builtin(workgroup_id) workgroupId: vec3<u32>) {\n      localId = LocalId;\n      globalId = GlobalId;\n      numWorkgroups = NumWorkgroups;\n\n      let tileRow = i32(localId.y) * RowPerThread;\n      let tileCol = i32(localId.x) * ColPerThread;\n\n      let globalRow = i32(globalId.y) * RowPerThread;\n      let globalCol = i32(globalId.x) * ColPerThread;\n\n      let globalRowStart = i32(workgroupId.y) * ").concat(a,";\n\n      let numTiles = (uniforms.dimInner - 1) / TileInner + 1;\n\n      var acc : array<array<f32, ColPerThread>, RowPerThread>;\n\n      // Without this initialization strange values show up in acc.\n      for (var innerRow = 0; innerRow < RowPerThread; innerRow = innerRow + 1) {\n        for (var innerCol = 0; innerCol < ColPerThread; innerCol = innerCol + 1) {\n          acc[innerRow][innerCol] = 0.0;\n        }\n      }\n\n      let tileRowA = i32(localId.y) * ").concat(u,";\n      let tileColA = i32(localId.x) * ").concat(l,";\n      let tileRowB = i32(localId.y) * ").concat(c,";\n      // Loop over shared dimension.\n      for (var t = 0; t < numTiles; t = t + 1) {\n        // Load one tile of A into local memory.\n        for (var innerRow = 0; innerRow < ").concat(u,"; innerRow = innerRow + 1) {\n          for (var innerCol = 0; innerCol < ").concat(l,"; innerCol = innerCol + 1) {\n            let inputRow = tileRowA + innerRow;\n            let inputCol = tileColA + innerCol;\n            ").concat(rQ(n),"\n          }\n        }\n\n        // Load one tile of B into local memory.\n        for (var innerRow = 0; innerRow < ").concat(c,"; innerRow = innerRow + 1) {\n          for (var innerCol = 0; innerCol < ColPerThread; innerCol = innerCol + 1) {\n            let inputRow = tileRowB + innerRow;\n            let inputCol = tileCol + innerCol;\n            mm_Bsub[inputRow][inputCol] = mm_readB(\n              t * ").concat(r," + inputRow,\n              globalCol + innerCol, globalId);\n          }\n        }\n\n        workgroupBarrier();\n\n        // Compute acc values for a single thread.\n        var BCached : array<f32, ColPerThread>;\n        for (var k = 0; k < TileInner; k = k + 1) {\n          for (var inner = 0; inner < ColPerThread; inner = inner + 1) {\n            BCached[inner] = mm_Bsub[k][tileCol + inner];\n          }\n\n          for (var innerRow = 0; innerRow < RowPerThread; innerRow = innerRow + 1) {\n            ").concat(aQ(n),"\n            for (var innerCol = 0; innerCol < ColPerThread; innerCol = innerCol + 1) {\n              acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];\n            }\n          }\n        }\n\n        workgroupBarrier();\n      }\n\n      for (var innerRow = 0; innerRow < RowPerThread; innerRow = innerRow + 1) {\n        for (var innerCol = 0; innerCol < ColPerThread; innerCol = innerCol + 1) {\n          mm_write(globalRow + innerRow,\n                   globalCol + innerCol,\n                   acc[innerRow][innerCol], globalId);\n        }\n      }\n    }\n  ")}var oQ=function(e){return e?"\n      mm_readA(colA, globalRow, globalId),\n      mm_readA(colA + 1, globalRow, globalId),\n      mm_readA(colA + 2, globalRow, globalId),\n      mm_readA(colA + 3, globalRow, globalId)\n  ":"\n      mm_readA(globalRow, colA, globalId),\n      mm_readA(globalRow, colA + 1, globalId),\n      mm_readA(globalRow, colA + 2, globalId),\n      mm_readA(globalRow, colA + 3, globalId)\n  "};var sQ=function(){function e(t,n,r,a,i){var o,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null;Jr(this,e),this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workGroupSize=[16,16,1],this.outputShape=n,this.dispatchLayout={x:[2],y:[1],z:[0]};var p=s?t[1]:t[2];this.workGroupSize=MJ(n[1],0,n[2]),(1===n[1]||1===n[2])&&(r=1),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize,[r,r,1]),Cl.arraysEqual(this.dispatch,[1,1,1])&&(r=1,this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize,[r,r,1]));var f=null!=c,m=null!=h;f&&this.variableNames.push("bias"),m&&this.variableNames.push("preluActivationWeights"),this.workPerThread=r,this.transposeA=s,this.transposeB=l,this.addBias=f,this.activation=d,this.hasPreluActivationWeights=m,this.batchAEqualOne=a,this.batchBEqualOne=i,o=u(this.getShapeFit(n[1],n[2],p),3),this.fitAOuter=o[0],this.fitBOuter=o[1],this.fitInner=o[2],this.shaderKey="matMulPacked_".concat(this.workPerThread,"_").concat(s,"_").concat(l,"_").concat(this.activation,"_").concat(this.fitAOuter,"_").concat(this.fitBOuter,"_").concat(this.fitInner,"_").concat(this.outputShape[1]>1,"_").concat(this.batchAEqualOne,"_").concat(this.batchBEqualOne)}return $r(e,[{key:"getShapeFit",value:function(e,t,n){var r=this.workGroupSize[1]*this.workPerThread,a=this.workGroupSize[0]*this.workPerThread;return this.tileInner=32,1===this.outputShape[1]&&(this.tileInner=4*this.workGroupSize[0]),[e%r===0,t%a===0,n%this.tileInner===0]}},{key:"getUserCode",value:function(){var e,t=this.fitAOuter&&this.fitInner?"return A[batch * batchASize + row * uniforms.aShape[2] + col];":"\n        if(row < uniforms.aShape[1] && col < uniforms.aShape[2]) {\n          return A[batch * batchASize + row * uniforms.aShape[2] + col];\n        }\n        return 0.0;\n         ";e=!1===this.transposeB?"return B[batch * batchBSize + row * uniforms.dimBOuter + col];":"return B[batch * batchBSize + col * uniforms.dimInner + row];";var n="",r="";if(this.activation){var a=CJ(this.activation,!1);n=this.hasPreluActivationWeights?"fn activation(a : f32, outCoord : vec3<i32>) -> f32 {\n               let b = getPreluActivationWeightsByOutputCoords(outCoord);\n               ".concat(a,"\n            }"):"\n              fn activation(a : f32, outCoord : vec3<i32>) -> f32 {\n                ".concat(a,"\n              }\n            "),r="value = activation(value, outCoord);"}var i=this.addBias?"value = value + getBiasByOutputCoords(outCoord);":"";return"\n      ".concat(n,"\n\n      fn mm_readA(row : i32, col : i32,  globalId : vec3<u32>) -> f32 {\n        ").concat(this.batchAEqualOne?"\n        let batch = 0;\n        let batchASize = 0;\n        ":"\n        let batch = i32(globalId.z);\n        let batchASize = uniforms.aShape[1] * uniforms.aShape[2];\n        ","\n        ").concat(t,"\n      }\n\n      fn mm_readB(row : i32, col : i32,  globalId : vec3<u32>) -> f32 {\n        ").concat(this.batchBEqualOne?"\n        let batch = 0;\n        let batchBSize = 0;\n        ":"\n        let batch = i32(globalId.z);\n        let batchBSize = uniforms.bShape[1] * uniforms.bShape[2];\n        ","\n        ").concat(e,"\n      }\n\n      fn mm_write(row : i32, col : i32, valueIn : f32, globalId : vec3<u32>) {\n        ").concat(this.fitAOuter&&this.fitBOuter?"":"if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)","\n        {\n        var value = valueIn;\n        let batch = i32(globalId.z);\n        let outCoord = vec3<i32>(batch, row, col);\n        ").concat(i,"\n        ").concat(r,"\n        setOutputAtCoords(batch, row, col, value);\n        }\n      }\n      ").concat(this.outputShape[1]>1?iQ([this.workPerThread,this.workPerThread,1],this.workGroupSize,this.transposeA,this.tileInner):function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Cl.assert(1===e[1]&&1===e[2],(function(){return"A linear work group size is required. But got ".concat(e,".")})),"\n    let TileSize = ".concat(4*e[0],";\n    var<workgroup> mm_Asub : array<vec4<f32>, ").concat(e[0],">;\n\n    ").concat(XJ(),"\n      let tileCol = i32(localId.x);\n      let globalCol = i32(globalId.x);\n      let globalRow = i32(globalId.y);\n\n      let numTiles = (uniforms.dimInner - 1) / TileSize + 1;\n\n      // Without this initialization strange values show up in acc.\n      var acc = 0.0;\n\n      // Loop over shared dimension.\n      for (var t = 0; t < numTiles; t = t + 1) {\n        // Load one tile of A into local memory.\n        let colA = t * TileSize + tileCol * 4;\n        mm_Asub[tileCol] = vec4<f32>(").concat(oQ(t),");\n        workgroupBarrier();\n\n        // Compute acc values for a single thread.\n        for (var k = 0; k < TileSize / 4; k = k + 1) {\n          let rowB = t * TileSize + k * 4;\n          let BCached = vec4<f32>(mm_readB(rowB, globalCol, globalId),\n                              mm_readB(rowB + 1, globalCol, globalId),\n                              mm_readB(rowB + 2, globalCol, globalId),\n                              mm_readB(rowB + 3, globalCol, globalId));\n\n          let ACached = mm_Asub[k];\n          acc = acc + dot(ACached, BCached);\n        }\n\n        workgroupBarrier();\n      }\n\n      mm_write(globalRow, globalCol, acc, globalId);\n    }\n  ")}(this.workGroupSize,this.transposeA),"\n    ")}}]),e}();var uQ=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Jr(this,e),this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workGroupSize=[256,1,1],this.outputShape=t,this.dispatchLayout={x:[],y:[1,2],z:[0]},this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize);var l=null!=o,c=null!=u;l&&this.variableNames.push("bias"),c&&this.variableNames.push("preluActivationWeights"),this.transposeA=a,this.transposeB=i,this.addBias=l,this.activation=s,this.hasPreluActivationWeights=c,this.batchAEqualOne=n,this.batchBEqualOne=r,this.shaderKey="matMulReduce_".concat(this.activation,"_").concat(a,"_").concat(i,"_").concat(this.batchAEqualOne,"_").concat(this.batchBEqualOne)}return $r(e,[{key:"getUserCode",value:function(){var e,t;e=!1===this.transposeA?"return f32(A[batch * batchASize + row * uniforms.dimInner + col]);":"return f32(A[batch * batchASize + col * uniforms.dimAOuter + row]);",t=!1===this.transposeB?"return f32(B[batch * batchBSize + row * uniforms.dimBOuter + col]);":"return f32(B[batch * batchBSize + col * uniforms.dimInner + row]);";var n="",r="";if(this.activation){var a=CJ(this.activation,!1);n=this.hasPreluActivationWeights?"fn activation(a : f32, outCoord : vec3<i32>) -> f32 {\n               let b = getPreluActivationWeightsByOutputCoords(outCoord);\n               ".concat(a,"\n            }"):"\n              fn activation(a : f32, outCoord : vec3<i32>) -> f32 {\n                ".concat(a,"\n              }\n            "),r="value = activation(value, outCoord);"}var i=this.addBias?"value = value + getBiasByOutputCoords(outCoord);":"";return"\n      ".concat(n,"\n\n      fn mm_readA(batchIn: i32, row : i32, col : i32) -> f32 {\n        ").concat(this.batchAEqualOne?"\n          let batchASize = 0;\n          let batch = 0;\n          ":"\n          let batchASize = uniforms.aShape[1] * uniforms.aShape[2];\n          let batch = batchIn;\n          ","\n        ").concat(e,"\n      }\n\n      fn mm_readB(batchIn: i32, row : i32, col : i32) -> f32 {\n        ").concat(this.batchBEqualOne?"\n          let batch = 0;\n          let batchBSize = 0;\n          ":"\n          let batch = batchIn;\n          let batchBSize = uniforms.bShape[1] * uniforms.bShape[2];\n          ","\n        ").concat(t,"\n      }\n\n      fn mm_write(batch: i32, row : i32, col : i32, valueIn : f32) {\n        var value = valueIn;\n        let outCoord = vec3<i32>(batch, row, col);\n        ").concat(i,"\n        ").concat(r,"\n        setOutputAtCoords(batch, row, col, value);\n      }\n      ").concat("\n    var<workgroup> sumValues : array<f32, workGroupSizeX>;\n    ".concat(XJ(),"\n      let coords = getOutputCoords();\n      let batch = coords[0];\n      let row = coords[1];\n      let col = coords[2];\n      var sum = 0.0;\n      let Length = uniforms.dimInner;\n      for (var k = i32(localId.x); k < Length; k = k + i32(workGroupSizeX)) {\n        let dataA = mm_readA(batch, row, k);\n        let dataB = mm_readB(batch, k, col);\n        sum = sum + dataA * dataB;\n      }\n      sumValues[localId.x] = sum;\n      workgroupBarrier();\n\n      for(var currentSize = workGroupSizeX / 2u; currentSize > 1u;\n          currentSize = currentSize / 2u) {\n        if (localId.x < currentSize)\n        {\n          sumValues[localId.x] = sumValues[localId.x] + sumValues[localId.x + currentSize];\n        }\n        workgroupBarrier();\n      }\n\n      if (localId.x == 0u) {\n        sum = sumValues[0] + sumValues[1];\n        mm_write(batch, row, col, sum);\n      }\n    }\n  "),"\n    ")}}]),e}();var lQ=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;Jr(this,e),this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workGroupSize=[8,16,1],Cl.assert(t[1]<=16||n[2]<=16,(function(){return"This program can be only used when A width or B Height are small"})),this.outputShape=r,this.dispatchLayout={x:[2],y:[1],z:[0]},this.dispatch=[Math.ceil(r[2]/this.workGroupSize[0]),Math.ceil(2*r[1]/this.workGroupSize[1]),r[0]];var s=null!=a;s&&this.variableNames.push("bias");var u=null!=o;u&&this.variableNames.push("preluActivationWeights"),this.addBias=s,this.activation=i,this.hasPreluActivationWeights=u,this.batchAEqualOne=1===t[0],this.batchBEqualOne=1===n[0],this.shaderKey="matMulSmallOutputSize_".concat(this.activation,"_").concat(this.batchAEqualOne,"_").concat(this.batchBEqualOne)}return $r(e,[{key:"getUserCode",value:function(){var e="",t="";if(this.activation){var n=CJ(this.activation,!1);e=this.hasPreluActivationWeights?"fn activation(a : f32, outCoord : vec3<i32>) -> f32 {\n            let b = getPreluActivationWeightsByOutputCoords(outCoord);\n            ".concat(n,"\n            }"):"fn activation(a : f32, outCoord : vec3<i32>) -> f32 {\n            ".concat(n,"\n        }"),t="value = activation(value, outCoord);"}var r=this.addBias?"value = value + getBiasByOutputCoords(outCoord);":"";return"\n      ".concat(e,"\n\n      fn mm_readA(row : i32, col : i32,  globalId : vec3<u32>) -> f32 {\n        ").concat(this.batchAEqualOne?"\n          let batch = 0;\n          let batchASize = 0;\n          ":"\n          let batchASize = uniforms.aShape[1] * uniforms.aShape[2];\n          let batch = i32(globalId.z);\n          ","\n        ").concat("if (coordsInBounds2D(vec2<i32>(row, col), vec2<i32>(uniforms.dimAOuter, uniforms.dimInner))) {\n          return A[batch * batchASize + row * uniforms.dimInner + col];\n        }\n        return 0.0;","\n      }\n      fn mm_readB(row : i32, col : i32,  globalId : vec3<u32>) -> f32 {\n        ").concat(this.batchBEqualOne?"\n          let batch = 0;\n          let batchBSize = 0;\n          ":"\n          let batch = i32(globalId.z);\n          let batchBSize = uniforms.bShape[1] * uniforms.bShape[2];\n          ","\n        ").concat("if (coordsInBounds2D(vec2<i32>(row, col), vec2<i32>(uniforms.dimInner, uniforms.dimBOuter))) {\n           return B[batch * batchBSize + row * uniforms.dimBOuter + col];\n         }\n         return 0.0;","\n      }\n      fn mm_write(row : i32, col : i32, valueIn : f32, globalId : vec3<u32>) {\n        if (coordsInBounds2D(vec2<i32>(row, col), vec2<i32>(uniforms.dimAOuter, uniforms.dimBOuter))) {\n          let batch = i32(globalId.z);\n          let outCoord = vec3<i32>(batch, row, col);\n          var value = valueIn;\n          ").concat(r,"\n          ").concat(t,"\n          setOutputAtCoords(batch, row, col, value);\n        }\n      }\n      ").concat(function(e){var t=e[1]/2,n=e[0],r=t>n?t:n;return"\n  var<workgroup> mm_Asub1 : array<array<f32, ".concat(r,">, ").concat(t,">;\n  var<workgroup> mm_Bsub1 : array<array<f32, ").concat(n,">, ").concat(r,">;\n  var<workgroup> mm_Asub2 : array<array<f32, ").concat(r,">, ").concat(t,">;\n  var<workgroup> mm_Bsub2 : array<array<f32, ").concat(n,">, ").concat(r,">;\n\n  // If the output size is small for matrix multiplication, avoid to use vec4\n  // and handle some elements per thread to optimally utilize the ALU.\n  // Introduces two shared memory buffers, some logical threads could handle\n  // arithmetic operations and others handle IO operations between barrier api,\n  // makes ALUs and load/store units work simultaneously, could improves\n  // the performance.\n  ").concat(XJ(),"\n    let tileRow = i32(localId.y);\n    let tileCol = i32(localId.x);\n    let globalRow = i32(globalId.y);\n    let globalCol = i32(globalId.x);\n\n    // uniforms.dimInner should be greater than 0.\n    let numTiles = (uniforms.dimInner - 1) / ").concat(r," + 1;\n    var acc = 0.0;\n\n    var globalColA = tileCol;\n    var globalRowB = tileRow;\n    for (var t = 0; t < numTiles; t = t + 1) {\n      if (t == 0) {\n        if (tileRow < ").concat(t,") {\n          // Load one tile of A and B into local memory.\n          // globalRow is always greater than or equal tileRow.\n          mm_Asub1[tileRow][tileCol] =\n              mm_readA((globalRow - tileRow) / 2 + tileRow, globalColA, globalId);\n          globalColA = globalColA + ").concat(r,";\n          mm_Bsub1[tileRow][tileCol] = mm_readB(globalRowB, globalCol, globalId);\n          globalRowB = globalRowB + ").concat(r,";\n        }\n      } else {\n        if (tileRow < ").concat(t,") {\n          // Load one tile of A and B into local memory.\n          // globalRow is always greater than or equal tileRow.\n          mm_Asub1[tileRow][tileCol] =\n              mm_readA((globalRow - tileRow) / 2 + tileRow, globalColA, globalId);\n          globalColA = globalColA + ").concat(r,";\n          mm_Bsub1[tileRow][tileCol] = mm_readB(globalRowB, globalCol, globalId);\n          globalRowB = globalRowB + ").concat(r,";\n        } else {\n          // Compute acc values for a single thread.\n          for (var k = 0; k < ").concat(r,"; k = k + 1) {\n            let subRow = tileRow - ").concat(t,";\n            if (subRow < 0) {\n              continue;\n            }\n            acc = acc + mm_Asub2[subRow][k] * mm_Bsub2[k][tileCol];\n          }\n        }\n      }\n      workgroupBarrier();\n      if (t != 0) {\n        t = t + 1;\n      }\n\n      if (t < numTiles) {\n        if (tileRow < ").concat(t,") {\n          // Load one tile of A and B into local memory.\n          // globalRow is always greater than or equal tileRow.\n          mm_Asub2[tileRow][tileCol] =\n              mm_readA((globalRow - tileRow) / 2 + tileRow, globalColA, globalId);\n          globalColA = globalColA + ").concat(r,";\n          mm_Bsub2[tileRow][tileCol] = mm_readB(globalRowB, globalCol, globalId);\n          globalRowB = globalRowB + ").concat(r,";\n        } else {\n          // Compute acc values for a single thread.\n          for (var k = 0; k < ").concat(r,"; k = k + 1) {\n            let subRow = tileRow - ").concat(t,";\n            if (subRow < 0) {\n              continue;\n            }\n            acc = acc + mm_Asub1[subRow][k] * mm_Bsub1[k][tileCol];\n          }\n        }\n      }\n      workgroupBarrier();\n    }\n    let writeCol = (globalRow - tileRow) / 2 + tileRow - ").concat(t,";\n    if (tileRow >= ").concat(t," && writeCol >= 0) {\n      mm_write(writeCol, globalCol, acc, globalId);\n    }\n  }\n  ")}(this.workGroupSize),"\n    ")}}]),e}();function cQ(e){var t=e.inputs,n=e.attrs,r=t.x,a=n.shape,i=Cl.sizeFromShape(r.shape),o=Cl.inferFromImplicitShape(a,i),s=Cl.sizeFromShape(o);return Cl.assert(i===s,(function(){return"The new shape (".concat(o,") has ").concat(s," elements and the old shape (").concat(r.shape,") has ").concat(i," elements. The new shape and old shape must have the same number of elements.")})),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:o,dtype:r.dtype}}var dQ={kernelName:pu,backendName:"webgpu",kernelFunc:cQ};function hQ(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,l=void 0===u?null:u,c=e.leakyreluAlpha,d=void 0===c?0:c,h=e.activation,p=void 0===h?null:h,f=t.shape.length,m=n.shape.length,g=r?t.shape[f-2]:t.shape[f-1],v=a?n.shape[m-1]:n.shape[m-2],y=r?t.shape[f-1]:t.shape[f-2],b=a?n.shape[m-2]:n.shape[m-1],x=t.shape.slice(0,-2),A=n.shape.slice(0,-2),w=Cl.sizeFromShape(x),k=Cl.sizeFromShape(A),S=ap.assertAndGetBroadcastShape(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);Cl.assert(g===v,(function(){return"Error in matMul: inner shapes (".concat(g,") and (").concat(v,") of Tensors with shapes ").concat(t.shape," and ").concat(n.shape," and transposeA=").concat(r," and transposeB=").concat(a," must match.")}));var C,I=r?[w,g,y]:[w,y,g],E=a?[k,b,v]:[k,v,b],T=cQ({inputs:{x:t},backend:i,attrs:{shape:I}}),N=cQ({inputs:{x:n},backend:i,attrs:{shape:E}}),_=[T,N],M=Math.max(w,k),R=1===w,O=1===k,P=(g%4===0&&!r||y%4===0&&r)&&b%4===0&&!a;C=y*b<=32?new uQ([M,y,b],R,O,r,a,s,p,l):r||a||!(y<=16&&(b<=512||v>=2*b)||b<=16&&(y<=512||g>=2*y))?P?new WJ(I,[M,y,b],R,O,r,s,p,l):new sQ(I,[M,y,b],Zi().get("WEBGPU_MATMUL_WORK_PER_THREAD"),R,O,r,a,s,p,l):new lQ(I,E,[M,y,b],s,p,l);var F=[T,N];s&&F.push(s),l&&F.push(l);var D=[{type:"int32",data:[y]},{type:"int32",data:[b]},{type:"int32",data:[g]}];"leakyrelu"===p&&(D.push({type:"float32",data:[d]}),C.uniforms+=" alpha : f32,");var L=i.runWebGPUProgram(C,F,t.dtype,D),z=cQ({inputs:{x:L},backend:i,attrs:{shape:S}});_.push(L);for(var B=0,W=_;B<W.length;B++){var j=W[B];i.disposeData(j.dataId)}return z}var pQ={kernelName:ll,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,l=r.transposeB,c=r.activation;return hQ({a:a,b:i,transposeA:u,transposeB:l,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:c})}},fQ=function(){function e(t,n,r){Jr(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.workGroupSize=[128,1,1],this.size=!0,this.outputShape=$b.assertAndGetBroadcastShape(n,r),this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="binaryOpComplex_".concat(t),this.op=t}return $r(e,[{key:"getUserCode",value:function(){return"\n      fn binaryOpComplex(\n          areal : f32, aimag : f32, breal : f32, bimag : f32) -> f32 {\n        ".concat(kJ(this.op,!1),"\n      }\n\n      ").concat(GJ(),"\n        if(index < uniforms.size) {\n          let areal = getARealByOutputIndex(index);\n          let aimag = getAImagByOutputIndex(index);\n          let breal = getBRealByOutputIndex(index);\n          let bimag = getBImagByOutputIndex(index);\n          setOutputAtIndex(index, binaryOpComplex(areal, aimag, breal, bimag));\n        }\n      }\n    ")}}]),e}(),mQ=function(){function e(t,n,r,a){Jr(this,e),this.variableNames=["A","B"],this.size=!0;this.workGroupSize=[256,1,1],this.outputShape=$b.assertAndGetBroadcastShape(n,r),this.dispatchLayout=OJ(this.outputShape),this.lastDimensionSize=a?r[0]:n[0],this.lastDimensionSize<256?this.workPerThread=1:this.lastDimensionSize<512?this.workPerThread=2:this.workPerThread=4,this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize,[this.workPerThread,1,1]),this.useSharedMemoryWithB=a,this.op=t,this.shaderKey="binaryShared_".concat(t,"_").concat(this.lastDimensionSize,"_").concat(this.useSharedMemoryWithB)}return $r(e,[{key:"getUserCode",value:function(){var e=this.lastDimensionSize>1?"coords[".concat(this.outputShape.length-1,"]"):"0",t=this.useSharedMemoryWithB?"let a = getAByOutputCoords(coords);\n         let b = sharedBuf[".concat(e,"];"):"let a = sharedBuf[".concat(e,"];\n         let b = getBByOutputCoords(coords);");return"\n        fn binaryOperation(a : f32, b : f32) -> f32 {\n          ".concat(kJ(this.op,!1),"\n        }\n        var<workgroup> sharedBuf : array<f32, ").concat(this.lastDimensionSize,">;\n        ").concat(GJ(),"\n\n          // Fill in the shared memory buffer. Here we need a loop to make sure\n          // that all data in A|B are uploaded when |sharedMemorySize| is larger\n          // than work group size.\n          for(var localIndex = i32(localId.x); localIndex < ").concat(this.lastDimensionSize,"; localIndex = localIndex + ").concat(this.workGroupSize[0],") {\n            sharedBuf[localIndex] = f32(").concat(this.useSharedMemoryWithB?"B":"A","[localIndex]);\n          }\n          workgroupBarrier();\n\n          for(var i = 0; i < ").concat(this.workPerThread,"; i = i + 1) {\n            let flatIndex = index * ").concat(this.workPerThread," + i;\n            if(flatIndex < uniforms.size) {\n              let coords = getCoordsFromIndex(flatIndex);\n\n              ").concat(t,"\n              setOutputAtIndex(flatIndex, binaryOperation(a, b));\n            }\n          }\n        }\n        ")}}]),e}(),gQ=function(){function e(t,n,r){Jr(this,e),this.variableNames=["A","B"],this.workPerThread=4,this.isVec4=!0,this.size=!0;this.workGroupSize=[128,1,1],this.outputShape=$b.assertAndGetBroadcastShape(n,r),this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize,[this.workPerThread,1,1]),this.op=t,this.shaderKey="binaryVec4_".concat(t)}return $r(e,[{key:"getUserCode",value:function(){return"\n      fn binaryOperation(a : vec4<f32>, b : vec4<f32>) -> vec4<f32> {\n        ".concat(kJ(this.op,this.isVec4),"\n      }\n      ").concat(GJ(),"\n        if (index < uniforms.size) {\n          let a = getAByOutputIndex(index);\n          let b = getBByOutputIndex(index);\n          setOutputAtIndex(index, binaryOperation(a, b));\n        }\n      }\n    ")}}]),e}(),vQ=function(){function e(t,n,r){Jr(this,e),this.variableNames=["A","B"],this.size=!0;this.workGroupSize=[128,1,1],this.outputShape=$b.assertAndGetBroadcastShape(n,r),this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="binary_".concat(t),this.op=t}return $r(e,[{key:"getUserCode",value:function(){return"\n      fn binaryOperation(a : f32, b : f32) -> f32 {\n        ".concat(kJ(this.op,!1),"\n      }\n      ").concat(GJ(),"\n        if (index < uniforms.size) {\n          let a = getAByOutputIndex(index);\n          let b = getBByOutputIndex(index);\n          setOutputAtIndex(index, binaryOperation(a, b));\n        }\n      }\n      ")}}]),e}();function yQ(e,t,n){if(Cl.arraysEqual(t,n)&&Cl.sizeFromShape(t)%4===0)return new gQ(e,t,n);var r=1===t.length&&n.length>1&&t[0]<1024,a=1===n.length&&t.length>1&&n[0]<1024;return r||a?new mQ(e,t,n,a):new vQ(e,t,n)}function bQ(e){var t=e.inputs.x;return e.backend.incRef(t.dataId),{dataId:t.dataId,shape:t.shape,dtype:t.dtype}}var xQ={kernelName:gs,backendName:"webgpu",kernelFunc:bQ};function AQ(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.tensorMap.get(i.dataId),s=bQ({inputs:{x:r},backend:n}),u=bQ({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var wQ={kernelName:To,backendName:"webgpu",kernelFunc:AQ},kQ=function(){function e(t,n){Jr(this,e),this.variableNames=["A"],this.size=!0;this.workGroupSize=[128,1,1],this.outputShape=t,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.op=n,this.shaderKey="unary_".concat(n)}return $r(e,[{key:"getUserCode",value:function(){return"\n      fn unaryOperation(a : f32) -> f32 {\n        ".concat(SJ(this.op,!1),"\n      }\n      ").concat(GJ(),"\n        if (index < uniforms.size) {\n          let a = getAByOutputIndex(index);\n          setOutputAtIndex(index, unaryOperation(a));\n        }\n      }\n      ")}}]),e}();function SQ(e){var t=e.opType,n=e.cpuKernelImpl,r=e.dtype;return function(e){var a=e.inputs,i=e.backend,o=a.x,s=i,u=r||o.dtype;if(s.shouldExecuteOnCPU([o])&&null!=n){var l=s.tensorMap.get(o.dataId),c=n(l.values,u);return s.makeTensorInfo(o.shape,u,c)}var d=new kQ(o.shape,t);return s.runWebGPUProgram(d,[o],u)}}function CQ(e){var t=e.opSnippet,n=e.cpuKernelImpl,r=e.supportsComplex,a=void 0!==r&&r,i=e.dtype;return function(e){var r=e.inputs,o=e.backend,s=r.a,l=r.b,c=o;if(a&&"complex64"===s.dtype){var d,h,p=c.tensorMap.get(s.dataId),f=c.tensorMap.get(l.dataId);if(0!==t){var m=[[p.complexTensorInfos.real,f.complexTensorInfos.real],[p.complexTensorInfos.imag,f.complexTensorInfos.imag]].map((function(e){var n=u(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:s.shape},o={dataId:a.dataId,dtype:a.dtype,shape:l.shape},d=yQ(t,s.shape,l.shape);return c.runWebGPUProgram(d,[i,o],gc(r.dtype,a.dtype))})),g=u(m,2);d=g[0],h=g[1]}else{var v=new fQ(17,s.shape,l.shape),y=new fQ(18,s.shape,l.shape),b=[{dataId:p.complexTensorInfos.real.dataId,dtype:p.complexTensorInfos.real.dtype,shape:s.shape},{dataId:p.complexTensorInfos.imag.dataId,dtype:p.complexTensorInfos.imag.dtype,shape:s.shape},{dataId:f.complexTensorInfos.real.dataId,dtype:f.complexTensorInfos.real.dtype,shape:l.shape},{dataId:f.complexTensorInfos.imag.dataId,dtype:f.complexTensorInfos.imag.dtype,shape:l.shape}];d=c.runWebGPUProgram(v,b,"float32"),h=c.runWebGPUProgram(y,b,"float32")}var x=AQ({inputs:{real:d,imag:h},backend:c});return c.disposeData(d.dataId),c.disposeData(h.dataId),x}var A=i||gc(s.dtype,l.dtype);if(("string"===s.dtype||"string"===l.dtype||c.shouldExecuteOnCPU([s,l]))&&null!=n){var w=c.tensorMap.get(s.dataId).values,k=c.tensorMap.get(l.dataId).values,S="string"===s.dtype?$b.fromUint8ToStringArray(w):w,C="string"===s.dtype?$b.fromUint8ToStringArray(k):k,I=u(n(s.shape,l.shape,S,C,A),2),E=I[0],T=I[1];return c.makeTensorInfo(T,A,E)}var N=yQ(t,s.shape,l.shape);return c.runWebGPUProgram(N,[s,l],A)}}var IQ=GP.addImpl,EQ=GP.ceilImpl,TQ=GP.concatImpl,NQ=GP.equalImpl,_Q=GP.expImpl,MQ=GP.expm1Impl,RQ=GP.floorImpl,OQ=GP.gatherNdImpl,PQ=GP.gatherV2Impl,FQ=GP.greaterEqualImpl,DQ=GP.greaterImpl,LQ=GP.lessEqualImpl,zQ=GP.lessImpl,BQ=GP.logImpl,WQ=GP.maxImpl,jQ=GP.maximumImpl,VQ=GP.minimumImpl,HQ=GP.multiplyImpl,UQ=GP.negImpl,GQ=GP.notEqualImpl,XQ=GP.prodImpl,qQ=GP.rangeImpl,YQ=GP.rsqrtImpl,KQ=GP.scatterImpl,ZQ=GP.simpleAbsImpl,JQ=GP.sliceImpl,QQ=GP.stridedSliceImpl,$Q=GP.stringNGramsImpl,e$=GP.subImpl,t$=GP.tileImpl,n$=GP.topKImpl,r$=GP.transposeImpl,a$=(GP.uniqueImpl,SQ({opType:0,cpuKernelImpl:ZQ})),i$={kernelName:to,backendName:"webgpu",kernelFunc:a$},o$=CQ({opSnippet:1,cpuKernelImpl:IQ,supportsComplex:!0}),s$={kernelName:ao,backendName:"webgpu",kernelFunc:o$},u$=function(){function e(t){Jr(this,e),this.workPerThread=4,this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=t[0],this.variableNames=t.map((function(e,t){return"T".concat(t)})),this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize,[this.workPerThread,1,1]),this.shaderKey="addN"}return $r(e,[{key:"getUserCode",value:function(){var e=[];this.variableNames.forEach((function(t){e.push("let v".concat(t," = get").concat(t,"ByOutputCoords(coords);"))}));var t=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");return"\n      ".concat(GJ(),"\n        for (var i = 0; i < ").concat(this.workPerThread,"; i = i + 1) {\n          let flatIndex = index * ").concat(this.workPerThread," + i;\n          if (flatIndex < uniforms.size) {\n            let coords = getCoordsFromIndex(flatIndex);\n            ").concat(e.join("\n        "),"\n            setOutputAtIndex(flatIndex, ").concat(t,");\n          }\n        }\n      }\n    ")}}]),e}();var l$={kernelName:io,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;if(1===r.length)return bQ({inputs:{x:r[0]},backend:n});var a=r.map((function(e){return e.dtype})).reduce((function(e,t){return gc(e,t)})),i=r.map((function(e){return e.shape})),o=new u$(i);return n.runWebGPUProgram(o,r,a)}},c$=function(){function e(t,n,r){Jr(this,e),this.workGroupSize=[64,1,1],this.variableNames=["x"],this.uniforms="infinityValue : f32,",this.size=!0;var a=[n];$b.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.length),this.op="min"===r?"<":">";var i=u($b.computeOutAndReduceShapes(t,a),1)[0];this.outputShape=0===i.length?[1]:i,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,[1,1,1]),this.inputShape=t,this.shaderKey="argMinMax".concat(this.op)}return $r(e,[{key:"getUserCode",value:function(){var e=this,t="\n      var<workgroup> xBestIndices : array<i32, ".concat(this.workGroupSize[0],">;\n      var<workgroup> xBestValues : array<f32, ").concat(this.workGroupSize[0],">;\n    ");return"\n      fn DIV_CEIL(a : u32, b : u32) -> u32 {\n        return ((a - 1u) / b + 1u);\n      }\n\n      ".concat(t,"\n\n      ").concat(GJ(),"\n        let outputIndex = index / i32(workGroupSizeX);\n        let reduceLength = ").concat(1===e.inputShape.length?"uniforms.xShape":"uniforms.xShape.".concat(UJ(e.inputShape.length-1)),";\n\n        var bestIndex = i32(localId.x);\n        var bestValue = uniforms.infinityValue;\n        let outputCoords = getCoordsFromIndex(outputIndex);\n        for (var k = i32(localId.x); k < reduceLength && outputIndex < uniforms.size;\n            k = k + i32(workGroupSizeX)) {\n          let candidate = getX(").concat(function(){var t="";if(1===e.outputShape.length)1!==e.inputShape.length&&(t+="outputCoords,");else for(var n=0;n<e.outputShape.length;n++)t+="outputCoords.".concat(UJ(n),",");return t}()," k);\n          if (!isnan(candidate) && candidate ").concat(this.op," bestValue) {\n            bestValue = candidate;\n            bestIndex = k;\n          }\n        }\n        xBestValues[localId.x] = bestValue;\n        xBestIndices[localId.x] = bestIndex;\n        workgroupBarrier();\n\n        var reduceSize = min(u32(reduceLength), workGroupSizeX);\n        for (var currentSize = reduceSize / 2u; reduceSize > 1u;\n            currentSize = reduceSize / 2u) {\n          let interval = DIV_CEIL(reduceSize, 2u);\n          if (localId.x < currentSize) {\n            let candidate = xBestValues[localId.x + interval];\n            if (candidate ").concat(this.op," bestValue) {\n              bestValue = candidate;\n              xBestValues[localId.x] = bestValue;\n              xBestIndices[localId.x] = xBestIndices[localId.x + interval];\n            }\n          }\n          reduceSize = interval;\n          workgroupBarrier();\n        }\n\n        if (localId.x == 0u && outputIndex < uniforms.size) {\n          setOutputAtIndexI32(outputIndex, xBestIndices[localId.x]);\n        }\n      }\n    ")}}]),e}(),d$=function(){function e(t,n){Jr(this,e),this.variableNames=["A"],this.workGroupSize=[16,16,1];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.dispatchLayout={x:[0],y:[1]},this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize,[1,1,1]),this.shaderKey="transposeShared"}return $r(e,[{key:"getUserCode",value:function(){return"\n      let TILE_DIM = ".concat(this.workGroupSize[0],";\n      var<workgroup> tile : array<array<f32, ").concat(this.workGroupSize[0]+1,">, ").concat(this.workGroupSize[0],">;\n      ").concat("\n  @stage(compute) @workgroup_size(workGroupSizeX, workGroupSizeY, workGroupSizeZ)\n","\n      fn main(@builtin(local_invocation_id) localId : vec3<u32>,\n              @builtin(workgroup_id) workgroupId : vec3<u32>) {\n        var x = i32(workgroupId.x) * TILE_DIM + i32(localId.x);\n        var y = i32(workgroupId.y) * TILE_DIM + i32(localId.y);\n        let width = uniforms.outShape[0];\n        let height = uniforms.outShape[1];\n        if (x < width && y < height) {\n          tile[localId.y][localId.x] = A[y * width + x];\n        }\n        workgroupBarrier();\n\n        x = i32(workgroupId.y) * TILE_DIM + i32(localId.x);\n        y = i32(workgroupId.x) * TILE_DIM + i32(localId.y);\n        if (x < height && y < width) {\n          setOutputAtIndex((y * height + x), tile[localId.x]\n            [localId.y]);\n        }\n      }\n    ")}}]),e}(),h$=function(){function e(t,n){Jr(this,e),this.variableNames=["A"],this.workPerThread=4,this.workGroupSize=[64,1,1],this.size=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize,[this.workPerThread,1,1]),this.newDim=n,this.shaderKey="transpose_".concat(n)}return $r(e,[{key:"getUserCode",value:function(){var e=HJ(this.outputShape.length),t=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=new Array(t),r=0;r<e.length;r++)n[e[r]]="resRC.".concat(UJ(r));return n.join()}(this.newDim);return"\n      ".concat(GJ(),"\n\n        for(var i = 0; i < ").concat(this.workPerThread,"; i = i + 1) {\n          let flatIndex = index * ").concat(this.workPerThread," + i;\n          if(flatIndex < uniforms.size) {\n            let resRC = getCoordsFromIndex(flatIndex);\n            setOutputAtIndex(flatIndex, A[getIndexFromCoords").concat(this.outputShape.length,"D(\n              ").concat(e,"(").concat(t,"), uniforms.aShape)]);\n          }\n        }\n      }\n    ")}}]),e}();function p$(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.perm,o=n,s=a.shape.length,u=new Array(s),l=0;l<u.length;l++)u[l]=a.shape[i[l]];if(n.shouldExecuteOnCPU([a])){var c=o.tensorMap.get(a.dataId).values,d=r$(c,a.shape,a.dtype,i,u);return n.makeTensorInfo(u,a.dtype,d)}if(2===a.shape.length&&Cl.arraysEqual(i,[1,0])){var h=new d$(a.shape,i);return o.runWebGPUProgram(h,[a],a.dtype)}var p=new h$(a.shape,i);return o.runWebGPUProgram(p,[a],a.dtype)}var f$={kernelName:el,backendName:"webgpu",kernelFunc:p$};var m$={kernelName:uo,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=Cl.parseAxisParam(i,a.shape),s=$b.getAxesPermutation(o,a.shape.length),u=a,l=[];null!=s&&(u=p$({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),o=$b.getInnerMostAxes(o.length,u.shape.length)),$b.assertAxesAreInnerMostDims("argMax",[o[0]],u.shape.length);var c=new c$(u.shape,o[0],"max"),d=[{type:"float32",data:[Number.NEGATIVE_INFINITY]}],h=n.runWebGPUProgram(c,[u],"int32",d);return l.forEach((function(e){return n.disposeData(e.dataId)})),h}};var g$={kernelName:lo,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=Cl.parseAxisParam(i,a.shape),s=$b.getAxesPermutation(o,a.shape.length),u=a,l=[];null!=s&&(u=p$({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),o=$b.getInnerMostAxes(o.length,u.shape.length)),$b.assertAxesAreInnerMostDims("argMin",[o[0]],u.shape.length);var c=new c$(u.shape,o[0],"min"),d=[{type:"float32",data:[Number.POSITIVE_INFINITY]}],h=n.runWebGPUProgram(c,[u],"int32",d);return l.forEach((function(e){return n.disposeData(e.dataId)})),h}},v$=function(){function e(t,n){Jr(this,e),this.variableNames=["x"],this.uniforms="stride : vec2<i32>, pad : vec2<i32>, dilation : vec2<i32>, convDims : vec2<i32>, filterDims : vec2<i32>,",this.workGroupSize=[128,1,1],this.size=!0,this.outputShape=t.outShape,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="pool2D_".concat(n),this.poolType=n}return $r(e,[{key:"getUserCode",value:function(){var e="resultValue = max(value, resultValue);";"avg"===this.poolType&&(e="resultValue = resultValue + value; count = count + 1.0;");var t="resultValue";return"avg"===this.poolType&&(t="resultValue / count"),"\n      ".concat(GJ(),"\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n          let batch = coords[0];\n          let xRCCorner = vec2<i32>(coords.yz) * uniforms.stride - uniforms.pad;\n          let xRCorner = xRCCorner.x;\n          let xCCorner = xRCCorner.y;\n\n          var resultValue = ").concat("avg"===this.poolType?"0.0":"-1.0 / pow(10.0, -20.0)",";\n          var count = 0.0;\n\n          for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + uniforms.dilation.x) {\n            let xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= uniforms.convDims.x) {\n              continue;\n            }\n\n            for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + uniforms.dilation.y) {\n              let xC = xCCorner + wC;\n              if (xC < 0 || xC >= uniforms.convDims.y) {\n                continue;\n              }\n\n              let value = getX(batch, xR, xC, coords[3]);\n              ").concat(e,"\n            }\n          }\n\n          setOutputAtIndex(index, ").concat(t,");\n        }\n      }\n    ")}}]),e}(),y$=function(){function e(t){Jr(this,e),this.variableNames=["x"],this.uniforms="stride : vec2<i32>,",this.workGroupSize=[256,1,1],this.size=!0,this.outputShape=t.outShape,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="poolWithFilterSizeEqualsOne"}return $r(e,[{key:"getUserCode",value:function(){return"\n      ".concat(GJ(),"\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let batch = coords[0];\n          let d = coords[3];\n\n          let xRCCorner = coords.yz * uniforms.stride;\n          let xRCorner = xRCCorner.x;\n          let xCCorner = xRCCorner.y;\n\n          let value = getX(batch, xRCorner, xCCorner, d);\n          setOutputAtIndex(index, value);\n        }\n      }\n    ")}}]),e}();var b$={kernelName:go,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=$b.computePool2DInfo(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&Cl.arraysEqual(l.inShape,l.outShape))return bQ({inputs:{x:a},backend:n});var c,d=[{type:"int32",data:[l.strideHeight,l.strideWidth]}];return 1===l.filterHeight&&1===l.filterWidth?c=new y$(l):(c=new v$(l,"avg"),d.push({type:"int32",data:[l.padInfo.top,l.padInfo.left]},{type:"int32",data:[l.dilationHeight,l.dilationWidth]},{type:"int32",data:[l.inHeight,l.inWidth]},{type:"int32",data:[l.effectiveFilterHeight,l.effectiveFilterWidth]})),n.runWebGPUProgram(c,[a],a.dtype,d)}};var x$={kernelName:xo,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return hQ({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},A$=function(){function e(t,n){Jr(this,e),this.variableNames=["source"],this.workPerThread=1,this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=n,this.rank=n.length,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize,[this.workPerThread,1,1]),this.start=t,this.uniforms="start : ".concat(HJ(t.length),", "),this.shaderKey="slice"}return $r(e,[{key:"getUserCode",value:function(){var e,t=HJ(this.rank),n=function(e){if(1===e)return"sourceLoc";if(e<=6)return w$.slice(0,e).map((function(e){return"sourceLoc.".concat(e)})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank);return e=1===this.start.length?this.outputShape.map((function(e,t){return"sourceLoc = uniforms.start + coords;"})):this.outputShape.map((function(e,t){return"sourceLoc.".concat(w$[t]," = uniforms.start[").concat(t,"] + coords.").concat(w$[t],";")})),"\n      ".concat(GJ(),"\n        if (index < uniforms.size) {\n          var sourceLoc : ").concat(t,";\n          let coords = getCoordsFromIndex(index);\n          ").concat(e.join("\n"),"\n          setOutputAtIndex(index, getSource(").concat(n,"));\n        }\n      }\n    ")}}]),e}(),w$=["x","y","z","w","u","v"];function k$(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size,s=u(Sp.parseSliceParams(a,i,o),2),l=s[0],c=s[1];if(Sp.assertParamsValid(a,l,c),n.shouldExecuteOnCPU([a])||"string"===a.dtype){var d=n.tensorMap.get(a.dataId),h=JQ(d.values,l,c,a.shape,a.dtype);return n.makeTensorInfo(c,a.dtype,h)}if(0===Cl.sizeFromShape(c))return n.makeTensorInfo(c,a.dtype,[]);var p=new A$(l,c),f=[{type:"int32",data:l}];return n.runWebGPUProgram(p,[a],a.dtype,f)}var S$={kernelName:Iu,backendName:"webgpu",kernelFunc:k$},C$={kernelName:Ao,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;Cl.assert(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGPU backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=$b.getReshaped(a.shape,i,s),l=$b.getPermuted(u.length,i.length),c=$b.getReshapedPermuted(a.shape,i,s),d=$b.getSliceBeginCoords(o,i.length),h=$b.getSliceSize(c,o,i.length),p=[],f=cQ({inputs:{x:a},backend:n,attrs:{shape:u}}),m=p$({inputs:{x:f},backend:n,attrs:{perm:l}}),g=cQ({inputs:{x:m},backend:n,attrs:{shape:c}}),v=k$({inputs:{x:g},backend:n,attrs:{begin:d,size:h}});return p.push(f),p.push(m),p.push(g),p.forEach((function(e){return n.disposeData(e.dataId)})),v}},I$=CQ({opSnippet:10,dtype:"bool",cpuKernelImpl:GQ}),E$={kernelName:Js,backendName:"webgpu",kernelFunc:I$};function T$(e){var t=e.inputs,n=e.backend,r=t.input;return bQ({inputs:{x:n.tensorMap.get(r.dataId).complexTensorInfos.real},backend:n})}var N$={kernelName:cu,backendName:"webgpu",kernelFunc:T$};var _$={kernelName:Co,backendName:"webgpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return bQ({inputs:{x:i},backend:r});var s=Wg(i.shape),u=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),l=AQ({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeData(u.dataId),l}if("complex64"===i.dtype){var c=T$({inputs:{input:i},backend:r}),d=e({inputs:{x:c},backend:r,attrs:{dtype:o}});return r.disposeData(c.dataId),d}if(!Cl.hasEncodingLoss(i.dtype,o)){var h=bQ({inputs:{x:i},backend:r});return{dataId:h.dataId,shape:h.shape,dtype:o}}if("int32"===o)return function(e,t){var n=new kQ(e.shape,22),r=t.runWebGPUProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var p=r.makeTensorInfo([],"bool",Cl.getTypedArrayFromDType("bool",1)),f=I$({inputs:{a:i,b:p},backend:r});return r.disposeData(p.dataId),f}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},M$=SQ({opType:1,cpuKernelImpl:EQ}),R$={kernelName:Io,backendName:"webgpu",kernelFunc:M$},O$=function(){function e(t){Jr(this,e),this.variableNames=["A"],this.uniforms="minVal : f32, maxVal : f32,",this.workPerThread=4,this.workGroupSize=[64,1,1],this.isVec4=!0,this.size=!0,this.outputShape=t,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize,[this.workPerThread,1,1]),this.shaderKey="clipVec4"}return $r(e,[{key:"getUserCode",value:function(){return"\n      ".concat(GJ(),"\n        if(index < uniforms.size) {\n          let value = getAByOutputIndex(index);\n          var clampedValue : vec4<f32>;\n          for (var i = 0; i < 4; i = i + 1) {\n            if (isnan(value[i])) {\n              clampedValue[i] = value[i];\n            } else {\n              clampedValue[i] = clamp(value[i], uniforms.minVal, uniforms.maxVal);\n            }\n          }\n\n          setOutputAtIndex(index, clampedValue);\n        }\n      }\n    ")}}]),e}(),P$=function(){function e(t){Jr(this,e),this.variableNames=["A"],this.uniforms="minVal : f32, maxVal : f32,",this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="clip"}return $r(e,[{key:"getUserCode",value:function(){return"\n      ".concat(GJ(),"\n        if(index < uniforms.size) {\n          let value = getAByOutputIndex(index);\n          if (isnan(value)) {\n            setOutputAtIndex(index, value);\n            return;\n          }\n          setOutputAtIndex(index, clamp(value, uniforms.minVal, uniforms.maxVal));\n        }\n      }\n    ")}}]),e}();var F$={kernelName:Eo,backendName:"webgpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=[{type:"float32",data:[a.clipValueMin]},{type:"float32",data:[a.clipValueMax]}];return t=Cl.sizeFromShape(i.shape)%4===0?new O$(i.shape):new P$(i.shape),r.runWebGPUProgram(t,[i],i.dtype,o)}},D$=function(){function e(t){Jr(this,e),this.uniforms="",this.workPerThread=4,this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=$b.computeOutShape(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)})),this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize,[this.workPerThread,1,1]),this.offsetLength=t.length-1;for(var n=0;n<this.offsetLength;n++)this.uniforms+="offset".concat(n," : i32,");this.shaderKey="concat"}return $r(e,[{key:"getUserCode",value:function(){var e=[];if(this.offsetLength>0){e.push("if (yC < uniforms.offset0){ setOutputAtCoords(coords.x, coords.y, getT0(yR, yC)); }");for(var t=1;t<this.offsetLength;t++)e.push("else if (yC < uniforms.offset".concat([t],"){ setOutputAtCoords(coords.x, coords.y, getT").concat(t,"(yR, yC - uniforms.offset").concat(t-1,")); }"));var n=this.offsetLength,r=this.offsetLength-1;e.push("else { setOutputAtCoords(coords.x, coords.y, getT".concat(n,"(yR, yC - uniforms.offset").concat(r,")); }"))}else e.push("setOutputAtCoords(coords.x, coords.y, getT0(yR, yC));");return"\n      ".concat(GJ(),"\n        for(var i = 0; i < ").concat(this.workPerThread,"; i = i + 1) {\n          let flatIndex = index * ").concat(this.workPerThread," + i;\n          if(flatIndex < uniforms.size) {\n            let coords = getCoordsFromIndex(flatIndex);\n            let yR = coords.x;\n            let yC = coords.y;\n\n            ").concat(e.join("\n        "),"\n          }\n        }\n      }\n    ")}}]),e}();function L$(e){var t=e.inputs,n=e.backend,r=t.input;return bQ({inputs:{x:n.tensorMap.get(r.dataId).complexTensorInfos.imag},backend:n})}var z$={kernelName:ys,backendName:"webgpu",kernelFunc:L$};function B$(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return T$({inputs:{input:e},backend:n})})),i=e.map((function(e){return L$({inputs:{input:e},backend:n})})),o=B$(a,t,n),s=B$(i,t,n),u=AQ({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeData(e.dataId)})),i.forEach((function(e){return n.disposeData(e.dataId)})),n.disposeData(o.dataId),n.disposeData(s.dataId),u}var l=n.shouldExecuteOnCPU(e);if("string"===r&&(l=!0),l){var c=e.map((function(e){var r=Cl.sizeFromShape(e.shape.slice(t));return cQ({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),d=c.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),h=$b.computeOutShape(c.map((function(e){return e.shape})),1),p=1===c[0].shape[0],f=TQ(d,h,r,p),m=$b.computeOutShape(e.map((function(e){return e.shape})),t),g=n.makeTensorInfo(m,r,f);return c.forEach((function(e){return n.disposeData(e.dataId)})),g}var v=function(e,t,n){var r=$b.computeOutShape(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return cQ({inputs:{x:e},backend:n,attrs:{shape:[Cl.sizeFromShape(e.shape.slice(0,t)),Cl.sizeFromShape(e.shape.slice(t))]}})})),outShape:r}}(e,t,n),y=v.tensors2D,b=v.outShape,x=y.map((function(e){return e.shape})),A=new D$(x),w=[],k=new Array(x.length-1);if(k.length>0){k[0]=x[0][1],w.push({type:"int32",data:[k[0]]});for(a=1;a<k.length;a++)k[a]=k[a-1]+x[a][1],w.push({type:"int32",data:[k[a]]})}var S=n.runWebGPUProgram(A,y,y[0].dtype,w);y.forEach((function(e){return n.disposeData(e.dataId)}));var C=cQ({inputs:{x:S},backend:n,attrs:{shape:b}});return n.disposeData(S.dataId),C}function W$(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,a=Cl.parseAxisParam(r,t[0].shape)[0],i=$b.computeOutShape(t.map((function(e){return e.shape})),a);if(0===Cl.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);var o=t.filter((function(e){return Cl.sizeFromShape(e.shape)>0}));if(1===o.length)return bQ({inputs:{x:o[0]},backend:n});var s=o.map((function(e){return e.shape}));return $b.assertParamsConsistent(s,a),B$(o,a,n)}var j$={kernelName:_o,backendName:"webgpu",kernelFunc:W$},V$=function(e){switch(e){case 1:return"f32";case 2:return"vec2<f32>";case 3:return"vec3<f32>";case 4:return"vec4<f32>";default:throw new Error("innerElementSize ".concat(e," is not supported."))}};var H$=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Jr(this,e),this.variableNames=["x","W"],this.uniforms="filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>, dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=t.outShape,this.isChannelsLast="channelsLast"===t.dataFormat,this.isVec4=u,this.dispatchLayout=this.isChannelsLast?{x:[3],y:[1,2],z:[0]}:{x:[2,3],y:[1],z:[0]},this.workGroupSize=_J(this.dispatchLayout,this.outputShape,this.isVec4),this.elementsPerThread=RJ(this.dispatchLayout,this.outputShape,this.isVec4),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize,this.elementsPerThread),this.innerElementSize=this.isVec4?t.inChannels%4===0?4:3:this.elementsPerThread[0],this.isVec4&&(this.variableTypes=3===this.innerElementSize?["f32","vec4<f32>"]:["vec4<f32>","vec4<f32>"]),i&&(this.variableNames.push("bias"),this.isVec4&&this.variableTypes.push("vec4<f32>")),s&&(this.variableNames.push("preluActivationWeights"),this.isVec4&&this.variableTypes.push("vec4<f32>")),this.addBias=i,this.activation=o,this.hasPreluActivationWeights=s,this.tileAOuter=this.workGroupSize[1]*this.elementsPerThread[1],this.tileBOuter=this.workGroupSize[0]*this.elementsPerThread[0],this.tileInner=Math.max(this.workGroupSize[0]*this.innerElementSize,this.workGroupSize[1]),this.fitAOuter=n%this.tileAOuter===0,this.fitBOuter=r%this.tileBOuter===0,this.fitInner=a%this.tileInner===0,this.shaderKey="conv2DMM_".concat(this.elementsPerThread,"_").concat(this.activation,"}_").concat(this.fitAOuter,"_").concat(this.fitBOuter,"_").concat(this.fitInner,"_").concat(this.isVec4,"_").concat(this.innerElementSize,"_").concat(this.isChannelsLast)}return $r(e,[{key:"getUserCode",value:function(){var e=this.isVec4?BJ(this.elementsPerThread,this.tileAOuter,this.tileBOuter,this.tileInner,this.innerElementSize,!this.isChannelsLast):iQ(this.elementsPerThread,this.workGroupSize,!this.isChannelsLast,this.tileInner),t=this.isVec4?[this.isChannelsLast?this.innerElementSize:4,4,4]:[1,1,1];return"\n    ".concat(function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:4,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:4,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:4,c=function(e){switch(e){case 1:return"resData = x[xIndex];";case 3:return"resData = vec3<f32>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);";case 4:return"resData = x[xIndex / 4];";default:throw new Error("innerElementSize ".concat(e," is not supported."))}},d=function(e){switch(e){case 1:return"return W[row * uniforms.wShape[3] + colIn];";case 4:return"return W[row * uniforms.wShape[3] / 4 + colIn];";default:throw new Error("innerElementSize ".concat(e," is not supported."))}},h=e?"\n      let coord = vec4<i32>(batch, xRow, xCol, xCh);\n      ":"\n      let coord = vec4<i32>(batch, xCh, xRow, xCol);\n      ",p=e?"\n      let outCoord = vec4<i32>(\n        batch,\n        row / outWidth,\n        row % outWidth,\n        col);\n      ":"\n      let outCoord = vec4<i32>(\n        batch,\n        row,\n        col / outWidth,\n        col % outWidth);\n      ",f=e?"uniforms.xShape[1]":"uniforms.xShape[2]",m=e?"uniforms.xShape[2]":"uniforms.xShape[3]",g=e?"row":"col",v=e?"col":"row",y="\n      let inChannels = uniforms.wShape[2];\n      let outWidth = ".concat(e?"uniforms.outShape[2]":"uniforms.outShape[3]",";\n      let outRow = ").concat(g," / outWidth;\n      let outCol = ").concat(g," % outWidth;\n\n      let WRow = ").concat(v," / (uniforms.filterDims[1] * inChannels);\n      let WCol = ").concat(v," / inChannels % uniforms.filterDims[1];\n      let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];\n      let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];\n      let xCh = ").concat(v," % inChannels;\n      var resData = ").concat(V$(s),"(0.0);\n      // The bounds checking is always needed since we use it to pad zero for\n      // the 'same' padding type.\n      if (xRow >= 0 && xRow < ").concat(f," && xCol >= 0 && xCol < ").concat(m,") {\n        ").concat(h,"\n        let xIndex = getIndexFromCoords4D(coord, uniforms.xShape);\n        ").concat(c(s),"\n      }\n      return resData;"),b=e?t&&r?"\n      let col = colIn * ".concat(s,";\n      ").concat(y):"\n      let col = colIn * ".concat(s,";\n      if (row < uniforms.dimAOuter && col < uniforms.dimInner) {\n        ").concat(y,"\n      }\n      return ").concat(V$(s),"(0.0);"):r&&n?"\n      let col = colIn * ".concat(s,";\n      ").concat(y):"\n      let col = colIn * ".concat(s,";\n      if (row < uniforms.dimInner && col < uniforms.dimBOuter) {\n        ").concat(y,"\n      }\n      return ").concat(V$(s),"(0.0);"),x="".concat(d(u)),A=V$(l),w=V$(e?s:u),k=V$(e?u:s),S="",C="";if(i){var I=CJ(i,4===l);S=o?"fn activation(a: ".concat(A,", outCoord : vec4<i32>) -> ").concat(A," {\n              let b = getPreluActivationWeightsByOutputCoords(outCoord);\n              ").concat(I,"\n           }"):"\n           fn activation(a : ".concat(A,", outCoord : vec4<i32>) -> ").concat(A," {\n             ").concat(I,"\n           }"),C="value = activation(value, outCoord);"}return"\n      ".concat(S,"\n      fn mm_readA(row : i32, colIn : i32, globalId : vec3<u32>) -> ").concat(w," {\n        var batch = i32(globalId.z);\n        ").concat(e?b:x,"\n      }\n\n      fn mm_readB(row : i32, colIn : i32, globalId : vec3<u32>) -> ").concat(k," {\n        var batch = i32(globalId.z);\n        ").concat(e?x:b,"\n      }\n\n      fn mm_write(row : i32, colIn : i32, valueIn : ").concat(A,", globalId : vec3<u32>) {\n        var col = colIn * ").concat(l,";\n        if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)\n        {\n        var batch = i32(globalId.z);\n        var value = valueIn;\n        let outWidth = ").concat(e?"uniforms.outShape[2]":"uniforms.outShape[3]",";\n        ").concat(p,"\n        ").concat(a?"value = value + getBiasByOutputCoords(outCoord);":"","\n        ").concat(C,"\n        setOutputAtCoords(outCoord[0], outCoord[1], outCoord[2], outCoord[3], value);\n        }\n      }")}(this.isChannelsLast,this.fitAOuter,this.fitBOuter,this.fitInner,this.addBias,this.activation,this.hasPreluActivationWeights,t[0],t[1],t[2]),"\n    ").concat(e,"\n  ")}}]),e}();function U$(e,t){var n=e.length;return n>=3?[].concat(ta(e.slice(0,-3)),t?[e[n-3]*e[n-2],e[n-1]]:[e[n-3],e[n-2]*e[n-1]]):!t&&1===n&&e[0]>1?[e[0],1]:null}function G$(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,u=void 0===s?null:s,l=e.leakyreluAlpha,c=void 0===l?0:l,d=e.activation,h=void 0===d?null:d,p=null!=o,f=null!=u,m="channelsLast"===r.dataFormat;if(m&&r.filterHeight===r.inHeight&&r.filterWidth===r.inWidth&&"VALID"===r.padInfo.type||1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return function(e){var t,n,r=e.x,a=e.filter,i=e.convInfo,o=e.backend,s=e.bias,u=void 0===s?null:s,l=e.preluActivationWeights,c=void 0===l?null:l,d=e.leakyreluAlpha,h=void 0===d?0:d,p=e.activation,f=void 0===p?null:p,m="channelsLast"===i.dataFormat,g=!m,v=[];if(m&&i.filterHeight===i.inHeight&&i.filterWidth===i.inWidth&&"VALID"===i.padInfo.type){var y=i.inHeight*i.inWidth*i.inChannels;t=cQ({inputs:{x:r},backend:o,attrs:{shape:[1,i.batchSize,y]}}),n=cQ({inputs:{x:a},backend:o,attrs:{shape:[1,y,i.outChannels]}})}else t=cQ({inputs:{x:r},backend:o,attrs:{shape:m?[i.batchSize,i.inHeight*i.inWidth,i.inChannels]:[i.batchSize,i.inChannels,i.inHeight*i.inWidth]}}),n=cQ({inputs:{x:a},backend:o,attrs:{shape:[1,i.inChannels,i.outChannels]}});if(v.push(t),v.push(n),null!=c){var b=U$(c.shape,m);null!=b&&(c=cQ({inputs:{x:c},backend:o,attrs:{shape:b}}),v.push(c))}if(null!=u){var x=U$(u.shape,m);null!=x&&(u=cQ({inputs:{x:u},backend:o,attrs:{shape:x}}),v.push(u))}var A=hQ({a:m?t:n,b:m?n:t,transposeA:g,transposeB:!1,backend:o,bias:u,activation:f,preluActivationWeights:c,leakyreluAlpha:h}),w=cQ({inputs:{x:A},backend:o,attrs:{shape:i.outShape}});v.push(A);for(var k=0,S=v;k<S.length;k++){var C=S[k];o.disposeData(C.dataId)}return w}({x:t,filter:n,convInfo:r,backend:a,bias:o,activation:h,preluActivationWeights:u,leakyreluAlpha:c});var g=((r.inChannels%4===0||r.inChannels%3===0)&&m||r.outWidth%4===0&&!m)&&r.outChannels%4===0,v=m?r.outHeight*r.outWidth:r.outChannels,y=m?r.outChannels:r.outHeight*r.outWidth,b=r.filterHeight*r.filterWidth*r.inChannels,x=[r.padInfo.top,r.padInfo.left],A=[{type:"int32",data:[r.filterHeight,r.filterWidth]},{type:"int32",data:[].concat(x)},{type:"int32",data:[r.strideHeight,r.strideWidth]},{type:"int32",data:[r.dilationHeight,r.dilationWidth]},{type:"int32",data:[v]},{type:"int32",data:[y]},{type:"int32",data:[b]}],w=new H$(r,v,y,b,p,h,f,g),k=[],S=[t,n];p&&(!m&&1===o.shape.length&&(o=cQ({inputs:{x:o},backend:a,attrs:{shape:[o.shape[0],1,1]}}),k.push(o)),S.push(o)),f&&(!m&&1===u.shape.length&&(u=cQ({inputs:{x:u},backend:a,attrs:{shape:[u.shape[0],1,1]}}),k.push(u)),S.push(u)),"leakyrelu"===h&&(A.push({type:"float32",data:[c]}),w.uniforms+=" alpha : f32,");for(var C=a.runWebGPUProgram(w,S,t.dtype,A),I=0,E=k;I<E.length;I++){var T=E[I];a.disposeData(T.dataId)}return C}var X$={kernelName:Mo,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=n.strides,s=n.pad,u=n.dataFormat,l=n.dilations,c=n.dimRoundingMode,d=$b.convertConv2DDataFormat(u);return G$({x:a,filter:i,convInfo:$b.computeConv2DInfo(a.shape,i.shape,o,l,s,c,!1,d),backend:r})}},q$=function(){function e(t){Jr(this,e),this.variableNames=["x","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, stride : vec2<i32>, outBackprop : vec4<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=t.inShape,Cl.assert("channelsLast"===t.dataFormat,(function(){return"TODO: NCHW is unimplemented"})),this.dispatchLayout={x:[3],y:[1,2],z:[0]},this.workGroupSize=_J(this.dispatchLayout,this.outputShape),this.elementsPerThread=RJ(this.dispatchLayout,this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize,this.elementsPerThread),this.shaderKey="conv2DDerInputMM_".concat(this.elementsPerThread)}return $r(e,[{key:"getUserCode",value:function(){return"\n    fn mm_readA(row : i32, col : i32, globalId : vec3<u32>) -> f32 {\n      var batch = i32(globalId.z);\n      if (row < uniforms.dimAOuter && col < uniforms.dimInner) {\n      \n    let outRow = row / uniforms.outShape[2];\n    let outCol = row % uniforms.outShape[2];\n\n    let WRow = col / (uniforms.filterDims[1] * uniforms.outBackprop[3]);\n    let WCol = col / uniforms.outBackprop[3] % uniforms.filterDims[1];\n    let xR = f32(outRow - uniforms.pads[0] + WRow) / f32(uniforms.stride[0]);\n    let xC = f32(outCol - uniforms.pads[1] + WCol) / f32(uniforms.stride[1]);\n    if (xR < 0.0 || xR >= f32(uniforms.outBackprop[1]) || fract(xR) > 0.0) {\n      return 0.0;\n    }\n    if (xC < 0.0 || xC >= f32(uniforms.outBackprop[2]) || fract(xC) > 0.0) {\n      return 0.0;\n    }\n    let coord = vec4<i32>(\n        batch,\n        i32(xR),\n        i32(xC),\n        col % uniforms.outBackprop[3]);\n    return x[getIndexFromCoords4D(coord, uniforms.xShape)];\n    }\n    return 0.0;\n    }\n\n    fn mm_readB(row : i32, col : i32, globalId : vec3<u32>) -> f32 {\n      let coordX = uniforms.filterDims.x - 1 -\n          row / (uniforms.filterDims[1] * uniforms.outBackprop[3]);\n      let coordY = uniforms.filterDims.y - 1 -\n          (row / uniforms.outBackprop[3]) % uniforms.filterDims[1];\n      if (row < uniforms.dimInner && col < uniforms.dimBOuter &&\n          coordX >= 0 && coordY >= 0) {\n        let coord = vec4<i32>(coordX, coordY, col,\n            row % uniforms.outBackprop[3]);\n        return W[getIndexFromCoords4D(coord, uniforms.wShape)];\n      }\n      return 0.0;\n    }\n\n    fn mm_write(row : i32, col : i32, valueInput : f32, globalId : vec3<u32>) {\n      if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)\n      {\n      var batch = i32(globalId.z);\n      var value = valueInput;\n      let outCoord = vec4<i32>(\n          batch,\n          row / uniforms.outShape[2],\n          row % uniforms.outShape[2],\n          col);\n      result[getIndexFromCoords4D(outCoord, uniforms.outShape)] = value;\n      }\n    }\n\n    ".concat(iQ(this.elementsPerThread,this.workGroupSize),"\n  ")}}]),e}(),Y$=function(){function e(t){Jr(this,e),this.variableNames=["dy","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, stride : vec2<i32>, outBackprop : vec4<i32>,",this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=t.inShape,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.isChannelsLast="channelsLast"===t.dataFormat,this.shaderKey="conv2DDerInput_".concat(this.isChannelsLast)}return $r(e,[{key:"getUserCode",value:function(){var e=this.isChannelsLast?1:2,t=this.isChannelsLast?2:3,n=this.isChannelsLast?3:1;return"\n    ".concat(GJ()," {\n      if(index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords[0];\n        let d1 = coords[").concat(n,"];\n\n        let dyCorner = vec2<i32>(coords[").concat(e,"]), coords[").concat(t,"]) - uniforms.pads;\n        let dyRCorner = dyCorner.x;\n        let dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + 1) {\n          let dyR = (f32(dyRCorner) + f32(wR)) / f32(uniforms.stride.x);\n          let wRPerm = uniforms.filterDims.x - 1 - wR;\n          if (dyR < 0.0 || dyR >= f32(uniforms.outBackprop[1]) || fract(dyR) > 0.0 ||\n              wRPerm < 0) {\n            continue;\n          }\n          let idyR = dyR;\n\n          for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + 1) {\n            let dyC = (f32(dyCCorner) + f32(wC)) / f32(uniforms.stride.y);\n            let wCPerm = uniforms.filterDims.y - 1 - wC;\n            if (dyC < 0.0 || dyC >= f32(uniforms.outBackprop[2]) ||\n                fract(dyC) > 0.0 || wCPerm < 0) {\n              continue;\n            }\n            let idyC = dyC;\n\n            for (var d2 = 0; d2 < uniforms.outBackprop[3]; d2 = d2 + 1) {\n              if (").concat(this.isChannelsLast,") {\n                let xValue = getDy(batch, idyR, idyC, d2);\n                let wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd = dotProd + xValue * wValue;\n              } else {\n                let xValue = getDy(batch, d2, idyR, idyC);\n                let wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd = dotProd + xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n  ")}}]),e}();var K$={kernelName:Oo,backendName:"webgpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.dy,o=n.filter,s=a.inputShape,u=a.strides,l=a.pad,c=a.dataFormat,d=a.dimRoundingMode,h=$b.convertConv2DDataFormat(c),p=$b.computeConv2DInfo(s,o.shape,u,1,l,d,!1,h),f=[{type:"int32",data:[p.filterHeight,p.filterWidth]},{type:"int32",data:[p.filterHeight-1-p.padInfo.top,p.filterWidth-1-p.padInfo.left]},{type:"int32",data:[p.strideHeight,p.strideWidth]},{type:"int32",data:[p.batchSize,p.outHeight,p.outWidth,p.outChannels]}];if(Zi().getBool("WEBGPU_USE_NAIVE_CONV2D_TRANSPOSE"))t=new Y$(p);else{t=new q$(p);var m=p.inShape[1]*p.inShape[2],g=p.inShape[3],v=p.filterHeight*p.filterWidth*p.outChannels;f.push({type:"uint32",data:[m]},{type:"uint32",data:[g]},{type:"uint32",data:[v]})}return r.runWebGPUProgram(t,[i,o],"float32",f)}},Z$=SQ({opType:2}),J$={kernelName:Lo,backendName:"webgpu",kernelFunc:Z$},Q$=SQ({opType:3}),$$={kernelName:zo,backendName:"webgpu",kernelFunc:Q$},e0=function(){function e(t,n,r,a){Jr(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.uniforms="extrapolationValue : f32,",this.workGroupSize=[64,1,1],this.size=!0;var i=u(n,1)[0];this.outputShape=[i,r[0],r[1],t],this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.methodId="bilinear"===a?1:0,this.cropHeightBiggerThan1=this.outputShape[1]>1,this.cropWidthBiggerThan1=this.outputShape[2]>1,this.shaderKey="cropAndResize_".concat(this.methodId,"_").concat(this.cropHeightBiggerThan1,"_").concat(this.cropWidthBiggerThan1)}return $r(e,[{key:"getUserCode",value:function(){var e="f32(uniforms.imageShape[1] - 1)",t="f32(uniforms.imageShape[2] - 1)",n=u(this.cropHeightBiggerThan1?["(".concat(e," / f32(uniforms.outShape[1] - 1))"),"(y2-y1) * height_ratio","y1*".concat(e," + f32(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(e)],3),r=n[0],a=n[1],i=n[2],o=u(this.cropWidthBiggerThan1?["(".concat(t," / f32(uniforms.outShape[2] - 1))"),"(x2-x1) * width_ratio","x1*".concat(t," + f32(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(t)],3),s=o[0],l=o[1],c=o[2];return"\n      ".concat(GJ(),"\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let height_ratio = f32(").concat(r,");\n        let width_ratio = f32(").concat(s,");\n        let b = coords[0];\n        let y = coords[1];\n        let x = coords[2];\n        let d = coords[3];\n        // get box vals\n        let y1 = getBoxes(b, 0);\n        let x1 = getBoxes(b, 1);\n        let y2 = getBoxes(b, 2);\n        let x2 = getBoxes(b, 3);\n        // get image in batch index\n        let bInd = i32(round(getBoxInd(b)));\n        if(bInd < 0 || bInd >= uniforms.outShape[0]) {\n          return;\n        }\n        let height_scale = ").concat(a,";\n        let width_scale = ").concat(l,";\n        let in_y = ").concat(i,";\n        if( in_y < 0.0 || in_y > ").concat(e," ) {\n          setOutputAtIndex(index, uniforms.extrapolationValue);\n          return;\n        }\n        let in_x = ").concat(c,";\n        if( in_x < 0.0 || in_x > ").concat(t," ) {\n          setOutputAtIndex(index, uniforms.extrapolationValue);\n          return;\n        }\n        let sourceFracIndexCR = vec2<f32>(in_x,in_y);\n        if(").concat(this.methodId," == 1) {\n          // Compute the four integer indices.\n          let sourceFloorCR = vec2<i32>(sourceFracIndexCR);\n          let sourceCeilCR = vec2<i32>(ceil(sourceFracIndexCR));\n          let topLeft = getImage(bInd, sourceFloorCR.y, sourceFloorCR.x, d);\n          let bottomLeft = getImage(bInd, sourceCeilCR.y, sourceFloorCR.x, d);\n          let topRight = getImage(bInd, sourceFloorCR.y, sourceCeilCR.x, d);\n          let bottomRight = getImage(bInd, sourceCeilCR.y, sourceCeilCR.x, d);\n          let fracCR = sourceFracIndexCR - vec2<f32>(sourceFloorCR);\n          let top = topLeft + (topRight - topLeft) * fracCR.x;\n          let bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          let newValue = top + (bottom - top) * fracCR.y;\n          setOutputAtIndex(index, newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          let sourceNearestCR = vec2<i32>(floor(\n            sourceFracIndexCR + vec2<f32>(0.5,0.5)));\n          let newValue = getImage(\n            bInd, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutputAtIndex(index, newValue);\n        }\n      }\n    }\n    ")}}]),e}(),t0={kernelName:jo,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,l=r.extrapolationValue,c=new e0(a.shape[3],i.shape,s,u),d=[{type:"float32",data:[l]}];return n.runWebGPUProgram(c,[a,i,o],"float32",d)}},n0=function(){function e(t,n,r,a){Jr(this,e),this.variableNames=["x"],this.uniforms="index : f32,",this.size=!0;this.workGroupSize=[128,1,1],this.outputShape=n,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.exclusive=r,this.reverse=a,this.op=t,this.shaderKey="cum_".concat(this.op,"_").concat(this.exclusive,"_").concat(this.reverse)}return $r(e,[{key:"getUserCode",value:function(){var e=this.outputShape.length,t="*"===this.op?"1.0":"0.0",n=this.exclusive?t:"getX(".concat(r0(e,"coords",this.op),")"),r=this.outputShape[this.outputShape.length-1],a="",i="";return this.exclusive?(a=this.reverse?"end != ".concat(r-1):"end != 0",i=this.reverse?"end + 1":"end - 1"):(a=this.reverse?"end + pow2 < ".concat(r):"end >= pow2",i=this.reverse?"end + pow2":"end - pow2"),"\n      ".concat(GJ(),"\n       if (index < uniforms.size) {\n         var coords = getCoordsFromIndex(index);\n\n         let end = ").concat(a0(e,"coords",this.op),";\n         var val = ").concat(n,";\n         let pow2 = i32(pow(2.0, uniforms.index));\n         if (").concat(a,") {\n           let idx = ").concat(i,";\n           ").concat(a0(e,"coords",this.op)," = idx;\n           val ").concat(this.op,"= getX(").concat(r0(e,"coords",this.op),");\n         }\n         setOutputAtIndex(index, val);\n       }\n      }\n    ")}}]),e}();function r0(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function a0(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function i0(e,t,n,r,a,i){var o=t.shape.length,s=$b.getAxesPermutation([r],o),u=t;null!=s&&(u=p$({inputs:{x:t},backend:n,attrs:{perm:s}}));var l=$b.getInnerMostAxes(1,o)[0];if(l!==o-1)throw new Error("WebGPU cumprod shader expects an inner-most axis=".concat(t.shape.length-1," but got axis=").concat(r));for(var c=u.shape[l],d=bQ({inputs:{x:u},backend:n}),h=0;h<=Math.ceil(Math.log2(c))-1;h++){var p=new n0(e,u.shape,!1,i),f=d,m=[{type:"float32",data:[h]}];d=n.runWebGPUProgram(p,[d],d.dtype,m),n.disposeData(f.dataId)}if(a){var g=new n0(e,u.shape,a,i),v=d;d=n.runWebGPUProgram(g,[d],d.dtype,[{type:"float32",data:[0]}]),n.disposeData(v.dataId)}if(null!=s){var y=p$({inputs:{x:d},backend:n,attrs:{perm:$b.getUndoAxesPermutation(s)}});return n.disposeData(d.dataId),n.disposeData(u.dataId),y}return d}var o0={kernelName:Bo,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return i0("*",t.x,n,r.axis,r.exclusive,r.reverse)}};var s0={kernelName:Wo,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return i0("+",t.x,n,r.axis,r.exclusive,r.reverse)}},u0=function(){function e(t,n){Jr(this,e),this.variableNames=["x"],this.workGroupSize=[64,1,1],this.size=!0,this.uniforms="blockSize : i32,",this.outputShape=t,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="depthToSpace_".concat(n),this.dataFormat=n}return $r(e,[{key:"getUserCode",value:function(){return"\n      ".concat(GJ(),"\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let b = coords[0];\n          let h = ").concat(this.getHeightCoordString(),";\n          let w = ").concat(this.getWidthCoordString(),";\n          let d = ").concat(this.getDepthCoordString(),";\n\n          let in_h = h / uniforms.blockSize;\n          let offset_h = h % uniforms.blockSize;\n          let in_w = w / uniforms.blockSize;\n          let offset_w = w % uniforms.blockSize;\n          let offset_d = (offset_h * uniforms.blockSize + offset_w) *\n            ").concat(this.getOutputDepthSize(),";\n          let in_d = d + offset_d;\n\n          let rlt = ").concat(this.getInputSamplingString(),";\n          setOutputAtIndex(index, rlt);\n        }\n      }")}},{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?"uniforms.outShape[3]":"uniforms.outShape[1]"}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var l0={kernelName:Ho,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,l=("NHWC"===o?a.shape[2]:a.shape[3])*i,c=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),d=[{type:"int32",data:[i]}],h=new u0("NHWC"===o?[s,u,l,c]:[s,c,u,l],o);return n.runWebGPUProgram(h,[a],a.dtype,d)}},c0=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Jr(this,e),this.variableNames=["x","W"],this.uniforms="pad : vec2<i32>, stride : vec2<i32>, dilation : vec2<i32>, inDims : vec2<i32>,",this.workGroupSize=[4,4,4],this.isVec4=!0,this.outputShape=t.outShape,this.dispatchLayout={x:[0,1],y:[2],z:[3]},this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize,[1,4,4]),Cl.assert("channelsLast"===t.dataFormat,(function(){return"TODO: NCHW is unimplemented"})),n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.convInfo=t,this.addBias=n,this.activation=r,this.hasPreluActivation=a,this.shaderKey="depthwise3x3_".concat(r)}return $r(e,[{key:"getUserCode",value:function(){var e="",t="";if(this.activation){var n=CJ(this.activation,this.isVec4);e=this.hasPreluActivation?"fn activation(a : vec4<f32>, outCoord : vec4<i32>) -> vec4<f32> {\n          let b = getPreluActivationWeightsByOutputCoords(outCoord);\n          ".concat(n,"\n        }"):"\n        fn activation(a : vec4<f32>, outCoord : vec4<i32>) -> vec4<f32> {\n            ".concat(n,"\n          }\n        "),t="dotProd[i] = activation(dotProd[i], coords);"}var r=this.addBias?"dotProd[i] = dotProd[i] + getBiasByOutputCoords(coords);":"";return"\n      ".concat(e,"\n\n      ").concat("\n  @stage(compute) @workgroup_size(workGroupSizeX, workGroupSizeY, workGroupSizeZ)\n","\n      fn main(@builtin(global_invocation_id) globalId: vec3<u32>) {\n        let batch = 0;\n        let r = i32(globalId.x);\n        let c = i32(globalId.y) * 4;\n        let d2 = i32(globalId.z) * 4;\n        let xRCCorner = vec2<i32>(r, c) * uniforms.stride - uniforms.pad;\n        let d1 = d2;\n        let q = 0;\n\n        let xRCorner = xRCCorner.x;\n        let xCCorner = xRCCorner.y;\n\n        var wVals : array<vec4<f32>, 9>;\n        wVals[0] = getW(0, 0, d1, q);\n        wVals[1] = getW(0, 1, d1, q);\n        wVals[2] = getW(0, 2, d1, q);\n        wVals[3] = getW(1, 0, d1, q);\n        wVals[4] = getW(1, 1, d1, q);\n        wVals[5] = getW(1, 2, d1, q);\n        wVals[6] = getW(2, 0, d1, q);\n        wVals[7] = getW(2, 1, d1, q);\n        wVals[8] = getW(2, 2, d1, q);\n\n        var xVals : array<array<vec4<f32>, 6>, 3>;\n        for (var wR = 0; wR < 3; wR = wR + 1) {\n          let xR = xRCorner + wR * uniforms.dilation[0];\n          for (var wC = 0; wC < 6; wC = wC + 1) {\n            let xC = xCCorner + wC * uniforms.dilation[1];\n            if (xR < 0 || xR >= uniforms.inDims[0] || xC < 0 || xC >= uniforms.inDims[1]) {\n              xVals[wR][wC] = vec4<f32>(0.0);\n            } else {\n              xVals[wR][wC] = getX(batch, xR, xC, d1);\n            }\n          }\n        }\n\n        var dotProd : array<vec4<f32>, 4>;\n        dotProd[0] = vec4<f32>(0.0);\n        dotProd[1] = vec4<f32>(0.0);\n        dotProd[2] = vec4<f32>(0.0);\n        dotProd[3] = vec4<f32>(0.0);\n\n        for (var wR = 0; wR < 3; wR = wR + 1) {\n          for (var wC = 0; wC < 3; wC = wC + 1) {\n            let indexW = wR * 3 + wC;\n            dotProd[0] = dotProd[0] + xVals[wR][0 + wC] * wVals[indexW];\n            dotProd[1] = dotProd[1] + xVals[wR][1 + wC] * wVals[indexW];\n            dotProd[2] = dotProd[2] + xVals[wR][2 + wC] * wVals[indexW];\n            dotProd[3] = dotProd[3] + xVals[wR][3 + wC] * wVals[indexW];\n          }\n        }\n\n        for (var i = 0; i < 4; i = i + 1) {\n          let coords = vec4<i32>(batch, r, c + i, d2);\n          if (coordsInBounds4D(coords, uniforms.outShape)) {\n            ").concat(r,"\n            ").concat(t,"\n            setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], dotProd[i]);\n          }\n        }\n      }\n    ")}}]),e}(),d0=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Jr(this,e),this.variableNames=["x","W"],this.uniforms="pad : vec2<i32>, stride : vec2<i32>, dilation : vec2<i32>,\n      inDims : vec2<i32>, filterHeight : i32, filterWidth : i32,\n      channelMul : i32,",this.workGroupSize=[256,1,1],this.outputShape=t.outShape,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),Cl.assert("channelsLast"===t.dataFormat,(function(){return"TODO: NCHW is unimplemented"})),n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.convInfo=t,this.addBias=n,this.activation=r,this.hasPreluActivation=a,this.shaderKey="depthwise_".concat(this.activation)}return $r(e,[{key:"getUserCode",value:function(){var e="",t="";if(this.activation){var n=CJ(this.activation,!1);e=this.hasPreluActivation?"fn activation(a : f32, outCoord : vec4<i32>) -> f32 {\n          let b = getPreluActivationWeightsByOutputCoords(outCoord);\n          ".concat(n,"\n        }"):"\n          fn activation(a : f32, outCoord : vec4<i32>) -> f32 {\n            ".concat(n,"\n          }\n        "),t="dotProd = activation(dotProd, coords);"}var r=this.addBias?"dotProd = dotProd + getBiasByOutputCoords(coords);":"";return"\n      ".concat(e,"\n\n      fn writeResult(batch : i32, row : i32, col : i32, chan : i32,\n          value : f32) {\n        let coord = vec4<i32>(batch, row, col, chan);\n        if (coordsInBounds4D(coord, uniforms.outShape)) {\n          setOutputAtCoords(batch, row, col, chan, value);\n        }\n      }\n\n      ").concat(XJ(),"\n        let coords = getOutputCoords();\n        let batch = coords[0];\n        let xRCCorner = vec2<i32>(coords.yz) * uniforms.stride - uniforms.pad;\n        let d2 = coords[3];\n        let d1 = d2 / uniforms.channelMul;\n        let q = d2 - d1 * uniforms.channelMul;\n\n        let inputRowStart = xRCCorner.x;\n        let inputColStart = xRCCorner.y;\n        let inputRowEnd = inputRowStart + uniforms.filterHeight *\n            uniforms.dilation[0];\n        let inputColEnd = inputColStart + uniforms.filterWidth *\n            uniforms.dilation[1];\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n\n        // Extract if checking out of for loop for performance.\n        if (inputRowStart >= 0 && inputColStart >= 0 &&\n          inputRowEnd < uniforms.inDims[0] &&\n              inputColEnd < uniforms.inDims[1]) {\n            // Here using a constant value |this.convInfo.filterHeight| instead\n            // of uniform value is in order to loop unrolling.\n            for (var wR = 0; wR < uniforms.filterHeight; wR = wR + 1) {\n              let xR = inputRowStart + wR * uniforms.dilation[0];\n\n              for (var wC = 0; wC < uniforms.filterWidth; wC = wC + 1) {\n                let xC = inputColStart + wC * uniforms.dilation[1];\n\n                let xVal = getX(batch, xR, xC, d1);\n                let wVal = getW(wR, wC, d1, q);\n                dotProd = dotProd + xVal * wVal;\n              }\n            }\n          } else {\n            for (var wR = 0; wR < uniforms.filterHeight; wR = wR + 1) {\n              let xR = inputRowStart + wR * uniforms.dilation[0];\n\n              if (xR < 0 || xR >= uniforms.inDims[0]) {\n                continue;\n              }\n\n              for (var wC = 0; wC < uniforms.filterWidth; wC = wC + 1) {\n                let xC = inputColStart + wC * uniforms.dilation[1];\n\n                if (xC < 0 || xC >= uniforms.inDims[1]) {\n                  continue;\n                }\n\n                let xVal = getX(batch, xR, xC, d1);\n                let wVal = getW(wR, wC, d1, q);\n                dotProd = dotProd + xVal * wVal;\n              }\n            }\n          }\n\n        ").concat(r,"\n        ").concat(t,"\n        writeResult(batch, coords[1], coords[2], d2, dotProd);\n      }\n    ")}}]),e}();var h0={kernelName:Uo,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=r.dimRoundingMode,c=u;null==c&&(c=[1,1]);var d,h=$b.computeConv2DInfo(a.shape,i.shape,o,c,s,l,!0),p=[{type:"int32",data:[h.padInfo.top,h.padInfo.left]},{type:"int32",data:[h.strideHeight,h.strideWidth]},{type:"int32",data:[h.dilationHeight,h.dilationWidth]},{type:"int32",data:[h.inHeight,h.inWidth]}];return 1===h.batchSize&&h.inHeight===h.outHeight&&h.inWidth===h.outWidth&&1===h.strideHeight&&1===h.strideWidth&&h.filterHeight===h.filterWidth&&h.inChannels===h.outChannels&&1===h.dilationHeight&&1===h.dilationWidth&&3===h.filterHeight&&h.inChannels%4===0?d=new c0(h):(d=new d0(h),p.push({type:"int32",data:[h.filterHeight]},{type:"int32",data:[h.filterWidth]},{type:"int32",data:[h.outChannels/h.inChannels]})),n.runWebGPUProgram(d,[a,i],a.dtype,p)}},p0=CQ({opSnippet:0,cpuKernelImpl:HQ,supportsComplex:!0}),f0={kernelName:Ks,backendName:"webgpu",kernelFunc:p0},m0=function(){function e(t,n){Jr(this,e),this.workGroupSize=[64,1,1],this.variableNames=["x"],this.uniforms="reduceSize : i32,",this.size=!0,this.inputShape=[t.batchSize,t.inSize];var r=u($b.computeOutAndReduceShapes(this.inputShape,[1]),1)[0];this.outputShape=0===r.length?[1]:r,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,[1,1,1]),this.reduceType=n,this.shaderKey="reduce_".concat(n)}return $r(e,[{key:"getUserCode",value:function(){var e="",t="0.0";"min"===this.reduceType||"max"===this.reduceType?(e="\n         if (isnan(candidate)) {\n          bestValue = uniforms.NAN;\n         } else if (!isnan(bestValue) && candidate ".concat("min"===this.reduceType?"<":">"," bestValue)\n           {  bestValue = candidate; }"),t="f32(x[offset])"):"sum"===this.reduceType||"mean"===this.reduceType?e=" bestValue = bestValue + candidate; ":"prod"===this.reduceType&&(e=" bestValue = bestValue * candidate; ",t="1.0");var n="mean"===this.reduceType?"setOutputAtIndex(outputIndex, bestValue / f32(uniforms.reduceSize));":"setOutputAtIndex(outputIndex, bestValue);";return"\n       fn DIV_CEIL(a : u32, b : u32) -> u32 {\n        return ((a - 1u) / b + 1u);\n       }\n\n       ".concat("\n         var<workgroup> xBestValues : array<f32, ".concat(this.workGroupSize[0],">;\n       "),"\n       fn getOffset(outputIndex : i32) -> i32 {\n         let outputCoords = getCoordsFromIndex(outputIndex);\n         let offset = ",1===this.outputShape.length?"outputCoords":"outputCoords[0]"," * uniforms.reduceSize;\n          return offset;\n       }\n       ").concat(GJ(),"\n         let outputIndex = index / i32(workGroupSizeX);\n         let offset = getOffset(outputIndex);\n         var bestValue = ").concat(t,";\n         let Length = uniforms.reduceSize;\n         let WorkPerThread = DIV_CEIL(u32(Length), workGroupSizeX);\n         for (var k = i32(localId.x); k < Length && outputIndex < uniforms.size;\n             k = k + i32(workGroupSizeX)) {\n           let candidate = f32(x[offset + k]);\n           ").concat(e,"\n         }\n         xBestValues[localId.x] = bestValue;\n         workgroupBarrier();\n\n         var reduceSize = min(u32(Length), workGroupSizeX);\n         for (var currentSize = reduceSize / 2u; reduceSize > 1u;\n             currentSize = reduceSize / 2u) {\n           let interval = DIV_CEIL(reduceSize, 2u);\n           if (localId.x < currentSize) {\n            let candidate = xBestValues[localId.x + interval];\n            ").concat(e,"\n            xBestValues[localId.x] = bestValue;\n           }\n           reduceSize = interval;\n           workgroupBarrier();\n         }\n\n         if (localId.x == 0u && outputIndex < uniforms.size) {\n          ").concat(n,"\n        }\n       }\n     ")}}]),e}();function g0(e,t,n,r,a){var i=e.shape.length,o=[],s=Cl.parseAxisParam(t,e.shape),l=s,c=$b.getAxesPermutation(l,i),d=e;null!=c&&(d=p$({inputs:{x:e},attrs:{perm:c},backend:a}),l=$b.getInnerMostAxes(l.length,i),o.push(d)),$b.assertAxesAreInnerMostDims(r,l,i);var h,p=u($b.computeOutAndReduceShapes(d.shape,l),2),f=p[0],m=p[1],g=f;if(n&&(g=$b.expandShapeToKeepDim(f,s)),"max"!==r&&"prod"!==r||!a.shouldExecuteOnCPU([d])){var v=Cl.sizeFromShape(m),y={windowSize:v,inSize:v,batchSize:Cl.sizeFromShape(d.shape)/v,outSize:1},b="mean"===r?"float32":vc(e.dtype),x=[{type:"int32",data:[v]}],A=new m0(y,r),w=a.runWebGPUProgram(A,[d],b,x);o.push(w),h=cQ({inputs:{x:w},attrs:{shape:g},backend:a})}else{var k=a.tensorMap.get(d.dataId).values;switch(r){case"max":var S=WQ(k,Cl.sizeFromShape(m),g,e.dtype);h=a.makeTensorInfo(g,e.dtype,S);break;case"prod":var C=XQ(d.shape,d.dtype,k,l),I=C.outVals,E=C.outShape,T=C.outDtype;h=a.makeTensorInfo(E,T,I);break;default:throw new Error("".concat(r," CPU implementation is not yet supported."))}}return o.forEach((function(e){return a.disposeData(e.dataId)})),h}function v0(e){var t=e.inputs,n=e.backend,r=e.attrs;return g0(t.x,r.axis,r.keepDims,"sum",n)}var y0={kernelName:Ou,backendName:"webgpu",kernelFunc:v0};var b0={kernelName:Qo,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,a=t,i=$b.decodeEinsumEquation(r,a.length),o=i.allDims,s=i.summedDims,u=i.idDims;$b.checkEinsumDimSizes(o.length,u,a);for(var l=$b.getEinsumComputePath(s,u),c=l.path,d=l.steps,h=d.length,p=null,f=o.length,m=[],g=0;g<h;++g){var v,y=ea(d[g]);try{for(y.s();!(v=y.n()).done;){var b=v.value,x=$b.getEinsumPermutation(f,u[b]),A=x.permutationIndices,w=x.expandDims,k=void 0;$b.isIdentityPermutation(A)?k=a[b]:(k=p$({inputs:{x:a[b]},backend:n,attrs:{perm:A}}),m.push(k));for(var S=k.shape.slice(),C=0;C<w.length;++C)S.splice(w[C],0,1);Cl.arraysEqual(k.shape,S)||(k=cQ({inputs:{x:k},backend:n,attrs:{shape:S}}),m.push(k)),null===p?p=k:(p=p0({inputs:{a:k,b:p},backend:n}),m.push(p))}}catch(N){y.e(N)}finally{y.f()}g<h-1&&(c[g]>=0&&(p=v0({inputs:{x:p},backend:n,attrs:{axis:c[g]-(o.length-f),keepDims:!1}}),m.push(p)),f--)}for(var I=0,E=m;I<E.length;I++){var T=E[I];T!==p&&n.disposeData(T.dataId)}return p}},x0=SQ({opType:4}),A0={kernelName:$o,backendName:"webgpu",kernelFunc:x0},w0=CQ({opSnippet:4,dtype:"bool",cpuKernelImpl:NQ}),k0={kernelName:ns,backendName:"webgpu",kernelFunc:w0},S0=SQ({opType:5,cpuKernelImpl:_Q,dtype:"float32"}),C0={kernelName:rs,backendName:"webgpu",kernelFunc:S0};function I0(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),u=a;return a<0&&(Cl.assert(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+a+1),s.splice(u,0,1),cQ({inputs:{x:i},backend:r,attrs:{shape:s}})}var E0={kernelName:as,backendName:"webgpu",kernelFunc:I0},T0=SQ({opType:6,cpuKernelImpl:MQ}),N0={kernelName:is,backendName:"webgpu",kernelFunc:T0},_0=function(){function e(t){Jr(this,e),this.variableNames=[],this.outputShape=[],this.uniforms="value : f32,",this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="fill"}return $r(e,[{key:"getUserCode",value:function(){return"\n    ".concat(GJ(),"\n      if (index < uniforms.size) {\n        setOutputAtIndex(index, uniforms.value);\n      }\n    }\n  ")}}]),e}();function M0(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||Cl.inferDtype(a))){var o=Cl.getArrayFromDType(i,Cl.sizeFromShape(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new _0(r),u=[{type:"float32",data:[a]}];return t.runWebGPUProgram(s,[],i,u)}var R0,O0={kernelName:ss,backendName:"webgpu",kernelFunc:M0},P0=function(){function e(t){Jr(this,e),this.outputShape=[],this.variableNames=["x"],this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="flipLeftRight"}return $r(e,[{key:"getUserCode",value:function(){return"\n      ".concat(GJ(),"\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let coordX = uniforms.xShape[2] - coords[2] - 1;\n          let outputValue = getX(coords[0], coords[1], coordX, coords[3]);\n          setOutputAtIndex(index, outputValue);\n        }\n      }\n    ")}}]),e}(),F0={kernelName:us,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new P0(r.shape);return a.runWebGPUProgram(i,[r],r.dtype)}},D0=SQ({opType:7,cpuKernelImpl:RQ}),L0={kernelName:ls,backendName:"webgpu",kernelFunc:D0},z0=CQ({opSnippet:12,dtype:"int32"}),B0={kernelName:cs,backendName:"webgpu",kernelFunc:z0},W0=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Jr(this,e),this.outputShape=[0],this.variableNames=[],this.workGroupSize=[256,1,1],this.outputShape=t,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.useImport=n,this.shaderKey="fromPixels_".concat(this.useImport)}return $r(e,[{key:"getUserCode",value:function(){var e=this.useImport?"textureLoad(src, vec2<i32>(coords.yx));":"textureLoad(src, vec2<i32>(coords.yx), 0)";return"\n      @binding(1) @group(0) var src: ".concat(this.useImport?"texture_external":"texture_2d<f32>",";\n\n      ").concat(GJ(),"\n        let flatIndexBase = index * uniforms.numChannels;\n        for (var i = 0; i < uniforms.numChannels; i = i + 1) {\n          let flatIndex = flatIndexBase + i;\n          if (flatIndex < uniforms.size) {\n            let coords = getCoordsFromIndex(flatIndexBase);\n            let values = ").concat(e,";\n            result[flatIndex] = i32(floor(255.0 * values[i]));\n          }\n        }\n      }\n  ")}}]),e}(),j0={kernelName:sl,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels;if(null==a)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var o="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,l="undefined"!=typeof HTMLCanvasElement&&a instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&a instanceof OffscreenCanvas,c="undefined"!=typeof ImageBitmap&&a instanceof ImageBitmap,d=u(o?[a.videoWidth,a.videoHeight]:[a.width,a.height],2),h=d[0],p=d[1],f=[p,h,i];if(Zi().getBool("WEBGPU_USE_IMPORT")&&o)return V0({externalImage:a,backend:n,attrs:r,outShape:f,useImport:!0});if((o||s)&&(null==R0&&(R0=document.createElement("canvas").getContext("2d")),R0.canvas.width=h,R0.canvas.height=p,R0.drawImage(a,0,0,h,p),a=R0.canvas),c||l||o||s)return V0({externalImage:a,backend:n,attrs:r,outShape:f,useImport:!1});var m=a.data,g=m;if(null!=i&&4!==i){g=new Uint8Array(a.width*a.height*i);for(var v=m.length,y=0,b=0;b<v;b++)b%4<i&&(g[y++]=m[b])}var x=n.makeTensorInfo(f,"int32");return n.tensorMap.get(x.dataId).values=new Int32Array(g),n.maybeReleaseBuffer(x.dataId),n.uploadToGPU(x.dataId),x}};function V0(e){var t=e.externalImage,n=e.backend,r=e.attrs,a=e.outShape,i=e.useImport,o=r.numChannels,s=Cl.sizeFromShape(a),u=Cl.computeStrides(a),l=new W0(a,i),c=[{type:"uint32",data:[s]},{type:"uint32",data:[o]},{type:"uint32",data:ta(u)},{type:"uint32",data:ta(l.dispatch)}];return n.runFromPixelsProgram(l,a,c,i,t)}var H0=function(){function e(t,n,r,a,i){Jr(this,e),this.uniforms="varianceEpsilon : f32,",this.workGroupSize=[128,1,1],this.size=!0,this.variableNames=["x","mean","variance"],$b.assertAndGetBroadcastShape(t,n),$b.assertAndGetBroadcastShape(t,r),this.outputShape=t,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),null!=a&&($b.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset")),null!=i&&($b.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale")),this.offsetShape=a,this.scaleShape=i,this.shaderKey="batchNorm"}return $r(e,[{key:"getUserCode",value:function(){var e="0.0";null!=this.offsetShape&&(e="getOffsetByOutputIndex(index)");var t="1.0";return null!=this.scaleShape&&(t="getScaleByOutputIndex(index)"),"\n      ".concat(GJ(),"\n        if (index < uniforms.size)\n        {\n          let xValue = getXByOutputIndex(index);\n          let meanValue = getMeanByOutputIndex(index);\n          let varianValue = getVarianceByOutputIndex(index);\n          let offsetValue = ").concat(e,";\n          let scaleValue = ").concat(t,";\n          let inv = scaleValue * inverseSqrt(varianValue + f32(uniforms.varianceEpsilon));\n          setOutputAtIndex(index,dot(vec3<f32>(xValue, -meanValue, offsetValue), vec3<f32>(inv, inv, 1.0)));\n        }\n      }\n  ")}}]),e}(),U0={kernelName:ds,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.scale,o=t.offset,s=t.mean,u=t.variance,l=n.varianceEpsilon,c=r,d=[a,s,u],h=null;null!=o&&(h=o.shape,d.push(o));var p=null;null!=i&&(p=i.shape,d.push(i));var f=new H0(a.shape,s.shape,u.shape,h,p),m=[{type:"float32",data:[l]}];return c.runWebGPUProgram(f,d,a.dtype,m)}};var G0={kernelName:cl,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dataFormat,d=r.dilations,h=r.dimRoundingMode,p=r.activation,f=r.leakyreluAlpha,m=$b.convertConv2DDataFormat(c);return G$({x:a,filter:i,convInfo:$b.computeConv2DInfo(a.shape,i.shape,u,d,l,h,!1,m),backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:f,activation:p})}};var X0={kernelName:dl,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dilations,d=r.dimRoundingMode,h=r.activation,p=r.leakyreluAlpha,f=c;null==f&&(f=[1,1]),Cl.assert($b.eitherStridesOrDilationsAreOne(u,f),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(u," and dilations '").concat(f,"'")}));var m=$b.computeConv2DInfo(a.shape,i.shape,u,f,l,d,!0),g=[a,i],v=null!=o,y=null!=s;v&&g.push(o),y&&g.push(s);var b,x=[{type:"int32",data:[m.padInfo.top,m.padInfo.left]},{type:"int32",data:[m.strideHeight,m.strideWidth]},{type:"int32",data:[m.dilationHeight,m.dilationWidth]},{type:"int32",data:[m.inHeight,m.inWidth]}];return 1===m.batchSize&&m.inHeight===m.outHeight&&m.inWidth===m.outWidth&&1===m.strideHeight&&1===m.strideWidth&&m.filterHeight===m.filterWidth&&m.inChannels===m.outChannels&&1===m.dilationHeight&&1===m.dilationWidth&&3===m.filterHeight&&m.inChannels%4===0?b=new c0(m,v,h,y):(b=new d0(m,v,h,y),x.push({type:"int32",data:[m.filterHeight]},{type:"int32",data:[m.filterWidth]},{type:"int32",data:[m.outChannels/m.inChannels]})),"leakyrelu"===h&&(x.push({type:"float32",data:[p]}),b.uniforms+=" alpha : f32,"),n.runWebGPUProgram(b,g,"float32",x)}},q0=function(){function e(t,n){Jr(this,e),this.variableNames=["A","indices"],this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=n,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="gathernd_".concat(t),this.sliceDim=t,this.uniforms="sliceDim : i32, strides : ".concat(HJ(t),",")}return $r(e,[{key:"getUserCode",value:function(){var e;return e=this.sliceDim>1?"uniforms.strides[j]":"uniforms.strides","\n        ".concat(GJ(),"\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          var flattenIndex = 0;\n          for (var j = 0; j < uniforms.sliceDim; j = j + 1) {\n            let indexTemp = i32(round(getIndices(coords[0], j)));\n            let strideNum = ").concat(e,";\n            flattenIndex = flattenIndex + indexTemp * strideNum;\n          }\n\n          setOutputAtIndex(index, getA(flattenIndex, coords[1]));\n        }\n      }\n      ")}}]),e}();var Y0={kernelName:ps,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=Cl.sizeFromShape(r.shape),l=u($b.prepareAndValidate(r,a),4),c=l[0],d=l[1],h=l[2],p=l[3],f=cQ({inputs:{x:a},backend:n,attrs:{shape:[d,o]}}),m=cQ({inputs:{x:r},backend:n,attrs:{shape:[Cl.sizeFromShape(r.shape)/h,h]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var g=n.readSync(a.dataId),v=n.bufferSync(r),y=OQ(g,v,r.dtype,d,o,h,p,r.shape,s);return n.makeTensorInfo(c,r.dtype,y.values)}var b=new q0(o,[d,h]),x=[{type:"int32",data:[o]},{type:"int32",data:p}],A=n.runWebGPUProgram(b,[m,f],m.dtype,x),w=cQ({inputs:{x:A},backend:n,attrs:{shape:c}});return n.disposeData(f.dataId),n.disposeData(m.dataId),n.disposeData(A.dataId),w}},K0=function(){function e(t,n){Jr(this,e),this.variableNames=["A","indices"],this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=t.slice(),this.aShape=t,this.outputShape=n,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="gather"}return $r(e,[{key:"getUserCode",value:function(){var e=function(e){for(var t=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[],r=0;r<e.length;r++)2===r?n.push("indexZ"):n.push("".concat(t[r]));return n.join()}(this.aShape);return"\n      ".concat(GJ(),"\n        if (index < uniforms.size) {\n          let resRC = getCoordsFromIndex(index);\n          let indexZ = i32(getIndices(resRC.x, resRC.z));\n          let inBounds = select(0.0, 1.0, indexZ >= 0 && indexZ < uniforms.aShape[2]);\n          setOutputAtIndex(index, inBounds * getA(").concat(e,"));\n        }\n      }\n    ")}}]),e}();function Z0(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,u=Cl.parseAxisParam(o,a.shape)[0],l=$b.segment_util.collectGatherOpShapeInfo(a,i,u,s),c=Cl.sizeFromShape(i.shape),d=[],h=cQ({inputs:{x:a},backend:n,attrs:{shape:[l.batchSize,l.outerSize,l.dimSize,l.sliceSize]}}),p=cQ({inputs:{x:i},backend:n,attrs:{shape:[l.batchSize,c/l.batchSize]}});d.push(h),d.push(p);var f=[l.batchSize,l.outerSize,c/l.batchSize,l.sliceSize];if(n.shouldExecuteOnCPU([a,i])){var m=n.tensorMap.get(p.dataId).values,g=eh(p.shape,p.dtype,m),v=n.tensorMap.get(h.dataId).values,y=eh(h.shape,h.dtype,v),b=PQ(y,g,f);return d.forEach((function(e){return n.disposeData(e.dataId)})),n.makeTensorInfo(l.outputShape,b.dtype,b.values)}var x=new K0(h.shape,f),A=n.runWebGPUProgram(x,[h,p],h.dtype);d.push(A);var w=cQ({inputs:{x:A},backend:n,attrs:{shape:l.outputShape}});return d.forEach((function(e){return n.disposeData(e.dataId)})),w}var J0={kernelName:hs,backendName:"webgpu",kernelFunc:Z0},Q0=CQ({opSnippet:5,cpuKernelImpl:DQ,dtype:"bool"}),$0={kernelName:fs,backendName:"webgpu",kernelFunc:Q0},e1=CQ({opSnippet:6,dtype:"bool",cpuKernelImpl:FQ}),t1={kernelName:ms,backendName:"webgpu",kernelFunc:e1};var n1={kernelName:ws,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=[{type:"float32",data:[r.alpha]}],o=new kQ(a.shape,14);return o.uniforms="alpha : f32,",n.runWebGPUProgram(o,[a],"float32",i)}},r1=CQ({opSnippet:7,dtype:"bool",cpuKernelImpl:zQ}),a1={kernelName:ks,backendName:"webgpu",kernelFunc:r1},i1=CQ({opSnippet:8,dtype:"bool",cpuKernelImpl:LQ}),o1={kernelName:Ss,backendName:"webgpu",kernelFunc:i1},s1=SQ({opType:9,cpuKernelImpl:BQ}),u1={kernelName:Is,backendName:"webgpu",kernelFunc:s1},l1=CQ({opSnippet:9,dtype:"bool"}),c1={kernelName:Ts,backendName:"webgpu",kernelFunc:l1},d1=SQ({opType:10}),h1={kernelName:Ns,backendName:"webgpu",kernelFunc:d1};function p1(e){var t=e.inputs,n=e.backend,r=e.attrs;return g0(t.x,r.reductionIndices,r.keepDims,"max",n)}var f1={kernelName:Ds,backendName:"webgpu",kernelFunc:p1},m1=CQ({opSnippet:15,cpuKernelImpl:jQ}),g1={kernelName:Ls,backendName:"webgpu",kernelFunc:m1};var v1={kernelName:zs,backendName:"webgpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.filterSize,s=a.strides,u=a.pad,l=a.dimRoundingMode,c=$b.computePool2DInfo(i.shape,o,s,1,u,l),d=[];if(1===c.filterHeight&&1===c.filterWidth){if(Cl.arraysEqual(c.inShape,c.outShape))return bQ({inputs:{x:i},backend:r});t=new y$(c),d.push({type:"int32",data:[c.strideHeight,c.strideWidth]})}else t=new v$(c,"max"),d.push({type:"int32",data:[c.strideHeight,c.strideWidth]},{type:"int32",data:[c.padInfo.top,c.padInfo.left]},{type:"int32",data:[c.dilationHeight,c.dilationWidth]},{type:"int32",data:[c.inHeight,c.inWidth]},{type:"int32",data:[c.effectiveFilterHeight,c.effectiveFilterWidth]});return r.runWebGPUProgram(t,[i],i.dtype,d)}};var y1={kernelName:Hs,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.keepDims;return g0(a,r.axis,i,"mean",n)}};var b1={kernelName:Us,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return g0(t.x,r.axis,r.keepDims,"min",n)}},x1=CQ({opSnippet:16,cpuKernelImpl:VQ}),A1={kernelName:Gs,backendName:"webgpu",kernelFunc:x1},w1=function(){function e(t,n,r){var a=this;Jr(this,e),this.uniforms="",this.variableNames=["x"],this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]})),this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.xShape=t,n.map((function(e,t){a.uniforms+=" pad".concat(t," : vec2<i32>,")})),this.offset="reflect"===r?0:1,this.shaderKey="mirrorPad_".concat(r)}return $r(e,[{key:"getUserCode",value:function(){var e=this.xShape.length,t=this.xShape.map((function(e,t){return"uniforms.pad".concat(t,"[0]")})).join(","),n=this.xShape.map((function(t,n){return"uniforms.pad".concat(n,"[0] + uniforms.xShape").concat(e>1?"[".concat(n,"]"):"")})).join(","),r=1===e?"start":"start[i]",a=1===e?"end":"end[i]",i=1===e?"outC":"outC[i]",o=HJ(e),s=e>1?["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,e):"coords";return"\n      ".concat(GJ(),"\n        if (index < uniforms.size) {\n          let start = ").concat(o,"(").concat(t,");\n          let end = ").concat(o,"(").concat(n,");\n          var outC = getCoordsFromIndex(index);\n          for (var i = 0; i < ").concat(e,"; i = i + 1) {\n            if (").concat(i," < ").concat(r,") {\n              ").concat(i," = ").concat(r," * 2 - ").concat(i," - ").concat(this.offset,";\n            } else if(").concat(i," >= ").concat(a,") {\n              ").concat(i," = (").concat(a," - 1) * 2 - ").concat(i," + ").concat(this.offset,";\n            }\n          }\n          let coords = outC - start;\n          setOutputAtIndex(index, getX(").concat(s,"));\n        }\n      }\n    ")}}]),e}(),k1={kernelName:Xs,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.paddings,o=n.mode,s=r,u=i.map((function(e){return{type:"int32",data:[e[0],e[1]]}})),l=new w1(a.shape,i,o);return s.runWebGPUProgram(l,[a],a.dtype,u)}};var S1={kernelName:Zs,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;if(n.shouldExecuteOnCPU([r])){var a=n.tensorMap.get(r.dataId),i=u(UQ(a.values,r.shape,r.dtype),2),o=i[0],s=i[1];return n.makeTensorInfo(s,r.dtype,o)}var l=new kQ(r.shape,11);return n.runWebGPUProgram(l,[r],r.dtype)}};var C1={kernelName:Qs,backendName:"webgpu",kernelFunc:function(e){console.warn("tf.nonMaxSuppression() in webgpu locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=n.readSync(a.dataId),c=n.readSync(i.dataId),d=$x.nonMaxSuppressionV3Impl(l,c,o,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}};var I1={kernelName:eu,backendName:"webgpu",kernelFunc:function(e){console.warn("tf.nonMaxSuppression() in webgpu locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.softNmsSigma,c=n.readSync(a.dataId),d=n.readSync(i.dataId),h=o,p=s,f=u,m=l,g=$x.nonMaxSuppressionV5Impl(c,d,h,p,f,m),v=g.selectedIndices,y=g.selectedScores;return[n.makeTensorInfo([v.length],"int32",new Int32Array(v)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};function E1(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=T$({inputs:{input:r},backend:n}),i=E1({inputs:{x:a},backend:n}),o=L$({inputs:{input:r},backend:n}),s=E1({inputs:{x:o},backend:n}),u=AQ({inputs:{real:i,imag:s},backend:n});return n.disposeData(a.dataId),n.disposeData(i.dataId),n.disposeData(o.dataId),n.disposeData(s.dataId),u}return M0({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var T1={kernelName:il,backendName:"webgpu",kernelFunc:E1};var N1={kernelName:tu,backendName:"webgpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=T$({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=L$({inputs:{input:a},backend:r}),u=E1({inputs:{x:s},backend:r}),l=AQ({inputs:{real:o,imag:u},backend:r});return r.disposeData(i.dataId),r.disposeData(o.dataId),r.disposeData(s.dataId),r.disposeData(u.dataId),l}return M0({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var _1={kernelName:ru,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return I0({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){Cl.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),Cl.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=I0({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=W$({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeData(e.dataId)})),u}},M1=function(){function e(t,n){var r=this;Jr(this,e),this.variableNames=["x"],this.uniforms="constantValue : f32,",this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]})),this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),n.map((function(e,t){r.uniforms+=" pad".concat(t," : vec2<i32>,")})),this.xShape=t,this.shaderKey="pad"}return $r(e,[{key:"getUserCode",value:function(){var e=this.xShape.length,t=HJ(e),n=this.xShape.map((function(e,t){return"uniforms.pad".concat(t,"[0]")})).join(","),r=this.xShape.map((function(t,n){return"uniforms.pad".concat(n,"[0] + uniforms.xShape").concat(e>1?"[".concat(n,"]"):"")})).join(","),a=e>1?"".concat(t,"(").concat(n,")"):"".concat(n),i=e>1?"".concat(t,"(").concat(r,")"):"".concat(r),o=e>1?"any(outC < start)":"outC < start",s=e>1?"any(outC >= end)":"outC >= end",u=e>1?["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,e):"coords";return"\n      ".concat(GJ(),"\n        if (index < uniforms.size) {\n          let start = ").concat(a,";\n          let end = ").concat(i,";\n          let outC = getCoordsFromIndex(index);\n\n          if (").concat(o," || ").concat(s,") {\n            setOutputAtIndex(index, uniforms.constantValue);\n          } else {\n            let coords = outC - start;\n            setOutputAtIndex(index, getX(").concat(u,"));\n          }\n        }\n      }\n    ")}}]),e}(),R1=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(i.every((function(e){return Cl.arraysEqual(e,[0,0])})))return bQ({inputs:{x:a},backend:n});if(0===Cl.sizeFromShape(a.shape)){var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return M0({backend:n,attrs:{shape:s,value:o,dtype:a.dtype}})}var u=[{type:"float32",data:[o]}];i.map((function(e){return u.push({type:"int32",data:[e[0],e[1]]})}));var l=new M1(a.shape,i);return n.runWebGPUProgram(l,[a],a.dtype,u)},O1={kernelName:au,backendName:"webgpu",kernelFunc:R1},P1=CQ({opSnippet:13}),F1={kernelName:ou,backendName:"webgpu",kernelFunc:P1};var D1={kernelName:su,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=new vQ(14,r.shape,a.shape);return n.runWebGPUProgram(i,[r,a],"float32")}};var L1={kernelName:uu,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return g0(t.x,r.axis,r.keepDims,"prod",n)}},z1={kernelName:lu,backendName:"webgpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=qQ(r,a,i,o);return t.makeTensorInfo([s.length],o,s)}},B1=CQ({opSnippet:3}),W1={kernelName:Jo,backendName:"webgpu",kernelFunc:B1},j1=SQ({opType:12}),V1={kernelName:hu,backendName:"webgpu",kernelFunc:j1},H1=SQ({opType:13}),U1={kernelName:yu,backendName:"webgpu",kernelFunc:H1},G1=function(){function e(t,n,r){Jr(this,e),this.variableNames=["x"],this.uniforms="adjustHeightWidth : vec2<f32>, halfPixelCenters : f32,",this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=[t[0],n,r,t[3]],this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="resizeBilinear"}return $r(e,[{key:"getUserCode",value:function(){return"\n      ".concat(GJ(),"\n        if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n          let b = coords[0];\n          let d = coords[3];\n          let rc = coords.yz;\n\n          let effectiveInSize = vec2<f32>(\n            f32(uniforms.xShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.xShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveOutSize = vec2<f32>(\n            f32(uniforms.outShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.outShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveInputOverOutputRatioRC =\n              effectiveInSize / effectiveOutSize;\n\n          // Fractional source index\n          let sourceFracIndexRC =\n            (vec2<f32>(rc) + vec2<f32>(uniforms.halfPixelCenters)) *\n            effectiveInputOverOutputRatioRC - vec2<f32>(uniforms.halfPixelCenters);\n\n          // Compute the four integer indices.\n          let sourceFloorRC = vec2<i32>(sourceFracIndexRC);\n          let sourceCeilRC = vec2<i32>(\n            min(vec2<f32>(uniforms.xShape.yz) - vec2<f32>(1.0), ceil(sourceFracIndexRC)));\n\n          let topLeft = getX(b, sourceFloorRC.x, sourceFloorRC.y, d);\n          let bottomLeft = getX(b, sourceCeilRC.x, sourceFloorRC.y, d);\n          let topRight = getX(b, sourceFloorRC.x, sourceCeilRC.y, d);\n          let bottomRight = getX(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n          let fracRC = sourceFracIndexRC - vec2<f32>(sourceFloorRC);\n\n          let top = topLeft + (topRight - topLeft) * fracRC.y;\n          let bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n          let newValue = top + (bottom - top) * fracRC.x;\n\n          setOutputAtIndex(index, newValue);\n        }\n      }\n    ")}}]),e}();var X1={kernelName:gu,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.size,s=r.halfPixelCenters,l=u(o,2),c=l[0],d=l[1],h=[{type:"float32",data:[i&&c>1?1:0,i&&d>1?1:0]},{type:"float32",data:[s?.5:0]}],p=new G1(a.shape,c,d);return n.runWebGPUProgram(p,[a],"float32",h)}},q1=function(){function e(t,n,r,a){Jr(this,e),this.variableNames=["x"],this.uniforms="adjustHeightWidth : vec2<f32>, roundBase : f32,",this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=[t[0],n,r,t[3]],this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.halfPixelCenters=a,this.shaderKey="resizeNearest_".concat(a)}return $r(e,[{key:"getUserCode",value:function(){var e;return e=this.halfPixelCenters?"max((vec2<f32>(rc) + vec2<f32>(0.5)) * effectiveInputOverOutputRatioRC, vec2<f32>(0.0))":"vec2<f32>(rc) * effectiveInputOverOutputRatioRC","\n      ".concat(GJ(),"\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let b = coords[0];\n          let d = coords[3];\n          let rc = coords.yz;\n\n          let effectiveInSize = vec2<f32>(\n            f32(uniforms.xShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.xShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveOutSize = vec2<f32>(\n            f32(uniforms.outShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.outShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveInputOverOutputRatioRC =\n              effectiveInSize / effectiveOutSize;\n\n          // Fractional source index\n          let sourceFracIndexRC = ").concat(e,";\n\n          // Compute the coordinators of nearest neighbor point.\n          let inputShapeRC = vec2<f32>(f32(uniforms.xShape.y), f32(uniforms.xShape.z));\n          let sourceNearestRC = vec2<i32>(\n            min(inputShapeRC - 1.0, floor(sourceFracIndexRC + uniforms.roundBase)));\n          let newValue = getX(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n          setOutputAtIndex(index, newValue);\n        }\n      }\n    ")}}]),e}();var Y1={kernelName:fu,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=u(r.size,2),l=s[0],c=s[1],d=[{type:"float32",data:[i&&l>1?1:0,i&&c>1?1:0]},{type:"float32",data:[i?.5:0]}],h=new q1(a.shape,l,c,o);return n.runWebGPUProgram(h,[a],a.dtype,d)}},K1=function(){function e(t,n){Jr(this,e),this.outputShape=[],this.variableNames=["x"],this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.uniforms="centerX : f32, centerY : f32, sinRadians : f32,\n          cosRadians : f32,",this.shaderKey="rotate",this.outputShape=t,"number"==typeof n?(this.uniforms+=" fillValue : f32,",this.fillSnippet="var outputValue = uniforms.fillValue;",this.shaderKey+="_float"):(this.uniforms+=" fillValue : vec3<f32>,",this.fillSnippet="var outputValue = uniforms.fillValue[coords[3]];",this.shaderKey+="_vec3")}return $r(e,[{key:"getUserCode",value:function(){return"\n        ".concat(GJ(),"\n\n          if (index < uniforms.size) {\n            let coords = getCoordsFromIndex(index);\n            let coordXFloat = (f32(coords[2]) - uniforms.centerX) *\n                uniforms.cosRadians - (f32(coords[1]) - uniforms.centerY) *\n                uniforms.sinRadians;\n            let coordYFloat = (f32(coords[2]) - uniforms.centerX) *\n                uniforms.sinRadians + (f32(coords[1]) - uniforms.centerY) *\n                uniforms.cosRadians;\n            let coordX = i32(round(coordXFloat + uniforms.centerX));\n            let coordY = i32(round(coordYFloat + uniforms.centerY));\n            ").concat(this.fillSnippet,"\n            if(coordX >= 0 && coordX < uniforms.xShape[2] && coordY >= 0 &&\n                coordY < uniforms.xShape[1]) {\n              outputValue = getX(coords[0], coordY, coordX, coords[3]);\n            }\n            setOutputAtIndex(index, outputValue);\n          }\n        }\n      ")}}]),e}(),Z1={kernelName:ul,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,l=r,c=new K1(a.shape,o),d=u($b.getImageCenter(s,a.shape[1],a.shape[2]),2),h=[{type:"float32",data:[d[0]]},{type:"float32",data:[d[1]]},{type:"float32",data:[Math.sin(i)]},{type:"float32",data:[Math.cos(i)]}];return"number"==typeof o?h.push({type:"float32",data:[Number.parseFloat(o.toFixed(2))]}):h.push({type:"float32",data:o}),l.runWebGPUProgram(c,[a],a.dtype,h)}},J1=SQ({opType:15,cpuKernelImpl:YQ}),Q1={kernelName:Au,backendName:"webgpu",kernelFunc:J1},$1=function(){function e(t,n,r,a,i,o,s){Jr(this,e),this.variableNames=["updates","indices"],this.workGroupSize=[64,1,1],this.atomic=!0,this.outputShape=o,this.type=s,this.dispatchLayout=OJ(t),this.dispatch=NJ(this.dispatchLayout,t,this.workGroupSize),this.sliceDimGreaterThanOne=n>1,this.shaderKey="scatter_".concat(r,"_").concat(a,"_").concat(this.sliceDimGreaterThanOne,"_").concat(s);var u=HJ(i.length);this.uniforms="sliceDim : i32, strides: ".concat(u,", size: i32,"),this.updatesRank=a,this.indicesRank=r}return $r(e,[{key:"getUserCode",value:function(){var e="";1===this.indicesRank?e="coords[0]":2===this.indicesRank&&(e="coords[0], j");var t="getIndices(".concat(e,")"),n=this.sliceDimGreaterThanOne?"uniforms.strides[j]":"uniforms.strides",r="",a="",i="";1===this.updatesRank?(r="coords[0]",a="flattenedIndex",i="\n      fn getUpdatesCoordsFromFlatIndex(index : i32) -> i32 {\n        return index;\n      }\n      "):2===this.updatesRank&&(r="coords[0], coords[1]",a="vec2<i32>(flattenedIndex, coords[1])",i="\n      fn getUpdatesCoordsFromFlatIndex(index : i32) -> vec2<i32> {\n        let d0 = index / uniforms.updatesShape[1];\n        let d1 = index - d0 * uniforms.updatesShape[1];\n        return vec2<i32>(d0, d1);\n      }\n      ");var o="getUpdates(".concat(r,")"),s="int32"===this.type?"atomicAdd(&(result[flatIndex]), i32(updateValue));":"\n     var oldValue = atomicLoad(&(result[flatIndex]));\n     var exchanged = false;\n     for (; !exchanged;) {\n       let newValueF32 = bitcast<f32>(oldValue) + updateValue;\n       let newValue = bitcast<i32>(newValueF32);\n       let res = atomicCompareExchangeWeak(&(result[flatIndex]), oldValue, newValue);\n       oldValue = res.old_value;\n       exchanged = res.exchanged;\n     }\n     ";return"\n    ".concat(i,"\n\n      ").concat(GJ(),"\n\n        if (index < uniforms.size) {\n          let coords = getUpdatesCoordsFromFlatIndex(index);\n          var flattenedIndex = 0;\n          for (var j = 0; j < uniforms.sliceDim; j = j + 1) {\n            let indexInside = i32(round(").concat(t,"));\n            flattenedIndex = flattenedIndex + indexInside * ").concat(n,";\n          }\n          let updateValue = ").concat(o,";\n          let flatIndex = getOutputIndexFromCoords(").concat(a,");\n\n         ").concat(s,"\n        }\n      }")}}]),e}();var e2={kernelName:wu,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=$b.calculateShapes(i,a,o),u=s.sliceRank,l=s.numUpdates,c=s.sliceSize,d=s.strides,h=s.outputSize,p=[h/c,c];if(0===h)return n.makeTensorInfo(o,a.dtype);var f=cQ({inputs:{x:a},backend:n,attrs:{shape:[l,u]}}),m=cQ({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),g=m.dtype,v=M0({backend:n,attrs:{shape:p,value:0,dtype:g}}),y=[{type:"int32",data:[u]},{type:"int32",data:d},{type:"int32",data:[Cl.sizeFromShape(m.shape)]}],b=new $1(m.shape,u,f.shape.length,m.shape.length,d,p,g),x=n.runWebGPUProgram(b,[m,f],g,y,v),A=cQ({inputs:{x:x},backend:n,attrs:{shape:o}});return n.disposeData(f.dataId),n.disposeData(m.dataId),n.disposeData(x.dataId),A}},t2=function(){function e(t,n,r){Jr(this,e),this.variableNames=["c","a","b"],this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=n,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.cRank=t,this.rank=r,this.shaderKey="select"}return $r(e,[{key:"getUserCode",value:function(){var e,t;if(this.rank>4)throw Error("Where for rank ".concat(this.rank," is not yet supported"));if(1===this.rank)t="resRC",e="resRC";else{for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=[],i=0;i<this.outputShape.length;i++)a.push("".concat(n[i])),i<this.cRank&&r.push("".concat(n[i]));e=r.join(),t=a.join()}return"\n      ".concat(GJ(),"\n        if (index < uniforms.size) {\n          let resRC = getCoordsFromIndex(index);\n          let cVal = getC(").concat(e,");\n          if (cVal >= 1.0) {\n            setOutputAtIndex(index, getA(").concat(t,"));\n          } else {\n            setOutputAtIndex(index, getB(").concat(t,"));\n          }\n        }\n      }\n    ")}}]),e}();var n2={kernelName:Su,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new t2(r.shape.length,a.shape,a.shape.length);return n.runWebGPUProgram(o,[r,a,i],gc(a.dtype,i.dtype))}},r2=SQ({opType:18}),a2={kernelName:_u,backendName:"webgpu",kernelFunc:r2},i2=SQ({opType:16}),o2={kernelName:Eu,backendName:"webgpu",kernelFunc:i2},s2=SQ({opType:17}),u2={kernelName:Tu,backendName:"webgpu",kernelFunc:s2},l2=CQ({opSnippet:2,cpuKernelImpl:e$,supportsComplex:!0}),c2={kernelName:Yu,backendName:"webgpu",kernelFunc:l2};var d2={kernelName:Du,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=Cl.parseAxisParam([i],a.shape),s=p1({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),u=$b.expandShapeToKeepDim(s.shape,o),l=cQ({inputs:{x:s},backend:n,attrs:{shape:u}}),c=l2({inputs:{a:a,b:l},backend:n}),d=S0({inputs:{x:c},backend:n}),h=v0({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),p=cQ({inputs:{x:h},backend:n,attrs:{shape:u}}),f=B1({inputs:{a:d,b:p},backend:n});return n.disposeData(s.dataId),n.disposeData(l.dataId),n.disposeData(c.dataId),n.disposeData(d.dataId),n.disposeData(h.dataId),n.disposeData(p.dataId),f}},h2={kernelName:Pu,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;Cl.assert(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGPU backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,ta(o));for(var l=1+i.length;l<a.shape.length;++l)u.push([0,0]);var c=[],d=R1({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),h=$b.getReshaped(d.shape,i,s,!1),p=$b.getPermuted(h.length,i.length,!1),f=$b.getReshapedPermuted(d.shape,i,s,!1),m=cQ({inputs:{x:d},backend:n,attrs:{shape:h}}),g=p$({inputs:{x:m},backend:n,attrs:{perm:p}}),v=cQ({inputs:{x:g},backend:n,attrs:{shape:f}});return c.push(d),c.push(m),c.push(g),c.forEach((function(e){return n.disposeData(e.dataId)})),v}},p2=function(){function e(t,n,r,a,i,o){Jr(this,e),this.variableNames=["updates","indices","defaultValue"],this.workGroupSize=[64,1,1],this.workPerThread=4,this.size=!0,this.outputShape=o,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize,[this.workPerThread,1,1]);var s=n>1;this.shaderKey="scatter_".concat(r,"_").concat(a,"_").concat(s);var u=HJ(i.length);this.uniforms="updateSize : i32, sliceDim : i32, strides: ".concat(u,",");var l="";1===r?l="i":2===r&&(l="i, j"),this.indicesSnippet="getIndices(".concat(l,")");var c="";1===a?c="i":2===a&&(c="i, coords[1]"),this.updatesSnippet="getUpdates(".concat(c,")"),this.strideString=s?"uniforms.strides[j]":"uniforms.strides"}return $r(e,[{key:"getUserCode",value:function(){return"\n      ".concat(GJ(),"\n\n        let globalIndex = index * ").concat(this.workPerThread,";\n        if (globalIndex < uniforms.size) {\n          var sum = vec4<f32>(0.0);\n          var found = vec4<bool>(false);\n          for (var i = 0; i < uniforms.updateSize; i = i + 1) {\n            var flattenedIndex = 0;\n            for (var j = 0; j < uniforms.sliceDim; j = j + 1) {\n              let indexInside = i32(round(").concat(this.indicesSnippet,"));\n              flattenedIndex = flattenedIndex + indexInside * ").concat(this.strideString,";\n            }\n            for (var innerIndex = 0; innerIndex < ").concat(this.workPerThread,"; innerIndex = innerIndex + 1) {\n              let curIndex = globalIndex + innerIndex;\n              let coords = getCoordsFromIndex(curIndex);\n              if (flattenedIndex == coords[0]) {\n                sum[innerIndex] = sum[innerIndex] + ").concat(this.updatesSnippet,";\n                found[innerIndex] = true;\n              }\n            }\n          }\n          for (var innerIndex = 0; innerIndex < ").concat(this.workPerThread,"; innerIndex = innerIndex + 1) {\n            let curIndex = globalIndex + innerIndex;\n            if (curIndex < uniforms.size)\n            {\n              setOutputAtIndex(curIndex, mix(getDefaultValue(), sum[innerIndex], f32(found[innerIndex])));\n            }\n          }\n        }\n      }")}}]),e}();var f2={kernelName:ju,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=$b.calculateShapes(i,a,s),l=u.sliceRank,c=u.numUpdates,d=u.sliceSize,h=u.strides,p=u.outputSize;if("string"===i.dtype){var f=n.bufferSync(a),m=n.bufferSync(i),g=Cl.decodeString(n.readSync(o.dataId)[0]),v=KQ(f,m,s,p,d,c,l,h,g,false);return n.makeTensorInfo(s,v.dtype,v.values)}var y=[{type:"int32",data:[c]},{type:"int32",data:[l]},{type:"int32",data:h}],b=new p2(c,l,a.shape.length,i.shape.length,h,[p,1],false),x=n.runWebGPUProgram(b,[i,a,o],i.dtype,y),A=cQ({inputs:{x:x},backend:n,attrs:{shape:s}});return n.disposeData(x.dataId),A}};var m2={kernelName:Fu,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=r.axis,s=Cl.parseAxisParam(o,a.shape)[0],u=$b.prepareSplitSize(a,i,s),l=a.shape.length,c=new Array(l).fill(0),d=a.shape.slice();return u.map((function(e){var t=ta(d);t[s]=e;var r=k$({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[s]+=e,r}))}},g2=SQ({opType:19}),v2={kernelName:Ru,backendName:"webgpu",kernelFunc:g2},y2={kernelName:Hu,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n,i=new kQ(r.shape,20);return a.runWebGPUProgram(i,[r],r.dtype)}},b2=CQ({opSnippet:11}),x2={kernelName:Vu,backendName:"webgpu",kernelFunc:b2},A2=function(){function e(t){Jr(this,e),this.variableNames=["x"],this.workPerThread=1,this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize,[this.workPerThread,1,1]);var n=HJ(this.outputShape.length);this.uniforms="begin : ".concat(n,",  strides : ").concat(n,", "),this.shaderKey="stridedSlice"}return $r(e,[{key:"getUserCode",value:function(){var e=this,t="";if(1===this.outputShape.length)t="coords * uniforms.strides + uniforms.begin";else{var n=0;t=this.outputShape.map((function(t,r){return n++,1===e.outputShape.length?"coords * uniforms.strides[".concat(r,"] + uniforms.begin[").concat(r,"]"):"coords[".concat(n-1,"] * uniforms.strides[").concat(r,"] + uniforms.begin[").concat(r,"]")})).join(",")}return"\n       ".concat(GJ(),"\n         if (index < uniforms.size) {\n           let coords = getCoordsFromIndex(index);\n           setOutputAtIndex(index, getX(").concat(t,"));\n         }\n       }\n     ")}}]),e}();var w2={kernelName:Uu,backendName:"webgpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,u=a.strides,l=a.beginMask,c=a.endMask,d=a.ellipsisMask,h=a.newAxisMask,p=a.shrinkAxisMask,f=Sp.sliceInfo(i.shape,o,s,u,l,c,d,h,p),m=f.finalShapeSparse,g=f.finalShape,v=f.isIdentity,y=f.sliceDim0,b=f.isSimpleSlice,x=f.begin,A=f.end,w=f.strides;if(v)t=cQ({inputs:{x:i},backend:r,attrs:{shape:g}});else if(y||b){Cl.assert(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var k=Sp.computeOutShape(x,A,w),S=k$({inputs:{x:i},backend:r,attrs:{begin:x,size:k}});t=cQ({inputs:{x:S},backend:r,attrs:{shape:g}}),r.disposeData(S.dataId)}else if(r.shouldExecuteOnCPU([i])){var C=r.readSync(i.dataId),I=eh(i.shape,i.dtype,C),E=QQ(m,I,w,x);t=r.makeTensorInfo(g,i.dtype,E.values)}else{var T=new A2(m),N=[{type:"int32",data:x},{type:"int32",data:w}],_=r.runWebGPUProgram(T,[i],i.dtype,N);t=cQ({inputs:{x:_},backend:r,attrs:{shape:g}}),r.disposeData(_.dataId)}return t}};var k2={kernelName:Gu,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,l=r.padWidth,c=r.preserveShortSequences,d=t.data,h=t.dataSplits,p=n.readSync(d.dataId),f=n.readSync(h.dataId),m=u($Q(p,f,a,i,o,s,l,c),2),g=m[0],v=m[1];return[n.makeTensorInfo([g.length],"string",g),n.makeTensorInfo(h.shape,"int32",v)]}},S2=SQ({opType:21}),C2={kernelName:Zu,backendName:"webgpu",kernelFunc:S2},I2=function(){function e(t,n){Jr(this,e),this.variableNames=["A"],this.workGroupSize=[64,1,1],this.size=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.rank=this.outputShape.length,this.shaderKey="tile"}return $r(e,[{key:"getUserCode",value:function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>=5)throw Error("Tile for rank ".concat(e," is not yet supported"));if(1===e)return"(resRC % ".concat(t,"aShape)");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e;a++)r.push("(".concat(n[a]," % ").concat(t,"aShape[").concat(a,"])"));return r.join()}(this.rank,"uniforms.");return"\n      ".concat(GJ(),"\n        if (index < uniforms.size) {\n          let resRC = getCoordsFromIndex(index);\n          setOutputAtIndex(index, getA(").concat(e,"));\n        }\n      }\n    ")}}]),e}();var E2={kernelName:Ju,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if(n.shouldExecuteOnCPU([a])||"string"===a.dtype||a.shape.length>=5){var o=n.readSync(a.dataId),s="string"===a.dtype?o.map((function(e){return Cl.decodeString(e)})):o,u=eh(a.shape,a.dtype,s),l=t$(u,i);return n.makeTensorInfo(l.shape,l.dtype,l.values)}var c=new I2(a.shape,i);return n.runWebGPUProgram(c,[a],a.dtype)}},T2=function(){function e(t){Jr(this,e),this.variableNames=["x","indices"],this.workGroupSize=[256,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.uniforms="inputSize : i32, firstPass : i32, negativeInf : f32,\n        dir : i32, inc : i32,",this.shaderKey="swap"}return $r(e,[{key:"getUserCode",value:function(){return"\n        ".concat(GJ(),"\n          if (index < uniforms.size) {\n            let outC = getCoordsFromIndex(index);\n            let batch = outC[0];\n            let elemIdx = outC[1];\n            // We compare elements pair-wise within a group of size 2 * inc.\n            // The comparing rule for each group alternates between ascending\n            // and descending. Within each group, we compare each pair at\n            // positions i and i+inc. To decide whether an element at position i\n            // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n            // inc, it is in the first half of the group, we denote it as x0,\n            // otherwise we denote it as x1.\n            // For example, as shown in the Bitonic top K paper referenced\n            // above, Figure5(a) shows that element[1] is in the second half of\n            // the group when group size is 2, but it is in the first half of\n            // the group when group size is 4.\n            let isFirstInPair = elemIdx % (2 * uniforms.inc) < uniforms.inc;\n            var i = 0;\n            if (isFirstInPair) {\n              i = elemIdx;\n            } else {\n              i = elemIdx - uniforms.inc;\n            }\n\n            var i0 = 0;\n            if (uniforms.firstPass == 1) {\n              i0 = i;\n            } else {\n              i0 = i32(getIndices(batch, i));\n            }\n\n            var i1 = 0;\n            if (uniforms.firstPass == 1) {\n              i1 = i + uniforms.inc;\n            } else {\n              i1 = i32(getIndices(batch, i + uniforms.inc));\n            }\n\n            var x0 = f32(0.0);\n            var x1 = f32(0.0);\n            if (i0 < uniforms.inputSize) {\n              x0 = getX(batch, i0);\n            } else {\n              x0 = uniforms.negativeInf;\n            }\n            if (i1 < uniforms.inputSize) {\n              x1 = getX(batch, i1);\n            } else {\n              x1 = uniforms.negativeInf;\n            }\n\n            let reverse = elemIdx % (2 * uniforms.dir) >= uniforms.dir;\n            let isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n            if (reverse == isGreater) {\n              // Elements in opposite order of direction\n              let iTemp = i0;\n              i0 = i1;\n              i1 = iTemp;\n            }\n            if (isFirstInPair) {\n              setOutputAtIndex(index, f32(i0));\n            } else {\n              setOutputAtIndex(index, f32(i1));\n            }\n          }\n        }\n      ")}}]),e}(),N2=function(){function e(t){Jr(this,e),this.variableNames=["x","indices"],this.workGroupSize=[256,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.uniforms="inputSize : i32, firstPass : i32, k : i32,",this.shaderKey="merge"}return $r(e,[{key:"getUserCode",value:function(){return"\n        ".concat(GJ(),"\n          if (index < uniforms.size) {\n            let outC = getCoordsFromIndex(index);\n            let batch = outC[0];\n            let elemIdx = outC[1];\n            // The output size is half of the previous size.\n            // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _\n            // (k=4), we only need to output the indices at positions |, the\n            // indices at positions _ can be thrown away, see Figure5(b) After\n            // Phase 2 (Merge phase) in the Bitonic Top K paper referenced\n            // above.\n            // For example, the paper shows we only need to output the orange\n            // bars. The output sequence should look like this | | | | | | | |.\n            // Because the sequence is halved, to map the output index back to\n            // the previous sequence to find the corresponding value, we need\n            // to double the index. When we double the index, we basically\n            // interpolate a position, so 2i looks like\n            // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k\n            // position of each 2k positions by - elemIdx % k. E.g. for output\n            // at index 4,5,6,7, we want to get the corresponding element at\n            // original index 8,9,10,11, for output at index 8,9,10,11,\n            // we want to get the corresponding element at original index\n            // 16,17,18,19, so on and so forth.\n\n            var i = 0;\n            if (elemIdx < uniforms.k) {\n              i = elemIdx;\n            } else {\n              i = elemIdx * 2 - elemIdx % uniforms.k;\n            }\n            var i0 = 0;\n            if (uniforms.firstPass == 1) {\n              i0 = i;\n            } else {\n              i0 = i32(getIndices(batch, i));\n            }\n            var i1 = 0;\n            if (uniforms.firstPass == 1) {\n              i1 = i + uniforms.k;\n            } else {\n              i1 = i32(getIndices(batch, i + uniforms.k));\n            }\n\n            let x0 = getX(batch, i0);\n            var x1 = f32(0.0);\n            if (i1 < uniforms.inputSize) {\n              x1 = getX(batch, i1);\n            } else {\n              x1 = x0;\n            }\n\n            if (x0 >= x1) {\n              setOutputAtIndex(index, f32(i0));\n            } else {\n              setOutputAtIndex(index, f32(i1));\n            }\n          }\n        }\n      ")}}]),e}();function _2(e,t){null!==t&&e.disposeData(t.dataId)}function M2(e){for(var t=1;t<e;)t*=2;return t}var R2={kernelName:Qu,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=a.shape,l=s[s.length-1];if(n.shouldExecuteOnCPU([a])){var c=n.readSync(a.dataId),d=u(n$(c,s,a.dtype,i,o),2),h=d[0],p=d[1];return[n.makeTensorInfo(h.shape,h.dtype,h.values),n.makeTensorInfo(p.shape,p.dtype,p.values)]}if(0===i)return s[s.length-1]=0,[n.makeTensorInfo(s,a.dtype,[]),n.makeTensorInfo(s,"int32",[])];if(1===l)return[a,M0({attrs:{shape:s,dtype:"int32",value:0},backend:n})];for(var f=Cl.sizeFromShape(s)/l,m=cQ({inputs:{x:a},attrs:{shape:[f,l]},backend:n}),g=M2(i),v=M2(l),y=null,b=function(){return null===y?[m,m]:[m,y]},x=function(e,t,r){var a=b(),i=new T2(r),o=[{type:"int32",data:[l]},{type:"int32",data:[null===y?1:0]},{type:"float32",data:[Number.NEGATIVE_INFINITY]},{type:"int32",data:[e]},{type:"int32",data:[t]}],s=y;y=n.runWebGPUProgram(i,a,"int32",o),_2(n,s)},A=1;A<g;A*=2)for(var w=2*A,k=A;k>=1;k/=2)x(w,k,[f,v]);for(var S=v;S>g;S/=2){var C=b(),I=new N2([f,S/2]),E=[{type:"int32",data:[l]},{type:"int32",data:[null===y?1:0]},{type:"int32",data:[g]}],T=y;y=n.runWebGPUProgram(I,C,"int32",E),_2(n,T);for(var N=g/2,_=2*N,M=N;M>=1;M/=2)x(_,M,y.shape)}var R=y;y=k$({inputs:{x:y},backend:n,attrs:{begin:0,size:[f,i]}}),_2(n,R);var O=Z0({inputs:{x:m,indices:y},backend:n,attrs:{axis:1,batchDims:1}});_2(n,m);var P=s.slice(0,-1);P.push(i),R=y,y=cQ({inputs:{x:y},attrs:{shape:P},backend:n}),_2(n,R);var F=O;return O=cQ({inputs:{x:O},attrs:{shape:P},backend:n}),_2(n,F),[O,y]}},O2=function(){function e(t){Jr(this,e),this.variableNames=["Image","Transforms"],this.uniforms="interpolationModeId : i32, fillModeId : i32, fillValue : f32,",this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=OJ(this.outputShape),this.dispatch=NJ(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="transform"}return $r(e,[{key:"getUserCode",value:function(){return"\n          fn mapCoord(outCoord : f32, len : f32) -> f32{\n            var inCoord = outCoord;\n            if(uniforms.fillModeId == 2) {\n              if (inCoord < 0.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz2 = 2.0 * len;\n                  if (inCoord < sz2) {\n                    inCoord = sz2 * f32(i32(f32(-inCoord / sz2))) +\n                    inCoord;\n                  }\n                  if (inCoord < -len) {\n                    inCoord = inCoord + sz2;\n                  } else {\n                    inCoord = -inCoord - 1.0;\n                  }\n                }\n              } else if (inCoord > len - 1.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz2 = 2.0 * len;\n                  inCoord = inCoord - sz2 * f32(i32(f32(inCoord / sz2)));\n                  if (inCoord >= len) {\n                    inCoord = sz2 - inCoord - 1.0;\n                  }\n                }\n              }\n              return clamp(inCoord, 0.0, len - 1.0);\n            } else if (uniforms.fillModeId == 3) {\n              if (inCoord < 0.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz = len - 1.0;\n                  inCoord = inCoord + len * (f32(i32(f32(-inCoord / sz))) + 1.0);\n                }\n              } else if (inCoord > len - 1.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz = len - 1.0;\n                  inCoord = inCoord - len * f32(i32(f32(inCoord / sz)));\n                }\n              }\n              return clamp(inCoord, 0.0, len - 1.0);\n            } else if (uniforms.fillModeId == 4) {\n              return clamp(outCoord, 0.0, len - 1.0);\n            }\n            return outCoord;\n          }\n          fn readWithFillValue(batch : i32, coordY : i32, coordX : i32,\n            channel : i32) -> f32 {\n            var outputValue : f32;\n            if (0 <= coordY && coordY < uniforms.imageShape[1] && 0 <= coordX && coordX < uniforms.imageShape[2]) {\n                outputValue = getImage(batch, coordY, coordX, channel);\n            } else {\n              outputValue = uniforms.fillValue;\n            }\n            return outputValue;\n          }\n\n          ".concat(GJ(),"\n            if (index < uniforms.size) {\n              let coords = getCoordsFromIndex(index);\n              var outputValue : f32;\n              let batch = coords[0];\n              let x = coords[2];\n              let y = coords[1];\n              let channel = coords[3];\n              let xf = f32(x);\n              let yf = f32(y);\n              let a1 = getTransforms(batch, 0);\n              let a2 = getTransforms(batch, 1);\n              let a3 = getTransforms(batch, 2);\n              let b1 = getTransforms(batch, 3);\n              let b2 = getTransforms(batch, 4);\n              let b3 = getTransforms(batch, 5);\n              let c1 = getTransforms(batch, 6);\n              let c2 = getTransforms(batch, 7);\n              let projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = uniforms.fillValue;\n              } else {\n                let inX = (a1 * xf + a2 * yf + a3) / projection;\n                let inY = (b1 * xf + b2 * yf + b3) / projection;\n                let mapX = mapCoord(inX, f32(uniforms.imageShape[2]));\n                let mapY = mapCoord(inY, f32(uniforms.imageShape[1]));\n\n                if (uniforms.interpolationModeId == 1) {\n                  let coordY = i32(round(mapY));\n                  let coordX = i32(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  let yFloor = floor(mapY);\n                  let xFloor = floor(mapX);\n                  let yCeil = yFloor + 1.0;\n                  let xCeil = xFloor + 1.0;\n                  let valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, i32(yFloor), i32(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, i32(yFloor), i32(xCeil), channel);\n                  let valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, i32(yCeil), i32(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, i32(yCeil), i32(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutputAtIndex(index, outputValue);\n            }\n          }\n        ")}}]),e}();var P2={kernelName:$u,backendName:"webgpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.image,o=n.transforms,s=a.interpolation,l=a.fillMode,c=a.fillValue,d=a.outputShape,h=u(i.shape,4),p=h[0],f=h[1],m=h[2],g=h[3],v=u(null!=d?d:[f,m],2),y=v[0],b=v[1],x=new O2([p,y,b,g]),A="nearest"===s?1:2;switch(l){case"constant":default:t=1;break;case"reflect":t=2;break;case"wrap":t=3;break;case"nearest":t=4}var w=[{type:"int32",data:[A]},{type:"int32",data:[t]},{type:"float32",data:[c]}];return r.runWebGPUProgram(x,[i,o],"float32",w)}};for(var F2={kernelName:nl,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],l=new Array(s-1),c=0,d=0;d<s;d++)d!==i&&(l[c++]=o.shape[d]);var h=[],p=new Array(s).fill(0),f=o.shape.slice();f[i]=1;for(var m=new Array(u),g=0;g<m.length;g++){p[i]=g;var v=k$({inputs:{x:o},backend:n,attrs:{begin:p,size:f}}),y=cQ({inputs:{x:v},backend:n,attrs:{shape:l}});m[g]=y,h.push(v)}return h.forEach((function(e){return n.disposeData(e.dataId)})),m}},D2=0,L2=[pQ,i$,s$,l$,m$,g$,b$,x$,C$,_$,R$,F$,wQ,j$,X$,K$,J$,$$,t0,o0,s0,l0,h0,b0,A0,k0,C0,E0,N0,O0,F0,j0,L0,B0,U0,G0,X0,Y0,J0,$0,t1,xQ,z$,n1,a1,o1,u1,c1,h1,f1,g1,v1,y1,b1,A1,k1,f0,S1,C1,I1,E$,N1,_1,O1,F1,D1,L1,z1,N$,W1,V1,U1,dQ,X1,Y1,Z1,Q1,e2,n2,a2,o2,u2,S$,w2,k2,d2,h2,f2,m2,v2,y2,x2,c2,y0,C2,E2,R2,P2,f$,F2,T1];D2<L2.length;D2++){bl(L2[D2])}var z2=function(){function e(t){Jr(this,e),this.device=t,this.numUsedBuffers=0,this.numFreeBuffers=0,this.freeBuffers=new Map,this.usedBuffers=new Map,this.numBytesUsed=0,this.numBytesAllocated=0}return $r(e,[{key:"acquireUploadBuffer",value:function(e,t){return this.acquireBuffer(e,t,!0)}},{key:"acquireBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=B2(e,t);if(this.freeBuffers.has(r)||this.freeBuffers.set(r,[]),this.usedBuffers.has(r)||this.usedBuffers.set(r,[]),this.numBytesUsed+=e,this.numUsedBuffers++,this.freeBuffers.get(r).length>0){this.numFreeBuffers--;var a=this.freeBuffers.get(r).shift();return this.usedBuffers.get(r).push(a),a}this.numBytesAllocated+=e;var i=this.device.createBuffer({mappedAtCreation:n,size:e,usage:t});return this.usedBuffers.get(r).push(i),i}},{key:"releaseBuffer",value:function(e,t,n){if(0!==this.freeBuffers.size){var r=B2(t,n);this.freeBuffers.has(r)||this.freeBuffers.set(r,[]),this.freeBuffers.get(r).push(e),this.numFreeBuffers++,this.numUsedBuffers--;var a=this.usedBuffers.get(r),i=a.indexOf(e);if(i<0)throw new Error("Cannot release a buffer that was never provided by this buffer manager");a.splice(i,1),this.numBytesUsed-=t}}},{key:"releaseUploadBuffer",value:function(e,t,n){var r=this;e.mapAsync(GPUMapMode.WRITE).then((function(){r.releaseBuffer(e,t,n)}),(function(e){}))}},{key:"getNumUsedBuffers",value:function(){return this.numUsedBuffers}},{key:"getNumFreeBuffers",value:function(){return this.numFreeBuffers}},{key:"dispose",value:function(){this.freeBuffers.forEach((function(e,t){e.forEach((function(e){e.destroy()}))})),this.usedBuffers.forEach((function(e,t){e.forEach((function(e){e.destroy()}))})),this.freeBuffers=new Map,this.usedBuffers=new Map,this.numUsedBuffers=0,this.numFreeBuffers=0,this.numBytesUsed=0,this.numBytesAllocated=0}}]),e}();function B2(e,t){return"".concat(e,"_").concat(t)}var W2=function(){function e(t){Jr(this,e),this.device=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures=new Map,this.usedTextures=new Map,this.numBytesUsed=0,this.numBytesAllocated=0}return $r(e,[{key:"acquireTexture",value:function(e,t,n,r){var a=e*t*V2(n),i=j2(e,t,n,r);if(this.freeTextures.has(i)||this.freeTextures.set(i,[]),this.usedTextures.has(i)||this.usedTextures.set(i,[]),this.numBytesUsed+=a,this.numUsedTextures++,this.freeTextures.get(i).length>0){this.numFreeTextures--;var o=this.freeTextures.get(i).shift();return this.usedTextures.get(i).push(o),o}this.numBytesAllocated+=a;var s=this.device.createTexture({size:[e,t],format:n,usage:r});return this.usedTextures.get(i).push(s),s}},{key:"releaseTexture",value:function(e,t,n,r,a){if(0!==this.freeTextures.size){var i=j2(t,n,r,a);this.freeTextures.has(i)||this.freeTextures.set(i,[]),this.freeTextures.get(i).push(e),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures.get(i),s=o.indexOf(e);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(s,1);var u=t*n*V2(r);this.numBytesUsed-=u}}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){this.freeTextures.forEach((function(e,t){e.forEach((function(e){e.destroy()}))})),this.usedTextures.forEach((function(e,t){e.forEach((function(e){e.destroy()}))})),this.freeTextures=new Map,this.usedTextures=new Map,this.numUsedTextures=0,this.numFreeTextures=0,this.numBytesUsed=0,this.numBytesAllocated=0}}]),e}();function j2(e,t,n,r){return"".concat(e,"_").concat(t,"_").concat(n,"_").concat(r)}function V2(e){if("rgba8unorm"===e)return 16;throw new Error("".concat(e," is not supported!"))}var H2=Zi().getNumber("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD"),U2=function(e,t){var n=e.limits.maxComputeWorkgroupsPerDimension,r=t.dispatchLayout,a=t.dispatch;if(a.every((function(e){return e<=n})))return a;Cl.assert(a[0]>n&&void 0===r.y&&void 0===r.z,(function(){return"Dispatch size exceeds WebGPU limits in Y or Z dimension."}));var i=Math.ceil(Math.sqrt(a[0]));return i>n?(i=Math.ceil(Math.cbrt(a[0])),Cl.assert(i<=n,(function(){return"Total dispatch size exceeds WebGPU maximum."})),[i,i,i]):[i,i,1]},G2=function(e){Kr(n,e);var t=Zr(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Jr(this,n),(r=t.call(this)).commandQueueOwnedIds=new WeakSet,r.tensorDisposalQueue=[],r.uniformDisposalQueue=[],r.stagingDisposalQueue=[],r.textureDisposalQueue=[],r.disposed=!1,r.uploadWaitMs=0,r.downloadWaitMs=0,r.dispatchNumberInEncoder=0,r.fromPixelTextureLayout=null,r.fromPixelImportTextureLayout=null,!DJ())throw new Error("WebGPU is not supported on this device");return r.layoutCache={},r.pipelineCache={},r.device=e,r.queue=e.queue,r.currentCommandEncoder=null,r.currentComputePass=null,r.supportTimeQuery=a,r.bufferManager=new z2(r.device),r.textureManager=new W2(r.device),r.tensorMap=new Ka(jr(r),Lh()),r.supportTimeQuery&&(r.querySet=r.device.createQuerySet({type:"timestamp",count:2})),Zi().getBool("WEBGPU_USE_PROFILE_TOOL")&&(r.dummyCanvas=document.createElement("canvas"),r.dummyCanvas.width=1,r.dummyCanvas.height=1,r.dummyContext=r.dummyCanvas.getContext("webgpu"),r.dummyContext.configure({device:e,format:"bgra8unorm"}),document.body.appendChild(r.dummyCanvas)),Xr(r)}return $r(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"floatPrecision",value:function(){return 32}},{key:"defaultGpuBufferUsage",value:function(){return GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST}},{key:"flushDisposalQueue",value:function(){var e=this;this.tensorDisposalQueue.forEach((function(t){e.maybeReleaseBuffer(t),e.tensorMap.delete(t)})),this.uniformDisposalQueue.forEach((function(t){return e.bufferManager.releaseBuffer(t.buffer,t.byteSize,t.usage)})),this.stagingDisposalQueue.forEach((function(t){return e.bufferManager.releaseUploadBuffer(t.buffer,t.byteSize,t.usage)})),this.textureDisposalQueue.forEach((function(t){return e.textureManager.releaseTexture(t.texture,t.width,t.height,t.format,t.usage)})),this.tensorDisposalQueue=[],this.uniformDisposalQueue=[],this.stagingDisposalQueue=[],this.textureDisposalQueue=[]}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.tensorMap.has(e)){var n=this.tensorMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;if(this.commandQueueOwnedIds.has(e))return this.tensorDisposalQueue.push(e),!1;this.maybeReleaseBuffer(e);var r=this.tensorMap.get(e),a=r.complexTensorInfos;null!=a&&(this.disposeData(a.real.dataId,!0),this.disposeData(a.imag.dataId,!0)),this.tensorMap.delete(e)}return!0}},{key:"memory",value:function(){return{numBytesInGPU:this.bufferManager.numBytesUsed,numBytesAllocatedInGPU:this.bufferManager.numBytesAllocated,unreliable:!1}}},{key:"getBufferManager",value:function(){return this.bufferManager}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"acquireBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultGpuBufferUsage();return this.bufferManager.acquireBuffer(e,t)}},{key:"maybeReleaseBuffer",value:function(e){var t=this.tensorMap.get(e);null!=t&&null!=t.bufferInfo.buffer&&(this.bufferManager.releaseBuffer(t.bufferInfo.buffer,t.bufferInfo.byteSize,t.bufferInfo.usage),t.bufferInfo.buffer=null)}},{key:"refCount",value:function(e){return this.tensorMap.has(e)?this.tensorMap.get(e).refCount:0}},{key:"incRef",value:function(e){this.tensorMap.get(e).refCount++}},{key:"decRef",value:function(e){this.tensorMap.has(e)&&this.tensorMap.get(e).refCount--}},{key:"write",value:function(e,t,n){if("complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()},a=Cl.sizeFromShape(t)*PJ(n);return this.tensorMap.set(r,{dtype:n,shape:t,values:e,bufferInfo:{byteSize:a,usage:this.defaultGpuBufferUsage()},refCount:1}),r}},{key:"move",value:function(e,t,n,r,a){if("complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i=Cl.sizeFromShape(n)*PJ(r);this.tensorMap.set(e,{dtype:r,shape:n,values:t,bufferInfo:{byteSize:i,usage:this.defaultGpuBufferUsage()},refCount:a})}},{key:"submitQueue",value:function(){this.ensureComputePassEnded(),this.queue.submit([this.currentCommandEncoder.finish()]),this.currentCommandEncoder=null,this.dispatchNumberInEncoder=0,this.commandQueueOwnedIds=new WeakSet,this.flushDisposalQueue()}},{key:"getBuffer",value:function(e){return this.uploadToGPU(e),this.tensorMap.get(e).bufferInfo.buffer}},{key:"ensureCommandEncoderReady",value:function(){this.currentCommandEncoder||(this.currentCommandEncoder=this.device.createCommandEncoder())}},{key:"ensureComputePassEnded",value:function(){this.currentComputePass&&(this.currentComputePass.end(),this.currentComputePass=null)}},{key:"getComputePass",value:function(){return this.currentComputePass||(this.currentComputePass=this.currentCommandEncoder.beginComputePass()),this.currentComputePass}},{key:"getBufferData",value:function(){var e=Mr(Nr().mark((function e(t,n){var r,a;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.acquireBuffer(n,GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ),this.ensureCommandEncoderReady(),this.ensureComputePassEnded(),this.currentCommandEncoder.copyBufferToBuffer(t,0,r,0,n),this.submitQueue(),e.next=7,r.mapAsync(GPUMapMode.READ);case 7:return a=r.getMappedRange().slice(0),e.abrupt("return",(r.unmap(),null!=r&&this.bufferManager.releaseBuffer(r,n,GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ),Zi().getBool("WEBGPU_USE_PROFILE_TOOL")&&(Cl.assert(void 0!==this.dummyContext,(function(){return"Fail to get context for profiling tool"})),this.dummyContext.getCurrentTexture()),a));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.tensorMap.get(e);return this.maybeReleaseBuffer(e),n.values=t,n.values}},{key:"readSync",value:function(e){var t=this.tensorMap.get(e).values;if(null==t)throw new Error("WebGPU readSync is only available for CPU-resident tensors.");return t}},{key:"read",value:function(){var e=Mr(Nr().mark((function e(t){var n,r,a,i,o,s,u;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.tensorMap.has(t)){e.next=2;break}throw new Error("Tensor ".concat(t," was not registered!"));case 2:if(n=this.tensorMap.get(t),null==(r=n.values)){e.next=5;break}return e.abrupt("return",this.convertAndCacheOnCPU(t,r));case 5:if("complex64"!==n.dtype){e.next=14;break}return e.next=8,Promise.all([this.read(n.complexTensorInfos.real.dataId),this.read(n.complexTensorInfos.imag.dataId)]);case 8:i=e.sent,o=i[0],s=i[1],a=$b.mergeRealAndImagArrays(o,s),e.next=23;break;case 14:if(null==n.values){e.next=18;break}e.t0=n.values,e.next=21;break;case 18:return e.next=20,this.getBufferData(n.bufferInfo.buffer,n.bufferInfo.byteSize);case 20:e.t0=e.sent;case 21:u=e.t0,a=FJ(u,n.dtype);case 23:return e.abrupt("return",(this.convertAndCacheOnCPU(t,a),a));case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=this.tensorMap.get(e),n=t.values,r=t.dtype,a=t.shape,i=t.bufferInfo;if("complex64"===r)throw new Error("Does not support reading buffer for complex64 dtype.");if(null==i.buffer)throw null!=n?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var o=Cl.sizeFromShape(a)*PJ(r),s=this.acquireBuffer(o);this.ensureCommandEncoderReady(),this.ensureComputePassEnded(),this.currentCommandEncoder.copyBufferToBuffer(i.buffer,0,s,0,o),this.submitQueue();var u=this.makeTensorInfo(a,r),l=Lh().makeTensorFromTensorInfo(u);return this.tensorMap.get(u.dataId).bufferInfo.buffer=s,{tensorRef:l,buffer:s,bufSize:o}}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return Cl.decodeString(e)}));return eh(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return eh(e.shape,e.dtype,t)}},{key:"time",value:function(){var e=Mr(Nr().mark((function e(t){var n,r,a,i,o,s,u;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.activeTimers,r=[],a=!1,null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,t(),i=Cl.flatten(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=Cl.flatten(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=n,a&&(this.programTimersStack=null),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},e.next=7,Promise.all(i);case 7:return u=e.sent,e.abrupt("return",(s.kernelMs=Cl.sum(u),s.getExtraProfileInfo=function(){return u.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},this.uploadWaitMs=0,this.downloadWaitMs=0,s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAndSavePipeline",value:function(e,t){return e in this.pipelineCache||(this.pipelineCache[e]=t()),this.pipelineCache[e]}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&Cl.isString(n[0])){var a=n.map((function(e){return Cl.encodeString(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"tensorToBinding",value:function(e){if(!e)return null;var t=this.tensorMap.get(e.dataId);return{offset:0,size:t.bufferInfo.byteSize,buffer:t.bufferInfo.buffer}}},{key:"getQueryTime",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.supportTimeQuery?this.getTimeFromQuerySet(t):0);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uploadToGPU",value:function(e){var t=this.tensorMap.get(e);if(null==t.bufferInfo.buffer&&(t.bufferInfo.buffer=this.acquireBuffer(t.bufferInfo.byteSize),t.values)){var n=this.bufferManager.acquireUploadBuffer(t.bufferInfo.byteSize,GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC),r=n.getMappedRange();"int32"===t.dtype||"bool"===t.dtype?new Int32Array(r).set(t.values):new Float32Array(r).set(t.values),n.unmap(),this.ensureCommandEncoderReady(),this.ensureComputePassEnded(),this.currentCommandEncoder.copyBufferToBuffer(n,0,t.bufferInfo.buffer,0,t.bufferInfo.byteSize);var a={byteSize:t.bufferInfo.byteSize,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC,buffer:n};this.stagingDisposalQueue.push(a)}}},{key:"makeUniforms",value:function(e){var t=0,n=0,r=[];e.forEach((function(e){var a;switch(0===e.data.length&&(e.data=[1]),e.data.length){case 1:a=4;break;case 2:a=8;break;case 3:case 4:case 5:case 6:a=16;break;default:Cl.assert(!1,(function(){return"Unsupported ".concat(e.data.length,"D shape")}))}(5===n||6===n)&&(a=16),t=Math.ceil(t/a)*a,n=e.data.length,r.push(t),t+=4*e.data.length}));var a=new ArrayBuffer(t);e.forEach((function(e,t){var n=r[t];"int32"===e.type?new Int32Array(a,n,e.data.length).set(e.data):"uint32"===e.type?new Uint32Array(a,n,e.data.length).set(e.data):new Float32Array(a,n,e.data.length).set(e.data)}));var i=this.acquireBuffer(t,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.queue.writeBuffer(i,0,a,0,t);var o={byteSize:t,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM,buffer:i};return this.uniformDisposalQueue.push(o),{offset:0,size:t,buffer:i}}},{key:"createLayout",value:function(e){var t=[];t.push({binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}});for(var n=0;n<e;n++)t.push({binding:n+1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}});t.push({binding:e+1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}});var r=this.device.createBindGroupLayout({entries:t});return{bindGroupLayout:r,pipelineLayout:this.device.createPipelineLayout({bindGroupLayouts:[r]})}}},{key:"getCachedOrCreateLayout",value:function(e){return e in this.layoutCache||(this.layoutCache[e]=this.createLayout(e)),this.layoutCache[e]}},{key:"makeBindGroup",value:function(e,t,n,r,a){var i=[r].concat(ta(n));return a&&i.push(a),e.createBindGroup({layout:t,entries:i.map((function(e,t){return{binding:t,resource:e}}))})}},{key:"runWebGPUProgram",value:function(e,t,n,r,a){var i=this;if(!a){if(a=this.makeTensorInfo(e.outputShape,n),0===Cl.sizeFromShape(a.shape))return this.tensorMap.get(a.dataId).values=Cl.getTypedArrayFromDType(a.dtype,0),a;this.uploadToGPU(a.dataId)}e.dispatch=U2(this.device,e);var o=[{type:"float32",data:[NaN]}],s=t.concat(a).map((function(e){return e.shape})),u="int32";s.map((function(e){o.push({type:u,data:e})}));var l=Cl.computeStrides(a.shape);if(o.push({type:u,data:l}),e.size){var c=Cl.sizeFromShape(e.outputShape);o.push({type:u,data:[e.isVec4?c/4:c]})}r&&(o=[].concat(ta(o),ta(r)));var d=this.makeUniforms(o),h=t.map((function(t,n){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");return i.uploadToGPU(t.dataId),{dtype:i.tensorMap.get(t.dataId).dtype,shape:t.shape,name:e.variableNames[n]}})),p=h.map((function(e){return e.dtype})).concat(a.dtype),f=h.map((function(e){return $b.getBroadcastDims(e.shape,a.shape)})),m=h.map((function(e){return Cl.arraysEqual(e.shape,a.shape)})).join("_"),g=f.map((function(e){return e.join("_")})).join(";"),v=YJ(e,s,p,g,m),y=this.getCachedOrCreateLayout(e.variableNames.length),b=y.bindGroupLayout,x=y.pipelineLayout,A=this.getAndSavePipeline(v,(function(){return VJ(i.device,e,x,h,a)})),w=null!=this.activeTimers,k=this.makeBindGroup(this.device,b,t.map((function(e){return i.tensorToBinding(e)})),this.tensorToBinding(a),d);this.ensureCommandEncoderReady();var S=this.getComputePass();return w&&this.supportTimeQuery&&S.writeTimestamp(this.querySet,0),S.setPipeline(A),S.setBindGroup(0,k),S.dispatchWorkgroups(e.dispatch[0],e.dispatch[1],e.dispatch[2]),w&&this.supportTimeQuery&&S.writeTimestamp(this.querySet,1),this.dispatchNumberInEncoder++,t.forEach((function(e){i.commandQueueOwnedIds.add(e.dataId)})),this.commandQueueOwnedIds.add(a.dataId),Zi().get("WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE")<=this.dispatchNumberInEncoder&&this.submitQueue(),w&&this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(this.querySet)}),a}},{key:"getFromPixelTextureLayout",value:function(e){return e?(null===this.fromPixelImportTextureLayout&&(this.fromPixelImportTextureLayout=this.createFromPixelTextureLayout(!0)),this.fromPixelImportTextureLayout):(null===this.fromPixelTextureLayout&&(this.fromPixelTextureLayout=this.createFromPixelTextureLayout(!1)),this.fromPixelTextureLayout)}},{key:"createFromPixelTextureLayout",value:function(e){var t=[];t.push({binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}),e?t.push({binding:1,visibility:GPUShaderStage.COMPUTE,externalTexture:{}}):t.push({binding:1,visibility:GPUShaderStage.COMPUTE,texture:{}}),t.push({binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{}});var n=this.device.createBindGroupLayout({entries:t});return{bindGroupLayout:n,pipelineLayout:this.device.createPipelineLayout({bindGroupLayouts:[n]})}}},{key:"copyExternalImageToTexture",value:function(e,t){var n=GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING,r="rgba8unorm",a=this.textureManager.acquireTexture(t[1],t[0],r,n),i=a.createView();this.queue.copyExternalImageToTexture({source:e},{texture:a},[t[1],t[0]]);var o={width:t[1],height:t[0],format:r,usage:n,texture:a};return this.textureDisposalQueue.push(o),i}},{key:"runFromPixelsProgram",value:function(e,t,n,r,a){var i=this;e.dispatch=U2(this.device,e);var o=this.makeTensorInfo(t,"int32");if(0===Cl.sizeFromShape(o.shape))return this.tensorMap.get(o.dataId).values=Cl.getTypedArrayFromDType(o.dtype,0),o;this.uploadToGPU(o.dataId);var s,u=YJ(e,[o.shape]),l=this.getFromPixelTextureLayout(r),c=this.getAndSavePipeline(u,(function(){return VJ(i.device,e,l.pipelineLayout,[],o,!0)}));if(r){var d={source:a};s=this.device.importExternalTexture(d)}else s=this.copyExternalImageToTexture(a,o.shape);var h=this.tensorToBinding(o),p=this.makeUniforms(n),f=this.device.createBindGroup({layout:l.bindGroupLayout,entries:[{binding:0,resource:{buffer:h.buffer}},{binding:1,resource:s},{binding:2,resource:{buffer:p.buffer}}]});this.ensureCommandEncoderReady();var m=this.getComputePass(),g=null!=this.activeTimers;return g&&this.supportTimeQuery&&m.writeTimestamp(this.querySet,0),m.setPipeline(c),m.setBindGroup(0,f),m.dispatchWorkgroups(e.dispatch[0],e.dispatch[1],e.dispatch[2]),g&&this.supportTimeQuery&&m.writeTimestamp(this.querySet,1),this.commandQueueOwnedIds.add(o.dataId),this.dispatchNumberInEncoder++,Zi().get("WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE")<=this.dispatchNumberInEncoder&&this.submitQueue(),g&&this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(this.querySet)}),o}},{key:"getTimeFromQuerySet",value:function(){var e=Mr(Nr().mark((function e(t){var n,r,a,i;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.acquireBuffer(16,GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE),r=this.acquireBuffer(16,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),this.ensureCommandEncoderReady(),this.ensureComputePassEnded(),this.currentCommandEncoder.resolveQuerySet(t,0,2,n,0),this.currentCommandEncoder.copyBufferToBuffer(n,0,r,0,16),this.submitQueue(),e.next=8,r.mapAsync(GPUMapMode.READ);case 8:return a=new BigUint64Array(r.getMappedRange()),i=Number(a[1]-a[0]),e.abrupt("return",(r.unmap(),this.bufferManager.releaseBuffer(r,16,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),this.bufferManager.releaseBuffer(n,16,GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE),i/1e6));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H2;return Zi().getBool("WEBGPU_CPU_FORWARD")&&e.every((function(e){return null==t.tensorMap.get(e.dataId).bufferInfo.buffer&&Cl.sizeFromShape(e.shape)<n}))}},{key:"numDataIds",value:function(){return this.tensorMap.numDataIds()-this.tensorDisposalQueue.length}},{key:"dispose",value:function(){this.disposed||(this.bufferManager.dispose(),this.textureManager.dispose(),this.disposed=!0)}}]),n}(Za),X2=G2;X2.nextDataId=0;var q2={};Ea(q2,{WebGPUBackend:function(){return X2},webgpu_util:function(){return IJ}}),DJ()&&Zh("webgpu",Mr(Nr().mark((function e(){var t,n,r,a,i,o;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zi().set("CHECK_COMPUTATION_FOR_ERRORS",!1),t={powerPreference:Zi().get("WEBGPU_USE_LOW_POWER_GPU")?"low-power":"high-performance"},e.next=4,navigator.gpu.requestAdapter(t);case 4:return n=e.sent,r=n.limits,a={},i=n.features.has("timestamp-query"),a.requiredLimits={maxComputeWorkgroupStorageSize:r.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:r.maxComputeWorkgroupsPerDimension},i?a.requiredFeatures=["timestamp-query"]:console.warn("This device doesn't support timestamp-query extension. Start Chrome browser with flag --disable-dawn-features=disallow_unsafe_apis then try again. Or zero will shown for the kernel time when profiling mode isenabled. Using performance.now is not workable for webgpu sinceit doesn't support synchronously to read data from GPU."),e.next=11,n.requestDevice(a);case 11:return o=e.sent,e.abrupt("return",new X2(o,i));case 13:case"end":return e.stop()}}),e)}))),3);var Y2,K2=function(e){return e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64",e}(K2||{}),Z2=function(e){return e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu",e}(Z2||{});var J2={kernelName:ll,backendName:"wasm",setupFunc:function(e){Y2=e.wasm.cwrap(ll,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights;if("float32"!==a.dtype||"float32"!==i.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");var u=r.transposeA,l=r.transposeB,c=r.activation,d=r.leakyreluAlpha,h=n.dataIdMap.get(a.dataId).id,p=n.dataIdMap.get(i.dataId).id,f=0;if(null!=o){var m=n.dataIdMap.get(o.dataId);if(1!==m.shape.length)throw new Error("_FusedMatMul only supports rank-1 bias but got rank ".concat(m.shape.length,"."));f=m.id}var g=null==s?0:n.dataIdMap.get(s.dataId).id,v=Z2[c];if(null==v)throw new Error("".concat(c," activation not yet supported for FusedConv2D in the wasm backend."));var y=u?a.shape[2]:a.shape[1],b=l?i.shape[1]:i.shape[2],x=ap.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)),A=n.makeOutput([].concat(ta(x),[y,b]),a.dtype),w=n.dataIdMap.get(A.dataId).id,k=new Uint8Array(new Int32Array(a.shape).buffer),S=new Uint8Array(new Int32Array(i.shape).buffer);return Y2(h,k,a.shape.length,p,S,i.shape.length,u,l,v,f,g,d||0,w),A}};function Q2(e,t){var n;return{kernelName:e,backendName:"wasm",setupFunc:function(t){n=t.wasm.cwrap(e,null,["number","number","number"])},kernelFunc:function(e){var r=e.backend,a=e.inputs.x,i=r.dataIdMap.get(a.dataId).id,o=r.makeOutput(a.shape,t||a.dtype),s=r.dataIdMap.get(o.dataId).id;return 0===Cl.sizeFromShape(o.shape)||n(i,K2[a.dtype],s),o}}}var $2=Q2(to);function e5(e,t,n){var r;return{kernelName:e,backendName:"wasm",setupFunc:function(t){r=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs,i=a.a,o=a.b,s=t.dataIdMap.get(i.dataId).id,u=t.dataIdMap.get(o.dataId).id,l=null!=n?n:i.dtype,c=$b.assertAndGetBroadcastShape(i.shape,o.shape),d=t.makeOutput(c,l);if(0===Cl.sizeFromShape(c))return d;var h=new Uint8Array(new Int32Array(i.shape).buffer),p=new Uint8Array(new Int32Array(o.shape).buffer),f=t.dataIdMap.get(d.dataId).id;return r(s,h,i.shape.length,u,p,o.shape.length,K2[i.dtype],f),d}}}var t5,n5=e5(ao);var r5={kernelName:io,backendName:"wasm",setupFunc:function(e){t5=e.wasm.cwrap(io,null,["array","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=n.makeOutput(t[0].shape,t[0].dtype);if(0===Cl.sizeFromShape(r.shape))return r;var a=t.map((function(e){return n.dataIdMap.get(e.dataId).id})),i=new Uint8Array(new Int32Array(a).buffer),o=n.dataIdMap.get(r.dataId).id;return t5(i,a.length,K2[r.dtype],o),r}};function a5(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype),a=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(r).set(a),r}var i5,o5={kernelName:gs,backendName:"wasm",kernelFunc:a5};function s5(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=function(e,t){for(var n=[],r=[],a=0;a<e.length;++a)1!==e[a]&&n.push(e[a]),1!==e[t[a]]&&r.push(t[a]);for(var i=0;i<r.length;++i){for(var o=-1,s=0;s<r.length;++s)r[s]>=i&&(-1===o||r[o]>r[s])&&(o=s);r[o]=i}return[n,r]}(t.x.shape,r.perm),i=u(a,2),o=i[0],s=i[1],l=!0,c=0;c<s.length;c++)s[c]!==c&&(l=!1);var d=function(e,t){for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];return n}(t.x.shape,r.perm),h={dataId:t.x.dataId,shape:o,dtype:t.x.dtype};if(l){var p=a5({inputs:t,backend:n});return p.shape=d,p}var f=n.makeOutput(d,h.dtype),m=n.dataIdMap.get(h.dataId).id,g=n.dataIdMap.get(f.dataId).id,v=new Uint8Array(new Int32Array(s).buffer),y=new Uint8Array(new Int32Array(h.shape).buffer);return i5(m,y,h.shape.length,K2[h.dtype],g,v,s.length),f}var u5,l5={kernelName:el,backendName:"wasm",kernelFunc:s5,setupFunc:function(e){i5=e.wasm.cwrap(el,null,["number","array","number","number","number","array","number"])}};function c5(e,t,n){var r=e.shape,a=e.shape.length,i=Cl.parseAxisParam(t,r),o=i,s=$b.getAxesPermutation(o,a),u=null,l=!1;if(null!=s){for(var c=new Array(a),d=0;d<c.length;d++)c[d]=r[s[d]];o=$b.getInnerMostAxes(o.length,a),u=s5({inputs:{x:e},attrs:{perm:s},backend:n});var h=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(u.dataId).id!==h&&(l=!0)}return{transposed:u,originalAxes:i,axes:o,inputWasTransposed:l}}var d5,h5={kernelName:oo,backendName:"wasm",setupFunc:function(e){u5=e.wasm.cwrap(oo,null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,l=o,c=c5(o,a,t),d=c.transposed,h=c.axes,p=c.originalAxes,f=c.inputWasTransposed;f&&(l=d,s=A=t.dataIdMap.get(d.dataId).id);var m=l.shape.length;$b.assertAxesAreInnerMostDims("all",h,m);var g=u($b.computeOutAndReduceShapes(l.shape,h),2),v=g[0],y=g[1],b=Cl.sizeFromShape(y),x=t.makeOutput(v,o.dtype);if(0!==Cl.sizeFromShape(l.shape)){var A=t.dataIdMap.get(x.dataId).id;u5(s,b,A)}if(f&&t.disposeData(d.dataId),i){var w=$b.expandShapeToKeepDim(x.shape,p);x.shape=w}return x}};var p5,f5={kernelName:so,backendName:"wasm",setupFunc:function(e){d5=e.wasm.cwrap(so,null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,l=o,c=c5(o,a,t),d=c.transposed,h=c.axes,p=c.originalAxes,f=c.inputWasTransposed;f&&(l=d,s=A=t.dataIdMap.get(d.dataId).id);var m=l.shape.length;$b.assertAxesAreInnerMostDims("any",h,m);var g=u($b.computeOutAndReduceShapes(l.shape,h),2),v=g[0],y=g[1],b=Cl.sizeFromShape(y),x=t.makeOutput(v,o.dtype);if(0!==Cl.sizeFromShape(l.shape)){var A=t.dataIdMap.get(x.dataId).id;d5(s,b,A)}if(f&&t.disposeData(d.dataId),i){var w=$b.expandShapeToKeepDim(x.shape,p);x.shape=w}return x}};var m5,g5={kernelName:uo,backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.axis,a=n.x,i=t.dataIdMap.get(a.dataId).id,o=i,s=a,u=c5(a,r,t),l=u.transposed,c=u.axes,d=u.inputWasTransposed;if(d){var h=t.dataIdMap.get(l.dataId).id;h!==i&&(s=l,o=h)}var p=s.shape.slice(0,-1),f=t.makeOutput(p,"int32"),m=t.dataIdMap.get(f.dataId).id,g=Cl.sizeFromShape(f.shape),v=s.shape[c[0]];return p5(o,K2[s.dtype],g,v,m),d&&t.disposeData(l.dataId),f},setupFunc:function(e){p5=e.wasm.cwrap(uo,null,["number","number","number","number","number"])}};var v5={kernelName:go,backendName:"wasm",setupFunc:function(e){m5=e.wasm.cwrap(go,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=r.dataIdMap.get(a.dataId).id,o=n.filterSize,s=n.strides,u=n.pad,l=n.dimRoundingMode,c=$b.computePool2DInfo(a.shape,o,s,1,u,l),d=c.filterHeight,h=c.filterWidth,p=c.padInfo.top,f=c.padInfo.right,m=c.padInfo.bottom,g=c.padInfo.left,v=c.strideHeight,y=c.strideWidth,b=c.inChannels;if("channelsLast"!==c.dataFormat)throw new Error("wasm backend does not support dataFormat:'".concat(c.dataFormat,"'. Please use 'channelsLast'."));if(1!==c.dilationWidth||1!==c.dilationHeight)throw new Error("was backend only supports average pooling with dilation = [1, 1], got [".concat(c.dilationHeight,", ").concat(c.dilationWidth,"]."));var x=r.makeOutput(c.outShape,"float32"),A=r.dataIdMap.get(x.dataId).id;return m5(i,a.shape[0],a.shape[1],a.shape[2],d,h,p,f,m,g,v,y,b,A),x}};function y5(e){var t=e.inputs,n=e.attrs,r=t.x,a=n.shape,i=Cl.sizeFromShape(r.shape),o=Cl.inferFromImplicitShape(a,i);return Cl.assert(i===Cl.sizeFromShape(o),(function(){return"new shape: ".concat(o,", old shape: ").concat(r.shape,". New shape and old shape must have the same number of elements.")})),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:o,dtype:r.dtype}}var b5,x5={kernelName:pu,backendName:"wasm",kernelFunc:y5};var A5={kernelName:xo,backendName:"wasm",setupFunc:function(e){b5=e.wasm.cwrap(xo,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;if("float32"!==a.dtype||"float32"!==i.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");var u=a.shape.length,l=i.shape.length,c=o?a.shape[u-2]:a.shape[u-1],d=s?i.shape[l-1]:i.shape[l-2],h=o?a.shape[u-1]:a.shape[u-2],p=s?i.shape[l-2]:i.shape[l-1],f=a.shape.slice(0,-2),m=i.shape.slice(0,-2),g=Cl.sizeFromShape(f),v=Cl.sizeFromShape(m),y=ap.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([h,p]);Cl.assert(c===d,(function(){return"Error in matMul: inner shapes (".concat(c,") and (").concat(d,") of Tensors with shapes ").concat(a.shape," and ").concat(i.shape," and transposeA=").concat(o," and transposeB=").concat(s," must match.")}));var b=s?[v,p,d]:[v,d,p],x=y5({inputs:{x:a},backend:n,attrs:{shape:o?[g,c,h]:[g,h,c]}}),A=y5({inputs:{x:i},backend:n,attrs:{shape:b}}),w=n.dataIdMap.get(x.dataId).id,k=n.dataIdMap.get(A.dataId).id,S=o?x.shape[2]:x.shape[1],C=s?A.shape[1]:A.shape[2],I=Math.max(g,v),E=n.makeOutput([I,S,C],x.dtype),T=n.dataIdMap.get(E.dataId).id,N=new Uint8Array(new Int32Array(x.shape).buffer),_=new Uint8Array(new Int32Array(A.shape).buffer);return b5(w,N,x.shape.length,k,_,A.shape.length,o,s,T),n.disposeData(x.dataId),n.disposeData(A.dataId),E.shape=y,E}};function w5(e){var t=e.inputs.x,n=e.attrs,r=n.begin,a=n.size,i=e.backend,o=u(Sp.parseSliceParams(t,r,a),2),s=o[0],l=o[1],c=Sp.isSliceContinous(t.shape,s,l),d=i.readSync(t.dataId),h=i.makeOutput(l,t.dtype),p=Cl.computeStrides(t.shape),f=i.dataIdMap.get(h.dataId);if(c){var m=Sp.computeFlatOffset(s,p);return"string"===t.dtype?f.stringBytes=d.slice(m,m+Cl.sizeFromShape(l)):i.typedArrayFromHeap(h).set(d.subarray(m,m+Cl.sizeFromShape(l))),h}if("string"===t.dtype){var g=SD(d,s,l,t.shape,t.dtype);return f.stringBytes=g,h}var v=i.typedArrayFromHeap(h),y=t.shape.length;if(2===y)!function(e,t,n,r,a){for(var i=0,o=r[0],s=r[1],u=o+a[0],l=o;l<u;l++){var c=l*t+s;n.set(e.subarray(c,c+a[1]),i),i+=a[1]}}(d,p[0],v,s,l);else if(3===y)!function(e,t,n,r,a,i){for(var o=0,s=a[0],u=a[1],l=a[2],c=s+i[0],d=u+i[1],h=s;h<c;h++)for(var p=u;p<d;p++){var f=h*t+p*n+l;r.set(e.subarray(f,f+i[2]),o),o+=i[2]}}(d,p[0],p[1],v,s,l);else if(4===y)!function(e,t,n,r,a,i,o){for(var s=0,u=i[0],l=i[1],c=i[2],d=u+o[0],h=l+o[1],p=c+o[2],f=i[3],m=u;m<d;m++)for(var g=l;g<h;g++)for(var v=c;v<p;v++){var y=m*t+g*n+v*r+f;a.set(e.subarray(y,y+o[3]),s),s+=o[3]}}(d,p[0],p[1],p[2],v,s,l);else{var b=SD(d,s,l,t.shape,t.dtype);v.set(b)}return h}var k5={kernelName:Iu,backendName:"wasm",kernelFunc:w5};var S5={kernelName:Ao,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops,s=i.reduce((function(e,t){return e*t})),u=$b.getReshaped(a.shape,i,s),l=$b.getPermuted(u.length,i.length),c=$b.getReshapedPermuted(a.shape,i,s),d=$b.getSliceBeginCoords(o,i.length),h=$b.getSliceSize(c,o,i.length),p=y5({inputs:{x:a},backend:n,attrs:{shape:u}}),f=s5({inputs:{x:p},backend:n,attrs:{perm:l}}),m=w5({inputs:{x:y5({inputs:{x:f},backend:n,attrs:{shape:c}})},backend:n,attrs:{begin:d,size:h}});return n.disposeData(p.dataId),n.disposeData(f.dataId),n.disposeData(p.dataId),m}};function C5(e){var t=e.inputs.x,n=e.attrs.dtype,r=e.backend,a=r.makeOutput(t.shape,n),i=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(a).set(i),a}var I5,E5={kernelName:Co,backendName:"wasm",kernelFunc:C5},T5=Q2(Io);var N5={kernelName:Eo,backendName:"wasm",setupFunc:function(e){I5=e.wasm.cwrap(Eo,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.clipValueMin,o=r.clipValueMax,s=n.dataIdMap.get(a.dataId).id,u=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(u.dataId).id;return I5(s,i,o,l),u}};function _5(e){var t=e.inputs,n=e.backend,r=Cl.parseAxisParam(e.attrs.axis,t[0].shape)[0],a=$b.computeOutShape(t.map((function(e){return e.shape})),r),i=t.filter((function(e){return Cl.sizeFromShape(e.shape)>0}));if(1===i.length)return a5({inputs:{x:i[0]},backend:n});var o=n.makeOutput(a,t[0].dtype);if(0===Cl.sizeFromShape(a))return o;var s=i.map((function(e){return e.shape}));if($b.assertParamsConsistent(s,r),"string"===i[0].dtype){var u=i.map((function(e){var t=Cl.sizeFromShape(e.shape.slice(r));return y5({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),l=u.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}}));a=$b.computeOutShape(u.map((function(e){return e.shape})),1);var c=1===u[0].shape[0],d=yF(l,a,t[0].dtype,c),h=$b.computeOutShape(i.map((function(e){return e.shape})),r);return o.shape=h,n.dataIdMap.get(o.dataId).stringBytes=$b.fromStringArrayToUint8(d),u.forEach((function(e){return n.disposeData(e.dataId)})),o}for(var p=Cl.sizeFromShape(i[0].shape.slice(0,r)),f=0,m=i.map((function(e){var t=Cl.sizeFromShape(e.shape.slice(r));return f+=t,t})),g=i.map((function(e){return n.typedArrayFromHeap(e)})),v=n.typedArrayFromHeap(o),y=0;y<p;y++)for(var b=y*f,x=0;x<g.length;x++){var A=m[x],w=y*A,k=g[x].subarray(w,w+A);v.set(k,b),b+=A}return o}var M5,R5={kernelName:_o,backendName:"wasm",kernelFunc:_5};var O5,P5={kernelName:Mo,backendName:"wasm",setupFunc:function(e){M5=e.wasm.cwrap(Mo,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(i.dataId).id,u=n.strides,l=n.dilations,c=n.pad,d=n.dimRoundingMode,h=n.dataFormat,p=$b.convertConv2DDataFormat(h),f=$b.computeConv2DInfo(a.shape,i.shape,u,l,c,d,!1,p),m=f.filterHeight,g=f.filterWidth,v=f.padInfo.top,y=f.padInfo.right,b=f.padInfo.bottom,x=f.padInfo.left,A=f.dilationHeight,w=f.dilationWidth,k=f.strideHeight,S=f.strideWidth,C=f.inChannels,I=f.outChannels,E="SAME"===f.padInfo.type?1:0;if("channelsLast"!==f.dataFormat)throw new Error("wasm backend Conv2D does not support dataFormat:'".concat(f.dataFormat,"'. Please use 'channelsLast'."));var T=r.makeOutput(f.outShape,"float32"),N=r.dataIdMap.get(T.dataId).id;return M5(o,a.shape[0],a.shape[1],a.shape[2],s,m,g,v,y,b,x,E,A,w,k,S,C,I,N),T}};var F5,D5={kernelName:Oo,backendName:"wasm",setupFunc:function(e){O5=e.wasm.cwrap(Oo,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.dy,i=n.filter,o=r.strides,s=r.pad,l=r.dataFormat,c=r.dimRoundingMode,d=r.inputShape,h=$b.convertConv2DDataFormat(l),p=$b.computeConv2DInfo(d,i.shape,o,1,s,c,!1,h),f=p.batchSize,m=p.filterHeight,g=p.filterWidth,v=p.inChannels,y=p.inHeight,b=p.inWidth,x=p.outChannels,A=p.outHeight,w=p.outWidth,k=p.strideHeight,S=p.strideWidth,C=m-1-p.padInfo.top,I=g-1-p.padInfo.left,E="channelsLast"===p.dataFormat,T=Cl.computeStrides(p.inShape),N=Cl.computeStrides(a.shape),_=u(Cl.computeStrides(i.shape),3),M=_[0],R=_[1],O=_[2],P=T[0],F=E?T[1]:T[2],D=E?T[2]:1,L=E?1:T[1],z=N[0],B=E?N[1]:N[2],W=E?N[2]:1,j=E?1:N[1],V=t.makeOutput(p.inShape,"float32"),H=t.dataIdMap.get(V.dataId).id,U=t.dataIdMap.get(a.dataId).id,G=t.dataIdMap.get(i.dataId).id;return O5(U,G,f,m,g,y,b,v,A,w,x,k,S,C,I,M,R,O,P,F,D,L,z,B,W,j,H),V}},L5=Q2(Lo),z5=Q2(zo),B5=function(e){return e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest",e}(B5||{});var W5,j5={kernelName:jo,backendName:"wasm",setupFunc:function(e){F5=e.wasm.cwrap(jo,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=a.method,o=a.extrapolationValue,s=a.cropSize,l=r.image,c=r.boxes,d=r.boxInd,h=c.shape[0],p=u(s,2),f=p[0],m=p[1],g=[h,f,m,l.shape[3]],v=n.dataIdMap.get(l.dataId);"float32"!==l.dtype&&(t=C5({backend:n,inputs:{x:l},attrs:{dtype:"float32"}}),v=n.dataIdMap.get(t.dataId));var y=v.id,b=n.dataIdMap.get(c.dataId).id,x=n.dataIdMap.get(d.dataId).id,A=n.makeOutput(g,"float32"),w=n.dataIdMap.get(A.dataId).id,k=new Uint8Array(new Int32Array(l.shape).buffer);return F5(y,b,x,h,k,f,m,B5[i],o,w),null!=t&&n.disposeData(t.dataId),A}};var V5,H5={kernelName:Bo,backendName:"wasm",setupFunc:function(e){W5=e.wasm.cwrap(Bo,null,["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse,u=a.shape.length;Cl.assert("float32"===a.dtype||"int32"===a.dtype,(function(){return"cumprod does not support ".concat(a.dtype," tensors in the WASM backend")}));var l=$b.getAxesPermutation([i],u),c=a;null!==l&&(c=s5({inputs:{x:a},attrs:{perm:l},backend:n}));var d=$b.getInnerMostAxes(1,u)[0];$b.assertAxesAreInnerMostDims("cumprod",[d],u);var h=n.makeOutput(c.shape,c.dtype),p=c.shape[d],f=n.dataIdMap.get(c.dataId).id,m=n.dataIdMap.get(h.dataId).id;W5(f,o?1:0,s?1:0,p,m,K2[a.dtype]);var g=h;return null!==l&&(g=s5({inputs:{x:h},attrs:{perm:$b.getUndoAxesPermutation(l)},backend:n}),n.disposeData(c.dataId),n.disposeData(h.dataId)),g}};var U5,G5={kernelName:Wo,backendName:"wasm",setupFunc:function(e){V5=e.wasm.cwrap(Wo,null,["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse,u=a.shape.length;Cl.assert("float32"===a.dtype||"int32"===a.dtype,(function(){return"cumsum does not support ".concat(a.dtype," tensors in the WASM backend")}));var l=$b.getAxesPermutation([i],u),c=a;null!==l&&(c=s5({inputs:{x:a},attrs:{perm:l},backend:n}));var d=$b.getInnerMostAxes(1,u)[0];$b.assertAxesAreInnerMostDims("cumsum",[d],u);var h=n.makeOutput(c.shape,c.dtype),p=c.shape[d],f=n.dataIdMap.get(c.dataId).id,m=n.dataIdMap.get(h.dataId).id;V5(f,o?1:0,s?1:0,p,m,K2[a.dtype]);var g=h;return null!==l&&(g=s5({inputs:{x:h},attrs:{perm:$b.getUndoAxesPermutation(l)},backend:n}),n.disposeData(c.dataId),n.disposeData(h.dataId)),g}};var X5,q5={kernelName:Ho,backendName:"wasm",setupFunc:function(e){U5=e.wasm.cwrap(Ho,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,l=("NHWC"===o?a.shape[2]:a.shape[3])*i,c=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),d="NHWC"===o?[s,u,l,c]:[s,c,u,l],h=t.makeOutput(d,"float32"),p=t.dataIdMap.get(a.dataId).id,f=new Uint8Array(new Int32Array(Cl.computeStrides(a.shape)).buffer),m=new Uint8Array(new Int32Array(d).buffer),g=new Uint8Array(new Int32Array(Cl.computeStrides(d)).buffer),v=t.dataIdMap.get(h.dataId).id;return U5(p,i,"NHWC"===o?1:0,f,a.shape.length-1,m,g,d.length,v),h}};var Y5={kernelName:Uo,backendName:"wasm",setupFunc:function(e){X5=e.wasm.cwrap(Uo,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(i.dataId).id,u=n.strides,l=n.dilations,c=n.pad,d=n.dimRoundingMode,h=null==l?[1,1]:l,p=$b.computeConv2DInfo(a.shape,i.shape,u,h,c,d,!0),f=p.filterHeight,m=p.filterWidth,g=p.padInfo.top,v=p.padInfo.right,y=p.padInfo.bottom,b=p.padInfo.left,x=p.dilationHeight,A=p.dilationWidth,w=p.strideHeight,k=p.strideWidth,S=p.inChannels,C=p.outChannels,I="SAME"===p.padInfo.type?1:0;if("channelsLast"!==p.dataFormat)throw new Error("wasm backend DepthwiseConv2dNative does not support dataFormat:'".concat(p.dataFormat,"'. Please use 'channelsLast'."));var E=r.makeOutput(p.outShape,"float32"),T=r.dataIdMap.get(E.dataId).id;return X5(o,a.shape[0],a.shape[1],a.shape[2],s,f,m,g,v,y,b,I,x,A,w,k,S,C,T),E}},K5=Q2($o),Z5=e5(ns,0,"bool"),J5=Q2(rs,"float32");function Q5(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.input,i=n.dim,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(Cl.assert(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+i+1),s.splice(u,0,1),y5({inputs:{x:a},backend:r,attrs:{shape:s}})}var $5={kernelName:as,backendName:"wasm",kernelFunc:Q5};function e3(e){var t=e.attrs,n=t.shape,r=t.value,a=t.dtype,i=e.backend,o=i.makeOutput(n,a);return i.typedArrayFromHeap(o).fill(r),o}var t3,n3={kernelName:ss,backendName:"wasm",kernelFunc:e3};var r3,a3={kernelName:us,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n.makeOutput(r.shape,r.dtype),i=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(a.dataId).id,s=u(r.shape,4),l=s[0],c=s[1],d=s[2],h=s[3];return t3(i,l,c,d,h,o),a},setupFunc:function(e){t3=e.wasm.cwrap(us,null,["number","number","number","number","number","number"])}},i3=Q2(ls),o3=e5(cs);var s3,u3={kernelName:ds,backendName:"wasm",setupFunc:function(e){r3=e.wasm.cwrap(ds,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.varianceEpsilon,a=n.x,i=n.mean,o=n.variance,s=n.offset,u=n.scale,l=t.dataIdMap.get(a.dataId).id,c=t.dataIdMap.get(i.dataId).id,d=t.dataIdMap.get(o.dataId).id,h=null!=s?t.dataIdMap.get(s.dataId).id:0,p=null!=u?t.dataIdMap.get(u.dataId).id:0,f=t.makeOutput(a.shape,a.dtype);if(0===Cl.sizeFromShape(a.shape))return f;var m=t.dataIdMap.get(f.dataId).id;return r3(l,c,d,h,p,r,m),f}};var l3,c3={kernelName:cl,backendName:"wasm",setupFunc:function(e){s3=e.wasm.cwrap(cl,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=n.strides,l=n.pad,c=n.dilations,d=n.dataFormat,h=n.dimRoundingMode,p=n.activation,f=n.leakyreluAlpha,m=$b.computeConv2DInfo(a.shape,i.shape,u,c,l,h),g=Z2[p];if(null==g)throw new Error("".concat(p," activation not yet supported for FusedConv2D in the wasm backend."));var v=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(i.dataId).id,b=m.outChannels,x=0;if(null!=o){var A=r.dataIdMap.get(o.dataId);if(1!==A.shape.length)throw new Error("FusedConv2D only supports rank-1 bias but got rank ".concat(A.shape.length,"."));if(A.shape[0]!==b)throw new Error("FusedConv2D bias shape (".concat(A.shape,") does not match the number of output channels (").concat(b,")"));x=A.id}var w=m.filterHeight,k=m.filterWidth,S=m.padInfo.top,C=m.padInfo.right,I=m.padInfo.bottom,E=m.padInfo.left,T=m.dilationHeight,N=m.dilationWidth,_=m.strideHeight,M=m.strideWidth,R=m.inChannels,O="SAME"===m.padInfo.type?1:0,P=m.batchSize,F=m.inHeight,D=m.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedConv2D does not support dataFormat:'".concat(d,"'. Please use 'NHWC'."));var L=r.makeOutput(m.outShape,"float32"),z=r.dataIdMap.get(L.dataId).id,B=null==s?0:r.dataIdMap.get(s.dataId).id;return s3(v,P,F,D,y,w,k,x,S,C,I,E,O,T,N,_,M,R,b,g,B,f||0,z),L}};var d3,h3={kernelName:dl,backendName:"wasm",setupFunc:function(e){l3=e.wasm.cwrap(dl,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=n.strides,l=n.pad,c=n.dilations,d=n.dataFormat,h=n.dimRoundingMode,p=n.activation,f=n.leakyreluAlpha,m=$b.computeConv2DInfo(a.shape,i.shape,u,c,l,h,!0),g=Z2[p];if(null==g)throw new Error("".concat(p," activation not yet supported for FusedDepthwiseConv2D in the wasm backend."));var v=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(i.dataId).id,b=m.outChannels,x=0;if(null!=o){var A=r.dataIdMap.get(o.dataId);if(1!==A.shape.length)throw new Error("FusedDepthwiseConv2D only supports rank-1 bias but got rank ".concat(A.shape.length,"."));if(A.shape[0]!==b)throw new Error("FusedDepthwiseConv2D bias shape (".concat(A.shape,") does not match the number of output channels (").concat(b,")"));x=A.id}var w=m.filterHeight,k=m.filterWidth,S=m.padInfo.top,C=m.padInfo.right,I=m.padInfo.bottom,E=m.padInfo.left,T=m.dilationHeight,N=m.dilationWidth,_=m.strideHeight,M=m.strideWidth,R=m.inChannels,O="SAME"===m.padInfo.type?1:0,P=m.batchSize,F=m.inHeight,D=m.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedDepthwiseConv2D does not support dataFormat:'".concat(d,"'. Please use 'NHWC'."));var L=r.makeOutput(m.outShape,"float32"),z=r.dataIdMap.get(L.dataId).id,B=null==s?0:r.dataIdMap.get(s.dataId).id;return l3(v,P,F,D,y,w,k,x,S,C,I,E,O,T,N,_,M,R,b,g,B,f||0,z),L}};var p3,f3={kernelName:ps,backendName:"wasm",setupFunc:function(e){d3=e.wasm.cwrap(ps,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=n.params,a=n.indices,i=u(yp.prepareAndValidate(r,a),4),o=i[0],s=i[1],l=i[2],c=i[3],d=t.makeOutput(o,r.dtype);if(0===s)return d;var h=a.shape,p=h[h.length-1],f=t.dataIdMap.get(r.dataId).id,m=t.dataIdMap.get(a.dataId).id,g=new Uint8Array(new Int32Array(c).buffer),v=t.dataIdMap.get(d.dataId).id;return d3(f,K2[r.dtype],m,s,p,l,g,v),d}};var m3,g3={kernelName:hs,backendName:"wasm",setupFunc:function(e){p3=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){for(var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,i=n.indices,o=r.axis,s=r.batchDims,u=Cl.parseAxisParam(o,a.shape)[0],l=t.readSync(i.dataId),c=a.shape[u],d=function(e){var t=l[e];Cl.assert(t<=c-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(c-1,"]")}))},h=0;h<l.length;++h)d(h);var p=$b.segment_util.collectGatherOpShapeInfo(a,i,u,s),f=y5({inputs:{x:a},attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]},backend:t}),m=Cl.sizeFromShape(i.shape),g=y5({inputs:{x:i},attrs:{shape:[p.batchSize,m/p.batchSize]},backend:t}),v=[p.batchSize,p.outerSize,m/p.batchSize,p.sliceSize],y=t.makeOutput(v,a.dtype);if(0===Cl.sizeFromShape(a.shape))return y;var b=f.shape.length-1,x=t.dataIdMap.get(f.dataId).id,A=t.dataIdMap.get(g.dataId).id,w=t.dataIdMap.get(y.dataId).id,k=new Uint8Array(new Int32Array(Cl.computeStrides(f.shape)).buffer),S=new Uint8Array(new Int32Array(Cl.computeStrides(v)).buffer);return p3(x,K2[a.dtype],k,b,A,p.batchSize,S,w),t.disposeData(f.dataId),t.disposeData(g.dataId),y.shape=p.outputShape,y}},v3=e5(fs,0,"bool"),y3=e5(ms,0,"bool");var b3,x3={kernelName:ws,backendName:"wasm",setupFunc:function(e){m3=e.wasm.cwrap(ws,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.inputs.x,n=e.attrs.alpha,r=e.backend,a=r.dataIdMap.get(t.dataId).id,i=r.makeOutput(t.shape,"float32");if(0!==Cl.sizeFromShape(t.shape)){var o=r.dataIdMap.get(i.dataId).id;m3(a,K2[t.dtype],n,o)}return i}},A3=e5(ks,0,"bool"),w3=e5(Ss,0,"bool"),k3=Q2(Is),S3=e5(Ts,0,"bool"),C3=Q2(Ns),I3=e5(_s,0,"bool"),E3=e5(Ms,0,"bool");var T3,N3={kernelName:Ds,backendName:"wasm",setupFunc:function(e){b3=e.wasm.cwrap(Ds,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.reductionIndices,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,l=o,c=c5(o,a,t),d=c.transposed,h=c.axes,p=c.originalAxes,f=c.inputWasTransposed;f&&(l=d,s=A=t.dataIdMap.get(d.dataId).id);var m=l.shape.length;$b.assertAxesAreInnerMostDims("max",h,m);var g=u($b.computeOutAndReduceShapes(l.shape,h),2),v=g[0],y=g[1],b=Cl.sizeFromShape(y),x=t.makeOutput(v,o.dtype);if(0!==Cl.sizeFromShape(l.shape)){var A=t.dataIdMap.get(x.dataId).id;b3(s,K2[o.dtype],b,A)}if(f&&t.disposeData(d.dataId),i){var w=$b.expandShapeToKeepDim(x.shape,p);x.shape=w}return x}},_3=e5(Ls);var M3,R3={kernelName:zs,backendName:"wasm",setupFunc:function(e){T3=e.wasm.cwrap(zs,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=r.dataIdMap.get(a.dataId).id;Cl.assert("float32"===a.dtype,(function(){return"Error in MaxPool: only float32 input is supported. Got ".concat(a.dtype,".")}));var o=n.filterSize,s=n.strides,u=n.pad,l=n.dimRoundingMode,c=$b.computePool2DInfo(a.shape,o,s,1,u,l),d=c.filterHeight,h=c.filterWidth,p=c.padInfo.top,f=c.padInfo.right,m=c.padInfo.bottom,g=c.padInfo.left,v=c.dilationHeight,y=c.dilationWidth,b=c.strideHeight,x=c.strideWidth,A=c.inChannels,w=c.outChannels;if("channelsLast"!==c.dataFormat)throw new Error("wasm backend does not support dataFormat:'".concat(c.dataFormat,"'. Please use 'channelsLast'."));var k=r.makeOutput(c.outShape,"float32"),S=r.dataIdMap.get(k.dataId).id;return T3(i,a.shape[0],a.shape[1],a.shape[2],d,h,p,f,m,g,v,y,b,x,A,w,S),k}};var O3,P3={kernelName:Hs,backendName:"wasm",setupFunc:function(e){M3=e.wasm.cwrap(Hs,null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,l=s,c=o,d=c5(o,a,t),h=d.transposed,p=d.axes,f=d.originalAxes,m=d.inputWasTransposed,g=p;m&&(k=t.dataIdMap.get(h.dataId).id)!==s&&(c=h,l=k,g=$b.getInnerMostAxes(g.length,c.shape.length)),$b.assertAxesAreInnerMostDims("mean",g,c.shape.length);var v=u($b.computeOutAndReduceShapes(c.shape,g),2),y=v[0],b=v[1],x=Cl.sizeFromShape(b),A=c;"float32"!==c.dtype&&(A=C5({backend:t,inputs:{x:c},attrs:{dtype:"float32"}}),l=t.dataIdMap.get(A.dataId).id);var w=t.makeOutput(y,"float32");if(0!==Cl.sizeFromShape(c.shape)){var k=t.dataIdMap.get(w.dataId).id;M3(l,x,k)}if(m&&t.disposeData(h.dataId),i){var S=$b.expandShapeToKeepDim(w.shape,f);w.shape=S}return"float32"!==c.dtype&&t.disposeData(A.dataId),w}};var F3,D3={kernelName:Us,backendName:"wasm",setupFunc:function(e){O3=e.wasm.cwrap(Us,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,l=s,c=o,d=c5(o,a,t),h=d.transposed,p=d.axes,f=d.originalAxes,m=d.inputWasTransposed;m&&(w=t.dataIdMap.get(h.dataId).id)!==s&&(c=h,l=w);var g=c.shape.length;$b.assertAxesAreInnerMostDims("min",p,g);var v=u($b.computeOutAndReduceShapes(c.shape,p),2),y=v[0],b=v[1],x=Cl.sizeFromShape(b),A=t.makeOutput(y,c.dtype);if(0!==Cl.sizeFromShape(c.shape)){var w=t.dataIdMap.get(A.dataId).id;O3(l,K2[o.dtype],x,w)}if(m&&t.disposeData(h.dataId),i){var k=$b.expandShapeToKeepDim(A.shape,f);A.shape=k}return A}},L3=e5(Gs),z3=function(e){return e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric",e}(z3||{});var B3,W3={kernelName:Xs,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=e.attrs,a=r.paddings,i=r.mode,o=a.map((function(e,n){return e[0]+t.shape[n]+e[1]})),s=n.dataIdMap.get(t.dataId).id,u=n.makeOutput(o,t.dtype),l=n.dataIdMap.get(u.dataId).id,c=new Uint8Array(new Int32Array(t.shape).buffer),d=a.map((function(e){return e[0]})),h=a.map((function(e){return e[1]})),p=new Uint8Array(new Int32Array(d).buffer),f=new Uint8Array(new Int32Array(h).buffer);return F3(s,c,t.shape.length,K2[t.dtype],p,f,z3[i],l),u},setupFunc:function(e){F3=e.wasm.cwrap(Xs,null,["number","array","number","number","array","array","number","number"])}},j3=e5(Ks),V3=Q2(Zs);function H3(e,t){var n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),r=n[0],a=n[1],i=n[2],o=n[3];return e.wasm._free(t),{pSelectedIndices:r,selectedSize:a,pSelectedScores:i,pValidOutputs:o}}var U3,G3={kernelName:Qs,backendName:"wasm",setupFunc:function(e){B3=e.wasm.cwrap(Qs,"number",["number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,i=r.maxOutputSize,o=r.scoreThreshold,s=n.boxes,u=n.scores,l=t.dataIdMap.get(s.dataId).id,c=t.dataIdMap.get(u.dataId).id,d=H3(t,B3(l,c,i,a,o)),h=d.pSelectedIndices,p=d.selectedSize,f=d.pSelectedScores,m=d.pValidOutputs;return t.wasm._free(f),t.wasm._free(m),t.makeOutput([p],"int32",h)}};var X3,q3={kernelName:$s,backendName:"wasm",setupFunc:function(e){U3=e.wasm.cwrap($s,"number",["number","number","number","number","number","bool"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,i=r.maxOutputSize,o=r.scoreThreshold,s=r.padToMaxOutputSize,u=n.boxes,l=n.scores,c=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(l.dataId).id,h=H3(t,U3(c,d,i,a,o,s)),p=h.pSelectedIndices,f=h.selectedSize,m=h.pSelectedScores,g=h.pValidOutputs;return t.wasm._free(m),[t.makeOutput([f],"int32",p),t.makeOutput([],"int32",g)]}};var Y3,K3={kernelName:eu,backendName:"wasm",setupFunc:function(e){X3=e.wasm.cwrap(eu,"number",["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,i=r.maxOutputSize,o=r.scoreThreshold,s=r.softNmsSigma,u=n.boxes,l=n.scores,c=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(l.dataId).id,h=H3(t,X3(c,d,i,a,o,s)),p=h.pSelectedIndices,f=h.selectedSize,m=h.pSelectedScores,g=h.pValidOutputs;return t.wasm._free(g),[t.makeOutput([f],"int32",p),t.makeOutput([f],"float32",m)]}},Z3=e5(Js,0,"bool");var J3={kernelName:nu,backendName:"wasm",setupFunc:function(e){Y3=e.wasm.cwrap(nu,null,["number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue,u=n.makeOutput([].concat(ta(a.shape),[i]),"int32"),l=n.dataIdMap.get(u.dataId).id,c=n.dataIdMap.get(a.dataId).id;return Y3(c,i,o,s,l),u}};var Q3={kernelName:tu,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(1),r}};var $3,e4={kernelName:ru,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Q5({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){Cl.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),Cl.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=Q5({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=_5({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeData(e.dataId)})),u}};var t4,n4={kernelName:au,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=e.attrs,a=r.paddings,i=r.constantValue,o=a.map((function(e,n){return e[0]+t.shape[n]+e[1]}));if(0===Cl.sizeFromShape(t.shape))return e3({backend:n,attrs:{shape:o,value:i,dtype:t.dtype}});var s=n.dataIdMap.get(t.dataId).id,u=n.makeOutput(o,t.dtype),l=n.dataIdMap.get(u.dataId).id,c=new Uint8Array(new Int32Array(t.shape).buffer),d=a.map((function(e){return e[0]})),h=a.map((function(e){return e[1]})),p=new Uint8Array(new Int32Array(d).buffer),f=new Uint8Array(new Int32Array(h).buffer);return $3(s,c,t.shape.length,K2[t.dtype],p,f,i,l),u},setupFunc:function(e){$3=e.wasm.cwrap(au,null,["number","array","number","number","array","array","number","number"])}},r4=e5(ou);var a4,i4={kernelName:su,backendName:"wasm",setupFunc:function(e){t4=e.wasm.cwrap(su,null,["number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(a.dataId).id,s=i,u=r,l=u;"float32"!==u.dtype&&(l=C5({backend:n,inputs:{x:r},attrs:{dtype:"float32"}}),s=n.dataIdMap.get(l.dataId).id);var c=n.makeOutput(r.shape,"float32"),d=n.dataIdMap.get(c.dataId).id;return t4(s,o,d),"float32"!==u.dtype&&n.disposeData(l.dataId),c}};var o4,s4={kernelName:uu,backendName:"wasm",setupFunc:function(e){a4=e.wasm.cwrap(uu,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,l=s,c=o,d=c5(o,a,t),h=d.transposed,p=d.axes,f=d.originalAxes,m=d.inputWasTransposed,g=p;m&&(w=t.dataIdMap.get(h.dataId).id)!==s&&(c=h,l=w,g=$b.getInnerMostAxes(g.length,c.shape.length)),$b.assertAxesAreInnerMostDims("prod",g,c.shape.length);var v=u($b.computeOutAndReduceShapes(c.shape,g),2),y=v[0],b=v[1],x=Cl.sizeFromShape(b),A=t.makeOutput(y,c.dtype);if(0!==Cl.sizeFromShape(c.shape)){var w=t.dataIdMap.get(A.dataId).id;a4(l,x,K2[A.dtype],w)}if(m&&t.disposeData(h.dataId),i){var k=$b.expandShapeToKeepDim(A.shape,f);A.shape=k}return A}},u4={kernelName:lu,backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=gD(r,a,i,o),u=t.makeOutput([s.length],o);return t.typedArrayFromHeap(u).set(s),u}},l4=e5(Jo),c4=Q2(hu),d4=Q2(yu);var h4,p4={kernelName:gu,backendName:"wasm",setupFunc:function(e){o4=e.wasm.cwrap(gu,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=r.images,o=a.alignCorners,s=a.halfPixelCenters,l=u(a.size,2),c=l[0],d=l[1],h=u(i.shape,4),p=h[0],f=h[1],m=h[2],g=h[3],v=[p,c,d,g],y=n.dataIdMap.get(i.dataId);"float32"!==y.dtype&&(t=C5({backend:n,inputs:{x:i},attrs:{dtype:"float32"}}),y=n.dataIdMap.get(t.dataId));var b=y.id,x=n.makeOutput(v,"float32");if(0===Cl.sizeFromShape(i.shape))return x;var A=n.dataIdMap.get(x.dataId).id;return o4(b,p,f,m,g,c,d,o?1:0,s?1:0,A),null!=t&&n.disposeData(t.dataId),x}};var f4,m4={kernelName:bu,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=Cl.parseAxisParam(i,a.shape);if(0===a.shape.length)return a5({inputs:{x:a},backend:n});var s=n.makeOutput(a.shape,a.dtype),u=n.dataIdMap.get(a.dataId).id,l=n.dataIdMap.get(s.dataId).id,c=new Uint8Array(new Int32Array(o).buffer),d=new Uint8Array(new Int32Array(a.shape).buffer);h4(u,c,o.length,d,a.shape.length,l);var h=y5({inputs:{x:s},attrs:{shape:a.shape},backend:n});return n.disposeData(s.dataId),h},setupFunc:function(e){h4=e.wasm.cwrap(bu,null,["number","array","number","array","number","number"])}};var g4,v4={kernelName:ul,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=r.radians,o=r.fillValue,s=r.center,l=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(a.dataId).id,d=n.dataIdMap.get(l.dataId).id,h=u(a.shape,4),p=h[0],f=h[1],m=h[2],g=h[3],v=u($b.getImageCenter(s,f,m),2),y=v[0],b=v[1],x="number"==typeof o?[o,o,o,0===o?0:255]:[].concat(ta(o),[255]),A=new Uint8Array(new Int32Array(x).buffer);return f4(c,p,f,m,g,i,y,b,A,x.length,d),l},setupFunc:function(e){f4=e.wasm.cwrap(ul,null,["number","number","number","number","number","number","number","number","array","number","number"])}},y4=Q2(xu),b4=Q2(Au);var x4,A4={kernelName:wu,backendName:"wasm",setupFunc:function(e){g4=e.wasm.cwrap(wu,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.indices,i=n.updates,o=r.shape,s=t.makeOutput(o,i.dtype);if(0===Cl.sizeFromShape(o))return s;var u=xp.calculateShapes(i,a,o),l=u.sliceRank,c=u.numUpdates,d=u.sliceSize,h=u.strides,p=u.outputSize,f=t.dataIdMap.get(a.dataId).id,m=t.dataIdMap.get(i.dataId).id,g=new Uint8Array(new Int32Array(h).buffer),v=t.dataIdMap.get(s.dataId).id;return g4(f,m,K2[i.dtype],l,c,d,g,p,v),s}};var w4,k4={kernelName:Su,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=n.dataIdMap.get(r.dataId).id,s=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(i.dataId).id,l=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(l.dataId).id,d=r.shape.length,h=a.shape.length,p=0===d||d>1||1===h?1:Cl.sizeFromShape(a.shape.slice(1));return x4(o,s,u,p,c),l},setupFunc:function(e){x4=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}};var S4,C4={kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){w4=e.wasm.cwrap(_u,null,["number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.x,r=t.dataIdMap.get(n.dataId).id,a=t.makeOutput(n.shape,n.dtype),i=t.dataIdMap.get(a.dataId).id;return 0===Cl.sizeFromShape(a.shape)||w4(r,i),a}},I4=Q2(Eu);var E4={kernelName:Du,backendName:"wasm",setupFunc:function(e){S4=e.wasm.cwrap(Du,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.logits,r=e.attrs.dim,a=t.dataIdMap.get(n.dataId).id,i=t.makeOutput(n.shape,n.dtype),o=t.dataIdMap.get(i.dataId).id,s=n.shape[r],u=Cl.sizeFromShape(n.shape)/s;return 0===Cl.sizeFromShape(i.shape)||S4(a,o,s,u),i}};var T4,N4={kernelName:Pu,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings,s=Cl.sizeFromShape(i),u=[[0,0]];u.push.apply(u,ta(o));for(var l=1+i.length;l<a.shape.length;++l)u.push([0,0]);var c=n4.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=$b.getReshaped(c.shape,i,s,!1),h=$b.getPermuted(d.length,i.length,!1),p=$b.getReshapedPermuted(c.shape,i,s,!1),f=y5({inputs:{x:c},backend:n,attrs:{shape:d}}),m=s5({inputs:{x:f},backend:n,attrs:{perm:h}}),g=y5({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeData(c.dataId),n.disposeData(f.dataId),n.disposeData(m.dataId),g}};var _4,M4={kernelName:Lu,backendName:"wasm",setupFunc:function(e){T4=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=r.indices,i=r.values,o=r.denseShape,s=r.defaultValue,u=a.shape[0],l=a.shape[1],c=n.readSync(o.dataId)[0],d=[u+c,l],h=n.dataIdMap.get(a.dataId).id,p=n.dataIdMap.get(i.dataId).id,f=n.dataIdMap.get(s.dataId).id,m=n.makeOutput(d,a.dtype),g=n.dataIdMap.get(m.dataId).id,v=n.makeOutput(d.slice(0,1),i.dtype),y=n.dataIdMap.get(v.dataId).id,b=n.makeOutput([c],"bool"),x=n.dataIdMap.get(b.dataId).id,A=n.makeOutput([u],a.dtype),w=n.dataIdMap.get(A.dataId).id,k=n.makeOutput([4],"int32"),S=n.dataIdMap.get(k.dataId).id,C=T4(h,p,K2[i.dtype],u,c,l,f,g,y,x,w,S),I=n.readSync(k.dataId);switch(I[0]){case 1:t=$b.getSparseFillEmptyRowsIndicesDenseShapeMismatch(I[1]);break;case 2:t=$b.getSparseFillEmptyRowsNegativeIndexErrorMessage(I[1],I[2]);break;case 3:t=$b.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(I[1],I[2],I[3]);break;default:t=""}if(n.disposeData(k.dataId),t)throw n.disposeData(m.dataId),n.disposeData(v.dataId),n.disposeData(b.dataId),n.disposeData(A.dataId),new Error(t);var E=m,T=v;return C!==d[0]&&(E=w5({inputs:{x:m},attrs:{begin:0,size:[C,l]},backend:n}),T=w5({inputs:{x:v},attrs:{begin:0,size:C},backend:n}),n.disposeData(m.dataId),n.disposeData(v.dataId)),[E,T,b,A]}};var R4,O4={kernelName:zu,backendName:"wasm",setupFunc:function(e){_4=e.wasm.cwrap(zu,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=n.inputIndices,a=n.inputShape,i=n.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=t.dataIdMap.get(r.dataId).id,s=t.dataIdMap.get(a.dataId).id,u=t.dataIdMap.get(i.dataId).id,l=r.shape[0],c=Cl.sizeFromShape(i.shape),d=t.makeOutput([l,c],r.dtype),h=t.dataIdMap.get(d.dataId).id,p=t.makeOutput([c],i.dtype),f=t.dataIdMap.get(p.dataId).id,m=t.makeOutput([3],"int32"),g=t.dataIdMap.get(m.dataId).id;_4(o,s,u,l,h,f,g);var v,y=t.readSync(m.dataId);switch(y[0]){case 0:v=$b.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(y[1],y[2]);break;case 1:v=$b.getSparseReshapeNegativeOutputDimErrorMessage(y[1],y[2]);break;case 2:v=$b.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage();break;case 3:var b=Array.from(t.readSync(a.dataId)),x=Array.from(t.readSync(p.dataId));v=$b.getSparseReshapeInputOutputMultipleErrorMessage(b,x);break;case 4:var A=Array.from(t.readSync(a.dataId)),w=Array.from(t.readSync(p.dataId));v=$b.getSparseReshapeInputOutputMismatchErrorMessage(A,w);break;default:v=""}if(t.disposeData(m.dataId),v)throw t.disposeData(d.dataId),t.disposeData(p.dataId),new Error(v);return[d,p]}};function P4(e){R4=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function F4(e,t){var n=e.backend,r=e.inputs,a=r.data,i=r.indices,o=r.segmentIds,s=i.shape[0],u=n.readSync(o.dataId,s-1,s)[0],l=s>0?u+1:0;if(l<0)throw new Error($b.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());var c=a.shape.slice();c[0]=l;var d=n.dataIdMap.get(a.dataId).id,h=n.dataIdMap.get(i.dataId).id,p=n.dataIdMap.get(o.dataId).id,f=n.makeOutput(c,a.dtype),m=n.dataIdMap.get(f.dataId).id,g=n.makeOutput([4],"int32"),v=n.dataIdMap.get(g.dataId).id;R4(d,K2[a.dtype],a.shape[0],h,p,m,v,t,0);var y,b=n.readSync(g.dataId);switch(b[0]){case 0:y=$b.getSparseSegmentReductionNegativeSegmentIdsErrorMessage();break;case 1:y=$b.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage();break;case 2:y=$b.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(b[1],b[2]);break;case 3:y=$b.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(b[1],b[2],b[3]);break;default:y=""}if(n.disposeData(g.dataId),y)throw n.disposeData(f.dataId),new Error(y);return f}var D4={kernelName:Bu,backendName:"wasm",setupFunc:P4,kernelFunc:function(e){return F4(e,!0)}};var L4={kernelName:Wu,backendName:"wasm",setupFunc:P4,kernelFunc:function(e){return F4(e,!1)}};var z4,B4={kernelName:Fu,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.numOrSizeSplits,o=n.axis,s=Cl.parseAxisParam(o,a.shape)[0],u=$b.prepareSplitSize(a,i,s),l=new Array(a.shape.length).fill(0),c=a.shape.slice();return u.map((function(e){var t=ta(c);t[s]=e;var n=w5({inputs:{x:a},attrs:{begin:l,size:t},backend:r});return l[s]+=e,n}))}},W4=Q2(Ru),j4=Q2(Hu),V4=e5(Vu);var H4,U4={kernelName:ol,backendName:"wasm",setupFunc:function(e){z4=e.wasm.cwrap(ol,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.alpha,a=n.x,i=t.dataIdMap.get(a.dataId).id,o=t.makeOutput(a.shape,a.dtype),s=t.dataIdMap.get(o.dataId).id;return z4(i,r,K2[a.dtype],s),o}};var G4,X4={kernelName:Uu,backendName:"wasm",setupFunc:function(e){H4=e.wasm.cwrap(Uu,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=r.x,o=a.begin,s=a.end,u=a.strides,l=a.beginMask,c=a.endMask,d=a.ellipsisMask,h=a.newAxisMask,p=a.shrinkAxisMask,f=Sp.sliceInfo(i.shape,o,s,u,l,c,d,h,p),m=f.finalShapeSparse,g=f.finalShape,v=f.isIdentity,y=f.sliceDim0,b=f.isSimpleSlice,x=f.begin,A=f.end,w=f.strides;if(v)t=y5({inputs:{x:i},backend:n,attrs:{shape:g}});else if(y||b){Cl.assert(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var k=Sp.computeOutShape(x,A,w),S=w5({inputs:{x:i},backend:n,attrs:{begin:x,size:k}});t=y5({inputs:{x:S},backend:n,attrs:{shape:g}}),n.disposeData(S.dataId)}else{var C=n.makeOutput(m,"float32"),I=n.dataIdMap.get(i.dataId).id,E=new Uint8Array(new Int32Array(Cl.computeStrides(i.shape)).buffer),T=new Uint8Array(new Int32Array(x).buffer),N=new Uint8Array(new Int32Array(A).buffer),_=new Uint8Array(new Int32Array(w).buffer),M=new Uint8Array(new Int32Array(m).buffer),R=new Uint8Array(new Int32Array(Cl.computeStrides(m)).buffer),O=n.dataIdMap.get(C.dataId).id;H4(I,E,i.shape.length,T,N,_,M,R,m.length,O),t=y5({inputs:{x:C},backend:n,attrs:{shape:g}}),n.disposeData(C.dataId)}return t}},q4=e5(Yu);var Y4,K4={kernelName:Ou,backendName:"wasm",setupFunc:function(e){G4=e.wasm.cwrap(Ou,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,l=s,c=o,d=c5(o,a,t),h=d.transposed,p=d.axes,f=d.originalAxes,m=d.inputWasTransposed,g=p;m&&(w=t.dataIdMap.get(h.dataId).id)!==s&&(c=h,l=w,g=$b.getInnerMostAxes(g.length,c.shape.length)),$b.assertAxesAreInnerMostDims("sum",g,c.shape.length);var v=u($b.computeOutAndReduceShapes(c.shape,g),2),y=v[0],b=v[1],x=Cl.sizeFromShape(b),A=t.makeOutput(y,c.dtype);if(0!==Cl.sizeFromShape(c.shape)){var w=t.dataIdMap.get(A.dataId).id;G4(l,x,K2[A.dtype],w)}if(m&&t.disposeData(h.dataId),i){var k=$b.expandShapeToKeepDim(A.shape,f);A.shape=k}return A}},Z4=Q2(Ku),J4=Q2(Zu);var Q4,$4={kernelName:Ju,backendName:"wasm",setupFunc:function(e){Y4=e.wasm.cwrap(Ju,null,["number","array","number","array","number","number"])},kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=n.dataIdMap.get(a.dataId).id,o=r.reps,s=new Array(a.shape.length),u=0;u<s.length;u++)s[u]=a.shape[u]*o[u];var l=new Uint8Array(new Int32Array(a.shape).buffer),c=new Uint8Array(new Int32Array(s).buffer),d=n.makeOutput(s,a.dtype),h=n.dataIdMap.get(d.dataId).id;return Y4(i,l,a.shape.length,c,s.length,K2[d.dtype],h),d}};var e7,t7={kernelName:Qu,backendName:"wasm",setupFunc:function(e){Q4=e.wasm.cwrap(Qu,null,["number","array","number","number","number","bool","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=n.dataIdMap.get(a.dataId).id,u=new Uint8Array(new Int32Array(a.shape).buffer),l=a.shape.slice();l[l.length-1]=i;var c=n.makeOutput(l,a.dtype),d=n.dataIdMap.get(c.dataId).id,h=n.makeOutput(l,"int32"),p=n.dataIdMap.get(h.dataId).id;return Q4(s,u,a.shape.length,K2[a.dtype],i,o,d,p),[c,h]}};var n7={kernelName:$u,backendName:"wasm",setupFunc:function(e){e7=e.wasm.cwrap($u,null,["number","number","bool","number","number","number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=r.image,o=r.transforms,s=a.interpolation,l=a.fillMode,c=a.fillValue,d=a.outputShape,h=u(i.shape,4),p=h[0],f=h[1],m=h[2],g=h[3],v=u(null!=d?d:[f,m],2),y=v[0],b=v[1],x=[p,y,b,g],A=new Uint8Array(new Int32Array(Cl.computeStrides(i.shape)).buffer),w=n.makeOutput(x,i.dtype),k=n.dataIdMap.get(w.dataId).id,S=n.dataIdMap.get(i.dataId).id,C=n.dataIdMap.get(o.dataId).id,I="nearest"===s?1:2;switch(l){case"constant":default:t=1;break;case"reflect":t=2;break;case"wrap":t=3;break;case"nearest":t=4}return e7(S,C,o.shape[0]>1,p,y,b,g,m,f,A,i.shape.length-1,I,t,c,k),w}};var r7={kernelName:nl,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape[i],s=a.shape.length,u=new Array(s-1),l=0,c=0;c<s;c++)c!==i&&(u[l++]=a.shape[c]);var d=new Array(o),h=new Array(s).fill(0),p=a.shape.slice();p[i]=1;for(var f=0;f<d.length;f++)h[i]=f,d[f]=w5({inputs:{x:a},attrs:{begin:h,size:p},backend:n});return d.map((function(e){return{dataId:e.dataId,dtype:e.dtype,shape:u}}))}};for(var a7={kernelName:il,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(0),r}},i7=0,o7=[J2,$2,n5,r5,h5,f5,g5,v5,A5,S5,E5,T5,N5,R5,P5,D5,L5,z5,j5,H5,G5,q5,Y5,K5,Z5,J5,$5,n3,a3,i3,o3,u3,c3,h3,f3,g3,v3,y3,o5,x3,A3,w3,k3,S3,C3,I3,E3,N3,_3,R3,P3,D3,L3,W3,j3,V3,G3,q3,K3,Z3,J3,Q3,e4,n4,r4,i4,s4,u4,l4,c4,d4,x5,p4,m4,v4,y4,b4,A4,k4,C4,I4,k5,E4,N4,M4,O4,D4,L4,B4,W4,j4,V4,U4,X4,q4,K4,Z4,J4,$4,t7,n7,l5,r7,a7];i7<o7.length;i7++){bl(o7[i7])}var s7=Zi();s7.registerFlag("WASM_HAS_SIMD_SUPPORT",Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11])));case 1:case"end":return e.stop()}}),e)})))),s7.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s7.get("IS_NODE")){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.abrupt("return",((new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))));case 6:return e.prev=6,e.t0=e.catch(2),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[2,6]])}))));var u7=Ta(qa()),l7='"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",function(data){onmessage({data:data})});var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8"))},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"\n");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=((info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports});self.onmessage=(e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob==="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module).then(function(instance){Module=instance})}else if(e.data.cmd==="run"){Module["__performance_now_clock_drift"]=performance.now()-e.data.time;Module["__emscripten_thread_init"](e.data.threadInfoStruct,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInit();try{var result=Module["invokeEntryPoint"](e.data.start_routine,e.data.arg);if(Module["keepRuntimeAlive"]()){Module["PThread"].setExitStatus(result)}else{Module["__emscripten_thread_exit"](result)}}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processThreadQueue"){if(Module["_pthread_self"]()){Module["_emscripten_current_thread_process_queued_calls"]()}}else if(e.data.cmd==="processProxyingQueue"){if(Module["_pthread_self"]()){Module["_emscripten_proxy_execute_queue"](e.data.queue)}}else{err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){err("worker.js onmessage() captured an uncaught exception: "+ex);if(ex&&ex.stack)err(ex.stack);if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}});',c7=Ta(Ya()),d7=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this)).wasm=e,r.dataIdNextNumber=1,r.wasm.tfjs.initWithThreadsCount(S7),C7=r.wasm.tfjs.getThreadsCount(),r.dataIdMap=new Ka(jr(r),Lh()),r}return $r(n,[{key:"write",value:function(e,t,n){var r={id:this.dataIdNextNumber++};return this.move(r,e,t,n,1),r}},{key:"numDataIds",value:function(){return this.dataIdMap.numDataIds()}},{key:"time",value:function(){var e=Mr(Nr().mark((function e(t){var n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Cl.now(),e.abrupt("return",(t(),{kernelMs:Cl.now()-n}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"move",value:function(e,t,n,r,a){var i=this.dataIdNextNumber++;if("string"!==r){var o=Cl.sizeFromShape(n),s=o*Cl.bytesPerElement(r),u=this.wasm._malloc(s);this.dataIdMap.set(e,{id:i,memoryOffset:u,shape:n,dtype:r,refCount:a}),this.wasm.tfjs.registerTensor(i,o,u),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,s),u)}else{var l=t;this.dataIdMap.set(e,{id:i,stringBytes:l,shape:n,dtype:r,memoryOffset:null,refCount:a})}}},{key:"read",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e,t,n){var r=this.dataIdMap.get(e),a=r.memoryOffset,i=r.dtype,o=r.shape,s=r.stringBytes;if("string"===i)return null!=t&&0!==t||!(null==n||n>=s.length)?s.slice(t,n):s;t=t||0,n=n||Cl.sizeFromShape(o);var u=Cl.bytesPerElement(i);return function(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype ".concat(t))}}(this.wasm.HEAPU8.slice(a+t*u,a+n*u).buffer,i)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.dataIdMap.has(e)){var n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}},{key:"refCount",value:function(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}},{key:"incRef",value:function(e){var t=this.dataIdMap.get(e);null!=t&&t.refCount++}},{key:"floatPrecision",value:function(){return 32}},{key:"getMemoryOffset",value:function(e){return this.dataIdMap.get(e).memoryOffset}},{key:"dispose",value:function(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}},{key:"memory",value:function(){return{unreliable:!1}}},{key:"makeOutput",value:function(e,t,n){var r;if(null==n)r=this.write(null,e,t);else{var a=this.dataIdNextNumber++;r={id:a},this.dataIdMap.set(r,{id:a,memoryOffset:n,shape:e,dtype:t,refCount:1});var i=Cl.sizeFromShape(e);this.wasm.tfjs.registerTensor(a,i,n)}return{dataId:r,shape:e,dtype:t}}},{key:"typedArrayFromHeap",value:function(e){var t=e.shape,n=e.dtype,r=e.dataId,a=this.wasm.HEAPU8.buffer,i=this.dataIdMap.get(r).memoryOffset,o=Cl.sizeFromShape(t);switch(n){case"float32":return new Float32Array(a,i,o);case"int32":return new Int32Array(a,i,o);case"bool":return new Uint8Array(a,i,o);default:throw new Error("Unknown dtype ".concat(n))}}}]),n}(Za);function h7(e){return function(t,n){return Cl.fetch(e,{credentials:"same-origin"}).then((function(r){r.ok||t.env.a("failed to load wasm binary file at '".concat(e,"'")),r.arrayBuffer().then((function(e){WebAssembly.instantiate(e,t).then((function(e){n(e.instance,e.module)}))}))})),{}}}function p7(e,t,n){if(null!=v7)return v7;var r="tfjs-backend-wasm.wasm";return e&&t?r="tfjs-backend-wasm-threaded-simd.wasm":e&&(r="tfjs-backend-wasm-simd.wasm"),null!=b7&&null!=b7[r]?b7[r]:n+r}function f7(){return m7.apply(this,arguments)}function m7(){return m7=Mr(Nr().mark((function e(){var t,n,r,a;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Zi().getAsync("WASM_HAS_SIMD_SUPPORT"),Zi().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);case 2:return t=e.sent,n=u(t,2),r=n[0],a=n[1],e.abrupt("return",new Promise((function(e,t){var n={locateFile:function(e,t){if(e.endsWith(".worker.js")){var n=l7.replace(/\n/g,"\\n"),i=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(i)}return e.endsWith(".wasm")?p7(r,a,null!=y7?y7:t):t+e}};A7&&(n.instantiateWasm=h7(p7(r,a,null!=y7?y7:"")));var i,o=!1;n.onAbort=function(){o||x7||(x7=!0,t({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},a&&r&&null==v7?(n.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+u7.default.toString()],{type:"text/javascript"}),i=(0,u7.default)(n)):i=(0,c7.default)(n),i.then((function(t){o=!0,x7=!1;t.tfjs={init:t.cwrap("init",null,[]),initWithThreadsCount:t.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:t.cwrap("get_threads_count","number",[]),registerTensor:t.cwrap("register_tensor",null,["number","number","number"]),disposeData:t.cwrap("dispose_data",null,["number"]),dispose:t.cwrap("dispose",null,[])},e({wasm:t})}))})));case 7:case"end":return e.stop()}}),e)}))),m7.apply(this,arguments)}var g7=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],v7=null,y7=null,b7={},x7=!1,A7=!1;function w7(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Fh("setWasmPath has been deprecated in favor of setWasmPaths and will be removed in a future release."),x7)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`");v7=e,A7=t}function k7(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(x7)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)y7=e;else{b7=e;var n=g7.filter((function(e){return null==b7[e]}));if(n.length>0)throw new Error("There were no entries found for the following binaries: ".concat(n.join(","),". Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found."))}A7=t}var S7=-1,C7=-1;function I7(e){S7=e}function E7(){if(-1===C7)throw new Error("WASM backend not initialized.");return C7}var T7="0.0.0";Zh("wasm",Mr(Nr().mark((function e(){var t,n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f7();case 2:return t=e.sent,n=t.wasm,e.abrupt("return",new d7(n));case 5:case"end":return e.stop()}}),e)}))),2);var N7="3.18.0-20220602",_7={tfjs:N7,"tfjs-core":N7,"tfjs-data":N7,"tfjs-layers":N7,"tfjs-converter":N7,"tfjs-backend-cpu":N7,"tfjs-backend-webgl":N7,"tfjs-backend-wasm":N7},M7=function(e,t,n){var r=new RegExp("\\b"+t+" \\w+ (\\w+)","ig");e.replace(r,(function(e,t){return n[t]=0,e}))},R7=$r((function e(t,n,r){var a=this;Jr(this,e),ua(this,"uniform",{}),ua(this,"attribute",{}),ua(this,"gl"),ua(this,"id"),ua(this,"compile",(function(e,t){var n=a.gl.createShader(t);return n?(a.gl.shaderSource(n,e),a.gl.compileShader(n),a.gl.getShaderParameter(n,a.gl.COMPILE_STATUS)?n:(pa("filter: gl compile failed: ".concat(a.gl.getShaderInfoLog(n))),null)):(pa("filter: could not create shader"),null)})),this.gl=t;var i=this.compile(n,this.gl.VERTEX_SHADER),o=this.compile(r,this.gl.FRAGMENT_SHADER);if(this.id=this.gl.createProgram(),i&&o)if(this.id)if(this.gl.attachShader(this.id,i),this.gl.attachShader(this.id,o),this.gl.linkProgram(this.id),this.gl.getProgramParameter(this.id,this.gl.LINK_STATUS)){for(var s in this.gl.useProgram(this.id),M7(n,"attribute",this.attribute),this.attribute)this.attribute[s]=this.gl.getAttribLocation(this.id,s);for(var u in M7(n,"uniform",this.uniform),M7(r,"uniform",this.uniform),this.uniform)this.uniform[u]=this.gl.getUniformLocation(this.id,u)}else pa("filter: gl link failed: ".concat(this.gl.getProgramInfoLog(this.id)));else pa("filter: could not create webgl program")}));function O7(){var e=this,t=0,n=null,r=!1,a=-1,i=[null,null],o=[],s=null,u=null,l=V7(100,100),c={},d=1,h=l.getContext("webgl");if(h){this.gl=h;var p={colorMatrix:function(e){var t=new Float32Array(e);t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255;var n=g(1===t[18]&&0===t[3]&&0===t[8]&&0===t[13]&&0===t[15]&&0===t[16]&&0===t[17]&&0===t[19]?"\n  precision highp float;\n  varying vec2 vUv;\n  uniform sampler2D texture;\n  uniform float m[20];\n  void main(void) {\n    vec4 c = texture2D(texture, vUv);\n    gl_FragColor.r = m[0] * c.r + m[1] * c.g + m[2] * c.b + m[4];\n    gl_FragColor.g = m[5] * c.r + m[6] * c.g + m[7] * c.b + m[9];\n    gl_FragColor.b = m[10] * c.r + m[11] * c.g + m[12] * c.b + m[14];\n    gl_FragColor.a = c.a;\n  }\n":"\n  precision highp float;\n  varying vec2 vUv;\n  uniform sampler2D texture;\n  uniform float m[20];\n  void main(void) {\n    vec4 c = texture2D(texture, vUv);\n    gl_FragColor.r = m[0] * c.r + m[1] * c.g + m[2] * c.b + m[3] * c.a + m[4];\n    gl_FragColor.g = m[5] * c.r + m[6] * c.g + m[7] * c.b + m[8] * c.a + m[9];\n    gl_FragColor.b = m[10] * c.r + m[11] * c.g + m[12] * c.b + m[13] * c.a + m[14];\n    gl_FragColor.a = m[15] * c.r + m[16] * c.g + m[17] * c.b + m[18] * c.a + m[19];\n  }\n");n&&(h.uniform1fv(n.uniform.m,t),m())},brightness:function(e){var t=(e||0)+1;p.colorMatrix([t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0])},saturation:function(e){var t=2*(e||0)/3+1,n=-.5*(t-1);p.colorMatrix([t,n,n,0,0,n,t,n,0,0,n,n,t,0,0,0,0,0,1,0])},desaturate:function(){p.saturation(-1)},contrast:function(e){var t=(e||0)+1,n=-128*(t-1);p.colorMatrix([t,0,0,0,n,0,t,0,0,n,0,0,t,0,n,0,0,0,1,0])},negative:function(){p.contrast(-2)},hue:function(e){e=(e||0)/180*Math.PI;var t=Math.cos(e),n=Math.sin(e),r=.213,a=.715,i=.072;p.colorMatrix([r+.787*t+n*-r,a+t*-a+n*-a,i+t*-i+.928*n,0,0,r+t*-r+.143*n,a+t*(1-a)+.14*n,i+t*-i+-.283*n,0,0,r+t*-r+-.787*n,a+t*-a+n*a,i+.928*t+n*i,0,0,0,0,0,1,0])},desaturateLuminance:function(){p.colorMatrix([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0])},sepia:function(){p.colorMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0])},brownie:function(){p.colorMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0])},vintagePinhole:function(){p.colorMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0])},kodachrome:function(){p.colorMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0])},technicolor:function(){p.colorMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0])},polaroid:function(){p.colorMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0])},shiftToBGR:function(){p.colorMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0])},convolution:function(e){var t=new Float32Array(e),n=1/l.width,r=1/l.height,a=g("\n  precision highp float;\n  varying vec2 vUv;\n  uniform sampler2D texture;\n  uniform vec2 px;\n  uniform float m[9];\n  void main(void) {\n    vec4 c11 = texture2D(texture, vUv - px); // top left\n    vec4 c12 = texture2D(texture, vec2(vUv.x, vUv.y - px.y)); // top center\n    vec4 c13 = texture2D(texture, vec2(vUv.x + px.x, vUv.y - px.y)); // top right\n    vec4 c21 = texture2D(texture, vec2(vUv.x - px.x, vUv.y) ); // mid left\n    vec4 c22 = texture2D(texture, vUv); // mid center\n    vec4 c23 = texture2D(texture, vec2(vUv.x + px.x, vUv.y) ); // mid right\n    vec4 c31 = texture2D(texture, vec2(vUv.x - px.x, vUv.y + px.y) ); // bottom left\n    vec4 c32 = texture2D(texture, vec2(vUv.x, vUv.y + px.y) ); // bottom center\n    vec4 c33 = texture2D(texture, vUv + px ); // bottom right\n    gl_FragColor = \n    c11 * m[0] + c12 * m[1] + c22 * m[2] +\n    c21 * m[3] + c22 * m[4] + c23 * m[5] +\n    c31 * m[6] + c32 * m[7] + c33 * m[8];\n    gl_FragColor.a = c22.a;\n  }\n");a&&(h.uniform1fv(a.uniform.m,t),h.uniform2f(a.uniform.px,n,r),m())},detectEdges:function(){p.convolution.call(e,[0,1,0,1,-4,1,0,1,0])},sobelX:function(){p.convolution.call(e,[-1,0,1,-2,0,2,-1,0,1])},sobelY:function(){p.convolution.call(e,[-1,-2,-1,0,0,0,1,2,1])},sharpen:function(t){var n=t||1;p.convolution.call(e,[0,-1*n,0,-1*n,1+4*n,-1*n,0,-1*n,0])},emboss:function(t){var n=t||1;p.convolution.call(e,[-2*n,-1*n,0,-1*n,1,1*n,0,1*n,2*n])},blur:function(e){var t=e/7/l.width,n=e/7/l.height,r=g("\n  precision highp float;\n  varying vec2 vUv;\n  uniform sampler2D texture;\n  uniform vec2 px;\n  void main(void) {\n    gl_FragColor = vec4(0.0);\n    gl_FragColor += texture2D(texture, vUv + vec2(-7.0*px.x, -7.0*px.y))*0.0044299121055113265;\n    gl_FragColor += texture2D(texture, vUv + vec2(-6.0*px.x, -6.0*px.y))*0.00895781211794;\n    gl_FragColor += texture2D(texture, vUv + vec2(-5.0*px.x, -5.0*px.y))*0.0215963866053;\n    gl_FragColor += texture2D(texture, vUv + vec2(-4.0*px.x, -4.0*px.y))*0.0443683338718;\n    gl_FragColor += texture2D(texture, vUv + vec2(-3.0*px.x, -3.0*px.y))*0.0776744219933;\n    gl_FragColor += texture2D(texture, vUv + vec2(-2.0*px.x, -2.0*px.y))*0.115876621105;\n    gl_FragColor += texture2D(texture, vUv + vec2(-1.0*px.x, -1.0*px.y))*0.147308056121;\n    gl_FragColor += texture2D(texture, vUv                             )*0.159576912161;\n    gl_FragColor += texture2D(texture, vUv + vec2( 1.0*px.x,  1.0*px.y))*0.147308056121;\n    gl_FragColor += texture2D(texture, vUv + vec2( 2.0*px.x,  2.0*px.y))*0.115876621105;\n    gl_FragColor += texture2D(texture, vUv + vec2( 3.0*px.x,  3.0*px.y))*0.0776744219933;\n    gl_FragColor += texture2D(texture, vUv + vec2( 4.0*px.x,  4.0*px.y))*0.0443683338718;\n    gl_FragColor += texture2D(texture, vUv + vec2( 5.0*px.x,  5.0*px.y))*0.0215963866053;\n    gl_FragColor += texture2D(texture, vUv + vec2( 6.0*px.x,  6.0*px.y))*0.00895781211794;\n    gl_FragColor += texture2D(texture, vUv + vec2( 7.0*px.x,  7.0*px.y))*0.0044299121055113265;\n  }\n");r&&(h.uniform2f(r.uniform.px,0,n),m(d),h.uniform2f(r.uniform.px,t,0),m())},pixelate:function(e){var t=e/l.width,n=e/l.height,r=g("\n  precision highp float;\n  varying vec2 vUv;\n  uniform vec2 size;\n  uniform sampler2D texture;\n  vec2 pixelate(vec2 coord, vec2 size) {\n    return floor( coord / size ) * size;\n  }\n  void main(void) {\n    gl_FragColor = vec4(0.0);\n    vec2 coord = pixelate(vUv, size);\n    gl_FragColor += texture2D(texture, coord);\n  }\n");r&&(h.uniform2f(r.uniform.size,t,n),m())}};this.add=function(e){var t=Array.prototype.slice.call(arguments,1),n=p[e];o.push({func:n,args:t})},this.reset=function(){o=[]},this.get=function(){return o},this.apply=function(e){!function(e,t){if(e!==l.width||t!==l.height){if(l.width=e,l.height=t,!s){var n=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,-1,1,0,0,1,-1,1,1,1,1,1,0]);s=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,s),h.bufferData(h.ARRAY_BUFFER,n,h.STATIC_DRAW),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0)}h.viewport(0,0,l.width,l.height),i=[null,null]}}(e.width,e.height),t=0,n||(n=h.createTexture()),h.bindTexture(h.TEXTURE_2D,n),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,e);for(var a=0;a<o.length;a++){r=a===o.length-1;var u=o[a];u.func.apply(this,u.args||[])}return l},this.draw=function(e){return this.add("brightness",0),this.apply(e)}}else pa("filter: cannot get webgl context");function f(e){return i[e]=i[e]||function(e,t){var n=h.createFramebuffer();h.bindFramebuffer(h.FRAMEBUFFER,n);var r=h.createRenderbuffer();h.bindRenderbuffer(h.RENDERBUFFER,r);var a=h.createTexture();return h.bindTexture(h.TEXTURE_2D,a),h.texImage2D(h.TEXTURE_2D,0,h.RGBA,e,t,0,h.RGBA,h.UNSIGNED_BYTE,null),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,a,0),h.bindTexture(h.TEXTURE_2D,null),h.bindFramebuffer(h.FRAMEBUFFER,null),{fbo:n,texture:a}}(l.width,l.height),i[e]}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(u){var i=null,o=null,s=!1;i=0===t?n:f(a).texture||null,t++,!r||e&d?o=f(a=(a+1)%2).fbo||null:(o=null,s=t%2===0),h.bindTexture(h.TEXTURE_2D,i),h.bindFramebuffer(h.FRAMEBUFFER,o),h.uniform1f(u.uniform.flipY,s?-1:1),h.drawArrays(h.TRIANGLES,0,6)}}function g(e){if(c[e])return u=c[e],h.useProgram((u?u.id:null)||null),u;if(!(u=new R7(h,"\n  precision highp float;\n  attribute vec2 pos;\n  attribute vec2 uv;\n  varying vec2 vUv;\n  uniform float flipY;\n  void main(void) {\n    vUv = uv;\n    gl_Position = vec4(pos.x, pos.y*flipY, 0.0, 1.);\n  }\n",e)))return pa("filter: could not get webgl program"),null;var t=Float32Array.BYTES_PER_ELEMENT,n=4*t;return h.enableVertexAttribArray(u.attribute.pos),h.vertexAttribPointer(u.attribute.pos,2,h.FLOAT,!1,n,0*t),h.enableVertexAttribArray(u.attribute.uv),h.vertexAttribPointer(u.attribute.uv,2,h.FLOAT,!1,n,2*t),c[e]=u,u}}function P7(e){return F7.apply(this,arguments)}function F7(){return F7=Mr(Nr().mark((function e(t){var n,r,a,i,o,s,u,l,c,d,h,p;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=4===t.shape.length?Uv(t):t,r=jv(n,3,2),a=[jm(r[0]),jm(r[1]),jm(r[2])],i=[Wm(r[0]),Wm(r[1]),Wm(r[2])],e.next=6,Promise.all(i.map((function(e){return e.data()})));case 6:return o=e.sent,s=.99*Math.max(o[0][0],o[1][0],o[2][0]),u=[Cg(r[0],a[0]),Cg(r[1],a[1]),Cg(r[2],a[2])],l=[Cg(i[0],a[0]),Cg(i[1],a[1]),Cg(i[2],a[2])],c=[uf(s,l[0]),uf(s,l[1]),uf(s,l[2])],d=[lf(u[0],c[0]),lf(u[1],c[1]),lf(u[2],c[2])],h=Gv([d[0],d[1],d[2]],2),p=Bf(h,[1,n.shape[0],n.shape[1],3]),jh([].concat(ta(r),a,i,u,l,c,d,[h,n])),e.abrupt("return",p);case 16:case"end":return e.stop()}}),e)}))),F7.apply(this,arguments)}var D7,L7=3840,z7=null,B7=null,W7=null,j7={inputSum:0,cacheDiff:1,sumMethod:0,inputTensor:void 0};function V7(e,t){var n;if(Z7.browser)if(Z7.worker){if("undefined"===typeof OffscreenCanvas)throw new Error("canvas error: attempted to run in web worker but OffscreenCanvas is not supported");n=new OffscreenCanvas(e,t)}else{if("undefined"===typeof document)throw new Error("canvas error: attempted to run in browser but DOM is not defined");(n=document.createElement("canvas")).width=e,n.height=t}else"undefined"!==typeof Z7.Canvas?n=new Z7.Canvas(e,t):"undefined"!==typeof globalThis.Canvas&&(n=new globalThis.Canvas(e,t));return n}function H7(e,t){var n=t||V7(e.width,e.height);return n.getContext("2d").drawImage(e,0,0),n}function U7(e,t){return G7.apply(this,arguments)}function G7(){return G7=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,u,l,c,d,h,p,f,m,g,v,y,b,x,A,w=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!(w.length>2&&void 0!==w[2])||w[2],t){e.next=4;break}return n.debug&&pa("input error: input is missing"),e.abrupt("return",{tensor:null,canvas:null});case 4:if(t instanceof sc||"undefined"!==typeof Image&&t instanceof Image||"undefined"!==typeof Z7.Canvas&&t instanceof Z7.Canvas||"undefined"!==typeof globalThis.Canvas&&t instanceof globalThis.Canvas||"undefined"!==typeof ImageData&&t instanceof ImageData||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLMediaElement&&t instanceof HTMLMediaElement||"undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas){e.next=6;break}throw new Error("input error: type is not recognized");case 6:if(!(t instanceof sc)){e.next=19;break}if(a=null,!t.isDisposedInternal){e.next=10;break}throw new Error("input error: attempted to use tensor but it is disposed");case 10:if(t.shape){e.next=12;break}throw new Error("input error: attempted to use tensor without a shape");case 12:if(3===t.shape.length?3===t.shape[2]?a=Jm(t,0):4===t.shape[2]&&(i=Fv(t,[0,0,0],[-1,-1,3]),a=Jm(i,0),jh(i)):4===t.shape.length&&(3===t.shape[3]?a=nh(t):4===t.shape[3]&&(a=Dv(t,[0,0,0,0],[-1,-1,-1,3]))),null!=a&&4===a.shape.length&&1===a.shape[0]&&3===a.shape[3]){e.next=15;break}throw new Error("input error: attempted to use tensor with unrecognized shape: ".concat(t.shape));case 15:return"int32"===a.dtype&&(o=th(a,"float32"),jh(a),a=o),e.abrupt("return",{tensor:a,canvas:n.filter.return?B7:null});case 19:if(!("undefined"!==typeof t.readyState&&t.readyState<=2)){e.next=22;break}return n.debug&&pa("input stream is not ready"),e.abrupt("return",{tensor:null,canvas:z7});case 22:if(s=t.naturalWidth||t.videoWidth||t.width||t.shape&&t.shape[1]>0,u=t.naturalHeight||t.videoHeight||t.height||t.shape&&t.shape[2]>0,s&&u){e.next=27;break}return n.debug&&pa("cannot determine input dimensions"),e.abrupt("return",{tensor:null,canvas:z7});case 27:if(c=u,(l=s)>L7&&(l=L7,c=Math.trunc(l*u/s)),c>L7&&(c=L7,l=Math.trunc(c*s/u)),(n.filter.width||0)>0?l=n.filter.width:(n.filter.height||0)>0&&(l=s*((n.filter.height||0)/u)),(n.filter.height||0)>0?c=n.filter.height:(n.filter.width||0)>0&&(c=u*((n.filter.width||0)/s)),l&&c){e.next=35;break}throw new Error("input error: cannot determine dimension");case 35:if(z7&&(null==z7?void 0:z7.width)===l&&(null==z7?void 0:z7.height)===c||(z7=V7(l,c)),d=z7.getContext("2d"),"undefined"!==typeof ImageData&&t instanceof ImageData?d.putImageData(t,0,0):n.filter.flip&&"undefined"!==typeof d.translate?(d.translate(s,0),d.scale(-1,1),d.drawImage(t,0,0,s,u,0,0,null==z7?void 0:z7.width,null==z7?void 0:z7.height),d.setTransform(1,0,0,1,0,0)):d.drawImage(t,0,0,s,u,0,0,null==z7?void 0:z7.width,null==z7?void 0:z7.height),B7&&z7.width===B7.width&&(null==z7?void 0:z7.height)===(null==B7?void 0:B7.height)||(B7=V7(z7.width,z7.height)),n.filter.enabled&&Z7.webgl.supported?(D7||(D7=Z7.browser?new O7:null),Z7.filter=!!D7,D7&&D7.add?(D7.reset(),0!==n.filter.brightness&&D7.add("brightness",n.filter.brightness),0!==n.filter.contrast&&D7.add("contrast",n.filter.contrast),0!==n.filter.sharpness&&D7.add("sharpen",n.filter.sharpness),0!==n.filter.blur&&D7.add("blur",n.filter.blur),0!==n.filter.saturation&&D7.add("saturation",n.filter.saturation),0!==n.filter.hue&&D7.add("hue",n.filter.hue),n.filter.negative&&D7.add("negative"),n.filter.sepia&&D7.add("sepia"),n.filter.vintage&&D7.add("brownie"),n.filter.sepia&&D7.add("sepia"),n.filter.kodachrome&&D7.add("kodachrome"),n.filter.technicolor&&D7.add("technicolor"),n.filter.polaroid&&D7.add("polaroid"),0!==n.filter.pixelate&&D7.add("pixelate",n.filter.pixelate),B7=D7.get()>0?D7.apply(z7):D7.draw(z7)):(n.debug&&pa("input process error: cannot initialize filters"),Z7.webgl.supported=!1,n.filter.enabled=!1,H7(z7,B7))):(H7(z7,B7),D7&&(D7=null),Z7.filter=!!D7),r){e.next=42;break}return e.abrupt("return",{tensor:null,canvas:B7});case 42:if(B7){e.next=44;break}throw new Error("canvas error: cannot create output");case 44:if(p=3,"undefined"!==typeof ImageData&&t instanceof ImageData||t.data&&t.width&&t.height?Z7.browser&&lp?h=lp?lp.fromPixels(t):null:(p=t.data.length/t.height/t.width,f=new Uint8Array(t.data.buffer),h=Xc(f,[t.height,t.width,p],"int32")):(W7&&B7.width===W7.width&&B7.height===W7.height||(W7=V7(B7.width,B7.height)),lp&&Z7.browser?"webgl"===n.backend||"humangl"===n.backend||"webgpu"===n.backend?h=lp.fromPixels(B7):(W7=H7(B7),h=lp.fromPixels(W7)):(m=H7(B7),g=m.getContext("2d"),v=g.getImageData(0,0,l,c),p=v.data.length/l/c,y=new Uint8Array(v.data.buffer),h=Xc(y,[l,c,p]))),4===p&&(b=Fv(h,[0,0,0],[-1,-1,3]),jh(h),h=b),h){e.next=49;break}throw new Error("input error: cannot create tensor");case 49:if(x=th(h,"float32"),!n.filter.equalization){e.next=56;break}return e.next=53,P7(x);case 53:e.t0=e.sent,e.next=57;break;case 56:e.t0=Jm(x,0);case 57:return A=e.t0,jh([h,x]),e.abrupt("return",{tensor:A,canvas:n.filter.return?B7:null});case 60:case"end":return e.stop()}}),e)}))),G7.apply(this,arguments)}function X7(e,t){return q7.apply(this,arguments)}function q7(){return q7=Mr(Nr().mark((function e(t,n){var r,a,i,o;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!1,!(0===t.cacheSensitivity||!n.shape||4!==n.shape.length||n.shape[1]>2048||n.shape[2]>2048)){e.next=3;break}return e.abrupt("return",r);case 3:if(j7.inputTensor){e.next=7;break}j7.inputTensor=nh(n),e.next=23;break;case 7:if(j7.inputTensor.shape[1]===n.shape[1]&&j7.inputTensor.shape[2]===n.shape[2]){e.next=12;break}jh(j7.inputTensor),j7.inputTensor=nh(n),e.next=23;break;case 12:return(a={}).diff=Cg(n,j7.inputTensor),a.squared=lf(a.diff,a.diff),a.sum=Xm(a.squared),e.next=18,a.sum.data();case 18:i=e.sent,o=i[0]/(n.shape[1]||1)/(n.shape[2]||1)/255/3,jh([j7.inputTensor,a.diff,a.squared,a.sum]),j7.inputTensor=nh(n),r=o<=(t.cacheSensitivity||0);case 23:return e.abrupt("return",r);case 24:case"end":return e.stop()}}),e)}))),q7.apply(this,arguments)}function Y7(){return Y7=Mr(Nr().mark((function e(t,n,r){var a,i,o;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},n&&r&&4===n.shape.length&&n.shape.length===r.shape.length){e.next=4;break}return t.debug||pa("invalid input tensor or tensor shapes do not match:",n.shape,r.shape),e.abrupt("return",0);case 4:if(1===n.shape[0]&&1===r.shape[0]&&3===n.shape[3]&&3===r.shape[3]){e.next=7;break}return t.debug||pa("input tensors must be of shape [1, height, width, 3]:",n.shape,r.shape),e.abrupt("return",0);case 7:return a.input1=nh(n),a.input2=n.shape[1]!==r.shape[1]||n.shape[2]!==r.shape[2]?Db.resizeBilinear(r,[n.shape[1],n.shape[2]]):nh(r),a.diff=Cg(a.input1,a.input2),a.squared=lf(a.diff,a.diff),a.sum=Xm(a.squared),e.next=14,a.sum.data();case 14:return i=e.sent,o=i[0]/(n.shape[1]||1)/(n.shape[2]||1)/255/3,jh([a.input1,a.input2,a.diff,a.squared,a.sum]),e.abrupt("return",o);case 18:case"end":return e.stop()}}),e)}))),Y7.apply(this,arguments)}var K7=function(){function e(){if(Jr(this,e),ua(this,"browser"),ua(this,"node"),ua(this,"worker"),ua(this,"platform",""),ua(this,"agent",""),ua(this,"backends",[]),ua(this,"initial"),ua(this,"filter"),ua(this,"tfjs"),ua(this,"offscreen"),ua(this,"perfadd",!1),ua(this,"wasm",{supported:void 0,backend:void 0,simd:void 0,multithread:void 0}),ua(this,"webgl",{supported:void 0,backend:void 0,version:void 0,renderer:void 0}),ua(this,"webgpu",{supported:void 0,backend:void 0,adapter:void 0}),ua(this,"cpu",{model:void 0,flags:[]}),ua(this,"kernels",[]),ua(this,"Canvas"),ua(this,"Image"),ua(this,"ImageData"),this.browser="undefined"!==typeof navigator,this.node="undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node,this.tfjs={version:_7["tfjs-core"]},this.offscreen="undefined"!==typeof OffscreenCanvas,this.initial=!0,this.worker=this.browser&&this.offscreen?"undefined"!==typeof WorkerGlobalScope:void 0,"undefined"!==typeof navigator){var t=navigator.userAgent.match(/\(([^()]+)\)/g);if(t&&t[0]){var n=t[0].match(/\(([^()]+)\)/g);this.platform=n&&n[0]?n[0].replace(/\(|\)/g,""):"",this.agent=navigator.userAgent.replace(t[0],""),this.platform[1]&&(this.agent=this.agent.replace(t[1],"")),this.agent=this.agent.replace(/  /g," ")}}else"undefined"!==typeof process&&(this.platform="".concat(process.platform," ").concat(process.arch),this.agent="NodeJS ".concat(process.version))}return $r(e,[{key:"updateBackend",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.backends=Object.keys(Lh().registryFactory),this.wasm.supported="undefined"!==typeof WebAssembly,this.wasm.backend=this.backends.includes("wasm"),!this.wasm.supported||!this.wasm.backend||"wasm"!==Xh()){e.next=10;break}return e.next=6,Zi().getAsync("WASM_HAS_SIMD_SUPPORT");case 6:return this.wasm.simd=e.sent,e.next=9,Zi().getAsync("WASM_HAS_MULTITHREAD_SUPPORT");case 9:this.wasm.multithread=e.sent;case 10:if(t=V7(100,100),n=t?t.getContext("webgl2"):void 0,this.webgl.supported="undefined"!==typeof n,this.webgl.backend=this.backends.includes("webgl"),!this.webgl.supported||!this.webgl.backend||"webgl"!==Xh()&&"humangl"!==Xh()){e.next=24;break}if("undefined"===Jh().gpgpu){e.next=21;break}return e.next=18,Jh().getGPGPUContext().gl;case 18:e.t0=e.sent,e.next=22;break;case 21:e.t0=null;case 22:(r=e.t0)&&(this.webgl.version=r.getParameter(r.VERSION),this.webgl.renderer=r.getParameter(r.RENDERER));case 24:if(this.webgpu.supported=this.browser&&"undefined"!==typeof navigator.gpu,this.webgpu.backend=this.backends.includes("webgpu"),e.prev=26,!this.webgpu.supported){e.next=31;break}return e.next=30,navigator.gpu.requestAdapter();case 30:this.webgpu.adapter=e.sent.name;case 31:e.next=36;break;case 33:e.prev=33,e.t1=e.catch(26),this.webgpu.supported=!1;case 36:try{this.kernels=yl(Xh()).map((function(e){return e.kernelName.toLowerCase()}))}catch(QIe){}case 37:case"end":return e.stop()}}),e,this,[[26,33]])})));return function(){return e.apply(this,arguments)}}()},{key:"updateCPU",value:function(){var e=Mr(Nr().mark((function e(){var t;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={model:"",flags:[]},this.node&&this.platform.startsWith("linux"),this.cpu?this.cpu=t:Object.defineProperty(this,"cpu",{value:t});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Z7=new K7,J7={cacheModels:!1,verbose:!0,debug:!1,modelBasePath:""};function Q7(e,t){return $7.apply(this,arguments)}function $7(){return($7=Mr(Nr().mark((function e(t,n){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J7.debug&&pa("load model fetch:",t,n),e.abrupt("return",fetch(t,n));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function e6(e){return t6.apply(this,arguments)}function t6(){return(t6=Mr(Nr().mark((function e(t){var n,r,a,i,o,s,u,l,c,d;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=fa(J7.modelBasePath,t||"")).toLowerCase().endsWith(".json")||(n+=".json"),r=n.split("/"),a="indexeddb://"+r[r.length-1].replace(".json",""),e.next=6,ah.listModels();case 6:return i=e.sent,o=J7.cacheModels&&Object.keys(i).includes(a),s="undefined"===typeof fetch?{}:{fetchFunc:function(e,t){return Q7(e,t)}},u=new fO(o?a:n,s),l=!1,e.prev=11,u.findIOHandler(),J7.debug&&pa("model load handler:",u.handler),e.next=16,u.handler.load();case 16:c=e.sent,u.loadSync(c),J7.verbose&&pa("load model:",u.modelUrl),l=!0,e.next=25;break;case 22:e.prev=22,e.t0=e.catch(11),pa("error loading model:",n,e.t0);case 25:if(!l||!J7.cacheModels||o){e.next=36;break}return e.prev=26,e.next=29,u.save(a);case 29:d=e.sent,pa("model saved:",a,d),e.next=36;break;case 33:e.prev=33,e.t1=e.catch(26),pa("error saving model:",n,e.t1);case 36:return e.abrupt("return",u);case 37:case"end":return e.stop()}}),e,null,[[11,22],[26,33]])})))).apply(this,arguments)}var n6,r6="2.8.1";sa({},{Models:function(){return Wre},load:function(){return Vre},reset:function(){return jre},validate:function(){return Ure}});var a6=[],i6=["white","black","asian","indian","other"],o6=[15,23,28,35.5,45.5,55.5,65],s6=0,u6=0,l6=Number.MAX_SAFE_INTEGER;function c6(e){return d6.apply(this,arguments)}function d6(){return(d6=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z7.initial&&(n6=null),n6){e.next=7;break}return e.next=4,e6(t.face.gear);case 4:n6=e.sent,e.next=8;break;case 7:t.debug&&pa("cached model:",n6.modelUrl);case 8:return e.abrupt("return",n6);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h6(e,t,n,r){return p6.apply(this,arguments)}function p6(){return p6=Mr(Nr().mark((function e(t,n,r,a){var i,o,s,l;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n6){e.next=2;break}return e.abrupt("return",{age:0,gender:"unknown",genderScore:0,race:[]});case 2:if(s=l6<((null==(i=n.face.gear)?void 0:i.skipFrames)||0),l=((null==(o=n.face.gear)?void 0:o.skipTime)||0)>ma()-u6,!(n.skipAllowed&&l&&s&&s6===a&&a6[r])){e.next=7;break}return l6++,e.abrupt("return",a6[r]);case 7:return l6=0,e.abrupt("return",new Promise(function(){var e=Mr(Nr().mark((function e(i){var o,s,l,c,d,h,p,f,m,g,v,y,b,x;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n6?void 0:n6.inputs[0].shape){e.next=2;break}return e.abrupt("return");case 2:return c=[[0,.1,.9,.9]],(l={}).resize=Db.cropAndResize(t,c,[0],[n6.inputs[0].shape[2],n6.inputs[0].shape[1]]),d={age:0,gender:"unknown",genderScore:0,race:[]},(null==(o=n.face.gear)?void 0:o.enabled)&&(h=n6.execute(l.resize,["age_output","gender_output","race_output"]),p=u(h,3),l.age=p[0],l.gender=p[1],l.race=p[2]),e.next=9,l.gender.data();case 9:return f=e.sent,d.gender=f[0]>f[1]?"male":"female",d.genderScore=Math.round(100*(f[0]>f[1]?f[0]:f[1]))/100,e.next=14,l.race.data();case 14:for(m=e.sent,g=0;g<m.length;g++)m[g]>((null==(s=n.face.gear)?void 0:s.minConfidence)||.2)&&d.race.push({score:Math.round(100*m[g])/100,race:i6[g]});return d.race.sort((function(e,t){return t.score-e.score})),e.t0=Array,e.next=20,l.age.data();case 20:for(e.t1=e.sent,v=e.t0.from.call(e.t0,e.t1),y=v.map((function(e,t){return[o6[t],e]})).sort((function(e,t){return t[1]-e[1]})),b=y[0][0],x=1;x<y.length;x++)b+=y[x][1]*(y[x][0]-b);d.age=Math.round(10*b)/10,Object.keys(l).forEach((function(e){return jh(l[e])})),a6[r]=d,s6=a,u6=ma(),i(d);case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),p6.apply(this,arguments)}var f6,m6={tf255:255,tf1:1,tf2:2,tf05:.5,tf127:127.5,rgb:[.2989,.587,.114]};function g6(){m6.tf255=Hm(255,"float32"),m6.tf1=Hm(1,"float32"),m6.tf2=Hm(2,"float32"),m6.tf05=Hm(.5,"float32"),m6.tf127=Hm(127.5,"float32"),m6.rgb=Kv([.2989,.587,.114],"float32")}var v6,y6=[],b6=0,x6=0,A6=Number.MAX_SAFE_INTEGER;function w6(e){return k6.apply(this,arguments)}function k6(){return(k6=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z7.initial&&(f6=null),f6){e.next=7;break}return e.next=4,e6(t.face.ssrnet.modelPathAge);case 4:f6=e.sent,e.next=8;break;case 7:t.debug&&pa("cached model:",f6.modelUrl);case 8:return e.abrupt("return",f6);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S6(e,t,n,r){return C6.apply(this,arguments)}function C6(){return C6=Mr(Nr().mark((function e(t,n,r,a){var i,o,s,u,l,c;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f6){e.next=2;break}return e.abrupt("return",{age:0});case 2:if(l=A6<((null==(i=n.face.ssrnet)?void 0:i.skipFrames)||0),c=((null==(o=n.face.ssrnet)?void 0:o.skipTime)||0)>ma()-x6,!(n.skipAllowed&&l&&c&&b6===a&&(null==(s=y6[r])?void 0:s.age)&&(null==(u=y6[r])?void 0:u.age)>0)){e.next=7;break}return A6++,e.abrupt("return",y6[r]);case 7:return A6=0,e.abrupt("return",new Promise(function(){var e=Mr(Nr().mark((function e(i){var o,s,u;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null==f6?void 0:f6.inputs)&&f6.inputs[0]&&f6.inputs[0].shape){e.next=2;break}return e.abrupt("return");case 2:if((o={}).resize=Db.resizeBilinear(t,[f6.inputs[0].shape[2],f6.inputs[0].shape[1]],!1),o.enhance=lf(o.resize,m6.tf255),s={age:0},n.face.ssrnet.enabled&&(o.age=f6.execute(o.enhance)),!o.age){e.next=12;break}return e.next=10,o.age.data();case 10:u=e.sent,s.age=Math.trunc(10*u[0])/10;case 12:Object.keys(o).forEach((function(e){return jh(o[e])})),y6[r]=s,b6=a,x6=ma(),i(s);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),C6.apply(this,arguments)}var I6,E6=[],T6=0,N6=0,_6=Number.MAX_SAFE_INTEGER,M6=[.2989,.587,.114];function R6(e){return O6.apply(this,arguments)}function O6(){return(O6=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z7.initial&&(v6=null),v6){e.next=7;break}return e.next=4,e6(t.face.ssrnet.modelPathGender);case 4:v6=e.sent,e.next=8;break;case 7:t.debug&&pa("cached model:",v6.modelUrl);case 8:return e.abrupt("return",v6);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P6(e,t,n,r){return F6.apply(this,arguments)}function F6(){return F6=Mr(Nr().mark((function e(t,n,r,a){var i,o,s,l,c,d;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v6){e.next=2;break}return e.abrupt("return",{gender:"unknown",genderScore:0});case 2:if(c=_6<((null==(i=n.face.ssrnet)?void 0:i.skipFrames)||0),d=((null==(o=n.face.ssrnet)?void 0:o.skipTime)||0)>ma()-N6,!(n.skipAllowed&&c&&d&&T6===a&&(null==(s=E6[r])?void 0:s.gender)&&(null==(l=E6[r])?void 0:l.genderScore)>0)){e.next=7;break}return _6++,e.abrupt("return",E6[r]);case 7:return _6=0,e.abrupt("return",new Promise(function(){var e=Mr(Nr().mark((function e(i){var o,s,l;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==v6?void 0:v6.inputs[0].shape){e.next=2;break}return e.abrupt("return");case 2:return(o={}).resize=Db.resizeBilinear(t,[v6.inputs[0].shape[2],v6.inputs[0].shape[1]],!1),o.enhance=Wh((function(){var e=u(jv(o.resize,3,3),3),t=e[0],n=e[1],r=e[2],a=lf(t,M6[0]),i=lf(n,M6[1]),s=lf(r,M6[2]),l=pf([a,i,s]);return lf(Cg(l,m6.tf05),2)})),s={gender:"unknown",genderScore:0},n.face.ssrnet.enabled&&(o.gender=v6.execute(o.enhance)),e.next=9,o.gender.data();case 9:l=e.sent,s.gender=l[0]>l[1]?"female":"male",s.genderScore=l[0]>l[1]?Math.trunc(100*l[0])/100:Math.trunc(100*l[1])/100,Object.keys(o).forEach((function(e){return jh(o[e])})),E6[r]=s,T6=a,N6=ma(),i(s);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),F6.apply(this,arguments)}var D6=[],L6=Number.MAX_SAFE_INTEGER,z6=0,B6=0;function W6(e){return j6.apply(this,arguments)}function j6(){return(j6=Mr(Nr().mark((function e(t){var n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z7.initial&&(I6=null),I6){e.next=7;break}return e.next=4,e6(null==(n=t.face.antispoof)?void 0:n.modelPath);case 4:I6=e.sent,e.next=8;break;case 7:t.debug&&pa("cached model:",I6.modelUrl);case 8:return e.abrupt("return",I6);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V6(e,t,n,r){return H6.apply(this,arguments)}function H6(){return H6=Mr(Nr().mark((function e(t,n,r,a){var i,o,s,u;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I6){e.next=2;break}return e.abrupt("return",0);case 2:if(s=((null==(i=n.face.antispoof)?void 0:i.skipTime)||0)>ma()-B6,u=L6<((null==(o=n.face.antispoof)?void 0:o.skipFrames)||0),!(n.skipAllowed&&s&&u&&z6===a&&D6[r])){e.next=7;break}return L6++,e.abrupt("return",D6[r]);case 7:return L6=0,e.abrupt("return",new Promise(function(){var e=Mr(Nr().mark((function e(n){var i,o,s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Db.resizeBilinear(t,[(null==I6?void 0:I6.inputs[0].shape)?I6.inputs[0].shape[2]:0,(null==I6?void 0:I6.inputs[0].shape)?I6.inputs[0].shape[1]:0],!1),o=null==I6?void 0:I6.execute(i),e.next=4,o.data();case 4:s=e.sent[0],D6[r]=Math.round(100*s)/100,z6=a,B6=ma(),jh([i,o]),n(D6[r]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),H6.apply(this,arguments)}var U6={silhouette:[10,338,297,332,284,251,389,356,454,323,361,288,397,365,379,378,400,377,152,148,176,149,150,136,172,58,132,93,234,127,162,21,54,103,67,109],lipsUpperOuter:[185,40,39,37,0,267,269,270,409],lipsLowerOuter:[61,146,91,181,84,17,314,405,321,375,291],lipsUpperInner:[191,80,81,82,13,312,311,310,415],lipsLowerInner:[78,95,88,178,87,14,317,402,318,324,308],lipsLowerSemiOuter:[76,77,90,180,85,16,315,404,320,307,306],lipsUpperSemiOuter:[184,74,73,72,11,302,303,304,408],lipsLowerSemiInner:[62,96,89,179,86,15,316,403,319,325,292],lipsUpperSemiInner:[183,42,41,38,12,268,271,272,407],rightEyeUpper0:[246,161,160,159,158,157,173],rightEyeLower0:[33,7,163,144,145,153,154,155,133],rightEyeUpper1:[247,30,29,27,28,56,190],rightEyeLower1:[130,25,110,24,23,22,26,112,243],rightEyeUpper2:[113,225,224,223,222,221,189],rightEyeLower2:[226,31,228,229,230,231,232,233,244],rightEyeLower3:[143,111,117,118,119,120,121,128,245],rightEyebrowUpper:[156,70,63,105,66,107,55,193],rightEyebrowLower:[35,124,46,53,52,65],rightEyeIris:[473,474,475,476,477],leftEyeUpper0:[466,388,387,386,385,384,398],leftEyeLower0:[263,249,390,373,374,380,381,382,362],leftEyeUpper1:[467,260,259,257,258,286,414],leftEyeLower1:[359,255,339,254,253,252,256,341,463],leftEyeUpper2:[342,445,444,443,442,441,413],leftEyeLower2:[446,261,448,449,450,451,452,453,464],leftEyeLower3:[372,340,346,347,348,349,350,357,465],leftEyebrowUpper:[383,300,293,334,296,336,285,417],leftEyebrowLower:[265,353,276,283,282,295],leftEyeIris:[468,469,470,471,472],midwayBetweenEyes:[168],noseTip:[1],noseBottom:[2],noseRightCorner:[98],noseLeftCorner:[327],rightCheek:[205],leftCheek:[425]},G6={count:468,mouth:13,symmetryLine:[13,U6.midwayBetweenEyes[0]]},X6={leftEye:0,rightEye:1,nose:2,mouth:3,leftEar:4,rightEar:5,symmetryLine:[3,2]},q6=[{key:"EyeUpper0",indices:[9,10,11,12,13,14,15]},{key:"EyeUpper1",indices:[25,26,27,28,29,30,31]},{key:"EyeUpper2",indices:[41,42,43,44,45,46,47]},{key:"EyeLower0",indices:[0,1,2,3,4,5,6,7,8]},{key:"EyeLower1",indices:[16,17,18,19,20,21,22,23,24]},{key:"EyeLower2",indices:[32,33,34,35,36,37,38,39,40]},{key:"EyeLower3",indices:[54,55,56,57,58,59,60,61,62]},{key:"EyebrowUpper",indices:[63,64,65,66,67,68,69,70]},{key:"EyebrowLower",indices:[48,49,50,51,52,53]}],Y6=[[.499976992607117,.652534008026123],[.500025987625122,.547487020492554],[.499974012374878,.602371990680695],[.482113003730774,.471979022026062],[.500150978565216,.527155995368958],[.499909996986389,.498252987861633],[.499523013830185,.40106201171875],[.289712011814117,.380764007568359],[.499954998493195,.312398016452789],[.499987006187439,.269918978214264],[.500023007392883,.107050001621246],[.500023007392883,.666234016418457],[.5000159740448,.679224014282227],[.500023007392883,.692348003387451],[.499976992607117,.695277988910675],[.499976992607117,.70593398809433],[.499976992607117,.719385027885437],[.499976992607117,.737019002437592],[.499967992305756,.781370997428894],[.499816000461578,.562981009483337],[.473773002624512,.573909997940063],[.104906998574734,.254140973091125],[.365929991006851,.409575998783112],[.338757991790771,.41302502155304],[.311120003461838,.409460008144379],[.274657994508743,.389131009578705],[.393361985683441,.403706014156342],[.345234006643295,.344011008739471],[.370094001293182,.346076011657715],[.319321990013123,.347265005111694],[.297903001308441,.353591024875641],[.24779200553894,.410809993743896],[.396889001131058,.842755019664764],[.280097991228104,.375599980354309],[.106310002505779,.399955987930298],[.2099249958992,.391353011131287],[.355807989835739,.534406006336212],[.471751004457474,.65040397644043],[.474155008792877,.680191993713379],[.439785003662109,.657229006290436],[.414617002010345,.66654098033905],[.450374007225037,.680860996246338],[.428770989179611,.682690978050232],[.374971002340317,.727805018424988],[.486716985702515,.547628998756409],[.485300987958908,.527395009994507],[.257764995098114,.314490020275116],[.401223003864288,.455172002315521],[.429818987846375,.548614978790283],[.421351999044418,.533740997314453],[.276895999908447,.532056987285614],[.483370006084442,.499586999416351],[.33721199631691,.282882988452911],[.296391993761063,.293242990970612],[.169294998049736,.193813979625702],[.447580009698868,.302609980106354],[.392390012741089,.353887975215912],[.354490011930466,.696784019470215],[.067304998636246,.730105042457581],[.442739009857178,.572826027870178],[.457098007202148,.584792017936707],[.381974011659622,.694710969924927],[.392388999462128,.694203019142151],[.277076005935669,.271932005882263],[.422551989555359,.563233017921448],[.385919004678726,.281364023685455],[.383103013038635,.255840003490448],[.331431001424789,.119714021682739],[.229923993349075,.232002973556519],[.364500999450684,.189113974571228],[.229622006416321,.299540996551514],[.173287004232407,.278747975826263],[.472878992557526,.666198015213013],[.446828007698059,.668527007102966],[.422762006521225,.673889994621277],[.445307999849319,.580065965652466],[.388103008270264,.693961024284363],[.403039008378983,.706539988517761],[.403629004955292,.693953037261963],[.460041999816895,.557139039039612],[.431158006191254,.692366003990173],[.452181994915009,.692366003990173],[.475387006998062,.692366003990173],[.465828001499176,.779190003871918],[.472328990697861,.736225962638855],[.473087012767792,.717857003211975],[.473122000694275,.704625964164734],[.473033010959625,.695277988910675],[.427942007780075,.695277988910675],[.426479011774063,.703539967536926],[.423162013292313,.711845993995667],[.4183090031147,.720062971115112],[.390094995498657,.639572978019714],[.013953999616206,.560034036636353],[.499913990497589,.58014702796936],[.413199990987778,.69539999961853],[.409626007080078,.701822996139526],[.468080013990402,.601534962654114],[.422728985548019,.585985004901886],[.463079988956451,.593783974647522],[.37211999297142,.47341400384903],[.334562003612518,.496073007583618],[.411671012639999,.546965003013611],[.242175996303558,.14767599105835],[.290776997804642,.201445996761322],[.327338010072708,.256527006626129],[.399509996175766,.748921036720276],[.441727995872498,.261676013469696],[.429764986038208,.187834024429321],[.412198007106781,.108901023864746],[.288955003023148,.398952007293701],[.218936994671822,.435410976409912],[.41278201341629,.398970007896423],[.257135003805161,.355440020561218],[.427684992551804,.437960982322693],[.448339998722076,.536936044692993],[.178560003638268,.45755398273468],[.247308000922203,.457193970680237],[.286267012357712,.467674970626831],[.332827985286713,.460712015628815],[.368755996227264,.447206974029541],[.398963987827301,.432654976844788],[.476410001516342,.405806005001068],[.189241006970406,.523923993110657],[.228962004184723,.348950982093811],[.490725994110107,.562400996685028],[.404670000076294,.485132992267609],[.019469000399113,.401564002037048],[.426243007183075,.420431017875671],[.396993011236191,.548797011375427],[.266469985246658,.376977026462555],[.439121007919312,.51895797252655],[.032313998788595,.644356966018677],[.419054001569748,.387154996395111],[.462783008813858,.505746960639954],[.238978996872902,.779744982719421],[.198220998048782,.831938028335571],[.107550002634525,.540755033493042],[.183610007166862,.740257024765015],[.134409993886948,.333683013916016],[.385764002799988,.883153975009918],[.490967005491257,.579378008842468],[.382384985685349,.508572995662689],[.174399003386497,.397670984268188],[.318785011768341,.39623498916626],[.343364000320435,.400596976280212],[.396100014448166,.710216999053955],[.187885001301765,.588537991046906],[.430987000465393,.944064974784851],[.318993002176285,.898285031318665],[.266247987747192,.869701027870178],[.500023007392883,.190576016902924],[.499976992607117,.954452991485596],[.366169989109039,.398822009563446],[.393207013607025,.39553701877594],[.410373002290726,.391080021858215],[.194993004202843,.342101991176605],[.388664990663528,.362284004688263],[.365961998701096,.355970978736877],[.343364000320435,.355356991291046],[.318785011768341,.35834002494812],[.301414996385574,.363156020641327],[.058132998645306,.319076001644135],[.301414996385574,.387449026107788],[.499987989664078,.618434011936188],[.415838003158569,.624195992946625],[.445681989192963,.566076993942261],[.465844005346298,.620640993118286],[.49992299079895,.351523995399475],[.288718998432159,.819945991039276],[.335278987884521,.852819979190826],[.440512001514435,.902418971061707],[.128294005990028,.791940987110138],[.408771991729736,.373893976211548],[.455606997013092,.451801002025604],[.499877005815506,.908990025520325],[.375436991453171,.924192011356354],[.11421000212431,.615022003650665],[.448662012815475,.695277988910675],[.4480200111866,.704632043838501],[.447111994028091,.715808033943176],[.444831997156143,.730794012546539],[.430011987686157,.766808986663818],[.406787008047104,.685672998428345],[.400738000869751,.681069016456604],[.392399996519089,.677703022956848],[.367855995893478,.663918972015381],[.247923001646996,.601333022117615],[.452769994735718,.420849978923798],[.43639200925827,.359887003898621],[.416164010763168,.368713974952698],[.413385987281799,.692366003990173],[.228018000721931,.683571994304657],[.468268007040024,.352671027183533],[.411361992359161,.804327011108398],[.499989002943039,.469825029373169],[.479153990745544,.442654013633728],[.499974012374878,.439637005329132],[.432112008333206,.493588984012604],[.499886006116867,.866917014122009],[.49991300702095,.821729004383087],[.456548988819122,.819200992584229],[.344549000263214,.745438992977142],[.37890899181366,.574010014533997],[.374292999505997,.780184984207153],[.319687992334366,.570737957954407],[.357154995203018,.604269981384277],[.295284003019333,.621580958366394],[.447750002145767,.862477004528046],[.410986006259918,.508723020553589],[.31395098567009,.775308012962341],[.354128003120422,.812552988529205],[.324548006057739,.703992962837219],[.189096003770828,.646299958229065],[.279776990413666,.71465802192688],[.1338230073452,.682700991630554],[.336768001317978,.644733011722565],[.429883986711502,.466521978378296],[.455527991056442,.548622965812683],[.437114000320435,.558896005153656],[.467287987470627,.529924988746643],[.414712011814117,.335219979286194],[.37704598903656,.322777986526489],[.344107985496521,.320150971412659],[.312875986099243,.32233202457428],[.283526003360748,.333190023899078],[.241245999932289,.382785975933075],[.102986000478268,.468762993812561],[.267612010240555,.424560010433197],[.297879010438919,.433175981044769],[.333433985710144,.433878004550934],[.366427004337311,.426115989685059],[.396012008190155,.416696012020111],[.420121014118195,.41022801399231],[.007561000064015,.480777025222778],[.432949006557465,.569517970085144],[.458638995885849,.479089021682739],[.473466008901596,.545744001865387],[.476087987422943,.563830018043518],[.468472003936768,.555056989192963],[.433990985155106,.582361996173859],[.483518004417419,.562983989715576],[.482482999563217,.57784903049469],[.42645001411438,.389798998832703],[.438998997211456,.39649498462677],[.450067013502121,.400434017181396],[.289712011814117,.368252992630005],[.276670008897781,.363372981548309],[.517862021923065,.471948027610779],[.710287988185883,.380764007568359],[.526226997375488,.573909997940063],[.895093023777008,.254140973091125],[.634069979190826,.409575998783112],[.661242008209229,.41302502155304],[.688880026340485,.409460008144379],[.725341975688934,.389131009578705],[.606630027294159,.40370500087738],[.654766023159027,.344011008739471],[.629905998706818,.346076011657715],[.680678009986877,.347265005111694],[.702096998691559,.353591024875641],[.75221198797226,.410804986953735],[.602918028831482,.842862963676453],[.719901978969574,.375599980354309],[.893692970275879,.399959981441498],[.790081977844238,.391354024410248],[.643998026847839,.534487962722778],[.528249025344849,.65040397644043],[.525849997997284,.680191040039062],[.560214996337891,.657229006290436],[.585384011268616,.66654098033905],[.549625992774963,.680860996246338],[.57122802734375,.682691991329193],[.624852001667023,.72809898853302],[.513050019741058,.547281980514526],[.51509702205658,.527251958847046],[.742246985435486,.314507007598877],[.598631024360657,.454979002475739],[.570338010787964,.548575043678284],[.578631997108459,.533622980117798],[.723087012767792,.532054007053375],[.516445994377136,.499638974666595],[.662801027297974,.282917976379395],[.70362401008606,.293271005153656],[.830704987049103,.193813979625702],[.552385985851288,.302568018436432],[.607609987258911,.353887975215912],[.645429015159607,.696707010269165],[.932694971561432,.730105042457581],[.557260990142822,.572826027870178],[.542901992797852,.584792017936707],[.6180260181427,.694710969924927],[.607590973377228,.694203019142151],[.722943007946014,.271963000297546],[.577413976192474,.563166975975037],[.614082992076874,.281386971473694],[.616907000541687,.255886018276215],[.668509006500244,.119913995265961],[.770092010498047,.232020974159241],[.635536015033722,.189248979091644],[.77039098739624,.299556016921997],[.826722025871277,.278755009174347],[.527121007442474,.666198015213013],[.553171992301941,.668527007102966],[.577238023281097,.673889994621277],[.554691970348358,.580065965652466],[.611896991729736,.693961024284363],[.59696102142334,.706539988517761],[.596370995044708,.693953037261963],[.539958000183105,.557139039039612],[.568841993808746,.692366003990173],[.547818005084991,.692366003990173],[.52461302280426,.692366003990173],[.534089982509613,.779141008853912],[.527670979499817,.736225962638855],[.526912987232208,.717857003211975],[.526877999305725,.704625964164734],[.526966989040375,.695277988910675],[.572058022022247,.695277988910675],[.573521018028259,.703539967536926],[.57683801651001,.711845993995667],[.581691026687622,.720062971115112],[.609944999217987,.639909982681274],[.986046016216278,.560034036636353],[.5867999792099,.69539999961853],[.590372025966644,.701822996139526],[.531915009021759,.601536989212036],[.577268004417419,.585934996604919],[.536915004253387,.593786001205444],[.627542972564697,.473352015018463],[.665585994720459,.495950996875763],[.588353991508484,.546862006187439],[.757824003696442,.14767599105835],[.709249973297119,.201507985591888],[.672684013843536,.256581008434296],[.600408971309662,.74900496006012],[.55826598405838,.261672019958496],[.570303976535797,.187870979309082],[.588165998458862,.109044015407562],[.711045026779175,.398952007293701],[.781069993972778,.435405015945435],[.587247014045715,.398931980133057],[.742869973182678,.355445981025696],[.572156012058258,.437651991844177],[.55186802148819,.536570012569427],[.821442008018494,.457556009292603],[.752701997756958,.457181990146637],[.71375697851181,.467626988887787],[.66711300611496,.460672974586487],[.631101012229919,.447153985500336],[.6008620262146,.432473003864288],[.523481011390686,.405627012252808],[.810747981071472,.523926019668579],[.771045982837677,.348959028720856],[.509127020835876,.562718033790588],[.595292985439301,.485023975372314],[.980530977249146,.401564002037048],[.573499977588654,.420000016689301],[.602994978427887,.548687994480133],[.733529984951019,.376977026462555],[.560611009597778,.519016981124878],[.967685997486115,.644356966018677],[.580985009670258,.387160003185272],[.537728011608124,.505385041236877],[.760966002941132,.779752969741821],[.801778972148895,.831938028335571],[.892440974712372,.54076099395752],[.816350996494293,.740260004997253],[.865594983100891,.333687007427216],[.614073991775513,.883246004581451],[.508952975273132,.579437971115112],[.617941975593567,.508316040039062],[.825608015060425,.397674977779388],[.681214988231659,.39623498916626],[.656635999679565,.400596976280212],[.603900015354156,.710216999053955],[.81208598613739,.588539004325867],[.56801301240921,.944564998149872],[.681007981300354,.898285031318665],[.733752012252808,.869701027870178],[.633830010890961,.398822009563446],[.606792986392975,.39553701877594],[.589659988880157,.391062021255493],[.805015981197357,.342108011245728],[.611334979534149,.362284004688263],[.634037971496582,.355970978736877],[.656635999679565,.355356991291046],[.681214988231659,.35834002494812],[.698584973812103,.363156020641327],[.941866993904114,.319076001644135],[.698584973812103,.387449026107788],[.584177017211914,.624107003211975],[.554318010807037,.566076993942261],[.534153997898102,.62064003944397],[.711217999458313,.819975018501282],[.664629995822906,.852871000766754],[.559099972248077,.902631998062134],[.871706008911133,.791940987110138],[.591234028339386,.373893976211548],[.544341027736664,.451583981513977],[.624562978744507,.924192011356354],[.88577002286911,.615028977394104],[.551338016986847,.695277988910675],[.551980018615723,.704632043838501],[.552887976169586,.715808033943176],[.555167973041534,.730794012546539],[.569944024085999,.767035007476807],[.593203008174896,.685675978660583],[.599261999130249,.681069016456604],[.607599973678589,.677703022956848],[.631937980651855,.663500010967255],[.752032995223999,.601315021514893],[.547226011753082,.420395016670227],[.563543975353241,.359827995300293],[.583841025829315,.368713974952698],[.586614012718201,.692366003990173],[.771915018558502,.683578014373779],[.531597018241882,.352482974529266],[.588370978832245,.804440975189209],[.52079701423645,.442565023899078],[.567984998226166,.493479013442993],[.543282985687256,.819254994392395],[.655317008495331,.745514988899231],[.621008992195129,.574018001556396],[.625559985637665,.78031200170517],[.680198013782501,.570719003677368],[.64276397228241,.604337990283966],[.704662978649139,.621529996395111],[.552012026309967,.862591981887817],[.589071989059448,.508637011051178],[.685944974422455,.775357007980347],[.645735025405884,.812640011310577],[.675342977046967,.703978002071381],[.810858011245728,.646304965019226],[.72012197971344,.714666962623596],[.866151988506317,.682704985141754],[.663187026977539,.644596993923187],[.570082008838654,.466325998306274],[.544561982154846,.548375964164734],[.562758982181549,.558784961700439],[.531987011432648,.530140042304993],[.585271000862122,.335177004337311],[.622952997684479,.32277899980545],[.655896008014679,.320163011550903],[.687132000923157,.322345972061157],[.716481983661652,.333200991153717],[.758756995201111,.382786989212036],[.897013008594513,.468769013881683],[.732392013072968,.424547016620636],[.70211398601532,.433162987232208],[.66652500629425,.433866024017334],[.633504986763,.426087975502014],[.603875994682312,.416586995124817],[.579657971858978,.409945011138916],[.992439985275269,.480777025222778],[.567192018032074,.569419980049133],[.54136598110199,.478899002075195],[.526564002037048,.546118021011353],[.523913025856018,.563830018043518],[.531529009342194,.555056989192963],[.566035985946655,.582329034805298],[.51631098985672,.563053965568542],[.5174720287323,.577877044677734],[.573594987392426,.389806985855103],[.560697972774506,.395331978797913],[.549755990505219,.399751007556915],[.710287988185883,.368252992630005],[.723330020904541,.363372981548309]],K6=[127,34,139,11,0,37,232,231,120,72,37,39,128,121,47,232,121,128,104,69,67,175,171,148,157,154,155,118,50,101,73,39,40,9,151,108,48,115,131,194,204,211,74,40,185,80,42,183,40,92,186,230,229,118,202,212,214,83,18,17,76,61,146,160,29,30,56,157,173,106,204,194,135,214,192,203,165,98,21,71,68,51,45,4,144,24,23,77,146,91,205,50,187,201,200,18,91,106,182,90,91,181,85,84,17,206,203,36,148,171,140,92,40,39,193,189,244,159,158,28,247,246,161,236,3,196,54,68,104,193,168,8,117,228,31,189,193,55,98,97,99,126,47,100,166,79,218,155,154,26,209,49,131,135,136,150,47,126,217,223,52,53,45,51,134,211,170,140,67,69,108,43,106,91,230,119,120,226,130,247,63,53,52,238,20,242,46,70,156,78,62,96,46,53,63,143,34,227,173,155,133,123,117,111,44,125,19,236,134,51,216,206,205,154,153,22,39,37,167,200,201,208,36,142,100,57,212,202,20,60,99,28,158,157,35,226,113,160,159,27,204,202,210,113,225,46,43,202,204,62,76,77,137,123,116,41,38,72,203,129,142,64,98,240,49,102,64,41,73,74,212,216,207,42,74,184,169,170,211,170,149,176,105,66,69,122,6,168,123,147,187,96,77,90,65,55,107,89,90,180,101,100,120,63,105,104,93,137,227,15,86,85,129,102,49,14,87,86,55,8,9,100,47,121,145,23,22,88,89,179,6,122,196,88,95,96,138,172,136,215,58,172,115,48,219,42,80,81,195,3,51,43,146,61,171,175,199,81,82,38,53,46,225,144,163,110,246,33,7,52,65,66,229,228,117,34,127,234,107,108,69,109,108,151,48,64,235,62,78,191,129,209,126,111,35,143,163,161,246,117,123,50,222,65,52,19,125,141,221,55,65,3,195,197,25,7,33,220,237,44,70,71,139,122,193,245,247,130,33,71,21,162,153,158,159,170,169,150,188,174,196,216,186,92,144,160,161,2,97,167,141,125,241,164,167,37,72,38,12,145,159,160,38,82,13,63,68,71,226,35,111,158,153,154,101,50,205,206,92,165,209,198,217,165,167,97,220,115,218,133,112,243,239,238,241,214,135,169,190,173,133,171,208,32,125,44,237,86,87,178,85,86,179,84,85,180,83,84,181,201,83,182,137,93,132,76,62,183,61,76,184,57,61,185,212,57,186,214,207,187,34,143,156,79,239,237,123,137,177,44,1,4,201,194,32,64,102,129,213,215,138,59,166,219,242,99,97,2,94,141,75,59,235,24,110,228,25,130,226,23,24,229,22,23,230,26,22,231,112,26,232,189,190,243,221,56,190,28,56,221,27,28,222,29,27,223,30,29,224,247,30,225,238,79,20,166,59,75,60,75,240,147,177,215,20,79,166,187,147,213,112,233,244,233,128,245,128,114,188,114,217,174,131,115,220,217,198,236,198,131,134,177,132,58,143,35,124,110,163,7,228,110,25,356,389,368,11,302,267,452,350,349,302,303,269,357,343,277,452,453,357,333,332,297,175,152,377,384,398,382,347,348,330,303,304,270,9,336,337,278,279,360,418,262,431,304,408,409,310,415,407,270,409,410,450,348,347,422,430,434,313,314,17,306,307,375,387,388,260,286,414,398,335,406,418,364,367,416,423,358,327,251,284,298,281,5,4,373,374,253,307,320,321,425,427,411,421,313,18,321,405,406,320,404,405,315,16,17,426,425,266,377,400,369,322,391,269,417,465,464,386,257,258,466,260,388,456,399,419,284,332,333,417,285,8,346,340,261,413,441,285,327,460,328,355,371,329,392,439,438,382,341,256,429,420,360,364,394,379,277,343,437,443,444,283,275,440,363,431,262,369,297,338,337,273,375,321,450,451,349,446,342,467,293,334,282,458,461,462,276,353,383,308,324,325,276,300,293,372,345,447,382,398,362,352,345,340,274,1,19,456,248,281,436,427,425,381,256,252,269,391,393,200,199,428,266,330,329,287,273,422,250,462,328,258,286,384,265,353,342,387,259,257,424,431,430,342,353,276,273,335,424,292,325,307,366,447,345,271,303,302,423,266,371,294,455,460,279,278,294,271,272,304,432,434,427,272,407,408,394,430,431,395,369,400,334,333,299,351,417,168,352,280,411,325,319,320,295,296,336,319,403,404,330,348,349,293,298,333,323,454,447,15,16,315,358,429,279,14,15,316,285,336,9,329,349,350,374,380,252,318,402,403,6,197,419,318,319,325,367,364,365,435,367,397,344,438,439,272,271,311,195,5,281,273,287,291,396,428,199,311,271,268,283,444,445,373,254,339,263,466,249,282,334,296,449,347,346,264,447,454,336,296,299,338,10,151,278,439,455,292,407,415,358,371,355,340,345,372,390,249,466,346,347,280,442,443,282,19,94,370,441,442,295,248,419,197,263,255,359,440,275,274,300,383,368,351,412,465,263,467,466,301,368,389,380,374,386,395,378,379,412,351,419,436,426,322,373,390,388,2,164,393,370,462,461,164,0,267,302,11,12,374,373,387,268,12,13,293,300,301,446,261,340,385,384,381,330,266,425,426,423,391,429,355,437,391,327,326,440,457,438,341,382,362,459,457,461,434,430,394,414,463,362,396,369,262,354,461,457,316,403,402,315,404,403,314,405,404,313,406,405,421,418,406,366,401,361,306,408,407,291,409,408,287,410,409,432,436,410,434,416,411,264,368,383,309,438,457,352,376,401,274,275,4,421,428,262,294,327,358,433,416,367,289,455,439,462,370,326,2,326,370,305,460,455,254,449,448,255,261,446,253,450,449,252,451,450,256,452,451,341,453,452,413,464,463,441,413,414,258,442,441,257,443,442,259,444,443,260,445,444,467,342,445,459,458,250,289,392,290,290,328,460,376,433,435,250,290,392,411,416,433,341,463,464,453,464,465,357,465,412,343,412,399,360,363,440,437,399,456,420,456,363,401,435,288,372,383,353,339,255,249,448,261,255,133,243,190,133,155,112,33,246,247,33,130,25,398,384,286,362,398,414,362,463,341,263,359,467,263,249,255,466,467,260,75,60,166,238,239,79,162,127,139,72,11,37,121,232,120,73,72,39,114,128,47,233,232,128,103,104,67,152,175,148,173,157,155,119,118,101,74,73,40,107,9,108,49,48,131,32,194,211,184,74,185,191,80,183,185,40,186,119,230,118,210,202,214,84,83,17,77,76,146,161,160,30,190,56,173,182,106,194,138,135,192,129,203,98,54,21,68,5,51,4,145,144,23,90,77,91,207,205,187,83,201,18,181,91,182,180,90,181,16,85,17,205,206,36,176,148,140,165,92,39,245,193,244,27,159,28,30,247,161,174,236,196,103,54,104,55,193,8,111,117,31,221,189,55,240,98,99,142,126,100,219,166,218,112,155,26,198,209,131,169,135,150,114,47,217,224,223,53,220,45,134,32,211,140,109,67,108,146,43,91,231,230,120,113,226,247,105,63,52,241,238,242,124,46,156,95,78,96,70,46,63,116,143,227,116,123,111,1,44,19,3,236,51,207,216,205,26,154,22,165,39,167,199,200,208,101,36,100,43,57,202,242,20,99,56,28,157,124,35,113,29,160,27,211,204,210,124,113,46,106,43,204,96,62,77,227,137,116,73,41,72,36,203,142,235,64,240,48,49,64,42,41,74,214,212,207,183,42,184,210,169,211,140,170,176,104,105,69,193,122,168,50,123,187,89,96,90,66,65,107,179,89,180,119,101,120,68,63,104,234,93,227,16,15,85,209,129,49,15,14,86,107,55,9,120,100,121,153,145,22,178,88,179,197,6,196,89,88,96,135,138,136,138,215,172,218,115,219,41,42,81,5,195,51,57,43,61,208,171,199,41,81,38,224,53,225,24,144,110,105,52,66,118,229,117,227,34,234,66,107,69,10,109,151,219,48,235,183,62,191,142,129,126,116,111,143,7,163,246,118,117,50,223,222,52,94,19,141,222,221,65,196,3,197,45,220,44,156,70,139,188,122,245,139,71,162,145,153,159,149,170,150,122,188,196,206,216,92,163,144,161,164,2,167,242,141,241,0,164,37,11,72,12,144,145,160,12,38,13,70,63,71,31,226,111,157,158,154,36,101,205,203,206,165,126,209,217,98,165,97,237,220,218,237,239,241,210,214,169,140,171,32,241,125,237,179,86,178,180,85,179,181,84,180,182,83,181,194,201,182,177,137,132,184,76,183,185,61,184,186,57,185,216,212,186,192,214,187,139,34,156,218,79,237,147,123,177,45,44,4,208,201,32,98,64,129,192,213,138,235,59,219,141,242,97,97,2,141,240,75,235,229,24,228,31,25,226,230,23,229,231,22,230,232,26,231,233,112,232,244,189,243,189,221,190,222,28,221,223,27,222,224,29,223,225,30,224,113,247,225,99,60,240,213,147,215,60,20,166,192,187,213,243,112,244,244,233,245,245,128,188,188,114,174,134,131,220,174,217,236,236,198,134,215,177,58,156,143,124,25,110,7,31,228,25,264,356,368,0,11,267,451,452,349,267,302,269,350,357,277,350,452,357,299,333,297,396,175,377,381,384,382,280,347,330,269,303,270,151,9,337,344,278,360,424,418,431,270,304,409,272,310,407,322,270,410,449,450,347,432,422,434,18,313,17,291,306,375,259,387,260,424,335,418,434,364,416,391,423,327,301,251,298,275,281,4,254,373,253,375,307,321,280,425,411,200,421,18,335,321,406,321,320,405,314,315,17,423,426,266,396,377,369,270,322,269,413,417,464,385,386,258,248,456,419,298,284,333,168,417,8,448,346,261,417,413,285,326,327,328,277,355,329,309,392,438,381,382,256,279,429,360,365,364,379,355,277,437,282,443,283,281,275,363,395,431,369,299,297,337,335,273,321,348,450,349,359,446,467,283,293,282,250,458,462,300,276,383,292,308,325,283,276,293,264,372,447,346,352,340,354,274,19,363,456,281,426,436,425,380,381,252,267,269,393,421,200,428,371,266,329,432,287,422,290,250,328,385,258,384,446,265,342,386,387,257,422,424,430,445,342,276,422,273,424,306,292,307,352,366,345,268,271,302,358,423,371,327,294,460,331,279,294,303,271,304,436,432,427,304,272,408,395,394,431,378,395,400,296,334,299,6,351,168,376,352,411,307,325,320,285,295,336,320,319,404,329,330,349,334,293,333,366,323,447,316,15,315,331,358,279,317,14,316,8,285,9,277,329,350,253,374,252,319,318,403,351,6,419,324,318,325,397,367,365,288,435,397,278,344,439,310,272,311,248,195,281,375,273,291,175,396,199,312,311,268,276,283,445,390,373,339,295,282,296,448,449,346,356,264,454,337,336,299,337,338,151,294,278,455,308,292,415,429,358,355,265,340,372,388,390,466,352,346,280,295,442,282,354,19,370,285,441,295,195,248,197,457,440,274,301,300,368,417,351,465,251,301,389,385,380,386,394,395,379,399,412,419,410,436,322,387,373,388,326,2,393,354,370,461,393,164,267,268,302,12,386,374,387,312,268,13,298,293,301,265,446,340,380,385,381,280,330,425,322,426,391,420,429,437,393,391,326,344,440,438,458,459,461,364,434,394,428,396,262,274,354,457,317,316,402,316,315,403,315,314,404,314,313,405,313,421,406,323,366,361,292,306,407,306,291,408,291,287,409,287,432,410,427,434,411,372,264,383,459,309,457,366,352,401,1,274,4,418,421,262,331,294,358,435,433,367,392,289,439,328,462,326,94,2,370,289,305,455,339,254,448,359,255,446,254,253,449,253,252,450,252,256,451,256,341,452,414,413,463,286,441,414,286,258,441,258,257,442,257,259,443,259,260,444,260,467,445,309,459,250,305,289,290,305,290,460,401,376,435,309,250,392,376,411,433,453,341,464,357,453,465,343,357,412,437,343,399,344,360,440,420,437,456,360,420,363,361,401,288,265,372,353,390,339,249,339,448,255];[127,234,132,58,172,150,149,148,152,377,378,379,397,288,361,454,356,70,63,105,66,107,336,296,334,293,300,168,6,195,4,98,97,2,326,327,33,160,158,133,153,144,362,385,387,263,373,380,57,40,37,0,267,270,287,321,314,17,84,91,78,81,13,311,308,402,14,178].map((function(e){return Y6[e]})),[33,133,362,263,1,62,308,159,145,386,374,6,102,331,2,13,14,70,105,107,336,334,300,54,10,284,50,280,234,454,58,288,152].map((function(e){return Y6[e]})),[33,133,362,263,1,78,308].map((function(e){return Y6[e]}));function Z6(e){var t=e.map((function(e){return e[0]}));return t.push(e[e.length-1][1]),t}Z6([[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]]),Z6([[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]]),Z6([[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]]),Z6([[474,475],[475,476],[476,477],[477,474]]),Z6([[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]]),Z6([[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]]),Z6([[469,470],[470,471],[471,472],[472,469]]),Z6([[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]]);var J6=function(e){return[Math.abs(e.endPoint[0]-e.startPoint[0]),Math.abs(e.endPoint[1]-e.startPoint[1])]},Q6=function(e){return[e.startPoint[0]+(e.endPoint[0]-e.startPoint[0])/2,e.startPoint[1]+(e.endPoint[1]-e.startPoint[1])/2,1]},$6=function(e,t){return e?[Math.trunc(Math.max(0,e.startPoint[0])),Math.trunc(Math.max(0,e.startPoint[1])),Math.trunc(Math.min(t.shape[2]||0,e.endPoint[0])-Math.max(0,e.startPoint[0])),Math.trunc(Math.min(t.shape[1]||0,e.endPoint[1])-Math.max(0,e.startPoint[1]))]:[0,0,0,0]},e8=function(e,t){return e?[e.startPoint[0]/(t.shape[2]||0),e.startPoint[1]/(t.shape[1]||0),(e.endPoint[0]-e.startPoint[0])/(t.shape[2]||0),(e.endPoint[1]-e.startPoint[1])/(t.shape[1]||0)]:[0,0,0,0]},t8=function(e,t){return{startPoint:[e.startPoint[0]*t[0],e.startPoint[1]*t[1]],endPoint:[e.endPoint[0]*t[0],e.endPoint[1]*t[1]],landmarks:e.landmarks,confidence:e.confidence}},n8=function(e,t,n){var r=t.shape[1],a=t.shape[2],i=[e.startPoint[1]/r,e.startPoint[0]/a,e.endPoint[1]/r,e.endPoint[0]/a],o=Db.cropAndResize(t,[i],[0],n),s=uf(o,m6.tf255);return jh(o),s},r8=function(e,t){var n=Q6(e),r=J6(e),a=[t*r[0]/2,t*r[1]/2];return{startPoint:[n[0]-a[0],n[1]-a[1]],endPoint:[n[0]+a[0],n[1]+a[1]],landmarks:e.landmarks,confidence:e.confidence}},a8=function(e){var t=Q6(e),n=J6(e),r=Math.max.apply(Math,ta(n))/2;return{startPoint:[Math.round(t[0]-r),Math.round(t[1]-r)],endPoint:[Math.round(t[0]+r),Math.round(t[1]+r)],landmarks:e.landmarks,confidence:e.confidence}},i8=function(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{startPoint:[Math.min.apply(Math,ta(t)),Math.min.apply(Math,ta(n))],endPoint:[Math.max.apply(Math,ta(t)),Math.max.apply(Math,ta(n))],landmarks:e}},o8=[[1,0,0],[0,1,0],[0,0,1]],s8=function(e,t){return(n=Math.PI/2-Math.atan2(-(t[1]-e[1]),t[0]-e[0]))-2*Math.PI*Math.floor((n+Math.PI)/(2*Math.PI));var n},u8=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},l8=function(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n},c8=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r][t]);return n},d8=function(e,t){for(var n=[],r=e.length,a=0;a<r;a++){n.push([]);for(var i=0;i<r;i++)n[a].push(l8(e[a],c8(t,i)))}return n},h8=function(e,t){var n=Math.cos(e),r=Math.sin(e),a=[[n,-r,0],[r,n,0],[0,0,1]],i=u8(t[0],t[1]),o=d8(i,a),s=u8(-t[0],-t[1]);return d8(o,s)};function p8(e){for(var t=192===e?{strides:[4],anchors:[1]}:{strides:[e/16,e/8],anchors:[2,6]},n=[],r=0;r<t.strides.length;r++)for(var a=t.strides[r],i=Math.floor((e+a-1)/a),o=Math.floor((e+a-1)/a),s=t.anchors[r],u=0;u<i;u++)for(var l=a*(u+.5),c=0;c<o;c++)for(var d=a*(c+.5),h=0;h<s;h++)n.push([d,l]);return n}function f8(e,t,n,r,a){var i=J6(t),o=e.map((function(e){return[i[0]/a*(e[0]-a/2),i[1]/a*(e[1]-a/2),e[2]||0]})),s=n&&0!==n&&Math.abs(n)>.2,u=s?h8(n,[0,0]):o8,l=s?o.map((function(e){return[].concat(ta(function(e,t){return[l8(e,t[0]),l8(e,t[1])]}(e,u)),[e[2]])})):o,c=s?function(e){var t=[[e[0][0],e[1][0]],[e[0][1],e[1][1]]],n=[e[0][2],e[1][2]],r=[-l8(t[0],n),-l8(t[1],n)];return[t[0].concat(r[0]),t[1].concat(r[1]),[0,0,1]]}(r):o8,d=Q6(t),h=[l8(d,c[0]),l8(d,c[1])];return l.map((function(e){return[Math.trunc(e[0]+h[0]),Math.trunc(e[1]+h[1]),Math.trunc(e[2]||0)]}))}function m8(e,t,n,r){var a,i=t.landmarks.length>=G6.count?G6.symmetryLine:X6.symmetryLine,o=0,s=o8;if(e&&Z7.kernels.includes("rotatewithoffset"))if((o=s8(t.landmarks[i[0]],t.landmarks[i[1]]))&&0!==o&&Math.abs(o)>.2){var u=Q6(t),l=[u[0]/n.shape[2],u[1]/n.shape[1]],c=Db.rotateWithOffset(n,o,0,l);s=h8(-o,u),a=n8(t,c,[r,r]),jh(c)}else a=n8(t,n,[r,r]);else a=n8(t,n,[r,r]);return[o,s,a]}var g8,v8=function(e,t){var n=function(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return[Math.min.apply(Math,ta(t))+(Math.max.apply(Math,ta(t))-Math.min.apply(Math,ta(t)))/2,Math.min.apply(Math,ta(n))+(Math.max.apply(Math,ta(n))-Math.min.apply(Math,ta(n)))/2]}(e),r=J6(t);return{startPoint:[n[0]-r[0]/2,n[1]-r[1]/2],endPoint:[n[0]+r[0]/2,n[1]+r[1]/2]}},y8=null,b8=0,x8=null,A8=function(){return b8};function w8(e){return k8.apply(this,arguments)}function k8(){return(k8=Mr(Nr().mark((function e(t){var n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z7.initial&&(g8=null),g8){e.next=7;break}return e.next=4,e6(null==(n=t.face.detector)?void 0:n.modelPath);case 4:g8=e.sent,e.next=8;break;case 7:t.debug&&pa("cached model:",g8.modelUrl);case 8:return b8=g8.inputs[0].shape?g8.inputs[0].shape[2]:0,x8=Hm(b8,"int32"),y8=Zv(p8(b8)),e.abrupt("return",g8);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S8(e){var t={};t.boxStarts=Uf(e,[0,1],[-1,2]),t.centers=of(t.boxStarts,y8),t.boxSizes=Uf(e,[0,3],[-1,2]),t.boxSizesNormalized=uf(t.boxSizes,x8),t.centersNormalized=uf(t.centers,x8),t.halfBoxSize=uf(t.boxSizesNormalized,m6.tf2),t.starts=Cg(t.centersNormalized,t.halfBoxSize),t.ends=of(t.centersNormalized,t.halfBoxSize),t.startNormalized=lf(t.starts,x8),t.endNormalized=lf(t.ends,x8);var n=im([t.startNormalized,t.endNormalized],1);return Object.keys(t).forEach((function(e){return jh(t[e])})),n}function C8(e,t){return I8.apply(this,arguments)}function I8(){return I8=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,u,l,c,d,h,p,f;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.isDisposedInternal||4!==t.shape.length||t.shape[1]<1||t.shape[2]<1)){e.next=2;break}return e.abrupt("return",[]);case 2:return(s={}).resized=Db.resizeBilinear(t,[b8,b8]),s.div=uf(s.resized,m6.tf127),s.normalized=Cg(s.div,m6.tf05),u=null==g8?void 0:g8.execute(s.normalized),Array.isArray(u)&&u.length>2?(l=u.sort((function(e,t){return e.size-t.size})),s.concat384=Vf([l[0],l[2]],2),s.concat512=Vf([l[1],l[3]],2),s.concat=Vf([s.concat512,s.concat384],1),s.batch=Uv(s.concat,0)):Array.isArray(u)?s.batch=Uv(u[0]):s.batch=Uv(u),jh(u),s.boxes=S8(s.batch),s.logits=Uf(s.batch,[0,0],[-1,1]),s.sigmoid=Hf(s.logits),s.scores=Uv(s.sigmoid),e.next=15,Db.nonMaxSuppressionAsync(s.boxes,s.scores,(null==(r=n.face.detector)?void 0:r.maxDetected)||0,(null==(a=n.face.detector)?void 0:a.iouThreshold)||0,(null==(i=n.face.detector)?void 0:i.minConfidence)||0);case 15:return s.nms=e.sent,e.next=18,s.nms.array();case 18:return c=e.sent,d=[],e.next=22,s.scores.data();case 22:h=e.sent,p=0;case 24:if(!(p<c.length)){e.next=31;break}if(!((f=h[c[p]])>((null==(o=n.face.detector)?void 0:o.minConfidence)||0))){e.next=28;break}return e.delegateYield(Nr().mark((function e(){var r,a,i,o,u,l;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={}).bbox=Uf(s.boxes,[c[p],0],[1,-1]),r.slice=Uf(s.batch,[c[p],5],[1,-1]),r.squeeze=Uv(r.slice),r.landmarks=Bf(r.squeeze,[6,-1]),e.next=7,r.bbox.data();case 7:return a=e.sent,e.t0=[a[0],a[1]],e.t1=[a[2],a[3]],e.next=12,r.landmarks.array();case 12:e.t2=e.sent,e.t3=f,i={startPoint:e.t0,endPoint:e.t1,landmarks:e.t2,confidence:e.t3},o=t8(i,[(t.shape[2]||0)/b8,(t.shape[1]||0)/b8]),u=r8(o,n.face.scale||1.4),l=a8(u),d.push(l),Object.keys(r).forEach((function(e){return jh(r[e])}));case 20:case"end":return e.stop()}}),e)}))(),"t0",28);case 28:p++,e.next=24;break;case 31:return Object.keys(s).forEach((function(e){return jh(s[e])})),e.abrupt("return",d);case 33:case"end":return e.stop()}}),e)}))),I8.apply(this,arguments)}var E8={};sa(E8,{connected:function(){return N8},kpt:function(){return T8}});var T8=["nose","leftEyeInside","leftEye","leftEyeOutside","rightEyeInside","rightEye","rightEyeOutside","leftEar","rightEar","leftMouth","rightMouth","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftPinky","rightPinky","leftIndex","rightIndex","leftThumb","rightThumb","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle","leftHeel","rightHeel","leftFoot","rightFoot","bodyCenter","bodyTop","leftPalm","leftHand","rightPalm","rightHand"],N8={shoulders:["leftShoulder","rightShoulder"],hips:["rightHip","leftHip"],mouth:["leftMouth","rightMouth"],leftLegUpper:["leftHip","leftKnee"],leftLegLower:["leftKnee","leftAnkle"],leftFoot:["leftAnkle","leftHeel","leftFoot"],leftTorso:["leftShoulder","leftHip"],leftArmUpper:["leftShoulder","leftElbow"],leftArmLower:["leftElbow","leftWrist"],leftHand:["leftWrist","leftPalm"],leftHandPinky:["leftPalm","leftPinky"],leftHandIndex:["leftPalm","leftIndex"],leftHandThumb:["leftPalm","leftThumb"],leftEyeOutline:["leftEyeInside","leftEyeOutside"],rightLegUpper:["rightHip","rightKnee"],rightLegLower:["rightKnee","rightAnkle"],rightFoot:["rightAnkle","rightHeel","rightFoot"],rightTorso:["rightShoulder","rightHip"],rightArmUpper:["rightShoulder","rightElbow"],rightArmLower:["rightElbow","rightWrist"],rightHand:["rightWrist","rightPalm"],rightHandPinky:["rightPalm","rightPinky"],rightHandIndex:["rightPalm","rightIndex"],rightHandThumb:["rightPalm","rightThumb"],rightEyeOutline:["rightEyeInside","rightEyeOutside"]},_8=224,M8=[8,16,32,32,32];function R8(){return O8.apply(this,arguments)}function O8(){return O8=Mr(Nr().mark((function e(){var t,n,r,a,i,o,s,u,l,c;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=0;n<5;){for(r=0,a=n;a<M8.length&&M8[a]===M8[n];)r+=2,a++;for(i=M8[n],o=Math.ceil(_8/i),s=Math.ceil(_8/i),u=0;u<o;++u)for(l=0;l<s;++l)for(c=0;c<r;++c)t.push({x:(l+.5)/s,y:(u+.5)/o});n=a}({x:Kv(t.map((function(e){return e.x}))),y:Kv(t.map((function(e){return e.y})))});case 4:case"end":return e.stop()}}),e)}))),O8.apply(this,arguments)}function P8(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1],n=[e.map((function(e){return e[0]})),e.map((function(e){return e[1]}))],r=[Math.min.apply(Math,ta(n[0])),Math.min.apply(Math,ta(n[1]))],a=[Math.max.apply(Math,ta(n[0])),Math.max.apply(Math,ta(n[1]))],i=[r[0],r[1],a[0]-r[0],a[1]-r[1]],o=[i[0]/t[0],i[1]/t[1],i[2]/t[0],i[3]/t[1]];return{box:i,boxRaw:o}}function F8(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1],n=[e.map((function(e){return e[0]})),e.map((function(e){return e[1]}))],r=[Math.min.apply(Math,ta(n[0])),Math.min.apply(Math,ta(n[1]))],a=[Math.max.apply(Math,ta(n[0])),Math.max.apply(Math,ta(n[1]))],i=[(r[0]+a[0])/2,(r[1]+a[1])/2],o=Math.max(i[0]-r[0],i[1]-r[1],-i[0]+a[0],-i[1]+a[1]),s=[Math.trunc(i[0]-o),Math.trunc(i[1]-o),Math.trunc(2*o),Math.trunc(2*o)],u=[s[0]/t[0],s[1]/t[1],s[2]/t[0],s[3]/t[1]];return{box:s,boxRaw:u}}function D8(e,t){var n=[e[2]*t,e[3]*t];return[e[0]-(n[0]-e[2])/2,e[1]-(n[1]-e[3])/2,n[0],n[1]]}var L8=!0,z8={detector:null,landmarks:null},B8={detector:[224,224],landmarks:[256,256]},W8=Number.MAX_SAFE_INTEGER,j8=["ld_3d","activation_segmentation","activation_heatmap","world_3d","output_poseflag"],V8=null,H8=[[0,0],[0,0],[0,0],[0,0]],U8=0,G8=function(e){return 1-1/(1+Math.exp(e))};function X8(e){return q8.apply(this,arguments)}function q8(){return(q8=Mr(Nr().mark((function e(t){var n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L8&&(z8.detector=null),z8.detector||!t.body.detector||!t.body.detector.modelPath){e.next=10;break}return e.next=4,e6(t.body.detector.modelPath);case 4:z8.detector=e.sent,n=Object.values(z8.detector.modelSignature.inputs),B8.detector[0]=Array.isArray(n)?parseInt(n[0].tensorShape.dim[1].size):0,B8.detector[1]=Array.isArray(n)?parseInt(n[0].tensorShape.dim[2].size):0,e.next=11;break;case 10:t.debug&&z8.detector&&pa("cached model:",z8.detector.modelUrl);case 11:return e.next=13,R8();case 13:return e.abrupt("return",z8.detector);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y8(e){return K8.apply(this,arguments)}function K8(){return(K8=Mr(Nr().mark((function e(t){var n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L8&&(z8.landmarks=null),z8.landmarks){e.next=10;break}return e.next=4,e6(t.body.modelPath);case 4:z8.landmarks=e.sent,n=Object.values(z8.landmarks.modelSignature.inputs),B8.landmarks[0]=Array.isArray(n)?parseInt(n[0].tensorShape.dim[1].size):0,B8.landmarks[1]=Array.isArray(n)?parseInt(n[0].tensorShape.dim[2].size):0,e.next=11;break;case 10:t.debug&&pa("cached model:",z8.landmarks.modelUrl);case 11:return e.abrupt("return",z8.landmarks);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z8(e,t){return J8.apply(this,arguments)}function J8(){return J8=Mr(Nr().mark((function e(t,n){var r,a,i,o;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},t.shape&&t.shape[1]&&t.shape[2]){e.next=3;break}return e.abrupt("return",t);case 3:return t.shape[1]!==t.shape[2]?(i=[t.shape[2]>t.shape[1]?Math.trunc((t.shape[2]-t.shape[1])/2):0,t.shape[2]>t.shape[1]?Math.trunc((t.shape[2]-t.shape[1])/2):0],o=[t.shape[1]>t.shape[2]?Math.trunc((t.shape[1]-t.shape[2])/2):0,t.shape[1]>t.shape[2]?Math.trunc((t.shape[1]-t.shape[2])/2):0],H8=[[0,0],i,o,[0,0]],r.pad=Qg(r.cropped||t,H8),r.resize=Db.resizeBilinear(r.pad,[n,n]),a=uf(r.resize,m6.tf255)):t.shape[1]!==n?(r.resize=Db.resizeBilinear(r.cropped||t,[n,n]),a=uf(r.resize,m6.tf255)):a=uf(r.cropped||t,m6.tf255),Object.keys(r).forEach((function(e){return jh(r[e])})),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)}))),J8.apply(this,arguments)}function Q8(e,t){var n,r=ea(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.position=[Math.trunc(a.position[0]*(t[0]+H8[2][0]+H8[2][1])/t[0]-H8[2][0]),Math.trunc(a.position[1]*(t[1]+H8[1][0]+H8[1][1])/t[1]-H8[1][0]),a.position[2]],a.positionRaw=[a.position[0]/t[0],a.position[1]/t[1],2*a.position[2]/(t[0]+t[1])]}}catch(i){r.e(i)}finally{r.f()}return e}function $8(e){return e9.apply(this,arguments)}function e9(){return e9=Mr(Nr().mark((function e(t){var n,r,a,i,o,s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.find((function(e){return"leftPalm"===e.part})),r=t.find((function(e){return"leftWrist"===e.part})),a=t.find((function(e){return"leftIndex"===e.part})),n.position[2]=((r.position[2]||0)+(a.position[2]||0))/2,i=t.find((function(e){return"rightPalm"===e.part})),o=t.find((function(e){return"rightWrist"===e.part})),s=t.find((function(e){return"rightIndex"===e.part})),i.position[2]=((o.position[2]||0)+(s.position[2]||0))/2;case 8:case"end":return e.stop()}}),e)}))),e9.apply(this,arguments)}function t9(e,t,n){return n9.apply(this,arguments)}function n9(){return n9=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,l,c,d,h,p,f,m,g,v,y,b,x,A,w,k,S,C,I,E;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={},o=null==(a=z8.landmarks)?void 0:a.execute(t,j8),s=u(o,5),i.ld=s[0],i.segmentation=s[1],i.heatmap=s[2],i.world=s[3],i.poseflag=s[4],e.next=10,i.poseflag.data();case 10:return l=e.sent[0],e.next=13,i.ld.data();case 13:return c=e.sent,e.next=16,i.world.data();case 16:for(d=e.sent,Object.keys(i).forEach((function(e){return jh(i[e])})),h=[],5,p=0;p<c.length/5;p++)f=G8(c[5*p+3]),m=G8(c[5*p+4]),g=Math.trunc(100*f*m*l)/100,v=[c[5*p+0]/B8.landmarks[0],c[5*p+1]/B8.landmarks[1],c[5*p+2]+0],y=[Math.trunc(r[0]*v[0]),Math.trunc(r[1]*v[1]),v[2]],b=[d[5*p+0],d[5*p+1],d[5*p+2]+0],h.push({part:T8[p],positionRaw:v,position:y,distance:b,score:g});if(!(l<(n.body.minConfidence||0))){e.next=23;break}return e.abrupt("return",null);case 23:for($8(h),x=Q8(h,r),A=x.map((function(e){return e.position})),w=P8(A,[r[0],r[1]]),k={},S=function(){for(var e=u(I[C],2),t=e[0],n=e[1],r=[],a=function(e){var t=x.find((function(t){return t.part===n[e]})),a=x.find((function(t){return t.part===n[e+1]}));t&&a&&r.push([t.position,a.position])},i=0;i<n.length-1;i++)a(i);k[t]=r},C=0,I=Object.entries(N8);C<I.length;C++)S();return E={id:0,score:Math.trunc(100*l)/100,box:w.box,boxRaw:w.boxRaw,keypoints:x,annotations:k},e.abrupt("return",E);case 32:case"end":return e.stop()}}),e)}))),n9.apply(this,arguments)}function r9(e,t){return a9.apply(this,arguments)}function a9(){return a9=Mr(Nr().mark((function e(t,n){var r,a,i,o;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[t.shape[2]||0,t.shape[1]||0],a=(n.body.skipTime||0)>ma()-U8,i=W8<(n.body.skipFrames||0),!(n.skipAllowed&&a&&i&&null!==V8)){e.next=7;break}W8++,e.next=17;break;case 7:return o={},e.next=10,Z8(t,256);case 10:return o.landmarks=e.sent,e.next=13,t9(o.landmarks,n,r);case 13:V8=e.sent,Object.keys(o).forEach((function(e){return jh(o[e])})),U8=ma(),W8=0;case 17:return e.abrupt("return",V8?[V8]:[]);case 18:case"end":return e.stop()}}),e)}))),a9.apply(this,arguments)}var i9,o9=[{class:1,label:"person"},{class:2,label:"bicycle"},{class:3,label:"car"},{class:4,label:"motorcycle"},{class:5,label:"airplane"},{class:6,label:"bus"},{class:7,label:"train"},{class:8,label:"truck"},{class:9,label:"boat"},{class:10,label:"traffic light"},{class:11,label:"fire hydrant"},{class:12,label:"stop sign"},{class:13,label:"parking meter"},{class:14,label:"bench"},{class:15,label:"bird"},{class:16,label:"cat"},{class:17,label:"dog"},{class:18,label:"horse"},{class:19,label:"sheep"},{class:20,label:"cow"},{class:21,label:"elephant"},{class:22,label:"bear"},{class:23,label:"zebra"},{class:24,label:"giraffe"},{class:25,label:"backpack"},{class:26,label:"umbrella"},{class:27,label:"handbag"},{class:28,label:"tie"},{class:29,label:"suitcase"},{class:30,label:"frisbee"},{class:31,label:"skis"},{class:32,label:"snowboard"},{class:33,label:"sports ball"},{class:34,label:"kite"},{class:35,label:"baseball bat"},{class:36,label:"baseball glove"},{class:37,label:"skateboard"},{class:38,label:"surfboard"},{class:39,label:"tennis racket"},{class:40,label:"bottle"},{class:41,label:"wine glass"},{class:42,label:"cup"},{class:43,label:"fork"},{class:44,label:"knife"},{class:45,label:"spoon"},{class:46,label:"bowl"},{class:47,label:"banana"},{class:48,label:"apple"},{class:49,label:"sandwich"},{class:50,label:"orange"},{class:51,label:"broccoli"},{class:52,label:"carrot"},{class:53,label:"hot dog"},{class:54,label:"pizza"},{class:55,label:"donut"},{class:56,label:"cake"},{class:57,label:"chair"},{class:58,label:"couch"},{class:59,label:"potted plant"},{class:60,label:"bed"},{class:61,label:"dining table"},{class:62,label:"toilet"},{class:63,label:"tv"},{class:64,label:"laptop"},{class:65,label:"mouse"},{class:66,label:"remote"},{class:67,label:"keyboard"},{class:68,label:"cell phone"},{class:69,label:"microwave"},{class:70,label:"oven"},{class:71,label:"toaster"},{class:72,label:"sink"},{class:73,label:"refrigerator"},{class:74,label:"book"},{class:75,label:"clock"},{class:76,label:"vase"},{class:77,label:"scissors"},{class:78,label:"teddy bear"},{class:79,label:"hair drier"},{class:80,label:"toothbrush"}],s9=0,u9=[],l9=0,c9=Number.MAX_SAFE_INTEGER;function d9(e){return h9.apply(this,arguments)}function h9(){return(h9=Mr(Nr().mark((function e(t){var n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z7.initial&&(i9=null),i9){e.next=9;break}return e.next=4,e6(t.object.modelPath);case 4:i9=e.sent,n=Object.values(i9.modelSignature.inputs),s9=Array.isArray(n)?parseInt(n[0].tensorShape.dim[2].size):0,e.next=10;break;case 9:t.debug&&pa("cached model:",i9.modelUrl);case 10:return e.abrupt("return",i9);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p9(e,t,n){return f9.apply(this,arguments)}function f9(){return f9=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h,p,f,m,g,v,y,b;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return a={},i=[],e.next=6,t.array();case 6:return o=e.sent,a.squeeze=Uv(t),s=jv(a.squeeze,6,1),a.stack=Gv([s[1],s[0],s[3],s[2]],1),a.boxes=Uv(a.stack),a.scores=Uv(s[4]),a.classes=Uv(s[5]),jh([t].concat(ta(s))),e.next=16,Db.nonMaxSuppressionAsync(a.boxes,a.scores,r.object.maxDetected,r.object.iouThreshold,r.object.minConfidence||0);case 16:return a.nms=e.sent,e.next=19,a.nms.data();case 19:for(u=e.sent,l=0,c=0,d=Array.from(u);c<d.length;c++)h=d[c],p=Math.trunc(100*o[0][h][4])/100,f=o[0][h][5],m=o9[f].label,g=o[0][h][0]/s9,v=o[0][h][1]/s9,y=[g,v,o[0][h][2]/s9-g,o[0][h][3]/s9-v],b=[Math.trunc(y[0]*n[0]),Math.trunc(y[1]*n[1]),Math.trunc(y[2]*n[0]),Math.trunc(y[3]*n[1])],i.push({id:l++,score:p,class:f,label:m,box:b,boxRaw:y});return Object.keys(a).forEach((function(e){return jh(a[e])})),e.abrupt("return",i);case 24:case"end":return e.stop()}}),e)}))),f9.apply(this,arguments)}function m9(e,t){return g9.apply(this,arguments)}function g9(){return g9=Mr(Nr().mark((function e(t,n){var r,a;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n.object.skipTime||0)>ma()-l9,a=c9<(n.object.skipFrames||0),!(n.skipAllowed&&r&&a&&u9.length>0)){e.next=5;break}return c9++,e.abrupt("return",u9);case 5:return c9=0,e.abrupt("return",new Promise(function(){var e=Mr(Nr().mark((function e(r){var a,i,o,s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[t.shape[2]||0,t.shape[1]||0],i=Db.resizeBilinear(t,[s9,s9]),o=n.object.enabled?null==i9?void 0:i9.execute(i,["tower_0/detections"]):null,l9=ma(),jh(i),e.next=7,p9(o,a,n);case 7:s=e.sent,u9=s,r(s);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:case"end":return e.stop()}}),e)}))),g9.apply(this,arguments)}var v9={};sa(v9,{connected:function(){return x9},kpt:function(){return b9}});var y9,b9=["head","neck","rightShoulder","rightElbow","rightWrist","chest","leftShoulder","leftElbow","leftWrist","bodyCenter","rightHip","rightKnee","rightAnkle","leftHip","leftKnee","leftAnkle"],x9={leftLeg:["leftHip","leftKnee","leftAnkle"],rightLeg:["rightHip","rightKnee","rightAnkle"],torso:["leftShoulder","rightShoulder","rightHip","leftHip","leftShoulder"],leftArm:["leftShoulder","leftElbow","leftWrist"],rightArm:["rightShoulder","rightElbow","rightWrist"],head:[]},A9=0,w9={id:0,keypoints:[],box:[0,0,0,0],boxRaw:[0,0,0,0],score:0,annotations:{}},k9=Number.MAX_SAFE_INTEGER;function S9(e){return C9.apply(this,arguments)}function C9(){return(C9=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z7.initial&&(y9=null),y9){e.next=7;break}return e.next=4,e6(t.body.modelPath);case 4:y9=e.sent,e.next=8;break;case 7:t.debug&&pa("cached model:",y9.modelUrl);case 8:return e.abrupt("return",y9);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I9(e,t){return E9.apply(this,arguments)}function E9(){return E9=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,l,c,d,h,p,f;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u(t.shape,2),a=r[0],i=r[1],o=Bf(t,[i*a]),s=Wm(o,0),e.next=5,s.data();case 5:if(l=e.sent[0],jh([o,s]),!(l>n)){e.next=19;break}return c=gf(o,0),d=Gg(c,a),e.next=12,d.data();case 12:return h=e.sent[0],p=uf(c,Hm(a,"int32")),e.next=16,p.data();case 16:return f=e.sent[0],jh([d,p]),e.abrupt("return",[h,f,l]);case 19:return e.abrupt("return",[0,0,l]);case 20:case"end":return e.stop()}}),e)}))),E9.apply(this,arguments)}function T9(e,t){return N9.apply(this,arguments)}function N9(){return N9=Mr(Nr().mark((function e(t,n){var r,a;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n.body.skipTime||0)>ma()-A9,a=k9<(n.body.skipFrames||0),!(n.skipAllowed&&r&&a&&Object.keys(w9.keypoints).length>0)){e.next=5;break}return k9++,e.abrupt("return",[w9]);case 5:return k9=0,e.abrupt("return",new Promise(function(){var e=Mr(Nr().mark((function e(r){var a,i,o,s,l,c,d,h,p,f,m,g,v,y,b,x,A,w;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Wh((function(){if(!(null==y9?void 0:y9.inputs[0].shape))return null;var e=Db.resizeBilinear(t,[y9.inputs[0].shape[2],y9.inputs[0].shape[1]],!1),n=lf(e,m6.tf2);return Cg(n,m6.tf1)})),n.body.enabled&&(o=null==y9?void 0:y9.execute(i)),A9=ma(),jh(i),!o){e.next=24;break}w9.keypoints.length=0,s=o.squeeze(),jh(o),l=s.unstack(2),jh(s),c=0;case 11:if(!(c<l.length)){e.next=23;break}return e.next=14,I9(l[c],n.body.minConfidence);case 14:d=e.sent,h=u(d,3),p=h[0],f=h[1],(m=h[2])>((null==(a=n.body)?void 0:a.minConfidence)||0)&&w9.keypoints.push({score:Math.round(100*m)/100,part:b9[c],positionRaw:[p/y9.inputs[0].shape[2],f/y9.inputs[0].shape[1]],position:[Math.round(t.shape[2]*p/y9.inputs[0].shape[2]),Math.round(t.shape[1]*f/y9.inputs[0].shape[1])]});case 20:c++,e.next=11;break;case 23:l.forEach((function(e){return jh(e)}));case 24:for(w9.score=w9.keypoints.reduce((function(e,t){return t.score>e?t.score:e}),0),g=w9.keypoints.map((function(e){return e.position[0]})),v=w9.keypoints.map((function(e){return e.position[1]})),w9.box=[Math.min.apply(Math,ta(g)),Math.min.apply(Math,ta(v)),Math.max.apply(Math,ta(g))-Math.min.apply(Math,ta(g)),Math.max.apply(Math,ta(v))-Math.min.apply(Math,ta(v))],y=w9.keypoints.map((function(e){return e.positionRaw[0]})),b=w9.keypoints.map((function(e){return e.positionRaw[1]})),w9.boxRaw=[Math.min.apply(Math,ta(y)),Math.min.apply(Math,ta(b)),Math.max.apply(Math,ta(y))-Math.min.apply(Math,ta(y)),Math.max.apply(Math,ta(b))-Math.min.apply(Math,ta(b))],x=function(){for(var e=u(w[A],2),t=e[0],r=e[1],a=[],i=function(e){var t=w9.keypoints.find((function(t){return t.part===r[e]})),i=w9.keypoints.find((function(t){return t.part===r[e+1]}));t&&i&&t.score>(n.body.minConfidence||0)&&i.score>(n.body.minConfidence||0)&&a.push([t.position,i.position])},o=0;o<r.length-1;o++)i(o);w9.annotations[t]=a},A=0,w=Object.entries(x9);A<w.length;A++)x();r([w9]);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:case"end":return e.stop()}}),e)}))),N9.apply(this,arguments)}var _9,M9,R9=["angry","disgust","fear","happy","sad","surprise","neutral"],O9=[],P9=0,F9=0,D9=Number.MAX_SAFE_INTEGER;function L9(e){return z9.apply(this,arguments)}function z9(){return(z9=Mr(Nr().mark((function e(t){var n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z7.initial&&(_9=null),_9){e.next=7;break}return e.next=4,e6(null==(n=t.face.emotion)?void 0:n.modelPath);case 4:_9=e.sent,e.next=8;break;case 7:t.debug&&pa("cached model:",_9.modelUrl);case 8:return e.abrupt("return",_9);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B9(e,t,n,r){return W9.apply(this,arguments)}function W9(){return W9=Mr(Nr().mark((function e(t,n,r,a){var i,o,s,u;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_9){e.next=2;break}return e.abrupt("return",[]);case 2:if(s=D9<((null==(i=n.face.emotion)?void 0:i.skipFrames)||0),u=((null==(o=n.face.emotion)?void 0:o.skipTime)||0)>ma()-F9,!(n.skipAllowed&&u&&s&&P9===a&&O9[r]&&O9[r].length>0)){e.next=7;break}return D9++,e.abrupt("return",O9[r]);case 7:return D9=0,e.abrupt("return",new Promise(function(){var e=Mr(Nr().mark((function e(i){var o,s,u,l,c,d,h;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=[],!(null==(o=n.face.emotion)?void 0:o.enabled)){e.next=17;break}return l={},c=(null==_9?void 0:_9.inputs[0].shape)?_9.inputs[0].shape[2]:0,l.resize=Db.resizeBilinear(t,[c,c],!1),l.channels=lf(l.resize,m6.rgb),l.grayscale=Xm(l.channels,3,!0),l.grayscaleSub=Cg(l.grayscale,m6.tf05),l.grayscaleMul=lf(l.grayscaleSub,m6.tf2),l.emotion=null==_9?void 0:_9.execute(l.grayscaleMul),F9=ma(),e.next=13,l.emotion.data();case 13:for(d=e.sent,h=0;h<d.length;h++)d[h]>((null==(s=n.face.emotion)?void 0:s.minConfidence)||0)&&u.push({score:Math.min(.99,Math.trunc(100*d[h])/100),emotion:R9[h]});u.sort((function(e,t){return t.score-e.score})),Object.keys(l).forEach((function(e){return jh(l[e])}));case 17:O9[r]=u,P9=a,i(u);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),W9.apply(this,arguments)}var j9,V9=[],H9=0,U9=0,G9=Number.MAX_SAFE_INTEGER;function X9(e){return q9.apply(this,arguments)}function q9(){return(q9=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z7.initial&&(M9=null),M9){e.next=7;break}return e.next=4,e6(t.face.mobilefacenet.modelPath);case 4:M9=e.sent,e.next=8;break;case 7:t.debug&&pa("cached model:",M9.modelUrl);case 8:return e.abrupt("return",M9);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y9(e,t,n,r){return K9.apply(this,arguments)}function K9(){return K9=Mr(Nr().mark((function e(t,n,r,a){var i,o,s,u;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M9){e.next=2;break}return e.abrupt("return",[]);case 2:if(s=G9<((null==(i=n.face.embedding)?void 0:i.skipFrames)||0),u=((null==(o=n.face.embedding)?void 0:o.skipTime)||0)>ma()-U9,!(n.skipAllowed&&u&&s&&H9===a&&V9[r])){e.next=7;break}return G9++,e.abrupt("return",V9[r]);case 7:return e.abrupt("return",new Promise(function(){var e=Mr(Nr().mark((function e(i){var o,s,u,l;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=[],!(null==(o=n.face.embedding)?void 0:o.enabled)||!(null==M9?void 0:M9.inputs[0].shape)){e.next=9;break}return(u={}).crop=Db.resizeBilinear(t,[M9.inputs[0].shape[2],M9.inputs[0].shape[1]],!1),u.data=null==M9?void 0:M9.execute(u.crop),e.next=7,u.data.data();case 7:l=e.sent,s=Array.from(l);case 9:V9[r]=s,H9=a,U9=ma(),i(s);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:case"end":return e.stop()}}),e)}))),K9.apply(this,arguments)}var Z9=0,J9=U6.leftEyeLower0,Q9=U6.rightEyeLower0,$9={leftBounds:[J9[0],J9[J9.length-1]],rightBounds:[Q9[0],Q9[Q9.length-1]]},eee=3,tee=4,nee=71,ree=76;function aee(e){return iee.apply(this,arguments)}function iee(){return(iee=Mr(Nr().mark((function e(t){var n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z7.initial&&(j9=null),j9){e.next=7;break}return e.next=4,e6(null==(n=t.face.iris)?void 0:n.modelPath);case 4:j9=e.sent,e.next=8;break;case 7:t.debug&&pa("cached model:",j9.modelUrl);case 8:return-1===(Z9=j9.inputs[0].shape?j9.inputs[0].shape[2]:0)&&(Z9=64),e.abrupt("return",j9);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oee(e,t,n,r){for(var a=0;a<q6.length;a++){var i=q6[a],o=i.key,s=i.indices,u=U6["".concat(n).concat(o)];if(!r||r.includes(o))for(var l=0;l<s.length;l++){var c=s[l];e[u[l]]=[t[c][0],t[c][1],(t[c][2]+e[u[l]][2])/2]}}}var see=function(e){return e[$9.leftBounds[0]][2]-e[$9.rightBounds[0]][2]},uee=function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=a8(r8(i8([e[n],e[r]]),2.3)),s=J6(o),u=Db.cropAndResize(t,[[o.startPoint[1]/a,o.startPoint[0]/a,o.endPoint[1]/a,o.endPoint[0]/a]],[0],[Z9,Z9]);if(i&&Z7.kernels.includes("flipleftright")){var l=Db.flipLeftRight(u);jh(u),u=l}return{box:o,boxSize:s,crop:u}},lee=function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=[],i=0;i<ree;i++){var o=e[3*i],s=e[3*i+1],u=e[3*i+2];a.push([(r?1-o/Z9:o/Z9)*n[0]+t.startPoint[0],s/Z9*n[1]+t.startPoint[1],u])}return{rawCoords:a,iris:a.slice(nee)}},cee=function(e,t,n){var r=e[U6["".concat(n,"EyeUpper0")][eee]][2],a=e[U6["".concat(n,"EyeLower0")][tee]][2],i=(r+a)/2;return t.map((function(e,t){var n=i;return 2===t?n=r:4===t&&(n=a),[e[0],e[1],n]}))};function dee(e,t,n,r){return hee.apply(this,arguments)}function hee(){return(hee=Mr(Nr().mark((function e(t,n,r,a){var i,o,s,u,l,c,d,h,p,f,m,g,v,y,b,x,A,w,k,S,C,I,E;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j9){e.next=3;break}return r.debug&&pa("face mesh iris detection requested, but model is not loaded"),e.abrupt("return",t);case 3:return i=uee(t,n,$9.leftBounds[0],$9.leftBounds[1],a,!0),o=i.box,s=i.boxSize,u=i.crop,l=uee(t,n,$9.rightBounds[0],$9.rightBounds[1],a,!0),c=l.box,d=l.boxSize,h=l.crop,p=Vf([u,h]),jh(u),jh(h),f=j9.execute(p),jh(p),e.next=12,f.data();case 12:return m=e.sent,jh(f),g=m.slice(0,3*ree),v=lee(g,o,s,!0),y=v.rawCoords,b=v.iris,x=m.slice(3*ree),A=lee(x,c,d,!1),w=A.rawCoords,k=A.iris,S=see(t),Math.abs(S)<30?(oee(t,y,"left",null),oee(t,w,"right",null)):S<1?oee(t,y,"left",["EyeUpper0","EyeLower0"]):oee(t,w,"right",["EyeUpper0","EyeLower0"]),C=cee(t,b,"left"),I=cee(t,k,"right"),E=t.concat(C).concat(I),e.abrupt("return",E);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pee(e){var t=e.map((function(e){return e[0]}));return t.push(e[e.length-1][1]),t}var fee={lips:pee([[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]]),leftEye:pee([[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]]),leftEyebrow:pee([[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]]),leftIris:pee([[474,475],[475,476],[476,477],[477,474]]),rightEye:pee([[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]]),rightEyebrow:pee([[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]]),rightIris:pee([[469,470],[470,471],[471,472],[472,469]]),faceOval:pee([[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]])},mee=Object.entries(fee).map((function(e){var t=u(e,2),n=t[0];return t[1].map((function(e){return[e,n]}))})).flat(),gee=(new Map(mee),[61,146,91,181,84,17,314,405,321,375,291,185,40,39,37,0,267,269,270,409,78,95,88,178,87,14,317,402,318,324,308,191,80,81,82,13,312,311,310,415,76,77,90,180,85,16,315,404,320,307,306,184,74,73,72,11,302,303,304,408,62,96,89,179,86,15,316,403,319,325,292,183,42,41,38,12,268,271,272,407]),vee=[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173,130,25,110,24,23,22,26,112,243,247,30,29,27,28,56,190,226,31,228,229,230,231,232,233,244,113,225,224,223,222,221,189,35,124,46,53,52,65,143,111,117,118,119,120,121,128,245,156,70,63,105,66,107,55,193],yee=[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398,359,255,339,254,253,252,256,341,463,467,260,259,257,258,286,414,446,261,448,449,450,451,452,453,464,342,445,444,443,442,441,413,265,353,276,283,282,295,372,340,346,347,348,349,350,357,465,383,300,293,334,296,336,285,417];function bee(e,t){return xee.apply(this,arguments)}function xee(){return xee=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,u,l,c;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.filter((function(e){return 160===e.size}))[0].data();case 2:return e.t0=e.sent,e.next=5,n.filter((function(e){return 10===e.size}))[0].data();case 5:return e.t1=e.sent,e.next=8,n.filter((function(e){return 142===e.size}))[0].data();case 8:return e.t2=e.sent,e.next=11,n.filter((function(e){return 10===e.size}))[1].data();case 11:return e.t3=e.sent,e.next=14,n.filter((function(e){return 142===e.size}))[1].data();case 14:for(e.t4=e.sent,r={lips:e.t0,irisL:e.t1,eyeL:e.t2,irisR:e.t3,eyeR:e.t4},a=vee.reduce((function(e,n){return e+t[n][2]}),0)/vee.length,i=0;i<r.irisL.length/2;i++)t.push([r.irisL[2*i+0],r.irisL[2*i+1],a]);for(o=yee.reduce((function(e,n){return e+t[n][2]}),0)/yee.length,s=0;s<r.irisR.length/2;s++)t.push([r.irisR[2*s+0],r.irisR[2*s+1],o]);for(u=0;u<r.eyeL.length/2;u++)t[vee[u]]=[r.eyeL[2*u+0],r.eyeL[2*u+1],t[vee[u]][2]];for(l=0;l<r.eyeR.length/2;l++)t[yee[l]]=[r.eyeR[2*l+0],r.eyeR[2*l+1],t[yee[l]][2]];for(c=0;c<r.lips.length/2;c++)t[gee[c]]=[r.lips[2*c+0],r.lips[2*c+1],t[gee[c]][2]];return e.abrupt("return",t);case 24:case"end":return e.stop()}}),e)}))),xee.apply(this,arguments)}var Aee={boxes:[],skipped:Number.MAX_SAFE_INTEGER,timestamp:0},wee=null,kee=0;function See(e,t){return Cee.apply(this,arguments)}function Cee(){return Cee=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,l,c,d,h,p,f,m,g,v,y,b,x,A;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=((null==(r=n.face.detector)?void 0:r.skipTime)||0)>ma()-Aee.timestamp,g=Aee.skipped<((null==(a=n.face.detector)?void 0:a.skipFrames)||0),n.skipAllowed&&m&&g&&0!==Aee.boxes.length){e.next=10;break}return e.next=5,C8(t,n);case 5:Aee.boxes=e.sent,Aee.timestamp=ma(),Aee.skipped=0,e.next=11;break;case 10:Aee.skipped++;case 11:v=[],y=[],b=0,x=Nr().mark((function e(r){var a,m,g,x,A,w,k,S,C,I,E,T,N,_,M,R,O,P,F,D,L,z,B;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Aee.boxes[r],m=0,g=void 0,x={id:b++,mesh:[],meshRaw:[],box:[0,0,0,0],boxRaw:[0,0,0,0],score:0,boxScore:0,faceScore:0,annotations:{}},A=m8(null==(i=n.face.detector)?void 0:i.rotation,a,t,(null==(o=n.face.mesh)?void 0:o.enabled)?kee:A8()),w=u(A,3),m=w[0],g=w[1],x.tensor=w[2],!(null==(s=null==n?void 0:n.filter)?void 0:s.equalization)){e.next=15;break}return e.next=12,P7(x.tensor);case 12:k=e.sent,jh(x.tensor),x.tensor=k;case 15:if(x.boxScore=Math.round(100*a.confidence)/100,null==(l=n.face.mesh)?void 0:l.enabled){e.next=25;break}for(x.box=$6(a,t),x.boxRaw=e8(a,t),x.score=x.boxScore,x.mesh=a.landmarks.map((function(e){return[(a.startPoint[0]+a.endPoint[0])/2+(a.endPoint[0]+a.startPoint[0])*e[0]/A8(),(a.startPoint[1]+a.endPoint[1])/2+(a.endPoint[1]+a.startPoint[1])*e[1]/A8()]})),x.meshRaw=x.mesh.map((function(e){return[e[0]/(t.shape[2]||0),e[1]/(t.shape[1]||0),(e[2]||0)/kee]})),S=0,C=Object.keys(X6);S<C.length;S++)I=C[S],x.annotations[I]=[x.mesh[X6[I]]];e.next=64;break;case 25:if(wee){e.next=29;break}n.debug&&pa("face mesh detection requested, but model is not loaded"),e.next=64;break;case 29:return E=wee.execute(x.tensor),T=E.find((function(e){return 1===e.shape[e.shape.length-1]})),N=E.find((function(e){return 1404===e.shape[e.shape.length-1]})),e.next=34,T.data();case 34:return _=e.sent,x.faceScore=Math.round(100*_[0])/100,M=Bf(N,[-1,3]),e.next=39,M.array();case 39:if(R=e.sent,!(x.faceScore<((null==(c=n.face.detector)?void 0:c.minConfidence)||1))){e.next=45;break}if(a.confidence=x.faceScore,null==(d=n.face.mesh)?void 0:d.keepInvalid)for(x.box=$6(a,t),x.boxRaw=e8(a,t),x.score=x.boxScore,x.mesh=a.landmarks.map((function(e){return[(a.startPoint[0]+a.endPoint[0])/2+(a.endPoint[0]+a.startPoint[0])*e[0]/A8(),(a.startPoint[1]+a.endPoint[1])/2+(a.endPoint[1]+a.startPoint[1])*e[1]/A8()]})),x.meshRaw=x.mesh.map((function(e){return[e[0]/(t.shape[2]||0),e[1]/(t.shape[1]||0),(e[2]||0)/kee]})),O=0,P=Object.keys(X6);O<P.length;O++)F=P[O],x.annotations[F]=[x.mesh[X6[F]]];e.next=63;break;case 45:if(!(null==(h=n.face.attention)?void 0:h.enabled)){e.next=51;break}return e.next=48,bee(R,E);case 48:R=e.sent,e.next=55;break;case 51:if(!(null==(p=n.face.iris)?void 0:p.enabled)){e.next=55;break}return e.next=54,dee(R,x.tensor,n,kee);case 54:R=e.sent;case 55:for(x.mesh=f8(R,a,m,g,kee),x.meshRaw=x.mesh.map((function(e){return[e[0]/(t.shape[2]||0),e[1]/(t.shape[1]||0),(e[2]||0)/kee]})),D=0,L=Object.keys(U6);D<L.length;D++)z=L[D],x.annotations[z]=U6[z].map((function(e){return x.mesh[e]}));x.score=x.faceScore,B=Wr(Wr({},v8(x.mesh,a)),{},{confidence:a.confidence,landmarks:a.landmarks}),x.box=$6(B,t),x.boxRaw=e8(B,t),y.push(B);case 63:jh([].concat(ta(E),[M]));case 64:x.score>((null==(f=n.face.detector)?void 0:f.minConfidence)||1)?v.push(x):jh(x.tensor);case 65:case"end":return e.stop()}}),e)})),A=0;case 16:if(!(A<Aee.boxes.length)){e.next=21;break}return e.delegateYield(x(A),"t0",18);case 18:A++,e.next=16;break;case 21:return Aee.boxes=y,e.abrupt("return",v);case 23:case"end":return e.stop()}}),e)}))),Cee.apply(this,arguments)}function Iee(e){return Eee.apply(this,arguments)}function Eee(){return(Eee=Mr(Nr().mark((function e(t){var n,r,a,i,o,s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z7.initial&&(wee=null),(null==(r=null==(n=null==t?void 0:t.face)?void 0:n.attention)?void 0:r.enabled)&&(null==wee?void 0:wee.signature)&&Object.keys((null==(a=null==wee?void 0:wee.signature)?void 0:a.outputs)||{}).length<6&&(wee=null),wee){e.next=14;break}if(!(null==(i=t.face.attention)?void 0:i.enabled)){e.next=9;break}return e.next=6,e6(null==(o=t.face.attention)?void 0:o.modelPath);case 6:wee=e.sent,e.next=12;break;case 9:return e.next=11,e6(null==(s=t.face.mesh)?void 0:s.modelPath);case 11:wee=e.sent;case 12:e.next=15;break;case 14:t.debug&&pa("cached model:",wee.modelUrl);case 15:return kee=wee.inputs[0].shape?wee.inputs[0].shape[2]:0,e.abrupt("return",wee);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Tee,Nee=K6,_ee=Y6,Mee=[],Ree=0,Oee=0,Pee=Number.MAX_SAFE_INTEGER;function Fee(e){return Dee.apply(this,arguments)}function Dee(){return(Dee=Mr(Nr().mark((function e(t){var n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z7.initial&&(Tee=null),Tee){e.next=7;break}return e.next=4,e6(null==(n=t.face.description)?void 0:n.modelPath);case 4:Tee=e.sent,e.next=8;break;case 7:t.debug&&pa("cached model:",Tee.modelUrl);case 8:return e.abrupt("return",Tee);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lee(e){var t=e.image||e.tensor||e;if(!(null==Tee?void 0:Tee.inputs[0].shape))return t;var n=Db.resizeBilinear(t,[Tee.inputs[0].shape[2],Tee.inputs[0].shape[1]],!1),r=lf(n,m6.tf255);return jh(n),r}function zee(e,t,n,r){return Bee.apply(this,arguments)}function Bee(){return Bee=Mr(Nr().mark((function e(t,n,r,a){var i,o,s,u,l,c;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Tee){e.next=2;break}return e.abrupt("return",{age:0,gender:"unknown",genderScore:0,descriptor:[]});case 2:if(l=Pee<((null==(i=n.face.description)?void 0:i.skipFrames)||0),c=((null==(o=n.face.description)?void 0:o.skipTime)||0)>ma()-Ree,!(n.skipAllowed&&l&&c&&Oee===a&&(null==(s=Mee[r])?void 0:s.age)&&(null==(u=Mee[r])?void 0:u.age)>0)){e.next=7;break}return Pee++,e.abrupt("return",Mee[r]);case 7:return Pee=0,e.abrupt("return",new Promise(function(){var e=Mr(Nr().mark((function e(i){var o,s,u,l,c,d,h,p,f,m,g,v,y,b;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u={age:0,gender:"unknown",genderScore:0,descriptor:[]},!(null==(o=n.face.description)?void 0:o.enabled)){e.next=35;break}return l=Lee(t),c=null==Tee?void 0:Tee.execute(l),Ree=ma(),jh(l),e.next=8,c.find((function(e){return 1===e.shape[1]}));case 8:return d=e.sent,e.next=11,d.data();case 11:return h=e.sent,(p=Math.trunc(200*Math.abs(h[0]-.5))/100)>((null==(s=n.face.description)?void 0:s.minConfidence)||0)&&(u.gender=h[0]<=.5?"female":"male",u.genderScore=Math.min(.99,p)),f=gf(c.find((function(e){return 100===e.shape[1]})),1),e.next=17,f.data();case 17:return m=e.sent[0],jh(f),g=c.find((function(e){return 100===e.shape[1]})),e.next=22,g.data();case 22:if(v=e.sent,u.age=Math.round(v[m-1]>v[m+1]?10*m-100*v[m-1]:10*m+100*v[m+1])/10,y=c.find((function(e){return 1024===e.shape[1]})),!y){e.next=31;break}return e.next=28,y.data();case 28:e.t0=e.sent,e.next=32;break;case 31:e.t0=[];case 32:b=e.t0,u.descriptor=Array.from(b),c.forEach((function(e){return jh(e)}));case 35:Mee[r]=u,Oee=a,i(u);case 38:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),Bee.apply(this,arguments)}function Wee(e){return[Math.abs(e.endPoint[0]-e.startPoint[0]),Math.abs(e.endPoint[1]-e.startPoint[1])]}function jee(e){return[e.startPoint[0]+(e.endPoint[0]-e.startPoint[0])/2,e.startPoint[1]+(e.endPoint[1]-e.startPoint[1])/2]}function Vee(e,t,n){var r=t.shape[1],a=t.shape[2],i=[[e.startPoint[1]/r,e.startPoint[0]/a,e.endPoint[1]/r,e.endPoint[0]/a]];return Db.cropAndResize(t,i,[0],n)}function Hee(e,t){return{startPoint:[e.startPoint[0]*t[0],e.startPoint[1]*t[1]],endPoint:[e.endPoint[0]*t[0],e.endPoint[1]*t[1]],palmLandmarks:e.palmLandmarks.map((function(e){return[e[0]*t[0],e[1]*t[1]]})),confidence:e.confidence}}function Uee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5,n=jee(e),r=Wee(e),a=[t*r[0]/2,t*r[1]/2],i=[n[0]-a[0],n[1]-a[1]],o=[n[0]+a[0],n[1]+a[1]];return{startPoint:i,endPoint:o,palmLandmarks:e.palmLandmarks}}function Gee(e){var t=jee(e),n=Wee(e),r=Math.max.apply(Math,ta(n))/2;return{startPoint:[t[0]-r,t[1]-r],endPoint:[t[0]+r,t[1]+r],palmLandmarks:e.palmLandmarks}}function Xee(e,t){var n,r=Math.PI/2-Math.atan2(-(t[1]-e[1]),t[0]-e[0]);return(n=r)-2*Math.PI*Math.floor((n+Math.PI)/(2*Math.PI))}var qee=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]};function Yee(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function Kee(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r][t]);return n}function Zee(e,t){for(var n=[],r=e.length,a=0;a<r;a++){n.push([]);for(var i=0;i<r;i++)n[a].push(Yee(e[a],Kee(t,i)))}return n}function Jee(e,t){var n=Math.cos(e),r=Math.sin(e),a=[[n,-r,0],[r,n,0],[0,0,1]],i=Zee(qee(t[0],t[1]),a);return Zee(i,qee(-t[0],-t[1]))}function Qee(e,t){return[Yee(e,t[0]),Yee(e,t[1])]}var $ee=[{x:.015625,y:.015625},{x:.015625,y:.015625},{x:.046875,y:.015625},{x:.046875,y:.015625},{x:.078125,y:.015625},{x:.078125,y:.015625},{x:.109375,y:.015625},{x:.109375,y:.015625},{x:.140625,y:.015625},{x:.140625,y:.015625},{x:.171875,y:.015625},{x:.171875,y:.015625},{x:.203125,y:.015625},{x:.203125,y:.015625},{x:.234375,y:.015625},{x:.234375,y:.015625},{x:.265625,y:.015625},{x:.265625,y:.015625},{x:.296875,y:.015625},{x:.296875,y:.015625},{x:.328125,y:.015625},{x:.328125,y:.015625},{x:.359375,y:.015625},{x:.359375,y:.015625},{x:.390625,y:.015625},{x:.390625,y:.015625},{x:.421875,y:.015625},{x:.421875,y:.015625},{x:.453125,y:.015625},{x:.453125,y:.015625},{x:.484375,y:.015625},{x:.484375,y:.015625},{x:.515625,y:.015625},{x:.515625,y:.015625},{x:.546875,y:.015625},{x:.546875,y:.015625},{x:.578125,y:.015625},{x:.578125,y:.015625},{x:.609375,y:.015625},{x:.609375,y:.015625},{x:.640625,y:.015625},{x:.640625,y:.015625},{x:.671875,y:.015625},{x:.671875,y:.015625},{x:.703125,y:.015625},{x:.703125,y:.015625},{x:.734375,y:.015625},{x:.734375,y:.015625},{x:.765625,y:.015625},{x:.765625,y:.015625},{x:.796875,y:.015625},{x:.796875,y:.015625},{x:.828125,y:.015625},{x:.828125,y:.015625},{x:.859375,y:.015625},{x:.859375,y:.015625},{x:.890625,y:.015625},{x:.890625,y:.015625},{x:.921875,y:.015625},{x:.921875,y:.015625},{x:.953125,y:.015625},{x:.953125,y:.015625},{x:.984375,y:.015625},{x:.984375,y:.015625},{x:.015625,y:.046875},{x:.015625,y:.046875},{x:.046875,y:.046875},{x:.046875,y:.046875},{x:.078125,y:.046875},{x:.078125,y:.046875},{x:.109375,y:.046875},{x:.109375,y:.046875},{x:.140625,y:.046875},{x:.140625,y:.046875},{x:.171875,y:.046875},{x:.171875,y:.046875},{x:.203125,y:.046875},{x:.203125,y:.046875},{x:.234375,y:.046875},{x:.234375,y:.046875},{x:.265625,y:.046875},{x:.265625,y:.046875},{x:.296875,y:.046875},{x:.296875,y:.046875},{x:.328125,y:.046875},{x:.328125,y:.046875},{x:.359375,y:.046875},{x:.359375,y:.046875},{x:.390625,y:.046875},{x:.390625,y:.046875},{x:.421875,y:.046875},{x:.421875,y:.046875},{x:.453125,y:.046875},{x:.453125,y:.046875},{x:.484375,y:.046875},{x:.484375,y:.046875},{x:.515625,y:.046875},{x:.515625,y:.046875},{x:.546875,y:.046875},{x:.546875,y:.046875},{x:.578125,y:.046875},{x:.578125,y:.046875},{x:.609375,y:.046875},{x:.609375,y:.046875},{x:.640625,y:.046875},{x:.640625,y:.046875},{x:.671875,y:.046875},{x:.671875,y:.046875},{x:.703125,y:.046875},{x:.703125,y:.046875},{x:.734375,y:.046875},{x:.734375,y:.046875},{x:.765625,y:.046875},{x:.765625,y:.046875},{x:.796875,y:.046875},{x:.796875,y:.046875},{x:.828125,y:.046875},{x:.828125,y:.046875},{x:.859375,y:.046875},{x:.859375,y:.046875},{x:.890625,y:.046875},{x:.890625,y:.046875},{x:.921875,y:.046875},{x:.921875,y:.046875},{x:.953125,y:.046875},{x:.953125,y:.046875},{x:.984375,y:.046875},{x:.984375,y:.046875},{x:.015625,y:.078125},{x:.015625,y:.078125},{x:.046875,y:.078125},{x:.046875,y:.078125},{x:.078125,y:.078125},{x:.078125,y:.078125},{x:.109375,y:.078125},{x:.109375,y:.078125},{x:.140625,y:.078125},{x:.140625,y:.078125},{x:.171875,y:.078125},{x:.171875,y:.078125},{x:.203125,y:.078125},{x:.203125,y:.078125},{x:.234375,y:.078125},{x:.234375,y:.078125},{x:.265625,y:.078125},{x:.265625,y:.078125},{x:.296875,y:.078125},{x:.296875,y:.078125},{x:.328125,y:.078125},{x:.328125,y:.078125},{x:.359375,y:.078125},{x:.359375,y:.078125},{x:.390625,y:.078125},{x:.390625,y:.078125},{x:.421875,y:.078125},{x:.421875,y:.078125},{x:.453125,y:.078125},{x:.453125,y:.078125},{x:.484375,y:.078125},{x:.484375,y:.078125},{x:.515625,y:.078125},{x:.515625,y:.078125},{x:.546875,y:.078125},{x:.546875,y:.078125},{x:.578125,y:.078125},{x:.578125,y:.078125},{x:.609375,y:.078125},{x:.609375,y:.078125},{x:.640625,y:.078125},{x:.640625,y:.078125},{x:.671875,y:.078125},{x:.671875,y:.078125},{x:.703125,y:.078125},{x:.703125,y:.078125},{x:.734375,y:.078125},{x:.734375,y:.078125},{x:.765625,y:.078125},{x:.765625,y:.078125},{x:.796875,y:.078125},{x:.796875,y:.078125},{x:.828125,y:.078125},{x:.828125,y:.078125},{x:.859375,y:.078125},{x:.859375,y:.078125},{x:.890625,y:.078125},{x:.890625,y:.078125},{x:.921875,y:.078125},{x:.921875,y:.078125},{x:.953125,y:.078125},{x:.953125,y:.078125},{x:.984375,y:.078125},{x:.984375,y:.078125},{x:.015625,y:.109375},{x:.015625,y:.109375},{x:.046875,y:.109375},{x:.046875,y:.109375},{x:.078125,y:.109375},{x:.078125,y:.109375},{x:.109375,y:.109375},{x:.109375,y:.109375},{x:.140625,y:.109375},{x:.140625,y:.109375},{x:.171875,y:.109375},{x:.171875,y:.109375},{x:.203125,y:.109375},{x:.203125,y:.109375},{x:.234375,y:.109375},{x:.234375,y:.109375},{x:.265625,y:.109375},{x:.265625,y:.109375},{x:.296875,y:.109375},{x:.296875,y:.109375},{x:.328125,y:.109375},{x:.328125,y:.109375},{x:.359375,y:.109375},{x:.359375,y:.109375},{x:.390625,y:.109375},{x:.390625,y:.109375},{x:.421875,y:.109375},{x:.421875,y:.109375},{x:.453125,y:.109375},{x:.453125,y:.109375},{x:.484375,y:.109375},{x:.484375,y:.109375},{x:.515625,y:.109375},{x:.515625,y:.109375},{x:.546875,y:.109375},{x:.546875,y:.109375},{x:.578125,y:.109375},{x:.578125,y:.109375},{x:.609375,y:.109375},{x:.609375,y:.109375},{x:.640625,y:.109375},{x:.640625,y:.109375},{x:.671875,y:.109375},{x:.671875,y:.109375},{x:.703125,y:.109375},{x:.703125,y:.109375},{x:.734375,y:.109375},{x:.734375,y:.109375},{x:.765625,y:.109375},{x:.765625,y:.109375},{x:.796875,y:.109375},{x:.796875,y:.109375},{x:.828125,y:.109375},{x:.828125,y:.109375},{x:.859375,y:.109375},{x:.859375,y:.109375},{x:.890625,y:.109375},{x:.890625,y:.109375},{x:.921875,y:.109375},{x:.921875,y:.109375},{x:.953125,y:.109375},{x:.953125,y:.109375},{x:.984375,y:.109375},{x:.984375,y:.109375},{x:.015625,y:.140625},{x:.015625,y:.140625},{x:.046875,y:.140625},{x:.046875,y:.140625},{x:.078125,y:.140625},{x:.078125,y:.140625},{x:.109375,y:.140625},{x:.109375,y:.140625},{x:.140625,y:.140625},{x:.140625,y:.140625},{x:.171875,y:.140625},{x:.171875,y:.140625},{x:.203125,y:.140625},{x:.203125,y:.140625},{x:.234375,y:.140625},{x:.234375,y:.140625},{x:.265625,y:.140625},{x:.265625,y:.140625},{x:.296875,y:.140625},{x:.296875,y:.140625},{x:.328125,y:.140625},{x:.328125,y:.140625},{x:.359375,y:.140625},{x:.359375,y:.140625},{x:.390625,y:.140625},{x:.390625,y:.140625},{x:.421875,y:.140625},{x:.421875,y:.140625},{x:.453125,y:.140625},{x:.453125,y:.140625},{x:.484375,y:.140625},{x:.484375,y:.140625},{x:.515625,y:.140625},{x:.515625,y:.140625},{x:.546875,y:.140625},{x:.546875,y:.140625},{x:.578125,y:.140625},{x:.578125,y:.140625},{x:.609375,y:.140625},{x:.609375,y:.140625},{x:.640625,y:.140625},{x:.640625,y:.140625},{x:.671875,y:.140625},{x:.671875,y:.140625},{x:.703125,y:.140625},{x:.703125,y:.140625},{x:.734375,y:.140625},{x:.734375,y:.140625},{x:.765625,y:.140625},{x:.765625,y:.140625},{x:.796875,y:.140625},{x:.796875,y:.140625},{x:.828125,y:.140625},{x:.828125,y:.140625},{x:.859375,y:.140625},{x:.859375,y:.140625},{x:.890625,y:.140625},{x:.890625,y:.140625},{x:.921875,y:.140625},{x:.921875,y:.140625},{x:.953125,y:.140625},{x:.953125,y:.140625},{x:.984375,y:.140625},{x:.984375,y:.140625},{x:.015625,y:.171875},{x:.015625,y:.171875},{x:.046875,y:.171875},{x:.046875,y:.171875},{x:.078125,y:.171875},{x:.078125,y:.171875},{x:.109375,y:.171875},{x:.109375,y:.171875},{x:.140625,y:.171875},{x:.140625,y:.171875},{x:.171875,y:.171875},{x:.171875,y:.171875},{x:.203125,y:.171875},{x:.203125,y:.171875},{x:.234375,y:.171875},{x:.234375,y:.171875},{x:.265625,y:.171875},{x:.265625,y:.171875},{x:.296875,y:.171875},{x:.296875,y:.171875},{x:.328125,y:.171875},{x:.328125,y:.171875},{x:.359375,y:.171875},{x:.359375,y:.171875},{x:.390625,y:.171875},{x:.390625,y:.171875},{x:.421875,y:.171875},{x:.421875,y:.171875},{x:.453125,y:.171875},{x:.453125,y:.171875},{x:.484375,y:.171875},{x:.484375,y:.171875},{x:.515625,y:.171875},{x:.515625,y:.171875},{x:.546875,y:.171875},{x:.546875,y:.171875},{x:.578125,y:.171875},{x:.578125,y:.171875},{x:.609375,y:.171875},{x:.609375,y:.171875},{x:.640625,y:.171875},{x:.640625,y:.171875},{x:.671875,y:.171875},{x:.671875,y:.171875},{x:.703125,y:.171875},{x:.703125,y:.171875},{x:.734375,y:.171875},{x:.734375,y:.171875},{x:.765625,y:.171875},{x:.765625,y:.171875},{x:.796875,y:.171875},{x:.796875,y:.171875},{x:.828125,y:.171875},{x:.828125,y:.171875},{x:.859375,y:.171875},{x:.859375,y:.171875},{x:.890625,y:.171875},{x:.890625,y:.171875},{x:.921875,y:.171875},{x:.921875,y:.171875},{x:.953125,y:.171875},{x:.953125,y:.171875},{x:.984375,y:.171875},{x:.984375,y:.171875},{x:.015625,y:.203125},{x:.015625,y:.203125},{x:.046875,y:.203125},{x:.046875,y:.203125},{x:.078125,y:.203125},{x:.078125,y:.203125},{x:.109375,y:.203125},{x:.109375,y:.203125},{x:.140625,y:.203125},{x:.140625,y:.203125},{x:.171875,y:.203125},{x:.171875,y:.203125},{x:.203125,y:.203125},{x:.203125,y:.203125},{x:.234375,y:.203125},{x:.234375,y:.203125},{x:.265625,y:.203125},{x:.265625,y:.203125},{x:.296875,y:.203125},{x:.296875,y:.203125},{x:.328125,y:.203125},{x:.328125,y:.203125},{x:.359375,y:.203125},{x:.359375,y:.203125},{x:.390625,y:.203125},{x:.390625,y:.203125},{x:.421875,y:.203125},{x:.421875,y:.203125},{x:.453125,y:.203125},{x:.453125,y:.203125},{x:.484375,y:.203125},{x:.484375,y:.203125},{x:.515625,y:.203125},{x:.515625,y:.203125},{x:.546875,y:.203125},{x:.546875,y:.203125},{x:.578125,y:.203125},{x:.578125,y:.203125},{x:.609375,y:.203125},{x:.609375,y:.203125},{x:.640625,y:.203125},{x:.640625,y:.203125},{x:.671875,y:.203125},{x:.671875,y:.203125},{x:.703125,y:.203125},{x:.703125,y:.203125},{x:.734375,y:.203125},{x:.734375,y:.203125},{x:.765625,y:.203125},{x:.765625,y:.203125},{x:.796875,y:.203125},{x:.796875,y:.203125},{x:.828125,y:.203125},{x:.828125,y:.203125},{x:.859375,y:.203125},{x:.859375,y:.203125},{x:.890625,y:.203125},{x:.890625,y:.203125},{x:.921875,y:.203125},{x:.921875,y:.203125},{x:.953125,y:.203125},{x:.953125,y:.203125},{x:.984375,y:.203125},{x:.984375,y:.203125},{x:.015625,y:.234375},{x:.015625,y:.234375},{x:.046875,y:.234375},{x:.046875,y:.234375},{x:.078125,y:.234375},{x:.078125,y:.234375},{x:.109375,y:.234375},{x:.109375,y:.234375},{x:.140625,y:.234375},{x:.140625,y:.234375},{x:.171875,y:.234375},{x:.171875,y:.234375},{x:.203125,y:.234375},{x:.203125,y:.234375},{x:.234375,y:.234375},{x:.234375,y:.234375},{x:.265625,y:.234375},{x:.265625,y:.234375},{x:.296875,y:.234375},{x:.296875,y:.234375},{x:.328125,y:.234375},{x:.328125,y:.234375},{x:.359375,y:.234375},{x:.359375,y:.234375},{x:.390625,y:.234375},{x:.390625,y:.234375},{x:.421875,y:.234375},{x:.421875,y:.234375},{x:.453125,y:.234375},{x:.453125,y:.234375},{x:.484375,y:.234375},{x:.484375,y:.234375},{x:.515625,y:.234375},{x:.515625,y:.234375},{x:.546875,y:.234375},{x:.546875,y:.234375},{x:.578125,y:.234375},{x:.578125,y:.234375},{x:.609375,y:.234375},{x:.609375,y:.234375},{x:.640625,y:.234375},{x:.640625,y:.234375},{x:.671875,y:.234375},{x:.671875,y:.234375},{x:.703125,y:.234375},{x:.703125,y:.234375},{x:.734375,y:.234375},{x:.734375,y:.234375},{x:.765625,y:.234375},{x:.765625,y:.234375},{x:.796875,y:.234375},{x:.796875,y:.234375},{x:.828125,y:.234375},{x:.828125,y:.234375},{x:.859375,y:.234375},{x:.859375,y:.234375},{x:.890625,y:.234375},{x:.890625,y:.234375},{x:.921875,y:.234375},{x:.921875,y:.234375},{x:.953125,y:.234375},{x:.953125,y:.234375},{x:.984375,y:.234375},{x:.984375,y:.234375},{x:.015625,y:.265625},{x:.015625,y:.265625},{x:.046875,y:.265625},{x:.046875,y:.265625},{x:.078125,y:.265625},{x:.078125,y:.265625},{x:.109375,y:.265625},{x:.109375,y:.265625},{x:.140625,y:.265625},{x:.140625,y:.265625},{x:.171875,y:.265625},{x:.171875,y:.265625},{x:.203125,y:.265625},{x:.203125,y:.265625},{x:.234375,y:.265625},{x:.234375,y:.265625},{x:.265625,y:.265625},{x:.265625,y:.265625},{x:.296875,y:.265625},{x:.296875,y:.265625},{x:.328125,y:.265625},{x:.328125,y:.265625},{x:.359375,y:.265625},{x:.359375,y:.265625},{x:.390625,y:.265625},{x:.390625,y:.265625},{x:.421875,y:.265625},{x:.421875,y:.265625},{x:.453125,y:.265625},{x:.453125,y:.265625},{x:.484375,y:.265625},{x:.484375,y:.265625},{x:.515625,y:.265625},{x:.515625,y:.265625},{x:.546875,y:.265625},{x:.546875,y:.265625},{x:.578125,y:.265625},{x:.578125,y:.265625},{x:.609375,y:.265625},{x:.609375,y:.265625},{x:.640625,y:.265625},{x:.640625,y:.265625},{x:.671875,y:.265625},{x:.671875,y:.265625},{x:.703125,y:.265625},{x:.703125,y:.265625},{x:.734375,y:.265625},{x:.734375,y:.265625},{x:.765625,y:.265625},{x:.765625,y:.265625},{x:.796875,y:.265625},{x:.796875,y:.265625},{x:.828125,y:.265625},{x:.828125,y:.265625},{x:.859375,y:.265625},{x:.859375,y:.265625},{x:.890625,y:.265625},{x:.890625,y:.265625},{x:.921875,y:.265625},{x:.921875,y:.265625},{x:.953125,y:.265625},{x:.953125,y:.265625},{x:.984375,y:.265625},{x:.984375,y:.265625},{x:.015625,y:.296875},{x:.015625,y:.296875},{x:.046875,y:.296875},{x:.046875,y:.296875},{x:.078125,y:.296875},{x:.078125,y:.296875},{x:.109375,y:.296875},{x:.109375,y:.296875},{x:.140625,y:.296875},{x:.140625,y:.296875},{x:.171875,y:.296875},{x:.171875,y:.296875},{x:.203125,y:.296875},{x:.203125,y:.296875},{x:.234375,y:.296875},{x:.234375,y:.296875},{x:.265625,y:.296875},{x:.265625,y:.296875},{x:.296875,y:.296875},{x:.296875,y:.296875},{x:.328125,y:.296875},{x:.328125,y:.296875},{x:.359375,y:.296875},{x:.359375,y:.296875},{x:.390625,y:.296875},{x:.390625,y:.296875},{x:.421875,y:.296875},{x:.421875,y:.296875},{x:.453125,y:.296875},{x:.453125,y:.296875},{x:.484375,y:.296875},{x:.484375,y:.296875},{x:.515625,y:.296875},{x:.515625,y:.296875},{x:.546875,y:.296875},{x:.546875,y:.296875},{x:.578125,y:.296875},{x:.578125,y:.296875},{x:.609375,y:.296875},{x:.609375,y:.296875},{x:.640625,y:.296875},{x:.640625,y:.296875},{x:.671875,y:.296875},{x:.671875,y:.296875},{x:.703125,y:.296875},{x:.703125,y:.296875},{x:.734375,y:.296875},{x:.734375,y:.296875},{x:.765625,y:.296875},{x:.765625,y:.296875},{x:.796875,y:.296875},{x:.796875,y:.296875},{x:.828125,y:.296875},{x:.828125,y:.296875},{x:.859375,y:.296875},{x:.859375,y:.296875},{x:.890625,y:.296875},{x:.890625,y:.296875},{x:.921875,y:.296875},{x:.921875,y:.296875},{x:.953125,y:.296875},{x:.953125,y:.296875},{x:.984375,y:.296875},{x:.984375,y:.296875},{x:.015625,y:.328125},{x:.015625,y:.328125},{x:.046875,y:.328125},{x:.046875,y:.328125},{x:.078125,y:.328125},{x:.078125,y:.328125},{x:.109375,y:.328125},{x:.109375,y:.328125},{x:.140625,y:.328125},{x:.140625,y:.328125},{x:.171875,y:.328125},{x:.171875,y:.328125},{x:.203125,y:.328125},{x:.203125,y:.328125},{x:.234375,y:.328125},{x:.234375,y:.328125},{x:.265625,y:.328125},{x:.265625,y:.328125},{x:.296875,y:.328125},{x:.296875,y:.328125},{x:.328125,y:.328125},{x:.328125,y:.328125},{x:.359375,y:.328125},{x:.359375,y:.328125},{x:.390625,y:.328125},{x:.390625,y:.328125},{x:.421875,y:.328125},{x:.421875,y:.328125},{x:.453125,y:.328125},{x:.453125,y:.328125},{x:.484375,y:.328125},{x:.484375,y:.328125},{x:.515625,y:.328125},{x:.515625,y:.328125},{x:.546875,y:.328125},{x:.546875,y:.328125},{x:.578125,y:.328125},{x:.578125,y:.328125},{x:.609375,y:.328125},{x:.609375,y:.328125},{x:.640625,y:.328125},{x:.640625,y:.328125},{x:.671875,y:.328125},{x:.671875,y:.328125},{x:.703125,y:.328125},{x:.703125,y:.328125},{x:.734375,y:.328125},{x:.734375,y:.328125},{x:.765625,y:.328125},{x:.765625,y:.328125},{x:.796875,y:.328125},{x:.796875,y:.328125},{x:.828125,y:.328125},{x:.828125,y:.328125},{x:.859375,y:.328125},{x:.859375,y:.328125},{x:.890625,y:.328125},{x:.890625,y:.328125},{x:.921875,y:.328125},{x:.921875,y:.328125},{x:.953125,y:.328125},{x:.953125,y:.328125},{x:.984375,y:.328125},{x:.984375,y:.328125},{x:.015625,y:.359375},{x:.015625,y:.359375},{x:.046875,y:.359375},{x:.046875,y:.359375},{x:.078125,y:.359375},{x:.078125,y:.359375},{x:.109375,y:.359375},{x:.109375,y:.359375},{x:.140625,y:.359375},{x:.140625,y:.359375},{x:.171875,y:.359375},{x:.171875,y:.359375},{x:.203125,y:.359375},{x:.203125,y:.359375},{x:.234375,y:.359375},{x:.234375,y:.359375},{x:.265625,y:.359375},{x:.265625,y:.359375},{x:.296875,y:.359375},{x:.296875,y:.359375},{x:.328125,y:.359375},{x:.328125,y:.359375},{x:.359375,y:.359375},{x:.359375,y:.359375},{x:.390625,y:.359375},{x:.390625,y:.359375},{x:.421875,y:.359375},{x:.421875,y:.359375},{x:.453125,y:.359375},{x:.453125,y:.359375},{x:.484375,y:.359375},{x:.484375,y:.359375},{x:.515625,y:.359375},{x:.515625,y:.359375},{x:.546875,y:.359375},{x:.546875,y:.359375},{x:.578125,y:.359375},{x:.578125,y:.359375},{x:.609375,y:.359375},{x:.609375,y:.359375},{x:.640625,y:.359375},{x:.640625,y:.359375},{x:.671875,y:.359375},{x:.671875,y:.359375},{x:.703125,y:.359375},{x:.703125,y:.359375},{x:.734375,y:.359375},{x:.734375,y:.359375},{x:.765625,y:.359375},{x:.765625,y:.359375},{x:.796875,y:.359375},{x:.796875,y:.359375},{x:.828125,y:.359375},{x:.828125,y:.359375},{x:.859375,y:.359375},{x:.859375,y:.359375},{x:.890625,y:.359375},{x:.890625,y:.359375},{x:.921875,y:.359375},{x:.921875,y:.359375},{x:.953125,y:.359375},{x:.953125,y:.359375},{x:.984375,y:.359375},{x:.984375,y:.359375},{x:.015625,y:.390625},{x:.015625,y:.390625},{x:.046875,y:.390625},{x:.046875,y:.390625},{x:.078125,y:.390625},{x:.078125,y:.390625},{x:.109375,y:.390625},{x:.109375,y:.390625},{x:.140625,y:.390625},{x:.140625,y:.390625},{x:.171875,y:.390625},{x:.171875,y:.390625},{x:.203125,y:.390625},{x:.203125,y:.390625},{x:.234375,y:.390625},{x:.234375,y:.390625},{x:.265625,y:.390625},{x:.265625,y:.390625},{x:.296875,y:.390625},{x:.296875,y:.390625},{x:.328125,y:.390625},{x:.328125,y:.390625},{x:.359375,y:.390625},{x:.359375,y:.390625},{x:.390625,y:.390625},{x:.390625,y:.390625},{x:.421875,y:.390625},{x:.421875,y:.390625},{x:.453125,y:.390625},{x:.453125,y:.390625},{x:.484375,y:.390625},{x:.484375,y:.390625},{x:.515625,y:.390625},{x:.515625,y:.390625},{x:.546875,y:.390625},{x:.546875,y:.390625},{x:.578125,y:.390625},{x:.578125,y:.390625},{x:.609375,y:.390625},{x:.609375,y:.390625},{x:.640625,y:.390625},{x:.640625,y:.390625},{x:.671875,y:.390625},{x:.671875,y:.390625},{x:.703125,y:.390625},{x:.703125,y:.390625},{x:.734375,y:.390625},{x:.734375,y:.390625},{x:.765625,y:.390625},{x:.765625,y:.390625},{x:.796875,y:.390625},{x:.796875,y:.390625},{x:.828125,y:.390625},{x:.828125,y:.390625},{x:.859375,y:.390625},{x:.859375,y:.390625},{x:.890625,y:.390625},{x:.890625,y:.390625},{x:.921875,y:.390625},{x:.921875,y:.390625},{x:.953125,y:.390625},{x:.953125,y:.390625},{x:.984375,y:.390625},{x:.984375,y:.390625},{x:.015625,y:.421875},{x:.015625,y:.421875},{x:.046875,y:.421875},{x:.046875,y:.421875},{x:.078125,y:.421875},{x:.078125,y:.421875},{x:.109375,y:.421875},{x:.109375,y:.421875},{x:.140625,y:.421875},{x:.140625,y:.421875},{x:.171875,y:.421875},{x:.171875,y:.421875},{x:.203125,y:.421875},{x:.203125,y:.421875},{x:.234375,y:.421875},{x:.234375,y:.421875},{x:.265625,y:.421875},{x:.265625,y:.421875},{x:.296875,y:.421875},{x:.296875,y:.421875},{x:.328125,y:.421875},{x:.328125,y:.421875},{x:.359375,y:.421875},{x:.359375,y:.421875},{x:.390625,y:.421875},{x:.390625,y:.421875},{x:.421875,y:.421875},{x:.421875,y:.421875},{x:.453125,y:.421875},{x:.453125,y:.421875},{x:.484375,y:.421875},{x:.484375,y:.421875},{x:.515625,y:.421875},{x:.515625,y:.421875},{x:.546875,y:.421875},{x:.546875,y:.421875},{x:.578125,y:.421875},{x:.578125,y:.421875},{x:.609375,y:.421875},{x:.609375,y:.421875},{x:.640625,y:.421875},{x:.640625,y:.421875},{x:.671875,y:.421875},{x:.671875,y:.421875},{x:.703125,y:.421875},{x:.703125,y:.421875},{x:.734375,y:.421875},{x:.734375,y:.421875},{x:.765625,y:.421875},{x:.765625,y:.421875},{x:.796875,y:.421875},{x:.796875,y:.421875},{x:.828125,y:.421875},{x:.828125,y:.421875},{x:.859375,y:.421875},{x:.859375,y:.421875},{x:.890625,y:.421875},{x:.890625,y:.421875},{x:.921875,y:.421875},{x:.921875,y:.421875},{x:.953125,y:.421875},{x:.953125,y:.421875},{x:.984375,y:.421875},{x:.984375,y:.421875},{x:.015625,y:.453125},{x:.015625,y:.453125},{x:.046875,y:.453125},{x:.046875,y:.453125},{x:.078125,y:.453125},{x:.078125,y:.453125},{x:.109375,y:.453125},{x:.109375,y:.453125},{x:.140625,y:.453125},{x:.140625,y:.453125},{x:.171875,y:.453125},{x:.171875,y:.453125},{x:.203125,y:.453125},{x:.203125,y:.453125},{x:.234375,y:.453125},{x:.234375,y:.453125},{x:.265625,y:.453125},{x:.265625,y:.453125},{x:.296875,y:.453125},{x:.296875,y:.453125},{x:.328125,y:.453125},{x:.328125,y:.453125},{x:.359375,y:.453125},{x:.359375,y:.453125},{x:.390625,y:.453125},{x:.390625,y:.453125},{x:.421875,y:.453125},{x:.421875,y:.453125},{x:.453125,y:.453125},{x:.453125,y:.453125},{x:.484375,y:.453125},{x:.484375,y:.453125},{x:.515625,y:.453125},{x:.515625,y:.453125},{x:.546875,y:.453125},{x:.546875,y:.453125},{x:.578125,y:.453125},{x:.578125,y:.453125},{x:.609375,y:.453125},{x:.609375,y:.453125},{x:.640625,y:.453125},{x:.640625,y:.453125},{x:.671875,y:.453125},{x:.671875,y:.453125},{x:.703125,y:.453125},{x:.703125,y:.453125},{x:.734375,y:.453125},{x:.734375,y:.453125},{x:.765625,y:.453125},{x:.765625,y:.453125},{x:.796875,y:.453125},{x:.796875,y:.453125},{x:.828125,y:.453125},{x:.828125,y:.453125},{x:.859375,y:.453125},{x:.859375,y:.453125},{x:.890625,y:.453125},{x:.890625,y:.453125},{x:.921875,y:.453125},{x:.921875,y:.453125},{x:.953125,y:.453125},{x:.953125,y:.453125},{x:.984375,y:.453125},{x:.984375,y:.453125},{x:.015625,y:.484375},{x:.015625,y:.484375},{x:.046875,y:.484375},{x:.046875,y:.484375},{x:.078125,y:.484375},{x:.078125,y:.484375},{x:.109375,y:.484375},{x:.109375,y:.484375},{x:.140625,y:.484375},{x:.140625,y:.484375},{x:.171875,y:.484375},{x:.171875,y:.484375},{x:.203125,y:.484375},{x:.203125,y:.484375},{x:.234375,y:.484375},{x:.234375,y:.484375},{x:.265625,y:.484375},{x:.265625,y:.484375},{x:.296875,y:.484375},{x:.296875,y:.484375},{x:.328125,y:.484375},{x:.328125,y:.484375},{x:.359375,y:.484375},{x:.359375,y:.484375},{x:.390625,y:.484375},{x:.390625,y:.484375},{x:.421875,y:.484375},{x:.421875,y:.484375},{x:.453125,y:.484375},{x:.453125,y:.484375},{x:.484375,y:.484375},{x:.484375,y:.484375},{x:.515625,y:.484375},{x:.515625,y:.484375},{x:.546875,y:.484375},{x:.546875,y:.484375},{x:.578125,y:.484375},{x:.578125,y:.484375},{x:.609375,y:.484375},{x:.609375,y:.484375},{x:.640625,y:.484375},{x:.640625,y:.484375},{x:.671875,y:.484375},{x:.671875,y:.484375},{x:.703125,y:.484375},{x:.703125,y:.484375},{x:.734375,y:.484375},{x:.734375,y:.484375},{x:.765625,y:.484375},{x:.765625,y:.484375},{x:.796875,y:.484375},{x:.796875,y:.484375},{x:.828125,y:.484375},{x:.828125,y:.484375},{x:.859375,y:.484375},{x:.859375,y:.484375},{x:.890625,y:.484375},{x:.890625,y:.484375},{x:.921875,y:.484375},{x:.921875,y:.484375},{x:.953125,y:.484375},{x:.953125,y:.484375},{x:.984375,y:.484375},{x:.984375,y:.484375},{x:.015625,y:.515625},{x:.015625,y:.515625},{x:.046875,y:.515625},{x:.046875,y:.515625},{x:.078125,y:.515625},{x:.078125,y:.515625},{x:.109375,y:.515625},{x:.109375,y:.515625},{x:.140625,y:.515625},{x:.140625,y:.515625},{x:.171875,y:.515625},{x:.171875,y:.515625},{x:.203125,y:.515625},{x:.203125,y:.515625},{x:.234375,y:.515625},{x:.234375,y:.515625},{x:.265625,y:.515625},{x:.265625,y:.515625},{x:.296875,y:.515625},{x:.296875,y:.515625},{x:.328125,y:.515625},{x:.328125,y:.515625},{x:.359375,y:.515625},{x:.359375,y:.515625},{x:.390625,y:.515625},{x:.390625,y:.515625},{x:.421875,y:.515625},{x:.421875,y:.515625},{x:.453125,y:.515625},{x:.453125,y:.515625},{x:.484375,y:.515625},{x:.484375,y:.515625},{x:.515625,y:.515625},{x:.515625,y:.515625},{x:.546875,y:.515625},{x:.546875,y:.515625},{x:.578125,y:.515625},{x:.578125,y:.515625},{x:.609375,y:.515625},{x:.609375,y:.515625},{x:.640625,y:.515625},{x:.640625,y:.515625},{x:.671875,y:.515625},{x:.671875,y:.515625},{x:.703125,y:.515625},{x:.703125,y:.515625},{x:.734375,y:.515625},{x:.734375,y:.515625},{x:.765625,y:.515625},{x:.765625,y:.515625},{x:.796875,y:.515625},{x:.796875,y:.515625},{x:.828125,y:.515625},{x:.828125,y:.515625},{x:.859375,y:.515625},{x:.859375,y:.515625},{x:.890625,y:.515625},{x:.890625,y:.515625},{x:.921875,y:.515625},{x:.921875,y:.515625},{x:.953125,y:.515625},{x:.953125,y:.515625},{x:.984375,y:.515625},{x:.984375,y:.515625},{x:.015625,y:.546875},{x:.015625,y:.546875},{x:.046875,y:.546875},{x:.046875,y:.546875},{x:.078125,y:.546875},{x:.078125,y:.546875},{x:.109375,y:.546875},{x:.109375,y:.546875},{x:.140625,y:.546875},{x:.140625,y:.546875},{x:.171875,y:.546875},{x:.171875,y:.546875},{x:.203125,y:.546875},{x:.203125,y:.546875},{x:.234375,y:.546875},{x:.234375,y:.546875},{x:.265625,y:.546875},{x:.265625,y:.546875},{x:.296875,y:.546875},{x:.296875,y:.546875},{x:.328125,y:.546875},{x:.328125,y:.546875},{x:.359375,y:.546875},{x:.359375,y:.546875},{x:.390625,y:.546875},{x:.390625,y:.546875},{x:.421875,y:.546875},{x:.421875,y:.546875},{x:.453125,y:.546875},{x:.453125,y:.546875},{x:.484375,y:.546875},{x:.484375,y:.546875},{x:.515625,y:.546875},{x:.515625,y:.546875},{x:.546875,y:.546875},{x:.546875,y:.546875},{x:.578125,y:.546875},{x:.578125,y:.546875},{x:.609375,y:.546875},{x:.609375,y:.546875},{x:.640625,y:.546875},{x:.640625,y:.546875},{x:.671875,y:.546875},{x:.671875,y:.546875},{x:.703125,y:.546875},{x:.703125,y:.546875},{x:.734375,y:.546875},{x:.734375,y:.546875},{x:.765625,y:.546875},{x:.765625,y:.546875},{x:.796875,y:.546875},{x:.796875,y:.546875},{x:.828125,y:.546875},{x:.828125,y:.546875},{x:.859375,y:.546875},{x:.859375,y:.546875},{x:.890625,y:.546875},{x:.890625,y:.546875},{x:.921875,y:.546875},{x:.921875,y:.546875},{x:.953125,y:.546875},{x:.953125,y:.546875},{x:.984375,y:.546875},{x:.984375,y:.546875},{x:.015625,y:.578125},{x:.015625,y:.578125},{x:.046875,y:.578125},{x:.046875,y:.578125},{x:.078125,y:.578125},{x:.078125,y:.578125},{x:.109375,y:.578125},{x:.109375,y:.578125},{x:.140625,y:.578125},{x:.140625,y:.578125},{x:.171875,y:.578125},{x:.171875,y:.578125},{x:.203125,y:.578125},{x:.203125,y:.578125},{x:.234375,y:.578125},{x:.234375,y:.578125},{x:.265625,y:.578125},{x:.265625,y:.578125},{x:.296875,y:.578125},{x:.296875,y:.578125},{x:.328125,y:.578125},{x:.328125,y:.578125},{x:.359375,y:.578125},{x:.359375,y:.578125},{x:.390625,y:.578125},{x:.390625,y:.578125},{x:.421875,y:.578125},{x:.421875,y:.578125},{x:.453125,y:.578125},{x:.453125,y:.578125},{x:.484375,y:.578125},{x:.484375,y:.578125},{x:.515625,y:.578125},{x:.515625,y:.578125},{x:.546875,y:.578125},{x:.546875,y:.578125},{x:.578125,y:.578125},{x:.578125,y:.578125},{x:.609375,y:.578125},{x:.609375,y:.578125},{x:.640625,y:.578125},{x:.640625,y:.578125},{x:.671875,y:.578125},{x:.671875,y:.578125},{x:.703125,y:.578125},{x:.703125,y:.578125},{x:.734375,y:.578125},{x:.734375,y:.578125},{x:.765625,y:.578125},{x:.765625,y:.578125},{x:.796875,y:.578125},{x:.796875,y:.578125},{x:.828125,y:.578125},{x:.828125,y:.578125},{x:.859375,y:.578125},{x:.859375,y:.578125},{x:.890625,y:.578125},{x:.890625,y:.578125},{x:.921875,y:.578125},{x:.921875,y:.578125},{x:.953125,y:.578125},{x:.953125,y:.578125},{x:.984375,y:.578125},{x:.984375,y:.578125},{x:.015625,y:.609375},{x:.015625,y:.609375},{x:.046875,y:.609375},{x:.046875,y:.609375},{x:.078125,y:.609375},{x:.078125,y:.609375},{x:.109375,y:.609375},{x:.109375,y:.609375},{x:.140625,y:.609375},{x:.140625,y:.609375},{x:.171875,y:.609375},{x:.171875,y:.609375},{x:.203125,y:.609375},{x:.203125,y:.609375},{x:.234375,y:.609375},{x:.234375,y:.609375},{x:.265625,y:.609375},{x:.265625,y:.609375},{x:.296875,y:.609375},{x:.296875,y:.609375},{x:.328125,y:.609375},{x:.328125,y:.609375},{x:.359375,y:.609375},{x:.359375,y:.609375},{x:.390625,y:.609375},{x:.390625,y:.609375},{x:.421875,y:.609375},{x:.421875,y:.609375},{x:.453125,y:.609375},{x:.453125,y:.609375},{x:.484375,y:.609375},{x:.484375,y:.609375},{x:.515625,y:.609375},{x:.515625,y:.609375},{x:.546875,y:.609375},{x:.546875,y:.609375},{x:.578125,y:.609375},{x:.578125,y:.609375},{x:.609375,y:.609375},{x:.609375,y:.609375},{x:.640625,y:.609375},{x:.640625,y:.609375},{x:.671875,y:.609375},{x:.671875,y:.609375},{x:.703125,y:.609375},{x:.703125,y:.609375},{x:.734375,y:.609375},{x:.734375,y:.609375},{x:.765625,y:.609375},{x:.765625,y:.609375},{x:.796875,y:.609375},{x:.796875,y:.609375},{x:.828125,y:.609375},{x:.828125,y:.609375},{x:.859375,y:.609375},{x:.859375,y:.609375},{x:.890625,y:.609375},{x:.890625,y:.609375},{x:.921875,y:.609375},{x:.921875,y:.609375},{x:.953125,y:.609375},{x:.953125,y:.609375},{x:.984375,y:.609375},{x:.984375,y:.609375},{x:.015625,y:.640625},{x:.015625,y:.640625},{x:.046875,y:.640625},{x:.046875,y:.640625},{x:.078125,y:.640625},{x:.078125,y:.640625},{x:.109375,y:.640625},{x:.109375,y:.640625},{x:.140625,y:.640625},{x:.140625,y:.640625},{x:.171875,y:.640625},{x:.171875,y:.640625},{x:.203125,y:.640625},{x:.203125,y:.640625},{x:.234375,y:.640625},{x:.234375,y:.640625},{x:.265625,y:.640625},{x:.265625,y:.640625},{x:.296875,y:.640625},{x:.296875,y:.640625},{x:.328125,y:.640625},{x:.328125,y:.640625},{x:.359375,y:.640625},{x:.359375,y:.640625},{x:.390625,y:.640625},{x:.390625,y:.640625},{x:.421875,y:.640625},{x:.421875,y:.640625},{x:.453125,y:.640625},{x:.453125,y:.640625},{x:.484375,y:.640625},{x:.484375,y:.640625},{x:.515625,y:.640625},{x:.515625,y:.640625},{x:.546875,y:.640625},{x:.546875,y:.640625},{x:.578125,y:.640625},{x:.578125,y:.640625},{x:.609375,y:.640625},{x:.609375,y:.640625},{x:.640625,y:.640625},{x:.640625,y:.640625},{x:.671875,y:.640625},{x:.671875,y:.640625},{x:.703125,y:.640625},{x:.703125,y:.640625},{x:.734375,y:.640625},{x:.734375,y:.640625},{x:.765625,y:.640625},{x:.765625,y:.640625},{x:.796875,y:.640625},{x:.796875,y:.640625},{x:.828125,y:.640625},{x:.828125,y:.640625},{x:.859375,y:.640625},{x:.859375,y:.640625},{x:.890625,y:.640625},{x:.890625,y:.640625},{x:.921875,y:.640625},{x:.921875,y:.640625},{x:.953125,y:.640625},{x:.953125,y:.640625},{x:.984375,y:.640625},{x:.984375,y:.640625},{x:.015625,y:.671875},{x:.015625,y:.671875},{x:.046875,y:.671875},{x:.046875,y:.671875},{x:.078125,y:.671875},{x:.078125,y:.671875},{x:.109375,y:.671875},{x:.109375,y:.671875},{x:.140625,y:.671875},{x:.140625,y:.671875},{x:.171875,y:.671875},{x:.171875,y:.671875},{x:.203125,y:.671875},{x:.203125,y:.671875},{x:.234375,y:.671875},{x:.234375,y:.671875},{x:.265625,y:.671875},{x:.265625,y:.671875},{x:.296875,y:.671875},{x:.296875,y:.671875},{x:.328125,y:.671875},{x:.328125,y:.671875},{x:.359375,y:.671875},{x:.359375,y:.671875},{x:.390625,y:.671875},{x:.390625,y:.671875},{x:.421875,y:.671875},{x:.421875,y:.671875},{x:.453125,y:.671875},{x:.453125,y:.671875},{x:.484375,y:.671875},{x:.484375,y:.671875},{x:.515625,y:.671875},{x:.515625,y:.671875},{x:.546875,y:.671875},{x:.546875,y:.671875},{x:.578125,y:.671875},{x:.578125,y:.671875},{x:.609375,y:.671875},{x:.609375,y:.671875},{x:.640625,y:.671875},{x:.640625,y:.671875},{x:.671875,y:.671875},{x:.671875,y:.671875},{x:.703125,y:.671875},{x:.703125,y:.671875},{x:.734375,y:.671875},{x:.734375,y:.671875},{x:.765625,y:.671875},{x:.765625,y:.671875},{x:.796875,y:.671875},{x:.796875,y:.671875},{x:.828125,y:.671875},{x:.828125,y:.671875},{x:.859375,y:.671875},{x:.859375,y:.671875},{x:.890625,y:.671875},{x:.890625,y:.671875},{x:.921875,y:.671875},{x:.921875,y:.671875},{x:.953125,y:.671875},{x:.953125,y:.671875},{x:.984375,y:.671875},{x:.984375,y:.671875},{x:.015625,y:.703125},{x:.015625,y:.703125},{x:.046875,y:.703125},{x:.046875,y:.703125},{x:.078125,y:.703125},{x:.078125,y:.703125},{x:.109375,y:.703125},{x:.109375,y:.703125},{x:.140625,y:.703125},{x:.140625,y:.703125},{x:.171875,y:.703125},{x:.171875,y:.703125},{x:.203125,y:.703125},{x:.203125,y:.703125},{x:.234375,y:.703125},{x:.234375,y:.703125},{x:.265625,y:.703125},{x:.265625,y:.703125},{x:.296875,y:.703125},{x:.296875,y:.703125},{x:.328125,y:.703125},{x:.328125,y:.703125},{x:.359375,y:.703125},{x:.359375,y:.703125},{x:.390625,y:.703125},{x:.390625,y:.703125},{x:.421875,y:.703125},{x:.421875,y:.703125},{x:.453125,y:.703125},{x:.453125,y:.703125},{x:.484375,y:.703125},{x:.484375,y:.703125},{x:.515625,y:.703125},{x:.515625,y:.703125},{x:.546875,y:.703125},{x:.546875,y:.703125},{x:.578125,y:.703125},{x:.578125,y:.703125},{x:.609375,y:.703125},{x:.609375,y:.703125},{x:.640625,y:.703125},{x:.640625,y:.703125},{x:.671875,y:.703125},{x:.671875,y:.703125},{x:.703125,y:.703125},{x:.703125,y:.703125},{x:.734375,y:.703125},{x:.734375,y:.703125},{x:.765625,y:.703125},{x:.765625,y:.703125},{x:.796875,y:.703125},{x:.796875,y:.703125},{x:.828125,y:.703125},{x:.828125,y:.703125},{x:.859375,y:.703125},{x:.859375,y:.703125},{x:.890625,y:.703125},{x:.890625,y:.703125},{x:.921875,y:.703125},{x:.921875,y:.703125},{x:.953125,y:.703125},{x:.953125,y:.703125},{x:.984375,y:.703125},{x:.984375,y:.703125},{x:.015625,y:.734375},{x:.015625,y:.734375},{x:.046875,y:.734375},{x:.046875,y:.734375},{x:.078125,y:.734375},{x:.078125,y:.734375},{x:.109375,y:.734375},{x:.109375,y:.734375},{x:.140625,y:.734375},{x:.140625,y:.734375},{x:.171875,y:.734375},{x:.171875,y:.734375},{x:.203125,y:.734375},{x:.203125,y:.734375},{x:.234375,y:.734375},{x:.234375,y:.734375},{x:.265625,y:.734375},{x:.265625,y:.734375},{x:.296875,y:.734375},{x:.296875,y:.734375},{x:.328125,y:.734375},{x:.328125,y:.734375},{x:.359375,y:.734375},{x:.359375,y:.734375},{x:.390625,y:.734375},{x:.390625,y:.734375},{x:.421875,y:.734375},{x:.421875,y:.734375},{x:.453125,y:.734375},{x:.453125,y:.734375},{x:.484375,y:.734375},{x:.484375,y:.734375},{x:.515625,y:.734375},{x:.515625,y:.734375},{x:.546875,y:.734375},{x:.546875,y:.734375},{x:.578125,y:.734375},{x:.578125,y:.734375},{x:.609375,y:.734375},{x:.609375,y:.734375},{x:.640625,y:.734375},{x:.640625,y:.734375},{x:.671875,y:.734375},{x:.671875,y:.734375},{x:.703125,y:.734375},{x:.703125,y:.734375},{x:.734375,y:.734375},{x:.734375,y:.734375},{x:.765625,y:.734375},{x:.765625,y:.734375},{x:.796875,y:.734375},{x:.796875,y:.734375},{x:.828125,y:.734375},{x:.828125,y:.734375},{x:.859375,y:.734375},{x:.859375,y:.734375},{x:.890625,y:.734375},{x:.890625,y:.734375},{x:.921875,y:.734375},{x:.921875,y:.734375},{x:.953125,y:.734375},{x:.953125,y:.734375},{x:.984375,y:.734375},{x:.984375,y:.734375},{x:.015625,y:.765625},{x:.015625,y:.765625},{x:.046875,y:.765625},{x:.046875,y:.765625},{x:.078125,y:.765625},{x:.078125,y:.765625},{x:.109375,y:.765625},{x:.109375,y:.765625},{x:.140625,y:.765625},{x:.140625,y:.765625},{x:.171875,y:.765625},{x:.171875,y:.765625},{x:.203125,y:.765625},{x:.203125,y:.765625},{x:.234375,y:.765625},{x:.234375,y:.765625},{x:.265625,y:.765625},{x:.265625,y:.765625},{x:.296875,y:.765625},{x:.296875,y:.765625},{x:.328125,y:.765625},{x:.328125,y:.765625},{x:.359375,y:.765625},{x:.359375,y:.765625},{x:.390625,y:.765625},{x:.390625,y:.765625},{x:.421875,y:.765625},{x:.421875,y:.765625},{x:.453125,y:.765625},{x:.453125,y:.765625},{x:.484375,y:.765625},{x:.484375,y:.765625},{x:.515625,y:.765625},{x:.515625,y:.765625},{x:.546875,y:.765625},{x:.546875,y:.765625},{x:.578125,y:.765625},{x:.578125,y:.765625},{x:.609375,y:.765625},{x:.609375,y:.765625},{x:.640625,y:.765625},{x:.640625,y:.765625},{x:.671875,y:.765625},{x:.671875,y:.765625},{x:.703125,y:.765625},{x:.703125,y:.765625},{x:.734375,y:.765625},{x:.734375,y:.765625},{x:.765625,y:.765625},{x:.765625,y:.765625},{x:.796875,y:.765625},{x:.796875,y:.765625},{x:.828125,y:.765625},{x:.828125,y:.765625},{x:.859375,y:.765625},{x:.859375,y:.765625},{x:.890625,y:.765625},{x:.890625,y:.765625},{x:.921875,y:.765625},{x:.921875,y:.765625},{x:.953125,y:.765625},{x:.953125,y:.765625},{x:.984375,y:.765625},{x:.984375,y:.765625},{x:.015625,y:.796875},{x:.015625,y:.796875},{x:.046875,y:.796875},{x:.046875,y:.796875},{x:.078125,y:.796875},{x:.078125,y:.796875},{x:.109375,y:.796875},{x:.109375,y:.796875},{x:.140625,y:.796875},{x:.140625,y:.796875},{x:.171875,y:.796875},{x:.171875,y:.796875},{x:.203125,y:.796875},{x:.203125,y:.796875},{x:.234375,y:.796875},{x:.234375,y:.796875},{x:.265625,y:.796875},{x:.265625,y:.796875},{x:.296875,y:.796875},{x:.296875,y:.796875},{x:.328125,y:.796875},{x:.328125,y:.796875},{x:.359375,y:.796875},{x:.359375,y:.796875},{x:.390625,y:.796875},{x:.390625,y:.796875},{x:.421875,y:.796875},{x:.421875,y:.796875},{x:.453125,y:.796875},{x:.453125,y:.796875},{x:.484375,y:.796875},{x:.484375,y:.796875},{x:.515625,y:.796875},{x:.515625,y:.796875},{x:.546875,y:.796875},{x:.546875,y:.796875},{x:.578125,y:.796875},{x:.578125,y:.796875},{x:.609375,y:.796875},{x:.609375,y:.796875},{x:.640625,y:.796875},{x:.640625,y:.796875},{x:.671875,y:.796875},{x:.671875,y:.796875},{x:.703125,y:.796875},{x:.703125,y:.796875},{x:.734375,y:.796875},{x:.734375,y:.796875},{x:.765625,y:.796875},{x:.765625,y:.796875},{x:.796875,y:.796875},{x:.796875,y:.796875},{x:.828125,y:.796875},{x:.828125,y:.796875},{x:.859375,y:.796875},{x:.859375,y:.796875},{x:.890625,y:.796875},{x:.890625,y:.796875},{x:.921875,y:.796875},{x:.921875,y:.796875},{x:.953125,y:.796875},{x:.953125,y:.796875},{x:.984375,y:.796875},{x:.984375,y:.796875},{x:.015625,y:.828125},{x:.015625,y:.828125},{x:.046875,y:.828125},{x:.046875,y:.828125},{x:.078125,y:.828125},{x:.078125,y:.828125},{x:.109375,y:.828125},{x:.109375,y:.828125},{x:.140625,y:.828125},{x:.140625,y:.828125},{x:.171875,y:.828125},{x:.171875,y:.828125},{x:.203125,y:.828125},{x:.203125,y:.828125},{x:.234375,y:.828125},{x:.234375,y:.828125},{x:.265625,y:.828125},{x:.265625,y:.828125},{x:.296875,y:.828125},{x:.296875,y:.828125},{x:.328125,y:.828125},{x:.328125,y:.828125},{x:.359375,y:.828125},{x:.359375,y:.828125},{x:.390625,y:.828125},{x:.390625,y:.828125},{x:.421875,y:.828125},{x:.421875,y:.828125},{x:.453125,y:.828125},{x:.453125,y:.828125},{x:.484375,y:.828125},{x:.484375,y:.828125},{x:.515625,y:.828125},{x:.515625,y:.828125},{x:.546875,y:.828125},{x:.546875,y:.828125},{x:.578125,y:.828125},{x:.578125,y:.828125},{x:.609375,y:.828125},{x:.609375,y:.828125},{x:.640625,y:.828125},{x:.640625,y:.828125},{x:.671875,y:.828125},{x:.671875,y:.828125},{x:.703125,y:.828125},{x:.703125,y:.828125},{x:.734375,y:.828125},{x:.734375,y:.828125},{x:.765625,y:.828125},{x:.765625,y:.828125},{x:.796875,y:.828125},{x:.796875,y:.828125},{x:.828125,y:.828125},{x:.828125,y:.828125},{x:.859375,y:.828125},{x:.859375,y:.828125},{x:.890625,y:.828125},{x:.890625,y:.828125},{x:.921875,y:.828125},{x:.921875,y:.828125},{x:.953125,y:.828125},{x:.953125,y:.828125},{x:.984375,y:.828125},{x:.984375,y:.828125},{x:.015625,y:.859375},{x:.015625,y:.859375},{x:.046875,y:.859375},{x:.046875,y:.859375},{x:.078125,y:.859375},{x:.078125,y:.859375},{x:.109375,y:.859375},{x:.109375,y:.859375},{x:.140625,y:.859375},{x:.140625,y:.859375},{x:.171875,y:.859375},{x:.171875,y:.859375},{x:.203125,y:.859375},{x:.203125,y:.859375},{x:.234375,y:.859375},{x:.234375,y:.859375},{x:.265625,y:.859375},{x:.265625,y:.859375},{x:.296875,y:.859375},{x:.296875,y:.859375},{x:.328125,y:.859375},{x:.328125,y:.859375},{x:.359375,y:.859375},{x:.359375,y:.859375},{x:.390625,y:.859375},{x:.390625,y:.859375},{x:.421875,y:.859375},{x:.421875,y:.859375},{x:.453125,y:.859375},{x:.453125,y:.859375},{x:.484375,y:.859375},{x:.484375,y:.859375},{x:.515625,y:.859375},{x:.515625,y:.859375},{x:.546875,y:.859375},{x:.546875,y:.859375},{x:.578125,y:.859375},{x:.578125,y:.859375},{x:.609375,y:.859375},{x:.609375,y:.859375},{x:.640625,y:.859375},{x:.640625,y:.859375},{x:.671875,y:.859375},{x:.671875,y:.859375},{x:.703125,y:.859375},{x:.703125,y:.859375},{x:.734375,y:.859375},{x:.734375,y:.859375},{x:.765625,y:.859375},{x:.765625,y:.859375},{x:.796875,y:.859375},{x:.796875,y:.859375},{x:.828125,y:.859375},{x:.828125,y:.859375},{x:.859375,y:.859375},{x:.859375,y:.859375},{x:.890625,y:.859375},{x:.890625,y:.859375},{x:.921875,y:.859375},{x:.921875,y:.859375},{x:.953125,y:.859375},{x:.953125,y:.859375},{x:.984375,y:.859375},{x:.984375,y:.859375},{x:.015625,y:.890625},{x:.015625,y:.890625},{x:.046875,y:.890625},{x:.046875,y:.890625},{x:.078125,y:.890625},{x:.078125,y:.890625},{x:.109375,y:.890625},{x:.109375,y:.890625},{x:.140625,y:.890625},{x:.140625,y:.890625},{x:.171875,y:.890625},{x:.171875,y:.890625},{x:.203125,y:.890625},{x:.203125,y:.890625},{x:.234375,y:.890625},{x:.234375,y:.890625},{x:.265625,y:.890625},{x:.265625,y:.890625},{x:.296875,y:.890625},{x:.296875,y:.890625},{x:.328125,y:.890625},{x:.328125,y:.890625},{x:.359375,y:.890625},{x:.359375,y:.890625},{x:.390625,y:.890625},{x:.390625,y:.890625},{x:.421875,y:.890625},{x:.421875,y:.890625},{x:.453125,y:.890625},{x:.453125,y:.890625},{x:.484375,y:.890625},{x:.484375,y:.890625},{x:.515625,y:.890625},{x:.515625,y:.890625},{x:.546875,y:.890625},{x:.546875,y:.890625},{x:.578125,y:.890625},{x:.578125,y:.890625},{x:.609375,y:.890625},{x:.609375,y:.890625},{x:.640625,y:.890625},{x:.640625,y:.890625},{x:.671875,y:.890625},{x:.671875,y:.890625},{x:.703125,y:.890625},{x:.703125,y:.890625},{x:.734375,y:.890625},{x:.734375,y:.890625},{x:.765625,y:.890625},{x:.765625,y:.890625},{x:.796875,y:.890625},{x:.796875,y:.890625},{x:.828125,y:.890625},{x:.828125,y:.890625},{x:.859375,y:.890625},{x:.859375,y:.890625},{x:.890625,y:.890625},{x:.890625,y:.890625},{x:.921875,y:.890625},{x:.921875,y:.890625},{x:.953125,y:.890625},{x:.953125,y:.890625},{x:.984375,y:.890625},{x:.984375,y:.890625},{x:.015625,y:.921875},{x:.015625,y:.921875},{x:.046875,y:.921875},{x:.046875,y:.921875},{x:.078125,y:.921875},{x:.078125,y:.921875},{x:.109375,y:.921875},{x:.109375,y:.921875},{x:.140625,y:.921875},{x:.140625,y:.921875},{x:.171875,y:.921875},{x:.171875,y:.921875},{x:.203125,y:.921875},{x:.203125,y:.921875},{x:.234375,y:.921875},{x:.234375,y:.921875},{x:.265625,y:.921875},{x:.265625,y:.921875},{x:.296875,y:.921875},{x:.296875,y:.921875},{x:.328125,y:.921875},{x:.328125,y:.921875},{x:.359375,y:.921875},{x:.359375,y:.921875},{x:.390625,y:.921875},{x:.390625,y:.921875},{x:.421875,y:.921875},{x:.421875,y:.921875},{x:.453125,y:.921875},{x:.453125,y:.921875},{x:.484375,y:.921875},{x:.484375,y:.921875},{x:.515625,y:.921875},{x:.515625,y:.921875},{x:.546875,y:.921875},{x:.546875,y:.921875},{x:.578125,y:.921875},{x:.578125,y:.921875},{x:.609375,y:.921875},{x:.609375,y:.921875},{x:.640625,y:.921875},{x:.640625,y:.921875},{x:.671875,y:.921875},{x:.671875,y:.921875},{x:.703125,y:.921875},{x:.703125,y:.921875},{x:.734375,y:.921875},{x:.734375,y:.921875},{x:.765625,y:.921875},{x:.765625,y:.921875},{x:.796875,y:.921875},{x:.796875,y:.921875},{x:.828125,y:.921875},{x:.828125,y:.921875},{x:.859375,y:.921875},{x:.859375,y:.921875},{x:.890625,y:.921875},{x:.890625,y:.921875},{x:.921875,y:.921875},{x:.921875,y:.921875},{x:.953125,y:.921875},{x:.953125,y:.921875},{x:.984375,y:.921875},{x:.984375,y:.921875},{x:.015625,y:.953125},{x:.015625,y:.953125},{x:.046875,y:.953125},{x:.046875,y:.953125},{x:.078125,y:.953125},{x:.078125,y:.953125},{x:.109375,y:.953125},{x:.109375,y:.953125},{x:.140625,y:.953125},{x:.140625,y:.953125},{x:.171875,y:.953125},{x:.171875,y:.953125},{x:.203125,y:.953125},{x:.203125,y:.953125},{x:.234375,y:.953125},{x:.234375,y:.953125},{x:.265625,y:.953125},{x:.265625,y:.953125},{x:.296875,y:.953125},{x:.296875,y:.953125},{x:.328125,y:.953125},{x:.328125,y:.953125},{x:.359375,y:.953125},{x:.359375,y:.953125},{x:.390625,y:.953125},{x:.390625,y:.953125},{x:.421875,y:.953125},{x:.421875,y:.953125},{x:.453125,y:.953125},{x:.453125,y:.953125},{x:.484375,y:.953125},{x:.484375,y:.953125},{x:.515625,y:.953125},{x:.515625,y:.953125},{x:.546875,y:.953125},{x:.546875,y:.953125},{x:.578125,y:.953125},{x:.578125,y:.953125},{x:.609375,y:.953125},{x:.609375,y:.953125},{x:.640625,y:.953125},{x:.640625,y:.953125},{x:.671875,y:.953125},{x:.671875,y:.953125},{x:.703125,y:.953125},{x:.703125,y:.953125},{x:.734375,y:.953125},{x:.734375,y:.953125},{x:.765625,y:.953125},{x:.765625,y:.953125},{x:.796875,y:.953125},{x:.796875,y:.953125},{x:.828125,y:.953125},{x:.828125,y:.953125},{x:.859375,y:.953125},{x:.859375,y:.953125},{x:.890625,y:.953125},{x:.890625,y:.953125},{x:.921875,y:.953125},{x:.921875,y:.953125},{x:.953125,y:.953125},{x:.953125,y:.953125},{x:.984375,y:.953125},{x:.984375,y:.953125},{x:.015625,y:.984375},{x:.015625,y:.984375},{x:.046875,y:.984375},{x:.046875,y:.984375},{x:.078125,y:.984375},{x:.078125,y:.984375},{x:.109375,y:.984375},{x:.109375,y:.984375},{x:.140625,y:.984375},{x:.140625,y:.984375},{x:.171875,y:.984375},{x:.171875,y:.984375},{x:.203125,y:.984375},{x:.203125,y:.984375},{x:.234375,y:.984375},{x:.234375,y:.984375},{x:.265625,y:.984375},{x:.265625,y:.984375},{x:.296875,y:.984375},{x:.296875,y:.984375},{x:.328125,y:.984375},{x:.328125,y:.984375},{x:.359375,y:.984375},{x:.359375,y:.984375},{x:.390625,y:.984375},{x:.390625,y:.984375},{x:.421875,y:.984375},{x:.421875,y:.984375},{x:.453125,y:.984375},{x:.453125,y:.984375},{x:.484375,y:.984375},{x:.484375,y:.984375},{x:.515625,y:.984375},{x:.515625,y:.984375},{x:.546875,y:.984375},{x:.546875,y:.984375},{x:.578125,y:.984375},{x:.578125,y:.984375},{x:.609375,y:.984375},{x:.609375,y:.984375},{x:.640625,y:.984375},{x:.640625,y:.984375},{x:.671875,y:.984375},{x:.671875,y:.984375},{x:.703125,y:.984375},{x:.703125,y:.984375},{x:.734375,y:.984375},{x:.734375,y:.984375},{x:.765625,y:.984375},{x:.765625,y:.984375},{x:.796875,y:.984375},{x:.796875,y:.984375},{x:.828125,y:.984375},{x:.828125,y:.984375},{x:.859375,y:.984375},{x:.859375,y:.984375},{x:.890625,y:.984375},{x:.890625,y:.984375},{x:.921875,y:.984375},{x:.921875,y:.984375},{x:.953125,y:.984375},{x:.953125,y:.984375},{x:.984375,y:.984375},{x:.984375,y:.984375},{x:.03125,y:.03125},{x:.03125,y:.03125},{x:.09375,y:.03125},{x:.09375,y:.03125},{x:.15625,y:.03125},{x:.15625,y:.03125},{x:.21875,y:.03125},{x:.21875,y:.03125},{x:.28125,y:.03125},{x:.28125,y:.03125},{x:.34375,y:.03125},{x:.34375,y:.03125},{x:.40625,y:.03125},{x:.40625,y:.03125},{x:.46875,y:.03125},{x:.46875,y:.03125},{x:.53125,y:.03125},{x:.53125,y:.03125},{x:.59375,y:.03125},{x:.59375,y:.03125},{x:.65625,y:.03125},{x:.65625,y:.03125},{x:.71875,y:.03125},{x:.71875,y:.03125},{x:.78125,y:.03125},{x:.78125,y:.03125},{x:.84375,y:.03125},{x:.84375,y:.03125},{x:.90625,y:.03125},{x:.90625,y:.03125},{x:.96875,y:.03125},{x:.96875,y:.03125},{x:.03125,y:.09375},{x:.03125,y:.09375},{x:.09375,y:.09375},{x:.09375,y:.09375},{x:.15625,y:.09375},{x:.15625,y:.09375},{x:.21875,y:.09375},{x:.21875,y:.09375},{x:.28125,y:.09375},{x:.28125,y:.09375},{x:.34375,y:.09375},{x:.34375,y:.09375},{x:.40625,y:.09375},{x:.40625,y:.09375},{x:.46875,y:.09375},{x:.46875,y:.09375},{x:.53125,y:.09375},{x:.53125,y:.09375},{x:.59375,y:.09375},{x:.59375,y:.09375},{x:.65625,y:.09375},{x:.65625,y:.09375},{x:.71875,y:.09375},{x:.71875,y:.09375},{x:.78125,y:.09375},{x:.78125,y:.09375},{x:.84375,y:.09375},{x:.84375,y:.09375},{x:.90625,y:.09375},{x:.90625,y:.09375},{x:.96875,y:.09375},{x:.96875,y:.09375},{x:.03125,y:.15625},{x:.03125,y:.15625},{x:.09375,y:.15625},{x:.09375,y:.15625},{x:.15625,y:.15625},{x:.15625,y:.15625},{x:.21875,y:.15625},{x:.21875,y:.15625},{x:.28125,y:.15625},{x:.28125,y:.15625},{x:.34375,y:.15625},{x:.34375,y:.15625},{x:.40625,y:.15625},{x:.40625,y:.15625},{x:.46875,y:.15625},{x:.46875,y:.15625},{x:.53125,y:.15625},{x:.53125,y:.15625},{x:.59375,y:.15625},{x:.59375,y:.15625},{x:.65625,y:.15625},{x:.65625,y:.15625},{x:.71875,y:.15625},{x:.71875,y:.15625},{x:.78125,y:.15625},{x:.78125,y:.15625},{x:.84375,y:.15625},{x:.84375,y:.15625},{x:.90625,y:.15625},{x:.90625,y:.15625},{x:.96875,y:.15625},{x:.96875,y:.15625},{x:.03125,y:.21875},{x:.03125,y:.21875},{x:.09375,y:.21875},{x:.09375,y:.21875},{x:.15625,y:.21875},{x:.15625,y:.21875},{x:.21875,y:.21875},{x:.21875,y:.21875},{x:.28125,y:.21875},{x:.28125,y:.21875},{x:.34375,y:.21875},{x:.34375,y:.21875},{x:.40625,y:.21875},{x:.40625,y:.21875},{x:.46875,y:.21875},{x:.46875,y:.21875},{x:.53125,y:.21875},{x:.53125,y:.21875},{x:.59375,y:.21875},{x:.59375,y:.21875},{x:.65625,y:.21875},{x:.65625,y:.21875},{x:.71875,y:.21875},{x:.71875,y:.21875},{x:.78125,y:.21875},{x:.78125,y:.21875},{x:.84375,y:.21875},{x:.84375,y:.21875},{x:.90625,y:.21875},{x:.90625,y:.21875},{x:.96875,y:.21875},{x:.96875,y:.21875},{x:.03125,y:.28125},{x:.03125,y:.28125},{x:.09375,y:.28125},{x:.09375,y:.28125},{x:.15625,y:.28125},{x:.15625,y:.28125},{x:.21875,y:.28125},{x:.21875,y:.28125},{x:.28125,y:.28125},{x:.28125,y:.28125},{x:.34375,y:.28125},{x:.34375,y:.28125},{x:.40625,y:.28125},{x:.40625,y:.28125},{x:.46875,y:.28125},{x:.46875,y:.28125},{x:.53125,y:.28125},{x:.53125,y:.28125},{x:.59375,y:.28125},{x:.59375,y:.28125},{x:.65625,y:.28125},{x:.65625,y:.28125},{x:.71875,y:.28125},{x:.71875,y:.28125},{x:.78125,y:.28125},{x:.78125,y:.28125},{x:.84375,y:.28125},{x:.84375,y:.28125},{x:.90625,y:.28125},{x:.90625,y:.28125},{x:.96875,y:.28125},{x:.96875,y:.28125},{x:.03125,y:.34375},{x:.03125,y:.34375},{x:.09375,y:.34375},{x:.09375,y:.34375},{x:.15625,y:.34375},{x:.15625,y:.34375},{x:.21875,y:.34375},{x:.21875,y:.34375},{x:.28125,y:.34375},{x:.28125,y:.34375},{x:.34375,y:.34375},{x:.34375,y:.34375},{x:.40625,y:.34375},{x:.40625,y:.34375},{x:.46875,y:.34375},{x:.46875,y:.34375},{x:.53125,y:.34375},{x:.53125,y:.34375},{x:.59375,y:.34375},{x:.59375,y:.34375},{x:.65625,y:.34375},{x:.65625,y:.34375},{x:.71875,y:.34375},{x:.71875,y:.34375},{x:.78125,y:.34375},{x:.78125,y:.34375},{x:.84375,y:.34375},{x:.84375,y:.34375},{x:.90625,y:.34375},{x:.90625,y:.34375},{x:.96875,y:.34375},{x:.96875,y:.34375},{x:.03125,y:.40625},{x:.03125,y:.40625},{x:.09375,y:.40625},{x:.09375,y:.40625},{x:.15625,y:.40625},{x:.15625,y:.40625},{x:.21875,y:.40625},{x:.21875,y:.40625},{x:.28125,y:.40625},{x:.28125,y:.40625},{x:.34375,y:.40625},{x:.34375,y:.40625},{x:.40625,y:.40625},{x:.40625,y:.40625},{x:.46875,y:.40625},{x:.46875,y:.40625},{x:.53125,y:.40625},{x:.53125,y:.40625},{x:.59375,y:.40625},{x:.59375,y:.40625},{x:.65625,y:.40625},{x:.65625,y:.40625},{x:.71875,y:.40625},{x:.71875,y:.40625},{x:.78125,y:.40625},{x:.78125,y:.40625},{x:.84375,y:.40625},{x:.84375,y:.40625},{x:.90625,y:.40625},{x:.90625,y:.40625},{x:.96875,y:.40625},{x:.96875,y:.40625},{x:.03125,y:.46875},{x:.03125,y:.46875},{x:.09375,y:.46875},{x:.09375,y:.46875},{x:.15625,y:.46875},{x:.15625,y:.46875},{x:.21875,y:.46875},{x:.21875,y:.46875},{x:.28125,y:.46875},{x:.28125,y:.46875},{x:.34375,y:.46875},{x:.34375,y:.46875},{x:.40625,y:.46875},{x:.40625,y:.46875},{x:.46875,y:.46875},{x:.46875,y:.46875},{x:.53125,y:.46875},{x:.53125,y:.46875},{x:.59375,y:.46875},{x:.59375,y:.46875},{x:.65625,y:.46875},{x:.65625,y:.46875},{x:.71875,y:.46875},{x:.71875,y:.46875},{x:.78125,y:.46875},{x:.78125,y:.46875},{x:.84375,y:.46875},{x:.84375,y:.46875},{x:.90625,y:.46875},{x:.90625,y:.46875},{x:.96875,y:.46875},{x:.96875,y:.46875},{x:.03125,y:.53125},{x:.03125,y:.53125},{x:.09375,y:.53125},{x:.09375,y:.53125},{x:.15625,y:.53125},{x:.15625,y:.53125},{x:.21875,y:.53125},{x:.21875,y:.53125},{x:.28125,y:.53125},{x:.28125,y:.53125},{x:.34375,y:.53125},{x:.34375,y:.53125},{x:.40625,y:.53125},{x:.40625,y:.53125},{x:.46875,y:.53125},{x:.46875,y:.53125},{x:.53125,y:.53125},{x:.53125,y:.53125},{x:.59375,y:.53125},{x:.59375,y:.53125},{x:.65625,y:.53125},{x:.65625,y:.53125},{x:.71875,y:.53125},{x:.71875,y:.53125},{x:.78125,y:.53125},{x:.78125,y:.53125},{x:.84375,y:.53125},{x:.84375,y:.53125},{x:.90625,y:.53125},{x:.90625,y:.53125},{x:.96875,y:.53125},{x:.96875,y:.53125},{x:.03125,y:.59375},{x:.03125,y:.59375},{x:.09375,y:.59375},{x:.09375,y:.59375},{x:.15625,y:.59375},{x:.15625,y:.59375},{x:.21875,y:.59375},{x:.21875,y:.59375},{x:.28125,y:.59375},{x:.28125,y:.59375},{x:.34375,y:.59375},{x:.34375,y:.59375},{x:.40625,y:.59375},{x:.40625,y:.59375},{x:.46875,y:.59375},{x:.46875,y:.59375},{x:.53125,y:.59375},{x:.53125,y:.59375},{x:.59375,y:.59375},{x:.59375,y:.59375},{x:.65625,y:.59375},{x:.65625,y:.59375},{x:.71875,y:.59375},{x:.71875,y:.59375},{x:.78125,y:.59375},{x:.78125,y:.59375},{x:.84375,y:.59375},{x:.84375,y:.59375},{x:.90625,y:.59375},{x:.90625,y:.59375},{x:.96875,y:.59375},{x:.96875,y:.59375},{x:.03125,y:.65625},{x:.03125,y:.65625},{x:.09375,y:.65625},{x:.09375,y:.65625},{x:.15625,y:.65625},{x:.15625,y:.65625},{x:.21875,y:.65625},{x:.21875,y:.65625},{x:.28125,y:.65625},{x:.28125,y:.65625},{x:.34375,y:.65625},{x:.34375,y:.65625},{x:.40625,y:.65625},{x:.40625,y:.65625},{x:.46875,y:.65625},{x:.46875,y:.65625},{x:.53125,y:.65625},{x:.53125,y:.65625},{x:.59375,y:.65625},{x:.59375,y:.65625},{x:.65625,y:.65625},{x:.65625,y:.65625},{x:.71875,y:.65625},{x:.71875,y:.65625},{x:.78125,y:.65625},{x:.78125,y:.65625},{x:.84375,y:.65625},{x:.84375,y:.65625},{x:.90625,y:.65625},{x:.90625,y:.65625},{x:.96875,y:.65625},{x:.96875,y:.65625},{x:.03125,y:.71875},{x:.03125,y:.71875},{x:.09375,y:.71875},{x:.09375,y:.71875},{x:.15625,y:.71875},{x:.15625,y:.71875},{x:.21875,y:.71875},{x:.21875,y:.71875},{x:.28125,y:.71875},{x:.28125,y:.71875},{x:.34375,y:.71875},{x:.34375,y:.71875},{x:.40625,y:.71875},{x:.40625,y:.71875},{x:.46875,y:.71875},{x:.46875,y:.71875},{x:.53125,y:.71875},{x:.53125,y:.71875},{x:.59375,y:.71875},{x:.59375,y:.71875},{x:.65625,y:.71875},{x:.65625,y:.71875},{x:.71875,y:.71875},{x:.71875,y:.71875},{x:.78125,y:.71875},{x:.78125,y:.71875},{x:.84375,y:.71875},{x:.84375,y:.71875},{x:.90625,y:.71875},{x:.90625,y:.71875},{x:.96875,y:.71875},{x:.96875,y:.71875},{x:.03125,y:.78125},{x:.03125,y:.78125},{x:.09375,y:.78125},{x:.09375,y:.78125},{x:.15625,y:.78125},{x:.15625,y:.78125},{x:.21875,y:.78125},{x:.21875,y:.78125},{x:.28125,y:.78125},{x:.28125,y:.78125},{x:.34375,y:.78125},{x:.34375,y:.78125},{x:.40625,y:.78125},{x:.40625,y:.78125},{x:.46875,y:.78125},{x:.46875,y:.78125},{x:.53125,y:.78125},{x:.53125,y:.78125},{x:.59375,y:.78125},{x:.59375,y:.78125},{x:.65625,y:.78125},{x:.65625,y:.78125},{x:.71875,y:.78125},{x:.71875,y:.78125},{x:.78125,y:.78125},{x:.78125,y:.78125},{x:.84375,y:.78125},{x:.84375,y:.78125},{x:.90625,y:.78125},{x:.90625,y:.78125},{x:.96875,y:.78125},{x:.96875,y:.78125},{x:.03125,y:.84375},{x:.03125,y:.84375},{x:.09375,y:.84375},{x:.09375,y:.84375},{x:.15625,y:.84375},{x:.15625,y:.84375},{x:.21875,y:.84375},{x:.21875,y:.84375},{x:.28125,y:.84375},{x:.28125,y:.84375},{x:.34375,y:.84375},{x:.34375,y:.84375},{x:.40625,y:.84375},{x:.40625,y:.84375},{x:.46875,y:.84375},{x:.46875,y:.84375},{x:.53125,y:.84375},{x:.53125,y:.84375},{x:.59375,y:.84375},{x:.59375,y:.84375},{x:.65625,y:.84375},{x:.65625,y:.84375},{x:.71875,y:.84375},{x:.71875,y:.84375},{x:.78125,y:.84375},{x:.78125,y:.84375},{x:.84375,y:.84375},{x:.84375,y:.84375},{x:.90625,y:.84375},{x:.90625,y:.84375},{x:.96875,y:.84375},{x:.96875,y:.84375},{x:.03125,y:.90625},{x:.03125,y:.90625},{x:.09375,y:.90625},{x:.09375,y:.90625},{x:.15625,y:.90625},{x:.15625,y:.90625},{x:.21875,y:.90625},{x:.21875,y:.90625},{x:.28125,y:.90625},{x:.28125,y:.90625},{x:.34375,y:.90625},{x:.34375,y:.90625},{x:.40625,y:.90625},{x:.40625,y:.90625},{x:.46875,y:.90625},{x:.46875,y:.90625},{x:.53125,y:.90625},{x:.53125,y:.90625},{x:.59375,y:.90625},{x:.59375,y:.90625},{x:.65625,y:.90625},{x:.65625,y:.90625},{x:.71875,y:.90625},{x:.71875,y:.90625},{x:.78125,y:.90625},{x:.78125,y:.90625},{x:.84375,y:.90625},{x:.84375,y:.90625},{x:.90625,y:.90625},{x:.90625,y:.90625},{x:.96875,y:.90625},{x:.96875,y:.90625},{x:.03125,y:.96875},{x:.03125,y:.96875},{x:.09375,y:.96875},{x:.09375,y:.96875},{x:.15625,y:.96875},{x:.15625,y:.96875},{x:.21875,y:.96875},{x:.21875,y:.96875},{x:.28125,y:.96875},{x:.28125,y:.96875},{x:.34375,y:.96875},{x:.34375,y:.96875},{x:.40625,y:.96875},{x:.40625,y:.96875},{x:.46875,y:.96875},{x:.46875,y:.96875},{x:.53125,y:.96875},{x:.53125,y:.96875},{x:.59375,y:.96875},{x:.59375,y:.96875},{x:.65625,y:.96875},{x:.65625,y:.96875},{x:.71875,y:.96875},{x:.71875,y:.96875},{x:.78125,y:.96875},{x:.78125,y:.96875},{x:.84375,y:.96875},{x:.84375,y:.96875},{x:.90625,y:.96875},{x:.90625,y:.96875},{x:.96875,y:.96875},{x:.96875,y:.96875},{x:.0625,y:.0625},{x:.0625,y:.0625},{x:.0625,y:.0625},{x:.0625,y:.0625},{x:.0625,y:.0625},{x:.0625,y:.0625},{x:.1875,y:.0625},{x:.1875,y:.0625},{x:.1875,y:.0625},{x:.1875,y:.0625},{x:.1875,y:.0625},{x:.1875,y:.0625},{x:.3125,y:.0625},{x:.3125,y:.0625},{x:.3125,y:.0625},{x:.3125,y:.0625},{x:.3125,y:.0625},{x:.3125,y:.0625},{x:.4375,y:.0625},{x:.4375,y:.0625},{x:.4375,y:.0625},{x:.4375,y:.0625},{x:.4375,y:.0625},{x:.4375,y:.0625},{x:.5625,y:.0625},{x:.5625,y:.0625},{x:.5625,y:.0625},{x:.5625,y:.0625},{x:.5625,y:.0625},{x:.5625,y:.0625},{x:.6875,y:.0625},{x:.6875,y:.0625},{x:.6875,y:.0625},{x:.6875,y:.0625},{x:.6875,y:.0625},{x:.6875,y:.0625},{x:.8125,y:.0625},{x:.8125,y:.0625},{x:.8125,y:.0625},{x:.8125,y:.0625},{x:.8125,y:.0625},{x:.8125,y:.0625},{x:.9375,y:.0625},{x:.9375,y:.0625},{x:.9375,y:.0625},{x:.9375,y:.0625},{x:.9375,y:.0625},{x:.9375,y:.0625},{x:.0625,y:.1875},{x:.0625,y:.1875},{x:.0625,y:.1875},{x:.0625,y:.1875},{x:.0625,y:.1875},{x:.0625,y:.1875},{x:.1875,y:.1875},{x:.1875,y:.1875},{x:.1875,y:.1875},{x:.1875,y:.1875},{x:.1875,y:.1875},{x:.1875,y:.1875},{x:.3125,y:.1875},{x:.3125,y:.1875},{x:.3125,y:.1875},{x:.3125,y:.1875},{x:.3125,y:.1875},{x:.3125,y:.1875},{x:.4375,y:.1875},{x:.4375,y:.1875},{x:.4375,y:.1875},{x:.4375,y:.1875},{x:.4375,y:.1875},{x:.4375,y:.1875},{x:.5625,y:.1875},{x:.5625,y:.1875},{x:.5625,y:.1875},{x:.5625,y:.1875},{x:.5625,y:.1875},{x:.5625,y:.1875},{x:.6875,y:.1875},{x:.6875,y:.1875},{x:.6875,y:.1875},{x:.6875,y:.1875},{x:.6875,y:.1875},{x:.6875,y:.1875},{x:.8125,y:.1875},{x:.8125,y:.1875},{x:.8125,y:.1875},{x:.8125,y:.1875},{x:.8125,y:.1875},{x:.8125,y:.1875},{x:.9375,y:.1875},{x:.9375,y:.1875},{x:.9375,y:.1875},{x:.9375,y:.1875},{x:.9375,y:.1875},{x:.9375,y:.1875},{x:.0625,y:.3125},{x:.0625,y:.3125},{x:.0625,y:.3125},{x:.0625,y:.3125},{x:.0625,y:.3125},{x:.0625,y:.3125},{x:.1875,y:.3125},{x:.1875,y:.3125},{x:.1875,y:.3125},{x:.1875,y:.3125},{x:.1875,y:.3125},{x:.1875,y:.3125},{x:.3125,y:.3125},{x:.3125,y:.3125},{x:.3125,y:.3125},{x:.3125,y:.3125},{x:.3125,y:.3125},{x:.3125,y:.3125},{x:.4375,y:.3125},{x:.4375,y:.3125},{x:.4375,y:.3125},{x:.4375,y:.3125},{x:.4375,y:.3125},{x:.4375,y:.3125},{x:.5625,y:.3125},{x:.5625,y:.3125},{x:.5625,y:.3125},{x:.5625,y:.3125},{x:.5625,y:.3125},{x:.5625,y:.3125},{x:.6875,y:.3125},{x:.6875,y:.3125},{x:.6875,y:.3125},{x:.6875,y:.3125},{x:.6875,y:.3125},{x:.6875,y:.3125},{x:.8125,y:.3125},{x:.8125,y:.3125},{x:.8125,y:.3125},{x:.8125,y:.3125},{x:.8125,y:.3125},{x:.8125,y:.3125},{x:.9375,y:.3125},{x:.9375,y:.3125},{x:.9375,y:.3125},{x:.9375,y:.3125},{x:.9375,y:.3125},{x:.9375,y:.3125},{x:.0625,y:.4375},{x:.0625,y:.4375},{x:.0625,y:.4375},{x:.0625,y:.4375},{x:.0625,y:.4375},{x:.0625,y:.4375},{x:.1875,y:.4375},{x:.1875,y:.4375},{x:.1875,y:.4375},{x:.1875,y:.4375},{x:.1875,y:.4375},{x:.1875,y:.4375},{x:.3125,y:.4375},{x:.3125,y:.4375},{x:.3125,y:.4375},{x:.3125,y:.4375},{x:.3125,y:.4375},{x:.3125,y:.4375},{x:.4375,y:.4375},{x:.4375,y:.4375},{x:.4375,y:.4375},{x:.4375,y:.4375},{x:.4375,y:.4375},{x:.4375,y:.4375},{x:.5625,y:.4375},{x:.5625,y:.4375},{x:.5625,y:.4375},{x:.5625,y:.4375},{x:.5625,y:.4375},{x:.5625,y:.4375},{x:.6875,y:.4375},{x:.6875,y:.4375},{x:.6875,y:.4375},{x:.6875,y:.4375},{x:.6875,y:.4375},{x:.6875,y:.4375},{x:.8125,y:.4375},{x:.8125,y:.4375},{x:.8125,y:.4375},{x:.8125,y:.4375},{x:.8125,y:.4375},{x:.8125,y:.4375},{x:.9375,y:.4375},{x:.9375,y:.4375},{x:.9375,y:.4375},{x:.9375,y:.4375},{x:.9375,y:.4375},{x:.9375,y:.4375},{x:.0625,y:.5625},{x:.0625,y:.5625},{x:.0625,y:.5625},{x:.0625,y:.5625},{x:.0625,y:.5625},{x:.0625,y:.5625},{x:.1875,y:.5625},{x:.1875,y:.5625},{x:.1875,y:.5625},{x:.1875,y:.5625},{x:.1875,y:.5625},{x:.1875,y:.5625},{x:.3125,y:.5625},{x:.3125,y:.5625},{x:.3125,y:.5625},{x:.3125,y:.5625},{x:.3125,y:.5625},{x:.3125,y:.5625},{x:.4375,y:.5625},{x:.4375,y:.5625},{x:.4375,y:.5625},{x:.4375,y:.5625},{x:.4375,y:.5625},{x:.4375,y:.5625},{x:.5625,y:.5625},{x:.5625,y:.5625},{x:.5625,y:.5625},{x:.5625,y:.5625},{x:.5625,y:.5625},{x:.5625,y:.5625},{x:.6875,y:.5625},{x:.6875,y:.5625},{x:.6875,y:.5625},{x:.6875,y:.5625},{x:.6875,y:.5625},{x:.6875,y:.5625},{x:.8125,y:.5625},{x:.8125,y:.5625},{x:.8125,y:.5625},{x:.8125,y:.5625},{x:.8125,y:.5625},{x:.8125,y:.5625},{x:.9375,y:.5625},{x:.9375,y:.5625},{x:.9375,y:.5625},{x:.9375,y:.5625},{x:.9375,y:.5625},{x:.9375,y:.5625},{x:.0625,y:.6875},{x:.0625,y:.6875},{x:.0625,y:.6875},{x:.0625,y:.6875},{x:.0625,y:.6875},{x:.0625,y:.6875},{x:.1875,y:.6875},{x:.1875,y:.6875},{x:.1875,y:.6875},{x:.1875,y:.6875},{x:.1875,y:.6875},{x:.1875,y:.6875},{x:.3125,y:.6875},{x:.3125,y:.6875},{x:.3125,y:.6875},{x:.3125,y:.6875},{x:.3125,y:.6875},{x:.3125,y:.6875},{x:.4375,y:.6875},{x:.4375,y:.6875},{x:.4375,y:.6875},{x:.4375,y:.6875},{x:.4375,y:.6875},{x:.4375,y:.6875},{x:.5625,y:.6875},{x:.5625,y:.6875},{x:.5625,y:.6875},{x:.5625,y:.6875},{x:.5625,y:.6875},{x:.5625,y:.6875},{x:.6875,y:.6875},{x:.6875,y:.6875},{x:.6875,y:.6875},{x:.6875,y:.6875},{x:.6875,y:.6875},{x:.6875,y:.6875},{x:.8125,y:.6875},{x:.8125,y:.6875},{x:.8125,y:.6875},{x:.8125,y:.6875},{x:.8125,y:.6875},{x:.8125,y:.6875},{x:.9375,y:.6875},{x:.9375,y:.6875},{x:.9375,y:.6875},{x:.9375,y:.6875},{x:.9375,y:.6875},{x:.9375,y:.6875},{x:.0625,y:.8125},{x:.0625,y:.8125},{x:.0625,y:.8125},{x:.0625,y:.8125},{x:.0625,y:.8125},{x:.0625,y:.8125},{x:.1875,y:.8125},{x:.1875,y:.8125},{x:.1875,y:.8125},{x:.1875,y:.8125},{x:.1875,y:.8125},{x:.1875,y:.8125},{x:.3125,y:.8125},{x:.3125,y:.8125},{x:.3125,y:.8125},{x:.3125,y:.8125},{x:.3125,y:.8125},{x:.3125,y:.8125},{x:.4375,y:.8125},{x:.4375,y:.8125},{x:.4375,y:.8125},{x:.4375,y:.8125},{x:.4375,y:.8125},{x:.4375,y:.8125},{x:.5625,y:.8125},{x:.5625,y:.8125},{x:.5625,y:.8125},{x:.5625,y:.8125},{x:.5625,y:.8125},{x:.5625,y:.8125},{x:.6875,y:.8125},{x:.6875,y:.8125},{x:.6875,y:.8125},{x:.6875,y:.8125},{x:.6875,y:.8125},{x:.6875,y:.8125},{x:.8125,y:.8125},{x:.8125,y:.8125},{x:.8125,y:.8125},{x:.8125,y:.8125},{x:.8125,y:.8125},{x:.8125,y:.8125},{x:.9375,y:.8125},{x:.9375,y:.8125},{x:.9375,y:.8125},{x:.9375,y:.8125},{x:.9375,y:.8125},{x:.9375,y:.8125},{x:.0625,y:.9375},{x:.0625,y:.9375},{x:.0625,y:.9375},{x:.0625,y:.9375},{x:.0625,y:.9375},{x:.0625,y:.9375},{x:.1875,y:.9375},{x:.1875,y:.9375},{x:.1875,y:.9375},{x:.1875,y:.9375},{x:.1875,y:.9375},{x:.1875,y:.9375},{x:.3125,y:.9375},{x:.3125,y:.9375},{x:.3125,y:.9375},{x:.3125,y:.9375},{x:.3125,y:.9375},{x:.3125,y:.9375},{x:.4375,y:.9375},{x:.4375,y:.9375},{x:.4375,y:.9375},{x:.4375,y:.9375},{x:.4375,y:.9375},{x:.4375,y:.9375},{x:.5625,y:.9375},{x:.5625,y:.9375},{x:.5625,y:.9375},{x:.5625,y:.9375},{x:.5625,y:.9375},{x:.5625,y:.9375},{x:.6875,y:.9375},{x:.6875,y:.9375},{x:.6875,y:.9375},{x:.6875,y:.9375},{x:.6875,y:.9375},{x:.6875,y:.9375},{x:.8125,y:.9375},{x:.8125,y:.9375},{x:.8125,y:.9375},{x:.8125,y:.9375},{x:.8125,y:.9375},{x:.8125,y:.9375},{x:.9375,y:.9375},{x:.9375,y:.9375},{x:.9375,y:.9375},{x:.9375,y:.9375},{x:.9375,y:.9375},{x:.9375,y:.9375}],ete=function(){function e(t){Jr(this,e),ua(this,"model"),ua(this,"anchors"),ua(this,"anchorsTensor"),ua(this,"inputSize"),ua(this,"inputSizeTensor"),ua(this,"doubleInputSizeTensor"),this.model=t,this.anchors=$ee.map((function(e){return[e.x,e.y]})),this.anchorsTensor=Zv(this.anchors),this.inputSize=this.model&&this.model.inputs&&this.model.inputs[0].shape?this.model.inputs[0].shape[2]:0,this.inputSizeTensor=Kv([this.inputSize,this.inputSize]),this.doubleInputSizeTensor=Kv([2*this.inputSize,2*this.inputSize])}return $r(e,[{key:"normalizeBoxes",value:function(e){var t={};t.boxOffsets=Uf(e,[0,0],[-1,2]),t.boxSizes=Uf(e,[0,2],[-1,2]),t.div=uf(t.boxOffsets,this.inputSizeTensor),t.boxCenterPoints=of(t.div,this.anchorsTensor),t.halfBoxSizes=uf(t.boxSizes,this.doubleInputSizeTensor),t.sub=Cg(t.boxCenterPoints,t.halfBoxSizes),t.startPoints=lf(t.sub,this.inputSizeTensor),t.add=of(t.boxCenterPoints,t.halfBoxSizes),t.endPoints=lf(t.add,this.inputSizeTensor);var n=im([t.startPoints,t.endPoints],1);return Object.keys(t).forEach((function(e){return jh(t[e])})),n}},{key:"normalizeLandmarks",value:function(e,t){var n={};n.reshape=Bf(e,[-1,7,2]),n.div=uf(n.reshape,this.inputSizeTensor),n.landmarks=of(n.div,this.anchors[t]);var r=lf(n.landmarks,this.inputSizeTensor);return Object.keys(n).forEach((function(e){return jh(n[e])})),r}},{key:"predict",value:function(){var e=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,u,l,c=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={}).resize=Db.resizeBilinear(t,[this.inputSize,this.inputSize]),r.div=uf(r.resize,m6.tf127),r.image=Cg(r.div,m6.tf1),r.batched=this.model.execute(r.image),r.predictions=Uv(r.batched),r.slice=Uf(r.predictions,[0,0],[-1,1]),r.sigmoid=Hf(r.slice),r.scores=Uv(r.sigmoid),e.next=11,r.scores.data();case 11:return a=e.sent,r.boxes=Uf(r.predictions,[0,1],[-1,4]),r.norm=this.normalizeBoxes(r.boxes),e.next=16,Db.nonMaxSuppressionAsync(r.norm,r.scores,3*n.hand.maxDetected,n.hand.iouThreshold,n.hand.minConfidence);case 16:return r.nms=e.sent,e.next=19,r.nms.array();case 19:i=e.sent,o=[],s=ea(i),e.prev=22,l=Nr().mark((function e(){var n,i,s,l,d,h,p,f;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.value,(i={}).box=Uf(r.norm,[n,0],[1,-1]),i.slice=Uf(r.predictions,[n,5],[1,14]),i.norm=c.normalizeLandmarks(i.slice,n),i.palmLandmarks=Bf(i.norm,[-1,2]),e.next=8,i.box.data();case 8:return s=e.sent,l=s.slice(0,2),d=s.slice(2,4),e.next=13,i.palmLandmarks.array();case 13:h=e.sent,p={startPoint:l,endPoint:d,palmLandmarks:h,confidence:a[n]},f=Hee(p,[t.shape[2]/c.inputSize,t.shape[1]/c.inputSize]),o.push(f),Object.keys(i).forEach((function(e){return jh(i[e])}));case 18:case"end":return e.stop()}}),e)})),s.s();case 25:if((u=s.n()).done){e.next=29;break}return e.delegateYield(l(),"t0",27);case 27:e.next=25;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(22),s.e(e.t1);case 34:return e.prev=34,s.f(),e.finish(34);case 37:return Object.keys(r).forEach((function(e){return jh(r[e])})),e.abrupt("return",o);case 39:case"end":return e.stop()}}),e,this,[[22,31,34,37]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),tte=[0,5,9,13,17,1,2],nte=0,rte=function(){function e(t,n){Jr(this,e),ua(this,"handDetector"),ua(this,"handPoseModel"),ua(this,"inputSize"),ua(this,"storedBoxes"),ua(this,"skipped"),ua(this,"detectedHands"),this.handDetector=t,this.handPoseModel=n,this.inputSize=this.handPoseModel&&this.handPoseModel.inputs[0].shape?this.handPoseModel.inputs[0].shape[2]:0,this.storedBoxes=[],this.skipped=Number.MAX_SAFE_INTEGER,this.detectedHands=0}return $r(e,[{key:"calculateLandmarksBoundingBox",value:function(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{startPoint:[Math.min.apply(Math,ta(t)),Math.min.apply(Math,ta(n))],endPoint:[Math.max.apply(Math,ta(t)),Math.max.apply(Math,ta(n))]}}},{key:"getBoxForPalmLandmarks",value:function(e,t){var n=e.map((function(e){return Qee([].concat(ta(e),[1]),t)}));return Uee(Gee(this.calculateLandmarksBoundingBox(n)),5)}},{key:"getBoxForHandLandmarks",value:function(e){var t=Uee(Gee(this.calculateLandmarksBoundingBox(e)),1.65);t.palmLandmarks=[];for(var n=0;n<tte.length;n++)t.palmLandmarks.push(e[tte[n]].slice(0,2));return t}},{key:"transformRawCoords",value:function(e,t,n,r){var a=this,i=Wee(t),o=[i[0]/this.inputSize,i[1]/this.inputSize,(i[0]+i[1])/this.inputSize/2],s=e.map((function(e){return[o[0]*(e[0]-a.inputSize/2),o[1]*(e[1]-a.inputSize/2),o[2]*e[2]]})),u=Jee(n,[0,0]),l=s.map((function(e){var t=Qee(e,u);return[].concat(ta(t),[e[2]])})),c=function(e){var t=[[e[0][0],e[1][0]],[e[0][1],e[1][1]]],n=[e[0][2],e[1][2]],r=[-Yee(t[0],n),-Yee(t[1],n)];return[t[0].concat(r[0]),t[1].concat(r[1]),[0,0,1]]}(r),d=[].concat(ta(jee(t)),[1]),h=[Yee(d,c[0]),Yee(d,c[1])];return l.map((function(e){return[Math.trunc(e[0]+h[0]),Math.trunc(e[1]+h[1]),Math.trunc(e[2])]}))}},{key:"estimateHands",value:function(){var e=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,l,c,d,h,p,f,m,g,v,y,b,x,A,w,k,S,C,I,E,T,N,_;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!1,i=(n.hand.skipTime||0)>ma()-nte,o=this.skipped<(n.hand.skipFrames||0),!(n.skipAllowed&&i&&o)){e.next=8;break}return e.next=6,this.handDetector.predict(t,n);case 6:a=e.sent,this.skipped=0;case 8:n.skipAllowed&&this.skipped++,a&&a.length>0&&(a.length!==this.detectedHands&&this.detectedHands!==n.hand.maxDetected||!n.hand.landmarks)&&(this.detectedHands=0,this.storedBoxes=ta(a),this.storedBoxes.length>0&&(r=!0)),s=[],l=0;case 12:if(!(l<this.storedBoxes.length)){e.next=58;break}if(c=this.storedBoxes[l]){e.next=16;break}return e.abrupt("continue",55);case 16:if(!n.hand.landmarks){e.next=52;break}return d=n.hand.rotation?Xee(c.palmLandmarks[0],c.palmLandmarks[2]):0,h=jee(c),p=[h[0]/t.shape[2],h[1]/t.shape[1]],f=n.hand.rotation&&Z7.kernels.includes("rotatewithoffset")?Db.rotateWithOffset(t,d,0,p):t.clone(),m=Jee(-d,h),g=r?this.getBoxForPalmLandmarks(c.palmLandmarks,m):c,v=Vee(g,f,[this.inputSize,this.inputSize]),y=uf(v,m6.tf255),jh(v),jh(f),b=this.handPoseModel.execute(y),x=u(b,2),A=x[0],w=x[1],nte=ma(),jh(y),e.next=32,A.data();case 32:if(k=e.sent[0],jh(A),!(k>=n.hand.minConfidence/4)){e.next=48;break}return S=Bf(w,[-1,3]),e.next=38,S.array();case 38:C=e.sent,jh(w),jh(S),I=this.transformRawCoords(C,g,d,m),E=this.getBoxForHandLandmarks(I),this.storedBoxes[l]=Wr(Wr({},E),{},{confidence:k}),T={landmarks:I,confidence:k,boxConfidence:c.confidence,fingerConfidence:k,box:{topLeft:E.startPoint,bottomRight:E.endPoint}},s.push(T),e.next=49;break;case 48:this.storedBoxes[l]=null;case 49:jh(w),e.next=55;break;case 52:N=Uee(Gee(c),1.65),_={confidence:c.confidence,boxConfidence:c.confidence,fingerConfidence:0,box:{topLeft:N.startPoint,bottomRight:N.endPoint},landmarks:[]},s.push(_);case 55:l++,e.next=12;break;case 58:return this.storedBoxes=this.storedBoxes.filter((function(e){return null!==e})),this.detectedHands=s.length,s.length>n.hand.maxDetected&&(s.length=n.hand.maxDetected),e.abrupt("return",s);case 62:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),ate={thumb:0,index:1,middle:2,ring:3,pinky:4,all:[0,1,2,3,4],nameMapping:{0:"thumb",1:"index",2:"middle",3:"ring",4:"pinky"},pointsMapping:{0:[[0,1],[1,2],[2,3],[3,4]],1:[[0,5],[5,6],[6,7],[7,8]],2:[[0,9],[9,10],[10,11],[11,12]],3:[[0,13],[13,14],[14,15],[15,16]],4:[[0,17],[17,18],[18,19],[19,20]]},getName:function(e){return ate.nameMapping[e]},getPoints:function(e){return ate.pointsMapping[e]}},ite={none:0,half:1,full:2,nameMapping:{0:"none",1:"half",2:"full"},getName:function(e){return ite.nameMapping[e]}},ote={verticalUp:0,verticalDown:1,horizontalLeft:2,horizontalRight:3,diagonalUpRight:4,diagonalUpLeft:5,diagonalDownRight:6,diagonalDownLeft:7,nameMapping:{0:"verticalUp",1:"verticalDown",2:"horizontalLeft",3:"horizontalRight",4:"diagonalUpRight",5:"diagonalUpLeft",6:"diagonalDownRight",7:"diagonalDownLeft"},getName:function(e){return ote.nameMapping[e]}},ste=function(){function e(t){Jr(this,e),ua(this,"name"),ua(this,"curls"),ua(this,"directions"),ua(this,"weights"),ua(this,"weightsRelative"),this.name=t,this.curls={},this.directions={},this.weights=[1,1,1,1,1],this.weightsRelative=[1,1,1,1,1]}return $r(e,[{key:"curl",value:function(e,t,n){"undefined"===typeof this.curls[e]&&(this.curls[e]=[]),this.curls[e].push([t,n])}},{key:"direction",value:function(e,t,n){this.directions[e]||(this.directions[e]=[]),this.directions[e].push([t,n])}},{key:"weight",value:function(e,t){this.weights[e]=t;var n=this.weights.reduce((function(e,t){return e+t}),0);this.weightsRelative=this.weights.map((function(e){return 5*e/n}))}},{key:"matchAgainst",value:function(e,t){var n=0;for(var r in e){var a=e[r],i=this.curls[r];if("undefined"!==typeof i){var o,s=ea(i);try{for(s.s();!(o=s.n()).done;){var l=u(o.value,2),c=l[0],d=l[1];if(a===c){n+=d*this.weightsRelative[r];break}}}catch(x){s.e(x)}finally{s.f()}}else n+=this.weightsRelative[r]}for(var h in t){var p=t[h],f=this.directions[h];if("undefined"!==typeof f){var m,g=ea(f);try{for(g.s();!(m=g.n()).done;){var v=u(m.value,2),y=v[0],b=v[1];if(p===y){n+=b*this.weightsRelative[h];break}}}catch(x){g.e(x)}finally{g.f()}}else n+=this.weightsRelative[h]}return n/10}}]),e}(),ute=ate.thumb,lte=ate.index,cte=ate.middle,dte=ate.ring,hte=ate.pinky,pte=ite.none,fte=ite.half,mte=ite.full,gte=ote.verticalUp,vte=(ote.verticalDown,ote.horizontalLeft),yte=ote.horizontalRight,bte=ote.diagonalUpRight,xte=ote.diagonalUpLeft,Ate=(ote.diagonalDownRight,ote.diagonalDownLeft,new ste("thumbs up"));Ate.curl(ute,pte,1),Ate.direction(ute,gte,1),Ate.direction(ute,xte,.25),Ate.direction(ute,bte,.25);for(var wte=0,kte=[ate.index,ate.middle,ate.ring,ate.pinky];wte<kte.length;wte++){var Ste=kte[wte];Ate.curl(Ste,mte,1),Ate.direction(Ste,vte,1),Ate.direction(Ste,yte,1)}var Cte=new ste("victory");Cte.curl(ute,fte,.5),Cte.curl(ute,pte,.5),Cte.direction(ute,gte,1),Cte.direction(ute,xte,1),Cte.curl(lte,pte,1),Cte.direction(lte,gte,.75),Cte.direction(lte,xte,1),Cte.curl(cte,pte,1),Cte.direction(cte,gte,1),Cte.direction(cte,xte,.75),Cte.curl(dte,mte,1),Cte.direction(dte,gte,.2),Cte.direction(dte,xte,1),Cte.direction(dte,vte,.2),Cte.curl(hte,mte,1),Cte.direction(hte,gte,.2),Cte.direction(hte,xte,1),Cte.direction(hte,vte,.2),Cte.weight(lte,2),Cte.weight(cte,2);var Ite=new ste("point");Ite.curl(ute,mte,1),Ite.curl(lte,pte,.5),Ite.curl(cte,mte,.5),Ite.curl(dte,mte,.5),Ite.curl(hte,mte,.5),Ite.weight(lte,2),Ite.weight(cte,2);var Ete=new ste("middle finger");Ete.curl(ute,pte,1),Ete.curl(lte,mte,.5),Ete.curl(cte,mte,.5),Ete.curl(dte,mte,.5),Ete.curl(hte,mte,.5),Ete.weight(lte,2),Ete.weight(cte,2);var Tte=new ste("open palm");Tte.curl(ute,pte,.75),Tte.curl(lte,pte,.75),Tte.curl(cte,pte,.75),Tte.curl(dte,pte,.75),Tte.curl(hte,pte,.75);var Nte=[Ate,Cte,Ite,Ete,Tte],_te=60,Mte=130,Rte=1.1,Ote=.9,Pte=1.6;function Fte(e,t,n,r){var a=(t-r)/(e-n),i=180*Math.atan(a)/Math.PI;return i<=0?i=-i:i>0&&(i=180-i),i}function Dte(e,t){if(!e||!t)return[0,0];var n=Fte(e[0],e[1],t[0],t[1]);return 2===e.length?n:[n,Fte(e[1],e[2],t[1],t[2])]}function Lte(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,r=0,a=0;return e>=75&&e<=105?n=1*t:e>=25&&e<=155?r=1*t:a=1*t,[n,r,a]}function zte(e,t,n){var r=e[0]-t[0],a=e[0]-n[0],i=t[0]-n[0],o=e[1]-t[1],s=e[1]-n[1],u=t[1]-n[1],l=e[2]-t[2],c=e[2]-n[2],d=t[2]-n[2],h=Math.sqrt(r*r+o*o+l*l),p=Math.sqrt(a*a+s*s+c*c),f=Math.sqrt(i*i+u*u+d*d),m=(f*f+h*h-p*p)/(2*f*h);m>1?m=1:m<-1&&(m=-1);var g=Math.acos(m);return(g=57.2958*g%180)>Mte?ite.none:g>_te?ite.half:ite.full}function Bte(e,t,n,r){return r===Math.abs(e)?e>0?ote.horizontalLeft:ote.horizontalRight:r===Math.abs(t)?t>0?ote.horizontalLeft:ote.horizontalRight:n>0?ote.horizontalLeft:ote.horizontalRight}function Wte(e,t,n,r){return r===Math.abs(e)?e<0?ote.verticalDown:ote.verticalUp:r===Math.abs(t)?t<0?ote.verticalDown:ote.verticalUp:n<0?ote.verticalDown:ote.verticalUp}function jte(e,t,n,r){var a=e[0]-t[0],i=e[0]-n[0],o=t[0]-n[0],s=e[1]-t[1],u=e[1]-n[1],l=t[1]-n[1],c=Math.max(Math.abs(a),Math.abs(i),Math.abs(o)),d=Math.max(Math.abs(s),Math.abs(u),Math.abs(l)),h=0,p=0,f=0,m=d/(c+1e-5);m>1.5?h+=Rte:m>.66?p+=Rte:f+=Rte;var g=Math.sqrt(a*a+s*s),v=Math.sqrt(i*i+u*u),y=Math.sqrt(o*o+l*l),b=Math.max(g,v,y),x=e[0],A=e[1],w=n[0],k=n[1];b===g?(w=n[0],k=n[1]):b===y&&(x=t[0],A=t[1]);var S=Lte(Dte([x,A],[w,k]),Pte);h+=S[0],p+=S[1],f+=S[2];var C,I,E=ea(r);try{for(E.s();!(C=E.n()).done;){var T=Lte(C.value,Ote);h+=T[0],p+=T[1],f+=T[2]}}catch(N){E.e(N)}finally{E.f()}return I=h===Math.max(h,p,f)?Wte(u,s,l,d):f===Math.max(p,f)?Bte(i,a,o,c):function(e,t,n,r,a,i,o,s){var u=Wte(e,t,n,r),l=Bte(a,i,o,s);return u===ote.verticalUp?l===ote.horizontalLeft?ote.diagonalUpLeft:ote.diagonalUpRight:l===ote.horizontalLeft?ote.diagonalDownLeft:ote.diagonalDownRight}(u,s,l,d,i,a,o,c),I}function Vte(e){var t=[],n=[],r=[],a=[];if(!e)return{curls:r,directions:a};var i,o=ea(ate.all);try{for(o.s();!(i=o.n()).done;){var s,u=i.value,l=ate.getPoints(u),c=[],d=[],h=ea(l);try{for(h.s();!(s=h.n()).done;){var p=s.value,f=Dte(e[p[0]],e[p[1]]),m=f[0],g=f[1];c.push(m),d.push(g)}}catch(E){h.e(E)}finally{h.f()}t.push(c),n.push(d)}}catch(E){o.e(E)}finally{o.f()}var v,y=ea(ate.all);try{for(y.s();!(v=y.n()).done;){var b=v.value,x=b===ate.thumb?1:0,A=ate.getPoints(b),w=e[A[x][0]],k=e[A[x+1][1]],S=e[A[3][1]],C=zte(w,k,S),I=jte(w,k,S,t[b].slice(x));r[b]=C,a[b]=I}}catch(E){y.e(E)}finally{y.f()}return{curls:r,directions:a}}function Hte(e){if(!e||0===e.length)return null;var t,n=Vte(e),r={},a=ea(ate.all);try{for(a.s();!(t=a.n()).done;){var i=t.value;r[ate.getName(i)]={curl:ite.getName(n.curls[i]),direction:ote.getName(n.directions[i])}}}catch(o){a.e(o)}finally{a.f()}return r}function Ute(e){var t=[];if(!e||0===e.length)return t;var n,r=Vte(e),a=ea(Nte);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=i.matchAgainst(r.curls,r.directions);o>=.7&&t.push({name:i.name,confidence:o})}}catch(s){a.e(s)}finally{a.f()}return t}var Gte,Xte,qte,Yte={thumb:[1,2,3,4],index:[5,6,7,8],middle:[9,10,11,12],ring:[13,14,15,16],pinky:[17,18,19,20],palm:[0]};function Kte(e,t){return Zte.apply(this,arguments)}function Zte(){return Zte=Mr(Nr().mark((function e(t,n){var r,a,i,o;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qte.estimateHands(t,n);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:for(a=[],i=function(e){var n={};if(r[e].landmarks)for(var i=0,o=Object.keys(Yte);i<o.length;i++){var s=o[i];n[s]=Yte[s].map((function(t){return r[e].landmarks[t]}))}var u=r[e].landmarks,l=[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,0,0],c=[0,0,0,0];if(u&&u.length>0){var d,h=ea(u);try{for(h.s();!(d=h.n()).done;){var p=d.value;p[0]<l[0]&&(l[0]=p[0]),p[1]<l[1]&&(l[1]=p[1]),p[0]>l[2]&&(l[2]=p[0]),p[1]>l[3]&&(l[3]=p[1])}}catch(m){h.e(m)}finally{h.f()}l[2]-=l[0],l[3]-=l[1],c=[l[0]/(t.shape[2]||0),l[1]/(t.shape[1]||0),l[2]/(t.shape[2]||0),l[3]/(t.shape[1]||0)]}else l=r[e].box?[Math.trunc(Math.max(0,r[e].box.topLeft[0])),Math.trunc(Math.max(0,r[e].box.topLeft[1])),Math.trunc(Math.min(t.shape[2]||0,r[e].box.bottomRight[0])-Math.max(0,r[e].box.topLeft[0])),Math.trunc(Math.min(t.shape[1]||0,r[e].box.bottomRight[1])-Math.max(0,r[e].box.topLeft[1]))]:[0,0,0,0],c=[r[e].box.topLeft[0]/(t.shape[2]||0),r[e].box.topLeft[1]/(t.shape[1]||0),(r[e].box.bottomRight[0]-r[e].box.topLeft[0])/(t.shape[2]||0),(r[e].box.bottomRight[1]-r[e].box.topLeft[1])/(t.shape[1]||0)];var f=Hte(u);a.push({id:e,score:Math.round(100*r[e].confidence)/100,boxScore:Math.round(100*r[e].boxConfidence)/100,fingerScore:Math.round(100*r[e].fingerConfidence)/100,label:"hand",box:l,boxRaw:c,keypoints:u,annotations:n,landmarks:f})},o=0;o<r.length;o++)i(o);return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)}))),Zte.apply(this,arguments)}function Jte(e){return Qte.apply(this,arguments)}function Qte(){return(Qte=Mr(Nr().mark((function e(t){var n,r,a,i,o;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z7.initial&&(Gte=null,Xte=null),Gte&&Xte){e.next=10;break}return e.next=4,Promise.all([t.hand.enabled?e6(null==(n=t.hand.detector)?void 0:n.modelPath):null,t.hand.landmarks?e6(null==(r=t.hand.skeleton)?void 0:r.modelPath):null]);case 4:a=e.sent,i=u(a,2),Gte=i[0],Xte=i[1],e.next=12;break;case 10:t.debug&&pa("cached model:",Gte.modelUrl),t.debug&&pa("cached model:",Xte.modelUrl);case 12:return o=new ete(Gte),qte=new rte(o,Xte),e.abrupt("return",[Gte,Xte]);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $te,ene=[null,null],tne=["StatefulPartitionedCall/Postprocessor/Slice","StatefulPartitionedCall/Postprocessor/ExpandDims_1"],nne=[[0,0],[0,0]],rne=["hand","fist","pinch","point","face","tip","pinchtip"],ane=1.6,ine=Number.MAX_SAFE_INTEGER,one=0,sne=[0,0],une={boxes:[],hands:[]},lne={thumb:[1,2,3,4],index:[5,6,7,8],middle:[9,10,11,12],ring:[13,14,15,16],pinky:[17,18,19,20],base:[0],palm:[0,17,13,9,5,1,0]};function cne(e){return dne.apply(this,arguments)}function dne(){return(dne=Mr(Nr().mark((function e(t){var n,r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z7.initial&&(ene[0]=null),ene[0]){e.next=11;break}return $re(["tensorlistreserve","enter","tensorlistfromtensor","merge","loopcond","switch","exit","tensorliststack","nextiteration","tensorlistsetitem","tensorlistgetitem","reciprocal","shape","split","where"],t),e.next=5,e6(null==(n=t.hand.detector)?void 0:n.modelPath);case 5:ene[0]=e.sent,r=Object.values(ene[0].modelSignature.inputs),nne[0][0]=Array.isArray(r)?parseInt(r[0].tensorShape.dim[1].size):0,nne[0][1]=Array.isArray(r)?parseInt(r[0].tensorShape.dim[2].size):0,e.next=12;break;case 11:t.debug&&pa("cached model:",ene[0].modelUrl);case 12:return e.abrupt("return",ene[0]);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hne(e){return pne.apply(this,arguments)}function pne(){return(pne=Mr(Nr().mark((function e(t){var n,r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z7.initial&&(ene[1]=null),ene[1]){e.next=10;break}return e.next=4,e6(null==(n=t.hand.skeleton)?void 0:n.modelPath);case 4:ene[1]=e.sent,r=Object.values(ene[1].modelSignature.inputs),nne[1][0]=Array.isArray(r)?parseInt(r[0].tensorShape.dim[1].size):0,nne[1][1]=Array.isArray(r)?parseInt(r[0].tensorShape.dim[2].size):0,e.next=11;break;case 10:t.debug&&pa("cached model:",ene[1].modelUrl);case 11:return e.abrupt("return",ene[1]);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fne(e,t){return mne.apply(this,arguments)}function mne(){return mne=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,l,c,d,h,p,f,m,g,v,y,b,x,A,w,k,S,C,I;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],t&&ene[0]){e.next=3;break}return e.abrupt("return",r);case 3:return a={},i=(t.shape[2]||1)/(t.shape[1]||1),o=Math.min(8*Math.round((t.shape[1]||0)/8),512),s=8*Math.round(o*i/8),a.resize=Db.resizeBilinear(t,[o,s]),a.cast=th(a.resize,"int32"),e.next=11,ene[0].executeAsync(a.cast,tne);case 11:return l=e.sent,c=u(l,2),a.rawScores=c[0],a.rawBoxes=c[1],a.boxes=Uv(a.rawBoxes,[0,2]),a.scores=Uv(a.rawScores,[0]),jh((d=ay(a.scores,1))[4]),d.splice(4,1),a.filtered=Gv(d,1),jh(d),a.max=Wm(a.filtered,1),a.argmax=gf(a.filtered,1),h=0,e.next=27,Db.nonMaxSuppressionAsync(a.boxes,a.max,(n.hand.maxDetected||0)+1,n.hand.iouThreshold||0,n.hand.minConfidence||1);case 27:return a.nms=e.sent,e.next=30,a.nms.data();case 30:return p=e.sent,e.next=33,a.max.data();case 33:return f=e.sent,e.next=36,a.argmax.data();case 36:m=e.sent,g=0,v=Array.from(p);case 38:if(!(g<v.length)){e.next=55;break}return y=v[g],b=Uf(a.boxes,y,1),e.next=43,b.data();case 43:x=e.sent,jh(b),A=[x[1],x[0],x[3]-x[1],x[2]-x[0]],w=D8(A,1.4),k=[Math.trunc(A[0]*sne[0]),Math.trunc(A[1]*sne[1]),Math.trunc(A[2]*sne[0]),Math.trunc(A[3]*sne[1])],S=f[y],C=rne[m[y]],I={id:h++,score:S,box:k,boxRaw:w,label:C},r.push(I);case 52:g++,e.next=38;break;case 55:return Object.keys(a).forEach((function(e){return jh(a[e])})),r.sort((function(e,t){return t.score-e.score})),r.length>(n.hand.maxDetected||1)&&(r.length=n.hand.maxDetected||1),e.abrupt("return",r);case 59:case"end":return e.stop()}}),e)}))),mne.apply(this,arguments)}function gne(e,t,n){return vne.apply(this,arguments)}function vne(){return vne=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,l,c,d,h,p,f,m,g,v;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={id:n.id,score:Math.round(100*n.score)/100,boxScore:Math.round(100*n.score)/100,fingerScore:0,box:n.box,boxRaw:n.boxRaw,label:n.label,keypoints:[],landmarks:{},annotations:{}},!(t&&ene[1]&&r.hand.landmarks&&n.score>(r.hand.minConfidence||0))){e.next=26;break}return i={},o=[n.boxRaw[1],n.boxRaw[0],n.boxRaw[3]+n.boxRaw[1],n.boxRaw[2]+n.boxRaw[0]],i.crop=Db.cropAndResize(t,[o],[0],[nne[1][0],nne[1][1]],"bilinear"),i.div=uf(i.crop,m6.tf255),s=ene[1].execute(i.div,["Identity_1","Identity"]),l=u(s,2),i.score=l[0],i.keypoints=l[1],e.next=12,i.score.data();case 12:if(c=e.sent[0],!((d=(100-Math.trunc(100/(1+Math.exp(c))))/100)>=(r.hand.minConfidence||0))){e.next=25;break}return a.fingerScore=d,i.reshaped=Bf(i.keypoints,[-1,3]),e.next=19,i.reshaped.array();case 19:for(h=e.sent,p=h.map((function(e){return[e[0]/nne[1][1],e[1]/nne[1][0],e[2]||0]})),f=p.map((function(e){return[e[0]*n.boxRaw[2],e[1]*n.boxRaw[3],e[2]||0]})),a.keypoints=f.map((function(e){return[sne[0]*(e[0]+n.boxRaw[0]),sne[1]*(e[1]+n.boxRaw[1]),e[2]||0]})),a.landmarks=Hte(a.keypoints),m=0,g=Object.keys(lne);m<g.length;m++)v=g[m],a.annotations[v]=lne[v].map((function(e){return a.landmarks&&a.keypoints[e]?a.keypoints[e]:null}));case 25:Object.keys(i).forEach((function(e){return jh(i[e])}));case 26:return e.abrupt("return",a);case 27:case"end":return e.stop()}}),e)}))),vne.apply(this,arguments)}function yne(e,t){return bne.apply(this,arguments)}function bne(){return bne=Mr(Nr().mark((function e(t,n){var r,a,i,o;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ene[0]&&ene[1]&&(null==(r=ene[0])?void 0:r.inputs[0].shape)&&(null==(a=ene[1])?void 0:a.inputs[0].shape)){e.next=2;break}return e.abrupt("return",[]);case 2:if(sne=[t.shape[2]||0,t.shape[1]||0],ine++,i=(n.hand.skipTime||0)>ma()-one,o=ine<(n.hand.skipFrames||0),!(n.skipAllowed&&i&&o)){e.next=8;break}return e.abrupt("return",une.hands);case 8:return e.abrupt("return",new Promise(function(){var e=Mr(Nr().mark((function e(r){var a,i,o,s,u,l,c,d,h;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=3*(n.hand.skipTime||0)>ma()-one,i=ine<3*(n.hand.skipFrames||0),!n.skipAllowed||une.hands.length!==n.hand.maxDetected){e.next=8;break}return e.next=5,Promise.all(une.boxes.map((function(e){return gne(t,e,n)})));case 5:une.hands=e.sent,e.next=22;break;case 8:if(!(n.skipAllowed&&a&&i&&une.hands.length>0)){e.next=14;break}return e.next=11,Promise.all(une.boxes.map((function(e){return gne(t,e,n)})));case 11:une.hands=e.sent,e.next=22;break;case 14:return e.next=16,fne(t,n);case 16:return une.boxes=e.sent,one=ma(),e.next=20,Promise.all(une.boxes.map((function(e){return gne(t,e,n)})));case 20:une.hands=e.sent,ine=0;case 22:if(o=ta(une.boxes),une.boxes.length=0,n.cacheSensitivity>0)for(s=0;s<une.hands.length;s++)(u=F8(une.hands[s].keypoints,sne)).box[2]/(t.shape[2]||1)>.05&&u.box[3]/(t.shape[1]||1)>.05&&une.hands[s].fingerScore&&une.hands[s].fingerScore>(n.hand.minConfidence||0)&&(l=D8(u.box,ane),c=D8(u.boxRaw,ane),une.boxes.push(Wr(Wr({},o[s]),{},{box:l,boxRaw:c})));for(d=0;d<une.hands.length;d++)h=P8(une.hands[d].keypoints,sne),une.hands[d].box=h.box,une.hands[d].boxRaw=h.boxRaw;r(une.hands);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),bne.apply(this,arguments)}var xne=[],Ane=Number.MAX_SAFE_INTEGER,wne=0,kne=0;function Sne(e){return Cne.apply(this,arguments)}function Cne(){return(Cne=Mr(Nr().mark((function e(t){var n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z7.initial&&($te=null),$te){e.next=7;break}return e.next=4,e6(null==(n=t.face.liveness)?void 0:n.modelPath);case 4:$te=e.sent,e.next=8;break;case 7:t.debug&&pa("cached model:",$te.modelUrl);case 8:return e.abrupt("return",$te);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ine(e,t,n,r){return Ene.apply(this,arguments)}function Ene(){return Ene=Mr(Nr().mark((function e(t,n,r,a){var i,o,s,u;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($te){e.next=2;break}return e.abrupt("return",0);case 2:if(s=((null==(i=n.face.liveness)?void 0:i.skipTime)||0)>ma()-kne,u=Ane<((null==(o=n.face.liveness)?void 0:o.skipFrames)||0),!(n.skipAllowed&&s&&u&&wne===a&&xne[r])){e.next=7;break}return Ane++,e.abrupt("return",xne[r]);case 7:return Ane=0,e.abrupt("return",new Promise(function(){var e=Mr(Nr().mark((function e(n){var i,o,s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Db.resizeBilinear(t,[(null==$te?void 0:$te.inputs[0].shape)?$te.inputs[0].shape[2]:0,(null==$te?void 0:$te.inputs[0].shape)?$te.inputs[0].shape[1]:0],!1),o=null==$te?void 0:$te.execute(i),e.next=4,o.data();case 4:s=e.sent[0],xne[r]=Math.round(100*s)/100,wne=a,kne=ma(),jh([i,o]),n(xne[r]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),Ene.apply(this,arguments)}var Tne={};sa(Tne,{connected:function(){return Pne},horizontal:function(){return Mne},kpt:function(){return _ne},relative:function(){return One},vertical:function(){return Rne}});var Nne,_ne=["nose","leftEye","rightEye","leftEar","rightEar","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle"],Mne=[["leftEye","rightEye"],["leftEar","rightEar"],["leftShoulder","rightShoulder"],["leftElbow","rightElbow"],["leftWrist","rightWrist"],["leftHip","rightHip"],["leftKnee","rightKnee"],["leftAnkle","rightAnkle"]],Rne=[["leftKnee","leftShoulder"],["rightKnee","rightShoulder"],["leftAnkle","leftKnee"],["rightAnkle","rightKnee"]],One=[[["leftHip","rightHip"],["leftShoulder","rightShoulder"]],[["leftElbow","rightElbow"],["leftShoulder","rightShoulder"]]],Pne={leftLeg:["leftHip","leftKnee","leftAnkle"],rightLeg:["rightHip","rightKnee","rightAnkle"],torso:["leftShoulder","rightShoulder","rightHip","leftHip","leftShoulder"],leftArm:["leftShoulder","leftElbow","leftWrist"],rightArm:["rightShoulder","rightElbow","rightWrist"],head:[]},Fne={keypoints:[],padding:[[0,0],[0,0],[0,0],[0,0]]};function Dne(e){var t,n=ea(Mne);try{var r=function(){var n=t.value,r=e.keypoints.findIndex((function(e){return e.part===n[0]})),a=e.keypoints.findIndex((function(e){return e.part===n[1]}));if(e.keypoints[r]&&e.keypoints[a]&&e.keypoints[r].position[0]<e.keypoints[a].position[0]){var i=e.keypoints[r];e.keypoints[r]=e.keypoints[a],e.keypoints[a]=i}};for(n.s();!(t=n.n()).done;)r()}catch(d){n.e(d)}finally{n.f()}var a,i=ea(Rne);try{var o=function(){var t=a.value,n=e.keypoints.findIndex((function(e){return e&&e.part===t[0]})),r=e.keypoints.findIndex((function(e){return e&&e.part===t[1]}));e.keypoints[n]&&e.keypoints[r]&&e.keypoints[n].position[1]<e.keypoints[r].position[1]&&e.keypoints.splice(n,1)};for(i.s();!(a=i.n()).done;)o()}catch(d){i.e(d)}finally{i.f()}var s,l=ea(One);try{var c=function(){var t=u(s.value,2),n=t[0],r=t[1],a=e.keypoints.findIndex((function(e){return e&&e.part===n[0]})),i=e.keypoints.findIndex((function(e){return e&&e.part===n[1]})),o=e.keypoints.findIndex((function(e){return e&&e.part===r[0]})),l=e.keypoints.findIndex((function(e){return e&&e.part===r[1]}));if(!e.keypoints[o]||!e.keypoints[l])return"continue";var c=e.keypoints[a]?[Math.abs(e.keypoints[o].position[0]-e.keypoints[a].position[0]),Math.abs(e.keypoints[l].position[0]-e.keypoints[a].position[0])]:[0,0],d=e.keypoints[i]?[Math.abs(e.keypoints[l].position[0]-e.keypoints[i].position[0]),Math.abs(e.keypoints[o].position[0]-e.keypoints[i].position[0])]:[0,0];if(c[0]>c[1]||d[0]>d[1]){var h=e.keypoints[a];e.keypoints[a]=e.keypoints[i],e.keypoints[i]=h}};for(l.s();!(s=l.n()).done;)c()}catch(d){l.e(d)}finally{l.f()}}function Lne(e){for(var t=0;t<e.length;t++)if(e[t]&&Fne.keypoints[t]){var n=[Math.abs(e[t].positionRaw[0]-Fne.keypoints[t].positionRaw[0]),Math.abs(e[t].positionRaw[1]-Fne.keypoints[t].positionRaw[1])];n[0]<.005&&n[1]<.005?e[t]=Fne.keypoints[t]:Fne.keypoints[t]=e[t]}else Fne.keypoints[t]=e[t];return e}function zne(e,t){var n={};if(!e.shape||!e.shape[1]||!e.shape[2])return e;Fne.padding=[[0,0],[e.shape[2]>e.shape[1]?Math.trunc((e.shape[2]-e.shape[1])/2):0,e.shape[2]>e.shape[1]?Math.trunc((e.shape[2]-e.shape[1])/2):0],[e.shape[1]>e.shape[2]?Math.trunc((e.shape[1]-e.shape[2])/2):0,e.shape[1]>e.shape[2]?Math.trunc((e.shape[1]-e.shape[2])/2):0],[0,0]],n.pad=Qg(e,Fne.padding),n.resize=Db.resizeBilinear(n.pad,[t,t]);var r=th(n.resize,"int32");return Object.keys(n).forEach((function(e){return jh(n[e])})),r}function Bne(e,t){e.keypoints=e.keypoints.filter((function(e){return e&&e.position}));var n,r=ea(e.keypoints);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.position=[a.position[0]*(t[0]+Fne.padding[2][0]+Fne.padding[2][1])/t[0]-Fne.padding[2][0],a.position[1]*(t[1]+Fne.padding[1][0]+Fne.padding[1][1])/t[1]-Fne.padding[1][0]],a.positionRaw=[a.position[0]/t[0],a.position[1]/t[1]]}}catch(o){r.e(o)}finally{r.f()}var i=P8(e.keypoints.map((function(e){return e.position})),t);return e.box=i.box,e.boxRaw=i.boxRaw,e}var Wne,jne=0,Vne=Number.MAX_SAFE_INTEGER,Hne={boxes:[],bodies:[],last:0};function Une(e){return Gne.apply(this,arguments)}function Gne(){return(Gne=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z7.initial&&(Nne=null),Nne){e.next=8;break}return $re(["size"],t),e.next=5,e6(t.body.modelPath);case 5:Nne=e.sent,e.next=9;break;case 8:t.debug&&pa("cached model:",Nne.modelUrl);case 9:return(jne=Nne.inputs[0].shape?Nne.inputs[0].shape[2]:0)<64&&(jne=256),e.abrupt("return",Nne);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xne(e,t,n){return qne.apply(this,arguments)}function qne(){return qne=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,l,c,d,h,p,f,m,g;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=t[0][0],i=[],o=0,s=0;s<a.length;s++)(o=a[s][2])>n.body.minConfidence&&(l=[a[s][1],a[s][0]],i.push({score:Math.round(100*o)/100,part:_ne[s],positionRaw:l,position:[Math.round((r.shape[2]||0)*l[0]),Math.round((r.shape[1]||0)*l[1])]}));for(o=i.reduce((function(e,t){return t.score>e?t.score:e}),0),c=[],d=P8(i.map((function(e){return e.position})),[r.shape[2],r.shape[1]]),h={},p=function(){for(var e=u(m[f],2),t=e[0],r=e[1],a=[],o=function(e){var t=i.find((function(t){return t.part===r[e]})),o=i.find((function(t){return t.part===r[e+1]}));t&&o&&t.score>(n.body.minConfidence||0)&&o.score>(n.body.minConfidence||0)&&a.push([t.position,o.position])},s=0;s<r.length-1;s++)o(s);h[t]=a},f=0,m=Object.entries(Pne);f<m.length;f++)p();return Dne(g={id:0,score:o,box:d.box,boxRaw:d.boxRaw,keypoints:i,annotations:h}),c.push(g),e.abrupt("return",c);case 14:case"end":return e.stop()}}),e)}))),qne.apply(this,arguments)}function Yne(e,t,n){return Kne.apply(this,arguments)}function Kne(){return Kne=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,l,c,d,h,p,f,m,g,v,y;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=[],i=0;i<t[0].length;i++)if(o=t[0][i],(s=Math.round(100*o[55])/100)>n.body.minConfidence){for(l=[],c=0;c<17;c++)(d=o[3*c+2])>n.body.minConfidence&&(h=[o[3*c+1],o[3*c+0]],l.push({part:_ne[c],score:Math.round(100*d)/100,positionRaw:h,position:[Math.round((r.shape[2]||0)*h[0]),Math.round((r.shape[1]||0)*h[1])]}));for(p=P8(l.map((function(e){return e.position})),[r.shape[2],r.shape[1]]),f={},m=function(){for(var e=u(v[g],2),t=e[0],r=e[1],a=[],i=function(e){var t=l.find((function(t){return t.part===r[e]})),i=l.find((function(t){return t.part===r[e+1]}));t&&i&&t.score>(n.body.minConfidence||0)&&i.score>(n.body.minConfidence||0)&&a.push([t.position,i.position])},o=0;o<r.length-1;o++)i(o);f[t]=a},g=0,v=Object.entries(Pne);g<v.length;g++)m();Dne(y={id:i,score:s,box:p.box,boxRaw:p.boxRaw,keypoints:[].concat(l),annotations:f}),a.push(y)}return a.sort((function(e,t){return t.score-e.score})),a.length>n.body.maxDetected&&(a.length=n.body.maxDetected),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),Kne.apply(this,arguments)}function Zne(e,t){return Jne.apply(this,arguments)}function Jne(){return Jne=Mr(Nr().mark((function e(t,n){var r,a;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Nne&&(null==Nne?void 0:Nne.inputs[0].shape)){e.next=2;break}return e.abrupt("return",[]);case 2:if(n.skipAllowed||(Hne.boxes.length=0),Vne++,r=(n.body.skipTime||0)>ma()-Hne.last,a=Vne<(n.body.skipFrames||0),!(n.skipAllowed&&r&&a)){e.next=8;break}return e.abrupt("return",Hne.bodies);case 8:return e.abrupt("return",new Promise(function(){var e=Mr(Nr().mark((function e(r){var a,i,o,s,u;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vne=0,(a={}).input=zne(t,jne),a.res=null==Nne?void 0:Nne.execute(a.input),Hne.last=ma(),e.next=7,a.res.array();case 7:if(i=e.sent,17!==a.res.shape[2]){e.next=14;break}return e.next=11,Xne(i,n,t);case 11:e.t0=e.sent,e.next=17;break;case 14:return e.next=16,Yne(i,n,t);case 16:e.t0=e.sent;case 17:Hne.bodies=e.t0,o=ea(Hne.bodies);try{for(o.s();!(s=o.n()).done;)Bne(u=s.value,[t.shape[2]||1,t.shape[1]||1]),Lne(u.keypoints)}catch(l){o.e(l)}finally{o.f()}Object.keys(a).forEach((function(e){return jh(a[e])})),r(Hne.bodies);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),Jne.apply(this,arguments)}var Qne=[],$ne=0,ere=Number.MAX_SAFE_INTEGER,tre=0,nre=2.5;function rre(e){return are.apply(this,arguments)}function are(){return(are=Mr(Nr().mark((function e(t){var n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Wne&&!Z7.initial){e.next=8;break}return e.next=3,e6(t.object.modelPath);case 3:Wne=e.sent,n=Object.values(Wne.modelSignature.inputs),tre=Array.isArray(n)?parseInt(n[0].tensorShape.dim[2].size):0,e.next=9;break;case 8:t.debug&&pa("cached model:",Wne.modelUrl);case 9:return e.abrupt("return",Wne);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ire(e,t,n){return ore.apply(this,arguments)}function ore(){return ore=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=0,i=[],o=function(){var e=u[s];Wh(Mr(Nr().mark((function o(){var s,u,l,c,d,h,p,f,m,g,v,y,b,x,A,w,k,S,C;return Nr().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s=13*e,u=Uv(t.find((function(e){return e.shape[1]===Math.pow(s,2)&&(e.shape[2]||0)===o9.length}))),l=Uv(t.find((function(e){return e.shape[1]===Math.pow(s,2)&&(e.shape[2]||0)<o9.length}))),c=l.reshape([-1,4,l.shape[1]/4]),o.next=6,c.argMax(2).array();case 6:return d=o.sent,o.next=9,u.array();case 9:for(h=o.sent,p=0;p<u.shape[0];p++)for(f=0;f<u.shape[1];f++)(m=h[p][f])>(r.object.minConfidence||0)&&61!==f&&(g=(.5+Math.trunc(p%s))/s,v=(.5+Math.trunc(p/s))/s,y=d[p].map((function(t){return t*(s/e/tre)})),b=g-nre/e*y[0],x=v-nre/e*y[1],A=g+nre/e*y[2]-b,w=v+nre/e*y[3]-x,k=(k=[b,x,A,w]).map((function(e){return Math.max(0,Math.min(e,1))})),S=[k[0]*n[0],k[1]*n[1],k[2]*n[0],k[3]*n[1]],C={id:a++,score:Math.round(100*m)/100,class:f+1,label:o9[f].label,box:S.map((function(e){return Math.trunc(e)})),boxRaw:k},i.push(C));case 11:case"end":return o.stop()}}),o)}))))},s=0,u=[1,2,4];s<u.length;s++)o();if(t.forEach((function(e){return jh(e)})),l=i.map((function(e){return[e.boxRaw[1],e.boxRaw[0],e.boxRaw[3],e.boxRaw[2]]})),c=i.map((function(e){return e.score})),d=[],!(l&&l.length>0)){e.next=16;break}return e.next=11,Db.nonMaxSuppressionAsync(l,c,r.object.maxDetected,r.object.iouThreshold,r.object.minConfidence);case 11:return h=e.sent,e.next=14,h.data();case 14:d=e.sent,jh(h);case 16:return i=i.filter((function(e,t){return d.includes(t)})).sort((function(e,t){return t.score-e.score})),e.abrupt("return",i);case 18:case"end":return e.stop()}}),e)}))),ore.apply(this,arguments)}function sre(e,t){return ure.apply(this,arguments)}function ure(){return ure=Mr(Nr().mark((function e(t,n){var r,a;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n.object.skipTime||0)>ma()-$ne,a=ere<(n.object.skipFrames||0),!(n.skipAllowed&&r&&a&&Qne.length>0)){e.next=5;break}return ere++,e.abrupt("return",Qne);case 5:if(ere=0,Z7.kernels.includes("mod")&&Z7.kernels.includes("sparsetodense")){e.next=8;break}return e.abrupt("return",Qne);case 8:return e.abrupt("return",new Promise(function(){var e=Mr(Nr().mark((function e(r){var a,i,o,s,u,l;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[t.shape[2]||0,t.shape[1]||0],i=Db.resizeBilinear(t,[tre,tre],!1),o=uf(i,m6.tf255),s=o.transpose([0,3,1,2]),jh(o),jh(i),n.object.enabled&&(u=Wne.execute(s)),$ne=ma(),jh(s),e.next=11,ire(u,a,n);case 11:l=e.sent,Qne=l,r(l);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),ure.apply(this,arguments)}var lre=["nose","leftEye","rightEye","leftEar","rightEar","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle"],cre=lre.length,dre=lre.reduce((function(e,t,n){return e[t]=n,e}),{}),hre=([["leftHip","leftShoulder"],["leftElbow","leftShoulder"],["leftElbow","leftWrist"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["rightHip","rightShoulder"],["rightElbow","rightShoulder"],["rightElbow","rightWrist"],["rightHip","rightKnee"],["rightKnee","rightAnkle"],["leftShoulder","rightShoulder"],["leftHip","rightHip"]].map((function(e){var t=u(e,2),n=t[0],r=t[1];return[dre[n],dre[r]]})),[["nose","leftEye"],["leftEye","leftEar"],["nose","rightEye"],["rightEye","rightEar"],["nose","leftShoulder"],["leftShoulder","leftElbow"],["leftElbow","leftWrist"],["leftShoulder","leftHip"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["nose","rightShoulder"],["rightShoulder","rightElbow"],["rightElbow","rightWrist"],["rightShoulder","rightHip"],["rightHip","rightKnee"],["rightKnee","rightAnkle"]]);function pre(e){var t=e.reduce((function(e,t){var n=e.maxX,r=e.maxY,a=e.minX,i=e.minY,o=t.position,s=o.x,u=o.y;return{maxX:Math.max(n,s),maxY:Math.max(r,u),minX:Math.min(a,s),minY:Math.min(i,u)}}),{maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY});return[t.minX,t.minY,t.maxX-t.minX,t.maxY-t.minY]}function fre(e,t,n){var r=u(t,2),a=r[0],i=r[1],o=u(n,2),s=o[0],l=o[1],c=a/s,d=i/l,h=e.map((function(e,t){return function(e,t){return{id:t,score:e.score,boxRaw:[e.box[0]/l,e.box[1]/s,e.box[2]/l,e.box[3]/s],box:[Math.trunc(e.box[0]*d),Math.trunc(e.box[1]*c),Math.trunc(e.box[2]*d),Math.trunc(e.box[3]*c)],keypoints:e.keypoints.map((function(e){var t=e.score,n=e.part,r=e.position;return{score:t,part:n,position:[Math.trunc(r.x*d),Math.trunc(r.y*c)],positionRaw:[r.x/s,r.y/s]}})),annotations:{}}}(e,t)}));return h}var mre,gre=function(){function e(t,n){Jr(this,e),ua(this,"priorityQueue"),ua(this,"numberOfElements"),ua(this,"getElementValue"),this.priorityQueue=new Array(t),this.numberOfElements=-1,this.getElementValue=n}return $r(e,[{key:"enqueue",value:function(e){this.priorityQueue[++this.numberOfElements]=e,this.swim(this.numberOfElements)}},{key:"dequeue",value:function(){var e=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,e}},{key:"empty",value:function(){return-1===this.numberOfElements}},{key:"size",value:function(){return this.numberOfElements+1}},{key:"all",value:function(){return this.priorityQueue.slice(0,this.numberOfElements+1)}},{key:"max",value:function(){return this.priorityQueue[0]}},{key:"swim",value:function(e){for(;e>0&&this.less(Math.floor(e/2),e);)this.exchange(e,Math.floor(e/2)),e=Math.floor(e/2)}},{key:"sink",value:function(e){for(;2*e<=this.numberOfElements;){var t=2*e;if(t<this.numberOfElements&&this.less(t,t+1)&&t++,!this.less(e,t))break;this.exchange(e,t),e=t}}},{key:"getValueAt",value:function(e){return this.getElementValue(this.priorityQueue[e])}},{key:"less",value:function(e,t){return this.getValueAt(e)<this.getValueAt(t)}},{key:"exchange",value:function(e,t){var n=this.priorityQueue[e];this.priorityQueue[e]=this.priorityQueue[t],this.priorityQueue[t]=n}}]),e}();function vre(e,t,n,r){return{y:r.get(e,t,n),x:r.get(e,t,n+cre)}}function yre(e,t,n){var r=vre(e.heatmapY,e.heatmapX,e.id,n),a=r.y,i=r.x;return{x:e.heatmapX*t+i,y:e.heatmapY*t+a}}function bre(e,t,n){return e<t?t:e>n?n:e}function xre(e,t){return{x:e.x+t.x,y:e.y+t.y}}var Are,wre=["MobilenetV1/offset_2/BiasAdd","MobilenetV1/heatmap_2/BiasAdd","MobilenetV1/displacement_fwd_2/BiasAdd","MobilenetV1/displacement_bwd_2/BiasAdd"],kre=16,Sre=Math.pow(50,2);function Cre(e,t,n,r,a,i){for(var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2,s=function(t){return{y:i.get(t.y,t.x,e),x:i.get(t.y,t.x,i.shape[2]/2+e)}},l=function(e,t,n){return{y:bre(Math.round(e.y/kre),0,t-1),x:bre(Math.round(e.x/kre),0,n-1)}},c=u(r.shape,2),d=c[0],h=c[1],p=l(t.position,d,h),f=s(p),m=xre(t.position,f),g=m,v=0;v<o;v++){var y=l(g,d,h),b=vre(y.y,y.x,n,a);g=xre({x:y.x*kre,y:y.y*kre},{x:b.x,y:b.y})}var x=l(g,d,h),A=r.get(x.y,x.x,n);return{position:g,part:lre[n],score:A}}function Ire(e,t,n,r,a){var i=hre.map((function(e){var t=u(e,2),n=t[0],r=t[1];return[dre[n],dre[r]]})),o=i.map((function(e){return u(e,2)[1]})),s=i.map((function(e){return u(e,1)[0]})),l=t.shape[2],c=o.length,d=new Array(l),h=yre(e.part,kre,n);d[e.part.id]={score:e.score,part:lre[e.part.id],position:h};for(var p=c-1;p>=0;--p){var f=o[p],m=s[p];d[f]&&!d[m]&&(d[m]=Cre(p,d[f],m,t,n,a))}for(var g=0;g<c;++g){var v=s[g],y=o[g];d[v]&&!d[y]&&(d[y]=Cre(g,d[v],y,t,n,r))}return d}function Ere(e,t,n,r,a){for(var i=u(a.shape,2),o=i[0],s=i[1],l=!0,c=Math.max(n-1,0),d=Math.min(n+1+1,o),h=c;h<d;++h){for(var p=Math.max(r-1,0),f=Math.min(r+1+1,s),m=p;m<f;++m)if(a.get(h,m,e)>t){l=!1;break}if(!l)break}return l}function Tre(e,t,n){var r=t.x,a=t.y;return e.some((function(e){var t,i=null==(t=e.keypoints[n])?void 0:t.position;return!!i&&function(e,t,n,r){var a=n-e,i=r-t;return a*a+i*i}(a,r,i.y,i.x)<=Sre}))}function Nre(e,t){var n=t.reduce((function(t,n,r){var a=n.position,i=n.score;return Tre(e,a,r)||(t+=i),t}),0);return n/t.length}function _re(e,t,n,r,a,i){for(var o=[],s=function(e,t){for(var n=u(t.shape,3),r=n[0],a=n[1],i=n[2],o=new gre(r*a*i,(function(e){return e.score})),s=0;s<r;++s)for(var l=0;l<a;++l)for(var c=0;c<i;++c){var d=t.get(s,l,c);d<e||Ere(c,d,s,l,t)&&o.enqueue({score:d,part:{heatmapY:s,heatmapX:l,id:c}})}return o}(i,t);o.length<a&&!s.empty();){var l=s.dequeue();if(!Tre(o,yre(l.part,kre,e),l.part.id)){var c=Ire(l,t,e,n,r);c=c.filter((function(e){return e.score>i}));var d=Nre(o,c),h=pre(c);d>i&&o.push({keypoints:c,box:h,score:Math.round(100*d)/100})}}return o}function Mre(e,t){return Rre.apply(this,arguments)}function Rre(){return Rre=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,u;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Wh((function(){if(!mre.inputs[0].shape)return[];var e=Db.resizeBilinear(t,[mre.inputs[0].shape[2],mre.inputs[0].shape[1]]),n=Cg(uf(th(e,"float32"),127.5),1),r=mre.execute(n,wre).map((function(e){return Uv(e,[0])}));return r[1]=Hf(r[1]),r})),e.next=3,Promise.all(r.map((function(e){return e.buffer()})));case 3:a=e.sent,i=ea(r);try{for(i.s();!(o=i.n()).done;)jh(o.value)}catch(l){i.e(l)}finally{i.f()}return e.next=8,_re(a[0],a[1],a[2],a[3],n.body.maxDetected,n.body.minConfidence);case 8:if(s=e.sent,mre.inputs[0].shape){e.next=11;break}return e.abrupt("return",[]);case 11:return u=fre(s,[t.shape[1],t.shape[2]],[mre.inputs[0].shape[2],mre.inputs[0].shape[1]]),e.abrupt("return",u);case 13:case"end":return e.stop()}}),e)}))),Rre.apply(this,arguments)}function Ore(e){return Pre.apply(this,arguments)}function Pre(){return(Pre=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mre&&!Z7.initial){e.next=6;break}return e.next=3,e6(t.body.modelPath);case 3:mre=e.sent,e.next=7;break;case 6:t.debug&&pa("cached model:",mre.modelUrl);case 7:return e.abrupt("return",mre);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fre=!1;function Dre(e){return Lre.apply(this,arguments)}function Lre(){return(Lre=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Are&&!Z7.initial){e.next=6;break}return e.next=3,e6(t.segmentation.modelPath);case 3:Are=e.sent,e.next=7;break;case 6:t.debug&&pa("cached model:",Are.modelUrl);case 7:return e.abrupt("return",Are);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zre(e,t,n){return Bre.apply(this,arguments)}function Bre(){return Bre=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,l,c,d,h,p,f,m,g,v,y,b,x,A,w,k;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Fre){e.next=2;break}return e.abrupt("return",{data:[],canvas:null,alpha:null});case 2:if(Fre=!0,Are){e.next=6;break}return e.next=6,Dre(r);case 6:return e.next=8,U7(t,r);case 8:if(o=e.sent,s=(null==(a=o.tensor)?void 0:a.shape[2])||0,l=(null==(i=o.tensor)?void 0:i.shape[1])||0,o.tensor){e.next=13;break}return e.abrupt("return",{data:[],canvas:null,alpha:null});case 13:return(c={}).resize=Db.resizeBilinear(o.tensor,[Are.inputs[0].shape?Are.inputs[0].shape[1]:0,Are.inputs[0].shape?Are.inputs[0].shape[2]:0],!1),jh(o.tensor),c.norm=uf(c.resize,m6.tf255),c.res=Are.execute(c.norm),c.squeeze=Uv(c.res,0),2===c.squeeze.shape[2]?(c.softmax=Lv(c.squeeze),d=ay(c.softmax,2),h=u(d,2),c.bg=h[0],c.fg=h[1],c.expand=Jm(c.fg,2),c.pad=Jm(c.expand,0),c.crop=Db.cropAndResize(c.pad,[[0,0,.5,.5]],[0],[s,l]),c.data=Uv(c.crop,0)):c.data=Db.resizeBilinear(c.squeeze,[l,s]),e.t0=Array,e.next=23,c.data.data();case 23:if(e.t1=e.sent,p=e.t0.from.call(e.t0,e.t1),!Z7.node||Z7.Canvas||"undefined"!==typeof ImageData){e.next=29;break}return r.debug&&pa("canvas support missing"),Object.keys(c).forEach((function(e){return jh(c[e])})),e.abrupt("return",{data:p,canvas:null,alpha:null});case 29:if(f=V7(s,l),!lp){e.next=33;break}return e.next=33,lp.toPixels(c.data,f);case 33:for(m=f.getContext("2d"),r.segmentation.blur&&r.segmentation.blur>0&&(m.filter="blur(".concat(r.segmentation.blur,"px)")),g=m.getImageData(0,0,s,l),v=V7(s,l),y=v.getContext("2d"),o.canvas&&y.drawImage(o.canvas,0,0),y.globalCompositeOperation="darken",r.segmentation.blur&&r.segmentation.blur>0&&(y.filter="blur(".concat(r.segmentation.blur,"px)")),y.drawImage(f,0,0),y.globalCompositeOperation="source-over",y.filter="none",b=y.getImageData(0,0,s,l),x=0;x<s*l;x++)b.data[4*x+3]=g.data[4*x+0];if(y.putImageData(b,0,0),A=null,!n||!v){e.next=57;break}return A=V7(s,l),e.next=52,U7(n,r);case 52:jh((w=e.sent).tensor),(k=A.getContext("2d")).drawImage(w.canvas,0,0,A.width,A.height),k.drawImage(v,0,0);case 57:return Object.keys(c).forEach((function(e){return jh(c[e])})),Fre=!1,e.abrupt("return",{data:p,canvas:v,alpha:f});case 60:case"end":return e.stop()}}),e)}))),Bre.apply(this,arguments)}var Wre=$r((function e(){Jr(this,e),ua(this,"ssrnetage",null),ua(this,"gear",null),ua(this,"blazeposedetect",null),ua(this,"blazepose",null),ua(this,"centernet",null),ua(this,"efficientpose",null),ua(this,"mobilefacenet",null),ua(this,"emotion",null),ua(this,"facedetect",null),ua(this,"faceiris",null),ua(this,"facemesh",null),ua(this,"faceres",null),ua(this,"ssrnetgender",null),ua(this,"handpose",null),ua(this,"handskeleton",null),ua(this,"handtrack",null),ua(this,"liveness",null),ua(this,"movenet",null),ua(this,"nanodet",null),ua(this,"posenet",null),ua(this,"segmentation",null),ua(this,"antispoof",null)}));function jre(e){for(var t=0,n=Object.keys(e.models);t<n.length;t++){var r=n[t];e.models[r]=null}}function Vre(e){return Hre.apply(this,arguments)}function Hre(){return(Hre=Mr(Nr().mark((function e(t){var n,r,a,i,o,s,l,c,d,h,p,f,m,g,v,y,b,x,A,w,k,S,C,I,E,T,N,_,M,R,O,P,F,D,L,z,B,W,j,V,H;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z7.initial&&jre(t),!t.config.hand.enabled){e.next=16;break}if(t.models.handpose||!(null==(r=null==(n=t.config.hand.detector)?void 0:n.modelPath)?void 0:r.includes("handdetect"))){e.next=9;break}return e.next=5,Jte(t.config);case 5:P=e.sent,F=u(P,2),t.models.handpose=F[0],t.models.handskeleton=F[1];case 9:if(t.models.handskeleton||!t.config.hand.landmarks||!(null==(i=null==(a=t.config.hand.detector)?void 0:a.modelPath)?void 0:i.includes("handdetect"))){e.next=16;break}return e.next=12,Jte(t.config);case 12:D=e.sent,L=u(D,2),t.models.handpose=L[0],t.models.handskeleton=L[1];case 16:t.config.body.enabled&&!t.models.blazepose&&(null==(s=null==(o=t.config.body)?void 0:o.modelPath)?void 0:s.includes("blazepose"))&&(t.models.blazepose=Y8(t.config)),t.config.body.enabled&&!t.models.blazeposedetect&&t.config.body.detector&&t.config.body.detector.modelPath&&(t.models.blazeposedetect=X8(t.config)),t.config.body.enabled&&!t.models.efficientpose&&(null==(c=null==(l=t.config.body)?void 0:l.modelPath)?void 0:c.includes("efficientpose"))&&(t.models.efficientpose=S9(t.config)),t.config.body.enabled&&!t.models.movenet&&(null==(h=null==(d=t.config.body)?void 0:d.modelPath)?void 0:h.includes("movenet"))&&(t.models.movenet=Une(t.config)),t.config.body.enabled&&!t.models.posenet&&(null==(f=null==(p=t.config.body)?void 0:p.modelPath)?void 0:f.includes("posenet"))&&(t.models.posenet=Ore(t.config)),t.config.face.enabled&&!t.models.facedetect&&(t.models.facedetect=w8(t.config)),t.config.face.enabled&&(null==(m=t.config.face.antispoof)?void 0:m.enabled)&&!t.models.antispoof&&(t.models.antispoof=W6(t.config)),t.config.face.enabled&&(null==(g=t.config.face.liveness)?void 0:g.enabled)&&!t.models.liveness&&(t.models.liveness=Sne(t.config)),t.config.face.enabled&&(null==(v=t.config.face.description)?void 0:v.enabled)&&!t.models.faceres&&(t.models.faceres=Fee(t.config)),t.config.face.enabled&&(null==(y=t.config.face.emotion)?void 0:y.enabled)&&!t.models.emotion&&(t.models.emotion=L9(t.config)),t.config.face.enabled&&(null==(b=t.config.face.iris)?void 0:b.enabled)&&!(null==(x=t.config.face.attention)?void 0:x.enabled)&&!t.models.faceiris&&(t.models.faceiris=aee(t.config)),t.config.face.enabled&&(null==(A=t.config.face.mesh)?void 0:A.enabled)&&!t.models.facemesh&&(t.models.facemesh=Iee(t.config)),t.config.face.enabled&&(null==(w=t.config.face.gear)?void 0:w.enabled)&&!t.models.gear&&(t.models.gear=c6(t.config)),t.config.face.enabled&&(null==(k=t.config.face.ssrnet)?void 0:k.enabled)&&!t.models.ssrnetage&&(t.models.ssrnetage=w6(t.config)),t.config.face.enabled&&(null==(S=t.config.face.ssrnet)?void 0:S.enabled)&&!t.models.ssrnetgender&&(t.models.ssrnetgender=R6(t.config)),t.config.face.enabled&&(null==(C=t.config.face.mobilefacenet)?void 0:C.enabled)&&!t.models.mobilefacenet&&(t.models.mobilefacenet=X9(t.config)),t.config.hand.enabled&&!t.models.handtrack&&(null==(E=null==(I=t.config.hand.detector)?void 0:I.modelPath)?void 0:E.includes("handtrack"))&&(t.models.handtrack=cne(t.config)),t.config.hand.enabled&&t.config.hand.landmarks&&!t.models.handskeleton&&(null==(N=null==(T=t.config.hand.detector)?void 0:T.modelPath)?void 0:N.includes("handtrack"))&&(t.models.handskeleton=hne(t.config)),t.config.object.enabled&&!t.models.centernet&&(null==(M=null==(_=t.config.object)?void 0:_.modelPath)?void 0:M.includes("centernet"))&&(t.models.centernet=d9(t.config)),t.config.object.enabled&&!t.models.nanodet&&(null==(O=null==(R=t.config.object)?void 0:R.modelPath)?void 0:O.includes("nanodet"))&&(t.models.nanodet=rre(t.config)),t.config.segmentation.enabled&&!t.models.segmentation&&(t.models.segmentation=Dre(t.config)),z=!1,B=!1,e.prev=39,j=na(Object.keys(t.models));case 41:return e.next=43,j.next();case 43:if(!(z=!(V=e.sent).done)){e.next=52;break}if(H=V.value,!t.models[H]||"undefined"===typeof t.models[H]){e.next=49;break}return e.next=48,t.models[H];case 48:t.models[H]=e.sent;case 49:z=!1,e.next=41;break;case 52:e.next=58;break;case 54:e.prev=54,e.t0=e.catch(39),B=!0,W=e.t0;case 58:if(e.prev=58,e.prev=59,!z||null==j.return){e.next=63;break}return e.next=63,j.return();case 63:if(e.prev=63,!B){e.next=66;break}throw W;case 66:return e.finish(63);case 67:return e.finish(58);case 68:case"end":return e.stop()}}),e,null,[[39,54,58,68],[59,,63,67]])})))).apply(this,arguments)}function Ure(e){return Gre.apply(this,arguments)}function Gre(){return(Gre=Mr(Nr().mark((function e(t){var n,r,a,i,o,s,u,l,c,d,h,p,f,m,g;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=["const","placeholder","noop","pad","squeeze","add","sub","mul","div"],r=0,a=Object.keys(t.models);case 2:if(!(r<a.length)){e.next=16;break}if(i=a[r],o=t.models[i]){e.next=7;break}return e.abrupt("continue",13);case 7:if(s=[],(u=null==o?void 0:o.executor)&&u.graph.nodes)for(l=0,c=Object.values(u.graph.nodes);l<c.length;l++)d=c[l],h=d.op.toLowerCase(),s.includes(h)||s.push(h);else!u&&t.config.debug&&pa("model signature not determined:",i);for(p=[],f=0,m=s;f<m.length;f++)g=m[f],n.includes(g)||t.env.kernels.includes(g)||t.env.kernels.includes(g.replace("_",""))||t.env.kernels.includes(g.replace("native",""))||t.env.kernels.includes(g.replace("v2",""))||p.push(g);t.config.debug&&p.length>0&&pa("model validation failed:",i,p);case 13:r++,e.next=2;break;case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xre={name:"humangl",priority:999,canvas:null,gl:null,extensions:[],webGLattr:{alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!1,desynchronized:!0}};function qre(){var e=Xre.gl;e&&(Xre.extensions=e.getSupportedExtensions())}function Yre(e){return Kre.apply(this,arguments)}function Kre(){return Kre=Mr(Nr().mark((function e(t){var n,r,a;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("humangl"===t.config.backend){e.next=2;break}return e.abrupt("return");case 2:if(!(Xre.name in Lh().registry)||Xre.gl&&Xre.gl.getParameter(Xre.gl.VERSION)||(pa("error: humangl backend invalid context"),jre(t)),Yh(Xre.name)){e.next=71;break}return e.prev=4,e.next=7,V7(100,100);case 7:Xre.canvas=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),pa("error: cannot create canvas:",e.t0),e.abrupt("return");case 14:if(e.prev=14,Xre.gl=null==(n=Xre.canvas)?void 0:n.getContext("webgl2",Xre.webGLattr),Xre.gl.getParameter(Xre.gl.VERSION).includes("2.0")){e.next=21;break}return pa("override: using fallback webgl backend as webgl 2.0 is not detected"),t.config.backend="webgl",e.abrupt("return");case 21:Xre.canvas&&(Xre.canvas.addEventListener("webglcontextlost",function(){var e=Mr(Nr().mark((function e(n){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw pa("error: humangl:",n.type),pa("possible browser memory leak using webgl or conflict with multiple backend registrations"),t.emit("error"),new Error("backend error: webgl context lost");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Xre.canvas.addEventListener("webglcontextrestored",(function(e){pa("error: humangl context restored:",e)})),Xre.canvas.addEventListener("webglcontextcreationerror",(function(e){pa("error: humangl context create:",e)}))),e.next=28;break;case 24:return e.prev=24,e.t1=e.catch(14),pa("error: cannot get WebGL context:",e.t1),e.abrupt("return");case 28:e.prev=28,oj(2,Xre.gl),e.next=36;break;case 32:return e.prev=32,e.t2=e.catch(28),pa("error: cannot set WebGL context:",e.t2),e.abrupt("return");case 36:e.prev=36,r=new bH(Xre.gl),Zh(Xre.name,(function(){return new LU(r)}),Xre.priority),e.next=45;break;case 41:return e.prev=41,e.t3=e.catch(36),pa("error: cannot register WebGL backend:",e.t3),e.abrupt("return");case 45:e.prev=45,yl("webgl").forEach((function(e){bl(Wr(Wr({},e),{},{backendName:Xre.name}))})),e.next=54;break;case 50:return e.prev=50,e.t4=e.catch(45),pa("error: cannot update WebGL backend registration:",e.t4),e.abrupt("return");case 54:if(!(a=Jh().getGPGPUContext?Jh().getGPGPUContext().gl:null)){e.next=59;break}pa("humangl webgl version:".concat(a.getParameter(a.VERSION)," renderer:").concat(a.getParameter(a.RENDERER))),e.next=61;break;case 59:return pa("error: no current gl context:",a,Xre.gl),e.abrupt("return");case 61:e.prev=61,Qi.set("WEBGL_VERSION",2),e.next=69;break;case 65:return e.prev=65,e.t5=e.catch(61),pa("error: cannot set WebGL backend flags:",e.t5),e.abrupt("return");case 69:qre(),pa("backend registered:",Xre.name);case 71:case"end":return e.stop()}}),e,null,[[4,10],[14,24],[28,32],[36,41],[45,50],[61,65]])}))),Kre.apply(this,arguments)}function Zre(){Z7.kernels.includes("mod")||(bl({kernelName:"Mod",backendName:Xh(),kernelFunc:function(e){return Wh((function(){return Cg(e.inputs.a,lf(uf(e.inputs.a,e.inputs.b),e.inputs.b))}))}}),Z7.kernels.push("mod"));Z7.kernels.includes("floormod")||(bl({kernelName:"FloorMod",backendName:Xh(),kernelFunc:function(e){return Wh((function(){return sf(e.inputs.a/e.inputs.b)*e.inputs.b+Gg(e.inputs.a,e.inputs.b)}))}}),Z7.kernels.push("floormod"))}function Jre(e){return Qre.apply(this,arguments)}function Qre(){return Qre=Mr(Nr().mark((function e(t){var n,r,a,i,o,s,u,l=arguments;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]&&l[1],t.state="backend",!(n||Z7.initial||t.config.backend&&t.config.backend.length>0&&Xh()!==t.config.backend)){e.next=88;break}if(r=ma(),!(t.config.backend&&t.config.backend.length>0)){e.next=68;break}if("undefined"===typeof window&&"undefined"!==typeof WorkerGlobalScope&&t.config.debug&&t.config.debug&&pa("running inside web worker"),Z7.browser&&"tensorflow"===t.config.backend&&(t.config.debug&&pa("override: backend set to tensorflow while running in browser"),t.config.backend="humangl"),!Z7.node||"webgl"!==t.config.backend&&"humangl"!==t.config.backend||(t.config.debug&&pa("override: backend set to ".concat(t.config.backend," while running in nodejs")),t.config.backend="tensorflow"),!Z7.browser||"webgpu"!==t.config.backend){e.next=32;break}if("undefined"!==typeof navigator&&"undefined"!==typeof navigator.gpu){e.next=14;break}pa("override: backend set to webgpu but browser does not support webgpu"),t.config.backend="humangl",e.next=32;break;case 14:return e.next=16,navigator.gpu.requestAdapter();case 16:if(a=e.sent,t.config.debug&&pa("enumerated webgpu adapter:",a),a){e.next=23;break}pa("override: backend set to webgpu but browser reports no available gpu"),t.config.backend="humangl",e.next=32;break;case 23:if(!("requestAdapterInfo"in a)){e.next=29;break}return e.next=26,a.requestAdapterInfo();case 26:e.t0=e.sent,e.next=30;break;case 29:e.t0=void 0;case 30:pa("webgpu adapter info:",e.t0);case 32:if("humangl"!==t.config.backend){e.next=35;break}return e.next=35,Yre(t);case 35:if(i=Object.keys(Lh().registryFactory),t.config.debug&&pa("available backends:",i),i.includes(t.config.backend)||(pa("error: backend ".concat(t.config.backend," not found in registry")),t.config.backend=Z7.node?"tensorflow":"webgl",t.config.debug&&pa("override: setting backend ".concat(t.config.backend))),t.config.debug&&pa("setting backend:",t.config.backend),"wasm"!==t.config.backend){e.next=56;break}try{Zi().set("CANVAS2D_WILL_READ_FREQUENTLY",!0)}catch(QIe){}if(t.config.debug&&pa("wasm path:",t.config.wasmPath),"undefined"===typeof(null==ba?void 0:ba.setWasmPaths)){e.next=47;break}return e.next=45,k7(t.config.wasmPath,t.config.wasmPlatformFetch);case 45:e.next=48;break;case 47:throw new Error("backend error: attempting to use wasm backend but wasm path is not set");case 48:return e.next=50,Zi().getAsync("WASM_HAS_SIMD_SUPPORT");case 50:return o=e.sent,e.next=53,Zi().getAsync("WASM_HAS_MULTITHREAD_SUPPORT");case 53:s=e.sent,t.config.debug&&pa("wasm execution: ".concat(o?"SIMD":"no SIMD"," ").concat(s?"multithreaded":"singlethreaded")),t.config.debug&&!o&&pa("warning: wasm simd support is not enabled");case 56:return e.prev=56,e.next=59,Uh(t.config.backend);case 59:return e.next=61,Gh();case 61:g6(),e.next=68;break;case 64:return e.prev=64,e.t1=e.catch(56),pa("error: cannot set backend:",t.config.backend,e.t1),e.abrupt("return",!1);case 68:if("humangl"!==Xh()){e.next=79;break}if(Qi.set("CHECK_COMPUTATION_FOR_ERRORS",!1),Qi.set("WEBGL_CPU_FORWARD",!0),Qi.set("WEBGL_USE_SHAPES_UNIFORMS",!0),Qi.set("CPU_HANDOFF_SIZE_THRESHOLD",256),"undefined"!==typeof t.config.deallocate&&t.config.deallocate&&(pa("changing webgl: WEBGL_DELETE_TEXTURE_THRESHOLD:",!0),Qi.set("WEBGL_DELETE_TEXTURE_THRESHOLD",0)),!Jh().getGPGPUContext){e.next=79;break}return e.next=77,Jh().getGPGPUContext().gl;case 77:u=e.sent,t.config.debug&&pa("gl version:".concat(u.getParameter(u.VERSION)," renderer:").concat(u.getParameter(u.RENDERER)));case 79:return Xh(),Rh(),e.next=83,Gh();case 83:return t.performance.initBackend=Math.trunc(ma()-r),t.config.backend=Xh(),e.next=87,Z7.updateBackend();case 87:Zre();case 88:return e.abrupt("return",!0);case 89:case"end":return e.stop()}}),e,null,[[56,64]])}))),Qre.apply(this,arguments)}function $re(e,t){var n,r=ea(e);try{var a=function(){var e=n.value;bl({kernelName:e,backendName:t.backend,kernelFunc:function(){t.debug&&pa("kernelFunc",e,t.backend)}})};for(r.s();!(n=r.n()).done;)a()}catch(i){r.e(i)}finally{r.f()}Z7.kernels=yl(Xh()).map((function(e){return e.kernelName.toLowerCase()}))}sa({},{all:function(){return Mae},body:function(){return yae},canvas:function(){return Nae},face:function(){return gae},gesture:function(){return Sae},hand:function(){return xae},object:function(){return wae},options:function(){return lae},person:function(){return Eae}});var eae=function(e){if(e)if(e.getContext){var t=e.getContext("2d");if(t)return t;pa("draw error: cannot get canvas context")}else pa("draw error: canvas context not defined");else pa("draw error: invalid canvas");return null},tae=function(e){return Math.round(180*e/Math.PI)},nae=function(e,t){if(!t.useDepth||"undefined"===typeof e)return t.color;var n=Uint8ClampedArray.from([127+2*e,127-2*e,255]);return"rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", ").concat(t.alpha,")")};function rae(e,t,n,r,a){e.fillStyle=nae(r,a),e.beginPath(),e.arc(t,n,a.pointSize,0,2*Math.PI),e.fill()}function aae(e,t,n,r,a,i){if(e.beginPath(),e.lineWidth=i.lineWidth,i.useCurves){var o=(t+t+r)/2,s=(n+n+a)/2;e.ellipse(o,s,r/2,a/2,0,0,2*Math.PI)}else e.moveTo(t+i.roundRect,n),e.lineTo(t+r-i.roundRect,n),e.quadraticCurveTo(t+r,n,t+r,n+i.roundRect),e.lineTo(t+r,n+a-i.roundRect),e.quadraticCurveTo(t+r,n+a,t+r-i.roundRect,n+a),e.lineTo(t+i.roundRect,n+a),e.quadraticCurveTo(t,n+a,t,n+a-i.roundRect),e.lineTo(t,n+i.roundRect),e.quadraticCurveTo(t,n,t+i.roundRect,n),e.closePath();e.stroke()}function iae(e,t,n){if(!(t.length<2)){e.beginPath(),e.moveTo(t[0][0],t[0][1]);var r,a=ea(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;e.strokeStyle=nae(i[2],n),e.lineTo(Math.trunc(i[0]),Math.trunc(i[1]))}}catch(o){a.e(o)}finally{a.f()}e.stroke(),n.fillPolygons&&(e.closePath(),e.fill())}}function oae(e,t,n){if(!(t.length<2))if(e.lineWidth=n.lineWidth,!n.useCurves||t.length<=2)iae(e,t,n);else{e.moveTo(t[0][0],t[0][1]);for(var r=0;r<t.length-2;r++){var a=(t[r][0]+t[r+1][0])/2,i=(t[r][1]+t[r+1][1])/2;e.quadraticCurveTo(t[r][0],t[r][1],a,i)}e.quadraticCurveTo(t[t.length-2][0],t[t.length-2][1],t[t.length-1][0],t[t.length-1][1]),e.stroke(),n.fillPolygons&&(e.closePath(),e.fill())}}function sae(e,t,n){var r,a,i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;e.beginPath(),e.moveTo(t[0],t[1]),e.lineTo(n[0],n[1]),r=Math.atan2(n[1]-t[1],n[0]-t[0]),a=o*Math.cos(r)+n[0],i=o*Math.sin(r)+n[1],e.moveTo(a,i),r+=1/3*(2*Math.PI),a=o*Math.cos(r)+n[0],i=o*Math.sin(r)+n[1],e.lineTo(a,i),r+=1/3*(2*Math.PI),a=o*Math.cos(r)+n[0],i=o*Math.sin(r)+n[1],e.lineTo(a,i),e.closePath(),e.stroke(),e.fill()}var uae,lae={color:"rgba(173, 216, 230, 0.6)",labelColor:"rgba(173, 216, 230, 1)",shadowColor:"black",alpha:.5,font:'small-caps 16px "Segoe UI"',lineHeight:18,lineWidth:4,pointSize:2,roundRect:8,drawPoints:!1,drawLabels:!0,drawBoxes:!0,drawAttention:!0,drawGestures:!0,drawPolygons:!0,drawGaze:!0,fillPolygons:!1,useDepth:!0,useCurves:!1};function cae(e,t){if(uae.drawLabels){var n=[];if(n.push("face: ".concat(Math.trunc(100*e.score),"%")),e.genderScore&&n.push("".concat(e.gender||""," ").concat(Math.trunc(100*e.genderScore),"%")),e.age&&n.push("age: ".concat(e.age||"")),e.iris&&n.push("distance: ".concat(e.iris)),e.real&&n.push("real: ".concat(Math.trunc(100*e.real),"%")),e.live&&n.push("live: ".concat(Math.trunc(100*e.live),"%")),e.emotion&&e.emotion.length>0){var r=e.emotion.map((function(e){return"".concat(Math.trunc(100*e.score),"% ").concat(e.emotion)}));r.length>3&&(r.length=3),n.push(r.join(" "))}e.rotation&&e.rotation.angle&&e.rotation.gaze&&(e.rotation.angle.roll&&n.push("roll: ".concat(tae(e.rotation.angle.roll),"\xb0 yaw:").concat(tae(e.rotation.angle.yaw),"\xb0 pitch:").concat(tae(e.rotation.angle.pitch),"\xb0")),e.rotation.gaze.bearing&&n.push("gaze: ".concat(tae(e.rotation.gaze.bearing),"\xb0"))),0===n.length&&n.push("face"),t.fillStyle=uae.color;for(var a=n.length-1;a>=0;a--){var i=Math.max(e.box[0],0),o=a*uae.lineHeight+e.box[1];uae.shadowColor&&""!==uae.shadowColor&&(t.fillStyle=uae.shadowColor,t.fillText(n[a],i+5,o+16)),t.fillStyle=uae.labelColor,t.fillText(n[a],i+4,o+15)}}}function dae(e,t){var n;if(uae.drawGaze&&(null==(n=e.rotation)?void 0:n.angle)&&"undefined"!==typeof Path2D){t.strokeStyle="pink";var r=e.box[0]+e.box[2]/2-e.box[3]*tae(e.rotation.angle.yaw)/90,a=e.box[1]+e.box[3]/2+e.box[2]*tae(e.rotation.angle.pitch)/90,i=new Path2D("\n      M ".concat(e.box[0]+e.box[2]/2," ").concat(e.box[1],"\n      C\n        ").concat(r," ").concat(e.box[1],",\n        ").concat(r," ").concat(e.box[1]+e.box[3],",\n        ").concat(e.box[0]+e.box[2]/2," ").concat(e.box[1]+e.box[3],"\n    ")),o=new Path2D("\n      M ".concat(e.box[0]," ").concat(e.box[1]+e.box[3]/2,"\n      C \n        ").concat(e.box[0]," ").concat(a,",\n        ").concat(e.box[0]+e.box[2]," ").concat(a,",\n        ").concat(e.box[0]+e.box[2]," ").concat(e.box[1]+e.box[3]/2,"\n    "));t.stroke(o),t.stroke(i)}}function hae(e,t){var n,r,a,i;if(uae.drawGaze&&(null==(r=null==(n=e.rotation)?void 0:n.gaze)?void 0:r.strength)&&(null==(i=null==(a=e.rotation)?void 0:a.gaze)?void 0:i.bearing)&&e.annotations.leftEyeIris&&e.annotations.rightEyeIris&&e.annotations.leftEyeIris[0]&&e.annotations.rightEyeIris[0]){t.strokeStyle="pink",t.fillStyle="pink";var o=[e.annotations.leftEyeIris[0][0]+Math.sin(e.rotation.gaze.bearing)*e.rotation.gaze.strength*e.box[3],e.annotations.leftEyeIris[0][1]+Math.cos(e.rotation.gaze.bearing)*e.rotation.gaze.strength*e.box[2]];sae(t,[e.annotations.leftEyeIris[0][0],e.annotations.leftEyeIris[0][1]],[o[0],o[1]],4);var s=[e.annotations.rightEyeIris[0][0]+Math.sin(e.rotation.gaze.bearing)*e.rotation.gaze.strength*e.box[3],e.annotations.rightEyeIris[0][1]+Math.cos(e.rotation.gaze.bearing)*e.rotation.gaze.strength*e.box[2]];sae(t,[e.annotations.rightEyeIris[0][0],e.annotations.rightEyeIris[0][1]],[s[0],s[1]],4)}}function pae(e,t){if(uae.drawPolygons&&e.mesh.length>=468){t.lineWidth=1;for(var n=0;n<K6.length/3;n++){iae(t,[K6[3*n+0],K6[3*n+1],K6[3*n+2]].map((function(t){return e.mesh[t]})),uae)}!function(e,t){if(e.annotations&&e.annotations.leftEyeIris&&e.annotations.leftEyeIris[0]){t.strokeStyle=uae.useDepth?"rgba(255, 200, 255, 0.3)":uae.color,t.beginPath();var n=Math.abs(e.annotations.leftEyeIris[3][0]-e.annotations.leftEyeIris[1][0])/2,r=Math.abs(e.annotations.leftEyeIris[4][1]-e.annotations.leftEyeIris[2][1])/2;t.ellipse(e.annotations.leftEyeIris[0][0],e.annotations.leftEyeIris[0][1],n,r,0,0,2*Math.PI),t.stroke(),uae.fillPolygons&&(t.fillStyle=uae.useDepth?"rgba(255, 255, 200, 0.3)":uae.color,t.fill())}if(e.annotations&&e.annotations.rightEyeIris&&e.annotations.rightEyeIris[0]){t.strokeStyle=uae.useDepth?"rgba(255, 200, 255, 0.3)":uae.color,t.beginPath();var a=Math.abs(e.annotations.rightEyeIris[3][0]-e.annotations.rightEyeIris[1][0])/2,i=Math.abs(e.annotations.rightEyeIris[4][1]-e.annotations.rightEyeIris[2][1])/2;t.ellipse(e.annotations.rightEyeIris[0][0],e.annotations.rightEyeIris[0][1],a,i,0,0,2*Math.PI),t.stroke(),uae.fillPolygons&&(t.fillStyle=uae.useDepth?"rgba(255, 255, 200, 0.3)":uae.color,t.fill())}}(e,t)}}function fae(e,t){if(uae.drawPoints&&e.mesh.length>=468)for(var n=0;n<e.mesh.length;n++)rae(t,e.mesh[n][0],e.mesh[n][1],e.mesh[n][2],uae),uae.drawAttention&&(gee.includes(n)&&rae(t,e.mesh[n][0],e.mesh[n][1],e.mesh[n][2]+127,uae),vee.includes(n)&&rae(t,e.mesh[n][0],e.mesh[n][1],e.mesh[n][2]-127,uae),yee.includes(n)&&rae(t,e.mesh[n][0],e.mesh[n][1],e.mesh[n][2]-127,uae))}function mae(e,t){uae.drawBoxes&&aae(t,e.box[0],e.box[1],e.box[2],e.box[3],uae)}function gae(e,t,n){return vae.apply(this,arguments)}function vae(){return(vae=Mr(Nr().mark((function e(t,n,r){var a,i,o,s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(uae=va(lae,r),n&&t){e.next=3;break}return e.abrupt("return");case 3:if(a=eae(t)){e.next=6;break}return e.abrupt("return");case 6:a.font=uae.font,a.strokeStyle=uae.color,a.fillStyle=uae.color,i=ea(n);try{for(i.s();!(o=i.n()).done;)mae(s=o.value,a),cae(s,a),s.mesh&&s.mesh.length>0&&(fae(s,a),pae(s,a),dae(s,a),hae(s,a))}catch(u){i.e(u)}finally{i.f()}case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yae(e,t,n){return bae.apply(this,arguments)}function bae(){return bae=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h,p,f,m,g,v;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=va(lae,r),n&&t){e.next=3;break}return e.abrupt("return");case 3:if(o=eae(t)){e.next=6;break}return e.abrupt("return");case 6:o.lineJoin="round",s=0;case 8:if(!(s<n.length)){e.next=49;break}if(o.strokeStyle=i.color,o.fillStyle=i.color,o.lineWidth=i.lineWidth,o.font=i.font,i.drawBoxes&&n[s].box&&4===(null==(a=n[s].box)?void 0:a.length)&&(aae(o,n[s].box[0],n[s].box[1],n[s].box[2],n[s].box[3],i),i.drawLabels&&(i.shadowColor&&""!==i.shadowColor&&(o.fillStyle=i.shadowColor,o.fillText("body ".concat(100*n[s].score,"%"),n[s].box[0]+3,1+n[s].box[1]+i.lineHeight,n[s].box[2])),o.fillStyle=i.labelColor,o.fillText("body ".concat(100*n[s].score,"%"),n[s].box[0]+2,0+n[s].box[1]+i.lineHeight,n[s].box[2]))),!i.drawPoints||!n[s].keypoints){e.next=24;break}u=0;case 16:if(!(u<n[s].keypoints.length)){e.next=24;break}if(n[s].keypoints[u].score&&0!==n[s].keypoints[u].score){e.next=19;break}return e.abrupt("continue",21);case 19:o.fillStyle=nae(n[s].keypoints[u].position[2],i),rae(o,n[s].keypoints[u].position[0],n[s].keypoints[u].position[1],0,i);case 21:u++,e.next=16;break;case 24:if(!i.drawLabels||!n[s].keypoints){e.next=45;break}o.font=i.font,l=ea(n[s].keypoints),e.prev=27,l.s();case 29:if((c=l.n()).done){e.next=37;break}if((d=c.value).score&&0!==d.score){e.next=33;break}return e.abrupt("continue",35);case 33:o.fillStyle=nae(d.position[2],i),o.fillText("".concat(d.part," ").concat(Math.trunc(100*d.score),"%"),d.position[0]+4,d.position[1]+4);case 35:e.next=29;break;case 37:e.next=42;break;case 39:e.prev=39,e.t0=e.catch(27),l.e(e.t0);case 42:return e.prev=42,l.f(),e.finish(42);case 45:if(i.drawPolygons&&n[s].keypoints&&n[s].annotations)for(h=0,p=Object.values(n[s].annotations);h<p.length;h++){f=p[h],m=ea(f);try{for(m.s();!(g=m.n()).done;)v=g.value,oae(o,v,i)}catch(y){m.e(y)}finally{m.f()}}case 46:s++,e.next=8;break;case 49:case"end":return e.stop()}}),e,null,[[27,39,42,45]])}))),bae.apply(this,arguments)}function xae(e,t,n){return Aae.apply(this,arguments)}function Aae(){return Aae=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,u,l,c,d,h,p;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=va(lae,r),n&&t){e.next=3;break}return e.abrupt("return");case 3:if(i=eae(t)){e.next=6;break}return e.abrupt("return");case 6:i.lineJoin="round",i.font=a.font,o=ea(n);try{for(o.s();!(s=o.n()).done;){if(u=s.value,a.drawBoxes&&(i.strokeStyle=a.color,i.fillStyle=a.color,aae(i,u.box[0],u.box[1],u.box[2],u.box[3],a),a.drawLabels&&(a.shadowColor&&""!==a.shadowColor&&(i.fillStyle=a.shadowColor,i.fillText("hand:".concat(Math.trunc(100*u.score),"%"),u.box[0]+3,1+u.box[1]+a.lineHeight,u.box[2])),i.fillStyle=a.labelColor,i.fillText("hand:".concat(Math.trunc(100*u.score),"%"),u.box[0]+2,0+u.box[1]+a.lineHeight,u.box[2])),i.stroke()),a.drawPoints&&u.keypoints&&u.keypoints.length>0){l=ea(u.keypoints);try{for(l.s();!(c=l.n()).done;)d=c.value,i.fillStyle=nae(d[2],a),rae(i,d[0],d[1],0,a)}catch(f){l.e(f)}finally{l.f()}}a.drawLabels&&u.annotations&&(h=function(e,t){if(e&&0!==e.length&&e[0]){var n=e[e.length-1][2]||-256;i.fillStyle=nae(n,a),i.fillText(t,e[e.length-1][0]+4,e[e.length-1][1]+4)}},i.font=a.font,h(u.annotations.index,"index"),h(u.annotations.middle,"middle"),h(u.annotations.ring,"ring"),h(u.annotations.pinky,"pinky"),h(u.annotations.thumb,"thumb"),h(u.annotations.palm,"palm")),a.drawPolygons&&u.annotations&&(p=function(e){if(e&&0!==e.length&&e[0])for(var t=0;t<e.length;t++){i.beginPath();var n=e[t][2]||0;i.strokeStyle=nae(t*n,a),i.moveTo(e[t>0?t-1:0][0],e[t>0?t-1:0][1]),i.lineTo(e[t][0],e[t][1]),i.stroke()}},i.lineWidth=a.lineWidth,p(u.annotations.index),p(u.annotations.middle),p(u.annotations.ring),p(u.annotations.pinky),p(u.annotations.thumb))}}catch(f){o.e(f)}finally{o.f()}case 10:case"end":return e.stop()}}),e)}))),Aae.apply(this,arguments)}function wae(e,t,n){return kae.apply(this,arguments)}function kae(){return kae=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,u,l;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=va(lae,r),n&&t){e.next=3;break}return e.abrupt("return");case 3:if(i=eae(t)){e.next=6;break}return e.abrupt("return");case 6:i.lineJoin="round",i.font=a.font,o=ea(n);try{for(o.s();!(s=o.n()).done;)u=s.value,a.drawBoxes&&(i.strokeStyle=a.color,i.fillStyle=a.color,aae(i,u.box[0],u.box[1],u.box[2],u.box[3],a),a.drawLabels&&(l="".concat(u.label," ").concat(Math.round(100*u.score),"%"),a.shadowColor&&""!==a.shadowColor&&(i.fillStyle=a.shadowColor,i.fillText(l,u.box[0]+3,1+u.box[1]+a.lineHeight,u.box[2])),i.fillStyle=a.labelColor,i.fillText(l,u.box[0]+2,0+u.box[1]+a.lineHeight,u.box[2])),i.stroke())}catch(c){o.e(c)}finally{o.f()}case 10:case"end":return e.stop()}}),e)}))),kae.apply(this,arguments)}function Sae(e,t,n){return Cae.apply(this,arguments)}function Cae(){return Cae=Mr(Nr().mark((function e(t,n,r){var a,i,o,s,l,c,d,h,p,f;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=va(lae,r),n&&t){e.next=3;break}return e.abrupt("return");case 3:if(!a.drawGestures){e.next=11;break}if(i=eae(t)){e.next=7;break}return e.abrupt("return");case 7:for(i.font=a.font,i.fillStyle=a.color,o=1,s=0;s<n.length;s++)[],[],d=Object.entries(n[s]),h=u(d,2),l=h[0],(c=h[1]).length>1&&c[1].length>0&&(p=l[1]>0?"#".concat(l[1]):"",f="".concat(l[0]," ").concat(p,": ").concat(c[1]),a.shadowColor&&""!==a.shadowColor&&(i.fillStyle=a.shadowColor,i.fillText(f,8,2+o*a.lineHeight)),i.fillStyle=a.labelColor,i.fillText(f,6,0+o*a.lineHeight),o+=1);case 11:case"end":return e.stop()}}),e)}))),Cae.apply(this,arguments)}var Iae=0;function Eae(e,t,n){return Tae.apply(this,arguments)}function Tae(){return Tae=Mr(Nr().mark((function e(t,n,r){var a,i,o,s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=va(lae,r),n&&t){e.next=3;break}return e.abrupt("return");case 3:if(i=eae(t)){e.next=6;break}return e.abrupt("return");case 6:for(i.lineJoin="round",i.font=a.font,o=0;o<n.length;o++)a.drawBoxes&&(i.strokeStyle=a.color,i.fillStyle=a.color,aae(i,n[o].box[0],n[o].box[1],n[o].box[2],n[o].box[3],a),a.drawLabels&&(s="person #".concat(o),a.shadowColor&&""!==a.shadowColor&&(i.fillStyle=a.shadowColor,i.fillText(s,n[o].box[0]+3,1+n[o].box[1]+a.lineHeight,n[o].box[2])),i.fillStyle=a.labelColor,i.fillText(s,n[o].box[0]+2,0+n[o].box[1]+a.lineHeight,n[o].box[2])),i.stroke());case 9:case"end":return e.stop()}}),e)}))),Tae.apply(this,arguments)}function Nae(e,t){return _ae.apply(this,arguments)}function _ae(){return(_ae=Mr(Nr().mark((function e(t,n){var r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return");case 2:if(r=eae(n)){e.next=5;break}return e.abrupt("return");case 5:r.drawImage(t,0,0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mae(e,t,n){return Rae.apply(this,arguments)}function Rae(){return(Rae=Mr(Nr().mark((function e(t,n,r){var a,i,o;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.performance&&n&&t){e.next=2;break}return e.abrupt("return",null);case 2:return a=ma(),i=va(lae,r),o=Promise.all([gae(t,n.face,i),yae(t,n.body,i),xae(t,n.hand,i),wae(t,n.object,i),Sae(t,n.gesture,i)]),Iae=Z7.perfadd?Iae+Math.round(ma()-a):Math.round(ma()-a),n.performance.draw=Iae,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oae=.1,Pae=.5;function Fae(e,t,n){for(var r=!1,a=n.length-1,i=0;i<n.length;a=i++)n[i].y>t!==n[a].y>t&&e<(n[a].x-n[i].x)*(t-n[i].y)/(n[a].y-n[i].y)+n[i].x&&(r=!r);return r}function Dae(e){return Lae.apply(this,arguments)}function Lae(){return Lae=Mr(Nr().mark((function e(t){var n,r,a,i,o,s,u,l,c,d;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.tensor){e.next=2;break}return e.abrupt("return",t.tensor);case 2:if(t.mesh&&!(t.mesh.length<100)){e.next=4;break}return e.abrupt("return",t.tensor);case 4:return n=t.tensor.shape[2]||0,r=t.tensor.shape[1]||0,e.next=8,t.tensor.buffer();case 8:a=e.sent,i=[],o=ea(U6.silhouette);try{for(o.s();!(s=o.n()).done;)u=s.value,i.push({x:(t.mesh[u][0]-t.box[0])/t.box[2],y:(t.mesh[u][1]-t.box[1])/t.box[3]})}catch(h){o.e(h)}finally{o.f()}for(i=i.map((function(e){return{x:e.x>.5?e.x+Oae:e.x-Oae,y:e.y>.5?e.y+Oae:e.y-Oae}})),l=0;l<n;l++)for(c=0;c<r;c++)Fae(l/n,c/n,i)||(a.set(Pae*a.get(0,c,l,0),0,c,l,0),a.set(Pae*a.get(0,c,l,1),0,c,l,1),a.set(Pae*a.get(0,c,l,2),0,c,l,2));return d=a.toTensor(),jh(a),e.abrupt("return",d);case 17:case"end":return e.stop()}}),e)}))),Lae.apply(this,arguments)}var zae=function(e,t){var n=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return e[0]/=t,e[1]/=t,e[2]/=t,e},r=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},a=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},i=e.meshRaw;if(!i||i.length<300)return{angle:{pitch:0,yaw:0,roll:0},matrix:[1,0,0,0,1,0,0,0,1],gaze:{bearing:0,strength:0}};var o=Math.max(e.boxRaw[2]*t[0],e.boxRaw[3]*t[1])/1.5,s=[i[10],i[152],i[234],i[454]].map((function(e){return[e[0]*t[0]/o,e[1]*t[1]/o,e[2]]})),l=n(r(s[1],s[0])),c=n(r(s[3],s[2])),d=n(a(c,l)),h=[(c=a(l,d))[0],c[1],c[2],l[0],l[1],l[2],d[0],d[1],d[2]],p=function(e){var t,n,r,a=u(e,9),i=a[0],o=(a[1],a[2],a[3]),s=a[4],l=a[5],c=a[6],d=a[7],h=a[8];return o<1?o>-1?(r=Math.asin(o),n=Math.atan2(-c,i),t=Math.atan2(-l,s)):(r=-Math.PI/2,n=-Math.atan2(d,h),t=0):(r=Math.PI/2,n=Math.atan2(d,h),t=0),isNaN(t)&&(t=0),isNaN(n)&&(n=0),isNaN(r)&&(r=0),{pitch:2*-t,yaw:2*-n,roll:2*-r}}(h),f=478===i.length?function(e){if(!e.annotations.rightEyeIris||!e.annotations.leftEyeIris)return{bearing:0,strength:0};var t,n,r=[0,-.1],a=(e.mesh[33][2]||0)>(e.mesh[263][2]||0),i=a?e.mesh[473]:e.mesh[468],o=a?[(e.mesh[133][0]+e.mesh[33][0])/2,(e.mesh[133][1]+e.mesh[33][1])/2]:[(e.mesh[263][0]+e.mesh[362][0])/2,(e.mesh[263][1]+e.mesh[362][1])/2],s=a?[e.mesh[133][0]-e.mesh[33][0],e.mesh[23][1]-e.mesh[27][1]]:[e.mesh[263][0]-e.mesh[362][0],e.mesh[253][1]-e.mesh[257][1]],u=[(o[0]-i[0])/s[0]-r[0],1*(i[1]-o[1])/s[1]-r[1]],l=Math.sqrt(u[0]*u[0]+u[1]*u[1]);return l=Math.min(l,e.boxRaw[2]/2,e.boxRaw[3]/2),{bearing:(t=[0,0],n=u,(Math.atan2(t[1]-n[1],t[0]-n[0])+Math.PI/2)%Math.PI),strength:l}}(e):{bearing:0,strength:0};return{angle:p,matrix:h,gaze:f}},Bae=function(){var e=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,l,c,d,h,p,f,m,g,v,y,b,x,A,w,k,S,C,I,E,T,N,_,M,R,O,P,F,D,L,z,B,W,j,V,H,U;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I=ma(),F=[],t.state="run:face",e.next=5,See(n,t.config);case 5:if(D=e.sent,t.performance.face=Z7.perfadd?(t.performance.face||0)+Math.trunc(ma()-I):Math.trunc(ma()-I),n.shape&&4===n.shape.length){e.next=9;break}return e.abrupt("return",[]);case 9:if(D){e.next=11;break}return e.abrupt("return",[]);case 11:L=0;case 12:if(!(L<D.length)){e.next=191;break}if(t.analyze("Get Face"),D[L].tensor&&!D[L].tensor.isDisposedInternal){e.next=17;break}return pa("Face object is disposed:",D[L].tensor),e.abrupt("continue",188);case 17:if(!(null==(r=t.config.face.detector)?void 0:r.mask)){e.next=23;break}return e.next=20,Dae(D[L]);case 20:z=e.sent,jh(D[L].tensor),D[L].tensor=z;case 23:if(B=D[L].mesh&&D[L].mesh.length>200?zae(D[L],[n.shape[2],n.shape[1]]):null,t.analyze("Start Emotion:"),!t.config.async){e.next=29;break}_=(null==(a=t.config.face.emotion)?void 0:a.enabled)?B9(D[L].tensor||Xc([]),t.config,L,D.length):[],e.next=40;break;case 29:if(t.state="run:emotion",I=ma(),!(null==(i=t.config.face.emotion)?void 0:i.enabled)){e.next=37;break}return e.next=34,B9(D[L].tensor||Xc([]),t.config,L,D.length);case 34:e.t0=e.sent,e.next=38;break;case 37:e.t0=[];case 38:_=e.t0,t.performance.emotion=Z7.perfadd?(t.performance.emotion||0)+Math.trunc(ma()-I):Math.trunc(ma()-I);case 40:if(t.analyze("End Emotion:"),t.analyze("Start AntiSpoof:"),!t.config.async){e.next=46;break}R=(null==(o=t.config.face.antispoof)?void 0:o.enabled)?V6(D[L].tensor||Xc([]),t.config,L,D.length):0,e.next=57;break;case 46:if(t.state="run:antispoof",I=ma(),!(null==(s=t.config.face.antispoof)?void 0:s.enabled)){e.next=54;break}return e.next=51,V6(D[L].tensor||Xc([]),t.config,L,D.length);case 51:e.t1=e.sent,e.next=55;break;case 54:e.t1=0;case 55:R=e.t1,t.performance.antispoof=Z7.perfadd?(t.performance.antispoof||0)+Math.trunc(ma()-I):Math.trunc(ma()-I);case 57:if(t.analyze("End AntiSpoof:"),t.analyze("Start Liveness:"),!t.config.async){e.next=63;break}O=(null==(l=t.config.face.liveness)?void 0:l.enabled)?Ine(D[L].tensor||Xc([]),t.config,L,D.length):0,e.next=74;break;case 63:if(t.state="run:liveness",I=ma(),!(null==(c=t.config.face.liveness)?void 0:c.enabled)){e.next=71;break}return e.next=68,Ine(D[L].tensor||Xc([]),t.config,L,D.length);case 68:e.t2=e.sent,e.next=72;break;case 71:e.t2=0;case 72:O=e.t2,t.performance.liveness=Z7.perfadd?(t.performance.antispoof||0)+Math.trunc(ma()-I):Math.trunc(ma()-I);case 74:if(t.analyze("End Liveness:"),t.analyze("Start GEAR:"),!t.config.async){e.next=80;break}T=(null==(d=t.config.face.gear)?void 0:d.enabled)?h6(D[L].tensor||Xc([]),t.config,L,D.length):null,e.next=91;break;case 80:if(t.state="run:gear",I=ma(),!(null==(h=t.config.face.gear)?void 0:h.enabled)){e.next=88;break}return e.next=85,h6(D[L].tensor||Xc([]),t.config,L,D.length);case 85:e.t3=e.sent,e.next=89;break;case 88:e.t3=null;case 89:T=e.t3,t.performance.gear=Math.trunc(ma()-I);case 91:if(t.analyze("End GEAR:"),t.analyze("Start SSRNet:"),!t.config.async){e.next=98;break}E=(null==(p=t.config.face.ssrnet)?void 0:p.enabled)?S6(D[L].tensor||Xc([]),t.config,L,D.length):null,N=(null==(f=t.config.face.ssrnet)?void 0:f.enabled)?P6(D[L].tensor||Xc([]),t.config,L,D.length):null,e.next=117;break;case 98:if(t.state="run:ssrnet",I=ma(),!(null==(m=t.config.face.ssrnet)?void 0:m.enabled)){e.next=106;break}return e.next=103,S6(D[L].tensor||Xc([]),t.config,L,D.length);case 103:e.t4=e.sent,e.next=107;break;case 106:e.t4=null;case 107:if(E=e.t4,!(null==(g=t.config.face.ssrnet)?void 0:g.enabled)){e.next=114;break}return e.next=111,P6(D[L].tensor||Xc([]),t.config,L,D.length);case 111:e.t5=e.sent,e.next=115;break;case 114:e.t5=null;case 115:N=e.t5,t.performance.ssrnet=Math.trunc(ma()-I);case 117:if(t.analyze("End SSRNet:"),t.analyze("Start MobileFaceNet:"),!t.config.async){e.next=123;break}M=(null==(v=t.config.face.mobilefacenet)?void 0:v.enabled)?Y9(D[L].tensor||Xc([]),t.config,L,D.length):null,e.next=134;break;case 123:if(t.state="run:mobilefacenet",I=ma(),!(null==(y=t.config.face.mobilefacenet)?void 0:y.enabled)){e.next=131;break}return e.next=128,Y9(D[L].tensor||Xc([]),t.config,L,D.length);case 128:e.t6=e.sent,e.next=132;break;case 131:e.t6=null;case 132:M=e.t6,t.performance.mobilefacenet=Math.trunc(ma()-I);case 134:if(t.analyze("End MobileFaceNet:"),t.analyze("Start Description:"),!t.config.async){e.next=140;break}P=(null==(b=t.config.face.description)?void 0:b.enabled)?zee(D[L].tensor||Xc([]),t.config,L,D.length):null,e.next=151;break;case 140:if(t.state="run:description",I=ma(),!(null==(x=t.config.face.description)?void 0:x.enabled)){e.next=148;break}return e.next=145,zee(D[L].tensor||Xc([]),t.config,L,D.length);case 145:e.t7=e.sent,e.next=149;break;case 148:e.t7=null;case 149:P=e.t7,t.performance.description=Z7.perfadd?(t.performance.description||0)+Math.trunc(ma()-I):Math.trunc(ma()-I);case 151:if(t.analyze("End Description:"),!t.config.async){e.next=165;break}return e.next=155,Promise.all([E,N,_,M,P,T,R,O]);case 155:W=e.sent,j=u(W,8),E=j[0],N=j[1],_=j[2],M=j[3],P=j[4],T=j[5],R=j[6],O=j[7];case 165:t.analyze("Finish Face:"),(null==(A=t.config.face.ssrnet)?void 0:A.enabled)&&E&&N&&(P=Wr(Wr({},P),{},{age:E.age,gender:N.gender,genderScore:N.genderScore})),(null==(w=t.config.face.gear)?void 0:w.enabled)&&T&&(P=Wr(Wr({},P),{},{age:T.age,gender:T.gender,genderScore:T.genderScore,race:T.race})),(null==(k=t.config.face.mobilefacenet)?void 0:k.enabled)&&M&&(P.descriptor=M),null==(S=t.config.face.iris)||S.enabled,V=D[L].annotations&&D[L].annotations.leftEyeIris&&D[L].annotations.leftEyeIris[0]&&D[L].annotations.rightEyeIris&&D[L].annotations.rightEyeIris[0]&&D[L].annotations.leftEyeIris.length>0&&D[L].annotations.rightEyeIris.length>0&&null!==D[L].annotations.leftEyeIris[0]&&null!==D[L].annotations.rightEyeIris[0]?Math.max(Math.abs(D[L].annotations.leftEyeIris[3][0]-D[L].annotations.leftEyeIris[1][0]),Math.abs(D[L].annotations.rightEyeIris[4][1]-D[L].annotations.rightEyeIris[2][1]))/n.shape[2]:0,H=(null==(C=t.config.face.detector)?void 0:C.return)?Uv(D[L].tensor):null,jh(D[L].tensor),D[L].tensor&&delete D[L].tensor,U=Wr(Wr({},D[L]),{},{id:L}),(null==P?void 0:P.age)&&(U.age=P.age),(null==P?void 0:P.gender)&&(U.gender=P.gender),(null==P?void 0:P.genderScore)&&(U.genderScore=null==P?void 0:P.genderScore),(null==P?void 0:P.descriptor)&&(U.embedding=null==P?void 0:P.descriptor),(null==P?void 0:P.race)&&(U.race=null==P?void 0:P.race),_&&(U.emotion=_),R&&(U.real=R),O&&(U.live=O),V&&0!==V&&(U.iris=Math.trunc(500/V/11.7)/100),B&&(U.rotation=B),H&&(U.tensor=H),F.push(U),t.analyze("End Face");case 188:L++,e.next=12;break;case 191:return t.analyze("End FaceMesh:"),t.config.async&&(t.performance.face&&delete t.performance.face,t.performance.age&&delete t.performance.age,t.performance.gender&&delete t.performance.gender,t.performance.emotion&&delete t.performance.emotion),e.abrupt("return",F);case 194:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Wae=function(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n].keypoints.find((function(e){return"leftWrist"===e.part})),a=e[n].keypoints.find((function(e){return"rightWrist"===e.part})),i=e[n].keypoints.find((function(e){return"nose"===e.part}));i&&r&&a&&r.position[1]<i.position[1]&&a.position[1]<i.position[1]?t.push({body:n,gesture:"i give up"}):i&&r&&r.position[1]<i.position[1]?t.push({body:n,gesture:"raise left hand"}):i&&a&&a.position[1]<i.position[1]&&t.push({body:n,gesture:"raise right hand"});var o=e[n].keypoints.find((function(e){return"leftShoulder"===e.part})),s=e[n].keypoints.find((function(e){return"rightShoulder"===e.part}));o&&s&&Math.abs(o.positionRaw[1]-s.positionRaw[1])>.1&&t.push({body:n,gesture:"leaning ".concat(o.position[1]>s.position[1]?"left":"right")})}return t},jae=function(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)if(e[n].mesh&&e[n].mesh.length>450){var r=(e[n].mesh[33][2]||0)-(e[n].mesh[263][2]||0),a=e[n].mesh[33][0]-e[n].mesh[263][0];Math.abs(r/a)<=.15?t.push({face:n,gesture:"facing center"}):t.push({face:n,gesture:"facing ".concat(r<0?"left":"right")}),Math.abs(e[n].mesh[374][1]-e[n].mesh[386][1])/Math.abs(e[n].mesh[443][1]-e[n].mesh[450][1])<.2&&t.push({face:n,gesture:"blink left eye"}),Math.abs(e[n].mesh[145][1]-e[n].mesh[159][1])/Math.abs(e[n].mesh[223][1]-e[n].mesh[230][1])<.2&&t.push({face:n,gesture:"blink right eye"});var i=Math.min(100,500*Math.abs(e[n].mesh[13][1]-e[n].mesh[14][1])/Math.abs(e[n].mesh[10][1]-e[n].mesh[152][1]));i>10&&t.push({face:n,gesture:"mouth ".concat(Math.trunc(i),"% open")});var o=e[n].mesh[152][2]||0;Math.abs(o)>10&&t.push({face:n,gesture:"head ".concat(o<0?"up":"down")})}return t},Vae=function(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)if(e[n].annotations&&e[n].annotations.leftEyeIris&&e[n].annotations.leftEyeIris[0]&&e[n].annotations.rightEyeIris&&e[n].annotations.rightEyeIris[0]){var r=e[n].annotations.leftEyeIris[3][0]-e[n].annotations.leftEyeIris[1][0],a=e[n].annotations.leftEyeIris[4][1]-e[n].annotations.leftEyeIris[2][1],i=Math.abs(r*a),o=e[n].annotations.rightEyeIris[3][0]-e[n].annotations.rightEyeIris[1][0],s=e[n].annotations.rightEyeIris[4][1]-e[n].annotations.rightEyeIris[2][1],u=Math.abs(o*s),l=!1;Math.abs(i-u)/Math.max(i,u)<.25&&(l=!0,t.push({iris:n,gesture:"facing center"}));var c=Math.abs(e[n].mesh[263][0]-e[n].annotations.leftEyeIris[0][0])/e[n].box[2],d=Math.abs(e[n].mesh[33][0]-e[n].annotations.rightEyeIris[0][0])/e[n].box[2];(c>.06||d>.06)&&(l=!1),c>d?c>.05&&t.push({iris:n,gesture:"looking right"}):d>.05&&t.push({iris:n,gesture:"looking left"});var h=Math.abs(e[n].mesh[145][1]-e[n].annotations.rightEyeIris[0][1])/e[n].box[3],p=Math.abs(e[n].mesh[374][1]-e[n].annotations.leftEyeIris[0][1])/e[n].box[3];(p<.01||h<.01||p>.022||h>.022)&&(l=!1),(p<.01||h<.01)&&t.push({iris:n,gesture:"looking down"}),(p>.022||h>.022)&&t.push({iris:n,gesture:"looking up"}),l&&t.push({iris:n,gesture:"looking center"})}return t},Hae=function(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++){var r=[];if(e[n].annotations)for(var a=0,i=Object.entries(e[n].annotations);a<i.length;a++){var o=u(i[a],2),s=o[0],l=o[1];"palmBase"!==s&&Array.isArray(l)&&l[0]&&r.push({name:s.toLowerCase(),position:l[0]})}if(r&&r.length>0){var c=r.reduce((function(e,t){return(e.position[2]||0)<(t.position[2]||0)?e:t}));t.push({hand:n,gesture:"".concat(c.name," forward")});var d=r.reduce((function(e,t){return e.position[1]<t.position[1]?e:t}));t.push({hand:n,gesture:"".concat(d.name," up")})}if(e[n].keypoints){var h,p=ea(Ute(e[n].keypoints));try{for(p.s();!(h=p.n()).done;){var f=h.value;t.push({hand:n,gesture:f.name})}}catch(m){p.e(m)}finally{p.f()}}}return t},Uae={face:[],body:[],hand:[],gesture:[],object:[],persons:[],performance:{},timestamp:0,error:null},Gae=0;function Xae(e,t){var n,r,a,i,o,s,l,c,d,h,p,f,m,g,v,y,b,x,A,w,k,S,C,I,E,T,N,_=ma();if(!e)return{face:[],body:[],hand:[],gesture:[],object:[],persons:[],performance:{},timestamp:0,error:null};var M=Date.now()-e.timestamp,R=M<1e3?8-Math.log(M+1):1;if(e.canvas&&(Uae.canvas=e.canvas),e.error&&(Uae.error=e.error),Uae.body&&e.body.length===Uae.body.length)for(var O=function(l){var c=e.body[l].box.map((function(e,t){return((R-1)*Uae.body[l].box[t]+e)/R})),d=e.body[l].boxRaw.map((function(e,t){return((R-1)*Uae.body[l].boxRaw[t]+e)/R})),h=e.body[l].keypoints.map((function(e,t){var n,r,a,i,o,s,u,c,d;return{score:e.score,part:e.part,position:[Uae.body[l].keypoints[t]?((R-1)*(Uae.body[l].keypoints[t].position[0]||0)+(e.position[0]||0))/R:e.position[0],Uae.body[l].keypoints[t]?((R-1)*(Uae.body[l].keypoints[t].position[1]||0)+(e.position[1]||0))/R:e.position[1],Uae.body[l].keypoints[t]?((R-1)*(Uae.body[l].keypoints[t].position[2]||0)+(e.position[2]||0))/R:e.position[2]],positionRaw:[Uae.body[l].keypoints[t]?((R-1)*(Uae.body[l].keypoints[t].positionRaw[0]||0)+(e.positionRaw[0]||0))/R:e.positionRaw[0],Uae.body[l].keypoints[t]?((R-1)*(Uae.body[l].keypoints[t].positionRaw[1]||0)+(e.positionRaw[1]||0))/R:e.positionRaw[1],Uae.body[l].keypoints[t]?((R-1)*(Uae.body[l].keypoints[t].positionRaw[2]||0)+(e.positionRaw[2]||0))/R:e.positionRaw[2]],distance:[Uae.body[l].keypoints[t]?((R-1)*((null==(n=Uae.body[l].keypoints[t].distance)?void 0:n[0])||0)+((null==(r=e.distance)?void 0:r[0])||0))/R:null==(a=e.distance)?void 0:a[0],Uae.body[l].keypoints[t]?((R-1)*((null==(i=Uae.body[l].keypoints[t].distance)?void 0:i[1])||0)+((null==(o=e.distance)?void 0:o[1])||0))/R:null==(s=e.distance)?void 0:s[1],Uae.body[l].keypoints[t]?((R-1)*((null==(u=Uae.body[l].keypoints[t].distance)?void 0:u[2])||0)+((null==(c=e.distance)?void 0:c[2])||0))/R:null==(d=e.distance)?void 0:d[2]]}})),p={},f={connected:{}};(null==(r=null==(n=t.body)?void 0:n.modelPath)?void 0:r.includes("efficientpose"))?f=v9:(null==(i=null==(a=t.body)?void 0:a.modelPath)?void 0:i.includes("blazepose"))?f=E8:(null==(s=null==(o=t.body)?void 0:o.modelPath)?void 0:s.includes("movenet"))&&(f=Tne);for(var m=function(){for(var e=u(v[g],2),t=e[0],n=e[1],r=[],a=function(e){var t=h.find((function(t){return t.part===n[e]})),a=h.find((function(t){return t.part===n[e+1]}));t&&a&&r.push([t.position,a.position])},i=0;i<n.length-1;i++)a(i);p[t]=r},g=0,v=Object.entries(f.connected);g<v.length;g++)m();Uae.body[l]=Wr(Wr({},e.body[l]),{},{box:c,boxRaw:d,keypoints:h,annotations:p})},P=0;P<e.body.length;P++)O(P);else Uae.body=JSON.parse(JSON.stringify(e.body));if(Uae.hand&&e.hand.length===Uae.hand.length)for(var F=function(t){var n=e.hand[t].box.map((function(e,n){return((R-1)*Uae.hand[t].box[n]+e)/R})),r=e.hand[t].boxRaw.map((function(e,n){return((R-1)*Uae.hand[t].boxRaw[n]+e)/R}));Uae.hand[t].keypoints.length!==e.hand[t].keypoints.length&&(Uae.hand[t].keypoints=e.hand[t].keypoints);var a=e.hand[t].keypoints&&e.hand[t].keypoints.length>0?e.hand[t].keypoints.map((function(e,n){return e.map((function(e,r){return((R-1)*(Uae.hand[t].keypoints[n][r]||1)+(e||0))/R}))})):[],i={};if(Object.keys(Uae.hand[t].annotations).length!==Object.keys(e.hand[t].annotations).length)Uae.hand[t].annotations=e.hand[t].annotations,i=Uae.hand[t].annotations;else if(e.hand[t].annotations)for(var o=function(){var n=u[s];i[n]=e.hand[t].annotations[n]&&e.hand[t].annotations[n][0]?e.hand[t].annotations[n].map((function(e,r){return e.map((function(e,a){return((R-1)*Uae.hand[t].annotations[n][r][a]+e)/R}))})):null},s=0,u=Object.keys(e.hand[t].annotations);s<u.length;s++)o();Uae.hand[t]=Wr(Wr({},e.hand[t]),{},{box:n,boxRaw:r,keypoints:a,annotations:i})},D=0;D<e.hand.length;D++)F(D);else Uae.hand=JSON.parse(JSON.stringify(e.hand));if(Uae.face&&e.face.length===Uae.face.length)for(var L=function(t){var n=e.face[t].box.map((function(e,n){return((R-1)*Uae.face[t].box[n]+e)/R})),r=e.face[t].boxRaw.map((function(e,n){return((R-1)*Uae.face[t].boxRaw[n]+e)/R}));if(e.face[t].rotation){var a={matrix:[0,0,0,0,0,0,0,0,0],angle:{roll:0,yaw:0,pitch:0},gaze:{bearing:0,strength:0}};a.matrix=null==(l=e.face[t].rotation)?void 0:l.matrix,a.angle={roll:((R-1)*((null==(d=null==(c=Uae.face[t].rotation)?void 0:c.angle)?void 0:d.roll)||0)+((null==(p=null==(h=e.face[t].rotation)?void 0:h.angle)?void 0:p.roll)||0))/R,yaw:((R-1)*((null==(m=null==(f=Uae.face[t].rotation)?void 0:f.angle)?void 0:m.yaw)||0)+((null==(v=null==(g=e.face[t].rotation)?void 0:g.angle)?void 0:v.yaw)||0))/R,pitch:((R-1)*((null==(b=null==(y=Uae.face[t].rotation)?void 0:y.angle)?void 0:b.pitch)||0)+((null==(A=null==(x=e.face[t].rotation)?void 0:x.angle)?void 0:A.pitch)||0))/R},a.gaze={bearing:((R-1)*((null==(k=null==(w=Uae.face[t].rotation)?void 0:w.gaze)?void 0:k.bearing)||0)+((null==(C=null==(S=e.face[t].rotation)?void 0:S.gaze)?void 0:C.bearing)||0))/R,strength:((R-1)*((null==(E=null==(I=Uae.face[t].rotation)?void 0:I.gaze)?void 0:E.strength)||0)+((null==(N=null==(T=e.face[t].rotation)?void 0:T.gaze)?void 0:N.strength)||0))/R},Uae.face[t]=Wr(Wr({},e.face[t]),{},{rotation:a,box:n,boxRaw:r})}Uae.face[t]=Wr(Wr({},e.face[t]),{},{box:n,boxRaw:r})},z=0;z<e.face.length;z++)L(z);else Uae.face=JSON.parse(JSON.stringify(e.face));if(Uae.object&&e.object.length===Uae.object.length)for(var B=function(t){var n=e.object[t].box.map((function(e,n){return((R-1)*Uae.object[t].box[n]+e)/R})),r=e.object[t].boxRaw.map((function(e,n){return((R-1)*Uae.object[t].boxRaw[n]+e)/R}));Uae.object[t]=Wr(Wr({},e.object[t]),{},{box:n,boxRaw:r})},W=0;W<e.object.length;W++)B(W);else Uae.object=JSON.parse(JSON.stringify(e.object));if(e.persons){var j=e.persons;if(Uae.persons&&j.length===Uae.persons.length)for(var V=function(e){Uae.persons[e].box=j[e].box.map((function(t,n){return((R-1)*Uae.persons[e].box[n]+t)/R}))},H=0;H<j.length;H++)V(H);else Uae.persons=JSON.parse(JSON.stringify(j))}e.gesture&&(Uae.gesture=e.gesture);var U=ma();return Gae=Z7.perfadd?Gae+Math.round(U-_):Math.round(U-_),e.performance&&(Uae.performance=Wr(Wr({},e.performance),{},{interpolate:Gae})),Uae}function qae(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{order:2,multiplier:25},r=0,a=0;a<e.length;a++){var i=n.order&&2!==n.order?Math.abs(e[a]-t[a]):e[a]-t[a];r+=n.order&&2!==n.order?Math.pow(i,n.order):i*i}return(n.multiplier||20)*r}sa({},{distance:function(){return qae},match:function(){return Zae},similarity:function(){return Kae}});var Yae=function(e,t,n,r){if(0===e)return 1;var a=(1-(2===t?Math.sqrt(e):Math.pow(e,1/t))/100-n)/(r-n);return Math.max(Math.min(a,1),0)};function Kae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{order:2,multiplier:25,min:.2,max:.8},r=qae(e,t,n);return Yae(r,n.order||2,n.min||0,n.max||1)}function Zae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{order:2,multiplier:25,threshold:0,min:.2,max:.8};if(!Array.isArray(e)||!Array.isArray(t)||e.length<64||0===t.length||e.length!==t[0].length)return{index:-1,distance:Number.POSITIVE_INFINITY,similarity:0};for(var r=Number.MAX_SAFE_INTEGER,a=-1,i=0;i<t.length;i++){var o=qae(e,t[i],n);if(o<r&&(r=o,a=i),r<(n.threshold||0))break}var s=Yae(r,n.order||2,n.min||0,n.max||1);return{index:a,distance:r,similarity:s}}function Jae(e,t,n,r,a){var i,o,s,u,l,c,d,h,p,f,m,g,v,y,b,x,A,w=0,k=[],S=ea(e);try{var C=function(){var e,S=A.value,C={id:w++,face:S,body:null,hands:{left:null,right:null},gestures:[],box:[0,0,0,0]},I=ea(t);try{for(I.s();!(e=I.n()).done;){var E=e.value;S.box[0]>E.box[0]&&S.box[0]<E.box[0]+E.box[2]&&S.box[1]+S.box[3]>E.box[1]&&S.box[1]+S.box[3]<E.box[1]+E.box[3]&&(C.body=E)}}catch(B){I.e(B)}finally{I.f()}if(C.body){var T,N=ea(n);try{for(N.s();!(T=N.n()).done;){var _=T.value;_.box[0]+_.box[2]>C.body.box[0]&&_.box[0]+_.box[2]<C.body.box[0]+C.body.box[2]&&_.box[1]+_.box[3]>C.body.box[1]&&_.box[1]+_.box[3]<C.body.box[1]+C.body.box[3]&&C.hands&&(C.hands.left=_),_.box[0]<C.body.box[0]+C.body.box[2]&&_.box[0]>C.body.box[0]&&_.box[1]+_.box[3]>C.body.box[1]&&_.box[1]+_.box[3]<C.body.box[1]+C.body.box[3]&&C.hands&&(C.hands.right=_)}}catch(B){N.e(B)}finally{N.f()}}var M,R=ea(r);try{for(R.s();!(M=R.n()).done;){var O=M.value;void 0!==O.face&&O.face===S.id?null==(i=C.gestures)||i.push(O):void 0!==O.iris&&O.iris===S.id?null==(o=C.gestures)||o.push(O):void 0!==O.body&&O.body===(null==(s=C.body)?void 0:s.id)?null==(u=C.gestures)||u.push(O):void 0!==O.hand&&O.hand===(null==(c=null==(l=C.hands)?void 0:l.left)?void 0:c.id)?null==(d=C.gestures)||d.push(O):void 0!==O.hand&&O.hand===(null==(p=null==(h=C.hands)?void 0:h.right)?void 0:p.id)&&(null==(f=C.gestures)||f.push(O))}}catch(B){R.e(B)}finally{R.f()}var P=[],F=[],D=function(e){e&&4===e.length&&(P.push(e[0],e[0]+e[2]),F.push(e[1],e[1]+e[3]))};D(null==(m=C.face)?void 0:m.box),D(null==(g=C.body)?void 0:g.box),D(null==(y=null==(v=C.hands)?void 0:v.left)?void 0:y.box),D(null==(x=null==(b=C.hands)?void 0:b.right)?void 0:x.box);var L=Math.min.apply(Math,P),z=Math.min.apply(Math,F);C.box=[L,z,Math.max.apply(Math,P)-L,Math.max.apply(Math,F)-z],a&&a[1]&&a[2]&&(C.boxRaw=[C.box[0]/a[2],C.box[1]/a[1],C.box[2]/a[2],C.box[3]/a[1]]),k.push(C)};for(S.s();!(A=S.n()).done;)C()}catch(I){S.e(I)}finally{S.f()}return k}var Qae,$ae,eie,tie,nie="\n/9j/4AAQSkZJRgABAQEAYABgAAD/4QBoRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUA\nAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAARAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQu\nbmV0IDQuMi4xMwAA/9sAQwAGBAUGBQQGBgUGBwcGCAoQCgoJCQoUDg8MEBcUGBgXFBYWGh0lHxob\nIxwWFiAsICMmJykqKRkfLTAtKDAlKCko/9sAQwEHBwcKCAoTCgoTKBoWGigoKCgoKCgoKCgoKCgo\nKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgo/8AAEQgBAAEAAwEhAAIRAQMRAf/E\nAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAE\nEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZH\nSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1\ntre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEB\nAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXET\nIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFla\nY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXG\nx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A+qaKACigApGOKAML\nXp8xlF5A7V4X8RtYs7PzfNImnx8sa8Kp9z3q2tEgp6angWs62ZZ5CTGoJ6DArGNz5p+UrID6EUrF\nPUlW1EuN0XNW7PQ2L5j3JnoKXN0KijqNP0eYoqXBdgPuuo+ZPeupisWn2Jd4+0r924XgsQOCff3/\nAJ1FzRKxDqGii6m3siiQ8F1XGfXI6YNWLfRbiRQMkcZI9fpTDluT2/h6Qy8gDPbtmtG38JeY480Z\n5zSLUTZg8M28YwYxjAArXtdPt402qgHbpSaLWhma3o0Uqk7Nx9DWLaaVblgPs6qRyds2M/gRSQp9\nzZOni2iWS2hlQ+kjYz9OMGrdjq89vIPPVhj+8M/lQyDq9P1WOYBlMZz1AOD+VdDaTiReOKulK0jO\ntHmi0WDTlr0TyxRVhT8tJjIX+9SUxHXUV553BRQAVBcPhSBTSuxPY86+IGti0s5I7dsORy9fM3i6\n8e8mfDO5P90ZrWWiJicNPpZZtxV/xrW0jQt4DOv6Vk2dEEdTY6BHuB25rpbPSo0QARjP0qTRI17W\nwA/hFaMWmoQMgflQXYsDS142rU9tpqqenfNA7GgtihxkdKuRW6qMY/GkDZY8sY4Ap4hXbyB+VArk\nEtuH4wPyrk/EGkOm+a3jw3suRQLc5i38SX9hJ9nnY+XnBUdPyNdFY6pa3KkkAE9l6f8AfJ/pSJT6\nGhDmI+Zb4ZRycdv6ium0nUhKFydrelTsNnS2829RnrVgV6NKXNG55lWPLIM81Op+WrZkRMfmNNzT\nA7GivPO4KKAEY4XNYWt3vkwPg4OK0giJdjw/xrqhm87Zs8tc7pX5A+leSajf6aHYJ50kn4AZpTep\nrBWRm2Vobm4BXfyehPFdnpmnBFUY5rI2SN63tlToK0YI+KZpFF+3QdavwoKTLtoW0Toaswpk5pCb\nLCxipAhoIuP2dKevHXoaYDylRyxhlwRQI4nxVoCXWZI1GfpXGtbSWjYPGP73+NIGupt6TqMsLruZ\nih4xnP5V09mQ+JLd8gn0xSYJnVaVdkook69K34zuUGunDS3Rx4qOzHVIp4rrOMY3NJQI7GivPO8K\nKAILt9kZrz3xlebYiu8KCCWb0XvW0NFch6ysfO3jLVjfXLIn+pQkKorl7WxNxIPl71g2dUUdpo+l\npBGvHPet23iC8ihFosrxirkHQUFo0IF4FXI1O726CpKLacCrMJoJLYHAPpTwucHpSRJJ5e4AZI9x\nUqpxzVpCuOC8cUpQUMRnXttuB4rjNdsYyeVwfXpmpGmcvcQyafMCFJjPY10eg34BUg4DcZP8jUO4\nHaRq3lLNF+IHet7R7jz7c56rwa2wz9+xhiVeFy/T1PFegeaNPWigDsc0ZrzzvDNIaAM7VpNqdegr\nxL4l6kywyRhseZ19lrdfAZL4jxYg3Fw20d63tJsdrDI5rm3Z3R0R0Mce1eKnQYAplIkWrMJ45oZS\nNO3PHbNXIyfpSGWowSOasxLUiZdjFSqtNEMkUemKlAGKsRJjAppFAiORMjmsTVrNZEO4cfSoZSOD\n1eJ7WXBUzQZ+7nkfSo7e2Ei+ZaMzxntjBX2NSU1Y6/wxqojiEFzkA8KTXYaUoWRyv3W5rSjpNHPX\n+BmpSg8V6J5gUUAdhRXnneFFAGHrTfu5PpXzj8S70/aZtxzztXFbv4DKHxHI+H4GZiz9zxXXW8G3\nGBXMjvLRXAx0oPGPSmMVeOnWrMTYpFI0bcg1fh54xmgovRcD3qxETSIZcRvzp+/BpEkqsBUqsM9K\nq4Em4Gkxk0yRGXrVW6i8yFhkg+tJjRxGsWrxllkUMh9eK5uMz6bcebbnfG33kPcVkay2OntPKuo0\nnhXI67c8qa7Lw3c+adjcEDGK1paSRhVV4s6A0or0jyRRQ1AHX0V553hRQBz+vNtt5z3xXzX8Qbdm\nuic5YnOMdK3l8JnTXvlbwpYl+WySOgrp5YfLOOB9O1c62O7qQkc+9RsKChFPWp4DluOlSykaNruH\nArUgHShFNF2NT1qxGO3NBmyxGcE1N2560CFzjrUysO9JAPDDjFOVuKoQuSRTWouBkazbCa3cd8cV\nwF7IISQccHBzUSWpV9C3o1x5b5GAjdQD1rs9DjC3kckbEhqKfxIzn8LOupRXqnkPccBSkUAzraK8\n87wooA5rxMSI3HqK8B8bQl9Q8sffY5b/AAraXwkUviNrw9pH2W1ViMMRTdRjw4HpWNtDti9TPc4P\nFQs2M5qdyyMHLcfjV63HTAoBGtap0wK0YxigpsuRDtVhVYd6GQydVwwIqdRnqKCR23I5pCMUW6gD\nYNKuetAEise9KTxQBWuFyhrznxNZkXjFeN3I+tTIZg2OqmzmxNF0PO3vXp/g2+hukVl4zyPanTXv\nJmVR+60dpThXpnlPceopWFAbnV0V553hSGgRynjC5FujOey14Ssp1HxNmTnc+a3kvcIpv37HoEYQ\nQmMdVHSsnVbYJF5jVk0dsNzlruVIsl2wKxbjWrVHILjg1CRbZJb+ILHPzyhfStODWLQgFJFYd+el\nUJM27HUIXxhga1Y5lLVLKLkMnoauxnPPrSEx7ShF+Y/n2qrc6xBbhizDAqkK1zJuvG9nbg8ZA681\nly/Ei052RO3uKAsZlx8QGd8xxvt9Aa1NH8dK7AXMcip64zigdkdrZX8F7EJLdwwNXMkrz1qRMRly\nCK4TxmpidWI49felPYSOMmi80NIoOV6qRzXYeA5SskYPfirpfEjGr8LPWVHyD6U4CvQPL3ZItOYc\nUDOoNFeed4Uhpks4H4iE/Z5MeleMeGULeLgjds10S+BGdL+Jc9OSBU2Huc5Nc74yvUtrcDBrJnZF\n63PJdXvLy/lKWw46bvQVz82jXhkLO5Y+9ZlsYthcRnbIjY9R3q3awTRkEM3WmJI6C0ea3dGRsr1x\nXY6TqW9FLHnjrUs0izpLK5DDjofSta3ckH09KRUkZuuTvFGdvPauE1Y3U6Mqbssf/rUxHPTaJPK2\nZmJPbBqzY6DCZh5xJC9s9aBJHU6dpemJjfEmfetJtI0+VPkUr/unFOxdiextHs33W07YHQHk11mk\nXb3KbZ1xIvcd6LEyWho4Nct41sTPYb16ipexCPPZN+wYGCvH1rrPAEJmvkPoc1VL4kZVvgZ6yFwK\ncBXoHkkqinFaVyzo80GuE7WJRQSziPiGdthK5HQV4x4J/wBI8WPIewNdEvgRNL42emO/yj1UHNef\neNpRczbC+I17DvWT2OqJxc0sMK4TCisy41q0hfEkqj8aixdwTXNOlwvmqD9anS9tXH7uVG+hosO4\n/wC0oOhrR0+6G4YNIEzsNEuCxAPNdjZruA4xxUmjINSjURksOlcbqFykbnjFA1sYGoassaknCqO5\nrl7rxhGm7yBnBxuJq0rkSlYpw+NLlsfd5P8AerVsvHEqSBHwPVgcgVpyMyVXU3rXxcHYETAk+hru\n/DWti6ZSTyOKzZqndHaxvvUGq2rQ+dYyqR24qWI8dvbr7LqDxyDAzXpvw6FvIxePGSM06Xxoyr/A\nzviKFHNegeX1J41zUhXioGbuaSuM6wpCaBHG/EcA6HN/exxXjXw2jL67cv8A3Qa6H8CFR+NnoWpO\nI4XI44rxLxrqjQzSEsQM1gdSPM9U1uR1YbmWIdXHf2rmpIb67YS28UrRlsLI3c/jW0VZGUpO5pW1\njfLNOjahawzwReYI5cjzMkDavHJ5/SrVv9uhtPtVxCPLBwzxnlT9KGghLU3tKvvPjHzbl7EGuisJ\nGRxWLOg7nRXJEbDjmvSNK+aFSfSoZr0KutRkphc4NcRrdkVjL9aVio7Hk3iqS8ubhrWzUlsZY9kG\ncZNc5D4aee5MclzJIFTzHAO0MfatqSOWu7bFS1srDUZEis0vIZoUxPvfcC+4/dx2xjr712XiTwXb\nWmlQ6hol3cRhoFd4rlg3zY5wR0GelavQwjq7GD4etdVvSnk2wAB+9v8A8mvcfA2kXiRo0/UdcDis\nZnTTulqeoWqbUAJqWUb42X1FZlnjfjSwlGrr5S/eNdD4RkvLAAQ4yRyaUZcruVKl7TQ9I0G+mnzH\nckFwM8VuIK7ac3KF2eXiKapz5UWYxipNtMyNejNch0jSar3cjR27uoyQCRVRWom9DxTx54gu5fMi\nlbKdMVjfCZPNlv5v9rFbVHpYqjGzbOn8SzFI9o715L4u0r7arYzk+lYdTqSujy7U/C0u4vHk+WwO\nxuh9q3J9dgvbdVukMV1EwbDDgn04rZMwlHoZ+orZ6hfQ3RWVnQYCgZAq+8U0ln5NtBsV2yxYcfgK\nJtW0CnB31LlroVwJ1nQLGDjeP7w+lb0dsFxjrWB0tHS6NuWPJ6A16ToUm63T3Gallr4S7cxiTjrX\nPaxaF7dlVeSMUhxZ5jd+H7qCa4eF3DSE5x3zXN3Wk6jbyeaiFWUY6ZyPStYS5SalPmVipFbX0E4c\nW0alvmPHJrag0rVvEE6LdljGpG2NRtQD+tW5XMI0uU9M8NeFo9PiQhecDIIrtrOMIoG3H4VlJm9t\nC6CB06VPGM1IHLeItGS6uw+ORT7e3jsbQvj7gzUNam0JaWE+HN7NqOqX80n3FO1RXo8YzXdS+BHk\n4z+KyzGPapcU2YIv7qQtiuaxvcaWqG4O6FwfSrS1JbPnrxoxkv7qIfejcitj4V2f2exumI+8+aKn\nxHTT+G5d8Txlm4rjLxMsQwzWT3OiK0Mm6sEkVsAcjFc1d+FEmlGwEDPQVopaEuOpr6f4ZWNAu3tW\nvHpAj5ZQcUFIWaDjGMVUMQ3cVDBmvbhY7QAV2nh+T/R1yeKhlrY31+b61FcQK6nIoJMi401WblRi\nqr6PCw5UYq9y+YgOgWzNkRrx3xWjp+nx2v3FQcelAbmko9anQ4GBUNisPHWr1qMrQhS2K11HvmYV\nhamcxSRZ5xRIqluS/DKAQQXZxyXrvo2FdlL4EeZjH+/ZbjNSZpswLNBrE1Gt7VE4ODVIlnh/j61F\nj4lmeTGyUbq6LwdEqWbeX0YbhSqfEddP4Bddj4JIrhL5d8h7VjI6oLQqKNzelWre3yc4/ClFjaL6\nwqBxxUUxwCKu5BmXRA6c+9ZjP83FSBoQuPs4BrsNBlUW659KmRrDY6G1lyQtW3Hy0lqQ1qVJnAbm\noy3b9KYJCqRj3o4zRctIlhjLHmpSuOBRbQOpLGpPFaES7UqkZzKN1KsEc87/AHUUmvPLTVGv72aQ\nk7WJwKmRrQ3ud74Ltilgz4++2a6iNDXdS0gjyMU71my7GpqTbxSbMki3SViajTTHqkSeR/GeyZmg\nnQHkEE1S+F+oPPavBL96I4/Cia1udVF+4dVrkW+Fq8+v4tjMDWUkdVJ6WM0cNV+F+MVmjUcZgqnP\n1qpNNnkcVRLiZtxIS1UzzIF7mghlxUZpVQdq6nTVdAoAOKzkbQWhvwM6gMM1twOJYx3NOJE11Kt1\nH1/pVVlwBkk+9NocXoOQ45FPj+fkUJFF2NSB700v/hTEty5ZpkjvVyUgcCq6GM9zC14/8Se6GcZQ\n1574Xs5WkI2HBPHFQ1dm1KSSZ7Rotn9l0+KPHIHNacae1dy0Vjxaj5ptlhVp+2s2CJ9ppCKzuWNx\nzSFc1SYrHNeNdIGpaYw25ZeRXmvheyk0jVpEdcLJ0q3ZxNKTa0O3vQHg/DNcHrsJDmsmjspnNzNt\nfFIJ24GazOhC+azDmgZIOOKBsp3J2qSaZodubq58yQ4QAnmhGT3NO18pb7BORmu205LfYpyKVkWp\nOxr5gKYWoIZWgfGfloFq1qTPLubnGO1RPtxg4P0oBAkY/hBz6VNDDkZ6AU0W2WSdqkdKr9ZOaGSj\nVtcLHmnOcgmmYvcz7mBLy3MbdD1q9ouiRK6bUAVeelOC1InPlidSsWMDFOCEdq3uefykqrinYqGy\nrFvApMVka2DAowKAsMkRXQqwyDXn/iWyitNQ3qPl6itIvRoF8RXinW4tQ6HI6GuW8SIVBPalc6qe\n5x9x97r3qruwTjrWZ0ksZ9TUmcDNAmZ9/wAoao63rR0+w22MLPtAzt6mghmfofiB76LdJBJBIp5D\nd/oa7bSdWLIPnpDi9TM8TeKdas51XTbIyxd3J/pXS+E/EFxqNoFu7do5OmD60maHWrnZyDRkn/69\nMlEyOR0xntVoNx+FUgYjPxg4FLCuWDZyKQr2RoRnP0qO+nEFpJITgAUzLqZnhu6+0rknOTXpOmwJ\nFbrt5yMmnHYyr6Oxb2ijaKLnPYMClwKQWK3n0hn+lachHOJ9pNNN0apQFzsY10a4v4hXQh0xpieQ\nMA1XLZNjhK80cT8OdV+3Wl3A7ZZJCw+hrR1qLcjZ/CsbnfHRnFXseHJArOYYbrUs1uPhYbuatqFP\nByfSkMq3UIINYkto+87Tx6GkSxfsDbflGD7CtTw/pk4nzITtPIFMFudsukh4Rxz71paTpKwP5jcn\n0qTRy0NORMDgVCqewoJTJgAoxjntTiTu7fWmFxAcnn1q3EPl+X8KZMi4gKqB1Peob/Tv7Us5bfeU\nyOoq4R5nYxqT5I8xieH9J1DTbvyJELRg8ODwa9Ms5mSFV9BWiptbnNVrKdmif7Q1KLg96XIZc5Is\npNL5pqeUrmMtZs0jzV08phchaY00zH1p2ZNxjS1g+LdJOt6U9ssmxjyGp2urDjLlaZzng/wUPDqz\nTSTmWeTrjpVjVk3Rvjr2rnqQ5dDvo1XUd2cTqSNk9OKxXGCeKxZ1DAxHTr2q5C/y8GokUhsz54qu\nuCxzSQjQ0+FZblR2ro4bZYiMVQ0dBb7Qi5x0qzuG5QOh71LYErDufpSeWrHnimIXbjkUjLkH1Hem\ngGxryc+tXI19KYmWegq9YLiLJ7mtqS945cS7QsWehqxA9dEjz4krPSxyZqbFFhGxUm6smjRM55Lk\nHvSvNxXTY57kLT+9MNwKdhXGm5FIbkU7Bca1wMEVhaiuQcVhXWiZ14R6tHGanGBI2OtYkqEHjgVy\ns9ErEeo6UBsHipKEZs5qpPdRxcbhx70NCSuybTNWihc5brW9Fq6vjMnFSdEIdDRi8RRKygZbHFbu\nm6nb3RA3gMegNJhOm0jbXGOoxTuCc1Rz3FyoGKawz9KaAVcZqeMgCmIkB4FaUTbYwB6V00Fuzixb\n0SFMuDU8Mlbs4UPeXHeiOXkUrDuXYnyKk3cVk0ap6HMxxketSMhrcwRC0dMMZFMQ3yzSeVQAeUaz\n9Vj8uPd271nVV4m+GdpnHX67pCeKyLtBtNcR6xlk9RVeWTb3qRnO6trgttyIfm71z7ai8j7/AJmN\nDNqUVa5Yi1AnjynHuBV+11YJhWWXcP8AZNSzqgmaEerSsf3NtIQP4mGKtRavdRgMIpVI9KjU0a7n\nR6T43uYQI7qN2Tpkqciu503VVuQGAYZHQjFVc4alPlZrpKGAznpTwxOc9+lWjIlUACnM4XApiLNk\nnmvnsK0NvpXZRVonmYqV52GsmanhXitTmFkSiJTSAvwrxUxXIrJ7miOfjf1pzNWxkRlqYWpgJupu\n6gQbuahvIxPA6eo4pNXVioS5WmefakGhndH4INZs5DJXA10PaTurmLO21uKpSZqGMoXGnRzBiyjd\n9Kx5rcQS428fSkjanLoaOliHGZFB56VswW+mtPufcBsGOAfmxz+tFkd8HpoaUx09FAtFY8DO71qb\nSms/Nb7RbecG6AEjFLS5c78t+p0djpVs9wsyQiJAdyr1rW+zqjErzSe559Sbk9S3C+MA1bjbgE1S\nMSXzMVG0vNUI2tPKrAuCMnrVzNd0PhR49W/O2xrHmp4TxVMzQshpIzzQBehqesnuaI5VGzT2bitz\nFEbNTC1ADS1JupgG6l3UAc14s04yR/aYRll+8BXCtLncDXFWjys9TCz5oW7GddH5qqNzWDOgQnC8\nVSuo1kHzAGkPYopEY2+RWxV23Vzj5G/Kg3jWaNazhZuqNXS6TaKhB2c0jR1nJWOlhOxRxU4YkCgx\nY0OQatQyDbyaaFYe8uF4NY3iC9ltbVGj43NTIL3h7WzMihjzXVQXYYDdW9Cf2WcOJpfaRZ3g9KsQ\nmupnCLIabGeaAL0LcVY3cVmzRHIxtUhetzEjZqjLUAIWpN1ArhupwagAfDKQ3Q1594v0c2bm6tx+\n5Y8j+6ayrR5onThp8s7dzkZjuqAAmuBnqC7c0iwgtzSA0rWzjfGRW3ZadDu4AoNYo2rfS4v7orSh\n05UA2r0pDbsTm29KRottBNyJ0wpJ9KhD7f6U0ikNWffIFBz60zVUW52ow4UcUN6EPcx44WsbgOmd\nua7TT5Bd24KHnFKnLlZFSN4koluLdueRWvp14swweG9DXoxldHlTjYtzGoo25qzEvwtUxas2jRPQ\n5CNqkLVsYoYzUzdQA3dSFqBBmnqaBhuqhriCXTpVIzxUz+Fl03aSPI9QTypW2/dz0qKNw3SvOPZR\nMqin8VLKRcs3O4Cuk0w/MDjt1NBtHY6O2IIHY1pxgFaETIRwMkjtVSUEk4570MlFW5bap6dKzWm8\n1tqH8aY+hp2FvGoGayNevVt7/ap4xzUvYjqTLtvLPcvJxSaVcyWsxTnFZlnT2t15xHmCtOBYwQy4\nB9q7cPO+jPPxFO2qLEj5HWo42+aus4HpoX4W4FTF+KlotbHII9SFuK0MUNZqiLUDE3UbqBBupwag\nBc1DefPbyD/ZND2KjujyPWlKzuPesRZjHJXms9lMuw3StjnmphKDSLTJ7OfE3JrpbO4GQc9qlnRA\n3LO82k5NbFvdADkjBoCSHyXIIIzgVQvdRigT7wzjgUzO1jHknlvG7qnp61etYFQDIpCZoqVijzXn\n3iC8EmsOuaCGb/heR/s0ijkVv6fbxy3QMg5xmsnuX0Ldzut3+UYTPWk+2GJSe+M1pFtamcldalmx\n1eO4XaThhWnC+TXqR2PHqL3maUJ4qRjxSEjj42qXdxVmaGs1MJoATfSbqBAG5p6mgAzTJTmNvpQU\ntzzHXY83D/U1zF5FhjgV5r3Pa6FMsV5HWnLe7RhqBRdmTwagN2d2K2rPU1C5LAnPrUs6Iysbdrq6\nf3gK0BrUKj/WClY05iM6xLOcQAj3NT29uznfKSzHuadzNu7NSBFjHNSm5VO9IRnajqoWMhTzXFtA\nbvUfMduSeg702Qz0rS7FbTToQFwzjJqaGTFyfK5PQViyzUuFmuIdgGABya5u/vTaN5cnUHFUmLoZ\nzyskwlgJweSK6zQdUEwVJeGr0aUrxPLxEfe0OrhPAqVjxWhznGRtUwatDK4jNxURbmkAm6jNABup\n6tQAFqhupNtu59qUnZFwV5JHnWsHdIx96w5lz15rzT2uhRmt85xWbcxMnUGmZlB0bdxmrNvFIcfM\n350mWjbs7YkDJY/jW5ZWW4jikWkdNp9mqYJFaJdEHHakUULu/VB1rLn1Ld/FgetMGYd/qWSQmSa0\n/AemS32pfa7piLeLkg9z6UmQtz0W7uQ2cZx0A9BVzR7cAea6j2rPqX0L99KRat5A6Dk1wOoKZ52a\nYfMORTYRLujiGWEq6/NWza2yKQVHNdOHerRy4laJo6TTnbbtb8KuM3Fdh5z3OJjbmpt3FaMxAtUZ\nagBN1GaQBzTwaAAms3VbjERUGsa07RsdeFpuUuY4jUjljWTKK4j02RE4IpJYFk6imQkVl0xWarsO\nmAEcUi0bNnZBR0rWtoguMCkUi21wI161mXuocEKaYXMS4u+pY/hVCSWSY4HT0pEmlouiSahdpEBl\nmOceleiwWcNjClvHgJH97Hc1EmVFFi3Czy7mwIl/WtJbjP7uLgd/apQ2VNVvtsBhiPzdK5S4nAuR\nnqOCaTGi9pcytPlU+XpmumtWII44rah8ZjiNIXRuWeNvvViQ/LXpJWPJbu7nCRvVkNxVsxBmqJmo\nEPiXca0YLMuOlJsuKuPlsSi5IrNuG8s4HWs5VEkbwoOTKsk+FJY4rC1K53k1xTk5O7PSpwVNWRzt\n4cms+WpKICtSLTETQj5q0YeBSGiys23pUguGxQMq3E59ayrm4x3yaAKiRtO2WPHcmhruKFxFajzZ\nScA44qRHoXhuMaLpxaUg6hcDLMf4F9KlhuDeXGASIl+8azZslYma68y48m1+7nFW5rtbRNhb5z1p\niMKbUg0zuW4A4rPgb7VdKXOMmpA7HRbMS7nUYiUda0lkQOBngVrS+JGdbWLRt2bAx5BqeQ/LXpnj\nPQ4GJ+ashuK0MhWaoWcA0AaOmASMK7jRNPWYBmHyiuepO2x10qfcv6vYxCzYqoGK4HVYVTJrmb5l\nc6oaM5TUJ8EgGsG4kLNUHT0M64OaqMMikSRsuKbnFMRLG3zVehOaGNE445NNlnVFpDMu6uie9Vo1\n8z5mOAOST2pDK91cNN+5tsrH3PrW54a06KxT7fdrlh/q1Pc+tJ6IUdZGvHPLezMcnBOWbsPap5r3\nylFtbdT1xUWNWzU0/Zbwlgfmx8zGsHWtRHmMqE59aAMyNifvHPc1f0gtPdqkY5JosJHeNci2tktY\neuPnNY+oXWZEVJNrZ9aun8SIq/CzodHuriIokhDIR1ronbKZr0o6o8ipoz//2Q==",rie="\n/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAsICAoIBwsKCQoNDAsNERwSEQ8PESIZGhQcKSQrKigk\nJyctMkA3LTA9MCcnOEw5PUNFSElIKzZPVU5GVEBHSEX/2wBDAQwNDREPESESEiFFLicuRUVFRUVF\nRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUX/wAARCASwBLADASIA\nAhEBAxEB/8QAGwABAAIDAQEAAAAAAAAAAAAAAAEDAgQFBgf/xABDEAEAAgECBAMECQIDBgUFAQAA\nAQIDBBEFEiExE0FRBiJhcRQjMkJSgZGhsWLBJDNyFSVTY3OSNEPR4fAHFjWCokT/xAAYAQEAAwEA\nAAAAAAAAAAAAAAAAAQIDBP/EACARAQEBAQADAQEBAQEBAAAAAAABAhEDITFBEjJRIhP/2gAMAwEA\nAhEDEQA/APqYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAKNTq8OkxzfNkisQC8eb1XtRNbzXT4q7eU2nu0MntRq/D8StMccvW29ZmdvgjsTyvZjxOLj\n+s8WLxn8TFPXs6Oj9oct7c14rkxz22nrB2I49KOdTjelmszfmpMeUxv/AA28OqwZ4icWWtt/SUi4\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmdo3nsPNe0Pt\nFh09Z0+DNWL7+9O/7A3eJcZppsV5raI27esvH6jX5ddM25p79Ilo59VbUZOe2Tm/PeGvfPfT2iKR\nPLv1+DO678XmW/a97U6TtOyzTbTF538/T9WjTNecm9a7126tqk3rSYxY5ta1plRZqZNXGjyZcPXl\nmZmsx+qjBrsuO16xM7eXRt04JrdTltk5OWJnfaWf0a2lty5MdZnfzSn+WOHiOutFpjHa9e8bQ2fp\n+alYy462pk7zXbuxjPesbRS0f6ZZV1ET1tErzXFLHo+A+1ddZf6NrI8PJHa1vN6iJi0bxMTHwfOa\nzhzd61v1846utwniM6DUdb3nBaNrVmd9vjC/ZVePYirBqMWppz4rxaPgtEAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAItaK1m09ojcHnvarjM8P0vh49+a/eY8ng9D\nh1fGM1rxjtGPfvbzdbjuTJxHX48cTPNltM/KsS9Dw7S49Jp6UpHaGe2vjz1y9J7LYK13vHWe7bj2\nex1tvM80ekuxW3RnW3Vm6P5jRx8H0+OYmMcb+bapo8GKPdpC6bQwtdHU8JpWkdJ/JweL6e23iU67\nd4dubSqyVi9Zi0bwIs68XGp36TtEq7ZJmZmevzdbifCKWtbJinkt6eTgZPFw32t+sRurbWVzxs1y\nRv6T8V1NZNPtfq0seTm+Kevr+SZuxXjvaPiV8N4viycto9HseG6+uu08W6Rkj7UPmFck1tE1nlmP\nLd3eA8V8HVVi1pjq6Ma/pnqce/ERMTETHaUrKgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAADW19+TQ5p/p2bLS4v04Zmt5VjeQeJ4bjnLqsupv+Ka1+ERLv4reTmcNxcuC\nvy3l0qdI2hlr66sT02ot0ZV7qqrInruzrVZLGSZ37JjqgYTG0K5lbaFVhDT1Ub456RPweY4hixWi\neSdpjvD1eWejz3FNHWYtkpvFo9EIseb3tS3SerOms22rfpPqZKzvvHSYUz70TExG6Gdbs2rljeJ/\nMx5L0vEzPaelnOi98c9J2bFNTFpit47+a+PVUvx9T9nOIfT+GV5p3yY/ds67wvsXqpxau+G09Lx+\nr3TqrEAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADV4ljnLw3U0jvO\nO0fs2lWqyUw6XLkyfYrWZkHldBEV09eveG3Fq1mI3jd4vPrOIaid8G9MP3Y38k6fNrt/rMk9Ou8s\ntfXXn49rGWInuy8SO/k5Gl1E3rG/fzbOe94wTy99mbRvTrMOOvNfJWsesywniukrG/jU6fF43WYN\nTmtEeJtEQ06aSmK2+bNtEd+qfSO17unF9Hmvy1y13XWyVmN4tExLxVK8PmNq5NrT58zawam+m/yc\n0Xj8NpRYSvQZ7xEOdqI3rPozxayNRXe0ct/ON03jmrKB5nV4q1yTO20Obmv4c+cx8HoeI6WZpNoj\nq83niYmYscU0r8aJ6T1n49zeJ+Meqm1drb9J+Kd5p136StGVem9l9TbHxLDFp7W7+sS+q1nesT6w\n+PcAzVjiGHftzQ+v4f8AJpv6On8jH9ZgIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAABp8VrW/C9TW0ztOO3b5Nxp8VmI4bn37TWYB8f1HFtTfUfR9FWJmsdZ9I7MtJxDX5s\nd8ta1y0xzteaR2277rcuhycP12SceLxMeWNpjttHwlu8I0mfQ1y+D7k5YmJmY36T36Ka43z/AF1t\ncI1ds+qxVj7/AEej19PCw9HJ4NoK4OIU5Y35YmZdzVTGebVZabx5jJS+Tmns81rNLm1Wrzc9rVw4\nYibbem72mXTTS0w0M3BvEta1bWrM95ie5EanY87wXgNOL6XPfxraXLhra/W28bR/dzYzarBqJxRe\nbzE7Rt5vWU9n8mPHOGmS0Ypnea1naJb+k9ncNLR7u2y/WcxXO4TOoyUrN6zD0FaW5Y3hu49FiwUi\nKxCvLMR0hlW0jn6ukWw3iXjOJzbDlneOj3GaN6zDzfFOH+LE7SRGo83XNSZ2lbG2/WfdlvaT2cy6\nrNFInlrv1mfJ37cK4PwTTxOoidRm2+/2/KFuyMp47XB4LivXiunrH2b2iH2qn2K/J8x4fGDNxTSZ\n9Nh8OviRvTyfT6xtWI+DeXs9MNZubypASqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAOZx6/LoOWPvWiHTcf2hiZ0e8fc2mf1E5+vP/AEeuSd7RC2uKtI6QjHfeINTfwtPf\nJvty9WPfbt/lucP03gxfJf7d/wBoReYpm97zaNeLb4Ims9Nt94auDjem1Wo5PFi1onylS+1o7l8V\nbxvtupjDMdNkYtXS1+Stt+m63xImEJ4xjHER2ZxMUjeUTO3VRmydBbjLJqPi08mbeVOXJPq1sl5Q\nVbkz9+rRy35rxHqzmZlVEe/Ez5LRlW5iyfR6zffaIjq1OSNZps2a21rZInafSPJhxGMl9LStLRWM\nlorM/A4dkrWbYfLZC2W/7K6eubX6b4RzT+W76K8b7G6X62cu3Sten59nsm3j+OXz3/0ANGIAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0OIYfpOHPijvNNo+fdvtXJO18k/\n/OwPFYbz2ls3jx8VqW6xMdWPEdP9D4lkx/dt79flLLHbkxTPwY6nt2512ORTRzE2x4/dpE7cvkme\nE4IrW3hRMxO8THRtU1FKWtvtvK2upx22rzRCtXkqzh2jtF7ZbT122b01ndnpuWuP3Z3+Ky20qDVv\nfauzVy3mejZzNK8dVjqi87KLRLYtXruqvXzkQp7Qoid88R6rcl+WGlW0/Sa22mfhCZOq2x082ix6\njkm822pO8VrPdr4dNObVeDo8XW3uzMbzK+mvxT7szE27cvnu9j7PcNjSaXx8mOIzZevbrEeic5tN\n+SZnpt8J4fHD9HXHO3PPW0x/DeBtJxx29vaAJQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAKNRim9Z5e89Nl4DzXtVh5babURHrSf7f3ec1+qnDorWrvvt5Pccb0n0zhmWk\nRvevv1+cPE2rGTFNZU26PFfxwa5dVkjelI2772nZnX6bbrEUq3o0d678u8wmuDL2ittvVjXdneeK\ncGv4jpJ6U56+kS7+j118+GLXpakzHaWlp9NNY3tv+bbiYiNoQy1y30uyZJlrWmZnuym6q1iIJnop\nyW2Te8bdWnnypQqzZOadokiIpSZntWN5lrxki19vNRxrUeBwnNNd+fJEY6/OejXLn3Xe/wDp9wyn\nE8uo4lqqxblv7lJ26T6vpD5X7G8QycKzeBMbzMRM1/FH/wA/h9QwZ6ajDXLitvWzRgsAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAeL45w+dDrZvWv1OWd4+E+j2jX\n12jx67TWw5Y6T2nzifU+rZ1y9eHwzDYxxEy18+DJodXfT5o96vafWPVbjyxDn1OOzHudbM0rt2UW\niI69mVtRXZq5tREb9VUoy2iIlRbJ0UX1VZ6btTLrI7V6yk62M2oisT1c7JmtkttVMUyZp6x0beDS\nRWOvdKijDimvWd3G9pNRMfRcNfvZOb9Hpb0itJeP47k/3hgjaZnbaP1XxWW3T0movbNS0W645nbf\n0nrMPpXs3xamoxdJiLbe/X1n8Uf3fKsOTw4jbaXo+EarJhtGTHMxeJ6xH7Sti9Zaj6x3HM4NxXFx\nDS1mtoi8dJrv2l011QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAGjxLhODieOIye7kr9m8d4eM4to9RwjPXFa0ZIvG9bR0fQXmPbDFvTTZPOJmEWS/V8bs9R43NxLL\nG8eFbePg1bajU5/s0l1ceKLx1hbjwRE9mOpx0y2uRTSZsm3PMw2aaKtIjo6kYo9EXpET0hVLXxYK\nxC6MZvyx1lFs0RHfaPiCnU12pLyHGNDbUajBekWma2npWN3p8+opa20e9LSyZLxExTlpM+vdOdcZ\na9tPS8MyUvFrzWlI6727u1pYxYrbVmb7x+TQx6au3Nqcl7/0rcmW9axGnwZJj1novmxnZXV0fFp4\nZxLBPgTGK8xzXr5fOH0bFlpmxVyY7Rato3iYfNuG2x56Wrqa8s2jz+7Lu8O12bS6jkwzN6THNNI6\ntvrN68Y4rxlx1vHa0bskAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAA4XtTTm0OKfTJ/aXdcL2pyRGjwU362yb7fkJz9eTxxyZJjyltRXzUZK7TFtl9Lbwy06YzrHwa+\nfJFd/wCVt8m0bQ0eS2qzcm+1K/an+zNZFL5M1pjFXeI72ky48eGnPkvNp27+TPU6nHpMfLXaIjpE\nerk5dRMxOfN1mPeisfshW1ne1a1577Y6x5R3U0zze31FOWI6ze0byU098kRlzbxM9qrMlPDpyRMR\nMd5Vt/Ihp5898mWZm1pjftE91uCt7fCI7dWeHDEW3t723l6rslqxWZnasR+SYhFbzhnfxJ2jyeq9\nlcGXWZcmW0zWKxHLaI7794eJx5fpfEKabT8t8l5isddo3l9S4VjrwrRUwzSJt3tav3pdOL6Y6dXD\nj8HFWm+/KsU4NRXPvtWazHquWVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAa+fXYNP9u8b+kdZBsDkZOO135cWOZn4y5Wu4xqctbe9y19Kp4njt6vi+PDm8DFMWybbzPlV\n5PiGtz67UxbNbeKTtWIjaIXYpnwuaftT5tXJT3vmi1pMsrU5qIrG1V1a+5DCa7b9GFbRr5J6Wnbt\nCu+Wmk0m8956z8ZWZNorbfzcbX5rZslazPux3hUt41NTntktObJ13+zX1bek01r4/HzVm0bxPXy/\n+bNfDgjVa2uOY92kdfg6ufJOKvLXtttVVSqbcta2vM7zXtHpLQy5ZtMd+vWd+7Zy3mdJHXra3f0c\nvUarw7zFY5rT2hH1Lavnrgx81p3U49Pk4nE5L35MO/StfNRXR5tXnrS8W67WvfyiPSPi7uLHFK1p\njrtSsbR5Lc4RzsXBaYreP4l45esRD2HD9fnw6evvWvO3Tfr0aGk0U55ra0TFInv6uzgrXFXlx0i0\n77RPlC83Yj+JW7oddqr6vHzTTw9/f6dod+L1t9m0T8pcbFSmPHER3892W0zPuz+jSbVvidkcqmfP\nSel7bekrI4n4dZnPWIrHeYnZee2Wpy8dEaml4npNZblw5qzb8M9JbYgAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAABEzFYmZnaI7yCXL1XGa0jJXT0571nbee27DiXEprp8nhbxG20W8\n5cbD0ikfnKO+urTPvjoZdXqctdsmTaPSvRpWmsdZ6yztfaGplvv3lWW1tyRlz1x0vkn7Vo5atTNe\nY0+1o79V2KsZsvX7Ne5mwxnyTNvsx2iGneM/rCdRSuOsTasTt5kRFtpjqmOH4t4nk7estiMNa97R\nHwhna0iuKTEdmGWa4672nZtRele1N59Zlq6vLOSsYorEc07qcW65euzRvtXvPZy52naZ7ujr6fXV\nrWdukREK8+njHgmZmPc67bq6ivVWhxxgxZLztNrT1mZ/SP4VZs0zaOvfp84WUtNsXLvtv3699+rU\nz7+Jtt5qURqMnPpctaR1rMSw4ZoK57eNk6xHaJRh97Ltt7lo5Z+L1HAPZvVauZ2nFTSzMTzeJEz8\nto6xPfvsZntPZ9rXxabmxzefdrv0j1dXh/BcmstW1qxTHHasR3+b0GPhGl+kWmd64dNEVjf73T7X\ny8vy+Ddx6O3iRakxTH5RXrMw1/lX+3Itw2MFIraN48qRHdZi0cUjmmPen9noox1iO0fNzdXEYrTt\nstcmd9aX0bJ+HePmiKTitO8TMLZ1cVjrMfqpz6ys4pjfrPRWZ9rXXptUit6zO+23VyaRHEc05L1/\nw9J9ys/en1ljqdVbwYw452tlnl3jyjzbmmiMeKtYjpEbLeTXPUU8ee/+qjJpsV5rbkrFqzE1tEbT\nDpYNbW21Mnu29fKWna0KbqTdjXXjld0cvQ63ltGHNPSfs2n+HUbS9c2s2UASqAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAOVxPWe99HpP8ArmP4b+r1EabT3yT3iOkesvMVtN7za07zad5l\nXV5GmM9vVfEstvDx0jtaVVMlq+UJ18b5cMRvPeSuK87bUt+i2Z3PtG7zXpjkzXt6R+TXyTMzvM7t\nydHqZ+zhv1+Cv/ZuqvPTHMfOYaTMil1a1K2vHSLTELq2v+KWzThGo84rH5rq8JzedqR+ZeI7WnOS\n34pYTafWXR/2Pln/AMyrKOCWnvmiPyR6O1y9585lhWJvl557Q6eo4T4dYiMvW3b3UanhldHpJtGX\ne09unmjsT7eb1l4trI2t0hsZfrdNO0bzy+nzU20/+NmkzO9esz+TZxWis9dttvPv+Tn21jjaW8zn\n26bTG3mp1M/Wzv3t0jyWXiKZJmsTERaZhXXDbNl8WaztWenxZLstPp5pau8frDtVrNMM5cfTfpMf\n3aunxxbes9d/R09Dp8ebJi09ptFr3jtt2WyrW9wy1Jx132mK+Xq9PotT0iIU19ntLtExa3T47T+q\n6nBaYvsZstZ+cT/LeMnUi0TXffo1s2m8Ws2/OIMWk5Jib5L328rS2t94Sh5TV4ppklpW6PT6rh+P\nNbebTHyas8E081mZy5P2W6OFhjxNTE/hr/LoRO0Kvo9dPqctKzMxEx1la5t3tdnjnMs4noievcrO\nyZjeFF1OSnNV0OG62cn1GWffj7Mz5w05joovzY7xes7TE7w0xrjPeex6Ua+j1UarBFu1o6Wj0lsN\n3JfQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACrU5o0+nvlt92P3BxuM6nxNRGCs+7Tv8\n2hToxm1r3m9utrTvMsonqyt7XTmcja0u3O6FMfi5t/u0/lzdJM81p9O3zdvHTwsUR5+bfPqOfX1h\ndqV+3O7bs1+T31oqmI3TEM4rvCdkDGIIhlFd2daboS0NXG2bD6bufxXU1vlmu/u4us/N0+L1tTSx\nkr9qk7w89j1FNZMV3jxLzvaJ8mer+LSOZqK2xZotbvljfr/89U453rXt9lse081xZtNjx7TGKu0t\nDHlrevSevaN5Y6+tJ8c7VRNMt63n3ub+6/R54rERMztDYy4a5omclYmfxKcenrjtHLvtPrCnVmdb\neFe3JXmjy6eS/DrMuLVYsta9Mdt++6qLxO+0dEc8UmInr18iUfReHcXrqccb9Z27Q61Lb13eJ9nc\n1Z35rTvE9avY4bTkpG8xEfB05vYxqybc07R281naGMREdoT5JQqy9mply7Q3bV3iXG1eXw7TWSka\nc258t7+tpT5/BjT7MfHqndz12Z+M4lMMKyziUJJiN1WSu9fku23RaOgKNJqbaTU1t9yelo+D0cTE\nxEx1iXmM1Nt3W4PqvFweDaffx9vjDbGvxz+TP66QDRiAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAOJxzU73rp6z296zsZMkYsdr2naKxvLyObNOfNfJbvad1dXkaeOdpvsc2yuZVzfbfqybutwu\ns5s8R92J3dvJb3tnO4HSMegtmt3nfZvYp8SZl0z45NfSK7onH1bNcfRFqnUKJr0Y7dVtq7prjEsK\n0XVpEM6028mW20IHK41aPo3J6zs4ODhdcvPnvExFevNXpMOrxi/PlrTee7PLX6Pwa09uaNlKtHg9\ndM3z5d7ReOu02nu0JzZMfblrv5R5uvrcdImZ26T1mYhxs1Os7RH93PZ7axuafNfLitvbaYU3yZYt\nPXs9NwHhui1HBa5LVicsb81onrEuVqNNSuS8Y67dZ6xPZa59Il9uX41vEitImZme3q2Kxbxora0T\nMd/ROSa4Ztkj7c9OafL5LuGYubmyX3iu/TfbdSfVnpvZLT/XZK233+Mbbva1xRXyiPk8pwbH4N6T\nadq5a71n0tD1WDL4tPe6Xr0tDpz8YVnJHWEXYxbqlBedoef4tW0XraO09HdyztSZcbUz43C+ee9b\nSVMaeOfqq7+jGckQ1Yz7+7v2RN/WXPXZPjci2+2yyJaVMuy+uSJlA2d+pNoVRbeDcSxyTE+TDDlt\npdRXLTynrHrDOyiyZeVFnY9TjvXJjres71tG8MnJ4Nqt4tp7T1jrV1nRL1x2cvABKAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAHJ49qfD09cNZ97JPX5PPw2uI6j6Vrsl/ux7tfk1mWr7dOM8iLdm\nvfebREefRsWldw7SxqNbWbR7lPesrn3Vteo7dYjDpMGCvfbeXQ0uLlxRLRxROfUc34p6fCHYrXlr\nEejqrjY8uzCYW7MZjdVKqK9VlaxCYrsnYExBMRMJRPZA8/xPHtmpP9W2xx76vhWOInvt/C7ike7N\nvwzE9kcapGfhlevTaFbFo8RqJ5vy8/RoW09ek0msxHfp3dzNoLzp4zUmZpMbT8HJyYJi20X2n0lh\nZY1li/RaidBF4w2mK3jrHaFGp1lN+tptPp5IjBkid5mIp16TKu0abBPv33vPlM7z+iPdFNcWXU5I\ntkrNce/b1W5db1nTaf3ax9q0fxDW1ebNk2phty1mOu09VOm8W19orEz23j1TwfSeERFuEYMddptW\nd43dvBn21eKJ75KbW+cf/JcTgMxXTb3nbljz+TpcPmc2uyZO1KRtVtGVdi0bx07qJnllsRO6rNTe\nN4XVamsy8mnvPwc3R2jPwe8TPbdlxXNOPSZfhWWpwO85OFzv57qrODkzeHntSe8Sn6Rv0a3EZ218\n8nXekfr1a0ZLVnqx19dWb6demXybOO7lYMvNMdW9S/VVLo0us7tPHdtUtEwJiZU3jq2Jhham8CVG\nPNODNTJXvWd3qcWSubFXJWd4tG8PK3pPd1OB6veLaa89Y61/u2xfxh5c/rsgNHOAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAANLimq+i6O0xPv392rdeZ4rq/pOqnlnelOkIt5F8Z7Wj27I2I6sb25YY\nV1ImY3dbQ08LRc23vZp2j5OJG+XJWle9p2h6HHtbJXFT7OOIpX+7TxT31j5rycdTh+Dpz+XaG/sw\nw18PHWseULN2trBE9UcrJKBhFU7JAQi0dEomegNDUYovM7x3jb5tO1ZvpbaTLtzRExWfWPJ08kbT\nEx5NXWYYyV5omYtHWJieyeDzuizfRs19Jn6TM7Ru1uMcJxZqTkw+5f4ebqa7SV1MR4tdrx2vEfy1\naxqsNOTLjnLXytVXi3Xj8+nmsxTLM16d5npPyUzpekTtSK+U7vS6vQ/SYmK1vWPS1HOn2dvvvvE/\ntDO5XlcO+LbfHSd/W3o6/BdDOXPTnj3Kz38rS6Wm4FNrRyRzTH3p6RH/AKvR8L4dXSzE3jmtHn5I\nmbfqLV+m4dbLSsZInHjr3iI6zLpYaxS01rHuxHRHiT9mv6s67Vj1aqL6326MrWiYa+/Q54BxPaGe\nXRZpj8MquB4+Xg8zPnB7SX30to379GxpK1xcHiKz5IS8xr8PLPixH2bftLTy05o6dHYyVjLhy0t1\nizjZa3pMVv3iO/qz1G2L+NbSajbNyW7xLsY8kTDz+fJXFqKZN4iZnafi6WHL0iYlStI7OO+7axW2\ncrFl7dW9jvE9ULN+J3ZbdFGOy+AYWpEqN7afNXLj+1Wd23KrJVMvCzseh0+auow1yU7WhY4fCdV4\nOadPefcvPuz6S7jol649Tl4AJVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAV581NPhtkvO0R+4NPi2\nr8DB4dJ9+/7Q83Po2NTqLanNbLfvPaPSFDHV66sZ5ET0hRknyW2lTtMyouz0c8usx2n7s7vScKwx\nzc1vu/y85p+maJh6Th+SOWeveXR4/wDLm8v+nX5mUWa9bbrInolmu5jdTNkxYFk2Isr3TuCzeGMz\n+THdEyDDJO9Ja823rt2XWnya946pGvktDXta0ztWu/ybvLE9dkcoOf4GbJPWK1j49VmLh9JtE33v\nMevb9G7WsW8l1ccREISophiJ2jpDYpijbaOjOuOJ8ujOdqxsgVcsUjaETYvbaFFrgu5lVsm0yUtu\nryg43H5m+GIj1XcJzePoL4pnrWGtxmfchr8JvfHS1622if3QljzTTLes+qrNjrkiYtCzPMxnm095\nYZJ6boS5teB49Tqscza97VtvWvlv8V/FOF34RrIxTM2xXjelp/eHoeA6XnzReY3ivX/0dfivDcfE\n9HbDbaLx1pb0lOs+jO7K8Lis3cN+0NKcd9PmthzV5clJ2mF9J9GHHVL108dm1SznYr/Ft0tuhLb8\nmNohFbMhLWy0mJ3rPXvDvcO1karBG8/WV6Wj+7kWrvDDBlvpdRGSnbzj1hpjX4z8mOx6UYYstc2O\nuSk71tG7Ns5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZ2jeXneJ62dVl5KT9VTt8Z9W9xbWclPo+O\nfft9qfSHEU1pv48ftYST23ZTDC/p0YtlVuvVjMbM5+LCZjYGWGdrTPxiHY4ffaf3cjTxz1v6xMS6\nOlty2iXVj/Dk8n+ndrkhnGRo1v8AFdW3RCrZ5uiYsqrboncSu508yjmZRYQt50TfowYTbYGVrKrT\nuTZjvukQnYhMIGVY2ZxPVWyrHVCWzXpVXkt3TE7Va+W4K7X3jv1auTNy3jdba0RZpamfroQN7Hk3\n6wr1GTaN2OOJiu6Mu98NvgDi8Wy74d/yZ8PiPAiO2zU4nb6qIn1bugjfFE/ASp1ke9u15mbbRDZ1\nMb823kx0Ontn1OOkedoJCvT8I03gaKsz9q/WW+isRWsVjtHRKyrhe0XCfpWL6Vgr9fjjrEfeh5fF\nfeH0V5Dj3DPoOo+k4a/U5J6xH3ZZ7z3228evytOk7NvFbo0cdols47bSybt7HbddHVqUs2aW3Qnq\nxVeu8LILR3SlZw3V/R8nhXn6u0/pLuPMXjeHT4Zruf6jLPvR9mZ8/g1xrvpz+TH7HUAaMAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAABRq9VXSYJyW79qx6yvmdo3l5viGs+maqYrO+OnSvx+KLeLZz2te1rZL2v\ned7WneZYWnZl5K72YV1xEyxmeqJljzIEWlVkszvbZp5soN3h2SJz3pP3odCnuWmPRxuERfJrZmtZ\nmtY96fR28kbX3dXj/wAuTyf6bmK+9YX1s0cNtm3Sd4LFY2K23W1s16StiUJW7bp22RW3RluBuruz\nmWEgrmCGWyNkoExKE1QlPmsqRDKeyBjaejWy2W3ttDUyz1QKslvehVqKTNosyyTvELabXptIJpaP\nB39Ia2mz+JGpr51jdZefDx2hzuHZObNq58poJaGtjxJ2+LoaKP8ADRPo5+T3skx5OhpOmC0fBNQ0\n5yTbn+bt8A0u9raiY6RHLVwY62mI6zMvaaHBGn0mPHt1iN5+aYVsACBXqMFNTgviyxvW0bSsAeE1\nmkvw7V2w5Ote9besJx2er4rw2nEdNNekZa9aW9JeQjnxZLYskTW9Z2mJY7zz26fHrrdpbZsY7NGt\nmxjvso1b9NmUwpx33XRO4K7VUTE1nmrvEx1bVo2VWiJE/XY4frY1WPlt0y17x6/FuPM0m+HJGTHO\n1qu9pNVXVYt46Xj7VfRtnXXL5MfzexsALsgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHM4jxOMFJphmJv529Dq\nZLfjDjPEIx450+K3v2+1MeUOHSOWFc3nJkmZnf4yujpVlqunOeFpV2nctLCZUXRM7MJtsWlRkv3Q\nky5NmpWt9RnrixVm17TtEQnJabXisRMzPSIew9n+CRoccajURvqLx5/chfOest642OGcIpoOG2w7\nROW9d72+LQvXevyejcPUU5M+SvpLeOataraw2a0dLbLqTtK1G3Es4lVWWUSoldFtmcXUbpidgXzK\nGEW3TuCUSncnsDFMMLSms9EC6J6FpVzbZE5ALy0809ZbFr9GtfrEoFMzuuwz0Ueey3HbaBLDXe7i\ntMOfwWnP9I+NZbuttvhs1uBRtXPb4SDm3iIvf57N7Dbl0VrS5+XrltEd+Z1Jx7cNms9N4TURRw3T\n+PrcO3WszEvZOD7P6aYiMlvu16S7y1QAIAABxOPcLnUY/pWCv1tI96I+9DtgmXl68Biy7/NtUu3+\nO8HnFa2s0tfd75KR5fFyMWTdhrPHVnX9R0cd21S3Rzsdm1iuqs256wrmGcT0RYSx5d047X02SMmO\nesd49YRE9WcdSXhZ2O1p89NRji9J+cei1xMc3wXi+KZj1j1dTTaqmor06WjvWW+ddcu8XK8BZmAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAMMmWmKu952UZ9XFZmuP3revlDTtzWnmvO8q3XGmfHb9ZanV3yxtWeWn7y4es\nvPNtDqZJ6Ts5mppvdl/XXRMyfGvSNlu/RVvtOzLfoipLT1VTKbSpvfogRkvtDVyZOhkyvQcA4Dzz\nXV6yvTvTHMfvK+c9U3rkW+zvA/D21urr789cdZ8vi9KDb45rejl8Rry6iJ/FV1HP4vXbBTJEfYt1\n+UpiHM295bXsqrO9l8QkZ0lZEqqLeyBZHZLGvZkhIndADKJ3TMoqWQMZ6pjsxll2jsCLSrmU2lFY\n36gieyu0LJk3jbsga0wdqzK20QpyztQGprL/AFMrOE05NLkt6qdVWZxNrSe5o9vWBLiUjnzXn0vL\nq555dHt8HOwV928/1z/LpzXxbYccRvzTB+jucOwxh0dI22mY3ltIrHLWIjyjZKyoAAAAACJiJjaY\n3iXleM8InR5J1GniZw2n3oj7s/8Ao9Wi9a3rNbRE1mNpifNFnVs65XhcWTdt47bnFuF24dm8TFEz\np7T0/pn0a+HJux1OOrOux08d1ndqY7tillVkzExLOk7yd4YxGwluViJhE45raL0na0dtlWO0+bZr\n1TKi+2zptZGTamT3b/tLacvJjiY3XaTWdYxZZ6/dtPm1zrv1z78fPcbwC7EAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABhkyV\nxUm152iAZWtFazNp2iGhm1Vss8uP3aevnKrNntqLdelI7VRHRnrX/HRjx/tZREVjZXeybW6KbWZt\npCZ6S08tN7Nmbb7zCrJtyoS5145bSx5mWafelr3tsKmS/o08uXyhlly7RPV2+AcBnPNdZrK+53pS\nfP4ytnPVda4y4BwHxOXV6uvu96Unz+MvVxG0bQRG0bR2G0nHLb2gCUDX12LxtFmpHeazt82wT1gH\nmMN4tWs+rcr2aEV8DU5sM/cvO3yb+O0csLUTSdrLphRE8tlkZI7Atr2ZMazDJVKTYSCawi7Ksq7z\n1QERvLK3ZGPrKbyCrbdnMcsbeaa18/RhvvM7oGEwTG0JmYYTIML22a2e28xELM19oURPNO4lOem+\nn3ZY5+prVnMc2GYU4/L4A0a15cNf6rz/AC6fC6+NxCPOuOu/5tHJTbHj+F5/l1+BYumXJMd9o3/d\nMRXYASgAAAAAAABhlxUz4rY8lYtS0bTEvH8R4ffhmo6bzhtPu29Pg9mq1Gnx6rDbFmrzVsizq2df\nzXkMWTeIbNL7tbXaHLwzUctvexWn3bmPL8WFnHVL326VZ91MfFVjvvVlz79kLrcf2m7j7bNHH3bl\nJ2SirLQoy4t1++7G0dBC/RanxI8PJPv18/WG241+alovSdrV6w6mDNGfFF4/OPSW2b1zeTPL1aAs\nzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAVZ9RXBTe3WZ7R6iZOpzZq4ac1p+UermZMl89+a/byj0Ra9815ted59PQ32hlrXXRjH\nDpCLX6ML5NlNsm/ZRqstfdXzbsZt06sLZNvNB1Za8RDWyZdo7q8udq5Mu/mIMt4md2lmy7JzZuWJ\ndHgfBL8RvGo1MTXTxPSPx/8AstJ1XWpIs4BwSdbeNVqq/URPu0n73/s9hEREbRG0QUpWlYrWIisR\ntER5JbSccur2gCUAAAAPM8Sry8Uyz67fwuxbzVPGsE49XGbvF42V4M0TEL33ERnktsxpk3sumK2j\nadmFdPFZ33VS2Mdui2J3UU6LYlFSsN2O5NkCyJ6K7T1TEsbAsxdpReerKkTFGMxvYEz0rsqtbbpC\nb2VT1QEzuwtbaGUxspuJU3neWdKoiu8rq12gCI92YatLcublnzbEz1aOptyZqTuDHLfxN6R0+t5X\nqdJhjBp6UiPLeXl9NSMnEKxHa1+bb8nrlvxUAAAAAAAAAAABTqtNj1eC2LLXeto/R43VabJw/VTh\nydY+7b1h7ho8V4dXiGlmvbJXrS3xRZ1fGv5rzeHN02bEW3cys3xZJx5ImtqztMS3MeTeGFjqlb2O\n8btql3NpbZtYsnSBLeiWfdTjtutid+ghherHS5p0+f3vsX6T8Fkw181d4lMvEWdnHaGnw/UeNh5L\nT7+PpPxbjdyWcvAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAo1Oprgr63ntAmTqdRqK4K9etp7Q5d7Wy2m953lNrWyWm953mVd77R0\nZa1104xxlN9lV8qnJl2a9s3xUXX2ybsJyRDWtl3YWydEC+2VRkzeW6q+T4tbJm+KRdfK1cmWZnlr\nvNp7RC/R6HU8SycmCk7ed57Q9ZwvgOn4fEXtHi5/O9o7fJaZ6z1uRyOEezVstq6jiEbV71xevzer\nrWtKxWsRFY6REeSRrJxz22gCUAAAAAANbX6aNVpL0npMRvWfSXlKamsRMVvXm+EvZXjmpaPWHzfL\noNRjzXicfWJ8phfPxFejx72x7xMzK+sXiNoiXlq+Pi6fWV/VfTNqfLJl/WTg9Pji8R70LqvMV1Gq\nj/zcv6yz+lanzzZP1lWpelTET6S81Gp1P/Gyf90s412rjtnyfqql6asREdWM9+jz9eJ6yP8Az7uh\nodZqMt458tpB1JvEViI3/RhzRt13/R1MNaziiZiJn5K9ZNceKZiIiQcu/WekT+iYrWI3lzdTrs+8\n8uW0fJzcur1Np/zsn6g79phVaIeetqNR/wAXJ/3SwnUaj/i5P+6UD0ldonum161h5mNRqP8Ai5P1\nlNtRqJjacuT9Qd22WN5aGeZyZd/KHJy59RHbLf8AVq31Gp/4uT9ZEvS8Lr/vSs2npzRtL1z53wK+\noza/HW2XJNd99pmX0Rb8VAAAAAAAAAAAAAAcHj/C5yV+l4I9+v24jzj1cLFk8nu5jeNpeW41wmdL\nknU6ev1Vp96sfdn/ANFdTrXG+eq1q5F2LLtbZoY8m8d11bbSydErsYsm+zZrO/zcnBm226uhiyRK\nEtrvCrJDOJTeu8A1MWX6Lqq5N/dnpb5O5ExMbx2cPNTeJb/DM/iYPDtPvY+nzhri/jDy5/W6AuwA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAa2p1UYo5adbz+xbxMlvqJ1OqjDHLXree0ejmzNrWm953tPmTPWbWneZ7yoy5YhjrXXTjH8s75N\nmtkyxt0VZM2/m175N1V03yTKubMLXVXybeYLLX2VXy7eam+b0bOg4VquJW+rry4/O9uyZOq3UjVm\n9r25axMzPaIdvhns1kzbZddM0p5Y47z8/R2+HcF03Doi1a8+Xzvbv+TotJnjDXkt+K8ODHp8cY8N\nIpSO0RCwF2YAAAAAAAAACvUZYw6fJkntWN3k8dfHz2vLucdz8mkjFE9bz1+UOZosX1UzPm0nqI/W\nMYo9FlcPNklfFGeH/NshLGun+Cz6PtHZtVZWlRLS+jxPkRpIn7rdoupHTdA5s6SI+7H6Mfo+32Y2\n+To3neSIiZ7A0IjPXpXLePlMotGW3272t85datKzHZjbTVnsDj+FG/2Y/RlGP4R+jo20u7H6N1Ql\no+H8I/REY957R+jpfReiK6eOYHLtj2tttH6KrY/6Y/R2c+kjeJiFVtLG24hxpw7/AHY/RRkw9O37\nO99Hrt1YX0tfOBLjcGp4XF8c+u8fs9c4dcVcGemSI61nd3IneN1orQAAAAAAAAAAAAABFqxes1tE\nTE9JiUgPKcX4RbRXnNgiZwWnrH4XPi28PdXpW9JraImsxtMS8pxXhF9DecuGJtgmf+1TWW2N/la1\nL7N7T5e3Vy6W3hsYcvLbqzbO9jvvCzvDR0+XeO7crO6FmGSvRThy/RtVXJ92elvk2rRvDUzU7pl4\nizsd2J3jeBpcNz+Lg5LT7+Pp+Xk3W7js5eAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADs0NTrN96Yp6edkW8Wzm6+LNTq4pvTHO9vOfRoWtt\n1mes95YWvs1s2fZldddOczLPLn2ju0MmebT3YZc2/mpm3qqllN1drsbZIhr3yzvtHf4AsvlYYseb\nV5Yx4KTe0+UQ6nDvZ3UazbJqd8OKeu33peq0eh0+hxcmnxxWPOfOfm0mP+steT/ji8N9mKY9suum\nL37+HHaPm9DSlaVitKxWsdohI0Y22gAgAAAAAAAAAABXnyRhw3yT92Nwef4xm8bVzET0rPJH5d12\nCvLhho3rN9RWs9Z23n5y6O21YhrVYbdGOCfrrLPJRpv863zVS6FS09SvZj3lVZZRdPSqmnSWdrIE\nebOkK4ldTsgW1WKqd1oMZhEVZyRAImOjGI6rJ7IiATNd46qL02bHkiaxaoNGY2n4ImPgtyV2n0Vo\nGvlx7x2beiyTk08RPevSVUxux00+Fn2n7N+n5rRFb4AAAAAAAAAAAAAAACLVres1tETWekxKQHlu\nL8InR2nPp43wz3j8P/s5dLveWrFqzW0bxPeJeV4xwmdFec+CJnDM9Y/CrY1xv8qvTZ+WYdbDk5oh\n5zHk283U0eo3jaZZ2N5XYjrCnLSJhOK+8d1kxvCqzSwZvousrb7k9LfJ3nB1OLeJdLhufx9LEWn3\n6e7LXN9Ofy5/W4AuxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAETaKxMzO0Qi9646Ta07RDmZ9VbPbaOlI7Qi3i+c3TPUaqcu9adKfy0722ZXvFa9\nXO1OrjrESxt66ZJmcjPUanlidmhkzTZVfLN5VWvsC2b7R3U3yqrZZtO1esz2h2+F+zWTUcuXXTNM\nfeKR3n5+iZLVbqRzNJo9TxHLyaekz62ntD1fDOA6fQbZL7Zc/wCKY6R8odLBgxabFGPDSKUjyiFj\nSZkYa3aALKAAAAAAAAAAAAAADQ4pl2pTFH3p3n5Q33E12Tn1eSfKscsLZ+orS00eJqbW+Lfnu1tF\nXaJnZsz3WpCfsyp00fWSvmPdVYOmSUDd8kR3InoQosy7JmUX7MdwZ17ro7KKT1XRPRAsrO0rYndr\n79V1ZBaQiJ6JgCSIJASwrO07MpV2nqBlrv1a1o2bf2qtfLXaQUTO0sb05o3jv3ZXhjS20xEphW5h\nyeJjjf7UdJWNKLziyRePsz0lux1SgAQAAAAAAAAAAAAAADG9K5KTS8Rato2mJZAPIcU4ZbQZuekT\nOC3afT4NXFkmlntc2GmoxWx5K71tG0vHa/RX0GpmlutJ61t6wrY2xr8dXS5uesN+tt4ef0eaa223\n2dnHk3juyreM81OaFGiy/RtZET9jJ7s/2bdutd2jqKeic3iNTsd8a2h1H0jTVtP2o6W+bZbOO+gA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABje9cdJt\nadohGTLXFTmvO0fy52bJfU23t0pHaqLeL5xdK9Rnvqb+cUjtCi94xxvK3JetKuHrdZvaa1ljb10y\ncnIs1Wt3naJc++TmVWvMz1YWybfMGdsm3eWek0mo4jm8PT0mfW3lDf4V7P5tdMZdRviwfvZ6/TaX\nDpMMYsFIpWPTzXmf+steT8jn8L4Dp+HxF77Zc/4pjpHydYGjC3oAAAAAAAAAAAAAAAAADG9opS1p\n7RG7zszN6WtPe0zLua+3Joss/wBOzhzG2OsL5+IrY09dsSyYRijbHEMvOChb7KjF0yS2LQ169Mso\nS24noyrPVXWejNVKbTuw3T3REdQWU6LYlVvsyiUDPfqupPRr79VuOQX1lZEqoZxIMksd0gT2VT0l\nbPZVbuCaW8i8bwr32WxbcGnkjaZa9p2ndv5qbw5+aNugLItF6TEtvTX5sMb969HMpfazc0d9stqe\nvVZDdAQAAAAAAAAAAAAAAAADV1+iprtPOO/2u9bektoB4TJTJpNRbHkja1Z6uto8viVht+0HDvpG\nH6Tjj6zHHvbecONw7Ltfkmeqmo6Ma69DXbbZTkr1mGWO3RneOaGbZRoM30fVzSelMnT83aef1FZ7\nx3h1tBqfpGnjmn369LNc3sc3kzy9bQCzIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAa+q1dNNXr7157VhGp1Xh70x+9f9ocy283m1p5rz3mVbrjXHjt91lz\n5c9+fJ1nyjyhdM8lZlOOIiqrUXikd+kMreunnI5XEdX4dZiZcG+XmtNl/F83PeeWWHDOGanieSKY\nq+5H2rz2hMzWd1Iqx1yajJXHhrNrW6REeb1nCPZumn2z62Ivl7xTyr/6uhwzhGn4Zj2xxzZJ+1kn\nvLoNJnjHW7TbbsAszAAAAAAAAAAAAAAAAAAAAaPFrbaSK/itEOXt0rDf4xb/ACa/GZacRvaF58Q2\nIjasQnzPIhCU92tMbZGzHmotG10C6nZkwpPRmipIllEbMIZIE7solgmJBnCyk9VMM6z1BtVllEqK\nz0WRILYlluriWcSDJVbusV27gwInaSWM9ECyZ3hqamnSWxFmOSOaqRx725bNnSZNs9J+OynVY+WZ\nYYr7TE+nVaIr0Ais81Yn1hKAAAAAAAAAAAAAAAAAABExvG09peU4nov9n66L0j6q/WPg9Y1OJaON\nZpL0+9HWs/EWzeVz9PbmrEtnyc3h9reHy26TWdnSr2YX6657ijLXpLX0+onSamL/AHJ6W+Tbv2aW\nekTv16JzeI1Ox6KJiYiY7Slz+E6jxdN4dp3vj6fl5Og2clnKACAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZ2jeQRMxEbzO0Q08uqtkma4ulfO3r8lefUePMxWf\ncjy9WvlzVxV6T1Z61/x0Y8f7Wc7Ur1lqVy+LqOWJ2hp6rXddon5rOF1tfmz5OkT0qzb8dWbxjp1c\nbiuuilJ5Z6r+IcQrixzEy8zl1E6rNt1tMztFY81sztU1eRucN4ffi2p5esRM72n0h7rS6XFo8FcO\nCkVpX082nwXh3+z9FWLxHi36328vg6TZyW9ABAAAAAAAAAAAAAAAAAAAAAADj8Unm1tK/hqppHvw\ny1k8/EMk+m0GOPeafiFpCZYwolnXspvHvLa9mF46gmnZmwozRUiUCBKYYsoBLOFbKAX0llEqqyzi\nQXRLOJVRLOOwLIljZMEgrlhKyYYTAK5nZPN0RZjugUanHzVlz6xtLq361c+9eXItPpXX0dubTU+E\nbL2lw2++O1fSW6m/VYAISAAAAAAAAAAAAAAAAAp1GbwcfTreelYEydcuMcRrM/L9nnlsV6wqpi2r\ntv133mfWVkRyRtEdGFva7MzkYZNoamWN4bV4mYa9qztKIujhVppxGI8r1mJegeZpknBqKZY+7L0t\nLRekWrO8TG8Ns/HJ5ZypAWZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAADS12fp4VJ6z9qVuq1HgUiI+3bpDl589cOKZmevqprXPTbx477rDJlrhr1nq4+s182tMRP\nRqaziXiZJrWekNG17ZbxWJ336M5LXRbI3dLTJrs07RMY6fan1dHLrowY+X7MVjt6N3R6Kul0EbWm\ns7bz8Z+LnabQX43r7Y53php/mXj+Dnv0f1JO1x/8ZxbUzj02O15mfLtD13AvZqnDds+pmMmo26el\nXX0Wh0/D8EYtNjilY7+s/NstpOOTW7QBKgAAAAAAAAAAAAAAAAAAAAAADG88tLW9I3BwJtz6nNf1\nvK/DHVqYJ3pzT5y3MPZeojOWMQylEKpTVjZnDCwkqzYQyRRICATCITAJZQxhMAshnEq4ZQC2srKq\nqrIBZCWNZZgwswmFloVyCu0dFcx1WyrtCBhv5NTPHXds2U5o3hIz4ffbPt+KHUcTSW5c9Jme0u2v\nVYAKpAAAAAAAAAAAAAAAAYZctcVOa35R6tLrltN795/YvknNqrfhpPLH92V5isd9mWq6fHjk6rn0\nZxG8KK5Jm/wbVZiYZtqrmkqL023bkxvCiY3lJHNyRG81mHS4Rn5sNsNp64+3yaWaNrzOzHBl+i6q\nmT7s9J+S+ay8mex6EIneN47SNXKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAImYiJme0JafEs3h6fkidrZOn5eaLeJk7eOdm1Hi2vmtPTry/CHmOJcUvmvOPF1n09Pm\n6HF9ZGm01qxO3R5vSY7XwzmzTy47zzTEd7en5Mfvt2/PURWdo3tvPrPlKymbktFqTtMTvHzbOLDG\nf63JXbFX7FdnoODcDprZpq9TjiMMTvSn4vj8l5fxnrk91saPSa7i2hpOfbTVt5x1m0fLydzR6PDo\ndPGHBXasd585n1lsRERG0dIF5OOe6tAEqgAAAAAAAAAAAAAAAAAAAAAAADX11+TRZrf0y2Gjxe22\ngtH4piP3TPpXKwxtjhuYo9xq442iIblI2pC1RET2ILd9kxCqRjZmwlCSEohIJAQAAJZISDKGUd2M\nMoBnVbVVCyAWVWeSuqyOwIlXZZKue4MJV2WWYT2QKbKL9YlfdRdIo35b7/Hd3KTzUrPrDh27uxpb\nc2mpPwX/ABX9XAKpAAAAAAAAAAAAAACekTIp1eTwtJmv+GkyJn1oafeazbfpMzLR4jq/o8b823zX\n6XNF8ERCvTcNpxLV5LauvPhx9Irv3lhztdtv8TtaWLicXrt03jzjzb2k1nid56ty3s/w+a7Uwzjn\n1raejlarhmbhl/FpbxMO/fzj5p/ixSeXOvTtRfeI280ZI26tfDm3pWe63LaZx7qtGvniJ6tPLvOK\nfOa9WzbJvTbza02jl3n5SSljscK1MajSxWZ96nSW88xw/VfQ9XMT9nfa3yemid43jtLeXsce88qQ\nEqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADia3UTm1l4j7OP3Y/u\n7Vp2rM+kPJW1PhYcmS0+9MzKm/jbwz31weMzbV8UppazPL9q0/BF4rk1GLDSNqxPWPhCnHmnNrtT\nqPKteWPm6U6OdHaZvO+SaRNvhv12Ub/q3FhtrNVj0uKOt56z6R5y9zix1w4qY6RtWsREOJ7L6OKa\nS2rvX6zNM7T6Vh3mmZyOfya7eACzIAAAAAAAAAAAAAAAAAAAAAAAAAAczjVvqMVfW/8AZ03I41bf\nLp6/OVs/UVrY47NyOzUxd4bUJpEbb3Z7IiOrKIVSjZhMLJYyhKIgmGUQSDESIEbJEgQmCITEAmGU\nIiGUAyhZVhDOoM4Wx2VQtqBKuyyWEgqlhKyyuyBVaGtkbNmvk7A15l1eH2300R6TMORPSXT4ZO+O\n8fFefEX63gEAAAAAAAAAAAAAAAq1WPxdLlp+Kkx+y1Fvsz8gjhaDauGK8sx07y3OE3m1tT6RaP4c\nvU6yMNKUx73zT0ilY3l2eF6a+m0kRl/zbzz3+Ez5M8z26fJruW6wzYq5sV8d43raNpZjRzPPaTmx\n5b6bJ9rHO3zb2WJ8GWPEscY9bgzxH2t62n19GWW0eHOzHU5XbjXZ1x8WTnz2iZ7S2M1IjH2+LX0V\nKTqs8zO9ot0j8nUthi1J3UaOFMTfLFo6xMbS9BwHWTqdHOO8+/hnln5eTjYMFo1WTH5VnePzXcIm\n2k4zlpPSmXy/hfF5eMfJns69OA2cgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAADG/2LfJ874rW845mubliY7bPoto5qzHrDz0+yePNF41OotaJ7RWNtpV1OtfHqZ715fhu\nj8adNpcVfeyzE2/vLuanhOu1nEctIxTTFa/+ZPbZ3eHcF0vDbTfFE2yzG03t32+DokynXl9+leDB\nTTYKYccbUpWIhYCzEAAAAAAAAAAAAAAAAAAAAAAAAAAAAcXjE/4zDH9M/wAu04XF5/3jj/0f3Wz9\nRUYmzDWxS2I7FSyjuzY1ZKpRKEygEwiWUIkGIk2QJNhKQhMIhkCYZQxhlAMoZwwZwgWQshVCyATL\nCWc9ldpBhZXLOVdpQK7NfJPRdaWvknoDVvPvOnwuel4+TlXn3nS4VPvXj4QtEV0wAAAAAAAAAAAA\nAAAAAVV02CmTxK4qRf8AFFeq0AAAanEsfPpZmO9Ji0NDLfkwdOsulrumiyzHlVzJrz4Ovoy26vB8\ncTBa9NffLtMY77Rv8Yegx5ImkKdJoY1HC81Y+3OSbVn0mGGkmbY45u6tnrrTOu2xGO0RxCd+nNVj\nqKxTV1vH2pjaGtnyzXXYdo96ZmGXEMk15b7/AGZiVerWPTYckZcNbx5wzc7hGbnxXxzPWk7x8pdF\n0S9jh1OXgAlUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAcPjEf4/FP9H93ccXjMf4vDP9Mx+62fqKrx+S+GvibEFSsqyYwlVK\nZYsmIMoRKYJQIPIEiQ2ATCUQygCGUIhMAyhnDCGUIFkLIV1ZxIMpVWWSrsCuyqyyyq09ECq8tfJK\n66jJ2Bp5J6upwn7dv9Lk5J951uE/av8AJaIrqAAAAAAAAAAAAAAAAAAAAAAq1Mc2myxPnWf4cmtu\nXT9fR0tffk0WSe28bfq5Wbamm3326MtunwfK6PCv/AxPraZ/dz9PO97/AOqf5dHhdZrw7Dv3mOb9\nXOxRFM+avpe38mvkPHf/AFWlrKba7Tzt99ZxKkfR7euyNXMTrtPHfa0z+zPiM/UR8Zj+Wbdu8HpN\nM2bfzrV13M4dO2pyR61dNvj44/J/oAWZgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADj8bj63BPzdhyeNx0wz8ZWz9RWri7Nmv\nVrYu0NmqaRZHZlDGGSiwxZSgCEkCBCQSCQBMJRCYgEsoYx3Z17AlMIhlCBnDOGEM4AlhZZKq4KrK\n7LLKrIFN2vdfZReAaObu6/CO9vk5OePR1uEd7fJeIrqAIAAAAAAAAAAAAAAAAAAAAGtxCk5NFliI\n3mI32+XVyNTyZOHTee946PQKPoeDffw4777eW/yVs60xv+ZxOnr4Okx1t05KRv8Ao41Z5q3yed5m\nXY1szXRZ5jvFJ/hxItP0aOSN9q7yrtr4f2tHFM5+KT16Yq/vK/iGSbXw4vO14UcPx5MGfNbPG18m\n1oj4THRsTw7VanPXVYpi3gzMcnrvCnG11JOupwuN8+a3pEQ6jT4divjxWnJExa09pbjbM5HHu90A\nJUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAHM41H1GOf6nTc/jEf4Ws+lls/UX45uGekNujTwdm5RNIthKIZKLDFlsiQIShIC\nEgCUJ7AmGTGO7IDzZQhMSDJMMYZQgZwzhhDOATuqssmVdgVWVWWyqtCBTeVF19lF+wNLNG7q8I+9\n8nLyupwnt+S8RXUAQAAAAAAAAAAAAAAAAAAAAAAItWL1mto3iY2lyrcLyUxzix2ia2nvPeK+jrCL\nOrTVnxpanhuPPemSs8l6RtE7dJj0ldpNP9GwRSZ3neZmV4cR/Vs4AJQAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANHi1d9H\nM+kt5ra+vPoskfDdOfqK4mn7Q3aNHBPZu0W0RdDOGFWcKLCJZeTGQQlCQSgASBsCYZQxhlAJTAmA\nTsmAgGcM4YQyjsgRLC3VnaVcgwsrt3Z2V2QK7tbJ1bN5a9waeWO7p8Knt8nNyebpcK8vkvlFdQBA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAK9RXmwZI+ErEWjesx6wQeZwejeo0cccuW8\nelpblJaaRGxVnCuss4ZrMvJEgCAASISCQIBlCYYpieoM0wx8k7gzIRueYM4Z79FcSy3QEsLJmWFp\nBjaVVpZWlXMoGNmvkXXlr3kGtknu6XCf7OXkl1OEdl8orqgIAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAHmskcmtzV/rls0U62OXiWX4zErcc9GmkRfWVkSqqziWayxCPIANwBIhIJSxS\nCRG6dwZwlhEs4BluMdzfqgZxLLdXuy3AmVdpZTKuZBjaVVpWWV2QlhZRdfZRcGpl7urwfrzfJy8r\nrcH61vPyWitdMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHA4nHLxKZ9awnH2ZcY\njbW459aq8fZpfiI2IZwrqzhmsz3Ebm4JN0AMhCQSIASndiAziWUSriWcAyRujc80DM3RCfIETLCW\nUsZEsJYSslXZAwlTddPZTkBp5e7r8Gj6rJPxhx8k9Xa4PG2C8/FaK10QAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAcfjcbZMFvnDWx9m5x2PqcNvS+zSxT7sNPxH62YZQwqzhRZO6UCB\nKUAJTux3SDIRuAncQAmJZRLBMSgZ7iIAZRKd2DICUSlAljLCYWMLIFVukNfI2bNbIDTyT7zu8Ijb\nSz/qcG/2nf4T/wCE/wD2WnxWt4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHL9oL\n+Hw2cm28VvEuPptfgyVj6yIn0no7/FtJfW8NzYMe3PaPd39d3iMug1WktNc2C9dvPbeP1aZ9xF+v\nT471tHu2iflK2HkqWmvaZj5Surqc9Ps5bx+alTHqYHm68S1Vf/NmfnC2vGNTXvyT84Ql6A3cSvHM\nsfaxVn5Ssrxyv3sM/lKB1xza8bwT3pePyWV4tpZ+/MfOEjfGrXiGlt2zV/PotrqcN/s5aT/+wLRj\nFontMSlAlKEgndO6IAZQljDIEgeQljLCzOVdkCu/SGrkbF56NPNeKxMzMRHxENe0+89DwuNtHHzl\n5PJr8NcnLW3Pbf7r1nCZm2gpae8zMrz4i/W6AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAETETG0xukB4HVaeMHEtRi26RedvkyjBSfX9W77QYvC4xz7dMlYlrU7M929dWJLFc6aPK0q\n7YLxPS0S22FlP6q38Zac0yR92s/KVc3tHfFf8tpbcsLRvB/dR/8ALLVnU0r9uL1+dZI1mnmdvGpv\n6TOy6ym+Oto2tWJ+cJ/tW+KLK5KW+zes/KU7tG+h01p64qx8Y6NXNo6Y+uPJlp8rLf0rfG7MXtHa\n0x8pZxqs9e2a8f8A7Oj7HaTHn0+f6RWM23LETfr6vRW4PoL99NT8ui7F4+vEdXXtnt+fVbXjGsr/\nAOZE/OsPS29nuH27YrV+VpeV9pdPXhOtw49NG9Mld55+vXcTPd42I47qo7xSfyWV9oM8d8VJ/VxM\nd8l46xWF9cV7en6o/qLfxp2I9ob+eCv/AHMo9op89P8A/wBORGmyT5R+qfo2X8P7n9Q/jTsx7RR5\n6ef+4/8AuHftg/8A6cWcOSO9J/WEbWr3pY7Efzp2Lcfv5YK/9zWy8d1E/ZpSv5Oba1/+Hb9lc+LP\nbFt87I7E/wAabWbiurvEx4nL/pjZzc2bJkn372t85ZXx55/BX85lucC0vPxnTxlnnjm32mOiZqUu\nLJ2p4TwnVavNWaYbRTfre0bQ99pcH0bT0xb78vmtiIiNojaErMwAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAHnfarF7umzRHaZrLjYrdIen9ocPi8JyTt1xzF4eUw23rCm3R4r6bMy\nwt6kdTaWLdjswmNoZontsCm0K5XWjopnuDC0dGpqG5bs08/daKV672MjbSaif6oh6Z5f2LtvptRX\n0tEvUN3Jfo8f7cYve0eX4zV7B5z20xc/C8eSPuZIRficfXlcPaG7ino08HWIbePpLF2NuiyOyrHK\n3fZFSwuovHVfaVF4QK5YWTM9UT0EKry6Ps1Tn4zjn8NZn9nOtLseydObiWW34cf918fWfk+PYANn\nKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAq1WKM+ly4p+/WYeBxTNd6zG0xO0\nvobw3FcP0bi2em20Tbmj5Srr418V9sa2Z7qKyzi07MXUylhaU7yjqhLCeiq3ddaFNxFYW7NLNG8t\nzya+WO6Va9J7FW66mvwidnrXiPY3Ny8RyUn71Jj9Ht3RPjk19HK9pMHj8D1ER3rHN+jqqtTjjNps\nuOe16zAifXzfTz7kNyndpYazS9qT0mszDdoxrsi6m8LazMq6zDOsq1ZEyrt1WWlXaUCqyq0rbKbi\nFdp6PReyFd8uqv8ACsfy83aXrPZHHto89/xX2/SP/dpj6y8vx6EBq5gAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAB5n2q03LfDqqx39y39npmlxbS/TOG5se29tuavzgWzeV4mtui2\nO3RRSY2hdVhqO2MvI36iu9lUsrSrvDHn6spnmSiq5jooyV6tq1VV69RC32byTh43h8otMx+r6I+Z\naK/g8TwX7bXh9Mid4iW+fjl8n1ICWb57xLBOm4zqse20Tbmj8+qKdnS9q8PhcTw5tumSm0/OHMxz\n0Za+uzx3sX1t0Zxurr1ZxvspWiZYWZbsbT0QK7KLrZVZJFaqt5vbezNOTg9J/FaZeJns93wCvLwb\nT/GJn92uGHldIBowAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADuAPA67F9H4l\nqMW20VvO3yRWW97T4fC4rXJHSMtI/WGhVlue3b473K2KzMML4+62tujG9pnozXaOSOVFMnVbmq1t\ntrJRW5E7wwvUxTvCyY6CHOt7moxz6Wh9PxTzYaT61h8x1MbZK/OH0zTf+Fxf6I/htj45vL9WgLMn\nmvbPFvocGWO9L7fq85p5maw9d7VYvE4JkmPu2if3eW0+PasdFNOnxfF1Y2hlykRsmY+LJ0MZjZXa\neq2eyi8oQTO0KLdZWzPRjWu6VaqtHR73g0bcI0sf0Q8Nkq93wqNuFaWP+XDTDDytwBowAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAef9q8HNpcGaI60vtPyl56k9Iew49j8ThGe\nPwxFv0l4zH2U26fDfTYiyJljvsjf4sm6vJ1hrXjq2MkqLdZEVbgbMx0auGdmzNt6iHN1Ub5af6of\nTdPG2nxx6Vj+HzaaTm1+nx/iyVj930ysbViPRrj45vL9SAuyc7j1efguqj+jd4/T33rD3HEcPj8O\n1GP8WOY/Z4TTT7sKadHhbcsZnaCJ3TPZk6VdrKbTutmP0U2nqgrGOsr8deiuI2X09EqKM1dt3uuG\nf/jdN/06/wAPE546S9rwud+Gaaf+XH8NMMPK2wGjAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAABrcRp4nDtRWPPHP8PCYusPoWSvNjtX1iYfPuWaXtX8MzCuvjfw32siu8ptXoxi\n0wy5t4YulReqmazu2skbquURWFInddM7VYRGyL291KFnCcfj8e0le/Lbmn8n0N4b2Ur4nHLWmPsY\n5e5a5+OXyXugBZmiY3iY9Xz7NjnTa3Ph/BeYj5PoTxftFg8Hjk2iOmWkW/Psrr418V5WrWd2faFc\nV2jdnEMXWxntupmN7NiYU27iWML6dVMVnddjgVqMsdHr+CW5uE6f4Rt+7yuSsTDv+zWXn0WTHP3L\n/tK+GHl+O0A1c4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8Dn93W56/wDM\nt/L3z59qp24jn+OS38lnpr4r7ZxHQ2TEstt3PXUrt27K57rr1VT0BjKnJPRbMqMs7QlV2fYvHvrd\nVknyrEfu9m8f7FZI8fVU85iJewbT45NfQBKo817W4eulzxHaZrL0rje09ItwqbfhtBVs3leai8RD\nKLw1sduesL606dWFdsZT1jdhNeq6K9DlhCVUU6s4jZnt1YzAhnM71dH2bycmszY/K1d/0c6OzY4R\nfwuK4p8rTstn6z8k7HrwGzkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHz3\nVxvr80/8y38voTwGpj/F5/8AqT/JfjTx/WVeyY6FPspc9dZPVXaOq2WEwIUTVRmjo2rNfLHRI3vZ\nDJycXtX8dZh7t879nsnhcbwz23tt+r6I2nxyb+gCVBzuPY/E4PqI9K7ui19fTxNBnp60n+Aj5/pJ\n3jZu1aOnnltMNussdfXbm+l3ZM9URHREdZVXTuT1Nk7boQiOkJw28PU47/htEp5eivJPLMTCZ9Vv\nx7mJ3iJ9UqNHk8XR4b+tIXuhxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD\nweqjbWZ4/wCZP8vePCaz/wDIaiP+Zb+UX408f0r9lOxWOifJhXWjfyYWllPRXYQxnrCrJHRd3YZI\n6A1NJecHEsN/S0T+76bE7xE+r5dk93LW3pL6ZpMni6PDf8VIn9m2fjm8s9rgFmQxvHNS0esbMiew\nPnHLyai9fS0w2aNfUTtrs3+uf5bGPqy068fF227KtSsdFlKqNGMV6myyY6sbdIQI8tlOWOi6Jhhk\nj3RD0vA8nicMx9etZmHRcT2Zyb6XNT8N9/2dt0T449T2AJVAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAHhdfG3E9TH9cvdPEcXjk4zqI/q3L8aeP6xr2TsxpLOekMK6mFo6qpXSrm\nOqBixvHSVmzC4OfqK7S9/wAByeLwbTW9K7fo8Fqo6Paeyl+fglI/Da0NcMPK7QC7AAB8313TiOf/\nAKk/y2MHWrX4jG3E9R/1Lfyv0/aFNOrHxuU7LI7MMayGTVlHWUXhNe6Z6wIUsb9d1m20q7dkDpez\nN9tRqKT5xEvRvKez9+Xis1/FSYerb5+OTyf6AFlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAB43j9eXjN/jWJ/Z7J5L2mry8Upb8VIF8f6aGOey2eynHvOy7bowrrYSxZSwQJ2YXZ\n92N4BoanrEvVexmTm4blr+HJ/aHltRHSXofYm/1Wrp5RaJaYY+X49WA0c4AD51xONuKan/qW/lbp\n+0MOLRtxbU/9SU4J7KadWPjep2WQrr2WRPRk1TvsndXMpiRCb9FNu0rbTuqvKBscCjfi9PhWZeue\nV9n434rafTHL1TfPxy+T/QAszAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmv\navHtfTZfnV6VxPajHzcNrf8ABeJFs/XnMcr4no18c+6vr2YadkY2YM57sEDLyY37Mo7MMnYGlqO0\nvQ+xNfqNVb1tEfs87qZ2rL0/sVX/AHdnt65P7Q0wx8vx6UBo5wAHz/jUbcX1PT78qtO2vaCnJxjP\n8Zif2amnnspp04+OjWejKJ6MKdmcMmyJn4m5ZHzEVPMwtJv0VZLbQDqezcb8RzT6Y/7vUPM+ytZt\nn1OTyiIh6Ztn45N/6AFlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABocbxeLw\nnUR5xXm/Rvq8+OMuDJjntaswEeBxT0bNZ6NatZpNqz3rO0rqsdO3PxlaWEMpY+aqWXkryT0ZT2V3\n7A0dVPuy9f7G124NM/iyT/Z4zWT7sw957MYfB4Fp4/FE2/WWmGHldcBowAAeM9qKcvFeb8VIly9P\n0nq7ntbTbVYL+tJj93CwT76unR4/jo0nozhhTsy3Y1sWljM9Ce7HyQIm3RRlttVbaWrnt0Sh6n2U\nx8vD8mSfv3/h3XN4Bi8Lg2nj8Uc36y6TeOPXugCUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAPD8RxeBxXUU26Tbmj8+quro+02Lw+I4ssdslNvzhzazvDPbq8d7GW7Dfqz2VzG\n0s2qd+iu/Zn5Ksk9BVztX1mI8930zh2LwOHabH+HHWP2fNYp4+vwYvxXiP3fUqxtWIjyjZtj45/L\nfaQFmQADzftfj3w6fJ6WmHmsP23rvaqnNwqLfhvEvIYZ+sV038bo0noy36MK9oZQxrdMyrlnMbMZ\nQKrS1M07zEestq/RRjr4utwY/wAV4j91p9V18fQdJj8LR4ccfdpEfsuREbREJbuMAAAAAAAAAAAA\nBAJAAAAEAJEAJQAJQAJEAJQAJQAJEACUJAQlAJEAJQAJQJAAAEAJEAJBAAAJAABAJEJAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwvanDzaPFmjvjv8A\ntLztJ3h7HjGHx+FainnFeaPnHV4vFbeIU038VbHeGF+kso7Mb9mTdhKnLK3dRm7SIrHhGPxeP6Sv\n9cT/AHfSnz72Zx+J7Q45/BWZ/Z9BbZ+OXyfQBZQABzeP4/E4NqI9Ii36S8Ng/wAx9C4jTxOH6ivr\njn+Hz3B/mQi/GvjdCnWNlsdI2V07LIlg6USrt2ZzZXMoFV+zPhGLxeOaavpbm/RVltEN72Yx+Jxm\nb7dKUmf7L5+s9/HtRA2cqRACRACRACRACUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQCQQCRACRACRCQBCQBCQB\nACRACRACRACRACL1i9LVntMbPATTwdRkxT3pea/u+gPE8Xx+DxrPHlaYt+qNfGvjvtXXsi0dOrKk\ndEXjZg6VMtbP2bMtXUdpEV0/Y2nNxbNf8OP+727xvsXH+N1U/wBEfy9k3nxyb+gCVQAGOWvNivX1\nrMPnGGOXNNfOJ2fSZ6w+dZKeHxDPX8N7R+6L8a+L63KdoZ7q6zvEMpnowdKJ6ywmWUyqvIKM0vQ+\nx+D6rU55+9aKx+TzWa36vbezmDwODYenW+95/Nphj5L6dQBo5wAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAEiAAAEoA\nAAAAAAAAAAAAAEAkEAkRuAkQbgkQAkQAkQAkQAl5T2nx8nEMOT8dNv0l6pwfarHvpcGWPu32/WCr\nYvK4mOem6b9mGKd4Z3idmFdka0y1c892zfpMtLPaNpEV6D2Kj/Eauf6YeweQ9ieuTVz8K/3evbT4\n5NfQBKoAA8FxCvJxrUx/XMvevD8Zry8fz/Haf2RfjTx/6RSOnRMyypHu9kXjowrqVSrvPRnZVl6V\nkK0775MsUjvadn0nT4ow6bFijtSsVfPuFYvpPGtNTy54mfy6vorXDm8l9pEC7JIgBIgBIgBIgBIg\nBIgBIhIAgBIhIAgBIgBIIBIAAhIAhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAA\nAAAAAAAAABAJQkAEAAAAAAAAAAjc3BIjdG4Mkbo5kcwMjdhzHMDPc3V8xzAs3N1fMjmBZubq+Y5g\nWbm6vmOYFm5ur5jmBZubq+Y5gWbm6vmOYFm5ur5jmBZubq+Y5gWbm6vmTzAz3N2HMnmBlu5ftFTx\nOEZJ/DMW/d0t2rxKni8N1FPWkiZ9eS08e7Cy8dGGn6UhZaJljXZGnmc3UT3dPP2cnUT78xCIV6j2\nH/8A9c/6f7vXPI+w8bU1U+vL/d63du5NfUiDcVSIAS8b7RV5eOb/AIqRL2TyXtNX/e2KfXH/AHlF\n+NPH/pr4+2xcxx0hFpY11K7R16KM32ZWz3UaidqSgrc9kcPicWyZJjfw6T+727y3sXh2xarN+K0V\nh6lvPjj3e0ASqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJQAAAAAkQAkQAkAAAAAAAAAAAAAAA\nEgAAAAAAAAAAAAAAAAAAAAAgAAABKDcAN0bgkY8xzAyRux5kcwM9zdXNkTcFm6OZXzMeYFvMibKu\nZHMC2bo51U2RuC2bom6rc3BZzom6sBZzI52ADPnOdggFnMc6skFnMc6rc3BbznOp3RzAv50c6nml\nHMC/nOf4qOY5wX85zqOc5wbHOc7X5znBsc6edr85zg2ec52vzpi4NjmY5bROG+/bllVzsNTk5dLl\nn0pP8BHmMHWNmzt0aum8obm08vVjfrtnxztR0mXHzTvaZdjVRMTLkZo6yiFen9iZ2pqY/wBP93rN\n3kPY+/LfPX1rE/u9XzN3HfqzdO6vmTuIZ7m7Hc3Bnu8t7TR/vHBP9E/y9Pu837SV31umn+if5Rfi\n/j/01MMb1hjkrtKzBG0bMsmOZY11tOYamr6Und0LUc7XT7u3rJPqL8er9lcPhcFpbzyWm39v7O00\n+FYvA4Zpsc94xxu227jv1IAgAAAAAAAAABKAAAASgASgBIgBIgBIgBIhIAAAAAAAAAAAAAAAAAAC\nUACUJAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAg3AEbomQZbo3YzLGbAz3RNlc3YzcFs2YzdVN2\nM2Bdzom6nmNwW86JurTAMuY3REJ2BB1ZRVMVBhsbSsiqeUFXLucq3lTygp5TlXcpygp5TlXcpygp\n5TlXcqOUFXKjlXcrGYBXysdlswiYBVMdUTCyY6sZBWxlnMMZgGLGZZSwkDdHMiWO4MuY5mEyjcFn\nN1OdVzHMC3nTzqeY5gX85zqOZPMC+Lqdbk20eb/RKOZr8QybaK/XvtH7iZ9aGlp2luzT3fg19NHS\nOjbmPcYX67XH1XSZ9XIzRvMuzrK7zLkZYmYnciunb9lZ5dTk+OP+71cXeP8AZnJ/ip2nf3J/l6iL\n/Fu5L9bMWZczXi6YuIbEWTzKIuyiwLt3nuO25uI4a/hx7/rLuczg8TicvFLbfdpEK6+NPH/phhjo\nstLGkctUWnoxrrU3j1cnWTzZq1jzl1clo5Zcu8c+txR63iP3Tn6pv4+g4o5cVI9IiGe7CJ2iE7t3\nGyN2O6dwSINwSISAlAAlACRAAlAAlACRACRCQAAAAAAAAAASgASISAAAAAAAAAAAAACQAAAAAAAA\nAAAAAASAAAAAAAAAAAAAAAAIAAAQCAJljuljsCJlhMs9mOwMJYys5TkBVsjZdyHICrZPKt5E8oK4\nqmKrOVOwMIqyirPY2Bjyp2ZbAI2NmSARsbMgEbI2ZAMdjZICNkbMkSCNmOzJEgx2YyzljMAwlhKy\nWEwCuWErJhhMArlhLOWEgxljMpljIImWMyTKJA3N0IBO5vux3NwZbnMx3NwZczT4jf3MdPW27a3a\nfJOq1XNP2KdIRfi+J2trSYfcjeF+Wm1OicVeWIiN9kai8xjY12ORqultnI1Ecsujq79XP1FovWYI\nrTgeq+j8QrWZ+3Mx+r2UXeC0WG2Ti2kiN5mL807eUREvbzbaejefHJv62Iv8WUXa0WTFhVtRdlF2\nrz9WUXBtc7jR9dqc2T1ttHyhvZMvJitb0jdq6XHNcNenWVN3028U99WRj6Kb02be3Tq18/SN2Lpc\n3UdN9nOmZrqKX/DaJ/d0svvTLRzV3jomK6+Pd1vvWJj0ZczT0mXxNJht60hfFnQ4qu3N1cWTEgs3\nTur5k7gz3N2O5uDM3Y7m4MtxBuCQASIASIASAAAAAAACRCQAAAAAAAAEoSAAAAAAAAAAAlAAlCQA\nAAAAAAAAAAASAAAAAAAAAAAAIASgAAAEJAQJQCNkbMgGOyOVnsAw5TlZ7GwMOVPKy2NgY7GzIBGx\nskA2AAAAAAAAAAQkBAEghEskAxYzDPZGwK5hjMLJhjMAqmGEwumrCagomFcw2JqqtUFEsLLrV82F\no7gqljKyYYTGwMZRKUSCAQAboJnaN5Bjkneu0d5W4ccViIiOzHFWbTzNumP1Zarr8eeRMbxDW1Mx\nNO67NbkhzNVnmInqzaOZrL93JyZeV0M1++7S02jvxDWxhxx033tPpC8Z6rrezWjmZyazJG2/u03h\n2vFibTHoqvamiwVwY+nLGzV0+SZ1Mx8G0/45tOhzJ5lXMc3UVXRdlF1HP+iYsDPLPPy49/tz1+Te\npSIr0ho6ak5Ms5J8o2q6NImOrHV7XX488ypzTtHXo0s9t6zG7c1G1qz6ubeZiZ3UatXJG3yauSO7\ncvMTEx5tPLb3prPRMVr0HB8vicNxf0+7+kt+LOJwTJyY/Bnz3tH93X36N58cWvq6LSyiyndMSlC7\nmZcymLJiwLosmJVRLKLAtiU7q4lMSCzc3YxJuDMRuAlKAEgAAAlAkAAAAAABKAEgAAAAAJAAAAAA\nAAAAAAAEgAAAAAAAAAAAAAkAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAhIAAACAAAASgAAAAAAEAAAA\nhGzJAImGMwzQDDZjNVuyNgUTVhNGxysZqDVmiu1G5NN2M4waM0+DCaN2cbGcQNGaMZq3JxMJxA1J\nqx2bU4kU09slorWNwa20z02RXHbJbl26QvtFovbHWkxEdJt5y2MOHlr2U1W3jx+1hiw8vSO63lmI\nXRTaEWmtY6snRHO1VpmJ+DjavpSZl2s8b7y4HFcnh0n0gha5ebJN55KRM2mdoiPN6fh+kpwXh0Wy\nRHj5Otp/s5Ps1p62y31+em9aTMYt/OfVfxTiPjZ52naI7fBrI5t66xz5+a1rW7yx0eSL6iZjtEOX\nqNbSletom3lENjh2fbHzbbWt3iVozruc+5ztWubf4M4ybpQ2Oboyrva0Vjza8WdDR4OkXt3n9ldX\nkaePP9VtYqctYhdvt5oivTeCZ2YOxXk6ubqMfV0b9mrljfqlFcq88k7z2U5axeItDa1OPessuC8P\nya7XRWYnwqdbT/ZMilvIu4dpslNdixXja8Y5tt85djZdbDWnGOesRtXFtuw6T27No5Kx2OrKYQlC\nExKJgBnEpiyvdlEgsizKLKollFgWxLKJVRLKJBbEp3VxLKJBnuMWQJEbpBIAAAJAAAABIAAAAAAA\nlAJAAAAAAAAAAAAAASAAAAAAAAAAAAAJAAAABAJABAlAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAA\nAAABAJQAAAAgAABAAI2EoBGyJhkgGPKxmqxAKpownHC+YRMdN5BrTj67R3bOn01o7p01Iv71u89o\nb9a7LfBTfS1vWI2jf12VfQPSW8KX2mas+NC2iv6xMNfJpMnLtEbuuxtMRCtzF55NR5rPps1N/ctP\ny6uHreE6nXZ4pak48X3rT06fB7fNeI33cbX6mI32R/MWu7XF116aDSRhxbRERs8f499bkyZeeKae\nkzE2mdon81/tfxDLGOunwbzlzbx08oaHBvZHJlx48mrvaa94pu04y617576rNGLRRM0397JEd/lu\n9Dw/S3x4qxffo6mm4NjwUiKY4iI9Ib1dHFY6QIaNabbrYrLfrpJtaK1rMzPZb/s+05IpP59OyLeJ\nk7eNfRaOc1ue32I7fGXYpi5Y77M8OGMeOKxHSFsU3Y29deZMzirl6dlVvhLatCjJHeYQv1rXnps1\n8k9/VsW6qLVmZIi1rzitlvFKRvaZ2h6TSaenC9FFY+3brM+sqeG8Prp4+kZ+lvuxPkr1mqm95nfp\nDXM459676a2q1dsV7XietvNno78+CJn1cjX6mOeIm0bR33dfRU5NJjidt9t5afjG/V6JZ7I2QMNh\nnyo2BhsMuVG3wAhMSbbQRAMolnE+iuGUSCyJZRKuGUSCyJZK4llEgyZMYTuCUsYSCQASISAAAlCQ\nAAAAAAEoASCASAAAAAAAAAAAAlACRACQAAAAAAAAAEgCEoASCAAAAAAAAAAAAAAAAAAAAAAABAAA\nAAAAAAAISAIAAAAAAQAAACASgAAAQJAQAAhIDHZhln3do7z0WS18mWsajHjmes7pg3dNi5aRMNqO\nyvDHTpPRaigHZhN4hHRlaVN59JY3zRENLUavaO+yq0iNVlitJ6vNcR1MVi0zO0era1/Ea0rPvbz5\nPM5MWp45qvo2GZrhmfrsnpHpHzTCseEcM/2vrr8Q1Eb4qzy44nziPN63HpYiIiI7LNHoqabBTFii\nIpSNohuVxrKtWMEejPwY9G1FFmHB4mWJn7MdfnIM9JpIx15to5pbUaas/a6rqViI7MxPxqX0UT1r\nO3wVzpbR2hviP5i03Y5s6a879FNtHljydhExCv8AMTPJXBnRZbz0iG5ptFjwe/l96zctMVamTJtE\nyTMibu1VrdTzRMR0j0ed4lr64MVpm0RERvMz5NvX62uOJ69XhOKX1HH9bHDtFvNYnfJeOy0Z2ojX\n6jjnEq6fRUmccTvN/J9H0eKcOnx45neaxEbubwHgOHg+milI3vP2resu3Wu0JQmITsmISDHZHKz2\nJgFc1RMLJhGwK9iIZ7MZgEdgmAEwyiWCdwWRLKJVxKYsC2JTuriWUSDNlEsIlMAySx3SCRCQSIAS\nAAACRACQAAAAAAASIASAAAAAAAAAAAAAAACRACRACQASIAAAAAAAAAAAAAAAAAAAAAAAAQCUAAAA\nAAAAAAIAAAAAAAAQAAAAAACBICBICAAEJAQJQCJcLjuS2ny6fPG/LWdpd1o8T0X07SXx/e7wCdJx\nWa0jmneHQpxPDMdZmJfNtZm49weZrh0/j4o7VtSZ2+Uw0/8A7o49k92vBLc/ntFohFW9PqGXimOI\n6Tu1L8T3eCx6r2t1O3JwvHjifO99v7t/Bwf2l1PXU6rS6eJ8qUm8x+so5TsekzcSjbvs4mt4rzW5\nK2mbT0itesy2cHsvbvqtbmyz5xERWP2jd1tJwrTaONsOKtZ8585+cnDrzmn4Rq+IZObUROHD32n7\nVv8A0ej0uhxaXFGPFSK1j0bkY4jyZRVZVXFGUVWbGwKsk8mObekNrSW3pWf1a2aYjHbm7bNnQ1id\nPW0TvuDdhJEbQABMsLW2R0ZTMQrvfbz2YWzVhpanUxEd0dWkW5c8R5uXxDX1w4pnfr5Q19XxKuOJ\n2neXltVqtVxbV/RdJ715+1bypANfiOu1HENV9C0MTfNeesx2rD1PAeBYuE6aKx72W3W9/WVnBuB4\neF4dqRzZbdb5J72l160WVK02ZxCYhOwI23TsnY2BGxsnYBjsiYZsZBjMMZZSgGEolMsQDdG6NwZ7\npiVe6YkFsSziVMWZRILolMSriWUSCyJTuwhMSDMRCQSI3SAlACRCQAAEoAEoASAAAAAAAAACUACR\nACQAAAAAAAAAAAAASAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAABAAAAAAAAAAAAACBKAAAAAAAQ\nJQAAAhICEbJAYTWJ7wx8KvpC0BV4ceieWGewDHlNmWwCNjZICNhIDmcZredBecdpiY69FXCOLW+i\nUiZidukulmxxlx2paN4mNng+K4+I8Hy2yaTfl37TXetoCPfRxfp1qi3F48ofKMvtvxak8s6LDv61\nrZji9rPaLUf5PC+bfttS0q8q3p9W/wBrRMdpUZuKdN99nzvFqPbTVz7nD8OKs+do2/mW3h4D7Xaq\nZnPrtNpqz35aRaYOHY9Zk4pNt9rR+rl6zi+OnS+WN57Rv1lXp/YrNaYtruL6zNPnGO3hxP6O5w/2\nf0HDuun09Yv55Le9afznqcOvO4tBreMTHu30unnva0bWt8on+70nDuE4OHYYx4Kbesz3tPrMuhGO\nIjpDOKrK9YVpsyiGUQnYGOyUgI2SlAIEmwMWMs9kTAMJYzDOYRMArmGErZhhMArlHmzmGMwDE3Ts\nbAbs4swj5pgFkSziVcM4BZEsolXDKAZwyhjCYBkACQhIAAAAAAAJAAAAAAAAAAAAAAAAAAAShIAA\nAAAAAAJAAAAAAAAAAAAAABAJEAAAAAAAAAAAAAAAIEoBKAAAAAAAAAAAAAAABAlAAAAAAAIAAAAA\nBAkBAkBAkBAlACEgMZjdjbFW8bWrEx8YWANb6Fp+bfwab+vLDKMFK9qxH5L0bAr8OPRPKz2AY7J2\nSbAjYZAI2E7AIEgIEgIEgMdkSy2NgY7MdlmyNoBXsxmFuyNgVTVjNV3KjlBRNTlXTVHKCrlIqt5T\nlBhEMohlFerLlBjEMohMVTEARDKCITsAk2AEgAAAkAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAD/\n2Q==";function aie(e){return iie.apply(this,arguments)}function iie(){return iie=Mr(Nr().mark((function e(t){var n,r,a,i;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/octet-stream";return fetch("data:".concat(t,";base64,").concat(e)).then((function(e){return e.blob()}))},e.t0=t.config.warmup,e.next="face"===e.t0?4:"body"===e.t0||"full"===e.t0?8:12;break;case 4:return e.next=6,n(nie);case 6:return r=e.sent,e.abrupt("break",13);case 8:return e.next=10,n(rie);case 10:return r=e.sent,e.abrupt("break",13);case 12:r=null;case 13:if(!r){e.next=21;break}return e.next=16,createImageBitmap(r);case 16:return i=e.sent,e.next=19,t.detect(i,t.config);case 19:a=e.sent,i.close();case 21:return e.abrupt("return",a);case 22:case"end":return e.stop()}}),e)}))),iie.apply(this,arguments)}function oie(e){return sie.apply(this,arguments)}function sie(){return sie=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n,r;switch(t.config.warmup){case"face":n="data:image/jpeg;base64,"+nie;break;case"full":case"body":n="data:image/jpeg;base64,"+rie;break;default:n=null}if("undefined"!==typeof Image)r=new Image;else{if(!Z7.Image)return;r=new Z7.Image}r.onload=Mr(Nr().mark((function n(){var a,i,o,s;return Nr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=V7(r.naturalWidth,r.naturalHeight)){n.next=6;break}pa("Warmup: Canvas not found"),e(void 0),n.next=15;break;case 6:return(i=a.getContext("2d"))&&i.drawImage(r,0,0),n.next=10,t.image(a);case 10:return o=n.sent,n.next=13,t.detect(o.tensor,t.config);case 13:s=n.sent,e(s);case 15:case"end":return n.stop()}}),n)}))),n?r.src=n:e(void 0)})));case 1:case"end":return e.stop()}}),e)}))),sie.apply(this,arguments)}function uie(e){return lie.apply(this,arguments)}function lie(){return(lie=Mr(Nr().mark((function e(t){var n,r,a,i,o;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e){return Buffer.from(e,"base64")},r="face"===t.config.warmup?n(nie):n(rie),!("node"in ba)){e.next=12;break}return i=(void 0).decodeJpeg(r),o=i.expandDims(0),t.tf.dispose(i),e.next=8,t.detect(o,t.config);case 8:a=e.sent,t.tf.dispose(o),e.next=13;break;case 12:t.config.debug&&pa("Warmup tfjs-node not loaded");case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cie(e){return die.apply(this,arguments)}function die(){return(die=Mr(Nr().mark((function e(t){var n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!==typeof createImageBitmap){e.next=6;break}return e.next=3,aie(t);case 3:n=e.sent,e.next=15;break;case 6:if("undefined"===typeof Image&&void 0===Z7.Canvas){e.next=12;break}return e.next=9,oie(t);case 9:n=e.sent,e.next=15;break;case 12:return e.next=14,uie(t);case 14:n=e.sent;case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hie(e){return pie.apply(this,arguments)}function pie(){return pie=Mr(Nr().mark((function e(t){var n,r,a,i,o,s,l,c,d,h,p,f,m,g,v,y;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Xh(),r=Jh(),("webgl"===n||"humangl"===n)&&r&&r.checkCompileCompletion){e.next=4;break}return e.abrupt("return");case 4:Zi().set("ENGINE_COMPILE_ONLY",!0),a=Lh().state.numTensors,i=[],o=ea(Object.entries(t).filter((function(e){var t=u(e,2),n=t[0],r=t[1];return null!==n&&null!==r})));try{for(o.s();!(s=o.n()).done;){for(l=u(s.value,2),c=l[0],d=l[1],h=d.inputs&&d.inputs[0]&&d.inputs[0].shape?ta(d.inputs[0].shape):[1,64,64,3],p=d.inputs&&d.inputs[0]&&d.inputs[0].dtype?d.inputs[0].dtype:"float32",f=0;f<h.length;f++)-1===h[f]&&(h[f]=0===f?1:64);m=Wg(h,p);try{g=d.execute(m),i.push(c),Array.isArray(g)?g.forEach((function(e){return jh(e)})):jh(g)}catch(QIe){pa("compile fail model:",c)}jh(m)}}catch(b){o.e(b)}finally{o.f()}return e.next=11,r.checkCompileCompletionAsync();case 11:v=e.sent,r.getUniformLocations(),pa("compile pass models:",i),pa("compile pass kernels:",v.length),Zi().set("ENGINE_COMPILE_ONLY",!1),(y=Lh().state.numTensors)-a>0&&pa("tensor leak:",y-a);case 18:case"end":return e.stop()}}),e)}))),pie.apply(this,arguments)}function fie(e,t){return mie.apply(this,arguments)}function mie(){return mie=Mr(Nr().mark((function e(t,n){var r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ma(),t.state="warmup",n&&(t.config=va(t.config,n)),t.config.warmup&&0!==t.config.warmup.length&&"none"!==t.config.warmup){e.next=5;break}return e.abrupt("return",{face:[],body:[],hand:[],gesture:[],object:[],performance:t.performance,timestamp:ma(),persons:[],error:null});case 5:return e.abrupt("return",new Promise(function(){var e=Mr(Nr().mark((function e(n){var a,i;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hie(t.models);case 2:return e.next=4,cie(t);case 4:a=e.sent,i=ma(),t.config.debug&&pa("warmup",t.config.warmup,Math.round(i-r),"ms"),t.emit("warmup"),n(a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),mie.apply(this,arguments)}var gie=function(){function e(t){var n,r=this;Jr(this,e),ua(this,"version"),ua(this,"config"),ua(this,"result"),ua(this,"state"),ua(this,"process"),ua(this,"tf"),ua(this,"env"),ua(this,"draw"),ua(this,"models"),ua(this,"events"),ua(this,"faceTriangulation"),ua(this,"faceUVMap"),ua(this,"performance"),da(this,Qae,void 0),da(this,$ae,void 0),da(this,eie,void 0),ua(this,"gl"),ua(this,"analyze",(function(){if(ca(r,$ae)){var e=r.tf.engine().state.numTensors,t=ca(r,Qae);ha(r,Qae,e);for(var n=e-t,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];0!==n&&pa.apply(void 0,i.concat([n]))}})),da(this,tie,(function(e){if(!ca(r,eie))return null;if(!e)return"input is not defined";if(r.env.node&&!(e instanceof sc))return"input must be a tensor";try{r.tf.getBackend()}catch(QIe){return"backend not loaded"}return null})),ua(this,"similarity",Kae),ua(this,"distance",qae),ua(this,"match",Zae),ua(this,"emit",(function(e){var t;r.events&&r.events.dispatchEvent&&(null==(t=r.events)||t.dispatchEvent(new Event(e)))})),this.env=Z7;var a,i=((null==(n=_7)?void 0:n.tfjs)||af).replace(/-(.*)/,"");ya.wasmPath="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm@".concat(i,"/dist/"),ya.modelBasePath=Z7.browser?"../models/":"file://models/",ya.backend=Z7.browser?"humangl":"tensorflow",this.version=r6,Object.defineProperty(this,"version",{value:r6}),this.config=JSON.parse(JSON.stringify(ya)),Object.seal(this.config),this.config.cacheModels="undefined"!==typeof indexedDB,t&&(this.config=va(this.config,t)),a=this.config,J7.cacheModels=a.cacheModels,J7.verbose=a.debug,J7.modelBasePath=a.modelBasePath,this.tf=ba,this.state="idle",ha(this,Qae,0),ha(this,$ae,!1),ha(this,eie,!1),this.performance={},this.events="undefined"!==typeof EventTarget?new EventTarget:void 0,this.models=new Wre,this.draw={options:lae,canvas:function(e,t){return Nae(e,t)},face:function(e,t,n){return gae(e,t,n)},body:function(e,t,n){return yae(e,t,n)},hand:function(e,t,n){return xae(e,t,n)},gesture:function(e,t,n){return Sae(e,t,n)},object:function(e,t,n){return wae(e,t,n)},person:function(e,t,n){return Eae(e,t,n)},all:function(e,t,n){return Mae(e,t,n)}},this.result={face:[],body:[],hand:[],gesture:[],object:[],performance:{},timestamp:0,persons:[],error:null},this.process={tensor:null,canvas:null},this.faceTriangulation=Nee,this.faceUVMap=_ee,this.gl=Xre,this.emit("create")}return $r(e,[{key:"reset",value:function(){var e=this.config.backend;this.config=JSON.parse(JSON.stringify(ya)),this.config.backend=e}},{key:"validate",value:function(e){return ga(ya,e||this.config)}},{key:"now",value:function(){return ma()}},{key:"image",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return U7(e,this.config,t)}},{key:"segmentation",value:function(){var e=Mr(Nr().mark((function e(t,n){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zre(t,n,this.config));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"enhance",value:function(e){return Lee(e)}},{key:"compare",value:function(e,t){return function(e,t,n){return Y7.apply(this,arguments)}(this.config,e,t)}},{key:"init",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jre(this,!0);case 2:return e.next=4,this.tf.ready();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Mr(Nr().mark((function e(t){var n,r,a;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state="load",n=ma(),r=Object.values(this.models).filter((function(e){return e})).length,t&&(this.config=va(this.config,t)),!this.env.initial){e.next=14;break}return this.config.debug&&pa("version: ".concat(this.version)),this.config.debug&&pa("tfjs version: ".concat(this.tf.version["tfjs-core"])),e.next=9,Jre(this);case 9:if(e.sent){e.next=11;break}pa("error: backend check failed");case 11:return e.next=13,Gh();case 13:this.env.browser&&(this.config.debug&&pa("configuration:",this.config),this.config.debug&&pa("environment:",this.env),this.config.debug&&pa("tf flags:",this.tf.ENV.flags));case 14:return e.next=16,Vre(this);case 16:if(this.env.initial&&this.config.debug&&pa("tf engine state:",this.tf.engine().state.numBytes,"bytes",this.tf.engine().state.numTensors,"tensors"),this.env.initial=!1,Object.values(this.models).filter((function(e){return e})).length===r){e.next=23;break}return e.next=22,Ure(this);case 22:this.emit("load");case 23:(a=Math.trunc(ma()-n))>(this.performance.loadModels||0)&&(this.performance.loadModels=this.env.perfadd?(this.performance.loadModels||0)+a:a);case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.result;return Xae(e,this.config)}},{key:"warmup",value:function(){var e=Mr(Nr().mark((function e(t){var n,r,a;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ma(),e.next=3,fie(this,t);case 3:return r=e.sent,a=ma(),this.performance.warmup=Math.trunc(a-n),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"profile",value:function(){var e=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,u,l,c,d,h,p=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tf.profile((function(){return p.detect(t,n)}));case 2:r=e.sent,a={},i=ea(r.kernels);try{for(i.s();!(o=i.n()).done;)s=o.value,a[s.name]?a[s.name]+=s.kernelTimeMs:a[s.name]=s.kernelTimeMs}catch(f){i.e(f)}finally{i.f()}for(u=[],Object.entries(a).forEach((function(e){return u.push({name:e[0],ms:e[1]})})),u.sort((function(e,t){return t.ms-e.ms})),u.length=20,l={},c=0,d=u;c<d.length;c++)h=d[c],l[h.name]=h.ms;return e.abrupt("return",l);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"detect",value:function(){var e=Mr(Nr().mark((function e(t,n){var r=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state="detect",e.abrupt("return",new Promise(function(){var e=Mr(Nr().mark((function e(a){var i,o,s,l,c,d,h,p,f,m,g,v,y,b,x,A,w,k,S,C,I,E,T,N,_,M,R,O,P,F,D,L,z,B,W,j;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.state="config",r.config=va(r.config,n),r.state="check",(N=ca(r,tie).call(r,t))&&(pa(N,t),r.emit("error"),a({face:[],body:[],hand:[],gesture:[],object:[],performance:r.performance,timestamp:ma(),persons:[],error:N})),_=ma(),e.next=8,Jre(r);case 8:return e.next=10,r.load();case 10:return T=ma(),r.state="image",e.next=14,U7(t,r.config);case 14:if(M=e.sent,r.process=M,r.performance.inputProcess=r.env.perfadd?(r.performance.inputProcess||0)+Math.trunc(ma()-T):Math.trunc(ma()-T),r.analyze("Get Image:"),M.tensor){e.next=23;break}return r.config.debug&&pa("could not convert input to tensor"),r.emit("error"),a({face:[],body:[],hand:[],gesture:[],object:[],performance:r.performance,timestamp:ma(),persons:[],error:"could not convert input to tensor"}),e.abrupt("return");case 23:return r.emit("image"),T=ma(),e.next=27,X7(r.config,M.tensor);case 27:if(r.config.skipAllowed=e.sent,r.performance.totalFrames||(r.performance.totalFrames=0),r.performance.cachedFrames||(r.performance.cachedFrames=0),r.performance.totalFrames++,r.config.skipAllowed&&r.performance.cachedFrames++,r.performance.cacheCheck=r.env.perfadd?(r.performance.cacheCheck||0)+Math.trunc(ma()-T):Math.trunc(ma()-T),r.analyze("Check Changed:"),R=[],O=[],P=[],F=[],r.state="detect:face",!r.config.async){e.next=44;break}R=r.config.face.enabled?Bae(r,M.tensor):[],r.performance.face&&delete r.performance.face,e.next=54;break;case 44:if(T=ma(),!r.config.face.enabled){e.next=51;break}return e.next=48,Bae(r,M.tensor);case 48:e.t0=e.sent,e.next=52;break;case 51:e.t0=[];case 52:R=e.t0,r.performance.face=r.env.perfadd?(r.performance.face||0)+Math.trunc(ma()-T):Math.trunc(ma()-T);case 54:if(!r.config.async||-1!==r.config.body.maxDetected&&-1!==r.config.hand.maxDetected){e.next=58;break}return e.next=57,R;case 57:R=e.sent;case 58:if(r.analyze("Start Body:"),r.state="detect:body",D=-1===r.config.body.maxDetected?va(r.config,{body:{maxDetected:r.config.face.enabled?1*R.length:1}}):r.config,!r.config.async){e.next=66;break}(null==(i=r.config.body.modelPath)?void 0:i.includes("posenet"))?O=r.config.body.enabled?Mre(M.tensor,D):[]:(null==(o=r.config.body.modelPath)?void 0:o.includes("blazepose"))?O=r.config.body.enabled?r9(M.tensor,D):[]:(null==(s=r.config.body.modelPath)?void 0:s.includes("efficientpose"))?O=r.config.body.enabled?T9(M.tensor,D):[]:(null==(l=r.config.body.modelPath)?void 0:l.includes("movenet"))&&(O=r.config.body.enabled?Zne(M.tensor,D):[]),r.performance.body&&delete r.performance.body,e.next=110;break;case 66:if(T=ma(),!(null==(c=r.config.body.modelPath)?void 0:c.includes("posenet"))){e.next=78;break}if(!r.config.body.enabled){e.next=74;break}return e.next=71,Mre(M.tensor,D);case 71:e.t1=e.sent,e.next=75;break;case 74:e.t1=[];case 75:O=e.t1,e.next=109;break;case 78:if(!(null==(d=r.config.body.modelPath)?void 0:d.includes("blazepose"))){e.next=89;break}if(!r.config.body.enabled){e.next=85;break}return e.next=82,r9(M.tensor,D);case 82:e.t2=e.sent,e.next=86;break;case 85:e.t2=[];case 86:O=e.t2,e.next=109;break;case 89:if(!(null==(h=r.config.body.modelPath)?void 0:h.includes("efficientpose"))){e.next=100;break}if(!r.config.body.enabled){e.next=96;break}return e.next=93,T9(M.tensor,D);case 93:e.t3=e.sent,e.next=97;break;case 96:e.t3=[];case 97:O=e.t3,e.next=109;break;case 100:if(!(null==(p=r.config.body.modelPath)?void 0:p.includes("movenet"))){e.next=109;break}if(!r.config.body.enabled){e.next=107;break}return e.next=104,Zne(M.tensor,D);case 104:e.t4=e.sent,e.next=108;break;case 107:e.t4=[];case 108:O=e.t4;case 109:r.performance.body=r.env.perfadd?(r.performance.body||0)+Math.trunc(ma()-T):Math.trunc(ma()-T);case 110:if(r.analyze("End Body:"),r.analyze("Start Hand:"),r.state="detect:hand",L=-1===r.config.hand.maxDetected?va(r.config,{hand:{maxDetected:r.config.face.enabled?2*R.length:1}}):r.config,!r.config.async){e.next=119;break}(null==(m=null==(f=r.config.hand.detector)?void 0:f.modelPath)?void 0:m.includes("handdetect"))?P=r.config.hand.enabled?Kte(M.tensor,L):[]:(null==(v=null==(g=r.config.hand.detector)?void 0:g.modelPath)?void 0:v.includes("handtrack"))&&(P=r.config.hand.enabled?yne(M.tensor,L):[]),r.performance.hand&&delete r.performance.hand,e.next=141;break;case 119:if(T=ma(),!(null==(b=null==(y=r.config.hand.detector)?void 0:y.modelPath)?void 0:b.includes("handdetect"))){e.next=131;break}if(!r.config.hand.enabled){e.next=127;break}return e.next=124,Kte(M.tensor,L);case 124:e.t5=e.sent,e.next=128;break;case 127:e.t5=[];case 128:P=e.t5,e.next=140;break;case 131:if(!(null==(A=null==(x=r.config.hand.detector)?void 0:x.modelPath)?void 0:A.includes("handtrack"))){e.next=140;break}if(!r.config.hand.enabled){e.next=138;break}return e.next=135,yne(M.tensor,L);case 135:e.t6=e.sent,e.next=139;break;case 138:e.t6=[];case 139:P=e.t6;case 140:r.performance.hand=r.env.perfadd?(r.performance.hand||0)+Math.trunc(ma()-T):Math.trunc(ma()-T);case 141:if(r.analyze("End Hand:"),r.analyze("Start Object:"),r.state="detect:object",!r.config.async){e.next=149;break}(null==(w=r.config.object.modelPath)?void 0:w.includes("nanodet"))?F=r.config.object.enabled?sre(M.tensor,r.config):[]:(null==(k=r.config.object.modelPath)?void 0:k.includes("centernet"))&&(F=r.config.object.enabled?m9(M.tensor,r.config):[]),r.performance.object&&delete r.performance.object,e.next=171;break;case 149:if(T=ma(),!(null==(S=r.config.object.modelPath)?void 0:S.includes("nanodet"))){e.next=161;break}if(!r.config.object.enabled){e.next=157;break}return e.next=154,sre(M.tensor,r.config);case 154:e.t7=e.sent,e.next=158;break;case 157:e.t7=[];case 158:F=e.t7,e.next=170;break;case 161:if(!(null==(C=r.config.object.modelPath)?void 0:C.includes("centernet"))){e.next=170;break}if(!r.config.object.enabled){e.next=168;break}return e.next=165,m9(M.tensor,r.config);case 165:e.t8=e.sent,e.next=169;break;case 168:e.t8=[];case 169:F=e.t8;case 170:r.performance.object=r.env.perfadd?(r.performance.object||0)+Math.trunc(ma()-T):Math.trunc(ma()-T);case 171:if(r.analyze("End Object:"),r.state="detect:await",!r.config.async){e.next=182;break}return e.next=176,Promise.all([R,O,P,F]);case 176:z=e.sent,B=u(z,4),R=B[0],O=B[1],P=B[2],F=B[3];case 182:r.state="detect:gesture",W=[],r.config.gesture.enabled&&(T=ma(),W=[].concat(ta(jae(R)),ta(Wae(O)),ta(Hae(P)),ta(Vae(R))),r.config.async?r.performance.gesture&&delete r.performance.gesture:r.performance.gesture=r.env.perfadd?(r.performance.gesture||0)+Math.trunc(ma()-T):Math.trunc(ma()-T)),r.performance.total=r.env.perfadd?(r.performance.total||0)+Math.trunc(ma()-_):Math.trunc(ma()-_),j=(null==(E=null==(I=r.process)?void 0:I.tensor)?void 0:E.shape)||[],e.t9=R,e.t10=O,e.t11=P,e.t12=W,e.t13=F,e.t14=r.performance,e.t15=r.process.canvas,e.t16=Date.now(),r.result={face:e.t9,body:e.t10,hand:e.t11,gesture:e.t12,object:e.t13,performance:e.t14,canvas:e.t15,timestamp:e.t16,error:null,get persons(){return Jae(R,O,P,W,j)}},jh(M.tensor),r.emit("detect"),r.state="idle",a(r.result);case 200:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();Qae=new WeakMap,$ae=new WeakMap,eie=new WeakMap,tie=new WeakMap;var vie=n(6207),yie=n.n(vie),bie=n(1527),xie=n.n(bie),Aie={alertStudySeconds:1500,alertRestSeconds:300,enableNotification:!1,notificationIntervalSeconds:60,notificationIntervalMultiplier:2,tempMissingSeconds:60,history:{maxLocalStorageTimeSlot:100,showPomodoroHistory:!0,onlyShowToday:!0},faceRecognition:{detectionInterval:5,scoreThreshold:.95,showFaceRecognitionStatus:!0,showFaceRecognitionCanvas:!1,showCameraPreview:!1},enableDetection:!1},wie=e.createContext(Aie),kie=function(){function e(t,n){Jr(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return $r(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),Sie=function(){function e(){Jr(this,e)}return $r(e,[{key:"refCount",value:function(e){return Cie("refCount")}},{key:"incRef",value:function(e){return Cie("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return Cie("time")}},{key:"read",value:function(e){return Cie("read")}},{key:"readSync",value:function(e){return Cie("readSync")}},{key:"readToGPU",value:function(e,t){return Cie("readToGPU")}},{key:"numDataIds",value:function(){return Cie("numDataIds")}},{key:"disposeData",value:function(e,t){return Cie("disposeData")}},{key:"write",value:function(e,t,n){return Cie("write")}},{key:"move",value:function(e,t,n,r,a){return Cie("move")}},{key:"memory",value:function(){return Cie("memory")}},{key:"floatPrecision",value:function(){return Cie("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return Cie("dispose")}}]),e}();function Cie(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function Iie(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function Eie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Iie(Mie(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function Tie(e){Iie(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function Nie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||Die(e)&&!n)for(var r=0;r<e.length;++r)Nie(e[r],t,n);else t.push(e);return t}function _ie(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Mie(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Rie(e){return e%1===0}function Oie(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Pie(e,t){var n=t.length;return e=null==e?t.map((function(e,t){return t})):[].concat(e),Iie(e.every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),Iie(e.every((function(e){return Rie(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function Fie(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function Die(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function Lie(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function zie(e){return"string"===typeof e||e instanceof String}function Bie(e){return Array.isArray(e)?Bie(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":"number"===typeof e?"float32":zie(e)?"string":function(e){return"boolean"===typeof e}(e)?"bool":"float32"}function Wie(e){return!!(e&&e.constructor&&e.call&&e.apply)}function jie(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Vie(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var s=t[0],u=t.slice(1),l=u.reduce((function(e,t){return e*t}))*(r?2:1),c=0;c<s;c++)a[c]=Vie(e+c*l,u,n,r);return a}function Hie(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return Vie(0,e,t,n)}function Uie(e,t){for(var n=Gie(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Gie(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function Xie(e){e.forEach((function(t){Iie(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function qie(e){return e&&e.then&&"function"===typeof e.then}var Yie="tfjsflags",Kie=function(){function e(t){Jr(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Zie,this.populateURLFlags()}return $r(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(Qie().getBool("IS_TEST")||Qie().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];Qie().getBool("IS_TEST")||Qie().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(qie(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(Yie in t)t.tfjsflags.split(",").forEach((function(t){var n=u(t.split(":"),2),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(r,a)}))}}}]),e}();function Zie(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return Jie(t,r[0],r[1]),r.join("=")})),t}function Jie(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function Qie(){return eoe}var $ie,eoe=null;function toe(){if(null==$ie){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}$ie=e}return $ie}function noe(e,t){var n=function(){var e=toe();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var roe="Add",aoe="AddN",ioe="ArgMax",ooe="AvgPool",soe="BatchMatMul",uoe="Cast",loe="ClipByValue",coe="Concat",doe="Conv2D",hoe="Conv2DBackpropInput",poe="Cumprod",foe="Cumsum",moe="CropAndResize",goe="DepthToSpace",voe="DepthwiseConv2dNative",yoe="RealDiv",boe="ExpandDims",xoe="Fill",Aoe="FlipLeftRight",woe="FloorDiv",koe="FusedBatchNorm",Soe="GatherNd",Coe="Greater",Ioe="GreaterEqual",Eoe="Identity",Toe="LeakyRelu",Noe="LessEqual",_oe="LogicalAnd",Moe="Max",Roe="MaxPool",Ooe="Mean",Poe="Min",Foe="Minimum",Doe="MirrorPad",Loe="Multiply",zoe="NotEqual",Boe="NonMaxSuppressionV3",Woe="NonMaxSuppressionV4",joe="NonMaxSuppressionV5",Voe="OneHot",Hoe="Pack",Uoe="PadV2",Goe="Prelu",Xoe="Prod",qoe="Range",Yoe="Relu",Koe="Reshape",Zoe="ResizeNearestNeighbor",Joe="ResizeBilinear",Qoe="Relu6",$oe="Reverse",ese="Round",tse="ScatterNd",nse="Select",rse="Slice",ase="Sigmoid",ise="Sqrt",ose="Sum",sse="SplitV",use="Softmax",lse="SparseFillEmptyRows",cse="SparseReshape",dse="SparseSegmentMean",hse="SparseSegmentSum",pse="SquaredDifference",fse="StridedSlice",mse="StringSplit",gse="Tile",vse="TopK",yse="Transform",bse="Transpose",xse="Unpack",Ase="ZerosLike",wse="Step",kse="RotateWithOffset",Sse="_FusedMatMul",Cse="FusedConv2D",Ise="FusedDepthwiseConv2D";function Ese(){var e;Qie().getBool("IS_TEST")||Qie().getBool("PROD")||(e=console).warn.apply(e,arguments)}var Tse=noe("kernelRegistry",(function(){return new Map})),Nse=noe("gradRegistry",(function(){return new Map}));function _se(e,t){var n=Pse(e,t);return Tse.get(n)}function Mse(e){return Nse.get(e)}function Rse(e){for(var t=Tse.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=u(i,2),s=o[0],l=o[1];u(s.split("_"),1)[0]===e&&n.push(l)}return n}function Ose(e){var t=e.kernelName,n=e.backendName,r=Pse(t,n);Tse.has(r)&&Ese("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),Tse.set(r,e)}function Pse(e,t){return"".concat(t,"_").concat(e)}var Fse=n(9849),Dse=n.n(Fse)()||Fse;function Lse(e){return Dse.fromString(e,!0,16)}Lse("c3a5c85c97cb3127"),Lse("b492b66fbe98f273"),Lse("9ae16a3b2f90404f");function zse(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Nie(e)),Qie().getBool("DEBUG")&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function Bse(){return Qie().platform.now()}function Wse(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Qie().platform.encode(e,t)}function jse(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",Qie().platform.decode(e,t)}var Vse=function(){function e(t,n){Jr(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new Hse)}return $r(e,[{key:"profileKernel",value:function(e,t,n){var r,a,i=function(){r=n()},o=Bse();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();var s,u=ea(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(d){u.e(d)}finally{u.f()}a=Promise.resolve({kernelMs:Bse()-o})}if(Qie().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var l=function(t){var n=r[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},c=0;c<r.length;c++)l(c);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var Hse=function(){function e(){Jr(this,e)}return $r(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"===typeof r?Oie("".concat(r,"ms"),9):r.error,s=Oie(e,25),u=t.rank,l=t.size,c=Oie(t.shape.toString(),14),d="";for(var h in a){var p=a[h];if(null!=p){var f=p.shape||t.shape,m=f.length;d+="".concat(h,": ").concat(m,"D ").concat(m>0?f:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(c,"\t%c").concat(l,"\t%c").concat(d,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function Use(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var l in u){for(var c=u[l],d=!1,h=0;h<t.length;h++)if(r[c.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),d=!0,a[s.id]=!0;break}if(d)break}}var p={};p[n.id]=!0;for(var f={},m=e.length-1;m>=0;m--)for(var g=e[m],v=g.inputs,y=0;y<g.outputs.length;y++)if(p[g.outputs[y].id]){for(var b in v)p[v[b].id]=!0,f[g.id]=!0;break}for(var x=[],A=0;A<e.length;A++){var w=e[A];if(a[w.id]&&f[w.id]){var k={};for(var S in w.inputs){var C=w.inputs[S];r[C.id]&&(k[S]=C)}var I=Object.assign({},w);I.inputs=k,I.outputs=w.outputs,x.push(I)}}return x}function Gse(e,t,n,r){for(var a=function(a){var i=t[a],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));var s=i.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var a=n((function(){return s[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var o=i.inputs[t];if(!Mie(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=a;else{var u=e[o.id];e[o.id]=r(u,a),u.dispose()}};for(var l in i.inputs)u(l)},i=t.length-1;i>=0;i--)a(i)}function Xse(e,t,n,r){var a=jie(t),i=function(e,t,n,r){var a=_ie(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?Zse(e):e;if(s>1)for(var l=0;l<a/i;l++)for(var c=l*i,d=0;d<i;d++)o[d]=Math.max(o[d],qse(u[c+d],0,n).length);return o}(e,t,n,a),o=t.length,s=Kse(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function qse(e,t,n){return Oie(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):zie(e)?"'".concat(e,"'"):"bool"===n?Yse(e):parseFloat(e.toFixed(7)).toString(),t)}function Yse(e){return 0===e?"false":"true"}function Kse(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u){if("complex64"===n){var l=Zse(e);return[qse(l[0],0,n)]}return"bool"===n?[Yse(e[0])]:[e[0].toString()]}if(1===u){if(s>20){var c=3*o,d=Array.from(e.slice(0,c)),h=Array.from(e.slice((s-3)*o,s*o));return"complex64"===n&&(d=Zse(d),h=Zse(h)),["["+d.map((function(e,t){return qse(e,a[t],n)})).join(", ")+", ..., "+h.map((function(e,t){return qse(e,a[s-3+t],n)})).join(", ")+"]"]}var p="complex64"===n?Zse(e):Array.from(e);return["["+p.map((function(e,t){return qse(e,a[t],n)})).join(", ")+"]"]}var f=t.slice(1),m=r.slice(1),g=r[0]*o,v=[];if(s>20){for(var y=0;y<3;y++){var b=y*g,x=b+g;v.push.apply(v,ta(Kse(e.slice(b,x),f,n,m,a,!1)))}v.push("...");for(var A=s-3;A<s;A++){var w=A*g,k=w+g;v.push.apply(v,ta(Kse(e.slice(w,k),f,n,m,a,A===s-1)))}}else for(var S=0;S<s;S++){var C=S*g,I=C+g;v.push.apply(v,ta(Kse(e.slice(C,I),f,n,m,a,S===s-1)))}var E=2===u?",":"";v[0]="["+v[0]+E;for(var T=1;T<v.length-1;T++)v[T]=" "+v[T]+E;for(var N=",\n",_=2;_<u;_++)N+="\n";return v[v.length-1]=" "+v[v.length-1]+"]"+(i?"":N),v}function Zse(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Jse=function(){function e(t,n,r){var a=this;if(Jr(this,e),this.dtype=n,this.shape=t.slice(),this.size=_ie(t),null!=r){var i=r.length;Iie(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Fie(n,this.size),this.strides=jie(t)}return $r(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),Iie(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],l=0;l<t.length-1;++l)u+=this.strides[l]*t[l];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return Qse().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),Qse=null,$se=null;var eue=function(){function e(t,n,r,a){Jr(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=_ie(t),this.strides=jie(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return $r(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=Mr(Nr().mark((function e(){var t;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",$se.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return $se.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=Mr(Nr().mark((function e(){var t;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Hie(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return Hie(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=Mr(Nr().mark((function e(){var t,n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=Qse().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return jse(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),Qse().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=Qse().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return jse(e)}))}catch(Mo){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=Mr(Nr().mark((function e(){var t;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,Qse().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(Qse().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return $se.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),$se.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return Xse(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),$se.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),Qse().makeVariable(this,e,t,n)}}]),e}();Object.defineProperty(eue,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),noe("Tensor",(function(){return eue}));var tue,nue,rue,aue,iue,oue=function(e){Kr(n,e);var t=Zr(n);function n(e,r,a,i){var o;return Jr(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return $r(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!Mie(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));Qse().disposeTensor(this),this.dataId=e.dataId,Qse().incRef(this,null)}},{key:"dispose",value:function(){Qse().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(eue);Object.defineProperty(oue,Symbol.hasInstance,{value:function(e){return e instanceof eue&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(tue||(tue={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(nue||(nue={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(rue||(rue={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(aue||(aue={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(iue||(iue={}));var sue={float32:aue,int32:nue,bool:rue,complex64:iue};function uue(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return sue[e][t]}function lue(e,t){if(e.dtype===t.dtype)return[e,t];var n=uue(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function cue(e){var t=[];return due(e,t,new Set),t}function due(e,t,n){if(null!=e)if(e instanceof eue)t.push(e);else if(r=e,Array.isArray(r)||"object"===typeof r){var r,a=e;for(var i in a){var o=a[i];n.has(o)||(n.add(o),due(o,t,n))}}}function hue(e){return null!=e.kernelName}var pue=function(){function e(){Jr(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return $r(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),fue=function(){function e(t){Jr(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new pue}return $r(e,[{key:"ready",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(Ese("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=Mr(Nr().mark((function e(t){var n,r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new Vse(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;Rse(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;Rse(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof Sie||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,Ese("Initialization of backend ".concat(e," failed")),Ese(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return Ese("Initialization of backend ".concat(e," failed")),Ese(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=vue.runKernel(Eoe,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return vue.runKernel(uoe,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=_se(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var l=hue(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(hue(e)){var c=e.kernelName,d=e.inputs,h=e.attrs;null==this.backendName&&this.backend;var p=_se(c,this.backendName);Iie(null!=p,(function(){return"Cannot find registered kernel '".concat(c,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=p.kernelFunc({inputs:d,attrs:h,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t);var n=t.map((function(e){return null!=e.rank?e:a.makeTensorFromTensorInfo(e)}));if(o){var s=a.getTensorsForGradient(c,d,n);i=a.saveTensorsForBackwardMode(s)}return n}}else{var f=e.forwardFunc,m=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return f(a.backend,m)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t),t}}var g,v=e.inputs,y=e.attrs,b=hue(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(g=a.profiler.profileKernel(l,v,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(g),t=g.outputs):t=n()})),o&&this.addTapeNode(l,v,t,b,i,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(v).map((function(e){return null!=v[e]?v[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:g.timeMs,extraInfo:g.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=Mse(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(Iie(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&zie(e[0])&&(a=e.map((function(e){return Wse(e)})));var i=r.write(a,t,n),o=new eue(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}},{key:"makeTensorFromTensorInfo",value:function(e,t){var n=e.dataId,r=e.shape,a=e.dtype,i=new eue(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new oue(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*Lie(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof oue||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*Lie(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=Mr(Nr().mark((function e(t){var n,r,a,i,o;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,ta(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=ea(this.state.activeProfile.kernels),e.prev=12,a.s();case 14:if((i=a.n()).done){e.next=24;break}return o=i.value,e.next=18,o.kernelTimeMs;case 18:return o.kernelTimeMs=e.sent,e.next=21,o.extraInfo;case 21:o.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=Mse(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=Gie(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=cue(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Iie(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));Iie(i instanceof eue,(function(){return"The result y returned by f() must be a tensor."}));var o=Use(this.state.activeTape,t,i);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?mue(i.shape):n,Gse(e,o,(function(e){return r.tidy(e)}),yue);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=ea(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:i,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return Iie(Wie(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;Iie(r.every((function(e){return e instanceof eue})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(e,t){o[t]=e}));var s=function(t,n){return Iie((i=e.apply(void 0,[].concat(r,[n]))).value instanceof eue,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),Iie(Wie(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},u=function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];Iie(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),Iie(a.every((function(e){return e instanceof eue})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o};return t.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=Mr(Nr().mark((function e(t){var n,r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bse(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=Bse()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new pue,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function mue(e){var t=Uie(_ie(e),"float32");return vue.makeTensor(t,e,"float32")}function gue(){var e=toe();if(null==e._tfengine){var t=new Kie(e);e._tfengine=new fue(t)}return function(e){eoe=e}(e._tfengine.ENV),function(e){Qse=e}((function(){return e._tfengine})),e._tfengine}fue.nextTensorId=0,fue.nextVariableId=0;var vue=gue();function yue(e,t){var n={a:e,b:t};return vue.runKernel(roe,n)}var bue=Qie();bue.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),bue.registerFlag("IS_BROWSER",(function(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope})),bue.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),bue.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),bue.registerFlag("PROD",(function(){return!1})),bue.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return bue.getBool("DEBUG")})),bue.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),bue.registerFlag("IS_TEST",(function(){return!1})),bue.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),bue.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),bue.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1}));var xue="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function Aue(e){return xue?Buffer.byteLength(e):new Blob([e]).size}function wue(e){if(xue)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function kue(e){if(xue){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function Sue(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function Cue(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function Iue(e,t){return Eue.apply(this,arguments)}function Eue(){return Eue=Mr(Nr().mark((function e(t,n){var r,a,i,o,s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null==t.weightsManifest){e.next=11;break}return e.next=5,n(t.weightsManifest);case 5:a=e.sent,i=u(a,2),o=i[0],s=i[1],r.weightSpecs=o,r.weightData=s;case 11:return null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)}))),Eue.apply(this,arguments)}function Tue(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Aue(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Aue(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var Nue=function(){function e(){Jr(this,e),this.saveRouters=[],this.loadRouters=[]}return $r(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),_ue="tensorflowjs",Mue="models_store",Rue="model_info_store";function Oue(){if(!Qie().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Pue(e){var t=e.result;t.createObjectStore(Mue,{keyPath:"modelPath"}),t.createObjectStore(Rue,{keyPath:"modelPath"})}var Fue=function(){function e(t){if(Jr(this,e),this.indexedDB=Oue(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return $r(e,[{key:"save",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(_ue,1);a.onupgradeneeded=function(){return Pue(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(Mue,"readonly"),s=o.objectStore(Mue).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,l=Tue(t),c=i.transaction(Rue,"readwrite"),d=c.objectStore(Rue),h=d.put({modelPath:n.modelPath,modelArtifactsInfo:l});h.onsuccess=function(){var a=(u=i.transaction(Mue,"readwrite")).objectStore(Mue).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l});a.onsuccess=function(){return e({modelArtifactsInfo:l})},a.onerror=function(e){var t=(d=c.objectStore(Rue)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},h.onerror=function(e){return i.close(),r(h.error)},c.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();Fue.URL_SCHEME="indexeddb://";var Due=function(e){return Qie().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Fue.URL_SCHEME)?(t=e.slice(Fue.URL_SCHEME.length),new Fue(t)):null;var t};Nue.registerSaveRouter(Due),Nue.registerLoadRouter(Due);var Lue=function(){function e(){Jr(this,e),this.indexedDB=Oue()}return $r(e,[{key:"listModels",value:function(){var e=Mr(Nr().mark((function e(){var t=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(_ue,1);r.onupgradeneeded=function(){return Pue(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(Rue,"readonly"),i=a.objectStore(Rue).getAll();i.onsuccess=function(){var t,n={},r=ea(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Mr(Nr().mark((function e(t){var n=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(Fue.URL_SCHEME)?r.slice(Fue.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(_ue,1);a.onupgradeneeded=function(){return Pue(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(Rue,"readwrite"),s=o.objectStore(Rue),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),o=function(){var a=(n=i.transaction(Mue,"readwrite")).objectStore(Mue).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),zue="/",Bue="tensorflowjs_models",Wue="info",jue="model_topology",Vue="weight_specs",Hue="weight_data",Uue="model_metadata";function Gue(e){return{info:[Bue,e,Wue].join(zue),topology:[Bue,e,jue].join(zue),weightSpecs:[Bue,e,Vue].join(zue),weightData:[Bue,e,Hue].join(zue),modelMetadata:[Bue,e,Uue].join(zue)}}function Xue(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function que(e){var t=e.split(zue);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(zue)}var Yue=function(){function e(t){if(Jr(this,e),!Qie().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=Gue(this.modelPath)}return $r(e,[{key:"save",value:function(){var e=Mr(Nr().mark((function e(t){var n,r,a,i;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=Tue(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,wue(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),Xue(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r,a,i,o,s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=kue(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();Yue.URL_SCHEME="localstorage://";var Kue=function(e){return Qie().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Yue.URL_SCHEME)?(t=e.slice(Yue.URL_SCHEME.length),new Yue(t)):null;var t};Nue.registerSaveRouter(Kue),Nue.registerLoadRouter(Kue);var Zue=function(){function e(){Jr(this,e),Iie(Qie().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Iie("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return $r(e,[{key:"listModels",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r,a,i,o;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=Bue+zue,r=zue+Wue,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=que(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Mr(Nr().mark((function e(t){var n,r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(Yue.URL_SCHEME)?a.slice(Yue.URL_SCHEME.length):a,n=Gue(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),Xue(n),e.abrupt("return",r);case 7:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Jue="://",Que=function(){function e(){Jr(this,e),this.managers={}}return $r(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){Iie(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(Jue)&&(t=t.slice(0,t.indexOf(Jue))),Iie(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Iie(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();var $ue=function(){function e(){Jr(this,e)}return $r(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if(Qie().get("IS_BROWSER")){Qie().setPlatform("browser",new $ue);try{Que.registerManager(Yue.URL_SCHEME,new Zue)}catch($Ie){}try{Que.registerManager(Fue.URL_SCHEME,new Lue)}catch($Ie){}}var ele,tle=function(){return n(5410)};var nle=function(){function e(){Jr(this,e),this.util=n(8628),this.textEncoder=new this.util.TextEncoder}return $r(e,[{key:"fetch",value:function(e,t){return null!=Qie().global.fetch?Qie().global.fetch(e,t):(null==ele&&(ele=tle()),ele(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();function rle(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",Xie(e),new Jse(e,t,n)}function ale(e,t){var n=e;if(Die(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||Die(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Qie().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&ile(e,r,[]),r}function ile(e,t,n){if(n=n||[],Array.isArray(e)||Die(e)){Iie(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),Iie(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)ile(e[a],r,n.concat(a))}else Iie(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function ole(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function sle(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof eue)return ole(r,e.dtype,t,n),e;var a=Bie(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),ole(r,a,t,n),null==e||!Die(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(i,"'"))}var o=ale(e,a);Die(e)||Array.isArray(e)||(e=[e]);var s=!0,u="string"!==a?zse(e,a):Nie(e,[],s);return vue.makeTensor(u,o,a)}function ule(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return sle(e,"".concat(t,"[").concat(a,"]"),n,r)}))}Qie().get("IS_NODE")&&!Qie().get("IS_BROWSER")&&Qie().setPlatform("node",new nle);function lle(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";var a=function(){vue.startScope(n);try{var e=r.apply(void 0,arguments);return qie(e)&&console.error("Cannot return a Promise inside of tidy."),vue.endScope(e),e}catch(t){throw vue.endScope(null),t}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var cle=lle({cast_:function(e,t){var n=sle(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return vue.runKernel(uoe,r,a)}});var dle=lle({clone_:function(e){var t={x:sle(e,"x","clone","string_or_numeric")};return vue.runKernel(Eoe,t)}});gue();var hle={buffer:rle,cast:cle,clone:dle,print:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};$se=hle;function ple(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var fle=function(){function e(t){if(Jr(this,e),!Qie().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return $r(e,[{key:"save",value:function(){var e=Mr(Nr().mark((function e(t){var n,r,a,i,o,s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=Cue(t,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,o.href=i,e.next=15,ple((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,ple((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:Tue(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();fle.URL_SCHEME="downloads://";function mle(e,t,n,r){!function(e){Iie(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Iie(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),Iie(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),Iie(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function gle(e,t){return vle.apply(this,arguments)}function vle(){return(vle=Mr(Nr().mark((function e(t,n){var r,a,i,o,s,u,l,c,d;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?Qie().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,mle(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0,u=s.map((function(e){return e.arrayBuffer()})),l=.5,c=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,mle(u,n.onProgress,l,c);case 26:e.t1=e.sent;case 27:return d=e.t1,e.abrupt("return",d);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Nue.registerSaveRouter((function(e){return Qie().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(fle.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new fle(e)}(e.slice(fle.URL_SCHEME.length)):null}));var yle=function(){function e(t,n){if(Jr(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(Iie("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=Qie().platform.fetch,Iie(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&Iie(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return $r(e,[{key:"save",value:function(){var e=Mr(Nr().mark((function e(t){var n,r,a,i;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=Cue(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(i=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:Tue(t),responses:[i]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Mr(Nr().mark((function e(){var t,n,r,a,i,o=this;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",Iue(n,(function(e){return o.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=Mr(Nr().mark((function e(t){var n,r,a,i,o,s,l,c,d,h,p,f,m,g,v,y,b,x,A;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=ble(n),a=u(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,l=[],c=ea(t);try{for(c.s();!(d=c.n()).done;)h=d.value,l.push.apply(l,ta(h.weights))}catch($Ie){c.e($Ie)}finally{c.f()}p=[],f=[],m=ea(t);try{for(m.s();!(g=m.n()).done;){v=g.value,y=ea(v.paths);try{for(y.s();!(b=y.n()).done;)x=b.value,null!=this.weightUrlConverter?f.push(this.weightUrlConverter(x)):p.push(s+x+o)}catch($Ie){y.e($Ie)}finally{y.f()}}}catch($Ie){m.e($Ie)}finally{m.f()}if(!this.weightUrlConverter){e.next=19;break}return e.t0=p.push,e.t1=p,e.t2=ta,e.next=16,Promise.all(f);case 16:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 19:return e.next=21,gle(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 21:return A=e.sent,e.abrupt("return",[l,Sue(A)]);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ble(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function xle(e){return null!=e.match(yle.URL_SCHEME_REGEX)}yle.URL_SCHEME_REGEX=/^https?:\/\//;var Ale=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return xle(e)})):xle(e))?wle(e,t):null};function wle(e,t){return new yle(e,t)}Nue.registerSaveRouter(Ale),Nue.registerLoadRouter(Ale);function kle(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(i)}}return n}function Sle(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function Cle(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Ile(e,t,n){var r,a,i=e.shape.length;return(r="number"===typeof t?[t].concat(ta(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){Iie(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"===typeof n?[n].concat(ta(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(Iie(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function Ele(e,t,n,r,a,i,o,s,u){var l;if(null==r?(l=new Array(t.length)).fill(1):l=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var c=!1,d={dims:l.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:l.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u},h=0;h<d.dims;h++)c&&0!==(1<<h&s)&&d.numAddAxisAfterEllipsis++,1<<h&o&&(c=!0);c||(d.ellipsisMask|=1<<d.dims,d.dims++);var p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,p);for(var f=!0,m=!0,g=!0,v=[],y=[],b=0;b<e.length;++b){if(0===p.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(p.shrinkAxisMask&1<<b),A=e[b];if(-1!==A){var w=[p.beginMask&1<<b,p.endMask&1<<b],k=[p.strides[b]>0?0:-1,p.strides[b]>0?A:A-1];if(x&&p.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");g=g&&1===p.strides[b];var S=!!(p.beginMask&1<<b&&p.endMask&1<<b);if(p.beginValid&&p.endValid){if(x){var C=p.begin[b]<0?A+p.begin[b]:p.begin[b];if(p.begin[b]=C,p.end[b]=p.begin[b]+1,C<0||C>=A)throw Error("slice index ".concat(p.begin[b]," of dimension ").concat(b," out of bounds."))}else p.begin[b]=Tle(p.begin[b],0,p.strides[b],A,w,k),p.end[b]=Tle(p.end[b],1,p.strides[b],A,w,k);var I=1===p.strides[b]&&0===p.begin[b]&&p.end[b]===A;f=f&&I,m=m&&(0===b&&1===p.strides[b]||I)}else f=f&&1===p.strides[b]&&S,m=m&&(0===b&&1===p.strides[b]||S);var E=void 0,T=!1;if(p.beginValid&&p.endValid?(E=p.end[b]-p.begin[b],T=!0):x?(E=1,T=!0):S&&A>=0&&(E=p.strides[b]<0?-A:A,T=!0),T){var N=void 0;N=0===E||E<0!==p.strides[b]<0?0:Math.trunc(E/p.strides[b])+(E%p.strides[b]!==0?1:0),v.push(N)}else v.push(-1)}else v.push(x?1:-1)}for(var _=0;_<p.finalShapeGatherIndices.length;++_){var M=p.finalShapeGatherIndices[_];M>=0?y.push(v[M]):-2===M&&y.push(1)}var R=y.filter((function(e,t){return-2!==p.finalShapeGatherIndices[t]}));return{finalShapeSparse:R,finalShape:y,isIdentity:f,sliceDim0:m,isSimpleSlice:g,begin:p.begin,end:p.end,strides:p.strides}}function Tle(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}var Nle=lle({complex_:function(e,t){var n=sle(e,"real","complex"),r=sle(t,"imag","complex");Eie(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return vue.runKernel("Complex",a)}});var _le=lle({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Iie(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=ule(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return dle(n[0]);var r=n,a={axis:t};return vue.runKernel(coe,r,a)}});var Mle=lle({imag_:function(e){var t={input:sle(e,"input","imag")};return vue.runKernel("Imag",t)}});var Rle=lle({real_:function(e){var t={input:sle(e,"input","real")};return vue.runKernel("Real",t)}});var Ole=lle({reshape_:function(e,t){var n={x:sle(e,"x","reshape","string_or_numeric")},r={shape:t};return vue.runKernel(Koe,n,r)}});var Ple=lle({slice_:function(e,t,n){var r=sle(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return vue.runKernel(rse,a,i)}});var Fle=lle({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=sle(e,"x","split"),a={x:r},i={numOrSizeSplits:t,axis:n};return vue.runKernel(sse,a,i)}});function Dle(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=Dle(e,"float32"),r=Dle(e,"float32");return Nle(n,r)}var a=Gie(_ie(e),t);return vue.makeTensor(a,e,t)}var Lle=lle({zerosLike_:function(e){var t={x:sle(e,"x","zerosLike")};return vue.runKernel(Ase,t)}});var zle=lle({fft_:function(e){Iie("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return vue.runKernel("FFT",t)}});var Ble=lle({rfft_:function(e,t){Iie("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=Ple(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=_le([e,Dle(s)],e.shape.length-1),r=t}else n=e;var u=Lle(n),l=Ole(Nle(n,u),[a,r]),c=zle(l),d=Math.floor(r/2)+1,h=Rle(c),p=Mle(c),f=Fle(h,[d,r-d],h.shape.length-1),m=Fle(p,[d,r-d],p.shape.length-1),g=n.shape.slice();return g[n.shape.length-1]=d,Ole(Nle(f[0],m[0]),g)}});var Wle=lle({ifft_:function(e){Iie("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return vue.runKernel("IFFT",t)}});var jle=lle({mul_:function(e,t){var n=sle(e,"a","mul"),r=sle(t,"b","mul"),a=u(lue(n,r),2),i={a:n=a[0],b:r=a[1]};return vue.runKernel(Loe,i)}});var Vle=lle({reverse_:function(e,t){var n={x:sle(e,"x","reverse")},r={dims:t};return vue.runKernel($oe,n,r)}});function Hle(e,t,n,r){if(null==r&&(r=Bie(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Die(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Xie(t);var a=_ie(t),i=_ie(n);Iie(a===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==_ie(t.slice(o));Iie(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return Die(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?zse(e,r):Nie(e,[],!0),vue.makeTensor(e,t,r)}function Ule(e,t){if((Die(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Die(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Hle(e,[],[],t)}lle({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=Ole(e,[r,n]);t=Wle(a)}else{var i=[r,2*(n-1)],o=Ole(Rle(e),[r,n]),s=Ole(Mle(e),[r,n]),u=Vle(Ple(o,[0,1],[r,n-2]),1),l=jle(Vle(Ple(s,[0,1],[r,n-2]),1),Ule(-1)),c=_le([o,u],1),d=_le([s,l],1),h=Ole(Nle(c,d),[i[0],i[1]]);t=Wle(h)}if(t=Rle(t),3===e.rank&&0!==e.shape[0]){var p=t,f=e.shape[0];t=Ole(t,[f,t.shape[0]/f,t.shape[1]]),p.dispose()}return t}});function Gle(e,t){Tie(e);var n=ale(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Hle(e,null,n,t)}function Xle(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function qle(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return Gle(a,"float32")}lle({hammingWindow_:function(e){return qle(e,.54,.46)}});var Yle=lle({hannWindow_:function(e){return qle(e,.5,.5)}});function Kle(e,t,n){var r={shape:e,value:t,dtype:n};return vue.runKernel(xoe,{},r)}function Zle(e,t,n){if(Tie(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=ale(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Hle(e,t,r,n)}var Jle=lle({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(Ple(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=_le([Ple(e,i,t-s),Kle([s],a)]);o.push(u),i+=n}return 0===o.length?Zle([],[0,t]):Ole(_le(o),[o.length,t])}});lle({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Yle;null==r&&(r=Xle(t));var i=Jle(e,t,n),o=jle(i,a(t));return Ble(o,r)}});lle({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=sle(e,"image","cropAndResize"),s=sle(t,"boxes","cropAndResize","float32"),u=sle(n,"boxInd","cropAndResize","int32"),l=s.shape[0];Iie(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),Iie(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(l,",4] ")+"but had shape ".concat(s.shape,".")})),Iie(1===u.rank&&u.shape[0]===l,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(l,"] ")+"but had shape ".concat(s.shape,".")})),Iie(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),Iie(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),Iie("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var c={image:o,boxes:s,boxInd:u},d={method:a,extrapolationValue:i,cropSize:r},h=vue.runKernel(moe,c,d);return h}});lle({flipLeftRight_:function(e){var t=sle(e,"image","flipLeftRight","float32");Iie(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return vue.runKernel(Aoe,n,{})}});var Qle=lle({tile_:function(e,t){var n=sle(e,"x","tile","string_or_numeric");Iie(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return vue.runKernel(gse,r,a)}});lle({grayscaleToRGB_:function(e){var t=sle(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];Iie(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),Iie(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,Qle(t,a)}});lle({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=sle(e,"image","rotateWithOffset","float32");Iie(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r},s=vue.runKernel(kse,i,o);return s}});function $le(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),Iie(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),Iie(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),Iie(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),Iie(1===t.rank,(function(){return"scores must be a 1D tensor"})),Iie(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),Iie(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}lle({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=sle(e,"boxes","nonMaxSuppression","float32"),o=sle(t,"scores","nonMaxSuppression","float32"),s=$le(i,o,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return vue.runKernel(Boe,{boxes:i,scores:o},u)}});lle({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=sle(e,"boxes","nonMaxSuppression"),s=sle(t,"scores","nonMaxSuppression"),u=$le(o,s,n,r,a,i),l={boxes:o,scores:s},c={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},d=vue.runKernel(joe,l,c);return{selectedIndices:d[0],selectedScores:d[1]}}});lle({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=sle(e,"boxes","nonMaxSuppression"),s=sle(t,"scores","nonMaxSuppression"),u=$le(o,s,n,r,a,null),l=u.maxOutputSize,c=u.iouThreshold,d=u.scoreThreshold,h={boxes:o,scores:s},p={maxOutputSize:l,iouThreshold:c,scoreThreshold:d,padToMaxOutputSize:i},f=vue.runKernel(Woe,h,p);return{selectedIndices:f[0],validOutputs:f[1]}}});lle({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=sle(e,"images","resizeBilinear");Iie(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),Iie(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),Iie(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=Ole(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Yr(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},l=vue.runKernel(Joe,s,u);return o?Ole(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});lle({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=sle(e,"images","resizeNearestNeighbor");Iie(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),Iie(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),Iie("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),Iie(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=Ole(a,[1,a.shape[0],a.shape[1],a.shape[2]])),Yr(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},l=vue.runKernel(Zoe,s,u);return o?Ole(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var ece=lle({bincount_:function(e,t,n){var r=sle(e,"x","bincount"),a=sle(t,"weights","bincount");Iie("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),Iie(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),Iie(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var i={x:r,weights:a},o={size:n};return vue.runKernel("Bincount",i,o)}});var tce=lle({lessEqual_:function(e,t){var n=sle(e,"a","lessEqual","string_or_numeric"),r=sle(t,"b","lessEqual","string_or_numeric"),a=u(lue(n,r),2);n=a[0],r=a[1],kle(n.shape,r.shape);var i={a:n,b:r};return vue.runKernel(Noe,i)}});var nce=lle({greater_:function(e,t){var n=sle(e,"a","greater","string_or_numeric"),r=sle(t,"b","greater","string_or_numeric"),a=u(lue(n,r),2);n=a[0],r=a[1],kle(n.shape,r.shape);var i={a:n,b:r};return vue.runKernel(Coe,i)}});var rce=lle({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=sle(e,"x","sum");"bool"===r.dtype&&(r=cle(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return vue.runKernel(ose,a,i)}});var ace=lle({add_:function(e,t){var n=sle(e,"a","add"),r=sle(t,"b","add"),a=u(lue(n,r),2),i={a:n=a[0],b:r=a[1]};return vue.runKernel(roe,i)}});var ice=lle({floorDiv_:function(e,t){var n=sle(e,"a","floorDiv"),r=sle(t,"b","floorDiv"),a=u(lue(n,r),2),i={a:n=a[0],b:r=a[1]};return vue.runKernel(woe,i)}});var oce=lle({div_:function(e,t){var n=sle(e,"a","div"),r=sle(t,"b","div"),a=u(lue(n,r),2);if(n=a[0],r=a[1],"int32"===n.dtype&&"int32"===r.dtype)return ice(n,r);var i={a:n,b:r};return vue.runKernel(yoe,i,{})}});var sce=lle({sub_:function(e,t){var n=sle(e,"a","sub"),r=sle(t,"b","sub"),a=u(lue(n,r),2),i={a:n=a[0],b:r=a[1]};return vue.runKernel("Sub",i)}});var uce=lle({round_:function(e){var t={x:sle(e,"x","round")};return vue.runKernel(ese,t)}});var lce=lle({broadcastTo_:function(e,t){var n=sle(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=Ole(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var u=o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===u.length)return dle(n);var l={x:n},c={reps:o};return vue.runKernel(gse,l,c)}});var cce=lle({where_:function(e,t,n){var r=sle(t,"a","where"),a=sle(n,"b","where"),i=sle(e,"condition","where","bool"),o=kle(kle(i.shape,r.shape),a.shape),s={condition:lce(i,o),t:lce(r,o),e:lce(a,o)};return vue.runKernel(nse,s)}});function dce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return vue.runKernel(qoe,{},a)}function hce(e,t,n){return Hle(e,t,ale(e,n),n)}function pce(e,t){for(var n,r,a,i,o,s,u=Gle([-1]),l=Gle([0]),c=Gle([0]),d=0;d<e.size-1;d++){n=Ple(e,0,d+1),r=Ple(e,d+1),o=oce(rce(n),t),s=oce(rce(r),t);var h=rce(jle(n,dce(0,n.size)));a=oce(h,rce(n));var p=Kle(r.shape,n.size),f=ace(dce(0,r.size),p),m=jle(r,f);i=oce(rce(m),rce(r));var g=sce(a,i),v=sce(a,i),y=jle(o,s);c=jle(jle(y,g),v);var b=nce(c,l);l=cce(b,c,l),u=cce(b,Gle([d]),u)}return u}lle({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,l=sle(e,"image","threshold"),c=.2989,d=.587,h=.114,p=l.shape[0]*l.shape[1],f=jle(Gle([s]),255);if(Iie(3===l.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(l.rank,".")})),Iie(3===l.shape[2]||1===l.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(l.shape[2],".")})),Iie("int32"===l.dtype||"float32"===l.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(l.dtype,".")})),Iie("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===l.shape[2]){var m=Fle(l,[1,1,1],-1),g=u(m,3);t=g[0],n=g[1],r=g[2];var v=jle(t,c),y=jle(n,d),b=jle(r,h);a=ace(ace(v,y),b)}else a=e;if("otsu"===i){var x=ece(cle(uce(a),"int32"),hce([]),256);f=pce(x,p)}var A=o?tce(a,f):nce(a,f),w=cle(jle(A,255),"int32");return w}});lle({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=sle(e,"image","transform","float32"),s=sle(t,"transforms","transform","float32");Iie(4===o.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),Iie(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),Iie(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")}));var u={image:o,transforms:s},l={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return vue.runKernel(yse,u,l)}});var fce=lle({greaterEqual_:function(e,t){var n=sle(e,"a","greaterEqual","string_or_numeric"),r=sle(t,"b","greaterEqual","string_or_numeric"),a=u(lue(n,r),2);n=a[0],r=a[1],kle(n.shape,r.shape);var i={a:n,b:r};return vue.runKernel(Ioe,i)}});var mce=lle({logicalAnd_:function(e,t){var n=sle(e,"a","logicalAnd","bool"),r=sle(t,"b","logicalAnd","bool");kle(n.shape,r.shape);var a={a:n,b:r};return vue.runKernel(_oe,a)}});var gce=lle({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ule(e,"tensors","stack","string_or_numeric");Iie(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&Iie(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return vue.runKernel(Hoe,r,a)}});var vce=lle({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=sle(e,"x","unstack","string_or_numeric");Iie(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return vue.runKernel(xse,r,a)}});lle({bandPart_:function(e,t,n){Iie(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),Iie(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=sle(e,"a","bandPart");Iie(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=u(r.shape.slice(-2),2),o=i[0],s=i[1];if(!(t<=o))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(o,")."));if(!(n<=s))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(s,")."));t<0&&(t=o),n<0&&(n=s);var l=Ole(dce(0,o,1,"int32"),[-1,1]),c=dce(0,s,1,"int32"),d=sce(l,c),h=mce(tce(d,Ule(+t,"int32")),fce(d,Ule(-n,"int32"))),p=Dle([o,s],r.dtype);return Ole(gce(vce(Ole(r,[-1,o,s])).map((function(e){return cce(h,e,p)}))),a)}});var yce=lle({abs_:function(e){var t=sle(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return vue.runKernel("ComplexAbs",n)}var r={x:t};return vue.runKernel("Abs",r)}});function bce(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function xce(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function Ace(e,t){return function(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}(e,t.map((function(e){return 1})),t)}function wce(e,t,n){Iie(bce(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function kce(e,t){if(bce(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function Sce(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function Cce(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var Ice=lle({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=sle(e,"x","max"),a={x:r},i={reductionIndices:t,keepDims:n};return vue.runKernel(Moe,a,i)}});var Ece=lle({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=sle(e,"x","min"),a={x:r},i={axis:t,keepDims:n};return vue.runKernel(Poe,a,i)}});var Tce=lle({pow_:function(e,t){var n=sle(e,"base","pow"),r=sle(t,"exp","pow"),a=u(lue(n,r),2),i={a:n=a[0],b:r=a[1]};return vue.runKernel("Pow",i)}});var Nce=lle({sqrt_:function(e){var t={x:sle(e,"x","sqrt","float32")};return vue.runKernel(ise,t)}});var _ce=lle({square_:function(e){var t=sle(e,"x","square");return vue.runKernel("Square",{x:t},{})}});function Mce(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return yce(e);if(1!==e.rank&&null===n)return Mce(Ole(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return rce(yce(e),n);if(t===1/0)return Ice(yce(e),n);if(t===-1/0)return Ece(yce(e),n);if("euclidean"===t||2===t)return Nce(rce(Tce(yce(e),Ule(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return Ice(rce(yce(e),n[0]),n[1]-1);if(t===1/0)return Ice(rce(yce(e),n[1]),n[0]);if(t===-1/0)return Ece(rce(yce(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Nce(rce(_ce(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var Rce=lle({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Mce(e=sle(e,"x","norm"),t,n),i=a.shape;if(r){var o=Pie(n,e.shape);i=Ace(a.shape,o)}return Ole(a,i)}});var Oce=lle({squeeze_:function(e,t){var n=sle(e,"x","squeeze");return Ole(n,function(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:Pie(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}(n.shape,t).newShape)}});lle({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,Iie(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Iie(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=Fle(e,e.shape[0],0).map((function(e){return Oce(e,[0])}))),Iie(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(vue.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=jle(rce(jle(n[a],t)),n[a]);t=sce(t,i)}return oce(t,Rce(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?gce(n,0):n}});function Pce(e){cue(e).forEach((function(e){return e.dispose()}))}!function(e){e}((function(e){Qie().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}));var Fce=lle({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=sle(e,"x","expandDims","string_or_numeric");Iie(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return vue.runKernel(boe,r,a)}});var Dce=lle({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=rle([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=Ole(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return Qle(Fce(s,0),[n[0],1,1]);if(2===n.length)return Qle(Fce(Fce(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return Qle(Fce(Fce(Fce(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});var Lce=lle({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=sle(e,"a","matMul"),i=sle(t,"b","matMul"),o=lue(a,i),s=u(o,2),l={a:a=s[0],b:i=s[1]},c={transposeA:n,transposeB:r};return vue.runKernel(soe,l,c)}});var zce=lle({neg_:function(e){var t={x:sle(e,"x","neg")};return vue.runKernel("Neg",t)}});var Bce=lle({transpose_:function(e,t,n){var r=sle(e,"x","transpose");if(null==t&&(t=r.shape.map((function(e,t){return t})).reverse()),Iie(r.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){Iie(e>=0&&e<r.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t)}))})),r.rank<=1)return r.clone();var a={x:r},i={perm:t};return"complex64"===r.dtype?function(e,t){return vue.tidy(e,t)}((function(){var e=Rle(r),t=Mle(r);return e=vue.runKernel(bse,{x:e},i),t=vue.runKernel(bse,{x:t},i),n&&(t=zce(t)),Nle(e,t)})):vue.runKernel(bse,a,i)}});function Wce(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return vue.tidy((function(){Iie(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=Dce(n),i=dle(e),o=Zle([[1]],[1,1]),s=dle(o),l=n>=r?r:n,c=function(e){var t=i,l=s,c=a,d=vue.tidy((function(){var t=Ple(i,[e,e],[n-e,1]),u=Rce(t),l=Ple(i,[e,e],[1,1]),c=cce(nce(l,0),Zle([[-1]]),Zle([[1]])),d=sce(l,jle(c,u)),h=oce(t,d);s=1===h.shape[0]?dle(o):_le([o,Ple(h,[1,0],[h.shape[0]-1,h.shape[1]])],0);var p=zce(oce(Lce(c,d),u)),f=Ple(i,[e,0],[n-e,r]),m=jle(p,s),g=Bce(s);if(0===e)i=sce(f,Lce(m,Lce(g,f)));else{var v=sce(f,Lce(m,Lce(g,f)));i=_le([Ple(i,[0,0],[e,r]),v],0)}var y=Bce(m),b=Ple(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=sce(b,Lce(Lce(b,s),y));else{var x=sce(b,Lce(Lce(b,s),y));a=_le([Ple(a,[0,0],[n,e]),x],1)}return[s,i,a]})),h=u(d,3);s=h[0],i=h[1],a=h[2],Pce([t,l,c])},d=0;d<l;++d)c(d);return!t&&n>r&&(a=Ple(a,[0,0],[n,r]),i=Ple(i,[0,0],[r,r])),[a,i]}))}var jce;lle({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Iie(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return Wce(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=vce(Ole(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach((function(e){var n=u(Wce(e,t),2),r=n[0],o=n[1];a.push(r),i.push(o)}));var o=Ole(gce(a,0),e.shape),s=Ole(gce(i,0),e.shape);return[o,s]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(jce||(jce={}));var Vce=lle({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=sle(e,"x","mean"),a={x:r},i={axis:t,keepDims:n};return vue.runKernel(Ooe,a,i)}});var Hce=lle({notEqual_:function(e,t){var n=sle(e,"a","notEqual","string_or_numeric"),r=sle(t,"b","notEqual","string_or_numeric"),a=u(lue(n,r),2);n=a[0],r=a[1],kle(n.shape,r.shape);var i={a:n,b:r};return vue.runKernel(zoe,i)}});function Uce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=Uce(e,"float32"),r=Dle(e,"float32");return Nle(n,r)}var a=Uie(_ie(e),t);return vue.makeTensor(a,e,t)}var Gce=lle({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jce.SUM_BY_NONZERO_WEIGHTS,r=sle(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=sle(t,"weights","computeWeightedLoss"));var i=null==a?r:jle(r,a);if(n===jce.NONE)return i;if(n===jce.SUM)return rce(i);if(n===jce.MEAN){if(null==a)return Vce(i);var o=r.size/a.size,s=oce(rce(i),rce(a));return o>1?oce(s,Ule(o)):s}if(n===jce.SUM_BY_NONZERO_WEIGHTS){if(null==a)return oce(rce(i),Ule(r.size));var u=jle(a,Uce(r.shape)),l=cle(rce(Hce(u,Ule(0))),"float32");return oce(rce(i),l)}throw Error("Unknown reduction: ".concat(n))}});lle({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:jce.SUM_BY_NONZERO_WEIGHTS,a=sle(e,"labels","absoluteDifference"),i=sle(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=sle(n,"weights","absoluteDifference")),Eie(a.shape,i.shape,"Error in absoluteDifference: ");var s=yce(sce(a,i));return Gce(s,o,r)}});lle({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:jce.SUM_BY_NONZERO_WEIGHTS,i=sle(e,"labels","cosineDistance"),o=sle(t,"predictions","cosineDistance"),s=null;null!=r&&(s=sle(r,"weights","cosineDistance")),Eie(i.shape,o.shape,"Error in cosineDistance: ");var u=Ule(1),l=sce(u,rce(jle(i,o),n,!0));return Gce(l,s,a)}});var Xce=lle({relu_:function(e){var t={x:sle(e,"x","relu")};return vue.runKernel(Yoe,t)}});lle({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:jce.SUM_BY_NONZERO_WEIGHTS,a=sle(e,"labels","hingeLoss"),i=sle(t,"predictions","hingeLoss"),o=null;null!=n&&(o=sle(n,"weights","hingeLoss")),Eie(a.shape,i.shape,"Error in hingeLoss: ");var s=Ule(1);a=sce(jle(Ule(2),a),s);var u=Xce(sce(s,jle(a,i)));return Gce(u,o,r)}});var qce=lle({minimum_:function(e,t){var n=sle(e,"a","minimum"),r=sle(t,"b","minimum"),a=u(lue(n,r),2);n=a[0],r=a[1],"bool"===n.dtype&&(n=cle(n,"int32"),r=cle(r,"int32")),kle(n.shape,r.shape);var i={a:n,b:r};return vue.runKernel(Foe,i)}});lle({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:jce.SUM_BY_NONZERO_WEIGHTS,i=sle(e,"labels","huberLoss"),o=sle(t,"predictions","huberLoss"),s=null;null!=n&&(s=sle(n,"weights","huberLoss")),Eie(i.shape,o.shape,"Error in huberLoss: ");var u=Ule(r),l=yce(sce(o,i)),c=qce(l,u),d=sce(l,c),h=ace(jle(Ule(.5),_ce(c)),jle(u,d));return Gce(h,s,a)}});var Yce=lle({log_:function(e){var t={x:sle(e,"x","log","float32")};return vue.runKernel("Log",t)}});lle({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:jce.SUM_BY_NONZERO_WEIGHTS,i=sle(e,"labels","logLoss"),o=sle(t,"predictions","logLoss"),s=null;null!=n&&(s=sle(n,"weights","logLoss")),Eie(i.shape,o.shape,"Error in logLoss: ");var u=Ule(1),l=Ule(r),c=zce(jle(i,Yce(ace(o,l)))),d=jle(sce(u,i),Yce(ace(sce(u,o),l))),h=sce(c,d);return Gce(h,s,a)}});var Kce=lle({squaredDifference_:function(e,t){var n=sle(e,"a","squaredDifference"),r=sle(t,"b","squaredDifference"),a=u(lue(n,r),2);n=a[0],r=a[1],kle(n.shape,r.shape);var i={a:n,b:r};return vue.runKernel(pse,i,{})}});lle({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:jce.SUM_BY_NONZERO_WEIGHTS,a=sle(e,"labels","meanSquaredError"),i=sle(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=sle(n,"weights","meanSquaredError")),Eie(a.shape,i.shape,"Error in meanSquaredError: ");var s=Kce(a,i);return Gce(s,o,r)}});var Zce=lle({exp_:function(e){var t={x:sle(e,"x","exp")};return vue.runKernel("Exp",t)}});var Jce=lle({log1p_:function(e){var t={x:sle(e,"x","log1p")};return vue.runKernel("Log1p",t)}});function Qce(e,t){var n=sle(e,"labels","sigmoidCrossEntropyWithLogits"),r=sle(t,"logits","sigmoidCrossEntropyWithLogits");Eie(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=Xce(r),i=jle(r,n),o=Jce(Zce(zce(yce(r))));return ace(sce(a,i),o)}lle({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:jce.SUM_BY_NONZERO_WEIGHTS,i=sle(e,"multiClassLabels","sigmoidCrossEntropy"),o=sle(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=sle(n,"weights","sigmoidCrossEntropy")),Eie(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Ule(r),l=Ule(1),c=Ule(.5);i=ace(jle(i,sce(l,u)),jle(c,u))}var d=Qce(i,o);return Gce(d,s,a)}});function $ce(e){return vue.customGrad(e)}var ede=lle({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=sle(e,"x","logSumExp"),a=Pie(t,r.shape),i=Ice(r,a,!0),o=sce(r,i),s=Zce(o),u=rce(s,a),l=Yce(u),c=ace(Ole(i,l.shape),l);if(n){var d=Ace(c.shape,a);return Ole(c,d)}return c}});function tde(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=$ce((function(e,t,r){var a=ede(t,[n],!0),i=sce(cle(t,"float32"),a);r([e,i]);var o=zce(jle(i,e));return{value:rce(o,[n]),gradFunc:function(e,t){var r=u(t,2),a=r[0],i=r[1],o=Ace(e.shape,[n]);return[jle(Ole(e,o),sce(cle(a,"float32"),Zce(i))),jle(Ole(e,o),sce(Zce(i),cle(a,"float32")))]}}}));return r(e,t)}lle({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:jce.SUM_BY_NONZERO_WEIGHTS,i=sle(e,"onehotLabels","softmaxCrossEntropy"),o=sle(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=sle(n,"weights","softmaxCrossEntropy")),Eie(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Ule(r),l=Ule(1),c=Ule(i.shape[1]);i=ace(jle(i,sce(l,u)),oce(u,c))}var d=tde(i,o);return Gce(d,s,a)}});lle({sparseFillEmptyRows_:function(e,t,n,r){var a=sle(e,"indices","sparseFillEmptyRows","int32"),i=sle(t,"values","sparseFillEmptyRows"),o=sle(n,"denseShape","sparseFillEmptyRows","int32"),s=sle(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:i,denseShape:o,defaultValue:s},l=vue.runKernel(lse,u);return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}});lle({sparseReshape_:function(e,t,n){var r=sle(e,"inputIndices","sparseReshape","int32"),a=sle(t,"inputShape","sparseReshape","int32"),i=sle(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},s=vue.runKernel(cse,o);return{outputIndices:s[0],outputShape:s[1]}}});lle({sparseSegmentMean_:function(e,t,n){var r=sle(e,"data","sparseSegmentMean"),a=sle(t,"indices","sparseSegmentMean","int32"),i=sle(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return vue.runKernel(dse,o)}});lle({sparseSegmentSum_:function(e,t,n){var r=sle(e,"data","sparseSegmentSum"),a=sle(t,"indices","sparseSegmentSum","int32"),i=sle(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return vue.runKernel(hse,o)}});lle({stringNGrams_:function(e,t,n,r,a,i,o,s){var u=sle(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var l=sle(t,"dataSplits","stringNGrams");if("int32"!==l.dtype)throw new Error("Data splits must be of datatype int32");var c={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},d={data:u,dataSplits:l},h=vue.runKernel("StringNGrams",d,c);return{nGrams:h[0],nGramsSplits:h[1]}}});lle({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=sle(e,"input","stringSplit","string"),a=sle(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},s=vue.runKernel(mse,o,i);return{indices:s[0],values:s[1],shape:s[2]}}});lle({stringToHashBucketFast_:function(e,t){var n=sle(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return vue.runKernel("StringToHashBucketFast",a,r)}});function nde(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function rde(e,t,n,r,a,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",l=ode(t),c=u(l,2),d=c[0],h=c[1];if("channelsLast"===s)o=[d,h,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[d,h,e[1],e[1]]}return ade(e,o,n,r,a,i,!1,s)}function ade(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",l=-1,c=-1,d=-1,h=-1;if("channelsLast"===s){var p=u(e,4);l=p[0],c=p[1],d=p[2],h=p[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var f=u(e,4);l=f[0],h=f[1],c=f[2],d=f[3]}var m,g=u(t,4),v=g[0],y=g[1],b=g[3],x=ode(n),A=u(x,2),w=A[0],k=A[1],S=ode(r),C=u(S,2),I=C[0],E=C[1],T=sde(v,I),N=sde(y,E),_=ude(a,c,d,w,k,T,N,i,s),M=_.padInfo,R=_.outHeight,O=_.outWidth,P=o?b*h:b;return"channelsFirst"===s?m=[l,P,R,O]:"channelsLast"===s&&(m=[l,R,O,P]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:d,inChannels:h,outHeight:R,outWidth:O,outChannels:P,padInfo:M,strideHeight:w,strideWidth:k,filterHeight:v,filterWidth:y,effectiveFilterHeight:T,effectiveFilterWidth:N,dilationHeight:I,dilationWidth:E,inShape:e,outShape:m,filterShape:t}}function ide(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=sde(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function ode(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function sde(e,t){return t<=1?e:e+(e-1)*(t-1)}function ude(e,t,n,r,a,i,o,s,u){var l,c,d;if("number"===typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var h=function(e,t,n,r,a){null==r&&(r=ide(e,t,n));var i=e[0],o=e[1];return[lde((i-t+2*r)/n+1,a),lde((o-t+2*r)/n+1,a)]}([t,n],i,r,e,s);c=h[0],d=h[1]}else if("same"===e){c=Math.ceil(t/r),d=Math.ceil(n/a);var p=Math.max(0,(c-1)*r+i-t),f=Math.max(0,(d-1)*a+o-n),m=Math.floor(p/2),g=p-m,v=Math.floor(f/2);l={top:m,bottom:g,left:v,right:f-v,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-i+1)/r),d=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],x="channelsLast"===u?e[2][0]:e[3][0],A="channelsLast"===u?e[2][1]:e[3][1];l={top:y,bottom:b,left:x,right:A,type:0===y&&0===b&&0===x&&0===A?"VALID":"EXPLICIT"},c=lde((t-i+y+b)/r+1,s),d=lde((n-o+x+A)/a+1,s)}return{padInfo:l,outHeight:c,outWidth:d}}function lde(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function cde(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}lle({elu_:function(e){var t={x:sle(e,"x","elu","float32")};return vue.runKernel("Elu",t)}});lle({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=sle(e,"x","leakyRelu"),r={x:n},a={alpha:t};return vue.runKernel(Toe,r,a)}});lle({prelu_:function(e,t){var n={x:sle(e,"x","prelu"),alpha:sle(t,"alpha","prelu")};return vue.runKernel(Goe,n)}});lle({relu6_:function(e){var t={x:sle(e,"x","relu6")};return vue.runKernel(Qoe,t)}});lle({sigmoid_:function(e){var t={x:sle(e,"x","sigmoid","float32")};return vue.runKernel(ase,t)}});lle({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=sle(e,"x","step"),r={x:n},a={alpha:t};return vue.runKernel(wse,r,a)}});function dde(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function hde(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2===1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function pde(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}var fde,mde,gde;function vde(e){try{return e.map((function(e){return jse(e)}))}catch($Ie){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat($Ie))}}function yde(e){return e.map((function(e){return Wse(e)}))}!function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(fde||(fde={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"}(mde||(mde={}));var bde={kernelName:Sse,backendName:"wasm",setupFunc:function(e){gde=e.wasm.cwrap(Sse,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights;if("float32"!==a.dtype||"float32"!==i.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");var u=r.transposeA,l=r.transposeB,c=r.activation,d=r.leakyreluAlpha,h=n.dataIdMap.get(a.dataId).id,p=n.dataIdMap.get(i.dataId).id,f=0;if(null!=o){var m=n.dataIdMap.get(o.dataId);if(1!==m.shape.length)throw new Error("_FusedMatMul only supports rank-1 bias but got "+"rank ".concat(m.shape.length,"."));f=m.id}var g=null==s?0:n.dataIdMap.get(s.dataId).id,v=mde[c];if(null==v)throw new Error("".concat(c," activation not yet supported for FusedConv2D ")+"in the wasm backend.");var y=u?a.shape[2]:a.shape[1],b=l?i.shape[1]:i.shape[2],x=kle(a.shape.slice(0,-2),i.shape.slice(0,-2)),A=n.makeOutput([].concat(ta(x),[y,b]),a.dtype),w=n.dataIdMap.get(A.dataId).id,k=new Uint8Array(new Int32Array(a.shape).buffer),S=new Uint8Array(new Int32Array(i.shape).buffer);return gde(h,k,a.shape.length,p,S,i.shape.length,u,l,v,f,g,d||0,w),A}};function xde(e,t){var n;return{kernelName:e,backendName:"wasm",setupFunc:function(t){n=t.wasm.cwrap(e,null,["number","number","number"])},kernelFunc:function(e){var r=e.backend,a=e.inputs.x,i=r.dataIdMap.get(a.dataId).id,o=r.makeOutput(a.shape,t||a.dtype),s=r.dataIdMap.get(o.dataId).id;return 0===_ie(o.shape)||n(i,fde[a.dtype],s),o}}}var Ade=xde("Abs");function wde(e,t,n){var r;return{kernelName:e,backendName:"wasm",setupFunc:function(t){r=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs,i=a.a,o=a.b,s=t.dataIdMap.get(i.dataId).id,u=t.dataIdMap.get(o.dataId).id,l=null!=n?n:i.dtype,c=kle(i.shape,o.shape),d=t.makeOutput(c,l);if(0===_ie(c))return d;var h=new Uint8Array(new Int32Array(i.shape).buffer),p=new Uint8Array(new Int32Array(o.shape).buffer),f=t.dataIdMap.get(d.dataId).id;return r(s,h,i.shape.length,u,p,o.shape.length,fde[i.dtype],f),d}}}var kde,Sde=wde(roe);var Cde={kernelName:aoe,backendName:"wasm",setupFunc:function(e){kde=e.wasm.cwrap(aoe,null,["array","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=n.makeOutput(t[0].shape,t[0].dtype);if(0===_ie(r.shape))return r;var a=t.map((function(e){return n.dataIdMap.get(e.dataId).id})),i=new Uint8Array(new Int32Array(a).buffer),o=n.dataIdMap.get(r.dataId).id;return kde(i,a.length,fde[r.dtype],o),r}};function Ide(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype),a=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(r).set(a),r}var Ede,Tde={kernelName:Eoe,backendName:"wasm",kernelFunc:Ide};function Nde(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=function(e,t){for(var n=[],r=[],a=0;a<e.length;++a)1!==e[a]&&n.push(e[a]),1!==e[t[a]]&&r.push(t[a]);for(var i=0;i<r.length;++i){for(var o=-1,s=0;s<r.length;++s)r[s]>=i&&(-1===o||r[o]>r[s])&&(o=s);r[o]=i}return[n,r]}(t.x.shape,r.perm),i=u(a,2),o=i[0],s=i[1],l=!0,c=0;c<s.length;c++)s[c]!==c&&(l=!1);var d=function(e,t){for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];return n}(t.x.shape,r.perm),h={dataId:t.x.dataId,shape:o,dtype:t.x.dtype};if(l){var p=Ide({inputs:t,backend:n});return p.shape=d,p}var f=n.makeOutput(d,h.dtype),m=n.dataIdMap.get(h.dataId).id,g=n.dataIdMap.get(f.dataId).id,v=new Uint8Array(new Int32Array(s).buffer),y=new Uint8Array(new Int32Array(h.shape).buffer);return Ede(m,y,h.shape.length,fde[h.dtype],g,v,s.length),f}var _de,Mde={kernelName:bse,backendName:"wasm",kernelFunc:Nde,setupFunc:function(e){Ede=e.wasm.cwrap(bse,null,["number","array","number","number","number","array","number"])}};function Rde(e,t,n){var r=e.shape,a=e.shape.length,i=Pie(t,r),o=i,s=kce(o,a),u=null,l=!1;if(null!=s){for(var c=new Array(a),d=0;d<c.length;d++)c[d]=r[s[d]];o=Cce(o.length,a),u=Nde({inputs:{x:e},attrs:{perm:s},backend:n});var h=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(u.dataId).id!==h&&(l=!0)}return{transposed:u,originalAxes:i,axes:o,inputWasTransposed:l}}var Ode,Pde={kernelName:"All",backendName:"wasm",setupFunc:function(e){_de=e.wasm.cwrap("All",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,l=o,c=Rde(o,a,t),d=c.transposed,h=c.axes,p=c.originalAxes,f=c.inputWasTransposed;f&&(l=d,s=t.dataIdMap.get(d.dataId).id),wce("all",h,l.shape.length);var m=u(xce(l.shape,h),2),g=m[0],v=_ie(m[1]),y=t.makeOutput(g,o.dtype);if(0!==_ie(l.shape)){var b=t.dataIdMap.get(y.dataId).id;_de(s,v,b)}if(f&&t.disposeData(d.dataId),i){var x=Ace(y.shape,p);y.shape=x}return y}};var Fde,Dde={kernelName:"Any",backendName:"wasm",setupFunc:function(e){Ode=e.wasm.cwrap("Any",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,l=o,c=Rde(o,a,t),d=c.transposed,h=c.axes,p=c.originalAxes,f=c.inputWasTransposed;f&&(l=d,s=t.dataIdMap.get(d.dataId).id),wce("any",h,l.shape.length);var m=u(xce(l.shape,h),2),g=m[0],v=_ie(m[1]),y=t.makeOutput(g,o.dtype);if(0!==_ie(l.shape)){var b=t.dataIdMap.get(y.dataId).id;Ode(s,v,b)}if(f&&t.disposeData(d.dataId),i){var x=Ace(y.shape,p);y.shape=x}return y}};var Lde,zde={kernelName:ioe,backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.axis,a=n.x,i=t.dataIdMap.get(a.dataId).id,o=i,s=a,u=Rde(a,r,t),l=u.transposed,c=u.axes,d=u.inputWasTransposed;if(d){var h=t.dataIdMap.get(l.dataId).id;h!==i&&(s=l,o=h)}var p=s.shape.slice(0,-1),f=t.makeOutput(p,"int32"),m=t.dataIdMap.get(f.dataId).id,g=_ie(f.shape),v=s.shape[c[0]];return Fde(o,fde[s.dtype],g,v,m),d&&t.disposeData(l.dataId),f},setupFunc:function(e){Fde=e.wasm.cwrap(ioe,null,["number","number","number","number","number"])}};var Bde={kernelName:ooe,backendName:"wasm",setupFunc:function(e){Lde=e.wasm.cwrap(ooe,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=r.dataIdMap.get(a.dataId).id,o=n.filterSize,s=n.strides,u=n.pad,l=n.dimRoundingMode,c=rde(a.shape,o,s,1,u,l),d=c.filterHeight,h=c.filterWidth,p=c.padInfo.top,f=c.padInfo.right,m=c.padInfo.bottom,g=c.padInfo.left,v=c.strideHeight,y=c.strideWidth,b=c.inChannels;if("channelsLast"!==c.dataFormat)throw new Error("wasm backend does not support dataFormat:'"+"".concat(c.dataFormat,"'. Please use 'channelsLast'."));if(1!==c.dilationWidth||1!==c.dilationHeight)throw new Error("was backend only supports average pooling with dilation = [1, 1], "+"got [".concat(c.dilationHeight,", ").concat(c.dilationWidth,"]."));var x=r.makeOutput(c.outShape,"float32"),A=r.dataIdMap.get(x.dataId).id;return Lde(i,a.shape[0],a.shape[1],a.shape[2],d,h,p,f,m,g,v,y,b,A),x}};function Wde(e){var t=e.inputs,n=e.attrs,r=t.x,a=n.shape,i=_ie(r.shape),o=function(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}(a,i);return Iie(i===_ie(o),(function(){return"new shape: ".concat(o,", old shape: ").concat(r.shape,". New shape and old ")+"shape must have the same number of elements."})),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:o,dtype:r.dtype}}var jde,Vde={kernelName:Koe,backendName:"wasm",kernelFunc:Wde};var Hde={kernelName:soe,backendName:"wasm",setupFunc:function(e){jde=e.wasm.cwrap(soe,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;if("float32"!==a.dtype||"float32"!==i.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");var u=a.shape.length,l=i.shape.length,c=o?a.shape[u-2]:a.shape[u-1],d=s?i.shape[l-1]:i.shape[l-2],h=o?a.shape[u-1]:a.shape[u-2],p=s?i.shape[l-2]:i.shape[l-1],f=a.shape.slice(0,-2),m=i.shape.slice(0,-2),g=_ie(f),v=_ie(m),y=kle(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([h,p]);Iie(c===d,(function(){return"Error in matMul: inner shapes (".concat(c,") and (")+"".concat(d,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(i.shape," and transposeA=").concat(o)+" and transposeB=".concat(s," must match.")}));var b=s?[v,p,d]:[v,d,p],x=Wde({inputs:{x:a},backend:n,attrs:{shape:o?[g,c,h]:[g,h,c]}}),A=Wde({inputs:{x:i},backend:n,attrs:{shape:b}}),w=n.dataIdMap.get(x.dataId).id,k=n.dataIdMap.get(A.dataId).id,S=o?x.shape[2]:x.shape[1],C=s?A.shape[1]:A.shape[2],I=Math.max(g,v),E=n.makeOutput([I,S,C],x.dtype),T=n.dataIdMap.get(E.dataId).id,N=new Uint8Array(new Int32Array(x.shape).buffer),_=new Uint8Array(new Int32Array(A.shape).buffer);return jde(w,N,x.shape.length,k,_,A.shape.length,o,s,T),n.disposeData(x.dataId),n.disposeData(A.dataId),E.shape=y,E}};function Ude(e,t,n,r,a){var i=Sle(r,t,n),o=_ie(n),s=jie(r);if(i){var u=Cle(t,s);return"string"===a?e.slice(u,u+o):e.subarray(u,u+o)}for(var l=rle(r,a,"string"===a?vde(e):e),c=rle(n,a),d=0;d<c.size;++d){var h=c.indexToLoc(d),p=h.map((function(e,n){return e+t[n]}));c.set.apply(c,[l.get.apply(l,ta(p))].concat(ta(h)))}return"string"===a?yde(c.values):c.values}function Gde(e){var t=e.inputs.x,n=e.attrs,r=n.begin,a=n.size,i=e.backend,o=u(Ile(t,r,a),2),s=o[0],l=o[1],c=Sle(t.shape,s,l),d=i.readSync(t.dataId),h=i.makeOutput(l,t.dtype),p=jie(t.shape),f=i.dataIdMap.get(h.dataId);if(c){var m=Cle(s,p);if("string"===t.dtype)f.stringBytes=d.slice(m,m+_ie(l));else i.typedArrayFromHeap(h).set(d.subarray(m,m+_ie(l)));return h}if("string"===t.dtype){var g=Ude(d,s,l,t.shape,t.dtype);return f.stringBytes=g,h}var v=i.typedArrayFromHeap(h),y=t.shape.length;if(2===y)!function(e,t,n,r,a){for(var i=0,o=r[0],s=r[1],u=o+a[0],l=o;l<u;l++){var c=l*t+s;n.set(e.subarray(c,c+a[1]),i),i+=a[1]}}(d,p[0],v,s,l);else if(3===y)!function(e,t,n,r,a,i){for(var o=0,s=a[0],u=a[1],l=a[2],c=s+i[0],d=u+i[1],h=s;h<c;h++)for(var p=u;p<d;p++){var f=h*t+p*n+l;r.set(e.subarray(f,f+i[2]),o),o+=i[2]}}(d,p[0],p[1],v,s,l);else if(4===y)!function(e,t,n,r,a,i,o){for(var s=0,u=i[0],l=i[1],c=i[2],d=u+o[0],h=l+o[1],p=c+o[2],f=i[3],m=u;m<d;m++)for(var g=l;g<h;g++)for(var v=c;v<p;v++){var y=m*t+g*n+v*r+f;a.set(e.subarray(y,y+o[3]),s),s+=o[3]}}(d,p[0],p[1],p[2],v,s,l);else{var b=Ude(d,s,l,t.shape,t.dtype);v.set(b)}return h}var Xde={kernelName:rse,backendName:"wasm",kernelFunc:Gde};var qde={kernelName:"BatchToSpaceND",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops,s=i.reduce((function(e,t){return e*t})),u=dde(a.shape,i,s),l=hde(u.length,i.length),c=pde(a.shape,i,s),d=function(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}(o,i.length),h=function(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}(c,o,i.length),p=Wde({inputs:{x:a},backend:n,attrs:{shape:u}}),f=Nde({inputs:{x:p},backend:n,attrs:{perm:l}}),m=Gde({inputs:{x:Wde({inputs:{x:f},backend:n,attrs:{shape:c}})},backend:n,attrs:{begin:d,size:h}});return n.disposeData(p.dataId),n.disposeData(f.dataId),n.disposeData(p.dataId),m}};function Yde(e){var t=e.inputs.x,n=e.attrs.dtype,r=e.backend,a=r.makeOutput(t.shape,n),i=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(a).set(i),a}var Kde,Zde={kernelName:uoe,backendName:"wasm",kernelFunc:Yde},Jde=xde("Ceil");var Qde={kernelName:loe,backendName:"wasm",setupFunc:function(e){Kde=e.wasm.cwrap(loe,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.clipValueMin,o=r.clipValueMax,s=n.dataIdMap.get(a.dataId).id,u=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(u.dataId).id;return Kde(s,i,o,l),u}};function $de(e){var t=e.inputs,n=e.backend,r=Pie(e.attrs.axis,t[0].shape)[0],a=nde(t.map((function(e){return e.shape})),r),i=t.filter((function(e){return _ie(e.shape)>0}));if(1===i.length)return Ide({inputs:{x:i[0]},backend:n});var o=n.makeOutput(a,t[0].dtype);if(0===_ie(a))return o;var s=i.map((function(e){return e.shape}));if(function(e,t){var n=e[0].length;e.forEach((function(e,t){Iie(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),Iie(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)Iie(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}(s,r),"string"===i[0].dtype){var u=i.map((function(e){var t=_ie(e.shape.slice(r));return Wde({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),l=u.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}}));a=nde(u.map((function(e){return e.shape})),1);var c=1===u[0].shape[0],d=function(e,t,n,r){var a=Fie(n,_ie(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=_ie(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?vde(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+o,l=0;l<e.shape[1];++l)a[u+l]=r[i++];o+=e.shape[1]}))}return a}(l,a,t[0].dtype,c),h=nde(i.map((function(e){return e.shape})),r);return o.shape=h,n.dataIdMap.get(o.dataId).stringBytes=yde(d),u.forEach((function(e){return n.disposeData(e.dataId)})),o}for(var p=_ie(i[0].shape.slice(0,r)),f=0,m=i.map((function(e){var t=_ie(e.shape.slice(r));return f+=t,t})),g=i.map((function(e){return n.typedArrayFromHeap(e)})),v=n.typedArrayFromHeap(o),y=0;y<p;y++)for(var b=y*f,x=0;x<g.length;x++){var A=m[x],w=y*A,k=g[x].subarray(w,w+A);v.set(k,b),b+=A}return o}var ehe,the={kernelName:coe,backendName:"wasm",kernelFunc:$de};var nhe,rhe={kernelName:doe,backendName:"wasm",setupFunc:function(e){ehe=e.wasm.cwrap(doe,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(i.dataId).id,u=n.strides,l=n.dilations,c=n.pad,d=n.dimRoundingMode,h=cde(n.dataFormat),p=ade(a.shape,i.shape,u,l,c,d,!1,h),f=p.filterHeight,m=p.filterWidth,g=p.padInfo.top,v=p.padInfo.right,y=p.padInfo.bottom,b=p.padInfo.left,x=p.dilationHeight,A=p.dilationWidth,w=p.strideHeight,k=p.strideWidth,S=p.inChannels,C=p.outChannels,I="SAME"===p.padInfo.type?1:0;if("channelsLast"!==p.dataFormat)throw new Error("wasm backend Conv2D does not support dataFormat:'"+"".concat(p.dataFormat,"'. Please use 'channelsLast'."));var E=r.makeOutput(p.outShape,"float32"),T=r.dataIdMap.get(E.dataId).id;return ehe(o,a.shape[0],a.shape[1],a.shape[2],s,f,m,g,v,y,b,I,x,A,w,k,S,C,T),E}};var ahe,ihe,ohe={kernelName:hoe,backendName:"wasm",setupFunc:function(e){nhe=e.wasm.cwrap(hoe,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.dy,i=n.filter,o=r.strides,s=r.pad,l=r.dataFormat,c=r.dimRoundingMode,d=r.inputShape,h=cde(l),p=ade(d,i.shape,o,1,s,c,!1,h),f=p.batchSize,m=p.filterHeight,g=p.filterWidth,v=p.inChannels,y=p.inHeight,b=p.inWidth,x=p.outChannels,A=p.outHeight,w=p.outWidth,k=p.strideHeight,S=p.strideWidth,C=m-1-p.padInfo.top,I=g-1-p.padInfo.left,E="channelsLast"===p.dataFormat,T=jie(p.inShape),N=jie(a.shape),_=u(jie(i.shape),3),M=_[0],R=_[1],O=_[2],P=T[0],F=E?T[1]:T[2],D=E?T[2]:1,L=E?1:T[1],z=N[0],B=E?N[1]:N[2],W=E?N[2]:1,j=E?1:N[1],V=t.makeOutput(p.inShape,"float32"),H=t.dataIdMap.get(V.dataId).id,U=t.dataIdMap.get(a.dataId).id,G=t.dataIdMap.get(i.dataId).id;return nhe(U,G,f,m,g,y,b,v,A,w,x,k,S,C,I,M,R,O,P,F,D,L,z,B,W,j,H),V}},she=xde("Cos"),uhe=xde("Cosh");!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(ahe||(ahe={}));var lhe,che={kernelName:moe,backendName:"wasm",setupFunc:function(e){ihe=e.wasm.cwrap(moe,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=a.method,o=a.extrapolationValue,s=a.cropSize,l=r.image,c=r.boxes,d=r.boxInd,h=c.shape[0],p=u(s,2),f=p[0],m=p[1],g=[h,f,m,l.shape[3]],v=n.dataIdMap.get(l.dataId);"float32"!==l.dtype&&(t=Yde({backend:n,inputs:{x:l},attrs:{dtype:"float32"}}),v=n.dataIdMap.get(t.dataId));var y=v.id,b=n.dataIdMap.get(c.dataId).id,x=n.dataIdMap.get(d.dataId).id,A=n.makeOutput(g,"float32"),w=n.dataIdMap.get(A.dataId).id,k=new Uint8Array(new Int32Array(l.shape).buffer);return ihe(y,b,x,h,k,f,m,ahe[i],o,w),null!=t&&n.disposeData(t.dataId),A}};var dhe,hhe={kernelName:poe,backendName:"wasm",setupFunc:function(e){lhe=e.wasm.cwrap(poe,null,["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse,u=a.shape.length;Iie("float32"===a.dtype||"int32"===a.dtype,(function(){return"cumprod does not support ".concat(a.dtype," tensors in the WASM backend")}));var l=kce([i],u),c=a;null!==l&&(c=Nde({inputs:{x:a},attrs:{perm:l},backend:n}));var d=Cce(1,u)[0];wce("cumprod",[d],u);var h=n.makeOutput(c.shape,c.dtype),p=c.shape[d],f=n.dataIdMap.get(c.dataId).id,m=n.dataIdMap.get(h.dataId).id;lhe(f,o?1:0,s?1:0,p,m,fde[a.dtype]);var g=h;return null!==l&&(g=Nde({inputs:{x:h},attrs:{perm:Sce(l)},backend:n}),n.disposeData(c.dataId),n.disposeData(h.dataId)),g}};var phe,fhe={kernelName:foe,backendName:"wasm",setupFunc:function(e){dhe=e.wasm.cwrap(foe,null,["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse,u=a.shape.length;Iie("float32"===a.dtype||"int32"===a.dtype,(function(){return"cumsum does not support ".concat(a.dtype," tensors in the WASM backend")}));var l=kce([i],u),c=a;null!==l&&(c=Nde({inputs:{x:a},attrs:{perm:l},backend:n}));var d=Cce(1,u)[0];wce("cumsum",[d],u);var h=n.makeOutput(c.shape,c.dtype),p=c.shape[d],f=n.dataIdMap.get(c.dataId).id,m=n.dataIdMap.get(h.dataId).id;dhe(f,o?1:0,s?1:0,p,m,fde[a.dtype]);var g=h;return null!==l&&(g=Nde({inputs:{x:h},attrs:{perm:Sce(l)},backend:n}),n.disposeData(c.dataId),n.disposeData(h.dataId)),g}};var mhe,ghe={kernelName:goe,backendName:"wasm",setupFunc:function(e){phe=e.wasm.cwrap(goe,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,l=("NHWC"===o?a.shape[2]:a.shape[3])*i,c=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),d="NHWC"===o?[s,u,l,c]:[s,c,u,l],h=t.makeOutput(d,"float32"),p=t.dataIdMap.get(a.dataId).id,f=new Uint8Array(new Int32Array(jie(a.shape)).buffer),m=new Uint8Array(new Int32Array(d).buffer),g=new Uint8Array(new Int32Array(jie(d)).buffer),v=t.dataIdMap.get(h.dataId).id;return phe(p,i,"NHWC"===o?1:0,f,a.shape.length-1,m,g,d.length,v),h}};var vhe={kernelName:voe,backendName:"wasm",setupFunc:function(e){mhe=e.wasm.cwrap(voe,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(i.dataId).id,u=n.strides,l=n.dilations,c=n.pad,d=n.dimRoundingMode,h=null==l?[1,1]:l,p=ade(a.shape,i.shape,u,h,c,d,!0),f=p.filterHeight,m=p.filterWidth,g=p.padInfo.top,v=p.padInfo.right,y=p.padInfo.bottom,b=p.padInfo.left,x=p.dilationHeight,A=p.dilationWidth,w=p.strideHeight,k=p.strideWidth,S=p.inChannels,C=p.outChannels,I="SAME"===p.padInfo.type?1:0;if("channelsLast"!==p.dataFormat)throw new Error("wasm backend DepthwiseConv2dNative does not support dataFormat:'"+"".concat(p.dataFormat,"'. Please use 'channelsLast'."));var E=r.makeOutput(p.outShape,"float32"),T=r.dataIdMap.get(E.dataId).id;return mhe(o,a.shape[0],a.shape[1],a.shape[2],s,f,m,g,v,y,b,I,x,A,w,k,S,C,T),E}},yhe=xde("Elu"),bhe=wde("Equal",0,"bool"),xhe=xde("Exp","float32");function Ahe(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.input,i=n.dim,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(Iie(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+i+1),s.splice(u,0,1),Wde({inputs:{x:a},backend:r,attrs:{shape:s}})}var whe={kernelName:boe,backendName:"wasm",kernelFunc:Ahe};function khe(e){var t=e.attrs,n=t.shape,r=t.value,a=t.dtype,i=e.backend,o=i.makeOutput(n,a);return i.typedArrayFromHeap(o).fill(r),o}var She,Che={kernelName:xoe,backendName:"wasm",kernelFunc:khe};var Ihe,Ehe={kernelName:Aoe,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n.makeOutput(r.shape,r.dtype),i=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(a.dataId).id,s=u(r.shape,4),l=s[0],c=s[1],d=s[2],h=s[3];return She(i,l,c,d,h,o),a},setupFunc:function(e){She=e.wasm.cwrap(Aoe,null,["number","number","number","number","number","number"])}},The=xde("Floor"),Nhe=wde(woe);var _he,Mhe={kernelName:koe,backendName:"wasm",setupFunc:function(e){Ihe=e.wasm.cwrap(koe,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.varianceEpsilon,a=n.x,i=n.mean,o=n.variance,s=n.offset,u=n.scale,l=t.dataIdMap.get(a.dataId).id,c=t.dataIdMap.get(i.dataId).id,d=t.dataIdMap.get(o.dataId).id,h=null!=s?t.dataIdMap.get(s.dataId).id:0,p=null!=u?t.dataIdMap.get(u.dataId).id:0,f=t.makeOutput(a.shape,a.dtype);if(0===_ie(a.shape))return f;var m=t.dataIdMap.get(f.dataId).id;return Ihe(l,c,d,h,p,r,m),f}};var Rhe,Ohe={kernelName:Cse,backendName:"wasm",setupFunc:function(e){_he=e.wasm.cwrap(Cse,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=n.strides,l=n.pad,c=n.dilations,d=n.dataFormat,h=n.dimRoundingMode,p=n.activation,f=n.leakyreluAlpha,m=ade(a.shape,i.shape,u,c,l,h),g=mde[p];if(null==g)throw new Error("".concat(p," activation not yet supported for FusedConv2D ")+"in the wasm backend.");var v=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(i.dataId).id,b=m.outChannels,x=0;if(null!=o){var A=r.dataIdMap.get(o.dataId);if(1!==A.shape.length)throw new Error("FusedConv2D only supports rank-1 bias but got "+"rank ".concat(A.shape.length,"."));if(A.shape[0]!==b)throw new Error("FusedConv2D bias shape (".concat(A.shape,") does not ")+"match the number of output channels (".concat(b,")"));x=A.id}var w=m.filterHeight,k=m.filterWidth,S=m.padInfo.top,C=m.padInfo.right,I=m.padInfo.bottom,E=m.padInfo.left,T=m.dilationHeight,N=m.dilationWidth,_=m.strideHeight,M=m.strideWidth,R=m.inChannels,O="SAME"===m.padInfo.type?1:0,P=m.batchSize,F=m.inHeight,D=m.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedConv2D does not support dataFormat:'"+"".concat(d,"'. Please use 'NHWC'."));var L=r.makeOutput(m.outShape,"float32"),z=r.dataIdMap.get(L.dataId).id,B=null==s?0:r.dataIdMap.get(s.dataId).id;return _he(v,P,F,D,y,w,k,x,S,C,I,E,O,T,N,_,M,R,b,g,B,f||0,z),L}};var Phe,Fhe={kernelName:Ise,backendName:"wasm",setupFunc:function(e){Rhe=e.wasm.cwrap(Ise,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=n.strides,l=n.pad,c=n.dilations,d=n.dataFormat,h=n.dimRoundingMode,p=n.activation,f=n.leakyreluAlpha,m=ade(a.shape,i.shape,u,c,l,h,!0),g=mde[p];if(null==g)throw new Error("".concat(p," activation not yet supported for FusedDepthwiseConv2D ")+"in the wasm backend.");var v=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(i.dataId).id,b=m.outChannels,x=0;if(null!=o){var A=r.dataIdMap.get(o.dataId);if(1!==A.shape.length)throw new Error("FusedDepthwiseConv2D only supports rank-1 bias but got "+"rank ".concat(A.shape.length,"."));if(A.shape[0]!==b)throw new Error("FusedDepthwiseConv2D bias shape (".concat(A.shape,") does not ")+"match the number of output channels (".concat(b,")"));x=A.id}var w=m.filterHeight,k=m.filterWidth,S=m.padInfo.top,C=m.padInfo.right,I=m.padInfo.bottom,E=m.padInfo.left,T=m.dilationHeight,N=m.dilationWidth,_=m.strideHeight,M=m.strideWidth,R=m.inChannels,O="SAME"===m.padInfo.type?1:0,P=m.batchSize,F=m.inHeight,D=m.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedDepthwiseConv2D does not support dataFormat:'"+"".concat(d,"'. Please use 'NHWC'."));var L=r.makeOutput(m.outShape,"float32"),z=r.dataIdMap.get(L.dataId).id,B=null==s?0:r.dataIdMap.get(s.dataId).id;return Rhe(v,P,F,D,y,w,k,x,S,C,I,E,O,T,N,_,M,R,b,g,B,f||0,z),L}};var Dhe,Lhe={kernelName:Soe,backendName:"wasm",setupFunc:function(e){Phe=e.wasm.cwrap(Soe,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=n.params,a=n.indices,i=function(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===_ie(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,l=a.slice();l.pop();for(var c=1,d=i;d<n;++d)c*=u[d],l.push(u[d]);var h=[].concat(ta(jie(e.shape).map((function(e){return e/c}))),[1]).slice(0,i);return[l,o,c,h]}(r,a),o=u(i,4),s=o[0],l=o[1],c=o[2],d=o[3],h=t.makeOutput(s,r.dtype);if(0===l)return h;var p=a.shape,f=p[p.length-1],m=t.dataIdMap.get(r.dataId).id,g=t.dataIdMap.get(a.dataId).id,v=new Uint8Array(new Int32Array(d).buffer),y=t.dataIdMap.get(h.dataId).id;return Phe(m,fde[r.dtype],g,l,f,c,v,y),h}};var zhe,Bhe={kernelName:"GatherV2",backendName:"wasm",setupFunc:function(e){Dhe=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){for(var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,i=n.indices,o=r.axis,s=r.batchDims,u=Pie(o,a.shape)[0],l=t.readSync(i.dataId),c=a.shape[u],d=function(e){var t=l[e];Iie(t<=c-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(c-1,"]")}))},h=0;h<l.length;++h)d(h);var p=function(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],l=1,c=1,d=1,h=0;h<r;++h)u.push(e.shape[h]),l*=e.shape[h];for(var p=r;p<n;p++)u.push(e.shape[p]),c*=e.shape[p];for(var f=r;f<a;f++)u.push(t.shape[f]);for(var m=n+1;m<i;m++)u.push(e.shape[m]),d*=e.shape[m];return{batchSize:l,sliceSize:d,outerSize:c,dimSize:s,outputShape:u}}(a,i,u,s),f=Wde({inputs:{x:a},attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]},backend:t}),m=_ie(i.shape),g=Wde({inputs:{x:i},attrs:{shape:[p.batchSize,m/p.batchSize]},backend:t}),v=[p.batchSize,p.outerSize,m/p.batchSize,p.sliceSize],y=t.makeOutput(v,a.dtype);if(0===_ie(a.shape))return y;var b=f.shape.length-1,x=t.dataIdMap.get(f.dataId).id,A=t.dataIdMap.get(g.dataId).id,w=t.dataIdMap.get(y.dataId).id,k=new Uint8Array(new Int32Array(jie(f.shape)).buffer),S=new Uint8Array(new Int32Array(jie(v)).buffer);return Dhe(x,fde[a.dtype],k,b,A,p.batchSize,S,w),t.disposeData(f.dataId),t.disposeData(g.dataId),y.shape=p.outputShape,y}},Whe=wde(Coe,0,"bool"),jhe=wde(Ioe,0,"bool");var Vhe,Hhe={kernelName:Toe,backendName:"wasm",setupFunc:function(e){zhe=e.wasm.cwrap(Toe,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.inputs.x,n=e.attrs.alpha,r=e.backend,a=r.dataIdMap.get(t.dataId).id,i=r.makeOutput(t.shape,"float32");if(0!==_ie(t.shape)){var o=r.dataIdMap.get(i.dataId).id;zhe(a,fde[t.dtype],n,o)}return i}},Uhe=wde("Less",0,"bool"),Ghe=wde(Noe,0,"bool"),Xhe=xde("Log"),qhe=wde(_oe,0,"bool");var Yhe,Khe={kernelName:Moe,backendName:"wasm",setupFunc:function(e){Vhe=e.wasm.cwrap(Moe,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.reductionIndices,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,l=o,c=Rde(o,a,t),d=c.transposed,h=c.axes,p=c.originalAxes,f=c.inputWasTransposed;f&&(l=d,s=t.dataIdMap.get(d.dataId).id),wce("max",h,l.shape.length);var m=u(xce(l.shape,h),2),g=m[0],v=_ie(m[1]),y=t.makeOutput(g,o.dtype);if(0!==_ie(l.shape)){var b=t.dataIdMap.get(y.dataId).id;Vhe(s,fde[o.dtype],v,b)}if(f&&t.disposeData(d.dataId),i){var x=Ace(y.shape,p);y.shape=x}return y}},Zhe=wde("Maximum");var Jhe,Qhe={kernelName:Roe,backendName:"wasm",setupFunc:function(e){Yhe=e.wasm.cwrap(Roe,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=r.dataIdMap.get(a.dataId).id;Iie("float32"===a.dtype,(function(){return"Error in MaxPool: only float32 input is supported. Got ".concat(a.dtype,".")}));var o=n.filterSize,s=n.strides,u=n.pad,l=n.dimRoundingMode,c=rde(a.shape,o,s,1,u,l),d=c.filterHeight,h=c.filterWidth,p=c.padInfo.top,f=c.padInfo.right,m=c.padInfo.bottom,g=c.padInfo.left,v=c.dilationHeight,y=c.dilationWidth,b=c.strideHeight,x=c.strideWidth,A=c.inChannels,w=c.outChannels;if("channelsLast"!==c.dataFormat)throw new Error("wasm backend does not support dataFormat:'"+"".concat(c.dataFormat,"'. Please use 'channelsLast'."));var k=r.makeOutput(c.outShape,"float32"),S=r.dataIdMap.get(k.dataId).id;return Yhe(i,a.shape[0],a.shape[1],a.shape[2],d,h,p,f,m,g,v,y,b,x,A,w,S),k}};var $he,epe={kernelName:Ooe,backendName:"wasm",setupFunc:function(e){Jhe=e.wasm.cwrap(Ooe,null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,l=s,c=o,d=Rde(o,a,t),h=d.transposed,p=d.axes,f=d.originalAxes,m=d.inputWasTransposed,g=p;if(m){var v=t.dataIdMap.get(h.dataId).id;v!==s&&(c=h,l=v,g=Cce(g.length,c.shape.length))}wce("mean",g,c.shape.length);var y=u(xce(c.shape,g),2),b=y[0],x=_ie(y[1]),A=c;"float32"!==c.dtype&&(A=Yde({backend:t,inputs:{x:c},attrs:{dtype:"float32"}}),l=t.dataIdMap.get(A.dataId).id);var w=t.makeOutput(b,"float32");if(0!==_ie(c.shape)){var k=t.dataIdMap.get(w.dataId).id;Jhe(l,x,k)}if(m&&t.disposeData(h.dataId),i){var S=Ace(w.shape,f);w.shape=S}return"float32"!==c.dtype&&t.disposeData(A.dataId),w}};var tpe,npe,rpe={kernelName:Poe,backendName:"wasm",setupFunc:function(e){$he=e.wasm.cwrap(Poe,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,l=s,c=o,d=Rde(o,a,t),h=d.transposed,p=d.axes,f=d.originalAxes,m=d.inputWasTransposed;if(m){var g=t.dataIdMap.get(h.dataId).id;g!==s&&(c=h,l=g)}wce("min",p,c.shape.length);var v=u(xce(c.shape,p),2),y=v[0],b=_ie(v[1]),x=t.makeOutput(y,c.dtype);if(0!==_ie(c.shape)){var A=t.dataIdMap.get(x.dataId).id;$he(l,fde[o.dtype],b,A)}if(m&&t.disposeData(h.dataId),i){var w=Ace(x.shape,f);x.shape=w}return x}},ape=wde(Foe);!function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"}(tpe||(tpe={}));var ipe,ope={kernelName:Doe,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=e.attrs,a=r.paddings,i=r.mode,o=a.map((function(e,n){return e[0]+t.shape[n]+e[1]})),s=n.dataIdMap.get(t.dataId).id,u=n.makeOutput(o,t.dtype),l=n.dataIdMap.get(u.dataId).id,c=new Uint8Array(new Int32Array(t.shape).buffer),d=a.map((function(e){return e[0]})),h=a.map((function(e){return e[1]})),p=new Uint8Array(new Int32Array(d).buffer),f=new Uint8Array(new Int32Array(h).buffer);return npe(s,c,t.shape.length,fde[t.dtype],p,f,tpe[i],l),u},setupFunc:function(e){npe=e.wasm.cwrap(Doe,null,["number","array","number","number","array","array","number","number"])}},spe=wde(Loe),upe=xde("Neg");function lpe(e,t){var n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),r=n[0],a=n[1],i=n[2],o=n[3];return e.wasm._free(t),{pSelectedIndices:r,selectedSize:a,pSelectedScores:i,pValidOutputs:o}}var cpe,dpe={kernelName:Boe,backendName:"wasm",setupFunc:function(e){ipe=e.wasm.cwrap(Boe,"number",["number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,i=r.maxOutputSize,o=r.scoreThreshold,s=n.boxes,u=n.scores,l=t.dataIdMap.get(s.dataId).id,c=t.dataIdMap.get(u.dataId).id,d=lpe(t,ipe(l,c,i,a,o)),h=d.pSelectedIndices,p=d.selectedSize,f=d.pSelectedScores,m=d.pValidOutputs;return t.wasm._free(f),t.wasm._free(m),t.makeOutput([p],"int32",h)}};var hpe,ppe={kernelName:Woe,backendName:"wasm",setupFunc:function(e){cpe=e.wasm.cwrap(Woe,"number",["number","number","number","number","number","bool"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,i=r.maxOutputSize,o=r.scoreThreshold,s=r.padToMaxOutputSize,u=n.boxes,l=n.scores,c=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(l.dataId).id,h=lpe(t,cpe(c,d,i,a,o,s)),p=h.pSelectedIndices,f=h.selectedSize,m=h.pSelectedScores,g=h.pValidOutputs;return t.wasm._free(m),[t.makeOutput([f],"int32",p),t.makeOutput([],"int32",g)]}};var fpe,mpe={kernelName:joe,backendName:"wasm",setupFunc:function(e){hpe=e.wasm.cwrap(joe,"number",["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,i=r.maxOutputSize,o=r.scoreThreshold,s=r.softNmsSigma,u=n.boxes,l=n.scores,c=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(l.dataId).id,h=lpe(t,hpe(c,d,i,a,o,s)),p=h.pSelectedIndices,f=h.selectedSize,m=h.pSelectedScores,g=h.pValidOutputs;return t.wasm._free(g),[t.makeOutput([f],"int32",p),t.makeOutput([f],"float32",m)]}},gpe=wde(zoe,0,"bool");var vpe={kernelName:Voe,backendName:"wasm",setupFunc:function(e){fpe=e.wasm.cwrap(Voe,null,["number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue,u=n.makeOutput([].concat(ta(a.shape),[i]),"int32"),l=n.dataIdMap.get(u.dataId).id,c=n.dataIdMap.get(a.dataId).id;return fpe(c,i,o,s,l),u}};var ype={kernelName:"OnesLike",backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(1),r}};var bpe,xpe={kernelName:Hoe,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Ahe({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){Eie(a,e.shape,"All tensors passed to stack must have matching shapes"),Iie(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=Ahe({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=$de({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeData(e.dataId)})),u}};var Ape,wpe={kernelName:Uoe,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=e.attrs,a=r.paddings,i=r.constantValue,o=a.map((function(e,n){return e[0]+t.shape[n]+e[1]}));if(0===_ie(t.shape))return khe({backend:n,attrs:{shape:o,value:i,dtype:t.dtype}});var s=n.dataIdMap.get(t.dataId).id,u=n.makeOutput(o,t.dtype),l=n.dataIdMap.get(u.dataId).id,c=new Uint8Array(new Int32Array(t.shape).buffer),d=a.map((function(e){return e[0]})),h=a.map((function(e){return e[1]})),p=new Uint8Array(new Int32Array(d).buffer),f=new Uint8Array(new Int32Array(h).buffer);return bpe(s,c,t.shape.length,fde[t.dtype],p,f,i,l),u},setupFunc:function(e){bpe=e.wasm.cwrap(Uoe,null,["number","array","number","number","array","array","number","number"])}},kpe=wde("Pow");var Spe,Cpe={kernelName:Goe,backendName:"wasm",setupFunc:function(e){Ape=e.wasm.cwrap(Goe,null,["number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(a.dataId).id,s=i,u=r,l=u;"float32"!==u.dtype&&(l=Yde({backend:n,inputs:{x:r},attrs:{dtype:"float32"}}),s=n.dataIdMap.get(l.dataId).id);var c=n.makeOutput(r.shape,"float32"),d=n.dataIdMap.get(c.dataId).id;return Ape(s,o,d),"float32"!==u.dtype&&n.disposeData(l.dataId),c}};var Ipe={kernelName:Xoe,backendName:"wasm",setupFunc:function(e){Spe=e.wasm.cwrap(Xoe,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,l=s,c=o,d=Rde(o,a,t),h=d.transposed,p=d.axes,f=d.originalAxes,m=d.inputWasTransposed,g=p;if(m){var v=t.dataIdMap.get(h.dataId).id;v!==s&&(c=h,l=v,g=Cce(g.length,c.shape.length))}wce("prod",g,c.shape.length);var y=u(xce(c.shape,g),2),b=y[0],x=_ie(y[1]),A=t.makeOutput(b,c.dtype);if(0!==_ie(c.shape)){var w=t.dataIdMap.get(A.dataId).id;Spe(l,x,fde[A.dtype],w)}if(m&&t.disposeData(h.dataId),i){var k=Ace(A.shape,f);A.shape=k}return A}};var Epe,Tpe={kernelName:qoe,backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=function(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return Gie(0,r);var a=Gie(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return a}(r,a,i,o),u=t.makeOutput([s.length],o);return t.typedArrayFromHeap(u).set(s),u}},Npe=wde(yoe),_pe=xde(Yoe),Mpe=xde(Qoe);var Rpe,Ope={kernelName:Joe,backendName:"wasm",setupFunc:function(e){Epe=e.wasm.cwrap(Joe,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=r.images,o=a.alignCorners,s=a.halfPixelCenters,l=u(a.size,2),c=l[0],d=l[1],h=u(i.shape,4),p=h[0],f=h[1],m=h[2],g=h[3],v=[p,c,d,g],y=n.dataIdMap.get(i.dataId);"float32"!==y.dtype&&(t=Yde({backend:n,inputs:{x:i},attrs:{dtype:"float32"}}),y=n.dataIdMap.get(t.dataId));var b=y.id,x=n.makeOutput(v,"float32");if(0===_ie(i.shape))return x;var A=n.dataIdMap.get(x.dataId).id;return Epe(b,p,f,m,g,c,d,o?1:0,s?1:0,A),null!=t&&n.disposeData(t.dataId),x}};var Ppe,Fpe={kernelName:$oe,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=Pie(r.dims,a.shape);if(0===a.shape.length)return Ide({inputs:{x:a},backend:n});var o=n.makeOutput(a.shape,a.dtype),s=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(o.dataId).id,l=new Uint8Array(new Int32Array(i).buffer),c=new Uint8Array(new Int32Array(a.shape).buffer);Rpe(s,l,i.length,c,a.shape.length,u);var d=Wde({inputs:{x:o},attrs:{shape:a.shape},backend:n});return n.disposeData(o.dataId),d},setupFunc:function(e){Rpe=e.wasm.cwrap($oe,null,["number","array","number","array","number","number"])}};var Dpe,Lpe={kernelName:kse,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=r.radians,o=r.fillValue,s=r.center,l=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(a.dataId).id,d=n.dataIdMap.get(l.dataId).id,h=u(a.shape,4),p=h[0],f=h[1],m=h[2],g=h[3],v=function(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}(s,f,m),y=u(v,2),b=y[0],x=y[1],A="number"===typeof o?[o,o,o,0===o?0:255]:[].concat(ta(o),[255]),w=new Uint8Array(new Int32Array(A).buffer);return Ppe(c,p,f,m,g,i,b,x,w,A.length,d),l},setupFunc:function(e){Ppe=e.wasm.cwrap(kse,null,["number","number","number","number","number","number","number","number","array","number","number"])}},zpe=xde(ese),Bpe=xde("Rsqrt");var Wpe,jpe={kernelName:tse,backendName:"wasm",setupFunc:function(e){Dpe=e.wasm.cwrap(tse,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.indices,i=n.updates,o=r.shape,s=t.makeOutput(o,i.dtype);if(0===_ie(o))return s;var u=function(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:_ie(t.shape)/u,sliceSize:o,strides:[].concat(ta(jie(n.slice(0,a))),[1]),outputSize:_ie(n)}}(0,a,o),l=u.sliceRank,c=u.numUpdates,d=u.sliceSize,h=u.strides,p=u.outputSize,f=t.dataIdMap.get(a.dataId).id,m=t.dataIdMap.get(i.dataId).id,g=new Uint8Array(new Int32Array(h).buffer),v=t.dataIdMap.get(s.dataId).id;return Dpe(f,m,fde[i.dtype],l,c,d,g,p,v),s}};var Vpe,Hpe={kernelName:nse,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=n.dataIdMap.get(r.dataId).id,s=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(i.dataId).id,l=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(l.dataId).id,d=r.shape.length,h=a.shape.length,p=0===d||d>1||1===h?1:_ie(a.shape.slice(1));return Wpe(o,s,u,p,c),l},setupFunc:function(e){Wpe=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}};var Upe,Gpe={kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){Vpe=e.wasm.cwrap(ase,null,["number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.x,r=t.dataIdMap.get(n.dataId).id,a=t.makeOutput(n.shape,n.dtype),i=t.dataIdMap.get(a.dataId).id;return 0===_ie(a.shape)||Vpe(r,i),a}},Xpe=xde("Sin");var qpe={kernelName:use,backendName:"wasm",setupFunc:function(e){Upe=e.wasm.cwrap(use,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.logits,r=e.attrs.dim,a=t.dataIdMap.get(n.dataId).id,i=t.makeOutput(n.shape,n.dtype),o=t.dataIdMap.get(i.dataId).id,s=n.shape[r],u=_ie(n.shape)/s;return 0===_ie(i.shape)||Upe(a,o,s,u),i}};var Ype,Kpe={kernelName:"SpaceToBatchND",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings,s=_ie(i),u=[[0,0]];u.push.apply(u,ta(o));for(var l=1+i.length;l<a.shape.length;++l)u.push([0,0]);var c=wpe.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=dde(c.shape,i,s,!1),h=hde(d.length,i.length,!1),p=pde(c.shape,i,s,!1),f=Wde({inputs:{x:c},backend:n,attrs:{shape:d}}),m=Nde({inputs:{x:f},backend:n,attrs:{perm:h}}),g=Wde({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeData(c.dataId),n.disposeData(f.dataId),n.disposeData(m.dataId),g}};var Zpe,Jpe={kernelName:lse,backendName:"wasm",setupFunc:function(e){Ype=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t,n,r=e.backend,a=e.inputs,i=a.indices,o=a.values,s=a.denseShape,u=a.defaultValue,l=i.shape[0],c=i.shape[1],d=r.readSync(s.dataId)[0],h=[l+d,c],p=r.dataIdMap.get(i.dataId).id,f=r.dataIdMap.get(o.dataId).id,m=r.dataIdMap.get(u.dataId).id,g=r.makeOutput(h,i.dtype),v=r.dataIdMap.get(g.dataId).id,y=r.makeOutput(h.slice(0,1),o.dtype),b=r.dataIdMap.get(y.dataId).id,x=r.makeOutput([d],"bool"),A=r.dataIdMap.get(x.dataId).id,w=r.makeOutput([l],i.dtype),k=r.dataIdMap.get(w.dataId).id,S=r.makeOutput([4],"int32"),C=r.dataIdMap.get(S.dataId).id,I=Ype(p,f,fde[o.dtype],l,d,c,m,v,b,A,k,C),E=r.readSync(S.dataId);switch(E[0]){case 1:n=E[1],t="Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(n);break;case 2:t=function(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}(E[1],E[2]);break;case 3:t=function(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}(E[1],E[2],E[3]);break;default:t=""}if(r.disposeData(S.dataId),t)throw r.disposeData(g.dataId),r.disposeData(y.dataId),r.disposeData(x.dataId),r.disposeData(w.dataId),new Error(t);var T=g,N=y;return I!==h[0]&&(T=Gde({inputs:{x:g},attrs:{begin:0,size:[I,c]},backend:r}),N=Gde({inputs:{x:y},attrs:{begin:0,size:I},backend:r}),r.disposeData(g.dataId),r.disposeData(y.dataId)),[T,N,x,w]}};var Qpe,$pe={kernelName:cse,backendName:"wasm",setupFunc:function(e){Zpe=e.wasm.cwrap(cse,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=n.inputIndices,a=n.inputShape,i=n.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=t.dataIdMap.get(r.dataId).id,s=t.dataIdMap.get(a.dataId).id,u=t.dataIdMap.get(i.dataId).id,l=r.shape[0],c=_ie(i.shape),d=t.makeOutput([l,c],r.dtype),h=t.dataIdMap.get(d.dataId).id,p=t.makeOutput([c],i.dtype),f=t.dataIdMap.get(p.dataId).id,m=t.makeOutput([3],"int32"),g=t.dataIdMap.get(m.dataId).id;Zpe(o,s,u,l,h,f,g);var v,y,b,x,A,w=t.readSync(m.dataId);switch(w[0]){case 0:x=w[1],A=w[2],v="only one output dimension may be -1, not both ".concat(x," and ").concat(A);break;case 1:y=w[1],b=w[2],v="size ".concat(y," must be non-negative, not ").concat(b);break;case 2:v="reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero";break;case 3:v=function(e,t){var n=_ie(e),r=_ie(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}(Array.from(t.readSync(a.dataId)),Array.from(t.readSync(p.dataId)));break;case 4:v=function(e,t){var n=_ie(e),r=_ie(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}(Array.from(t.readSync(a.dataId)),Array.from(t.readSync(p.dataId)));break;default:v=""}if(t.disposeData(m.dataId),v)throw t.disposeData(d.dataId),t.disposeData(p.dataId),new Error(v);return[d,p]}};function efe(e){Qpe=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function tfe(e,t){var n=e.backend,r=e.inputs,a=r.data,i=r.indices,o=r.segmentIds,s=i.shape[0],u=n.readSync(o.dataId,s-1,s)[0],l=s>0?u+1:0;if(l<0)throw new Error("segment ids must be >= 0");var c=a.shape.slice();c[0]=l;var d=n.dataIdMap.get(a.dataId).id,h=n.dataIdMap.get(i.dataId).id,p=n.dataIdMap.get(o.dataId).id,f=n.makeOutput(c,a.dtype),m=n.dataIdMap.get(f.dataId).id,g=n.makeOutput([4],"int32"),v=n.dataIdMap.get(g.dataId).id;Qpe(d,fde[a.dtype],a.shape[0],h,p,m,v,t,0);var y,b=n.readSync(g.dataId);switch(b[0]){case 0:y="segment ids must be >= 0";break;case 1:y="segment ids are not increasing";break;case 2:y=function(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}(b[1],b[2]);break;case 3:y=function(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}(b[1],b[2],b[3]);break;default:y=""}if(n.disposeData(g.dataId),y)throw n.disposeData(f.dataId),new Error(y);return f}var nfe={kernelName:dse,backendName:"wasm",setupFunc:efe,kernelFunc:function(e){return tfe(e,!0)}};var rfe={kernelName:hse,backendName:"wasm",setupFunc:efe,kernelFunc:function(e){return tfe(e,!1)}};var afe,ife={kernelName:sse,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.numOrSizeSplits,o=Pie(n.axis,a.shape)[0],s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)Iie(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);Iie(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}Iie(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}(a,i,o),u=new Array(a.shape.length).fill(0),l=a.shape.slice();return s.map((function(e){var t=ta(l);t[o]=e;var n=Gde({inputs:{x:a},attrs:{begin:u,size:t},backend:r});return u[o]+=e,n}))}},ofe=xde(ise),sfe=xde("Square"),ufe=wde(pse);var lfe,cfe={kernelName:wse,backendName:"wasm",setupFunc:function(e){afe=e.wasm.cwrap(wse,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.alpha,a=n.x,i=t.dataIdMap.get(a.dataId).id,o=t.makeOutput(a.shape,a.dtype),s=t.dataIdMap.get(o.dataId).id;return afe(i,r,fde[a.dtype],s),o}};var dfe,hfe={kernelName:fse,backendName:"wasm",setupFunc:function(e){lfe=e.wasm.cwrap(fse,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=r.x,o=a.begin,s=a.end,u=a.strides,l=a.beginMask,c=a.endMask,d=a.ellipsisMask,h=a.newAxisMask,p=a.shrinkAxisMask,f=Ele(i.shape,o,s,u,l,c,d,h,p),m=f.finalShapeSparse,g=f.finalShape,v=f.isIdentity,y=f.sliceDim0,b=f.isSimpleSlice,x=f.begin,A=f.end,w=f.strides;if(v)t=Wde({inputs:{x:i},backend:n,attrs:{shape:g}});else if(y||b){Iie(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var k=function(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}(x,A,w),S=Gde({inputs:{x:i},backend:n,attrs:{begin:x,size:k}});t=Wde({inputs:{x:S},backend:n,attrs:{shape:g}}),n.disposeData(S.dataId)}else{var C=n.makeOutput(m,"float32"),I=n.dataIdMap.get(i.dataId).id,E=new Uint8Array(new Int32Array(jie(i.shape)).buffer),T=new Uint8Array(new Int32Array(x).buffer),N=new Uint8Array(new Int32Array(A).buffer),_=new Uint8Array(new Int32Array(w).buffer),M=new Uint8Array(new Int32Array(m).buffer),R=new Uint8Array(new Int32Array(jie(m)).buffer),O=n.dataIdMap.get(C.dataId).id;lfe(I,E,i.shape.length,T,N,_,M,R,m.length,O),t=Wde({inputs:{x:C},backend:n,attrs:{shape:g}}),n.disposeData(C.dataId)}return t}},pfe=wde("Sub");var ffe,mfe={kernelName:ose,backendName:"wasm",setupFunc:function(e){dfe=e.wasm.cwrap(ose,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,l=s,c=o,d=Rde(o,a,t),h=d.transposed,p=d.axes,f=d.originalAxes,m=d.inputWasTransposed,g=p;if(m){var v=t.dataIdMap.get(h.dataId).id;v!==s&&(c=h,l=v,g=Cce(g.length,c.shape.length))}wce("sum",g,c.shape.length);var y=u(xce(c.shape,g),2),b=y[0],x=_ie(y[1]),A=t.makeOutput(b,c.dtype);if(0!==_ie(c.shape)){var w=t.dataIdMap.get(A.dataId).id;dfe(l,x,fde[A.dtype],w)}if(m&&t.disposeData(h.dataId),i){var k=Ace(A.shape,f);A.shape=k}return A}},gfe=xde("Tan"),vfe=xde("Tanh");var yfe,bfe={kernelName:gse,backendName:"wasm",setupFunc:function(e){ffe=e.wasm.cwrap(gse,null,["number","array","number","array","number","number"])},kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=n.dataIdMap.get(a.dataId).id,o=r.reps,s=new Array(a.shape.length),u=0;u<s.length;u++)s[u]=a.shape[u]*o[u];var l=new Uint8Array(new Int32Array(a.shape).buffer),c=new Uint8Array(new Int32Array(s).buffer),d=n.makeOutput(s,a.dtype),h=n.dataIdMap.get(d.dataId).id;return ffe(i,l,a.shape.length,c,s.length,fde[d.dtype],h),d}};var xfe,Afe={kernelName:vse,backendName:"wasm",setupFunc:function(e){yfe=e.wasm.cwrap(vse,null,["number","array","number","number","number","bool","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=n.dataIdMap.get(a.dataId).id,u=new Uint8Array(new Int32Array(a.shape).buffer),l=a.shape.slice();l[l.length-1]=i;var c=n.makeOutput(l,a.dtype),d=n.dataIdMap.get(c.dataId).id,h=n.makeOutput(l,"int32"),p=n.dataIdMap.get(h.dataId).id;return yfe(s,u,a.shape.length,fde[a.dtype],i,o,d,p),[c,h]}};var wfe={kernelName:yse,backendName:"wasm",setupFunc:function(e){xfe=e.wasm.cwrap(yse,null,["number","number","bool","number","number","number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=r.image,o=r.transforms,s=a.interpolation,l=a.fillMode,c=a.fillValue,d=a.outputShape,h=u(i.shape,4),p=h[0],f=h[1],m=h[2],g=h[3],v=u(null!=d?d:[f,m],2),y=v[0],b=v[1],x=[p,y,b,g],A=new Uint8Array(new Int32Array(jie(i.shape)).buffer),w=n.makeOutput(x,i.dtype),k=n.dataIdMap.get(w.dataId).id,S=n.dataIdMap.get(i.dataId).id,C=n.dataIdMap.get(o.dataId).id,I="nearest"===s?1:2;switch(l){case"constant":default:t=1;break;case"reflect":t=2;break;case"wrap":t=3;break;case"nearest":t=4}return xfe(S,C,o.shape[0]>1,p,y,b,g,m,f,A,i.shape.length-1,I,t,c,k),w}};var kfe={kernelName:xse,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape[i],s=a.shape.length,u=new Array(s-1),l=0,c=0;c<s;c++)c!==i&&(u[l++]=a.shape[c]);var d=new Array(o),h=new Array(s).fill(0),p=a.shape.slice();p[i]=1;for(var f=0;f<d.length;f++)h[i]=f,d[f]=Gde({inputs:{x:a},attrs:{begin:h,size:p},backend:n});return d.map((function(e){return{dataId:e.dataId,dtype:e.dtype,shape:u}}))}};for(var Sfe={kernelName:Ase,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(0),r}},Cfe=0,Ife=[bde,Ade,Sde,Cde,Pde,Dde,zde,Bde,Hde,qde,Zde,Jde,Qde,the,rhe,ohe,she,uhe,che,hhe,fhe,ghe,vhe,yhe,bhe,xhe,whe,Che,Ehe,The,Nhe,Mhe,Ohe,Fhe,Lhe,Bhe,Whe,jhe,Tde,Hhe,Uhe,Ghe,Xhe,qhe,Khe,Zhe,Qhe,epe,rpe,ape,ope,spe,upe,dpe,ppe,mpe,gpe,vpe,ype,xpe,wpe,kpe,Cpe,Ipe,Tpe,Npe,_pe,Mpe,Vde,Ope,Fpe,Lpe,zpe,Bpe,jpe,Hpe,Gpe,Xpe,Xde,qpe,Kpe,Jpe,$pe,nfe,rfe,ife,ofe,sfe,ufe,cfe,hfe,pfe,mfe,gfe,vfe,bfe,Afe,wfe,Mde,kfe,Sfe];Cfe<Ife.length;Cfe++){Ose(Ife[Cfe])}var Efe=Qie();Efe.registerFlag("WASM_HAS_SIMD_SUPPORT",Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11])));case 1:case"end":return e.stop()}}),e)})))),Efe.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",Mr(Nr().mark((function e(){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Efe.get("IS_NODE")){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),e.abrupt("return",WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])));case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))));var Tfe=n(9056),Nfe=n.n(Tfe),_fe='"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",function(data){onmessage({data:data})});var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8"))},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"\n");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=((info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports});self.onmessage=(e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob==="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module).then(function(instance){Module=instance})}else if(e.data.cmd==="run"){Module["__performance_now_clock_drift"]=performance.now()-e.data.time;Module["__emscripten_thread_init"](e.data.threadInfoStruct,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInit();try{var result=Module["invokeEntryPoint"](e.data.start_routine,e.data.arg);if(Module["keepRuntimeAlive"]()){Module["PThread"].setExitStatus(result)}else{Module["__emscripten_thread_exit"](result)}}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processThreadQueue"){if(Module["_pthread_self"]()){Module["_emscripten_current_thread_process_queued_calls"]()}}else if(e.data.cmd==="processProxyingQueue"){if(Module["_pthread_self"]()){Module["_emscripten_proxy_execute_queue"](e.data.queue)}}else{err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){err("worker.js onmessage() captured an uncaught exception: "+ex);if(ex&&ex.stack)err(ex.stack);if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}});',Mfe=n(136),Rfe=n.n(Mfe),Ofe=function(e){Kr(n,e);var t=Zr(n);function n(e){var r;return Jr(this,n),(r=t.call(this)).wasm=e,r.dataIdNextNumber=1,r.wasm.tfjs.initWithThreadsCount(Ufe),r.wasm.tfjs.getThreadsCount(),r.dataIdMap=new kie(jr(r),vue),r}return $r(n,[{key:"write",value:function(e,t,n){var r={id:this.dataIdNextNumber++};return this.move(r,e,t,n,1),r}},{key:"numDataIds",value:function(){return this.dataIdMap.numDataIds()}},{key:"time",value:function(){var e=Mr(Nr().mark((function e(t){var n,r;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Bse(),t(),r=Bse()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"move",value:function(e,t,n,r,a){var i=this.dataIdNextNumber++;if("string"!==r){var o=_ie(n),s=o*Lie(r),u=this.wasm._malloc(s);this.dataIdMap.set(e,{id:i,memoryOffset:u,shape:n,dtype:r,refCount:a}),this.wasm.tfjs.registerTensor(i,o,u),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,s),u)}else{var l=t;this.dataIdMap.set(e,{id:i,stringBytes:l,shape:n,dtype:r,memoryOffset:null,refCount:a})}}},{key:"read",value:function(){var e=Mr(Nr().mark((function e(t){return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e,t,n){var r=this.dataIdMap.get(e),a=r.memoryOffset,i=r.dtype,o=r.shape,s=r.stringBytes;if("string"===i)return null!=t&&0!==t||!(null==n||n>=s.length)?s.slice(t,n):s;t=t||0,n=n||_ie(o);var u=Lie(i);return function(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype ".concat(t))}}(this.wasm.HEAPU8.slice(a+t*u,a+n*u).buffer,i)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.dataIdMap.has(e)){var n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}},{key:"refCount",value:function(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}},{key:"incRef",value:function(e){var t=this.dataIdMap.get(e);null!=t&&t.refCount++}},{key:"floatPrecision",value:function(){return 32}},{key:"getMemoryOffset",value:function(e){return this.dataIdMap.get(e).memoryOffset}},{key:"dispose",value:function(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}},{key:"memory",value:function(){return{unreliable:!1}}},{key:"makeOutput",value:function(e,t,n){var r;if(null==n)r=this.write(null,e,t);else{var a=this.dataIdNextNumber++;r={id:a},this.dataIdMap.set(r,{id:a,memoryOffset:n,shape:e,dtype:t,refCount:1});var i=_ie(e);this.wasm.tfjs.registerTensor(a,i,n)}return{dataId:r,shape:e,dtype:t}}},{key:"typedArrayFromHeap",value:function(e){var t=e.shape,n=e.dtype,r=e.dataId,a=this.wasm.HEAPU8.buffer,i=this.dataIdMap.get(r).memoryOffset,o=_ie(t);switch(n){case"float32":return new Float32Array(a,i,o);case"int32":return new Int32Array(a,i,o);case"bool":return new Uint8Array(a,i,o);default:throw new Error("Unknown dtype ".concat(n))}}}]),n}(Sie);function Pfe(e){return function(t,n){return function(e,t){return Qie().platform.fetch(e,t)}(e,{credentials:"same-origin"}).then((function(r){r.ok||t.env.a("failed to load wasm binary file at '".concat(e,"'")),r.arrayBuffer().then((function(e){WebAssembly.instantiate(e,t).then((function(e){n(e.instance,e.module)}))}))})),{}}}function Ffe(e,t,n){if(null!=Bfe)return Bfe;var r="tfjs-backend-wasm.wasm";return e&&t?r="tfjs-backend-wasm-threaded-simd.wasm":e&&(r="tfjs-backend-wasm-simd.wasm"),null!=jfe&&null!=jfe[r]?jfe[r]:n+r}function Dfe(){return Lfe.apply(this,arguments)}function Lfe(){return Lfe=Mr(Nr().mark((function e(){var t,n,r,a;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Qie().getAsync("WASM_HAS_SIMD_SUPPORT"),Qie().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);case 2:return t=e.sent,n=u(t,2),r=n[0],a=n[1],e.abrupt("return",new Promise((function(e,t){var n={locateFile:function(e,t){if(e.endsWith(".worker.js")){var n=_fe.replace(/\n/g,"\\n"),i=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(i)}return e.endsWith(".wasm")?Ffe(r,a,null!=Wfe?Wfe:t):t+e}};Hfe&&(n.instantiateWasm=Pfe(Ffe(r,a,null!=Wfe?Wfe:"")));var i,o=!1;n.onAbort=function(){if(!o&&!Vfe){Vfe=!0;t({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"})}},a&&r&&null==Bfe?(n.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+Nfe().toString()],{type:"text/javascript"}),i=Nfe()(n)):i=Rfe()(n),i.then((function(t){o=!0,Vfe=!1;t.tfjs={init:t.cwrap("init",null,[]),initWithThreadsCount:t.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:t.cwrap("get_threads_count","number",[]),registerTensor:t.cwrap("register_tensor",null,["number","number","number"]),disposeData:t.cwrap("dispose_data",null,["number"]),dispose:t.cwrap("dispose",null,[])},e({wasm:t})}))})));case 7:case"end":return e.stop()}}),e)}))),Lfe.apply(this,arguments)}var zfe=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],Bfe=null,Wfe=null,jfe={},Vfe=!1,Hfe=!1;var Ufe=-1;!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;vue.registerBackend(e,t,n)}("wasm",Mr(Nr().mark((function e(){var t,n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dfe();case 2:return t=e.sent,n=t.wasm,e.abrupt("return",new Ofe(n));case 5:case"end":return e.stop()}}),e)}))),2);var Gfe=n.p+"static/media/tfjs-backend-wasm.2b1202ac2cd1b46a0ba4.wasm",Xfe=rn((function(t,n){var r,a=t.use,i=Gt(t,["use"]),o=Mn().typography,s=(null===o||void 0===o?void 0:o[a])||(null===o||void 0===o?void 0:o.defaultTag)||"span",u=en(t,[(r={},r["mdc-typography--"+t.use]=t.use,r)]);return e.createElement($t,Ut({tag:s},i,{ref:n,className:u}))})),qfe=(n(8697),function(e,t){return qfe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},qfe(e,t)});var Yfe=function(){return Yfe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Yfe.apply(this,arguments)};function Kfe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function Zfe(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}var Jfe={animation:{prefixed:"-webkit-animation",standard:"animation"},transform:{prefixed:"-webkit-transform",standard:"transform"},transition:{prefixed:"-webkit-transition",standard:"transition"}};function Qfe(e){return Boolean(e.document)&&"function"===typeof e.document.createElement}var $fe,eme,tme=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),nme={CLOSED_CLASS:"mdc-linear-progress--closed",INDETERMINATE_CLASS:"mdc-linear-progress--indeterminate",REVERSED_CLASS:"mdc-linear-progress--reversed"},rme={ARIA_VALUENOW:"aria-valuenow",BUFFER_BAR_SELECTOR:".mdc-linear-progress__buffer-bar",FLEX_BASIS:"flex-basis",PRIMARY_BAR_SELECTOR:".mdc-linear-progress__primary-bar"},ame=function(e){function t(n){return e.call(this,Yfe(Yfe({},t.defaultAdapter),n))||this}return function(e,t){function n(){this.constructor=e}qfe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return nme},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return rme},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},forceLayout:function(){},setBufferBarStyle:function(){return null},setPrimaryBarStyle:function(){return null},hasClass:function(){return!1},removeAttribute:function(){},removeClass:function(){},setAttribute:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.isDeterminate=!this.adapter.hasClass(nme.INDETERMINATE_CLASS),this.isReversed=this.adapter.hasClass(nme.REVERSED_CLASS),this.progress=0,this.buffer=1},t.prototype.setDeterminate=function(e){if(this.isDeterminate=e,this.isDeterminate)return this.adapter.removeClass(nme.INDETERMINATE_CLASS),this.adapter.setAttribute(rme.ARIA_VALUENOW,this.progress.toString()),this.setPrimaryBarProgress(this.progress),void this.setBufferBarProgress(this.buffer);this.isReversed&&(this.adapter.removeClass(nme.REVERSED_CLASS),this.adapter.forceLayout(),this.adapter.addClass(nme.REVERSED_CLASS)),this.adapter.addClass(nme.INDETERMINATE_CLASS),this.adapter.removeAttribute(rme.ARIA_VALUENOW),this.setPrimaryBarProgress(1),this.setBufferBarProgress(1)},t.prototype.getDeterminate=function(){return this.isDeterminate},t.prototype.setProgress=function(e){this.progress=e,this.isDeterminate&&(this.setPrimaryBarProgress(e),this.adapter.setAttribute(rme.ARIA_VALUENOW,e.toString()))},t.prototype.getProgress=function(){return this.progress},t.prototype.setBuffer=function(e){this.buffer=e,this.isDeterminate&&this.setBufferBarProgress(e)},t.prototype.setReverse=function(e){this.isReversed=e,this.isDeterminate||(this.adapter.removeClass(nme.INDETERMINATE_CLASS),this.adapter.forceLayout(),this.adapter.addClass(nme.INDETERMINATE_CLASS)),this.isReversed?this.adapter.addClass(nme.REVERSED_CLASS):this.adapter.removeClass(nme.REVERSED_CLASS)},t.prototype.open=function(){this.adapter.removeClass(nme.CLOSED_CLASS)},t.prototype.close=function(){this.adapter.addClass(nme.CLOSED_CLASS)},t.prototype.setPrimaryBarProgress=function(e){var t="scaleX("+e+")",n="undefined"!==typeof window?function(e,t){if(Qfe(e)&&t in Jfe){var n=e.document.createElement("div"),r=Jfe[t],a=r.standard,i=r.prefixed;return a in n.style?a:i}return t}(window,"transform"):"transform";this.adapter.setPrimaryBarStyle(n,t)},t.prototype.setBufferBarProgress=function(e){var t=100*e+"%";this.adapter.setBufferBarStyle(rme.FLEX_BASIS,t)},t}(tme),ime=rn((function(t,n){var r=t.reversed,a=t.closed,i=t.progress,o=(t.buffer,t.foundationRef,Kfe(t,["reversed","closed","progress","buffer","foundationRef"])),s=en(t,["mdc-linear-progress",{"mdc-linear-progress--reversed":r,"mdc-linear-progress--closed":a}]),u=function(t){var n=function(e,t,n,r){var a,i=null!==(a=null===e||void 0===e?void 0:e.querySelector(t))&&void 0!==a?a:null;i&&(i.style[n]=r)},r=Dn({props:t,elements:{rootEl:!0},foundation:function(e){var t=e.rootEl;return new ame({addClass:function(e){return t.addClass(e)},forceLayout:function(){var e;return null===(e=t.ref)||void 0===e?void 0:e.offsetWidth},hasClass:function(e){return t.hasClass(e)},removeClass:function(e){return t.removeClass(e)},setBufferBarStyle:function(e,r){n(t.ref,ame.strings.BUFFER_BAR_SELECTOR,e,r)},setPrimaryBarStyle:function(e,r){n(t.ref,ame.strings.PRIMARY_BAR_SELECTOR,e,r)},setAttribute:function(e,n){t.setProp(e,n)},removeAttribute:function(e){return t.removeProp(e)}})}}),a=r.foundation,i=Kfe(r,["foundation"]),o=Zfe((0,e.useState)(void 0),2),s=o[0],u=o[1];return(0,e.useEffect)((function(){a.setProgress(t.progress||0);var e=void 0!==t.progress;e!==s&&(a.setDeterminate(e),u(e))}),[t.progress,s,a]),(0,e.useEffect)((function(){a.setBuffer(t.buffer||0)}),[t.buffer,a]),(0,e.useEffect)((function(){a.setReverse(!!t.reversed)}),[t.reversed,a]),(0,e.useEffect)((function(){t.closed?a.close():a.open()}),[t.closed,a]),Yfe({foundation:a},i)}(t).rootEl;return e.createElement($t,Yfe({"aria-label":"Progress Bar"},o,{"aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":i,tag:"nav",role:"progressbar",element:u,className:s,ref:n}),e.createElement(ome,null))})),ome=e.memo((function(){return e.createElement(e.Fragment,null,e.createElement("div",{className:"mdc-linear-progress__buffer"},e.createElement("div",{className:"mdc-linear-progress__buffer-bar"}),e.createElement("div",{className:"mdc-linear-progress__buffer-dots"})),e.createElement("div",{className:"mdc-linear-progress__bar mdc-linear-progress__primary-bar"},e.createElement("div",{className:"mdc-linear-progress__bar-inner"})),e.createElement("div",{className:"mdc-linear-progress__bar mdc-linear-progress__secondary-bar"},e.createElement("div",{className:"mdc-linear-progress__bar-inner"})))})),sme=(n(881),n(6417));function ume(e){return(0,sme.jsxs)(Xfe,{use:"body2",tag:"div",className:Oe($fe||($fe=r(["text-align: center"]))),children:[e.msg," ",e.status?(0,sme.jsx)(yie(),{style:{color:"#1faa00"}}):(0,sme.jsx)(xie(),{style:{color:"#a30000"}})]})}function lme(e,t,n,r){var a=e?"Camera Ready:":"Camera Supported",i=e?t:e;return(0,sme.jsxs)(on,{children:[(0,sme.jsx)(sn,{desktop:4,span:2,phone:4,children:(0,sme.jsx)(ume,{msg:a,status:i})}),(0,sme.jsx)(sn,{desktop:4,span:2,phone:4,children:(0,sme.jsx)(ume,{msg:"Model loaded:",status:r>1})}),(0,sme.jsx)(sn,{desktop:4,span:2,phone:4,children:(0,sme.jsx)(ume,{msg:"Face Detected:",status:n})})]})}var cme=function(t){var n=(0,e.useContext)(wie),a=(0,e.useRef)(null),i=(0,e.useRef)(null),o=u((0,e.useState)(!1),2),s=o[0],l=o[1],d=u((0,e.useState)("mediaDevices"in navigator),1)[0],h=t.onFaceDetectionResult,p=n.faceRecognition.detectionInterval,f=n.faceRecognition.scoreThreshold,m=n.enableDetection,g=u((0,e.useState)(!1),2),v=g[0],y=g[1],b=(0,e.useRef)(null);(0,e.useEffect)((function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Vfe)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"===typeof e)Wfe=e;else{jfe=e;var n=zfe.filter((function(e){return null==jfe[e]}));if(n.length>0)throw new Error("There were no entries found for the following binaries: "+"".concat(n.join(","),". Please either call setWasmPaths with a ")+"map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.")}Hfe=t}(Gfe);var e={modelBasePath:"https://cdn.jsdelivr.net/npm/@vladmandic/human/models/",wasmPath:"https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm@3.9.0/dist/",face:{enabled:!0,emotion:{enabled:!1},antispoof:{enabled:!1},liveness:{enabled:!1},mesh:{enabled:!0},attention:{enabled:!1},iris:{enabled:!1},description:{enabled:!1}},body:{enabled:!1},hand:{enabled:!1},object:{enabled:!1},gesture:{enabled:!1}};b.current=new gie(e),b.current.warmup(e),console.log("Human init:",b)}),[]),c((function(){function e(){return e=Mr(Nr().mark((function e(){var t,r,o,s;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),t=new Date,r=a.current.video,e.next=6,b.current.detect(r);case 6:o=e.sent,s=o.face.filter((function(e){return e.score>f})).at(-1),h(s),l(s),console.log("Detection used ",(new Date-t).toString(),"ms"),n.faceRecognition.showFaceRecognitionCanvas&&(b.current.draw.canvas(r,i.current),b.current.draw.all(i.current,o));case 12:return e.prev=12,y(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,,12,15]])}))),e.apply(this,arguments)}m&&w&&(v||b.current&&function(){e.apply(this,arguments)}())}),1e3*p,!0);var x={width:{ideal:640},height:{ideal:480},facingMode:"user"};m&&!n.faceRecognition.showCameraPreview&&navigator.mediaDevices.getSupportedConstraints&&navigator.mediaDevices.getSupportedConstraints().frameRate&&(x.frameRate={ideal:2});var A=n.faceRecognition.showCameraPreview?"100%":"1px",w=!!a.current&&(void 0!==a.current.video.readyState&&a.current.video.readyState>2),k=b.current?Object.keys(b.current.models).filter((function(e){return null!==b.current.models[e]})).length:0,S=.1*d+.4*w+k/2*.5;return(0,sme.jsx)(sme.Fragment,{children:(0,sme.jsxs)(on,{children:[(0,sme.jsxs)(sn,{span:12,children:[(0,sme.jsx)(ime,{closed:S>=1,progress:S}),m&&n.faceRecognition.showFaceRecognitionStatus?lme(d,w,s,k):(0,sme.jsx)(sme.Fragment,{})]}),m?(0,sme.jsx)(sn,{span:12,children:(0,sme.jsx)("div",{className:Oe(eme||(eme=r(["\n              height: ",";\n              width: ",";\n              overflow: hidden;\n            "])),A,A),children:(0,sme.jsx)(Or(),{audio:!1,ref:a,screenshotFormat:"image/jpeg",videoConstraints:x})})}):(0,sme.jsx)(sme.Fragment,{}),m&&b&&n.faceRecognition.showFaceRecognitionCanvas?(0,sme.jsx)(sn,{span:12,children:(0,sme.jsx)("canvas",{width:"640px",height:"480px",ref:i})}):(0,sme.jsx)(sme.Fragment,{})]})})},dme=n(1465),hme=n.n(dme);var pme=function(t){var n=(0,e.useRef)(null),r=(0,e.useRef)(null),a=t.startTime;return(0,e.useEffect)((function(){null===r.current&&(r.current=new(hme())(n.current,new Date(a),{face:"HourCounter",showLabels:!1}),r.current.originalValue=new Date(a),r.current.value=new Date,r.current.start()),(a!==r.current.originalValue.toJSON()||Math.abs(new Date-r.current.value.value)>1e3)&&(r.current.originalValue=new Date(a),r.current.value=new Date)})),(0,sme.jsx)("div",{ref:n})};function fme(){return fme=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fme.apply(this,arguments)}var mme=e.createContext({getPrefixCls:function(e,t){return t||(e?"ant-".concat(e):"ant")}}),gme=mme.Consumer;var vme=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},yme=function(t){var n=t.prefixCls,r=t.className,a=t.hoverable,i=void 0===a||a,o=vme(t,["prefixCls","className","hoverable"]);return e.createElement(gme,null,(function(t){var a=(0,t.getPrefixCls)("card",n),s=Zt()("".concat(a,"-grid"),r,Fr({},"".concat(a,"-grid-hoverable"),i));return e.createElement("div",fme({},o,{className:s}))}))},bme=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},xme=function(t){return e.createElement(gme,null,(function(n){var r=n.getPrefixCls,a=t.prefixCls,i=t.className,o=t.avatar,s=t.title,u=t.description,l=bme(t,["prefixCls","className","avatar","title","description"]),c=r("card",a),d=Zt()("".concat(c,"-meta"),i),h=o?e.createElement("div",{className:"".concat(c,"-meta-avatar")},o):null,p=s?e.createElement("div",{className:"".concat(c,"-meta-title")},s):null,f=u?e.createElement("div",{className:"".concat(c,"-meta-description")},u):null,m=p||f?e.createElement("div",{className:"".concat(c,"-meta-detail")},p,f):null;return e.createElement("div",fme({},l,{className:d}),h,m)}))};function Ame(e,t){var n=Wr({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}var wme=n(2715);function kme(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];return e.Children.forEach(t,(function(e){(void 0!==e&&null!==e||n.keepEmpty)&&(Array.isArray(e)?r=r.concat(kme(e)):(0,wme.isFragment)(e)&&e.props?r=r.concat(kme(e.props.children,n)):r.push(e))})),r}var Sme=function(){if("undefined"===typeof navigator||"undefined"===typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null===e||void 0===e?void 0:e.substr(0,4)))};function Cme(t){var n=e.useRef(!1),r=u(e.useState(t),2),a=r[0],i=r[1];return e.useEffect((function(){return n.current=!1,function(){n.current=!0}}),[]),[a,function(e,t){t&&n.current||i(e)}]}function Ime(t,n){var r=n||{},a=r.defaultValue,i=r.value,o=r.onChange,s=r.postState,l=u(Cme((function(){return void 0!==i?i:void 0!==a?"function"===typeof a?a():a:"function"===typeof t?t():t})),2),c=l[0],d=l[1],h=void 0!==i?i:c;s&&(h=s(h));var p=e.useRef(o);p.current=o;var f=e.useCallback((function(e,t){d(e,t),h!==e&&p.current&&p.current(e,h)}),[h,p]),m=e.useRef(i);return e.useEffect((function(){void 0===i&&i!==m.current&&d(i),m.current=i}),[i]),[h,f]}var Eme=function(e){return+setTimeout(e,16)},Tme=function(e){return clearTimeout(e)};"undefined"!==typeof window&&"requestAnimationFrame"in window&&(Eme=function(e){return window.requestAnimationFrame(e)},Tme=function(e){return window.cancelAnimationFrame(e)});var Nme=0,_me=new Map;function Mme(e){_me.delete(e)}function Rme(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=Nme+=1;function r(t){if(0===t)Mme(n),e();else{var a=Eme((function(){r(t-1)}));_me.set(n,a)}}return r(t),n}Rme.cancel=function(e){var t=_me.get(e);return Mme(t),Tme(t)};var Ome={};function Pme(e,t){0}function Fme(e,t,n){t||Ome[n]||(e(!1,n),Ome[n]=!0)}var Dme=function(e,t){Fme(Pme,e,t)};function Lme(e,t){"function"===typeof e?e(t):"object"===Tr(e)&&e&&"current"in e&&(e.current=t)}function zme(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter((function(e){return e}));return r.length<=1?r[0]:function(e){t.forEach((function(t){Lme(t,e)}))}}function Bme(e){var t,n,r=(0,wme.isMemo)(e)?e.type.type:e.type;return!("function"===typeof r&&!(null===(t=r.prototype)||void 0===t?void 0:t.render))&&!("function"===typeof e&&!(null===(n=e.prototype)||void 0===n?void 0:n.render))}function Wme(e){return e instanceof HTMLElement?e:Tn.findDOMNode(e)}var jme=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var a=r[n];e.call(t,a[1],a[0])}},t}()}(),Vme="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,Hme="undefined"!==typeof n.g&&n.g.Math===Math?n.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),Ume="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(Hme):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var Gme=["top","right","bottom","left","width","height","size","weight"],Xme="undefined"!==typeof MutationObserver,qme=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,a=0;function i(){n&&(n=!1,e()),r&&s()}function o(){Ume(i)}function s(){var e=Date.now();if(n){if(e-a<2)return;r=!0}else n=!0,r=!1,setTimeout(o,t);a=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){Vme&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Xme?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Vme&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;Gme.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Yme=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];Object.defineProperty(e,a,{value:t[a],enumerable:!1,writable:!1,configurable:!0})}return e},Kme=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||Hme},Zme=nge(0,0,0,0);function Jme(e){return parseFloat(e)||0}function Qme(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+Jme(e["border-"+n+"-width"])}),0)}function $me(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return Zme;var r=Kme(e).getComputedStyle(e),a=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var a=r[n],i=e["padding-"+a];t[a]=Jme(i)}return t}(r),i=a.left+a.right,o=a.top+a.bottom,s=Jme(r.width),u=Jme(r.height);if("border-box"===r.boxSizing&&(Math.round(s+i)!==t&&(s-=Qme(r,"left","right")+i),Math.round(u+o)!==n&&(u-=Qme(r,"top","bottom")+o)),!function(e){return e===Kme(e).document.documentElement}(e)){var l=Math.round(s+i)-t,c=Math.round(u+o)-n;1!==Math.abs(l)&&(s-=l),1!==Math.abs(c)&&(u-=c)}return nge(a.left,a.top,s,u)}var ege="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof Kme(e).SVGGraphicsElement}:function(e){return e instanceof Kme(e).SVGElement&&"function"===typeof e.getBBox};function tge(e){return Vme?ege(e)?function(e){var t=e.getBBox();return nge(0,0,t.width,t.height)}(e):$me(e):Zme}function nge(e,t,n,r){return{x:e,y:t,width:n,height:r}}var rge=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=nge(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=tge(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),age=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(i.prototype);return Yme(o,{x:t,y:n,width:r,height:a,top:n,right:t+r,bottom:a+n,left:t}),o}(t);Yme(this,{target:e,contentRect:n})},ige=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new jme,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof Kme(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new rge(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof Kme(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new age(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),oge="undefined"!==typeof WeakMap?new WeakMap:new jme,sge=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=qme.getInstance(),r=new ige(t,n,this);oge.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){sge.prototype[e]=function(){var t;return(t=oge.get(this))[e].apply(t,arguments)}}));var uge="undefined"!==typeof Hme.ResizeObserver?Hme.ResizeObserver:sge,lge=new Map;var cge=new uge((function(e){e.forEach((function(e){var t,n=e.target;null===(t=lge.get(n))||void 0===t||t.forEach((function(e){return e(n)}))}))}));var dge=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"render",value:function(){return this.props.children}}]),n}(e.Component),hge=e.createContext(null);function pge(t){var n=t.children,r=t.disabled,a=e.useRef(null),i=e.useRef(null),o=e.useContext(hge),s="function"===typeof n,u=s?n(a):n,l=e.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),c=!s&&e.isValidElement(u)&&Bme(u),d=c?u.ref:null,h=e.useMemo((function(){return zme(d,a)}),[d,a]),p=e.useRef(t);p.current=t;var f=e.useCallback((function(e){var t=p.current,n=t.onResize,r=t.data,a=e.getBoundingClientRect(),i=a.width,s=a.height,u=e.offsetWidth,c=e.offsetHeight,d=Math.floor(i),h=Math.floor(s);if(l.current.width!==d||l.current.height!==h||l.current.offsetWidth!==u||l.current.offsetHeight!==c){var f={width:d,height:h,offsetWidth:u,offsetHeight:c};l.current=f;var m=u===Math.round(i)?i:u,g=c===Math.round(s)?s:c,v=Wr(Wr({},f),{},{offsetWidth:m,offsetHeight:g});null===o||void 0===o||o(v,e,r),n&&Promise.resolve().then((function(){n(v,e)}))}}),[]);return e.useEffect((function(){var e,t,n=Wme(a.current)||Wme(i.current);return n&&!r&&(e=n,t=f,lge.has(e)||(lge.set(e,new Set),cge.observe(e)),lge.get(e).add(t)),function(){return function(e,t){lge.has(e)&&(lge.get(e).delete(t),lge.get(e).size||(cge.unobserve(e),lge.delete(e)))}(n,f)}}),[a.current,r]),e.createElement(dge,{ref:i},c?e.cloneElement(u,{ref:h}):u)}function fge(t){var n=t.children;return("function"===typeof n?[n]:kme(n)).map((function(n,r){var a=(null===n||void 0===n?void 0:n.key)||"".concat("rc-observer-key","-").concat(r);return e.createElement(pge,fme({},t,{key:a}),n)}))}fge.Collection=function(t){var n=t.children,r=t.onBatchResize,a=e.useRef(0),i=e.useRef([]),o=e.useContext(hge),s=e.useCallback((function(e,t,n){a.current+=1;var s=a.current;i.current.push({size:e,element:t,data:n}),Promise.resolve().then((function(){s===a.current&&(null===r||void 0===r||r(i.current),i.current=[])})),null===o||void 0===o||o(e,t,n)}),[r,o]);return e.createElement(hge.Provider,{value:s},n)};var mge=fge;function gge(t){var n=(0,e.useRef)(),r=(0,e.useRef)(!1);return(0,e.useEffect)((function(){return r.current=!1,function(){r.current=!0,Rme.cancel(n.current)}}),[]),function(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];r.current||(Rme.cancel(n.current),n.current=Rme((function(){t.apply(void 0,a)})))}}var vge={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=vge.F1&&t<=vge.F12)return!1;switch(t){case vge.ALT:case vge.CAPS_LOCK:case vge.CONTEXT_MENU:case vge.CTRL:case vge.DOWN:case vge.END:case vge.ESC:case vge.HOME:case vge.INSERT:case vge.LEFT:case vge.MAC_FF_META:case vge.META:case vge.NUMLOCK:case vge.NUM_CENTER:case vge.PAGE_DOWN:case vge.PAGE_UP:case vge.PAUSE:case vge.PRINT_SCREEN:case vge.RIGHT:case vge.SHIFT:case vge.UP:case vge.WIN_KEY:case vge.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=vge.ZERO&&e<=vge.NINE)return!0;if(e>=vge.NUM_ZERO&&e<=vge.NUM_MULTIPLY)return!0;if(e>=vge.A&&e<=vge.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case vge.SPACE:case vge.QUESTION_MARK:case vge.NUM_PLUS:case vge.NUM_MINUS:case vge.NUM_PERIOD:case vge.NUM_DIVISION:case vge.SEMICOLON:case vge.DASH:case vge.EQUALS:case vge.COMMA:case vge.PERIOD:case vge.SLASH:case vge.APOSTROPHE:case vge.SINGLE_QUOTE:case vge.OPEN_SQUARE_BRACKET:case vge.BACKSLASH:case vge.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},yge=vge;function bge(t,n){var r,a=t.prefixCls,i=t.id,o=t.active,s=t.tab,u=s.key,l=s.tab,c=s.disabled,d=s.closeIcon,h=t.closable,p=t.renderWrapper,f=t.removeAriaLabel,m=t.editable,g=t.onClick,v=t.onRemove,y=t.onFocus,b=t.style,x="".concat(a,"-tab");e.useEffect((function(){return v}),[]);var A=m&&!1!==h&&!c;function w(e){c||g(e)}var k=e.createElement("div",{key:u,ref:n,className:Zt()(x,(r={},Fr(r,"".concat(x,"-with-remove"),A),Fr(r,"".concat(x,"-active"),o),Fr(r,"".concat(x,"-disabled"),c),r)),style:b,onClick:w},e.createElement("div",{role:"tab","aria-selected":o,id:i&&"".concat(i,"-tab-").concat(u),className:"".concat(x,"-btn"),"aria-controls":i&&"".concat(i,"-panel-").concat(u),"aria-disabled":c,tabIndex:c?null:0,onClick:function(e){e.stopPropagation(),w(e)},onKeyDown:function(e){[yge.SPACE,yge.ENTER].includes(e.which)&&(e.preventDefault(),w(e))},onFocus:y},l),A&&e.createElement("button",{type:"button","aria-label":f||"remove",tabIndex:0,className:"".concat(x,"-remove"),onClick:function(e){var t;e.stopPropagation(),(t=e).preventDefault(),t.stopPropagation(),m.onEdit("remove",{key:u,event:t})}},d||m.removeIcon||"\xd7"));return p?p(k):k}var xge=e.forwardRef(bge),Age={width:0,height:0,left:0,top:0};var wge={width:0,height:0,left:0,top:0,right:0};var kge=n(9767),Sge=n.n(kge);function Cge(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}var Ige=Cge()?e.useLayoutEffect:e.useEffect,Ege=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Tge=void 0;function Nge(t,n){var r=t.prefixCls,a=t.invalidate,i=t.item,o=t.renderItem,s=t.responsive,u=t.responsiveDisabled,l=t.registerSize,c=t.itemKey,d=t.className,h=t.style,p=t.children,f=t.display,m=t.order,g=t.component,v=void 0===g?"div":g,y=Pr(t,Ege),b=s&&!f;function x(e){l(c,e)}e.useEffect((function(){return function(){x(null)}}),[]);var A,w=o&&i!==Tge?o(i):p;a||(A={opacity:b?0:1,height:b?0:Tge,overflowY:b?"hidden":Tge,order:s?m:Tge,pointerEvents:b?"none":Tge,position:b?"absolute":Tge});var k={};b&&(k["aria-hidden"]=!0);var S=e.createElement(v,fme({className:Zt()(!a&&r,d),style:Wr(Wr({},A),h)},k,y,{ref:n}),w);return s&&(S=e.createElement(mge,{onResize:function(e){x(e.offsetWidth)},disabled:u},S)),S}var _ge=e.forwardRef(Nge);_ge.displayName="Item";var Mge=_ge;var Rge=["component"],Oge=["className"],Pge=["className"],Fge=function(t,n){var r=e.useContext(Bge);if(!r){var a=t.component,i=void 0===a?"div":a,o=Pr(t,Rge);return e.createElement(i,fme({},o,{ref:n}))}var s=r.className,u=Pr(r,Oge),l=t.className,c=Pr(t,Pge);return e.createElement(Bge.Provider,{value:null},e.createElement(Mge,fme({ref:n,className:Zt()(s,l)},u,c)))},Dge=e.forwardRef(Fge);Dge.displayName="RawItem";var Lge=Dge,zge=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],Bge=e.createContext(null),Wge="responsive",jge="invalidate";function Vge(e){return"+ ".concat(e.length," ...")}function Hge(t,n){var r=t.prefixCls,a=void 0===r?"rc-overflow":r,i=t.data,o=void 0===i?[]:i,s=t.renderItem,l=t.renderRawItem,c=t.itemKey,d=t.itemWidth,h=void 0===d?10:d,p=t.ssr,f=t.style,m=t.className,g=t.maxCount,v=t.renderRest,y=t.renderRawRest,b=t.suffix,x=t.component,A=void 0===x?"div":x,w=t.itemComponent,k=t.onVisibleChange,S=Pr(t,zge),C=function(){var t=u(Cme({}),2)[1],n=(0,e.useRef)([]),r=0,a=0;return function(e){var i=r;return r+=1,n.current.length<i+1&&(n.current[i]=e),[n.current[i],function(e){n.current[i]="function"===typeof e?e(n.current[i]):e,Rme.cancel(a),a=Rme((function(){t({},!0)}))}]}}(),I="full"===p,E=u(C(null),2),T=E[0],N=E[1],_=T||0,M=u(C(new Map),2),R=M[0],O=M[1],P=u(C(0),2),F=P[0],D=P[1],L=u(C(0),2),z=L[0],B=L[1],W=u(C(0),2),j=W[0],V=W[1],H=u((0,e.useState)(null),2),U=H[0],G=H[1],X=u((0,e.useState)(null),2),q=X[0],Y=X[1],K=e.useMemo((function(){return null===q&&I?Number.MAX_SAFE_INTEGER:q||0}),[q,T]),Z=u((0,e.useState)(!1),2),J=Z[0],Q=Z[1],$="".concat(a,"-item"),ee=Math.max(F,z),te=g===Wge,ne=o.length&&te,re=g===jge,ae=ne||"number"===typeof g&&o.length>g,ie=(0,e.useMemo)((function(){var e=o;return ne?e=null===T&&I?o:o.slice(0,Math.min(o.length,_/h)):"number"===typeof g&&(e=o.slice(0,g)),e}),[o,h,T,g,ne]),oe=(0,e.useMemo)((function(){return ne?o.slice(K+1):o.slice(ie.length)}),[o,ie,ne,K]),se=(0,e.useCallback)((function(e,t){var n;return"function"===typeof c?c(e):null!==(n=c&&(null===e||void 0===e?void 0:e[c]))&&void 0!==n?n:t}),[c]),ue=(0,e.useCallback)(s||function(e){return e},[s]);function le(e,t){Y(e),t||(Q(e<o.length-1),null===k||void 0===k||k(e))}function ce(e,t){O((function(n){var r=new Map(n);return null===t?r.delete(e):r.set(e,t),r}))}function de(e){return R.get(se(ie[e],e))}Ige((function(){if(_&&ee&&ie){var e=j,t=ie.length,n=t-1;if(!t)return le(0),void G(null);for(var r=0;r<t;r+=1){var a=de(r);if(I&&(a=a||0),void 0===a){le(r-1,!0);break}if(e+=a,0===n&&e<=_||r===n-1&&e+de(n)<=_){le(n),G(null);break}if(e+ee>_){le(r-1),G(e-a-j+z);break}}b&&de(0)+j>_&&G(null)}}),[_,R,z,j,se,ie]);var he=J&&!!oe.length,pe={};null!==U&&ne&&(pe={position:"absolute",left:U,top:0});var fe,me={prefixCls:$,responsive:ne,component:w,invalidate:re},ge=l?function(t,n){var r=se(t,n);return e.createElement(Bge.Provider,{key:r,value:Wr(Wr({},me),{},{order:n,item:t,itemKey:r,registerSize:ce,display:n<=K})},l(t,n))}:function(t,n){var r=se(t,n);return e.createElement(Mge,fme({},me,{order:n,key:r,item:t,renderItem:ue,itemKey:r,registerSize:ce,display:n<=K}))},ve={order:he?K:Number.MAX_SAFE_INTEGER,className:"".concat($,"-rest"),registerSize:function(e,t){B(t),D(z)},display:he};if(y)y&&(fe=e.createElement(Bge.Provider,{value:Wr(Wr({},me),ve)},y(oe)));else{var ye=v||Vge;fe=e.createElement(Mge,fme({},me,ve),"function"===typeof ye?ye(oe):ye)}var be=e.createElement(A,fme({className:Zt()(!re&&a,m),style:f,ref:n},S),ie.map(ge),ae?fe:null,b&&e.createElement(Mge,fme({},me,{responsive:te,responsiveDisabled:!ne,order:K,className:"".concat($,"-suffix"),registerSize:function(e,t){V(t)},display:!0,style:pe}),b));return te&&(be=e.createElement(mge,{onResize:function(e,t){N(t.clientWidth)},disabled:!ne},be)),be}var Uge=e.forwardRef(Hge);Uge.displayName="Overflow",Uge.Item=Lge,Uge.RESPONSIVE=Wge,Uge.INVALIDATE=jge;var Gge=Uge,Xge=["children","locked"],qge=e.createContext(null);function Yge(t){var n=t.children,r=t.locked,a=Pr(t,Xge),i=e.useContext(qge),o=function(t,n,r){var a=e.useRef({});return"value"in a.current&&!r(a.current.condition,n)||(a.current.value=t(),a.current.condition=n),a.current.value}((function(){return function(e,t){var n=Wr({},e);return Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}(i,a)}),[i,a],(function(e,t){return!r&&(e[0]!==t[0]||!Sge()(e[1],t[1]))}));return e.createElement(qge.Provider,{value:o},n)}function Kge(t,n,r,a){var i=e.useContext(qge),o=i.activeKey,s=i.onActive,u=i.onInactive,l={active:o===t};return n||(l.onMouseEnter=function(e){null===r||void 0===r||r({key:t,domEvent:e}),s(t)},l.onMouseLeave=function(e){null===a||void 0===a||a({key:t,domEvent:e}),u(t)}),l}var Zge=["item"];function Jge(e){var t=e.item,n=Pr(e,Zge);return Object.defineProperty(n,"item",{get:function(){return Dme(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}function Qge(t){var n=t.icon,r=t.props,a=t.children;return("function"===typeof n?e.createElement(n,Wr({},r)):n)||a||null}function $ge(t){var n=e.useContext(qge),r=n.mode,a=n.rtl,i=n.inlineIndent;if("inline"!==r)return null;return a?{paddingRight:t*i}:{paddingLeft:t*i}}var eve=[],tve=e.createContext(null);function nve(){return e.useContext(tve)}var rve=e.createContext(eve);function ave(t){var n=e.useContext(rve);return e.useMemo((function(){return void 0!==t?[].concat(ta(n),[t]):n}),[n,t])}var ive=e.createContext(null),ove=e.createContext(null);function sve(e,t){return void 0===e?null:"".concat(e,"-").concat(t)}function uve(t){return sve(e.useContext(ove),t)}var lve=e.createContext({}),cve=["title","attribute","elementRef"],dve=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],hve=["active"],pve=function(t){Kr(r,t);var n=Zr(r);function r(){return Jr(this,r),n.apply(this,arguments)}return $r(r,[{key:"render",value:function(){var t=this.props,n=t.title,r=t.attribute,a=t.elementRef,i=Ame(Pr(t,cve),["eventKey"]);return Dme(!r,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),e.createElement(Gge.Item,fme({},r,{title:"string"===typeof n?n:void 0},i,{ref:a}))}}]),r}(e.Component),fve=function(t){var n,r=t.style,a=t.className,i=t.eventKey,o=(t.warnKey,t.disabled),s=t.itemIcon,u=t.children,l=t.role,c=t.onMouseEnter,d=t.onMouseLeave,h=t.onClick,p=t.onKeyDown,f=t.onFocus,m=Pr(t,dve),g=uve(i),v=e.useContext(qge),y=v.prefixCls,b=v.onItemClick,x=v.disabled,A=v.overflowDisabled,w=v.itemIcon,k=v.selectedKeys,S=v.onActive,C=e.useContext(lve)._internalRenderMenuItem,I="".concat(y,"-item"),E=e.useRef(),T=e.useRef(),N=x||o,_=ave(i);var M=function(e){return{key:i,keyPath:ta(_).reverse(),item:E.current,domEvent:e}},R=s||w,O=Kge(i,N,c,d),P=O.active,F=Pr(O,hve),D=k.includes(i),L=$ge(_.length),z={};"option"===t.role&&(z["aria-selected"]=D);var B=e.createElement(pve,fme({ref:E,elementRef:T,role:null===l?"none":l||"menuitem",tabIndex:o?null:-1,"data-menu-id":A&&g?null:g},m,F,z,{component:"li","aria-disabled":o,style:Wr(Wr({},L),r),className:Zt()(I,(n={},Fr(n,"".concat(I,"-active"),P),Fr(n,"".concat(I,"-selected"),D),Fr(n,"".concat(I,"-disabled"),N),n),a),onClick:function(e){if(!N){var t=M(e);null===h||void 0===h||h(Jge(t)),b(t)}},onKeyDown:function(e){if(null===p||void 0===p||p(e),e.which===yge.ENTER){var t=M(e);null===h||void 0===h||h(Jge(t)),b(t)}},onFocus:function(e){S(i),null===f||void 0===f||f(e)}}),u,e.createElement(Qge,{props:Wr(Wr({},t),{},{isSelected:D}),icon:R}));return C&&(B=C(B,t,{selected:D})),B};var mve=function(t){var n=t.eventKey,r=nve(),a=ave(n);return e.useEffect((function(){if(r)return r.registerPath(n,a),function(){r.unregisterPath(n,a)}}),[a]),r?null:e.createElement(fve,t)},gve=["label","children","key","type"];function vve(t,n){return kme(t).map((function(t,r){if(e.isValidElement(t)){var a,i,o=t.key,s=null!==(a=null===(i=t.props)||void 0===i?void 0:i.eventKey)&&void 0!==a?a:o;(null===s||void 0===s)&&(s="tmp_key-".concat([].concat(ta(n),[r]).join("-")));var u={key:s,eventKey:s};return e.cloneElement(t,u)}return t}))}function yve(t){return(t||[]).map((function(t,n){if(t&&"object"===Tr(t)){var r=t.label,a=t.children,i=t.key,o=t.type,s=Pr(t,gve),u=null!==i&&void 0!==i?i:"tmp-".concat(n);return a||"group"===o?"group"===o?e.createElement(Cxe,fme({key:u},s,{title:r}),yve(a)):e.createElement(Qbe,fme({key:u},s,{title:r}),yve(a)):"divider"===o?e.createElement(Ixe,fme({key:u},s)):e.createElement(mve,fme({key:u},s),r)}return null})).filter((function(e){return e}))}function bve(e,t,n){var r=e;return t&&(r=yve(t)),vve(r,n)}function xve(t){var n=e.useRef(t);n.current=t;var r=e.useCallback((function(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return null===(e=n.current)||void 0===e?void 0:e.call.apply(e,[n].concat(r))}),[]);return t?r:void 0}var Ave=["className","children"],wve=function(t,n){var r=t.className,a=t.children,i=Pr(t,Ave),o=e.useContext(qge),s=o.prefixCls,u=o.mode,l=o.rtl;return e.createElement("ul",fme({className:Zt()(s,l&&"".concat(s,"-rtl"),"".concat(s,"-sub"),"".concat(s,"-").concat("inline"===u?"inline":"vertical"),r)},i,{"data-menu-list":!0,ref:n}),a)},kve=e.forwardRef(wve);kve.displayName="SubMenuList";var Sve=kve;function Cve(e,t){return!!e&&e.contains(t)}function Ive(e,t,n,r){var a=Tn.unstable_batchedUpdates?function(e){Tn.unstable_batchedUpdates(n,e)}:n;return e.addEventListener&&e.addEventListener(t,a,r),{remove:function(){e.removeEventListener&&e.removeEventListener(t,a,r)}}}var Eve=(0,e.forwardRef)((function(t,n){var r=t.didUpdate,a=t.getContainer,i=t.children,o=(0,e.useRef)(),s=(0,e.useRef)();(0,e.useImperativeHandle)(n,(function(){return{}}));var u=(0,e.useRef)(!1);return!u.current&&Cge()&&(s.current=a(),o.current=s.current.parentNode,u.current=!0),(0,e.useEffect)((function(){null===r||void 0===r||r(t)})),(0,e.useEffect)((function(){return null===s.current.parentNode&&null!==o.current&&o.current.appendChild(s.current),function(){var e,t;null===(e=s.current)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(s.current)}}),[]),s.current?Tn.createPortal(i,s.current):null})),Tve=Eve;function Nve(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function _ve(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var Mve=function(e,t){var n={animationend:_ve("Animation","AnimationEnd"),transitionend:_ve("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}(Cge(),"undefined"!==typeof window?window:{}),Rve={};if(Cge()){var Ove=document.createElement("div");Rve=Ove.style}var Pve={};function Fve(e){if(Pve[e])return Pve[e];var t=Mve[e];if(t)for(var n=Object.keys(t),r=n.length,a=0;a<r;a+=1){var i=n[a];if(Object.prototype.hasOwnProperty.call(t,i)&&i in Rve)return Pve[e]=t[i],Pve[e]}return""}var Dve=Fve("animationend"),Lve=Fve("transitionend"),zve=!(!Dve||!Lve),Bve=Dve||"animationend",Wve=Lve||"transitionend";function jve(e,t){if(!e)return null;if("object"===Tr(e)){var n=t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}));return e[n]}return"".concat(e,"-").concat(t)}var Vve="none",Hve="appear",Uve="enter",Gve="leave",Xve="none",qve="prepare",Yve="start",Kve="active",Zve="end",Jve=Cge()?e.useLayoutEffect:e.useEffect,Qve=[qve,Yve,Kve,Zve];function $ve(e){return e===Kve||e===Zve}var eye=function(t,n){var r=u(Cme(Xve),2),a=r[0],i=r[1],o=function(){var t=e.useRef(null);function n(){Rme.cancel(t.current)}return e.useEffect((function(){return function(){n()}}),[]),[function e(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;n();var i=Rme((function(){a<=1?r({isCanceled:function(){return i!==t.current}}):e(r,a-1)}));t.current=i},n]}(),s=u(o,2),l=s[0],c=s[1];return Jve((function(){if(a!==Xve&&a!==Zve){var e=Qve.indexOf(a),t=Qve[e+1],r=n(a);false===r?i(t,!0):l((function(e){function n(){e.isCanceled()||i(t,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[t,a]),e.useEffect((function(){return function(){c()}}),[]),[function(){i(qve,!0)},a]};function tye(t,n,r,a){var i=a.motionEnter,o=void 0===i||i,s=a.motionAppear,l=void 0===s||s,c=a.motionLeave,d=void 0===c||c,h=a.motionDeadline,p=a.motionLeaveImmediately,f=a.onAppearPrepare,m=a.onEnterPrepare,g=a.onLeavePrepare,v=a.onAppearStart,y=a.onEnterStart,b=a.onLeaveStart,x=a.onAppearActive,A=a.onEnterActive,w=a.onLeaveActive,k=a.onAppearEnd,S=a.onEnterEnd,C=a.onLeaveEnd,I=a.onVisibleChanged,E=u(Cme(),2),T=E[0],N=E[1],_=u(Cme(Vve),2),M=_[0],R=_[1],O=u(Cme(null),2),P=O[0],F=O[1],D=(0,e.useRef)(!1),L=(0,e.useRef)(null);function z(){return r()}var B=(0,e.useRef)(!1);function W(e){var t=z();if(!e||e.deadline||e.target===t){var n,r=B.current;M===Hve&&r?n=null===k||void 0===k?void 0:k(t,e):M===Uve&&r?n=null===S||void 0===S?void 0:S(t,e):M===Gve&&r&&(n=null===C||void 0===C?void 0:C(t,e)),M!==Vve&&r&&!1!==n&&(R(Vve,!0),F(null,!0))}}var j=function(t){var n=(0,e.useRef)(),r=(0,e.useRef)(t);r.current=t;var a=e.useCallback((function(e){r.current(e)}),[]);function i(e){e&&(e.removeEventListener(Wve,a),e.removeEventListener(Bve,a))}return e.useEffect((function(){return function(){i(n.current)}}),[]),[function(e){n.current&&n.current!==e&&i(n.current),e&&e!==n.current&&(e.addEventListener(Wve,a),e.addEventListener(Bve,a),n.current=e)},i]}(W),V=u(j,1)[0],H=e.useMemo((function(){var e,t,n;switch(M){case Hve:return Fr(e={},qve,f),Fr(e,Yve,v),Fr(e,Kve,x),e;case Uve:return Fr(t={},qve,m),Fr(t,Yve,y),Fr(t,Kve,A),t;case Gve:return Fr(n={},qve,g),Fr(n,Yve,b),Fr(n,Kve,w),n;default:return{}}}),[M]),U=u(eye(M,(function(e){if(e===qve){var t=H.prepare;return!!t&&t(z())}var n;X in H&&F((null===(n=H[X])||void 0===n?void 0:n.call(H,z(),null))||null);return X===Kve&&(V(z()),h>0&&(clearTimeout(L.current),L.current=setTimeout((function(){W({deadline:!0})}),h))),true})),2),G=U[0],X=U[1],q=$ve(X);B.current=q,Jve((function(){N(n);var e,r=D.current;(D.current=!0,t)&&(!r&&n&&l&&(e=Hve),r&&n&&o&&(e=Uve),(r&&!n&&d||!r&&p&&!n&&d)&&(e=Gve),e&&(R(e),G()))}),[n]),(0,e.useEffect)((function(){(M===Hve&&!l||M===Uve&&!o||M===Gve&&!d)&&R(Vve)}),[l,o,d]),(0,e.useEffect)((function(){return function(){D.current=!1,clearTimeout(L.current)}}),[]),(0,e.useEffect)((function(){void 0!==T&&M===Vve&&(null===I||void 0===I||I(T))}),[T,M]);var Y=P;return H.prepare&&X===Yve&&(Y=Wr({transition:"none"},Y)),[M,X,Y,null!==T&&void 0!==T?T:n]}var nye=function(e){Kr(n,e);var t=Zr(n);function n(){return Jr(this,n),t.apply(this,arguments)}return $r(n,[{key:"render",value:function(){return this.props.children}}]),n}(e.Component),rye=nye;var aye=function(t){var n=t;function r(e){return!(!e.motionName||!n)}"object"===Tr(t)&&(n=t.transitionSupport);var a=e.forwardRef((function(t,n){var a=t.visible,i=void 0===a||a,o=t.removeOnLeave,s=void 0===o||o,l=t.forceRender,c=t.children,d=t.motionName,h=t.leavedClassName,p=t.eventProps,f=r(t),m=(0,e.useRef)(),g=(0,e.useRef)();var v=u(tye(f,i,(function(){try{return m.current instanceof HTMLElement?m.current:Wme(g.current)}catch(QIe){return null}}),t),4),y=v[0],b=v[1],x=v[2],A=v[3],w=e.useRef(A);A&&(w.current=!0);var k,S=e.useCallback((function(e){m.current=e,Lme(n,e)}),[n]),C=Wr(Wr({},p),{},{visible:i});if(c)if(y!==Vve&&r(t)){var I,E;b===qve?E="prepare":$ve(b)?E="active":b===Yve&&(E="start"),k=c(Wr(Wr({},C),{},{className:Zt()(jve(d,y),(I={},Fr(I,jve(d,"".concat(y,"-").concat(E)),E),Fr(I,d,"string"===typeof d),I)),style:x}),S)}else k=A?c(Wr({},C),S):!s&&w.current?c(Wr(Wr({},C),{},{className:h}),S):l?c(Wr(Wr({},C),{},{style:{display:"none"}}),S):null;else k=null;e.isValidElement(k)&&Bme(k)&&(k.ref||(k=e.cloneElement(k,{ref:S})));return e.createElement(rye,{ref:g},k)}));return a.displayName="CSSMotion",a}(zve),iye="add",oye="keep",sye="remove",uye="removed";function lye(e){var t;return Wr(Wr({},t=e&&"object"===Tr(e)&&"key"in e?e:{key:e}),{},{key:String(t.key)})}function cye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(lye)}function dye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,a=t.length,i=cye(e),o=cye(t);i.forEach((function(e){for(var t=!1,i=r;i<a;i+=1){var s=o[i];if(s.key===e.key){r<i&&(n=n.concat(o.slice(r,i).map((function(e){return Wr(Wr({},e),{},{status:iye})}))),r=i),n.push(Wr(Wr({},s),{},{status:oye})),r+=1,t=!0;break}}t||n.push(Wr(Wr({},e),{},{status:sye}))})),r<a&&(n=n.concat(o.slice(r).map((function(e){return Wr(Wr({},e),{},{status:iye})}))));var s={};n.forEach((function(e){var t=e.key;s[t]=(s[t]||0)+1}));var u=Object.keys(s).filter((function(e){return s[e]>1}));return u.forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==sye}))).forEach((function(t){t.key===e&&(t.status=oye)}))})),n}var hye=["component","children","onVisibleChanged","onAllRemoved"],pye=["status"],fye=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];!function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aye,r=function(t){Kr(a,t);var r=Zr(a);function a(){var e;Jr(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).state={keyEntities:[]},e.removeKey=function(t){var n=e.state.keyEntities.map((function(e){return e.key!==t?e:Wr(Wr({},e),{},{status:uye})}));return e.setState({keyEntities:n}),n.filter((function(e){return e.status!==uye})).length},e}return $r(a,[{key:"render",value:function(){var t=this,r=this.state.keyEntities,a=this.props,i=a.component,o=a.children,s=a.onVisibleChanged,u=a.onAllRemoved,l=Pr(a,hye),c=i||e.Fragment,d={};return fye.forEach((function(e){d[e]=l[e],delete l[e]})),delete l.keys,e.createElement(c,l,r.map((function(r){var a=r.status,i=Pr(r,pye),l=a===iye||a===oye;return e.createElement(n,fme({},d,{key:i.key,visible:l,eventProps:i,onVisibleChanged:function(e){(null===s||void 0===s||s(e,{key:i.key}),e)||0===t.removeKey(i.key)&&u&&u()}}),o)})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,a=cye(n);return{keyEntities:dye(r,a).filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==uye||e.status!==sye}))}}}]),a}(e.Component);r.defaultProps={component:"div"}}(zve);var mye=aye;function gye(e){var t=e.prefixCls,n=e.motion,r=e.animation,a=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:a?{motionName:a}:null)}function vye(t){var n=t.prefixCls,r=t.visible,a=t.zIndex,i=t.mask,o=t.maskMotion,s=t.maskAnimation,u=t.maskTransitionName;if(!i)return null;var l={};return(o||u||s)&&(l=Wr({motionAppear:!0},gye({motion:o,prefixCls:n,transitionName:u,animation:s}))),e.createElement(mye,fme({},l,{visible:r,removeOnLeave:!0}),(function(t){var r=t.className;return e.createElement("div",{style:{zIndex:a},className:Zt()("".concat(n,"-mask"),r)})}))}var yye,bye=function(e){if(!e)return!1;if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox();if(t.width||t.height)return!0}if(e.getBoundingClientRect){var n=e.getBoundingClientRect();if(n.width||n.height)return!0}return!1};function xye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Aye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xye(Object(n),!0).forEach((function(t){kye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wye(e){return wye="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wye(e)}function kye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sye={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function Cye(){if(void 0!==yye)return yye;yye="";var e=document.createElement("p").style;for(var t in Sye)t+"Transform"in e&&(yye=t);return yye}function Iye(){return Cye()?"".concat(Cye(),"TransitionProperty"):"transitionProperty"}function Eye(){return Cye()?"".concat(Cye(),"Transform"):"transform"}function Tye(e,t){var n=Iye();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function Nye(e,t){var n=Eye();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}var _ye,Mye=/matrix\((.*)\)/,Rye=/matrix3d\((.*)\)/;function Oye(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function Pye(e,t,n){var r=n;if("object"!==wye(t))return"undefined"!==typeof r?("number"===typeof r&&(r="".concat(r,"px")),void(e.style[t]=r)):_ye(e,t);for(var a in t)t.hasOwnProperty(a)&&Pye(e,a,t[a])}function Fye(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!==typeof n){var a=e.document;"number"!==typeof(n=a.documentElement[r])&&(n=a.body[r])}return n}function Dye(e){return Fye(e)}function Lye(e){return Fye(e,!0)}function zye(e){var t=function(e){var t,n,r,a=e.ownerDocument,i=a.body,o=a&&a.documentElement;return t=e.getBoundingClientRect(),n=Math.floor(t.left),r=Math.floor(t.top),{left:n-=o.clientLeft||i.clientLeft||0,top:r-=o.clientTop||i.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=Dye(r),t.top+=Lye(r),t}function Bye(e){return null!==e&&void 0!==e&&e==e.window}function Wye(e){return Bye(e)?e.document:9===e.nodeType?e:e.ownerDocument}var jye=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),Vye=/^(top|right|bottom|left)$/;function Hye(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function Uye(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function Gye(e,t,n){"static"===Pye(e,"position")&&(e.style.position="relative");var r=-999,a=-999,i=Hye("left",n),o=Hye("top",n),s=Uye(i),u=Uye(o);"left"!==i&&(r=999),"top"!==o&&(a=999);var l="",c=zye(e);("left"in t||"top"in t)&&(l=function(e){return e.style.transitionProperty||e.style[Iye()]}(e)||"",Tye(e,"none")),"left"in t&&(e.style[s]="",e.style[i]="".concat(r,"px")),"top"in t&&(e.style[u]="",e.style[o]="".concat(a,"px")),Oye(e);var d=zye(e),h={};for(var p in t)if(t.hasOwnProperty(p)){var f=Hye(p,n),m="left"===p?r:a,g=c[p]-d[p];h[f]=f===p?m+g:m-g}Pye(e,h),Oye(e),("left"in t||"top"in t)&&Tye(e,l);var v={};for(var y in t)if(t.hasOwnProperty(y)){var b=Hye(y,n),x=t[y]-c[y];v[b]=y===b?h[b]+x:h[b]-x}Pye(e,v)}function Xye(e,t){var n=zye(e),r=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(Eye());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}(e),a={x:r.x,y:r.y};"left"in t&&(a.x=r.x+t.left-n.left),"top"in t&&(a.y=r.y+t.top-n.top),function(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(Eye());if(r&&"none"!==r){var a,i=r.match(Mye);i?((a=(i=i[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,a[5]=t.y,Nye(e,"matrix(".concat(a.join(","),")"))):((a=r.match(Rye)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,a[13]=t.y,Nye(e,"matrix3d(".concat(a.join(","),")")))}else Nye(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}(e,a)}function qye(e,t){for(var n=0;n<e.length;n++)t(e[n])}function Yye(e){return"border-box"===_ye(e,"boxSizing")}"undefined"!==typeof window&&(_ye=window.getComputedStyle?function(e,t,n){var r=n,a="",i=Wye(e);return(r=r||i.defaultView.getComputedStyle(e,null))&&(a=r.getPropertyValue(t)||r[t]),a}:function(e,t){var n=e.currentStyle&&e.currentStyle[t];if(jye.test(n)&&!Vye.test(t)){var r=e.style,a=r.left,i=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,r.left="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r.left=a,e.runtimeStyle.left=i}return""===n?"auto":n});var Kye=["margin","border","padding"];function Zye(e,t,n){var r,a={},i=e.style;for(r in t)t.hasOwnProperty(r)&&(a[r]=i[r],i[r]=t[r]);for(r in n.call(e),t)t.hasOwnProperty(r)&&(i[r]=a[r])}function Jye(e,t,n){var r,a,i,o=0;for(a=0;a<t.length;a++)if(r=t[a])for(i=0;i<n.length;i++){var s=void 0;s="border"===r?"".concat(r).concat(n[i],"Width"):r+n[i],o+=parseFloat(_ye(e,s))||0}return o}var Qye={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function $ye(e,t,n){var r=n;if(Bye(e))return"width"===t?Qye.viewportWidth(e):Qye.viewportHeight(e);if(9===e.nodeType)return"width"===t?Qye.docWidth(e):Qye.docHeight(e);var a="width"===t?["Left","Right"]:["Top","Bottom"],i="width"===t?Math.floor(e.getBoundingClientRect().width):Math.floor(e.getBoundingClientRect().height),o=Yye(e),s=0;(null===i||void 0===i||i<=0)&&(i=void 0,(null===(s=_ye(e,t))||void 0===s||Number(s)<0)&&(s=e.style[t]||0),s=parseFloat(s)||0),void 0===r&&(r=o?1:-1);var u=void 0!==i||o,l=i||s;return-1===r?u?l-Jye(e,["border","padding"],a):s:u?1===r?l:l+(2===r?-Jye(e,["border"],a):Jye(e,["margin"],a)):s+Jye(e,Kye.slice(r),a)}qye(["Width","Height"],(function(e){Qye["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],Qye["viewport".concat(e)](n))},Qye["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,a=r.body,i=r.documentElement[n];return"CSS1Compat"===r.compatMode&&i||a&&a[n]||i}}));var ebe={position:"absolute",visibility:"hidden",display:"block"};function tbe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,a=t[0];return 0!==a.offsetWidth?r=$ye.apply(void 0,t):Zye(a,ebe,(function(){r=$ye.apply(void 0,t)})),r}function nbe(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}qye(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);Qye["outer".concat(t)]=function(t,n){return t&&tbe(t,e,n?0:1)};var n="width"===e?["Left","Right"]:["Top","Bottom"];Qye[e]=function(t,r){var a=r;return void 0!==a?t?(Yye(t)&&(a+=Jye(t,["padding","border"],n)),Pye(t,e,a)):void 0:t&&tbe(t,e,-1)}}));var rbe={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:Wye,offset:function(e,t,n){if("undefined"===typeof t)return zye(e);!function(e,t,n){if(n.ignoreShake){var r=zye(e),a=r.left.toFixed(0),i=r.top.toFixed(0),o=t.left.toFixed(0),s=t.top.toFixed(0);if(a===o&&i===s)return}n.useCssRight||n.useCssBottom?Gye(e,t,n):n.useCssTransform&&Eye()in document.body.style?Xye(e,t):Gye(e,t,n)}(e,t,n||{})},isWindow:Bye,each:qye,css:Pye,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:nbe,getWindowScrollLeft:function(e){return Dye(e)},getWindowScrollTop:function(e){return Lye(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)rbe.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};nbe(rbe,Qye);var abe=rbe.getParent;function ibe(e){if(rbe.isWindow(e)||9===e.nodeType)return null;var t,n=rbe.getDocument(e).body,r=rbe.css(e,"position");if(!("fixed"===r||"absolute"===r))return"html"===e.nodeName.toLowerCase()?null:abe(e);for(t=abe(e);t&&t!==n&&9!==t.nodeType;t=abe(t))if("static"!==(r=rbe.css(t,"position")))return t;return null}var obe=rbe.getParent;function sbe(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=ibe(e),a=rbe.getDocument(e),i=a.defaultView||a.parentWindow,o=a.body,s=a.documentElement;r;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===o||r===s||"visible"===rbe.css(r,"overflow")){if(r===o||r===s)break}else{var u=rbe.offset(r);u.left+=r.clientLeft,u.top+=r.clientTop,n.top=Math.max(n.top,u.top),n.right=Math.min(n.right,u.left+r.clientWidth),n.bottom=Math.min(n.bottom,u.top+r.clientHeight),n.left=Math.max(n.left,u.left)}r=ibe(r)}var l=null;rbe.isWindow(e)||9===e.nodeType||(l=e.style.position,"absolute"===rbe.css(e,"position")&&(e.style.position="fixed"));var c=rbe.getWindowScrollLeft(i),d=rbe.getWindowScrollTop(i),h=rbe.viewportWidth(i),p=rbe.viewportHeight(i),f=s.scrollWidth,m=s.scrollHeight,g=window.getComputedStyle(o);if("hidden"===g.overflowX&&(f=i.innerWidth),"hidden"===g.overflowY&&(m=i.innerHeight),e.style&&(e.style.position=l),t||function(e){if(rbe.isWindow(e)||9===e.nodeType)return!1;var t=rbe.getDocument(e),n=t.body,r=null;for(r=obe(e);r&&r!==n&&r!==t;r=obe(r))if("fixed"===rbe.css(r,"position"))return!0;return!1}(e))n.left=Math.max(n.left,c),n.top=Math.max(n.top,d),n.right=Math.min(n.right,c+h),n.bottom=Math.min(n.bottom,d+p);else{var v=Math.max(f,c+h);n.right=Math.min(n.right,v);var y=Math.max(m,d+p);n.bottom=Math.min(n.bottom,y)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function ube(e){var t,n,r;if(rbe.isWindow(e)||9===e.nodeType){var a=rbe.getWindow(e);t={left:rbe.getWindowScrollLeft(a),top:rbe.getWindowScrollTop(a)},n=rbe.viewportWidth(a),r=rbe.viewportHeight(a)}else t=rbe.offset(e),n=rbe.outerWidth(e),r=rbe.outerHeight(e);return t.width=n,t.height=r,t}function lbe(e,t){var n=t.charAt(0),r=t.charAt(1),a=e.width,i=e.height,o=e.left,s=e.top;return"c"===n?s+=i/2:"b"===n&&(s+=i),"c"===r?o+=a/2:"r"===r&&(o+=a),{left:o,top:s}}function cbe(e,t,n,r,a){var i=lbe(t,n[1]),o=lbe(e,n[0]),s=[o.left-i.left,o.top-i.top];return{left:Math.round(e.left-s[0]+r[0]-a[0]),top:Math.round(e.top-s[1]+r[1]-a[1])}}function dbe(e,t,n){return e.left<n.left||e.left+t.width>n.right}function hbe(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function pbe(e,t,n){var r=[];return rbe.each(e,(function(e){r.push(e.replace(t,(function(e){return n[e]})))})),r}function fbe(e,t){return e[t]=-e[t],e}function mbe(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function gbe(e,t){e[0]=mbe(e[0],t.width),e[1]=mbe(e[1],t.height)}function vbe(e,t,n,r){var a=n.points,i=n.offset||[0,0],o=n.targetOffset||[0,0],s=n.overflow,u=n.source||e;i=[].concat(i),o=[].concat(o);var l={},c=0,d=sbe(u,!(!(s=s||{})||!s.alwaysByViewport)),h=ube(u);gbe(i,h),gbe(o,t);var p=cbe(h,t,a,i,o),f=rbe.merge(h,p);if(d&&(s.adjustX||s.adjustY)&&r){if(s.adjustX&&dbe(p,h,d)){var m=pbe(a,/[lr]/gi,{l:"r",r:"l"}),g=fbe(i,0),v=fbe(o,0);(function(e,t,n){return e.left>n.right||e.left+t.width<n.left})(cbe(h,t,m,g,v),h,d)||(c=1,a=m,i=g,o=v)}if(s.adjustY&&hbe(p,h,d)){var y=pbe(a,/[tb]/gi,{t:"b",b:"t"}),b=fbe(i,1),x=fbe(o,1);(function(e,t,n){return e.top>n.bottom||e.top+t.height<n.top})(cbe(h,t,y,b,x),h,d)||(c=1,a=y,i=b,o=x)}c&&(p=cbe(h,t,a,i,o),rbe.mix(f,p));var A=dbe(p,h,d),w=hbe(p,h,d);if(A||w){var k=a;A&&(k=pbe(a,/[lr]/gi,{l:"r",r:"l"})),w&&(k=pbe(a,/[tb]/gi,{t:"b",b:"t"})),a=k,i=n.offset||[0,0],o=n.targetOffset||[0,0]}l.adjustX=s.adjustX&&A,l.adjustY=s.adjustY&&w,(l.adjustX||l.adjustY)&&(f=function(e,t,n,r){var a=rbe.clone(e),i={width:t.width,height:t.height};return r.adjustX&&a.left<n.left&&(a.left=n.left),r.resizeWidth&&a.left>=n.left&&a.left+i.width>n.right&&(i.width-=a.left+i.width-n.right),r.adjustX&&a.left+i.width>n.right&&(a.left=Math.max(n.right-i.width,n.left)),r.adjustY&&a.top<n.top&&(a.top=n.top),r.resizeHeight&&a.top>=n.top&&a.top+i.height>n.bottom&&(i.height-=a.top+i.height-n.bottom),r.adjustY&&a.top+i.height>n.bottom&&(a.top=Math.max(n.bottom-i.height,n.top)),rbe.mix(a,i)}(p,h,d,l))}return f.width!==h.width&&rbe.css(u,"width",rbe.width(u)+f.width-h.width),f.height!==h.height&&rbe.css(u,"height",rbe.height(u)+f.height-h.height),rbe.offset(u,{left:f.left,top:f.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:a,offset:i,targetOffset:o,overflow:l}}function ybe(e,t,n){var r=n.target||t,a=ube(r),i=!function(e,t){var n=sbe(e,t),r=ube(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}(r,n.overflow&&n.overflow.alwaysByViewport);return vbe(e,a,n,i)}function bbe(e,t,n){var r,a,i=rbe.getDocument(e),o=i.defaultView||i.parentWindow,s=rbe.getWindowScrollLeft(o),u=rbe.getWindowScrollTop(o),l=rbe.viewportWidth(o),c=rbe.viewportHeight(o),d={left:r="pageX"in t?t.pageX:s+t.clientX,top:a="pageY"in t?t.pageY:u+t.clientY,width:0,height:0},h=r>=0&&r<=s+l&&a>=0&&a<=u+c,p=[n.points[0],"cc"];return vbe(e,d,Aye(Aye({},n),{},{points:p}),h)}ybe.__getOffsetParent=ibe,ybe.__getVisibleRectForElement=sbe;var xbe=n(1905),Abe=n.n(xbe);function wbe(e,t){var n=null,r=null;var a=new uge((function(e){var a=u(e,1)[0].target;if(document.documentElement.contains(a)){var i=a.getBoundingClientRect(),o=i.width,s=i.height,l=Math.floor(o),c=Math.floor(s);n===l&&r===c||Promise.resolve().then((function(){t({width:l,height:c})})),n=l,r=c}}));return e&&a.observe(e),function(){a.disconnect()}}function kbe(e){return"function"!==typeof e?null:e()}function Sbe(e){return"object"===Tr(e)&&e?e:null}var Cbe=function(t,n){var r=t.children,a=t.disabled,i=t.target,o=t.align,s=t.onAlign,l=t.monitorWindowResize,c=t.monitorBufferTime,d=void 0===c?0:c,h=e.useRef({}),p=e.useRef(),f=e.Children.only(r),m=e.useRef({});m.current.disabled=a,m.current.target=i,m.current.align=o,m.current.onAlign=s;var g=function(t,n){var r=e.useRef(!1),a=e.useRef(null);function i(){window.clearTimeout(a.current)}return[function e(o){if(i(),r.current&&!0!==o)a.current=window.setTimeout((function(){r.current=!1,e()}),n);else{if(!1===t())return;r.current=!0,a.current=window.setTimeout((function(){r.current=!1}),n)}},function(){r.current=!1,i()}]}((function(){var e=m.current,t=e.disabled,n=e.target,r=e.align,a=e.onAlign;if(!t&&n){var i,o=p.current,s=kbe(n),u=Sbe(n);h.current.element=s,h.current.point=u,h.current.align=r;var l=document.activeElement;return s&&bye(s)?i=ybe(o,s,r):u&&(i=bbe(o,u,r)),function(e,t){e!==document.activeElement&&Cve(t,e)&&"function"===typeof e.focus&&e.focus()}(l,o),a&&i&&a(o,i),!0}return!1}),d),v=u(g,2),y=v[0],b=v[1],x=e.useRef({cancel:function(){}}),A=e.useRef({cancel:function(){}});e.useEffect((function(){var e=kbe(i),t=Sbe(i);p.current!==A.current.element&&(A.current.cancel(),A.current.element=p.current,A.current.cancel=wbe(p.current,y)),h.current.element===e&&function(e,t){return e===t||!(!e||!t)&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY)}(h.current.point,t)&&Abe()(h.current.align,o)||(y(),x.current.element!==e&&(x.current.cancel(),x.current.element=e,x.current.cancel=wbe(e,y)))})),e.useEffect((function(){a?b():y()}),[a]);var w=e.useRef(null);return e.useEffect((function(){l?w.current||(w.current=Ive(window,"resize",y)):w.current&&(w.current.remove(),w.current=null)}),[l]),e.useEffect((function(){return function(){x.current.cancel(),A.current.cancel(),w.current&&w.current.remove(),b()}}),[]),e.useImperativeHandle(n,(function(){return{forceAlign:function(){return y(!0)}}})),e.isValidElement(f)&&(f=e.cloneElement(f,{ref:zme(f.ref,p)})),f},Ibe=e.forwardRef(Cbe);Ibe.displayName="Align";var Ebe=Ibe,Tbe=["measure","alignPre","align",null,"motion"],Nbe=e.forwardRef((function(t,n){var r=t.visible,a=t.prefixCls,i=t.className,o=t.style,s=t.children,l=t.zIndex,c=t.stretch,d=t.destroyPopupOnHide,h=t.forceRender,p=t.align,f=t.point,m=t.getRootDomNode,g=t.getClassNameFromAlign,v=t.onAlign,y=t.onMouseEnter,b=t.onMouseLeave,x=t.onMouseDown,A=t.onTouchStart,w=t.onClick,k=(0,e.useRef)(),S=(0,e.useRef)(),C=u((0,e.useState)(),2),I=C[0],E=C[1],T=function(t){var n=u(e.useState({width:0,height:0}),2),r=n[0],a=n[1];return[e.useMemo((function(){var e={};if(t){var n=r.width,a=r.height;-1!==t.indexOf("height")&&a?e.height=a:-1!==t.indexOf("minHeight")&&a&&(e.minHeight=a),-1!==t.indexOf("width")&&n?e.width=n:-1!==t.indexOf("minWidth")&&n&&(e.minWidth=n)}return e}),[t,r]),function(e){a({width:e.offsetWidth,height:e.offsetHeight})}]}(c),N=u(T,2),_=N[0],M=N[1];var R=function(t,n){var r=u(Cme(null),2),a=r[0],i=r[1],o=(0,e.useRef)();function s(e){i(e,!0)}function l(){Rme.cancel(o.current)}return(0,e.useEffect)((function(){s("measure")}),[t]),(0,e.useEffect)((function(){"measure"===a&&n(),a&&(o.current=Rme(Mr(Nr().mark((function e(){var t,n;return Nr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Tbe.indexOf(a),(n=Tbe[t+1])&&-1!==t&&s(n);case 3:case"end":return e.stop()}}),e)})))))}),[a]),(0,e.useEffect)((function(){return function(){l()}}),[]),[a,function(e){l(),o.current=Rme((function(){s((function(e){switch(a){case"align":return"motion";case"motion":return"stable"}return e})),null===e||void 0===e||e()}))}]}(r,(function(){c&&M(m())})),O=u(R,2),P=O[0],F=O[1],D=u((0,e.useState)(0),2),L=D[0],z=D[1],B=(0,e.useRef)();function W(){var e;null===(e=k.current)||void 0===e||e.forceAlign()}function j(e,t){var n=g(t);I!==n&&E(n),z((function(e){return e+1})),"align"===P&&(null===v||void 0===v||v(e,t))}Ige((function(){"alignPre"===P&&z(0)}),[P]),Ige((function(){"align"===P&&(L<2?W():F((function(){var e;null===(e=B.current)||void 0===e||e.call(B)})))}),[L]);var V=Wr({},gye(t));function H(){return new Promise((function(e){B.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=V[e];V[e]=function(e,n){return F(),null===t||void 0===t?void 0:t(e,n)}})),e.useEffect((function(){V.motionName||"motion"!==P||F()}),[V.motionName,P]),e.useImperativeHandle(n,(function(){return{forceAlign:W,getElement:function(){return S.current}}}));var U=Wr(Wr({},_),{},{zIndex:l,opacity:"motion"!==P&&"stable"!==P&&r?0:void 0,pointerEvents:r||"stable"===P?void 0:"none"},o),G=!0;!(null===p||void 0===p?void 0:p.points)||"align"!==P&&"stable"!==P||(G=!1);var X=s;return e.Children.count(s)>1&&(X=e.createElement("div",{className:"".concat(a,"-content")},s)),e.createElement(mye,fme({visible:r,ref:S,leavedClassName:"".concat(a,"-hidden")},V,{onAppearPrepare:H,onEnterPrepare:H,removeOnLeave:d,forceRender:h}),(function(t,n){var r=t.className,o=t.style,s=Zt()(a,i,I,r);return e.createElement(Ebe,{target:f||m,key:"popup",ref:k,monitorWindowResize:!0,disabled:G,align:p,onAlign:j},e.createElement("div",{ref:n,className:s,onMouseEnter:y,onMouseLeave:b,onMouseDownCapture:x,onTouchStartCapture:A,onClick:w,style:Wr(Wr({},o),U)},X))}))}));Nbe.displayName="PopupInner";var _be=Nbe,Mbe=e.forwardRef((function(t,n){var r=t.prefixCls,a=t.visible,i=t.zIndex,o=t.children,s=t.mobile,u=(s=void 0===s?{}:s).popupClassName,l=s.popupStyle,c=s.popupMotion,d=void 0===c?{}:c,h=s.popupRender,p=t.onClick,f=e.useRef();e.useImperativeHandle(n,(function(){return{forceAlign:function(){},getElement:function(){return f.current}}}));var m=Wr({zIndex:i},l),g=o;return e.Children.count(o)>1&&(g=e.createElement("div",{className:"".concat(r,"-content")},o)),h&&(g=h(g)),e.createElement(mye,fme({visible:a,ref:f,removeOnLeave:!0},d),(function(t,n){var a=t.className,i=t.style,o=Zt()(r,u,a);return e.createElement("div",{ref:n,className:o,onClick:p,style:Wr(Wr({},i),m)},g)}))}));Mbe.displayName="MobilePopupInner";var Rbe=Mbe,Obe=["visible","mobile"],Pbe=e.forwardRef((function(t,n){var r=t.visible,a=t.mobile,i=Pr(t,Obe),o=u((0,e.useState)(r),2),s=o[0],l=o[1],c=u((0,e.useState)(!1),2),d=c[0],h=c[1],p=Wr(Wr({},i),{},{visible:s});(0,e.useEffect)((function(){l(r),r&&a&&h(Sme())}),[r,a]);var f=d?e.createElement(Rbe,fme({},p,{mobile:a,ref:n})):e.createElement(_be,fme({},p,{ref:n}));return e.createElement("div",null,e.createElement(vye,p),f)}));Pbe.displayName="Popup";var Fbe=Pbe,Dbe=e.createContext(null);function Lbe(){}function zbe(){return""}function Bbe(e){return e?e.ownerDocument:window.document}var Wbe=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];var jbe=function(t){var n=function(n){Kr(a,n);var r=Zr(a);function a(t){var n,i;return Jr(this,a),(n=r.call(this,t)).popupRef=e.createRef(),n.triggerRef=e.createRef(),n.portalContainer=void 0,n.attachId=void 0,n.clickOutsideHandler=void 0,n.touchOutsideHandler=void 0,n.contextMenuOutsideHandler1=void 0,n.contextMenuOutsideHandler2=void 0,n.mouseDownTimeout=void 0,n.focusTime=void 0,n.preClickTime=void 0,n.preTouchTime=void 0,n.delayTimer=void 0,n.hasPopupMouseDown=void 0,n.onMouseEnter=function(e){var t=n.props.mouseEnterDelay;n.fireEvents("onMouseEnter",e),n.delaySetPopupVisible(!0,t,t?null:e)},n.onMouseMove=function(e){n.fireEvents("onMouseMove",e),n.setPoint(e)},n.onMouseLeave=function(e){n.fireEvents("onMouseLeave",e),n.delaySetPopupVisible(!1,n.props.mouseLeaveDelay)},n.onPopupMouseEnter=function(){n.clearDelayTimer()},n.onPopupMouseLeave=function(e){var t;e.relatedTarget&&!e.relatedTarget.setTimeout&&Cve(null===(t=n.popupRef.current)||void 0===t?void 0:t.getElement(),e.relatedTarget)||n.delaySetPopupVisible(!1,n.props.mouseLeaveDelay)},n.onFocus=function(e){n.fireEvents("onFocus",e),n.clearDelayTimer(),n.isFocusToShow()&&(n.focusTime=Date.now(),n.delaySetPopupVisible(!0,n.props.focusDelay))},n.onMouseDown=function(e){n.fireEvents("onMouseDown",e),n.preClickTime=Date.now()},n.onTouchStart=function(e){n.fireEvents("onTouchStart",e),n.preTouchTime=Date.now()},n.onBlur=function(e){n.fireEvents("onBlur",e),n.clearDelayTimer(),n.isBlurToHide()&&n.delaySetPopupVisible(!1,n.props.blurDelay)},n.onContextMenu=function(e){e.preventDefault(),n.fireEvents("onContextMenu",e),n.setPopupVisible(!0,e)},n.onContextMenuClose=function(){n.isContextMenuToShow()&&n.close()},n.onClick=function(e){if(n.fireEvents("onClick",e),n.focusTime){var t;if(n.preClickTime&&n.preTouchTime?t=Math.min(n.preClickTime,n.preTouchTime):n.preClickTime?t=n.preClickTime:n.preTouchTime&&(t=n.preTouchTime),Math.abs(t-n.focusTime)<20)return;n.focusTime=0}n.preClickTime=0,n.preTouchTime=0,n.isClickToShow()&&(n.isClickToHide()||n.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var r=!n.state.popupVisible;(n.isClickToHide()&&!r||r&&n.isClickToShow())&&n.setPopupVisible(!n.state.popupVisible,e)},n.onPopupMouseDown=function(){var e;(n.hasPopupMouseDown=!0,clearTimeout(n.mouseDownTimeout),n.mouseDownTimeout=window.setTimeout((function(){n.hasPopupMouseDown=!1}),0),n.context)&&(e=n.context).onPopupMouseDown.apply(e,arguments)},n.onDocumentClick=function(e){if(!n.props.mask||n.props.maskClosable){var t=e.target,r=n.getRootDomNode(),a=n.getPopupDomNode();Cve(r,t)&&!n.isContextMenuOnly()||Cve(a,t)||n.hasPopupMouseDown||n.close()}},n.getRootDomNode=function(){var e=n.props.getTriggerDOMNode;if(e)return e(n.triggerRef.current);try{var t=Wme(n.triggerRef.current);if(t)return t}catch($Ie){}return Tn.findDOMNode(jr(n))},n.getPopupClassNameFromAlign=function(e){var t=[],r=n.props,a=r.popupPlacement,i=r.builtinPlacements,o=r.prefixCls,s=r.alignPoint,u=r.getPopupClassNameFromAlign;return a&&i&&t.push(function(e,t,n,r){for(var a=n.points,i=Object.keys(e),o=0;o<i.length;o+=1){var s=i[o];if(Nve(e[s].points,a,r))return"".concat(t,"-placement-").concat(s)}return""}(i,o,e,s)),u&&t.push(u(e)),t.join(" ")},n.getComponent=function(){var t=n.props,r=t.prefixCls,a=t.destroyPopupOnHide,i=t.popupClassName,o=t.onPopupAlign,s=t.popupMotion,u=t.popupAnimation,l=t.popupTransitionName,c=t.popupStyle,d=t.mask,h=t.maskAnimation,p=t.maskTransitionName,f=t.maskMotion,m=t.zIndex,g=t.popup,v=t.stretch,y=t.alignPoint,b=t.mobile,x=t.forceRender,A=t.onPopupClick,w=n.state,k=w.popupVisible,S=w.point,C=n.getPopupAlign(),I={};return n.isMouseEnterToShow()&&(I.onMouseEnter=n.onPopupMouseEnter),n.isMouseLeaveToHide()&&(I.onMouseLeave=n.onPopupMouseLeave),I.onMouseDown=n.onPopupMouseDown,I.onTouchStart=n.onPopupMouseDown,e.createElement(Fbe,fme({prefixCls:r,destroyPopupOnHide:a,visible:k,point:y&&S,className:i,align:C,onAlign:o,animation:u,getClassNameFromAlign:n.getPopupClassNameFromAlign},I,{stretch:v,getRootDomNode:n.getRootDomNode,style:c,mask:d,zIndex:m,transitionName:l,maskAnimation:h,maskTransitionName:p,maskMotion:f,ref:n.popupRef,motion:s,mobile:b,forceRender:x,onClick:A}),"function"===typeof g?g():g)},n.attachParent=function(e){Rme.cancel(n.attachId);var t,r=n.props,a=r.getPopupContainer,i=r.getDocument,o=n.getRootDomNode();a?(o||0===a.length)&&(t=a(o)):t=i(n.getRootDomNode()).body,t?t.appendChild(e):n.attachId=Rme((function(){n.attachParent(e)}))},n.getContainer=function(){if(!n.portalContainer){var e=(0,n.props.getDocument)(n.getRootDomNode()).createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",n.portalContainer=e}return n.attachParent(n.portalContainer),n.portalContainer},n.setPoint=function(e){n.props.alignPoint&&e&&n.setState({point:{pageX:e.pageX,pageY:e.pageY}})},n.handlePortalUpdate=function(){n.state.prevPopupVisible!==n.state.popupVisible&&n.props.afterPopupVisibleChange(n.state.popupVisible)},n.triggerContextValue={onPopupMouseDown:n.onPopupMouseDown},i="popupVisible"in t?!!t.popupVisible:!!t.defaultPopupVisible,n.state={prevPopupVisible:i,popupVisible:i},Wbe.forEach((function(e){n["fire".concat(e)]=function(t){n.fireEvents(e,t)}})),n}return $r(a,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=Ive(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=Ive(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=Ive(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Ive(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Rme.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?function(e,t,n){return Wr(Wr({},e[t]||{}),n)}(r,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var r=this,a=1e3*t;if(this.clearDelayTimer(),a){var i=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(e,i),r.clearDelayTimer()}),a)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var n=this.state.popupVisible,r=this.props,a=r.children,i=r.forceRender,o=r.alignPoint,s=r.className,u=r.autoDestroy,l=e.Children.only(a),c={key:"trigger"};this.isContextMenuToShow()?c.onContextMenu=this.onContextMenu:c.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(c.onClick=this.onClick,c.onMouseDown=this.onMouseDown,c.onTouchStart=this.onTouchStart):(c.onClick=this.createTwoChains("onClick"),c.onMouseDown=this.createTwoChains("onMouseDown"),c.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(c.onMouseEnter=this.onMouseEnter,o&&(c.onMouseMove=this.onMouseMove)):c.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?c.onMouseLeave=this.onMouseLeave:c.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(c.onFocus=this.onFocus,c.onBlur=this.onBlur):(c.onFocus=this.createTwoChains("onFocus"),c.onBlur=this.createTwoChains("onBlur"));var d=Zt()(l&&l.props&&l.props.className,s);d&&(c.className=d);var h=Wr({},c);Bme(l)&&(h.ref=zme(this.triggerRef,l.ref));var p,f=e.cloneElement(l,h);return(n||this.popupRef.current||i)&&(p=e.createElement(t,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!n&&u&&(p=null),e.createElement(Dbe.Provider,{value:this.triggerContextValue},f,p)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r}}]),a}(e.Component);return n.contextType=Dbe,n.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:zbe,getDocument:Bbe,onPopupVisibleChange:Lbe,afterPopupVisibleChange:Lbe,onPopupAlign:Lbe,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},n}(Tve),Vbe={adjustX:1,adjustY:1},Hbe={topLeft:{points:["bl","tl"],overflow:Vbe,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Vbe,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:Vbe,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:Vbe,offset:[4,0]}},Ube={topLeft:{points:["bl","tl"],overflow:Vbe,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Vbe,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:Vbe,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:Vbe,offset:[4,0]}};function Gbe(e,t,n){return t||(n?n[e]||n.other:void 0)}var Xbe={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function qbe(t){var n=t.prefixCls,r=t.visible,a=t.children,i=t.popup,o=t.popupClassName,s=t.popupOffset,l=t.disabled,c=t.mode,d=t.onVisibleChange,h=e.useContext(qge),p=h.getPopupContainer,f=h.rtl,m=h.subMenuOpenDelay,g=h.subMenuCloseDelay,v=h.builtinPlacements,y=h.triggerSubMenuAction,b=h.forceSubMenuRender,x=h.rootClassName,A=h.motion,w=h.defaultMotions,k=u(e.useState(!1),2),S=k[0],C=k[1],I=Wr(Wr({},f?Ube:Hbe),v),E=Xbe[c],T=Wr(Wr({},Gbe(c,A,w)),{},{leavedClassName:"".concat(n,"-hidden"),removeOnLeave:!1,motionAppear:!0}),N=e.useRef();return e.useEffect((function(){return N.current=Rme((function(){C(r)})),function(){Rme.cancel(N.current)}}),[r]),e.createElement(jbe,{prefixCls:n,popupClassName:Zt()("".concat(n,"-popup"),Fr({},"".concat(n,"-rtl"),f),o,x),stretch:"horizontal"===c?"minWidth":null,getPopupContainer:p,builtinPlacements:I,popupPlacement:E,popupVisible:S,popup:i,popupAlign:s&&{offset:s},action:l?[]:[y],mouseEnterDelay:m,mouseLeaveDelay:g,onPopupVisibleChange:d,forceRender:b,popupMotion:T},a)}function Ybe(t){var n=t.id,r=t.open,a=t.keyPath,i=t.children,o="inline",s=e.useContext(qge),l=s.prefixCls,c=s.forceSubMenuRender,d=s.motion,h=s.defaultMotions,p=s.mode,f=e.useRef(!1);f.current=p===o;var m=u(e.useState(!f.current),2),g=m[0],v=m[1],y=!!f.current&&r;e.useEffect((function(){f.current&&v(!1)}),[p]);var b=Wr({},Gbe(o,d,h));a.length>1&&(b.motionAppear=!1);var x=b.onVisibleChanged;return b.onVisibleChanged=function(e){return f.current||e||v(!0),null===x||void 0===x?void 0:x(e)},g?null:e.createElement(Yge,{mode:o,locked:!f.current},e.createElement(mye,fme({visible:y},b,{forceRender:c,removeOnLeave:!1,leavedClassName:"".concat(l,"-hidden")}),(function(t){var r=t.className,a=t.style;return e.createElement(Sve,{id:n,className:r,style:a},i)})))}var Kbe=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],Zbe=["active"],Jbe=function(t){var n,r=t.style,a=t.className,i=t.title,o=t.eventKey,s=(t.warnKey,t.disabled),l=t.internalPopupClose,c=t.children,d=t.itemIcon,h=t.expandIcon,p=t.popupClassName,f=t.popupOffset,m=t.onClick,g=t.onMouseEnter,v=t.onMouseLeave,y=t.onTitleClick,b=t.onTitleMouseEnter,x=t.onTitleMouseLeave,A=Pr(t,Kbe),w=uve(o),k=e.useContext(qge),S=k.prefixCls,C=k.mode,I=k.openKeys,E=k.disabled,T=k.overflowDisabled,N=k.activeKey,_=k.selectedKeys,M=k.itemIcon,R=k.expandIcon,O=k.onItemClick,P=k.onOpenChange,F=k.onActive,D=e.useContext(lve)._internalRenderSubMenuItem,L=e.useContext(ive).isSubPathKey,z=ave(),B="".concat(S,"-submenu"),W=E||s,j=e.useRef(),V=e.useRef();var H=d||M,U=h||R,G=I.includes(o),X=!T&&G,q=L(_,o),Y=Kge(o,W,b,x),K=Y.active,Z=Pr(Y,Zbe),J=u(e.useState(!1),2),Q=J[0],$=J[1],ee=function(e){W||$(e)},te=e.useMemo((function(){return K||"inline"!==C&&(Q||L([N],o))}),[C,K,N,Q,o,L]),ne=$ge(z.length),re=xve((function(e){null===m||void 0===m||m(Jge(e)),O(e)})),ae=w&&"".concat(w,"-popup"),ie=e.createElement("div",fme({role:"menuitem",style:ne,className:"".concat(B,"-title"),tabIndex:W?null:-1,ref:j,title:"string"===typeof i?i:null,"data-menu-id":T&&w?null:w,"aria-expanded":X,"aria-haspopup":!0,"aria-controls":ae,"aria-disabled":W,onClick:function(e){W||(null===y||void 0===y||y({key:o,domEvent:e}),"inline"===C&&P(o,!G))},onFocus:function(){F(o)}},Z),i,e.createElement(Qge,{icon:"horizontal"!==C?U:null,props:Wr(Wr({},t),{},{isOpen:X,isSubMenu:!0})},e.createElement("i",{className:"".concat(B,"-arrow")}))),oe=e.useRef(C);if("inline"!==C&&(oe.current=z.length>1?"vertical":C),!T){var se=oe.current;ie=e.createElement(qbe,{mode:se,prefixCls:B,visible:!l&&X&&"inline"!==C,popupClassName:p,popupOffset:f,popup:e.createElement(Yge,{mode:"horizontal"===se?"vertical":se},e.createElement(Sve,{id:ae,ref:V},c)),disabled:W,onVisibleChange:function(e){"inline"!==C&&P(o,e)}},ie)}var ue=e.createElement(Gge.Item,fme({role:"none"},A,{component:"li",style:r,className:Zt()(B,"".concat(B,"-").concat(C),a,(n={},Fr(n,"".concat(B,"-open"),X),Fr(n,"".concat(B,"-active"),te),Fr(n,"".concat(B,"-selected"),q),Fr(n,"".concat(B,"-disabled"),W),n)),onMouseEnter:function(e){ee(!0),null===g||void 0===g||g({key:o,domEvent:e})},onMouseLeave:function(e){ee(!1),null===v||void 0===v||v({key:o,domEvent:e})}}),ie,!T&&e.createElement(Ybe,{id:ae,open:X,keyPath:z},c));return D&&(ue=D(ue,t,{selected:q,active:te,open:X,disabled:W})),e.createElement(Yge,{onItemClick:re,mode:"horizontal"===C?"vertical":C,itemIcon:H,expandIcon:U},ue)};function Qbe(t){var n,r=t.eventKey,a=t.children,i=ave(r),o=vve(a,i),s=nve();return e.useEffect((function(){if(s)return s.registerPath(r,i),function(){s.unregisterPath(r,i)}}),[i]),n=s?o:e.createElement(Jbe,t,o),e.createElement(rve.Provider,{value:i},n)}function $be(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(bye(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||"a"===n&&!!e.getAttribute("href"),a=e.getAttribute("tabindex"),i=Number(a),o=null;return a&&!Number.isNaN(i)?o=i:r&&null===o&&(o=0),r&&e.disabled&&(o=null),null!==o&&(o>=0||t&&o<0)}return!1}function exe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=ta(e.querySelectorAll("*")).filter((function(e){return $be(e,t)}));return $be(e,t)&&n.unshift(e),n}var txe=yge.LEFT,nxe=yge.RIGHT,rxe=yge.UP,axe=yge.DOWN,ixe=yge.ENTER,oxe=yge.ESC,sxe=yge.HOME,uxe=yge.END,lxe=[rxe,axe,txe,nxe];function cxe(e,t){return exe(e,!0).filter((function(e){return t.has(e)}))}function dxe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return null;var a=cxe(e,t),i=a.length,o=a.findIndex((function(e){return n===e}));return r<0?-1===o?o=i-1:o-=1:r>0&&(o+=1),a[o=(o+i)%i]}function hxe(t,n,r,a,i,o,s,u,l,c){var d=e.useRef(),h=e.useRef();h.current=n;var p=function(){Rme.cancel(d.current)};return e.useEffect((function(){return function(){p()}}),[]),function(e){var f=e.which;if([].concat(lxe,[ixe,oxe,sxe,uxe]).includes(f)){var m,g,v,y=function(){return m=new Set,g=new Map,v=new Map,o().forEach((function(e){var t=document.querySelector("[data-menu-id='".concat(sve(a,e),"']"));t&&(m.add(t),v.set(t,e),g.set(e,t))})),m};y();var b=function(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}(g.get(n),m),x=v.get(b),A=function(e,t,n,r){var a,i,o,s,u="prev",l="next",c="children",d="parent";if("inline"===e&&r===ixe)return{inlineTrigger:!0};var h=(Fr(a={},rxe,u),Fr(a,axe,l),a),p=(Fr(i={},txe,n?l:u),Fr(i,nxe,n?u:l),Fr(i,axe,c),Fr(i,ixe,c),i),f=(Fr(o={},rxe,u),Fr(o,axe,l),Fr(o,ixe,c),Fr(o,oxe,d),Fr(o,txe,n?c:d),Fr(o,nxe,n?d:c),o);switch(null===(s={inline:h,horizontal:p,vertical:f,inlineSub:h,horizontalSub:f,verticalSub:f}["".concat(e).concat(t?"":"Sub")])||void 0===s?void 0:s[r]){case u:return{offset:-1,sibling:!0};case l:return{offset:1,sibling:!0};case d:return{offset:-1,sibling:!1};case c:return{offset:1,sibling:!1};default:return null}}(t,1===s(x,!0).length,r,f);if(!A&&f!==sxe&&f!==uxe)return;(lxe.includes(f)||[sxe,uxe].includes(f))&&e.preventDefault();var w=function(e){if(e){var t=e,n=e.querySelector("a");(null===n||void 0===n?void 0:n.getAttribute("href"))&&(t=n);var r=v.get(e);u(r),p(),d.current=Rme((function(){h.current===r&&t.focus()}))}};if([sxe,uxe].includes(f)||A.sibling||!b){var k,S,C=cxe(k=b&&"inline"!==t?function(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}(b):i.current,m);S=f===sxe?C[0]:f===uxe?C[C.length-1]:dxe(k,m,b,A.offset),w(S)}else if(A.inlineTrigger)l(x);else if(A.offset>0)l(x,!0),p(),d.current=Rme((function(){y();var e=b.getAttribute("aria-controls"),t=dxe(document.getElementById(e),m);w(t)}),5);else if(A.offset<0){var I=s(x,!0),E=I[I.length-2],T=g.get(E);l(E,!1),w(T)}}null===c||void 0===c||c(e)}}var pxe=Math.random().toFixed(5).toString().slice(2),fxe=0;var mxe="__RC_UTIL_PATH_SPLIT__",gxe=function(e){return e.join(mxe)},vxe="rc-menu-more";function yxe(){var t=u(e.useState({}),2)[1],n=(0,e.useRef)(new Map),r=(0,e.useRef)(new Map),a=u(e.useState([]),2),i=a[0],o=a[1],s=(0,e.useRef)(0),l=(0,e.useRef)(!1),c=(0,e.useCallback)((function(e,a){var i=gxe(a);r.current.set(i,e),n.current.set(e,i),s.current+=1;var o,u=s.current;o=function(){u===s.current&&(l.current||t({}))},Promise.resolve().then(o)}),[]),d=(0,e.useCallback)((function(e,t){var a=gxe(t);r.current.delete(a),n.current.delete(e)}),[]),h=(0,e.useCallback)((function(e){o(e)}),[]),p=(0,e.useCallback)((function(e,t){var r=n.current.get(e)||"",a=r.split(mxe);return t&&i.includes(a[0])&&a.unshift(vxe),a}),[i]),f=(0,e.useCallback)((function(e,t){return e.some((function(e){return p(e,!0).includes(t)}))}),[p]),m=(0,e.useCallback)((function(e){var t="".concat(n.current.get(e)).concat(mxe),a=new Set;return ta(r.current.keys()).forEach((function(e){e.startsWith(t)&&a.add(r.current.get(e))})),a}),[]);return e.useEffect((function(){return function(){l.current=!0}}),[]),{registerPath:c,unregisterPath:d,refreshOverflowKeys:h,isSubPathKey:f,getKeyPath:p,getKeys:function(){var e=ta(n.current.keys());return i.length&&e.push(vxe),e},getSubPathKeys:m}}var bxe=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],xxe=[],Axe=e.forwardRef((function(t,n){var r,a,i=t.prefixCls,o=void 0===i?"rc-menu":i,s=t.rootClassName,l=t.style,c=t.className,d=t.tabIndex,h=void 0===d?0:d,p=t.items,f=t.children,m=t.direction,g=t.id,v=t.mode,y=void 0===v?"vertical":v,b=t.inlineCollapsed,x=t.disabled,A=t.disabledOverflow,w=t.subMenuOpenDelay,k=void 0===w?.1:w,S=t.subMenuCloseDelay,C=void 0===S?.1:S,I=t.forceSubMenuRender,E=t.defaultOpenKeys,T=t.openKeys,N=t.activeKey,_=t.defaultActiveFirst,M=t.selectable,R=void 0===M||M,O=t.multiple,P=void 0!==O&&O,F=t.defaultSelectedKeys,D=t.selectedKeys,L=t.onSelect,z=t.onDeselect,B=t.inlineIndent,W=void 0===B?24:B,j=t.motion,V=t.defaultMotions,H=t.triggerSubMenuAction,U=void 0===H?"hover":H,G=t.builtinPlacements,X=t.itemIcon,q=t.expandIcon,Y=t.overflowedIndicator,K=void 0===Y?"...":Y,Z=t.overflowedIndicatorPopupClassName,J=t.getPopupContainer,Q=t.onClick,$=t.onOpenChange,ee=t.onKeyDown,te=(t.openAnimation,t.openTransitionName,t._internalRenderMenuItem),ne=t._internalRenderSubMenuItem,re=Pr(t,bxe),ae=e.useMemo((function(){return bve(f,p,xxe)}),[f,p]),ie=u(e.useState(!1),2),oe=ie[0],se=ie[1],ue=e.useRef(),le=function(t){var n=u(Ime(t,{value:t}),2),r=n[0],a=n[1];return e.useEffect((function(){fxe+=1;var e="".concat(pxe,"-").concat(fxe);a("rc-menu-uuid-".concat(e))}),[]),r}(g),ce="rtl"===m;var de=u(e.useMemo((function(){return"inline"!==y&&"vertical"!==y||!b?[y,!1]:["vertical",b]}),[y,b]),2),he=de[0],pe=de[1],fe=u(e.useState(0),2),me=fe[0],ge=fe[1],ve=me>=ae.length-1||"horizontal"!==he||A,ye=u(Ime(E,{value:T,postState:function(e){return e||xxe}}),2),be=ye[0],xe=ye[1],Ae=function(e){xe(e),null===$||void 0===$||$(e)},we=u(e.useState(be),2),ke=we[0],Se=we[1],Ce="inline"===he,Ie=e.useRef(!1);e.useEffect((function(){Ce&&Se(be)}),[be]),e.useEffect((function(){Ie.current?Ce?xe(ke):Ae(xxe):Ie.current=!0}),[Ce]);var Ee=yxe(),Te=Ee.registerPath,Ne=Ee.unregisterPath,_e=Ee.refreshOverflowKeys,Me=Ee.isSubPathKey,Re=Ee.getKeyPath,Oe=Ee.getKeys,Pe=Ee.getSubPathKeys,Fe=e.useMemo((function(){return{registerPath:Te,unregisterPath:Ne}}),[Te,Ne]),De=e.useMemo((function(){return{isSubPathKey:Me}}),[Me]);e.useEffect((function(){_e(ve?xxe:ae.slice(me+1).map((function(e){return e.key})))}),[me,ve]);var Le=u(Ime(N||_&&(null===(r=ae[0])||void 0===r?void 0:r.key),{value:N}),2),ze=Le[0],Be=Le[1],We=xve((function(e){Be(e)})),je=xve((function(){Be(void 0)}));(0,e.useImperativeHandle)(n,(function(){return{list:ue.current,focus:function(e){var t,n,r,a,i=null!==ze&&void 0!==ze?ze:null===(t=ae.find((function(e){return!e.props.disabled})))||void 0===t?void 0:t.key;i&&(null===(n=ue.current)||void 0===n||null===(r=n.querySelector("li[data-menu-id='".concat(sve(le,i),"']")))||void 0===r||null===(a=r.focus)||void 0===a||a.call(r,e))}}}));var Ve=u(Ime(F||[],{value:D,postState:function(e){return Array.isArray(e)?e:null===e||void 0===e?xxe:[e]}}),2),He=Ve[0],Ue=Ve[1],Ge=xve((function(e){null===Q||void 0===Q||Q(Jge(e)),function(e){if(R){var t,n=e.key,r=He.includes(n);t=P?r?He.filter((function(e){return e!==n})):[].concat(ta(He),[n]):[n],Ue(t);var a=Wr(Wr({},e),{},{selectedKeys:t});r?null===z||void 0===z||z(a):null===L||void 0===L||L(a)}!P&&be.length&&"inline"!==he&&Ae(xxe)}(e)})),Xe=xve((function(e,t){var n=be.filter((function(t){return t!==e}));if(t)n.push(e);else if("inline"!==he){var r=Pe(e);n=n.filter((function(e){return!r.has(e)}))}Sge()(be,n)||Ae(n)})),qe=xve(J),Ye=hxe(he,ze,ce,le,ue,Oe,Re,Be,(function(e,t){var n=null!==t&&void 0!==t?t:!be.includes(e);Xe(e,n)}),ee);e.useEffect((function(){se(!0)}),[]);var Ke=e.useMemo((function(){return{_internalRenderMenuItem:te,_internalRenderSubMenuItem:ne}}),[te,ne]),Ze="horizontal"!==he||A?ae:ae.map((function(t,n){return e.createElement(Yge,{key:t.key,overflowDisabled:n>me},t)})),Je=e.createElement(Gge,fme({id:g,ref:ue,prefixCls:"".concat(o,"-overflow"),component:"ul",itemComponent:mve,className:Zt()(o,"".concat(o,"-root"),"".concat(o,"-").concat(he),c,(a={},Fr(a,"".concat(o,"-inline-collapsed"),pe),Fr(a,"".concat(o,"-rtl"),ce),a),s),dir:m,style:l,role:"menu",tabIndex:h,data:Ze,renderRawItem:function(e){return e},renderRawRest:function(t){var n=t.length,r=n?ae.slice(-n):null;return e.createElement(Qbe,{eventKey:vxe,title:K,disabled:ve,internalPopupClose:0===n,popupClassName:Z},r)},maxCount:"horizontal"!==he||A?Gge.INVALIDATE:Gge.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(e){ge(e)},onKeyDown:Ye},re));return e.createElement(lve.Provider,{value:Ke},e.createElement(ove.Provider,{value:le},e.createElement(Yge,{prefixCls:o,rootClassName:s,mode:he,openKeys:be,rtl:ce,disabled:x,motion:oe?j:null,defaultMotions:oe?V:null,activeKey:ze,onActive:We,onInactive:je,selectedKeys:He,inlineIndent:W,subMenuOpenDelay:k,subMenuCloseDelay:C,forceSubMenuRender:I,builtinPlacements:G,triggerSubMenuAction:U,getPopupContainer:qe,itemIcon:X,expandIcon:q,onItemClick:Ge,onOpenChange:Xe},e.createElement(ive.Provider,{value:De},Je),e.createElement("div",{style:{display:"none"},"aria-hidden":!0},e.createElement(tve.Provider,{value:Fe},ae)))))})),wxe=["className","title","eventKey","children"],kxe=["children"],Sxe=function(t){var n=t.className,r=t.title,a=(t.eventKey,t.children),i=Pr(t,wxe),o=e.useContext(qge).prefixCls,s="".concat(o,"-item-group");return e.createElement("li",fme({},i,{onClick:function(e){return e.stopPropagation()},className:Zt()(s,n)}),e.createElement("div",{className:"".concat(s,"-title"),title:"string"===typeof r?r:void 0},r),e.createElement("ul",{className:"".concat(s,"-list")},a))};function Cxe(t){var n=t.children,r=Pr(t,kxe),a=vve(n,ave(r.eventKey));return nve()?a:e.createElement(Sxe,Ame(r,["warnKey"]),a)}function Ixe(t){var n=t.className,r=t.style,a=e.useContext(qge).prefixCls;return nve()?null:e.createElement("li",{className:Zt()("".concat(a,"-item-divider"),n),style:r})}var Exe=Axe;Exe.Item=mve,Exe.SubMenu=Qbe,Exe.ItemGroup=Cxe,Exe.Divider=Ixe;var Txe=Exe,Nxe={adjustX:1,adjustY:1},_xe=[0,0],Mxe={topLeft:{points:["bl","tl"],overflow:Nxe,offset:[0,-4],targetOffset:_xe},topCenter:{points:["bc","tc"],overflow:Nxe,offset:[0,-4],targetOffset:_xe},topRight:{points:["br","tr"],overflow:Nxe,offset:[0,-4],targetOffset:_xe},bottomLeft:{points:["tl","bl"],overflow:Nxe,offset:[0,4],targetOffset:_xe},bottomCenter:{points:["tc","bc"],overflow:Nxe,offset:[0,4],targetOffset:_xe},bottomRight:{points:["tr","br"],overflow:Nxe,offset:[0,4],targetOffset:_xe}},Rxe=yge.ESC,Oxe=yge.TAB;var Pxe=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function Fxe(t,n){var r=t.arrow,a=void 0!==r&&r,i=t.prefixCls,o=void 0===i?"rc-dropdown":i,s=t.transitionName,l=t.animation,c=t.align,d=t.placement,h=void 0===d?"bottomLeft":d,p=t.placements,f=void 0===p?Mxe:p,m=t.getPopupContainer,g=t.showAction,v=t.hideAction,y=t.overlayClassName,b=t.overlayStyle,x=t.visible,A=t.trigger,w=void 0===A?["hover"]:A,k=t.autoFocus,S=Pr(t,Pxe),C=u(e.useState(),2),I=C[0],E=C[1],T="visible"in t?x:I,N=e.useRef(null);e.useImperativeHandle(n,(function(){return N.current})),function(t){var n=t.visible,r=t.setTriggerVisible,a=t.triggerRef,i=t.onVisibleChange,o=t.autoFocus,s=e.useRef(!1),u=function(){var e,t,o,s;n&&a.current&&(null===(e=a.current)||void 0===e||null===(t=e.triggerRef)||void 0===t||null===(o=t.current)||void 0===o||null===(s=o.focus)||void 0===s||s.call(o),r(!1),"function"===typeof i&&i(!1))},l=function(){var e,t,n,r,i=exe(null===(e=a.current)||void 0===e||null===(t=e.popupRef)||void 0===t||null===(n=t.current)||void 0===n||null===(r=n.getElement)||void 0===r?void 0:r.call(n))[0];return!!(null===i||void 0===i?void 0:i.focus)&&(i.focus(),s.current=!0,!0)},c=function(e){switch(e.keyCode){case Rxe:u();break;case Oxe:var t=!1;s.current||(t=l()),t?e.preventDefault():u()}};e.useEffect((function(){return n?(window.addEventListener("keydown",c),o&&Rme(l,3),function(){window.removeEventListener("keydown",c),s.current=!1}):function(){s.current=!1}}),[n])}({visible:T,setTriggerVisible:E,triggerRef:N,onVisibleChange:t.onVisibleChange,autoFocus:k});var _=function(){var n=function(){var e=t.overlay;return"function"===typeof e?e():e}();return e.createElement(e.Fragment,null,a&&e.createElement("div",{className:"".concat(o,"-arrow")}),n)},M=v;return M||-1===w.indexOf("contextMenu")||(M=["click"]),e.createElement(jbe,Wr(Wr({builtinPlacements:f},S),{},{prefixCls:o,ref:N,popupClassName:Zt()(y,Fr({},"".concat(o,"-show-arrow"),a)),popupStyle:b,action:w,showAction:g,hideAction:M||[],popupPlacement:h,popupAlign:c,popupTransitionName:s,popupAnimation:l,popupVisible:T,stretch:function(){var e=t.minOverlayWidthMatchTrigger,n=t.alignPoint;return"minOverlayWidthMatchTrigger"in t?e:!n}()?"minWidth":"",popup:"function"===typeof t.overlay?_:_(),onPopupVisibleChange:function(e){var n=t.onVisibleChange;E(e),"function"===typeof n&&n(e)},onPopupClick:function(e){var n=t.onOverlayClick;E(!1),n&&n(e)},getPopupContainer:m}),function(){var n=t.children,r=n.props?n.props:{},a=Zt()(r.className,function(){var e=t.openClassName;return void 0!==e?e:"".concat(o,"-open")}());return T&&n?e.cloneElement(n,{className:a}):n}())}var Dxe=e.forwardRef(Fxe);function Lxe(t,n){var r=t.prefixCls,a=t.editable,i=t.locale,o=t.style;return a&&!1!==a.showAdd?e.createElement("button",{ref:n,type:"button",className:"".concat(r,"-nav-add"),style:o,"aria-label":(null===i||void 0===i?void 0:i.addAriaLabel)||"Add tab",onClick:function(e){a.onEdit("add",{event:e})}},a.addIcon||"+"):null}var zxe=e.forwardRef(Lxe);function Bxe(t,n){var r=t.prefixCls,a=t.id,i=t.tabs,o=t.locale,s=t.mobile,l=t.moreIcon,c=void 0===l?"More":l,d=t.moreTransitionName,h=t.style,p=t.className,f=t.editable,m=t.tabBarGutter,g=t.rtl,v=t.removeAriaLabel,y=t.onTabClick,b=t.popupClassName,x=u((0,e.useState)(!1),2),A=x[0],w=x[1],k=u((0,e.useState)(null),2),S=k[0],C=k[1],I="".concat(a,"-more-popup"),E="".concat(r,"-dropdown"),T=null!==S?"".concat(I,"-").concat(S):null,N=null===o||void 0===o?void 0:o.dropdownAriaLabel;var _=e.createElement(Txe,{onClick:function(e){var t=e.key,n=e.domEvent;y(t,n),w(!1)},prefixCls:"".concat(E,"-menu"),id:I,tabIndex:-1,role:"listbox","aria-activedescendant":T,selectedKeys:[S],"aria-label":void 0!==N?N:"expanded dropdown"},i.map((function(t){var n=f&&!1!==t.closable&&!t.disabled;return e.createElement(mve,{key:t.key,id:"".concat(I,"-").concat(t.key),role:"option","aria-controls":a&&"".concat(a,"-panel-").concat(t.key),disabled:t.disabled},e.createElement("span",null,t.tab),n&&e.createElement("button",{type:"button","aria-label":v||"remove",tabIndex:0,className:"".concat(E,"-menu-item-remove"),onClick:function(e){var n,r;e.stopPropagation(),n=e,r=t.key,n.preventDefault(),n.stopPropagation(),f.onEdit("remove",{key:r,event:n})}},t.closeIcon||f.removeIcon||"\xd7"))})));function M(e){for(var t=i.filter((function(e){return!e.disabled})),n=t.findIndex((function(e){return e.key===S}))||0,r=t.length,a=0;a<r;a+=1){var o=t[n=(n+e+r)%r];if(!o.disabled)return void C(o.key)}}(0,e.useEffect)((function(){var e=document.getElementById(T);e&&e.scrollIntoView&&e.scrollIntoView(!1)}),[S]),(0,e.useEffect)((function(){A||C(null)}),[A]);var R=Fr({},g?"marginRight":"marginLeft",m);i.length||(R.visibility="hidden",R.order=1);var O=Zt()(Fr({},"".concat(E,"-rtl"),g)),P=s?null:e.createElement(Dxe,{prefixCls:E,overlay:_,trigger:["hover"],visible:A,transitionName:d,onVisibleChange:w,overlayClassName:Zt()(O,b),mouseEnterDelay:.1,mouseLeaveDelay:.1},e.createElement("button",{type:"button",className:"".concat(r,"-nav-more"),style:R,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":I,id:"".concat(a,"-more"),"aria-expanded":A,onKeyDown:function(e){var t=e.which;if(A)switch(t){case yge.UP:M(-1),e.preventDefault();break;case yge.DOWN:M(1),e.preventDefault();break;case yge.ESC:w(!1);break;case yge.SPACE:case yge.ENTER:null!==S&&y(S,e)}else[yge.DOWN,yge.SPACE,yge.ENTER].includes(t)&&(w(!0),e.preventDefault())}},c));return e.createElement("div",{className:Zt()("".concat(r,"-nav-operations"),p),style:h,ref:n},P,e.createElement(zxe,{prefixCls:r,locale:o,editable:f}))}var Wxe=e.memo(e.forwardRef(Bxe),(function(e,t){return t.tabMoving})),jxe=(0,e.createContext)(null),Vxe=Math.pow(.995,20);function Hxe(t,n){var r=e.useRef(t),a=u(e.useState({}),2)[1];return[r.current,function(e){var t="function"===typeof e?e(r.current):e;t!==r.current&&n(t,r.current),r.current=t,a({})}]}var Uxe=function(t){var n,r=t.position,a=t.prefixCls,i=t.extra;if(!i)return null;var o={};return i&&"object"===Tr(i)&&!e.isValidElement(i)?o=i:o.right=i,"right"===r&&(n=o.right),"left"===r&&(n=o.left),n?e.createElement("div",{className:"".concat(a,"-extra-content")},n):null};function Gxe(t,n){var r,a=e.useContext(jxe),i=a.prefixCls,o=a.tabs,s=t.className,l=t.style,c=t.id,d=t.animated,h=t.activeKey,p=t.rtl,f=t.extra,m=t.editable,g=t.locale,v=t.tabPosition,y=t.tabBarGutter,b=t.children,x=t.onTabClick,A=t.onTabScroll,w=(0,e.useRef)(),k=(0,e.useRef)(),S=(0,e.useRef)(),C=(0,e.useRef)(),I=u(function(){var t=(0,e.useRef)(new Map);return[function(n){return t.current.has(n)||t.current.set(n,e.createRef()),t.current.get(n)},function(e){t.current.delete(e)}]}(),2),E=I[0],T=I[1],N="top"===v||"bottom"===v,_=Hxe(0,(function(e,t){N&&A&&A({direction:e>t?"left":"right"})})),M=u(_,2),R=M[0],O=M[1],P=Hxe(0,(function(e,t){!N&&A&&A({direction:e>t?"top":"bottom"})})),F=u(P,2),D=F[0],L=F[1],z=u((0,e.useState)(0),2),B=z[0],W=z[1],j=u((0,e.useState)(0),2),V=j[0],H=j[1],U=u((0,e.useState)(null),2),G=U[0],X=U[1],q=u((0,e.useState)(null),2),Y=q[0],K=q[1],Z=u((0,e.useState)(0),2),J=Z[0],Q=Z[1],$=u((0,e.useState)(0),2),ee=$[0],te=$[1],ne=function(t){var n=(0,e.useRef)([]),r=u((0,e.useState)({}),2)[1],a=(0,e.useRef)("function"===typeof t?t():t),i=gge((function(){var e=a.current;n.current.forEach((function(t){e=t(e)})),n.current=[],a.current=e,r({})}));return[a.current,function(e){n.current.push(e),i()}]}(new Map),re=u(ne,2),ae=re[0],ie=re[1],oe=function(t,n,r){return(0,e.useMemo)((function(){for(var e,r=new Map,a=n.get(null===(e=t[0])||void 0===e?void 0:e.key)||Age,i=a.left+a.width,o=0;o<t.length;o+=1){var s,u=t[o].key,l=n.get(u);l||(l=n.get(null===(s=t[o-1])||void 0===s?void 0:s.key)||Age);var c=r.get(u)||Wr({},l);c.right=i-c.left-c.width,r.set(u,c)}return r}),[t.map((function(e){return e.key})).join("_"),n,r])}(o,ae,B),se="".concat(i,"-nav-operations-hidden"),ue=0,le=0;function ce(e){return e<ue?ue:e>le?le:e}N?p?(ue=0,le=Math.max(0,B-G)):(ue=Math.min(0,G-B),le=0):(ue=Math.min(0,Y-V),le=0);var de=(0,e.useRef)(),he=u((0,e.useState)(),2),pe=he[0],fe=he[1];function me(){fe(Date.now())}function ge(){window.clearTimeout(de.current)}function ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=oe.get(e)||{width:0,height:0,left:0,right:0,top:0};if(N){var n=R;p?t.right<R?n=t.right:t.right+t.width>R+G&&(n=t.right+t.width-G):t.left<-R?n=-t.left:t.left+t.width>-R+G&&(n=-(t.left+t.width-G)),L(0),O(ce(n))}else{var r=D;t.top<-D?r=-t.top:t.top+t.height>-D+Y&&(r=-(t.top+t.height-Y)),O(0),L(ce(r))}}!function(t,n){var r=u((0,e.useState)(),2),a=r[0],i=r[1],o=u((0,e.useState)(0),2),s=o[0],l=o[1],c=u((0,e.useState)(0),2),d=c[0],h=c[1],p=u((0,e.useState)(),2),f=p[0],m=p[1],g=(0,e.useRef)(),v=(0,e.useRef)(),y=(0,e.useRef)(null);y.current={onTouchStart:function(e){var t=e.touches[0],n=t.screenX,r=t.screenY;i({x:n,y:r}),window.clearInterval(g.current)},onTouchMove:function(e){if(a){e.preventDefault();var t=e.touches[0],r=t.screenX,o=t.screenY;i({x:r,y:o});var u=r-a.x,c=o-a.y;n(u,c);var d=Date.now();l(d),h(d-s),m({x:u,y:c})}},onTouchEnd:function(){if(a&&(i(null),m(null),f)){var e=f.x/d,t=f.y/d,r=Math.abs(e),o=Math.abs(t);if(Math.max(r,o)<.1)return;var s=e,u=t;g.current=window.setInterval((function(){Math.abs(s)<.01&&Math.abs(u)<.01?window.clearInterval(g.current):n(20*(s*=Vxe),20*(u*=Vxe))}),20)}},onWheel:function(e){var t=e.deltaX,r=e.deltaY,a=0,i=Math.abs(t),o=Math.abs(r);i===o?a="x"===v.current?t:r:i>o?(a=t,v.current="x"):(a=r,v.current="y"),n(-a,-a)&&e.preventDefault()}},e.useEffect((function(){function e(e){y.current.onTouchMove(e)}function n(e){y.current.onTouchEnd(e)}return document.addEventListener("touchmove",e,{passive:!1}),document.addEventListener("touchend",n,{passive:!1}),t.current.addEventListener("touchstart",(function(e){y.current.onTouchStart(e)}),{passive:!1}),t.current.addEventListener("wheel",(function(e){y.current.onWheel(e)})),function(){document.removeEventListener("touchmove",e),document.removeEventListener("touchend",n)}}),[])}(w,(function(e,t){function n(e,t){e((function(e){return ce(e+t)}))}if(N){if(G>=B)return!1;n(O,e)}else{if(Y>=V)return!1;n(L,t)}return ge(),me(),!0})),(0,e.useEffect)((function(){return ge(),pe&&(de.current=window.setTimeout((function(){fe(0)}),100)),ge}),[pe]);var ye=function(t,n,r,a,i){var o,s,u,l=i.tabs,c=i.tabPosition,d=i.rtl;["top","bottom"].includes(c)?(o="width",s=d?"right":"left",u=Math.abs(n.left)):(o="height",s="top",u=-n.top);var h=n[o],p=r[o],f=a[o],m=h;return p+f>h&&p<h&&(m=h-f),(0,e.useMemo)((function(){if(!l.length)return[0,0];for(var e=l.length,n=e,r=0;r<e;r+=1){var a=t.get(l[r].key)||wge;if(a[s]+a[o]>u+m){n=r-1;break}}for(var i=0,c=e-1;c>=0;c-=1)if((t.get(l[c].key)||wge)[s]<u){i=c+1;break}return[i,n]}),[t,u,m,c,l.map((function(e){return e.key})).join("_"),d])}(oe,{width:G,height:Y,left:R,top:D},{width:B,height:V},{width:J,height:ee},Wr(Wr({},t),{},{tabs:o})),be=u(ye,2),xe=be[0],Ae=be[1],we={};"top"===v||"bottom"===v?we[p?"marginRight":"marginLeft"]=y:we.marginTop=y;var ke=o.map((function(t,n){var r=t.key;return e.createElement(xge,{id:c,prefixCls:i,key:r,tab:t,style:0===n?void 0:we,closable:t.closable,editable:m,active:r===h,renderWrapper:b,removeAriaLabel:null===g||void 0===g?void 0:g.removeAriaLabel,ref:E(r),onClick:function(e){x(r,e)},onRemove:function(){T(r)},onFocus:function(){ve(r),me(),w.current&&(p||(w.current.scrollLeft=0),w.current.scrollTop=0)}})})),Se=gge((function(){var e,t,n,r,a,i,s=(null===(e=w.current)||void 0===e?void 0:e.offsetWidth)||0,u=(null===(t=w.current)||void 0===t?void 0:t.offsetHeight)||0,l=(null===(n=C.current)||void 0===n?void 0:n.offsetWidth)||0,c=(null===(r=C.current)||void 0===r?void 0:r.offsetHeight)||0;X(s),K(u),Q(l),te(c);var d=((null===(a=k.current)||void 0===a?void 0:a.offsetWidth)||0)-l,h=((null===(i=k.current)||void 0===i?void 0:i.offsetHeight)||0)-c;W(d),H(h),ie((function(){var e=new Map;return o.forEach((function(t){var n=t.key,r=E(n).current;r&&e.set(n,{width:r.offsetWidth,height:r.offsetHeight,left:r.offsetLeft,top:r.offsetTop})})),e}))})),Ce=o.slice(0,xe),Ie=o.slice(Ae+1),Ee=[].concat(ta(Ce),ta(Ie)),Te=u((0,e.useState)(),2),Ne=Te[0],_e=Te[1],Me=oe.get(h),Re=(0,e.useRef)();function Oe(){Rme.cancel(Re.current)}(0,e.useEffect)((function(){var e={};return Me&&(N?(p?e.right=Me.right:e.left=Me.left,e.width=Me.width):(e.top=Me.top,e.height=Me.height)),Oe(),Re.current=Rme((function(){_e(e)})),Oe}),[Me,N,p]),(0,e.useEffect)((function(){ve()}),[h,Me,oe,N]),(0,e.useEffect)((function(){Se()}),[p,y,h,o.map((function(e){return e.key})).join("_")]);var Pe,Fe,De,Le,ze=!!Ee.length,Be="".concat(i,"-nav-wrap");return N?p?(Fe=R>0,Pe=R+G<B):(Pe=R<0,Fe=-R+G<B):(De=D<0,Le=-D+Y<V),e.createElement("div",{ref:n,role:"tablist",className:Zt()("".concat(i,"-nav"),s),style:l,onKeyDown:function(){me()}},e.createElement(Uxe,{position:"left",extra:f,prefixCls:i}),e.createElement(mge,{onResize:Se},e.createElement("div",{className:Zt()(Be,(r={},Fr(r,"".concat(Be,"-ping-left"),Pe),Fr(r,"".concat(Be,"-ping-right"),Fe),Fr(r,"".concat(Be,"-ping-top"),De),Fr(r,"".concat(Be,"-ping-bottom"),Le),r)),ref:w},e.createElement(mge,{onResize:Se},e.createElement("div",{ref:k,className:"".concat(i,"-nav-list"),style:{transform:"translate(".concat(R,"px, ").concat(D,"px)"),transition:pe?"none":void 0}},ke,e.createElement(zxe,{ref:C,prefixCls:i,locale:g,editable:m,style:Wr(Wr({},0===ke.length?void 0:we),{},{visibility:ze?"hidden":null})}),e.createElement("div",{className:Zt()("".concat(i,"-ink-bar"),Fr({},"".concat(i,"-ink-bar-animated"),d.inkBar)),style:Ne}))))),e.createElement(Wxe,fme({},t,{removeAriaLabel:null===g||void 0===g?void 0:g.removeAriaLabel,ref:S,prefixCls:i,tabs:Ee,className:!ze&&se,tabMoving:!!pe})),e.createElement(Uxe,{position:"right",extra:f,prefixCls:i}))}var Xxe=e.forwardRef(Gxe);function qxe(t){var n=t.id,r=t.activeKey,a=t.animated,i=t.tabPosition,o=t.rtl,s=t.destroyInactiveTabPane,u=e.useContext(jxe),l=u.prefixCls,c=u.tabs,d=a.tabPane,h=c.findIndex((function(e){return e.key===r}));return e.createElement("div",{className:Zt()("".concat(l,"-content-holder"))},e.createElement("div",{className:Zt()("".concat(l,"-content"),"".concat(l,"-content-").concat(i),Fr({},"".concat(l,"-content-animated"),d)),style:h&&d?Fr({},o?"marginRight":"marginLeft","-".concat(h,"00%")):null},c.map((function(t){return e.cloneElement(t.node,{key:t.key,prefixCls:l,tabKey:t.key,id:n,animated:d,active:t.key===r,destroyInactiveTabPane:s})}))))}function Yxe(t){var n=t.prefixCls,r=t.forceRender,a=t.className,i=t.style,o=t.id,s=t.active,l=t.animated,c=t.destroyInactiveTabPane,d=t.tabKey,h=t.children,p=u(e.useState(r),2),f=p[0],m=p[1];e.useEffect((function(){s?m(!0):c&&m(!1)}),[s,c]);var g={};return s||(l?(g.visibility="hidden",g.height=0,g.overflowY="hidden"):g.display="none"),e.createElement("div",{id:o&&"".concat(o,"-panel-").concat(d),role:"tabpanel",tabIndex:s?0:-1,"aria-labelledby":o&&"".concat(o,"-tab-").concat(d),"aria-hidden":!s,style:Wr(Wr({},g),i),className:Zt()("".concat(n,"-tabpane"),s&&"".concat(n,"-tabpane-active"),a)},(s||f||r)&&h)}var Kxe=["id","prefixCls","className","children","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","popupClassName"],Zxe=0;function Jxe(t,n){var r,a,i=t.id,o=t.prefixCls,s=void 0===o?"rc-tabs":o,l=t.className,c=t.children,d=t.direction,h=t.activeKey,p=t.defaultActiveKey,f=t.editable,m=t.animated,g=void 0===m?{inkBar:!0,tabPane:!1}:m,v=t.tabPosition,y=void 0===v?"top":v,b=t.tabBarGutter,x=t.tabBarStyle,A=t.tabBarExtraContent,w=t.locale,k=t.moreIcon,S=t.moreTransitionName,C=t.destroyInactiveTabPane,I=t.renderTabBar,E=t.onChange,T=t.onTabClick,N=t.onTabScroll,_=t.popupClassName,M=Pr(t,Kxe),R=function(t){return kme(t).map((function(t){return e.isValidElement(t)?Wr(Wr({key:void 0!==t.key?String(t.key):void 0},t.props),{},{node:t}):null})).filter((function(e){return e}))}(c),O="rtl"===d;a=!1===g?{inkBar:!1,tabPane:!1}:!0===g?{inkBar:!0,tabPane:!0}:Wr({inkBar:!0,tabPane:!1},"object"===Tr(g)?g:{});var P=u((0,e.useState)(!1),2),F=P[0],D=P[1];(0,e.useEffect)((function(){D(Sme())}),[]);var L=u(Ime((function(){var e;return null===(e=R[0])||void 0===e?void 0:e.key}),{value:h,defaultValue:p}),2),z=L[0],B=L[1],W=u((0,e.useState)((function(){return R.findIndex((function(e){return e.key===z}))})),2),j=W[0],V=W[1];(0,e.useEffect)((function(){var e,t=R.findIndex((function(e){return e.key===z}));-1===t&&(t=Math.max(0,Math.min(j,R.length-1)),B(null===(e=R[t])||void 0===e?void 0:e.key));V(t)}),[R.map((function(e){return e.key})).join("_"),z,j]);var H=u(Ime(null,{value:i}),2),U=H[0],G=H[1],X=y;F&&!["left","right"].includes(y)&&(X="top"),(0,e.useEffect)((function(){i||(G("rc-tabs-".concat(Zxe)),Zxe+=1)}),[]);var q,Y={id:U,activeKey:z,animated:a,tabPosition:X,rtl:O,mobile:F},K=Wr(Wr({},Y),{},{editable:f,locale:w,moreIcon:k,moreTransitionName:S,tabBarGutter:b,onTabClick:function(e,t){null===T||void 0===T||T(e,t);var n=e!==z;B(e),n&&(null===E||void 0===E||E(e))},onTabScroll:N,extra:A,style:x,panes:c,popupClassName:_});return q=I?I(K,Xxe):e.createElement(Xxe,K),e.createElement(jxe.Provider,{value:{tabs:R,prefixCls:s}},e.createElement("div",fme({ref:n,id:i,className:Zt()(s,"".concat(s,"-").concat(X),(r={},Fr(r,"".concat(s,"-mobile"),F),Fr(r,"".concat(s,"-editable"),f),Fr(r,"".concat(s,"-rtl"),O),r),l)},M),q,e.createElement(qxe,fme({destroyInactiveTabPane:C},Y,{animated:a}))))}var Qxe=e.forwardRef(Jxe);Qxe.TabPane=Yxe;var $xe=Qxe,eAe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},tAe=(0,e.createContext)({}),nAe=n(6451),rAe="rc-util-key";function aAe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):rAe}function iAe(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function oAe(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Cge())return null;var r,a=document.createElement("style");(null===(t=n.csp)||void 0===t?void 0:t.nonce)&&(a.nonce=null===(r=n.csp)||void 0===r?void 0:r.nonce);a.innerHTML=e;var i=iAe(n),o=i.firstChild;return n.prepend&&i.prepend?i.prepend(a):n.prepend&&o?i.insertBefore(a,o):i.appendChild(a),a}var sAe=new Map;function uAe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=iAe(t);return Array.from(sAe.get(n).children).find((function(n){return"STYLE"===n.tagName&&n.getAttribute(aAe(t))===e}))}function lAe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=iAe(n);if(!sAe.has(r)){var a=oAe("",n),i=a.parentNode;sAe.set(r,i),i.removeChild(a)}var o=uAe(t,n);if(o){var s,u,l;if((null===(s=n.csp)||void 0===s?void 0:s.nonce)&&o.nonce!==(null===(u=n.csp)||void 0===u?void 0:u.nonce))o.nonce=null===(l=n.csp)||void 0===l?void 0:l.nonce;return o.innerHTML!==e&&(o.innerHTML=e),o}var c=oAe(e,n);return c.setAttribute(aAe(n),t),c}function cAe(e){return"object"===Tr(e)&&"string"===typeof e.name&&"string"===typeof e.theme&&("object"===Tr(e.icon)||"function"===typeof e.icon)}function dAe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];if("class"===n)t.className=r,delete t.class;else t[n]=r;return t}),{})}function hAe(t,n,r){return r?e.createElement(t.tag,Wr(Wr({key:n},dAe(t.attrs)),r),(t.children||[]).map((function(e,r){return hAe(e,"".concat(n,"-").concat(t.tag,"-").concat(r))}))):e.createElement(t.tag,Wr({key:n},dAe(t.attrs)),(t.children||[]).map((function(e,r){return hAe(e,"".concat(n,"-").concat(t.tag,"-").concat(r))})))}function pAe(e){return(0,nAe.generate)(e)[0]}function fAe(e){return e?Array.isArray(e)?e:[e]:[]}var mAe="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",gAe=["icon","className","onClick","style","primaryColor","secondaryColor"],vAe={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var yAe=function(t){var n,r,a=t.icon,i=t.className,o=t.onClick,s=t.style,u=t.primaryColor,l=t.secondaryColor,c=Pr(t,gAe),d=vAe;if(u&&(d={primaryColor:u,secondaryColor:l||pAe(u)}),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mAe,n=(0,e.useContext)(tAe).csp;(0,e.useEffect)((function(){lAe(t,"@ant-design-icons",{prepend:!0,csp:n})}),[])}(),n=cAe(a),r="icon should be icon definiton, but got ".concat(a),Dme(n,"[@ant-design/icons] ".concat(r)),!cAe(a))return null;var h=a;return h&&"function"===typeof h.icon&&(h=Wr(Wr({},h),{},{icon:h.icon(d.primaryColor,d.secondaryColor)})),hAe(h.icon,"svg-".concat(h.name),Wr({className:i,onClick:o,style:s,"data-icon":h.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},c))};yAe.displayName="IconReact",yAe.getTwoToneColors=function(){return Wr({},vAe)},yAe.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;vAe.primaryColor=t,vAe.secondaryColor=n||pAe(t),vAe.calculated=!!n};var bAe=yAe;function xAe(e){var t=u(fAe(e),2),n=t[0],r=t[1];return bAe.setTwoToneColors({primaryColor:n,secondaryColor:r})}var AAe=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];xAe("#1890ff");var wAe=e.forwardRef((function(t,n){var r,a=t.className,i=t.icon,o=t.spin,s=t.rotate,l=t.tabIndex,c=t.onClick,d=t.twoToneColor,h=Pr(t,AAe),p=e.useContext(tAe).prefixCls,f=void 0===p?"anticon":p,m=Zt()(f,(Fr(r={},"".concat(f,"-").concat(i.name),!!i.name),Fr(r,"".concat(f,"-spin"),!!o||"loading"===i.name),r),a),g=l;void 0===g&&c&&(g=-1);var v=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,y=u(fAe(d),2),b=y[0],x=y[1];return e.createElement("span",Wr(Wr({role:"img","aria-label":i.name},h),{},{ref:n,tabIndex:g,onClick:c,className:m}),e.createElement(bAe,{icon:i,primaryColor:b,secondaryColor:x,style:v}))}));wAe.displayName="AntdIcon",wAe.getTwoToneColor=function(){var e=bAe.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},wAe.setTwoToneColor=xAe;var kAe=wAe,SAe=function(t,n){return e.createElement(kAe,Wr(Wr({},t),{},{ref:n,icon:eAe}))};SAe.displayName="EllipsisOutlined";var CAe=e.forwardRef(SAe),IAe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},EAe=function(t,n){return e.createElement(kAe,Wr(Wr({},t),{},{ref:n,icon:IAe}))};EAe.displayName="PlusOutlined";var TAe=e.forwardRef(EAe),NAe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},_Ae=function(t,n){return e.createElement(kAe,Wr(Wr({},t),{},{ref:n,icon:NAe}))};_Ae.displayName="CloseOutlined";var MAe=e.forwardRef(_Ae),RAe=e.createContext(void 0),OAe=RAe,PAe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function FAe(t){var n,r=t.type,a=t.className,i=t.size,o=t.onEdit,s=t.hideAdd,u=t.centered,l=t.addIcon,c=PAe(t,["type","className","size","onEdit","hideAdd","centered","addIcon"]),d=c.prefixCls,h=c.moreIcon,p=void 0===h?e.createElement(CAe,null):h,f=e.useContext(mme),m=f.getPrefixCls,g=f.direction,v=m("tabs",d);"editable-card"===r&&(n={onEdit:function(e,t){var n=t.key,r=t.event;null===o||void 0===o||o("add"===e?r:n,e)},removeIcon:e.createElement(MAe,null),addIcon:l||e.createElement(TAe,null),showAdd:!0!==s});var y=m();return e.createElement(OAe.Consumer,null,(function(t){var o,s=void 0!==i?i:t;return e.createElement($xe,fme({direction:g,moreTransitionName:"".concat(y,"-slide-up")},c,{className:Zt()((o={},Fr(o,"".concat(v,"-").concat(s),s),Fr(o,"".concat(v,"-card"),["card","editable-card"].includes(r)),Fr(o,"".concat(v,"-editable-card"),"editable-card"===r),Fr(o,"".concat(v,"-centered"),u),o),a),editable:n,moreIcon:p,prefixCls:v}))}))}FAe.TabPane=Yxe;var DAe=FAe,LAe=function(t){var n=t.prefixCls,r=t.className,a=t.width,i=t.style;return e.createElement("h3",{className:Zt()(n,r),style:fme({width:a},i)})},zAe=function(t){var n=function(e){var n=t.width,r=t.rows,a=void 0===r?2:r;return Array.isArray(n)?n[e]:a-1===e?n:void 0},r=t.prefixCls,a=t.className,i=t.style,o=t.rows,s=ta(Array(o)).map((function(t,r){return e.createElement("li",{key:r,style:{width:n(r)}})}));return e.createElement("ul",{className:Zt()(r,a),style:i},s)},BAe=function(t){var n,r,a=t.prefixCls,i=t.className,o=t.style,s=t.size,u=t.shape,l=Zt()((Fr(n={},"".concat(a,"-lg"),"large"===s),Fr(n,"".concat(a,"-sm"),"small"===s),n)),c=Zt()((Fr(r={},"".concat(a,"-circle"),"circle"===u),Fr(r,"".concat(a,"-square"),"square"===u),Fr(r,"".concat(a,"-round"),"round"===u),r)),d="number"===typeof s?{width:s,height:s,lineHeight:"".concat(s,"px")}:{};return e.createElement("span",{className:Zt()(a,l,c,i),style:fme(fme({},d),o)})},WAe=function(t){var n=t.prefixCls,r=t.className,a=t.active,i=(0,e.useContext(mme).getPrefixCls)("skeleton",n),o=Ame(t,["prefixCls","className"]),s=Zt()(i,"".concat(i,"-element"),Fr({},"".concat(i,"-active"),a),r);return e.createElement("div",{className:s},e.createElement(BAe,fme({prefixCls:"".concat(i,"-avatar")},o)))};WAe.defaultProps={size:"default",shape:"circle"};var jAe=WAe,VAe=function(t){var n,r=t.prefixCls,a=t.className,i=t.active,o=t.block,s=void 0!==o&&o,u=(0,e.useContext(mme).getPrefixCls)("skeleton",r),l=Ame(t,["prefixCls"]),c=Zt()(u,"".concat(u,"-element"),(Fr(n={},"".concat(u,"-active"),i),Fr(n,"".concat(u,"-block"),s),n),a);return e.createElement("div",{className:c},e.createElement(BAe,fme({prefixCls:"".concat(u,"-button")},l)))};VAe.defaultProps={size:"default"};var HAe=VAe,UAe=function(t){var n,r=t.prefixCls,a=t.className,i=t.active,o=t.block,s=(0,e.useContext(mme).getPrefixCls)("skeleton",r),u=Ame(t,["prefixCls"]),l=Zt()(s,"".concat(s,"-element"),(Fr(n={},"".concat(s,"-active"),i),Fr(n,"".concat(s,"-block"),o),n),a);return e.createElement("div",{className:l},e.createElement(BAe,fme({prefixCls:"".concat(s,"-input")},u)))};UAe.defaultProps={size:"default"};var GAe=UAe,XAe=function(t){var n=t.prefixCls,r=t.className,a=t.style,i=(0,e.useContext(mme).getPrefixCls)("skeleton",n),o=Zt()(i,"".concat(i,"-element"),r);return e.createElement("div",{className:o},e.createElement("div",{className:Zt()("".concat(i,"-image"),r),style:a},e.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:"".concat(i,"-image-svg")},e.createElement("path",{d:"M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",className:"".concat(i,"-image-path")}))))};function qAe(e){return e&&"object"===Tr(e)?e:{}}var YAe=function(t){var n=t.prefixCls,r=t.loading,a=t.className,i=t.style,o=t.children,s=t.avatar,u=t.title,l=t.paragraph,c=t.active,d=t.round,h=e.useContext(mme),p=h.getPrefixCls,f=h.direction,m=p("skeleton",n);if(r||!("loading"in t)){var g,v,y,b=!!s,x=!!u,A=!!l;if(b){var w=fme(fme({prefixCls:"".concat(m,"-avatar")},function(e,t){return e&&!t?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}(x,A)),qAe(s));v=e.createElement("div",{className:"".concat(m,"-header")},e.createElement(BAe,fme({},w)))}if(x||A){var k,S;if(x){var C=fme(fme({prefixCls:"".concat(m,"-title")},function(e,t){return!e&&t?{width:"38%"}:e&&t?{width:"50%"}:{}}(b,A)),qAe(u));k=e.createElement(LAe,fme({},C))}if(A){var I=fme(fme({prefixCls:"".concat(m,"-paragraph")},function(e,t){var n={};return e&&t||(n.width="61%"),n.rows=!e&&t?3:2,n}(b,x)),qAe(l));S=e.createElement(zAe,fme({},I))}y=e.createElement("div",{className:"".concat(m,"-content")},k,S)}var E=Zt()(m,(Fr(g={},"".concat(m,"-with-avatar"),b),Fr(g,"".concat(m,"-active"),c),Fr(g,"".concat(m,"-rtl"),"rtl"===f),Fr(g,"".concat(m,"-round"),d),g),a);return e.createElement("div",{className:E,style:i},v,y)}return"undefined"!==typeof o?o:null};YAe.defaultProps={avatar:!1,title:!0,paragraph:!0},YAe.Button=HAe,YAe.Avatar=jAe,YAe.Input=GAe,YAe.Image=XAe;var KAe=YAe,ZAe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};var JAe=e.forwardRef((function(t,n){var r,a,i,o=e.useContext(mme),s=o.getPrefixCls,u=o.direction,l=e.useContext(OAe),c=t.prefixCls,d=t.className,h=t.extra,p=t.headStyle,f=void 0===p?{}:p,m=t.bodyStyle,g=void 0===m?{}:m,v=t.title,y=t.loading,b=t.bordered,x=void 0===b||b,A=t.size,w=t.type,k=t.cover,S=t.actions,C=t.tabList,I=t.children,E=t.activeTabKey,T=t.defaultActiveTabKey,N=t.tabBarExtraContent,_=t.hoverable,M=t.tabProps,R=void 0===M?{}:M,O=ZAe(t,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),P=s("card",c),F=e.createElement(KAe,{loading:!0,active:!0,paragraph:{rows:4},title:!1},I),D=void 0!==E,L=fme(fme({},R),(Fr(r={},D?"activeKey":"defaultActiveKey",D?E:T),Fr(r,"tabBarExtraContent",N),r)),z=C&&C.length?e.createElement(DAe,fme({size:"large"},L,{className:"".concat(P,"-head-tabs"),onChange:function(e){var n;null===(n=t.onTabChange)||void 0===n||n.call(t,e)}}),C.map((function(t){return e.createElement(DAe.TabPane,{tab:t.tab,disabled:t.disabled,key:t.key})}))):null;(v||h||z)&&(i=e.createElement("div",{className:"".concat(P,"-head"),style:f},e.createElement("div",{className:"".concat(P,"-head-wrapper")},v&&e.createElement("div",{className:"".concat(P,"-head-title")},v),h&&e.createElement("div",{className:"".concat(P,"-extra")},h)),z));var B=k?e.createElement("div",{className:"".concat(P,"-cover")},k):null,W=e.createElement("div",{className:"".concat(P,"-body"),style:g},y?F:I),j=S&&S.length?e.createElement("ul",{className:"".concat(P,"-actions")},function(t){var n=t.map((function(n,r){return e.createElement("li",{style:{width:"".concat(100/t.length,"%")},key:"action-".concat(r)},e.createElement("span",null,n))}));return n}(S)):null,V=Ame(O,["onTabChange"]),H=A||l,U=Zt()(P,(Fr(a={},"".concat(P,"-loading"),y),Fr(a,"".concat(P,"-bordered"),x),Fr(a,"".concat(P,"-hoverable"),_),Fr(a,"".concat(P,"-contain-grid"),function(){var n;return e.Children.forEach(t.children,(function(e){e&&e.type&&e.type===yme&&(n=!0)})),n}()),Fr(a,"".concat(P,"-contain-tabs"),C&&C.length),Fr(a,"".concat(P,"-").concat(H),H),Fr(a,"".concat(P,"-type-").concat(w),!!w),Fr(a,"".concat(P,"-rtl"),"rtl"===u),a),d);return e.createElement("div",fme({ref:n},V,{className:U}),i,B,W,j)})),QAe=JAe;QAe.Grid=yme,QAe.Meta=xme;var $Ae=QAe,ewe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},twe=function(t,n){return e.createElement(kAe,Wr(Wr({},t),{},{ref:n,icon:ewe}))};twe.displayName="LoadingOutlined";var nwe=e.forwardRef(twe),rwe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},awe=function(t){var n,r,a=t.prefixCls,i=t.className,o=t.color,s=void 0===o?"blue":o,u=t.dot,l=t.pending,c=void 0!==l&&l,d=(t.position,t.label),h=t.children,p=rwe(t,["prefixCls","className","color","dot","pending","position","label","children"]),f=(0,e.useContext(mme).getPrefixCls)("timeline",a),m=Zt()((Fr(n={},"".concat(f,"-item"),!0),Fr(n,"".concat(f,"-item-pending"),c),n),i),g=Zt()((Fr(r={},"".concat(f,"-item-head"),!0),Fr(r,"".concat(f,"-item-head-custom"),!!u),Fr(r,"".concat(f,"-item-head-").concat(s),!0),r)),v=/blue|red|green|gray/.test(s||"")?void 0:s;return e.createElement("li",fme({},p,{className:m}),d&&e.createElement("div",{className:"".concat(f,"-item-label")},d),e.createElement("div",{className:"".concat(f,"-item-tail")}),e.createElement("div",{className:g,style:{borderColor:v,color:v}},u),e.createElement("div",{className:"".concat(f,"-item-content")},h))},iwe=e.isValidElement;function owe(t,n){return function(t,n,r){return iwe(t)?e.cloneElement(t,"function"===typeof r?r(t.props||{}):r):n}(t,t,n)}var swe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},uwe=function(t){var n,r=e.useContext(mme),a=r.getPrefixCls,i=r.direction,o=t.prefixCls,s=t.pending,u=void 0===s?null:s,l=t.pendingDot,c=t.children,d=t.className,h=t.reverse,p=void 0!==h&&h,f=t.mode,m=void 0===f?"":f,g=swe(t,["prefixCls","pending","pendingDot","children","className","reverse","mode"]),v=a("timeline",o),y="boolean"===typeof u?null:u,b=u?e.createElement(awe,{pending:!!u,dot:l||e.createElement(nwe,null)},y):null,x=e.Children.toArray(c);x.push(b),p&&x.reverse();var A=function(e,t){return"alternate"===m?"right"===e.props.position?"".concat(v,"-item-right"):"left"===e.props.position?"".concat(v,"-item-left"):"".concat(v,t%2===0?"-item-left":"-item-right"):"left"===m?"".concat(v,"-item-left"):"right"===m||"right"===e.props.position?"".concat(v,"-item-right"):""},w=x.filter((function(e){return!!e})),k=e.Children.count(w),S="".concat(v,"-item-last"),C=e.Children.map(w,(function(e,t){var n=t===k-2?S:"",r=t===k-1?S:"";return owe(e,{className:Zt()([e.props.className,!p&&u?n:r,A(e,t)])})})),I=x.some((function(e){var t;return!!(null===(t=null===e||void 0===e?void 0:e.props)||void 0===t?void 0:t.label)})),E=Zt()(v,(Fr(n={},"".concat(v,"-pending"),!!u),Fr(n,"".concat(v,"-reverse"),!!p),Fr(n,"".concat(v,"-").concat(m),!!m&&!I),Fr(n,"".concat(v,"-label"),I),Fr(n,"".concat(v,"-rtl"),"rtl"===i),n),d);return e.createElement("ul",fme({},g,{className:E}),C)};uwe.Item=awe;var lwe=uwe,cwe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},dwe=function(t,n){return e.createElement(kAe,Wr(Wr({},t),{},{ref:n,icon:cwe}))};dwe.displayName="ClockCircleOutlined";var hwe=e.forwardRef(dwe),pwe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 533h-48.1c-4.2 0-7.8 3.2-8.1 7.4C604 589.9 562.5 629 512 629s-92.1-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4z"}}]},name:"smile",theme:"outlined"},fwe=function(t,n){return e.createElement(kAe,Wr(Wr({},t),{},{ref:n,icon:pwe}))};fwe.displayName="SmileOutlined";var mwe,gwe,vwe,ywe,bwe,xwe=e.forwardRef(fwe);function Awe(e){var t=Math.floor(e);if(t<60)return"".concat(t,"s");if(t<3600){var n=Math.floor(t/60);return"".concat(n,"m")}var r=Math.floor(t/60),a=r%60,i=Math.floor(r/60);return"".concat(i,"h ").concat(a,"m")}function wwe(e){var t=e.record,n=e.index;return(0,sme.jsx)(sme.Fragment,{children:(0,sme.jsx)($Ae,{title:"Pomodoro #".concat(n),children:(0,sme.jsxs)("div",{className:Oe(mwe||(mwe=r(["\n        display: flex;\n        justify-content: space-around;\n        align-item: center;\n      "]))),children:[(0,sme.jsx)("span",{className:Oe(gwe||(gwe=r(["\n        border-radius: 50%;\n        background: #b0003a;\n        width: 3em;\n        height: 3em;\n        text-align: center;\n        vertical-align: middle;\n        display: inline-block;\n        line-height: 3em;\n        font-size: 1.5em;\n        color: white;\n        font-weight: bold;\n      "]))),children:Awe(t.timePeriod)}),(0,sme.jsx)("div",{className:Oe(vwe||(vwe=r(["\n            display: flex;\n            align-item: center;\n            justify-content: space-around;\n            flex-direction: column;\n          "]))),children:(0,sme.jsxs)("p",{className:Oe(ywe||(ywe=r(["\n            font-size: 1.5em;\n            font-weight: bold;\n            margin: 0;\n          "]))),children:["From ",new Date(t.startTime).toLocaleTimeString()]})})]})})})}var kwe=function(t){var n=t.mergedTimeTable,a=(0,e.useContext)(wie),i=n.filter((function(e){return!a.history.onlyShowToday||new Date(e.startTime).toDateString()===(new Date).toDateString()}));return(0,sme.jsxs)("div",{children:[(0,sme.jsx)("div",{className:Oe(bwe||(bwe=r(["\n          display: flex;\n          justify-content: space-between;\n          margin: 5px auto;\n          flex-wrap: wrap;\n        "]))),children:(0,sme.jsx)("h3",{children:"Pomodoro History"})}),(0,sme.jsx)(lwe,{mode:"left",children:i.map((function(e,t,n){return e.detected?(0,sme.jsx)(lwe.Item,{dot:(0,sme.jsx)(hwe,{}),children:(0,sme.jsx)(wwe,{record:e,index:t+1})},t):(0,sme.jsx)(lwe.Item,{color:"green",dot:(0,sme.jsx)(xwe,{}),children:(0,sme.jsxs)("p",{children:[" Rest for ",Awe(e.timePeriod)," "]})},t)})).reverse()})]})},Swe=n(8446),Cwe=function(){return Cwe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Cwe.apply(this,arguments)};var Iwe,Ewe,Twe=function(t){!function(t,n){var r=(0,e.useRef)({});(0,e.useEffect)((function(){if(r.current){var e=Object.keys(Cwe(Cwe({},r.current),n)),a={};e.forEach((function(e){Object.is(r.current[e],n[e])||(a[e]={from:r.current[e],to:n[e]})})),Object.keys(a).length&&console.log("[why-did-you-update]",t,a)}r.current=n}))}("PomodoroHistoryTimeChart",Wr({},t));var n=[{name:"focus",data:t.mergedTimeTable.filter((function(e){return new Date(e.startTime).toDateString()===(new Date).toDateString()})).map((function(e){return{x:"Session",y:[new Date(e.startTime).getTime(),new Date(e.endTime).getTime()],info:e}})).filter((function(e){return e.info.detected}))}];return(0,sme.jsx)(Swe.Z,{options:{plotOptions:{bar:{horizontal:!0,barHeight:"100%"}},colors:["#b0003a"],xaxis:{type:"datetime"}},series:n,type:"rangeBar",height:100})};var Nwe=function(){var t=(0,e.useContext)(wie),n=t.alertStudySeconds,a=t.alertRestSeconds,i=t.history.maxLocalStorageTimeSlot,o=u((0,e.useState)(""),2),s=o[0],l=o[1],d=u((0,e.useState)(!1),2),h=d[0],p=d[1];function f(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=n||(new Date).toJSON(),a=Math.floor((new Date-n)/1e3);return{startTime:r,endTime:(new Date).toJSON(),detected:e,timePeriod:a,pinnedSession:t}}var m=Ve("mergedTimeTable",{defaultValue:[f(!0,!0)],serializer:function(e){return JSON.stringify(e)},deserializer:function(e){var t=JSON.parse(e);return new Date-new Date(t.at(-1).endTime)>1e3*n&&t.push(f(!0,!0)),t.slice(0-i)}}),g=u(m,2),v=g[0],y=g[1],b=v.at(-1),x=u((0,e.useState)({}),2),A=x[0],w=x[1],k=u(Ue("/face-recognition-pomodoro/sounds/dingbell.aac"),1)[0],S=t.tempMissingSeconds,C=u((0,e.useState)(!1),2),I=C[0],E=C[1];function T(e){if(!(A[e]&&new Date-A[e].lastSendTime<1e3*A[e].nextSendInterval)){k(),I&&"granted"===Notification.permission&&new Notification(e),p(!0),l(e);var n=A[e]?2*A[e].nextSendInterval:t.notificationIntervalSeconds;A[e]={lastSendTime:new Date,nextSendInterval:n},w(A)}}(0,e.useEffect)((function(){var e="Notification"in window&&"serviceWorker"in navigator&&"PushManager"in window;E(e),e?t.enableNotification&&Notification.requestPermission():console.log("This browser does not support desktop notification")}),[t.enableNotification]),c((function(){var e=(new Date-new Date(b.startTime))/1e3;b.detected&&e>n?T("\u8be5\u4f11\u606f\u5566"):!b.detected&&e>a?T("\u4f11\u606f\u591f\u5566"):e>t.tempMissingSeconds&&A.length>0&&w({})}),500,!0);var N=b.detected?"WORKING":"REST";return(0,sme.jsxs)("div",{className:Oe(Iwe||(Iwe=r(["\n      margin: 0 15px;\n      max-width: 700px;\n      min-width: 350px;\n      @media (min-width: 730px) {\n        margin: 0 auto;\n      }\n      "]))),children:[(0,sme.jsx)(kr,{open:h,onClose:function(){return p(!1)},message:s,dismissesOnAction:!0,action:(0,sme.jsx)(Ir,{label:"Dismiss",onClick:function(){return console.log("Dismiss notification")}})}),(0,sme.jsxs)(on,{children:[(0,sme.jsx)(sn,{span:12,children:(0,sme.jsxs)("p",{className:Oe(Ewe||(Ewe=r(["\n            font-size: 20vw;\n            margin: 0 auto;\n            text-align: center;\n            @media (min-width: 700px) {\n              font-size: 140px;\n            }\n            @media (max-width: 350px) {\n              font-size: 75px;\n            }\n          "]))),children:[" ",N," "]})}),(0,sme.jsx)(sn,{span:12,children:(0,sme.jsx)(pme,{clockFace:"TwelveHourClock",startTime:b.startTime})}),(0,sme.jsx)(sn,{span:12,children:(0,sme.jsx)(cme,{onFaceDetectionResult:function(e){var n=Ht(v,(function(n){var r=void 0!==e;if(n.at(-1).detected!==r&&n.at(-1).timePeriod<S&&n.length>1&&!n.at(-1).pinnedSession&&n.pop(),n.at(-1).detected===r){if(n.at(-1).detected&&new Date-new Date(n.at(-1).endTime)>1e3*t.tempMissingSeconds)return n.push(f(!1,!1,n.at(-1).endTime)),void n.push(f(!0,!1,new Date));n.at(-1).endTime=(new Date).toJSON(),n.at(-1).timePeriod=(new Date-new Date(n.at(-1).startTime))/1e3}else n.push(f(r,!1,n.at(-1).endTime))}));y(n)}})}),t.history.showPomodoroHistory?(0,sme.jsxs)(sn,{span:12,children:[(0,sme.jsx)(Twe,{mergedTimeTable:v}),(0,sme.jsx)(kwe,{mergedTimeTable:v})]}):(0,sme.jsx)(sme.Fragment,{})]})]})},_we=(n.p,function(e,t){return _we=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},_we(e,t)});function Mwe(e,t){function n(){this.constructor=e}_we(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Rwe=function(){return Rwe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Rwe.apply(this,arguments)};function Owe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var Pwe={FIXED_CLASS:"mdc-top-app-bar--fixed",FIXED_SCROLLED_CLASS:"mdc-top-app-bar--fixed-scrolled",SHORT_CLASS:"mdc-top-app-bar--short",SHORT_COLLAPSED_CLASS:"mdc-top-app-bar--short-collapsed",SHORT_HAS_ACTION_ITEM_CLASS:"mdc-top-app-bar--short-has-action-item"},Fwe={DEBOUNCE_THROTTLE_RESIZE_TIME_MS:100,MAX_TOP_APP_BAR_HEIGHT:128},Dwe={ACTION_ITEM_SELECTOR:".mdc-top-app-bar__action-item",NAVIGATION_EVENT:"MDCTopAppBar:nav",NAVIGATION_ICON_SELECTOR:".mdc-top-app-bar__navigation-icon",ROOT_SELECTOR:".mdc-top-app-bar",TITLE_SELECTOR:".mdc-top-app-bar__title"},Lwe=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),zwe=function(e){function t(n){return e.call(this,Rwe(Rwe({},t.defaultAdapter),n))||this}return Mwe(t,e),Object.defineProperty(t,"strings",{get:function(){return Dwe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return Pwe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Fwe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},getTopAppBarHeight:function(){return 0},notifyNavigationIconClicked:function(){},getViewportScrollY:function(){return 0},getTotalActionItems:function(){return 0}}},enumerable:!0,configurable:!0}),t.prototype.handleTargetScroll=function(){},t.prototype.handleWindowResize=function(){},t.prototype.handleNavigationClick=function(){this.adapter.notifyNavigationIconClicked()},t}(Lwe),Bwe=function(e){function t(t){var n=e.call(this,t)||this;return n.wasDocked_=!0,n.isDockedShowing_=!0,n.currentAppBarOffsetTop_=0,n.isCurrentlyBeingResized_=!1,n.resizeThrottleId_=0,n.resizeDebounceId_=0,n.lastScrollPosition_=n.adapter.getViewportScrollY(),n.topAppBarHeight_=n.adapter.getTopAppBarHeight(),n}return Mwe(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.adapter.setStyle("top","")},t.prototype.handleTargetScroll=function(){var e=Math.max(this.adapter.getViewportScrollY(),0),t=e-this.lastScrollPosition_;this.lastScrollPosition_=e,this.isCurrentlyBeingResized_||(this.currentAppBarOffsetTop_-=t,this.currentAppBarOffsetTop_>0?this.currentAppBarOffsetTop_=0:Math.abs(this.currentAppBarOffsetTop_)>this.topAppBarHeight_&&(this.currentAppBarOffsetTop_=-this.topAppBarHeight_),this.moveTopAppBar_())},t.prototype.handleWindowResize=function(){var e=this;this.resizeThrottleId_||(this.resizeThrottleId_=setTimeout((function(){e.resizeThrottleId_=0,e.throttledResizeHandler_()}),Fwe.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)),this.isCurrentlyBeingResized_=!0,this.resizeDebounceId_&&clearTimeout(this.resizeDebounceId_),this.resizeDebounceId_=setTimeout((function(){e.handleTargetScroll(),e.isCurrentlyBeingResized_=!1,e.resizeDebounceId_=0}),Fwe.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)},t.prototype.checkForUpdate_=function(){var e=-this.topAppBarHeight_,t=this.currentAppBarOffsetTop_<0,n=this.currentAppBarOffsetTop_>e,r=t&&n;if(r)this.wasDocked_=!1;else{if(!this.wasDocked_)return this.wasDocked_=!0,!0;if(this.isDockedShowing_!==n)return this.isDockedShowing_=n,!0}return r},t.prototype.moveTopAppBar_=function(){if(this.checkForUpdate_()){var e=this.currentAppBarOffsetTop_;Math.abs(e)>=this.topAppBarHeight_&&(e=-Fwe.MAX_TOP_APP_BAR_HEIGHT),this.adapter.setStyle("top",e+"px")}},t.prototype.throttledResizeHandler_=function(){var e=this.adapter.getTopAppBarHeight();this.topAppBarHeight_!==e&&(this.wasDocked_=!1,this.currentAppBarOffsetTop_-=this.topAppBarHeight_-e,this.topAppBarHeight_=e),this.handleTargetScroll()},t}(zwe),Wwe=function(e){function t(t){var n=e.call(this,t)||this;return n.isCollapsed_=!1,n.isAlwaysCollapsed_=!1,n}return Mwe(t,e),Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return this.isCollapsed_},enumerable:!0,configurable:!0}),t.prototype.init=function(){e.prototype.init.call(this),this.adapter.getTotalActionItems()>0&&this.adapter.addClass(Pwe.SHORT_HAS_ACTION_ITEM_CLASS),this.setAlwaysCollapsed(this.adapter.hasClass(Pwe.SHORT_COLLAPSED_CLASS))},t.prototype.setAlwaysCollapsed=function(e){this.isAlwaysCollapsed_=!!e,this.isAlwaysCollapsed_?this.collapse_():this.maybeCollapseBar_()},t.prototype.getAlwaysCollapsed=function(){return this.isAlwaysCollapsed_},t.prototype.handleTargetScroll=function(){this.maybeCollapseBar_()},t.prototype.maybeCollapseBar_=function(){this.isAlwaysCollapsed_||(this.adapter.getViewportScrollY()<=0?this.isCollapsed_&&this.uncollapse_():this.isCollapsed_||this.collapse_())},t.prototype.uncollapse_=function(){this.adapter.removeClass(Pwe.SHORT_COLLAPSED_CLASS),this.isCollapsed_=!1},t.prototype.collapse_=function(){this.adapter.addClass(Pwe.SHORT_COLLAPSED_CLASS),this.isCollapsed_=!0},t}(zwe),jwe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wasScrolled_=!1,t}return Mwe(t,e),t.prototype.handleTargetScroll=function(){this.adapter.getViewportScrollY()<=0?this.wasScrolled_&&(this.adapter.removeClass(Pwe.FIXED_SCROLLED_CLASS),this.wasScrolled_=!1):this.wasScrolled_||(this.adapter.addClass(Pwe.FIXED_SCROLLED_CLASS),this.wasScrolled_=!0)},t}(Bwe),Vwe=rn((function(t,n){return e.createElement(Hwe,Rwe({key:t.short?"short":t.fixed?"fixed":"top-app-bar"},t,{ref:n}))})),Hwe=rn((function(t,n){var r=function(t){var n=(0,e.useRef)(null),r=(0,e.useRef)(null),a=Dn({props:t,elements:{rootEl:!0},foundation:function(e){var r=e.rootEl,a=e.emit,i={hasClass:function(e){return r.hasClass(e)},addClass:function(e){return r.addClass(e)},removeClass:function(e){return r.removeClass(e)},setStyle:function(e,t){return r.setStyle(e,t)},getTopAppBarHeight:function(){var e;return(null===(e=r.ref)||void 0===e?void 0:e.clientHeight)||0},notifyNavigationIconClicked:function(){return a("onNav",{})},getViewportScrollY:function(){var e=n.current;return e?e["pageYOffset"in e?"pageYOffset":"scrollTop"]:0},getTotalActionItems:function(){return r.ref?r.ref.querySelectorAll(Bwe.strings.ACTION_ITEM_SELECTOR).length:0}};return t.short?new Wwe(i):t.fixed?new jwe(i):new Bwe(i)}}),i=a.foundation,o=Owe(a,["foundation"]),s=o.rootEl;return(0,e.useEffect)((function(){var e,r,a=t.scrollTarget||(null===(r=null===(e=s.ref)||void 0===e?void 0:e.ownerDocument)||void 0===r?void 0:r.defaultView)||window,o=i.handleTargetScroll.bind(i);return a.addEventListener("scroll",o),n.current=a,function(){a.removeEventListener("scroll",o)}}),[t.scrollTarget,n,i,s.ref]),(0,e.useEffect)((function(){var e,t;r.current=(null===(e=s.ref)||void 0===e?void 0:e.querySelector(Bwe.strings.NAVIGATION_ICON_SELECTOR))||null;var n=i.handleNavigationClick.bind(i);return null===(t=r.current)||void 0===t||t.addEventListener("click",n),function(){var e;null===(e=r.current)||void 0===e||e.removeEventListener("click",n)}}),[s.ref,i]),(0,e.useEffect)((function(){i.lastScrollPosition_=i.adapter.getViewportScrollY(),i.topAppBarHeight_=i.adapter.getTopAppBarHeight()}),[i]),Rwe({foundation:i},o)}(t).rootEl,a=(t.onNav,t.scrollTarget,t.fixed),i=t.prominent,o=t.short,s=t.shortCollapsed,u=t.dense,l=(t.foundationRef,Owe(t,["onNav","scrollTarget","fixed","prominent","short","shortCollapsed","dense","foundationRef"])),c=en(t,["mdc-top-app-bar",{"mdc-top-app-bar--fixed":a,"mdc-top-app-bar--prominent":i,"mdc-top-app-bar--short":o||s,"mdc-top-app-bar--short-collapsed":s,"mdc-top-app-bar--dense":u}]);return e.createElement($t,Rwe({tag:"header"},l,{element:r,className:c,ref:n}))})),Uwe=(rn((function(t,n){var r=t.title,a=t.actionItems,i=t.navigationIcon,o=t.startContent,s=t.endContent,u=Owe(t,["title","actionItems","navigationIcon","startContent","endContent"]);return e.createElement(Vwe,Rwe({},u,{ref:n}),e.createElement(Uwe,null,e.createElement(Gwe,{alignStart:!0},!!i&&e.createElement(Xwe,Rwe({icon:"menu"},"boolean"===typeof i?{}:i)),!!r&&e.createElement(Ywe,null,r),o),(!!a||s)&&e.createElement(Gwe,{alignEnd:!0},s,!!a&&a.map((function(t,n){return e.createElement(qwe,Rwe({},t,{key:n}))})))))})),rn((function(t,n){var r=en(t,["mdc-top-app-bar__row"]);return e.createElement($t,Rwe({},t,{ref:n,className:r}))}))),Gwe=rn((function(t,n){var r=t.alignStart,a=t.alignEnd,i=Owe(t,["alignStart","alignEnd"]),o=en(t,["mdc-top-app-bar__section",{"mdc-top-app-bar__section--align-start":r,"mdc-top-app-bar__section--align-end":a}]);return e.createElement($t,Rwe({tag:"section"},i,{ref:n,className:o}))})),Xwe=rn((function(t,n){var r=en(t,["mdc-top-app-bar__navigation-icon"]);return e.createElement(yr,Rwe({},t,{className:r,ref:n}))})),qwe=rn((function(t,n){var r=en(t,["mdc-top-app-bar__action-item"]);return e.createElement(yr,Rwe({},t,{className:r,ref:n}))})),Ywe=rn((function(t,n){var r=en(t,["mdc-top-app-bar__title"]);return e.createElement($t,Rwe({},t,{ref:n,className:r}))})),Kwe=rn((function(t,n){t.dense,t.denseProminent,t.prominent,t.short;var r=Owe(t,["dense","denseProminent","prominent","short"]),a=en(t,[{"mdc-top-app-bar--fixed-adjust":!t.dense&&!t.denseProminent&&!t.prominent&&!t.short,"mdc-top-app-bar--dense-fixed-adjust":t.dense,"mdc-top-app-bar--prominent-fixed-adjust":t.prominent,"mdc-top-app-bar--dense-prominent-fixed-adjust":t.denseProminent,"mdc-top-app-bar--short-fixed-adjust":t.short}]);return e.createElement($t,Rwe({},r,{ref:n,className:a}))})),Zwe=function(t){var n=e.Children.only(t.children);return e.cloneElement(n,Ut(Ut(Ut({},t),n.props),{className:Zt()(t.className,n.props.className),style:Ut(Ut({},n.props.style),t.style)}))},Jwe={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",transparent:"#ffffff",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Qwe=function(e,t,n){var r=[e,t,n].map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}));return.2126*r[0]+.7152*r[1]+.0722*r[2]},$we=function(e){var t;return function(e){4===e.length&&(e+=e.slice(1));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}}(e=Jwe[t=e]||t)},eke=function(e){var t,n,r=$we(e),a=r.r,i=r.g,o=r.b;return!((n=[a,i,o],(Qwe((t=[255,255,255])[0],t[1],t[2])+.05)/(Qwe(n[0],n[1],n[2])+.05))>3)},tke={"--mdc-theme-primary":[["--mdc-theme-on-primary",0]],"--mdc-theme-surface":[["--mdc-theme-on-surface",0]],"--mdc-theme-secondary":[["--mdc-theme-on-secondary",0]],"--mdc-theme-background":[["--mdc-theme-text-primary-on-background",0],["--mdc-theme-text-secondary-on-background",1],["--mdc-theme-text-hint-on-background",2],["--mdc-theme-text-disabled-on-background",2],["--mdc-theme-text-icon-on-background",2]]},nke=["rgba(0, 0, 0, 0.87)","rgba(0, 0, 0, 0.54)","rgba(0, 0, 0, 0.38)"],rke=["rgba(255, 255, 255, 1)","rgba(255, 255, 255, 0.7)","rgba(255, 255, 255, 0.5)"],ake=(rn((function(t,n){var r=t.use,a=t.wrap,i=Gt(t,["use","wrap"]),o=en(t,[Qt(r).join(" ")]);return a?Zwe(Ut(Ut({},i),{ref:n,className:o})):e.createElement($t,Ut({tag:"span",theme:r},i,{ref:n,className:o}))})),rn((function(t,n){var r,a,i=JSON.stringify(t.options),o=(0,e.useMemo)((function(){return function(e){var t=Object.keys(tke).reduce((function(t,n){if(e[n]){var r=eke(e[n])?nke:rke;tke[n].forEach((function(e){t[e[0]]=r[e[1]]}))}return t}),{});return Ut(Ut({},t),e)}(Object.keys(t.options).reduce((function(e,n){var r=t.options[n];return e[n=n.startsWith("--")?n:"--mdc-theme-"+Jt(n)]=r,e}),{}))}),[i]),s=(t.options,t.style),u=void 0===s?{}:s,l=t.wrap,c=Gt(t,["options","style","wrap"]),d=en(t,[l&&"object"===typeof c.children&&(null===(a=null===(r=c.children)||void 0===r?void 0:r.props)||void 0===a?void 0:a.className)]),h=Ut(Ut({},u),o);return l&&c.children?Zwe(Ut(Ut({},c),{style:h,ref:n})):e.createElement($t,Ut({},c,{style:h,className:d,ref:n}))}))),ike="rmwcPortal";function oke(){var t=(0,e.useRef)(null);return e.createElement("div",{ref:t,id:ike})}function ske(t){var n=t.children,r=t.renderTo,a=(0,e.useMemo)((function(){if("undefined"!==typeof document){var e=void 0;return!0===r?!(e=document.getElementById(ike)||void 0)&&console.warn('No default Portal found. Did you forget to include it in the root of your app? `import { Portal } from "@rmwc/base";`'):"string"===typeof r?!(e=document.querySelector(r)||void 0)&&console.warn('The selector you provided for renderToPortal "'+r+"\" didn't find any elements."):r instanceof Element&&(e=r),e}}),[r]);return a?Tn.createPortal(n,a):e.createElement(e.Fragment,null,n)}n(3147),n(9619),n(9933);var uke=function(e,t){return uke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},uke(e,t)};var lke=function(){return lke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},lke.apply(this,arguments)};function cke(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var dke=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),hke={CLOSING:"mdc-dialog--closing",OPEN:"mdc-dialog--open",OPENING:"mdc-dialog--opening",SCROLLABLE:"mdc-dialog--scrollable",SCROLL_LOCK:"mdc-dialog-scroll-lock",STACKED:"mdc-dialog--stacked"},pke={ACTION_ATTRIBUTE:"data-mdc-dialog-action",BUTTON_DEFAULT_ATTRIBUTE:"data-mdc-dialog-button-default",BUTTON_SELECTOR:".mdc-dialog__button",CLOSED_EVENT:"MDCDialog:closed",CLOSE_ACTION:"close",CLOSING_EVENT:"MDCDialog:closing",CONTAINER_SELECTOR:".mdc-dialog__container",CONTENT_SELECTOR:".mdc-dialog__content",DESTROY_ACTION:"destroy",INITIAL_FOCUS_ATTRIBUTE:"data-mdc-dialog-initial-focus",OPENED_EVENT:"MDCDialog:opened",OPENING_EVENT:"MDCDialog:opening",SCRIM_SELECTOR:".mdc-dialog__scrim",SUPPRESS_DEFAULT_PRESS_SELECTOR:["textarea",".mdc-menu .mdc-list-item"].join(", "),SURFACE_SELECTOR:".mdc-dialog__surface"},fke={DIALOG_ANIMATION_CLOSE_TIME_MS:75,DIALOG_ANIMATION_OPEN_TIME_MS:150},mke=function(e){function t(n){var r=e.call(this,lke(lke({},t.defaultAdapter),n))||this;return r.isOpen_=!1,r.animationFrame_=0,r.animationTimer_=0,r.layoutFrame_=0,r.escapeKeyAction_=pke.CLOSE_ACTION,r.scrimClickAction_=pke.CLOSE_ACTION,r.autoStackButtons_=!0,r.areButtonsStacked_=!1,r.suppressDefaultPressSelector=pke.SUPPRESS_DEFAULT_PRESS_SELECTOR,r}return function(e,t){function n(){this.constructor=e}uke(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return hke},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return pke},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return fke},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addBodyClass:function(){},addClass:function(){},areButtonsStacked:function(){return!1},clickDefaultButton:function(){},eventTargetMatches:function(){return!1},getActionFromEvent:function(){return""},getInitialFocusEl:function(){return null},hasClass:function(){return!1},isContentScrollable:function(){return!1},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},releaseFocus:function(){},removeBodyClass:function(){},removeClass:function(){},reverseButtons:function(){},trapFocus:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter.hasClass(hke.STACKED)&&this.setAutoStackButtons(!1)},t.prototype.destroy=function(){this.isOpen_&&this.close(pke.DESTROY_ACTION),this.animationTimer_&&(clearTimeout(this.animationTimer_),this.handleAnimationTimerEnd_()),this.layoutFrame_&&(cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=0)},t.prototype.open=function(){var e=this;this.isOpen_=!0,this.adapter.notifyOpening(),this.adapter.addClass(hke.OPENING),this.runNextAnimationFrame_((function(){e.adapter.addClass(hke.OPEN),e.adapter.addBodyClass(hke.SCROLL_LOCK),e.layout(),e.animationTimer_=setTimeout((function(){e.handleAnimationTimerEnd_(),e.adapter.trapFocus(e.adapter.getInitialFocusEl()),e.adapter.notifyOpened()}),fke.DIALOG_ANIMATION_OPEN_TIME_MS)}))},t.prototype.close=function(e){var t=this;void 0===e&&(e=""),this.isOpen_&&(this.isOpen_=!1,this.adapter.notifyClosing(e),this.adapter.addClass(hke.CLOSING),this.adapter.removeClass(hke.OPEN),this.adapter.removeBodyClass(hke.SCROLL_LOCK),cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,clearTimeout(this.animationTimer_),this.animationTimer_=setTimeout((function(){t.adapter.releaseFocus(),t.handleAnimationTimerEnd_(),t.adapter.notifyClosed(e)}),fke.DIALOG_ANIMATION_CLOSE_TIME_MS))},t.prototype.isOpen=function(){return this.isOpen_},t.prototype.getEscapeKeyAction=function(){return this.escapeKeyAction_},t.prototype.setEscapeKeyAction=function(e){this.escapeKeyAction_=e},t.prototype.getScrimClickAction=function(){return this.scrimClickAction_},t.prototype.setScrimClickAction=function(e){this.scrimClickAction_=e},t.prototype.getAutoStackButtons=function(){return this.autoStackButtons_},t.prototype.setAutoStackButtons=function(e){this.autoStackButtons_=e},t.prototype.getSuppressDefaultPressSelector=function(){return this.suppressDefaultPressSelector},t.prototype.setSuppressDefaultPressSelector=function(e){this.suppressDefaultPressSelector=e},t.prototype.layout=function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){e.layoutInternal_(),e.layoutFrame_=0}))},t.prototype.handleClick=function(e){if(this.adapter.eventTargetMatches(e.target,pke.SCRIM_SELECTOR)&&""!==this.scrimClickAction_)this.close(this.scrimClickAction_);else{var t=this.adapter.getActionFromEvent(e);t&&this.close(t)}},t.prototype.handleKeydown=function(e){var t="Enter"===e.key||13===e.keyCode;if(t&&!this.adapter.getActionFromEvent(e)){var n=e.composedPath?e.composedPath()[0]:e.target,r=!this.adapter.eventTargetMatches(n,this.suppressDefaultPressSelector);t&&r&&this.adapter.clickDefaultButton()}},t.prototype.handleDocumentKeydown=function(e){("Escape"===e.key||27===e.keyCode)&&""!==this.escapeKeyAction_&&this.close(this.escapeKeyAction_)},t.prototype.layoutInternal_=function(){this.autoStackButtons_&&this.detectStackedButtons_(),this.detectScrollableContent_()},t.prototype.handleAnimationTimerEnd_=function(){this.animationTimer_=0,this.adapter.removeClass(hke.OPENING),this.adapter.removeClass(hke.CLOSING)},t.prototype.runNextAnimationFrame_=function(e){var t=this;cancelAnimationFrame(this.animationFrame_),this.animationFrame_=requestAnimationFrame((function(){t.animationFrame_=0,clearTimeout(t.animationTimer_),t.animationTimer_=setTimeout(e,0)}))},t.prototype.detectStackedButtons_=function(){this.adapter.removeClass(hke.STACKED);var e=this.adapter.areButtonsStacked();e&&this.adapter.addClass(hke.STACKED),e!==this.areButtonsStacked_&&(this.adapter.reverseButtons(),this.areButtonsStacked_=e)},t.prototype.detectScrollableContent_=function(){this.adapter.removeClass(hke.SCROLLABLE),this.adapter.isContentScrollable()&&this.adapter.addClass(hke.SCROLLABLE)},t}(dke),gke=n(4767).focusTrap.FocusTrap,vke=function(t){var n=(0,e.useRef)(),r=(0,e.useRef)(null),a=(0,e.useRef)(null),i=(0,e.useRef)(null),o=Dn({props:t,elements:{rootEl:!0},foundation:function(e){var t=e.rootEl,o=e.emit;e.getProps;return new mke({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},hasClass:function(e){return t.hasClass(e)},addBodyClass:function(e){return document.body&&document.body.classList.add(e)},removeBodyClass:function(e){return document.body&&document.body.classList.remove(e)},eventTargetMatches:function(e,t){return Bn(e,t)},trapFocus:function(){var e;try{null===(e=n.current)||void 0===e||e.trapFocus()}catch($Ie){}},releaseFocus:function(){var e;return null===(e=n.current)||void 0===e?void 0:e.releaseFocus()},isContentScrollable:function(){return!!i.current&&function(e){return e.scrollHeight>e.offsetHeight}(i.current)},areButtonsStacked:function(){return function(e){var t=new Set;return[].forEach.call(e,(function(e){return t.add(e.offsetTop)})),t.size>1}(a.current)},getActionFromEvent:function(e){var t=zn(e.target,"["+mke.strings.ACTION_ATTRIBUTE+"]");return(null===t||void 0===t?void 0:t.getAttribute(mke.strings.ACTION_ATTRIBUTE))||null},clickDefaultButton:function(){var e;null===(e=r.current)||void 0===e||e.click()},reverseButtons:function(){var e,t;null===(e=a.current)||void 0===e||e.reverse(),null===(t=a.current)||void 0===t||t.forEach((function(e){return e.parentElement&&e.parentElement.appendChild(e)}))},notifyOpening:function(){return o("onOpen",{})},notifyOpened:function(){o("onOpened",{}),lr()},notifyClosing:function(e){return o("onClose",e?{action:e}:{})},notifyClosed:function(e){return o("onClosed",e?{action:e}:{})},getInitialFocusEl:function(){return document.querySelector("["+mke.strings.INITIAL_FOCUS_ATTRIBUTE+"]")}})}}),s=o.foundation,u=cke(o,["foundation"]),l=u.rootEl,c=(0,e.useMemo)((function(){var e=s.handleDocumentKeydown.bind(s);return function(n){if("Escape"!==n.key||!t.preventOutsideDismiss)return e(n)}}),[s,t.preventOutsideDismiss]);(0,e.useEffect)((function(){var e;r.current=l.ref&&l.ref.querySelector("["+mke.strings.BUTTON_DEFAULT_ATTRIBUTE+"]")||null,a.current=l.ref&&[].slice.call(l.ref.querySelectorAll(mke.strings.BUTTON_SELECTOR)),i.current=(null===(e=l.ref)||void 0===e?void 0:e.querySelector(mke.strings.CONTENT_SELECTOR))||null}),[l.ref]),(0,e.useEffect)((function(){var e=l.ref&&l.ref.querySelector(mke.strings.SURFACE_SELECTOR);e&&(n.current=function(e,t){return new gke(e,t)}(e,{initialFocusEl:r.current||void 0}))}),[l.ref]),(0,e.useEffect)((function(){return t.open?s.isOpen()||(document.addEventListener("keydown",c),s.open()):s.isOpen()&&(document.removeEventListener("keydown",c),s.close()),function(){document.removeEventListener("keydown",c)}}),[t.open,s,c]);return l.setProp("onClick",(function(e){var n;return null===(n=t.onClick)||void 0===n||n.call(t,e),s.handleClick(e)}),!0),l.setProp("onKeyDown",(function(e){var n;return null===(n=t.onKeyDown)||void 0===n||n.call(t,e),s.handleKeydown(e)}),!0),lke({foundation:s},u)},yke=rn((function(t,n){var r=vke(t).rootEl,a=en(t,["mdc-dialog"]),i=t.children,o=(t.open,t.onOpen,t.onOpened,t.onClose,t.onClosed,t.preventOutsideDismiss),s=(t.foundationRef,t.renderToPortal),u=t["aria-labelledby"],l=t["aria-describedby"],c=cke(t,["children","open","onOpen","onOpened","onClose","onClosed","preventOutsideDismiss","foundationRef","renderToPortal","aria-labelledby","aria-describedby"]);return e.createElement(ske,{renderTo:s},e.createElement($t,lke({},c,{element:r,className:a,ref:n}),e.createElement("div",{className:"mdc-dialog__container"},e.createElement("div",{className:"mdc-dialog__surface",role:"alertdialog","aria-modal":!0,"aria-labelledby":u,"aria-describedby":l},i)),e.createElement(bke,{disableInteraction:o})))})),bke=(rn((function(t,n){var r=t.title,a=t.header,i=t.body,o=t.footer,s=t.acceptLabel,u=void 0===s?"Accept":s,l=t.cancelLabel,c=void 0===l?"Cancel":l,d=t.children,h=t.open,p=cke(t,["title","header","body","footer","acceptLabel","cancelLabel","children","open"]);return e.createElement(yke,lke({open:h},p,{ref:n}),(!!r||!!a)&&e.createElement(xke,null,!!r&&r,!!a&&a),(!!i||d)&&e.createElement(Ake,null,i,d),(!!c||!!u||!!o)&&e.createElement(wke,null,!!o&&o,!!c&&e.createElement(kke,{action:"close"},c),!!u&&e.createElement(kke,{action:"accept",isDefaultAction:!0},u)))})),e.memo((function(t){var n=t.disableInteraction?{pointerEvents:"none"}:{};return e.createElement("div",{className:"mdc-dialog__scrim",style:n})}))),xke=rn((function(t,n){var r=en(t,["mdc-dialog__title"]);return e.createElement($t,lke({tag:"h2"},t,{ref:n,className:r}))})),Ake=rn((function(t,n){var r=en(t,["mdc-dialog__content"]);return e.createElement($t,lke({},t,{ref:n,className:r}))})),wke=rn((function(t,n){var r=en(t,["mdc-dialog__actions"]);return e.createElement($t,lke({},t,{ref:n,className:r}))})),kke=rn((function(t,n){var r,a=en(t,["mdc-dialog__button"]),i=t.action,o=void 0===i?"":i,s=t.isDefaultAction,u=cke(t,["action","isDefaultAction"]),l=s?((r={})[mke.strings.BUTTON_DEFAULT_ATTRIBUTE]=!0,r):{};return e.createElement(ar,lke({},u,l,{ref:n,className:a,"data-mdc-dialog-action":o}))})),Ske=(n(5033),function(e,t){return Ske=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Ske(e,t)});function Cke(e,t){function n(){this.constructor=e}Ske(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ike=function(){return Ike=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ike.apply(this,arguments)};function Eke(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function Tke(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}var Nke=function(t,n){var r=n.id?n.id:n.label?t+"-"+n.label:function(e){return e+"-"+(Math.random()+Math.random()+1).toString(36).substring(2)}(t);return qt((0,e.useState)(r),1)[0]},_ke=function(e,t){return _ke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},_ke(e,t)};var Mke=function(){return Mke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Mke.apply(this,arguments)};function Rke(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var Oke=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),Pke={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"},Fke=function(e){function t(n){var r=e.call(this,Mke(Mke({},t.defaultAdapter),n))||this;return r.transitionEndHandler_=function(e){return r.handleTransitionEnd(e)},r}return function(e,t){function n(){this.constructor=e}_ke(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Pke},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter.registerEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.destroy=function(){this.adapter.deregisterEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.activate=function(){this.adapter.removeClass(Pke.LINE_RIPPLE_DEACTIVATING),this.adapter.addClass(Pke.LINE_RIPPLE_ACTIVE)},t.prototype.setRippleCenter=function(e){this.adapter.setStyle("transform-origin",e+"px center")},t.prototype.deactivate=function(){this.adapter.addClass(Pke.LINE_RIPPLE_DEACTIVATING)},t.prototype.handleTransitionEnd=function(e){var t=this.adapter.hasClass(Pke.LINE_RIPPLE_DEACTIVATING);"opacity"===e.propertyName&&t&&(this.adapter.removeClass(Pke.LINE_RIPPLE_ACTIVE),this.adapter.removeClass(Pke.LINE_RIPPLE_DEACTIVATING))},t}(Oke),Dke=rn((function(t,n){t.active,t.center;var r=Rke(t,["active","center"]),a=function(t){var n=Dn({props:t,elements:{rootEl:!0},foundation:function(e){var t=e.rootEl;return new Fke({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},hasClass:function(e){return t.hasClass(e)},setStyle:function(e,n){return t.setStyle(e,n)},registerEventHandler:function(e,n){return t.addEventListener(e,n)},deregisterEventHandler:function(e,n){return t.removeEventListener(e,n)}})}}),r=n.foundation,a=Rke(n,["foundation"]),i=a.rootEl;return(0,e.useEffect)((function(){t.active?r.activate():r.deactivate()}),[t.active,r]),(0,e.useEffect)((function(){"number"===typeof t.center&&r.setRippleCenter(t.center)}),[t.center,r]),i.setProp("onTransitionEnd",(function(e){return r.handleTransitionEnd(e)}),!0),Mke({foundation:r},a)}(t).rootEl;return e.createElement($t,Mke({},r,{tag:"span",element:a,className:"mdc-line-ripple",ref:n}))})),Lke=function(e,t){return Lke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Lke(e,t)};var zke=function(){return zke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},zke.apply(this,arguments)};function Bke(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var Wke=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),jke={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_REQUIRED:"mdc-floating-label--required",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"},Vke=function(e){function t(n){var r=e.call(this,zke(zke({},t.defaultAdapter),n))||this;return r.shakeAnimationEndHandler_=function(){return r.handleShakeAnimationEnd_()},r}return function(e,t){function n(){this.constructor=e}Lke(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return jke},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter.registerInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.getWidth=function(){return this.adapter.getWidth()},t.prototype.shake=function(e){var n=t.cssClasses.LABEL_SHAKE;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.float=function(e){var n=t.cssClasses,r=n.LABEL_FLOAT_ABOVE,a=n.LABEL_SHAKE;e?this.adapter.addClass(r):(this.adapter.removeClass(r),this.adapter.removeClass(a))},t.prototype.setRequired=function(e){var n=t.cssClasses.LABEL_REQUIRED;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.handleShakeAnimationEnd_=function(){var e=t.cssClasses.LABEL_SHAKE;this.adapter.removeClass(e)},t}(Wke),Hke=rn((function(t,n){var r=function(t){var n=Dn({props:t,elements:{rootEl:!0},api:function(e){var t=e.foundation;return{getWidth:function(){return t.getWidth()},setRequired:function(e){return t.setRequired(e)}}},foundation:function(e){var t=e.rootEl;return new Vke({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},getWidth:function(){var e;return(null===(e=t.ref)||void 0===e?void 0:e.scrollWidth)||0},registerInteractionHandler:function(e,n){return t.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.removeEventListener(e,n)}})}}),r=n.foundation,a=Bke(n,["foundation"]);return(0,e.useEffect)((function(){r.shake(!!t.shake)}),[t.shake,r]),(0,e.useEffect)((function(){r.float(!!t.float)}),[t.float,r]),zke({foundation:r},a)}(t).rootEl,a=(t.shake,t.float,t.apiRef,Bke(t,["shake","float","apiRef"]));return e.createElement("span",zke({},r.props(zke(zke({},a),{className:"mdc-floating-label"})),{ref:tn(r.setRef,n)}))})),Uke=function(e,t){return Uke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Uke(e,t)};var Gke=function(){return Gke=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Gke.apply(this,arguments)};function Xke(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var qke=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),Yke={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},Kke={NOTCH_ELEMENT_PADDING:8},Zke={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"},Jke=function(e){function t(n){return e.call(this,Gke(Gke({},t.defaultAdapter),n))||this}return function(e,t){function n(){this.constructor=e}Uke(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"strings",{get:function(){return Yke},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return Zke},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Kke},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!0,configurable:!0}),t.prototype.notch=function(e){var n=t.cssClasses.OUTLINE_NOTCHED;e>0&&(e+=Kke.NOTCH_ELEMENT_PADDING),this.adapter.setNotchWidthProperty(e),this.adapter.addClass(n)},t.prototype.closeNotch=function(){var e=t.cssClasses.OUTLINE_NOTCHED;this.adapter.removeClass(e),this.adapter.removeNotchWidthProperty()},t}(qke),Qke=rn((function(t,n){var r=t.children,a=Xke(t,["children"]),i=function(t){var n=Dn({props:t,elements:{rootEl:!0,notchedEl:!0},foundation:function(e){var t=e.rootEl,n=e.notchedEl;return new Jke({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},setNotchWidthProperty:function(e){return n.setStyle("width",e+"px")},removeNotchWidthProperty:function(){return n.setStyle("width","")}})}}),r=n.foundation,a=Xke(n,["foundation"]),i=a.rootEl,o=(0,e.useRef)();return(0,e.useEffect)((function(){t.notch?r.notch(t.notch):r.closeNotch()}),[t.notch,r]),(0,e.useEffect)((function(){var e;o.current=(null===(e=i.ref)||void 0===e?void 0:e.querySelector(".mdc-floating-label"))||void 0;var t=o.current;t?(t.style.transitionDuration="0s",i.addClass(Jke.cssClasses.OUTLINE_UPGRADED),requestAnimationFrame((function(){t&&(t.style.transitionDuration="")}))):i.addClass(Jke.cssClasses.NO_LABEL)}),[i]),Gke({foundation:r},a)}(t),o=i.rootEl,s=i.notchedEl;return e.createElement($t,Gke({},a,{element:o,className:"mdc-notched-outline",ref:n}),e.createElement($ke,null),e.createElement("div",Gke({},s.props({className:"mdc-notched-outline__notch"}),{ref:s.setRef}),r),e.createElement(eSe,null))})),$ke=e.memo((function(){return e.createElement("div",{className:"mdc-notched-outline__leading"})})),eSe=e.memo((function(){return e.createElement("div",{className:"mdc-notched-outline__trailing"})})),tSe=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),nSe={ICON_EVENT:"MDCTextField:icon",ICON_ROLE:"button"},rSe={ROOT:"mdc-text-field__icon"},aSe=["click","keydown"],iSe=function(e){function t(n){var r=e.call(this,Ike(Ike({},t.defaultAdapter),n))||this;return r.savedTabIndex_=null,r.interactionHandler_=function(e){return r.handleInteraction(e)},r}return Cke(t,e),Object.defineProperty(t,"strings",{get:function(){return nSe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return rSe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},notifyIconAction:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.savedTabIndex_=this.adapter.getAttr("tabindex"),aSe.forEach((function(t){e.adapter.registerInteractionHandler(t,e.interactionHandler_)}))},t.prototype.destroy=function(){var e=this;aSe.forEach((function(t){e.adapter.deregisterInteractionHandler(t,e.interactionHandler_)}))},t.prototype.setDisabled=function(e){this.savedTabIndex_&&(e?(this.adapter.setAttr("tabindex","-1"),this.adapter.removeAttr("role")):(this.adapter.setAttr("tabindex",this.savedTabIndex_),this.adapter.setAttr("role",nSe.ICON_ROLE)))},t.prototype.setAriaLabel=function(e){this.adapter.setAttr("aria-label",e)},t.prototype.setContent=function(e){this.adapter.setContent(e)},t.prototype.handleInteraction=function(e){var t="Enter"===e.key||13===e.keyCode;("click"===e.type||t)&&(e.preventDefault(),this.adapter.notifyIconAction())},t}(tSe),oSe={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-text-field__icon--leading",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline",PREFIX_SELECTOR:".mdc-text-field__affix--prefix",SUFFIX_SELECTOR:".mdc-text-field__affix--suffix",TRAILING_ICON_SELECTOR:".mdc-text-field__icon--trailing"},sSe={DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",LABEL_FLOATING:"mdc-text-field--label-floating",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon"},uSe={LABEL_SCALE:.75},lSe=["pattern","min","max","required","step","minlength","maxlength"],cSe=["color","date","datetime-local","month","range","time","week"],dSe=["mousedown","touchstart"],hSe=["click","keydown"],pSe=function(e){function t(n,r){void 0===r&&(r={});var a=e.call(this,Ike(Ike({},t.defaultAdapter),n))||this;return a.isFocused_=!1,a.receivedUserInput_=!1,a.isValid_=!0,a.useNativeValidation_=!0,a.validateOnValueChange_=!0,a.helperText_=r.helperText,a.characterCounter_=r.characterCounter,a.leadingIcon_=r.leadingIcon,a.trailingIcon_=r.trailingIcon,a.inputFocusHandler_=function(){return a.activateFocus()},a.inputBlurHandler_=function(){return a.deactivateFocus()},a.inputInputHandler_=function(){return a.handleInput()},a.setPointerXOffset_=function(e){return a.setTransformOrigin(e)},a.textFieldInteractionHandler_=function(){return a.handleTextFieldInteraction()},a.validationAttributeChangeHandler_=function(e){return a.handleValidationAttributeChange(e)},a}return Cke(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return sSe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return oSe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return uSe},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAlwaysFloat_",{get:function(){var e=this.getNativeInput_().type;return cSe.indexOf(e)>=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat_||this.isFocused_||!!this.getValue()||this.isBadInput_()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldShake",{get:function(){return!this.isFocused_&&!this.isValid()&&!!this.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},setInputAttr:function(){},removeInputAttr:function(){},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver((function(){}))},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},setLabelRequired:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.adapter.hasLabel()&&this.getNativeInput_().required&&this.adapter.setLabelRequired(!0),this.adapter.isFocused()?this.inputFocusHandler_():this.adapter.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter.floatLabel(!0),this.styleFloating_(!0)),this.adapter.registerInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter.registerInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter.registerInputInteractionHandler("input",this.inputInputHandler_),dSe.forEach((function(t){e.adapter.registerInputInteractionHandler(t,e.setPointerXOffset_)})),hSe.forEach((function(t){e.adapter.registerTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.validationObserver_=this.adapter.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler_),this.setCharacterCounter_(this.getValue().length)},t.prototype.destroy=function(){var e=this;this.adapter.deregisterInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter.deregisterInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter.deregisterInputInteractionHandler("input",this.inputInputHandler_),dSe.forEach((function(t){e.adapter.deregisterInputInteractionHandler(t,e.setPointerXOffset_)})),hSe.forEach((function(t){e.adapter.deregisterTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.adapter.deregisterValidationAttributeChangeHandler(this.validationObserver_)},t.prototype.handleTextFieldInteraction=function(){var e=this.adapter.getNativeInput();e&&e.disabled||(this.receivedUserInput_=!0)},t.prototype.handleValidationAttributeChange=function(e){var t=this;e.some((function(e){return lSe.indexOf(e)>-1&&(t.styleValidity_(!0),t.adapter.setLabelRequired(t.getNativeInput_().required),!0)})),e.indexOf("maxlength")>-1&&this.setCharacterCounter_(this.getValue().length)},t.prototype.notchOutline=function(e){if(this.adapter.hasOutline()&&this.adapter.hasLabel())if(e){var t=this.adapter.getLabelWidth()*uSe.LABEL_SCALE;this.adapter.notchOutline(t)}else this.adapter.closeOutline()},t.prototype.activateFocus=function(){this.isFocused_=!0,this.styleFocused_(this.isFocused_),this.adapter.activateLineRipple(),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating_(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),!this.helperText_||!this.helperText_.isPersistent()&&this.helperText_.isValidation()&&this.isValid_||this.helperText_.showToScreenReader()},t.prototype.setTransformOrigin=function(e){if(!this.isDisabled()&&!this.adapter.hasOutline()){var t=e.touches,n=t?t[0]:e,r=n.target.getBoundingClientRect(),a=n.clientX-r.left;this.adapter.setLineRippleTransformOrigin(a)}},t.prototype.handleInput=function(){this.autoCompleteFocus(),this.setCharacterCounter_(this.getValue().length)},t.prototype.autoCompleteFocus=function(){this.receivedUserInput_||this.activateFocus()},t.prototype.deactivateFocus=function(){this.isFocused_=!1,this.adapter.deactivateLineRipple();var e=this.isValid();this.styleValidity_(e),this.styleFocused_(this.isFocused_),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating_(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput_=!1)},t.prototype.getValue=function(){return this.getNativeInput_().value},t.prototype.setValue=function(e){if(this.getValue()!==e&&(this.getNativeInput_().value=e),this.setCharacterCounter_(e.length),this.validateOnValueChange_){var t=this.isValid();this.styleValidity_(t)}this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating_(this.shouldFloat),this.validateOnValueChange_&&this.adapter.shakeLabel(this.shouldShake))},t.prototype.isValid=function(){return this.useNativeValidation_?this.isNativeInputValid_():this.isValid_},t.prototype.setValid=function(e){this.isValid_=e,this.styleValidity_(e);var t=!e&&!this.isFocused_&&!!this.getValue();this.adapter.hasLabel()&&this.adapter.shakeLabel(t)},t.prototype.setValidateOnValueChange=function(e){this.validateOnValueChange_=e},t.prototype.getValidateOnValueChange=function(){return this.validateOnValueChange_},t.prototype.setUseNativeValidation=function(e){this.useNativeValidation_=e},t.prototype.isDisabled=function(){return this.getNativeInput_().disabled},t.prototype.setDisabled=function(e){this.getNativeInput_().disabled=e,this.styleDisabled_(e)},t.prototype.setHelperTextContent=function(e){this.helperText_&&this.helperText_.setContent(e)},t.prototype.setLeadingIconAriaLabel=function(e){this.leadingIcon_&&this.leadingIcon_.setAriaLabel(e)},t.prototype.setLeadingIconContent=function(e){this.leadingIcon_&&this.leadingIcon_.setContent(e)},t.prototype.setTrailingIconAriaLabel=function(e){this.trailingIcon_&&this.trailingIcon_.setAriaLabel(e)},t.prototype.setTrailingIconContent=function(e){this.trailingIcon_&&this.trailingIcon_.setContent(e)},t.prototype.setCharacterCounter_=function(e){if(this.characterCounter_){var t=this.getNativeInput_().maxLength;if(-1===t)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter_.setCounterValue(e,t)}},t.prototype.isBadInput_=function(){return this.getNativeInput_().validity.badInput||!1},t.prototype.isNativeInputValid_=function(){return this.getNativeInput_().validity.valid},t.prototype.styleValidity_=function(e){var n=t.cssClasses.INVALID;if(e?this.adapter.removeClass(n):this.adapter.addClass(n),this.helperText_){if(this.helperText_.setValidity(e),!this.helperText_.isValidation())return;var r=this.helperText_.isVisible(),a=this.helperText_.getId();r&&a?this.adapter.setInputAttr(oSe.ARIA_DESCRIBEDBY,a):this.adapter.removeInputAttr(oSe.ARIA_DESCRIBEDBY)}},t.prototype.styleFocused_=function(e){var n=t.cssClasses.FOCUSED;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.styleDisabled_=function(e){var n=t.cssClasses,r=n.DISABLED,a=n.INVALID;e?(this.adapter.addClass(r),this.adapter.removeClass(a)):this.adapter.removeClass(r),this.leadingIcon_&&this.leadingIcon_.setDisabled(e),this.trailingIcon_&&this.trailingIcon_.setDisabled(e)},t.prototype.styleFloating_=function(e){var n=t.cssClasses.LABEL_FLOATING;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.getNativeInput_=function(){return(this.adapter?this.adapter.getNativeInput():null)||{disabled:!1,maxLength:-1,required:!1,type:"input",validity:{badInput:!1,valid:!0},value:""}},t}(tSe),fSe={ROOT:"mdc-text-field-character-counter"},mSe={ROOT_SELECTOR:"."+fSe.ROOT},gSe=function(e){function t(n){return e.call(this,Ike(Ike({},t.defaultAdapter),n))||this}return Cke(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return fSe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return mSe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{setContent:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setCounterValue=function(e,t){e=Math.min(e,t),this.adapter.setContent(e+" / "+t)},t}(tSe),vSe=function(t){var n=Tke((0,e.useState)(!1),2),r=n[0],a=n[1],i=Tke((0,e.useState)(0),2),o=i[0],s=i[1],u=Tke((0,e.useState)(),2),l=u[0],c=u[1],d=Tke((0,e.useState)(!1),2),h=d[0],p=d[1],f=Tke((0,e.useState)(!1),2),m=f[0],g=f[1],v=(0,e.useRef)(),y=function(e){v.current=e},b=(0,e.useRef)(),x=(0,e.useRef)(),A=(0,e.useRef)(),w=function(t){var n=Tke((0,e.useState)(),2),r=n[0],a=n[1],i=Dn({props:t,api:function(e){var t=e.foundation;return{getFoundation:function(){return t}}},elements:{},foundation:function(){return new gSe({setContent:function(e){a(e)}})}}),o=(i.foundation,Eke(i,["foundation"]));return Ike({content:r},o)}({apiRef:t.characterCount?y:void 0}).content,k=Dn({props:t,elements:{rootEl:!0,inputEl:!0},foundation:function(e){var t=e.rootEl,n=e.inputEl,r=e.getProps;return new pSe(Ike(Ike(Ike(Ike({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},hasClass:function(e){return t.hasClass(e)},registerTextFieldInteractionHandler:function(e,n){return t.addEventListener(e,n)},deregisterTextFieldInteractionHandler:function(e,n){return t.removeEventListener(e,n)},registerValidationAttributeChangeHandler:function(e){if(n.ref){var t=new MutationObserver((function(t){return e(function(e){return e.map((function(e){return e.attributeName}))}(t))})),r=n.ref;return r&&t.observe(r,{attributes:!0}),t}return{}},deregisterValidationAttributeChangeHandler:function(e){e&&e.disconnect()},isFocused:function(){return document.activeElement===n.ref}},{registerInputInteractionHandler:function(e,t){return n.addEventListener(e,t)},deregisterInputInteractionHandler:function(e,t){return n.removeEventListener(e,t)},getNativeInput:function(){return n.ref}}),{shakeLabel:function(e){return p(e)},floatLabel:function(e){var t;g(null!==(t=r().floatLabel)&&void 0!==t?t:e)},hasLabel:function(){return!!r().label},getLabelWidth:function(){var e;return(null===(e=A.current)||void 0===e?void 0:e.getWidth())||0}}),{activateLineRipple:function(){a(!0)},deactivateLineRipple:function(){a(!1)},setLineRippleTransformOrigin:function(e){s(e)}}),{notchOutline:function(e){c(e)},closeOutline:function(){var e;null!==(e=r().floatLabel)&&void 0!==e||c(void 0)},hasOutline:function(){return!!r().outlined}}),{characterCounter:v.current?v.current.getFoundation():void 0,helperText:void 0,leadingIcon:b.current?b.current.getFoundation():void 0,trailingIcon:x.current?x.current.getFoundation():void 0})}}),S=k.foundation,C=Eke(k,["foundation"]),I=S.getValue();return(0,e.useEffect)((function(){void 0!==t.value&&t.value!==I&&S.setValue(String(t.value))}),[t.value,S,I]),(0,e.useEffect)((function(){void 0!==t.floatLabel&&(S.notchOutline(t.floatLabel),S.adapter_.floatLabel(t.floatLabel))}),[S,t.floatLabel]),Ike({shakeLabel:h,floatLabel:m,notchWidth:l,lineRippleActive:r,lineRippleCenter:o,setCharacterCounter:y,setLeadingIcon:function(e){return b.current=e},setTrailingIcon:function(e){return x.current=e},setFloatingLabel:function(e){return A.current=e},characterCountContent:w},C)},ySe=rn((function(t,n){var r=t.label,a=t.style,i=t.outlined,o=t.align,s=t.invalid,u=t.disabled,l=t.helpText,c=t.children,d=t.textarea,h=t.inputRef,p=t.characterCount,f=t.icon,m=t.trailingIcon,g=t.rootProps,v=void 0===g?{}:g,y=(t.foundationRef,t.ripple,t.prefix),b=t.suffix,x=t.resizeable,A=(t.floatLabel,Eke(t,["label","style","outlined","align","invalid","disabled","helpText","children","textarea","inputRef","characterCount","icon","trailingIcon","rootProps","foundationRef","ripple","prefix","suffix","resizeable","floatLabel"])),w=vSe(t),k=w.rootEl,S=w.inputEl,C=w.shakeLabel,I=w.floatLabel,E=w.notchWidth,T=w.lineRippleActive,N=w.lineRippleCenter,_=w.setLeadingIcon,M=w.setTrailingIcon,R=w.setFloatingLabel,O=w.characterCountContent,P=Nke("textfield",t)+"-label",F=en(t,["mdc-text-field","mdc-text-field--upgraded",{"mdc-text-field--filled":!i,"mdc-text-field--textarea":d,"mdc-text-field--outlined":i,"mdc-text-field--invalid":s,"mdc-text-field--disabled":u,"mdc-text-field--with-leading-icon":!!f,"mdc-text-field--with-trailing-icon":!!m,"mdc-text-field--no-label":!r,"mdc-text-field--end-aligned":"end"===o,"mdc-text-field--with-internal-counter":d&&p}]),D=function(t,n){return e.createElement(SSe,{apiRef:function(e){"leading"===n?_(e):M(e)},position:n,tabIndex:"trailing"===n?0:void 0,icon:t})},L=r?e.createElement(Hke,{shake:C,float:I,apiRef:R,id:P},r):null,z=p?e.createElement("div",{className:"mdc-text-field-character-counter"},O):null,B=x?e.createElement("span",{className:"mdc-text-field__resizer"},e.createElement($t,Ike({},A,{element:S,className:"mdc-text-field__input",disabled:u,tag:"textarea",ref:h})),z):e.createElement(e.Fragment,null,e.createElement($t,Ike({},A,{element:S,className:"mdc-text-field__input",disabled:u,tag:"textarea",ref:h})),z);return e.createElement(e.Fragment,null,e.createElement(xSe,Ike({},v,{element:k,style:a,className:F,ref:n,"aria-labelledby":P}),!!f&&D(f,"leading"),c,e.createElement(bSe,null),!!y&&!d&&e.createElement(ASe,{prefix:y}),d?B:e.createElement($t,Ike({},A,{element:S,className:"mdc-text-field__input",disabled:u,tag:"input",ref:h})),!!b&&!d&&e.createElement(wSe,{suffix:b}),i?e.createElement(e.Fragment,null,e.createElement(Qke,{notch:E},L),!!m&&D(m,"trailing")):e.createElement(e.Fragment,null,L,!!m&&D(m,"trailing"),e.createElement(Dke,{active:T,center:N}))),function(t){if(!(!!l||p&&!d))return null;var n="object"===typeof l&&!e.isValidElement(l);return e.createElement("div",{className:"mdc-text-field-helper-line"},l&&n?e.createElement(kSe,Ike({},l)):e.createElement(kSe,null,l),!d&&t)}(z))})),bSe=e.memo((function(){return e.createElement("span",{className:"mdc-text-field__ripple"})})),xSe=$n({surface:!1})(e.forwardRef((function(t,n){return e.createElement($t,Ike({},t,{tag:"label",ref:n}))}))),ASe=e.memo((function(t){var n=t.prefix;return e.createElement("span",{className:"mdc-text-field__affix mdc-text-field__affix--prefix"},n)})),wSe=e.memo((function(t){var n=t.suffix;return e.createElement("span",{className:"mdc-text-field__affix mdc-text-field__affix--suffix"},n)})),kSe=rn((function(t,n){var r=t.persistent,a=t.validationMsg,i=Eke(t,["persistent","validationMsg"]),o=en(t,["mdc-text-field-helper-text",{"mdc-text-field-helper-text--persistent":r,"mdc-text-field-helper-text--validation-msg":a}]);return e.createElement($t,Ike({tag:"div"},i,{className:o,ref:n}))})),SSe=function(t){t.apiRef;var n=t.position,r=Eke(t,["apiRef","position"]),a=function(e){var t=Dn({props:e,elements:{rootEl:!0},api:function(e){var t=e.foundation;return{getFoundation:function(){return t}}},foundation:function(e){var t=e.rootEl,n=e.emit,r=new iSe({getAttr:function(e){return t.getProp(e)},setAttr:function(e,n){return t.setProp(e,n)},removeAttr:function(e){return t.removeProp(e)},setContent:function(e){t.setProp("icon",e)},registerInteractionHandler:function(e,n){return t.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.removeEventListener(e,n)},notifyIconAction:function(){return n("onClick",{},!0)}});return r}}),n=(t.foundation,Eke(t,["foundation"]));return Ike({},n)}(t).rootEl,i=en(t,["mdc-text-field__icon",{"mdc-text-field__icon--trailing":"trailing"===n,"mdc-text-field__icon--leading":"leading"===n}]);return e.createElement(rr,Ike({},a.props(Ike(Ike({},r),{className:i}))))};SSe.displayName="TextFieldIcon";n(2924);var CSe=function(e,t){return CSe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},CSe(e,t)};var ISe=function(){return ISe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ISe.apply(this,arguments)};function ESe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var TSe=function(e,t){return TSe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},TSe(e,t)};var NSe=function(){return NSe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},NSe.apply(this,arguments)};var _Se=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),MSe={ROOT:"mdc-form-field"},RSe={LABEL_SELECTOR:".mdc-form-field > label"},OSe=function(e){function t(n){var r=e.call(this,NSe(NSe({},t.defaultAdapter),n))||this;return r.click=function(){r.handleClick()},r}return function(e,t){function n(){this.constructor=e}TSe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return MSe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return RSe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{activateInputRipple:function(){},deactivateInputRipple:function(){},deregisterInteractionHandler:function(){},registerInteractionHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter.registerInteractionHandler("click",this.click)},t.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("click",this.click)},t.prototype.handleClick=function(){var e=this;this.adapter.activateInputRipple(),requestAnimationFrame((function(){e.adapter.deactivateInputRipple()}))},t}(_Se),PSe=rn((function(t,n){!function(e){Dn({props:e,elements:{},foundation:function(){return new OSe({registerInteractionHandler:function(e,t){},deregisterInteractionHandler:function(e,t){},activateInputRipple:function(){},deactivateInputRipple:function(){}})}})}(t);t.alignEnd,t.foundationRef;var r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(t,["alignEnd","foundationRef"]),a=en(t,["mdc-form-field",{"mdc-form-field--align-end":t.alignEnd}]);return e.createElement($t,NSe({},r,{ref:n,className:a}))}));var FSe=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),DSe={CHECKED:"mdc-switch--checked",DISABLED:"mdc-switch--disabled"},LSe={ARIA_CHECKED_ATTR:"aria-checked",NATIVE_CONTROL_SELECTOR:".mdc-switch__native-control",RIPPLE_SURFACE_SELECTOR:".mdc-switch__thumb-underlay"},zSe=function(e){function t(n){return e.call(this,ISe(ISe({},t.defaultAdapter),n))||this}return function(e,t){function n(){this.constructor=e}CSe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"strings",{get:function(){return LSe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return DSe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNativeControlChecked:function(){},setNativeControlDisabled:function(){},setNativeControlAttr:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setChecked=function(e){this.adapter.setNativeControlChecked(e),this.updateAriaChecked_(e),this.updateCheckedStyling_(e)},t.prototype.setDisabled=function(e){this.adapter.setNativeControlDisabled(e),e?this.adapter.addClass(DSe.DISABLED):this.adapter.removeClass(DSe.DISABLED)},t.prototype.handleChange=function(e){var t=e.target;this.updateAriaChecked_(t.checked),this.updateCheckedStyling_(t.checked)},t.prototype.updateCheckedStyling_=function(e){e?this.adapter.addClass(DSe.CHECKED):this.adapter.removeClass(DSe.CHECKED)},t.prototype.updateAriaChecked_=function(e){this.adapter.setNativeControlAttr(LSe.ARIA_CHECKED_ATTR,""+!!e)},t}(FSe),BSe=function(t){var n=function(t){var n=t.className,r=t.style,a=t.rootProps,i=t.label,o=t.children,s=t.disabled,u=t.label||t.children,l=Nke("toggle-",t),c=u?{disabled:s}:Ut({className:n,style:r,disabled:s},a);return{id:l,renderToggle:function(t){return u?e.createElement(PSe,Ut({},a,{className:n,style:r}),t,e.createElement("label",{id:l+"label",htmlFor:l},i,o)):t},toggleRootProps:c}}(t),r=n.renderToggle,a=n.toggleRootProps,i=n.id,o=Dn({props:t,elements:{rootEl:!0,checkboxEl:!0},foundation:function(e){var t=e.rootEl,n=e.checkboxEl;return new zSe({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},setNativeControlChecked:function(e){return n.setProp("checked",e)},setNativeControlDisabled:function(e){return n.setProp("disabled",e)},setNativeControlAttr:function(e,n){return t.setProp(e,n)}})}}),s=o.foundation,u=ESe(o,["foundation"]),l=u.checkboxEl;(0,e.useEffect)((function(){l.ref&&s.updateCheckedStyling_(l.ref.checked),l.ref&&s.setDisabled(l.ref.disabled)}),[l.ref,s]),(0,e.useEffect)((function(){void 0!==t.checked&&s.updateCheckedStyling_(t.checked)}),[t.checked,s]),(0,e.useEffect)((function(){void 0!==t.disabled&&s.setDisabled(t.disabled)}),[t.disabled,s]);return l.setProp("onChange",(function(e){var n;s.handleChange(e),null===(n=t.onChange)||void 0===n||n.call(t,e)}),!0),ISe({foundation:s,renderToggle:r,toggleRootProps:a,id:i},u)},WSe=rn((function(t,n){var r,a=BSe(t),i=a.renderToggle,o=a.id,s=a.toggleRootProps,u=a.rootEl,l=a.checkboxEl,c=en(s,["mdc-switch"]),d=(t.children,t.className,t.label,t.style,t.inputRef),h=(t.foundationRef,ESe(t,["children","className","label","style","inputRef","foundationRef"]));return i(e.createElement($t,ISe({},u.props(ISe(ISe({},s),{className:c})),{ref:n}),e.createElement(jSe,null),e.createElement(USe,null,e.createElement(HSe,null),e.createElement("input",ISe({},l.props(ISe(ISe({},h),{className:"mdc-switch__native-control"})),{type:"checkbox",id:o,ref:tn(l.setRef,d),role:"switch","aria-checked":null!==(r=h.checked)&&void 0!==r?r:h["aria-checked"]}))),e.createElement(VSe,null)))})),jSe=e.memo((function(){return e.createElement("div",{className:"mdc-switch__track"})})),VSe=e.memo((function(){return e.createElement("div",{className:"mdc-switch__knob"})})),HSe=e.memo((function(){return e.createElement("div",{className:"mdc-switch__thumb"})})),USe=$n({unbounded:!0,surface:!1})((function(t){var n=t.className,r=ESe(t,["className"]);return e.createElement("div",ISe({className:Zt()(n,"mdc-switch__thumb-underlay")},r))})),GSe=(n(8959),n(4646)),XSe=n(684),qSe=n(420),YSe=n(6583),KSe=n(4401),ZSe=n(5192),JSe=n.n(ZSe);function QSe(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function $Se(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function eCe(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function tCe(e,t){for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}QSe.__suppressDeprecationWarning=!0,$Se.__suppressDeprecationWarning=!0,eCe.__suppressDeprecationWarning=!0;var nCe=n(1684),rCe=n.n(nCe);function aCe(e,t,n,r){var a=Tn.unstable_batchedUpdates?function(e){Tn.unstable_batchedUpdates(n,e)}:n;return rCe()(e,t,a,r)}function iCe(e){return iCe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iCe(e)}function oCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sCe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uCe(e,t){return uCe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},uCe(e,t)}function lCe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(QIe){return!1}}();return function(){var n,r=dCe(e);if(t){var a=dCe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return cCe(this,n)}}function cCe(e,t){return!t||"object"!==iCe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dCe(e){return dCe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dCe(e)}var hCe=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&uCe(e,t)}(i,e);var t,n,r,a=lCe(i);function i(){var e;oCe(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).removeContainer=function(){e.container&&(Tn.unmountComponentAtNode(e.container),e.container.parentNode.removeChild(e.container),e.container=null)},e.renderComponent=function(t,n){var r=e.props,a=r.visible,i=r.getComponent,o=r.forceRender,s=r.getContainer,u=r.parent;(a||u._component||o)&&(e.container||(e.container=s()),Tn.unstable_renderSubtreeIntoContainer(u,i(t),e.container,(function(){n&&n.call(this)})))},e}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.autoMount&&this.renderComponent()}},{key:"componentDidUpdate",value:function(){this.props.autoMount&&this.renderComponent()}},{key:"componentWillUnmount",value:function(){this.props.autoDestroy&&this.removeContainer()}},{key:"render",value:function(){return this.props.children({renderComponent:this.renderComponent,removeContainer:this.removeContainer})}}])&&sCe(t.prototype,n),r&&sCe(t,r),i}(e.Component);function pCe(e){return pCe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pCe(e)}function fCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mCe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gCe(e,t){return gCe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},gCe(e,t)}function vCe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(QIe){return!1}}();return function(){var n,r=bCe(e);if(t){var a=bCe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return yCe(this,n)}}function yCe(e,t){return!t||"object"!==pCe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bCe(e){return bCe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},bCe(e)}hCe.propTypes={autoMount:JSe().bool,autoDestroy:JSe().bool,visible:JSe().bool,forceRender:JSe().bool,parent:JSe().any,getComponent:JSe().func.isRequired,getContainer:JSe().func.isRequired,children:JSe().func.isRequired},hCe.defaultProps={autoMount:!0,autoDestroy:!0,forceRender:!1};var xCe=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gCe(e,t)}(i,e);var t,n,r,a=vCe(i);function i(){return fCe(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){this.createContainer()}},{key:"componentDidUpdate",value:function(e){var t=this.props.didUpdate;t&&t(e)}},{key:"componentWillUnmount",value:function(){this.removeContainer()}},{key:"createContainer",value:function(){this._container=this.props.getContainer(),this.forceUpdate()}},{key:"removeContainer",value:function(){this._container&&this._container.parentNode.removeChild(this._container)}},{key:"render",value:function(){return this._container?Tn.createPortal(this.props.children,this._container):null}}])&&mCe(t.prototype,n),r&&mCe(t,r),i}(e.Component);function ACe(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function wCe(e,t){this[e]=t}xCe.propTypes={getContainer:JSe().func.isRequired,children:JSe().node.isRequired,didUpdate:JSe().func};var kCe=n(7996);function SCe(e){return e&&"object"===typeof e&&e.window===e}function CCe(e,t){var n=Math.floor(e),r=Math.floor(t);return Math.abs(n-r)<=1}function ICe(e,t){e!==document.activeElement&&tCe(t,e)&&e.focus()}function ECe(e){return"function"===typeof e&&e?e():null}function TCe(e){return"object"===typeof e&&e?e:null}var NCe=function(t){function n(){var e,t,r,a;(0,qSe.Z)(this,n);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=r=(0,YSe.Z)(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(o))),r.forceAlign=function(){var e=r.props,t=e.disabled,n=e.target,a=e.align,i=e.onAlign;if(!t&&n){var o=Tn.findDOMNode(r),s=void 0,u=ECe(n),l=TCe(n),c=document.activeElement;u?s=ybe(o,u,a):l&&(s=bbe(o,l,a)),ICe(c,o),i&&i(o,s)}},a=t,(0,YSe.Z)(r,a)}return(0,KSe.Z)(n,t),(0,kCe.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props;this.forceAlign(),!e.disabled&&e.monitorWindowResize&&this.startMonitorWindowResize()}},{key:"componentDidUpdate",value:function(e){var t=!1,n=this.props;if(!n.disabled){var r=Tn.findDOMNode(this),a=r?r.getBoundingClientRect():null;if(e.disabled)t=!0;else{var i=ECe(e.target),o=ECe(n.target),s=TCe(e.target),u=TCe(n.target);SCe(i)&&SCe(o)?t=!1:(i!==o||i&&!o&&u||s&&u&&o||u&&!function(e,t){return e===t||!(!e||!t)&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY)}(s,u))&&(t=!0);var l=this.sourceRect||{};t||!r||CCe(l.width,a.width)&&CCe(l.height,a.height)||(t=!0)}this.sourceRect=a}t&&this.forceAlign(),n.monitorWindowResize&&!n.disabled?this.startMonitorWindowResize():this.stopMonitorWindowResize()}},{key:"componentWillUnmount",value:function(){this.stopMonitorWindowResize()}},{key:"startMonitorWindowResize",value:function(){this.resizeHandler||(this.bufferMonitor=function(e,t){var n=void 0;function r(){n&&(clearTimeout(n),n=null)}function a(){r(),n=setTimeout(e,t)}return a.clear=r,a}(this.forceAlign,this.props.monitorBufferTime),this.resizeHandler=aCe(window,"resize",this.bufferMonitor))}},{key:"stopMonitorWindowResize",value:function(){this.resizeHandler&&(this.bufferMonitor.clear(),this.resizeHandler.remove(),this.resizeHandler=null)}},{key:"render",value:function(){var t=this,n=this.props,r=n.childrenProps,a=n.children,i=e.Children.only(a);if(r){var o={};return Object.keys(r).forEach((function(e){o[e]=t.props[r[e]]})),e.cloneElement(i,o)}return i}}]),n}(e.Component);NCe.propTypes={childrenProps:JSe().object,align:JSe().object.isRequired,target:JSe().oneOfType([JSe().func,JSe().shape({clientX:JSe().number,clientY:JSe().number,pageX:JSe().number,pageY:JSe().number})]),onAlign:JSe().func,monitorBufferTime:JSe().number,monitorWindowResize:JSe().bool,disabled:JSe().bool,children:JSe().any},NCe.defaultProps={target:function(){return window},monitorBufferTime:50,monitorWindowResize:!1,disabled:!1};var _Ce=NCe,MCe=n(386),RCe=function(t){var n=t.prototype;if(!n||!n.isReactComponent)throw new Error("Can only polyfill class components");return"function"!==typeof n.componentWillReceiveProps?t:e.Profiler?(n.UNSAFE_componentWillReceiveProps=n.componentWillReceiveProps,delete n.componentWillReceiveProps,t):t};function OCe(t){var n=[];return e.Children.forEach(t,(function(e){n.push(e)})),n}function PCe(e,t){var n=null;return e&&e.forEach((function(e){n||e&&e.key===t&&(n=e)})),n}function FCe(e,t,n){var r=null;return e&&e.forEach((function(e){if(e&&e.key===t&&e.props[n]){if(r)throw new Error("two child with same key for <rc-animate> children");r=e}})),r}var DCe=n(5259),LCe={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},zCe={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},BCe=[],WCe=[];function jCe(e,t,n){e.addEventListener(t,n,!1)}function VCe(e,t,n){e.removeEventListener(t,n,!1)}"undefined"!==typeof window&&"undefined"!==typeof document&&function(){var e=document.createElement("div").style;function t(t,n){for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];for(var i in a)if(i in e){n.push(a[i]);break}}}"AnimationEvent"in window||(delete LCe.animationstart.animation,delete zCe.animationend.animation),"TransitionEvent"in window||(delete LCe.transitionstart.transition,delete zCe.transitionend.transition),t(LCe,BCe),t(zCe,WCe)}();var HCe={startEvents:BCe,addStartEventListener:function(e,t){0!==BCe.length?BCe.forEach((function(n){jCe(e,n,t)})):window.setTimeout(t,0)},removeStartEventListener:function(e,t){0!==BCe.length&&BCe.forEach((function(n){VCe(e,n,t)}))},endEvents:WCe,addEndEventListener:function(e,t){0!==WCe.length?WCe.forEach((function(n){jCe(e,n,t)})):window.setTimeout(t,0)},removeEndEventListener:function(e,t){0!==WCe.length&&WCe.forEach((function(n){VCe(e,n,t)}))}},UCe=HCe,GCe=n(3105),XCe=n.n(GCe),qCe=0!==UCe.endEvents.length,YCe=["Webkit","Moz","O","ms"],KCe=["-webkit-","-moz-","-o-","ms-",""];function ZCe(e,t){for(var n=window.getComputedStyle(e,null),r="",a=0;a<KCe.length&&!(r=n.getPropertyValue(KCe[a]+t));a++);return r}function JCe(e){if(qCe){var t=parseFloat(ZCe(e,"transition-delay"))||0,n=parseFloat(ZCe(e,"transition-duration"))||0,r=parseFloat(ZCe(e,"animation-delay"))||0,a=parseFloat(ZCe(e,"animation-duration"))||0,i=Math.max(n+t,a+r);e.rcEndAnimTimeout=setTimeout((function(){e.rcEndAnimTimeout=null,e.rcEndListener&&e.rcEndListener()}),1e3*i+200)}}function QCe(e){e.rcEndAnimTimeout&&(clearTimeout(e.rcEndAnimTimeout),e.rcEndAnimTimeout=null)}var $Ce=function(e,t,n){var r="object"===("undefined"===typeof t?"undefined":(0,DCe.default)(t)),a=r?t.name:t,i=r?t.active:t+"-active",o=n,s=void 0,u=void 0,l=XCe()(e);return n&&"[object Object]"===Object.prototype.toString.call(n)&&(o=n.end,s=n.start,u=n.active),e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),QCe(e),l.remove(a),l.remove(i),UCe.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,o&&o())},UCe.addEndEventListener(e,e.rcEndListener),s&&s(),l.add(a),e.rcAnimTimeout=setTimeout((function(){e.rcAnimTimeout=null,l.add(i),u&&setTimeout(u,0),JCe(e)}),30),{stop:function(){e.rcEndListener&&e.rcEndListener()}}};$Ce.style=function(e,t,n){e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),QCe(e),UCe.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,n&&n())},UCe.addEndEventListener(e,e.rcEndListener),e.rcAnimTimeout=setTimeout((function(){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);e.rcAnimTimeout=null,JCe(e)}),0)},$Ce.setTransition=function(e,t,n){var r=t,a=n;void 0===n&&(a=r,r=""),r=r||"",YCe.forEach((function(t){e.style[t+"Transition"+r]=a}))},$Ce.isCssAnimationSupported=qCe;var eIe=$Ce,tIe={isAppearSupported:function(e){return e.transitionName&&e.transitionAppear||e.animation.appear},isEnterSupported:function(e){return e.transitionName&&e.transitionEnter||e.animation.enter},isLeaveSupported:function(e){return e.transitionName&&e.transitionLeave||e.animation.leave},allowAppearCallback:function(e){return e.transitionAppear||e.animation.appear},allowEnterCallback:function(e){return e.transitionEnter||e.animation.enter},allowLeaveCallback:function(e){return e.transitionLeave||e.animation.leave}},nIe={enter:"transitionEnter",appear:"transitionAppear",leave:"transitionLeave"},rIe=function(e){function t(){return(0,qSe.Z)(this,t),(0,YSe.Z)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,KSe.Z)(t,e),(0,kCe.Z)(t,[{key:"componentWillUnmount",value:function(){this.stop()}},{key:"componentWillEnter",value:function(e){tIe.isEnterSupported(this.props)?this.transition("enter",e):e()}},{key:"componentWillAppear",value:function(e){tIe.isAppearSupported(this.props)?this.transition("appear",e):e()}},{key:"componentWillLeave",value:function(e){tIe.isLeaveSupported(this.props)?this.transition("leave",e):e()}},{key:"transition",value:function(e,t){var n=this,r=Tn.findDOMNode(this),a=this.props,i=a.transitionName,o="object"===typeof i;this.stop();var s=function(){n.stopper=null,t()};if((qCe||!a.animation[e])&&i&&a[nIe[e]]){var u=o?i[e]:i+"-"+e,l=u+"-active";o&&i[e+"Active"]&&(l=i[e+"Active"]),this.stopper=eIe(r,{name:u,active:l},s)}else this.stopper=a.animation[e](r,s)}},{key:"stop",value:function(){var e=this.stopper;e&&(this.stopper=null,e.stop())}},{key:"render",value:function(){return this.props.children}}]),t}(e.Component);rIe.propTypes={children:JSe().any,animation:JSe().any,transitionName:JSe().any};var aIe=rIe,iIe="rc_animate_"+Date.now();function oIe(t){var n=t.children;return e.isValidElement(n)&&!n.key?e.cloneElement(n,{key:iIe}):n}function sIe(){}var uIe=function(t){function n(e){(0,qSe.Z)(this,n);var t=(0,YSe.Z)(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return lIe.call(t),t.currentlyAnimatingKeys={},t.keysToEnter=[],t.keysToLeave=[],t.state={children:OCe(oIe(e))},t.childrenRefs={},t}return(0,KSe.Z)(n,t),(0,kCe.Z)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.showProp,n=this.state.children;t&&(n=n.filter((function(e){return!!e.props[t]}))),n.forEach((function(t){t&&e.performAppear(t.key)}))}},{key:"componentWillReceiveProps",value:function(t){var n=this;this.nextProps=t;var r=OCe(oIe(t)),a=this.props;a.exclusive&&Object.keys(this.currentlyAnimatingKeys).forEach((function(e){n.stop(e)}));var i=a.showProp,o=this.currentlyAnimatingKeys,s=a.exclusive?OCe(oIe(a)):this.state.children,u=[];i?(s.forEach((function(t){var n=t&&PCe(r,t.key),a=void 0;(a=n&&n.props[i]||!t.props[i]?n:e.cloneElement(n||t,(0,MCe.Z)({},i,!0)))&&u.push(a)})),r.forEach((function(e){e&&PCe(s,e.key)||u.push(e)}))):u=function(e,t){var n=[],r={},a=[];return e.forEach((function(e){e&&PCe(t,e.key)?a.length&&(r[e.key]=a,a=[]):a.push(e)})),t.forEach((function(e){e&&Object.prototype.hasOwnProperty.call(r,e.key)&&(n=n.concat(r[e.key])),n.push(e)})),n=n.concat(a)}(s,r),this.setState({children:u}),r.forEach((function(e){var t=e&&e.key;if(!e||!o[t]){var r=e&&PCe(s,t);if(i){var a=e.props[i];if(r)!FCe(s,t,i)&&a&&n.keysToEnter.push(t);else a&&n.keysToEnter.push(t)}else r||n.keysToEnter.push(t)}})),s.forEach((function(e){var t=e&&e.key;if(!e||!o[t]){var a=e&&PCe(r,t);if(i){var s=e.props[i];if(a)!FCe(r,t,i)&&s&&n.keysToLeave.push(t);else s&&n.keysToLeave.push(t)}else a||n.keysToLeave.push(t)}}))}},{key:"componentDidUpdate",value:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)}},{key:"isValidChildByKey",value:function(e,t){var n=this.props.showProp;return n?FCe(e,t,n):PCe(e,t)}},{key:"stop",value:function(e){delete this.currentlyAnimatingKeys[e];var t=this.childrenRefs[e];t&&t.stop()}},{key:"render",value:function(){var t=this,n=this.props;this.nextProps=n;var r=this.state.children,a=null;r&&(a=r.map((function(r){if(null===r||void 0===r)return r;if(!r.key)throw new Error("must set key for <rc-animate> children");return e.createElement(aIe,{key:r.key,ref:function(e){t.childrenRefs[r.key]=e},animation:n.animation,transitionName:n.transitionName,transitionEnter:n.transitionEnter,transitionAppear:n.transitionAppear,transitionLeave:n.transitionLeave},r)})));var i=n.component;if(i){var o=n;return"string"===typeof i&&(o=(0,GSe.Z)({className:n.className,style:n.style},n.componentProps)),e.createElement(i,o,a)}return a[0]||null}}]),n}(e.Component);uIe.isAnimate=!0,uIe.propTypes={className:JSe().string,style:JSe().object,component:JSe().any,componentProps:JSe().object,animation:JSe().object,transitionName:JSe().oneOfType([JSe().string,JSe().object]),transitionEnter:JSe().bool,transitionAppear:JSe().bool,exclusive:JSe().bool,transitionLeave:JSe().bool,onEnd:JSe().func,onEnter:JSe().func,onLeave:JSe().func,onAppear:JSe().func,showProp:JSe().string,children:JSe().node},uIe.defaultProps={animation:{},component:"span",componentProps:{},transitionEnter:!0,transitionLeave:!0,transitionAppear:!1,onEnd:sIe,onEnter:sIe,onLeave:sIe,onAppear:sIe};var lIe=function(){var e=this;this.performEnter=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillEnter(e.handleDoneAdding.bind(e,t,"enter")))},this.performAppear=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillAppear(e.handleDoneAdding.bind(e,t,"appear")))},this.handleDoneAdding=function(t,n){var r=e.props;if(delete e.currentlyAnimatingKeys[t],!r.exclusive||r===e.nextProps){var a=OCe(oIe(r));e.isValidChildByKey(a,t)?"appear"===n?tIe.allowAppearCallback(r)&&(r.onAppear(t),r.onEnd(t,!0)):tIe.allowEnterCallback(r)&&(r.onEnter(t),r.onEnd(t,!0)):e.performLeave(t)}},this.performLeave=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillLeave(e.handleDoneLeaving.bind(e,t)))},this.handleDoneLeaving=function(t){var n=e.props;if(delete e.currentlyAnimatingKeys[t],!n.exclusive||n===e.nextProps){var r=OCe(oIe(n));if(e.isValidChildByKey(r,t))e.performEnter(t);else{var a=function(){tIe.allowLeaveCallback(n)&&(n.onLeave(t),n.onEnd(t,!1))};!function(e,t,n){var r=e.length===t.length;return r&&e.forEach((function(e,a){var i=t[a];e&&i&&(e&&!i||!e&&i||e.key!==i.key||n&&e.props[n]!==i.props[n])&&(r=!1)})),r}(e.state.children,r,n.showProp)?e.setState({children:r},a):a()}}}},cIe=RCe(uIe),dIe=function(t){function n(){return(0,qSe.Z)(this,n),(0,YSe.Z)(this,t.apply(this,arguments))}return(0,KSe.Z)(n,t),n.prototype.shouldComponentUpdate=function(e){return e.hiddenClassName||e.visible},n.prototype.render=function(){var t=this.props,n=t.hiddenClassName,r=t.visible,a=(0,XSe.Z)(t,["hiddenClassName","visible"]);return n||e.Children.count(a.children)>1?(!r&&n&&(a.className+=" "+n),e.createElement("div",a)):e.Children.only(a.children)},n}(e.Component);dIe.propTypes={children:JSe().any,className:JSe().string,visible:JSe().bool,hiddenClassName:JSe().string};var hIe=dIe,pIe=function(t){function n(){return(0,qSe.Z)(this,n),(0,YSe.Z)(this,t.apply(this,arguments))}return(0,KSe.Z)(n,t),n.prototype.render=function(){var t=this.props,n=t.className;return t.visible||(n+=" "+t.hiddenClassName),e.createElement("div",{className:n,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:t.style},e.createElement(hIe,{className:t.prefixCls+"-content",visible:t.visible},t.children))},n}(e.Component);pIe.propTypes={hiddenClassName:JSe().string,className:JSe().string,prefixCls:JSe().string,onMouseEnter:JSe().func,onMouseLeave:JSe().func,onMouseDown:JSe().func,onTouchStart:JSe().func,children:JSe().any};var fIe=pIe,mIe=function(t){function n(e){(0,qSe.Z)(this,n);var r=(0,YSe.Z)(this,t.call(this,e));return gIe.call(r),r.state={stretchChecked:!1,targetWidth:void 0,targetHeight:void 0},r.savePopupRef=wCe.bind(r,"popupInstance"),r.saveAlignRef=wCe.bind(r,"alignInstance"),r}return(0,KSe.Z)(n,t),n.prototype.componentDidMount=function(){this.rootNode=this.getPopupDomNode(),this.setStretchSize()},n.prototype.componentDidUpdate=function(){this.setStretchSize()},n.prototype.getPopupDomNode=function(){return Tn.findDOMNode(this.popupInstance)},n.prototype.getMaskTransitionName=function(){var e=this.props,t=e.maskTransitionName,n=e.maskAnimation;return!t&&n&&(t=e.prefixCls+"-"+n),t},n.prototype.getTransitionName=function(){var e=this.props,t=e.transitionName;return!t&&e.animation&&(t=e.prefixCls+"-"+e.animation),t},n.prototype.getClassName=function(e){return this.props.prefixCls+" "+this.props.className+" "+e},n.prototype.getPopupElement=function(){var t=this,n=this.savePopupRef,r=this.state,a=r.stretchChecked,i=r.targetHeight,o=r.targetWidth,s=this.props,u=s.align,l=s.visible,c=s.prefixCls,d=s.style,h=s.getClassNameFromAlign,p=s.destroyPopupOnHide,f=s.stretch,m=s.children,g=s.onMouseEnter,v=s.onMouseLeave,y=s.onMouseDown,b=s.onTouchStart,x=this.getClassName(this.currentAlignClassName||h(u)),A=c+"-hidden";l||(this.currentAlignClassName=null);var w={};f&&(-1!==f.indexOf("height")?w.height=i:-1!==f.indexOf("minHeight")&&(w.minHeight=i),-1!==f.indexOf("width")?w.width=o:-1!==f.indexOf("minWidth")&&(w.minWidth=o),a||(w.visibility="hidden",setTimeout((function(){t.alignInstance&&t.alignInstance.forceAlign()}),0)));var k={className:x,prefixCls:c,ref:n,onMouseEnter:g,onMouseLeave:v,onMouseDown:y,onTouchStart:b,style:(0,GSe.Z)({},w,d,this.getZIndexStyle())};return p?e.createElement(cIe,{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName()},l?e.createElement(_Ce,{target:this.getAlignTarget(),key:"popup",ref:this.saveAlignRef,monitorWindowResize:!0,align:u,onAlign:this.onAlign},e.createElement(fIe,(0,GSe.Z)({visible:!0},k),m)):null):e.createElement(cIe,{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName(),showProp:"xVisible"},e.createElement(_Ce,{target:this.getAlignTarget(),key:"popup",ref:this.saveAlignRef,monitorWindowResize:!0,xVisible:l,childrenProps:{visible:"xVisible"},disabled:!l,align:u,onAlign:this.onAlign},e.createElement(fIe,(0,GSe.Z)({hiddenClassName:A},k),m)))},n.prototype.getZIndexStyle=function(){var e={},t=this.props;return void 0!==t.zIndex&&(e.zIndex=t.zIndex),e},n.prototype.getMaskElement=function(){var t=this.props,n=void 0;if(t.mask){var r=this.getMaskTransitionName();n=e.createElement(hIe,{style:this.getZIndexStyle(),key:"mask",className:t.prefixCls+"-mask",hiddenClassName:t.prefixCls+"-mask-hidden",visible:t.visible}),r&&(n=e.createElement(cIe,{key:"mask",showProp:"visible",transitionAppear:!0,component:"",transitionName:r},n))}return n},n.prototype.render=function(){return e.createElement("div",null,this.getMaskElement(),this.getPopupElement())},n}(e.Component);mIe.propTypes={visible:JSe().bool,style:JSe().object,getClassNameFromAlign:JSe().func,onAlign:JSe().func,getRootDomNode:JSe().func,align:JSe().any,destroyPopupOnHide:JSe().bool,className:JSe().string,prefixCls:JSe().string,onMouseEnter:JSe().func,onMouseLeave:JSe().func,onMouseDown:JSe().func,onTouchStart:JSe().func,stretch:JSe().string,children:JSe().node,point:JSe().shape({pageX:JSe().number,pageY:JSe().number})};var gIe=function(){var e=this;this.onAlign=function(t,n){var r=e.props,a=r.getClassNameFromAlign(n);e.currentAlignClassName!==a&&(e.currentAlignClassName=a,t.className=e.getClassName(a)),r.onAlign(t,n)},this.setStretchSize=function(){var t=e.props,n=t.stretch,r=t.getRootDomNode,a=t.visible,i=e.state,o=i.stretchChecked,s=i.targetHeight,u=i.targetWidth;if(n&&a){var l=r();if(l){var c=l.offsetHeight,d=l.offsetWidth;s===c&&u===d&&o||e.setState({stretchChecked:!0,targetHeight:c,targetWidth:d})}}else o&&e.setState({stretchChecked:!1})},this.getTargetElement=function(){return e.props.getRootDomNode()},this.getAlignTarget=function(){var t=e.props.point;return t||e.getTargetElement}},vIe=mIe;function yIe(){}var bIe=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"],xIe=!!Tn.createPortal,AIe={rcTrigger:JSe().shape({onPopupMouseDown:JSe().func})},wIe=function(t){function n(e){(0,qSe.Z)(this,n);var r=(0,YSe.Z)(this,t.call(this,e));kIe.call(r);var a=void 0;return a="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,r.state={prevPopupVisible:a,popupVisible:a},bIe.forEach((function(e){r["fire"+e]=function(t){r.fireEvents(e,t)}})),r}return(0,KSe.Z)(n,t),n.prototype.getChildContext=function(){return{rcTrigger:{onPopupMouseDown:this.onPopupMouseDown}}},n.prototype.componentDidMount=function(){this.componentDidUpdate({},{popupVisible:this.state.popupVisible})},n.prototype.componentDidUpdate=function(e,t){var n=this.props,r=this.state;if(xIe||this.renderComponent(null,(function(){t.popupVisible!==r.popupVisible&&n.afterPopupVisibleChange(r.popupVisible)})),r.popupVisible){var a=void 0;return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(a=n.getDocument(),this.clickOutsideHandler=aCe(a,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(a=a||n.getDocument(),this.touchOutsideHandler=aCe(a,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(a=a||n.getDocument(),this.contextMenuOutsideHandler1=aCe(a,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=aCe(window,"blur",this.onContextMenuClose)))}this.clearOutsideHandler()},n.prototype.componentWillUnmount=function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout)},n.getDerivedStateFromProps=function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r},n.prototype.getPopupDomNode=function(){return this._component&&this._component.getPopupDomNode?this._component.getPopupDomNode():null},n.prototype.getPopupAlign=function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?function(e,t,n){var r=e[t]||{};return(0,GSe.Z)({},r,n)}(r,t,n):n},n.prototype.setPopupVisible=function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&this.setPoint(t)},n.prototype.delaySetPopupVisible=function(e,t,n){var r=this,a=1e3*t;if(this.clearDelayTimer(),a){var i=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=setTimeout((function(){r.setPopupVisible(e,i),r.clearDelayTimer()}),a)}else this.setPopupVisible(e,n)},n.prototype.clearDelayTimer=function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)},n.prototype.clearOutsideHandler=function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)},n.prototype.createTwoChains=function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire"+e]:t[e]||n[e]},n.prototype.isClickToShow=function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")},n.prototype.isContextMenuToShow=function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")},n.prototype.isClickToHide=function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")},n.prototype.isMouseEnterToShow=function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")},n.prototype.isMouseLeaveToHide=function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")},n.prototype.isFocusToShow=function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")},n.prototype.isBlurToHide=function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")},n.prototype.forcePopupAlign=function(){this.state.popupVisible&&this._component&&this._component.alignInstance&&this._component.alignInstance.forceAlign()},n.prototype.fireEvents=function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)},n.prototype.close=function(){this.setPopupVisible(!1)},n.prototype.render=function(){var t=this,n=this.state.popupVisible,r=this.props,a=r.children,i=r.forceRender,o=r.alignPoint,s=r.className,u=e.Children.only(a),l={key:"trigger"};this.isContextMenuToShow()?l.onContextMenu=this.onContextMenu:l.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(l.onClick=this.onClick,l.onMouseDown=this.onMouseDown,l.onTouchStart=this.onTouchStart):(l.onClick=this.createTwoChains("onClick"),l.onMouseDown=this.createTwoChains("onMouseDown"),l.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(l.onMouseEnter=this.onMouseEnter,o&&(l.onMouseMove=this.onMouseMove)):l.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?l.onMouseLeave=this.onMouseLeave:l.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(l.onFocus=this.onFocus,l.onBlur=this.onBlur):(l.onFocus=this.createTwoChains("onFocus"),l.onBlur=this.createTwoChains("onBlur"));var c=Zt()(u&&u.props&&u.props.className,s);c&&(l.className=c);var d=e.cloneElement(u,l);if(!xIe)return e.createElement(hCe,{parent:this,visible:n,autoMount:!1,forceRender:i,getComponent:this.getComponent,getContainer:this.getContainer},(function(e){var n=e.renderComponent;return t.renderComponent=n,d}));var h=void 0;return(n||this._component||i)&&(h=e.createElement(xCe,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),[d,h]},n}(e.Component);wIe.propTypes={children:JSe().any,action:JSe().oneOfType([JSe().string,JSe().arrayOf(JSe().string)]),showAction:JSe().any,hideAction:JSe().any,getPopupClassNameFromAlign:JSe().any,onPopupVisibleChange:JSe().func,afterPopupVisibleChange:JSe().func,popup:JSe().oneOfType([JSe().node,JSe().func]).isRequired,popupStyle:JSe().object,prefixCls:JSe().string,popupClassName:JSe().string,className:JSe().string,popupPlacement:JSe().string,builtinPlacements:JSe().object,popupTransitionName:JSe().oneOfType([JSe().string,JSe().object]),popupAnimation:JSe().any,mouseEnterDelay:JSe().number,mouseLeaveDelay:JSe().number,zIndex:JSe().number,focusDelay:JSe().number,blurDelay:JSe().number,getPopupContainer:JSe().func,getDocument:JSe().func,forceRender:JSe().bool,destroyPopupOnHide:JSe().bool,mask:JSe().bool,maskClosable:JSe().bool,onPopupAlign:JSe().func,popupAlign:JSe().object,popupVisible:JSe().bool,defaultPopupVisible:JSe().bool,maskTransitionName:JSe().oneOfType([JSe().string,JSe().object]),maskAnimation:JSe().string,stretch:JSe().string,alignPoint:JSe().bool},wIe.contextTypes=AIe,wIe.childContextTypes=AIe,wIe.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:function(){return""},getDocument:function(){return window.document},onPopupVisibleChange:yIe,afterPopupVisibleChange:yIe,onPopupAlign:yIe,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[]};var kIe=function(){var t=this;this.onMouseEnter=function(e){var n=t.props.mouseEnterDelay;t.fireEvents("onMouseEnter",e),t.delaySetPopupVisible(!0,n,n?null:e)},this.onMouseMove=function(e){t.fireEvents("onMouseMove",e),t.setPoint(e)},this.onMouseLeave=function(e){t.fireEvents("onMouseLeave",e),t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)},this.onPopupMouseEnter=function(){t.clearDelayTimer()},this.onPopupMouseLeave=function(e){e.relatedTarget&&!e.relatedTarget.setTimeout&&t._component&&t._component.getPopupDomNode&&tCe(t._component.getPopupDomNode(),e.relatedTarget)||t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)},this.onFocus=function(e){t.fireEvents("onFocus",e),t.clearDelayTimer(),t.isFocusToShow()&&(t.focusTime=Date.now(),t.delaySetPopupVisible(!0,t.props.focusDelay))},this.onMouseDown=function(e){t.fireEvents("onMouseDown",e),t.preClickTime=Date.now()},this.onTouchStart=function(e){t.fireEvents("onTouchStart",e),t.preTouchTime=Date.now()},this.onBlur=function(e){t.fireEvents("onBlur",e),t.clearDelayTimer(),t.isBlurToHide()&&t.delaySetPopupVisible(!1,t.props.blurDelay)},this.onContextMenu=function(e){e.preventDefault(),t.fireEvents("onContextMenu",e),t.setPopupVisible(!0,e)},this.onContextMenuClose=function(){t.isContextMenuToShow()&&t.close()},this.onClick=function(e){if(t.fireEvents("onClick",e),t.focusTime){var n=void 0;if(t.preClickTime&&t.preTouchTime?n=Math.min(t.preClickTime,t.preTouchTime):t.preClickTime?n=t.preClickTime:t.preTouchTime&&(n=t.preTouchTime),Math.abs(n-t.focusTime)<20)return;t.focusTime=0}t.preClickTime=0,t.preTouchTime=0,t.isClickToShow()&&(t.isClickToHide()||t.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var r=!t.state.popupVisible;(t.isClickToHide()&&!r||r&&t.isClickToShow())&&t.setPopupVisible(!t.state.popupVisible,e)},this.onPopupMouseDown=function(){var e=t.context.rcTrigger,n=void 0===e?{}:e;t.hasPopupMouseDown=!0,clearTimeout(t.mouseDownTimeout),t.mouseDownTimeout=setTimeout((function(){t.hasPopupMouseDown=!1}),0),n.onPopupMouseDown&&n.onPopupMouseDown.apply(n,arguments)},this.onDocumentClick=function(e){if(!t.props.mask||t.props.maskClosable){var n=e.target;tCe((0,Tn.findDOMNode)(t),n)||t.hasPopupMouseDown||t.close()}},this.getRootDomNode=function(){return(0,Tn.findDOMNode)(t)},this.getPopupClassNameFromAlign=function(e){var n=[],r=t.props,a=r.popupPlacement,i=r.builtinPlacements,o=r.prefixCls,s=r.alignPoint,u=r.getPopupClassNameFromAlign;return a&&i&&n.push(function(e,t,n,r){var a=n.points;for(var i in e)if(e.hasOwnProperty(i)&&ACe(e[i].points,a,r))return t+"-placement-"+i;return""}(i,o,e,s)),u&&n.push(u(e)),n.join(" ")},this.getComponent=function(){var n=t.props,r=n.prefixCls,a=n.destroyPopupOnHide,i=n.popupClassName,o=n.action,s=n.onPopupAlign,u=n.popupAnimation,l=n.popupTransitionName,c=n.popupStyle,d=n.mask,h=n.maskAnimation,p=n.maskTransitionName,f=n.zIndex,m=n.popup,g=n.stretch,v=n.alignPoint,y=t.state,b=y.popupVisible,x=y.point,A=t.getPopupAlign(),w={};return t.isMouseEnterToShow()&&(w.onMouseEnter=t.onPopupMouseEnter),t.isMouseLeaveToHide()&&(w.onMouseLeave=t.onPopupMouseLeave),w.onMouseDown=t.onPopupMouseDown,w.onTouchStart=t.onPopupMouseDown,e.createElement(vIe,(0,GSe.Z)({prefixCls:r,destroyPopupOnHide:a,visible:b,point:v&&x,className:i,action:o,align:A,onAlign:s,animation:u,getClassNameFromAlign:t.getPopupClassNameFromAlign},w,{stretch:g,getRootDomNode:t.getRootDomNode,style:c,mask:d,zIndex:f,transitionName:l,maskAnimation:h,maskTransitionName:p,ref:t.savePopup}),"function"===typeof m?m():m)},this.getContainer=function(){var e=t.props,n=document.createElement("div");return n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",(e.getPopupContainer?e.getPopupContainer((0,Tn.findDOMNode)(t)):e.getDocument().body).appendChild(n),n},this.setPoint=function(e){t.props.alignPoint&&e&&t.setState({point:{pageX:e.pageX,pageY:e.pageY}})},this.handlePortalUpdate=function(){t.state.prevPopupVisible!==t.state.popupVisible&&t.props.afterPopupVisibleChange(t.state.popupVisible)},this.savePopup=function(e){t._component=e}};!function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,r=null,a=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?r="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?a="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(a="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==a){var i=e.displayName||e.name,o="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+i+" uses "+o+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==a?"\n  "+a:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=QSe,t.componentWillReceiveProps=$Se),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=eCe;var s=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;s.call(this,e,t,r)}}}(wIe);var SIe=wIe,CIe={adjustX:1,adjustY:1},IIe=[0,0],EIe={left:{points:["cr","cl"],overflow:CIe,offset:[-4,0],targetOffset:IIe},right:{points:["cl","cr"],overflow:CIe,offset:[4,0],targetOffset:IIe},top:{points:["bc","tc"],overflow:CIe,offset:[0,-4],targetOffset:IIe},bottom:{points:["tc","bc"],overflow:CIe,offset:[0,4],targetOffset:IIe},topLeft:{points:["bl","tl"],overflow:CIe,offset:[0,-4],targetOffset:IIe},leftTop:{points:["tr","tl"],overflow:CIe,offset:[-4,0],targetOffset:IIe},topRight:{points:["br","tr"],overflow:CIe,offset:[0,-4],targetOffset:IIe},rightTop:{points:["tl","tr"],overflow:CIe,offset:[4,0],targetOffset:IIe},bottomRight:{points:["tr","br"],overflow:CIe,offset:[0,4],targetOffset:IIe},rightBottom:{points:["bl","br"],overflow:CIe,offset:[4,0],targetOffset:IIe},bottomLeft:{points:["tl","bl"],overflow:CIe,offset:[0,4],targetOffset:IIe},leftBottom:{points:["br","bl"],overflow:CIe,offset:[-4,0],targetOffset:IIe}},TIe=function(t){function n(){return(0,qSe.Z)(this,n),(0,YSe.Z)(this,t.apply(this,arguments))}return(0,KSe.Z)(n,t),n.prototype.componentDidUpdate=function(){var e=this.props.trigger;e&&e.forcePopupAlign()},n.prototype.render=function(){var t=this.props,n=t.overlay,r=t.prefixCls,a=t.id;return e.createElement("div",{className:r+"-inner",id:a,role:"tooltip"},"function"===typeof n?n():n)},n}(e.Component);TIe.propTypes={prefixCls:JSe().string,overlay:JSe().oneOfType([JSe().node,JSe().func]).isRequired,id:JSe().string,trigger:JSe().any};var NIe=TIe,_Ie=function(t){function n(){var r,a,i;(0,qSe.Z)(this,n);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return r=a=(0,YSe.Z)(this,t.call.apply(t,[this].concat(s))),a.getPopupElement=function(){var t=a.props,n=t.arrowContent,r=t.overlay,i=t.prefixCls,o=t.id;return[e.createElement("div",{className:i+"-arrow",key:"arrow"},n),e.createElement(NIe,{key:"content",trigger:a.trigger,prefixCls:i,id:o,overlay:r})]},a.saveTrigger=function(e){a.trigger=e},i=r,(0,YSe.Z)(a,i)}return(0,KSe.Z)(n,t),n.prototype.getPopupDomNode=function(){return this.trigger.getPopupDomNode()},n.prototype.render=function(){var t=this.props,n=t.overlayClassName,r=t.trigger,a=t.mouseEnterDelay,i=t.mouseLeaveDelay,o=t.overlayStyle,s=t.prefixCls,u=t.children,l=t.onVisibleChange,c=t.afterVisibleChange,d=t.transitionName,h=t.animation,p=t.placement,f=t.align,m=t.destroyTooltipOnHide,g=t.defaultVisible,v=t.getTooltipContainer,y=(0,XSe.Z)(t,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer"]),b=(0,GSe.Z)({},y);return"visible"in this.props&&(b.popupVisible=this.props.visible),e.createElement(SIe,(0,GSe.Z)({popupClassName:n,ref:this.saveTrigger,prefixCls:s,popup:this.getPopupElement,action:r,builtinPlacements:EIe,popupPlacement:p,popupAlign:f,getPopupContainer:v,onPopupVisibleChange:l,afterPopupVisibleChange:c,popupTransitionName:d,popupAnimation:h,defaultPopupVisible:g,destroyPopupOnHide:m,mouseLeaveDelay:i,popupStyle:o,mouseEnterDelay:a},b),u)},n}(e.Component);_Ie.propTypes={trigger:JSe().any,children:JSe().any,defaultVisible:JSe().bool,visible:JSe().bool,placement:JSe().string,transitionName:JSe().oneOfType([JSe().string,JSe().object]),animation:JSe().any,onVisibleChange:JSe().func,afterVisibleChange:JSe().func,overlay:JSe().oneOfType([JSe().node,JSe().func]).isRequired,overlayStyle:JSe().object,overlayClassName:JSe().string,prefixCls:JSe().string,mouseEnterDelay:JSe().number,mouseLeaveDelay:JSe().number,getTooltipContainer:JSe().func,destroyTooltipOnHide:JSe().bool,align:JSe().object,arrowContent:JSe().any,id:JSe().string},_Ie.defaultProps={prefixCls:"rc-tooltip",mouseEnterDelay:0,destroyTooltipOnHide:!1,mouseLeaveDelay:.1,align:{},placement:"right",trigger:["hover"],arrowContent:null};var MIe=_Ie,RIe=function(t){var n=t.children,r=t.content,a=t.className,i=t.open,o=Gt(t,["children","content","className","open"]),s=Mn(),u=Ut(Ut({},s.tooltip),o),l=u.showArrow,c=void 0!==l&&l,d=u.enterDelay,h=void 0===d?0:d,p=u.leaveDelay,f=void 0===p?0:p,m=u.align,g=void 0===m?"top":m,v=u.activateOn,y=void 0===v?["hover","focus"]:v;return e.createElement(MIe,Ut({},void 0!==i?{visible:i}:{},{trigger:Array.isArray(y)?y:[y],prefixCls:"rmwc-tooltip",placement:g,transitionName:"rmwc-tooltip-zoom",mouseEnterDelay:h/1e3,mouseLeaveDelay:f/1e3,overlay:r,overlayClassName:Zt()(a,{"rmwc-tooltip--show-arrow":c}),destroyTooltipOnHide:!0}),n)};n(9111);var OIe=function(){return OIe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},OIe.apply(this,arguments)};function PIe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var FIe=$n({surface:!1})(rn((function(t,n){t.selected,t.activated,t.disabled;var r=PIe(t,["selected","activated","disabled"]),a=en(t,["mdc-list-item",{"mdc-list-item--selected":t.selected,"mdc-list-item--activated":t.activated,"mdc-list-item--disabled":t.disabled}]);return e.createElement($t,OIe({tag:"li",tabIndex:0},r,{className:a,ref:n}),e.createElement(Qn,{className:"mdc-list-item__ripple"}),r.children)}))),DIe=rn((function(t,n){var r=en(t,["mdc-list-item__text"]);return e.createElement($t,OIe({tag:"span"},t,{ref:n,className:r}))})),LIe=rn((function(t,n){var r=en(t,["mdc-list-item__primary-text"]);return e.createElement($t,OIe({tag:"span"},t,{ref:n,className:r}))})),zIe=rn((function(t,n){var r=en(t,["mdc-list-item__secondary-text"]);return e.createElement($t,OIe({tag:"span"},t,{ref:n,className:r}))})),BIe=rn((function(t,n){var r=en(t,["mdc-list-item__graphic"]);return e.createElement(rr,OIe({},t,{"aria-hidden":"true",ref:n,className:r}))})),WIe=rn((function(t,n){var r=en(t,["mdc-list-item__meta"]);if(t.icon)return e.createElement(rr,OIe({},t,{"aria-hidden":"true",ref:n,className:r}));if(e.isValidElement(t.children)){t.children;var a=PIe(t,["children"]);return e.cloneElement(t.children,OIe(OIe(OIe({},a),t.children.props),{className:Zt()(r,t.children.props.className)}))}return e.createElement($t,OIe({},t,{ref:n,className:r}))})),jIe=(rn((function(t,n){var r=en(t,["mdc-list-group"]);return e.createElement($t,OIe({},t,{ref:n,className:r}))})),rn((function(t,n){var r=en(t,["mdc-list-group__subheader"]);return e.createElement($t,OIe({},t,{ref:n,className:r}))})),rn((function(t,n){var r=en(t,["mdc-list-divider"]);return e.createElement($t,OIe({tag:"li",role:"separator"},t,{ref:n,className:r}))})));rn((function(t,n){var r=t.text,a=t.secondaryText,i=t.graphic,o=t.metaIcon,s=t.meta,u=t.children,l=PIe(t,["text","secondaryText","graphic","metaIcon","meta","children"]),c=r&&void 0!==a?e.createElement(LIe,null,r):r,d=void 0!==a?e.createElement(zIe,null,a):null;return e.createElement(FIe,OIe({},l,{ref:n}),e.createElement(Qn,{className:"mdc-list-item__ripple"}),void 0!==i&&e.createElement(BIe,{icon:i}),null!==d?e.createElement(DIe,null,c,d):c,(!!s||!!o)&&e.createElement(WIe,{icon:o},s),u)})),n(1093);var VIe=function(t){var n=function(t){var n=(0,e.useState)((function(){return at("function"==typeof t?t():t,!0)})),r=n[1];return[n[0],(0,e.useCallback)((function(e){r("function"==typeof e?Ht(e):at(e))}),[])]}(t.pomoConfigs),r=u(n,2),a=r[0],i=r[1];return(0,sme.jsx)(sme.Fragment,{children:(0,sme.jsxs)(yke,{open:t.open,onClose:function(e){"confirm"===e.target.action&&t.setPomoConfigs(a),t.onClose()},renderToPortal:!0,children:[(0,sme.jsx)(xke,{children:"Configuration"}),(0,sme.jsx)(Ake,{children:(0,sme.jsxs)(on,{children:[(0,sme.jsx)(sn,{span:12,children:(0,sme.jsxs)(un,{children:[(0,sme.jsx)(sn,{span:12,children:(0,sme.jsx)(Xfe,{use:"subtitle2",children:"Pomodoro Config"})}),(0,sme.jsx)(sn,{span:4,children:(0,sme.jsx)(ySe,{required:!0,label:"Focus Time",type:"number",suffix:"minutes",pattern:"[0-9]*",defaultValue:t.pomoConfigs.alertStudySeconds/60,onChange:function(e){e.target.validity.valid&&i((function(t){t.alertStudySeconds=60*parseInt(e.target.value)}))}})}),(0,sme.jsx)(sn,{span:4,children:(0,sme.jsx)(ySe,{required:!0,label:"Rest Time",type:"number",suffix:"minutes",pattern:"[0-9]*",defaultValue:t.pomoConfigs.alertRestSeconds/60,onChange:function(e){e.target.validity.valid&&i((function(t){t.alertRestSeconds=60*parseInt(e.target.value)}))}})}),(0,sme.jsx)(sn,{span:4,children:(0,sme.jsx)(RIe,{content:"If the rest time or focus time is less than this, it will not be counted as a separted time slot.",children:(0,sme.jsx)(ySe,{required:!0,label:"Max allowed missing time",type:"number",suffix:"seconds",pattern:"[0-9]*",defaultValue:t.pomoConfigs.tempMissingSeconds,onChange:function(e){e.target.validity.valid&&i((function(t){t.tempMissingSeconds=parseInt(e.target.value)}))}})})})]})}),(0,sme.jsx)(sn,{span:12,children:(0,sme.jsx)(jIe,{})}),(0,sme.jsx)(sn,{span:12,children:(0,sme.jsxs)(un,{children:[(0,sme.jsx)(sn,{span:12,children:(0,sme.jsx)(Xfe,{use:"subtitle2",children:"Face Recognition Config"})}),(0,sme.jsx)(sn,{children:(0,sme.jsx)(RIe,{content:"Every n seconds we detect user face, shorter interval might increase CPU usage, longer interval might make pomodoro less sensitive.",children:(0,sme.jsx)(ySe,{required:!0,label:"Face Detection Interval",type:"number",pattern:"[0-9]*",suffix:"seconds",defaultValue:t.pomoConfigs.faceRecognition.detectionInterval,onChange:function(e){if(e.target.validity.valid){var t=parseInt(e.target.value);t<2||i((function(e){e.faceRecognition.detectionInterval=t}))}}})})}),(0,sme.jsx)(sn,{children:(0,sme.jsx)(WSe,{defaultChecked:t.pomoConfigs.enableDetection,onChange:function(e){i((function(t){t.enableDetection=e.target.checked}))},label:"Enable Face Detection"})}),(0,sme.jsx)(sn,{children:(0,sme.jsx)(WSe,{defaultChecked:t.pomoConfigs.faceRecognition.showFaceRecognitionStatus,onChange:function(e){i((function(t){t.faceRecognition.showFaceRecognitionStatus=e.target.checked}))},label:"Show Face Recognition Status"})}),(0,sme.jsx)(sn,{children:(0,sme.jsx)(WSe,{defaultChecked:t.pomoConfigs.faceRecognition.showCameraPreview,onChange:function(e){i((function(t){t.faceRecognition.showCameraPreview=e.target.checked}))},label:"Show Live Camera Preview"})}),(0,sme.jsx)(sn,{children:(0,sme.jsx)(WSe,{defaultChecked:t.pomoConfigs.faceRecognition.showFaceRecognitionCanvas,onChange:function(e){i((function(t){t.faceRecognition.showFaceRecognitionCanvas=e.target.checked}))},label:"Show Face Detection Result"})})]})}),(0,sme.jsx)(sn,{span:12,children:(0,sme.jsx)(jIe,{})}),(0,sme.jsx)(sn,{span:12,children:(0,sme.jsxs)(un,{children:[(0,sme.jsx)(sn,{span:12,children:(0,sme.jsx)(Xfe,{use:"subtitle2",children:"Notification Config"})}),(0,sme.jsx)(sn,{children:(0,sme.jsx)(ySe,{required:!0,label:"Notification Interval Time",type:"number",suffix:"seconds",pattern:"[0-9]*",defaultValue:t.pomoConfigs.notificationIntervalSeconds,onChange:function(e){e.target.validity.valid&&i((function(t){t.notificationIntervalSeconds=parseInt(e.target.value)}))}})}),(0,sme.jsx)(sn,{children:(0,sme.jsx)(RIe,{content:"Everytime a notification is send, its wait time will multiply previous interval, so that the sending interval is longer and longer. If you don't want this behavior, change it to 1.",children:(0,sme.jsx)(ySe,{required:!0,label:"Notification Interval Multiplier",suffix:"times",pattern:"[0-9\\.]*",defaultValue:t.pomoConfigs.notificationIntervalMultiplier,onChange:function(e){if(console.log(e),e.target.validity.valid){var t=parseFloat(e.target.value);t<1?e.target.setCustomValidity("Multiplier cannot be less than 1"):i((function(e){e.notificationIntervalMultiplier=t}))}}})})})]})}),(0,sme.jsx)(sn,{span:12,children:(0,sme.jsx)(jIe,{})}),(0,sme.jsx)(sn,{span:12,children:(0,sme.jsxs)(un,{children:[(0,sme.jsx)(sn,{span:12,children:(0,sme.jsx)(Xfe,{use:"subtitle2",children:"Pomodoro History Config"})}),(0,sme.jsx)(sn,{children:(0,sme.jsx)(RIe,{content:"Increasing this might degrade performance.",children:(0,sme.jsx)(ySe,{required:!0,label:"Max pomodoro history entries kepted",type:"number",resizeable:!0,pattern:"[0-9]*",suffix:"entries",defaultValue:t.pomoConfigs.history.maxLocalStorageTimeSlot,onChange:function(e){e.target.validity.valid&&i((function(t){t.history.maxLocalStorageTimeSlot=parseInt(e.target.value)}))}})})}),(0,sme.jsx)(sn,{children:(0,sme.jsx)(WSe,{defaultChecked:t.pomoConfigs.history.showPomodoroHistory,onChange:function(e){i((function(t){t.history.showPomodoroHistory=e.target.checked}))},label:"Show Pomodoro History"})}),(0,sme.jsx)(sn,{children:(0,sme.jsx)(WSe,{defaultChecked:t.pomoConfigs.history.onlyShowToday,onChange:function(e){i((function(t){t.history.onlyShowToday=e.target.checked}))},label:"Only Show Today's History"})})]})})]})}),(0,sme.jsxs)(wke,{children:[(0,sme.jsx)(kke,{action:"close",children:"Cancel"}),(0,sme.jsx)(kke,{action:"confirm",isDefaultAction:!0,children:"Confirm"})]})]})})};var HIe=function(){return HIe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},HIe.apply(this,arguments)};function UIe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var GIe,XIe=rn((function(t,n){var r=t.outlined,a=UIe(t,["outlined"]),i=en(t,["mdc-card",{"mdc-card--outlined":r}]);return e.createElement($t,HIe({},a,{ref:n,className:i}))})),qIe=(rn((function(t,n){var r=t.square,a=t.sixteenByNine,i=UIe(t,["square","sixteenByNine"]),o=en(t,["mdc-card__media",{"mdc-card__media--square":r,"mdc-card__media--16-9":a}]);return e.createElement($t,HIe({tag:"section"},i,{ref:n,className:o}))})),rn((function(t,n){var r=en(t,["mdc-card__media-content"]);return e.createElement($t,HIe({},t,{ref:n,className:r}))})),$n({surface:!1})(rn((function(t,n){var r=en(t,["mdc-card__primary-action"]);return e.createElement($t,HIe({},t,{ref:n,className:r}))}))));rn((function(t,n){var r=t.fullBleed,a=UIe(t,["fullBleed"]),i=en(t,["mdc-card__actions",{"mdc-card__actions--full-bleed":r}]);return e.createElement($t,HIe({tag:"section"},a,{ref:n,className:i}))})),rn((function(t,n){var r=en(t,["mdc-card__action-buttons"]);return e.createElement($t,HIe({},t,{ref:n,className:r}))})),rn((function(t,n){var r=en(t,["mdc-card__action-icons"]);return e.createElement($t,HIe({},t,{ref:n,className:r}))})),rn((function(t,n){var r=en(t,["mdc-card__action","mdc-card__action--icon"]);return e.createElement(yr,HIe({},t,{ref:n,className:r}))})),rn((function(t,n){var r=en(t,["mdc-card__action","mdc-card__action--button"]);return e.createElement(ar,HIe({},t,{ref:n,className:r}))})),n(8249);var YIe,KIe=function(e){var t=Oe(GIe||(GIe=r(["font-weight: bold;"])));return(0,sme.jsx)(sme.Fragment,{children:(0,sme.jsxs)(yke,{open:e.open,onClose:function(t){e.onClose()},renderToPortal:!0,children:[(0,sme.jsx)(xke,{children:"Intro to Face Recognition Pomodoro"}),(0,sme.jsxs)(Ake,{children:[(0,sme.jsx)("div",{style:{padding:"10px"}}),(0,sme.jsx)(XIe,{children:(0,sme.jsx)(qIe,{children:(0,sme.jsxs)("div",{style:{padding:"0 1rem 1rem 1rem"},children:[(0,sme.jsx)(Xfe,{use:"headline6",tag:"h2",children:"What is this?"}),(0,sme.jsxs)(Xfe,{use:"body1",tag:"div",theme:"textSecondaryOnBackground",children:["This is a ",(0,sme.jsx)("span",{className:t,children:"Pomodoro clock"}),". Unlike other Pomodoro Clock, it can automatically help you start",(0,sme.jsx)("span",{className:t,children:" a focus session "}),"when the camera detected your face. When the camera no longer detect your face, it starts ",(0,sme.jsx)("span",{className:t,children:" a rest session "}),". We will request camera permission and notification permission later, please click allow around the browser's url."]})]})})}),(0,sme.jsx)("div",{style:{padding:"10px"}}),(0,sme.jsx)(XIe,{children:(0,sme.jsx)(qIe,{children:(0,sme.jsxs)("div",{style:{padding:"0 1rem 1rem 1rem"},children:[(0,sme.jsx)(Xfe,{use:"headline6",tag:"h2",children:"What if I left my camera but don't want to stop the Pomodoro session?"}),(0,sme.jsxs)(Xfe,{use:"body1",tag:"div",theme:"textSecondaryOnBackground",children:["If the time of stepping away is less than ",(0,sme.jsx)("span",{className:t,children:" Max Allowed Missing Time "}),"in the settings, the Pomodoro session will continue the session when you are back."]})]})})}),(0,sme.jsx)("div",{style:{padding:"10px"}}),(0,sme.jsx)(XIe,{children:(0,sme.jsx)(qIe,{children:(0,sme.jsxs)("div",{style:{padding:"0 1rem 1rem 1rem"},children:[(0,sme.jsx)(Xfe,{use:"headline6",tag:"h2",children:"Why this intro always popup on start?"}),(0,sme.jsx)(Xfe,{use:"body1",tag:"div",theme:"textSecondaryOnBackground",children:"There must be at least one user interaction to make notification works, so I take this opportunity to intro the tool."})]})})}),(0,sme.jsx)("div",{style:{padding:"10px"}}),(0,sme.jsx)(XIe,{children:(0,sme.jsx)(qIe,{children:(0,sme.jsxs)("div",{style:{padding:"0 1rem 1rem 1rem"},children:[(0,sme.jsx)(Xfe,{use:"headline6",tag:"h2",children:"Will this slow down my computer or phone?"}),(0,sme.jsx)(Xfe,{use:"body1",tag:"div",theme:"textSecondaryOnBackground",children:"Usually not, it leverage GPU to detect your face and just takes a few milliseconds."})]})})})]}),(0,sme.jsx)(wke,{children:(0,sme.jsx)(kke,{action:"confirm",isDefaultAction:!0,children:"Ok, let's continue."})})]})})};var ZIe=function(){var t=u(Ve("pomoConfig",{defaultValue:Aie}),2),n=t[0],a=t[1],i=u((0,e.useState)(!1),2),o=i[0],s=i[1],l=u((0,e.useState)(!0),2),c=l[0],d=l[1];return(0,sme.jsx)(sme.Fragment,{children:(0,sme.jsxs)(ake,{options:{primary:"#bf360c",secondary:"#616161"},children:[(0,sme.jsx)(oke,{}),(0,sme.jsx)(Vwe,{style:{zIndex:10},children:(0,sme.jsxs)(Uwe,{children:[(0,sme.jsx)(Gwe,{alignStart:!0,children:(0,sme.jsx)(qwe,{icon:"help",onClick:function(){return d(!0)}})}),(0,sme.jsx)(Gwe,{className:Oe(YIe||(YIe=r(["justify-content: center"]))),children:(0,sme.jsx)(Ywe,{children:"Face Recognition Pomodoro"})}),(0,sme.jsx)(Gwe,{alignEnd:!0,children:(0,sme.jsx)(qwe,{icon:"settings",onClick:function(){return s(!0)}})})]})}),(0,sme.jsx)(Kwe,{}),(0,sme.jsx)(KIe,{open:c,onClose:function(){d(!1),a(Vt((function(e){e.enableDetection=!0,e.enableNotification=!0})))}}),(0,sme.jsx)(VIe,{open:o,onClose:function(){return s(!1)},pomoConfigs:n,setPomoConfigs:a}),(0,sme.jsx)(wie.Provider,{value:n,children:(0,sme.jsx)(Nwe,{})})]})})};var JIe=function(){return(0,sme.jsx)("div",{children:(0,sme.jsx)(ZIe,{})})};t.createRoot(document.getElementById("root")).render((0,sme.jsx)(JIe,{}))}()}();