/*! For license information please see main.909c41fe.js.LICENSE.txt */
!function(){var e={7228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},2858:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},9713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},5318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},862:function(e,t,n){var r=n(8).default;function a(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var u=o?Object.getOwnPropertyDescriptor(e,s):null;u&&(u.get||u.set)?Object.defineProperty(i,s,u):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i},e.exports.__esModule=!0,e.exports.default=e.exports},3884:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},521:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},1109:function(e,t,n){var r=n(9713);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},6479:function(e,t,n){var r=n(7316);e.exports=function(e,t){if(null==e)return{};var n,a,i=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},7316:function(e){e.exports=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a},e.exports.__esModule=!0,e.exports.default=e.exports},9591:function(e,t,n){var r=n(8).default;function a(){"use strict";e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(T){l=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var a=t&&t.prototype instanceof h?t:h,i=Object.create(a.prototype),o=new E(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return N()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=f(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T){return{type:"throw",arg:T}}}t.wrap=d;var p={};function h(){}function m(){}function v(){}var g={};l(g,s,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(C([])));b&&b!==n&&i.call(b,s)&&(g=b);var x=v.prototype=h.prototype=Object.create(g);function A(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(a,o,s,u){var c=f(e[a],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==r(d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=f(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:N}}function N(){return{value:void 0,done:!0}}return m.prototype=v,l(x,"constructor",v),l(v,"constructor",m),m.displayName=l(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},A(k.prototype),l(k.prototype,u,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new k(d(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},A(x),l(x,c,"Generator"),l(x,s,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=C,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),u=i.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;I(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},3038:function(e,t,n){var r=n(2858),a=n(3884),i=n(379),o=n(521);e.exports=function(e,t){return r(e)||a(e,t)||i(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},8:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},379:function(e,t,n){var r=n(7228);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},7757:function(e,t,n){var r=n(9591)();e.exports=r;try{regeneratorRuntime=r}catch(a){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},7819:function(e,t,n){"use strict";n.r(t),n.d(t,{blue:function(){return S},cyan:function(){return w},geekblue:function(){return I},generate:function(){return f},gold:function(){return y},green:function(){return k},grey:function(){return N},lime:function(){return A},magenta:function(){return C},orange:function(){return b},presetDarkPalettes:function(){return m},presetPalettes:function(){return h},presetPrimaryColors:function(){return p},purple:function(){return E},red:function(){return v},volcano:function(){return g},yellow:function(){return x}});var r=n(2144),a=n(6144),i=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function o(e){var t=e.r,n=e.g,a=e.b,i=(0,r.py)(t,n,a);return{h:360*i.h,s:i.s,v:i.v}}function s(e){var t=e.r,n=e.g,a=e.b;return"#".concat((0,r.vq)(t,n,a,!1))}function u(e,t,n){var r=n/100;return{r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b}}function c(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-2*t:Math.round(e.h)+2*t:n?Math.round(e.h)+2*t:Math.round(e.h)-2*t)<0?r+=360:r>=360&&(r-=360),r}function l(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-.16*t:4===t?e.s+.16:e.s+.05*t)>1&&(r=1),n&&5===t&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function d(e,t,n){var r;return(r=n?e.v+.05*t:e.v-.15*t)>1&&(r=1),Number(r.toFixed(2))}function f(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=(0,a.uA)(e),f=5;f>0;f-=1){var p=o(r),h=s((0,a.uA)({h:c(p,f,!0),s:l(p,f,!0),v:d(p,f,!0)}));n.push(h)}n.push(s(r));for(var m=1;m<=4;m+=1){var v=o(r),g=s((0,a.uA)({h:c(v,m),s:l(v,m),v:d(v,m)}));n.push(g)}return"dark"===t.theme?i.map((function(e){var r=e.index,i=e.opacity;return s(u((0,a.uA)(t.backgroundColor||"#141414"),(0,a.uA)(n[r]),100*i))})):n}var p={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},h={},m={};Object.keys(p).forEach((function(e){h[e]=f(p[e]),h[e].primary=h[e][5],m[e]=f(p[e],{theme:"dark",backgroundColor:"#141414"}),m[e].primary=m[e][5]}));var v=h.red,g=h.volcano,y=h.gold,b=h.orange,x=h.yellow,A=h.lime,k=h.green,w=h.cyan,S=h.blue,I=h.geekblue,E=h.purple,C=h.magenta,N=h.grey},8913:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM695.5 365.7l-210.6 292a31.8 31.8 0 01-51.7 0L308.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H689c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-square",theme:"filled"}},8729:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M354 671h58.9c4.7 0 9.2-2.1 12.3-5.7L512 561.8l86.8 103.5c3 3.6 7.5 5.7 12.3 5.7H670c6.8 0 10.5-7.9 6.1-13.1L553.8 512l122.4-145.9c4.4-5.2.7-13.1-6.1-13.1h-58.9c-4.7 0-9.2 2.1-12.3 5.7L512 462.2l-86.8-103.5c-3-3.6-7.5-5.7-12.3-5.7H354c-6.8 0-10.5 7.9-6.1 13.1L470.2 512 347.9 657.9A7.95 7.95 0 00354 671z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"close-square",theme:"outlined"}},6207:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(1851))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},1527:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(r=n(349))&&r.__esModule?r:{default:r};t.default=a,e.exports=a},7830:function(e,t,n){"use strict";var r=n(5318),a=n(862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1109)),o=r(n(3038)),s=r(n(9713)),u=r(n(6479)),c=a(n(7313)),l=r(n(6123)),d=r(n(4573)),f=r(n(9063)),p=n(1468),h=n(9018),m=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];(0,p.setTwoToneColor)("#1890ff");var v=c.forwardRef((function(e,t){var n,r=e.className,a=e.icon,p=e.spin,v=e.rotate,g=e.tabIndex,y=e.onClick,b=e.twoToneColor,x=(0,u.default)(e,m),A=c.useContext(d.default).prefixCls,k=void 0===A?"anticon":A,w=(0,l.default)(k,(n={},(0,s.default)(n,"".concat(k,"-").concat(a.name),!!a.name),(0,s.default)(n,"".concat(k,"-spin"),!!p||"loading"===a.name),n),r),S=g;void 0===S&&y&&(S=-1);var I=v?{msTransform:"rotate(".concat(v,"deg)"),transform:"rotate(".concat(v,"deg)")}:void 0,E=(0,h.normalizeTwoToneColors)(b),C=(0,o.default)(E,2),N=C[0],T=C[1];return c.createElement("span",(0,i.default)((0,i.default)({role:"img","aria-label":a.name},x),{},{ref:t,tabIndex:S,onClick:y,className:w}),c.createElement(f.default,{icon:a,primaryColor:N,secondaryColor:T,style:I}))}));v.displayName="AntdIcon",v.getTwoToneColor=p.getTwoToneColor,v.setTwoToneColor=p.setTwoToneColor;var g=v;t.default=g},4573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,n(7313).createContext)({});t.default=r},9063:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(6479)),i=r(n(1109)),o=n(9018),s=["icon","className","onClick","style","primaryColor","secondaryColor"],u={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var c=function(e){var t=e.icon,n=e.className,r=e.onClick,c=e.style,l=e.primaryColor,d=e.secondaryColor,f=(0,a.default)(e,s),p=u;if(l&&(p={primaryColor:l,secondaryColor:d||(0,o.getSecondaryColor)(l)}),(0,o.useInsertStyles)(),(0,o.warning)((0,o.isIconDefinition)(t),"icon should be icon definiton, but got ".concat(t)),!(0,o.isIconDefinition)(t))return null;var h=t;return h&&"function"===typeof h.icon&&(h=(0,i.default)((0,i.default)({},h),{},{icon:h.icon(p.primaryColor,p.secondaryColor)})),(0,o.generate)(h.icon,"svg-".concat(h.name),(0,i.default)({className:n,onClick:r,style:c,"data-icon":h.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},f))};c.displayName="IconReact",c.getTwoToneColors=function(){return(0,i.default)({},u)},c.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;u.primaryColor=t,u.secondaryColor=n||(0,o.getSecondaryColor)(t),u.calculated=!!n};var l=c;t.default=l},1468:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.setTwoToneColor=function(e){var t=(0,o.normalizeTwoToneColors)(e),n=(0,a.default)(t,2),r=n[0],s=n[1];return i.default.setTwoToneColors({primaryColor:r,secondaryColor:s})},t.getTwoToneColor=function(){var e=i.default.getTwoToneColors();if(!e.calculated)return e.primaryColor;return[e.primaryColor,e.secondaryColor]};var a=r(n(3038)),i=r(n(9063)),o=n(9018)},1851:function(e,t,n){"use strict";var r=n(862),a=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(1109)),o=r(n(7313)),s=a(n(8913)),u=a(n(7830)),c=function(e,t){return o.createElement(u.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:s.default}))};c.displayName="CheckSquareFilled";var l=o.forwardRef(c);t.default=l},349:function(e,t,n){"use strict";var r=n(862),a=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n(1109)),o=r(n(7313)),s=a(n(8729)),u=a(n(7830)),c=function(e,t){return o.createElement(u.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:s.default}))};c.displayName="CloseSquareOutlined";var l=o.forwardRef(c);t.default=l},9018:function(e,t,n){"use strict";var r=n(862),a=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.warning=function(e,t){(0,c.default)(e,"[@ant-design/icons] ".concat(t))},t.isIconDefinition=function(e){return"object"===(0,o.default)(e)&&"string"===typeof e.name&&"string"===typeof e.theme&&("object"===(0,o.default)(e.icon)||"function"===typeof e.icon)},t.normalizeAttrs=f,t.generate=function e(t,n,r){if(!r)return u.default.createElement(t.tag,(0,i.default)({key:n},f(t.attrs)),(t.children||[]).map((function(r,a){return e(r,"".concat(n,"-").concat(t.tag,"-").concat(a))})));return u.default.createElement(t.tag,(0,i.default)((0,i.default)({key:n},f(t.attrs)),r),(t.children||[]).map((function(r,a){return e(r,"".concat(n,"-").concat(t.tag,"-").concat(a))})))},t.getSecondaryColor=function(e){return(0,s.generate)(e)[0]},t.normalizeTwoToneColors=function(e){if(!e)return[];return Array.isArray(e)?e:[e]},t.useInsertStyles=t.iconStyles=t.svgBaseProps=void 0;var i=a(n(1109)),o=a(n(8)),s=n(7819),u=r(n(7313)),c=a(n(4287)),l=n(5824),d=a(n(4573));function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];if("class"===n)t.className=r,delete t.class;else t[n]=r;return t}),{})}t.svgBaseProps={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"};var p="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n";t.iconStyles=p;t.useInsertStyles=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=(0,u.useContext)(d.default),n=t.csp;(0,u.useEffect)((function(){(0,l.updateCSS)(e,"@ant-design-icons",{prepend:!0,csp:n})}),[])}},2144:function(e,t,n){"use strict";n.d(t,{T6:function(){return p},VD:function(){return h},WE:function(){return c},Yt:function(){return m},lC:function(){return i},py:function(){return u},rW:function(){return a},s:function(){return d},ve:function(){return s},vq:function(){return l}});var r=n(3777);function a(e,t,n){return{r:255*(0,r.sh)(e,255),g:255*(0,r.sh)(t,255),b:255*(0,r.sh)(n,255)}}function i(e,t,n){e=(0,r.sh)(e,255),t=(0,r.sh)(t,255),n=(0,r.sh)(n,255);var a=Math.max(e,t,n),i=Math.min(e,t,n),o=0,s=0,u=(a+i)/2;if(a===i)s=0,o=0;else{var c=a-i;switch(s=u>.5?c/(2-a-i):c/(a+i),a){case e:o=(t-n)/c+(t<n?6:0);break;case t:o=(n-e)/c+2;break;case n:o=(e-t)/c+4}o/=6}return{h:o,s:s,l:u}}function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function s(e,t,n){var a,i,s;if(e=(0,r.sh)(e,360),t=(0,r.sh)(t,100),n=(0,r.sh)(n,100),0===t)i=n,s=n,a=n;else{var u=n<.5?n*(1+t):n+t-n*t,c=2*n-u;a=o(c,u,e+1/3),i=o(c,u,e),s=o(c,u,e-1/3)}return{r:255*a,g:255*i,b:255*s}}function u(e,t,n){e=(0,r.sh)(e,255),t=(0,r.sh)(t,255),n=(0,r.sh)(n,255);var a=Math.max(e,t,n),i=Math.min(e,t,n),o=0,s=a,u=a-i,c=0===a?0:u/a;if(a===i)o=0;else{switch(a){case e:o=(t-n)/u+(t<n?6:0);break;case t:o=(n-e)/u+2;break;case n:o=(e-t)/u+4}o/=6}return{h:o,s:c,v:s}}function c(e,t,n){e=6*(0,r.sh)(e,360),t=(0,r.sh)(t,100),n=(0,r.sh)(n,100);var a=Math.floor(e),i=e-a,o=n*(1-t),s=n*(1-i*t),u=n*(1-(1-i)*t),c=a%6;return{r:255*[n,s,o,o,u,n][c],g:255*[u,n,n,s,o,o][c],b:255*[o,o,u,n,n,s][c]}}function l(e,t,n,a){var i=[(0,r.FZ)(Math.round(e).toString(16)),(0,r.FZ)(Math.round(t).toString(16)),(0,r.FZ)(Math.round(n).toString(16))];return a&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function d(e,t,n,a,i){var o=[(0,r.FZ)(Math.round(e).toString(16)),(0,r.FZ)(Math.round(t).toString(16)),(0,r.FZ)(Math.round(n).toString(16)),(0,r.FZ)(f(a))];return i&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))&&o[3].startsWith(o[3].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function f(e){return Math.round(255*parseFloat(e)).toString(16)}function p(e){return h(e)/255}function h(e){return parseInt(e,16)}function m(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}},4929:function(e,t,n){"use strict";n.d(t,{R:function(){return r}});var r={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},6144:function(e,t,n){"use strict";n.d(t,{uA:function(){return o}});var r=n(2144),a=n(4929),i=n(3777);function o(e){var t={r:0,g:0,b:0},n=1,o=null,s=null,u=null,c=!1,f=!1;return"string"===typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(a.R[e])e=a.R[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=l.rgb.exec(e);if(n)return{r:n[1],g:n[2],b:n[3]};if(n=l.rgba.exec(e))return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=l.hsl.exec(e))return{h:n[1],s:n[2],l:n[3]};if(n=l.hsla.exec(e))return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=l.hsv.exec(e))return{h:n[1],s:n[2],v:n[3]};if(n=l.hsva.exec(e))return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=l.hex8.exec(e))return{r:(0,r.VD)(n[1]),g:(0,r.VD)(n[2]),b:(0,r.VD)(n[3]),a:(0,r.T6)(n[4]),format:t?"name":"hex8"};if(n=l.hex6.exec(e))return{r:(0,r.VD)(n[1]),g:(0,r.VD)(n[2]),b:(0,r.VD)(n[3]),format:t?"name":"hex"};if(n=l.hex4.exec(e))return{r:(0,r.VD)(n[1]+n[1]),g:(0,r.VD)(n[2]+n[2]),b:(0,r.VD)(n[3]+n[3]),a:(0,r.T6)(n[4]+n[4]),format:t?"name":"hex8"};if(n=l.hex3.exec(e))return{r:(0,r.VD)(n[1]+n[1]),g:(0,r.VD)(n[2]+n[2]),b:(0,r.VD)(n[3]+n[3]),format:t?"name":"hex"};return!1}(e)),"object"===typeof e&&(d(e.r)&&d(e.g)&&d(e.b)?(t=(0,r.rW)(e.r,e.g,e.b),c=!0,f="%"===String(e.r).substr(-1)?"prgb":"rgb"):d(e.h)&&d(e.s)&&d(e.v)?(o=(0,i.JX)(e.s),s=(0,i.JX)(e.v),t=(0,r.WE)(e.h,o,s),c=!0,f="hsv"):d(e.h)&&d(e.s)&&d(e.l)&&(o=(0,i.JX)(e.s),u=(0,i.JX)(e.l),t=(0,r.ve)(e.h,o,u),c=!0,f="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=(0,i.Yq)(n),{ok:c,format:e.format||f,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var s="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),u="[\\s|\\(]+(".concat(s,")[,|\\s]+(").concat(s,")[,|\\s]+(").concat(s,")\\s*\\)?"),c="[\\s|\\(]+(".concat(s,")[,|\\s]+(").concat(s,")[,|\\s]+(").concat(s,")[,|\\s]+(").concat(s,")\\s*\\)?"),l={CSS_UNIT:new RegExp(s),rgb:new RegExp("rgb"+u),rgba:new RegExp("rgba"+c),hsl:new RegExp("hsl"+u),hsla:new RegExp("hsla"+c),hsv:new RegExp("hsv"+u),hsva:new RegExp("hsva"+c),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function d(e){return Boolean(l.CSS_UNIT.exec(String(e)))}},3777:function(e,t,n){"use strict";function r(e,t){(function(e){return"string"===typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"===typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function a(e){return Math.min(1,Math.max(0,e))}function i(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function o(e){return e<=1?"".concat(100*Number(e),"%"):e}function s(e){return 1===e.length?"0"+e:String(e)}n.d(t,{FZ:function(){return s},JX:function(){return o},V2:function(){return a},Yq:function(){return i},sh:function(){return r}})},4767:function(e){var t;t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./packages/mdc-dom/index.ts")}({"./packages/mdc-dom/events.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyPassive=function(e){return void 0===e&&(e=window),!!function(e){void 0===e&&(e=window);var t=!1;try{var n={get passive(){return t=!0,!1}},r=function(){};e.document.addEventListener("test",r,n),e.document.removeEventListener("test",r,n)}catch(a){t=!1}return t}(e)&&{passive:!0}}},"./packages/mdc-dom/focus-trap.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="mdc-dom-focus-sentinel",a=function(){function e(e,t){void 0===t&&(t={}),this.root=e,this.options=t,this.elFocusedBeforeTrapFocus=null}return e.prototype.trapFocus=function(){var e=this.getFocusableElements(this.root);if(0===e.length)throw new Error("FocusTrap: Element must have at least one focusable child.");this.elFocusedBeforeTrapFocus=document.activeElement instanceof HTMLElement?document.activeElement:null,this.wrapTabFocus(this.root,e),this.options.skipInitialFocus||this.focusInitialElement(e,this.options.initialFocusEl)},e.prototype.releaseFocus=function(){[].slice.call(this.root.querySelectorAll("."+r)).forEach((function(e){e.parentElement.removeChild(e)})),this.elFocusedBeforeTrapFocus&&this.elFocusedBeforeTrapFocus.focus()},e.prototype.wrapTabFocus=function(e,t){var n=this.createSentinel(),r=this.createSentinel();n.addEventListener("focus",(function(){t.length>0&&t[t.length-1].focus()})),r.addEventListener("focus",(function(){t.length>0&&t[0].focus()})),e.insertBefore(n,e.children[0]),e.appendChild(r)},e.prototype.focusInitialElement=function(e,t){var n=0;t&&(n=Math.max(e.indexOf(t),0)),e[n].focus()},e.prototype.getFocusableElements=function(e){return[].slice.call(e.querySelectorAll("[autofocus], [tabindex], a, input, textarea, select, button")).filter((function(e){var t="true"===e.getAttribute("aria-disabled")||null!=e.getAttribute("disabled")||null!=e.getAttribute("hidden")||"true"===e.getAttribute("aria-hidden"),n=e.tabIndex>=0&&e.getBoundingClientRect().width>0&&!e.classList.contains(r)&&!t,a=!1;if(n){var i=getComputedStyle(e);a="none"===i.display||"hidden"===i.visibility}return n&&!a}))},e.prototype.createSentinel=function(){var e=document.createElement("div");return e.setAttribute("tabindex","0"),e.setAttribute("aria-hidden","true"),e.classList.add(r),e},e}();t.FocusTrap=a},"./packages/mdc-dom/index.ts":function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var a=r(n("./packages/mdc-dom/events.ts"));t.events=a;var i=r(n("./packages/mdc-dom/focus-trap.ts"));t.focusTrap=i;var o=r(n("./packages/mdc-dom/keyboard.ts"));t.keyboard=o;var s=r(n("./packages/mdc-dom/ponyfill.ts"));t.ponyfill=s},"./packages/mdc-dom/keyboard.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KEY={UNKNOWN:"Unknown",BACKSPACE:"Backspace",ENTER:"Enter",SPACEBAR:"Spacebar",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",DELETE:"Delete",ESCAPE:"Escape"};var r=new Set;r.add(t.KEY.BACKSPACE),r.add(t.KEY.ENTER),r.add(t.KEY.SPACEBAR),r.add(t.KEY.PAGE_UP),r.add(t.KEY.PAGE_DOWN),r.add(t.KEY.END),r.add(t.KEY.HOME),r.add(t.KEY.ARROW_LEFT),r.add(t.KEY.ARROW_UP),r.add(t.KEY.ARROW_RIGHT),r.add(t.KEY.ARROW_DOWN),r.add(t.KEY.DELETE),r.add(t.KEY.ESCAPE);var a=8,i=13,o=32,s=33,u=34,c=35,l=36,d=37,f=38,p=39,h=40,m=46,v=27,g=new Map;g.set(a,t.KEY.BACKSPACE),g.set(i,t.KEY.ENTER),g.set(o,t.KEY.SPACEBAR),g.set(s,t.KEY.PAGE_UP),g.set(u,t.KEY.PAGE_DOWN),g.set(c,t.KEY.END),g.set(l,t.KEY.HOME),g.set(d,t.KEY.ARROW_LEFT),g.set(f,t.KEY.ARROW_UP),g.set(p,t.KEY.ARROW_RIGHT),g.set(h,t.KEY.ARROW_DOWN),g.set(m,t.KEY.DELETE),g.set(v,t.KEY.ESCAPE);var y=new Set;function b(e){var n=e.key;if(r.has(n))return n;var a=g.get(e.keyCode);return a||t.KEY.UNKNOWN}y.add(t.KEY.PAGE_UP),y.add(t.KEY.PAGE_DOWN),y.add(t.KEY.END),y.add(t.KEY.HOME),y.add(t.KEY.ARROW_LEFT),y.add(t.KEY.ARROW_UP),y.add(t.KEY.ARROW_RIGHT),y.add(t.KEY.ARROW_DOWN),t.normalizeKey=b,t.isNavigationEvent=function(e){return y.has(b(e))}},"./packages/mdc-dom/ponyfill.ts":function(e,t,n){"use strict";function r(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.closest=function(e,t){if(e.closest)return e.closest(t);for(var n=e;n;){if(r(n,t))return n;n=n.parentElement}return null},t.matches=r,t.estimateScrollWidth=function(e){var t=e;if(null!==t.offsetParent)return t.scrollWidth;var n=t.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);var r=n.scrollWidth;return document.documentElement.removeChild(n),r}}})},e.exports=t()},4935:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(8385),n(9933),n(4912)},8249:function(e,t,n){"use strict";n(5602),n(4935),n(3438)},5033:function(e,t,n){"use strict";n(3165),n(4935),n(4912)},6577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(8567)},5146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2361)},5397:function(e,t,n){"use strict";n(1865)},3438:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(9933),n(4912),n(535)},9933:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(445)},8897:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(7476)},881:function(e,t,n){"use strict";n(2727)},1093:function(e,t,n){"use strict";n(7308),n(3047),n(9933),n(4912)},1405:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(865)},4912:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(5638)},7292:function(e,t,n){"use strict";n(9333),n(8479),n(7895)},8959:function(e,t,n){"use strict";n(3343),n(5146),n(4912)},2924:function(e,t,n){"use strict";n(9070),n(6577),n(1405),n(8897),n(4912),n(9933)},3147:function(e,t,n){"use strict";n(2153),n(234)},9111:function(e,t,n){"use strict";n(6804)},9619:function(e,t,n){"use strict";n(539),n(3438),n(4912),n(9933)},8697:function(e,t,n){"use strict";n(6737)},9056:function(e,t,n){var r=function(){var e="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||"/index.js",function(t){function r(){return O.buffer!=G&&Y(O.buffer),q}function a(){return O.buffer!=G&&Y(O.buffer),K}function i(){return O.buffer!=G&&Y(O.buffer),X}function o(){return O.buffer!=G&&Y(O.buffer),Z}var s,u,c,l="undefined"!==typeof(t=t||{})?t:{};l.ready=new Promise((function(e,t){s=e,u=t})),"undefined"!==typeof process&&process.listeners&&(c={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var d,f,p,h,m,v,g=Object.assign({},l),y=[],b=function(e,t){throw t},x="object"===typeof window,A="function"===typeof importScripts,k="object"===typeof process&&"object"===typeof process.versions&&"string"===typeof process.versions.node,w=l.ENVIRONMENT_IS_PTHREAD||!1,S="";function I(e){return l.locateFile?l.locateFile(e,S):S+e}if(k){var E;S=A?n(2980).dirname(S)+"/":"//",v=function(){m||(h=n(7256),m=n(2980))},d=function(e,t){return v(),e=m.normalize(e),h.readFileSync(e,t?void 0:"utf8")},p=function(e){var t=d(e,!0);return t.buffer||(t=new Uint8Array(t)),t},f=function(e,t,n){v(),e=m.normalize(e),h.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),y=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ct))throw e})),process.on("unhandledRejection",(function(e){throw e})),b=function(e,t){if(re())throw process.exitCode=e,t;var n;(n=t)instanceof ct||_("exiting due to exception: "+n),process.exit(e)},l.inspect=function(){return"[Emscripten Module object]"};try{E=n(7958)}catch(ft){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),ft}n.g.Worker=E.Worker}else(x||A)&&(A?S=self.location.href:"undefined"!==typeof document&&document.currentScript&&(S=document.currentScript.src),"undefined"!==typeof e&&e&&(S=e),S=0!==S.indexOf("blob:")?S.substr(0,S.replace(/[?#].*/,"").lastIndexOf("/")+1):"",k||(d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},A&&(p=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}),function(e){return document.title=e});k&&"undefined"===typeof performance&&(n.g.performance=n(4862).performance);var C=console.log.bind(console),N=console.warn.bind(console);k&&(v(),C=function(e){return h.writeSync(1,e+"\n")},N=function(e){return h.writeSync(2,e+"\n")});var T=l.print||C,_=l.printErr||N;Object.assign(l,g),g=null,l.arguments&&(y=l.arguments),l.thisProgram&&l.thisProgram,l.quit&&(b=l.quit);function R(e){R.shown||(R.shown={}),R.shown[e]||(R.shown[e]=1,_(e))}var M;Atomics.load,Atomics.store,Atomics.compareExchange;l.wasmBinary&&(M=l.wasmBinary);var O,F,P=l.noExitRuntime||!0;"object"!==typeof WebAssembly&&ue("no native wasm support detected");var D,L=!1;function z(e){return l["_"+e]}function B(e,t,n,a,i){var o={string:function(e){var t=0;if(null!==e&&void 0!==e&&0!==e){var n=1+(e.length<<2);H(e,t=st(n),n)}return t},array:function(e){var t=st(e.length);return function(e,t){r().set(e,t)}(e,t),t}};var s=z(e),u=[],c=0;if(a)for(var l=0;l<a.length;l++){var d=o[n[l]];d?(0===c&&(c=it()),u[l]=d(a[l])):u[l]=a[l]}var f=s.apply(null,u);return f=function(e){return 0!==c&&ot(c),function(e){return"string"===t?U(e):"boolean"===t?Boolean(e):e}(e)}(f)}function W(e){var t=new TextDecoder(e);this.decode=function(e){return e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),t.decode.call(t,e)}}var j="undefined"!==typeof TextDecoder?new W("utf8"):void 0;function V(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&j)return j.decode(e.subarray(t,a));for(var i="";t<a;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var u=63&e[t++];if((o=224==(240&o)?(15&o)<<12|s<<6|u:(7&o)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(o);else{var c=o-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&o)<<6|s)}else i+=String.fromCharCode(o)}return i}function U(e,t){return e?V(a(),e,t):""}function H(e,t,n){return function(e,t,n,r){if(!(r>0))return 0;for(var a=n,i=n+r-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-a}(e,a(),t,n)}var G,q,K,X,Z;"undefined"!==typeof TextDecoder&&new W("utf-16le");function Y(e){G=e,l.HEAP8=q=new Int8Array(e),l.HEAP16=new Int16Array(e),l.HEAP32=X=new Int32Array(e),l.HEAPU8=K=new Uint8Array(e),l.HEAPU16=new Uint16Array(e),l.HEAPU32=new Uint32Array(e),l.HEAPF32=new Float32Array(e),l.HEAPF64=Z=new Float64Array(e)}w&&(G=l.buffer);var J,Q=l.INITIAL_MEMORY||16777216;if(w)O=l.wasmMemory,G=l.buffer;else if(l.wasmMemory)O=l.wasmMemory;else if(!((O=new WebAssembly.Memory({initial:Q/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw _("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),k&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");O&&(G=O.buffer),Q=G.byteLength,Y(G);var $=[],ee=[],te=[],ne=[];function re(){return P||!1}function ae(){!0,w||he(ee)}var ie=0,oe=null,se=null;function ue(e){w?postMessage({cmd:"onAbort",arg:e}):l.onAbort&&l.onAbort(e),_(e="Aborted("+e+")"),L=!0,D=1,e+=". Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw u(t),t}l.preloadedImages={},l.preloadedAudios={};var ce;function le(e){return e.startsWith("data:application/octet-stream;base64,")}function de(e){return e.startsWith("file://")}function fe(e){try{if(e==ce&&M)return new Uint8Array(M);if(p)return p(e);throw"both async and sync fetching of the wasm failed"}catch(_){ue(_)}}le(ce="tfjs-backend-wasm-threaded-simd.wasm")||(ce=I(ce));var pe={};function he(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"===typeof n?void 0===t.arg?ke(n)():ke(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(l)}}function me(e){var t=it(),n=e();return ot(t),n}function ve(e){var t=ye.pthreads[e];if(t){i()[e>>2]=0;var n=t.worker;ye.returnWorkerToPool(n)}}function ge(e){!function(e,t){if(D=e,!t&&w)throw be(e),"unwind";re()||w||(ye.terminateAllThreads(),!0);!function(e){D=e,re()||(ye.terminateAllThreads(),l.onExit&&l.onExit(e),L=!0);b(e,new ct(e))}(e)}(e)}var ye={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],init:function(){w?ye.initWorker():ye.initMainThread()},initMainThread:function(){for(var e=0;e<8;++e)ye.allocateUnusedWorker()},initWorker:function(){P=!1},pthreads:{},setExitStatus:function(e){D=e},terminateAllThreads:function(){for(var e in ye.pthreads){var t=ye.pthreads[e];t&&t.worker&&ye.returnWorkerToPool(t.worker)}for(var n=0;n<ye.unusedWorkers.length;++n){ye.unusedWorkers[n].terminate()}ye.unusedWorkers=[]},returnWorkerToPool:function(e){ye.runWithoutMainThreadQueuedCalls((function(){delete ye.pthreads[e.pthread.threadInfoStruct],ye.unusedWorkers.push(e),ye.runningWorkers.splice(ye.runningWorkers.indexOf(e),1),rt(e.pthread.threadInfoStruct),e.pthread=void 0}))},runWithoutMainThreadQueuedCalls:function(e){i()[ut>>2]=0;try{e()}finally{i()[ut>>2]=1}},receiveObjectTransfer:function(e){},threadInit:function(){for(var e in ye.tlsInitFunctions)ye.tlsInitFunctions[e]()},loadWasmModuleToWorker:function(t,n){t.onmessage=function(e){var r,a=e.data,o=a.cmd;if(t.pthread&&(ye.currentProxiedOperationCallerThread=t.pthread.threadInfoStruct),a.targetThread&&a.targetThread!=Je()){var s=ye.pthreads[a.targetThread];return s?s.worker.postMessage(a,a.transferList):_('Internal error! Worker sent a message "'+o+'" to target pthread '+a.targetThread+", but that thread no longer exists!"),void(ye.currentProxiedOperationCallerThread=void 0)}"processQueuedMainThreadWork"===o?Qe():"spawnThread"===o?Se(a):"cleanupThread"===o?ve(a.thread):"killThread"===o?function(e){i()[e>>2]=0;var t=ye.pthreads[e];delete ye.pthreads[e],t.worker.terminate(),rt(e),ye.runningWorkers.splice(ye.runningWorkers.indexOf(t.worker),1),t.worker.pthread=void 0}(a.thread):"cancelThread"===o?(r=a.thread,ye.pthreads[r].worker.postMessage({cmd:"cancel"})):"loaded"===o?(t.loaded=!0,n&&n(t),t.runPthread&&(t.runPthread(),delete t.runPthread)):"print"===o?T("Thread "+a.threadId+": "+a.text):"printErr"===o?_("Thread "+a.threadId+": "+a.text):"alert"===o?alert("Thread "+a.threadId+": "+a.text):"setimmediate"===a.target?t.postMessage(a):"onAbort"===o?l.onAbort&&l.onAbort(a.arg):_("worker sent an unknown command "+o),ye.currentProxiedOperationCallerThread=void 0},t.onerror=function(e){throw _("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},k&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:l.mainScriptUrlOrBlob||e,wasmMemory:O,wasmModule:F})},allocateUnusedWorker:function(){var e=I("tfjs-backend-wasm-threaded-simd.worker.js");ye.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return 0==ye.unusedWorkers.length&&(ye.allocateUnusedWorker(),ye.loadWasmModuleToWorker(ye.unusedWorkers[0])),ye.unusedWorkers.pop()}};function be(e){if(w)return Ee(1,0,e);try{ge(e)}catch(ft){!function(e){if(e instanceof ct||"unwind"==e)return D;b(1,e)}(ft)}}l.establishStackSpace=function(){var e=Je(),t=i()[e+44>>2],n=i()[e+48>>2];at(t,t-n),ot(t)};var xe,Ae=[];function ke(e){var t=Ae[e];return t||(e>=Ae.length&&(Ae.length=e+1),Ae[e]=t=J.get(e)),t}l.invokeEntryPoint=function(e,t){return ke(e)(t)},xe=k?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:w?function(){return performance.now()-l.__performance_now_clock_drift}:function(){return performance.now()};function we(e,t){var n,r;if(0===e)n=Date.now();else{if(1!==e&&4!==e)return r=28,i()[Ye()>>2]=r,-1;n=xe()}return i()[t>>2]=n/1e3|0,i()[t+4>>2]=n%1e3*1e3*1e3|0,0}function Se(e){var t=ye.getNewWorker();if(!t)return 6;ye.runningWorkers.push(t);var n=ye.pthreads[e.pthread_ptr]={worker:t,threadInfoStruct:e.pthread_ptr};t.pthread=n;var r={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr};return t.runPthread=function(){r.time=performance.now(),t.postMessage(r,e.transferList)},t.loaded&&(t.runPthread(),delete t.runPthread),0}function Ie(){return 2147483648}function Ee(e,t){var n=arguments.length-2,r=arguments;return me((function(){for(var a=n,i=st(8*a),s=i>>3,u=0;u<n;u++){var c=r[2+u];o()[s+u]=c}return tt(e,a,i,t)}))}var Ce=[];function Ne(e){try{return O.grow(e-G.byteLength+65535>>>16),Y(O.buffer),1}catch(ft){}}var Te={inEventHandler:0,removeAllEventListeners:function(){for(var e=Te.eventHandlers.length-1;e>=0;--e)Te._removeHandler(e);Te.eventHandlers=[],Te.deferredCalls=[]},registerRemoveEventListeners:function(){Te.removeEventListenersRegistered||(te.push(Te.removeAllEventListeners),Te.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,n){function r(e,t){if(e.length!=t.length)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0}for(var a in Te.deferredCalls){var i=Te.deferredCalls[a];if(i.targetFunction==e&&r(i.argsList,n))return}Te.deferredCalls.push({targetFunction:e,precedence:t,argsList:n}),Te.deferredCalls.sort((function(e,t){return e.precedence<t.precedence}))},removeDeferredCalls:function(e){for(var t=0;t<Te.deferredCalls.length;++t)Te.deferredCalls[t].targetFunction==e&&(Te.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return Te.inEventHandler&&Te.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(Te.canPerformEventHandlerRequests())for(var e=0;e<Te.deferredCalls.length;++e){var t=Te.deferredCalls[e];Te.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var n=0;n<Te.eventHandlers.length;++n)Te.eventHandlers[n].target!=e||t&&t!=Te.eventHandlers[n].eventTypeString||Te._removeHandler(n--)},_removeHandler:function(e){var t=Te.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),Te.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(t){++Te.inEventHandler,Te.currentEventHandler=e,Te.runDeferredCalls(),e.handlerFunc(t),Te.runDeferredCalls(),--Te.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),Te.eventHandlers.push(e),Te.registerRemoveEventListeners();else for(var n=0;n<Te.eventHandlers.length;++n)Te.eventHandlers[n].target==e.target&&Te.eventHandlers[n].eventTypeString==e.eventTypeString&&Te._removeHandler(n--)},queueEventHandlerOnThread_iiii:function(e,t,n,r,a){me((function(){var o=st(12);i()[o>>2]=n,i()[o+4>>2]=r,i()[o+8>>2]=a,nt(e,637534208,t,r,o)}))},getTargetThreadForEventCallback:function(e){switch(e){case 1:return 0;case 2:return ye.currentProxiedOperationCallerThread;default:return e}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function _e(e,t,n,r){me((function(){var a=st(12),o=0;t&&(o=function(e){var t=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}(e)+1,n=Xe(t);return H(e,n,t),n}(t)),i()[a>>2]=o,i()[a+4>>2]=n,i()[a+8>>2]=r,nt(e,657457152,0,o,a)}))}var Re=[0,"undefined"!==typeof document?document:0,"undefined"!==typeof window?window:0];function Me(e){var t;return e=(t=e)>2?U(t):t,Re[e]||("undefined"!==typeof document?document.querySelector(e):void 0)}function Oe(e){return Me(e)}function Fe(e,t,n){var r=Oe(e);if(!r)return-4;if(r.canvasSharedPtr&&(i()[r.canvasSharedPtr>>2]=t,i()[r.canvasSharedPtr+4>>2]=n),!r.offscreenCanvas&&r.controlTransferredOffscreen)return r.canvasSharedPtr?(function(e,t,n,r){_e(e,t=t?U(t):"",n,r)}(i()[r.canvasSharedPtr+8>>2],e,t,n),1):-4;r.offscreenCanvas&&(r=r.offscreenCanvas);var a=!1;if(r.GLctxObject&&r.GLctxObject.GLctx){var o=r.GLctxObject.GLctx.getParameter(2978);a=0===o[0]&&0===o[1]&&o[2]===r.width&&o[3]===r.height}return r.width=t,r.height=n,a&&r.GLctxObject.GLctx.viewport(0,0,t,n),0}function Pe(e,t,n){return w?Ee(2,1,e,t,n):Fe(e,t,n)}var De={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},queries:[],stringCache:{},unpackAlignment:4,recordError:function(e){De.lastError||(De.lastError=e)},getNewId:function(e){for(var t=De.counter++,n=e.length;n<t;n++)e[n]=null;return t},getSource:function(e,t,n,r){for(var a="",o=0;o<t;++o){var s=r?i()[r+4*o>>2]:-1;a+=U(i()[n+4*o>>2],s<0?void 0:s)}return a},createContext:function(e,t){e.getContextSafariWebGL2Fixed||(e.getContextSafariWebGL2Fixed=e.getContext,e.getContext=function(t,n){var r=e.getContextSafariWebGL2Fixed(t,n);return"webgl"==t==r instanceof WebGLRenderingContext?r:null});var n=e.getContext("webgl",t);return n?De.registerContext(n,t):0},registerContext:function(e,t){var n=Xe(8);i()[n+4>>2]=Je();var r={handle:n,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=r),De.contexts[n]=r,("undefined"===typeof t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&De.initExtensions(r),n},makeContextCurrent:function(e){return De.currentContext=De.contexts[e],l.ctx=ze=De.currentContext&&De.currentContext.GLctx,!(e&&!ze)},getContext:function(e){return De.contexts[e]},deleteContext:function(e){De.currentContext===De.contexts[e]&&(De.currentContext=null),"object"===typeof Te&&Te.removeAllHandlersOnTarget(De.contexts[e].GLctx.canvas),De.contexts[e]&&De.contexts[e].GLctx.canvas&&(De.contexts[e].GLctx.canvas.GLctxObject=void 0),Ze(De.contexts[e].handle),De.contexts[e]=null},initExtensions:function(e){if(e||(e=De.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t,n=e.GLctx;!function(e){var t=e.getExtension("ANGLE_instanced_arrays");if(t)e.vertexAttribDivisor=function(e,n){t.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,r,a){t.drawArraysInstancedANGLE(e,n,r,a)},e.drawElementsInstanced=function(e,n,r,a,i){t.drawElementsInstancedANGLE(e,n,r,a,i)}}(n),function(e){var t=e.getExtension("OES_vertex_array_object");if(t)e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)}}(n),function(e){var t=e.getExtension("WEBGL_draw_buffers");if(t)e.drawBuffers=function(e,n){t.drawBuffersWEBGL(e,n)}}(n),n.disjointTimerQueryExt=n.getExtension("EXT_disjoint_timer_query"),(t=n).multiDrawWebgl=t.getExtension("WEBGL_multi_draw"),(n.getSupportedExtensions()||[]).forEach((function(e){e.includes("lose_context")||e.includes("debug")||n.getExtension(e)}))}}},Le=["default","low-power","high-performance"];var ze,Be={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=Be.buffers[e];0===t||10===t?((1===e?T:_)(V(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return Be.varargs+=4,i()[Be.varargs-4>>2]},getStr:function(e){return U(e)},get64:function(e,t){return e}};function We(e){return w?Ee(3,1,e):0}function je(e,t,n,r,a){if(w)return Ee(4,1,e,t,n,r,a)}function Ve(e,t,n,r){if(w)return Ee(5,1,e,t,n,r);for(var o=0,s=0;s<n;s++){var u=i()[t>>2],c=i()[t+4>>2];t+=8;for(var l=0;l<c;l++)Be.printChar(e,a()[u+l]);o+=c}return i()[r>>2]=o,0}ye.init();var Ue,He,Ge,qe=[null,be,Pe,We,je,Ve],Ke={__clock_gettime:function(e,t){return we(e,t)},__emscripten_init_main_thread_js:function(e){$e(e,!A,1,!x),ye.threadInit()},__emscripten_thread_cleanup:function(e){w?postMessage({cmd:"cleanupThread",thread:e}):ve(e)},__pthread_create_js:function(e,t,n,r){if("undefined"===typeof SharedArrayBuffer)return _("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];if(w&&0===a.length)return et(687865856,e,t,n,r);var i={startRoutine:n,pthread_ptr:e,arg:r,transferList:a};return w?(i.cmd="spawnThread",postMessage(i,a),0):Se(i)},_emscripten_default_pthread_stack_size:function(){return 2097152},_emscripten_notify_thread_queue:function(e,t){if(e==t)postMessage({cmd:"processQueuedMainThreadWork"});else if(w)postMessage({targetThread:e,cmd:"processThreadQueue"});else{var n=ye.pthreads[e],r=n&&n.worker;if(!r)return;r.postMessage({cmd:"processThreadQueue"})}return 1},abort:function(){ue("")},emscripten_check_blocking_allowed:function(){k||A||R("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},emscripten_get_heap_max:Ie,emscripten_get_now:xe,emscripten_memcpy_big:function(e,t,n){a().copyWithin(e,t,t+n)},emscripten_num_logical_cores:function(){return k?n(2578).cpus().length:navigator.hardwareConcurrency},emscripten_receive_on_main_thread_js:function(e,t,n){Ce.length=t;for(var r=n>>3,a=0;a<t;a++)Ce[a]=o()[r+a];return(e<0?pe[-e-1]:qe[e]).apply(null,Ce)},emscripten_resize_heap:function(e){var t=a().length;if((e>>>=0)<=t)return!1;var n,r,i=2147483648;if(e>i)return!1;for(var o=1;o<=4;o*=2){var s=t*(1+.2/o);if(s=Math.min(s,e+100663296),Ne(Math.min(i,((n=Math.max(e,s))%(r=65536)>0&&(n+=r-n%r),n))))return!0}return!1},emscripten_set_canvas_element_size:function(e,t,n){return Oe(e)?Fe(e,t,n):Pe(e,t,n)},emscripten_unwind_to_js_event_loop:function(){throw"unwind"},emscripten_webgl_create_context:function(e,t){return function(e,t){var n=t>>2,r=i()[n+6],a={alpha:!!i()[n+0],depth:!!i()[n+1],stencil:!!i()[n+2],antialias:!!i()[n+3],premultipliedAlpha:!!i()[n+4],preserveDrawingBuffer:!!i()[n+5],powerPreference:Le[r],failIfMajorPerformanceCaveat:!!i()[n+7],majorVersion:i()[n+8],minorVersion:i()[n+9],enableExtensionsByDefault:i()[n+10],explicitSwapControl:i()[n+11],proxyContextToMainThread:i()[n+12],renderViaOffscreenBackBuffer:i()[n+13]},o=Oe(e);return o?a.explicitSwapControl?0:De.createContext(o,a):0}(e,t)},exit:ge,fd_close:We,fd_seek:je,fd_write:Ve,memory:O||l.wasmMemory,setTempRet0:function(e){e}},Xe=(function(){var e={env:Ke,wasi_snapshot_preview1:Ke};function t(e,t){var n,r,a=e.exports;if(l.asm=a,n=l.asm.emscripten_tls_init,ye.tlsInitFunctions.push(n),J=l.asm.__indirect_function_table,r=l.asm.__wasm_call_ctors,ee.unshift(r),F=t,!w){var i=ye.unusedWorkers.length;ye.unusedWorkers.forEach((function(e){ye.loadWasmModuleToWorker(e,(function(){--i||function(e){if(ie--,l.monitorRunDependencies&&l.monitorRunDependencies(ie),0==ie&&(null!==oe&&(clearInterval(oe),oe=null),se)){var t=se;se=null,t()}}()}))}))}}function n(e){t(e.instance,e.module)}function r(t){return function(){if(!M&&(x||A)){if("function"===typeof fetch&&!de(ce))return fetch(ce,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ce+"'";return e.arrayBuffer()})).catch((function(){return fe(ce)}));if(f)return new Promise((function(e,t){f(ce,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return fe(ce)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){_("failed to asynchronously prepare wasm: "+e),ue(e)}))}if(w||(ie++,l.monitorRunDependencies&&l.monitorRunDependencies(ie)),l.instantiateWasm)try{return l.instantiateWasm(e,t)}catch(ft){return _("Module.instantiateWasm callback failed with error: "+ft),!1}(M||"function"!==typeof WebAssembly.instantiateStreaming||le(ce)||de(ce)||"function"!==typeof fetch?r(n):fetch(ce,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return _("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(u)}(),l.___wasm_call_ctors=function(){return(l.___wasm_call_ctors=l.asm.__wasm_call_ctors).apply(null,arguments)},l._init=function(){return(l._init=l.asm.init).apply(null,arguments)},l._init_with_threads_count=function(){return(l._init_with_threads_count=l.asm.init_with_threads_count).apply(null,arguments)},l._get_threads_count=function(){return(l._get_threads_count=l.asm.get_threads_count).apply(null,arguments)},l._register_tensor=function(){return(l._register_tensor=l.asm.register_tensor).apply(null,arguments)},l._dispose_data=function(){return(l._dispose_data=l.asm.dispose_data).apply(null,arguments)},l._dispose=function(){return(l._dispose=l.asm.dispose).apply(null,arguments)},l._Abs=function(){return(l._Abs=l.asm.Abs).apply(null,arguments)},l._Add=function(){return(l._Add=l.asm.Add).apply(null,arguments)},l._AddN=function(){return(l._AddN=l.asm.AddN).apply(null,arguments)},l._All=function(){return(l._All=l.asm.All).apply(null,arguments)},l._Any=function(){return(l._Any=l.asm.Any).apply(null,arguments)},l._ArgMax=function(){return(l._ArgMax=l.asm.ArgMax).apply(null,arguments)},l._AvgPool=function(){return(l._AvgPool=l.asm.AvgPool).apply(null,arguments)},l._BatchMatMul=function(){return(l._BatchMatMul=l.asm.BatchMatMul).apply(null,arguments)},l._Ceil=function(){return(l._Ceil=l.asm.Ceil).apply(null,arguments)},l._ClipByValue=function(){return(l._ClipByValue=l.asm.ClipByValue).apply(null,arguments)},l._Conv2D=function(){return(l._Conv2D=l.asm.Conv2D).apply(null,arguments)},l._Conv2DBackpropInput=function(){return(l._Conv2DBackpropInput=l.asm.Conv2DBackpropInput).apply(null,arguments)},l._Cos=function(){return(l._Cos=l.asm.Cos).apply(null,arguments)},l._Cosh=function(){return(l._Cosh=l.asm.Cosh).apply(null,arguments)},l._CropAndResize=function(){return(l._CropAndResize=l.asm.CropAndResize).apply(null,arguments)},l._Cumprod=function(){return(l._Cumprod=l.asm.Cumprod).apply(null,arguments)},l._Cumsum=function(){return(l._Cumsum=l.asm.Cumsum).apply(null,arguments)},l._DepthToSpace=function(){return(l._DepthToSpace=l.asm.DepthToSpace).apply(null,arguments)},l._DepthwiseConv2dNative=function(){return(l._DepthwiseConv2dNative=l.asm.DepthwiseConv2dNative).apply(null,arguments)},l._Elu=function(){return(l._Elu=l.asm.Elu).apply(null,arguments)},l._Equal=function(){return(l._Equal=l.asm.Equal).apply(null,arguments)},l._Exp=function(){return(l._Exp=l.asm.Exp).apply(null,arguments)},l._FlipLeftRight=function(){return(l._FlipLeftRight=l.asm.FlipLeftRight).apply(null,arguments)},l._Floor=function(){return(l._Floor=l.asm.Floor).apply(null,arguments)},l._FloorDiv=function(){return(l._FloorDiv=l.asm.FloorDiv).apply(null,arguments)},l._FusedBatchNorm=function(){return(l._FusedBatchNorm=l.asm.FusedBatchNorm).apply(null,arguments)},l._FusedConv2D=function(){return(l._FusedConv2D=l.asm.FusedConv2D).apply(null,arguments)},l._FusedDepthwiseConv2D=function(){return(l._FusedDepthwiseConv2D=l.asm.FusedDepthwiseConv2D).apply(null,arguments)},l._Gather=function(){return(l._Gather=l.asm.Gather).apply(null,arguments)},l._GatherNd=function(){return(l._GatherNd=l.asm.GatherNd).apply(null,arguments)},l._Greater=function(){return(l._Greater=l.asm.Greater).apply(null,arguments)},l._GreaterEqual=function(){return(l._GreaterEqual=l.asm.GreaterEqual).apply(null,arguments)},l._LeakyRelu=function(){return(l._LeakyRelu=l.asm.LeakyRelu).apply(null,arguments)},l._Less=function(){return(l._Less=l.asm.Less).apply(null,arguments)},l._LessEqual=function(){return(l._LessEqual=l.asm.LessEqual).apply(null,arguments)},l._Log=function(){return(l._Log=l.asm.Log).apply(null,arguments)},l._LogicalAnd=function(){return(l._LogicalAnd=l.asm.LogicalAnd).apply(null,arguments)},l._Max=function(){return(l._Max=l.asm.Max).apply(null,arguments)},l._MaxPool=function(){return(l._MaxPool=l.asm.MaxPool).apply(null,arguments)},l._Maximum=function(){return(l._Maximum=l.asm.Maximum).apply(null,arguments)},l._Mean=function(){return(l._Mean=l.asm.Mean).apply(null,arguments)},l._Min=function(){return(l._Min=l.asm.Min).apply(null,arguments)},l._Minimum=function(){return(l._Minimum=l.asm.Minimum).apply(null,arguments)},l._MirrorPad=function(){return(l._MirrorPad=l.asm.MirrorPad).apply(null,arguments)},l._Multiply=function(){return(l._Multiply=l.asm.Multiply).apply(null,arguments)},l._Neg=function(){return(l._Neg=l.asm.Neg).apply(null,arguments)},l._NonMaxSuppressionV3=function(){return(l._NonMaxSuppressionV3=l.asm.NonMaxSuppressionV3).apply(null,arguments)},l._NonMaxSuppressionV4=function(){return(l._NonMaxSuppressionV4=l.asm.NonMaxSuppressionV4).apply(null,arguments)},l._NonMaxSuppressionV5=function(){return(l._NonMaxSuppressionV5=l.asm.NonMaxSuppressionV5).apply(null,arguments)},l._NotEqual=function(){return(l._NotEqual=l.asm.NotEqual).apply(null,arguments)},l._OneHot=function(){return(l._OneHot=l.asm.OneHot).apply(null,arguments)},l._PadV2=function(){return(l._PadV2=l.asm.PadV2).apply(null,arguments)},l._Pow=function(){return(l._Pow=l.asm.Pow).apply(null,arguments)},l._Prelu=function(){return(l._Prelu=l.asm.Prelu).apply(null,arguments)},l._Prod=function(){return(l._Prod=l.asm.Prod).apply(null,arguments)},l._RealDiv=function(){return(l._RealDiv=l.asm.RealDiv).apply(null,arguments)},l._Relu=function(){return(l._Relu=l.asm.Relu).apply(null,arguments)},l._Relu6=function(){return(l._Relu6=l.asm.Relu6).apply(null,arguments)},l._ResizeBilinear=function(){return(l._ResizeBilinear=l.asm.ResizeBilinear).apply(null,arguments)},l._Reverse=function(){return(l._Reverse=l.asm.Reverse).apply(null,arguments)},l._RotateWithOffset=function(){return(l._RotateWithOffset=l.asm.RotateWithOffset).apply(null,arguments)},l._Round=function(){return(l._Round=l.asm.Round).apply(null,arguments)},l._Rsqrt=function(){return(l._Rsqrt=l.asm.Rsqrt).apply(null,arguments)},l._ScatterNd=function(){return(l._ScatterNd=l.asm.ScatterNd).apply(null,arguments)},l._SelectV2=function(){return(l._SelectV2=l.asm.SelectV2).apply(null,arguments)},l._Sigmoid=function(){return(l._Sigmoid=l.asm.Sigmoid).apply(null,arguments)},l._Sin=function(){return(l._Sin=l.asm.Sin).apply(null,arguments)},l._Softmax=function(){return(l._Softmax=l.asm.Softmax).apply(null,arguments)},l._SparseFillEmptyRows=function(){return(l._SparseFillEmptyRows=l.asm.SparseFillEmptyRows).apply(null,arguments)},l._SparseReshape=function(){return(l._SparseReshape=l.asm.SparseReshape).apply(null,arguments)},l._SparseSegmentReduction=function(){return(l._SparseSegmentReduction=l.asm.SparseSegmentReduction).apply(null,arguments)},l._Sqrt=function(){return(l._Sqrt=l.asm.Sqrt).apply(null,arguments)},l._Square=function(){return(l._Square=l.asm.Square).apply(null,arguments)},l._SquaredDifference=function(){return(l._SquaredDifference=l.asm.SquaredDifference).apply(null,arguments)},l._Step=function(){return(l._Step=l.asm.Step).apply(null,arguments)},l._StridedSlice=function(){return(l._StridedSlice=l.asm.StridedSlice).apply(null,arguments)},l._Sub=function(){return(l._Sub=l.asm.Sub).apply(null,arguments)},l._Sum=function(){return(l._Sum=l.asm.Sum).apply(null,arguments)},l._Tan=function(){return(l._Tan=l.asm.Tan).apply(null,arguments)},l._Tanh=function(){return(l._Tanh=l.asm.Tanh).apply(null,arguments)},l._Tile=function(){return(l._Tile=l.asm.Tile).apply(null,arguments)},l._TopK=function(){return(l._TopK=l.asm.TopK).apply(null,arguments)},l._Transform=function(){return(l._Transform=l.asm.Transform).apply(null,arguments)},l._Transpose=function(){return(l._Transpose=l.asm.Transpose).apply(null,arguments)},l.__FusedMatMul=function(){return(l.__FusedMatMul=l.asm._FusedMatMul).apply(null,arguments)},l._malloc=function(){return(Xe=l._malloc=l.asm.malloc).apply(null,arguments)}),Ze=l._free=function(){return(Ze=l._free=l.asm.free).apply(null,arguments)},Ye=(l._emscripten_tls_init=function(){return(l._emscripten_tls_init=l.asm.emscripten_tls_init).apply(null,arguments)},l.___errno_location=function(){return(Ye=l.___errno_location=l.asm.__errno_location).apply(null,arguments)}),Je=l._pthread_self=function(){return(Je=l._pthread_self=l.asm.pthread_self).apply(null,arguments)},Qe=l._emscripten_main_thread_process_queued_calls=function(){return(Qe=l._emscripten_main_thread_process_queued_calls=l.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},$e=(l.__emscripten_thread_crashed=function(){return(l.__emscripten_thread_crashed=l.asm._emscripten_thread_crashed).apply(null,arguments)},l.__emscripten_thread_init=function(){return($e=l.__emscripten_thread_init=l.asm._emscripten_thread_init).apply(null,arguments)}),et=(l._emscripten_current_thread_process_queued_calls=function(){return(l._emscripten_current_thread_process_queued_calls=l.asm.emscripten_current_thread_process_queued_calls).apply(null,arguments)},l._emscripten_main_browser_thread_id=function(){return(l._emscripten_main_browser_thread_id=l.asm.emscripten_main_browser_thread_id).apply(null,arguments)},l._emscripten_sync_run_in_main_thread_2=function(){return(l._emscripten_sync_run_in_main_thread_2=l.asm.emscripten_sync_run_in_main_thread_2).apply(null,arguments)},l._emscripten_sync_run_in_main_thread_4=function(){return(et=l._emscripten_sync_run_in_main_thread_4=l.asm.emscripten_sync_run_in_main_thread_4).apply(null,arguments)}),tt=l._emscripten_run_in_main_runtime_thread_js=function(){return(tt=l._emscripten_run_in_main_runtime_thread_js=l.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)},nt=l._emscripten_dispatch_to_thread_=function(){return(nt=l._emscripten_dispatch_to_thread_=l.asm.emscripten_dispatch_to_thread_).apply(null,arguments)},rt=l.__emscripten_thread_free_data=function(){return(rt=l.__emscripten_thread_free_data=l.asm._emscripten_thread_free_data).apply(null,arguments)},at=(l.__emscripten_thread_exit=function(){return(l.__emscripten_thread_exit=l.asm._emscripten_thread_exit).apply(null,arguments)},l._memalign=function(){return(l._memalign=l.asm.memalign).apply(null,arguments)},l._emscripten_stack_set_limits=function(){return(at=l._emscripten_stack_set_limits=l.asm.emscripten_stack_set_limits).apply(null,arguments)}),it=l.stackSave=function(){return(it=l.stackSave=l.asm.stackSave).apply(null,arguments)},ot=l.stackRestore=function(){return(ot=l.stackRestore=l.asm.stackRestore).apply(null,arguments)},st=l.stackAlloc=function(){return(st=l.stackAlloc=l.asm.stackAlloc).apply(null,arguments)},ut=(l.dynCall_iijjiiii=function(){return(l.dynCall_iijjiiii=l.asm.dynCall_iijjiiii).apply(null,arguments)},l.dynCall_jiji=function(){return(l.dynCall_jiji=l.asm.dynCall_jiji).apply(null,arguments)},l.__emscripten_allow_main_runtime_queued_calls=21464);function ct(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function lt(e){if(e=e||y,!(ie>0)){if(w)return s(l),ae(),void postMessage({cmd:"loaded"});!function(){if(l.preRun)for("function"==typeof l.preRun&&(l.preRun=[l.preRun]);l.preRun.length;)e=l.preRun.shift(),$.unshift(e);var e;he($)}(),ie>0||(l.setStatus?(l.setStatus("Running..."),setTimeout((function(){setTimeout((function(){l.setStatus("")}),1),t()}),1)):t())}function t(){Ue||(Ue=!0,l.calledRun=!0,L||(ae(),s(l),l.onRuntimeInitialized&&l.onRuntimeInitialized(),function(){if(!w){if(l.postRun)for("function"==typeof l.postRun&&(l.postRun=[l.postRun]);l.postRun.length;)e=l.postRun.shift(),ne.unshift(e);var e;he(ne)}}()))}}if(l.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?z(e):function(){return B(e,t,n,arguments)}},l.keepRuntimeAlive=re,l.PThread=ye,l.PThread=ye,l.wasmMemory=O,l.ExitStatus=ct,se=function e(){Ue||lt(),Ue||(se=e)},l.run=lt,l.preInit)for("function"==typeof l.preInit&&(l.preInit=[l.preInit]);l.preInit.length>0;)l.preInit.pop()();if(lt(),c&&(He={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!c.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!c.unhandledRejection.indexOf(e)>-1}))}),"undefined"!==typeof WasmBackendModule)Ge=WasmBackendModule;else{if("undefined"===typeof t)throw new Error("Could not find wasm module in post.js");Ge=t}if(He){var dt=Ge._dispose;Ge._dispose=function(){dt(),He.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),He.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return t.ready}}();e.exports=r},136:function(e,t,n){var r=function(){var e="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||"/index.js",function(t){var r,a,i,o="undefined"!==typeof(t=t||{})?t:{};o.ready=new Promise((function(e,t){r=e,a=t})),"undefined"!==typeof process&&process.listeners&&(i={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var s,u,c,l,d,f,p=Object.assign({},o),h=[],m="object"===typeof window,v="function"===typeof importScripts,g="object"===typeof process&&"object"===typeof process.versions&&"string"===typeof process.versions.node,y="";g?(y=v?n(2980).dirname(y)+"/":"//",f=function(){d||(l=n(7256),d=n(2980))},s=function(e,t){return f(),e=d.normalize(e),l.readFileSync(e,t?void 0:"utf8")},c=function(e){var t=s(e,!0);return t.buffer||(t=new Uint8Array(t)),t},u=function(e,t,n){f(),e=d.normalize(e),l.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),h=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ue))throw e})),process.on("unhandledRejection",(function(e){throw e})),function(e,t){if(B())throw process.exitCode=e,t;var n;(n=t)instanceof ue||x("exiting due to exception: "+n),process.exit(e)},o.inspect=function(){return"[Emscripten Module object]"}):(m||v)&&(v?y=self.location.href:"undefined"!==typeof document&&document.currentScript&&(y=document.currentScript.src),e&&(y=e),y=0!==y.indexOf("blob:")?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",s=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},v&&(c=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),u=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var b=o.print||console.log.bind(console),x=o.printErr||console.warn.bind(console);Object.assign(o,p),p=null,o.arguments&&(h=o.arguments),o.thisProgram&&o.thisProgram,o.quit&&o.quit;var A;o.wasmBinary&&(A=o.wasmBinary);var k,w=o.noExitRuntime||!0;"object"!==typeof WebAssembly&&U("no native wasm support detected");var S=!1;function I(e){return o["_"+e]}function E(e,t,n,r,a){var i={string:function(e){var t=0;if(null!==e&&void 0!==e&&0!==e){var n=1+(e.length<<2);(function(e,t,n){(function(e,t,n,r){if(!(r>0))return 0;for(var a=n,i=n+r-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o);if(s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}t[n]=0})(e,M,t,n)})(e,t=se(n),n)}return t},array:function(e){var t=se(e.length);return function(e,t){R.set(e,t)}(e,t),t}};var o=I(e),s=[],u=0;if(r)for(var c=0;c<r.length;c++){var l=i[n[c]];l?(0===u&&(u=ie()),s[c]=l(r[c])):s[c]=r[c]}var d=o.apply(null,s);return d=function(e){return 0!==u&&oe(u),function(e){return"string"===t?T(e):"boolean"===t?Boolean(e):e}(e)}(d)}var C="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function N(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&C)return C.decode(e.subarray(t,a));for(var i="";t<a;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var u=63&e[t++];if((o=224==(240&o)?(15&o)<<12|s<<6|u:(7&o)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(o);else{var c=o-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&o)<<6|s)}else i+=String.fromCharCode(o)}return i}function T(e,t){return e?N(M,e,t):""}var _,R,M,O;"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");function F(e){_=e,o.HEAP8=R=new Int8Array(e),o.HEAP16=new Int16Array(e),o.HEAP32=O=new Int32Array(e),o.HEAPU8=M=new Uint8Array(e),o.HEAPU16=new Uint16Array(e),o.HEAPU32=new Uint32Array(e),o.HEAPF32=new Float32Array(e),o.HEAPF64=new Float64Array(e)}o.INITIAL_MEMORY;var P,D=[],L=[],z=[];function B(){return w||!1}var W=0,j=null,V=null;function U(e){o.onAbort&&o.onAbort(e),x(e="Aborted("+e+")"),S=!0,1,e+=". Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw a(t),t}o.preloadedImages={},o.preloadedAudios={};var H,G;function q(e){return e.startsWith("data:application/octet-stream;base64,")}function K(e){return e.startsWith("file://")}function X(e){try{if(e==H&&A)return new Uint8Array(A);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}catch(x){U(x)}}function Z(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"===typeof n?void 0===t.arg?J(n)():J(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(o)}}q(H="tfjs-backend-wasm.wasm")||(G=H,H=o.locateFile?o.locateFile(G,y):y+G);var Y=[];function J(e){var t=Y[e];return t||(e>=Y.length&&(Y.length=e+1),Y[e]=t=P.get(e)),t}function Q(){return 2147483648}function $(e){try{return k.grow(e-_.byteLength+65535>>>16),F(k.buffer),1}catch(t){}}var ee={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=ee.buffers[e];0===t||10===t?((1===e?b:x)(N(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return ee.varargs+=4,O[ee.varargs-4>>2]},getStr:function(e){return T(e)},get64:function(e,t){return e}};var te,ne,re,ae={abort:function(){U("")},emscripten_get_heap_max:Q,emscripten_memcpy_big:function(e,t,n){M.copyWithin(e,t,t+n)},emscripten_resize_heap:function(e){var t,n,r=M.length,a=2147483648;if((e>>>=0)>a)return!1;for(var i=1;i<=4;i*=2){var o=r*(1+.2/i);if(o=Math.min(o,e+100663296),$(Math.min(a,((t=Math.max(e,o))%(n=65536)>0&&(t+=n-t%n),t))))return!0}return!1},fd_close:function(e){return 0},fd_seek:function(e,t,n,r,a){},fd_write:function(e,t,n,r){for(var a=0,i=0;i<n;i++){var o=O[t>>2],s=O[t+4>>2];t+=8;for(var u=0;u<s;u++)ee.printChar(e,M[o+u]);a+=s}return O[r>>2]=a,0},setTempRet0:function(e){e}},ie=(function(){var e={env:ae,wasi_snapshot_preview1:ae};function t(e,t){var n,r=e.exports;o.asm=r,F((k=o.asm.memory).buffer),P=o.asm.__indirect_function_table,n=o.asm.__wasm_call_ctors,L.unshift(n),function(e){if(W--,o.monitorRunDependencies&&o.monitorRunDependencies(W),0==W&&(null!==j&&(clearInterval(j),j=null),V)){var t=V;V=null,t()}}()}function n(e){t(e.instance)}function r(t){return function(){if(!A&&(m||v)){if("function"===typeof fetch&&!K(H))return fetch(H,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+H+"'";return e.arrayBuffer()})).catch((function(){return X(H)}));if(u)return new Promise((function(e,t){u(H,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return X(H)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){x("failed to asynchronously prepare wasm: "+e),U(e)}))}if(W++,o.monitorRunDependencies&&o.monitorRunDependencies(W),o.instantiateWasm)try{return o.instantiateWasm(e,t)}catch(i){return x("Module.instantiateWasm callback failed with error: "+i),!1}(A||"function"!==typeof WebAssembly.instantiateStreaming||q(H)||K(H)||"function"!==typeof fetch?r(n):fetch(H,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return x("wasm streaming compile failed: "+e),x("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),o.___wasm_call_ctors=function(){return(o.___wasm_call_ctors=o.asm.__wasm_call_ctors).apply(null,arguments)},o._init=function(){return(o._init=o.asm.init).apply(null,arguments)},o._init_with_threads_count=function(){return(o._init_with_threads_count=o.asm.init_with_threads_count).apply(null,arguments)},o._get_threads_count=function(){return(o._get_threads_count=o.asm.get_threads_count).apply(null,arguments)},o._register_tensor=function(){return(o._register_tensor=o.asm.register_tensor).apply(null,arguments)},o._dispose_data=function(){return(o._dispose_data=o.asm.dispose_data).apply(null,arguments)},o._dispose=function(){return(o._dispose=o.asm.dispose).apply(null,arguments)},o._Abs=function(){return(o._Abs=o.asm.Abs).apply(null,arguments)},o._Add=function(){return(o._Add=o.asm.Add).apply(null,arguments)},o._AddN=function(){return(o._AddN=o.asm.AddN).apply(null,arguments)},o._All=function(){return(o._All=o.asm.All).apply(null,arguments)},o._Any=function(){return(o._Any=o.asm.Any).apply(null,arguments)},o._ArgMax=function(){return(o._ArgMax=o.asm.ArgMax).apply(null,arguments)},o._AvgPool=function(){return(o._AvgPool=o.asm.AvgPool).apply(null,arguments)},o._BatchMatMul=function(){return(o._BatchMatMul=o.asm.BatchMatMul).apply(null,arguments)},o._Ceil=function(){return(o._Ceil=o.asm.Ceil).apply(null,arguments)},o._ClipByValue=function(){return(o._ClipByValue=o.asm.ClipByValue).apply(null,arguments)},o._Conv2D=function(){return(o._Conv2D=o.asm.Conv2D).apply(null,arguments)},o._Conv2DBackpropInput=function(){return(o._Conv2DBackpropInput=o.asm.Conv2DBackpropInput).apply(null,arguments)},o._Cos=function(){return(o._Cos=o.asm.Cos).apply(null,arguments)},o._Cosh=function(){return(o._Cosh=o.asm.Cosh).apply(null,arguments)},o._CropAndResize=function(){return(o._CropAndResize=o.asm.CropAndResize).apply(null,arguments)},o._Cumprod=function(){return(o._Cumprod=o.asm.Cumprod).apply(null,arguments)},o._Cumsum=function(){return(o._Cumsum=o.asm.Cumsum).apply(null,arguments)},o._DepthToSpace=function(){return(o._DepthToSpace=o.asm.DepthToSpace).apply(null,arguments)},o._DepthwiseConv2dNative=function(){return(o._DepthwiseConv2dNative=o.asm.DepthwiseConv2dNative).apply(null,arguments)},o._Elu=function(){return(o._Elu=o.asm.Elu).apply(null,arguments)},o._Equal=function(){return(o._Equal=o.asm.Equal).apply(null,arguments)},o._Exp=function(){return(o._Exp=o.asm.Exp).apply(null,arguments)},o._FlipLeftRight=function(){return(o._FlipLeftRight=o.asm.FlipLeftRight).apply(null,arguments)},o._Floor=function(){return(o._Floor=o.asm.Floor).apply(null,arguments)},o._FloorDiv=function(){return(o._FloorDiv=o.asm.FloorDiv).apply(null,arguments)},o._FusedBatchNorm=function(){return(o._FusedBatchNorm=o.asm.FusedBatchNorm).apply(null,arguments)},o._FusedConv2D=function(){return(o._FusedConv2D=o.asm.FusedConv2D).apply(null,arguments)},o._FusedDepthwiseConv2D=function(){return(o._FusedDepthwiseConv2D=o.asm.FusedDepthwiseConv2D).apply(null,arguments)},o._Gather=function(){return(o._Gather=o.asm.Gather).apply(null,arguments)},o._GatherNd=function(){return(o._GatherNd=o.asm.GatherNd).apply(null,arguments)},o._Greater=function(){return(o._Greater=o.asm.Greater).apply(null,arguments)},o._GreaterEqual=function(){return(o._GreaterEqual=o.asm.GreaterEqual).apply(null,arguments)},o._LeakyRelu=function(){return(o._LeakyRelu=o.asm.LeakyRelu).apply(null,arguments)},o._Less=function(){return(o._Less=o.asm.Less).apply(null,arguments)},o._LessEqual=function(){return(o._LessEqual=o.asm.LessEqual).apply(null,arguments)},o._Log=function(){return(o._Log=o.asm.Log).apply(null,arguments)},o._LogicalAnd=function(){return(o._LogicalAnd=o.asm.LogicalAnd).apply(null,arguments)},o._Max=function(){return(o._Max=o.asm.Max).apply(null,arguments)},o._MaxPool=function(){return(o._MaxPool=o.asm.MaxPool).apply(null,arguments)},o._Maximum=function(){return(o._Maximum=o.asm.Maximum).apply(null,arguments)},o._Mean=function(){return(o._Mean=o.asm.Mean).apply(null,arguments)},o._Min=function(){return(o._Min=o.asm.Min).apply(null,arguments)},o._Minimum=function(){return(o._Minimum=o.asm.Minimum).apply(null,arguments)},o._MirrorPad=function(){return(o._MirrorPad=o.asm.MirrorPad).apply(null,arguments)},o._Multiply=function(){return(o._Multiply=o.asm.Multiply).apply(null,arguments)},o._Neg=function(){return(o._Neg=o.asm.Neg).apply(null,arguments)},o._NonMaxSuppressionV3=function(){return(o._NonMaxSuppressionV3=o.asm.NonMaxSuppressionV3).apply(null,arguments)},o._NonMaxSuppressionV4=function(){return(o._NonMaxSuppressionV4=o.asm.NonMaxSuppressionV4).apply(null,arguments)},o._NonMaxSuppressionV5=function(){return(o._NonMaxSuppressionV5=o.asm.NonMaxSuppressionV5).apply(null,arguments)},o._NotEqual=function(){return(o._NotEqual=o.asm.NotEqual).apply(null,arguments)},o._OneHot=function(){return(o._OneHot=o.asm.OneHot).apply(null,arguments)},o._PadV2=function(){return(o._PadV2=o.asm.PadV2).apply(null,arguments)},o._Pow=function(){return(o._Pow=o.asm.Pow).apply(null,arguments)},o._Prelu=function(){return(o._Prelu=o.asm.Prelu).apply(null,arguments)},o._Prod=function(){return(o._Prod=o.asm.Prod).apply(null,arguments)},o._RealDiv=function(){return(o._RealDiv=o.asm.RealDiv).apply(null,arguments)},o._Relu=function(){return(o._Relu=o.asm.Relu).apply(null,arguments)},o._Relu6=function(){return(o._Relu6=o.asm.Relu6).apply(null,arguments)},o._ResizeBilinear=function(){return(o._ResizeBilinear=o.asm.ResizeBilinear).apply(null,arguments)},o._Reverse=function(){return(o._Reverse=o.asm.Reverse).apply(null,arguments)},o._RotateWithOffset=function(){return(o._RotateWithOffset=o.asm.RotateWithOffset).apply(null,arguments)},o._Round=function(){return(o._Round=o.asm.Round).apply(null,arguments)},o._Rsqrt=function(){return(o._Rsqrt=o.asm.Rsqrt).apply(null,arguments)},o._ScatterNd=function(){return(o._ScatterNd=o.asm.ScatterNd).apply(null,arguments)},o._SelectV2=function(){return(o._SelectV2=o.asm.SelectV2).apply(null,arguments)},o._Sigmoid=function(){return(o._Sigmoid=o.asm.Sigmoid).apply(null,arguments)},o._Sin=function(){return(o._Sin=o.asm.Sin).apply(null,arguments)},o._Softmax=function(){return(o._Softmax=o.asm.Softmax).apply(null,arguments)},o._SparseFillEmptyRows=function(){return(o._SparseFillEmptyRows=o.asm.SparseFillEmptyRows).apply(null,arguments)},o._SparseReshape=function(){return(o._SparseReshape=o.asm.SparseReshape).apply(null,arguments)},o._SparseSegmentReduction=function(){return(o._SparseSegmentReduction=o.asm.SparseSegmentReduction).apply(null,arguments)},o._Sqrt=function(){return(o._Sqrt=o.asm.Sqrt).apply(null,arguments)},o._Square=function(){return(o._Square=o.asm.Square).apply(null,arguments)},o._SquaredDifference=function(){return(o._SquaredDifference=o.asm.SquaredDifference).apply(null,arguments)},o._Step=function(){return(o._Step=o.asm.Step).apply(null,arguments)},o._StridedSlice=function(){return(o._StridedSlice=o.asm.StridedSlice).apply(null,arguments)},o._Sub=function(){return(o._Sub=o.asm.Sub).apply(null,arguments)},o._Sum=function(){return(o._Sum=o.asm.Sum).apply(null,arguments)},o._Tan=function(){return(o._Tan=o.asm.Tan).apply(null,arguments)},o._Tanh=function(){return(o._Tanh=o.asm.Tanh).apply(null,arguments)},o._Tile=function(){return(o._Tile=o.asm.Tile).apply(null,arguments)},o._TopK=function(){return(o._TopK=o.asm.TopK).apply(null,arguments)},o._Transform=function(){return(o._Transform=o.asm.Transform).apply(null,arguments)},o._Transpose=function(){return(o._Transpose=o.asm.Transpose).apply(null,arguments)},o.__FusedMatMul=function(){return(o.__FusedMatMul=o.asm._FusedMatMul).apply(null,arguments)},o._malloc=function(){return(o._malloc=o.asm.malloc).apply(null,arguments)},o._free=function(){return(o._free=o.asm.free).apply(null,arguments)},o.___errno_location=function(){return(o.___errno_location=o.asm.__errno_location).apply(null,arguments)},o._emscripten_main_thread_process_queued_calls=function(){return(o._emscripten_main_thread_process_queued_calls=o.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},o.stackSave=function(){return(ie=o.stackSave=o.asm.stackSave).apply(null,arguments)}),oe=o.stackRestore=function(){return(oe=o.stackRestore=o.asm.stackRestore).apply(null,arguments)},se=o.stackAlloc=function(){return(se=o.stackAlloc=o.asm.stackAlloc).apply(null,arguments)};o.dynCall_iijjiiii=function(){return(o.dynCall_iijjiiii=o.asm.dynCall_iijjiiii).apply(null,arguments)},o.dynCall_jiji=function(){return(o.dynCall_jiji=o.asm.dynCall_jiji).apply(null,arguments)};function ue(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ce(e){function t(){te||(te=!0,o.calledRun=!0,S||(!0,Z(L),r(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),function(){if(o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;)e=o.postRun.shift(),z.unshift(e);var e;Z(z)}()))}e=e||h,W>0||(!function(){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)e=o.preRun.shift(),D.unshift(e);var e;Z(D)}(),W>0||(o.setStatus?(o.setStatus("Running..."),setTimeout((function(){setTimeout((function(){o.setStatus("")}),1),t()}),1)):t()))}if(o.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?I(e):function(){return E(e,t,n,arguments)}},V=function e(){te||ce(),te||(V=e)},o.run=ce,o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();if(ce(),i&&(ne={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!i.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!i.unhandledRejection.indexOf(e)>-1}))}),"undefined"!==typeof t)re=t;else{if("undefined"===typeof WasmBackendModuleThreadedSimd)throw new Error("Could not find wasm module in post.js");re=WasmBackendModuleThreadedSimd}if(ne){var le=re._dispose;re._dispose=function(){le(),ne.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),ne.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return t.ready}}();e.exports=r},7312:function(e,t){"use strict";function n(){return!1}function r(){return!0}function a(){this.timeStamp=Date.now(),this.target=void 0,this.currentTarget=void 0}Object.defineProperty(t,"__esModule",{value:!0}),a.prototype={isEventObject:1,constructor:a,isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){this.isDefaultPrevented=r},stopPropagation:function(){this.isPropagationStopped=r},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()},halt:function(e){e?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}},t.default=a,e.exports=t.default},7712:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(7312)),i=r(n(1843)),o=!1,s=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","shiftKey","target","timeStamp","view","type"];function u(e){return null===e||void 0===e}var c=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(e,t){u(e.which)&&(e.which=u(t.charCode)?t.keyCode:t.charCode),void 0===e.metaKey&&(e.metaKey=e.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(e,t){var n=void 0,r=void 0,a=void 0,i=t.wheelDelta,o=t.axis,s=t.wheelDeltaY,u=t.wheelDeltaX,c=t.detail;i&&(a=i/120),c&&(a=0-(c%3===0?c/3:c)),void 0!==o&&(o===e.HORIZONTAL_AXIS?(r=0,n=0-a):o===e.VERTICAL_AXIS&&(n=0,r=a)),void 0!==s&&(r=s/120),void 0!==u&&(n=-1*u/120),n||r||(r=a),void 0!==n&&(e.deltaX=n),void 0!==r&&(e.deltaY=r),void 0!==a&&(e.delta=a)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:["buttons","clientX","clientY","button","offsetX","relatedTarget","which","fromElement","toElement","offsetY","pageX","pageY","screenX","screenY"],fix:function(e,t){var n=void 0,r=void 0,a=void 0,i=e.target,o=t.button;return i&&u(e.pageX)&&!u(t.clientX)&&(r=(n=i.ownerDocument||document).documentElement,a=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===i?e.toElement:e.fromElement),e}}];function l(){return true}function d(){return o}function f(e){var t=e.type,n="function"===typeof e.stopPropagation||"boolean"===typeof e.cancelBubble;a.default.call(this),this.nativeEvent=e;var r=d;"defaultPrevented"in e?r=e.defaultPrevented?l:d:"getPreventDefault"in e?r=e.getPreventDefault()?l:d:"returnValue"in e&&(r=e.returnValue===o?l:d),this.isDefaultPrevented=r;var i=[],u=void 0,f=void 0,p=s.concat();for(c.forEach((function(e){t.match(e.reg)&&(p=p.concat(e.props),e.fix&&i.push(e.fix))})),u=p.length;u;)this[f=p[--u]]=e[f];for(!this.target&&n&&(this.target=e.srcElement||document),this.target&&3===this.target.nodeType&&(this.target=this.target.parentNode),u=i.length;u;)(0,i[--u])(this,e);this.timeStamp=e.timeStamp||Date.now()}var p=a.default.prototype;(0,i.default)(f.prototype,p,{constructor:f,preventDefault:function(){var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=o,p.preventDefault.call(this)},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=true,p.stopPropagation.call(this)}}),t.default=f,e.exports=t.default},1684:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){function a(t){var r=new i.default(t);n.call(e,r)}if(e.addEventListener){var o=function(){var n=!1;return"object"===typeof r?n=r.capture||!1:"boolean"===typeof r&&(n=r),e.addEventListener(t,a,r||!1),{v:{remove:function(){e.removeEventListener(t,a,n)}}}}();if("object"===typeof o)return o.v}else if(e.attachEvent)return e.attachEvent("on"+t,a),{remove:function(){e.detachEvent("on"+t,a)}}};var r,a=n(7712),i=(r=a)&&r.__esModule?r:{default:r};e.exports=t.default},220:function(e,t,n){e.exports={default:n(467),__esModule:!0}},5637:function(e,t,n){e.exports={default:n(7425),__esModule:!0}},6793:function(e,t,n){e.exports={default:n(2966),__esModule:!0}},8629:function(e,t,n){e.exports={default:n(9044),__esModule:!0}},3132:function(e,t,n){e.exports={default:n(4177),__esModule:!0}},1010:function(e,t,n){e.exports={default:n(3185),__esModule:!0}},420:function(e,t){"use strict";t.Z=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},7996:function(e,t,n){"use strict";var r,a=n(6793),i=(r=a)&&r.__esModule?r:{default:r};t.Z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},386:function(e,t,n){"use strict";var r,a=n(6793),i=(r=a)&&r.__esModule?r:{default:r};t.Z=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},4646:function(e,t,n){"use strict";var r,a=n(220),i=(r=a)&&r.__esModule?r:{default:r};t.Z=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},4401:function(e,t,n){"use strict";var r=o(n(8629)),a=o(n(5637)),i=o(n(5259));function o(e){return e&&e.__esModule?e:{default:e}}t.Z=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":(0,i.default)(t)));e.prototype=(0,a.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},684:function(e,t){"use strict";t.Z=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}},6583:function(e,t,n){"use strict";var r,a=n(5259),i=(r=a)&&r.__esModule?r:{default:r};t.Z=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":(0,i.default)(t))&&"function"!==typeof t?e:t}},5259:function(e,t,n){"use strict";t.__esModule=!0;var r=o(n(1010)),a=o(n(3132)),i="function"===typeof a.default&&"symbol"===typeof r.default?function(e){return typeof e}:function(e){return e&&"function"===typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof a.default&&"symbol"===i(r.default)?function(e){return"undefined"===typeof e?"undefined":i(e)}:function(e){return e&&"function"===typeof a.default&&e.constructor===a.default&&e!==a.default.prototype?"symbol":"undefined"===typeof e?"undefined":i(e)}},467:function(e,t,n){n(3524),e.exports=n(5754).Object.assign},7425:function(e,t,n){n(7449);var r=n(5754).Object;e.exports=function(e,t){return r.create(e,t)}},2966:function(e,t,n){n(2879);var r=n(5754).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},9044:function(e,t,n){n(8338),e.exports=n(5754).Object.setPrototypeOf},4177:function(e,t,n){n(9028),n(801),n(4819),n(9309),e.exports=n(5754).Symbol},3185:function(e,t,n){n(7445),n(1450),e.exports=n(7891).f("iterator")},4402:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},4223:function(e){e.exports=function(){}},9516:function(e,t,n){var r=n(7095);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},7539:function(e,t,n){var r=n(2290),a=n(2957),i=n(1421);e.exports=function(e){return function(t,n,o){var s,u=r(t),c=a(u.length),l=i(o,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},6701:function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},5754:function(e){var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},4569:function(e,t,n){var r=n(4402);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}}},5542:function(e){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},7829:function(e,t,n){e.exports=!n(6705)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},6915:function(e,t,n){var r=n(7095),a=n(740).document,i=r(a)&&r(a.createElement);e.exports=function(e){return i?a.createElement(e):{}}},5773:function(e){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},8526:function(e,t,n){var r=n(7282),a=n(9553),i=n(4863);e.exports=function(e){var t=r(e),n=a.f;if(n)for(var o,s=n(e),u=i.f,c=0;s.length>c;)u.call(e,o=s[c++])&&t.push(o);return t}},3013:function(e,t,n){var r=n(740),a=n(5754),i=n(4569),o=n(9067),s=n(6139),u=function e(t,n,u){var c,l,d,f=t&e.F,p=t&e.G,h=t&e.S,m=t&e.P,v=t&e.B,g=t&e.W,y=p?a:a[n]||(a[n]={}),b=y.prototype,x=p?r:h?r[n]:(r[n]||{}).prototype;for(c in p&&(u=n),u)(l=!f&&x&&void 0!==x[c])&&s(y,c)||(d=l?x[c]:u[c],y[c]=p&&"function"!=typeof x[c]?u[c]:v&&l?i(d,r):g&&x[c]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):m&&"function"==typeof d?i(Function.call,d):d,m&&((y.virtual||(y.virtual={}))[c]=d,t&e.R&&b&&!b[c]&&o(b,c,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},6705:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},740:function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},6139:function(e){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},9067:function(e,t,n){var r=n(6728),a=n(7869);e.exports=n(7829)?function(e,t,n){return r.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},1015:function(e,t,n){var r=n(740).document;e.exports=r&&r.documentElement},8416:function(e,t,n){e.exports=!n(7829)&&!n(6705)((function(){return 7!=Object.defineProperty(n(6915)("div"),"a",{get:function(){return 7}}).a}))},2999:function(e,t,n){var r=n(6701);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},4683:function(e,t,n){var r=n(6701);e.exports=Array.isArray||function(e){return"Array"==r(e)}},7095:function(e){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},294:function(e,t,n){"use strict";var r=n(759),a=n(7869),i=n(9157),o={};n(9067)(o,n(102)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(o,{next:a(1,n)}),i(e,t+" Iterator")}},3906:function(e,t,n){"use strict";var r=n(4159),a=n(3013),i=n(8004),o=n(9067),s=n(6469),u=n(294),c=n(9157),l=n(49),d=n(102)("iterator"),f=!([].keys&&"next"in[].keys()),p="keys",h="values",m=function(){return this};e.exports=function(e,t,n,v,g,y,b){u(n,t,v);var x,A,k,w=function(e){if(!f&&e in C)return C[e];switch(e){case p:case h:return function(){return new n(this,e)}}return function(){return new n(this,e)}},S=t+" Iterator",I=g==h,E=!1,C=e.prototype,N=C[d]||C["@@iterator"]||g&&C[g],T=N||w(g),_=g?I?w("entries"):T:void 0,R="Array"==t&&C.entries||N;if(R&&(k=l(R.call(new e)))!==Object.prototype&&k.next&&(c(k,S,!0),r||"function"==typeof k[d]||o(k,d,m)),I&&N&&N.name!==h&&(E=!0,T=function(){return N.call(this)}),r&&!b||!f&&!E&&C[d]||o(C,d,T),s[t]=T,s[S]=m,g)if(x={values:I?T:w(h),keys:y?T:w(p),entries:_},b)for(A in x)A in C||i(C,A,x[A]);else a(a.P+a.F*(f||E),t,x);return x}},7102:function(e){e.exports=function(e,t){return{value:t,done:!!e}}},6469:function(e){e.exports={}},4159:function(e){e.exports=!0},9578:function(e,t,n){var r=n(7650)("meta"),a=n(7095),i=n(6139),o=n(6728).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(6705)((function(){return u(Object.preventExtensions({}))})),l=function(e){o(e,r,{value:{i:"O"+ ++s,w:{}}})},d=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!i(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return c&&d.NEED&&u(e)&&!i(e,r)&&l(e),e}}},6293:function(e,t,n){"use strict";var r=n(7829),a=n(7282),i=n(9553),o=n(4863),s=n(6164),u=n(2999),c=Object.assign;e.exports=!c||n(6705)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r}))?function(e,t){for(var n=s(e),c=arguments.length,l=1,d=i.f,f=o.f;c>l;)for(var p,h=u(arguments[l++]),m=d?a(h).concat(d(h)):a(h),v=m.length,g=0;v>g;)p=m[g++],r&&!f.call(h,p)||(n[p]=h[p]);return n}:c},759:function(e,t,n){var r=n(9516),a=n(4184),i=n(5773),o=n(906)("IE_PROTO"),s=function(){},u=function(){var e,t=n(6915)("iframe"),r=i.length;for(t.style.display="none",n(1015).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[i[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[o]=e):n=u(),void 0===t?n:a(n,t)}},6728:function(e,t,n){var r=n(9516),a=n(8416),i=n(6373),o=Object.defineProperty;t.f=n(7829)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),a)try{return o(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},4184:function(e,t,n){var r=n(6728),a=n(9516),i=n(7282);e.exports=n(7829)?Object.defineProperties:function(e,t){a(e);for(var n,o=i(t),s=o.length,u=0;s>u;)r.f(e,n=o[u++],t[n]);return e}},939:function(e,t,n){var r=n(4863),a=n(7869),i=n(2290),o=n(6373),s=n(6139),u=n(8416),c=Object.getOwnPropertyDescriptor;t.f=n(7829)?c:function(e,t){if(e=i(e),t=o(t,!0),u)try{return c(e,t)}catch(n){}if(s(e,t))return a(!r.f.call(e,t),e[t])}},2721:function(e,t,n){var r=n(2290),a=n(4740).f,i={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==i.call(e)?function(e){try{return a(e)}catch(t){return o.slice()}}(e):a(r(e))}},4740:function(e,t,n){var r=n(2760),a=n(5773).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,a)}},9553:function(e,t){t.f=Object.getOwnPropertySymbols},49:function(e,t,n){var r=n(6139),a=n(6164),i=n(906)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=a(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},2760:function(e,t,n){var r=n(6139),a=n(2290),i=n(7539)(!1),o=n(906)("IE_PROTO");e.exports=function(e,t){var n,s=a(e),u=0,c=[];for(n in s)n!=o&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~i(c,n)||c.push(n));return c}},7282:function(e,t,n){var r=n(2760),a=n(5773);e.exports=Object.keys||function(e){return r(e,a)}},4863:function(e,t){t.f={}.propertyIsEnumerable},7869:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},8004:function(e,t,n){e.exports=n(9067)},6832:function(e,t,n){var r=n(7095),a=n(9516),i=function(e,t){if(a(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(4569)(Function.call,n(939).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(a){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},9157:function(e,t,n){var r=n(6728).f,a=n(6139),i=n(102)("toStringTag");e.exports=function(e,t,n){e&&!a(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},906:function(e,t,n){var r=n(4297)("keys"),a=n(7650);e.exports=function(e){return r[e]||(r[e]=a(e))}},4297:function(e,t,n){var r=n(5754),a=n(740),i="__core-js_shared__",o=a[i]||(a[i]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(4159)?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},5940:function(e,t,n){var r=n(6257),a=n(5542);e.exports=function(e){return function(t,n){var i,o,s=String(a(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(i=s.charCodeAt(u))<55296||i>56319||u+1===c||(o=s.charCodeAt(u+1))<56320||o>57343?e?s.charAt(u):i:e?s.slice(u,u+2):o-56320+(i-55296<<10)+65536}}},1421:function(e,t,n){var r=n(6257),a=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?a(e+t,0):i(e,t)}},6257:function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},2290:function(e,t,n){var r=n(2999),a=n(5542);e.exports=function(e){return r(a(e))}},2957:function(e,t,n){var r=n(6257),a=Math.min;e.exports=function(e){return e>0?a(r(e),9007199254740991):0}},6164:function(e,t,n){var r=n(5542);e.exports=function(e){return Object(r(e))}},6373:function(e,t,n){var r=n(7095);e.exports=function(e,t){if(!r(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!r(a=n.call(e)))return a;if(!t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},7650:function(e){var t=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+n).toString(36))}},7696:function(e,t,n){var r=n(740),a=n(5754),i=n(4159),o=n(7891),s=n(6728).f;e.exports=function(e){var t=a.Symbol||(a.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},7891:function(e,t,n){t.f=n(102)},102:function(e,t,n){var r=n(4297)("wks"),a=n(7650),i=n(740).Symbol,o="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=o&&i[e]||(o?i:a)("Symbol."+e))}).store=r},9358:function(e,t,n){"use strict";var r=n(4223),a=n(7102),i=n(6469),o=n(2290);e.exports=n(3906)(Array,"Array",(function(e,t){this._t=o(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,a(1)):a(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},3524:function(e,t,n){var r=n(3013);r(r.S+r.F,"Object",{assign:n(6293)})},7449:function(e,t,n){var r=n(3013);r(r.S,"Object",{create:n(759)})},2879:function(e,t,n){var r=n(3013);r(r.S+r.F*!n(7829),"Object",{defineProperty:n(6728).f})},8338:function(e,t,n){var r=n(3013);r(r.S,"Object",{setPrototypeOf:n(6832).set})},801:function(){},7445:function(e,t,n){"use strict";var r=n(5940)(!0);n(3906)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},9028:function(e,t,n){"use strict";var r=n(740),a=n(6139),i=n(7829),o=n(3013),s=n(8004),u=n(9578).KEY,c=n(6705),l=n(4297),d=n(9157),f=n(7650),p=n(102),h=n(7891),m=n(7696),v=n(8526),g=n(4683),y=n(9516),b=n(7095),x=n(6164),A=n(2290),k=n(6373),w=n(7869),S=n(759),I=n(2721),E=n(939),C=n(9553),N=n(6728),T=n(7282),_=E.f,R=N.f,M=I.f,O=r.Symbol,F=r.JSON,P=F&&F.stringify,D=p("_hidden"),L=p("toPrimitive"),z={}.propertyIsEnumerable,B=l("symbol-registry"),W=l("symbols"),j=l("op-symbols"),V=Object.prototype,U="function"==typeof O&&!!C.f,H=r.QObject,G=!H||!H.prototype||!H.prototype.findChild,q=i&&c((function(){return 7!=S(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=_(V,t);r&&delete V[t],R(e,t,n),r&&e!==V&&R(V,t,r)}:R,K=function(e){var t=W[e]=S(O.prototype);return t._k=e,t},X=U&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},Z=function(e,t,n){return e===V&&Z(j,t,n),y(e),t=k(t,!0),y(n),a(W,t)?(n.enumerable?(a(e,D)&&e[D][t]&&(e[D][t]=!1),n=S(n,{enumerable:w(0,!1)})):(a(e,D)||R(e,D,w(1,{})),e[D][t]=!0),q(e,t,n)):R(e,t,n)},Y=function(e,t){y(e);for(var n,r=v(t=A(t)),a=0,i=r.length;i>a;)Z(e,n=r[a++],t[n]);return e},J=function(e){var t=z.call(this,e=k(e,!0));return!(this===V&&a(W,e)&&!a(j,e))&&(!(t||!a(this,e)||!a(W,e)||a(this,D)&&this[D][e])||t)},Q=function(e,t){if(e=A(e),t=k(t,!0),e!==V||!a(W,t)||a(j,t)){var n=_(e,t);return!n||!a(W,t)||a(e,D)&&e[D][t]||(n.enumerable=!0),n}},$=function(e){for(var t,n=M(A(e)),r=[],i=0;n.length>i;)a(W,t=n[i++])||t==D||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===V,r=M(n?j:A(e)),i=[],o=0;r.length>o;)!a(W,t=r[o++])||n&&!a(V,t)||i.push(W[t]);return i};U||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function t(n){this===V&&t.call(j,n),a(this,D)&&a(this[D],e)&&(this[D][e]=!1),q(this,e,w(1,n))};return i&&G&&q(V,e,{configurable:!0,set:t}),K(e)},s(O.prototype,"toString",(function(){return this._k})),E.f=Q,N.f=Z,n(4740).f=I.f=$,n(4863).f=J,C.f=ee,i&&!n(4159)&&s(V,"propertyIsEnumerable",J,!0),h.f=function(e){return K(p(e))}),o(o.G+o.W+o.F*!U,{Symbol:O});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var re=T(p.store),ae=0;re.length>ae;)m(re[ae++]);o(o.S+o.F*!U,"Symbol",{for:function(e){return a(B,e+="")?B[e]:B[e]=O(e)},keyFor:function(e){if(!X(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),o(o.S+o.F*!U,"Object",{create:function(e,t){return void 0===t?S(e):Y(S(e),t)},defineProperty:Z,defineProperties:Y,getOwnPropertyDescriptor:Q,getOwnPropertyNames:$,getOwnPropertySymbols:ee});var ie=c((function(){C.f(1)}));o(o.S+o.F*ie,"Object",{getOwnPropertySymbols:function(e){return C.f(x(e))}}),F&&o(o.S+o.F*(!U||c((function(){var e=O();return"[null]"!=P([e])||"{}"!=P({a:e})||"{}"!=P(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],a=1;arguments.length>a;)r.push(arguments[a++]);if(n=t=r[1],(b(t)||void 0!==e)&&!X(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!X(t))return t}),r[1]=t,P.apply(F,r)}}),O.prototype[L]||n(9067)(O.prototype,L,O.prototype.valueOf),d(O,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},4819:function(e,t,n){n(7696)("asyncIterator")},9309:function(e,t,n){n(7696)("observable")},1450:function(e,t,n){n(9358);for(var r=n(740),a=n(9067),i=n(6469),o=n(102)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=r[c],d=l&&l.prototype;d&&!d[o]&&a(d,o,c),i[c]=i.Array}},6123:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var o=a.apply(null,n);o&&e.push(o)}}else if("object"===i)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},3105:function(e,t,n){try{var r=n(2447)}catch(s){r=n(2447)}var a=/\s+/,i=Object.prototype.toString;function o(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}e.exports=function(e){return new o(e)},o.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~r(t,e)||t.push(e),this.el.className=t.join(" "),this},o.prototype.remove=function(e){if("[object RegExp]"==i.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=r(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},o.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},o.prototype.toggle=function(e,t){return this.list?("undefined"!==typeof t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):("undefined"!==typeof t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},o.prototype.array=function(){var e=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(a);return""===e[0]&&e.shift(),e},o.prototype.has=o.prototype.contains=function(e){return this.list?this.list.contains(e):!!~r(this.array(),e)}},2447:function(e){e.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},1465:function(e){e.exports=function(){"use strict";function e(t){return e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e,t,n){return u=s()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&o(a,n.prototype),a},u.apply(null,arguments)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?c(e):t}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}function f(e,t,n){return f="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=d(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}},f(e,t,n||e)}function p(e){throw Error(e)}function h(e){if(_(e)){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.call.apply(e,[this].concat(n))}}function m(e){return k(e=w(e)?Math.ceil(e):Math.floor(e))?("-"+e).toString():e}function v(e){return!I(e)&&!S(e)}function g(e,t){return function(){return t(e())}}function y(e){return function(t){return t.map(e).reduce((function(e,t){return e.concat(t)}),[])}}function b(e){return y((function(e){return e}))(e)}function x(e){return y((function(e){return Array.isArray(e)?x(e):e}))(e)}function A(e){return x(e).length}function k(e){return 1/Math.round(e)===-1/0}function w(e){return k(e)||e<0}function S(e){return null===e}function I(e){return"undefined"===typeof e}function E(e){return e instanceof Function&&!!e.name}function C(e){return"string"===typeof e}function N(e){return e instanceof Array}function T(t){var n=e(t);return null!=t&&!N(t)&&("object"==n||"function"==n)}function _(e){return e instanceof Function}function R(e){return!isNaN(e)}function M(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase()}var O=function(){function e(n){t(this,e),this.setAttribute(Object.assign({events:{}},n))}return r(e,[{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return this.events[e]&&this.events[e].forEach((function(e){e.apply(t,r)})),this}},{key:"on",value:function(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),this}},{key:"off",value:function(e,t){return this.events[e]&&t?this.events[e]=this.events[e].filter((function(e){return e!==t})):this.events[e]=[],this}},{key:"once",value:function(e,t){var n=this;return t=g(t,(function(){return n.off(e,t)})),this.on(e,t,!0)}},{key:"getAttribute",value:function(e){return this.hasOwnProperty(e)?this[e]:null}},{key:"getAttributes",value:function(){var e=this,t={};return Object.getOwnPropertyNames(this).forEach((function(n){t[n]=e.getAttribute(n)})),t}},{key:"getPublicAttributes",value:function(){var e=this;return Object.keys(this.getAttributes()).filter((function(e){return!e.match(/^\$/)})).reduce((function(t,n){return t[n]=e.getAttribute(n),t}),{})}},{key:"setAttribute",value:function(e,t){T(e)?this.setAttributes(e):this[e]=t}},{key:"setAttributes",value:function(e){for(var t in e)this.setAttribute(t,e[t])}},{key:"callback",value:function(e){return h.call(this,e)}},{key:"name",get:function(){return this.constructor.defineName instanceof Function||p("Every class must define its name."),this.constructor.defineName()}},{key:"events",get:function(){return this.$events||{}},set:function(e){this.$events=e}}],[{key:"make",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u(this,t)}}]),e}();function F(e,t){function n(e){return(t.prependLeadingZero&&1===e.toString().split("").length?"0":"").concat(e)}function r(e,t){var n=x(e).length;if(n<t)for(var r=0;r<t-n;r++)e[0].unshift("0");return e}return t=Object.assign({minimumDigits:0,prependLeadingZero:!0},t),r(b([e]).map((function(e){return b(x([e]).map((function(e){return n(e).split("")})))})),t.minimumDigits||0)}var P=[{min:48,max:57},{min:65,max:90},{min:97,max:122}];function D(e,t){return"number"===t?parseFloat(e):e}function L(e){for(var t in P){var n=e.toString().charCodeAt(0);if(P[t].min<=n&&P[t].max>=n)return P[t]}return null}function z(e,t){return String.fromCharCode(t(L(e),e.charCodeAt(0)))}function B(t){return D(t.toString().split("").map((function(e){return z(e,(function(e,t){return!e||t<e.max?t+1:e.min}))})).join(""),e(t))}function W(t){return D(t.toString().split("").map((function(e){return z(e,(function(e,t){return!e||t>e.min?t-1:e.max}))})).join(""),e(t))}var j=function(e){function n(e,r){var a;return t(this,n),a=l(this,i(n).call(this,Object.assign({format:function(e){return e},prependLeadingZero:!0,minimumDigits:0},r))),a.value||(a.value=e),a}return a(n,e),r(n,[{key:"isNaN",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return isNaN(this.value)}))},{key:"isNumber",value:function(){return R()}},{key:"clone",value:function(e,t){return new this.constructor(e,Object.assign(this.getPublicAttributes(),t))}},{key:"digits",get:function(){return this.$digits},set:function(e){this.$digits=e,this.minimumDigits=Math.max(this.minimumDigits,A(e))}},{key:"value",get:function(){return this.$value},set:function(e){this.$value=e,this.digits=F(this.format(e),{minimumDigits:this.minimumDigits,prependLeadingZero:this.prependLeadingZero})}}],[{key:"defineName",value:function(){return"FaceValue"}}]),n}(O);function V(t){for(var n=!1,r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return b(a).forEach((function(r){(S(t)&&S(r)||T(r)&&t instanceof r||_(r)&&!E(r)&&!0===r(t)||C(r)&&e(t)===r)&&(n=!0)})),n}var U={className:"The className() is not defined.",items:"The items property must be an array.",theme:"The theme property must be an object.",language:"The language must be an object.",date:"The value must be an instance of a Date.",face:"The face must be an instance of a Face class.",element:"The element must be an instance of an HTMLElement",faceValue:"The face must be an instance of a FaceValue class.",timer:"The timer property must be an instance of a Timer class."},H=function(e){function n(e,r){var a;return t(this,n),e instanceof j||!T(e)||(r=e,e=void 0),(a=l(this,i(n).call(this))).setAttributes(Object.assign({autoStart:!0,countdown:!1,animationRate:500},a.defaultAttributes(),r||{})),(S(e)||I(e))&&(e=a.defaultValue()),e&&(a.value=e),a}return a(n,e),r(n,[{key:"interval",value:function(e,t){return this.countdown?this.decrement(e):this.increment(e),h.call(this,t),this.shouldStop(e)&&e.stop(),this.emit("interval")}},{key:"shouldStop",value:function(e){return!I(this.stopAt)&&this.stopAt===e.value.value}},{key:"format",value:function(e,t){return t}},{key:"defaultValue",value:function(){}},{key:"defaultAttributes",value:function(){}},{key:"defaultDataType",value:function(){}},{key:"increment",value:function(e,t){}},{key:"decrement",value:function(e,t){}},{key:"started",value:function(e){}},{key:"stopped",value:function(e){}},{key:"reset",value:function(e){}},{key:"initialized",value:function(e){}},{key:"rendered",value:function(e){}},{key:"mounted",value:function(e){this.autoStart&&e.timer.isStopped&&window.requestAnimationFrame((function(){return e.start(e)}))}},{key:"createFaceValue",value:function(e,t){var n=this;return j.make(_(t)&&!t.name?t():t,{minimumDigits:this.minimumDigits,format:function(t){return n.format(e,t)}})}},{key:"dataType",get:function(){return this.defaultDataType()}},{key:"value",get:function(){return this.$value},set:function(e){e instanceof j||(e=this.createFaceValue(e)),this.$value=e}},{key:"stopAt",get:function(){return this.$stopAt},set:function(e){this.$stopAt=e}},{key:"originalValue",get:function(){return this.$originalValue},set:function(e){this.$originalValue=e}}]),n}(O),G={years:"\u0633\u0646\u0648\u0627\u062a",months:"\u0634\u0647\u0648\u0631",days:"\u0623\u064a\u0627\u0645",hours:"\u0633\u0627\u0639\u0627\u062a",minutes:"\u062f\u0642\u0627\u0626\u0642",seconds:"\u062b\u0648\u0627\u0646\u064a"},q=["ar","ar-ar","arabic"],K=Object.freeze({dictionary:G,aliases:q}),X={years:"Anys",months:"Mesos",days:"Dies",hours:"Hores",minutes:"Minuts",seconds:"Segons"},Z=["ca","ca-es","catalan"],Y=Object.freeze({dictionary:X,aliases:Z}),J={years:"Roky",months:"M\u011bs\xedce",days:"Dny",hours:"Hodiny",minutes:"Minuty",seconds:"Sekundy"},Q=["cs","cs-cz","cz","cz-cs","czech"],$=Object.freeze({dictionary:J,aliases:Q}),ee={years:"\xc5r",months:"M\xe5neder",days:"Dage",hours:"Timer",minutes:"Minutter",seconds:"Sekunder"},te=["da","da-dk","danish"],ne=Object.freeze({dictionary:ee,aliases:te}),re={years:"Jahre",months:"Monate",days:"Tage",hours:"Stunden",minutes:"Minuten",seconds:"Sekunden"},ae=["de","de-de","german"],ie=Object.freeze({dictionary:re,aliases:ae}),oe={years:"Years",months:"Months",days:"Days",hours:"Hours",minutes:"Minutes",seconds:"Seconds"},se=["en","en-us","english"],ue=Object.freeze({dictionary:oe,aliases:se}),ce={years:"A\xf1os",months:"Meses",days:"D\xedas",hours:"Horas",minutes:"Minutos",seconds:"Segundos"},le=["es","es-es","spanish"],de=Object.freeze({dictionary:ce,aliases:le}),fe={years:"\u0633\u0627\u0644",months:"\u0645\u0627\u0647",days:"\u0631\u0648\u0632",hours:"\u0633\u0627\u0639\u062a",minutes:"\u062f\u0642\u06cc\u0642\u0647",seconds:"\u062b\u0627\u0646\u06cc\u0647"},pe=["fa","fa-ir","persian"],he=Object.freeze({dictionary:fe,aliases:pe}),me={years:"Vuotta",months:"Kuukautta",days:"P\xe4iv\xe4\xe4",hours:"Tuntia",minutes:"Minuuttia",seconds:"Sekuntia"},ve=["fi","fi-fi","finnish"],ge=Object.freeze({dictionary:me,aliases:ve}),ye={years:"Ans",months:"Mois",days:"Jours",hours:"Heures",minutes:"Minutes",seconds:"Secondes"},be=["fr","fr-ca","french"],xe=Object.freeze({dictionary:ye,aliases:be}),Ae={years:"\u05e9\u05e0\u05d9\u05dd",months:"\u05d7\u05d5\u05d3\u05e9",days:"\u05d9\u05de\u05d9\u05dd",hours:"\u05e9\u05e2\u05d5\u05ea",minutes:"\u05d3\u05e7\u05d5\u05ea",seconds:"\u05e9\u05e0\u05d9\u05d5\u05ea"},ke=["il","he-il","hebrew"],we=Object.freeze({dictionary:Ae,aliases:ke}),Se={years:"\xc9v",months:"H\xf3nap",days:"Nap",hours:"\xd3ra",minutes:"Perc",seconds:"M\xe1sodperc"},Ie=["hu","hu-hu","hungarian"],Ee=Object.freeze({dictionary:Se,aliases:Ie}),Ce={years:"Anni",months:"Mesi",days:"Giorni",hours:"Ore",minutes:"Minuti",seconds:"Secondi"},Ne=["da","da-dk","danish"],Te=Object.freeze({dictionary:Ce,aliases:Ne}),_e={years:"\u5e74",months:"\u6708",days:"\u65e5",hours:"\u6642",minutes:"\u5206",seconds:"\u79d2"},Re=["jp","ja-jp","japanese"],Me=Object.freeze({dictionary:_e,aliases:Re}),Oe={years:"\ub144",months:"\uc6d4",days:"\uc77c",hours:"\uc2dc",minutes:"\ubd84",seconds:"\ucd08"},Fe=["ko","ko-kr","korean"],Pe=Object.freeze({dictionary:Oe,aliases:Fe}),De={years:"Gadi",months:"M\u0113ne\u0161i",days:"Dienas",hours:"Stundas",minutes:"Min\u016btes",seconds:"Sekundes"},Le=["lv","lv-lv","latvian"],ze=Object.freeze({dictionary:De,aliases:Le}),Be={years:"Jaren",months:"Maanden",days:"Dagen",hours:"Uren",minutes:"Minuten",seconds:"Seconden"},We=["nl","nl-be","dutch"],je=Object.freeze({dictionary:Be,aliases:We}),Ve={years:"\xc5r",months:"M\xe5neder",days:"Dager",hours:"Timer",minutes:"Minutter",seconds:"Sekunder"},Ue=["no","nb","no-nb","norwegian"],He=Object.freeze({dictionary:Ve,aliases:Ue}),Ge={years:"Lat",months:"Miesi\u0119cy",days:"Dni",hours:"Godziny",minutes:"Minuty",seconds:"Sekundy"},qe=["pl","pl-pl","polish"],Ke=Object.freeze({dictionary:Ge,aliases:qe}),Xe={years:"Anos",months:"Meses",days:"Dias",hours:"Horas",minutes:"Minutos",seconds:"Segundos"},Ze=["pt","pt-br","portuguese"],Ye=Object.freeze({dictionary:Xe,aliases:Ze}),Je={years:"Ani",months:"Luni",days:"Zile",hours:"Ore",minutes:"Minute",seconds:"sSecunde"},Qe=["ro","ro-ro","romana"],$e=Object.freeze({dictionary:Je,aliases:Qe}),et={years:"\u043b\u0435\u0442",months:"\u043c\u0435\u0441\u044f\u0446\u0435\u0432",days:"\u0434\u043d\u0435\u0439",hours:"\u0447\u0430\u0441\u043e\u0432",minutes:"\u043c\u0438\u043d\u0443\u0442",seconds:"\u0441\u0435\u043a\u0443\u043d\u0434"},tt=["ru","ru-ru","russian"],nt=Object.freeze({dictionary:et,aliases:tt}),rt={years:"Roky",months:"Mesiace",days:"Dni",hours:"Hodiny",minutes:"Min\xfaty",seconds:"Sekundy"},at=["sk","sk-sk","slovak"],it=Object.freeze({dictionary:rt,aliases:at}),ot={years:"\xc5r",months:"M\xe5nader",days:"Dagar",hours:"Timmar",minutes:"Minuter",seconds:"Sekunder"},st=["sv","sv-se","swedish"],ut=Object.freeze({dictionary:ot,aliases:st}),ct={years:"\u0e1b\u0e35",months:"\u0e40\u0e14\u0e37\u0e2d\u0e19",days:"\u0e27\u0e31\u0e19",hours:"\u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",minutes:"\u0e19\u0e32\u0e17\u0e35",seconds:"\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35"},lt=["th","th-th","thai"],dt=Object.freeze({dictionary:ct,aliases:lt}),ft={years:"Y\u0131l",months:"Ay",days:"G\xfcn",hours:"Saat",minutes:"Dakika",seconds:"Saniye"},pt=["tr","tr-tr","turkish"],ht=Object.freeze({dictionary:ft,aliases:pt}),mt={years:"\u0440\u043e\u043a\u0438",months:"\u043c\u0456\u0441\u044f\u0446\u0456",days:"\u0434\u043d\u0456",hours:"\u0433\u043e\u0434\u0438\u043d\u0438",minutes:"\u0445\u0432\u0438\u043b\u0438\u043d\u0438",seconds:"\u0441\u0435\u043a\u0443\u043d\u0434\u0438"},vt=["ua","ua-ua","ukraine"],gt=Object.freeze({dictionary:mt,aliases:vt}),yt={years:"N\u0103m",months:"Th\xe1ng",days:"Ng\xe0y",hours:"Gi\u1edd",minutes:"Ph\xfat",seconds:"Gi\xe2y"},bt=["vn","vn-vn","vietnamese"],xt=Object.freeze({dictionary:yt,aliases:bt}),At={years:"\u5e74",months:"\u6708",days:"\u65e5",hours:"\u65f6",minutes:"\u5206",seconds:"\u79d2"},kt=["zh","zh-cn","chinese"],wt=Object.freeze({dictionary:At,aliases:kt}),St={years:"\u5e74",months:"\u6708",days:"\u65e5",hours:"\u6642",minutes:"\u5206",seconds:"\u79d2"},It=["zh-tw"],Et=Object.freeze({dictionary:St,aliases:It}),Ct=Object.freeze({Arabic:K,Catalan:Y,Czech:$,Danish:ne,German:ie,English:ue,Spanish:de,Persian:he,Finnish:ge,French:xe,Hebrew:we,Hungarian:Ee,Italian:Te,Japanese:Me,Korean:Pe,Latvian:ze,Dutch:je,Norwegian:He,Polish:Ke,Portuguese:Ye,Romanian:$e,Russian:nt,Slovak:it,Swedish:ut,Thai:dt,Turkish:ht,Ukrainian:gt,Vietnamese:xt,Chinese:wt,TraditionalChinese:Et});function Nt(e){return e?Ct[e.toLowerCase()]||Object.values(Ct).find((function(t){return-1!==t.aliases.indexOf(e)})):null}function Tt(e,t){var n=C(t)?Nt(t):t;return(n.dictionary||n)[e]||e}function _t(e,t){return t.parentNode?(t.parentNode.replaceChild(e,t),e):t}function Rt(e,t){if(T(t))for(var n in t)e.setAttribute(n,t[n]);return e}function Mt(e,t){return N(t)&&t.filter(v).forEach((function(t){t instanceof HTMLElement&&e.appendChild(t)})),e}function Ot(e,t,n){return e instanceof HTMLElement||(e=document.createElement(e)),Rt(e,T(t)?t:n),T(t)||N(t)?Mt(e,t):e.innerHTML=t,e}var Ft=function(e){function n(e){var r;if(t(this,n),(r=l(this,i(n).call(this,Object.assign({parent:null},e)))).theme||p("".concat(r.name," does not have a theme defined.")),r.language||p("".concat(r.name," does not have a language defined.")),!r.theme[r.name])throw new Error("".concat(r.name," cannot be rendered because it has no template."));return r}return a(n,e),r(n,[{key:"translate",value:function(e){return Tt(e,this.language)}},{key:"t",value:function(e){return this.translate(e)}},{key:"render",value:function(){var e=Ot("div",{class:"flip-clock"===this.className?this.className:"flip-clock-"+this.className});return this.theme[this.name](e,this),this.el?this.el.innerHTML!==e.innerHTML&&(this.el=_t(e,this.el)):this.el=e,this.el}},{key:"mount",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.render(),this.parent=e,t?this.parent.insertBefore(this.el,t):this.parent.appendChild(this.el),this.el}},{key:"className",get:function(){return M(this.constructor.defineName())}},{key:"el",get:function(){return this.$el},set:function(e){V(e,null,HTMLElement)||p(U.element),this.$el=e}},{key:"parent",get:function(){return this.$parent},set:function(e){this.$parent=e}},{key:"theme",get:function(){return this.$theme},set:function(e){V(e,"object")||p(U.value),this.$theme=e}},{key:"language",get:function(){return this.$language},set:function(e){C(e)&&(e=Nt(e)),V(e,"object")||p(U.language),this.$language=e}}]),n}(O),Pt=function(e){function n(){return t(this,n),l(this,i(n).apply(this,arguments))}return a(n,e),r(n,null,[{key:"defineName",value:function(){return"Divider"}}]),n}(Ft),Dt=function(e){function n(e,r){return t(this,n),l(this,i(n).call(this,Object.assign({value:e},T(e)?e:null,r)))}return a(n,e),r(n,null,[{key:"defineName",value:function(){return"ListItem"}}]),n}(Ft),Lt=function(e){function n(e,r){return t(this,n),l(this,i(n).call(this,Object.assign({value:e,items:[]},T(e)?e:null,r)))}return a(n,e),r(n,[{key:"createListItem",value:function(e,t){var n=new Dt(e,Object.assign({theme:this.theme,language:this.language},t));return this.$items.push(n),n}},{key:"value",get:function(){return this.$value},set:function(e){this.$value=e}},{key:"items",get:function(){return this.$items},set:function(e){this.$items=e}}],[{key:"defineName",value:function(){return"List"}}]),n}(Ft),zt=function(e){function n(e,r){return t(this,n),l(this,i(n).call(this,Object.assign({items:N(e)?e:[]},T(e)?e:null,r)))}return a(n,e),r(n,null,[{key:"defineName",value:function(){return"Group"}}]),n}(Ft),Bt=function(e){function n(e,r){return t(this,n),l(this,i(n).call(this,Object.assign({label:e},T(e)?e:null,r)))}return a(n,e),r(n,null,[{key:"defineName",value:function(){return"Label"}}]),n}(Ft),Wt=function(e){function n(e){return t(this,n),l(this,i(n).call(this,Object.assign({count:0,handle:null,started:null,running:!1,interval:R(e)?e:null},T(e)?e:null)))}return a(n,e),r(n,[{key:"reset",value:function(e){var t=this;return this.stop((function(){t.count=0,t.start((function(){return h.call(t,e)})),t.emit("reset")})),this}},{key:"start",value:function(e){var t=this;return this.started=new Date,this.lastLoop=Date.now(),this.running=!0,this.emit("start"),function n(){return Date.now()-t.lastLoop>=t.interval&&(h.call(t,e),t.lastLoop=Date.now(),t.emit("interval"),t.count++),t.handle=window.requestAnimationFrame(n),t}()}},{key:"stop",value:function(e){var t=this;return this.isRunning&&setTimeout((function(){window.cancelAnimationFrame(t.handle),t.running=!1,h.call(t,e),t.emit("stop")})),this}},{key:"elapsed",get:function(){return this.lastLoop?this.lastLoop-(this.started?this.started.getTime():(new Date).getTime()):0}},{key:"isRunning",get:function(){return!0===this.running}},{key:"isStopped",get:function(){return!1===this.running}}],[{key:"defineName",value:function(){return"Timer"}}]),n}(O),jt=function(e){function n(){return t(this,n),l(this,i(n).apply(this,arguments))}return a(n,e),r(n,[{key:"increment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.value=this.value.value+t}},{key:"decrement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.value=this.value.value-t}}],[{key:"defineName",value:function(){return"Counter"}}]),n}(H),Vt=function(e){function n(){return t(this,n),l(this,i(n).apply(this,arguments))}return a(n,e),r(n,[{key:"defaultDataType",value:function(){return Date}},{key:"defaultAttributes",value:function(){return{showSeconds:!0,showLabels:!0}}},{key:"shouldStop",value:function(e){if(S(e.stopAt)||I(e.stopAt))return!1;if(this.stopAt instanceof Date)return this.countdown?this.stopAt.getTime()>=this.value.value.getTime():this.stopAt.getTime()<=this.value.value.getTime();if(R(this.stopAt)){var t=Math.floor((this.value.value.getTime()-this.originalValue.getTime())/1e3);return this.countdown?this.stopAt>=t:this.stopAt<=t}throw new Error("the stopAt property must be an instance of Date or Number.")}},{key:"increment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.value=new Date(this.value.value.getTime()+t+((new Date).getTime()-e.timer.lastLoop))}},{key:"decrement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.value=new Date(this.value.value.getTime()-t-((new Date).getTime()-e.timer.lastLoop))}},{key:"format",value:function(e,t){var n=e.timer.isRunning?e.timer.started:new Date(Date.now()-50);return[[this.getMinutes(t,n)],this.showSeconds?[this.getSeconds(t,n)]:null].filter(v)}},{key:"getMinutes",value:function(e,t){return m(this.getTotalSeconds(e,t)/60)}},{key:"getSeconds",value:function(e,t){var n=this.getTotalSeconds(e,t);return Math.abs(Math.ceil(60===n?0:n%60))}},{key:"getTotalSeconds",value:function(e,t){return e.getTime()===t.getTime()?0:Math.round((e.getTime()-t.getTime())/1e3)}}],[{key:"defineName",value:function(){return"MinuteCounter"}}]),n}(H),Ut=function(e){function n(){return t(this,n),l(this,i(n).apply(this,arguments))}return a(n,e),r(n,[{key:"format",value:function(e,t){var n=e.timer.started?t:new Date,r=e.originalValue||t,a=this.countdown?r:n,i=this.countdown?n:r,o=[[this.getHours(a,i)],[this.getMinutes(a,i)]];return this.showSeconds&&o.push([this.getSeconds(a,i)]),o}},{key:"getMinutes",value:function(e,t){return Math.abs(f(i(n.prototype),"getMinutes",this).call(this,e,t)%60)}},{key:"getHours",value:function(e,t){return Math.floor(this.getTotalSeconds(e,t)/60/60)}}],[{key:"defineName",value:function(){return"HourCounter"}}]),n}(Vt),Ht=function(e){function n(){return t(this,n),l(this,i(n).apply(this,arguments))}return a(n,e),r(n,[{key:"format",value:function(e,t){var n=e.started?t:new Date,r=e.originalValue||t,a=this.countdown?r:n,i=this.countdown?n:r,o=[[this.getDays(a,i)],[this.getHours(a,i)],[this.getMinutes(a,i)]];return this.showSeconds&&o.push([this.getSeconds(a,i)]),o}},{key:"getDays",value:function(e,t){return Math.floor(this.getTotalSeconds(e,t)/60/60/24)}},{key:"getHours",value:function(e,t){return Math.abs(f(i(n.prototype),"getHours",this).call(this,e,t)%24)}}],[{key:"defineName",value:function(){return"DayCounter"}}]),n}(Ut),Gt=function(e){function n(){return t(this,n),l(this,i(n).apply(this,arguments))}return a(n,e),r(n,[{key:"defaultDataType",value:function(){return Date}},{key:"defaultValue",value:function(){return new Date}},{key:"defaultAttributes",value:function(){return{showSeconds:!0,showLabels:!1}}},{key:"format",value:function(e,t){t||(t=new Date);var n=[[t.getHours()],[t.getMinutes()]];return this.showSeconds&&n.push([t.getSeconds()]),n}},{key:"increment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.value=new Date(this.value.value.getTime()+t+((new Date).getTime()-e.timer.lastLoop))}},{key:"decrement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.value=new Date(this.value.value.getTime()-t-((new Date).getTime()-e.timer.lastLoop))}}],[{key:"defineName",value:function(){return"TwentyFourHourClock"}}]),n}(H),qt=function(e){function n(){return t(this,n),l(this,i(n).apply(this,arguments))}return a(n,e),r(n,[{key:"defaultAttributes",value:function(){return{showLabels:!1,showSeconds:!0,showMeridium:!0}}},{key:"format",value:function(e,t){t||(t=new Date);var n=t.getHours(),r=[n>12?n-12:0===n?12:n,t.getMinutes()];return this.meridium=n>12?"pm":"am",this.showSeconds&&r.push(t.getSeconds()),r}}],[{key:"defineName",value:function(){return"TwelveHourClock"}}]),n}(Gt),Kt=function(e){function n(){return t(this,n),l(this,i(n).apply(this,arguments))}return a(n,e),r(n,[{key:"format",value:function(e,t){var n=e.timer.started?t:new Date,r=e.originalValue||t,a=this.countdown?r:n,i=this.countdown?n:r,o=[[this.getWeeks(a,i)],[this.getDays(a,i)],[this.getHours(a,i)],[this.getMinutes(a,i)]];return this.showSeconds&&o.push([this.getSeconds(a,i)]),o}},{key:"getWeeks",value:function(e,t){return Math.floor(this.getTotalSeconds(e,t)/60/60/24/7)}},{key:"getDays",value:function(e,t){return Math.abs(f(i(n.prototype),"getDays",this).call(this,e,t)%7)}}],[{key:"defineName",value:function(){return"WeekCounter"}}]),n}(Ht),Xt=function(e){function n(){return t(this,n),l(this,i(n).apply(this,arguments))}return a(n,e),r(n,[{key:"format",value:function(e,t){var n=e.timer.started?t:new Date,r=e.originalValue||t,a=this.countdown?r:n,i=this.countdown?n:r,o=[[this.getYears(a,i)],[this.getWeeks(a,i)],[this.getDays(a,i)],[this.getHours(a,i)],[this.getMinutes(a,i)]];return this.showSeconds&&o.push([this.getSeconds(a,i)]),o}},{key:"getYears",value:function(e,t){return Math.floor(Math.max(0,this.getTotalSeconds(e,t)/60/60/24/7/52))}},{key:"getWeeks",value:function(e,t){return Math.abs(f(i(n.prototype),"getWeeks",this).call(this,e,t)%52)}}],[{key:"defineName",value:function(){return"YearCounter"}}]),n}(Kt),Zt=Object.freeze({Counter:jt,DayCounter:Ht,MinuteCounter:Vt,HourCounter:Ut,TwelveHourClock:qt,TwentyFourHourClock:Gt,WeekCounter:Kt,YearCounter:Xt});function Yt(e,t){Mt(e,[Ot("div",{class:"flip-clock-dot top"}),Ot("div",{class:"flip-clock-dot bottom"})])}function Jt(e,t){return e?e.childNodes?e.childNodes[t]:e[t]:null}function Qt(e){return e?e.querySelector(".flip-clock-list-item:first-child .top").innerHTML:null}function $t(e,t){Mt(e,t.value.digits.map((function(e,n){var r=Jt(t.el?t.el.querySelectorAll(".flip-clock-group"):null,n),a=e.map((function(e,n){var a=Qt(Jt(r?r.querySelectorAll(".flip-clock-list"):null,n));return t.createList(e,{domValue:a,countdown:t.countdown,animationRate:t.face.animationRate||t.face.delay})}));return t.createGroup(a)})).map((function(e){return e.render()})))}function en(e,t){Mt(e,t.items.map((function(e){return e.render()})))}function tn(e,t){e.innerHTML=t.t(t.label)}function nn(e,t){var n=t.domValue||(t.countdown?B(t.value):W(t.value));t.domValue&&t.domValue!==t.value&&e.classList.add("flip"),e.style.animationDelay="".concat(t.animationRate/2,"ms"),e.style.animationDuration="".concat(t.animationRate/2,"ms"),t.items=[t.createListItem(t.value,{active:!0}),t.createListItem(n,{active:!1})],Mt(e,t.items.map((function(e){return e.render()})))}function rn(e,t){var n=!0===t.active?"active":!1===t.active?"before":null;e.classList.add(n),Mt(e,[Ot("div",[Ot("div",t.value,{class:"top"}),Ot("div",t.value,{class:"bottom"})],{class:"flip-clock-list-item-inner"})])}function an(e,t){t.createDivider().mount(e,e.childNodes[1]),t.createDivider().mount(e,e.childNodes[3]),t.face.showSeconds&&t.createDivider().mount(e,e.childNodes[5]),t.face.showLabels&&(t.createLabel("days").mount(e.childNodes[0]),t.createLabel("hours").mount(e.childNodes[2]),t.createLabel("minutes").mount(e.childNodes[4]),t.face.showSeconds&&t.createLabel("seconds").mount(e.childNodes[6]))}function on(e,t){t.createDivider().mount(e,e.childNodes[1]),t.face.showSeconds&&t.createDivider().mount(e,e.childNodes[3]),t.face.showLabels&&(t.createLabel("hours").mount(e.childNodes[0]),t.createLabel("minutes").mount(e.childNodes[2]),t.face.showSeconds&&t.createLabel("seconds").mount(e.childNodes[4]))}function sn(e,t){t.face.showSeconds&&t.createDivider().mount(e,e.childNodes[1]),t.face.showLabels&&(t.createLabel("minutes").mount(e.childNodes[0]),t.face.showSeconds&&t.createLabel("seconds").mount(e.childNodes[2]))}function un(e,t){t.createDivider().mount(e,e.childNodes[1]),t.face.showSeconds&&t.createDivider().mount(e,e.childNodes[3]),t.face.showLabels&&(t.createLabel("hours").mount(e.childNodes[0]),t.createLabel("minutes").mount(e.childNodes[2]),t.face.showSeconds&&t.createLabel("seconds").mount(e.childNodes[4]))}function cn(e,t){if(un(e,t),t.face.showMeridium&&t.face.meridium){var n=t.createLabel(t.face.meridium),r=e.childNodes[e.childNodes.length-1];n.mount(r).classList.add("flip-clock-meridium")}}function ln(e,t){t.createDivider().mount(e,e.childNodes[1]),t.createDivider().mount(e,e.childNodes[3]),t.createDivider().mount(e,e.childNodes[5]),t.face.showSeconds&&t.createDivider().mount(e,e.childNodes[7]),t.face.showLabels&&(t.createLabel("weeks").mount(e.childNodes[0]),t.createLabel("days").mount(e.childNodes[2]),t.createLabel("hours").mount(e.childNodes[4]),t.createLabel("minutes").mount(e.childNodes[6]),t.face.showSeconds&&t.createLabel("seconds").mount(e.childNodes[8]))}function dn(e,t){t.createDivider().mount(e,e.childNodes[1]),t.createDivider().mount(e,e.childNodes[3]),t.createDivider().mount(e,e.childNodes[5]),t.createDivider().mount(e,e.childNodes[7]),t.face.showSeconds&&t.createDivider().mount(e,e.childNodes[9]),t.face.showLabels&&(t.createLabel("years").mount(e.childNodes[0]),t.createLabel("weeks").mount(e.childNodes[2]),t.createLabel("days").mount(e.childNodes[4]),t.createLabel("hours").mount(e.childNodes[6]),t.createLabel("minutes").mount(e.childNodes[8]),t.face.showSeconds&&t.createLabel("seconds").mount(e.childNodes[10]))}var fn={face:jt,theme:{Divider:Yt,FlipClock:$t,Group:en,Label:tn,List:nn,ListItem:rn,faces:Object.freeze({DayCounter:an,HourCounter:on,MinuteCounter:sn,TwelveHourClock:cn,TwentyFourHourClock:un,WeekCounter:ln,YearCounter:dn})},language:ue},pn=function(e){function n(e,r,a){var o;t(this,n),V(e,HTMLElement)||p(U.element),T(r)&&!a&&(a=r,r=void 0);var s=a.face||fn.face;return delete a.face,(o=l(this,i(n).call(this,Object.assign({originalValue:r,theme:fn.theme,language:fn.language,timer:Wt.make(a.interval||1e3)},a)))).face||(o.face=s),o.mount(e),o}return a(n,e),r(n,[{key:"mount",value:function(e){return f(i(n.prototype),"mount",this).call(this,e),this.face.mounted(this),this}},{key:"render",value:function(){return f(i(n.prototype),"render",this).call(this),this.theme.faces[this.face.name]&&this.theme.faces[this.face.name](this.el,this),this.face.rendered(this),this.el}},{key:"start",value:function(e){var t=this;return this.timer.started||(this.value=this.originalValue),I(this.face.stopAt)&&(this.face.stopAt=this.stopAt),I(this.face.originalValue)&&(this.face.originalValue=this.originalValue),this.timer.start((function(){t.face.interval(t,e)})),this.face.started(this),this.emit("start")}},{key:"stop",value:function(e){return this.timer.stop(e),this.face.stopped(this),this.emit("stop")}},{key:"reset",value:function(e){var t=this;return this.value=this.originalValue,this.timer.reset((function(){return t.interval(t,e)})),this.face.reset(this),this.emit("reset")}},{key:"increment",value:function(e){return this.face.increment(this,e),this}},{key:"decrement",value:function(e){return this.face.decrement(this,e),this}},{key:"createDivider",value:function(e){return Pt.make(Object.assign({theme:this.theme,language:this.language},e))}},{key:"createList",value:function(e,t){return Lt.make(e,Object.assign({theme:this.theme,language:this.language},t))}},{key:"createLabel",value:function(e,t){return Bt.make(e,Object.assign({theme:this.theme,language:this.language},t))}},{key:"createGroup",value:function(e,t){return zt.make(e,Object.assign({theme:this.theme,language:this.language},t))}},{key:"face",get:function(){return this.$face},set:function(e){V(e,[H,"string","function"])||p(U.face),this.$face=(Zt[e]||e).make(Object.assign(this.getPublicAttributes(),{originalValue:this.face?this.face.originalValue:void 0})),this.$face.initialized(this),this.value?this.$face.value=this.face.createFaceValue(this,this.value.value):this.value||(this.value=this.originalValue),this.el&&this.render()}},{key:"stopAt",get:function(){return _(this.$stopAt)?this.$stopAt(this):this.$stopAt},set:function(e){this.$stopAt=e}},{key:"timer",get:function(){return this.$timer},set:function(e){V(e,Wt)||p(U.timer),this.$timer=e}},{key:"value",get:function(){return this.face?this.face.value:null},set:function(e){if(!this.face)throw new Error("A face must be set before setting a value.");e instanceof j?this.face.value=e:this.value?this.face.value=this.face.value.clone(e):this.face.value=this.face.createFaceValue(this,e),this.el&&this.render()}},{key:"originalValue",get:function(){return _(this.$originalValue)&&!this.$originalValue.name?this.$originalValue():I(this.$originalValue)||S(this.$originalValue)?this.face?this.face.defaultValue():void 0:this.$originalValue},set:function(e){this.$originalValue=e}}],[{key:"defineName",value:function(){return"FlipClock"}},{key:"setDefaultFace",value:function(e){V(e,H)||p(U.face),fn.face=e}},{key:"setDefaultTheme",value:function(e){V(e,"object")||p(U.theme),fn.theme=e}},{key:"setDefaultLanguage",value:function(e){V(e,"object")||p(U.language),fn.language=e}},{key:"defaults",get:function(){return fn}}]),n}(Ft);return pn}()},1725:function(e,t,n){var r=n(781)(n(7289),"DataView");e.exports=r},9748:function(e,t,n){var r=n(6545),a=n(9843),i=n(6266),o=n(7364),s=n(4156);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=a,u.prototype.get=i,u.prototype.has=o,u.prototype.set=s,e.exports=u},5745:function(e,t,n){var r=n(329),a=n(9666),i=n(2523),o=n(4397),s=n(3316);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=a,u.prototype.get=i,u.prototype.has=o,u.prototype.set=s,e.exports=u},8579:function(e,t,n){var r=n(781)(n(7289),"Map");e.exports=r},3109:function(e,t,n){var r=n(9e3),a=n(7240),i=n(3414),o=n(7140),s=n(5429);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=a,u.prototype.get=i,u.prototype.has=o,u.prototype.set=s,e.exports=u},9946:function(e,t,n){var r=n(781)(n(7289),"Promise");e.exports=r},4199:function(e,t,n){var r=n(781)(n(7289),"Set");e.exports=r},4526:function(e,t,n){var r=n(3109),a=n(5845),i=n(5544);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=a,o.prototype.has=i,e.exports=o},7016:function(e,t,n){var r=n(5745),a=n(3653),i=n(3359),o=n(2571),s=n(1698),u=n(5883);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=a,c.prototype.delete=i,c.prototype.get=o,c.prototype.has=s,c.prototype.set=u,e.exports=c},8624:function(e,t,n){var r=n(7289).Symbol;e.exports=r},6759:function(e,t,n){var r=n(7289).Uint8Array;e.exports=r},3289:function(e,t,n){var r=n(781)(n(7289),"WeakMap");e.exports=r},4951:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}},3200:function(e,t,n){var r=n(4499),a=n(2794),i=n(5585),o=n(667),s=n(674),u=n(3153),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),l=!n&&a(e),d=!n&&!l&&o(e),f=!n&&!l&&!d&&u(e),p=n||l||d||f,h=p?r(e.length,String):[],m=h.length;for(var v in e)!t&&!c.call(e,v)||p&&("length"==v||d&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,m))||h.push(v);return h}},5349:function(e){e.exports=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}},9330:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},9194:function(e,t,n){var r=n(3666);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},2606:function(e,t,n){var r=n(5349),a=n(5585);e.exports=function(e,t,n){var i=t(e);return a(e)?i:r(i,n(e))}},8665:function(e,t,n){var r=n(8624),a=n(3596),i=n(8186),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?a(e):i(e)}},1276:function(e,t,n){var r=n(8665),a=n(9752);e.exports=function(e){return a(e)&&"[object Arguments]"==r(e)}},7081:function(e,t,n){var r=n(9110),a=n(9752);e.exports=function e(t,n,i,o,s){return t===n||(null==t||null==n||!a(t)&&!a(n)?t!==t&&n!==n:r(t,n,i,o,e,s))}},9110:function(e,t,n){var r=n(7016),a=n(4132),i=n(9820),o=n(6353),s=n(8466),u=n(5585),c=n(667),l=n(3153),d="[object Arguments]",f="[object Array]",p="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,v,g){var y=u(e),b=u(t),x=y?f:s(e),A=b?f:s(t),k=(x=x==d?p:x)==p,w=(A=A==d?p:A)==p,S=x==A;if(S&&c(e)){if(!c(t))return!1;y=!0,k=!1}if(S&&!k)return g||(g=new r),y||l(e)?a(e,t,n,m,v,g):i(e,t,x,n,m,v,g);if(!(1&n)){var I=k&&h.call(e,"__wrapped__"),E=w&&h.call(t,"__wrapped__");if(I||E){var C=I?e.value():e,N=E?t.value():t;return g||(g=new r),v(C,N,n,m,g)}}return!!S&&(g||(g=new r),o(e,t,n,m,v,g))}},3186:function(e,t,n){var r=n(375),a=n(5401),i=n(1845),o=n(2043),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,d=c.hasOwnProperty,f=RegExp("^"+l.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||a(e))&&(r(e)?f:s).test(o(e))}},7499:function(e,t,n){var r=n(8665),a=n(4276),i=n(9752),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&a(e.length)&&!!o[r(e)]}},3409:function(e,t,n){var r=n(6132),a=n(8723),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},4499:function(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},6902:function(e){e.exports=function(e){return function(t){return e(t)}}},8905:function(e){e.exports=function(e,t){return e.has(t)}},7683:function(e,t,n){var r=n(7289)["__core-js_shared__"];e.exports=r},4132:function(e,t,n){var r=n(4526),a=n(9330),i=n(8905);e.exports=function(e,t,n,o,s,u){var c=1&n,l=e.length,d=t.length;if(l!=d&&!(c&&d>l))return!1;var f=u.get(e),p=u.get(t);if(f&&p)return f==t&&p==e;var h=-1,m=!0,v=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++h<l;){var g=e[h],y=t[h];if(o)var b=c?o(y,g,h,t,e,u):o(g,y,h,e,t,u);if(void 0!==b){if(b)continue;m=!1;break}if(v){if(!a(t,(function(e,t){if(!i(v,t)&&(g===e||s(g,e,n,o,u)))return v.push(t)}))){m=!1;break}}else if(g!==y&&!s(g,y,n,o,u)){m=!1;break}}return u.delete(e),u.delete(t),m}},9820:function(e,t,n){var r=n(8624),a=n(6759),i=n(3666),o=n(4132),s=n(258),u=n(3671),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,d,f){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new a(e),new a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=s;case"[object Set]":var h=1&r;if(p||(p=u),e.size!=t.size&&!h)return!1;var m=f.get(e);if(m)return m==t;r|=2,f.set(e,t);var v=o(p(e),p(t),r,c,d,f);return f.delete(e),v;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},6353:function(e,t,n){var r=n(7253),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,o,s){var u=1&n,c=r(e),l=c.length;if(l!=r(t).length&&!u)return!1;for(var d=l;d--;){var f=c[d];if(!(u?f in t:a.call(t,f)))return!1}var p=s.get(e),h=s.get(t);if(p&&h)return p==t&&h==e;var m=!0;s.set(e,t),s.set(t,e);for(var v=u;++d<l;){var g=e[f=c[d]],y=t[f];if(i)var b=u?i(y,g,f,t,e,s):i(g,y,f,e,t,s);if(!(void 0===b?g===y||o(g,y,n,i,s):b)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var x=e.constructor,A=t.constructor;x==A||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof A&&A instanceof A||(m=!1)}return s.delete(e),s.delete(t),m}},2692:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},7253:function(e,t,n){var r=n(2606),a=n(6504),i=n(6385);e.exports=function(e){return r(e,i,a)}},6911:function(e,t,n){var r=n(1591);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},781:function(e,t,n){var r=n(3186),a=n(760);e.exports=function(e,t){var n=a(e,t);return r(n)?n:void 0}},3596:function(e,t,n){var r=n(8624),a=Object.prototype,i=a.hasOwnProperty,o=a.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(u){}var a=o.call(e);return r&&(t?e[s]=n:delete e[s]),a}},6504:function(e,t,n){var r=n(4951),a=n(2554),i=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(e){return null==e?[]:(e=Object(e),r(o(e),(function(t){return i.call(e,t)})))}:a;e.exports=s},8466:function(e,t,n){var r=n(1725),a=n(8579),i=n(9946),o=n(4199),s=n(3289),u=n(8665),c=n(2043),l="[object Map]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",h="[object DataView]",m=c(r),v=c(a),g=c(i),y=c(o),b=c(s),x=u;(r&&x(new r(new ArrayBuffer(1)))!=h||a&&x(new a)!=l||i&&x(i.resolve())!=d||o&&x(new o)!=f||s&&x(new s)!=p)&&(x=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return h;case v:return l;case g:return d;case y:return f;case b:return p}return t}),e.exports=x},760:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},6545:function(e,t,n){var r=n(1353);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},9843:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},6266:function(e,t,n){var r=n(1353),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(t,e)?t[e]:void 0}},7364:function(e,t,n){var r=n(1353),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}},4156:function(e,t,n){var r=n(1353);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},674:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},1591:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5401:function(e,t,n){var r=n(7683),a=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!a&&a in e}},6132:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},329:function(e){e.exports=function(){this.__data__=[],this.size=0}},9666:function(e,t,n){var r=n(9194),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}},2523:function(e,t,n){var r=n(9194);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},4397:function(e,t,n){var r=n(9194);e.exports=function(e){return r(this.__data__,e)>-1}},3316:function(e,t,n){var r=n(9194);e.exports=function(e,t){var n=this.__data__,a=r(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}},9e3:function(e,t,n){var r=n(9748),a=n(5745),i=n(8579);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||a),string:new r}}},7240:function(e,t,n){var r=n(6911);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},3414:function(e,t,n){var r=n(6911);e.exports=function(e){return r(this,e).get(e)}},7140:function(e,t,n){var r=n(6911);e.exports=function(e){return r(this,e).has(e)}},5429:function(e,t,n){var r=n(6911);e.exports=function(e,t){var n=r(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}},258:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},1353:function(e,t,n){var r=n(781)(Object,"create");e.exports=r},8723:function(e,t,n){var r=n(9698)(Object.keys,Object);e.exports=r},7785:function(e,t,n){e=n.nmd(e);var r=n(2692),a=t&&!t.nodeType&&t,i=a&&e&&!e.nodeType&&e,o=i&&i.exports===a&&r.process,s=function(){try{var e=i&&i.require&&i.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=s},8186:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},9698:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},7289:function(e,t,n){var r=n(2692),a="object"==typeof self&&self&&self.Object===Object&&self,i=r||a||Function("return this")();e.exports=i},5845:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},5544:function(e){e.exports=function(e){return this.__data__.has(e)}},3671:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},3653:function(e,t,n){var r=n(5745);e.exports=function(){this.__data__=new r,this.size=0}},3359:function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},2571:function(e){e.exports=function(e){return this.__data__.get(e)}},1698:function(e){e.exports=function(e){return this.__data__.has(e)}},5883:function(e,t,n){var r=n(5745),a=n(8579),i=n(3109);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!a||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(o)}return n.set(e,t),this.size=n.size,this}},2043:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},3666:function(e){e.exports=function(e,t){return e===t||e!==e&&t!==t}},2794:function(e,t,n){var r=n(1276),a=n(9752),i=Object.prototype,o=i.hasOwnProperty,s=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return a(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},5585:function(e){var t=Array.isArray;e.exports=t},2114:function(e,t,n){var r=n(375),a=n(4276);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},667:function(e,t,n){e=n.nmd(e);var r=n(7289),a=n(5535),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,s=o&&o.exports===i?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||a;e.exports=u},1905:function(e,t,n){var r=n(7081);e.exports=function(e,t){return r(e,t)}},375:function(e,t,n){var r=n(8665),a=n(1845);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},4276:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},1845:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},9752:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},3153:function(e,t,n){var r=n(7499),a=n(6902),i=n(7785),o=i&&i.isTypedArray,s=o?a(o):r;e.exports=s},6385:function(e,t,n){var r=n(3200),a=n(3409),i=n(2114);e.exports=function(e){return i(e)?r(e):a(e)}},2554:function(e){e.exports=function(){return[]}},5535:function(e){e.exports=function(){return!1}},9849:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(I){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=u(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=u(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?g:v;if(t){if(e<0)return g;if(e>=p)return k}else{if(e<=-h)return w;if(e+1>=h)return A}return e<0?s(-e,t).neg():u(e%f|0,e/f|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=s,n.fromBits=u;var c=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return v;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var a=s(c(n,8)),i=v,o=0;o<e.length;o+=8){var u=Math.min(8,e.length-o),d=parseInt(e.substring(o,o+u),n);if(u<8){var f=s(c(n,u));i=i.mul(f).add(s(d))}else i=(i=i.mul(a)).add(s(d))}return i.unsigned=t,i}function d(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?l(e,t):u(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=d;var f=4294967296,p=f*f,h=p/2,m=o(1<<24),v=o(0);n.ZERO=v;var g=o(0,!0);n.UZERO=g;var y=o(1);n.ONE=y;var b=o(1,!0);n.UONE=b;var x=o(-1);n.NEG_ONE=x;var A=u(-1,2147483647,!1);n.MAX_VALUE=A;var k=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=k;var w=u(0,-2147483648,!1);n.MIN_VALUE=w;var S=n.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(w)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(c(e,6),this.unsigned),i=this,o="";;){var u=i.div(a),l=(i.sub(u.mul(a)).toInt()>>>0).toString(e);if((i=u).isZero())return l+o;for(;l.length<6;)l="0"+l;o=""+l+o}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(w)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1===(1&this.low)},S.isEven=function(){return 0===(1&this.low)},S.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(w)?w:this.not().add(y)},S.neg=S.negate,S.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,c=e.low>>>16,l=0,f=0,p=0,h=0;return p+=(h+=i+(65535&e.low))>>>16,f+=(p+=a+c)>>>16,l+=(f+=n+s)>>>16,l+=t+o,u((p&=65535)<<16|(h&=65535),(l&=65535)<<16|(f&=65535),this.unsigned)},S.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return v;if(r(e)||(e=d(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return v;if(this.eq(w))return e.isOdd()?w:v;if(e.eq(w))return this.isOdd()?w:v;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,i=this.low>>>16,o=65535&this.low,c=e.high>>>16,l=65535&e.high,f=e.low>>>16,p=65535&e.low,h=0,g=0,y=0,b=0;return y+=(b+=o*p)>>>16,g+=(y+=i*p)>>>16,y&=65535,g+=(y+=o*f)>>>16,h+=(g+=a*p)>>>16,g&=65535,h+=(g+=i*f)>>>16,g&=65535,h+=(g+=o*l)>>>16,h+=n*p+a*f+i*l+o*c,u((y&=65535)<<16|(b&=65535),(h&=65535)<<16|(g&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,a,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:v;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return b;i=g}else{if(this.eq(w))return e.eq(y)||e.eq(x)?w:e.eq(w)?y:(n=this.shr(1).div(e).shl(1)).eq(v)?e.isNegative()?y:x:(a=this.sub(e.mul(n)),i=n.add(a.div(e)));if(e.eq(w))return this.unsigned?g:v;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=v}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),l=o<=48?1:c(2,o-48),f=s(n),p=f.mul(e);p.isNegative()||p.gt(a);)p=(f=s(n-=l,this.unsigned)).mul(e);f.isZero()&&(f=y),i=i.add(f),a=a.sub(p)}return i},S.div=S.divide,S.modulo=function(e){return r(e)||(e=d(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return u(~this.low,~this.high,this.unsigned)},S.and=function(e){return r(e)||(e=d(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return r(e)||(e=d(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return r(e)||(e=d(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},1843:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,i){for(var o,s,u=a(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(u[l]=o[l]);if(t){s=t(o);for(var d=0;d<s.length;d++)r.call(o,s[d])&&(u[s[d]]=o[s[d]])}}return u}},1729:function(e,t,n){"use strict";var r=n(9165);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},5192:function(e,t,n){e.exports=n(1729)()},9165:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},7065:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}},5824:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.injectCSS=u,t.removeCSS=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l(e,n);null===r||void 0===r||null===(t=r.parentNode)||void 0===t||t.removeChild(r)},t.updateCSS=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=s(n);if(!c.has(r)){var a=u("",n),i=a.parentNode;c.set(r,i),i.removeChild(a)}var d=l(t,n);if(d){var f,p,h;if((null===(f=n.csp)||void 0===f?void 0:f.nonce)&&d.nonce!==(null===(p=n.csp)||void 0===p?void 0:p.nonce))d.nonce=null===(h=n.csp)||void 0===h?void 0:h.nonce;return d.innerHTML!==e&&(d.innerHTML=e),d}var m=u(e,n);return m.setAttribute(o(n),t),m};var a=r(n(7065)),i="rc-util-key";function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):i}function s(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function u(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,a.default)())return null;var r,i=document.createElement("style");(null===(t=n.csp)||void 0===t?void 0:t.nonce)&&(i.nonce=null===(r=n.csp)||void 0===r?void 0:r.nonce);i.innerHTML=e;var o=s(n),u=o.firstChild;return n.prepend&&o.prepend?o.prepend(i):n.prepend&&u?o.insertBefore(i,u):o.appendChild(i),i}var c=new Map;function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s(t);return Array.from(c.get(n).children).find((function(n){return"STYLE"===n.tagName&&n.getAttribute(o(t))===e}))}},4287:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.call=i,t.default=void 0,t.note=a,t.noteOnce=function(e,t){i(a,e,t)},t.resetWarned=function(){n={}},t.warning=r,t.warningOnce=o;var n={};function r(e,t){0}function a(e,t){0}function i(e,t,r){t||n[r]||(e(!1,r),n[r]=!0)}function o(e,t){i(r,e,t)}var s=o;t.default=s},4738:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function A(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case d:case i:case s:case o:case p:return e;default:switch(e=e&&e.$$typeof){case c:case f:case v:case m:case u:return e;default:return t}}case a:return t}}}function k(e){return A(e)===d}t.isFragment=function(e){return A(e)===i},t.isMemo=function(e){return A(e)===m}},2715:function(e,t,n){"use strict";e.exports=n(4738)},534:function(e,t,n){"use strict";var r=n(7313),a=n(2224);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function m(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=v.hasOwnProperty(t)?v[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(h,e)||!d.call(p,e)&&(f.test(e)?h[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),k=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var F=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=F&&e[F]||e["@@iterator"])?e:null}var D,L=Object.assign;function z(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var B=!1;function W(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var u="\n"+a[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function j(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=W(e.type,!1);case 11:return e=W(e.type.render,!1);case 1:return e=W(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case k:return"Portal";case I:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case _:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,de=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(pe).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ge=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function Ae(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,we=null,Se=null;function Ie(e){if(e=ba(e)){if("function"!==typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=Aa(t),ke(e.stateNode,e.type,t))}}function Ee(e){we?Se?Se.push(e):Se=[e]:we=e}function Ce(){if(we){var e=we,t=Se;if(Se=we=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ne(e,t){return e(t)}function Te(){}var _e=!1;function Re(e,t,n){if(_e)return e(t,n);_e=!0;try{return Ne(e,t,n)}finally{_e=!1,(null!==we||null!==Se)&&(Te(),Ce())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var r=Aa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Oe=!1;if(l)try{var Fe={};Object.defineProperty(Fe,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Fe,Fe),window.removeEventListener("test",Fe,Fe)}catch(le){Oe=!1}function Pe(e,t,n,r,a,i,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var De=!1,Le=null,ze=!1,Be=null,We={onError:function(e){De=!0,Le=e}};function je(e,t,n,r,a,i,o,s,u){De=!1,Le=null,Pe.apply(We,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(i(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){n=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===n)return He(a),e;if(o===r)return He(a),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=o;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=o;break}if(u===r){s=!0,r=a,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=a;break}if(u===r){s=!0,r=o,n=a;break}u=u.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=a.unstable_scheduleCallback,Xe=a.unstable_cancelCallback,Ze=a.unstable_shouldYield,Ye=a.unstable_requestPaint,Je=a.unstable_now,Qe=a.unstable_getCurrentPriorityLevel,$e=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~a;0!==s?r=dt(s):0!==(i&=o)&&(r=dt(i))}else 0!==(o=n&~a)?r=dt(o):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-ot(t)),r|=e[n],t&=~a;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var At,kt,wt,St,It,Et=!1,Ct=[],Nt=null,Tt=null,_t=null,Rt=new Map,Mt=new Map,Ot=[],Ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":_t=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Dt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Lt(e){var t=ya(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void It(e.priority,(function(){wt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ba(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Bt(e,t,n){zt(e)&&n.delete(t)}function Wt(){Et=!1,null!==Nt&&zt(Nt)&&(Nt=null),null!==Tt&&zt(Tt)&&(Tt=null),null!==_t&&zt(_t)&&(_t=null),Rt.forEach(Bt),Mt.forEach(Bt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Wt)))}function Vt(e){function t(t){return jt(t,e)}if(0<Ct.length){jt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Nt&&jt(Nt,e),null!==Tt&&jt(Tt,e),null!==_t&&jt(_t,e),Rt.forEach(t),Mt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Lt(n),null===n.blockedOn&&Ot.shift()}var Ut=x.ReactCurrentBatchConfig,Ht=!0;function Gt(e,t,n,r){var a=bt,i=Ut.transition;Ut.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=a,Ut.transition=i}}function qt(e,t,n,r){var a=bt,i=Ut.transition;Ut.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=a,Ut.transition=i}}function Kt(e,t,n,r){if(Ht){var a=Zt(e,t,n,r);if(null===a)Hr(e,t,r,Xt,n),Pt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Nt=Dt(Nt,e,t,n,r,a),!0;case"dragenter":return Tt=Dt(Tt,e,t,n,r,a),!0;case"mouseover":return _t=Dt(_t,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Rt.set(i,Dt(Rt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Mt.set(i,Dt(Mt.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Ft.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&At(i),null===(i=Zt(e,t,n,r))&&Hr(e,t,r,Xt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Xt=null;function Zt(e,t,n,r){if(Xt=null,null!==(e=ya(e=Ae(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Qt=null,$t=null;function en(){if($t)return $t;var e,t,n=Qt,r=n.length,a="value"in Jt?Jt.value:Jt.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return $t=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),dn=L({},cn,{view:0,detail:0}),fn=an(dn),pn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),hn=an(pn),mn=an(L({},pn,{dataTransfer:0})),vn=an(L({},dn,{relatedTarget:0})),gn=an(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),xn=an(L({},cn,{data:0})),An={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function In(){return Sn}var En=L({},dn,{key:function(e){if(e.key){var t=An[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(En),Nn=an(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=an(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),_n=an(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=an(Rn),On=[9,13,27,32],Fn=l&&"CompositionEvent"in window,Pn=null;l&&"documentMode"in document&&(Pn=document.documentMode);var Dn=l&&"TextEvent"in window&&!Pn,Ln=l&&(!Fn||Pn&&8<Pn&&11>=Pn),zn=String.fromCharCode(32),Bn=!1;function Wn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Gn(e,t,n,r){Ee(r),0<(t=qr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function Xn(e){zr(e,0)}function Zn(e){if(K(xa(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Qn;if(l){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Qn=$n}else Qn=!1;Jn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Kn=qn=null)}function nr(e){if("value"===e.propertyName&&Zn(Kn)){var t=[];Gn(t,Kn,e,Ae(e)),Re(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Kn)}function ir(e,t){if("click"===e)return Zn(t)}function or(e,t){if("input"===e||"change"===e)return Zn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!sr(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=lr(n,i);var o=lr(n,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=l&&"documentMode"in document&&11>=document.documentMode,vr=null,gr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==vr||vr!==X(r)||("selectionStart"in(r=vr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&ur(yr,r)||(yr=r,0<(r=qr(gr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function Ar(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:Ar("Animation","AnimationEnd"),animationiteration:Ar("Animation","AnimationIteration"),animationstart:Ar("Animation","AnimationStart"),transitionend:Ar("Transition","TransitionEnd")},wr={},Sr={};function Ir(e){if(wr[e])return wr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return wr[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Er=Ir("animationend"),Cr=Ir("animationiteration"),Nr=Ir("animationstart"),Tr=Ir("transitionend"),_r=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){_r.set(e,t),u(t,[e])}for(var Or=0;Or<Rr.length;Or++){var Fr=Rr[Or];Mr(Fr.toLowerCase(),"on"+(Fr[0].toUpperCase()+Fr.slice(1)))}Mr(Er,"onAnimationEnd"),Mr(Cr,"onAnimationIteration"),Mr(Nr,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,o,s,u,c){if(je.apply(this,arguments),De){if(!De)throw Error(i(198));var l=Le;De=!1,Le=null,ze||(ze=!0,Be=l)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==i&&a.isPropagationStopped())break e;Lr(a,s,c),i=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==i&&a.isPropagationStopped())break e;Lr(a,s,c),i=u}}}if(ze)throw e=Be,ze=!1,Be=null,e}function Br(e,t){var n=t[ma];void 0===n&&(n=t[ma]=new Set);var r=e+"__bubble";n.has(r)||(Ur(t,e,2,!1),n.add(r))}function Wr(e,t,n){var r=0;t&&(r|=4),Ur(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||Wr(t,!1,e),Wr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Wr("selectionchange",!1,t))}}function Ur(e,t,n,r){switch(Yt(t)){case 1:var a=Gt;break;case 4:a=qt;break;default:a=Kt}n=a.bind(null,t,n,e),a=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=ya(s)))return;if(5===(u=o.tag)||6===u){r=i=o;continue e}s=s.parentNode}}r=r.return}Re((function(){var r=i,a=Ae(n),o=[];e:{var s=_r.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Cn;break;case"focusin":c="focus",u=vn;break;case"focusout":c="blur",u=vn;break;case"beforeblur":case"afterblur":u=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Tn;break;case Er:case Cr:case Nr:u=gn;break;case Tr:u=_n;break;case"scroll":u=fn;break;case"wheel":u=Mn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Nn}var l=0!==(4&t),d=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var p,h=r;null!==h;){var m=(p=h).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==f&&(null!=(m=Me(h,f))&&l.push(Gr(h,m,p)))),d)break;h=h.return}0<l.length&&(s=new u(s,c,null,n,a),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[ha])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=hn,m="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(l=Nn,m="onPointerLeave",f="onPointerEnter",h="pointer"),d=null==u?s:xa(u),p=null==c?s:xa(c),(s=new l(m,h+"leave",u,n,a)).target=d,s.relatedTarget=p,m=null,ya(a)===r&&((l=new l(f,h+"enter",c,n,a)).target=p,l.relatedTarget=d,m=l),d=m,u&&c)e:{for(f=c,h=0,p=l=u;p;p=Kr(p))h++;for(p=0,m=f;m;m=Kr(m))p++;for(;0<h-p;)l=Kr(l),h--;for(;0<p-h;)f=Kr(f),p--;for(;h--;){if(l===f||null!==f&&l===f.alternate)break e;l=Kr(l),f=Kr(f)}l=null}else l=null;null!==u&&Xr(o,s,u,l,!1),null!==c&&null!==d&&Xr(o,d,c,l,!0)}if("select"===(u=(s=r?xa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var v=Yn;else if(Hn(s))if(Jn)v=or;else{v=ar;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ir);switch(v&&(v=v(e,r))?Gn(o,v,n,a):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?xa(r):window,e){case"focusin":(Hn(g)||"true"===g.contentEditable)&&(vr=g,gr=r,yr=null);break;case"focusout":yr=gr=vr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(o,n,a)}var y;if(Fn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Wn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(y=en()):(Qt="value"in(Jt=a)?Jt.value:Jt.textContent,Vn=!0)),0<(g=qr(r,b)).length&&(b=new xn(b,e,null,n,a),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=jn(n))&&(b.data=y))),(y=Dn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Bn=!0,zn);case"textInput":return(e=t.data)===zn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Fn&&Wn(e,t)?(e=en(),$t=Qt=Jt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(a=new xn("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=y))}zr(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Me(e,n))&&r.unshift(Gr(e,i,a)),null!=(i=Me(e,t))&&r.push(Gr(e,i,a))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(u=Me(n,i))&&o.unshift(Gr(n,u,s)):a||null!=(u=Me(n,i))&&o.push(Gr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Zr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Zr,"\n").replace(Yr,"")}function Qr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(i(425))}function $r(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function ua(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Vt(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function la(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),fa="__reactFiber$"+da,pa="__reactProps$"+da,ha="__reactContainer$"+da,ma="__reactEvents$"+da,va="__reactListeners$"+da,ga="__reactHandles$"+da;function ya(e){var t=e[fa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ha]||n[fa]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=la(e);null!==e;){if(n=e[fa])return n;e=la(e)}return t}n=(e=n).parentNode}return null}function ba(e){return!(e=e[fa]||e[ha])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function Aa(e){return e[pa]||null}var ka=[],wa=-1;function Sa(e){return{current:e}}function Ia(e){0>wa||(e.current=ka[wa],ka[wa]=null,wa--)}function Ea(e,t){wa++,ka[wa]=e.current,e.current=t}var Ca={},Na=Sa(Ca),Ta=Sa(!1),_a=Ca;function Ra(e,t){var n=e.type.contextTypes;if(!n)return Ca;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ma(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oa(){Ia(Ta),Ia(Na)}function Fa(e,t,n){if(Na.current!==Ca)throw Error(i(168));Ea(Na,t),Ea(Ta,n)}function Pa(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,U(e)||"Unknown",a));return L({},n,r)}function Da(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ca,_a=Na.current,Ea(Na,e),Ea(Ta,Ta.current),!0}function La(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Pa(e,t,_a),r.__reactInternalMemoizedMergedChildContext=e,Ia(Ta),Ia(Na),Ea(Na,e)):Ia(Ta),Ea(Ta,n)}var za=null,Ba=!1,Wa=!1;function ja(e){null===za?za=[e]:za.push(e)}function Va(){if(!Wa&&null!==za){Wa=!0;var e=0,t=bt;try{var n=za;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}za=null,Ba=!1}catch(a){throw null!==za&&(za=za.slice(e+1)),Ke($e,Va),a}finally{bt=t,Wa=!1}}return null}var Ua=x.ReactCurrentBatchConfig;function Ha(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ga=Sa(null),qa=null,Ka=null,Xa=null;function Za(){Xa=Ka=qa=null}function Ya(e){var t=Ga.current;Ia(Ga),e._currentValue=t}function Ja(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Qa(e,t){qa=e,Xa=Ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(As=!0),e.firstContext=null)}function $a(e){var t=e._currentValue;if(Xa!==e)if(e={context:e,memoizedValue:t,next:null},null===Ka){if(null===qa)throw Error(i(308));Ka=e,qa.dependencies={lanes:0,firstContext:e}}else Ka=Ka.next=e;return t}var ei=null,ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ai(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ii(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tc(e)?(null===(e=n.interleaved)?(t.next=t,null===ei?ei=[n]:ei.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function si(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ui(e,t,n,r){var a=e.updateQueue;ti=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?i=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==i){var d=a.baseState;for(o=0,l=c=u=null,s=i;;){var f=s.lane,p=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,m=s;switch(f=t,p=n,m.tag){case 1:if("function"===typeof(h=m.payload)){d=h.call(p,d,f);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(f="function"===typeof(h=m.payload)?h.call(p,d,f):h)||void 0===f)break e;d=L({},d,f);break e;case 2:ti=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=a.effects)?a.effects=[s]:f.push(s))}else p={eventTime:p,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=p,u=d):l=l.next=p,o|=f;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(f=s).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}if(null===l&&(u=d),a.baseState=u,a.firstBaseUpdate=c,a.lastBaseUpdate=l,null!==(t=a.shared.interleaved)){a=t;do{o|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Ou|=o,e.lanes=o,e.memoizedState=d}}function ci(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var li=(new r.Component).refs;function di(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fi={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ju(),a=Qu(e),i=ai(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ii(e,i),null!==(t=$u(e,a,r))&&oi(t,e,a)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ju(),a=Qu(e),i=ai(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ii(e,i),null!==(t=$u(e,a,r))&&oi(t,e,a)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ju(),r=Qu(e),a=ai(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),ii(e,a),null!==(t=$u(e,r,n))&&oi(t,e,r)}};function pi(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(a,i))}function hi(e,t,n){var r=!1,a=Ca,i=t.contextType;return"object"===typeof i&&null!==i?i=$a(i):(a=Ma(t)?_a:Na.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ra(e,a):Ca),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=fi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function mi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fi.enqueueReplaceState(t,t.state,null)}function vi(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=li,ni(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=$a(i):(i=Ma(t)?_a:Na.current,a.context=Ra(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(di(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&fi.enqueueReplaceState(a,a.state,null),ui(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}var gi=[],yi=0,bi=null,xi=0,Ai=[],ki=0,wi=null,Si=1,Ii="";function Ei(e,t){gi[yi++]=xi,gi[yi++]=bi,bi=e,xi=t}function Ci(e,t,n){Ai[ki++]=Si,Ai[ki++]=Ii,Ai[ki++]=wi,wi=e;var r=Si;e=Ii;var a=32-ot(r)-1;r&=~(1<<a),n+=1;var i=32-ot(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Si=1<<32-ot(t)+a|n<<a|r,Ii=i+e}else Si=1<<i|n<<a|r,Ii=e}function Ni(e){null!==e.return&&(Ei(e,1),Ci(e,1,0))}function Ti(e){for(;e===bi;)bi=gi[--yi],gi[yi]=null,xi=gi[--yi],gi[yi]=null;for(;e===wi;)wi=Ai[--ki],Ai[ki]=null,Ii=Ai[--ki],Ai[ki]=null,Si=Ai[--ki],Ai[ki]=null}var _i=null,Ri=null,Mi=!1,Oi=null;function Fi(e,t){var n=_c(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Pi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,_i=e,Ri=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,_i=e,Ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==wi?{id:Si,overflow:Ii}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=_c(18,null,null,0)).stateNode=t,n.return=e,e.child=n,_i=e,Ri=null,!0);default:return!1}}function Di(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Li(e){if(Mi){var t=Ri;if(t){var n=t;if(!Pi(e,t)){if(Di(e))throw Error(i(418));t=ca(n.nextSibling);var r=_i;t&&Pi(e,t)?Fi(r,n):(e.flags=-4097&e.flags|2,Mi=!1,_i=e)}}else{if(Di(e))throw Error(i(418));e.flags=-4097&e.flags|2,Mi=!1,_i=e}}}function zi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;_i=e}function Bi(e){if(e!==_i)return!1;if(!Mi)return zi(e),Mi=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=Ri)){if(Di(e)){for(e=Ri;e;)e=ca(e.nextSibling);throw Error(i(418))}for(;t;)Fi(e,t),t=ca(t.nextSibling)}if(zi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ri=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ri=null}}else Ri=_i?ca(e.stateNode.nextSibling):null;return!0}function Wi(){Ri=_i=null,Mi=!1}function ji(e){null===Oi?Oi=[e]:Oi.push(e)}function Vi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=a.refs;t===li&&(t=a.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Ui(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hi(e){return(0,e._init)(e._payload)}function Gi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Dc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===w?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===M&&Hi(i)===t.type)?((r=a(t,n.props)).ref=Vi(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Vi(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Lc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Dc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case A:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Vi(e,null,t),n.return=e,n;case k:return(t=Lc(t,e.mode,n)).return=e,t;case M:return f(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Fc(t,e.mode,n,null)).return=e,t;Ui(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case A:return n.key===a?c(e,t,n,r):null;case k:return n.key===a?l(e,t,n,r):null;case M:return p(e,t,(a=n._init)(n._payload),r)}if(te(n)||P(n))return null!==a?null:d(e,t,n,r,null);Ui(e,n)}return null}function h(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case A:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case k:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a);case M:return h(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||P(r))return d(t,e=e.get(n)||null,r,a,null);Ui(t,r)}return null}function m(a,i,s,u){for(var c=null,l=null,d=i,m=i=0,v=null;null!==d&&m<s.length;m++){d.index>m?(v=d,d=null):v=d.sibling;var g=p(a,d,s[m],u);if(null===g){null===d&&(d=v);break}e&&d&&null===g.alternate&&t(a,d),i=o(g,i,m),null===l?c=g:l.sibling=g,l=g,d=v}if(m===s.length)return n(a,d),Mi&&Ei(a,m),c;if(null===d){for(;m<s.length;m++)null!==(d=f(a,s[m],u))&&(i=o(d,i,m),null===l?c=d:l.sibling=d,l=d);return Mi&&Ei(a,m),c}for(d=r(a,d);m<s.length;m++)null!==(v=h(d,a,m,s[m],u))&&(e&&null!==v.alternate&&d.delete(null===v.key?m:v.key),i=o(v,i,m),null===l?c=v:l.sibling=v,l=v);return e&&d.forEach((function(e){return t(a,e)})),Mi&&Ei(a,m),c}function v(a,s,u,c){var l=P(u);if("function"!==typeof l)throw Error(i(150));if(null==(u=l.call(u)))throw Error(i(151));for(var d=l=null,m=s,v=s=0,g=null,y=u.next();null!==m&&!y.done;v++,y=u.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=p(a,m,y.value,c);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(a,m),s=o(b,s,v),null===d?l=b:d.sibling=b,d=b,m=g}if(y.done)return n(a,m),Mi&&Ei(a,v),l;if(null===m){for(;!y.done;v++,y=u.next())null!==(y=f(a,y.value,c))&&(s=o(y,s,v),null===d?l=y:d.sibling=y,d=y);return Mi&&Ei(a,v),l}for(m=r(a,m);!y.done;v++,y=u.next())null!==(y=h(m,a,v,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=o(y,s,v),null===d?l=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(a,e)})),Mi&&Ei(a,v),l}return function e(r,i,o,u){if("object"===typeof o&&null!==o&&o.type===w&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case A:e:{for(var c=o.key,l=i;null!==l;){if(l.key===c){if((c=o.type)===w){if(7===l.tag){n(r,l.sibling),(i=a(l,o.props.children)).return=r,r=i;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&Hi(c)===l.type){n(r,l.sibling),(i=a(l,o.props)).ref=Vi(r,l,o),i.return=r,r=i;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===w?((i=Fc(o.props.children,r.mode,u,o.key)).return=r,r=i):((u=Oc(o.type,o.key,o.props,null,r.mode,u)).ref=Vi(r,i,o),u.return=r,r=u)}return s(r);case k:e:{for(l=o.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=a(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Lc(o,r.mode,u)).return=r,r=i}return s(r);case M:return e(r,i,(l=o._init)(o._payload),u)}if(te(o))return m(r,i,o,u);if(P(o))return v(r,i,o,u);Ui(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,o)).return=r,r=i):(n(r,i),(i=Dc(o,r.mode,u)).return=r,r=i),s(r)):n(r,i)}}var qi=Gi(!0),Ki=Gi(!1),Xi={},Zi=Sa(Xi),Yi=Sa(Xi),Ji=Sa(Xi);function Qi(e){if(e===Xi)throw Error(i(174));return e}function $i(e,t){switch(Ea(Ji,t),Ea(Yi,e),Ea(Zi,Xi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ia(Zi),Ea(Zi,t)}function eo(){Ia(Zi),Ia(Yi),Ia(Ji)}function to(e){Qi(Ji.current);var t=Qi(Zi.current),n=ue(t,e.type);t!==n&&(Ea(Yi,e),Ea(Zi,n))}function no(e){Yi.current===e&&(Ia(Zi),Ia(Yi))}var ro=Sa(0);function ao(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var io=[];function oo(){for(var e=0;e<io.length;e++)io[e]._workInProgressVersionPrimary=null;io.length=0}var so=x.ReactCurrentDispatcher,uo=x.ReactCurrentBatchConfig,co=0,lo=null,fo=null,po=null,ho=!1,mo=!1,vo=0,go=0;function yo(){throw Error(i(321))}function bo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,a,o){if(co=o,lo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=null===e||null===e.memoizedState?rs:as,e=n(r,a),mo){o=0;do{if(mo=!1,vo=0,25<=o)throw Error(i(301));o+=1,po=fo=null,t.updateQueue=null,so.current=is,e=n(r,a)}while(mo)}if(so.current=ns,t=null!==fo&&null!==fo.next,co=0,po=fo=lo=null,ho=!1,t)throw Error(i(300));return e}function Ao(){var e=0!==vo;return vo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===po?lo.memoizedState=po=e:po=po.next=e,po}function wo(){if(null===fo){var e=lo.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===po?lo.memoizedState:po.next;if(null!==t)po=t,fo=e;else{if(null===e)throw Error(i(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===po?lo.memoizedState=po=e:po=po.next=e}return po}function So(e,t){return"function"===typeof t?t(e):t}function Io(e){var t=wo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=fo,a=r.baseQueue,o=n.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,n.pending=null}if(null!==a){o=a.next,r=r.baseState;var u=s=null,c=null,l=o;do{var d=l.lane;if((co&d)===d)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:d,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,lo.lanes|=d,Ou|=d}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(As=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{o=a.lane,lo.lanes|=o,Ou|=o,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=wo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,o=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);sr(o,t.memoizedState)||(As=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Co(){}function No(e,t){var n=lo,r=wo(),a=t(),o=!sr(r.memoizedState,a);if(o&&(r.memoizedState=a,As=!0),r=r.queue,Bo(Ro.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==po&&1&po.memoizedState.tag){if(n.flags|=2048,Fo(9,_o.bind(null,n,r,a,t),void 0,null),null===Eu)throw Error(i(349));0!==(30&co)||To(n,t,a)}return a}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function _o(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&$u(e,1,-1)}function Ro(e,t,n){return n((function(){Mo(t)&&$u(e,1,-1)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Oo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:So,lastRenderedState:e},t.queue=e,e=e.dispatch=Jo.bind(null,lo,e),[t.memoizedState,e]}function Fo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Po(){return wo().memoizedState}function Do(e,t,n,r){var a=ko();lo.flags|=e,a.memoizedState=Fo(1|t,n,void 0,void 0===r?null:r)}function Lo(e,t,n,r){var a=wo();r=void 0===r?null:r;var i=void 0;if(null!==fo){var o=fo.memoizedState;if(i=o.destroy,null!==r&&bo(r,o.deps))return void(a.memoizedState=Fo(t,n,i,r))}lo.flags|=e,a.memoizedState=Fo(1|t,n,i,r)}function zo(e,t){return Do(8390656,8,e,t)}function Bo(e,t){return Lo(2048,8,e,t)}function Wo(e,t){return Lo(4,2,e,t)}function jo(e,t){return Lo(4,4,e,t)}function Vo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Uo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Lo(4,4,Vo.bind(null,t,e),n)}function Ho(){}function Go(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ko(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,As=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),lo.lanes|=n,Ou|=n,e.baseState=!0),t)}function Xo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=uo.transition;uo.transition={};try{e(!1),t()}finally{bt=n,uo.transition=r}}function Zo(){return wo().memoizedState}function Yo(e,t,n){var r=Qu(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e)?$o(t,n):(es(e,t,n),null!==(e=$u(e,r,n=Ju()))&&ts(e,t,r))}function Jo(e,t,n){var r=Qu(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))$o(t,a);else{es(e,t,a);var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,sr(s,o))return}catch(u){}null!==(e=$u(e,r,n=Ju()))&&ts(e,t,r)}}function Qo(e){var t=e.alternate;return e===lo||null!==t&&t===lo}function $o(e,t){mo=ho=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function es(e,t,n){tc(e)?(null===(e=t.interleaved)?(n.next=n,null===ei?ei=[t]:ei.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function ts(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var ns={readContext:$a,useCallback:yo,useContext:yo,useEffect:yo,useImperativeHandle:yo,useInsertionEffect:yo,useLayoutEffect:yo,useMemo:yo,useReducer:yo,useRef:yo,useState:yo,useDebugValue:yo,useDeferredValue:yo,useTransition:yo,useMutableSource:yo,useSyncExternalStore:yo,useId:yo,unstable_isNewReconciler:!1},rs={readContext:$a,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:$a,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4194308,4,Vo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Yo.bind(null,lo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Oo,useDebugValue:Ho,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Oo(!1),t=e[0];return e=Xo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lo,a=ko();if(Mi){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Eu)throw Error(i(349));0!==(30&co)||To(r,t,n)}a.memoizedState=n;var o={value:n,getSnapshot:t};return a.queue=o,zo(Ro.bind(null,r,o,e),[e]),r.flags|=2048,Fo(9,_o.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Eu.identifierPrefix;if(Mi){var n=Ii;t=":"+t+"R"+(n=(Si&~(1<<32-ot(Si)-1)).toString(32)+n),0<(n=vo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=go++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},as={readContext:$a,useCallback:Go,useContext:$a,useEffect:Bo,useImperativeHandle:Uo,useInsertionEffect:Wo,useLayoutEffect:jo,useMemo:qo,useReducer:Io,useRef:Po,useState:function(){return Io(So)},useDebugValue:Ho,useDeferredValue:function(e){return Ko(wo(),fo.memoizedState,e)},useTransition:function(){return[Io(So)[0],wo().memoizedState]},useMutableSource:Co,useSyncExternalStore:No,useId:Zo,unstable_isNewReconciler:!1},is={readContext:$a,useCallback:Go,useContext:$a,useEffect:Bo,useImperativeHandle:Uo,useInsertionEffect:Wo,useLayoutEffect:jo,useMemo:qo,useReducer:Eo,useRef:Po,useState:function(){return Eo(So)},useDebugValue:Ho,useDeferredValue:function(e){var t=wo();return null===fo?t.memoizedState=e:Ko(t,fo.memoizedState,e)},useTransition:function(){return[Eo(So)[0],wo().memoizedState]},useMutableSource:Co,useSyncExternalStore:No,useId:Zo,unstable_isNewReconciler:!1};function os(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a}}function ss(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var us,cs,ls,ds="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=ai(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ju||(ju=!0,Vu=r),ss(0,t)},n}function ps(e,t,n){(n=ai(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){ss(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ss(0,t),"function"!==typeof r&&(null===Uu?Uu=new Set([this]):Uu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function hs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ai(-1,1)).tag=2,ii(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}function gs(e,t){if(!Mi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ys(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function bs(e,t,n){var r=t.pendingProps;switch(Ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ys(t),null;case 1:case 17:return Ma(t.type)&&Oa(),ys(t),null;case 3:return r=t.stateNode,eo(),Ia(Ta),Ia(Na),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Bi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Oi&&(ic(Oi),Oi=null))),ys(t),null;case 5:no(t);var a=Qi(Ji.current);if(n=t.type,null!==e&&null!=t.stateNode)cs(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return ys(t),null}if(e=Qi(Zi.current),Bi(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fa]=t,r[pa]=o,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(a=0;a<Pr.length;a++)Br(Pr[a],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":Y(r,o),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Br("invalid",r);break;case"textarea":ae(r,o),Br("invalid",r)}for(var u in ye(n,o),a=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,c,e),a=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Br("scroll",r)}switch(n){case"input":q(r),$(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fa]=t,e[pa]=r,us(e,t),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),a=r;break;case"iframe":case"object":case"embed":Br("load",e),a=r;break;case"video":case"audio":for(a=0;a<Pr.length;a++)Br(Pr[a],e);a=r;break;case"source":Br("error",e),a=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),a=r;break;case"details":Br("toggle",e),a=r;break;case"input":Y(e,r),a=Z(e,r),Br("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=L({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Br("invalid",e)}for(o in ye(n,a),c=a)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ve(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&de(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Br("scroll",e):null!=l&&b(e,o,l,u))}switch(n){case"input":q(e),$(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return ys(t),null;case 6:if(e&&null!=t.stateNode)ls(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Qi(Ji.current),Qi(Zi.current),Bi(t)){if(r=t.stateNode,n=t.memoizedProps,r[fa]=t,(o=r.nodeValue!==n)&&null!==(e=_i))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fa]=t,t.stateNode=r}return ys(t),null;case 13:if(Ia(ro),r=t.memoizedState,Mi&&null!==Ri&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ri;r;)r=ca(r.nextSibling);return Wi(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Bi(t),null===e){if(!r)throw Error(i(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(i(317));r[fa]=t}else Wi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return ys(t),null}return null!==Oi&&(ic(Oi),Oi=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Bi(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Ru&&(Ru=3):hc())),null!==t.updateQueue&&(t.flags|=4),ys(t),null);case 4:return eo(),null===e&&Vr(t.stateNode.containerInfo),ys(t),null;case 10:return Ya(t.type._context),ys(t),null;case 19:if(Ia(ro),null===(o=t.memoizedState))return ys(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)gs(o,!1);else{if(0!==Ru||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=ao(e))){for(t.flags|=128,gs(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ea(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Bu&&(t.flags|=128,r=!0,gs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ao(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),gs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!Mi)return ys(t),null}else 2*Je()-o.renderingStartTime>Bu&&1073741824!==n&&(t.flags|=128,r=!0,gs(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ro.current,Ea(ro,r?1&n|2:1&n),t):(ys(t),null);case 22:case 23:return lc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Tu)&&(ys(t),6&t.subtreeFlags&&(t.flags|=8192)):ys(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}us=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},cs=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Qi(Zi.current);var i,o=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),o=[];break;case"select":a=L({},a,{value:void 0}),r=L({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(l in ye(n,r),n=null,a)if(!r.hasOwnProperty(l)&&a.hasOwnProperty(l)&&null!=a[l])if("style"===l){var u=a[l];for(i in u)u.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=a?a[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(i in u)!u.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&u[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Br("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},ls=function(e,t,n,r){n!==r&&(t.flags|=4)};var xs=x.ReactCurrentOwner,As=!1;function ks(e,t,n,r){t.child=null===e?Ki(t,null,n,r):qi(t,e.child,n,r)}function ws(e,t,n,r,a){n=n.render;var i=t.ref;return Qa(t,a),r=xo(e,t,n,r,i,a),n=Ao(),null===e||As?(Mi&&n&&Ni(t),t.flags|=1,ks(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hs(e,t,a))}function Ss(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Rc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Is(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Hs(e,t,a)}return t.flags|=1,(e=Mc(i,r)).ref=t.ref,e.return=t,t.child=e}function Is(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(ur(i,r)&&e.ref===t.ref){if(As=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,Hs(e,t,a);0!==(131072&e.flags)&&(As=!0)}}return Ns(e,t,n,r,a)}function Es(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ea(_u,Tu),Tu|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ea(_u,Tu),Tu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ea(_u,Tu),Tu|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ea(_u,Tu),Tu|=r;return ks(e,t,a,n),t.child}function Cs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ns(e,t,n,r,a){var i=Ma(n)?_a:Na.current;return i=Ra(t,i),Qa(t,a),n=xo(e,t,n,r,i,a),r=Ao(),null===e||As?(Mi&&r&&Ni(t),t.flags|=1,ks(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hs(e,t,a))}function Ts(e,t,n,r,a){if(Ma(n)){var i=!0;Da(t)}else i=!1;if(Qa(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),hi(t,n,r),vi(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=$a(c):c=Ra(t,c=Ma(n)?_a:Na.current);var l=n.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&mi(t,o,r,c),ti=!1;var f=t.memoizedState;o.state=f,ui(t,r,o,a),u=t.memoizedState,s!==r||f!==u||Ta.current||ti?("function"===typeof l&&(di(t,n,l,r),u=t.memoizedState),(s=ti||pi(t,n,s,r,f,u,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ri(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Ha(t.type,s),o.props=c,d=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=$a(u):u=Ra(t,u=Ma(n)?_a:Na.current);var p=n.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||f!==u)&&mi(t,o,r,u),ti=!1,f=t.memoizedState,o.state=f,ui(t,r,o,a);var h=t.memoizedState;s!==d||f!==h||Ta.current||ti?("function"===typeof p&&(di(t,n,p,r),h=t.memoizedState),(c=ti||pi(t,n,c,r,f,h,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return _s(e,t,n,r,i,a)}function _s(e,t,n,r,a,i){Cs(e,t);var o=0!==(128&t.flags);if(!r&&!o)return a&&La(t,n,!1),Hs(e,t,i);r=t.stateNode,xs.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=qi(t,e.child,null,i),t.child=qi(t,null,s,i)):ks(e,t,s,i),t.memoizedState=r.state,a&&La(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?Fa(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Fa(0,t.context,!1),$i(e,t.containerInfo)}function Ms(e,t,n,r,a){return Wi(),ji(a),t.flags|=256,ks(e,t,n,r),t.child}var Os={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ps(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Ds(e,t,n){var r,a=t.pendingProps,o=ro.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ea(ro,1&o),null===e)return Li(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=a.children,e=a.fallback,s?(a=t.mode,s=t.child,o={mode:"hidden",children:o},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=o):s=Pc(o,a,0,null),e=Fc(e,a,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(n),t.memoizedState=Os,e):Ls(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(u)return 256&t.flags?(t.flags&=-257,Ws(e,t,n,Error(i(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=a.fallback,o=t.mode,a=Pc({mode:"visible",children:a.children},o,0,null),(s=Fc(s,o,n,null)).flags|=2,a.return=t,s.return=t,a.sibling=s,t.child=a,0!==(1&t.mode)&&qi(t,e.child,null,n),t.child.memoizedState=Fs(n),t.memoizedState=Os,s);if(0===(1&t.mode))t=Ws(e,t,n,null);else if("$!"===r.data)t=Ws(e,t,n,Error(i(419)));else if(a=0!==(n&e.childLanes),As||a){if(null!==(a=Eu)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(a=0!==(s&(a.suspendedLanes|n))?0:s)&&a!==o.retryLane&&(o.retryLane=a,$u(e,a,-1))}hc(),t=Ws(e,t,n,Error(i(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Ri=ca(r.nextSibling),_i=t,Mi=!0,Oi=null,null!==n&&(Ai[ki++]=Si,Ai[ki++]=Ii,Ai[ki++]=wi,Si=n.id,Ii=n.overflow,wi=t),(t=Ls(t,t.pendingProps.children)).flags|=4096);return t}return s?(a=Bs(e,t,a.children,a.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Fs(n):Ps(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Os,a):(n=zs(e,t,a.children,n),t.memoizedState=null,n)}return s?(a=Bs(e,t,a.children,a.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Fs(n):Ps(o,n),s.childLanes=e.childLanes&~n,t.memoizedState=Os,a):(n=zs(e,t,a.children,n),t.memoizedState=null,n)}function Ls(e,t){return(t=Pc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zs(e,t,n,r){var a=e.child;return e=a.sibling,n=Mc(a,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Bs(e,t,n,r,a){var i=t.mode,o=(e=e.child).sibling,s={mode:"hidden",children:n};return 0===(1&i)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=Mc(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Mc(o,r):(r=Fc(r,i,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Ws(e,t,n,r){return null!==r&&ji(r),qi(t,e.child,null,n),(e=Ls(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function js(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ja(e.return,t,n)}function Vs(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Us(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(ks(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&js(e,n,t);else if(19===e.tag)js(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ea(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ao(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Vs(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ao(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Vs(t,!0,n,null,i);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ou|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){switch(Ti(t),t.tag){case 1:return Ma(t.type)&&Oa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ia(Ta),Ia(Na),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ia(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));Wi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ia(ro),null;case 4:return eo(),null;case 10:return Ya(t.type._context),null;case 22:case 23:return lc(),null;default:return null}}var qs=!1,Ks=!1,Xs="function"===typeof WeakSet?WeakSet:Set,Zs=null;function Ys(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){wc(e,t,r)}else n.current=null}function Js(e,t,n){try{n()}catch(r){wc(e,t,r)}}var Qs=!1;function $s(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&Js(t,n,i)}a=a.next}while(a!==r)}}function eu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function tu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function nu(e){var t=e.alternate;null!==t&&(e.alternate=null,nu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fa],delete t[pa],delete t[ma],delete t[va],delete t[ga])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ru(e){return 5===e.tag||3===e.tag||4===e.tag}function au(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ru(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function iu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(iu(e,t,n),e=e.sibling;null!==e;)iu(e,t,n),e=e.sibling}function ou(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ou(e,t,n),e=e.sibling;null!==e;)ou(e,t,n),e=e.sibling}var su=null,uu=!1;function cu(e,t,n){for(n=n.child;null!==n;)lu(e,t,n),n=n.sibling}function lu(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(s){}switch(n.tag){case 5:Ks||Ys(n,t);case 6:var r=su,a=uu;su=null,cu(e,t,n),uu=a,null!==(su=r)&&(uu?(e=su,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):su.removeChild(n.stateNode));break;case 18:null!==su&&(uu?(e=su,n=n.stateNode,8===e.nodeType?ua(e.parentNode,n):1===e.nodeType&&ua(e,n),Vt(e)):ua(su,n.stateNode));break;case 4:r=su,a=uu,su=n.stateNode.containerInfo,uu=!0,cu(e,t,n),su=r,uu=a;break;case 0:case 11:case 14:case 15:if(!Ks&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&Js(n,t,o),a=a.next}while(a!==r)}cu(e,t,n);break;case 1:if(!Ks&&(Ys(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){wc(n,t,s)}cu(e,t,n);break;case 21:cu(e,t,n);break;case 22:1&n.mode?(Ks=(r=Ks)||null!==n.memoizedState,cu(e,t,n),Ks=r):cu(e,t,n);break;default:cu(e,t,n)}}function du(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xs),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function fu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:su=u.stateNode,uu=!1;break e;case 3:case 4:su=u.stateNode.containerInfo,uu=!0;break e}u=u.return}if(null===su)throw Error(i(160));lu(o,s,a),su=null,uu=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(l){wc(a,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)pu(t,e),t=t.sibling}function pu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fu(t,e),hu(e),4&r){try{$s(3,e,e.return),eu(3,e)}catch(m){wc(e,e.return,m)}try{$s(5,e,e.return)}catch(m){wc(e,e.return,m)}}break;case 1:fu(t,e),hu(e),512&r&&null!==n&&Ys(n,n.return);break;case 5:if(fu(t,e),hu(e),512&r&&null!==n&&Ys(n,n.return),32&e.flags){var a=e.stateNode;try{fe(a,"")}catch(m){wc(e,e.return,m)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&J(a,o),be(u,s);var l=be(u,o);for(s=0;s<c.length;s+=2){var d=c[s],f=c[s+1];"style"===d?ve(a,f):"dangerouslySetInnerHTML"===d?de(a,f):"children"===d?fe(a,f):b(a,d,f,l)}switch(u){case"input":Q(a,o);break;case"textarea":ie(a,o);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var h=o.value;null!=h?ne(a,!!o.multiple,h,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(a,!!o.multiple,o.defaultValue,!0):ne(a,!!o.multiple,o.multiple?[]:"",!1))}a[pa]=o}catch(m){wc(e,e.return,m)}}break;case 6:if(fu(t,e),hu(e),4&r){if(null===e.stateNode)throw Error(i(162));l=e.stateNode,d=e.memoizedProps;try{l.nodeValue=d}catch(m){wc(e,e.return,m)}}break;case 3:if(fu(t,e),hu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(m){wc(e,e.return,m)}break;case 4:default:fu(t,e),hu(e);break;case 13:fu(t,e),hu(e),8192&(l=e.child).flags&&null!==l.memoizedState&&(null===l.alternate||null===l.alternate.memoizedState)&&(zu=Je()),4&r&&du(e);break;case 22:if(l=null!==n&&null!==n.memoizedState,1&e.mode?(Ks=(d=Ks)||l,fu(t,e),Ks=d):fu(t,e),hu(e),8192&r){d=null!==e.memoizedState;e:for(f=null,p=e;;){if(5===p.tag){if(null===f){f=p;try{a=p.stateNode,d?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=p.stateNode,s=void 0!==(c=p.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=me("display",s))}catch(m){wc(e,e.return,m)}}}else if(6===p.tag){if(null===f)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(m){wc(e,e.return,m)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}if(d&&!l&&0!==(1&e.mode))for(Zs=e,e=e.child;null!==e;){for(l=Zs=e;null!==Zs;){switch(f=(d=Zs).child,d.tag){case 0:case 11:case 14:case 15:$s(4,d,d.return);break;case 1:if(Ys(d,d.return),"function"===typeof(o=d.stateNode).componentWillUnmount){p=d,h=d.return;try{a=p,o.props=a.memoizedProps,o.state=a.memoizedState,o.componentWillUnmount()}catch(m){wc(p,h,m)}}break;case 5:Ys(d,d.return);break;case 22:if(null!==d.memoizedState){yu(l);continue}}null!==f?(f.return=d,Zs=f):yu(l)}e=e.sibling}}break;case 19:fu(t,e),hu(e),4&r&&du(e);case 21:}}function hu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ru(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(fe(a,""),r.flags&=-33),ou(e,au(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;iu(e,au(e),o);break;default:throw Error(i(161))}}catch(s){wc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function mu(e,t,n){Zs=e,vu(e,t,n)}function vu(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var a=Zs,i=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||qs;if(!o){var s=a.alternate,u=null!==s&&null!==s.memoizedState||Ks;s=qs;var c=Ks;if(qs=o,(Ks=u)&&!c)for(Zs=a;null!==Zs;)u=(o=Zs).child,22===o.tag&&null!==o.memoizedState?bu(a):null!==u?(u.return=o,Zs=u):bu(a);for(;null!==i;)Zs=i,vu(i,t,n),i=i.sibling;Zs=a,qs=s,Ks=c}gu(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,Zs=i):gu(e)}}function gu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ks||eu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ks)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ha(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ci(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ci(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var d=l.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Vt(f)}}}break;default:throw Error(i(163))}Ks||512&t.flags&&tu(t)}catch(p){wc(t,t.return,p)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function yu(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function bu(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{eu(4,t)}catch(u){wc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(u){wc(t,a,u)}}var i=t.return;try{tu(t)}catch(u){wc(t,i,u)}break;case 5:var o=t.return;try{tu(t)}catch(u){wc(t,o,u)}}}catch(u){wc(t,t.return,u)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var xu,Au=Math.ceil,ku=x.ReactCurrentDispatcher,wu=x.ReactCurrentOwner,Su=x.ReactCurrentBatchConfig,Iu=0,Eu=null,Cu=null,Nu=0,Tu=0,_u=Sa(0),Ru=0,Mu=null,Ou=0,Fu=0,Pu=0,Du=null,Lu=null,zu=0,Bu=1/0,Wu=null,ju=!1,Vu=null,Uu=null,Hu=!1,Gu=null,qu=0,Ku=0,Xu=null,Zu=-1,Yu=0;function Ju(){return 0!==(6&Iu)?Je():-1!==Zu?Zu:Zu=Je()}function Qu(e){return 0===(1&e.mode)?1:0!==(2&Iu)&&0!==Nu?Nu&-Nu:null!==Ua.transition?(0===Yu&&(Yu=mt()),Yu):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function $u(e,t,n){if(50<Ku)throw Ku=0,Xu=null,Error(i(185));var r=ec(e,t);return null===r?null:(gt(r,t,n),0!==(2&Iu)&&r===Eu||(r===Eu&&(0===(2&Iu)&&(Fu|=t),4===Ru&&oc(r,Nu)),nc(r,n),1===t&&0===Iu&&0===(1&e.mode)&&(Bu=Je()+500,Ba&&Va())),r)}function ec(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tc(e){return(null!==Eu||null!==ei)&&0!==(1&e.mode)&&0===(2&Iu)}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),s=1<<o,u=a[o];-1===u?0!==(s&n)&&0===(s&r)||(a[o]=pt(s,t)):u<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ft(e,e===Eu?Nu:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Ba=!0,ja(e)}(sc.bind(null,e)):ja(sc.bind(null,e)),oa((function(){0===Iu&&Va()})),n=null;else{switch(xt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Zu=-1,Yu=0,0!==(6&Iu))throw Error(i(327));var n=e.callbackNode;if(Ac()&&e.callbackNode!==n)return null;var r=ft(e,e===Eu?Nu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var a=Iu;Iu|=2;var o=pc();for(Eu===e&&Nu===t||(Wu=null,Bu=Je()+500,dc(e,t));;)try{gc();break}catch(u){fc(e,u)}Za(),ku.current=o,Iu=a,null!==Cu?t=0:(Eu=null,Nu=0,t=Ru)}if(0!==t){if(2===t&&(0!==(a=ht(e))&&(r=a,t=ac(e,a))),1===t)throw n=Mu,dc(e,0),oc(e,r),nc(e,Je()),n;if(6===t)oc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!sr(i(),a))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=mc(e,r))&&(0!==(o=ht(e))&&(r=o,t=ac(e,o))),1===t))throw n=Mu,dc(e,0),oc(e,r),nc(e,Je()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:xc(e,Lu,Wu);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=zu+500-Je())){if(0!==ft(e,0))break;if(((a=e.suspendedLanes)&r)!==r){Ju(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(xc.bind(null,e,Lu,Wu),t);break}xc(e,Lu,Wu);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>a&&(a=s),r&=~o}if(r=a,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Au(r/1960))-r)){e.timeoutHandle=ra(xc.bind(null,e,Lu,Wu),r);break}xc(e,Lu,Wu);break;default:throw Error(i(329))}}}return nc(e,Je()),e.callbackNode===n?rc.bind(null,e):null}function ac(e,t){var n=Du;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Lu,Lu=n,null!==t&&ic(t)),e}function ic(e){null===Lu?Lu=e:Lu.push.apply(Lu,e)}function oc(e,t){for(t&=~Pu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Iu))throw Error(i(327));Ac();var t=ft(e,0);if(0===(1&t))return nc(e,Je()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Mu,dc(e,0),oc(e,t),nc(e,Je()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Lu,Wu),nc(e,Je()),null}function uc(e,t){var n=Iu;Iu|=1;try{return e(t)}finally{0===(Iu=n)&&(Bu=Je()+500,Ba&&Va())}}function cc(e){null!==Gu&&0===Gu.tag&&0===(6&Iu)&&Ac();var t=Iu;Iu|=1;var n=Su.transition,r=bt;try{if(Su.transition=null,bt=1,e)return e()}finally{bt=r,Su.transition=n,0===(6&(Iu=t))&&Va()}}function lc(){Tu=_u.current,Ia(_u)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Cu)for(n=Cu.return;null!==n;){var r=n;switch(Ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oa();break;case 3:eo(),Ia(Ta),Ia(Na),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Ia(ro);break;case 10:Ya(r.type._context);break;case 22:case 23:lc()}n=n.return}if(Eu=e,Cu=e=Mc(e.current,null),Nu=Tu=t,Ru=0,Mu=null,Pu=Fu=Ou=0,Lu=Du=null,null!==ei){for(t=0;t<ei.length;t++)if(null!==(r=(n=ei[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=a,r.next=o}n.pending=r}ei=null}return e}function fc(e,t){for(;;){var n=Cu;try{if(Za(),so.current=ns,ho){for(var r=lo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ho=!1}if(co=0,po=fo=lo=null,mo=!1,vo=0,wu.current=null,null===n||null===n.return){Ru=1,Mu=t,Cu=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Nu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,d=u,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=ms(s);if(null!==h){h.flags&=-257,vs(h,s,u,0,t),1&h.mode&&hs(o,l,t),c=l;var m=(t=h).updateQueue;if(null===m){var v=new Set;v.add(c),t.updateQueue=v}else m.add(c);break e}if(0===(1&t)){hs(o,l,t),hc();break e}c=Error(i(426))}else if(Mi&&1&u.mode){var g=ms(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),vs(g,s,u,0,t),ji(c);break e}}o=c,4!==Ru&&(Ru=2),null===Du?Du=[o]:Du.push(o),c=os(c,u),u=s;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t,si(u,fs(0,c,t));break e;case 1:o=c;var y=u.type,b=u.stateNode;if(0===(128&u.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Uu||!Uu.has(b)))){u.flags|=65536,t&=-t,u.lanes|=t,si(u,ps(u,o,t));break e}}u=u.return}while(null!==u)}bc(n)}catch(x){t=x,Cu===n&&null!==n&&(Cu=n=n.return);continue}break}}function pc(){var e=ku.current;return ku.current=ns,null===e?ns:e}function hc(){0!==Ru&&3!==Ru&&2!==Ru||(Ru=4),null===Eu||0===(268435455&Ou)&&0===(268435455&Fu)||oc(Eu,Nu)}function mc(e,t){var n=Iu;Iu|=2;var r=pc();for(Eu===e&&Nu===t||(Wu=null,dc(e,t));;)try{vc();break}catch(a){fc(e,a)}if(Za(),Iu=n,ku.current=r,null!==Cu)throw Error(i(261));return Eu=null,Nu=0,Ru}function vc(){for(;null!==Cu;)yc(Cu)}function gc(){for(;null!==Cu&&!Ze();)yc(Cu)}function yc(e){var t=xu(e.alternate,e,Tu);e.memoizedProps=e.pendingProps,null===t?bc(e):Cu=t,wu.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=bs(n,t,Tu)))return void(Cu=n)}else{if(null!==(n=Gs(n,t)))return n.flags&=32767,void(Cu=n);if(null===e)return Ru=6,void(Cu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Cu=t);Cu=t=e}while(null!==t);0===Ru&&(Ru=5)}function xc(e,t,n){var r=bt,a=Su.transition;try{Su.transition=null,bt=1,function(e,t,n,r){do{Ac()}while(null!==Gu);if(0!==(6&Iu))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ot(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,o),e===Eu&&(Cu=Eu=null,Nu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hu||(Hu=!0,Nc(tt,(function(){return Ac(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Su.transition,Su.transition=null;var s=bt;bt=1;var u=Iu;Iu|=4,wu.current=null,function(e,t){if(ea=Ht,pr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(k){n=null;break e}var s=0,u=-1,c=-1,l=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==n||0!==a&&3!==f.nodeType||(u=s+a),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(h=f.firstChild);)p=f,f=h;for(;;){if(f===e)break t;if(p===n&&++l===a&&(u=s),p===o&&++d===r&&(c=s),null!==(h=f.nextSibling))break;p=(f=p).parentNode}f=h}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Ht=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,g=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:Ha(t.type,v),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;if(1===x.nodeType)x.textContent="";else if(9===x.nodeType){var A=x.body;null!=A&&(A.textContent="")}break;default:throw Error(i(163))}}catch(k){wc(t,t.return,k)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}m=Qs,Qs=!1}(e,n),pu(n,e),hr(ta),Ht=!!ea,ta=ea=null,e.current=n,mu(n,e,a),Ye(),Iu=u,bt=s,Su.transition=o}else e.current=n;if(Hu&&(Hu=!1,Gu=e,qu=a),0===(o=e.pendingLanes)&&(Uu=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(ju)throw ju=!1,e=Vu,Vu=null,e;0!==(1&qu)&&0!==e.tag&&Ac(),0!==(1&(o=e.pendingLanes))?e===Xu?Ku++:(Ku=0,Xu=e):Ku=0,Va()}(e,t,n,r)}finally{Su.transition=a,bt=r}return null}function Ac(){if(null!==Gu){var e=xt(qu),t=Su.transition,n=bt;try{if(Su.transition=null,bt=16>e?16:e,null===Gu)var r=!1;else{if(e=Gu,Gu=null,qu=0,0!==(6&Iu))throw Error(i(331));var a=Iu;for(Iu|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Zs=l;null!==Zs;){var d=Zs;switch(d.tag){case 0:case 11:case 15:$s(8,d,o)}var f=d.child;if(null!==f)f.return=d,Zs=f;else for(;null!==Zs;){var p=(d=Zs).sibling,h=d.return;if(nu(d),d===l){Zs=null;break}if(null!==p){p.return=h,Zs=p;break}Zs=h}}}var m=o.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:$s(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Zs=y;break e}Zs=o.return}}var b=e.current;for(Zs=b;null!==Zs;){var x=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Zs=x;else e:for(s=b;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:eu(9,u)}}catch(k){wc(u,u.return,k)}if(u===s){Zs=null;break e}var A=u.sibling;if(null!==A){A.return=u.return,Zs=A;break e}Zs=u.return}}if(Iu=a,Va(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(k){}r=!0}return r}finally{bt=n,Su.transition=t}}return!1}function kc(e,t,n){ii(e,t=fs(0,t=os(n,t),1)),t=Ju(),null!==(e=ec(e,1))&&(gt(e,1,t),nc(e,t))}function wc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Uu||!Uu.has(r))){ii(t,e=ps(t,e=os(n,e),1)),e=Ju(),null!==(t=ec(t,1))&&(gt(t,1,e),nc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Ju(),e.pingedLanes|=e.suspendedLanes&n,Eu===e&&(Nu&n)===n&&(4===Ru||3===Ru&&(130023424&Nu)===Nu&&500>Je()-zu?dc(e,0):Pu|=n),nc(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=Ju();null!==(e=ec(e,t))&&(gt(e,t,n),nc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Ic(e,n)}function Nc(e,t){return Ke(e,t)}function Tc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _c(e,t,n,r){return new Tc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=_c(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,a,o){var s=2;if(r=e,"function"===typeof e)Rc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case w:return Fc(n.children,a,o,t);case S:s=8,a|=8;break;case I:return(e=_c(12,n,t,2|a)).elementType=I,e.lanes=o,e;case T:return(e=_c(13,n,t,a)).elementType=T,e.lanes=o,e;case _:return(e=_c(19,n,t,a)).elementType=_,e.lanes=o,e;case O:return Pc(n,a,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case C:s=9;break e;case N:s=11;break e;case R:s=14;break e;case M:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=_c(s,n,t,a)).elementType=e,t.type=r,t.lanes=o,t}function Fc(e,t,n,r){return(e=_c(7,e,r,t)).lanes=n,e}function Pc(e,t,n,r){return(e=_c(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={},e}function Dc(e,t,n){return(e=_c(6,e,null,t)).lanes=n,e}function Lc(e,t,n){return(t=_c(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,a,i,o,s,u){return e=new zc(e,t,n,s,u),1===t?(t=1,!0===i&&(t|=8)):t=0,i=_c(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ni(i),e}function Wc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function jc(e){if(!e)return Ca;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ma(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Ma(n))return Pa(e,n,t)}return t}function Vc(e,t,n,r,a,i,o,s,u){return(e=Bc(n,r,!0,e,0,i,0,s,u)).context=jc(null),n=e.current,(i=ai(r=Ju(),a=Qu(n))).callback=void 0!==t&&null!==t?t:null,ii(n,i),e.current.lanes=a,gt(e,a,r),nc(e,r),e}function Uc(e,t,n,r){var a=t.current,i=Ju(),o=Qu(a);return n=jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ai(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ii(a,t),null!==(e=$u(a,o,i))&&oi(e,a,o),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}xu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ta.current)As=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return As=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),Wi();break;case 5:to(t);break;case 1:Ma(t.type)&&Da(t);break;case 4:$i(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ea(Ga,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ea(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ds(e,t,n):(Ea(ro,1&ro.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ea(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Us(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ea(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Hs(e,t,n)}(e,t,n);As=0!==(131072&e.flags)}else As=!1,Mi&&0!==(1048576&t.flags)&&Ci(t,xi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var a=Ra(t,Na.current);Qa(t,n),a=xo(null,t,r,e,a,n);var o=Ao();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ma(r)?(o=!0,Da(t)):o=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ni(t),a.updater=fi,t.stateNode=a,a._reactInternals=t,vi(t,r,e,n),t=_s(null,t,r,!0,o,n)):(t.tag=0,Mi&&o&&Ni(t),ks(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===R)return 14}return 2}(r),e=Ha(r,e),a){case 0:t=Ns(null,t,r,e,n);break e;case 1:t=Ts(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=Ss(null,t,r,Ha(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Ns(e,t,r,a=t.elementType===r?a:Ha(r,a),n);case 1:return r=t.type,a=t.pendingProps,Ts(e,t,r,a=t.elementType===r?a:Ha(r,a),n);case 3:e:{if(Rs(t),null===e)throw Error(i(387));r=t.pendingProps,a=(o=t.memoizedState).element,ri(e,t),ui(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ms(e,t,r,n,a=Error(i(423)));break e}if(r!==a){t=Ms(e,t,r,n,a=Error(i(424)));break e}for(Ri=ca(t.stateNode.containerInfo.firstChild),_i=t,Mi=!0,Oi=null,n=Ki(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Wi(),r===a){t=Hs(e,t,n);break e}ks(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Li(t),r=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,na(r,a)?s=null:null!==o&&na(r,o)&&(t.flags|=32),Cs(e,t),ks(e,t,s,n),t.child;case 6:return null===e&&Li(t),null;case 13:return Ds(e,t,n);case 4:return $i(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=qi(t,null,r,n):ks(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,ws(e,t,r,a=t.elementType===r?a:Ha(r,a),n);case 7:return ks(e,t,t.pendingProps,n),t.child;case 8:case 12:return ks(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,o=t.memoizedProps,s=a.value,Ea(Ga,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===a.children&&!Ta.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ai(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var d=(l=l.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ja(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ja(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ks(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Qa(t,n),r=r(a=$a(a)),t.flags|=1,ks(e,t,r,n),t.child;case 14:return a=Ha(r=t.type,t.pendingProps),Ss(e,t,r,a=Ha(r.type,a),n);case 15:return Is(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ha(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ma(r)?(e=!0,Da(t)):e=!1,Qa(t,n),hi(t,r,a),vi(t,r,a,n),_s(null,t,r,!0,e,n);case 19:return Us(e,t,n);case 22:return Es(e,t,n)}throw Error(i(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Zc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function $c(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof a){var s=a;a=function(){var e=Hc(o);s.call(e)}}Uc(t,o,e,a)}else o=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Hc(o);i.call(e)}}var o=Vc(t,r,e,0,null,!1,0,"",Qc);return e._reactRootContainer=o,e[ha]=o.current,Vr(8===e.nodeType?e.parentNode:e),cc(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Hc(u);s.call(e)}}var u=Bc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=u,e[ha]=u.current,Vr(8===e.nodeType?e.parentNode:e),cc((function(){Uc(t,u,n,r)})),u}(n,t,e,a,r);return Hc(o)}Zc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Uc(e,t,null,null)},Zc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc((function(){Uc(null,e,null,null)})),t[ha]=null}},Zc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Lt(e)}},At=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),nc(t,Je()),0===(6&Iu)&&(Bu=Je()+500,Va()))}break;case 13:var r=Ju();cc((function(){return $u(e,1,r)})),qc(e,1)}},kt=function(e){13===e.tag&&($u(e,134217728,Ju()),qc(e,134217728))},wt=function(e){if(13===e.tag){var t=Ju(),n=Qu(e);$u(e,n,t),qc(e,n)}},St=function(){return bt},It=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Aa(r);if(!a)throw Error(i(90));K(r),Q(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ne=uc,Te=cc;var el={usingClientEntryPoint:!1,Events:[ba,xa,Aa,Ee,Ce,uc]},tl={findFiberByHostInstance:ya,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{at=rl.inject(nl),it=rl}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(i(200));return Wc(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(i(299));var n=!1,r="",a=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,a),e[ha]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(i(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,o="",s=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,a,0,o,s),e[ha]=t.current,Vr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Zc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(i(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(i(40));return!!e._reactRootContainer&&(cc((function(){$c(null,null,e,!1,(function(){e._reactRootContainer=null,e[ha]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return $c(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},1739:function(e,t,n){"use strict";var r=n(1168);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},1168:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(534)},2790:function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,n){"use strict";n.r(t);var r=n("react"),a=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function s(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var u=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.ctx=null,n.requestUserMediaId=0,n.unmounted=!1,n.state={hasUserMedia:!1},n}return a(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;this.unmounted=!1,s()?(e.hasUserMedia||this.requestUserMedia(),t.children&&"function"!=typeof t.children&&console.warn("children must be a function")):t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(s()){var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),r=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),a=e.minScreenshotWidth!==t.minScreenshotWidth,i=e.minScreenshotHeight!==t.minScreenshotHeight;(r||a||i)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().map((function(t){e.removeTrack(t),t.stop()}))):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,n=this.props;if(!t.hasUserMedia)return null;var r=this.getCanvas(e);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,n=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,a=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var i=r/a;a=(r=n.minScreenshotWidth||this.video.clientWidth)/i,n.minScreenshotHeight&&a<n.minScreenshotHeight&&(r=(a=n.minScreenshotHeight)*i)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||r,this.canvas.height=(null===e||void 0===e?void 0:e.height)||a,this.ctx=this.canvas.getContext("2d")}var o=this.ctx,s=this.canvas;return o&&s&&(n.mirrored&&(o.translate(s.width,0),o.scale(-1,1)),o.imageSmoothingEnabled=n.imageSmoothing,o.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||s.width,(null===e||void 0===e?void 0:e.height)||s.height),n.mirrored&&(o.scale(-1,1),o.translate(-s.width,0))),s},t.prototype.requestUserMedia=function(){var e=this,n=this.props,r=function(r,a){var i={video:"undefined"===typeof a||a};n.audio&&(i.audio="undefined"===typeof r||r),e.requestUserMediaId++;var o=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(i).then((function(n){e.unmounted||o!==e.requestUserMediaId?t.stopMediaStream(n):e.handleUserMedia(null,n)})).catch((function(t){e.handleUserMedia(t)}))};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var a=function(e){return{optional:[{sourceId:e}]}},i=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources((function(e){var t=null,o=null;e.forEach((function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(o=e.id)}));var s=i(n.audioConstraints);s&&(t=s);var u=i(n.videoConstraints);u&&(o=u),r(a(t),a(o))}))}},t.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,n=this.props,a=n.audio,s=(n.forceScreenshotSourceSize,n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),u=n.style,c=void 0===u?{}:u,l=n.children,d=o(n,["audio","forceScreenshotSourceSize","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),f=s?i(i({},c),{transform:(c.transform||"")+" scaleX(-1)"}):c,p={getScreenshot:this.getScreenshot.bind(this)};return r.createElement(r.Fragment,null,r.createElement("video",i({autoPlay:!0,src:t.src,muted:!a,playsInline:!0,ref:function(t){e.video=t},style:f},d)),l&&l(p))},t.defaultProps={audio:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(r.Component);t.default=u},react:function(t,n){t.exports=e}}).default},e.exports=r(n(7313))},5918:function(e,t,n){"use strict";var r=n(7313),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:l,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},306:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var x=b.prototype=new y;x.constructor=b,m(x,g.prototype),x.isPureReactComponent=!0;var A=Array.isArray,k=Object.prototype.hasOwnProperty,w={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var a,i={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,a)&&!S.hasOwnProperty(a)&&(i[a]=t[a]);var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===i[a]&&(i[a]=u[a]);return{$$typeof:n,type:e,key:o,ref:s,props:i,_owner:w.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===i?"."+N(u,0):i,A(o)?(a="",null!=e&&(a=e.replace(C,"$&/")+"/"),T(o,t,a,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(u=0,i=""===i?".":i+":",A(e))for(var c=0;c<e.length;c++){var l=i+N(s=e[c],c);u+=T(s,t,a,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=T(s=s.value,t,a,l=i+N(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function _(e,t,n){if(null==e)return e;var r=[],a=0;return T(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},O={transition:null},F={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:O,ReactCurrentOwner:w};t.Children={map:_,forEach:function(e,t,n){_(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return _(e,(function(){t++})),t},toArray:function(e){return _(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=w.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)k.call(t,c)&&!S.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];a.children=u}return{$$typeof:n,type:e.type,key:i,ref:o,props:a,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.1.0"},7313:function(e,t,n){"use strict";e.exports=n(306)},6417:function(e,t,n){"use strict";e.exports=n(5918)},3095:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>i(u,n))c<a&&0>i(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<a&&0>i(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],d=1,f=null,p=3,h=!1,m=!1,v=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(l);null!==t;){if(null===t.callback)a(l);else{if(!(t.startTime<=e))break;a(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function A(e){if(v=!1,x(e),!m)if(null!==r(c))m=!0,O(k);else{var t=r(l);null!==t&&F(A,t.startTime-e)}}function k(e,n){m=!1,v&&(v=!1,y(E),E=-1),h=!0;var i=p;try{for(x(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!T());){var o=f.callback;if("function"===typeof o){f.callback=null,p=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&a(c),x(n)}else a(c);f=r(c)}if(null!==f)var u=!0;else{var d=r(l);null!==d&&F(A,d.startTime-n),u=!1}return u}finally{f=null,p=i,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,S=!1,I=null,E=-1,C=5,N=-1;function T(){return!(t.unstable_now()-N<C)}function _(){if(null!==I){var e=t.unstable_now();N=e;var n=!0;try{n=I(!0,e)}finally{n?w():(S=!1,I=null)}}else S=!1}if("function"===typeof b)w=function(){b(_)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,M=R.port2;R.port1.onmessage=_,w=function(){M.postMessage(null)}}else w=function(){g(_,0)};function O(e){I=e,S||(S=!0,w())}function F(e,n){E=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,O(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,a,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,n(l,e),null===r(c)&&e===r(l)&&(v?(y(E),E=-1):v=!0,F(A,i-o))):(e.sortIndex=s,n(c,e),m||h||(m=!0,O(k))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},2224:function(e,t,n){"use strict";e.exports=n(3095)},9767:function(e){e.exports=function(e,t,n,r){var a=n?n.call(r,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<i.length;u++){var c=i[u];if(!s(c))return!1;var l=e[c],d=t[c];if(!1===(a=n?n.call(r,l,d,c):void 0)||void 0===a&&l!==d)return!1}return!0}},8385:function(e,t,n){"use strict";n.r(t),t.default={}},5602:function(e,t,n){"use strict";n.r(t),t.default={}},3165:function(e,t,n){"use strict";n.r(t),t.default={}},8567:function(e,t,n){"use strict";n.r(t),t.default={}},2361:function(e,t,n){"use strict";n.r(t),t.default={}},1865:function(e,t,n){"use strict";n.r(t),t.default={}},535:function(e,t,n){"use strict";n.r(t),t.default={}},445:function(e,t,n){"use strict";n.r(t),t.default={}},7476:function(e,t,n){"use strict";n.r(t),t.default={}},2727:function(e,t,n){"use strict";n.r(t),t.default={}},3047:function(e,t,n){"use strict";n.r(t),t.default={}},7308:function(e,t,n){"use strict";n.r(t),t.default={}},865:function(e,t,n){"use strict";n.r(t),t.default={}},5638:function(e,t,n){"use strict";n.r(t),t.default={}},8479:function(e,t,n){"use strict";n.r(t),t.default={}},7895:function(e,t,n){"use strict";n.r(t),t.default={}},9333:function(e,t,n){"use strict";n.r(t),t.default={}},3343:function(e,t,n){"use strict";n.r(t),t.default={}},9070:function(e,t,n){"use strict";n.r(t),t.default={}},2153:function(e,t,n){"use strict";n.r(t),t.default={}},234:function(e,t,n){"use strict";n.r(t),t.default={}},6804:function(e,t,n){"use strict";n.r(t),t.default={}},539:function(e,t,n){"use strict";n.r(t),t.default={}},6737:function(e,t,n){"use strict";n.r(t),t.default={}},7256:function(){},2578:function(){},2980:function(){},4862:function(){},7958:function(){},5410:function(){},8628:function(){}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(i,o),i}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".4d4b6364.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="face-recognition-pomodoro:";n.l=function(r,a,i,o){if(e[r])e[r].push(a);else{var s,u;if(void 0!==i)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var d=c[l];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[a];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/face-recognition-pomodoro/",function(){var e={179:0};n.f.j=function(t,r){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise((function(n,r){a=e[t]=[n,r]}));r.push(a[2]=i);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(a=e[t])&&(e[t]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,a[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var a,i,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(u)u(n)}for(t&&t(r);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkface_recognition_pomodoro=self.webpackChunkface_recognition_pomodoro||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e=n(7313),t=n(1739);function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function a(e){if(Array.isArray(e))return e}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){return a(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||o(e,t)||s()}var c=function(){};function l(t,n,r){var a=(0,e.useRef)(c);(0,e.useEffect)((function(){a.current=t})),(0,e.useEffect)((function(){r&&null!==n&&!1!==n&&a.current()}),[r]),(0,e.useEffect)((function(){if(null!==n&&!1!==n){var e=setInterval((function(){return a.current()}),n);return function(){return clearInterval(e)}}}),[n])}var d=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),f=Math.abs,p=String.fromCharCode,h=Object.assign;function m(e){return e.trim()}function v(e,t,n){return e.replace(t,n)}function g(e,t){return e.indexOf(t)}function y(e,t){return 0|e.charCodeAt(t)}function b(e,t,n){return e.slice(t,n)}function x(e){return e.length}function A(e){return e.length}function k(e,t){return t.push(e),e}var w=1,S=1,I=0,E=0,C=0,N="";function T(e,t,n,r,a,i,o){return{value:e,root:t,parent:n,type:r,props:a,children:i,line:w,column:S,length:o,return:""}}function _(e,t){return h(T("",null,null,"",null,null,0),e,{length:-e.length},t)}function R(){return C=E>0?y(N,--E):0,S--,10===C&&(S=1,w--),C}function M(){return C=E<I?y(N,E++):0,S++,10===C&&(S=1,w++),C}function O(){return y(N,E)}function F(){return E}function P(e,t){return b(N,e,t)}function D(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function L(e){return w=S=1,I=x(N=e),E=0,[]}function z(e){return N="",e}function B(e){return m(P(E-1,V(91===e?e+2:40===e?e+1:e)))}function W(e){for(;(C=O())&&C<33;)M();return D(e)>2||D(C)>3?"":" "}function j(e,t){for(;--t&&M()&&!(C<48||C>102||C>57&&C<65||C>70&&C<97););return P(e,F()+(t<6&&32==O()&&32==M()))}function V(e){for(;M();)switch(C){case e:return E;case 34:case 39:34!==e&&39!==e&&V(C);break;case 40:41===e&&V(e);break;case 92:M()}return E}function U(e,t){for(;M()&&e+C!==57&&(e+C!==84||47!==O()););return"/*"+P(t,E-1)+"*"+p(47===e?e:M())}function H(e){for(;!D(O());)M();return P(e,E)}var G="-ms-",q="-moz-",K="-webkit-",X="comm",Z="rule",Y="decl",J="@keyframes";function Q(e,t){for(var n="",r=A(e),a=0;a<r;a++)n+=t(e[a],a,e,t)||"";return n}function $(e,t,n,r){switch(e.type){case"@import":case Y:return e.return=e.return||e.value;case X:return"";case J:return e.return=e.value+"{"+Q(e.children,r)+"}";case Z:e.value=e.props.join(",")}return x(n=Q(e.children,r))?e.return=e.value+"{"+n+"}":""}function ee(e,t){switch(function(e,t){return(((t<<2^y(e,0))<<2^y(e,1))<<2^y(e,2))<<2^y(e,3)}(e,t)){case 5103:return K+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return K+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return K+e+q+e+G+e+e;case 6828:case 4268:return K+e+G+e+e;case 6165:return K+e+G+"flex-"+e+e;case 5187:return K+e+v(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return K+e+G+"flex-item-"+v(e,/flex-|-self/,"")+e;case 4675:return K+e+G+"flex-line-pack"+v(e,/align-content|flex-|-self/,"")+e;case 5548:return K+e+G+v(e,"shrink","negative")+e;case 5292:return K+e+G+v(e,"basis","preferred-size")+e;case 6060:return K+"box-"+v(e,"-grow","")+K+e+G+v(e,"grow","positive")+e;case 4554:return K+v(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return v(v(v(e,/(zoom-|grab)/,K+"$1"),/(image-set)/,K+"$1"),e,"")+e;case 5495:case 3959:return v(e,/(image-set\([^]*)/,K+"$1$`$1");case 4968:return v(v(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+K+e+e;case 4095:case 3583:case 4068:case 2532:return v(e,/(.+)-inline(.+)/,K+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(x(e)-1-t>6)switch(y(e,t+1)){case 109:if(45!==y(e,t+4))break;case 102:return v(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+q+(108==y(e,t+3)?"$3":"$2-$3"))+e;case 115:return~g(e,"stretch")?ee(v(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==y(e,t+1))break;case 6444:switch(y(e,x(e)-3-(~g(e,"!important")&&10))){case 107:return v(e,":",":"+K)+e;case 101:return v(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+K+(45===y(e,14)?"inline-":"")+"box$3$1"+K+"$2$3$1"+G+"$2box$3")+e}break;case 5936:switch(y(e,t+11)){case 114:return K+e+G+v(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return K+e+G+v(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return K+e+G+v(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return K+e+G+e+e}return e}function te(e){return z(ne("",null,null,null,[""],e=L(e),0,[0],e))}function ne(e,t,n,r,a,i,o,s,u){for(var c=0,l=0,d=o,f=0,h=0,m=0,y=1,b=1,A=1,w=0,S="",I=a,E=i,C=r,N=S;b;)switch(m=w,w=M()){case 40:if(108!=m&&58==N.charCodeAt(d-1)){-1!=g(N+=v(B(w),"&","&\f"),"&\f")&&(A=-1);break}case 34:case 39:case 91:N+=B(w);break;case 9:case 10:case 13:case 32:N+=W(m);break;case 92:N+=j(F()-1,7);continue;case 47:switch(O()){case 42:case 47:k(ae(U(M(),F()),t,n),u);break;default:N+="/"}break;case 123*y:s[c++]=x(N)*A;case 125*y:case 59:case 0:switch(w){case 0:case 125:b=0;case 59+l:h>0&&x(N)-d&&k(h>32?ie(N+";",r,n,d-1):ie(v(N," ","")+";",r,n,d-2),u);break;case 59:N+=";";default:if(k(C=re(N,t,n,c,l,a,s,S,I=[],E=[],d),i),123===w)if(0===l)ne(N,t,C,C,I,i,d,s,E);else switch(f){case 100:case 109:case 115:ne(e,C,C,r&&k(re(e,C,C,0,0,a,s,S,a,I=[],d),E),a,E,d,s,r?I:E);break;default:ne(N,C,C,C,[""],E,0,s,E)}}c=l=h=0,y=A=1,S=N="",d=o;break;case 58:d=1+x(N),h=m;default:if(y<1)if(123==w)--y;else if(125==w&&0==y++&&125==R())continue;switch(N+=p(w),w*y){case 38:A=l>0?1:(N+="\f",-1);break;case 44:s[c++]=(x(N)-1)*A,A=1;break;case 64:45===O()&&(N+=B(M())),f=O(),l=d=x(S=N+=H(F())),w++;break;case 45:45===m&&2==x(N)&&(y=0)}}return i}function re(e,t,n,r,a,i,o,s,u,c,l){for(var d=a-1,p=0===a?i:[""],h=A(p),g=0,y=0,x=0;g<r;++g)for(var k=0,w=b(e,d+1,d=f(y=o[g])),S=e;k<h;++k)(S=m(y>0?p[k]+" "+w:v(w,/&\f/g,p[k])))&&(u[x++]=S);return T(e,t,n,0===a?Z:s,u,c,l)}function ae(e,t,n){return T(e,t,n,X,p(C),b(e,2,-2),0)}function ie(e,t,n,r){return T(e,t,n,Y,b(e,0,r),b(e,r+1,-1),r)}var oe=function(e,t,n){for(var r=0,a=0;r=a,a=O(),38===r&&12===a&&(t[n]=1),!D(a);)M();return P(e,E)},se=function(e,t){return z(function(e,t){var n=-1,r=44;do{switch(D(r)){case 0:38===r&&12===O()&&(t[n]=1),e[n]+=oe(E-1,t,n);break;case 2:e[n]+=B(r);break;case 4:if(44===r){e[++n]=58===O()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=p(r)}}while(r=M());return e}(L(e),t))},ue=new WeakMap,ce=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ue.get(n))&&!r){ue.set(e,!0);for(var a=[],i=se(t,a),o=n.props,s=0,u=0;s<i.length;s++)for(var c=0;c<o.length;c++,u++)e.props[u]=a[s]?i[s].replace(/&\f/g,o[c]):o[c]+" "+i[s]}}},le=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},de=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case Y:e.return=ee(e.value,e.length);break;case J:return Q([_(e,{value:v(e.value,"@","@"+K)})],r);case Z:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Q([_(e,{props:[v(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Q([_(e,{props:[v(t,/:(plac\w+)/,":-webkit-input-$1")]}),_(e,{props:[v(t,/:(plac\w+)/,":-moz-$1")]}),_(e,{props:[v(t,/:(plac\w+)/,G+"input-$1")]})],r)}return""}))}}],fe=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||de;var a,i,o={},s=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;s.push(e)}));var u,c,l=[$,(c=function(e){u.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],f=function(e){var t=A(e);return function(n,r,a,i){for(var o="",s=0;s<t;s++)o+=e[s](n,r,a,i)||"";return o}}([ce,le].concat(r,l));i=function(e,t,n,r){u=n,function(e){Q(te(e),f)}(e?e+"{"+t.styles+"}":t.styles),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new d({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:i};return p.sheet.hydrate(s),p};var pe=function(e){for(var t,n=0,r=0,a=e.length;a>=4;++r,a-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(a){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},he={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var me=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},ve=/[A-Z]|^ms/g,ge=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ye=function(e){return 45===e.charCodeAt(1)},be=function(e){return null!=e&&"boolean"!==typeof e},xe=me((function(e){return ye(e)?e:e.replace(ve,"-$&").toLowerCase()})),Ae=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(ge,(function(e,t,n){return we={name:t,styles:n,next:we},t}))}return 1===he[e]||ye(e)||"number"!==typeof t||0===t?t:t+"px"};function ke(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return we={name:n.name,styles:n.styles,next:we},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)we={name:r.name,styles:r.styles,next:we},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var a=0;a<n.length;a++)r+=ke(e,t,n[a])+";";else for(var i in n){var o=n[i];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=i+"{"+t[o]+"}":be(o)&&(r+=xe(i)+":"+Ae(i,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=ke(e,t,o);switch(i){case"animation":case"animationName":r+=xe(i)+":"+s+";";break;default:r+=i+"{"+s+"}"}}else for(var u=0;u<o.length;u++)be(o[u])&&(r+=xe(i)+":"+Ae(i,o[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var a=we,i=n(e);return we=a,ke(e,t,i)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var we,Se=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Ie=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,a="";we=void 0;var i=e[0];null==i||void 0===i.raw?(r=!1,a+=ke(n,t,i)):a+=i[0];for(var o=1;o<e.length;o++)a+=ke(n,t,e[o]),r&&(a+=i[o]);Se.lastIndex=0;for(var s,u="";null!==(s=Se.exec(a));)u+="-"+s[1];return{name:pe(a)+u,styles:a,next:we}};function Ee(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var Ce=function(e,t,n){!function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)}(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a=t;do{e.insert(t===a?"."+r:"",a,e.sheet,!0);a=a.next}while(void 0!==a)}};function Ne(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function Te(e,t,n){var r=[],a=Ee(e,r,n);return r.length<2?n:a+t(r)}var _e=function e(t){for(var n="",r=0;r<t.length;r++){var a=t[r];if(null!=a){var i=void 0;switch(typeof a){case"boolean":break;case"object":if(Array.isArray(a))i=e(a);else for(var o in i="",a)a[o]&&o&&(i&&(i+=" "),i+=o);break;default:i=a}i&&(n&&(n+=" "),n+=i)}}return n},Re=function(e){var t=fe(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=Ie(n,t.registered,void 0);return Ce(t,a,!1),t.key+"-"+a.name};return{css:n,cx:function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return Te(t.registered,n,_e(r))},injectGlobal:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=Ie(n,t.registered);Ne(t,a)},keyframes:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=Ie(n,t.registered),i="animation-"+a.name;return Ne(t,{name:a.name,styles:"@keyframes "+i+"{"+a.styles+"}"}),i},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:Ee.bind(null,t.registered),merge:Te.bind(null,t.registered,n)}},Me=Re({key:"css"}),Oe=(Me.flush,Me.hydrate,Me.cx,Me.merge,Me.getRegisteredStyles,Me.injectGlobal,Me.keyframes,Me.css);Me.sheet,Me.cache;var Fe,Pe=function(t){var n=(0,e.useRef)(t);n.current=(0,e.useMemo)((function(){return t}),[t]);var r=(0,e.useRef)();return r.current||(r.current=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.current.apply(this,e)}),r.current},De=(Fe=e.useEffect,function(t,n){var r=(0,e.useRef)(!1);Fe((function(){return function(){r.current=!1}}),[]),Fe((function(){if(r.current)return t();r.current=!0}),n)}),Le=function(e){return"function"===typeof e},ze=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o};var Be,We=!("undefined"===typeof window||!window.document||!window.document.createElement),je=(Be=function(){return We?localStorage:void 0},function(t,n){var r;try{r=Be()}catch(u){console.error(u)}function a(){try{var e=null===r||void 0===r?void 0:r.getItem(t);if(e)return a=e,(null===n||void 0===n?void 0:n.deserializer)?null===n||void 0===n?void 0:n.deserializer(a):JSON.parse(a)}catch(i){console.error(i)}var a;return Le(null===n||void 0===n?void 0:n.defaultValue)?null===n||void 0===n?void 0:n.defaultValue():null===n||void 0===n?void 0:n.defaultValue}var i=ze((0,e.useState)((function(){return a()})),2),o=i[0],s=i[1];return De((function(){s(a())}),[t]),[o,Pe((function(e){var a=Le(e)?e(o):e;if(s(a),function(e){return"undefined"===typeof e}(a))null===r||void 0===r||r.removeItem(t);else try{null===r||void 0===r||r.setItem(t,function(e){return(null===n||void 0===n?void 0:n.serializer)?null===n||void 0===n?void 0:n.serializer(e):JSON.stringify(e)}(a))}catch(i){console.error(i)}}))]}),Ve=je;function Ue(){return Ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ue.apply(this,arguments)}var He=function(t,r){void 0===r&&(r={});var a,i=r,o=i.volume,s=void 0===o?1:o,u=i.playbackRate,c=void 0===u?1:u,l=i.soundEnabled,d=void 0===l||l,f=i.interrupt,p=void 0!==f&&f,h=i.onload,m=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(i,["id","volume","playbackRate","soundEnabled","interrupt","onload"]),v=e.useRef(null),g=e.useRef(!1),y=e.useState(null),b=y[0],x=y[1],A=e.useState(null),k=A[0],w=A[1],S=function(){"function"===typeof h&&h.call(this),g.current&&x(1e3*this.duration()),w(this)};a=function(){return n.e(510).then(n.t.bind(n,6510,23)).then((function(e){var n;g.current||(v.current=null!==(n=e.Howl)&&void 0!==n?n:e.default.Howl,g.current=!0,new v.current(Ue({src:Array.isArray(t)?t:[t],volume:s,rate:c,onload:S},m)))})),function(){g.current=!1}},(0,e.useEffect)(a,[]),e.useEffect((function(){v.current&&k&&w(new v.current(Ue({src:Array.isArray(t)?t:[t],volume:s,onload:S},m)))}),[JSON.stringify(t)]),e.useEffect((function(){k&&(k.volume(s),k.rate(c))}),[s,c]);var I=e.useCallback((function(e){"undefined"===typeof e&&(e={}),k&&(d||e.forceSoundEnabled)&&(p&&k.stop(),e.playbackRate&&k.rate(e.playbackRate),k.play(e.id))}),[k,d,p]),E=e.useCallback((function(e){k&&k.stop(e)}),[k]),C=e.useCallback((function(e){k&&k.pause(e)}),[k]);return[I,{sound:k,stop:E,pause:C,duration:b}]};function Ge(){return Ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ge.apply(this,arguments)}function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(7757);function Ke(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t,n){return t&&Je(e.prototype,t),n&&Je(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $e(e,t){return $e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$e(e,t)}function et(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$e(e,t)}function tt(e){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tt(e)}function nt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function it(e,t){if(t&&("object"===rt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return at(e)}function ot(e){var t=nt();return function(){var n,r=tt(e);if(t){var a=tt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return it(this,n)}}function st(){st=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof d?t:d,i=Object.create(a.prototype),o=new w(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return I()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=u;var l={};function d(){}function f(){}function p(){}var h={};s(h,a,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(S([])));v&&v!==t&&n.call(v,a)&&(h=v);var g=p.prototype=d.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(a,i,o,s){var u=c(e[a],e,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==rt(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(d).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var a;this._invoke=function(e,n){function i(){return new t((function(t,a){r(e,n,t,a)}))}return a=a?a.then(i,i):i()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=p,s(g,"constructor",p),s(p,"constructor",f),f.displayName=s(p,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),s(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new b(u(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(g),s(g,o,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;k(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function ut(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function ct(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){ut(i,r,a,o,s,"next",e)}function s(e){ut(i,r,a,o,s,"throw",e)}o(void 0)}))}}var lt,dt=n(1168),ft=Ze({},n.t(dt,2)),pt=ft.version,ht=ft.render,mt=ft.unmountComponentAtNode;try{Number((pt||"").split(".")[0])>=18&&(lt=ft.createRoot)}catch(A_e){}function vt(e){var t=ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&"object"===rt(t)&&(t.usingClientEntryPoint=e)}var gt="__rc_react_root__";function yt(e,t){lt?function(e,t){vt(!0);var n=t[gt]||lt(t);vt(!1),n.render(e),t[gt]=n}(e,t):function(e,t){ht(e,t)}(e,t)}function bt(e){return xt.apply(this,arguments)}function xt(){return(xt=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve().then((function(){var e;null===(e=t[gt])||void 0===e||e.unmount(),delete t[gt]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function At(e){mt(e)}function kt(){return(kt=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===lt){e.next=2;break}return e.abrupt("return",bt(t));case 2:At(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wt=n(6123),St=n.n(wt);function It(e){return e instanceof HTMLElement?e:dt.findDOMNode(e)}var Et=n(2715);function Ct(t,n,r){var a=e.useRef({});return"value"in a.current&&!r(a.current.condition,n)||(a.current.value=t(),a.current.condition=n),a.current.value}function Nt(e,t){"function"===typeof e?e(t):"object"===rt(e)&&e&&"current"in e&&(e.current=t)}function Tt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter((function(e){return e}));return r.length<=1?r[0]:function(e){t.forEach((function(t){Nt(t,e)}))}}function _t(e){var t,n,r=(0,Et.isMemo)(e)?e.type.type:e.type;return!("function"===typeof r&&!(null===(t=r.prototype)||void 0===t?void 0:t.render))&&!("function"===typeof e&&!(null===(n=e.prototype)||void 0===n?void 0:n.render))}function Rt(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}function Mt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var Ot=function(e,t){var n={animationend:Mt("Animation","AnimationEnd"),transitionend:Mt("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}(Rt(),"undefined"!==typeof window?window:{}),Ft={};if(Rt()){var Pt=document.createElement("div");Ft=Pt.style}var Dt={};function Lt(e){if(Dt[e])return Dt[e];var t=Ot[e];if(t)for(var n=Object.keys(t),r=n.length,a=0;a<r;a+=1){var i=n[a];if(Object.prototype.hasOwnProperty.call(t,i)&&i in Ft)return Dt[e]=t[i],Dt[e]}return""}var zt=Lt("animationend"),Bt=Lt("transitionend"),Wt=!(!zt||!Bt),jt=zt||"animationend",Vt=Bt||"transitionend";function Ut(e,t){if(!e)return null;if("object"===rt(e)){var n=t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}));return e[n]}return"".concat(e,"-").concat(t)}var Ht="none",Gt="appear",qt="enter",Kt="leave",Xt="none",Zt="prepare",Yt="start",Jt="active",Qt="end";function $t(t){var n=e.useRef(!1),r=u(e.useState(t),2),a=r[0],i=r[1];return e.useEffect((function(){return n.current=!1,function(){n.current=!0}}),[]),[a,function(e,t){t&&n.current||i(e)}]}var en=function(e){return+setTimeout(e,16)},tn=function(e){return clearTimeout(e)};"undefined"!==typeof window&&"requestAnimationFrame"in window&&(en=function(e){return window.requestAnimationFrame(e)},tn=function(e){return window.cancelAnimationFrame(e)});var nn=0,rn=new Map;function an(e){rn.delete(e)}function on(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=nn+=1;function r(t){if(0===t)an(n),e();else{var a=en((function(){r(t-1)}));rn.set(n,a)}}return r(t),n}on.cancel=function(e){var t=rn.get(e);return an(t),tn(t)};var sn=Rt()?e.useLayoutEffect:e.useEffect,un=[Zt,Yt,Jt,Qt];function cn(e){return e===Jt||e===Qt}var ln=function(t,n){var r=u($t(Xt),2),a=r[0],i=r[1],o=function(){var t=e.useRef(null);function n(){on.cancel(t.current)}return e.useEffect((function(){return function(){n()}}),[]),[function e(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;n();var i=on((function(){a<=1?r({isCanceled:function(){return i!==t.current}}):e(r,a-1)}));t.current=i},n]}(),s=u(o,2),c=s[0],l=s[1];return sn((function(){if(a!==Xt&&a!==Qt){var e=un.indexOf(a),t=un[e+1],r=n(a);false===r?i(t,!0):c((function(e){function n(){e.isCanceled()||i(t,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[t,a]),e.useEffect((function(){return function(){l()}}),[]),[function(){i(Zt,!0)},a]};function dn(t,n,r,a){var i=a.motionEnter,o=void 0===i||i,s=a.motionAppear,c=void 0===s||s,l=a.motionLeave,d=void 0===l||l,f=a.motionDeadline,p=a.motionLeaveImmediately,h=a.onAppearPrepare,m=a.onEnterPrepare,v=a.onLeavePrepare,g=a.onAppearStart,y=a.onEnterStart,b=a.onLeaveStart,x=a.onAppearActive,A=a.onEnterActive,k=a.onLeaveActive,w=a.onAppearEnd,S=a.onEnterEnd,I=a.onLeaveEnd,E=a.onVisibleChanged,C=u($t(),2),N=C[0],T=C[1],_=u($t(Ht),2),R=_[0],M=_[1],O=u($t(null),2),F=O[0],P=O[1],D=(0,e.useRef)(!1),L=(0,e.useRef)(null);function z(){return r()}var B=(0,e.useRef)(!1);function W(e){var t=z();if(!e||e.deadline||e.target===t){var n,r=B.current;R===Gt&&r?n=null===w||void 0===w?void 0:w(t,e):R===qt&&r?n=null===S||void 0===S?void 0:S(t,e):R===Kt&&r&&(n=null===I||void 0===I?void 0:I(t,e)),R!==Ht&&r&&!1!==n&&(M(Ht,!0),P(null,!0))}}var j=function(t){var n=(0,e.useRef)(),r=(0,e.useRef)(t);r.current=t;var a=e.useCallback((function(e){r.current(e)}),[]);function i(e){e&&(e.removeEventListener(Vt,a),e.removeEventListener(jt,a))}return e.useEffect((function(){return function(){i(n.current)}}),[]),[function(e){n.current&&n.current!==e&&i(n.current),e&&e!==n.current&&(e.addEventListener(Vt,a),e.addEventListener(jt,a),n.current=e)},i]}(W),V=u(j,1)[0],U=e.useMemo((function(){var e,t,n;switch(R){case Gt:return qe(e={},Zt,h),qe(e,Yt,g),qe(e,Jt,x),e;case qt:return qe(t={},Zt,m),qe(t,Yt,y),qe(t,Jt,A),t;case Kt:return qe(n={},Zt,v),qe(n,Yt,b),qe(n,Jt,k),n;default:return{}}}),[R]),H=u(ln(R,(function(e){if(e===Zt){var t=U.prepare;return!!t&&t(z())}var n;q in U&&P((null===(n=U[q])||void 0===n?void 0:n.call(U,z(),null))||null);return q===Jt&&(V(z()),f>0&&(clearTimeout(L.current),L.current=setTimeout((function(){W({deadline:!0})}),f))),true})),2),G=H[0],q=H[1],K=cn(q);B.current=K,sn((function(){T(n);var e,r=D.current;(D.current=!0,t)&&(!r&&n&&c&&(e=Gt),r&&n&&o&&(e=qt),(r&&!n&&d||!r&&p&&!n&&d)&&(e=Kt),e&&(M(e),G()))}),[n]),(0,e.useEffect)((function(){(R===Gt&&!c||R===qt&&!o||R===Kt&&!d)&&M(Ht)}),[c,o,d]),(0,e.useEffect)((function(){return function(){D.current=!1,clearTimeout(L.current)}}),[]),(0,e.useEffect)((function(){void 0!==N&&R===Ht&&(null===E||void 0===E||E(N))}),[N,R]);var X=F;return U.prepare&&q===Yt&&(X=Ze({transition:"none"},X)),[R,q,X,null!==N&&void 0!==N?N:n]}var fn=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"render",value:function(){return this.props.children}}]),n}(e.Component),pn=fn;var hn=function(t){var n=t;function r(e){return!(!e.motionName||!n)}"object"===rt(t)&&(n=t.transitionSupport);var a=e.forwardRef((function(t,n){var a=t.visible,i=void 0===a||a,o=t.removeOnLeave,s=void 0===o||o,c=t.forceRender,l=t.children,d=t.motionName,f=t.leavedClassName,p=t.eventProps,h=r(t),m=(0,e.useRef)(),v=(0,e.useRef)();var g=u(dn(h,i,(function(){try{return m.current instanceof HTMLElement?m.current:It(v.current)}catch(A_e){return null}}),t),4),y=g[0],b=g[1],x=g[2],A=g[3],k=e.useRef(A);A&&(k.current=!0);var w,S=e.useCallback((function(e){m.current=e,Nt(n,e)}),[n]),I=Ze(Ze({},p),{},{visible:i});if(l)if(y!==Ht&&r(t)){var E,C;b===Zt?C="prepare":cn(b)?C="active":b===Yt&&(C="start"),w=l(Ze(Ze({},I),{},{className:St()(Ut(d,y),(E={},qe(E,Ut(d,"".concat(y,"-").concat(C)),C),qe(E,d,"string"===typeof d),E)),style:x}),S)}else w=A?l(Ze({},I),S):!s&&k.current?l(Ze(Ze({},I),{},{className:f}),S):c?l(Ze(Ze({},I),{},{style:{display:"none"}}),S):null;else w=null;e.isValidElement(w)&&_t(w)&&(w.ref||(w=e.cloneElement(w,{ref:S})));return e.createElement(pn,{ref:v},w)}));return a.displayName="CSSMotion",a}(Wt),mn="add",vn="keep",gn="remove",yn="removed";function bn(e){var t;return Ze(Ze({},t=e&&"object"===rt(e)&&"key"in e?e:{key:e}),{},{key:String(t.key)})}function xn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(bn)}function An(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,a=t.length,i=xn(e),o=xn(t);i.forEach((function(e){for(var t=!1,i=r;i<a;i+=1){var s=o[i];if(s.key===e.key){r<i&&(n=n.concat(o.slice(r,i).map((function(e){return Ze(Ze({},e),{},{status:mn})}))),r=i),n.push(Ze(Ze({},s),{},{status:vn})),r+=1,t=!0;break}}t||n.push(Ze(Ze({},e),{},{status:gn}))})),r<a&&(n=n.concat(o.slice(r).map((function(e){return Ze(Ze({},e),{},{status:mn})}))));var s={};n.forEach((function(e){var t=e.key;s[t]=(s[t]||0)+1}));var u=Object.keys(s).filter((function(e){return s[e]>1}));return u.forEach((function(e){n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==gn})),n.forEach((function(t){t.key===e&&(t.status=vn)}))})),n}var kn=["component","children","onVisibleChanged","onAllRemoved"],wn=["status"],Sn=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];var In=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hn,r=function(t){et(a,t);var r=ot(a);function a(){var e;Ye(this,a);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).state={keyEntities:[]},e.removeKey=function(t){var n=e.state.keyEntities.map((function(e){return e.key!==t?e:Ze(Ze({},e),{},{status:yn})}));return e.setState({keyEntities:n}),n.filter((function(e){return e.status!==yn})).length},e}return Qe(a,[{key:"render",value:function(){var t=this,r=this.state.keyEntities,a=this.props,i=a.component,o=a.children,s=a.onVisibleChanged,u=a.onAllRemoved,c=Ke(a,kn),l=i||e.Fragment,d={};return Sn.forEach((function(e){d[e]=c[e],delete c[e]})),delete c.keys,e.createElement(l,c,r.map((function(r){var a=r.status,i=Ke(r,wn),c=a===mn||a===vn;return e.createElement(n,Ge({},d,{key:i.key,visible:c,eventProps:i,onVisibleChanged:function(e){(null===s||void 0===s||s(e,{key:i.key}),e)||0===t.removeKey(i.key)&&u&&u()}}),o)})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,a=xn(n);return{keyEntities:An(r,a).filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==yn||e.status!==gn}))}}}]),a}(e.Component);return r.defaultProps={component:"div"},r}(Wt),En=hn,Cn=function(t){et(r,t);var n=ot(r);function r(){var e;Ye(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=n.call.apply(n,[this].concat(a))).closeTimer=null,e.close=function(t){t&&t.stopPropagation(),e.clearCloseTimer();var n=e.props,r=n.onClose,a=n.noticeKey;r&&r(a)},e.startCloseTimer=function(){e.props.duration&&(e.closeTimer=window.setTimeout((function(){e.close()}),1e3*e.props.duration))},e.clearCloseTimer=function(){e.closeTimer&&(clearTimeout(e.closeTimer),e.closeTimer=null)},e}return Qe(r,[{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentDidUpdate",value:function(e){(this.props.duration!==e.duration||this.props.updateMark!==e.updateMark||this.props.visible!==e.visible&&this.props.visible)&&this.restartCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"restartCloseTimer",value:function(){this.clearCloseTimer(),this.startCloseTimer()}},{key:"render",value:function(){var t=this,n=this.props,r=n.prefixCls,a=n.className,i=n.closable,o=n.closeIcon,s=n.style,u=n.onClick,c=n.children,l=n.holder,d="".concat(r,"-notice"),f=Object.keys(this.props).reduce((function(e,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||(e[n]=t.props[n]),e}),{}),p=e.createElement("div",Ge({className:St()(d,a,qe({},"".concat(d,"-closable"),i)),style:s,onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onClick:u},f),e.createElement("div",{className:"".concat(d,"-content")},c),i?e.createElement("a",{tabIndex:0,onClick:this.close,className:"".concat(d,"-close")},o||e.createElement("span",{className:"".concat(d,"-close-x")})):null);return l?dt.createPortal(p,l):p}}]),r}(e.Component);function Nn(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Tn(e){return function(e){if(Array.isArray(e))return i(e)}(e)||Nn(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(t){var n=e.useRef({}),r=u(e.useState([]),2),a=r[0],i=r[1];return[function(r){var a=!0;t.add(r,(function(t,r){var o=r.key;if(t&&(!n.current[o]||a)){var s=e.createElement(Cn,Ge({},r,{holder:t}));n.current[o]=s,i((function(e){var t=e.findIndex((function(e){return e.key===r.key}));if(-1===t)return[].concat(Tn(e),[s]);var n=Tn(e);return n[t]=s,n}))}a=!1}))},e.createElement(e.Fragment,null,a)]}Cn.defaultProps={onClose:function(){},duration:1.5};var Rn=["getContainer"],Mn=0,On=Date.now();function Fn(){var e=Mn;return Mn+=1,"rcNotification_".concat(On,"_").concat(e)}var Pn=function(t){et(r,t);var n=ot(r);function r(){var e;Ye(this,r);for(var t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(e=n.call.apply(n,[this].concat(a))).state={notices:[]},e.hookRefs=new Map,e.add=function(t,n){var r=t.key||Fn(),a=Ze(Ze({},t),{},{key:r}),i=e.props.maxCount;e.setState((function(e){var t=e.notices,o=t.map((function(e){return e.notice.key})).indexOf(r),s=t.concat();return-1!==o?s.splice(o,1,{notice:a,holderCallback:n}):(i&&t.length>=i&&(a.key=s[0].notice.key,a.updateMark=Fn(),a.userPassKey=r,s.shift()),s.push({notice:a,holderCallback:n})),{notices:s}}))},e.remove=function(t){e.setState((function(e){return{notices:e.notices.filter((function(e){var n=e.notice,r=n.key;return(n.userPassKey||r)!==t}))}}))},e.noticePropsMap={},e}return Qe(r,[{key:"getTransitionName",value:function(){var e=this.props,t=e.prefixCls,n=e.animation,r=this.props.transitionName;return!r&&n&&(r="".concat(t,"-").concat(n)),r}},{key:"render",value:function(){var t=this,n=this.state.notices,r=this.props,a=r.prefixCls,i=r.className,o=r.closeIcon,s=r.style,u=[];return n.forEach((function(e,r){var i=e.notice,s=e.holderCallback,c=r===n.length-1?i.updateMark:void 0,l=i.key,d=i.userPassKey,f=Ze(Ze(Ze({prefixCls:a,closeIcon:o},i),i.props),{},{key:l,noticeKey:d||l,updateMark:c,onClose:function(e){var n;t.remove(e),null===(n=i.onClose)||void 0===n||n.call(i)},onClick:i.onClick,children:i.content});u.push(l),t.noticePropsMap[l]={props:f,holderCallback:s}})),e.createElement("div",{className:St()(a,i),style:s},e.createElement(In,{keys:u,motionName:this.getTransitionName(),onVisibleChanged:function(e,n){var r=n.key;e||delete t.noticePropsMap[r]}},(function(n){var r=n.key,i=n.className,o=n.style,s=n.visible,u=t.noticePropsMap[r],c=u.props,l=u.holderCallback;return l?e.createElement("div",{key:r,className:St()(i,"".concat(a,"-hook-holder")),style:Ze({},o),ref:function(e){"undefined"!==typeof r&&(e?(t.hookRefs.set(r,e),l(e,c)):t.hookRefs.delete(r))}}):e.createElement(Cn,Ge({},c,{className:St()(i,null===c||void 0===c?void 0:c.className),style:Ze(Ze({},o),null===c||void 0===c?void 0:c.style),visible:s}))})))}}]),r}(e.Component);Pn.newInstance=void 0,Pn.defaultProps={prefixCls:"rc-notification",animation:"fade",style:{top:65,left:"50%"}},Pn.newInstance=function(t,n){var r=t||{},a=r.getContainer,i=Ke(r,Rn),o=document.createElement("div");a?a().appendChild(o):document.body.appendChild(o);var s=!1;yt(e.createElement(Pn,Ge({},i,{ref:function(e){s||(s=!0,n({notice:function(t){e.add(t)},removeNotice:function(t){e.remove(t)},component:e,destroy:function(){!function(e){kt.apply(this,arguments)}(o),o.parentNode&&o.parentNode.removeChild(o)},useNotification:function(){return _n(e)}}))}})),o)};var Dn=Pn,Ln={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},zn=(0,e.createContext)({}),Bn=n(7819),Wn={};function jn(e,t){0}function Vn(e,t,n){t||Wn[n]||(e(!1,n),Wn[n]=!0)}var Un=function(e,t){Vn(jn,e,t)},Hn="rc-util-key";function Gn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):Hn}function qn(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function Kn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Rt())return null;var r,a=document.createElement("style");(null===(t=n.csp)||void 0===t?void 0:t.nonce)&&(a.nonce=null===(r=n.csp)||void 0===r?void 0:r.nonce);a.innerHTML=e;var i=qn(n),o=i.firstChild;return n.prepend&&i.prepend?i.prepend(a):n.prepend&&o?i.insertBefore(a,o):i.appendChild(a),a}var Xn=new Map;function Zn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=qn(t);return Array.from(Xn.get(n).children).find((function(n){return"STYLE"===n.tagName&&n.getAttribute(Gn(t))===e}))}function Yn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=qn(n);if(!Xn.has(r)){var a=Kn("",n),i=a.parentNode;Xn.set(r,i),i.removeChild(a)}var o=Zn(t,n);if(o){var s,u,c;if((null===(s=n.csp)||void 0===s?void 0:s.nonce)&&o.nonce!==(null===(u=n.csp)||void 0===u?void 0:u.nonce))o.nonce=null===(c=n.csp)||void 0===c?void 0:c.nonce;return o.innerHTML!==e&&(o.innerHTML=e),o}var l=Kn(e,n);return l.setAttribute(Gn(n),t),l}function Jn(e){return"object"===rt(e)&&"string"===typeof e.name&&"string"===typeof e.theme&&("object"===rt(e.icon)||"function"===typeof e.icon)}function Qn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];if("class"===n)t.className=r,delete t.class;else t[n]=r;return t}),{})}function $n(t,n,r){return r?e.createElement(t.tag,Ze(Ze({key:n},Qn(t.attrs)),r),(t.children||[]).map((function(e,r){return $n(e,"".concat(n,"-").concat(t.tag,"-").concat(r))}))):e.createElement(t.tag,Ze({key:n},Qn(t.attrs)),(t.children||[]).map((function(e,r){return $n(e,"".concat(n,"-").concat(t.tag,"-").concat(r))})))}function er(e){return(0,Bn.generate)(e)[0]}function tr(e){return e?Array.isArray(e)?e:[e]:[]}var nr="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",rr=["icon","className","onClick","style","primaryColor","secondaryColor"],ar={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var ir=function(t){var n=t.icon,r=t.className,a=t.onClick,i=t.style,o=t.primaryColor,s=t.secondaryColor,u=Ke(t,rr),c=ar;if(o&&(c={primaryColor:o,secondaryColor:s||er(o)}),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nr,n=(0,e.useContext)(zn).csp;(0,e.useEffect)((function(){Yn(t,"@ant-design-icons",{prepend:!0,csp:n})}),[])}(),function(e,t){Un(e,"[@ant-design/icons] ".concat(t))}(Jn(n),"icon should be icon definiton, but got ".concat(n)),!Jn(n))return null;var l=n;return l&&"function"===typeof l.icon&&(l=Ze(Ze({},l),{},{icon:l.icon(c.primaryColor,c.secondaryColor)})),$n(l.icon,"svg-".concat(l.name),Ze({className:r,onClick:a,style:i,"data-icon":l.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},u))};ir.displayName="IconReact",ir.getTwoToneColors=function(){return Ze({},ar)},ir.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;ar.primaryColor=t,ar.secondaryColor=n||er(t),ar.calculated=!!n};var or=ir;function sr(e){var t=u(tr(e),2),n=t[0],r=t[1];return or.setTwoToneColors({primaryColor:n,secondaryColor:r})}var ur=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];sr("#1890ff");var cr=e.forwardRef((function(t,n){var r,a=t.className,i=t.icon,o=t.spin,s=t.rotate,c=t.tabIndex,l=t.onClick,d=t.twoToneColor,f=Ke(t,ur),p=e.useContext(zn).prefixCls,h=void 0===p?"anticon":p,m=St()(h,(qe(r={},"".concat(h,"-").concat(i.name),!!i.name),qe(r,"".concat(h,"-spin"),!!o||"loading"===i.name),r),a),v=c;void 0===v&&l&&(v=-1);var g=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,y=u(tr(d),2),b=y[0],x=y[1];return e.createElement("span",Ze(Ze({role:"img","aria-label":i.name},f),{},{ref:n,tabIndex:v,onClick:l,className:m}),e.createElement(or,{icon:i,primaryColor:b,secondaryColor:x,style:g}))}));cr.displayName="AntdIcon",cr.getTwoToneColor=function(){var e=or.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},cr.setTwoToneColor=sr;var lr=cr,dr=function(t,n){return e.createElement(lr,Ze(Ze({},t),{},{ref:n,icon:Ln}))};dr.displayName="CloseOutlined";var fr=e.forwardRef(dr),pr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},hr=function(t,n){return e.createElement(lr,Ze(Ze({},t),{},{ref:n,icon:pr}))};hr.displayName="CheckCircleOutlined";var mr=e.forwardRef(hr),vr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"},gr=function(t,n){return e.createElement(lr,Ze(Ze({},t),{},{ref:n,icon:vr}))};gr.displayName="CloseCircleOutlined";var yr=e.forwardRef(gr),br={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},xr=function(t,n){return e.createElement(lr,Ze(Ze({},t),{},{ref:n,icon:br}))};xr.displayName="ExclamationCircleOutlined";var Ar=e.forwardRef(xr),kr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},wr=function(t,n){return e.createElement(lr,Ze(Ze({},t),{},{ref:n,icon:kr}))};wr.displayName="InfoCircleOutlined";var Sr=e.forwardRef(wr),Ir=e.createContext({getPrefixCls:function(e,t){return t||(e?"ant-".concat(e):"ant")}}),Er=Ir.Consumer;function Cr(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];return e.Children.forEach(t,(function(e){(void 0!==e&&null!==e||n.keepEmpty)&&(Array.isArray(e)?r=r.concat(Cr(e)):(0,Et.isFragment)(e)&&e.props?r=r.concat(Cr(e.props.children,n)):r.push(e))})),r}var Nr="RC_FORM_INTERNAL_HOOKS",Tr=function(){Un(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},_r=e.createContext({getFieldValue:Tr,getFieldsValue:Tr,getFieldError:Tr,getFieldWarning:Tr,getFieldsError:Tr,isFieldsTouched:Tr,isFieldTouched:Tr,isFieldValidating:Tr,isFieldsValidating:Tr,resetFields:Tr,setFields:Tr,setFieldsValue:Tr,validateFields:Tr,submit:Tr,getInternalHooks:function(){return Tr(),{dispatch:Tr,initEntityValue:Tr,registerField:Tr,useSubscribe:Tr,setInitialValues:Tr,destroyForm:Tr,setCallbacks:Tr,registerWatch:Tr,getFields:Tr,setValidateMessages:Tr,setPreserve:Tr,getInitialValue:Tr}}});function Rr(e){return void 0===e||null===e?[]:Array.isArray(e)?e:[e]}function Mr(){return Mr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mr.apply(this,arguments)}function Or(e){return Or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Or(e)}function Fr(e,t){return Fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Fr(e,t)}function Pr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(A_e){return!1}}function Dr(e,t,n){return Dr=Pr()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&Fr(a,n.prototype),a},Dr.apply(null,arguments)}function Lr(e){var t="function"===typeof Map?new Map:void 0;return Lr=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Dr(e,arguments,Or(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Fr(n,e)},Lr(e)}var zr=/%[sdj%]/g;function Br(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function Wr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=0,i=n.length;if("function"===typeof e)return e.apply(null,n);if("string"===typeof e){var o=e.replace(zr,(function(e){if("%%"===e)return"%";if(a>=i)return e;switch(e){case"%s":return String(n[a++]);case"%d":return Number(n[a++]);case"%j":try{return JSON.stringify(n[a++])}catch(Vo){return"[Circular]"}break;default:return e}}));return o}return e}function jr(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!==typeof e||e))}function Vr(e,t,n){var r=0,a=e.length;!function i(o){if(o&&o.length)n(o);else{var s=r;r+=1,s<a?t(e[s],i):n([])}}([])}var Ur=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,"Async Validation Error")||this).errors=t,r.fields=n,r}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Fr(t,n),r}(Lr(Error));function Hr(e,t,n,r,a){if(t.first){var i=new Promise((function(t,i){var o=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n]||[])})),t}(e);Vr(o,n,(function(e){return r(e),e.length?i(new Ur(e,Br(e))):t(a)}))}));return i.catch((function(e){return e})),i}var o=!0===t.firstFields?Object.keys(e):t.firstFields||[],s=Object.keys(e),u=s.length,c=0,l=[],d=new Promise((function(t,i){var d=function(e){if(l.push.apply(l,e),++c===u)return r(l),l.length?i(new Ur(l,Br(l))):t(a)};s.length||(r(l),t(a)),s.forEach((function(t){var r=e[t];-1!==o.indexOf(t)?Vr(r,n,d):function(e,t,n){var r=[],a=0,i=e.length;function o(e){r.push.apply(r,e||[]),++a===i&&n(r)}e.forEach((function(e){t(e,o)}))}(r,n,d)}))}));return d.catch((function(e){return e})),d}function Gr(e,t){return function(n){var r,a;return r=e.fullFields?function(e,t){for(var n=e,r=0;r<t.length;r++){if(void 0==n)return n;n=n[t[r]]}return n}(t,e.fullFields):t[n.field||e.fullField],(a=n)&&void 0!==a.message?(n.field=n.field||e.fullField,n.fieldValue=r,n):{message:"function"===typeof n?n():n,fieldValue:r,field:n.field||e.fullField}}}function qr(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"===typeof r&&"object"===typeof e[n]?e[n]=Mr({},e[n],r):e[n]=r}return e}var Kr=function(e,t,n,r,a,i){!e.required||n.hasOwnProperty(e.field)&&!jr(t,i||e.type)||r.push(Wr(a.messages.required,e.fullField))},Xr={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Zr={integer:function(e){return Zr.number(e)&&parseInt(e,10)===e},float:function(e){return Zr.number(e)&&!Zr.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(A_e){return!1}},date:function(e){return"function"===typeof e.getTime&&"function"===typeof e.getMonth&&"function"===typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"===typeof e},object:function(e){return"object"===typeof e&&!Zr.array(e)},method:function(e){return"function"===typeof e},email:function(e){return"string"===typeof e&&e.length<=320&&!!e.match(Xr.email)},url:function(e){return"string"===typeof e&&e.length<=2048&&!!e.match(Xr.url)},hex:function(e){return"string"===typeof e&&!!e.match(Xr.hex)}},Yr={required:Kr,whitespace:function(e,t,n,r,a){(/^\s+$/.test(t)||""===t)&&r.push(Wr(a.messages.whitespace,e.fullField))},type:function(e,t,n,r,a){if(e.required&&void 0===t)Kr(e,t,n,r,a);else{var i=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(i)>-1?Zr[i](t)||r.push(Wr(a.messages.types[i],e.fullField,e.type)):i&&typeof t!==e.type&&r.push(Wr(a.messages.types[i],e.fullField,e.type))}},range:function(e,t,n,r,a){var i="number"===typeof e.len,o="number"===typeof e.min,s="number"===typeof e.max,u=t,c=null,l="number"===typeof t,d="string"===typeof t,f=Array.isArray(t);if(l?c="number":d?c="string":f&&(c="array"),!c)return!1;f&&(u=t.length),d&&(u=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),i?u!==e.len&&r.push(Wr(a.messages[c].len,e.fullField,e.len)):o&&!s&&u<e.min?r.push(Wr(a.messages[c].min,e.fullField,e.min)):s&&!o&&u>e.max?r.push(Wr(a.messages[c].max,e.fullField,e.max)):o&&s&&(u<e.min||u>e.max)&&r.push(Wr(a.messages[c].range,e.fullField,e.min,e.max))},enum:function(e,t,n,r,a){e.enum=Array.isArray(e.enum)?e.enum:[],-1===e.enum.indexOf(t)&&r.push(Wr(a.messages.enum,e.fullField,e.enum.join(", ")))},pattern:function(e,t,n,r,a){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(Wr(a.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"===typeof e.pattern){new RegExp(e.pattern).test(t)||r.push(Wr(a.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},Jr=function(e,t,n,r,a){var i=e.type,o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(jr(t,i)&&!e.required)return n();Yr.required(e,t,r,o,a,i),jr(t,i)||Yr.type(e,t,r,o,a)}n(o)},Qr={string:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(jr(t,"string")&&!e.required)return n();Yr.required(e,t,r,i,a,"string"),jr(t,"string")||(Yr.type(e,t,r,i,a),Yr.range(e,t,r,i,a),Yr.pattern(e,t,r,i,a),!0===e.whitespace&&Yr.whitespace(e,t,r,i,a))}n(i)},method:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(jr(t)&&!e.required)return n();Yr.required(e,t,r,i,a),void 0!==t&&Yr.type(e,t,r,i,a)}n(i)},number:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),jr(t)&&!e.required)return n();Yr.required(e,t,r,i,a),void 0!==t&&(Yr.type(e,t,r,i,a),Yr.range(e,t,r,i,a))}n(i)},boolean:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(jr(t)&&!e.required)return n();Yr.required(e,t,r,i,a),void 0!==t&&Yr.type(e,t,r,i,a)}n(i)},regexp:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(jr(t)&&!e.required)return n();Yr.required(e,t,r,i,a),jr(t)||Yr.type(e,t,r,i,a)}n(i)},integer:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(jr(t)&&!e.required)return n();Yr.required(e,t,r,i,a),void 0!==t&&(Yr.type(e,t,r,i,a),Yr.range(e,t,r,i,a))}n(i)},float:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(jr(t)&&!e.required)return n();Yr.required(e,t,r,i,a),void 0!==t&&(Yr.type(e,t,r,i,a),Yr.range(e,t,r,i,a))}n(i)},array:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((void 0===t||null===t)&&!e.required)return n();Yr.required(e,t,r,i,a,"array"),void 0!==t&&null!==t&&(Yr.type(e,t,r,i,a),Yr.range(e,t,r,i,a))}n(i)},object:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(jr(t)&&!e.required)return n();Yr.required(e,t,r,i,a),void 0!==t&&Yr.type(e,t,r,i,a)}n(i)},enum:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(jr(t)&&!e.required)return n();Yr.required(e,t,r,i,a),void 0!==t&&Yr.enum(e,t,r,i,a)}n(i)},pattern:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(jr(t,"string")&&!e.required)return n();Yr.required(e,t,r,i,a),jr(t,"string")||Yr.pattern(e,t,r,i,a)}n(i)},date:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(jr(t,"date")&&!e.required)return n();var o;if(Yr.required(e,t,r,i,a),!jr(t,"date"))o=t instanceof Date?t:new Date(t),Yr.type(e,o,r,i,a),o&&Yr.range(e,o.getTime(),r,i,a)}n(i)},url:Jr,hex:Jr,email:Jr,required:function(e,t,n,r,a){var i=[],o=Array.isArray(t)?"array":typeof t;Yr.required(e,t,r,i,a,o),n(i)},any:function(e,t,n,r,a){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(jr(t)&&!e.required)return n();Yr.required(e,t,r,i,a)}n(i)}};function $r(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var ea=$r(),ta=function(){function e(e){this.rules=null,this._messages=ea,this.define(e)}var t=e.prototype;return t.define=function(e){var t=this;if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==typeof e||Array.isArray(e))throw new Error("Rules must be an object");this.rules={},Object.keys(e).forEach((function(n){var r=e[n];t.rules[n]=Array.isArray(r)?r:[r]}))},t.messages=function(e){return e&&(this._messages=qr($r(),e)),this._messages},t.validate=function(t,n,r){var a=this;void 0===n&&(n={}),void 0===r&&(r=function(){});var i=t,o=n,s=r;if("function"===typeof o&&(s=o,o={}),!this.rules||0===Object.keys(this.rules).length)return s&&s(null,i),Promise.resolve(i);if(o.messages){var u=this.messages();u===ea&&(u=$r()),qr(u,o.messages),o.messages=u}else o.messages=this.messages();var c={};(o.keys||Object.keys(this.rules)).forEach((function(e){var n=a.rules[e],r=i[e];n.forEach((function(n){var o=n;"function"===typeof o.transform&&(i===t&&(i=Mr({},i)),r=i[e]=o.transform(r)),(o="function"===typeof o?{validator:o}:Mr({},o)).validator=a.getValidationMethod(o),o.validator&&(o.field=e,o.fullField=o.fullField||e,o.type=a.getType(o),c[e]=c[e]||[],c[e].push({rule:o,value:r,source:i,field:e}))}))}));var l={};return Hr(c,o,(function(t,n){var r,a=t.rule,s=("object"===a.type||"array"===a.type)&&("object"===typeof a.fields||"object"===typeof a.defaultField);function u(e,t){return Mr({},t,{fullField:a.fullField+"."+e,fullFields:a.fullFields?[].concat(a.fullFields,[e]):[e]})}function c(r){void 0===r&&(r=[]);var c=Array.isArray(r)?r:[r];!o.suppressWarning&&c.length&&e.warning("async-validator:",c),c.length&&void 0!==a.message&&(c=[].concat(a.message));var d=c.map(Gr(a,i));if(o.first&&d.length)return l[a.field]=1,n(d);if(s){if(a.required&&!t.value)return void 0!==a.message?d=[].concat(a.message).map(Gr(a,i)):o.error&&(d=[o.error(a,Wr(o.messages.required,a.field))]),n(d);var f={};a.defaultField&&Object.keys(t.value).map((function(e){f[e]=a.defaultField})),f=Mr({},f,t.rule.fields);var p={};Object.keys(f).forEach((function(e){var t=f[e],n=Array.isArray(t)?t:[t];p[e]=n.map(u.bind(null,e))}));var h=new e(p);h.messages(o.messages),t.rule.options&&(t.rule.options.messages=o.messages,t.rule.options.error=o.error),h.validate(t.value,t.rule.options||o,(function(e){var t=[];d&&d.length&&t.push.apply(t,d),e&&e.length&&t.push.apply(t,e),n(t.length?t:null)}))}else n(d)}if(s=s&&(a.required||!a.required&&t.value),a.field=t.field,a.asyncValidator)r=a.asyncValidator(a,t.value,c,t.source,o);else if(a.validator){try{r=a.validator(a,t.value,c,t.source,o)}catch(d){null==console.error||console.error(d),setTimeout((function(){throw d}),0),c(d.message)}!0===r?c():!1===r?c("function"===typeof a.message?a.message(a.fullField||a.field):a.message||(a.fullField||a.field)+" fails"):r instanceof Array?c(r):r instanceof Error&&c(r.message)}r&&r.then&&r.then((function(){return c()}),(function(e){return c(e)}))}),(function(e){!function(e){var t=[],n={};function r(e){var n;Array.isArray(e)?t=(n=t).concat.apply(n,e):t.push(e)}for(var a=0;a<e.length;a++)r(e[a]);t.length?(n=Br(t),s(t,n)):s(null,i)}(e)}),i)},t.getType=function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!==typeof e.validator&&e.type&&!Qr.hasOwnProperty(e.type))throw new Error(Wr("Unknown rule type %s",e.type));return e.type||"string"},t.getValidationMethod=function(e){if("function"===typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?Qr.required:Qr[this.getType(e)]||void 0},e}();ta.register=function(e,t){if("function"!==typeof t)throw new Error("Cannot register a validator by type, validator is not a function");Qr[e]=t},ta.warning=function(){},ta.messages=ea,ta.validators=Qr;var na="'${name}' is not a valid ${type}",ra={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:na,method:na,array:na,object:na,number:na,date:na,boolean:na,integer:na,float:na,regexp:na,email:na,url:na,hex:na},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}};function aa(e,t){for(var n=e,r=0;r<t.length;r+=1){if(null===n||void 0===n)return;n=n[t[r]]}return n}function ia(e){return a(e)||Nn(e)||o(e)||s()}function oa(e,t,n,r){if(!t.length)return n;var a,i=ia(t),o=i[0],s=i.slice(1);return a=e||"number"!==typeof o?Array.isArray(e)?Tn(e):Ze({},e):[],r&&void 0===n&&1===s.length?delete a[o][s[0]]:a[o]=oa(a[o],s,n,r),a}function sa(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.length&&r&&void 0===n&&!aa(e,t.slice(0,-1))?e:oa(e,t,n,r)}function ua(e){return Array.isArray(e)?function(e){return e.map((function(e){return ua(e)}))}(e):"object"===rt(e)&&null!==e?function(e){if(Object.getPrototypeOf(e)===Object.prototype){var t={};for(var n in e)t[n]=ua(e[n]);return t}return e}(e):e}var ca=ua;function la(e){return Rr(e)}function da(e,t){return aa(e,t)}function fa(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=sa(e,t,n,r);return a}function pa(e,t){var n={};return t.forEach((function(t){var r=da(e,t);n=fa(n,t,r)})),n}function ha(e,t){return e&&e.some((function(e){return ya(e,t)}))}function ma(e){return"object"===rt(e)&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function va(e,t){var n=Array.isArray(e)?Tn(e):Ze({},e);return t?(Object.keys(t).forEach((function(e){var r=n[e],a=t[e],i=ma(r)&&ma(a);n[e]=i?va(r,a||{}):ca(a)})),n):n}function ga(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return va(e,t)}),e)}function ya(e,t){return!(!e||!t||e.length!==t.length)&&e.every((function(e,n){return t[n]===e}))}function ba(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&"object"===rt(t.target)&&e in t.target?t.target[e]:t}function xa(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var a=e[t],i=t-n;return i>0?[].concat(Tn(e.slice(0,n)),[a],Tn(e.slice(n,t)),Tn(e.slice(t+1,r))):i<0?[].concat(Tn(e.slice(0,t)),Tn(e.slice(t+1,n+1)),[a],Tn(e.slice(n+1,r))):e}var Aa=ta;function ka(e,t){return e.replace(/\$\{\w+\}/g,(function(e){var n=e.slice(2,-1);return t[n]}))}var wa="CODE_LOGIC_ERROR";function Sa(e,t,n,r,a){return Ia.apply(this,arguments)}function Ia(){return Ia=ct(st().mark((function t(n,r,a,i,o){var s,u,c,l,d,f,p,h,m;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return delete(s=Ze({},a)).ruleIndex,s.validator&&(u=s.validator,s.validator=function(){try{return u.apply(void 0,arguments)}catch(e){return console.error(e),Promise.reject(wa)}}),c=null,s&&"array"===s.type&&s.defaultField&&(c=s.defaultField,delete s.defaultField),l=new Aa(qe({},n,[s])),d=ga({},ra,i.validateMessages),l.messages(d),f=[],t.prev=9,t.next=12,Promise.resolve(l.validate(qe({},n,r),Ze({},i)));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(9),t.t0.errors&&(f=t.t0.errors.map((function(t,n){var r=t.message,a=r===wa?d.default:r;return e.isValidElement(a)?e.cloneElement(a,{key:"error_".concat(n)}):a})));case 17:if(f.length||!c){t.next=22;break}return t.next=20,Promise.all(r.map((function(e,t){return Sa("".concat(n,".").concat(t),e,c,i,o)})));case 20:return p=t.sent,t.abrupt("return",p.reduce((function(e,t){return[].concat(Tn(e),Tn(t))}),[]));case 22:return h=Ze(Ze({},a),{},{name:n,enum:(a.enum||[]).join(", ")},o),m=f.map((function(e){return"string"===typeof e?ka(e,h):e})),t.abrupt("return",m);case 25:case"end":return t.stop()}}),t,null,[[9,14]])}))),Ia.apply(this,arguments)}function Ea(e,t,n,r,a,i){var o,s=e.join("."),u=n.map((function(e,t){var n=e.validator,r=Ze(Ze({},e),{},{ruleIndex:t});return n&&(r.validator=function(e,t,r){var a=!1,i=n(e,t,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Promise.resolve().then((function(){Un(!a,"Your validator function has already return a promise. `callback` will be ignored."),a||r.apply(void 0,t)}))}));a=i&&"function"===typeof i.then&&"function"===typeof i.catch,Un(a,"`callback` is deprecated. Please return a promise instead."),a&&i.then((function(){r()})).catch((function(e){r(e||" ")}))}),r})).sort((function(e,t){var n=e.warningOnly,r=e.ruleIndex,a=t.warningOnly,i=t.ruleIndex;return!!n===!!a?r-i:n?1:-1}));if(!0===a)o=new Promise(function(){var e=ct(st().mark((function e(n,a){var o,c,l;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=0;case 1:if(!(o<u.length)){e.next=12;break}return c=u[o],e.next=5,Sa(s,t,c,r,i);case 5:if(!(l=e.sent).length){e.next=9;break}return a([{errors:l,rule:c}]),e.abrupt("return");case 9:o+=1,e.next=1;break;case 12:n([]);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());else{var c=u.map((function(e){return Sa(s,t,e,r,i).then((function(t){return{errors:t,rule:e}}))}));o=(a?function(e){return Na.apply(this,arguments)}(c):function(e){return Ca.apply(this,arguments)}(c)).then((function(e){return Promise.reject(e)}))}return o.catch((function(e){return e})),o}function Ca(){return(Ca=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t).then((function(e){var t;return(t=[]).concat.apply(t,Tn(e))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Na(){return Na=ct(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",new Promise((function(e){t.forEach((function(r){r.then((function(r){r.errors.length&&e([r]),(n+=1)===t.length&&e([])}))}))})));case 2:case"end":return e.stop()}}),e)}))),Na.apply(this,arguments)}var Ta=["name"],_a=[];function Ra(e,t,n,r,a,i){return"function"===typeof e?e(t,n,"source"in i?{source:i.source}:{}):r!==a}var Ma=function(t){et(r,t);var n=ot(r);function r(t){var a;(Ye(this,r),(a=n.call(this,t)).state={resetCount:0},a.cancelRegisterFunc=null,a.mounted=!1,a.touched=!1,a.dirty=!1,a.validatePromise=null,a.prevValidating=void 0,a.errors=_a,a.warnings=_a,a.cancelRegister=function(){var e=a.props,t=e.preserve,n=e.isListField,r=e.name;a.cancelRegisterFunc&&a.cancelRegisterFunc(n,t,la(r)),a.cancelRegisterFunc=null},a.getNamePath=function(){var e=a.props,t=e.name,n=e.fieldContext.prefixName;return void 0!==t?[].concat(Tn(void 0===n?[]:n),Tn(t)):[]},a.getRules=function(){var e=a.props,t=e.rules,n=void 0===t?[]:t,r=e.fieldContext;return n.map((function(e){return"function"===typeof e?e(r):e}))},a.refresh=function(){a.mounted&&a.setState((function(e){return{resetCount:e.resetCount+1}}))},a.triggerMetaEvent=function(e){var t=a.props.onMetaChange;null===t||void 0===t||t(Ze(Ze({},a.getMeta()),{},{destroy:e}))},a.onStoreChange=function(e,t,n){var r=a.props,i=r.shouldUpdate,o=r.dependencies,s=void 0===o?[]:o,u=r.onReset,c=n.store,l=a.getNamePath(),d=a.getValue(e),f=a.getValue(c),p=t&&ha(t,l);switch("valueUpdate"===n.type&&"external"===n.source&&d!==f&&(a.touched=!0,a.dirty=!0,a.validatePromise=null,a.errors=_a,a.warnings=_a,a.triggerMetaEvent()),n.type){case"reset":if(!t||p)return a.touched=!1,a.dirty=!1,a.validatePromise=null,a.errors=_a,a.warnings=_a,a.triggerMetaEvent(),null===u||void 0===u||u(),void a.refresh();break;case"remove":if(i)return void a.reRender();break;case"setField":if(p){var h=n.data;return"touched"in h&&(a.touched=h.touched),"validating"in h&&!("originRCField"in h)&&(a.validatePromise=h.validating?Promise.resolve([]):null),"errors"in h&&(a.errors=h.errors||_a),"warnings"in h&&(a.warnings=h.warnings||_a),a.dirty=!0,a.triggerMetaEvent(),void a.reRender()}if(i&&!l.length&&Ra(i,e,c,d,f,n))return void a.reRender();break;case"dependenciesUpdate":if(s.map(la).some((function(e){return ha(n.relatedFields,e)})))return void a.reRender();break;default:if(p||(!s.length||l.length||i)&&Ra(i,e,c,d,f,n))return void a.reRender()}!0===i&&a.reRender()},a.validateRules=function(e){var t=a.getNamePath(),n=a.getValue(),r=Promise.resolve().then((function(){if(!a.mounted)return[];var i=a.props,o=i.validateFirst,s=void 0!==o&&o,u=i.messageVariables,c=(e||{}).triggerName,l=a.getRules();c&&(l=l.filter((function(e){var t=e.validateTrigger;return!t||Rr(t).includes(c)})));var d=Ea(t,n,l,e,s,u);return d.catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_a;if(a.validatePromise===r){a.validatePromise=null;var t=[],n=[];e.forEach((function(e){var r=e.rule.warningOnly,a=e.errors,i=void 0===a?_a:a;r?n.push.apply(n,Tn(i)):t.push.apply(t,Tn(i))})),a.errors=t,a.warnings=n,a.triggerMetaEvent(),a.reRender()}})),d}));return a.validatePromise=r,a.dirty=!0,a.errors=_a,a.warnings=_a,a.triggerMetaEvent(),a.reRender(),r},a.isFieldValidating=function(){return!!a.validatePromise},a.isFieldTouched=function(){return a.touched},a.isFieldDirty=function(){return!(!a.dirty&&void 0===a.props.initialValue)||void 0!==(0,a.props.fieldContext.getInternalHooks(Nr).getInitialValue)(a.getNamePath())},a.getErrors=function(){return a.errors},a.getWarnings=function(){return a.warnings},a.isListField=function(){return a.props.isListField},a.isList=function(){return a.props.isList},a.isPreserve=function(){return a.props.preserve},a.getMeta=function(){return a.prevValidating=a.isFieldValidating(),{touched:a.isFieldTouched(),validating:a.prevValidating,errors:a.errors,warnings:a.warnings,name:a.getNamePath()}},a.getOnlyChild=function(t){if("function"===typeof t){var n=a.getMeta();return Ze(Ze({},a.getOnlyChild(t(a.getControlled(),n,a.props.fieldContext))),{},{isFunction:!0})}var r=Cr(t);return 1===r.length&&e.isValidElement(r[0])?{child:r[0],isFunction:!1}:{child:r,isFunction:!1}},a.getValue=function(e){var t=a.props.fieldContext.getFieldsValue,n=a.getNamePath();return da(e||t(!0),n)},a.getControlled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.props,n=t.trigger,r=t.validateTrigger,i=t.getValueFromEvent,o=t.normalize,s=t.valuePropName,u=t.getValueProps,c=t.fieldContext,l=void 0!==r?r:c.validateTrigger,d=a.getNamePath(),f=c.getInternalHooks,p=c.getFieldsValue,h=f(Nr),m=h.dispatch,v=a.getValue(),g=u||function(e){return qe({},s,e)},y=e[n],b=Ze(Ze({},e),g(v));b[n]=function(){var e;a.touched=!0,a.dirty=!0,a.triggerMetaEvent();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e=i?i.apply(void 0,n):ba.apply(void 0,[s].concat(n)),o&&(e=o(e,v,p(!0))),m({type:"updateValue",namePath:d,value:e}),y&&y.apply(void 0,n)};var x=Rr(l||[]);return x.forEach((function(e){var t=b[e];b[e]=function(){t&&t.apply(void 0,arguments);var n=a.props.rules;n&&n.length&&m({type:"validateField",namePath:d,triggerName:e})}})),b},t.fieldContext)&&(0,(0,t.fieldContext.getInternalHooks)(Nr).initEntityValue)(at(a));return a}return Qe(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,n=e.fieldContext;if(this.mounted=!0,n){var r=(0,n.getInternalHooks)(Nr).registerField;this.cancelRegisterFunc=r(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var t,n=this.state.resetCount,r=this.props.children,a=this.getOnlyChild(r),i=a.child;return a.isFunction?t=i:e.isValidElement(i)?t=e.cloneElement(i,this.getControlled(i.props)):(Un(!i,"`children` of Field is not validate ReactElement."),t=i),e.createElement(e.Fragment,{key:n},t)}}]),r}(e.Component);Ma.contextType=_r,Ma.defaultProps={trigger:"onChange",valuePropName:"value"};var Oa=function(t){var n=t.name,r=Ke(t,Ta),a=e.useContext(_r),i=void 0!==n?la(n):void 0,o="keep";return r.isListField||(o="_".concat((i||[]).join("_"))),e.createElement(Ma,Ge({key:o,name:i},r,{fieldContext:a}))},Fa=e.createContext(null),Pa=function(t){var n=t.name,r=t.initialValue,a=t.children,i=t.rules,o=t.validateTrigger,s=e.useContext(_r),u=e.useRef({keys:[],id:0}).current,c=e.useMemo((function(){var e=la(s.prefixName)||[];return[].concat(Tn(e),Tn(la(n)))}),[s.prefixName,n]),l=e.useMemo((function(){return Ze(Ze({},s),{},{prefixName:c})}),[s,c]),d=e.useMemo((function(){return{getKey:function(e){var t=c.length,n=e[t];return[u.keys[n],e.slice(t+1)]}}}),[c]);if("function"!==typeof a)return Un(!1,"Form.List only accepts function as children."),null;return e.createElement(Fa.Provider,{value:d},e.createElement(_r.Provider,{value:l},e.createElement(Oa,{name:[],shouldUpdate:function(e,t,n){return"internal"!==n.source&&e!==t},rules:i,validateTrigger:o,initialValue:r,isList:!0},(function(e,t){var n=e.value,r=void 0===n?[]:n,i=e.onChange,o=s.getFieldValue,l=function(){return o(c||[])||[]},d={add:function(e,t){var n=l();t>=0&&t<=n.length?(u.keys=[].concat(Tn(u.keys.slice(0,t)),[u.id],Tn(u.keys.slice(t))),i([].concat(Tn(n.slice(0,t)),[e],Tn(n.slice(t))))):(u.keys=[].concat(Tn(u.keys),[u.id]),i([].concat(Tn(n),[e]))),u.id+=1},remove:function(e){var t=l(),n=new Set(Array.isArray(e)?e:[e]);n.size<=0||(u.keys=u.keys.filter((function(e,t){return!n.has(t)})),i(t.filter((function(e,t){return!n.has(t)}))))},move:function(e,t){if(e!==t){var n=l();e<0||e>=n.length||t<0||t>=n.length||(u.keys=xa(u.keys,e,t),i(xa(n,e,t)))}}},f=r||[];return Array.isArray(f)||(f=[]),a(f.map((function(e,t){var n=u.keys[t];return void 0===n&&(u.keys[t]=u.id,n=u.keys[t],u.id+=1),{name:t,key:n,isListField:!0}})),d,t)}))))};var Da="__@field_split__";function La(e){return e.map((function(e){return"".concat(rt(e),":").concat(e)})).join(Da)}var za=function(){function e(){Ye(this,e),this.kvs=new Map}return Qe(e,[{key:"set",value:function(e,t){this.kvs.set(La(e),t)}},{key:"get",value:function(e){return this.kvs.get(La(e))}},{key:"update",value:function(e,t){var n=t(this.get(e));n?this.set(e,n):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete(La(e))}},{key:"map",value:function(e){return Tn(this.kvs.entries()).map((function(t){var n=u(t,2),r=n[0],a=n[1],i=r.split(Da);return e({key:i.map((function(e){var t=u(e.match(/^([^:]*):(.*)$/),3),n=t[1],r=t[2];return"number"===n?Number(r):r})),value:a})}))}},{key:"toJSON",value:function(){var e={};return this.map((function(t){var n=t.key,r=t.value;return e[n.join(".")]=r,null})),e}}]),e}(),Ba=za,Wa=["name","errors"],ja=Qe((function e(t){var n=this;Ye(this,e),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(e){return e===Nr?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(Un(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(e){n.subscribable=e},this.prevWithoutPreserves=null,this.setInitialValues=function(e,t){if(n.initialValues=e||{},t){var r,a=ga({},e,n.store);null===(r=n.prevWithoutPreserves)||void 0===r||r.map((function(t){var n=t.key;a=fa(a,n,da(e,n))})),n.prevWithoutPreserves=null,n.updateStore(a)}},this.destroyForm=function(){var e=new Ba;n.getFieldEntities(!0).forEach((function(t){n.isMergedPreserve(t.isPreserve())||e.set(t.getNamePath(),!0)})),n.prevWithoutPreserves=e},this.getInitialValue=function(e){var t=da(n.initialValues,e);return e.length?ca(t):t},this.setCallbacks=function(e){n.callbacks=e},this.setValidateMessages=function(e){n.validateMessages=e},this.setPreserve=function(e){n.preserve=e},this.watchList=[],this.registerWatch=function(e){return n.watchList.push(e),function(){n.watchList=n.watchList.filter((function(t){return t!==e}))}},this.notifyWatch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(n.watchList.length){var t=n.getFieldsValue();n.watchList.forEach((function(n){n(t,e)}))}},this.timeoutId=null,this.warningUnhooked=function(){0},this.updateStore=function(e){n.store=e},this.getFieldEntities=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?n.fieldEntities.filter((function(e){return e.getNamePath().length})):n.fieldEntities},this.getFieldsMap=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new Ba;return n.getFieldEntities(e).forEach((function(e){var n=e.getNamePath();t.set(n,e)})),t},this.getFieldEntitiesForNamePathList=function(e){if(!e)return n.getFieldEntities(!0);var t=n.getFieldsMap(!0);return e.map((function(e){var n=la(e);return t.get(n)||{INVALIDATE_NAME_PATH:la(e)}}))},this.getFieldsValue=function(e,t){if(n.warningUnhooked(),!0===e&&!t)return n.store;var r=n.getFieldEntitiesForNamePathList(Array.isArray(e)?e:null),a=[];return r.forEach((function(n){var r,i="INVALIDATE_NAME_PATH"in n?n.INVALIDATE_NAME_PATH:n.getNamePath();if(e||!(null===(r=n.isListField)||void 0===r?void 0:r.call(n)))if(t){var o="getMeta"in n?n.getMeta():null;t(o)&&a.push(i)}else a.push(i)})),pa(n.store,a.map(la))},this.getFieldValue=function(e){n.warningUnhooked();var t=la(e);return da(n.store,t)},this.getFieldsError=function(e){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(e).map((function(t,n){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors(),warnings:t.getWarnings()}:{name:la(e[n]),errors:[],warnings:[]}}))},this.getFieldError=function(e){n.warningUnhooked();var t=la(e);return n.getFieldsError([t])[0].errors},this.getFieldWarning=function(e){n.warningUnhooked();var t=la(e);return n.getFieldsError([t])[0].warnings},this.isFieldsTouched=function(){n.warningUnhooked();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a,i=t[0],o=t[1],s=!1;0===t.length?a=null:1===t.length?Array.isArray(i)?(a=i.map(la),s=!1):(a=null,s=i):(a=i.map(la),s=o);var u=n.getFieldEntities(!0),c=function(e){return e.isFieldTouched()};if(!a)return s?u.every(c):u.some(c);var l=new Ba;a.forEach((function(e){l.set(e,[])})),u.forEach((function(e){var t=e.getNamePath();a.forEach((function(n){n.every((function(e,n){return t[n]===e}))&&l.update(n,(function(t){return[].concat(Tn(t),[e])}))}))}));var d=function(e){return e.some(c)},f=l.map((function(e){return e.value}));return s?f.every(d):f.some(d)},this.isFieldTouched=function(e){return n.warningUnhooked(),n.isFieldsTouched([e])},this.isFieldsValidating=function(e){n.warningUnhooked();var t=n.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var r=e.map(la);return t.some((function(e){var t=e.getNamePath();return ha(r,t)&&e.isFieldValidating()}))},this.isFieldValidating=function(e){return n.warningUnhooked(),n.isFieldsValidating([e])},this.resetWithFieldInitialValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Ba,r=n.getFieldEntities(!0);r.forEach((function(e){var n=e.props.initialValue,r=e.getNamePath();if(void 0!==n){var a=t.get(r)||new Set;a.add({entity:e,value:n}),t.set(r,a)}}));var a,i=function(r){r.forEach((function(r){if(void 0!==r.props.initialValue){var a=r.getNamePath();if(void 0!==n.getInitialValue(a))Un(!1,"Form already set 'initialValues' with path '".concat(a.join("."),"'. Field can not overwrite it."));else{var i=t.get(a);if(i&&i.size>1)Un(!1,"Multiple Field with path '".concat(a.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(i){var o=n.getFieldValue(a);e.skipExist&&void 0!==o||n.updateStore(fa(n.store,a,Tn(i)[0].value))}}}}))};e.entities?a=e.entities:e.namePathList?(a=[],e.namePathList.forEach((function(e){var n,r=t.get(e);r&&(n=a).push.apply(n,Tn(Tn(r).map((function(e){return e.entity}))))}))):a=r,i(a)},this.resetFields=function(e){n.warningUnhooked();var t=n.store;if(!e)return n.updateStore(ga({},n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(t,null,{type:"reset"}),void n.notifyWatch();var r=e.map(la);r.forEach((function(e){var t=n.getInitialValue(e);n.updateStore(fa(n.store,e,t))})),n.resetWithFieldInitialValue({namePathList:r}),n.notifyObservers(t,r,{type:"reset"}),n.notifyWatch(r)},this.setFields=function(e){n.warningUnhooked();var t=n.store,r=[];e.forEach((function(e){var a=e.name,i=(e.errors,Ke(e,Wa)),o=la(a);r.push(o),"value"in i&&n.updateStore(fa(n.store,o,i.value)),n.notifyObservers(t,[o],{type:"setField",data:e})})),n.notifyWatch(r)},this.getFields=function(){return n.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),r=Ze(Ze({},e.getMeta()),{},{name:t,value:n.getFieldValue(t)});return Object.defineProperty(r,"originRCField",{value:!0}),r}))},this.initEntityValue=function(e){var t=e.props.initialValue;if(void 0!==t){var r=e.getNamePath();void 0===da(n.store,r)&&n.updateStore(fa(n.store,r,t))}},this.isMergedPreserve=function(e){var t=void 0!==e?e:n.preserve;return null===t||void 0===t||t},this.registerField=function(e){n.fieldEntities.push(e);var t=e.getNamePath();if(n.notifyWatch([t]),void 0!==e.props.initialValue){var r=n.store;n.resetWithFieldInitialValue({entities:[e],skipExist:!0}),n.notifyObservers(r,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(r,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter((function(t){return t!==e})),!n.isMergedPreserve(a)&&(!r||i.length>1)){var o=r?void 0:n.getInitialValue(t);if(t.length&&n.getFieldValue(t)!==o&&n.fieldEntities.every((function(e){return!ya(e.getNamePath(),t)}))){var s=n.store;n.updateStore(fa(s,t,o,!0)),n.notifyObservers(s,[t],{type:"remove"}),n.triggerDependenciesUpdate(s,t)}}n.notifyWatch([t])}},this.dispatch=function(e){switch(e.type){case"updateValue":var t=e.namePath,r=e.value;n.updateValue(t,r);break;case"validateField":var a=e.namePath,i=e.triggerName;n.validateFields([a],{triggerName:i})}},this.notifyObservers=function(e,t,r){if(n.subscribable){var a=Ze(Ze({},r),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(e,t,a)}))}else n.forceRootUpdate()},this.triggerDependenciesUpdate=function(e,t){var r=n.getDependencyChildrenFields(t);return r.length&&n.validateFields(r),n.notifyObservers(e,r,{type:"dependenciesUpdate",relatedFields:[t].concat(Tn(r))}),r},this.updateValue=function(e,t){var r=la(e),a=n.store;n.updateStore(fa(n.store,r,t)),n.notifyObservers(a,[r],{type:"valueUpdate",source:"internal"}),n.notifyWatch([r]);var i=n.triggerDependenciesUpdate(a,r),o=n.callbacks.onValuesChange;o&&o(pa(n.store,[r]),n.getFieldsValue());n.triggerOnFieldsChange([r].concat(Tn(i)))},this.setFieldsValue=function(e){n.warningUnhooked();var t=n.store;if(e){var r=ga(n.store,e);n.updateStore(r)}n.notifyObservers(t,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()},this.getDependencyChildrenFields=function(e){var t=new Set,r=[],a=new Ba;n.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var n=la(t);a.update(n,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))}));return function e(n){(a.get(n)||new Set).forEach((function(n){if(!t.has(n)){t.add(n);var a=n.getNamePath();n.isFieldDirty()&&a.length&&(r.push(a),e(a))}}))}(e),r},this.triggerOnFieldsChange=function(e,t){var r=n.callbacks.onFieldsChange;if(r){var a=n.getFields();if(t){var i=new Ba;t.forEach((function(e){var t=e.name,n=e.errors;i.set(t,n)})),a.forEach((function(e){e.errors=i.get(e.name)||e.errors}))}r(a.filter((function(t){var n=t.name;return ha(e,n)})),a)}},this.validateFields=function(e,t){n.warningUnhooked();var r=!!e,a=r?e.map(la):[],i=[];n.getFieldEntities(!0).forEach((function(o){if(r||a.push(o.getNamePath()),(null===t||void 0===t?void 0:t.recursive)&&r){var s=o.getNamePath();s.every((function(t,n){return e[n]===t||void 0===e[n]}))&&a.push(s)}if(o.props.rules&&o.props.rules.length){var u=o.getNamePath();if(!r||ha(a,u)){var c=o.validateRules(Ze({validateMessages:Ze(Ze({},ra),n.validateMessages)},t));i.push(c.then((function(){return{name:u,errors:[],warnings:[]}})).catch((function(e){var t=[],n=[];return e.forEach((function(e){var r=e.rule.warningOnly,a=e.errors;r?n.push.apply(n,Tn(a)):t.push.apply(t,Tn(a))})),t.length?Promise.reject({name:u,errors:t,warnings:n}):{name:u,errors:t,warnings:n}})))}}}));var o=function(e){var t=!1,n=e.length,r=[];return e.length?new Promise((function(a,i){e.forEach((function(e,o){e.catch((function(e){return t=!0,e})).then((function(e){n-=1,r[o]=e,n>0||(t&&i(r),a(r))}))}))})):Promise.resolve([])}(i);n.lastValidatePromise=o,o.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));n.notifyObservers(n.store,t,{type:"validateFinish"}),n.triggerOnFieldsChange(t,e)}));var s=o.then((function(){return n.lastValidatePromise===o?Promise.resolve(n.getFieldsValue(a)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:n.getFieldsValue(a),errorFields:t,outOfDate:n.lastValidatePromise!==o})}));return s.catch((function(e){return e})),s},this.submit=function(){n.warningUnhooked(),n.validateFields().then((function(e){var t=n.callbacks.onFinish;if(t)try{t(e)}catch(r){console.error(r)}})).catch((function(e){var t=n.callbacks.onFinishFailed;t&&t(e)}))},this.forceRootUpdate=t}));var Va=function(t){var n=e.useRef(),r=u(e.useState({}),2)[1];if(!n.current)if(t)n.current=t;else{var a=new ja((function(){r({})}));n.current=a.getForm()}return[n.current]},Ua=e.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),Ha=function(t){var n=t.validateMessages,r=t.onFormChange,a=t.onFormFinish,i=t.children,o=e.useContext(Ua),s=e.useRef({});return e.createElement(Ua.Provider,{value:Ze(Ze({},o),{},{validateMessages:Ze(Ze({},o.validateMessages),n),triggerFormChange:function(e,t){r&&r(e,{changedFields:t,forms:s.current}),o.triggerFormChange(e,t)},triggerFormFinish:function(e,t){a&&a(e,{values:t,forms:s.current}),o.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(s.current=Ze(Ze({},s.current),{},qe({},e,t))),o.registerForm(e,t)},unregisterForm:function(e){var t=Ze({},s.current);delete t[e],s.current=t,o.unregisterForm(e)}})},i)},Ga=Ua,qa=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],Ka=function(t,n){var r=t.name,a=t.initialValues,i=t.fields,o=t.form,s=t.preserve,c=t.children,l=t.component,d=void 0===l?"form":l,f=t.validateMessages,p=t.validateTrigger,h=void 0===p?"onChange":p,m=t.onValuesChange,v=t.onFieldsChange,g=t.onFinish,y=t.onFinishFailed,b=Ke(t,qa),x=e.useContext(Ga),A=u(Va(o),1)[0],k=A.getInternalHooks(Nr),w=k.useSubscribe,S=k.setInitialValues,I=k.setCallbacks,E=k.setValidateMessages,C=k.setPreserve,N=k.destroyForm;e.useImperativeHandle(n,(function(){return A})),e.useEffect((function(){return x.registerForm(r,A),function(){x.unregisterForm(r)}}),[x,A,r]),E(Ze(Ze({},x.validateMessages),f)),I({onValuesChange:m,onFieldsChange:function(e){if(x.triggerFormChange(r,e),v){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];v.apply(void 0,[e].concat(n))}},onFinish:function(e){x.triggerFormFinish(r,e),g&&g(e)},onFinishFailed:y}),C(s);var T,_=e.useRef(null);S(a,!_.current),_.current||(_.current=!0),e.useEffect((function(){return N}),[]);var R="function"===typeof c;R?T=c(A.getFieldsValue(!0),A):T=c;w(!R);var M=e.useRef();e.useEffect((function(){(function(e,t){if(e===t)return!0;if(!e&&t||e&&!t)return!1;if(!e||!t||"object"!==rt(e)||"object"!==rt(t))return!1;var n=Object.keys(e),r=Object.keys(t),a=new Set([].concat(Tn(n),Tn(r)));return Tn(a).every((function(n){var r=e[n],a=t[n];return"function"===typeof r&&"function"===typeof a||r===a}))})(M.current||[],i||[])||A.setFields(i||[]),M.current=i}),[i,A]);var O=e.useMemo((function(){return Ze(Ze({},A),{},{validateTrigger:h})}),[A,h]),F=e.createElement(_r.Provider,{value:O},T);return!1===d?F:e.createElement(d,Ge({},b,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),A.submit()},onReset:function(e){var t;e.preventDefault(),A.resetFields(),null===(t=b.onReset)||void 0===t||t.call(b,e)}}),F)};function Xa(e){try{return JSON.stringify(e)}catch(t){return Math.random()}}var Za=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=(0,e.useState)(),a=u(r,2),i=a[0],o=a[1],s=(0,e.useMemo)((function(){return Xa(i)}),[i]),c=(0,e.useRef)(s);c.current=s;var l=(0,e.useContext)(_r),d=n||l,f=d&&d._init,p=la(t),h=(0,e.useRef)(p);return h.current=p,(0,e.useEffect)((function(){if(f){var e=d.getFieldsValue,t=(0,(0,d.getInternalHooks)(Nr).registerWatch)((function(e){var t=da(e,h.current),n=Xa(t);c.current!==n&&(c.current=n,o(t))})),n=da(e(),h.current);return o(n),t}}),[]),i},Ya=e.forwardRef(Ka);Ya.FormProvider=Ha,Ya.Field=Oa,Ya.List=Pa,Ya.useForm=Va,Ya.useWatch=Za;var Ja=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function Qa(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],a=t[n],!(r===a||Ja(r)&&Ja(a)))return!1;var r,a;return!0}var $a={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},ei={lang:Ge({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}),timePickerLocale:Ge({},$a)},ti="${label} is not a valid ${type}",ni={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},DatePicker:ei,TimePicker:$a,Calendar:ei,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:ti,method:ti,array:ti,object:ti,number:ti,date:ti,boolean:ti,integer:ti,float:ti,regexp:ti,email:ti,url:ti,hex:ti},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}},ri=Ge({},ni.Modal);function ai(e){ri=e?Ge(Ge({},ri),e):Ge({},ni.Modal)}var ii=(0,e.createContext)(void 0),oi=function(t){et(r,t);var n=ot(r);function r(e){var t;return Ye(this,r),(t=n.call(this,e)).getMemoizedContextValue=function(e,t){void 0===t&&(t=Qa);var n=null;function r(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var i=e.apply(this,r);return n={lastResult:i,lastArgs:r,lastThis:this},i}return r.clear=function(){n=null},r}((function(e){return Ge(Ge({},e),{exist:!0})})),ai(e.locale&&e.locale.Modal),t}return Qe(r,[{key:"componentDidMount",value:function(){ai(this.props.locale&&this.props.locale.Modal)}},{key:"componentDidUpdate",value:function(e){var t=this.props.locale;e.locale!==t&&ai(t&&t.Modal)}},{key:"componentWillUnmount",value:function(){ai()}},{key:"render",value:function(){var t=this.props,n=t.locale,r=t.children,a=this.getMemoizedContextValue(n);return e.createElement(ii.Provider,{value:a},r)}}]),r}(e.Component);oi.defaultProps={locale:{}};var si=ni,ui=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"getLocale",value:function(){var e=this.props,t=e.componentName,n=e.defaultLocale||si[null!==t&&void 0!==t?t:"global"],r=this.context,a=t&&r?r[t]:{};return Ge(Ge({},n instanceof Function?n():n),a||{})}},{key:"getLocaleCode",value:function(){var e=this.context,t=e&&e.locale;return e&&e.exist&&!t?si.locale:t}},{key:"render",value:function(){return this.props.children(this.getLocale(),this.getLocaleCode(),this.context)}}]),n}(e.Component);ui.defaultProps={componentName:"global"},ui.contextType=ii;var ci={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},li=function(t,n){return e.createElement(lr,Ze(Ze({},t),{},{ref:n,icon:ci}))};li.displayName="LoadingOutlined";var di=e.forwardRef(li),fi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},pi=function(t,n){return e.createElement(lr,Ze(Ze({},t),{},{ref:n,icon:fi}))};pi.displayName="ExclamationCircleFilled";var hi=e.forwardRef(pi),mi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},vi=function(t,n){return e.createElement(lr,Ze(Ze({},t),{},{ref:n,icon:mi}))};vi.displayName="CloseCircleFilled";var gi=e.forwardRef(vi),yi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},bi=function(t,n){return e.createElement(lr,Ze(Ze({},t),{},{ref:n,icon:yi}))};bi.displayName="CheckCircleFilled";var xi,Ai=e.forwardRef(bi),ki={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},wi=function(t,n){return e.createElement(lr,Ze(Ze({},t),{},{ref:n,icon:ki}))};wi.displayName="InfoCircleFilled";var Si,Ii,Ei,Ci=3,Ni=1,Ti="",_i="move-up",Ri=!1,Mi=!1;function Oi(){return Ni++}function Fi(e,t){var n=e.prefixCls,r=e.getPopupContainer,a=ao(),i=a.getPrefixCls,o=a.getRootPrefixCls,s=a.getIconPrefixCls,u=i("message",n||Ti),c=o(e.rootPrefixCls,u),l=s();if(xi)t({prefixCls:u,rootPrefixCls:c,iconPrefixCls:l,instance:xi});else{var d={prefixCls:u,transitionName:Ri?_i:"".concat(c,"-").concat(_i),style:{top:Si},getContainer:Ii||r,maxCount:Ei};Dn.newInstance(d,(function(e){xi?t({prefixCls:u,rootPrefixCls:c,iconPrefixCls:l,instance:xi}):(xi=e,t({prefixCls:u,rootPrefixCls:c,iconPrefixCls:l,instance:e}))}))}}var Pi={info:e.forwardRef(wi),success:Ai,error:gi,warning:hi,loading:di},Di=Object.keys(Pi);function Li(t,n,r){var a,i=void 0!==t.duration?t.duration:Ci,o=Pi[t.type],s=St()("".concat(n,"-custom-content"),(qe(a={},"".concat(n,"-").concat(t.type),t.type),qe(a,"".concat(n,"-rtl"),!0===Mi),a));return{key:t.key,duration:i,style:t.style||{},className:t.className,content:e.createElement(lo,{iconPrefixCls:r},e.createElement("div",{className:s},t.icon||o&&e.createElement(o,null),e.createElement("span",null,t.content))),onClose:t.onClose,onClick:t.onClick}}var zi={open:function(e){var t=e.key||Oi(),n=new Promise((function(n){var r=function(){return"function"===typeof e.onClose&&e.onClose(),n(!0)};Fi(e,(function(n){var a=n.prefixCls,i=n.iconPrefixCls;n.instance.notice(Li(Ge(Ge({},e),{key:t,onClose:r}),a,i))}))})),r=function(){xi&&xi.removeNotice(t)};return r.then=function(e,t){return n.then(e,t)},r.promise=n,r},config:function(e){void 0!==e.top&&(Si=e.top,xi=null),void 0!==e.duration&&(Ci=e.duration),void 0!==e.prefixCls&&(Ti=e.prefixCls),void 0!==e.getContainer&&(Ii=e.getContainer,xi=null),void 0!==e.transitionName&&(_i=e.transitionName,xi=null,Ri=!0),void 0!==e.maxCount&&(Ei=e.maxCount,xi=null),void 0!==e.rtl&&(Mi=e.rtl)},destroy:function(e){if(xi)if(e){(0,xi.removeNotice)(e)}else{var t=xi.destroy;t(),xi=null}}};function Bi(e,t){e[t]=function(n,r,a){return function(e){return"[object Object]"===Object.prototype.toString.call(e)&&!!e.content}(n)?e.open(Ge(Ge({},n),{type:t})):("function"===typeof r&&(a=r,r=void 0),e.open({content:n,duration:r,type:t,onClose:a}))}}Di.forEach((function(e){return Bi(zi,e)})),zi.warn=zi.warning,zi.useMessage=function(t,n){return function(){var r,a,i=null,o=u(_n({add:function(e,t){null===i||void 0===i||i.component.add(e,t)}}),2),s=o[0],c=o[1];var l=e.useRef({});return l.current.open=function(e){var o=e.prefixCls,u=r("message",o),c=r(),l=e.key||Oi(),d=new Promise((function(r){var o=function(){return"function"===typeof e.onClose&&e.onClose(),r(!0)};t(Ge(Ge({},e),{prefixCls:u,rootPrefixCls:c,getPopupContainer:a}),(function(t){var r=t.prefixCls,a=t.instance;i=a,s(n(Ge(Ge({},e),{key:l,onClose:o}),r))}))})),f=function(){i&&i.removeNotice(l)};return f.then=function(e,t){return d.then(e,t)},f.promise=d,f},Di.forEach((function(e){return Bi(l.current,e)})),[l.current,e.createElement(Er,{key:"holder"},(function(e){return r=e.getPrefixCls,a=e.getPopupContainer,c}))]}}(Fi,Li);var Wi=zi,ji=n(2144),Vi=n(4929),Ui=n(6144),Hi=n(3777),Gi=function(){function e(t,n){var r;if(void 0===t&&(t=""),void 0===n&&(n={}),t instanceof e)return t;"number"===typeof t&&(t=(0,ji.Yt)(t)),this.originalInput=t;var a=(0,Ui.uA)(t);this.originalInput=t,this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(r=n.format)&&void 0!==r?r:a.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=a.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,r=e.b/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=(0,Hi.Yq)(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.toHsv=function(){var e=(0,ji.py)(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=(0,ji.py)(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var e=(0,ji.lC)(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=(0,ji.lC)(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1===this.a?"hsl(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(e){return void 0===e&&(e=!1),(0,ji.vq)(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),(0,ji.s)(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb(".concat(e,", ").concat(t,", ").concat(n,")"):"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var e=function(e){return"".concat(Math.round(100*(0,Hi.sh)(e,255)),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*(0,Hi.sh)(e,255))};return 1===this.a?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+(0,ji.vq)(this.r,this.g,this.b,!1),t=0,n=Object.entries(Vi.R);t<n.length;t++){var r=n[t],a=r[0];if(e===r[1])return a}return!1},e.prototype.toString=function(e){var t=Boolean(e);e=null!==e&&void 0!==e?e:this.format;var n=!1,r=this.a<1&&this.a>=0;return t||!r||!e.startsWith("hex")&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this.a?this.toName():this.toRgbString()},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=(0,Hi.V2)(n.l),new e(n)},e.prototype.brighten=function(t){void 0===t&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),new e(n)},e.prototype.darken=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=(0,Hi.V2)(n.l),new e(n)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=(0,Hi.V2)(n.s),new e(n)},e.prototype.saturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=(0,Hi.V2)(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new e(n)},e.prototype.mix=function(t,n){void 0===n&&(n=50);var r=this.toRgb(),a=new e(t).toRgb(),i=n/100;return new e({r:(a.r-r.r)*i+r.r,g:(a.g-r.g)*i+r.g,b:(a.b-r.b)*i+r.b,a:(a.a-r.a)*i+r.a})},e.prototype.analogous=function(t,n){void 0===t&&(t=6),void 0===n&&(n=30);var r=this.toHsl(),a=360/n,i=[this];for(r.h=(r.h-(a*t>>1)+720)%360;--t;)r.h=(r.h+a)%360,i.push(new e(r));return i},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);for(var n=this.toHsv(),r=n.h,a=n.s,i=n.v,o=[],s=1/t;t--;)o.push(new e({h:r,s:a,v:i})),i=(i+s)%1;return o},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),r=new e(t).toRgb();return new e({r:r.r+(n.r-r.r)*n.a,g:r.g+(n.g-r.g)*n.a,b:r.b+(n.b-r.b)*n.a})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),r=n.h,a=[this],i=360/t,o=1;o<t;o++)a.push(new e({h:(r+o*i)%360,s:n.s,l:n.l}));return a},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();var qi="-ant-".concat(Date.now(),"-").concat(Math.random());function Ki(e,t){var n=function(e,t){var n={},r=function(e,t){var n=e.clone();return(n=(null===t||void 0===t?void 0:t(n))||n).toRgbString()},a=function(e,t){var a=new Gi(e),i=(0,Bn.generate)(a.toRgbString());n["".concat(t,"-color")]=r(a),n["".concat(t,"-color-disabled")]=i[1],n["".concat(t,"-color-hover")]=i[4],n["".concat(t,"-color-active")]=i[7],n["".concat(t,"-color-outline")]=a.clone().setAlpha(.2).toRgbString(),n["".concat(t,"-color-deprecated-bg")]=i[1],n["".concat(t,"-color-deprecated-border")]=i[3]};if(t.primaryColor){a(t.primaryColor,"primary");var i=new Gi(t.primaryColor),o=(0,Bn.generate)(i.toRgbString());o.forEach((function(e,t){n["primary-".concat(t+1)]=e})),n["primary-color-deprecated-l-35"]=r(i,(function(e){return e.lighten(35)})),n["primary-color-deprecated-l-20"]=r(i,(function(e){return e.lighten(20)})),n["primary-color-deprecated-t-20"]=r(i,(function(e){return e.tint(20)})),n["primary-color-deprecated-t-50"]=r(i,(function(e){return e.tint(50)})),n["primary-color-deprecated-f-12"]=r(i,(function(e){return e.setAlpha(.12*e.getAlpha())}));var s=new Gi(o[0]);n["primary-color-active-deprecated-f-30"]=r(s,(function(e){return e.setAlpha(.3*e.getAlpha())})),n["primary-color-active-deprecated-d-02"]=r(s,(function(e){return e.darken(2)}))}t.successColor&&a(t.successColor,"success"),t.warningColor&&a(t.warningColor,"warning"),t.errorColor&&a(t.errorColor,"error"),t.infoColor&&a(t.infoColor,"info");var u=Object.keys(n).map((function(t){return"--".concat(e,"-").concat(t,": ").concat(n[t],";")}));return"\n  :root {\n    ".concat(u.join("\n"),"\n  }\n  ").trim()}(e,t);Rt()&&Yn(n,"".concat(qi,"-dynamic-theme"))}var Xi,Zi,Yi=e.createContext(!1),Ji=function(t){var n=t.children,r=t.disabled,a=e.useContext(Yi);return e.createElement(Yi.Provider,{value:r||a},n)},Qi=e.createContext(void 0),$i=function(t){var n=t.children,r=t.size;return e.createElement(Qi.Consumer,null,(function(t){return e.createElement(Qi.Provider,{value:r||t},n)}))},eo=Qi,to=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form"];function no(){return Xi||"ant"}function ro(){return Zi||"anticon"}var ao=function(){return{getPrefixCls:function(e,t){return t||(e?"".concat(no(),"-").concat(e):no())},getIconPrefixCls:ro,getRootPrefixCls:function(e,t){return e||(Xi||(t&&t.includes("-")?t.replace(/^(.*)-[^-]*$/,"$1"):no()))}}},io=function(t){var n,r,a=t.children,i=t.csp,o=t.autoInsertSpaceInButton,s=t.form,u=t.locale,c=t.componentSize,l=t.direction,d=t.space,f=t.virtual,p=t.dropdownMatchSelectWidth,h=t.legacyLocale,m=t.parentContext,v=t.iconPrefixCls,g=t.componentDisabled,y=e.useCallback((function(e,n){var r=t.prefixCls;if(n)return n;var a=r||m.getPrefixCls("");return e?"".concat(a,"-").concat(e):a}),[m.getPrefixCls,t.prefixCls]),b=Ge(Ge({},m),{csp:i,autoInsertSpaceInButton:o,locale:u||h,direction:l,space:d,virtual:f,dropdownMatchSelectWidth:p,getPrefixCls:y});to.forEach((function(e){var n=t[e];n&&(b[e]=n)}));var x=Ct((function(){return b}),b,(function(e,t){var n=Object.keys(e),r=Object.keys(t);return n.length!==r.length||n.some((function(n){return e[n]!==t[n]}))})),A=e.useMemo((function(){return{prefixCls:v,csp:i}}),[v,i]),k=a,w={};return u&&(w=(null===(n=u.Form)||void 0===n?void 0:n.defaultValidateMessages)||(null===(r=ni.Form)||void 0===r?void 0:r.defaultValidateMessages)||{}),s&&s.validateMessages&&(w=Ge(Ge({},w),s.validateMessages)),Object.keys(w).length>0&&(k=e.createElement(Ha,{validateMessages:w},a)),u&&(k=e.createElement(oi,{locale:u,_ANT_MARK__:"internalMark"},k)),(v||i)&&(k=e.createElement(zn.Provider,{value:A},k)),c&&(k=e.createElement($i,{size:c},k)),void 0!==g&&(k=e.createElement(Ji,{disabled:g},k)),e.createElement(Ir.Provider,{value:x},k)},oo=function(t){return e.useEffect((function(){t.direction&&(Wi.config({rtl:"rtl"===t.direction}),So.config({rtl:"rtl"===t.direction}))}),[t.direction]),e.createElement(ui,null,(function(n,r,a){return e.createElement(Er,null,(function(n){return e.createElement(io,Ge({parentContext:n,legacyLocale:a},t))}))}))};oo.ConfigContext=Ir,oo.SizeContext=eo,oo.config=function(e){var t=e.prefixCls,n=e.iconPrefixCls,r=e.theme;void 0!==t&&(Xi=t),void 0!==n&&(Zi=n),r&&Ki(no(),r)};var so,uo,co,lo=oo,fo={},po=4.5,ho=24,mo=24,vo="",go="topRight",yo=!1;function bo(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ho,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mo;switch(e){case"top":t={left:"50%",transform:"translateX(-50%)",right:"auto",top:n,bottom:"auto"};break;case"topLeft":t={left:0,top:n,bottom:"auto"};break;case"topRight":t={right:0,top:n,bottom:"auto"};break;case"bottom":t={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:r};break;case"bottomLeft":t={left:0,top:"auto",bottom:r};break;default:t={right:0,top:"auto",bottom:r}}return t}function xo(e,t){var n=e.placement,r=void 0===n?go:n,a=e.top,i=e.bottom,o=e.getContainer,s=void 0===o?so:o,u=e.prefixCls,c=ao(),l=c.getPrefixCls,d=c.getIconPrefixCls,f=l("notification",u||vo),p=d(),h="".concat(f,"-").concat(r),m=fo[h];if(m)Promise.resolve(m).then((function(e){t({prefixCls:"".concat(f,"-notice"),iconPrefixCls:p,instance:e})}));else{var v=St()("".concat(f,"-").concat(r),qe({},"".concat(f,"-rtl"),!0===yo));fo[h]=new Promise((function(e){Dn.newInstance({prefixCls:f,className:v,style:bo(r,a,i),getContainer:s,maxCount:co},(function(n){e(n),t({prefixCls:"".concat(f,"-notice"),iconPrefixCls:p,instance:n})}))}))}}var Ao={success:mr,info:Sr,error:yr,warning:Ar};function ko(t,n,r){var a=t.duration,i=t.icon,o=t.type,s=t.description,u=t.message,c=t.btn,l=t.onClose,d=t.onClick,f=t.key,p=t.style,h=t.className,m=t.closeIcon,v=void 0===m?uo:m,g=void 0===a?po:a,y=null;i?y=e.createElement("span",{className:"".concat(n,"-icon")},t.icon):o&&(y=e.createElement(Ao[o]||null,{className:"".concat(n,"-icon ").concat(n,"-icon-").concat(o)}));var b=e.createElement("span",{className:"".concat(n,"-close-x")},v||e.createElement(fr,{className:"".concat(n,"-close-icon")})),x=!s&&y?e.createElement("span",{className:"".concat(n,"-message-single-line-auto-margin")}):null;return{content:e.createElement(lo,{iconPrefixCls:r},e.createElement("div",{className:y?"".concat(n,"-with-icon"):"",role:"alert"},y,e.createElement("div",{className:"".concat(n,"-message")},x,u),e.createElement("div",{className:"".concat(n,"-description")},s),c?e.createElement("span",{className:"".concat(n,"-btn")},c):null)),duration:g,closable:!0,closeIcon:b,onClose:l,onClick:d,key:f,style:p||{},className:St()(h,qe({},"".concat(n,"-").concat(o),!!o))}}var wo={open:function(e){xo(e,(function(t){var n=t.prefixCls,r=t.iconPrefixCls;t.instance.notice(ko(e,n,r))}))},close:function(e){Object.keys(fo).forEach((function(t){return Promise.resolve(fo[t]).then((function(t){t.removeNotice(e)}))}))},config:function(e){var t=e.duration,n=e.placement,r=e.bottom,a=e.top,i=e.getContainer,o=e.closeIcon,s=e.prefixCls;void 0!==s&&(vo=s),void 0!==t&&(po=t),void 0!==n?go=n:e.rtl&&(go="topLeft"),void 0!==r&&(mo=r),void 0!==a&&(ho=a),void 0!==i&&(so=i),void 0!==o&&(uo=o),void 0!==e.rtl&&(yo=e.rtl),void 0!==e.maxCount&&(co=e.maxCount)},destroy:function(){Object.keys(fo).forEach((function(e){Promise.resolve(fo[e]).then((function(e){e.destroy()})),delete fo[e]}))}};["success","info","warning","error"].forEach((function(e){wo[e]=function(t){return wo.open(Ge(Ge({},t),{type:e}))}})),wo.warn=wo.warning,wo.useNotification=function(t,n){return function(){var r,a=null,i=u(_n({add:function(e,t){null===a||void 0===a||a.component.add(e,t)}}),2),o=i[0],s=i[1];var c=e.useRef({});return c.current.open=function(e){var i=e.prefixCls,s=r("notification",i);t(Ge(Ge({},e),{prefixCls:s}),(function(t){var r=t.prefixCls,i=t.instance;a=i,o(n(e,r))}))},["success","info","warning","error"].forEach((function(e){c.current[e]=function(t){return c.current.open(Ge(Ge({},t),{type:e}))}})),[c.current,e.createElement(Er,{key:"holder"},(function(e){return r=e.getPrefixCls,s}))]}}(xo,ko);var So=wo;function Io(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Eo(e){return!!e&&!!e[ps]}function Co(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===hs}(e)||Array.isArray(e)||!!e[fs]||!!e.constructor[fs]||Fo(e)||Po(e))}function No(e,t,n){void 0===n&&(n=!1),0===To(e)?(n?Object.keys:ms)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function To(e){var t=e[ps];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Fo(e)?2:Po(e)?3:0}function _o(e,t){return 2===To(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ro(e,t){return 2===To(e)?e.get(t):e[t]}function Mo(e,t,n){var r=To(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function Oo(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function Fo(e){return us&&e instanceof Map}function Po(e){return cs&&e instanceof Set}function Do(e){return e.o||e.t}function Lo(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=vs(e);delete t[ps];for(var n=ms(t),r=0;r<n.length;r++){var a=n[r],i=t[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function zo(e,t){return void 0===t&&(t=!1),Wo(e)||Eo(e)||!Co(e)||(To(e)>1&&(e.set=e.add=e.clear=e.delete=Bo),Object.freeze(e),t&&No(e,(function(e,t){return zo(t,!0)}),!0)),e}function Bo(){Io(2)}function Wo(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function jo(e){var t=gs[e];return t||Io(18,e),t}function Vo(){return os}function Uo(e,t){t&&(jo("Patches"),e.u=[],e.s=[],e.v=t)}function Ho(e){Go(e),e.p.forEach(Ko),e.p=null}function Go(e){e===os&&(os=e.l)}function qo(e){return os={p:[],l:os,h:e,m:!0,_:0}}function Ko(e){var t=e[ps];0===t.i||1===t.i?t.j():t.O=!0}function Xo(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||jo("ES5").S(t,e,r),r?(n[ps].P&&(Ho(t),Io(4)),Co(e)&&(e=Zo(t,e),t.l||Jo(t,e)),t.u&&jo("Patches").M(n[ps].t,e,t.u,t.s)):e=Zo(t,n,[]),Ho(t),t.u&&t.v(t.u,t.s),e!==ds?e:void 0}function Zo(e,t,n){if(Wo(t))return t;var r=t[ps];if(!r)return No(t,(function(a,i){return Yo(e,r,t,a,i,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Jo(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var a=4===r.i||5===r.i?r.o=Lo(r.k):r.o;No(3===r.i?new Set(a):a,(function(t,i){return Yo(e,r,a,t,i,n)})),Jo(e,a,!1),n&&e.u&&jo("Patches").R(r,n,e.u,e.s)}return r.o}function Yo(e,t,n,r,a,i){if(Eo(a)){var o=Zo(e,a,i&&t&&3!==t.i&&!_o(t.D,r)?i.concat(r):void 0);if(Mo(n,r,o),!Eo(o))return;e.m=!1}if(Co(a)&&!Wo(a)){if(!e.h.F&&e._<1)return;Zo(e,a),t&&t.A.l||Jo(e,a)}}function Jo(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&zo(t,n)}function Qo(e,t){var n=e[ps];return(n?Do(n):e)[t]}function $o(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function es(e){e.P||(e.P=!0,e.l&&es(e.l))}function ts(e){e.o||(e.o=Lo(e.t))}function ns(e,t,n){var r=Fo(t)?jo("MapSet").N(t,n):Po(t)?jo("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Vo(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},a=r,i=ys;n&&(a=[r],i=bs);var o=Proxy.revocable(a,i),s=o.revoke,u=o.proxy;return r.k=u,r.j=s,u}(t,n):jo("ES5").J(t,n);return(n?n.A:Vo()).p.push(r),r}function rs(e){return Eo(e)||Io(22,e),function e(t){if(!Co(t))return t;var n,r=t[ps],a=To(t);if(r){if(!r.P&&(r.i<4||!jo("ES5").K(r)))return r.t;r.I=!0,n=as(t,a),r.I=!1}else n=as(t,a);return No(n,(function(t,a){r&&Ro(r.t,t)===a||Mo(n,t,e(a))})),3===a?new Set(n):n}(e)}function as(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Lo(e)}var is,os,ss="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),us="undefined"!=typeof Map,cs="undefined"!=typeof Set,ls="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,ds=ss?Symbol.for("immer-nothing"):((is={})["immer-nothing"]=!0,is),fs=ss?Symbol.for("immer-draftable"):"__$immer_draftable",ps=ss?Symbol.for("immer-state"):"__$immer_state",hs=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),ms="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,vs=Object.getOwnPropertyDescriptors||function(e){var t={};return ms(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},gs={},ys={get:function(e,t){if(t===ps)return e;var n=Do(e);if(!_o(n,t))return function(e,t,n){var r,a=$o(t,n);return a?"value"in a?a.value:null===(r=a.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!Co(r)?r:r===Qo(e.t,t)?(ts(e),e.o[t]=ns(e.A.h,r,e)):r},has:function(e,t){return t in Do(e)},ownKeys:function(e){return Reflect.ownKeys(Do(e))},set:function(e,t,n){var r=$o(Do(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var a=Qo(Do(e),t),i=null==a?void 0:a[ps];if(i&&i.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Oo(n,a)&&(void 0!==n||_o(e.t,t)))return!0;ts(e),es(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==Qo(e.t,t)||t in e.t?(e.D[t]=!1,ts(e),es(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Do(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){Io(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Io(12)}},bs={};No(ys,(function(e,t){bs[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),bs.deleteProperty=function(e,t){return bs.set.call(this,e,t,void 0)},bs.set=function(e,t,n){return ys.set.call(this,e[0],t,n,e[0])};var xs=function(){function e(e){var t=this;this.g=ls,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var a=n;n=e;var i=t;return function(e){var t=this;void 0===e&&(e=a);for(var r=arguments.length,o=Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return i.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&Io(6),void 0!==r&&"function"!=typeof r&&Io(7),Co(e)){var s=qo(t),u=ns(t,e,void 0),c=!0;try{o=n(u),c=!1}finally{c?Ho(s):Go(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return Uo(s,r),Xo(e,s)}),(function(e){throw Ho(s),e})):(Uo(s,r),Xo(o,s))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===ds&&(o=void 0),t.F&&zo(o,!0),r){var l=[],d=[];jo("Patches").M(e,o,l,d),r(l,d)}return o}Io(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,a=Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(a))}))};var r,a,i=t.produce(e,n,(function(e,t){r=e,a=t}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,r,a]})):[i,r,a]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){Co(e)||Io(8),Eo(e)&&(e=rs(e));var t=qo(this),n=ns(this,e,void 0);return n[ps].C=!0,Go(t),n},t.finishDraft=function(e,t){var n=(e&&e[ps]).A;return Uo(n,t),Xo(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!ls&&Io(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var a=jo("Patches").$;return Eo(e)?a(e,t):this.produce(e,(function(e){return a(e,t)}))},e}(),As=new xs,ks=As.produce,ws=(As.produceWithPatches.bind(As),As.setAutoFreeze.bind(As),As.setUseProxies.bind(As),As.applyPatches.bind(As),As.createDraft.bind(As),As.finishDraft.bind(As),ks);var Ss=function(){return Ss=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ss.apply(this,arguments)};function Is(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}Object.create;function Es(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Cs(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}function Ns(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var Ts=function(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))},_s=function(e){return(Array.isArray(e)?e:[e]).filter((function(e){return!!e})).map((function(e){return"mdc-theme--"+Ts(e)}))},Rs=e.forwardRef((function(t,n){var r=t.tag,a=void 0===r?"div":r,i=(t.theme,t.element),o=Is(t,["tag","theme","element"]),s=i?i.props(o):o,u=i?Os(n,i.setRef):n;return e.createElement(a,Ss({},s,{ref:u}))})),Ms=function(e,t){return St().apply(void 0,Ns(Ns([e.className],Cs(e.theme?_s(e.theme):[])),Cs("function"===typeof t?t(e):t)))},Os=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n,r;try{for(var a=Es(e),i=a.next();!i.done;i=a.next()){var o=i.value;"function"===typeof o?o(t):o&&"current"in o&&(o.current=t)}}catch(s){n={error:s}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},Fs=function(e,t){"function"===typeof e?e(t):e&&"current"in e&&(e.current=t)};function Ps(t){var n=e.forwardRef(t),r=function(t,n){return e.createElement(e.Fragment,null)};return r.displayName=t.constructor.name||"RMWCComponent",n.displayName=r.displayName,n}var Ds=function(e){var t,n,r,a=Array.isArray(e)?e[0]:e;return(null===(t=null===a||void 0===a?void 0:a.type)||void 0===t?void 0:t.displayName)||(null===(n=null===a||void 0===a?void 0:a.constructor)||void 0===n?void 0:n.displayName)||(null===a||void 0===a?void 0:a.displayName)||(null===a||void 0===a?void 0:a.name)||(null===(r=null===a||void 0===a?void 0:a.constructor)||void 0===r?void 0:r.name)||"Unknown"},Ls=Ps((function(t,n){var r,a=t.children,i=t.fixedColumnWidth,o=t.align,s=Is(t,["children","fixedColumnWidth","align"]),u=!("GridRow"===Ds(a)),c=Ms(t,["mdc-layout-grid",(r={},r["mdc-layout-grid--align-"+(o||"")]=void 0!==t.align,r["mdc-layout-grid--fixed-column-width"]=i,r)]);return e.createElement(Rs,Ss({},s,{className:c,ref:n}),u?e.createElement(Bs,null,a):a)})),zs=Ps((function(t,n){var r,a=t.span,i=t.phone,o=t.tablet,s=t.desktop,u=t.order,c=t.align,l=Is(t,["span","phone","tablet","desktop","order","align"]),d=Ms(t,["mdc-layout-grid__cell",(r={},r["mdc-layout-grid__cell--order-"+(u||"")]=void 0!==u,r["mdc-layout-grid__cell--align-"+(c||"")]=void 0!==c,r["mdc-layout-grid__cell--span-"+(a||"")]=void 0!==a,r["mdc-layout-grid__cell--span-"+(i||"")+"-phone"]=void 0!==i,r["mdc-layout-grid__cell--span-"+(o||"")+"-tablet"]=void 0!==o,r["mdc-layout-grid__cell--span-"+(s||"")+"-desktop"]=void 0!==t.desktop,r)]);return e.createElement(Rs,Ss({},l,{ref:n,className:d}))})),Bs=Ps((function(t,n){var r=Ms(t,["mdc-layout-grid__inner"]);return e.createElement(Rs,Ss({},t,{ref:n,className:r}))}));Bs.displayName="GridRow";n(5397);var Ws=function(e,t){return Ws=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Ws(e,t)};var js=function(){return js=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},js.apply(this,arguments)};function Vs(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var Us=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),Hs={CLOSING:"mdc-snackbar--closing",OPEN:"mdc-snackbar--open",OPENING:"mdc-snackbar--opening"},Gs={ACTION_SELECTOR:".mdc-snackbar__action",ARIA_LIVE_LABEL_TEXT_ATTR:"data-mdc-snackbar-label-text",CLOSED_EVENT:"MDCSnackbar:closed",CLOSING_EVENT:"MDCSnackbar:closing",DISMISS_SELECTOR:".mdc-snackbar__dismiss",LABEL_SELECTOR:".mdc-snackbar__label",OPENED_EVENT:"MDCSnackbar:opened",OPENING_EVENT:"MDCSnackbar:opening",REASON_ACTION:"action",REASON_DISMISS:"dismiss",SURFACE_SELECTOR:".mdc-snackbar__surface"},qs={DEFAULT_AUTO_DISMISS_TIMEOUT_MS:5e3,INDETERMINATE:-1,MAX_AUTO_DISMISS_TIMEOUT_MS:1e4,MIN_AUTO_DISMISS_TIMEOUT_MS:4e3,SNACKBAR_ANIMATION_CLOSE_TIME_MS:75,SNACKBAR_ANIMATION_OPEN_TIME_MS:150,ARIA_LIVE_DELAY_MS:1e3},Ks=Hs.OPENING,Xs=Hs.OPEN,Zs=Hs.CLOSING,Ys=Gs.REASON_ACTION,Js=Gs.REASON_DISMISS,Qs=function(e){function t(n){var r=e.call(this,js(js({},t.defaultAdapter),n))||this;return r.isOpen_=!1,r.animationFrame_=0,r.animationTimer_=0,r.autoDismissTimer_=0,r.autoDismissTimeoutMs_=qs.DEFAULT_AUTO_DISMISS_TIMEOUT_MS,r.closeOnEscape_=!0,r}return function(e,t){function n(){this.constructor=e}Ws(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Hs},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Gs},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return qs},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},announce:function(){},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},removeClass:function(){}}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.clearAutoDismissTimer_(),cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,clearTimeout(this.animationTimer_),this.animationTimer_=0,this.adapter.removeClass(Ks),this.adapter.removeClass(Xs),this.adapter.removeClass(Zs)},t.prototype.open=function(){var e=this;this.clearAutoDismissTimer_(),this.isOpen_=!0,this.adapter.notifyOpening(),this.adapter.removeClass(Zs),this.adapter.addClass(Ks),this.adapter.announce(),this.runNextAnimationFrame_((function(){e.adapter.addClass(Xs),e.animationTimer_=setTimeout((function(){var t=e.getTimeoutMs();e.handleAnimationTimerEnd_(),e.adapter.notifyOpened(),t!==qs.INDETERMINATE&&(e.autoDismissTimer_=setTimeout((function(){e.close(Js)}),t))}),qs.SNACKBAR_ANIMATION_OPEN_TIME_MS)}))},t.prototype.close=function(e){var t=this;void 0===e&&(e=""),this.isOpen_&&(cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,this.clearAutoDismissTimer_(),this.isOpen_=!1,this.adapter.notifyClosing(e),this.adapter.addClass(Hs.CLOSING),this.adapter.removeClass(Hs.OPEN),this.adapter.removeClass(Hs.OPENING),clearTimeout(this.animationTimer_),this.animationTimer_=setTimeout((function(){t.handleAnimationTimerEnd_(),t.adapter.notifyClosed(e)}),qs.SNACKBAR_ANIMATION_CLOSE_TIME_MS))},t.prototype.isOpen=function(){return this.isOpen_},t.prototype.getTimeoutMs=function(){return this.autoDismissTimeoutMs_},t.prototype.setTimeoutMs=function(e){var t=qs.MIN_AUTO_DISMISS_TIMEOUT_MS,n=qs.MAX_AUTO_DISMISS_TIMEOUT_MS;if(!(e===qs.INDETERMINATE||e<=n&&e>=t))throw new Error("\n        timeoutMs must be an integer in the range "+t+"\u2013"+n+"\n        (or "+qs.INDETERMINATE+" to disable), but got '"+e+"'");this.autoDismissTimeoutMs_=e},t.prototype.getCloseOnEscape=function(){return this.closeOnEscape_},t.prototype.setCloseOnEscape=function(e){this.closeOnEscape_=e},t.prototype.handleKeyDown=function(e){("Escape"===e.key||27===e.keyCode)&&this.getCloseOnEscape()&&this.close(Js)},t.prototype.handleActionButtonClick=function(e){this.close(Ys)},t.prototype.handleActionIconClick=function(e){this.close(Js)},t.prototype.clearAutoDismissTimer_=function(){clearTimeout(this.autoDismissTimer_),this.autoDismissTimer_=0},t.prototype.handleAnimationTimerEnd_=function(){this.animationTimer_=0,this.adapter.removeClass(Hs.OPENING),this.adapter.removeClass(Hs.CLOSING)},t.prototype.runNextAnimationFrame_=function(e){var t=this;cancelAnimationFrame(this.animationFrame_),this.animationFrame_=requestAnimationFrame((function(){t.animationFrame_=0,clearTimeout(t.animationTimer_),t.animationTimer_=setTimeout(e,0)}))},t}(Us);var $s=function(){return $s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},$s.apply(this,arguments)};var eu=function(e,t){return eu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},eu(e,t)};function tu(e,t){function n(){this.constructor=e}eu(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var nu=function(){return nu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},nu.apply(this,arguments)};function ru(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var au,iu={ripple:!0,tooltip:{align:"top",showArrow:!1,activateOn:["hover","focus"],enterDelay:0,leaveDelay:0},typography:{},icon:{icon:"",basename:"material-icons",prefix:"",strategy:"auto",render:void 0}},ou=e.createContext(iu),su=function(){return e.useContext(ou)},uu={blur:"onBlur",cancel:"onCancel",click:"onClick",close:"onClose",contextmenu:"onContextMenu",copy:"onCopy",cut:"onCut",auxclick:"onAuxClick",doubleclick:"onDoubleClick",dragend:"onDragEnd",dragstart:"onDragStart",drop:"onDrop",focus:"onFocus",input:"onInput",invalid:"onInvalid",keydown:"onKeyDown",keypress:"onKeyPress",keyup:"onKeyUp",mousedown:"onMouseDown",mouseup:"onMouseUp",paste:"onPaste",pause:"onPause",play:"onPlay",pointercancel:"onPointerCancel",pointerdown:"onPointerDown",pointerup:"onPointerUp",ratechange:"onRateChange",reset:"onReset",seeked:"onSeeked",submit:"onSubmit",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchstart:"onTouchStart",volumechange:"onVolumeChange",abort:"onAbort",animationend:"onAnimationEnd",animationiteration:"onAnimationIteration",animationstart:"onAnimationStart",canplay:"onCanPlay",canplaythrough:"onCanPlayThrough",drag:"onDrag",dragenter:"onDragEnter",dragexit:"onDragExit",dragleave:"onDragLeave",dragover:"onDragOver",durationchange:"onDurationChange",emptied:"onEmptied",encrypted:"onEncrypted",ended:"onEnded",error:"onError",gotpointercapture:"onGotPointerCapture",load:"onLoad",loadeddata:"onLoadedData",loadedmetadata:"onLoadedMetadata",loadstart:"onLoadStart",lostpointercapture:"onLostPointerCapture",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseover:"onMouseOver",playing:"onPlaying",pointermove:"onPointerMove",pointerout:"onPointerOut",pointerover:"onPointerOver",progress:"onProgress",scroll:"onScroll",seeking:"onSeeking",stalled:"onStalled",suspend:"onSuspend",timeupdate:"onTimeUpdate",toggle:"onToggle",touchmove:"onTouchMove",transitionend:"onTransitionEnd",waiting:"onWaiting",wheel:"onWheel",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",pointerenter:"onPointerEnter",pointerleave:"onPointerLeave",change:"onChange",select:"onSelect",beforeinput:"onBeforeInput",compositionend:"onCompositionEnd",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate"},cu=function(e){return uu[e]||e},lu=function(){function e(e){this._classes=new Set,this._events={},this._style={},this._props={},this._ref=null,this._onChange=null,this._onChange=e,this.onChange=this.onChange.bind(this),this.addClass=this.addClass.bind(this),this.removeClass=this.removeClass.bind(this),this.hasClass=this.hasClass.bind(this),this.setProp=this.setProp.bind(this),this.getProp=this.getProp.bind(this),this.removeProp=this.removeProp.bind(this),this.setStyle=this.setStyle.bind(this),this.addEventListener=this.addEventListener.bind(this),this.removeEventListener=this.removeEventListener.bind(this),this.setRef=this.setRef.bind(this)}return e.prototype.onChange=function(){this._onChange&&this._onChange()},e.prototype.destroy=function(){var e=this;this._onChange=null,this._events={},this._style={},this._props={},this._classes=new Set,setTimeout((function(){e._ref=null}))},e.prototype.addClass=function(e){this._classes.has(e)||(this._classes.add(e),this.onChange())},e.prototype.removeClass=function(e){this._classes.has(e)&&(this._classes.delete(e),this.onChange())},e.prototype.hasClass=function(e){return this._classes.has(e)},e.prototype.setProp=function(e,t,n){void 0===n&&(n=!1),this._props[e]!==t&&(this._props[e]=t,!n&&this.onChange())},e.prototype.getProp=function(e){return this._props[e]},e.prototype.removeProp=function(e){void 0!==this._props[e]&&(delete this._props[e],this.onChange())},e.prototype.props=function(e){var t=this,n=e.className,r=void 0===n?"":n,a=e.style,i=void 0===a?{}:a,o=Object.entries(e).reduce((function(e,n){var r=Cs(n,2),a=r[0],i=r[1],o=t._events[a];if("function"===typeof i&&"function"===typeof o){e[a]=function(e){return o(e),i(e)}}return e}),Ss({},this._events)),s=St()(r,Ns([],Cs(this._classes))),u=Ss(Ss({},this._style),i);return Ss(Ss(Ss(Ss({},e),this._props),o),{style:u,className:s})},e.prototype.setStyle=function(e,t){e=e.startsWith("--")?e:e.replace(/(-[a-z])/g,(function(e){return e.toUpperCase().replace("-","")})),this._style[e]!==t&&(this._style[e]=t,this.onChange())},e.prototype.addEventListener=function(e,t){var n=cu(e);this._events[n]!==t&&(this._events[n]=t,this.onChange())},e.prototype.removeEventListener=function(e,t){var n=cu(e);this._events[n]&&(delete this._events[n],this.onChange())},e.prototype.setRef=function(e){e&&(this._ref=e)},Object.defineProperty(e.prototype,"ref",{get:function(){return this._ref},enumerable:!1,configurable:!0}),e}(),du=function(e){return function(t,n,r){var a;void 0===r&&(r=!1),a=new CustomEvent(t,{detail:n,bubbles:r}),Object.defineProperty(a,"target",{value:n,writable:!1}),Object.defineProperty(a,"currentTarget",{value:n,writable:!1});var i=t;return e[i]&&e[i](a),a}},fu=function(t){var n=t.foundation,r=t.props,a=t.elements,i=t.api,o=Cs((0,e.useState)(0),2)[1],s=(0,e.useRef)(r);s.current=r;var u=(0,e.useMemo)((function(){return Object.keys(a).reduce((function(e,t){return e[t]=new lu((function(){o((function(e){return e+1}))})),e}),{})}),[]),c=(0,e.useMemo)((function(){var e=n(Ss(Ss({},u),{getProps:function(){return s.current},emit:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return du(s.current).apply(void 0,Ns([],Cs(e)))}}));return i&&Fs(s.current.apiRef,i(Ss({foundation:e},u))),e}),[]);return(0,e.useEffect)((function(){var e=c;return e.init(),i&&Fs(s.current.apiRef,i(Ss({foundation:e},u))),Fs(s.current.foundationRef,e),function(){e.destroy(),Fs(s.current.apiRef,null),Fs(s.current.foundationRef,null),Object.values(u).map((function(e){return e.destroy()})),s.current={}}}),[c,u]),Ss({foundation:c},u)},pu={bottom:0,height:0,left:0,right:0,top:0,width:0},hu=function(e,t){if(e instanceof Element){if(e&&e.closest)return e.closest(t);for(var n=e;n;){if(mu(n,t))return n;n=n.parentElement}}return null},mu=function(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)},vu=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),gu={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},yu={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},bu={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};var xu,Au=["touchstart","pointerdown","mousedown","keydown"],ku=["touchend","pointerup","mouseup","contextmenu"],wu=[],Su=function(e){function t(n){var r=e.call(this,nu(nu({},t.defaultAdapter),n))||this;return r.activationAnimationHasEnded_=!1,r.activationTimer_=0,r.fgDeactivationRemovalTimer_=0,r.fgScale_="0",r.frame_={width:0,height:0},r.initialSize_=0,r.layoutFrame_=0,r.maxRadius_=0,r.unboundedCoords_={left:0,top:0},r.activationState_=r.defaultActivationState_(),r.activationTimerCallback_=function(){r.activationAnimationHasEnded_=!0,r.runDeactivationUXLogicIfReady_()},r.activateHandler_=function(e){return r.activate_(e)},r.deactivateHandler_=function(){return r.deactivate_()},r.focusHandler_=function(){return r.handleFocus()},r.blurHandler_=function(){return r.handleBlur()},r.resizeHandler_=function(){return r.layout()},r}return tu(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return gu},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return yu},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return bu},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this,n=this.supportsPressRipple_();if(this.registerRootHandlers_(n),n){var r=t.cssClasses,a=r.ROOT,i=r.UNBOUNDED;requestAnimationFrame((function(){e.adapter.addClass(a),e.adapter.isUnbounded()&&(e.adapter.addClass(i),e.layoutInternal_())}))}},t.prototype.destroy=function(){var e=this;if(this.supportsPressRipple_()){this.activationTimer_&&(clearTimeout(this.activationTimer_),this.activationTimer_=0,this.adapter.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer_&&(clearTimeout(this.fgDeactivationRemovalTimer_),this.fgDeactivationRemovalTimer_=0,this.adapter.removeClass(t.cssClasses.FG_DEACTIVATION));var n=t.cssClasses,r=n.ROOT,a=n.UNBOUNDED;requestAnimationFrame((function(){e.adapter.removeClass(r),e.adapter.removeClass(a),e.removeCssVars_()}))}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_()},t.prototype.activate=function(e){this.activate_(e)},t.prototype.deactivate=function(){this.deactivate_()},t.prototype.layout=function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){e.layoutInternal_(),e.layoutFrame_=0}))},t.prototype.setUnbounded=function(e){var n=t.cssClasses.UNBOUNDED;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.handleFocus=function(){var e=this;requestAnimationFrame((function(){return e.adapter.addClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.handleBlur=function(){var e=this;requestAnimationFrame((function(){return e.adapter.removeClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.supportsPressRipple_=function(){return this.adapter.browserSupportsCssVars()},t.prototype.defaultActivationState_=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers_=function(e){var t=this;e&&(Au.forEach((function(e){t.adapter.registerInteractionHandler(e,t.activateHandler_)})),this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler_)),this.adapter.registerInteractionHandler("focus",this.focusHandler_),this.adapter.registerInteractionHandler("blur",this.blurHandler_)},t.prototype.registerDeactivationHandlers_=function(e){var t=this;"keydown"===e.type?this.adapter.registerInteractionHandler("keyup",this.deactivateHandler_):ku.forEach((function(e){t.adapter.registerDocumentInteractionHandler(e,t.deactivateHandler_)}))},t.prototype.deregisterRootHandlers_=function(){var e=this;Au.forEach((function(t){e.adapter.deregisterInteractionHandler(t,e.activateHandler_)})),this.adapter.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler_)},t.prototype.deregisterDeactivationHandlers_=function(){var e=this;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler_),ku.forEach((function(t){e.adapter.deregisterDocumentInteractionHandler(t,e.deactivateHandler_)}))},t.prototype.removeCssVars_=function(){var e=this,n=t.strings;Object.keys(n).forEach((function(t){0===t.indexOf("VAR_")&&e.adapter.updateCssVariable(n[t],null)}))},t.prototype.activate_=function(e){var t=this;if(!this.adapter.isSurfaceDisabled()){var n=this.activationState_;if(!n.isActivated){var r=this.previousActivationEvent_;if(!(r&&void 0!==e&&r.type!==e.type))n.isActivated=!0,n.isProgrammatic=void 0===e,n.activationEvent=e,n.wasActivatedByPointer=!n.isProgrammatic&&(void 0!==e&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type)),void 0!==e&&wu.length>0&&wu.some((function(e){return t.adapter.containsEventTarget(e)}))?this.resetActivationState_():(void 0!==e&&(wu.push(e.target),this.registerDeactivationHandlers_(e)),n.wasElementMadeActive=this.checkElementMadeActive_(e),n.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame((function(){wu=[],n.wasElementMadeActive||void 0===e||" "!==e.key&&32!==e.keyCode||(n.wasElementMadeActive=t.checkElementMadeActive_(e),n.wasElementMadeActive&&t.animateActivation_()),n.wasElementMadeActive||(t.activationState_=t.defaultActivationState_())})))}}},t.prototype.checkElementMadeActive_=function(e){return void 0===e||"keydown"!==e.type||this.adapter.isSurfaceActive()},t.prototype.animateActivation_=function(){var e=this,n=t.strings,r=n.VAR_FG_TRANSLATE_START,a=n.VAR_FG_TRANSLATE_END,i=t.cssClasses,o=i.FG_DEACTIVATION,s=i.FG_ACTIVATION,u=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var c="",l="";if(!this.adapter.isUnbounded()){var d=this.getFgTranslationCoordinates_(),f=d.startPoint,p=d.endPoint;c=f.x+"px, "+f.y+"px",l=p.x+"px, "+p.y+"px"}this.adapter.updateCssVariable(r,c),this.adapter.updateCssVariable(a,l),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter.removeClass(o),this.adapter.computeBoundingRect(),this.adapter.addClass(s),this.activationTimer_=setTimeout((function(){return e.activationTimerCallback_()}),u)},t.prototype.getFgTranslationCoordinates_=function(){var e,t=this.activationState_,n=t.activationEvent;return e=t.wasActivatedByPointer?function(e,t,n){if(!e)return{x:0,y:0};var r,a,i=t.x,o=t.y,s=i+n.left,u=o+n.top;if("touchstart"===e.type){var c=e;r=c.changedTouches[0].pageX-s,a=c.changedTouches[0].pageY-u}else{var l=e;r=l.pageX-s,a=l.pageY-u}return{x:r,y:a}}(n,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2},{startPoint:e={x:e.x-this.initialSize_/2,y:e.y-this.initialSize_/2},endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}},t.prototype.runDeactivationUXLogicIfReady_=function(){var e=this,n=t.cssClasses.FG_DEACTIVATION,r=this.activationState_,a=r.hasDeactivationUXRun,i=r.isActivated;(a||!i)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter.addClass(n),this.fgDeactivationRemovalTimer_=setTimeout((function(){e.adapter.removeClass(n)}),bu.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses_=function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter.removeClass(e),this.activationAnimationHasEnded_=!1,this.adapter.computeBoundingRect()},t.prototype.resetActivationState_=function(){var e=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout((function(){return e.previousActivationEvent_=void 0}),t.numbers.TAP_DELAY_MS)},t.prototype.deactivate_=function(){var e=this,t=this.activationState_;if(t.isActivated){var n=nu({},t);t.isProgrammatic?(requestAnimationFrame((function(){return e.animateDeactivation_(n)})),this.resetActivationState_()):(this.deregisterDeactivationHandlers_(),requestAnimationFrame((function(){e.activationState_.hasDeactivationUXRun=!0,e.animateDeactivation_(n),e.resetActivationState_()})))}},t.prototype.animateDeactivation_=function(e){var t=e.wasActivatedByPointer,n=e.wasElementMadeActive;(t||n)&&this.runDeactivationUXLogicIfReady_()},t.prototype.layoutInternal_=function(){var e=this;this.frame_=this.adapter.computeBoundingRect();var n=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter.isUnbounded()?n:Math.sqrt(Math.pow(e.frame_.width,2)+Math.pow(e.frame_.height,2))+t.numbers.PADDING;var r=Math.floor(n*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&r%2!==0?this.initialSize_=r-1:this.initialSize_=r,this.fgScale_=""+this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()},t.prototype.updateLayoutCssVars_=function(){var e=t.strings,n=e.VAR_FG_SIZE,r=e.VAR_LEFT,a=e.VAR_TOP,i=e.VAR_FG_SCALE;this.adapter.updateCssVariable(n,this.initialSize_+"px"),this.adapter.updateCssVariable(i,this.fgScale_),this.adapter.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter.updateCssVariable(r,this.unboundedCoords_.left+"px"),this.adapter.updateCssVariable(a,this.unboundedCoords_.top+"px"))},t}(vu),Iu=function(t){var n=(0,e.useRef)(!1),r=fu({props:t,elements:{rootEl:!0,surfaceEl:!0},foundation:function(e){var t=e.rootEl,n=e.surfaceEl,r=e.getProps;return new Su({browserSupportsCssVars:function(){return function(e,t){void 0===t&&(t=!1);var n,r=e.CSS;if("boolean"===typeof au&&!t)return au;if(!r||"function"!==typeof r.supports)return!1;var a=r.supports("--css-vars","yes"),i=r.supports("(--css-vars: yes)")&&r.supports("color","#00000000");return n=a||i,t||(au=n),n}(window)},isUnbounded:function(){return!!r().unbounded},isSurfaceActive:function(){return!!t.ref&&mu(t.ref,":active")},isSurfaceDisabled:function(){return!!r().disabled},addClass:function(e){n.addClass(e)},removeClass:function(e){n.removeClass(e)},containsEventTarget:function(e){return!!t.ref&&t.ref.contains(e)},registerInteractionHandler:function(e,t){},deregisterInteractionHandler:function(e,t){},registerDocumentInteractionHandler:function(e,t){return document.documentElement.addEventListener(e,t,{passive:!0})},deregisterDocumentInteractionHandler:function(e,t){return document.documentElement.removeEventListener(e,t)},registerResizeHandler:function(e){return window.addEventListener("resize",e)},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},updateCssVariable:function(e,t){return n.setStyle(e,t)},computeBoundingRect:function(){return t.ref?t.ref.getBoundingClientRect():pu},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}}})}}),a=r.foundation,i=ru(r,["foundation"]),o=i.rootEl,s=(0,e.useCallback)((function(e){e.persist(),a.activate(e)}),[a]),u=(0,e.useCallback)((function(e){e.persist(),a.deactivate()}),[a]),c=t.onFocus,l=(0,e.useCallback)((function(e){null===c||void 0===c||c(e),a.handleFocus()}),[a,c]),d=t.onBlur,f=(0,e.useCallback)((function(e){null===d||void 0===d||d(e),a.handleBlur()}),[a,d]),p=t.onMouseDown,h=(0,e.useCallback)((function(e){null===p||void 0===p||p(e),n.current||s(e),n.current=!1}),[p,s]),m=t.onMouseUp,v=(0,e.useCallback)((function(e){null===m||void 0===m||m(e),u(e)}),[m,u]),g=t.onTouchStart,y=(0,e.useCallback)((function(e){n.current=!0,null===g||void 0===g||g(e),s(e)}),[g,s]),b=t.onTouchEnd,x=(0,e.useCallback)((function(e){null===b||void 0===b||b(e),u(e)}),[b,u]),A=t.onKeyDown,k=(0,e.useCallback)((function(e){null===A||void 0===A||A(e),s(e)}),[A,s]),w=t.onKeyUp,S=(0,e.useCallback)((function(e){null===w||void 0===w||w(e),u(e)}),[w,u]);return o.setProp("onFocus",l,!0),o.setProp("onBlur",f,!0),o.setProp("onMouseDown",h,!0),o.setProp("onMouseUp",v,!0),o.setProp("onTouchStart",y,!0),o.setProp("onTouchEnd",x,!0),o.setProp("onKeyDown",k,!0),o.setProp("onKeyUp",S,!0),(0,e.useEffect)((function(){o.setRef(t.domNode)}),[o,t.domNode]),(0,e.useEffect)((function(){a.setUnbounded(!!t.unbounded)}),[t.unbounded,a]),(0,e.useEffect)((function(){t.disabled&&a.handleBlur()}),[t.disabled,a]),nu({},i)},Eu=e.createContext({}),Cu=(xu=function(t){var n=t.children,r=t.className,a=t.primary,i=t.accent,o=t.unbounded,s=t.surface,u=(t.domNode,t.foundationRef,ru(t,["children","className","primary","accent","unbounded","surface","domNode","foundationRef"])),c=Iu(t),l=c.rootEl,d=c.surfaceEl,f=e.Children.only(n);if(!e.isValidElement(f))return null;var p=o?{"data-mdc-ripple-is-unbounded":!0}:{},h=s&&o?{}:d.props({style:f.props.style}),m=St()(r!==f.props.className&&r,h.className,f.props.className,{"mdc-ripple-surface":"boolean"===typeof s?s:void 0===s,"mdc-ripple-surface--primary":a,"mdc-ripple-surface--accent":i});u.disabled&&(m=m.replace("mdc-ripple-upgraded--background-focused",""));var v=e.cloneElement(f,nu(nu(nu({},f.props),p),l.props(nu(nu(nu(nu({},u),{style:f.props.style}),h),{className:m}))));return e.createElement(Eu.Provider,{value:d.props({style:f.props.style})},v)},function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={domNode:null},e}return tu(n,t),n.prototype.componentDidMount=function(){this.setState({domNode:dt.findDOMNode(this)})},n.prototype.componentDidUpdate=function(){var e=dt.findDOMNode(this);e!==this.state.domNode&&this.setState({rootRippleElement:e})},n.prototype.render=function(){return e.createElement(xu,nu({},this.props,{domNode:this.state.domNode}))},n}(e.Component)),Nu=function(t){var n=t.className,r=ru(t,["className"]);return e.createElement(Eu.Consumer,null,(function(t){return e.createElement("div",nu({},r,t,{className:n+" "+(t.className||"")}))}))},Tu=function(t){var n=void 0===t?{}:t,r=n.unbounded,a=n.accent,i=n.surface;return function(t){var n=e.forwardRef((function(n,o){var s=n.ripple,u=ru(n,["ripple"]),c=su(),l="object"!==typeof(s=null!==s&&void 0!==s?s:c.ripple)?{}:s;return s?e.createElement(Cu,nu({},u,{accent:l.accent||a,unbounded:l.unbounded||r,surface:l.surface||i}),e.createElement(t,nu({},u,{ref:o}))):e.createElement(t,nu({},u,{ref:o}))}));return n.displayName="withRipple("+(t.displayName||t.constructor.name||"Unknown")+")",n}},_u=function(t,n,r){return"auto"===(n=n||r||"auto")?function(t){return"string"===typeof t&&t.includes("/")?"url":e.isValidElement(t)?"component":"ligature"}(t):n},Ru={ligature:function(t){var n=t.content,r=Is(t,["content"]);return e.createElement(Mu,Ss({},r),n)},className:function(t){t.content;var n=Is(t,["content"]);return e.createElement(Mu,Ss({},n))},url:function(t){var n=t.content,r=Is(t,["content"]);return e.createElement(Mu,Ss({},r,{style:Ss(Ss({},r.style),{backgroundImage:"url("+n+")"})}))},component:function(t){var n=t.content,r=Is(t,["content"]);if("svg"===n.type){var a=n.props,i=a.children,o=Is(a,["children"]);return e.createElement(Mu,Ss({},o,r,{tag:"svg"}),i)}return e.createElement(Mu,Ss({},r),n)},auto:void 0},Mu=e.forwardRef((function(t,n){return e.createElement(Rs,Ss({tag:"i"},t,{ref:n}))})),Ou=Ps((function(t,n){var r,a=t.icon,i=Is(t,["icon"]),o=su(),s=Ss({},function(t){return e.isValidElement(t)||t&&"object"!==typeof t?{icon:t}:t}(a)),u=s.icon,c=s.strategy,l=s.prefix,d=s.basename,f=s.render,p=s.size,h=Is(s,["icon","strategy","prefix","basename","render","size"]),m=o.icon||{},v=m.basename,g=void 0===v?null:v,y=m.prefix,b=void 0===y?null:y,x=m.strategy,A=void 0===x?null:x,k=m.render,w=void 0===k?null:k,S=u,I=_u(S,c||null,A||null),E=void 0===d?g:d,C="className"===I&&"string"===typeof u?""+String(l||b)+u:null,N=!!I&&Ru[I]||null;if("custom"===I&&(N=f||w),!N)return console.error("Icon: rendering not implemented for "+String(I)+"."),null;var T=N(Ss(Ss(Ss({},i),h),{ref:n,content:S,className:St()("rmwc-icon","rmwc-icon--"+I,E,i.className,h.className,C,(r={},r["rmwc-icon--size-"+(p||"")]=!!p,r))}));if(!e.isValidElement(T))return null;var _=Ds(T.props.children);return _.includes("Avatar")||_.includes("Icon")?e.cloneElement(T.props.children,Ss(Ss(Ss({},T.props.children.props),T.props),{ref:n,children:T.props.children.props.children,className:St()(T.props.className,T.props.children.props.className)})):T}));Ou.displayName="Icon";var Fu=Tu({surface:!1})(Ps((function(t,n){var r=t.dense,a=t.raised,i=t.unelevated,o=t.outlined,s=t.danger,u=t.icon,c=t.label,l=t.trailingIcon,d=t.children,f=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(t,["dense","raised","unelevated","outlined","danger","icon","label","trailingIcon","children"]),p=Ms(t,["mdc-button",{"mdc-button--dense":r,"mdc-button--raised":a,"mdc-button--unelevated":i,"mdc-button--outlined":o}]);if(s){var h=f.style||{};f.style=$s($s({},{"--mdc-theme-primary":"var(--mdc-theme-error)","--mdc-theme-on-primary":"var(--mdc-theme-on-error)"}),h)}return e.createElement(Rs,$s({tag:"button"},f,{ref:n,className:p}),e.createElement(Pu,null),!!u&&e.createElement(Du,{icon:u}),e.createElement("span",{className:"mdc-button__label"},c,d),!!l&&e.createElement(Du,{icon:l}))}))),Pu=e.memo((function(){return e.createElement("div",{className:"mdc-button__ripple"})})),Du=function(t){var n=Ps(t);return e.memo(n)}((function(t,n){var r=Ms(t,["mdc-button__icon"]);return e.createElement(Ou,$s({},t,{className:r,ref:n}))})),Lu=qs.ARIA_LIVE_DELAY_MS,zu=Gs.ARIA_LIVE_LABEL_TEXT_ATTR;var Bu=function(){window.dispatchEvent(new Event("resize"))};function Wu(t){var n=fu({props:t,elements:{rootEl:!0,surfaceEl:!0,labelEl:!0},foundation:function(e){var t=e.rootEl,n=e.labelEl,r=e.emit;return new Qs({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},announce:function(){return n.ref&&function(e,t){void 0===t&&(t=e);var n=e.getAttribute("aria-live"),r=t.textContent.trim();r&&n&&(e.setAttribute("aria-live","off"),t.textContent="",t.innerHTML='<span style="display: inline-block; width: 0; height: 1px;">&nbsp;</span>',t.setAttribute(zu,r),setTimeout((function(){e.setAttribute("aria-live",n),t.removeAttribute(zu),t.textContent=r}),Lu))}(n.ref)},notifyOpening:function(){return r("onOpen",{})},notifyOpened:function(){Bu(),r("onOpened",{})},notifyClosing:function(e){r("onClose",e?{reason:e}:{})},notifyClosed:function(e){return r("onClosed",e?{reason:e}:{})}})}}),r=n.foundation,a=Vs(n,["foundation"]),i=a.rootEl,o=a.surfaceEl;return i.setProp("onKeyDown",(function(e){t.onKeyDown&&t.onKeyDown(e),r.handleKeyDown(e)}),!0),o.setProp("onClick",(function(e){if(e.target instanceof Element){var n=e.target,a=hu(n,".mdc-button");a&&(n=a),t.dismissesOnAction&&n.classList.contains("mdc-snackbar__action")?r.handleActionButtonClick(e,n.dataset.mdcSnackbarAction):n.classList.contains("mdc-snackbar__dismiss")&&r.handleActionIconClick(e)}}),!0),(0,e.useEffect)((function(){t.open?r.open():r.close()}),[t.open,r]),(0,e.useEffect)((function(){t.timeout&&(-1===t.timeout?r.setTimeoutMs(t.timeout):r.autoDismissTimeoutMs_=t.timeout)}),[t.timeout,r]),js({foundation:r},a)}Qs.prototype.handleActionButtonClick=function(e,t){this.close(t)};var ju=function(e,t){return ju=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},ju(e,t)};var Vu=function(){return Vu=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Vu.apply(this,arguments)};function Uu(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var Hu=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),Gu={ICON_BUTTON_ON:"mdc-icon-button--on",ROOT:"mdc-icon-button"},qu={ARIA_LABEL:"aria-label",ARIA_PRESSED:"aria-pressed",DATA_ARIA_LABEL_OFF:"data-aria-label-off",DATA_ARIA_LABEL_ON:"data-aria-label-on",CHANGE_EVENT:"MDCIconButtonToggle:change"},Ku=function(e){function t(n){var r=e.call(this,Vu(Vu({},t.defaultAdapter),n))||this;return r.hasToggledAriaLabel=!1,r}return function(e,t){function n(){this.constructor=e}ju(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Gu},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return qu},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},hasClass:function(){return!1},notifyChange:function(){},removeClass:function(){},getAttr:function(){return null},setAttr:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this.adapter.getAttr(qu.DATA_ARIA_LABEL_ON),t=this.adapter.getAttr(qu.DATA_ARIA_LABEL_OFF);if(e&&t){if(null!==this.adapter.getAttr(qu.ARIA_PRESSED))throw new Error("MDCIconButtonToggleFoundation: Button should not set `aria-pressed` if it has a toggled aria label.");this.hasToggledAriaLabel=!0}else this.adapter.setAttr(qu.ARIA_PRESSED,String(this.isOn()))},t.prototype.handleClick=function(){this.toggle(),this.adapter.notifyChange({isOn:this.isOn()})},t.prototype.isOn=function(){return this.adapter.hasClass(Gu.ICON_BUTTON_ON)},t.prototype.toggle=function(e){if(void 0===e&&(e=!this.isOn()),e?this.adapter.addClass(Gu.ICON_BUTTON_ON):this.adapter.removeClass(Gu.ICON_BUTTON_ON),this.hasToggledAriaLabel){var t=e?this.adapter.getAttr(qu.DATA_ARIA_LABEL_ON):this.adapter.getAttr(qu.DATA_ARIA_LABEL_OFF);this.adapter.setAttr(qu.ARIA_LABEL,t||"")}else this.adapter.setAttr(qu.ARIA_PRESSED,""+e)},t}(Hu),Xu=Ps((function(t,n){var r=Uu(t,[]);return r.onIcon?e.createElement(Zu,Vu({},r,{ref:n})):e.createElement(Yu,Vu({tag:"button"},r,{ref:n}))})),Zu=Ps((function(t,n){var r=t.icon,a=t.onIcon,i=(t.foundationRef,Uu(t,["icon","onIcon","foundationRef"])),o=function(t){var n=fu({props:t,elements:{rootEl:!0},foundation:function(e){var t=e.rootEl,n=e.emit;return new Ku({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},hasClass:function(e){return t.hasClass(e)},setAttr:function(e,n){return t.setProp(e,n)},notifyChange:function(e){return n("onChange",e)}})}}),r=n.foundation,a=Uu(n,["foundation"]),i=a.rootEl,o=void 0!==t.checked?t.checked:r.isOn();return(0,e.useEffect)((function(){o!==r.isOn()&&r.toggle(o)}),[r,o]),i.setProp("onClick",(function(e){var n;null===(n=t.onClick)||void 0===n||n.call(t,e),r.handleClick()}),!0),Vu({isOn:o,foundation:r},a)}(t),s=o.isOn,u=o.rootEl;return e.createElement(Ju,Vu({"aria-pressed":s},u.props(i),{tag:"button",ref:n}),e.createElement(Qu,{icon:r}),e.createElement(Qu,{icon:a,on:!0}))})),Yu=Tu({surface:!1,unbounded:!0})(Ps((function(t,n){var r=t.checked,a=t.label,i=(t.foundationRef,Uu(t,["checked","label","foundationRef"])),o=Ms(t,["mdc-icon-button",{"mdc-icon-button--on":r}]);return e.createElement(Ou,Vu({role:"button",tabIndex:0,"aria-label":a},i,{className:o,ref:n}))}))),Ju=Tu({surface:!1,unbounded:!0})(Ps((function(t,n){var r=t.checked,a=Uu(t,["checked"]),i=Ms(t,["mdc-icon-button",{"mdc-icon-button--on":r}]);return e.createElement(Rs,Vu({tag:"button",role:"button",tabIndex:0},a,{className:i,ref:n}))}))),Qu=e.memo((function(t){t.on;var n=Uu(t,["on"]),r=Ms(t,["mdc-icon-button__icon",{"mdc-icon-button__icon--on":t.on}]);return e.createElement(Ou,Vu({},n,{className:r}))})),$u=Ps((function(t,n){var r=Wu(t),a=r.rootEl,i=r.surfaceEl,o=r.labelEl,s=(t.open,t.message),u=(t.timeout,t.dismissIcon),c=(t.onOpen,t.onClose,t.children),l=t.action,d=t.icon,f=t.leading,p=t.stacked,h=(t.dismissesOnAction,t.foundationRef,Vs(t,["open","message","timeout","dismissIcon","onOpen","onClose","children","action","icon","leading","stacked","dismissesOnAction","foundationRef"])),m=Ms(t,["mdc-snackbar",{"mdc-snackbar--leading":f,"mdc-snackbar--stacked":p}]),v=Array.isArray(l)?l:l?[l]:[];return e.createElement(Rs,js({},h,{ref:n,element:a,"aria-live":"assertive","aria-atomic":!0,"aria-hidden":!0,className:m}),e.createElement("div",js({},i.props({}),{className:"mdc-snackbar__surface"}),!!d&&e.createElement(Ou,{style:{color:"rgba(255, 255, 255, 0.87)",fill:"currentColor",marginLeft:"1rem"},icon:d}),e.createElement(ec,null,s,e.createElement("div",{style:{display:"none"},ref:o.setRef})),e.createElement(tc,null,v.map((function(t,n){return e.createElement(e.Fragment,{key:n},t)})),u&&e.createElement(rc,{icon:!0===u?"close":u})),c))}));function ec(t){return e.createElement("div",js({role:"status","aria-live":"polite",className:"mdc-snackbar__label"},t))}function tc(t){return e.createElement("div",js({className:"mdc-snackbar__actions"},t))}var nc=Ps((function(t,n){var r=Ms(t,["mdc-snackbar__action"]),a=t.action,i=void 0===a?Qs.strings.REASON_ACTION:a,o=Vs(t,["action"]);return e.createElement(Fu,js({},o,{className:r,ref:n,"data-mdc-snackbar-action":i}))}));function rc(t){return e.createElement(Xu,js({},t,{className:"mdc-snackbar__dismiss"}))}n(7292);var ac=n(2790),ic=n.n(ac);function oc(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tt(e)););return e}function sc(){return sc="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=oc(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},sc.apply(this,arguments)}function uc(e,t,n){return uc=nt()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&$e(a,n.prototype),a},uc.apply(null,arguments)}function cc(e){var t="function"===typeof Map?new Map:void 0;return cc=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return uc(e,arguments,tt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),$e(n,e)},cc(e)}function lc(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}function dc(e){var t,n,r,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new fc(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function fc(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return fc=function(e){this.s=e,this.n=e.next},fc.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new fc(e)}var pc="/index.js",hc=["units"],mc=Object.defineProperty,vc=function(e,t){for(var n in t)mc(e,n,{get:t[n],enumerable:!0})},gc=function(e,t,n){return function(e,t,n){t in e?mc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n}(e,"symbol"!==typeof t?t+"":t,n),n},yc=function(e,t,n){if(!t.has(e))throw TypeError("Cannot "+n)},bc=function(e,t,n){return yc(e,t,"read from private field"),n?n.call(e):t.get(e)},xc=function(e,t,n){if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Ac=function(e,t,n,r){return yc(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n};function kc(){for(var e,t=new Date,n="".concat(t.getHours().toString().padStart(2,"0"),":").concat(t.getMinutes().toString().padStart(2,"0"),":").concat(t.getSeconds().toString().padStart(2,"0"),".").concat(t.getMilliseconds().toString().padStart(3,"0")),r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];a&&(e=console).log.apply(e,[n,"Human:"].concat(a))}function wc(e,t){var n=e.endsWith("/")?"":"/",r=t.startsWith(".")||t.startsWith("/")||t.startsWith("http:")||t.startsWith("https:")||t.startsWith("file:")?"".concat(t):"".concat(e).concat(n).concat(t);if(!r.toLocaleLowerCase().includes(".json"))throw new Error("modelpath error: expecting json file: ".concat(r));return r}var Sc=function(){return"undefined"!==typeof performance?performance.now():parseInt((Number(process.hrtime.bigint())/1e3/1e3).toString())};function Ic(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"config",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=0,i=Object.keys(t);a<i.length;a++){var o=i[a];if("object"===typeof t[o])Ic(e[o],t[o],o,r);else{var s=e&&"undefined"!==typeof e[o];s||r.push({reason:"unknown property",where:"".concat(n,".").concat(o," = ").concat(t[o])});var u=e&&typeof e[o]===typeof t[o];s&&!u&&r.push({reason:"property type mismatch",where:"".concat(n,".").concat(o," = ").concat(t[o]),expected:typeof e[o]})}}return t.debug&&"config"===n&&r.length>0&&kc("invalid configuration",r),r}function Ec(){for(var e=function(e){return e&&"object"===typeof e},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce((function(t,n){return Object.keys(n||{}).forEach((function(r){var a=t[r],i=n[r];Array.isArray(a)&&Array.isArray(i)?t[r]=a.concat.apply(a,Tn(i)):e(a)&&e(i)?t[r]=Ec(a,i):t[r]=i})),t}),{})}var Cc={backend:"",modelBasePath:"",cacheModels:!0,wasmPath:"",wasmPlatformFetch:!1,debug:!0,async:!0,warmup:"full",cacheSensitivity:.7,skipAllowed:!1,deallocate:!1,filter:{enabled:!0,equalization:!1,width:0,height:0,flip:!1,return:!0,brightness:0,contrast:0,sharpness:0,blur:0,saturation:0,hue:0,negative:!1,sepia:!1,vintage:!1,kodachrome:!1,technicolor:!1,polaroid:!1,pixelate:0},gesture:{enabled:!0},face:{enabled:!0,detector:{modelPath:"blazeface.json",rotation:!0,maxDetected:1,skipFrames:99,skipTime:2500,minConfidence:.2,iouThreshold:.1,mask:!1,return:!1},mesh:{enabled:!0,modelPath:"facemesh.json",keepInvalid:!1},attention:{enabled:!1,modelPath:"facemesh-attention.json"},iris:{enabled:!0,modelPath:"iris.json"},emotion:{enabled:!0,minConfidence:.1,skipFrames:99,skipTime:1500,modelPath:"emotion.json"},description:{enabled:!0,modelPath:"faceres.json",skipFrames:99,skipTime:3e3,minConfidence:.1},antispoof:{enabled:!1,skipFrames:99,skipTime:4e3,modelPath:"antispoof.json"},liveness:{enabled:!1,skipFrames:99,skipTime:4e3,modelPath:"liveness.json"}},body:{enabled:!0,modelPath:"movenet-lightning.json",maxDetected:-1,minConfidence:.3,skipFrames:1,skipTime:200},hand:{enabled:!0,rotation:!0,skipFrames:99,skipTime:1e3,minConfidence:.5,iouThreshold:.2,maxDetected:-1,landmarks:!0,detector:{modelPath:"handtrack.json"},skeleton:{modelPath:"handlandmark-full.json"}},object:{enabled:!1,modelPath:"mb3-centernet.json",minConfidence:.2,iouThreshold:.4,maxDetected:10,skipFrames:99,skipTime:2e3},segmentation:{enabled:!1,modelPath:"selfie.json",blur:8}},Nc={};vc(Nc,{Abs:function(){return ld},Acos:function(){return dd},Acosh:function(){return fd},AdadeltaOptimizer:function(){return YS},AdagradOptimizer:function(){return JS},AdamOptimizer:function(){return QS},AdamaxOptimizer:function(){return $S},Add:function(){return pd},AddN:function(){return hd},All:function(){return md},Any:function(){return vd},ArgMax:function(){return gd},ArgMin:function(){return yd},Asin:function(){return bd},Asinh:function(){return xd},Atan:function(){return Ad},Atan2:function(){return wd},Atanh:function(){return kd},AvgPool:function(){return Sd},AvgPool3D:function(){return Ed},AvgPool3DGrad:function(){return Cd},AvgPoolGrad:function(){return Id},BackendWasm:function(){return bte},BatchMatMul:function(){return Nd},BatchToSpaceND:function(){return Td},Bincount:function(){return _d},BroadcastArgs:function(){return Md},BroadcastTo:function(){return Rd},Callback:function(){return RD},CallbackList:function(){return rR},Cast:function(){return Od},Ceil:function(){return Fd},ClipByValue:function(){return Pd},Complex:function(){return Dd},ComplexAbs:function(){return Ld},Concat:function(){return zd},Conv2D:function(){return Bd},Conv2DBackpropFilter:function(){return Wd},Conv2DBackpropInput:function(){return jd},Conv3D:function(){return Vd},Conv3DBackpropFilterV2:function(){return Ud},Conv3DBackpropInputV2:function(){return Hd},Cos:function(){return Gd},Cosh:function(){return qd},CropAndResize:function(){return Zd},Cumprod:function(){return Kd},Cumsum:function(){return Xd},CustomCallback:function(){return oR},DataStorage:function(){return al},DenseBincount:function(){return Yd},DepthToSpace:function(){return Jd},DepthwiseConv2dNative:function(){return Qd},DepthwiseConv2dNativeBackpropFilter:function(){return $d},DepthwiseConv2dNativeBackpropInput:function(){return ef},Diag:function(){return tf},Dilation2D:function(){return nf},Dilation2DBackpropFilter:function(){return af},Dilation2DBackpropInput:function(){return rf},ENV:function(){return sd},EarlyStopping:function(){return FD},Einsum:function(){return sf},Elu:function(){return uf},EluGrad:function(){return cf},Environment:function(){return nd},Equal:function(){return df},Erf:function(){return lf},Exp:function(){return ff},ExpandDims:function(){return pf},Expm1:function(){return hf},FFT:function(){return mf},Fill:function(){return vf},FlipLeftRight:function(){return gf},Floor:function(){return yf},FloorDiv:function(){return bf},FromPixels:function(){return vh},FusedBatchNorm:function(){return xf},FusedConv2D:function(){return bh},FusedDepthwiseConv2D:function(){return xh},GPGPUContext:function(){return CX},GatherNd:function(){return kf},GatherV2:function(){return Af},GraphModel:function(){return kz},Greater:function(){return wf},GreaterEqual:function(){return Sf},History:function(){return iR},IFFT:function(){return Ef},Identity:function(){return If},Imag:function(){return Cf},InputSpec:function(){return eN},IsFinite:function(){return Nf},IsInf:function(){return Tf},IsNan:function(){return _f},KernelBackend:function(){return il},LRN:function(){return Uf},LRNGrad:function(){return Hf},LayerVariable:function(){return JC},LayersModel:function(){return SM},LeakyRelu:function(){return Rf},Less:function(){return Mf},LessEqual:function(){return Of},LinSpace:function(){return Ff},Log:function(){return Pf},Log1p:function(){return Df},LogSoftmax:function(){return jf},LogicalAnd:function(){return Lf},LogicalNot:function(){return zf},LogicalOr:function(){return Bf},LogicalXor:function(){return Wf},LowerBound:function(){return Vf},MathBackendCPU:function(){return QB},MathBackendWebGL:function(){return GZ},Max:function(){return Gf},MaxPool:function(){return Kf},MaxPool3D:function(){return Zf},MaxPool3DGrad:function(){return Yf},MaxPoolGrad:function(){return Xf},MaxPoolWithArgmax:function(){return Jf},Maximum:function(){return qf},Mean:function(){return Qf},Min:function(){return $f},Minimum:function(){return ep},MirrorPad:function(){return tp},Mod:function(){return np},MomentumOptimizer:function(){return tI},Multinomial:function(){return rp},Multiply:function(){return ap},Neg:function(){return ip},NonMaxSuppressionV3:function(){return sp},NonMaxSuppressionV4:function(){return up},NonMaxSuppressionV5:function(){return cp},NotEqual:function(){return op},OP_SCOPE_SUFFIX:function(){return Jm},OneHot:function(){return dp},OnesLike:function(){return lp},Optimizer:function(){return ZS},OptimizerConstructors:function(){return rI},Pack:function(){return fp},PadV2:function(){return pp},Pool:function(){return hp},Pow:function(){return mp},Prelu:function(){return vp},Prod:function(){return gp},RMSPropOptimizer:function(){return nI},RNN:function(){return WO},Range:function(){return yp},Rank:function(){return bm},Real:function(){return bp},RealDiv:function(){return of},Reciprocal:function(){return xp},Reduction:function(){return wS},Relu:function(){return Ap},Relu6:function(){return Cp},Reshape:function(){return kp},ResizeBilinear:function(){return Ip},ResizeBilinearGrad:function(){return Ep},ResizeNearestNeighbor:function(){return wp},ResizeNearestNeighborGrad:function(){return Sp},Reverse:function(){return Np},RotateWithOffset:function(){return gh},Round:function(){return Tp},Rsqrt:function(){return _p},SGDOptimizer:function(){return eI},ScatterNd:function(){return Rp},SearchSorted:function(){return Mp},Select:function(){return Op},Selu:function(){return Fp},Sequential:function(){return OM},Sigmoid:function(){return Bp},Sign:function(){return zp},Sin:function(){return Dp},Sinh:function(){return Lp},Slice:function(){return Pp},Softmax:function(){return Gp},Softplus:function(){return Wp},SpaceToBatchND:function(){return Up},SparseFillEmptyRows:function(){return qp},SparseReshape:function(){return Kp},SparseSegmentMean:function(){return Xp},SparseSegmentSum:function(){return Zp},SparseToDense:function(){return Yp},SplitV:function(){return Hp},Sqrt:function(){return jp},Square:function(){return Qp},SquaredDifference:function(){return Jp},Step:function(){return mh},StridedSlice:function(){return $p},StringNGrams:function(){return eh},StringSplit:function(){return th},StringToHashBucketFast:function(){return nh},Sub:function(){return rh},Sum:function(){return Vp},SymbolicTensor:function(){return tN},Tan:function(){return ah},Tanh:function(){return ih},Tensor:function(){return vm},TensorBuffer:function(){return pm},Tile:function(){return oh},TopK:function(){return sh},Transform:function(){return uh},Transpose:function(){return ch},Unique:function(){return lh},Unpack:function(){return dh},UnsortedSegmentSum:function(){return fh},UpperBound:function(){return ph},Variable:function(){return gm},ZerosLike:function(){return hh},_FusedMatMul:function(){return yh},abs:function(){return yb},acos:function(){return bb},acosh:function(){return xb},add:function(){return hb},addN:function(){return Ab},all:function(){return kb},any:function(){return wb},argMax:function(){return Sb},argMin:function(){return Ib},asin:function(){return Eb},asinh:function(){return Cb},atan:function(){return Nb},atan2:function(){return Tb},atanh:function(){return _b},avgPool:function(){return Xb},avgPool3d:function(){return Zb},backend:function(){return oy},backend_util:function(){return sI},basicLSTMCell:function(){return ex},batchNorm:function(){return rx},batchNorm2d:function(){return ax},batchNorm3d:function(){return ix},batchNorm4d:function(){return ox},batchToSpaceND:function(){return tx},bincount:function(){return sx},booleanMaskAsync:function(){return bw},broadcastArgs:function(){return ux},broadcastTo:function(){return cx},broadcast_util:function(){return py},browser:function(){return yy},buffer:function(){return cg},callbacks:function(){return PD},cast:function(){return lg},ceil:function(){return lx},clipByValue:function(){return dx},clone:function(){return dg},complex:function(){return $m},concat:function(){return Yb},concat1d:function(){return fx},concat2d:function(){return px},concat3d:function(){return hx},concat4d:function(){return mx},constraints:function(){return A_},conv1d:function(){return gx},conv2d:function(){return vx},conv2dTranspose:function(){return bx},conv3d:function(){return xx},conv3dTranspose:function(){return kx},copyRegisteredKernels:function(){return Mh},cos:function(){return wx},cosh:function(){return Sx},cosineWindow:function(){return Cw},cumprod:function(){return Ix},cumsum:function(){return Ex},customGrad:function(){return TA},data:function(){return Nz},denseBincount:function(){return Cx},deprecationWarn:function(){return Hg},depthToSpace:function(){return Nx},depthwiseConv2d:function(){return Tx},deregisterOp:function(){return jD},device_util:function(){return jm},diag:function(){return _x},dilation2d:function(){return Rx},disableDeprecationWarnings:function(){return Ug},dispose:function(){return Yg},disposeVariables:function(){return Gg},div:function(){return vb},divNoNan:function(){return Px},dot:function(){return Dx},dropout:function(){return Iw},einsum:function(){return Lx},elu:function(){return zx},enableDebugMode:function(){return Vg},enableProdMode:function(){return jg},enclosingPowerOfTwo:function(){return Ew},engine:function(){return qg},env:function(){return id},equal:function(){return Mx},erf:function(){return Bx},euclideanNorm:function(){return rA},exp:function(){return aA},expandDims:function(){return iA},expm1:function(){return oA},eye:function(){return uA},fft:function(){return qk},fill:function(){return cA},findBackend:function(){return ry},findBackendFactory:function(){return ay},floor:function(){return lA},floorDiv:function(){return mb},forceHalfFloat:function(){return KZ},fused:function(){return _w},gather:function(){return dA},gatherND:function(){return Sw},gather_util:function(){return Cy},getBackend:function(){return ty},getGradient:function(){return Eh},getKernel:function(){return Ih},getKernelsForBackend:function(){return Ch},getThreadsCount:function(){return Pte},gpgpu_util:function(){return aX},grad:function(){return SA},grads:function(){return IA},greater:function(){return fA},greaterEqual:function(){return pA},ifft:function(){return Kk},imag:function(){return uy},image:function(){return HS},inTopKAsync:function(){return Tw},initializers:function(){return D_},input:function(){return LM},io:function(){return pg},irfft:function(){return Xk},isFinite:function(){return hA},isInf:function(){return mA},isNaN:function(){return vA},keep:function(){return Jg},kernel_impls:function(){return sE},layers:function(){return Q_},leakyRelu:function(){return gA},less:function(){return yA},lessEqual:function(){return bA},linalg:function(){return GS},linspace:function(){return xA},loadGraphModel:function(){return wz},loadGraphModelSync:function(){return Iz},loadLayersModel:function(){return DM},localResponseNormalization:function(){return AA},log:function(){return kA},log1p:function(){return wA},logSigmoid:function(){return MA},logSoftmax:function(){return FA},logSumExp:function(){return PA},logicalAnd:function(){return DA},logicalNot:function(){return LA},logicalOr:function(){return zA},logicalXor:function(){return BA},losses:function(){return qS},lowerBound:function(){return VA},matMul:function(){return Bg},math:function(){return zg},max:function(){return Xx},maxPool:function(){return UA},maxPool3d:function(){return HA},maxPoolWithArgmax:function(){return GA},maximum:function(){return qA},mean:function(){return KA},memory:function(){return Kg},meshgrid:function(){return YA},metrics:function(){return lD},min:function(){return Zx},minimum:function(){return JA},mirrorPad:function(){return QA},mod:function(){return $A},model:function(){return FM},models:function(){return ED},moments:function(){return ek},movingAverage:function(){return xw},mul:function(){return gb},multiRNNCell:function(){return tk},multinomial:function(){return nk},neg:function(){return cy},nextFrame:function(){return oI},norm:function(){return nA},notEqual:function(){return rk},oneHot:function(){return Wg},ones:function(){return ZA},onesLike:function(){return ak},op:function(){return Qm},outerProduct:function(){return ik},pad:function(){return ok},pad1d:function(){return sk},pad2d:function(){return uk},pad3d:function(){return ck},pad4d:function(){return lk},pool:function(){return fk},pow:function(){return Yx},prelu:function(){return pk},print:function(){return fg},prod:function(){return hk},profile:function(){return Xg},rand:function(){return mk},randomGamma:function(){return xk},randomNormal:function(){return Ak},randomUniform:function(){return kk},range:function(){return wk},ready:function(){return ey},real:function(){return ly},reciprocal:function(){return Sk},registerBackend:function(){return iy},registerCallbackConstructor:function(){return zM},registerGradient:function(){return Th},registerKernel:function(){return Nh},registerOp:function(){return BD},regularizers:function(){return CD},relu:function(){return Ik},relu6:function(){return Ek},removeBackend:function(){return ny},reshape:function(){return Kb},reverse:function(){return Ck},reverse1d:function(){return Nk},reverse2d:function(){return Tk},reverse3d:function(){return _k},reverse4d:function(){return Rk},rfft:function(){return Yk},round:function(){return Mk},rsqrt:function(){return Ok},scalar:function(){return Jx},scatterND:function(){return Aw},scatter_util:function(){return Ty},searchSorted:function(){return jA},selu:function(){return Fk},separableConv2d:function(){return Pk},sequential:function(){return PM},serialization:function(){return Jy},setBackend:function(){return $g},setPlatform:function(){return sy},setThreadsCount:function(){return Fte},setWasmPath:function(){return _te},setWasmPaths:function(){return Rte},setWebGLContext:function(){return hq},setdiff1dAsync:function(){return Lk},shared:function(){return $B},sigmoid:function(){return Jb},sign:function(){return zk},signal:function(){return US},sin:function(){return Bk},sinh:function(){return Wk},slice:function(){return Qb},slice1d:function(){return jk},slice2d:function(){return Vk},slice3d:function(){return Uk},slice4d:function(){return Hk},slice_util:function(){return Oy},softmax:function(){return Gk},softplus:function(){return RA},spaceToBatchND:function(){return dk},sparse:function(){return KS},sparseToDense:function(){return ww},spectral:function(){return VS},split:function(){return Zk},sqrt:function(){return Qx},square:function(){return $x},squaredDifference:function(){return Jk},squeeze:function(){return Qk},stack:function(){return $k},step:function(){return ew},stridedSlice:function(){return tw},string:function(){return XS},sub:function(){return OA},sum:function(){return eA},sumOutType:function(){return Em},tan:function(){return nw},tanh:function(){return $b},tensor:function(){return tv},tensor1d:function(){return rw},tensor2d:function(){return aw},tensor3d:function(){return by},tensor4d:function(){return iw},tensor5d:function(){return ow},tensor6d:function(){return sw},tensor_util:function(){return ym},test_util:function(){return tb},tidy:function(){return Zg},tile:function(){return sA},time:function(){return Qg},topk:function(){return uw},train:function(){return aI},transpose:function(){return dy},truncatedNormal:function(){return cw},unique:function(){return lw},unregisterGradient:function(){return Rh},unregisterKernel:function(){return _h},unsortedSegmentSum:function(){return dw},unstack:function(){return fw},upcastType:function(){return Im},upperBound:function(){return pw},util:function(){return Fh},valueAndGrad:function(){return EA},valueAndGrads:function(){return CA},variable:function(){return hw},variableGrads:function(){return NA},version:function(){return zte},version_converter:function(){return Cz},version_core:function(){return pb},version_cpu:function(){return iV},version_layers:function(){return qR},version_wasm:function(){return Dte},version_webgl:function(){return qZ},webgl:function(){return XZ},webgl_util:function(){return dq},webgpu:function(){return t8},where:function(){return Ox},whereAsync:function(){return gw},zeros:function(){return XA},zerosLike:function(){return Fx}});var Tc=Object.create,_c=Object.defineProperty,Rc=Object.getOwnPropertyDescriptor,Mc=Object.getOwnPropertyNames,Oc=Object.getPrototypeOf,Fc=Object.prototype.hasOwnProperty,Pc=function(e,t){return function(){return t||(0,e[Mc(e)[0]])((t={exports:{}}).exports,t),t.exports}},Dc=function(e,t){for(var n in t)_c(e,n,{get:t[n],enumerable:!0})},Lc=function(e,t){return function(e,t,n,r){if(t&&"object"==typeof t||"function"==typeof t){var a,i=lc(Mc(t));try{var o=function(){var i=a.value;!Fc.call(e,i)&&(n||"default"!==i)&&_c(e,i,{get:function(){return t[i]},enumerable:!(r=Rc(t,i))||r.enumerable})};for(i.s();!(a=i.n()).done;)o()}catch(s){i.e(s)}finally{i.f()}}return e}(function(e){return _c(e,"__esModule",{value:!0})}(_c(null!=e?Tc(Oc(e)):{},"default",!t&&e&&e.__esModule?{get:function(){return e.default},enumerable:!0}:{value:e,enumerable:!0})),e)},zc=Pc({"src/node_modules/long/src/long.js":function(e,t){t.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(rs){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function a(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=a;var i={},o={};function s(e,t){var n,r,a;return t?(a=0<=(e>>>=0)&&e<256)&&(r=o[e])?r:(n=c(e,(0|e)<0?-1:0,!0),a&&(o[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(r=i[e])?r:(n=c(e,e<0?-1:0,!1),a&&(i[e]=n),n)}function u(e,t){if(isNaN(e))return t?y:g;if(t){if(e<0)return y;if(e>=h)return w}else{if(e<=-m)return S;if(e+1>=m)return k}return e<0?u(-e,t).neg():c(e%p|0,e/p|0,t)}function c(e,t,n){return new r(e,t,n)}r.fromInt=s,r.fromNumber=u,r.fromBits=c;var l=Math.pow;function d(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return d(e.substring(1),t,n).neg();for(var a=u(l(n,8)),i=g,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),c=parseInt(e.substring(o,o+s),n);if(s<8){var f=u(l(n,s));i=i.mul(f).add(u(c))}else i=(i=i.mul(a)).add(u(c))}return i.unsigned=t,i}function f(e,t){return"number"==typeof e?u(e,t):"string"==typeof e?d(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=f;var p=4294967296,h=p*p,m=h/2,v=s(1<<24),g=s(0);r.ZERO=g;var y=s(0,!0);r.UZERO=y;var b=s(1);r.ONE=b;var x=s(1,!0);r.UONE=x;var A=s(-1);r.NEG_ONE=A;var k=c(-1,2147483647,!1);r.MAX_VALUE=k;var w=c(-1,-1,!0);r.MAX_UNSIGNED_VALUE=w;var S=c(0,-2147483648,!1);r.MIN_VALUE=S;var I=r.prototype;I.toInt=function(){return this.unsigned?this.low>>>0:this.low},I.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},I.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=u(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=u(l(e,6),this.unsigned),i=this,o="";;){var s=i.div(a),c=(i.sub(s.mul(a)).toInt()>>>0).toString(e);if((i=s).isZero())return c+o;for(;c.length<6;)c="0"+c;o=""+c+o}},I.getHighBits=function(){return this.high},I.getHighBitsUnsigned=function(){return this.high>>>0},I.getLowBits=function(){return this.low},I.getLowBitsUnsigned=function(){return this.low>>>0},I.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},I.isZero=function(){return 0===this.high&&0===this.low},I.eqz=I.isZero,I.isNegative=function(){return!this.unsigned&&this.high<0},I.isPositive=function(){return this.unsigned||this.high>=0},I.isOdd=function(){return 1===(1&this.low)},I.isEven=function(){return 0===(1&this.low)},I.equals=function(e){return a(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},I.eq=I.equals,I.notEquals=function(e){return!this.eq(e)},I.neq=I.notEquals,I.ne=I.notEquals,I.lessThan=function(e){return this.comp(e)<0},I.lt=I.lessThan,I.lessThanOrEqual=function(e){return this.comp(e)<=0},I.lte=I.lessThanOrEqual,I.le=I.lessThanOrEqual,I.greaterThan=function(e){return this.comp(e)>0},I.gt=I.greaterThan,I.greaterThanOrEqual=function(e){return this.comp(e)>=0},I.gte=I.greaterThanOrEqual,I.ge=I.greaterThanOrEqual,I.compare=function(e){if(a(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},I.comp=I.compare,I.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(b)},I.neg=I.negate,I.add=function(e){a(e)||(e=f(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,u=e.low>>>16,l=0,d=0,p=0,h=0;return p+=(h+=i+(65535&e.low))>>>16,d+=(p+=r+u)>>>16,l+=(d+=n+s)>>>16,l+=t+o,c((p&=65535)<<16|(h&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},I.subtract=function(e){return a(e)||(e=f(e)),this.add(e.neg())},I.sub=I.subtract,I.multiply=function(e){if(this.isZero())return g;if(a(e)||(e=f(e)),n)return c(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return g;if(this.eq(S))return e.isOdd()?S:g;if(e.eq(S))return this.isOdd()?S:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return u(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,l=65535&e.high,d=e.low>>>16,p=65535&e.low,h=0,m=0,y=0,b=0;return y+=(b+=o*p)>>>16,m+=(y+=i*p)>>>16,y&=65535,m+=(y+=o*d)>>>16,h+=(m+=r*p)>>>16,m&=65535,h+=(m+=i*d)>>>16,m&=65535,h+=(m+=o*l)>>>16,h+=t*p+r*d+i*l+o*s,c((y&=65535)<<16|(b&=65535),(h&=65535)<<16|(m&=65535),this.unsigned)},I.mul=I.multiply,I.divide=function(e){if(a(e)||(e=f(e)),e.isZero())throw Error("division by zero");var t,r,i;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return x;i=y}else{if(this.eq(S))return e.eq(b)||e.eq(A)?S:e.eq(S)?b:(t=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?b:A:(r=this.sub(e.mul(t)),i=t.add(r.div(e)));if(e.eq(S))return this.unsigned?y:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=g}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),s=o<=48?1:l(2,o-48),d=u(t),p=d.mul(e);p.isNegative()||p.gt(r);)p=(d=u(t-=s,this.unsigned)).mul(e);d.isZero()&&(d=b),i=i.add(d),r=r.sub(p)}return i},I.div=I.divide,I.modulo=function(e){return a(e)||(e=f(e)),n?c((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},I.mod=I.modulo,I.rem=I.modulo,I.not=function(){return c(~this.low,~this.high,this.unsigned)},I.and=function(e){return a(e)||(e=f(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},I.or=function(e){return a(e)||(e=f(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},I.xor=function(e){return a(e)||(e=f(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},I.shiftLeft=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},I.shl=I.shiftLeft,I.shiftRight=function(e){return a(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},I.shr=I.shiftRight,I.shiftRightUnsigned=function(e){if(a(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?c(this.low>>>e|t<<32-e,t>>>e,this.unsigned):c(32===e?t:t>>>e-32,0,this.unsigned)},I.shru=I.shiftRightUnsigned,I.shr_u=I.shiftRightUnsigned,I.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},I.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},I.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},I.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},I.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}}}),Bc=Pc({"(disabled):src/node_modules/node-fetch/browser.js":function(){}}),Wc=Pc({"(disabled):util":function(){}}),jc=Pc({"src/node_modules/seedrandom/lib/alea.js":function(e,t){!function(e,t,n){function r(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){var n=new r(e),i=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.alea=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),Vc=Pc({"src/node_modules/seedrandom/lib/xor128.js":function(e,t){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xor128=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),Uc=Pc({"src/node_modules/seedrandom/lib/xorwow.js":function(e,t){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xorwow=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),Hc=Pc({"src/node_modules/seedrandom/lib/xorshift7.js":function(e,t){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&(i.x&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xorshift7=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),Gc=Pc({"src/node_modules/seedrandom/lib/xor4096.js":function(e,t){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&(i.X&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xor4096=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),qc=Pc({"src/node_modules/seedrandom/lib/tychei.js":function(e,t){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.tychei=i}(0,"object"==typeof t&&t,"function"==typeof define&&define)}}),Kc=Pc({"(disabled):crypto":function(){}}),Xc=Pc({"src/node_modules/seedrandom/seedrandom.js":function(e,t){!function(e,r,a){var i,o=256,s="random",u=a.pow(o,6),c=a.pow(2,52),l=2*c,d=255;function f(t,n,d){var f=[],y=v(m((n=1==n?{entropy:!0}:n||{}).entropy?[t,g(r)]:null==t?function(){try{var t;return i&&(t=i.randomBytes)?t=t(o):(t=new Uint8Array(o),(e.crypto||e.msCrypto).getRandomValues(t)),g(t)}catch(f){var n=e.navigator,a=n&&n.plugins;return[+new Date,e,a,e.screen,g(r)]}}():t,3),f),b=new p(f),x=function(){for(var e=b.g(6),t=u,n=0;e<c;)e=(e+n)*o,t*=o,n=b.g(1);for(;e>=l;)e/=2,t/=2,n>>>=1;return(e+n)/t};return x.int32=function(){return 0|b.g(4)},x.quick=function(){return b.g(4)/4294967296},x.double=x,v(g(b.S),r),(n.pass||d||function(e,t,n,r){return r&&(r.S&&h(r,b),e.state=function(){return h(b,{})}),n?(a[s]=e,t):e})(x,y,"global"in n?n.global:this==a,n.state)}function p(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);a<o;)s[a]=a++;for(a=0;a<o;a++)s[a]=s[i=d&i+e[a%n]+(t=s[a])],s[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,s=r.S;e--;)t=s[a=d&a+1],n=n*o+s[d&(s[a]=s[i=d&i+t])+(s[i]=t)];return r.i=a,r.j=i,n})(o)}function h(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(Xo){}return r.length?r:"string"==a?e:e+"\0"}function v(e,t){for(var n,r=e+"",a=0;a<r.length;)t[d&a]=d&(n^=19*t[d&a])+r.charCodeAt(a++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(v(a.random(),r),"object"==typeof t&&t.exports){t.exports=f;try{i=Kc()}catch(es){}}else"function"==typeof define&&n.amdO?define((function(){return f})):a["seed"+s]=f}("undefined"!=typeof self?self:e,[],Math)}}),Zc=Pc({"src/node_modules/seedrandom/index.js":function(e,t){var n=jc(),r=Vc(),a=Uc(),i=Hc(),o=Gc(),s=qc(),u=Xc();u.alea=n,u.xor128=r,u.xorwow=a,u.xorshift7=i,u.xor4096=o,u.tychei=s,t.exports=u}}),Yc=Pc({"(disabled):src/node_modules/string_decoder/index.js":function(){}}),Jc=Pc({"(disabled):fs":function(){}}),Qc=Pc({"(disabled):path":function(){}}),$c=Pc({"(disabled):worker_threads":function(){}}),el=Pc({"(disabled):perf_hooks":function(){}}),tl=Pc({"(disabled):os":function(){}}),nl=Pc({"src/tfjs-backend-wasm/wasm-out/tfjs-backend-wasm-threaded-simd.js":function(e,t){var r=function(){var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||pc,function(t){function r(){return F.buffer!=G&&J(F.buffer),q}function a(){return F.buffer!=G&&J(F.buffer),K}function i(){return F.buffer!=G&&J(F.buffer),X}function o(){return F.buffer!=G&&J(F.buffer),Z}var s,u,c,l="undefined"!=typeof(t=t||{})?t:{};l.ready=new Promise((function(e,t){s=e,u=t})),"undefined"!=typeof process&&process.listeners&&(c={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var d,f,p,h,m,v,g=Object.assign({},l),y=[],b=function(e,t){throw t},x="object"==typeof window,A="function"==typeof importScripts,k="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,w=l.ENVIRONMENT_IS_PTHREAD||!1,S="";function I(e){return l.locateFile?l.locateFile(e,S):S+e}if(k){var E;S=A?Qc().dirname(S)+"/":"//",v=function(){m||(h=Jc(),m=Qc())},d=function(e,t){return v(),e=m.normalize(e),h.readFileSync(e,t?void 0:"utf8")},p=function(e){var t=d(e,!0);return t.buffer||(t=new Uint8Array(t)),t},f=function(e,t,n){v(),e=m.normalize(e),h.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),y=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ft))throw e})),process.on("unhandledRejection",(function(e){throw e})),b=function(e,t){if(ae())throw process.exitCode=e,t;(function(e){e instanceof ft||_("exiting due to exception: "+e)})(t),process.exit(e)},l.inspect=function(){return"[Emscripten Module object]"};try{E=$c()}catch(as){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),as}n.g.Worker=E.Worker}else(x||A)&&(A?S=self.location.href:"undefined"!=typeof document&&document.currentScript&&(S=document.currentScript.src),"undefined"!=typeof e&&e&&(S=e),S=0!==S.indexOf("blob:")?S.substr(0,S.replace(/[?#].*/,"").lastIndexOf("/")+1):"",k||(d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},A&&(p=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}),function(e){return document.title=e});k&&"undefined"==typeof performance&&(n.g.performance=el().performance);var C=console.log.bind(console),N=console.warn.bind(console);k&&(v(),C=function(e){return h.writeSync(1,e+"\n")},N=function(e){return h.writeSync(2,e+"\n")});var T=l.print||C,_=l.printErr||N;Object.assign(l,g),g=null,l.arguments&&(y=l.arguments),l.thisProgram&&l.thisProgram,l.quit&&(b=l.quit);function R(e){R.shown||(R.shown={}),R.shown[e]||(R.shown[e]=1,_(e))}var M;Atomics.load,Atomics.store,Atomics.compareExchange;l.wasmBinary&&(M=l.wasmBinary);var O=l.noExitRuntime||!0;"object"!=typeof WebAssembly&&de("no native wasm support detected");var F,P,D,L=!1;function z(e){return l["_"+e]}function B(e,t,n,a,i){var o={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);H(e,t=lt(n),n)}return t},array:function(e){var t=lt(e.length);return function(e,t){r().set(e,t)}(e,t),t}};var s=z(e),u=[],c=0;if(a)for(var l=0;l<a.length;l++){var d=o[n[l]];d?(0===c&&(c=ut()),u[l]=d(a[l])):u[l]=a[l]}var f,p=s.apply(null,u);return f=p,0!==c&&ct(c),p=function(e){return"string"===t?U(e):"boolean"===t?Boolean(e):e}(f),p}function W(e){var t=new TextDecoder(e);this.decode=function(e){return e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),t.decode.call(t,e)}}var j="undefined"!=typeof TextDecoder?new W("utf8"):void 0;function V(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&j)return j.decode(e.subarray(t,a));for(var i="";t<a;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var u=63&e[t++];if((o=224==(240&o)?(15&o)<<12|s<<6|u:(7&o)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(o);else{var c=o-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&o)<<6|s)}else i+=String.fromCharCode(o)}return i}function U(e,t){return e?V(a(),e,t):""}function H(e,t,n){return function(e,t,n,r){if(!(r>0))return 0;for(var a=n,i=n+r-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-a}(e,a(),t,n)}var G,q,K,X,Z;"undefined"!=typeof TextDecoder&&new W("utf-16le");function Y(e,t){return e%t>0&&(e+=t-e%t),e}function J(e){G=e,l.HEAP8=q=new Int8Array(e),l.HEAP16=new Int16Array(e),l.HEAP32=X=new Int32Array(e),l.HEAPU8=K=new Uint8Array(e),l.HEAPU16=new Uint16Array(e),l.HEAPU32=new Uint32Array(e),l.HEAPF32=new Float32Array(e),l.HEAPF64=Z=new Float64Array(e)}w&&(G=l.buffer);var Q=l.INITIAL_MEMORY||16777216;if(w)F=l.wasmMemory,G=l.buffer;else if(l.wasmMemory)F=l.wasmMemory;else if(!((F=new WebAssembly.Memory({initial:Q/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw _("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),k&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");F&&(G=F.buffer),Q=G.byteLength,J(G);var $,ee=[],te=[],ne=[],re=[];function ae(){return O||!1}function ie(){!0,!w&&ge(te)}function oe(e){ee.unshift(e)}function se(e){re.unshift(e)}var ue=0,ce=null,le=null;function de(e){w?postMessage({cmd:"onAbort",arg:e}):l.onAbort&&l.onAbort(e),_(e="Aborted("+e+")"),L=!0,D=1,e+=". Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw u(t),t}l.preloadedImages={},l.preloadedAudios={};var fe;function pe(e){return e.startsWith("data:application/octet-stream;base64,")}function he(e){return e.startsWith("file://")}function me(e){try{if(e==fe&&M)return new Uint8Array(M);if(p)return p(e);throw"both async and sync fetching of the wasm failed"}catch(as){de(as)}}pe(fe="tfjs-backend-wasm-threaded-simd.wasm")||(fe=I(fe));var ve={};function ge(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?Ie(n)():Ie(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(l)}}function ye(e){var t=ut(),n=e();return ct(t),n}function be(e){var t=Ae.pthreads[e];if(t){i()[e>>2]=0;var n=t.worker;Ae.returnWorkerToPool(n)}}function xe(e){!function(e,t){if(D=e,!t&&w)throw ke(e),"unwind";ae()||w||(Ae.terminateAllThreads(),!0),function(e){D=e,ae()||(Ae.terminateAllThreads(),l.onExit&&l.onExit(e),L=!0),b(e,new ft(e))}(e)}(e)}var Ae={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],init:function(){w?Ae.initWorker():Ae.initMainThread()},initMainThread:function(){for(var e=0;e<8;++e)Ae.allocateUnusedWorker()},initWorker:function(){O=!1},pthreads:{},setExitStatus:function(e){D=e},terminateAllThreads:function(){for(var e in Ae.pthreads){var t=Ae.pthreads[e];t&&t.worker&&Ae.returnWorkerToPool(t.worker)}for(var n=0;n<Ae.unusedWorkers.length;++n){Ae.unusedWorkers[n].terminate()}Ae.unusedWorkers=[]},returnWorkerToPool:function(e){Ae.runWithoutMainThreadQueuedCalls((function(){delete Ae.pthreads[e.pthread.threadInfoStruct],Ae.unusedWorkers.push(e),Ae.runningWorkers.splice(Ae.runningWorkers.indexOf(e),1),ot(e.pthread.threadInfoStruct),e.pthread=void 0}))},runWithoutMainThreadQueuedCalls:function(e){i()[dt>>2]=0;try{e()}finally{i()[dt>>2]=1}},receiveObjectTransfer:function(e){},threadInit:function(){for(var e in Ae.tlsInitFunctions)Ae.tlsInitFunctions[e]()},loadWasmModuleToWorker:function(t,n){t.onmessage=function(e){var r=e.data,a=r.cmd;if(t.pthread&&(Ae.currentProxiedOperationCallerThread=t.pthread.threadInfoStruct),r.targetThread&&r.targetThread!=et()){var o=Ae.pthreads[r.targetThread];return o?o.worker.postMessage(r,r.transferList):_('Internal error! Worker sent a message "'+a+'" to target pthread '+r.targetThread+", but that thread no longer exists!"),void(Ae.currentProxiedOperationCallerThread=void 0)}"processQueuedMainThreadWork"===a?tt():"spawnThread"===a?Ce(r):"cleanupThread"===a?be(r.thread):"killThread"===a?function(e){i()[e>>2]=0;var t=Ae.pthreads[e];delete Ae.pthreads[e],t.worker.terminate(),ot(e),Ae.runningWorkers.splice(Ae.runningWorkers.indexOf(t.worker),1),t.worker.pthread=void 0}(r.thread):"cancelThread"===a?function(e){Ae.pthreads[e].worker.postMessage({cmd:"cancel"})}(r.thread):"loaded"===a?(t.loaded=!0,n&&n(t),t.runPthread&&(t.runPthread(),delete t.runPthread)):"print"===a?T("Thread "+r.threadId+": "+r.text):"printErr"===a?_("Thread "+r.threadId+": "+r.text):"alert"===a?alert("Thread "+r.threadId+": "+r.text):"setimmediate"===r.target?t.postMessage(r):"onAbort"===a?l.onAbort&&l.onAbort(r.arg):_("worker sent an unknown command "+a),Ae.currentProxiedOperationCallerThread=void 0},t.onerror=function(e){throw _("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},k&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:l.mainScriptUrlOrBlob||e,wasmMemory:F,wasmModule:P})},allocateUnusedWorker:function(){var e=I("tfjs-backend-wasm-threaded-simd.worker.js");Ae.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return 0==Ae.unusedWorkers.length&&(Ae.allocateUnusedWorker(),Ae.loadWasmModuleToWorker(Ae.unusedWorkers[0])),Ae.unusedWorkers.pop()}};function ke(e){if(w)return Te(1,0,e);try{xe(e)}catch(as){!function(e){if(e instanceof ft||"unwind"==e)return D;b(1,e)}(as)}}l.establishStackSpace=function(){var e=et(),t=i()[e+44>>2],n=i()[e+48>>2];st(t,t-n),ct(t)};var we,Se=[];function Ie(e){var t=Se[e];return t||(e>=Se.length&&(Se.length=e+1),Se[e]=t=$.get(e)),t}l.invokeEntryPoint=function(e,t){return Ie(e)(t)},we=k?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:w?function(){return performance.now()-l.__performance_now_clock_drift}:function(){return performance.now()};function Ee(e,t){var n;if(0===e)n=Date.now();else{if(1!==e&&4!==e)return function(e){i()[$e()>>2]=e}(28),-1;n=we()}return i()[t>>2]=n/1e3|0,i()[t+4>>2]=n%1e3*1e3*1e3|0,0}function Ce(e){var t=Ae.getNewWorker();if(!t)return 6;Ae.runningWorkers.push(t);var n=Ae.pthreads[e.pthread_ptr]={worker:t,threadInfoStruct:e.pthread_ptr};t.pthread=n;var r={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr};return t.runPthread=function(){r.time=performance.now(),t.postMessage(r,e.transferList)},t.loaded&&(t.runPthread(),delete t.runPthread),0}function Ne(){return 2147483648}function Te(e,t){var n=arguments.length-2,r=arguments;return ye((function(){for(var a=n,i=lt(8*a),s=i>>3,u=0;u<n;u++){var c=r[2+u];o()[s+u]=c}return at(e,a,i,t)}))}var _e=[];function Re(e){try{return F.grow(e-G.byteLength+65535>>>16),J(F.buffer),1}catch(as){}}var Me={inEventHandler:0,removeAllEventListeners:function(){for(var e=Me.eventHandlers.length-1;e>=0;--e)Me._removeHandler(e);Me.eventHandlers=[],Me.deferredCalls=[]},registerRemoveEventListeners:function(){Me.removeEventListenersRegistered||(ne.push(Me.removeAllEventListeners),Me.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,n){function r(e,t){if(e.length!=t.length)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0}for(var a in Me.deferredCalls){var i=Me.deferredCalls[a];if(i.targetFunction==e&&r(i.argsList,n))return}Me.deferredCalls.push({targetFunction:e,precedence:t,argsList:n}),Me.deferredCalls.sort((function(e,t){return e.precedence<t.precedence}))},removeDeferredCalls:function(e){for(var t=0;t<Me.deferredCalls.length;++t)Me.deferredCalls[t].targetFunction==e&&(Me.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return Me.inEventHandler&&Me.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(Me.canPerformEventHandlerRequests())for(var e=0;e<Me.deferredCalls.length;++e){var t=Me.deferredCalls[e];Me.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var n=0;n<Me.eventHandlers.length;++n)Me.eventHandlers[n].target==e&&(!t||t==Me.eventHandlers[n].eventTypeString)&&Me._removeHandler(n--)},_removeHandler:function(e){var t=Me.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),Me.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(t){++Me.inEventHandler,Me.currentEventHandler=e,Me.runDeferredCalls(),e.handlerFunc(t),Me.runDeferredCalls(),--Me.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),Me.eventHandlers.push(e),Me.registerRemoveEventListeners();else for(var n=0;n<Me.eventHandlers.length;++n)Me.eventHandlers[n].target==e.target&&Me.eventHandlers[n].eventTypeString==e.eventTypeString&&Me._removeHandler(n--)},queueEventHandlerOnThread_iiii:function(e,t,n,r,a){ye((function(){var o=lt(12);i()[o>>2]=n,i()[o+4>>2]=r,i()[o+8>>2]=a,it(e,637534208,t,r,o)}))},getTargetThreadForEventCallback:function(e){switch(e){case 1:return 0;case 2:return Ae.currentProxiedOperationCallerThread;default:return e}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function Oe(e,t,n,r){ye((function(){var a=lt(12),o=0;t&&(o=function(e){var t=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}(e)+1,n=Je(t);return H(e,n,t),n}(t)),i()[a>>2]=o,i()[a+4>>2]=n,i()[a+8>>2]=r,it(e,657457152,0,o,a)}))}var Fe=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function Pe(e){return e=function(e){return e>2?U(e):e}(e),Fe[e]||("undefined"!=typeof document?document.querySelector(e):void 0)}function De(e){return Pe(e)}function Le(e,t,n){var r=De(e);if(!r)return-4;if(r.canvasSharedPtr&&(i()[r.canvasSharedPtr>>2]=t,i()[r.canvasSharedPtr+4>>2]=n),!r.offscreenCanvas&&r.controlTransferredOffscreen)return r.canvasSharedPtr?(function(e,t,n,r){Oe(e,t=t?U(t):"",n,r)}(i()[r.canvasSharedPtr+8>>2],e,t,n),1):-4;r.offscreenCanvas&&(r=r.offscreenCanvas);var a=!1;if(r.GLctxObject&&r.GLctxObject.GLctx){var o=r.GLctxObject.GLctx.getParameter(2978);a=0===o[0]&&0===o[1]&&o[2]===r.width&&o[3]===r.height}return r.width=t,r.height=n,a&&r.GLctxObject.GLctx.viewport(0,0,t,n),0}function ze(e,t,n){return w?Te(2,1,e,t,n):Le(e,t,n)}var Be={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},queries:[],stringCache:{},unpackAlignment:4,recordError:function(e){Be.lastError||(Be.lastError=e)},getNewId:function(e){for(var t=Be.counter++,n=e.length;n<t;n++)e[n]=null;return t},getSource:function(e,t,n,r){for(var a="",o=0;o<t;++o){var s=r?i()[r+4*o>>2]:-1;a+=U(i()[n+4*o>>2],s<0?void 0:s)}return a},createContext:function(e,t){e.getContextSafariWebGL2Fixed||(e.getContextSafariWebGL2Fixed=e.getContext,e.getContext=function(t,n){var r=e.getContextSafariWebGL2Fixed(t,n);return"webgl"==t==r instanceof WebGLRenderingContext?r:null});var n=e.getContext("webgl",t);return n?Be.registerContext(n,t):0},registerContext:function(e,t){var n=Je(8);i()[n+4>>2]=et();var r={handle:n,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=r),Be.contexts[n]=r,("undefined"==typeof t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&Be.initExtensions(r),n},makeContextCurrent:function(e){return Be.currentContext=Be.contexts[e],l.ctx=Ge=Be.currentContext&&Be.currentContext.GLctx,!(e&&!Ge)},getContext:function(e){return Be.contexts[e]},deleteContext:function(e){Be.currentContext===Be.contexts[e]&&(Be.currentContext=null),"object"==typeof Me&&Me.removeAllHandlersOnTarget(Be.contexts[e].GLctx.canvas),Be.contexts[e]&&Be.contexts[e].GLctx.canvas&&(Be.contexts[e].GLctx.canvas.GLctxObject=void 0),Qe(Be.contexts[e].handle),Be.contexts[e]=null},initExtensions:function(e){if(e||(e=Be.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t=e.GLctx;(function(e){var t=e.getExtension("ANGLE_instanced_arrays");if(t)e.vertexAttribDivisor=function(e,n){t.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,r,a){t.drawArraysInstancedANGLE(e,n,r,a)},e.drawElementsInstanced=function(e,n,r,a,i){t.drawElementsInstancedANGLE(e,n,r,a,i)}})(t),function(e){var t=e.getExtension("OES_vertex_array_object");if(t)e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)}}(t),function(e){var t=e.getExtension("WEBGL_draw_buffers");if(t)e.drawBuffers=function(e,n){t.drawBuffersWEBGL(e,n)}}(t),t.disjointTimerQueryExt=t.getExtension("EXT_disjoint_timer_query"),function(e){e.multiDrawWebgl=e.getExtension("WEBGL_multi_draw")}(t),(t.getSupportedExtensions()||[]).forEach((function(e){!e.includes("lose_context")&&!e.includes("debug")&&t.getExtension(e)}))}}},We=["default","low-power","high-performance"];var je={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=je.buffers[e];0===t||10===t?((1===e?T:_)(V(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return je.varargs+=4,i()[je.varargs-4>>2]},getStr:function(e){return U(e)},get64:function(e,t){return e}};function Ve(e){return w?Te(3,1,e):0}function Ue(e,t,n,r,a){if(w)return Te(4,1,e,t,n,r,a)}function He(e,t,n,r){if(w)return Te(5,1,e,t,n,r);for(var o=0,s=0;s<n;s++){var u=i()[t>>2],c=i()[t+4>>2];t+=8;for(var l=0;l<c;l++)je.printChar(e,a()[u+l]);o+=c}return i()[r>>2]=o,0}Ae.init();var Ge,qe,Ke,Xe,Ze=[null,ke,ze,Ve,Ue,He],Ye={__clock_gettime:function(e,t){return Ee(e,t)},__emscripten_init_main_thread_js:function(e){nt(e,!A,1,!x),Ae.threadInit()},__emscripten_thread_cleanup:function(e){w?postMessage({cmd:"cleanupThread",thread:e}):be(e)},__pthread_create_js:function(e,t,n,r){if("undefined"==typeof SharedArrayBuffer)return _("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];if(w&&0===a.length)return rt(687865856,e,t,n,r);var i={startRoutine:n,pthread_ptr:e,arg:r,transferList:a};return w?(i.cmd="spawnThread",postMessage(i,a),0):Ce(i)},_emscripten_default_pthread_stack_size:function(){return 2097152},_emscripten_notify_thread_queue:function(e,t){if(e==t)postMessage({cmd:"processQueuedMainThreadWork"});else if(w)postMessage({targetThread:e,cmd:"processThreadQueue"});else{var n=Ae.pthreads[e],r=n&&n.worker;if(!r)return;r.postMessage({cmd:"processThreadQueue"})}return 1},abort:function(){de("")},emscripten_check_blocking_allowed:function(){k||A||R("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},emscripten_get_heap_max:Ne,emscripten_get_now:we,emscripten_memcpy_big:function(e,t,n){a().copyWithin(e,t,t+n)},emscripten_num_logical_cores:function(){return k?tl().cpus().length:navigator.hardwareConcurrency},emscripten_receive_on_main_thread_js:function(e,t,n){_e.length=t;for(var r=n>>3,a=0;a<t;a++)_e[a]=o()[r+a];return(e<0?ve[-e-1]:Ze[e]).apply(null,_e)},emscripten_resize_heap:function(e){var t=a().length;if((e>>>=0)<=t)return!1;var n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var i=t*(1+.2/r);if(i=Math.min(i,e+100663296),Re(Math.min(n,Y(Math.max(e,i),65536))))return!0}return!1},emscripten_set_canvas_element_size:function(e,t,n){return De(e)?Le(e,t,n):ze(e,t,n)},emscripten_unwind_to_js_event_loop:function(){throw"unwind"},emscripten_webgl_create_context:function(e,t){return function(e,t){var n=t>>2,r=i()[n+6],a={alpha:!!i()[n+0],depth:!!i()[n+1],stencil:!!i()[n+2],antialias:!!i()[n+3],premultipliedAlpha:!!i()[n+4],preserveDrawingBuffer:!!i()[n+5],powerPreference:We[r],failIfMajorPerformanceCaveat:!!i()[n+7],majorVersion:i()[n+8],minorVersion:i()[n+9],enableExtensionsByDefault:i()[n+10],explicitSwapControl:i()[n+11],proxyContextToMainThread:i()[n+12],renderViaOffscreenBackBuffer:i()[n+13]},o=De(e);return!o||a.explicitSwapControl?0:Be.createContext(o,a)}(e,t)},exit:xe,fd_close:Ve,fd_seek:Ue,fd_write:He,memory:F||l.wasmMemory,setTempRet0:function(e){!function(e){e}(e)}},Je=(function(){var e={env:Ye,wasi_snapshot_preview1:Ye};function t(e,t){var n=e.exports;if(l.asm=n,function(e,t,n){Ae.tlsInitFunctions.push(e)}(l.asm.emscripten_tls_init),$=l.asm.__indirect_function_table,function(e){te.unshift(e)}(l.asm.__wasm_call_ctors),P=t,!w){var r=Ae.unusedWorkers.length;Ae.unusedWorkers.forEach((function(e){Ae.loadWasmModuleToWorker(e,(function(){--r||function(e){if(ue--,l.monitorRunDependencies&&l.monitorRunDependencies(ue),0==ue&&(null!==ce&&(clearInterval(ce),ce=null),le)){var t=le;le=null,t()}}()}))}))}}function n(e){t(e.instance,e.module)}function r(t){return function(){if(!M&&(x||A)){if("function"==typeof fetch&&!he(fe))return fetch(fe,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+fe+"'";return e.arrayBuffer()})).catch((function(){return me(fe)}));if(f)return new Promise((function(e,t){f(fe,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return me(fe)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){_("failed to asynchronously prepare wasm: "+e),de(e)}))}if(w||(ue++,l.monitorRunDependencies&&l.monitorRunDependencies(ue)),l.instantiateWasm)try{return l.instantiateWasm(e,t)}catch(a){return _("Module.instantiateWasm callback failed with error: "+a),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||pe(fe)||he(fe)||"function"!=typeof fetch?r(n):fetch(fe,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return _("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(u)}(),l.___wasm_call_ctors=function(){return(l.___wasm_call_ctors=l.asm.__wasm_call_ctors).apply(null,arguments)},l._init=function(){return(l._init=l.asm.init).apply(null,arguments)},l._init_with_threads_count=function(){return(l._init_with_threads_count=l.asm.init_with_threads_count).apply(null,arguments)},l._get_threads_count=function(){return(l._get_threads_count=l.asm.get_threads_count).apply(null,arguments)},l._register_tensor=function(){return(l._register_tensor=l.asm.register_tensor).apply(null,arguments)},l._dispose_data=function(){return(l._dispose_data=l.asm.dispose_data).apply(null,arguments)},l._dispose=function(){return(l._dispose=l.asm.dispose).apply(null,arguments)},l._Abs=function(){return(l._Abs=l.asm.Abs).apply(null,arguments)},l._Add=function(){return(l._Add=l.asm.Add).apply(null,arguments)},l._AddN=function(){return(l._AddN=l.asm.AddN).apply(null,arguments)},l._All=function(){return(l._All=l.asm.All).apply(null,arguments)},l._Any=function(){return(l._Any=l.asm.Any).apply(null,arguments)},l._ArgMax=function(){return(l._ArgMax=l.asm.ArgMax).apply(null,arguments)},l._AvgPool=function(){return(l._AvgPool=l.asm.AvgPool).apply(null,arguments)},l._BatchMatMul=function(){return(l._BatchMatMul=l.asm.BatchMatMul).apply(null,arguments)},l._Ceil=function(){return(l._Ceil=l.asm.Ceil).apply(null,arguments)},l._ClipByValue=function(){return(l._ClipByValue=l.asm.ClipByValue).apply(null,arguments)},l._Conv2D=function(){return(l._Conv2D=l.asm.Conv2D).apply(null,arguments)},l._Conv2DBackpropInput=function(){return(l._Conv2DBackpropInput=l.asm.Conv2DBackpropInput).apply(null,arguments)},l._Cos=function(){return(l._Cos=l.asm.Cos).apply(null,arguments)},l._Cosh=function(){return(l._Cosh=l.asm.Cosh).apply(null,arguments)},l._CropAndResize=function(){return(l._CropAndResize=l.asm.CropAndResize).apply(null,arguments)},l._Cumprod=function(){return(l._Cumprod=l.asm.Cumprod).apply(null,arguments)},l._Cumsum=function(){return(l._Cumsum=l.asm.Cumsum).apply(null,arguments)},l._DepthToSpace=function(){return(l._DepthToSpace=l.asm.DepthToSpace).apply(null,arguments)},l._DepthwiseConv2dNative=function(){return(l._DepthwiseConv2dNative=l.asm.DepthwiseConv2dNative).apply(null,arguments)},l._Elu=function(){return(l._Elu=l.asm.Elu).apply(null,arguments)},l._Equal=function(){return(l._Equal=l.asm.Equal).apply(null,arguments)},l._Exp=function(){return(l._Exp=l.asm.Exp).apply(null,arguments)},l._FlipLeftRight=function(){return(l._FlipLeftRight=l.asm.FlipLeftRight).apply(null,arguments)},l._Floor=function(){return(l._Floor=l.asm.Floor).apply(null,arguments)},l._FloorDiv=function(){return(l._FloorDiv=l.asm.FloorDiv).apply(null,arguments)},l._FusedBatchNorm=function(){return(l._FusedBatchNorm=l.asm.FusedBatchNorm).apply(null,arguments)},l._FusedConv2D=function(){return(l._FusedConv2D=l.asm.FusedConv2D).apply(null,arguments)},l._FusedDepthwiseConv2D=function(){return(l._FusedDepthwiseConv2D=l.asm.FusedDepthwiseConv2D).apply(null,arguments)},l._Gather=function(){return(l._Gather=l.asm.Gather).apply(null,arguments)},l._GatherNd=function(){return(l._GatherNd=l.asm.GatherNd).apply(null,arguments)},l._Greater=function(){return(l._Greater=l.asm.Greater).apply(null,arguments)},l._GreaterEqual=function(){return(l._GreaterEqual=l.asm.GreaterEqual).apply(null,arguments)},l._LeakyRelu=function(){return(l._LeakyRelu=l.asm.LeakyRelu).apply(null,arguments)},l._Less=function(){return(l._Less=l.asm.Less).apply(null,arguments)},l._LessEqual=function(){return(l._LessEqual=l.asm.LessEqual).apply(null,arguments)},l._Log=function(){return(l._Log=l.asm.Log).apply(null,arguments)},l._LogicalAnd=function(){return(l._LogicalAnd=l.asm.LogicalAnd).apply(null,arguments)},l._LogicalNot=function(){return(l._LogicalNot=l.asm.LogicalNot).apply(null,arguments)},l._LogicalOr=function(){return(l._LogicalOr=l.asm.LogicalOr).apply(null,arguments)},l._LogicalXor=function(){return(l._LogicalXor=l.asm.LogicalXor).apply(null,arguments)},l._Max=function(){return(l._Max=l.asm.Max).apply(null,arguments)},l._MaxPool=function(){return(l._MaxPool=l.asm.MaxPool).apply(null,arguments)},l._Maximum=function(){return(l._Maximum=l.asm.Maximum).apply(null,arguments)},l._Mean=function(){return(l._Mean=l.asm.Mean).apply(null,arguments)},l._Min=function(){return(l._Min=l.asm.Min).apply(null,arguments)},l._Minimum=function(){return(l._Minimum=l.asm.Minimum).apply(null,arguments)},l._MirrorPad=function(){return(l._MirrorPad=l.asm.MirrorPad).apply(null,arguments)},l._Multiply=function(){return(l._Multiply=l.asm.Multiply).apply(null,arguments)},l._Neg=function(){return(l._Neg=l.asm.Neg).apply(null,arguments)},l._NonMaxSuppressionV3=function(){return(l._NonMaxSuppressionV3=l.asm.NonMaxSuppressionV3).apply(null,arguments)},l._NonMaxSuppressionV4=function(){return(l._NonMaxSuppressionV4=l.asm.NonMaxSuppressionV4).apply(null,arguments)},l._NonMaxSuppressionV5=function(){return(l._NonMaxSuppressionV5=l.asm.NonMaxSuppressionV5).apply(null,arguments)},l._NotEqual=function(){return(l._NotEqual=l.asm.NotEqual).apply(null,arguments)},l._OneHot=function(){return(l._OneHot=l.asm.OneHot).apply(null,arguments)},l._PadV2=function(){return(l._PadV2=l.asm.PadV2).apply(null,arguments)},l._Pow=function(){return(l._Pow=l.asm.Pow).apply(null,arguments)},l._Prelu=function(){return(l._Prelu=l.asm.Prelu).apply(null,arguments)},l._Prod=function(){return(l._Prod=l.asm.Prod).apply(null,arguments)},l._RealDiv=function(){return(l._RealDiv=l.asm.RealDiv).apply(null,arguments)},l._Relu=function(){return(l._Relu=l.asm.Relu).apply(null,arguments)},l._Relu6=function(){return(l._Relu6=l.asm.Relu6).apply(null,arguments)},l._ResizeBilinear=function(){return(l._ResizeBilinear=l.asm.ResizeBilinear).apply(null,arguments)},l._Reverse=function(){return(l._Reverse=l.asm.Reverse).apply(null,arguments)},l._RotateWithOffset=function(){return(l._RotateWithOffset=l.asm.RotateWithOffset).apply(null,arguments)},l._Round=function(){return(l._Round=l.asm.Round).apply(null,arguments)},l._Rsqrt=function(){return(l._Rsqrt=l.asm.Rsqrt).apply(null,arguments)},l._ScatterNd=function(){return(l._ScatterNd=l.asm.ScatterNd).apply(null,arguments)},l._SelectV2=function(){return(l._SelectV2=l.asm.SelectV2).apply(null,arguments)},l._Sigmoid=function(){return(l._Sigmoid=l.asm.Sigmoid).apply(null,arguments)},l._Sin=function(){return(l._Sin=l.asm.Sin).apply(null,arguments)},l._Softmax=function(){return(l._Softmax=l.asm.Softmax).apply(null,arguments)},l._SparseFillEmptyRows=function(){return(l._SparseFillEmptyRows=l.asm.SparseFillEmptyRows).apply(null,arguments)},l._SparseReshape=function(){return(l._SparseReshape=l.asm.SparseReshape).apply(null,arguments)},l._SparseSegmentReduction=function(){return(l._SparseSegmentReduction=l.asm.SparseSegmentReduction).apply(null,arguments)},l._Sqrt=function(){return(l._Sqrt=l.asm.Sqrt).apply(null,arguments)},l._Square=function(){return(l._Square=l.asm.Square).apply(null,arguments)},l._SquaredDifference=function(){return(l._SquaredDifference=l.asm.SquaredDifference).apply(null,arguments)},l._Step=function(){return(l._Step=l.asm.Step).apply(null,arguments)},l._StridedSlice=function(){return(l._StridedSlice=l.asm.StridedSlice).apply(null,arguments)},l._Sub=function(){return(l._Sub=l.asm.Sub).apply(null,arguments)},l._Sum=function(){return(l._Sum=l.asm.Sum).apply(null,arguments)},l._Tan=function(){return(l._Tan=l.asm.Tan).apply(null,arguments)},l._Tanh=function(){return(l._Tanh=l.asm.Tanh).apply(null,arguments)},l._Tile=function(){return(l._Tile=l.asm.Tile).apply(null,arguments)},l._TopK=function(){return(l._TopK=l.asm.TopK).apply(null,arguments)},l._Transform=function(){return(l._Transform=l.asm.Transform).apply(null,arguments)},l._Transpose=function(){return(l._Transpose=l.asm.Transpose).apply(null,arguments)},l.__FusedMatMul=function(){return(l.__FusedMatMul=l.asm._FusedMatMul).apply(null,arguments)},l._malloc=function(){return(Je=l._malloc=l.asm.malloc).apply(null,arguments)}),Qe=l._free=function(){return(Qe=l._free=l.asm.free).apply(null,arguments)},$e=(l._emscripten_tls_init=function(){return(l._emscripten_tls_init=l.asm.emscripten_tls_init).apply(null,arguments)},l.___errno_location=function(){return($e=l.___errno_location=l.asm.__errno_location).apply(null,arguments)}),et=l._pthread_self=function(){return(et=l._pthread_self=l.asm.pthread_self).apply(null,arguments)},tt=l._emscripten_main_thread_process_queued_calls=function(){return(tt=l._emscripten_main_thread_process_queued_calls=l.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},nt=(l.__emscripten_thread_crashed=function(){return(l.__emscripten_thread_crashed=l.asm._emscripten_thread_crashed).apply(null,arguments)},l.__emscripten_thread_init=function(){return(nt=l.__emscripten_thread_init=l.asm._emscripten_thread_init).apply(null,arguments)}),rt=(l._emscripten_current_thread_process_queued_calls=function(){return(l._emscripten_current_thread_process_queued_calls=l.asm.emscripten_current_thread_process_queued_calls).apply(null,arguments)},l._emscripten_main_browser_thread_id=function(){return(l._emscripten_main_browser_thread_id=l.asm.emscripten_main_browser_thread_id).apply(null,arguments)},l._emscripten_sync_run_in_main_thread_2=function(){return(l._emscripten_sync_run_in_main_thread_2=l.asm.emscripten_sync_run_in_main_thread_2).apply(null,arguments)},l._emscripten_sync_run_in_main_thread_4=function(){return(rt=l._emscripten_sync_run_in_main_thread_4=l.asm.emscripten_sync_run_in_main_thread_4).apply(null,arguments)}),at=l._emscripten_run_in_main_runtime_thread_js=function(){return(at=l._emscripten_run_in_main_runtime_thread_js=l.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)},it=l._emscripten_dispatch_to_thread_=function(){return(it=l._emscripten_dispatch_to_thread_=l.asm.emscripten_dispatch_to_thread_).apply(null,arguments)},ot=l.__emscripten_thread_free_data=function(){return(ot=l.__emscripten_thread_free_data=l.asm._emscripten_thread_free_data).apply(null,arguments)},st=(l.__emscripten_thread_exit=function(){return(l.__emscripten_thread_exit=l.asm._emscripten_thread_exit).apply(null,arguments)},l._memalign=function(){return(l._memalign=l.asm.memalign).apply(null,arguments)},l._emscripten_stack_set_limits=function(){return(st=l._emscripten_stack_set_limits=l.asm.emscripten_stack_set_limits).apply(null,arguments)}),ut=l.stackSave=function(){return(ut=l.stackSave=l.asm.stackSave).apply(null,arguments)},ct=l.stackRestore=function(){return(ct=l.stackRestore=l.asm.stackRestore).apply(null,arguments)},lt=l.stackAlloc=function(){return(lt=l.stackAlloc=l.asm.stackAlloc).apply(null,arguments)},dt=(l.dynCall_iijjiiii=function(){return(l.dynCall_iijjiiii=l.asm.dynCall_iijjiiii).apply(null,arguments)},l.dynCall_jiji=function(){return(l.dynCall_jiji=l.asm.dynCall_jiji).apply(null,arguments)},l.__emscripten_allow_main_runtime_queued_calls=21664);function ft(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function pt(e){if(e=e||y,!(ue>0)){if(w)return s(l),ie(),void postMessage({cmd:"loaded"});(function(){if(l.preRun)for("function"==typeof l.preRun&&(l.preRun=[l.preRun]);l.preRun.length;)oe(l.preRun.shift());ge(ee)})(),ue>0||(l.setStatus?(l.setStatus("Running..."),setTimeout((function(){setTimeout((function(){l.setStatus("")}),1),t()}),1)):t())}function t(){qe||(qe=!0,l.calledRun=!0,!L&&(ie(),s(l),l.onRuntimeInitialized&&l.onRuntimeInitialized(),function(){if(!w){if(l.postRun)for("function"==typeof l.postRun&&(l.postRun=[l.postRun]);l.postRun.length;)se(l.postRun.shift());ge(re)}}()))}}if(l.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?z(e):function(){return B(e,t,n,arguments)}},l.keepRuntimeAlive=ae,l.PThread=Ae,l.PThread=Ae,l.wasmMemory=F,l.ExitStatus=ft,le=function e(){qe||pt(),qe||(le=e)},l.run=pt,l.preInit)for("function"==typeof l.preInit&&(l.preInit=[l.preInit]);l.preInit.length>0;)l.preInit.pop()();if(pt(),c&&(Ke={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!c.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!c.unhandledRejection.indexOf(e)>-1}))}),"undefined"!=typeof WasmBackendModule)Xe=WasmBackendModule;else{if("undefined"==typeof t)throw new Error("Could not find wasm module in post.js");Xe=t}if(Ke){var ht=Xe._dispose;Xe._dispose=function(){ht(),Ke.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),Ke.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return t.ready}}();"object"==typeof e&&"object"==typeof t?t.exports=r:"function"==typeof define&&n.amdO?define([],(function(){return r})):"object"==typeof e&&(e.WasmBackendModuleThreadedSimd=r)}}),rl=Pc({"src/tfjs-backend-wasm/wasm-out/tfjs-backend-wasm.js":function(e,t){var r=function(){var e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||pc,function(t){var n,r,a,i="undefined"!=typeof(t=t||{})?t:{};i.ready=new Promise((function(e,t){n=e,r=t})),"undefined"!=typeof process&&process.listeners&&(a={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var o,s,u,c,l,d,f=Object.assign({},i),p=[],h="object"==typeof window,m="function"==typeof importScripts,v="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,g="";v?(g=m?Qc().dirname(g)+"/":"//",d=function(){l||(c=Jc(),l=Qc())},o=function(e,t){return d(),e=l.normalize(e),c.readFileSync(e,t?void 0:"utf8")},u=function(e){var t=o(e,!0);return t.buffer||(t=new Uint8Array(t)),t},s=function(e,t,n){d(),e=l.normalize(e),c.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),p=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ue))throw e})),process.on("unhandledRejection",(function(e){throw e})),function(e,t){if(B())throw process.exitCode=e,t;(function(e){e instanceof ue||b("exiting due to exception: "+e)})(t),process.exit(e)},i.inspect=function(){return"[Emscripten Module object]"}):(h||m)&&(m?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),e&&(g=e),g=0!==g.indexOf("blob:")?g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},m&&(u=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),s=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var y=i.print||console.log.bind(console),b=i.printErr||console.warn.bind(console);Object.assign(i,f),f=null,i.arguments&&(p=i.arguments),i.thisProgram&&i.thisProgram,i.quit&&i.quit;var x;i.wasmBinary&&(x=i.wasmBinary);var A=i.noExitRuntime||!0;"object"!=typeof WebAssembly&&G("no native wasm support detected");var k,w=!1;function S(e){return i["_"+e]}function I(e,t,n,r,a){var i={string:function(e){var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);(function(e,t,n){(function(e,t,n,r){if(!(r>0))return 0;for(var a=n,i=n+r-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o);if(s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}t[n]=0})(e,R,t,n)})(e,t=se(n),n)}return t},array:function(e){var t=se(e.length);return function(e,t){_.set(e,t)}(e,t),t}};var o=S(e),s=[],u=0;if(r)for(var c=0;c<r.length;c++){var l=i[n[c]];l?(0===u&&(u=ie()),s[c]=l(r[c])):s[c]=r[c]}var d=o.apply(null,s);return d=function(e){return 0!==u&&oe(u),function(e){return"string"===t?N(e):"boolean"===t?Boolean(e):e}(e)}(d),d}var E="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function C(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&E)return E.decode(e.subarray(t,a));for(var i="";t<a;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var u=63&e[t++];if((o=224==(240&o)?(15&o)<<12|s<<6|u:(7&o)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(o);else{var c=o-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&o)<<6|s)}else i+=String.fromCharCode(o)}return i}function N(e,t){return e?C(R,e,t):""}var T,_,R,M;"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");function O(e,t){return e%t>0&&(e+=t-e%t),e}function F(e){T=e,i.HEAP8=_=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAP32=M=new Int32Array(e),i.HEAPU8=R=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=new Float64Array(e)}i.INITIAL_MEMORY;var P,D=[],L=[],z=[];function B(){return A||!1}function W(e){D.unshift(e)}function j(e){z.unshift(e)}var V=0,U=null,H=null;function G(e){i.onAbort&&i.onAbort(e),b(e="Aborted("+e+")"),w=!0,1,e+=". Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw r(t),t}i.preloadedImages={},i.preloadedAudios={};var q;function K(e){return e.startsWith("data:application/octet-stream;base64,")}function X(e){return e.startsWith("file://")}function Z(e){try{if(e==q&&x)return new Uint8Array(x);if(u)return u(e);throw"both async and sync fetching of the wasm failed"}catch(t){G(t)}}function Y(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?Q(n)():Q(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(i)}}K(q="tfjs-backend-wasm.wasm")||(q=function(e){return i.locateFile?i.locateFile(e,g):g+e}(q));var J=[];function Q(e){var t=J[e];return t||(e>=J.length&&(J.length=e+1),J[e]=t=P.get(e)),t}function $(e){try{return k.grow(e-T.byteLength+65535>>>16),F(k.buffer),1}catch(t){}}var ee={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=ee.buffers[e];0===t||10===t?((1===e?y:b)(C(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return ee.varargs+=4,M[ee.varargs-4>>2]},getStr:function(e){return N(e)},get64:function(e,t){return e}};var te,ne,re,ae={abort:function(){G("")},emscripten_memcpy_big:function(e,t,n){R.copyWithin(e,t,t+n)},emscripten_resize_heap:function(e){var t=R.length,n=2147483648;if((e>>>=0)>n)return!1;for(var r=1;r<=4;r*=2){var a=t*(1+.2/r);if(a=Math.min(a,e+100663296),$(Math.min(n,O(Math.max(e,a),65536))))return!0}return!1},fd_close:function(e){return 0},fd_seek:function(e,t,n,r,a){},fd_write:function(e,t,n,r){for(var a=0,i=0;i<n;i++){var o=M[t>>2],s=M[t+4>>2];t+=8;for(var u=0;u<s;u++)ee.printChar(e,R[o+u]);a+=s}return M[r>>2]=a,0},setTempRet0:function(e){!function(e){e}(e)}},ie=(function(){var e={env:ae,wasi_snapshot_preview1:ae};function t(e,t){var n=e.exports;i.asm=n,F((k=i.asm.memory).buffer),P=i.asm.__indirect_function_table,function(e){L.unshift(e)}(i.asm.__wasm_call_ctors),function(e){if(V--,i.monitorRunDependencies&&i.monitorRunDependencies(V),0==V&&(null!==U&&(clearInterval(U),U=null),H)){var t=H;H=null,t()}}()}function n(e){t(e.instance)}function a(t){return function(){if(!x&&(h||m)){if("function"==typeof fetch&&!X(q))return fetch(q,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+q+"'";return e.arrayBuffer()})).catch((function(){return Z(q)}));if(s)return new Promise((function(e,t){s(q,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return Z(q)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){b("failed to asynchronously prepare wasm: "+e),G(e)}))}if(V++,i.monitorRunDependencies&&i.monitorRunDependencies(V),i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(o){return b("Module.instantiateWasm callback failed with error: "+o),!1}(x||"function"!=typeof WebAssembly.instantiateStreaming||K(q)||X(q)||"function"!=typeof fetch?a(n):fetch(q,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return b("wasm streaming compile failed: "+e),b("falling back to ArrayBuffer instantiation"),a(n)}))}))).catch(r)}(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.__wasm_call_ctors).apply(null,arguments)},i._init=function(){return(i._init=i.asm.init).apply(null,arguments)},i._init_with_threads_count=function(){return(i._init_with_threads_count=i.asm.init_with_threads_count).apply(null,arguments)},i._get_threads_count=function(){return(i._get_threads_count=i.asm.get_threads_count).apply(null,arguments)},i._register_tensor=function(){return(i._register_tensor=i.asm.register_tensor).apply(null,arguments)},i._dispose_data=function(){return(i._dispose_data=i.asm.dispose_data).apply(null,arguments)},i._dispose=function(){return(i._dispose=i.asm.dispose).apply(null,arguments)},i._Abs=function(){return(i._Abs=i.asm.Abs).apply(null,arguments)},i._Add=function(){return(i._Add=i.asm.Add).apply(null,arguments)},i._AddN=function(){return(i._AddN=i.asm.AddN).apply(null,arguments)},i._All=function(){return(i._All=i.asm.All).apply(null,arguments)},i._Any=function(){return(i._Any=i.asm.Any).apply(null,arguments)},i._ArgMax=function(){return(i._ArgMax=i.asm.ArgMax).apply(null,arguments)},i._AvgPool=function(){return(i._AvgPool=i.asm.AvgPool).apply(null,arguments)},i._BatchMatMul=function(){return(i._BatchMatMul=i.asm.BatchMatMul).apply(null,arguments)},i._Ceil=function(){return(i._Ceil=i.asm.Ceil).apply(null,arguments)},i._ClipByValue=function(){return(i._ClipByValue=i.asm.ClipByValue).apply(null,arguments)},i._Conv2D=function(){return(i._Conv2D=i.asm.Conv2D).apply(null,arguments)},i._Conv2DBackpropInput=function(){return(i._Conv2DBackpropInput=i.asm.Conv2DBackpropInput).apply(null,arguments)},i._Cos=function(){return(i._Cos=i.asm.Cos).apply(null,arguments)},i._Cosh=function(){return(i._Cosh=i.asm.Cosh).apply(null,arguments)},i._CropAndResize=function(){return(i._CropAndResize=i.asm.CropAndResize).apply(null,arguments)},i._Cumprod=function(){return(i._Cumprod=i.asm.Cumprod).apply(null,arguments)},i._Cumsum=function(){return(i._Cumsum=i.asm.Cumsum).apply(null,arguments)},i._DepthToSpace=function(){return(i._DepthToSpace=i.asm.DepthToSpace).apply(null,arguments)},i._DepthwiseConv2dNative=function(){return(i._DepthwiseConv2dNative=i.asm.DepthwiseConv2dNative).apply(null,arguments)},i._Elu=function(){return(i._Elu=i.asm.Elu).apply(null,arguments)},i._Equal=function(){return(i._Equal=i.asm.Equal).apply(null,arguments)},i._Exp=function(){return(i._Exp=i.asm.Exp).apply(null,arguments)},i._FlipLeftRight=function(){return(i._FlipLeftRight=i.asm.FlipLeftRight).apply(null,arguments)},i._Floor=function(){return(i._Floor=i.asm.Floor).apply(null,arguments)},i._FloorDiv=function(){return(i._FloorDiv=i.asm.FloorDiv).apply(null,arguments)},i._FusedBatchNorm=function(){return(i._FusedBatchNorm=i.asm.FusedBatchNorm).apply(null,arguments)},i._FusedConv2D=function(){return(i._FusedConv2D=i.asm.FusedConv2D).apply(null,arguments)},i._FusedDepthwiseConv2D=function(){return(i._FusedDepthwiseConv2D=i.asm.FusedDepthwiseConv2D).apply(null,arguments)},i._Gather=function(){return(i._Gather=i.asm.Gather).apply(null,arguments)},i._GatherNd=function(){return(i._GatherNd=i.asm.GatherNd).apply(null,arguments)},i._Greater=function(){return(i._Greater=i.asm.Greater).apply(null,arguments)},i._GreaterEqual=function(){return(i._GreaterEqual=i.asm.GreaterEqual).apply(null,arguments)},i._LeakyRelu=function(){return(i._LeakyRelu=i.asm.LeakyRelu).apply(null,arguments)},i._Less=function(){return(i._Less=i.asm.Less).apply(null,arguments)},i._LessEqual=function(){return(i._LessEqual=i.asm.LessEqual).apply(null,arguments)},i._Log=function(){return(i._Log=i.asm.Log).apply(null,arguments)},i._LogicalAnd=function(){return(i._LogicalAnd=i.asm.LogicalAnd).apply(null,arguments)},i._LogicalNot=function(){return(i._LogicalNot=i.asm.LogicalNot).apply(null,arguments)},i._LogicalOr=function(){return(i._LogicalOr=i.asm.LogicalOr).apply(null,arguments)},i._LogicalXor=function(){return(i._LogicalXor=i.asm.LogicalXor).apply(null,arguments)},i._Max=function(){return(i._Max=i.asm.Max).apply(null,arguments)},i._MaxPool=function(){return(i._MaxPool=i.asm.MaxPool).apply(null,arguments)},i._Maximum=function(){return(i._Maximum=i.asm.Maximum).apply(null,arguments)},i._Mean=function(){return(i._Mean=i.asm.Mean).apply(null,arguments)},i._Min=function(){return(i._Min=i.asm.Min).apply(null,arguments)},i._Minimum=function(){return(i._Minimum=i.asm.Minimum).apply(null,arguments)},i._MirrorPad=function(){return(i._MirrorPad=i.asm.MirrorPad).apply(null,arguments)},i._Multiply=function(){return(i._Multiply=i.asm.Multiply).apply(null,arguments)},i._Neg=function(){return(i._Neg=i.asm.Neg).apply(null,arguments)},i._NonMaxSuppressionV3=function(){return(i._NonMaxSuppressionV3=i.asm.NonMaxSuppressionV3).apply(null,arguments)},i._NonMaxSuppressionV4=function(){return(i._NonMaxSuppressionV4=i.asm.NonMaxSuppressionV4).apply(null,arguments)},i._NonMaxSuppressionV5=function(){return(i._NonMaxSuppressionV5=i.asm.NonMaxSuppressionV5).apply(null,arguments)},i._NotEqual=function(){return(i._NotEqual=i.asm.NotEqual).apply(null,arguments)},i._OneHot=function(){return(i._OneHot=i.asm.OneHot).apply(null,arguments)},i._PadV2=function(){return(i._PadV2=i.asm.PadV2).apply(null,arguments)},i._Pow=function(){return(i._Pow=i.asm.Pow).apply(null,arguments)},i._Prelu=function(){return(i._Prelu=i.asm.Prelu).apply(null,arguments)},i._Prod=function(){return(i._Prod=i.asm.Prod).apply(null,arguments)},i._RealDiv=function(){return(i._RealDiv=i.asm.RealDiv).apply(null,arguments)},i._Relu=function(){return(i._Relu=i.asm.Relu).apply(null,arguments)},i._Relu6=function(){return(i._Relu6=i.asm.Relu6).apply(null,arguments)},i._ResizeBilinear=function(){return(i._ResizeBilinear=i.asm.ResizeBilinear).apply(null,arguments)},i._Reverse=function(){return(i._Reverse=i.asm.Reverse).apply(null,arguments)},i._RotateWithOffset=function(){return(i._RotateWithOffset=i.asm.RotateWithOffset).apply(null,arguments)},i._Round=function(){return(i._Round=i.asm.Round).apply(null,arguments)},i._Rsqrt=function(){return(i._Rsqrt=i.asm.Rsqrt).apply(null,arguments)},i._ScatterNd=function(){return(i._ScatterNd=i.asm.ScatterNd).apply(null,arguments)},i._SelectV2=function(){return(i._SelectV2=i.asm.SelectV2).apply(null,arguments)},i._Sigmoid=function(){return(i._Sigmoid=i.asm.Sigmoid).apply(null,arguments)},i._Sin=function(){return(i._Sin=i.asm.Sin).apply(null,arguments)},i._Softmax=function(){return(i._Softmax=i.asm.Softmax).apply(null,arguments)},i._SparseFillEmptyRows=function(){return(i._SparseFillEmptyRows=i.asm.SparseFillEmptyRows).apply(null,arguments)},i._SparseReshape=function(){return(i._SparseReshape=i.asm.SparseReshape).apply(null,arguments)},i._SparseSegmentReduction=function(){return(i._SparseSegmentReduction=i.asm.SparseSegmentReduction).apply(null,arguments)},i._Sqrt=function(){return(i._Sqrt=i.asm.Sqrt).apply(null,arguments)},i._Square=function(){return(i._Square=i.asm.Square).apply(null,arguments)},i._SquaredDifference=function(){return(i._SquaredDifference=i.asm.SquaredDifference).apply(null,arguments)},i._Step=function(){return(i._Step=i.asm.Step).apply(null,arguments)},i._StridedSlice=function(){return(i._StridedSlice=i.asm.StridedSlice).apply(null,arguments)},i._Sub=function(){return(i._Sub=i.asm.Sub).apply(null,arguments)},i._Sum=function(){return(i._Sum=i.asm.Sum).apply(null,arguments)},i._Tan=function(){return(i._Tan=i.asm.Tan).apply(null,arguments)},i._Tanh=function(){return(i._Tanh=i.asm.Tanh).apply(null,arguments)},i._Tile=function(){return(i._Tile=i.asm.Tile).apply(null,arguments)},i._TopK=function(){return(i._TopK=i.asm.TopK).apply(null,arguments)},i._Transform=function(){return(i._Transform=i.asm.Transform).apply(null,arguments)},i._Transpose=function(){return(i._Transpose=i.asm.Transpose).apply(null,arguments)},i.__FusedMatMul=function(){return(i.__FusedMatMul=i.asm._FusedMatMul).apply(null,arguments)},i._malloc=function(){return(i._malloc=i.asm.malloc).apply(null,arguments)},i._free=function(){return(i._free=i.asm.free).apply(null,arguments)},i.___errno_location=function(){return(i.___errno_location=i.asm.__errno_location).apply(null,arguments)},i._emscripten_main_thread_process_queued_calls=function(){return(i._emscripten_main_thread_process_queued_calls=i.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},i.stackSave=function(){return(ie=i.stackSave=i.asm.stackSave).apply(null,arguments)}),oe=i.stackRestore=function(){return(oe=i.stackRestore=i.asm.stackRestore).apply(null,arguments)},se=i.stackAlloc=function(){return(se=i.stackAlloc=i.asm.stackAlloc).apply(null,arguments)};i.dynCall_iijjiiii=function(){return(i.dynCall_iijjiiii=i.asm.dynCall_iijjiiii).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.dynCall_jiji).apply(null,arguments)};function ue(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ce(e){function t(){te||(te=!0,i.calledRun=!0,!w&&(!0,Y(L),n(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),function(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)j(i.postRun.shift());Y(z)}()))}e=e||p,V>0||(function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)W(i.preRun.shift());Y(D)}(),V>0)||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),t()}),1)):t())}if(i.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?S(e):function(){return I(e,t,n,arguments)}},H=function e(){te||ce(),te||(H=e)},i.run=ce,i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();if(ce(),a&&(ne={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!a.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!a.unhandledRejection.indexOf(e)>-1}))}),"undefined"!=typeof t)re=t;else{if("undefined"==typeof WasmBackendModuleThreadedSimd)throw new Error("Could not find wasm module in post.js");re=WasmBackendModuleThreadedSimd}if(ne){var le=re._dispose;re._dispose=function(){le(),ne.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),ne.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return t.ready}}();"object"==typeof e&&"object"==typeof t?t.exports=r:"function"==typeof define&&n.amdO?define([],(function(){return r})):"object"==typeof e&&(e.WasmBackendModule=r)}}),al=function(){function e(t,n){Ye(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return Qe(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),il=function(){function e(){Ye(this,e)}return Qe(e,[{key:"refCount",value:function(e){return ol("refCount")}},{key:"incRef",value:function(e){return ol("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return ol("time")}},{key:"read",value:function(e){return ol("read")}},{key:"readSync",value:function(e){return ol("readSync")}},{key:"readToGPU",value:function(e,t){return ol("readToGPU")}},{key:"numDataIds",value:function(){return ol("numDataIds")}},{key:"disposeData",value:function(e,t){return ol("disposeData")}},{key:"write",value:function(e,t,n){return ol("write")}},{key:"move",value:function(e,t,n,r,a){return ol("move")}},{key:"memory",value:function(){return ol("memory")}},{key:"floatPrecision",value:function(){return ol("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return ol("dispose")}}]),e}();function ol(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen"))}function sl(e){for(var t=e.length,n=0;t>0;)n=Math.random()*t|0,dl(e,--t,n)}function ul(e,t){if(e.length!==t.length)throw new Error("Array sizes must match to be shuffled together First array length was ".concat(e.length,"Second array length was ").concat(t.length));for(var n=e.length,r=0;n>0;)r=Math.random()*n|0,dl(e,--n,r),dl(t,n,r)}function cl(e,t,n){return Math.max(e,Math.min(t,n))}function ll(e){return e%2===0?e:e+1}function dl(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function fl(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function pl(e,t){var n=Math.random();return t*n+(1-n)*e}function hl(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n}function ml(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function vl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";ml(Al(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function gl(e){ml(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function yl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||Dl(e)&&!n)for(var r=0;r<e.length;++r)yl(e[r],t,n);else t.push(e);return t}function bl(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function xl(e){return 0===e.length}function Al(e,t){if(e===t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function kl(e){return e%1===0}function wl(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function Sl(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Il(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return sl(t),t}function El(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Cl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var i=0;!function o(){if(e())r();else{i++;var s=t(i);null!=n&&i>=n?a():setTimeout(o,s)}}()}))}function Nl(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when there are 0 elements"));if(t%n!==0)throw Error("The implicit shape can't be a fractional number. Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function Tl(e,t){var n=t.length;return e=null==e?t.map((function(e,t){return t})):[].concat(e),ml(e.every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but got axis ").concat(e)})),ml(e.every((function(e){return kl(e)})),(function(){return"All values in axis param must be integers but got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function _l(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:Tl(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function Rl(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function Ml(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function Ol(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}function Fl(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function Pl(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function Dl(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function Ll(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function zl(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function Bl(e){return"string"==typeof e||e instanceof String}function Wl(e){return"boolean"==typeof e}function jl(e){return"number"==typeof e}function Vl(e){return Array.isArray(e)?Vl(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":jl(e)?"float32":Bl(e)?"string":Wl(e)?"bool":"float32"}function Ul(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Hl(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function Gl(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function ql(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var s=t[0],u=t.slice(1),c=u.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<s;l++)a[l]=ql(e+l*c,u,n,r);return a}function Kl(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return ql(0,e,t,n)}function Xl(e,t){for(var n=Zl(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Zl(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function Yl(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return Kl(e,new Float32Array(n));if("int32"===t)return Kl(e,new Int32Array(n));if("bool"===t)return Kl(e,new Uint8Array(n));throw new Error("Unknown data type ".concat(t))}function Jl(e){e.forEach((function(t){ml(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape [".concat(e,"].")}))}))}function Ql(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function $l(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function ed(e){return e&&e.then&&"function"==typeof e.then}var td="tfjsflags",nd=function(){function e(t){Ye(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=rd,this.populateURLFlags()}return Qe(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(id().getBool("IS_TEST")||id().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. Overwriting the platform with ").concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];id().getBool("IS_TEST")||id().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=4;break}e.t0=this.flags[t],e.next=8;break;case 4:return e.next=6,this.evaluateFlag(t);case 6:this.flags[t]=e.sent,e.t0=this.flags[t];case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(ed(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. Please use getAsync() instead."));return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!=typeof this.global&&"undefined"!=typeof this.global.location&&"undefined"!=typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);td in t&&t[td].split(",").forEach((function(t){var n=u(t.split(":"),2),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(r,a)}))}}}]),e}();function rd(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return ad(t,r[0],r[1]),r.join("=")})),t}function ad(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function id(){return sd}var od,sd=null;function ud(){if(null==od){var e;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}od=e}return od}function cd(e,t){var n=function(){var e=ud();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var ld="Abs",dd="Acos",fd="Acosh",pd="Add",hd="AddN",md="All",vd="Any",gd="ArgMax",yd="ArgMin",bd="Asin",xd="Asinh",Ad="Atan",kd="Atanh",wd="Atan2",Sd="AvgPool",Id="AvgPoolGrad",Ed="AvgPool3D",Cd="AvgPool3DGrad",Nd="BatchMatMul",Td="BatchToSpaceND",_d="Bincount",Rd="BroadcastTo",Md="BroadcastArgs",Od="Cast",Fd="Ceil",Pd="ClipByValue",Dd="Complex",Ld="ComplexAbs",zd="Concat",Bd="Conv2D",Wd="Conv2DBackpropFilter",jd="Conv2DBackpropInput",Vd="Conv3D",Ud="Conv3DBackpropFilterV2",Hd="Conv3DBackpropInputV2",Gd="Cos",qd="Cosh",Kd="Cumprod",Xd="Cumsum",Zd="CropAndResize",Yd="DenseBincount",Jd="DepthToSpace",Qd="DepthwiseConv2dNative",$d="DepthwiseConv2dNativeBackpropFilter",ef="DepthwiseConv2dNativeBackpropInput",tf="Diag",nf="Dilation2D",rf="Dilation2DBackpropInput",af="Dilation2DBackpropFilter",of="RealDiv",sf="Einsum",uf="Elu",cf="EluGrad",lf="Erf",df="Equal",ff="Exp",pf="ExpandDims",hf="Expm1",mf="FFT",vf="Fill",gf="FlipLeftRight",yf="Floor",bf="FloorDiv",xf="FusedBatchNorm",Af="GatherV2",kf="GatherNd",wf="Greater",Sf="GreaterEqual",If="Identity",Ef="IFFT",Cf="Imag",Nf="IsFinite",Tf="IsInf",_f="IsNan",Rf="LeakyRelu",Mf="Less",Of="LessEqual",Ff="LinSpace",Pf="Log",Df="Log1p",Lf="LogicalAnd",zf="LogicalNot",Bf="LogicalOr",Wf="LogicalXor",jf="LogSoftmax",Vf="LowerBound",Uf="LRN",Hf="LRNGrad",Gf="Max",qf="Maximum",Kf="MaxPool",Xf="MaxPoolGrad",Zf="MaxPool3D",Yf="MaxPool3DGrad",Jf="MaxPoolWithArgmax",Qf="Mean",$f="Min",ep="Minimum",tp="MirrorPad",np="Mod",rp="Multinomial",ap="Multiply",ip="Neg",op="NotEqual",sp="NonMaxSuppressionV3",up="NonMaxSuppressionV4",cp="NonMaxSuppressionV5",lp="OnesLike",dp="OneHot",fp="Pack",pp="PadV2",hp="Pool",mp="Pow",vp="Prelu",gp="Prod",yp="Range",bp="Real",xp="Reciprocal",Ap="Relu",kp="Reshape",wp="ResizeNearestNeighbor",Sp="ResizeNearestNeighborGrad",Ip="ResizeBilinear",Ep="ResizeBilinearGrad",Cp="Relu6",Np="Reverse",Tp="Round",_p="Rsqrt",Rp="ScatterNd",Mp="SearchSorted",Op="Select",Fp="Selu",Pp="Slice",Dp="Sin",Lp="Sinh",zp="Sign",Bp="Sigmoid",Wp="Softplus",jp="Sqrt",Vp="Sum",Up="SpaceToBatchND",Hp="SplitV",Gp="Softmax",qp="SparseFillEmptyRows",Kp="SparseReshape",Xp="SparseSegmentMean",Zp="SparseSegmentSum",Yp="SparseToDense",Jp="SquaredDifference",Qp="Square",$p="StridedSlice",eh="StringNGrams",th="StringSplit",nh="StringToHashBucketFast",rh="Sub",ah="Tan",ih="Tanh",oh="Tile",sh="TopK",uh="Transform",ch="Transpose",lh="Unique",dh="Unpack",fh="UnsortedSegmentSum",ph="UpperBound",hh="ZerosLike",mh="Step",vh="FromPixels",gh="RotateWithOffset",yh="_FusedMatMul",bh="FusedConv2D",xh="FusedDepthwiseConv2D";function Ah(){var e;id().getBool("IS_TEST")||id().getBool("PROD")||(e=console).warn.apply(e,arguments)}function kh(){var e;id().getBool("IS_TEST")||id().getBool("PROD")||(e=console).log.apply(e,arguments)}var wh=cd("kernelRegistry",(function(){return new Map})),Sh=cd("gradRegistry",(function(){return new Map}));function Ih(e,t){var n=Oh(e,t);return wh.get(n)}function Eh(e){return Sh.get(e)}function Ch(e){for(var t=wh.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=u(i,2),s=o[0],c=o[1];u(s.split("_"),1)[0]===e&&n.push(c)}return n}function Nh(e){var t=e.kernelName,n=e.backendName,r=Oh(t,n);wh.has(r)&&Ah("The kernel '".concat(t,"' for backend '").concat(n,"' is already registered")),wh.set(r,e)}function Th(e){var t=e.kernelName;Sh.has(t)&&id().getBool("DEBUG")&&Ah("Overriding the gradient for '".concat(t,"'")),Sh.set(t,e)}function _h(e,t){var n=Oh(e,t);if(!wh.has(n))throw new Error("The kernel '".concat(e,"' for backend '").concat(t,"' is not registered"));wh.delete(n)}function Rh(e){if(!Sh.has(e))throw new Error("The gradient '".concat(e,"' for backend is not registered"));Sh.delete(e)}function Mh(e,t){Ch(e).forEach((function(e){Nh(Object.assign({},e,{backendName:t}))}))}function Oh(e,t){return"".concat(t,"_").concat(e)}var Fh={};Dc(Fh,{arraysEqual:function(){return Al},assert:function(){return ml},assertNonNegativeIntegerDimensions:function(){return Jl},assertNonNull:function(){return gl},assertShapesMatch:function(){return vl},bytesFromStringArray:function(){return zl},bytesPerElement:function(){return Ll},checkConversionForErrors:function(){return Ol},clamp:function(){return cl},computeStrides:function(){return Gl},createScalarValue:function(){return Qh},createShuffledIndices:function(){return Il},decodeString:function(){return rm},distSquared:function(){return hl},encodeString:function(){return nm},fetch:function(){return tm},fingerPrint64:function(){return Jh},flatten:function(){return yl},getArrayFromDType:function(){return Ml},getTypedArrayFromDType:function(){return Rl},hasEncodingLoss:function(){return Pl},hexToLong:function(){return Lh},indexToLoc:function(){return $l},inferDtype:function(){return Vl},inferFromImplicitShape:function(){return Nl},isBoolean:function(){return Wl},isFunction:function(){return Ul},isInt:function(){return kl},isNumber:function(){return jl},isPromise:function(){return ed},isScalarShape:function(){return xl},isString:function(){return Bl},isTypedArray:function(){return Dl},isValidDtype:function(){return Fl},locToIndex:function(){return Ql},makeOnesTypedArray:function(){return Xl},makeZerosNestedTypedArray:function(){return Yl},makeZerosTypedArray:function(){return Zl},nearestDivisor:function(){return Hl},nearestLargerEven:function(){return ll},now:function(){return em},parseAxisParam:function(){return Tl},randUniform:function(){return pl},repeatedTry:function(){return Cl},rightPad:function(){return El},shuffle:function(){return sl},shuffleCombo:function(){return ul},sizeFromShape:function(){return bl},sizeToSquarishShape:function(){return Sl},squeezeShape:function(){return _l},sum:function(){return fl},swap:function(){return dl},tanh:function(){return wl},toNestedArray:function(){return Kl},toTypedArray:function(){return $h}});var Ph=Lc(zc()),Dh=Ph.default||Ph;function Lh(e){return Dh.fromString(e,!0,16)}var zh=Lh("c3a5c85c97cb3127"),Bh=Lh("b492b66fbe98f273"),Wh=Lh("9ae16a3b2f90404f");function jh(e){return e.xor(e.shru(47))}function Vh(e,t,n){var r=e.slice(t,t+n);return Dh.fromBytes(Array.from(r),!0,!0)}function Uh(e,t){return Vh(e,t,8)}function Hh(e,t){return Vh(e,t,4)}function Gh(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function qh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lh("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function Kh(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=Gh(i.add(a).add(r),21);var o=a;return a=(a=a.add(t)).add(n),i=i.add(Gh(a,44)),[a.add(r),i.add(o)]}(Uh(e,t),Uh(e,t+8),Uh(e,t+16),Uh(e,t+24),n,r)}function Xh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=Wh.add(2*t),r=Uh(e,0).add(Wh),a=Uh(e,t-8),i=Gh(a,37).mul(n).add(r),o=Gh(r,25).add(a).mul(n);return qh(i,o,n)}if(t>=4){var s=Wh.add(2*t),u=Hh(e,0);return qh(u.shl(3).add(t),Hh(e,t-4),s)}if(t>0){var c=e[0],l=e[t>>1],d=e[t-1],f=c+(l<<8),p=t+(d<<2);return jh(Wh.mul(f).xor(zh.mul(p))).mul(Wh)}return Wh}function Zh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Wh.add(2*t),r=Uh(e,0).mul(Bh),a=Uh(e,8),i=Uh(e,t-8).mul(n),o=Uh(e,t-16).mul(Wh);return qh(Gh(r.add(a),43).add(Gh(i,30)).add(o),r.add(Gh(a.add(Wh),18)).add(i),n)}function Yh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=Wh.add(2*t),r=Uh(e,0).mul(Wh),a=Uh(e,8),i=Uh(e,t-8).mul(n),o=Uh(e,t-16).mul(Wh),s=Gh(r.add(a),43).add(Gh(i,30)).add(o),u=qh(s,r.add(Gh(a.add(Wh),18)).add(i),n),c=Uh(e,16).mul(n),l=Uh(e,24),d=s.add(Uh(e,t-32)).mul(n),f=u.add(Uh(e,t-24)).mul(n);return qh(Gh(c.add(l),43).add(Gh(d,30)).add(f),c.add(Gh(l.add(r),18)).add(d),n)}function Jh(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,r=Dh.fromNumber(81,!0);if(n<=32)return n<=16?Xh(e,n):Zh(e,n);if(n<=64)return Yh(e,n);var a=r,i=r.mul(Bh).add(113),o=jh(i.mul(Wh).add(113)).mul(Wh),s=[Dh.UZERO,Dh.UZERO],u=[Dh.UZERO,Dh.UZERO];a=a.mul(Wh).add(Uh(e,0));var c=0,l=64*(n-1>>6),d=l+(n-1&63)-63;do{var f;a=Gh(a.add(i).add(s[0]).add(Uh(e,c+8)),37).mul(Bh),i=Gh(i.add(s[1]).add(Uh(e,c+48)),42).mul(Bh),a=a.xor(u[1]),i=i.add(s[0]).add(Uh(e,c+40)),o=Gh(o.add(u[0]),33).mul(Bh),s=Kh(e,c,s[1].mul(Bh),a.add(u[0])),u=Kh(e,c+32,o.add(u[1]),i.add(Uh(e,c+16))),o=(f=[a,o])[0],a=f[1],c+=64}while(c!==l);var p=Bh.add(o.and(255).shl(1));return c=d,u[0]=u[0].add(n-1&63),s[0]=s[0].add(u[0]),u[0]=u[0].add(s[0]),a=Gh(a.add(i).add(s[0]).add(Uh(e,c+8)),37).mul(p),i=Gh(i.add(s[1]).add(Uh(e,c+48)),42).mul(p),a=a.xor(u[1].mul(9)),i=i.add(s[0].mul(9).add(Uh(e,c+40))),o=Gh(o.add(u[0]),33).mul(p),s=Kh(e,c,s[1].mul(p),a.add(u[0])),u=Kh(e,c+32,o.add(u[1]),i.add(Uh(e,c+16))),o=(t=[a,o])[0],a=t[1],qh(qh(s[0],u[0],p).add(jh(i).mul(zh)).add(o),qh(s[1],u[1],p).add(a),p)}function Qh(e,t){return"string"===t?nm(e):$h([e],t)}function $h(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=yl(e)),id().getBool("DEBUG")&&Ol(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function em(){return id().platform.now()}function tm(e,t){return id().platform.fetch(e,t)}function nm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",id().platform.encode(e,t)}function rm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",id().platform.decode(e,t)}var am=function(){function e(t,n){Ye(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new im)}return Qe(e,[{key:"profileKernel",value:function(e,t,n){var r,a,i=function(){r=n()},o=em();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();var s,u=lc(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(d){u.e(d)}finally{u.f()}a=Promise.resolve({kernelMs:em()-o})}if(id().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var c=function(t){var n=r[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},l=0;l<r.length;l++)c(l);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var im=function(){function e(){Ye(this,e)}return Qe(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"==typeof r?El("".concat(r,"ms"),9):r.error,s=El(e,25),u=t.rank,c=t.size,l=El(t.shape.toString(),14),d="";for(var f in a){var p=a[f];if(null!=p){var h=p.shape||t.shape,m=h.length;d+="".concat(f,": ").concat(m,"D ").concat(m>0?h:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(d,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function om(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var c in u){for(var l=u[c],d=!1,f=0;f<t.length;f++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),d=!0,a[s.id]=!0;break}if(d)break}}var p={};p[n.id]=!0;for(var h={},m=e.length-1;m>=0;m--)for(var v=e[m],g=v.inputs,y=0;y<v.outputs.length;y++)if(p[v.outputs[y].id]){for(var b in g)p[g[b].id]=!0,h[v.id]=!0;break}for(var x=[],A=0;A<e.length;A++){var k=e[A];if(a[k.id]&&h[k.id]){var w={};for(var S in k.inputs){var I=k.inputs[S];r[I.id]&&(w[S]=I)}var E=Object.assign({},k);E.inputs=w,E.outputs=k.outputs,x.push(E)}}return x}function sm(e,t,n,r){for(var a=function(a){var i=t[a],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found for ".concat(i.kernelName,"."));var s=i.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". Available gradients found: ").concat(Object.keys(s),"."));var a=n((function(){return s[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ").concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var o=i.inputs[t];if(!Al(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input '").concat(t,"' has shape '").concat(a.shape,"', which does not match the shape of the input '").concat(o.shape,"'"));if(null==e[o.id])e[o.id]=a;else{var u=e[o.id];e[o.id]=r(u,a),u.dispose()}};for(var c in i.inputs)u(c)},i=t.length-1;i>=0;i--)a(i)}function um(e,t,n,r){var a=Gl(t),i=function(e,t,n,r){var a=bl(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?fm(e):e;if(s>1)for(var c=0;c<a/i;c++)for(var l=c*i,d=0;d<i;d++)o[d]=Math.max(o[d],cm(u[l+d],0,n).length);return o}(e,t,n,a),o=t.length,s=dm(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function cm(e,t,n){return El(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ").concat(parseFloat(e[1].toFixed(7)),"j"):Bl(e)?"'".concat(e,"'"):"bool"===n?lm(e):parseFloat(e.toFixed(7)).toString(),t)}function lm(e){return 0===e?"false":"true"}function dm(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u){if("complex64"===n){var c=fm(e);return[cm(c[0],0,n)]}return"bool"===n?[lm(e[0])]:[e[0].toString()]}if(1===u){if(s>20){var l=3*o,d=Array.from(e.slice(0,l)),f=Array.from(e.slice((s-3)*o,s*o));return"complex64"===n&&(d=fm(d),f=fm(f)),["["+d.map((function(e,t){return cm(e,a[t],n)})).join(", ")+", ..., "+f.map((function(e,t){return cm(e,a[s-3+t],n)})).join(", ")+"]"]}var p="complex64"===n?fm(e):Array.from(e);return["["+p.map((function(e,t){return cm(e,a[t],n)})).join(", ")+"]"]}var h=t.slice(1),m=r.slice(1),v=r[0]*o,g=[];if(s>20){for(var y=0;y<3;y++){var b=y*v,x=b+v;g.push.apply(g,Tn(dm(e.slice(b,x),h,n,m,a,!1)))}g.push("...");for(var A=s-3;A<s;A++){var k=A*v,w=k+v;g.push.apply(g,Tn(dm(e.slice(k,w),h,n,m,a,A===s-1)))}}else for(var S=0;S<s;S++){var I=S*v,E=I+v;g.push.apply(g,Tn(dm(e.slice(I,E),h,n,m,a,S===s-1)))}var C=2===u?",":"";g[0]="["+g[0]+C;for(var N=1;N<g.length-1;N++)g[N]=" "+g[N]+C;for(var T=",\n",_=2;_<u;_++)T+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(i?"":T),g}function fm(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var pm=function(){function e(t,n,r){var a=this;if(Ye(this,e),this.dtype=n,this.shape=t.slice(),this.size=bl(t),null!=r){var i=r.length;ml(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size inferred by the shape '").concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Ml(n,this.size),this.strides=Gl(t)}return Qe(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),ml(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must match the rank (").concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,".   Buffer shape=").concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return hm().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),hm=null,mm=null;var vm=function(){function e(t,n,r,a){Ye(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=bl(t),this.strides=Gl(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return Qe(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=ct(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",mm.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return mm.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=ct(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Kl(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return Kl(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=ct(st().mark((function e(){var t,n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=hm().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return rm(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),hm().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=hm().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return rm(e)}))}catch(Co){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=ct(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,hm().read(this.dataId);case 3:return t=e.sent,e.abrupt("return","string"===this.dtype?t:new Uint8Array(t.buffer));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(hm().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return mm.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),mm.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return um(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),mm.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),hm().makeVariable(this,e,t,n)}}]),e}();Object.defineProperty(vm,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),cd("Tensor",(function(){return vm}));var gm=function(e){et(n,e);var t=ot(n);function n(e,r,a,i){var o;return Ye(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return Qe(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and previous value (").concat(this.dtype,") must match"));if(!Al(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and previous value (").concat(this.shape,") must match"));hm().disposeTensor(this),this.dataId=e.dataId,hm().incRef(this,null)}},{key:"dispose",value:function(){hm().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(vm);Object.defineProperty(gm,Symbol.hasInstance,{value:function(e){return e instanceof vm&&null!=e.assign&&e.assign instanceof Function}});var ym={};Dc(ym,{assertTypesMatch:function(){return Nm},getTensorsInContainer:function(){return _m},isTensorInList:function(){return Tm},makeTypesMatch:function(){return Cm}});var bm=function(e){return e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6",e}(bm||{}),xm=function(e){return e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64",e}(xm||{}),Am=function(e){return e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64",e}(Am||{}),km=function(e){return e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64",e}(km||{}),wm=function(e){return e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64",e}(wm||{}),Sm={float32:km,int32:xm,bool:Am,complex64:wm};function Im(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return Sm[e][t]}function Em(e){return Im(e,"int32")}function Cm(e,t){if(e.dtype===t.dtype)return[e,t];var n=Im(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Nm(e,t){ml(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and second(").concat(t.dtype,") input must match")}))}function Tm(e,t){return t.some((function(t){return t.id===e.id}))}function _m(e){var t=[];return Rm(e,t,new Set),t}function Rm(e,t,n){if(null!=e)if(e instanceof vm)t.push(e);else if(function(e){return Array.isArray(e)||"object"==typeof e}(e)){var r=e;for(var a in r){var i=r[a];n.has(i)||(n.add(i),Rm(i,t,n))}}}function Mm(e){return null!=e.kernelName}var Om=function(){function e(){Ye(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return Qe(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),Fm=function(){function e(t){Ye(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Om}return Qe(e,[{key:"ready",value:function(){var e=ct(st().mark((function e(){var t,n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=17;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=14;break}return e.next=13,this.setBackend(r);case 13:return e.abrupt("return");case 14:n++,e.next=6;break;case 17:throw new Error("Could not initialize any backends, all backend initializations failed.");case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods"));this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(Ah("".concat(e," backend was already registered. Reusing existing backend factory.")),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=ct(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=14;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=11;break}return e.next=8,r;case 8:e.t0=e.sent,e.next=12;break;case 11:e.t0=r;case 12:if(e.t0){e.next=14;break}return e.abrupt("return",!1);case 14:return e.abrupt("return",(this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new am(this.backendInstance),!0));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;Ch(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;Ch(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof il||"function"!=typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,Ah("Initialization of backend ".concat(e," failed")),Ah(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(r){return Ah("Initialization of backend ".concat(e," failed")),Ah(r.stack||r.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(r){throw t(),r}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=zm.runKernel(If,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return zm.runKernel(Od,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,null==Ih(e,this.backendName))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak (").concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r=this,a=[],i=this.isTapeOn(),o=this.state.numBytes,s=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var u,c=Mm(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(Mm(e)){var l=e.kernelName,d=e.inputs,f=e.attrs;null==this.backendName&&this.backend;var p=Ih(l,this.backendName);ml(null!=p,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(r.backendName,"'")})),n=function(){var e=r.backend.numDataIds();u=p.kernelFunc({inputs:d,attrs:f,backend:r.backend});var t=Array.isArray(u)?u:[u];r.shouldCheckForMemLeaks()&&r.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){return null!=e.rank?e:r.makeTensorFromTensorInfo(e)}));if(i){var o=r.getTensorsForGradient(l,d,n);a=r.saveTensorsForBackwardMode(o)}return n}}else{var h=e.forwardFunc,m=function(e){!i||(a=e.map((function(e){return r.keep(r.clone(e))})))};n=function(){var e=r.backend.numDataIds();u=r.tidy((function(){return h(r.backend,m)}));var t=Array.isArray(u)?u:[u];return r.shouldCheckForMemLeaks()&&r.checkKernelForMemLeak(c,e,t),t}}var v,g=e.inputs,y=e.attrs,b=Mm(e)?null:e.backwardsFunc;return this.scopedRun((function(){return r.state.kernelDepth++}),(function(){return r.state.kernelDepth--}),(function(){r.ENV.getBool("DEBUG")||r.state.profiling?(v=r.profiler.profileKernel(c,g,(function(){return n()})),r.ENV.getBool("DEBUG")&&r.profiler.logKernelProfile(v),t=v.outputs):t=n()})),i&&this.addTapeNode(c,g,t,b,a,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-s,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(g).map((function(e){return null!=g[e]?g[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:v.timeMs,extraInfo:v.extraInfo}),Array.isArray(u)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=Eh(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(ml(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&Bl(e[0])&&(a=e.map((function(e){return nm(e)})));var i=r.write(a,t,n),o=new vm(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=zl(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}},{key:"makeTensorFromTensorInfo",value:function(e,t){var n=e.dataId,r=e.shape,a=e.dtype,i=new vm(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new gm(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*Ll(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof gm||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*Ll(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=ct(st().mark((function e(t){var n,r,a,i,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=5,t();case 5:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,Tn(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=lc(this.state.activeProfile.kernels),e.prev=11,a.s();case 13:if((i=a.n()).done){e.next=23;break}return o=i.value,e.next=17,o.kernelTimeMs;case 17:return o.kernelTimeMs=e.sent,e.next=20,o.extraInfo;case 20:o.extraInfo=e.sent;case 21:e.next=13;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(11),a.e(e.t0);case 28:return e.prev=28,a.f(),e.finish(28);case 31:return e.abrupt("return",this.state.activeProfile);case 32:case"end":return e.stop()}}),e,this,[[11,25,28,31]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=Eh(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=Zl(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=_m(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];!i.kept&&!r.has(i.id)&&i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){!e.kept&&e.scopeId===o.id&&t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(ml(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));ml(i instanceof vm,(function(){return"The result y returned by f() must be a tensor."}));var o=om(this.state.activeTape,t,i);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?Dm(i.shape):n,sm(e,o,(function(e){return r.tidy(e)}),Bm);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=lc(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:i,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return ml(Ul(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];ml(r.every((function(e){return e instanceof vm})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i,o={};r.forEach((function(e,t){o[t]=e}));var s=function(t,n){return ml((i=e.apply(void 0,r.concat([n]))).value instanceof vm,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),ml(Ul(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},u=function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];ml(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),ml(a.every((function(e){return e instanceof vm})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o};return t.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=ct(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=em(),e.next=3,this.backend.time(t);case 3:return r=e.sent,e.abrupt("return",(r.wallMs=em()-n,r));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Om,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}(),Pm=Fm;function Dm(e){var t=Xl(bl(e),"float32");return zm.makeTensor(t,e,"float32")}function Lm(){var e=ud();if(null==e._tfengine){var t=new nd(e);e._tfengine=new Pm(t)}return function(e){sd=e}(e._tfengine.ENV),function(e){hm=e}((function(){return e._tfengine})),e._tfengine}Pm.nextTensorId=0,Pm.nextVariableId=0;var zm=Lm();function Bm(e,t){var n={a:e,b:t};return zm.runKernel(pd,n)}var Wm,jm={};function Vm(e){Wm=e}function Um(e){if(void 0!==Wm)return Wm;if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!=typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function Hm(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}Dc(jm,{isBrowser:function(){return Hm},isMobile:function(){return Um},mockIsMobile:function(){return Vm}});var Gm=id();function qm(e,t){var n=e;if(Dl(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||Dl(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&id().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Km(e,r,[]),r}function Km(e,t,n){if(n=n||[],Array.isArray(e)||Dl(e)){ml(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, but is an array of ").concat(e.length," elements")})),ml(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," elements, but has ").concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)Km(e[a],r,n.concat(a))}else ml(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, but should be an array/TypedArray of ").concat(t[0]," elements")}))}function Xm(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must be ").concat(e," tensor, but got ").concat(t," tensor"))}}function Zm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof vm)return Xm(r,e.dtype,t,n),e;var a=Vl(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Xm(r,a,t,n),null==e||!Dl(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a Tensor or TensorLike, but got '").concat(i,"'"))}var o=qm(e,a);!Dl(e)&&!Array.isArray(e)&&(e=[e]);var s="string"!==a?$h(e,a):yl(e,[],!0);return zm.makeTensor(s,o,a)}function Ym(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a `Tensor[]` or `TensorLike[]`"));return e.map((function(e,a){return Zm(e,"".concat(t,"[").concat(a,"]"),n,r)}))}Gm.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Gm.registerFlag("IS_BROWSER",(function(){return Hm()})),Gm.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&"undefined"!=typeof process.versions&&"undefined"!=typeof process.versions.node})),Gm.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),Gm.registerFlag("PROD",(function(){return!1})),Gm.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return Gm.getBool("DEBUG")})),Gm.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),Gm.registerFlag("IS_TEST",(function(){return!1})),Gm.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),Gm.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),Gm.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1})),Gm.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY",(function(){return!1}));var Jm="__op";function Qm(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with ".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=Jm;var a=function(){zm.startScope(n);try{var e=r.apply(void 0,arguments);return ed(e)&&console.error("Cannot return a Promise inside of tidy."),zm.endScope(e),e}catch(e){throw zm.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var $m=Qm({complex_:function(e,t){var n=Zm(e,"real","complex"),r=Zm(t,"imag","complex");vl(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", must match in call to tf.complex()."));var a={real:n,imag:r};return zm.runKernel(Dd,a)}});function ev(e,t,n,r){if(null==r&&(r=Vl(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Dl(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Jl(t);var a=bl(t),i=bl(n);ml(a===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ").concat(a," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==bl(t.slice(o));ml(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape (".concat(n,") does not match the provided shape (").concat(t,"). ")}))}}return!Dl(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e="string"!==r?$h(e,r):yl(e,[],!0),zm.makeTensor(e,t,r)}function tv(e,t,n){return ev(e,t,qm(e,n),n)}var nv={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};function rv(e,t){return av.apply(this,arguments)}function av(){return av=ct(st().mark((function e(t,n){var r,a,i,o,s,u;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=[],i=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),o=function(e){var o=i[e],s=Array.isArray(t)?t[e].tensor:t[o];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '".concat(o,"': ").concat(s.dtype));var u={name:o,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){var c=new Promise(function(){var e=ct(st().mark((function e(t){var n,r,a,i,o,u,c;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+4*n.length,a=new Uint8Array(r),i=0,o=0;o<n.length;o++)u=n[o],c=new Uint8Array(new Uint32Array([u.length]).buffer),a.set(c,i),i+=4,a.set(u,i),i+=u.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.push(c)}else a.push(s.data());null!=n&&(u.group=n),r.push(u)},s=0;s<i.length;++s)o(s);return e.next=5,Promise.all(a);case 5:return u=e.sent,e.abrupt("return",{data:ov(u),specs:r});case 7:case"end":return e.stop()}}),e)}))),av.apply(this,arguments)}function iv(e,t){var n,r,a={},i=0,o=lc(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.name,c=s.dtype,l=s.shape,d=bl(l),f=void 0;if("quantization"in s){var p=s.quantization;if("uint8"===p.dtype||"uint16"===p.dtype){if(!("min"in p)||!("scale"in p))throw new Error("Weight ".concat(s.name," with quantization ").concat(p.dtype," doesn't have corresponding metadata min and scale."))}else{if("float16"!==p.dtype)throw new Error("Weight ".concat(s.name," has unknown quantization dtype ").concat(p.dtype,". Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'."));if("float32"!==c)throw new Error("Weight ".concat(s.name," is quantized with ").concat(p.dtype," which only supports weights of type float32 not ").concat(c,"."))}var h=nv[p.dtype],m=e.slice(i,i+d*h),v="uint8"===p.dtype?new Uint8Array(m):new Uint16Array(m);if("float32"===c)if("uint8"===p.dtype||"uint16"===p.dtype){f=new Float32Array(v.length);for(var g=0;g<v.length;g++){var y=v[g];f[g]=y*p.scale+p.min}}else{if("float16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," for weight type float32."));void 0===n&&(n=gv()),f=n(v)}else{if("int32"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));if("uint8"!==p.dtype&&"uint16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," for weight type int32."));f=new Int32Array(v.length);for(var b=0;b<v.length;b++){var x=v[b];f[b]=Math.round(x*p.scale+p.min)}}i+=d*h}else if("string"===c){var A=bl(s.shape);f=[];for(var k=0;k<A;k++){var w=new Uint32Array(e.slice(i,i+4))[0];i+=4;var S=new Uint8Array(e.slice(i,i+w));f.push(S),i+=w}}else{var I=nv[c],E=e.slice(i,i+d*I);if("float32"===c)f=new Float32Array(E);else if("int32"===c)f=new Int32Array(E);else if("bool"===c)f=new Uint8Array(E);else{if("complex64"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));f=new Float32Array(E);for(var C=new Float32Array(f.length/2),N=new Float32Array(f.length/2),T=0;T<C.length;T++)C[T]=f[2*T],N[T]=f[2*T+1];var _=tv(C,l,"float32"),R=tv(N,l,"float32");a[u]=$m(_,R),_.dispose(),R.dispose()}i+=d*I}"complex64"!==c&&(a[u]=tv(f,l,c))}}catch(M){o.e(M)}finally{o.f()}return a}function ov(e){if(null===e)throw new Error("Invalid input value: ".concat(JSON.stringify(e)));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: ".concat(e.constructor.name))}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var sv="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function uv(e){return sv?Buffer.byteLength(e):new Blob([e]).size}function cv(e){if(sv)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function lv(e){if(sv){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function dv(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function fv(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function pv(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function hv(e,t){return mv.apply(this,arguments)}function mv(){return mv=ct(st().mark((function e(t,n){var r,a,i,o,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null==t.weightsManifest){e.next=9;break}return e.next=4,n(t.weightsManifest);case 4:a=e.sent,i=u(a,2),o=i[0],s=i[1],r.weightSpecs=o,r.weightData=s;case 9:return e.abrupt("return",(null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),r));case 10:case"end":return e.stop()}}),e)}))),mv.apply(this,arguments)}function vv(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:uv(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:uv(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function gv(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=u}return new Float32Array(a)}}var yv=function(){function e(){Ye(this,e),this.saveRouters=[],this.loadRouters=[]}return Qe(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),bv=function(e){return yv.registerSaveRouter(e)},xv=function(e){return yv.registerLoadRouter(e)},Av=function(e){return yv.getSaveHandlers(e)},kv=function(e,t){return yv.getLoadHandlers(e,t)},wv="tensorflowjs",Sv="models_store",Iv="model_info_store";function Ev(){if(!id().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Cv(e){var t=e.result;t.createObjectStore(Sv,{keyPath:"modelPath"}),t.createObjectStore(Iv,{keyPath:"modelPath"})}var Nv=function(){function e(t){if(Ye(this,e),this.indexedDB=Ev(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return Qe(e,[{key:"save",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(wv,1);a.onupgradeneeded=function(){return Cv(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(Sv,"readonly"),s=o.objectStore(Sv).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' in IndexedDB.")));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,c=vv(t),l=i.transaction(Iv,"readwrite"),d=l.objectStore(Iv),f=d.put({modelPath:n.modelPath,modelArtifactsInfo:c});f.onsuccess=function(){var a=(u=i.transaction(Sv,"readwrite")).objectStore(Sv).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(d=l.objectStore(Iv)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},f.onerror=function(e){return i.close(),r(f.error)},l.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();Nv.URL_SCHEME="indexeddb://";var Tv=function(e){return id().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Nv.URL_SCHEME)?function(e){return new Nv(e)}(e.slice(Nv.URL_SCHEME.length)):null};function _v(e){return e.startsWith(Nv.URL_SCHEME)?e.slice(Nv.URL_SCHEME.length):e}yv.registerSaveRouter(Tv),yv.registerLoadRouter(Tv);var Rv=function(){function e(){Ye(this,e),this.indexedDB=Ev()}return Qe(e,[{key:"listModels",value:function(){var e=ct(st().mark((function e(){var t=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(wv,1);r.onupgradeneeded=function(){return Cv(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(Iv,"readonly"),i=a.objectStore(Iv).getAll();i.onsuccess=function(){var t,n={},r=lc(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=ct(st().mark((function e(t){var n=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(t=_v(t),new Promise((function(e,r){var a=n.indexedDB.open(wv,1);a.onupgradeneeded=function(){return Cv(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(Iv,"readwrite"),s=o.objectStore(Iv),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' in IndexedDB.")));var a=s.delete(t),o=function(){var a=(n=i.transaction(Sv,"readwrite")).objectStore(Sv).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Mv="/",Ov="tensorflowjs_models",Fv="info",Pv="model_topology",Dv="weight_specs",Lv="weight_data",zv="model_metadata";function Bv(e){return{info:[Ov,e,Fv].join(Mv),topology:[Ov,e,Pv].join(Mv),weightSpecs:[Ov,e,Dv].join(Mv),weightData:[Ov,e,Lv].join(Mv),modelMetadata:[Ov,e,zv].join(Mv)}}function Wv(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function jv(e){var t=e.split(Mv);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(Mv)}function Vv(e){return e.startsWith(Uv.URL_SCHEME)?e.slice(Uv.URL_SCHEME.length):e}var Uv=function(){function e(t){if(Ye(this,e),!id().getBool("IS_BROWSER")||"undefined"==typeof window||"undefined"==typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=Bv(this.modelPath)}return Qe(e,[{key:"save",value:function(){var e=ct(st().mark((function e(t){var n,r,a,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=vv(t),e.prev=3,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,cv(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},e.abrupt("return",(this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:a}));case 9:throw e.prev=9,e.t0=e.catch(3),Wv(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=").concat(a.modelTopologyBytes,", weightSpecsBytes=").concat(a.weightSpecsBytes,", weightDataBytes=").concat(a.weightDataBytes,"."));case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=ct(st().mark((function e(){var t,n,r,a,i,o,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=8;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' is missing."));case 8:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=12;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' are missing."));case 12:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=18;break}throw new Error("In local storage, the binary weight values of model '".concat(this.modelPath,"' are missing."));case 18:return e.abrupt("return",(n.weightData=lv(s),n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();Uv.URL_SCHEME="localstorage://";var Hv=function(e){return id().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Uv.URL_SCHEME)?function(e){return new Uv(e)}(e.slice(Uv.URL_SCHEME.length)):null};yv.registerSaveRouter(Hv),yv.registerLoadRouter(Hv);var Gv=function(){function e(){Ye(this,e),ml(id().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),ml("undefined"==typeof window||"undefined"!=typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return Qe(e,[{key:"listModels",value:function(){var e=ct(st().mark((function e(){var t,n,r,a,i,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=Ov+Mv,r=Mv+Fv,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=jv(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=ct(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Vv(t),n=Bv(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),e.abrupt("return",(Wv(n),r));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),qv="://",Kv=function(){function e(){Ye(this,e),this.managers={}}return Qe(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){ml(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(qv)&&(t=t.slice(0,t.indexOf(qv))),ml(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();ml(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();function Xv(e){if(-1===e.indexOf(qv))throw new Error("The url string provided does not contain a scheme. Supported schemes are: ".concat(Kv.getSchemes().join(",")));return{scheme:e.split(qv)[0],path:e.split(qv)[1]}}function Zv(e,t){return Yv.apply(this,arguments)}function Yv(){return Yv=ct(st().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,p=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>2&&void 0!==p[2]&&p[2],ml(t!==n,(function(){return"Old path and new path are the same: '".concat(t,"'")})),ml((a=yv.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL ".concat(t,".")})),ml(a.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") load handlers for source URL ").concat(t,".")})),i=a[0],ml((o=yv.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination URL ".concat(n,".")})),ml(o.length<2,(function(){return"Copying failed because more than one (".concat(a.length,") save handlers for destination URL ").concat(n,".")})),s=o[0],u=Xv(t).scheme,c=Xv(t).path,l=u===Xv(t).scheme,e.next=12,i.load();case 12:if(d=e.sent,e.t0=r&&l,!e.t0){e.next=17;break}return e.next=17,Kv.getManager(u).removeModel(c);case 17:return e.next=19,s.save(d);case 19:if(f=e.sent,e.t1=r&&!l,!e.t1){e.next=24;break}return e.next=24,Kv.getManager(u).removeModel(c);case 24:return e.abrupt("return",f.modelArtifactsInfo);case 25:case"end":return e.stop()}}),e)}))),Yv.apply(this,arguments)}function Jv(){return Qv.apply(this,arguments)}function Qv(){return Qv=ct(st().mark((function e(){var t,n,r,a,i,o,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Kv.getSchemes(),n={},r=lc(t),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=12;break}return i=a.value,e.next=8,Kv.getManager(i).listModels();case 8:for(s in o=e.sent)n[i+qv+s]=o[s];case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])}))),Qv.apply(this,arguments)}function $v(e){return eg.apply(this,arguments)}function eg(){return eg=ct(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Xv(t),e.abrupt("return",Kv.getManager(n.scheme).removeModel(n.path));case 2:case"end":return e.stop()}}),e)}))),eg.apply(this,arguments)}function tg(e,t){return ng.apply(this,arguments)}function ng(){return ng=ct(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zv(t,n,!1));case 1:case"end":return e.stop()}}),e)}))),ng.apply(this,arguments)}function rg(e,t){return ag.apply(this,arguments)}function ag(){return ag=ct(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zv(t,n,!0));case 1:case"end":return e.stop()}}),e)}))),ag.apply(this,arguments)}var ig=function(){function e(){Ye(this,e)}return Qe(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if(id().get("IS_BROWSER")){id().setPlatform("browser",new ig);try{Kv.registerManager(Uv.URL_SCHEME,new Gv)}catch(A_e){}try{Kv.registerManager(Nv.URL_SCHEME,new Rv)}catch(A_e){}}var og,sg=function(){return Bc()},ug=function(){function e(){Ye(this,e),this.util=Wc(),this.textEncoder=new this.util.TextEncoder}return Qe(e,[{key:"fetch",value:function(e,t){return null!=id().global.fetch?id().global.fetch(e,t):(null==og&&(og=sg()),og(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();function cg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",Jl(e),new pm(e,t,n)}id().get("IS_NODE")&&!id().get("IS_BROWSER")&&id().setPlatform("node",new ug);var lg=Qm({cast_:function(e,t){var n=Zm(e,"x","cast");if(!Fl(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return zm.runKernel(Od,r,a)}});var dg=Qm({clone_:function(e){var t={x:Zm(e,"x","clone","string_or_numeric")};return zm.runKernel(If,t)}});function fg(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}Lm(),function(e){mm=e}({buffer:cg,cast:lg,clone:dg,print:fg});var pg={};Dc(pg,{browserFiles:function(){return yg},browserHTTPRequest:function(){return _g},concatenateArrayBuffers:function(){return dv},copyModel:function(){return tg},decodeWeights:function(){return iv},encodeWeights:function(){return rv},fromMemory:function(){return Fg},fromMemorySync:function(){return Pg},getLoadHandlers:function(){return kv},getModelArtifactsForJSON:function(){return hv},getModelArtifactsInfoForJSON:function(){return vv},getSaveHandlers:function(){return Av},http:function(){return Tg},isHTTPScheme:function(){return Cg},listModels:function(){return Jv},loadWeights:function(){return kg},moveModel:function(){return rg},registerLoadRouter:function(){return xv},registerSaveRouter:function(){return bv},removeModel:function(){return $v},weightsLoaderFactory:function(){return Sg},withSaveHandler:function(){return Dg},withSaveHandlerSync:function(){return Lg}});function hg(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var mg=function(){function e(t){if(Ye(this,e),!id().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),(null==t||0===t.length)&&(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return Qe(e,[{key:"save",value:function(){var e=ct(st().mark((function e(t){var n,r,a,i,o,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=5;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 5:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=pv(t,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,o.href=i,e.next=10,hg((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 10:if(null==t.weightData){e.next=16;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=16,hg((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 16:return e.abrupt("return",{modelArtifactsInfo:vv(t)});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),vg=mg;vg.URL_SCHEME="downloads://";var gg=function(){function e(t){if(Ye(this,e),null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received ".concat(t));this.jsonFile=t[0],this.weightsFiles=t.slice(1)}return Qe(e,[{key:"load",value:function(){var e=ct(st().mark((function e(){var t=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(r){var a=JSON.parse(r.target.result),i=a.modelTopology;if(null!=i)if(null!=a.weightsManifest)if(0!==t.weightsFiles.length){var o=hv(a,(function(e){return t.loadWeights(e)}));e(o)}else e({modelTopology:i});else n(new Error("weightManifest field is missing from file ".concat(t.jsonFile.name)));else n(new Error("modelTopology field is missing from file ".concat(t.jsonFile.name)))},r.onerror=function(e){return n("Failed to read model topology and weights manifest JSON from file '".concat(t.jsonFile.name,"'. BrowserFiles supports loading Keras-style tf.Model artifacts only."))},r.readAsText(t.jsonFile)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(e){var t,n=this,r=[],a=[],i=lc(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push.apply(r,Tn(o.weights)),a.push.apply(a,Tn(o.paths))}}catch(c){i.e(c)}finally{i.f()}var s=this.checkManifestAndWeightFiles(e),u=a.map((function(e){return n.loadWeightsFile(e,s[e])}));return Promise.all(u).then((function(e){return[r,dv(e)]}))}},{key:"loadWeightsFile",value:function(e,t){return new Promise((function(n,r){var a=new FileReader;a.onload=function(e){var t=e.target.result;n(t)},a.onerror=function(t){return r("Failed to weights data from file of path '".concat(e,"'."))},a.readAsArrayBuffer(t)}))}},{key:"checkManifestAndWeightFiles",value:function(e){var t,n=this,r=[],a=this.weightsFiles.map((function(e){return fv(e.name)})),i={},o=lc(e);try{for(o.s();!(t=o.n()).done;){t.value.paths.forEach((function(e){var t=fv(e);if(-1!==r.indexOf(t))throw new Error("Duplicate file basename found in weights manifest: '".concat(t,"'"));if(r.push(t),-1===a.indexOf(t))throw new Error("Weight file with basename '".concat(t,"' is not provided."));i[e]=n.weightsFiles[a.indexOf(t)]}))}}catch(s){o.e(s)}finally{o.f()}if(r.length!==this.weightsFiles.length)throw new Error("Mismatch in the number of files in weights manifest (".concat(r.length,") and the number of weight files provided (").concat(this.weightsFiles.length,")."));return i}}]),e}();function yg(e){return new gg(e)}function bg(e,t,n,r){(function(e){ml(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))})(e),function(e,t){ml(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction ".concat(e)})),ml(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction ".concat(t)})),ml(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction ".concat(e," and endFraction ").concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function xg(e,t){return Ag.apply(this,arguments)}function Ag(){return Ag=ct(st().mark((function e(t,n){var r,a,i,o,s,u,c;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?id().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,bg(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0.map((function(e){return e.arrayBuffer()})),u=.5,c=1,null!=n.onProgress){e.next=23;break}return e.next=20,Promise.all(s);case 20:e.t1=e.sent,e.next=26;break;case 23:return e.next=25,bg(s,n.onProgress,u,c);case 25:e.t1=e.sent;case 26:return e.abrupt("return",e.t1);case 27:case"end":return e.stop()}}),e)}))),Ag.apply(this,arguments)}function kg(e){return wg.apply(this,arguments)}function wg(){return wg=ct(st().mark((function e(t){var n,r,a,i=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"",r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,e.abrupt("return",Sg((function(e){return xg(e,{requestInit:a})}))(t,n,r));case 4:case"end":return e.stop()}}),e)}))),wg.apply(this,arguments)}function Sg(e){return function(){var t=ct(st().mark((function t(n){var r,a,i,o,s,u,c,l,d,f,p,h,m=arguments;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:"",a=m.length>2?m[2]:void 0,i=n.map((function(){return!1})),o={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,c=nv[r]*bl(e.shape),l=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=a?a.forEach((function(t,n){t===e.name&&(l(),s[n]=!0)})):l(),u.push(e.name),n+=c}))})),s.every((function(e){return e}))){t.next=6;break}throw c=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: ".concat(c.join(", "),". \nManifest JSON has weights with names: ").concat(u.join(", "),"."));case 6:return l=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),d=[],l.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;d.push(t)}))})),t.next=10,e(d);case 10:return f=t.sent,p={},h=0,t.abrupt("return",(l.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=f[h+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,c=0;c<t;c++){var l=new Uint8Array(f[h+c]);s.set(l,u),u+=l.byteLength}o[e].forEach((function(e){var t=iv(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)p[n]=t[n]})),h+=t})),p));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}yv.registerSaveRouter((function(e){return id().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(vg.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new vg(e)}(e.slice(vg.URL_SCHEME.length)):null}));var Ig=function(){function e(t,n){if(Ye(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(ml("function"==typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=id().platform.fetch,ml(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&ml(2===t.length,(function(){return"URL paths for http must have a length of 2, (actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return Qe(e,[{key:"save",value:function(){var e=ct(st().mark((function e(t){var n,r,a,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=pv(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=8,this.fetch(this.path,n);case 8:if(!(i=e.sent).ok){e.next=11;break}return e.abrupt("return",{modelArtifactsInfo:vv(t),responses:[i]});case 11:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status ".concat(i.status,"."));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=ct(st().mark((function e(){var t,n,r,a,i,o=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ").concat(t.status,". Please verify this URL points to the model JSON of the model to load."));case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 15:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=18;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model topology or manifest for weights."));case 18:return e.abrupt("return",hv(n,(function(e){return o.loadWeights(e)})));case 19:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=ct(st().mark((function e(t){var n,r,a,i,o,s,c,l,d,f,p,h,m,v,g,y,b,x,A;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=Eg(n),a=u(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,c=[],l=lc(t);try{for(l.s();!(d=l.n()).done;)f=d.value,c.push.apply(c,Tn(f.weights))}catch(k){l.e(k)}finally{l.f()}p=[],h=[],m=lc(t);try{for(m.s();!(v=m.n()).done;){g=v.value,y=lc(g.paths);try{for(y.s();!(b=y.n()).done;)x=b.value,null!=this.weightUrlConverter?h.push(this.weightUrlConverter(x)):p.push(s+x+o)}catch(k){y.e(k)}finally{y.f()}}}catch(k){m.e(k)}finally{m.f()}if(e.t0=this.weightUrlConverter,!e.t0){e.next=16;break}return e.t1=p.push,e.t2=p,e.t3=Tn,e.next=13,Promise.all(h);case 13:e.t4=e.sent,e.t5=(0,e.t3)(e.t4),e.t1.apply.call(e.t1,e.t2,e.t5);case 16:return e.next=18,xg(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 18:return A=e.sent,e.abrupt("return",[c,dv(A)]);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Eg(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function Cg(e){return null!=e.match(Ig.URL_SCHEME_REGEX)}Ig.URL_SCHEME_REGEX=/^https?:\/\//;var Ng=function(e,t){if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;var n=!0;return n=Array.isArray(e)?e.every((function(e){return Cg(e)})):Cg(e),n?Tg(e,t):null};function Tg(e,t){return new Ig(e,t)}function _g(e,t){return Tg(e,t)}yv.registerSaveRouter(Ng),yv.registerLoadRouter(Ng);var Rg=function(){function e(t){Ye(this,e),this.modelArtifacts=t}return Qe(e,[{key:"load",value:function(){return this.modelArtifacts}}]),e}(),Mg=function(){function e(t){Ye(this,e),this.saveHandler=t}return Qe(e,[{key:"save",value:function(e){return this.saveHandler(e)}}]),e}(),Og=Qe((function e(t){Ye(this,e),t.load&&(this.load=function(){return Promise.resolve(t.load())}),t.save&&(this.save=function(e){return Promise.resolve(t.save(e))})}));function Fg(e,t,n,r){var a=arguments;return new Og(Pg.apply(void 0,Tn(a)))}function Pg(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new Rg(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Rg({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Rg({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function Dg(e){return new Mg(e)}function Lg(e){return new Mg(e)}var zg={};Dc(zg,{confusionMatrix:function(){return fy}});var Bg=Qm({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Zm(e,"a","matMul"),i=Zm(t,"b","matMul"),o=Cm(a,i),s=u(o,2),c={a:a=s[0],b:i=s[1]},l={transposeA:n,transposeB:r};return zm.runKernel(Nd,c,l)}});var Wg=Qm({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var a={indices:Zm(e,"indices","oneHot","int32")},i={depth:t,onValue:n,offValue:r};return zm.runKernel(dp,a,i)}});function jg(){id().set("PROD",!0)}function Vg(){id().set("DEBUG",!0)}function Ug(){id().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Hg(e){id().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Gg(){zm.disposeVariables()}function qg(){return zm}function Kg(){return zm.memory()}function Xg(e){return zm.profile(e)}function Zg(e,t){return zm.tidy(e,t)}function Yg(e){_m(e).forEach((function(e){return e.dispose()}))}function Jg(e){return zm.keep(e)}function Qg(e){return zm.time(e)}function $g(e){return zm.setBackend(e)}function ey(){return zm.ready()}function ty(){return zm.backendName}function ny(e){zm.removeBackend(e)}function ry(e){return zm.findBackend(e)}function ay(e){return zm.findBackendFactory(e)}function iy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return zm.registerBackend(e,t,n)}function oy(){return zm.backend}function sy(e,t){id().setPlatform(e,t)}!function(e){e}(Hg);var uy=Qm({imag_:function(e){var t={input:Zm(e,"input","imag")};return zm.runKernel(Cf,t)}});var cy=Qm({neg_:function(e){var t={x:Zm(e,"x","neg")};return zm.runKernel(ip,t)}});var ly=Qm({real_:function(e){var t={input:Zm(e,"input","real")};return zm.runKernel(bp,t)}});var dy=Qm({transpose_:function(e,t,n){var r=Zm(e,"x","transpose");if(null==t&&(t=r.shape.map((function(e,t){return t})).reverse()),ml(r.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(r.rank," must match length of perm ").concat(t,".")})),t.forEach((function(e){ml(e>=0&&e<r.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(r.rank-1," but got ").concat(t)}))})),r.rank<=1)return r.clone();var a={x:r},i={perm:t};return"complex64"===r.dtype?Zg((function(){var e=ly(r),t=uy(r);return e=zm.runKernel(ch,{x:e},i),t=zm.runKernel(ch,{x:t},i),n&&(t=cy(t)),$m(e,t)})):zm.runKernel(ch,a,i)}});var fy=Qm({confusionMatrix_:function(e,t,n){var r=Zm(e,"labels","confusionMatrix"),a=Zm(t,"predictions","confusionMatrix");ml(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got ".concat(n)})),ml(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got ".concat(r.rank)})),ml(1===a.rank,(function(){return"Expected the rank of predictions to be 1, but got ".concat(a.rank)})),ml(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: ".concat(r.shape[0]," vs. ").concat(a.shape[0],". Labels and predictions should have the same number of elements.")})),ml(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got ".concat(n)}));var i=Wg(lg(r,"int32"),n),o=Wg(lg(a,"int32"),n),s=dy(i),u=Bg(s,o);return lg(u,"int32")}}),py={};function hy(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function my(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function vy(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes ".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(i)}}return n}Dc(py,{assertAndGetBroadcastShape:function(){return vy},getBroadcastDims:function(){return hy},getReductionAxes:function(){return my}});var gy,yy={};function by(e,t,n){if(gl(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=qm(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return ev(e,t,r,n)}function xy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ".concat(e.constructor.name));s=!0}if(a&&a&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=Ih(vh,zm.backendName)){var c={pixels:e},l={numChannels:t};return zm.runKernel(vh,c,l)}var d,f,p=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],h=u(p,2),m=h[0],v=h[1];if(o)d=e.getContext("2d").getImageData(0,0,m,v).data;else if(r||n)d=e.data;else if(i||a||s){if(null==gy)if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas||"undefined"==typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");gy=new OffscreenCanvas(1,1).getContext("2d")}else{c=id().getBool("CANVAS2D_WILL_READ_FREQUENTLY");gy=document.createElement("canvas").getContext("2d",{willReadFrequently:c})}gy.canvas.width=m,gy.canvas.height=v,gy.drawImage(e,0,0,m,v),d=gy.getImageData(0,0,m,v).data}if(4===t)f=new Int32Array(d);else{var g=m*v;f=new Int32Array(g*t);for(l=0;l<g;l++)for(var y=0;y<t;++y)f[l*t+y]=d[4*l+y]}return by(f,[v,m,t],"int32")}function Ay(e){return"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}function ky(e){return wy.apply(this,arguments)}function wy(){return wy=ct(st().mark((function e(t){var n,r,a,i=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:3,r=null,!id().getBool("WRAP_TO_IMAGEBITMAP")||!Ay(t)){e.next=15;break}return e.prev=3,e.next=6,createImageBitmap(t,{premultiplyAlpha:"none"});case 6:a=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a=null;case 12:r=null!=a&&a.width===t.width&&a.height===t.height?a:t,e.next=16;break;case 15:r=t;case 16:return e.abrupt("return",xy(r,n));case 17:case"end":return e.stop()}}),e,null,[[3,9]])}))),wy.apply(this,arguments)}function Sy(e,t){return Iy.apply(this,arguments)}function Iy(){return Iy=ct(st().mark((function e(t,n){var r,a,i,o,s,c,l,d,f,p,h,m,v,g,y,b;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Zm(t,"img","toPixels"),t instanceof vm||(r=lg(a=r,"int32"),a.dispose()),2===r.rank||3===r.rank){e.next=4;break}throw new Error("toPixels only supports rank 2 or 3 tensors, got rank ".concat(r.rank,"."));case 4:if(i=r.shape.slice(0,2),o=u(i,2),s=o[0],c=o[1],!((l=2===r.rank?1:r.shape[2])>4||2===l)){e.next=7;break}throw new Error("toPixels only supports depth of size 1, 3 or 4 but got ".concat(l));case 7:if("float32"===r.dtype||"int32"===r.dtype){e.next=9;break}throw new Error("Unsupported type for toPixels: ".concat(r.dtype,". Please use float32 or int32 tensors."));case 9:return e.next=11,r.data();case 11:d=e.sent,f="float32"===r.dtype?255:1,p=new Uint8ClampedArray(c*s*4),a=0;case 15:if(!(a<s*c)){e.next=36;break}h=[0,0,0,255],m=0;case 18:if(!(m<l)){e.next=31;break}if(v=d[a*l+m],"float32"!==r.dtype){e.next=25;break}if(!(v<0||v>1)){e.next=23;break}throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ".concat(v,"."));case 23:e.next=27;break;case 25:if("int32"!==r.dtype||!(v<0||v>255)){e.next=27;break}throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ".concat(v,"."));case 27:1===l?(h[0]=v*f,h[1]=v*f,h[2]=v*f):h[m]=v*f;case 28:m++,e.next=18;break;case 31:p[(g=4*a)+0]=Math.round(h[0]),p[g+1]=Math.round(h[1]),p[g+2]=Math.round(h[2]),p[g+3]=Math.round(h[3]);case 33:++a,e.next=15;break;case 36:return null!=n&&(n.width=c,n.height=s,y=n.getContext("2d"),b=new ImageData(p,c,s),y.putImageData(b,0,0)),e.abrupt("return",(r!==t&&r.dispose(),p));case 38:case"end":return e.stop()}}),e)}))),Iy.apply(this,arguments)}Dc(yy,{fromPixels:function(){return Ey},fromPixelsAsync:function(){return ky},toPixels:function(){return Sy}});var Ey=Qm({fromPixels_:xy}),Cy={};function Ny(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: ".concat(t.shape[r-1]," vs. ").concat(n));if(0===bl(e.shape))throw new Error("Requested more than 0 entries, but input is empty. Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,d=i;d<n;++d)l*=u[d],c.push(u[d]);var f=[].concat(Tn(Gl(e.shape).map((function(e){return e/l}))),[1]).slice(0,i);return[c,o,l,f]}Dc(Cy,{prepareAndValidate:function(){return Ny}});var Ty={};function _y(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ".concat(n.shape,", indices.shape: ").concat(t.shape,", shape: ").concat(e,", sliceDim: ").concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}function Ry(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}_y(n,t,e)}function My(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:bl(t.shape)/u,sliceSize:o,strides:[].concat(Tn(Gl(n.slice(0,a))),[1]),outputSize:bl(n)}}Dc(Ty,{calculateShapes:function(){return My},validateInput:function(){return Ry},validateUpdateShape:function(){return _y}});var Oy={};Dc(Oy,{assertParamsValid:function(){return Fy},computeFlatOffset:function(){return Ky},computeOutShape:function(){return Dy},getNormalizedAxes:function(){return Wy},isSliceContinous:function(){return qy},maskToAxes:function(){return Py},parseSliceParams:function(){return Xy},sliceInfo:function(){return Zy},startForAxis:function(){return Hy},startIndicesWithElidedDims:function(){return jy},stopForAxis:function(){return Gy},stopIndicesWithElidedDims:function(){return Vy},stridesForAxis:function(){return Uy},stridesWithElidedDims:function(){return Ly}});function Fy(e,t,n){var r=e.shape.length;ml(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must match the rank of the array (").concat(r,").")})),ml(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must match the rank of the array (").concat(r,").")}));for(var a=function(a){ml(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] (").concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},i=0;i<r;++i)a(i)}function Py(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Dy(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function Ly(e,t,n,r){for(var a=Tn(e),i=a.length;i<r.length;i++)a.push(1);for(var o=0;o<n;o++)0===o?a[t]=1:(a.splice(t,0,1),a.pop());return a}function zy(e,t,n){return n<=e?n:n-(t-1)}function By(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function Wy(e,t,n,r,a,i,o,s,u){var c=e.length,l=new Array(c),d=new Array(c),f=new Array(c);if(t.length&&n>0){var p=t[0],h=n+1;l=jy(o,p,h,r,e),d=Vy(s,p,h,a,e),f=Ly(i,p,h,e)}else for(var m=0;m<c;m++)l[m]=Hy(o,r,i,e,m,u),d[m]=Gy(s,a,i,e,m,u),f[m]=Uy(i,m,u);return{begin:l,end:d,strides:f}}function jy(e,t,n,r,a){for(var i=Tn(a),o=By(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=0;else{var u=zy(t,n,s),c=r[u];e&1<<u&&(c=0),i[s]=c}return i}function Vy(e,t,n,r,a){for(var i=Tn(a),o=By(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=Number.MAX_SAFE_INTEGER;else{var u=zy(t,n,s),c=r[u];e&1<<u&&(c=Number.MAX_SAFE_INTEGER),i[s]=c}for(var l=0;l<i.length;l++){var d=a[l];i[l]<0&&(i[l]+=d),i[l]=cl(0,i[l],a[l])}return i}function Uy(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function Hy(e,t,n,r,a,i){var o=t[a],s=n[a]||1;(e&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[a];return o<0&&(o+=u),o=cl(0,o,u-1)}function Gy(e,t,n,r,a,i){var o=t[a],s=n[a]||1;(e&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[a];return o<0&&(o+=u),o=s>0?cl(0,o,u):cl(-1,o,u-1)}function qy(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function Ky(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Xy(e,t,n){var r,a,i=e.shape.length;return(r="number"==typeof t?[t].concat(Tn(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){ml(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"==typeof n?[n].concat(Tn(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(ml(-1===t,(function(){return"Negative size values should be exactly -1 but got ".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function Zy(e,t,n,r,a,i,o,s,u){var c;if(null==r?(c=new Array(t.length)).fill(1):c=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var l=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u},f=0;f<d.dims;f++)l&&0!==(1<<f&s)&&d.numAddAxisAfterEllipsis++,1<<f&o&&(l=!0);l||(d.ellipsisMask|=1<<d.dims,d.dims++);var p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input has only ").concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,p);for(var h=!0,m=!0,v=!0,g=[],y=[],b=0;b<e.length;++b){if(0===p.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(p.shrinkAxisMask&1<<b),A=e[b];if(-1!==A){var k=[p.beginMask&1<<b,p.endMask&1<<b],w=[p.strides[b]>0?0:-1,p.strides[b]>0?A:A-1];if(x&&p.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&1===p.strides[b];var S=!!(p.beginMask&1<<b&&p.endMask&1<<b);if(p.beginValid&&p.endValid){if(x){var I=p.begin[b]<0?A+p.begin[b]:p.begin[b];if(p.begin[b]=I,p.end[b]=p.begin[b]+1,I<0||I>=A)throw Error("slice index ".concat(p.begin[b]," of dimension ").concat(b," out of bounds."))}else p.begin[b]=Yy(p.begin[b],0,p.strides[b],A,k,w),p.end[b]=Yy(p.end[b],1,p.strides[b],A,k,w);var E=1===p.strides[b]&&0===p.begin[b]&&p.end[b]===A;h=h&&E,m=m&&(0===b&&1===p.strides[b]||E)}else h=h&&1===p.strides[b]&&S,m=m&&(0===b&&1===p.strides[b]||S);var C=void 0,N=!1;if(p.beginValid&&p.endValid?(C=p.end[b]-p.begin[b],N=!0):x?(C=1,N=!0):S&&A>=0&&(C=p.strides[b]<0?-A:A,N=!0),N){var T=void 0;T=0===C||C<0!=p.strides[b]<0?0:Math.trunc(C/p.strides[b])+(C%p.strides[b]!==0?1:0),g.push(T)}else g.push(-1)}else g.push(x?1:-1)}for(var _=0;_<p.finalShapeGatherIndices.length;++_){var R=p.finalShapeGatherIndices[_];R>=0?y.push(g[R]):-2===R&&y.push(1)}return{finalShapeSparse:y.filter((function(e,t){return-2!==p.finalShapeGatherIndices[t]})),finalShape:y,isIdentity:h,sliceDim0:m,isSimpleSlice:v,begin:p.begin,end:p.end,strides:p.strides}}function Yy(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}var Jy={};Dc(Jy,{Serializable:function(){return Qy},SerializationMap:function(){return $y},registerClass:function(){return eb}});var Qy=function(){function e(){Ye(this,e)}return Qe(e,[{key:"getClassName",value:function(){return this.constructor.className}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),e}(),$y=function(){function e(){Ye(this,e),this.classNameMap={}}return Qe(e,null,[{key:"getMap",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"register",value:function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]}}]),e}();function eb(e){ml(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),ml("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),ml(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),$y.register(e)}var tb={};Dc(tb,{TEST_EPSILON_FLOAT16:function(){return nb},encodeStrings:function(){return fb},expectArrayBuffersEqual:function(){return db},expectArraysClose:function(){return rb},expectArraysEqual:function(){return sb},expectNumbersClose:function(){return ub},expectPromiseToFail:function(){return ob},expectValuesInRange:function(){return lb},testEpsilon:function(){return ab}});var nb=.1;function rb(e,t,n){return null==n&&(n=ab()),ib(e,t,(function(e,t){return cb(e,t,n)}))}function ab(){return 32===zm.backend.floatPrecision()?.001:nb}function ib(e,t,n){var r=!0;if((Dl(e)||Dl(t))&&(r=!1),Dl(e)&&Dl(t)&&(r=!0),r){var a=e.constructor.name,i=t.constructor.name;if(a!==i)throw new Error("Arrays are of different type. Actual: ".concat(a,". Expected: ").concat(i))}if(Array.isArray(e)&&Array.isArray(t)){var o=qm(e),s=qm(t);if(!Al(o,s))throw new Error("Arrays have different shapes. Actual: [".concat(o,"]. Expected: [").concat(s,"]"))}var u=Dl(e)?e:yl(e),c=Dl(t)?t:yl(t);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: ".concat(u.length," vs expected: ").concat(c.length,".\nActual:   ").concat(u,".\nExpected: ").concat(c,"."));for(var l=0;l<c.length;++l){var d=u[l],f=c[l];if(!n(d,f))throw new Error("Arrays differ: actual[".concat(l,"] = ").concat(d,", expected[").concat(l,"] = ").concat(f,".\nActual:   ").concat(u,".\nExpected: ").concat(c,"."))}}function ob(e,t){e().then((function(){return t.fail()}),(function(){return t()}))}function sb(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return Bl(e)||Bl(e[0])||Bl(t)||Bl(t[0])?ib(e,n,(function(e,t){return e==t})):ib(e,t,(function(e,t){return cb(e,t,0)}))}function ub(e,t,n){if(null==n&&(n=ab()),!cb(e,t,n))throw new Error("Numbers differ: actual === ".concat(e,", expected === ").concat(t))}function cb(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function lb(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:".concat(e[r]," low: ").concat(t,", high: ").concat(n))}function db(e,t){var n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error("Expected ArrayBuffer to be of length ".concat(r.length,", but it was ").concat(n.length));for(var a=0;a<r.length;a++)if(n[a]!==r[a])throw new Error("Expected ArrayBuffer value at ".concat(a," to be ").concat(r[a]," but got ").concat(n[a]," instead"))}function fb(e){for(var t=0;t<e.length;t++){var n=e[t];Array.isArray(n)?fb(n):e[t]=nm(n)}return e}var pb="0.0.0";var hb=Qm({add_:function(e,t){var n=Zm(e,"a","add"),r=Zm(t,"b","add"),a=u(Cm(n,r),2),i={a:n=a[0],b:r=a[1]};return zm.runKernel(pd,i)}});var mb=Qm({floorDiv_:function(e,t){var n=Zm(e,"a","floorDiv"),r=Zm(t,"b","floorDiv"),a=u(Cm(n,r),2),i={a:n=a[0],b:r=a[1]};return zm.runKernel(bf,i)}});var vb=Qm({div_:function(e,t){var n,r=Zm(e,"a","div"),a=Zm(t,"b","div");if(r=(n=u(Cm(r,a),2))[0],a=n[1],"int32"===r.dtype&&"int32"===a.dtype)return mb(r,a);var i={a:r,b:a};return zm.runKernel(of,i,{})}});var gb=Qm({mul_:function(e,t){var n=Zm(e,"a","mul"),r=Zm(t,"b","mul"),a=u(Cm(n,r),2),i={a:n=a[0],b:r=a[1]};return zm.runKernel(ap,i)}});var yb=Qm({abs_:function(e){var t=Zm(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return zm.runKernel(Ld,n)}var r={x:t};return zm.runKernel(ld,r)}});var bb=Qm({acos_:function(e){var t={x:Zm(e,"x","acos")};return zm.runKernel(dd,t)}});var xb=Qm({acosh_:function(e){var t={x:Zm(e,"x","acosh")};return zm.runKernel(fd,t)}});var Ab=Qm({addN_:function(e){ml(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),ml(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got ".concat(e.length)}));var t=e.map((function(e,t){return Zm(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!Al(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return zm.runKernel(hd,r)}});var kb=Qm({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Zm(e,"x","all","bool")},a={axis:t,keepDims:n};return zm.runKernel(md,r,a)}});var wb=Qm({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Zm(e,"x","any","bool")},a={axis:t,keepDims:n};return zm.runKernel(vd,r,a)}});var Sb=Qm({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:Zm(e,"x","argMax")},r={axis:t};return zm.runKernel(gd,n,r)}});var Ib=Qm({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:Zm(e,"x","argMin")},r={axis:t};return zm.runKernel(yd,n,r)}});var Eb=Qm({asin_:function(e){var t={x:Zm(e,"x","asin")};return zm.runKernel(bd,t)}});var Cb=Qm({asinh_:function(e){var t={x:Zm(e,"x","asinh")};return zm.runKernel(xd,t)}});var Nb=Qm({atan_:function(e){var t={x:Zm(e,"x","atan")};return zm.runKernel(Ad,t)}});var Tb=Qm({atan2_:function(e,t){var n=Zm(e,"a","atan2"),r=Zm(t,"b","atan2"),a=u(Cm(n,r),2),i={a:n=a[0],b:r=a[1]};return zm.runKernel(wd,i)}});var _b=Qm({atanh_:function(e){var t={x:Zm(e,"x","atanh")};return zm.runKernel(kd,t)}});function Rb(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0,o=e[3],s=[].concat(Tn(t),[o]),u=Gb(a);return Fb(e,s,n,i,r,null,null,u)}function Mb(e,t,n,r,a,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",c=Lb(t),l=u(c,2),d=l[0],f=l[1];if("channelsLast"===s)o=[d,f,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[d,f,e[1],e[1]]}return Fb(e,o,n,r,a,i,!1,s)}function Ob(e,t,n,r,a,i){var o,s,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",l=zb(t),d=u(l,3),f=d[0],p=d[1],h=d[2];if("NDHWC"===c)s="channelsLast",o=[f,p,h,e[4],e[4]];else{if("NCDHW"!==c)throw new Error("Unknown dataFormat ".concat(c));s="channelsFirst",o=[f,p,h,e[1],e[1]]}return Pb(e,o,n,r,a,!1,s,i)}function Fb(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",c=-1,l=-1,d=-1,f=-1;if("channelsLast"===s){var p=u(e,4);c=p[0],l=p[1],d=p[2],f=p[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var h=u(e,4);c=h[0],f=h[1],l=h[2],d=h[3]}var m,v=u(t,4),g=v[0],y=v[1],b=v[3],x=Lb(n),A=u(x,2),k=A[0],w=A[1],S=Lb(r),I=u(S,2),E=I[0],C=I[1],N=Bb(g,E),T=Bb(y,C),_=Wb(a,l,d,k,w,N,T,i,s),R=_.padInfo,M=_.outHeight,O=_.outWidth,F=o?b*f:b;return"channelsFirst"===s?m=[c,F,M,O]:"channelsLast"===s&&(m=[c,M,O,F]),{batchSize:c,dataFormat:s,inHeight:l,inWidth:d,inChannels:f,outHeight:M,outWidth:O,outChannels:F,padInfo:R,strideHeight:k,strideWidth:w,filterHeight:g,filterWidth:y,effectiveFilterHeight:N,effectiveFilterWidth:T,dilationHeight:E,dilationWidth:C,inShape:e,outShape:m,filterShape:t}}function Pb(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,c=-1,l=-1,d=-1,f=-1,p=-1;if("channelsLast"===o){var h=u(e,5);c=h[0],l=h[1],d=h[2],f=h[3],p=h[4]}else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));var m=u(e,5);c=m[0],p=m[1],l=m[2],d=m[3],f=m[4]}var v,g=u(t,5),y=g[0],b=g[1],x=g[2],A=g[4],k=zb(n),w=u(k,3),S=w[0],I=w[1],E=w[2],C=zb(r),N=u(C,3),T=N[0],_=N[1],R=N[2],M=Bb(y,T),O=Bb(b,_),F=Bb(x,R),P=jb(a,l,d,f,S,I,E,M,O,F,s),D=P.padInfo,L=P.outDepth,z=P.outHeight,B=P.outWidth,W=i?A*p:A;return"channelsFirst"===o?v=[c,W,L,z,B]:"channelsLast"===o&&(v=[c,L,z,B,W]),{batchSize:c,dataFormat:o,inDepth:l,inHeight:d,inWidth:f,inChannels:p,outDepth:L,outHeight:z,outWidth:B,outChannels:W,padInfo:D,strideDepth:S,strideHeight:I,strideWidth:E,filterDepth:y,filterHeight:b,filterWidth:x,effectiveFilterDepth:M,effectiveFilterHeight:O,effectiveFilterWidth:F,dilationDepth:T,dilationHeight:_,dilationWidth:R,inShape:e,outShape:v,filterShape:t}}function Db(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=Bb(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function Lb(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function zb(e){return"number"==typeof e?[e,e,e]:e}function Bb(e,t){return t<=1?e:e+(e-1)*(t-1)}function Wb(e,t,n,r,a,i,o,s,u){var c,l,d;if("number"==typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,a){null==r&&(r=Db(e,t,n));var i=e[0],o=e[1];return[Vb((i-t+2*r)/n+1,a),Vb((o-t+2*r)/n+1,a)]}([t,n],i,r,e,s);l=f[0],d=f[1]}else if("same"===e){l=Math.ceil(t/r),d=Math.ceil(n/a);var p=Math.max(0,(l-1)*r+i-t),h=Math.max(0,(d-1)*a+o-n),m=Math.floor(p/2),v=p-m,g=Math.floor(h/2);c={top:m,bottom:v,left:g,right:h-g,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-i+1)/r),d=Math.ceil((n-o+1)/a);else{if("object"!=typeof e)throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],x="channelsLast"===u?e[2][0]:e[3][0],A="channelsLast"===u?e[2][1]:e[3][1];c={top:y,bottom:b,left:x,right:A,type:0===y&&0===b&&0===x&&0===A?"VALID":"EXPLICIT"},l=Vb((t-i+y+b)/r+1,s),d=Vb((n-o+x+A)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:d}}function jb(e,t,n,r,a,i,o,s,u,c,l){var d,f,p,h;if("number"==typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,a,i){null==a&&(a=Db(e,t,r));var o=e[0],s=e[1],u=e[2];return[Vb((o-t+2*a)/r+1,i),Vb((s-t+2*a)/r+1,i),Vb((u-t+2*a)/r+1,i),n]}([t,n,r,1],s,1,a,e,l);f=m[0],p=m[1],h=m[2]}else if("same"===e){var v=((f=Math.ceil(t/a))-1)*a+s-t,g=((p=Math.ceil(n/i))-1)*i+u-n,y=((h=Math.ceil(r/o))-1)*o+c-r,b=Math.floor(v/2),x=v-b,A=Math.floor(g/2),k=g-A,w=Math.floor(y/2);d={top:A,bottom:k,left:w,right:y-w,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-s+1)/a),p=Math.ceil((n-u+1)/i),h=Math.ceil((r-c+1)/o)}return{padInfo:d,outDepth:f,outHeight:p,outWidth:h}}function Vb(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function Ub(e){var t=u(Lb(e),3),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function Hb(e,t){return Ub(e)||Ub(t)}function Gb(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function qb(e,t,n){if(null!=n){if("string"==typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using dimRoundingMode ").concat(n," but got pad ").concat(t,"."));if("number"==typeof t)ml(kl(t),(function(){return"Error in ".concat(e,": pad must be an integer when using dimRoundingMode ").concat(n," but got pad ").concat(t,".")}));else{if("object"!=typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){ml(kl(t),(function(){return"Error in ".concat(e,": pad must be an integer when using dimRoundingMode ").concat(n," but got pad ").concat(t,".")}))}))}))}}}var Kb=Qm({reshape_:function(e,t){var n={x:Zm(e,"x","reshape","string_or_numeric")},r={shape:t};return zm.runKernel(kp,n,r)}});var Xb=Qm({avgPool_:function(e,t,n,r,a){var i=Zm(e,"x","avgPool","float32");ml(Hb(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(1,"'")}));var o=i,s=!1;3===i.rank&&(s=!0,o=Kb(i,[1,i.shape[0],i.shape[1],i.shape[2]])),ml(4===o.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")})),qb("avgPool",r,a);var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=zm.runKernel(Sd,u,c);return l=lg(l,i.dtype),s?Kb(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var Zb=Qm({avgPool3d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=Zm(e,"x","avgPool3d","float32"),s=o,u=!1;4===o.rank&&(u=!0,s=Kb(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),ml(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),ml("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ".concat(i)})),qb("avgPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=zm.runKernel(Ed,c,l);return d=lg(d,s.dtype),u?Kb(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var Yb=Qm({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ml(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=Ym(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return dg(n[0]);var r=n,a={axis:t};return zm.runKernel(zd,r,a)}});var Jb=Qm({sigmoid_:function(e){var t={x:Zm(e,"x","sigmoid","float32")};return zm.runKernel(Bp,t)}});var Qb=Qm({slice_:function(e,t,n){var r=Zm(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return zm.runKernel(Pp,a,i)}});var $b=Qm({tanh_:function(e){var t={x:Zm(e,"x","tanh","float32")};return zm.runKernel(ih,t)}});var ex=Qm({basicLSTMCell_:function(e,t,n,r,a,i){var o=Zm(e,"forgetBias","basicLSTMCell"),s=Zm(t,"lstmKernel","basicLSTMCell"),u=Zm(n,"lstmBias","basicLSTMCell"),c=Zm(r,"data","basicLSTMCell"),l=Zm(a,"c","basicLSTMCell"),d=Zm(i,"h","basicLSTMCell"),f=Yb([c,d],1),p=Bg(f,s),h=hb(p,u),m=h.shape[0],v=h.shape[1]/4,g=[m,v],y=Qb(h,[0,0],g),b=Qb(h,[0,v],g),x=Qb(h,[0,2*v],g),A=Qb(h,[0,3*v],g),k=hb(gb(Jb(y),$b(b)),gb(l,Jb(hb(o,x))));return[k,gb($b(k),Jb(A))]}});var tx=Qm({batchToSpaceND_:function(e,t,n){var r=Zm(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));ml(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),ml(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),ml(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of the elements of blockShape ").concat(t.join(" * ")," === ").concat(a)}));var i={x:r},o={blockShape:t,crops:n};return zm.runKernel(Td,i,o)}});function nx(e){return 0===e.rank||1===e.rank?Kb(e,[1,1,1,e.size]):2===e.rank?Kb(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?Kb(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}var rx=Qm({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);var o,s,u=Zm(e,"x","batchNorm"),c=Zm(t,"mean","batchNorm"),l=Zm(n,"variance","batchNorm");null!=a&&(o=Zm(a,"scale","batchNorm")),null!=r&&(s=Zm(r,"offset","batchNorm")),ml(c.rank===l.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),ml(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),ml(null==o||c.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var d={x:nx(u),scale:o,offset:s,mean:c,variance:l},f={varianceEpsilon:i},p=zm.runKernel(xf,d,f);return Kb(p,u.shape)}});var ax=Qm({batchNorm2d_:function(e,t,n,r,a,i){var o,s,u=Zm(e,"x","batchNorm"),c=Zm(t,"mean","batchNorm"),l=Zm(n,"variance","batchNorm");return null!=a&&(o=Zm(a,"scale","batchNorm")),null!=r&&(s=Zm(r,"offset","batchNorm")),ml(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank ".concat(u.rank,".")})),ml(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ".concat(c.rank,".")})),ml(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ".concat(l.rank,".")})),null!=o&&ml(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ".concat(o.rank,".")})),null!=s&&ml(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ".concat(s.rank,".")})),rx(u,c,l,s,o,i)}});var ix=Qm({batchNorm3d_:function(e,t,n,r,a,i){var o,s,u=Zm(e,"x","batchNorm"),c=Zm(t,"mean","batchNorm"),l=Zm(n,"variance","batchNorm");return null!=a&&(o=Zm(a,"scale","batchNorm")),null!=r&&(s=Zm(r,"offset","batchNorm")),ml(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank ".concat(u.rank,".")})),ml(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ".concat(c.rank,".")})),ml(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ".concat(l.rank,".")})),null!=o&&ml(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ".concat(o.rank,".")})),null!=s&&ml(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ".concat(s.rank,".")})),rx(u,c,l,s,o,i)}});var ox=Qm({batchNorm4d_:function(e,t,n,r,a,i){var o,s,u=Zm(e,"x","batchNorm"),c=Zm(t,"mean","batchNorm"),l=Zm(n,"variance","batchNorm");return null!=a&&(o=Zm(a,"scale","batchNorm")),null!=r&&(s=Zm(r,"offset","batchNorm")),ml(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank ".concat(u.rank,".")})),ml(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ".concat(c.rank,".")})),ml(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ".concat(l.rank,".")})),null!=o&&ml(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ".concat(o.rank,".")})),null!=s&&ml(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ".concat(s.rank,".")})),rx(u,c,l,s,o,i)}});var sx=Qm({bincount_:function(e,t,n){var r=Zm(e,"x","bincount"),a=Zm(t,"weights","bincount");ml("int32"===r.dtype,(function(){return"Error in bincount: input dtype must be int32, but got ".concat(r.dtype)})),ml(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),ml(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or0-length, but got input shape: ".concat(r.shape,", weights shape: ").concat(a.shape,".")}));var i={x:r,weights:a},o={size:n};return zm.runKernel(_d,i,o)}});var ux=Qm({broadcastArgs_:function(e,t){var n=Zm(e,"s0","broadcastArgs","int32"),r=Zm(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). Has rank ".concat(r.rank));var a={s0:n,s1:r};return zm.runKernel(Md,a)}});var cx=Qm({broadcastTo_:function(e,t){var n=Zm(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=Kb(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));if(0===o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0})).length)return dg(n);var u={x:n},c={reps:o};return zm.runKernel(oh,u,c)}});var lx=Qm({ceil_:function(e){var t={x:Zm(e,"x","ceil","float32")};return zm.runKernel(Fd,t)}});var dx=Qm({clipByValue_:function(e,t,n){var r=Zm(e,"x","clipByValue");ml(t<=n,(function(){return"Error in clip: min (".concat(t,") must be less than or equal to max (").concat(n,").")}));var a={x:r},i={clipValueMin:t,clipValueMax:n};return zm.runKernel(Pd,a,i)}});var fx=Qm({concat1d_:function(e){return Yb(e,0)}});var px=Qm({concat2d_:function(e,t){return Yb(e,t)}});var hx=Qm({concat3d_:function(e,t){return Yb(e,t)}});var mx=Qm({concat4d_:function(e,t){return Yb(e,t)}});var vx=Qm({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=Zm(e,"x","conv2d","float32"),u=Zm(t,"filter","conv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=Kb(s,[1,s.shape[0],s.shape[1],s.shape[2]])),ml(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),ml(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank ".concat(u.rank,".")})),qb("conv2d",r,o);var d="NHWC"===a?c.shape[3]:c.shape[1];ml(d===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(d,") must match input depth for filter ").concat(u.shape[2],".")})),ml(Hb(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(i,"'")}));var f={x:c,filter:u},p={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},h=zm.runKernel(Bd,f,p);return l?Kb(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var gx=Qm({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0,s=Zm(e,"x","conv1d"),u=Zm(t,"filter","conv1d"),c=s,l=!1;2===s.rank&&(l=!0,c=Kb(s,[1,s.shape[0],s.shape[1]])),ml(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")})),ml(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank ".concat(u.rank,".")})),qb("conv1d",r,o),ml(c.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(c.shape[2],") must match input depth for filter ").concat(u.shape[1],".")})),ml(Hb(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride ".concat(n," and dilation '").concat(i,"'")})),ml("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var d=Kb(u,[1,u.shape[0],u.shape[1],u.shape[2]]),f=Kb(c,[c.shape[0],1,c.shape[1],c.shape[2]]),p=vx(f,d,[1,n],r,"NHWC",[1,i],o);return Kb(p,l?[p.shape[2],p.shape[3]]:[p.shape[0],p.shape[2],p.shape[3]])}});var yx=Qm({conv2DBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0;ml(e.length===t.rank,(function(){return"Length of inShape (".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,c=!1;3===t.rank&&(c=!0,u=Kb(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),ml(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length ".concat(s.length,".")})),ml(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank ".concat(u.rank)})),ml(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank ".concat(n.rank)}));var l="NHWC"===i?s[3]:s[1],d="NHWC"===i?u.shape[3]:u.shape[1];ml(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(l,") must match input depth for filter ").concat(n.shape[2],".")})),ml(d===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(d,") must match output depth for filter ").concat(n.shape[3],".")})),qb("conv2dDerInput",a,o);var f={dy:u,filter:n},p={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},h=zm.runKernel(jd,f,p);return c?Kb(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var bx=Qm({conv2dTranspose_:function(e,t,n,r,a,i){var o=Zm(e,"x","conv2dTranspose"),s=Zm(t,"filter","conv2dTranspose");return yx(n,o,s,r,a,"NHWC",i)}});var xx=Qm({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=Zm(e,"x","conv3d"),s=Zm(t,"filter","conv3d"),u=o,c=!1;4===o.rank&&(c=!0,u=Kb(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),ml(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),ml(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank ".concat(s.rank,".")})),ml(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match input depth for filter ").concat(s.shape[3],".")})),ml(Hb(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(i,"'")})),ml("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var l={x:u,filter:s},d={strides:n,pad:r,dataFormat:a,dilations:i},f=zm.runKernel(Vd,l,d);return c?Kb(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var Ax=Qm({conv3DBackpropInput_:function(e,t,n,r,a){ml(e.length===t.rank,(function(){return"Length of inShape (".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=Kb(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],c=o.shape[4];ml(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length ".concat(i.length,".")})),ml(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank ".concat(o.rank)})),ml(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank ".concat(n.rank)})),ml(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must match input depth for filter ").concat(n.shape[3],".")})),ml(c===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(c,") must match output depth for filter ").concat(n.shape[4],".")}));var l={dy:o,filter:n},d={pad:a,strides:r,inputShape:i},f=zm.runKernel(Hd,l,d);return s?Kb(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var kx=Qm({conv3dTranspose_:function(e,t,n,r,a){var i=Zm(e,"x","conv3dTranspose"),o=Zm(t,"filter","conv3dTranspose");return Ax(n,i,o,r,a)}});var wx=Qm({cos_:function(e){var t={x:Zm(e,"x","cos","float32")};return zm.runKernel(Gd,t)}});var Sx=Qm({cosh_:function(e){var t={x:Zm(e,"x","cosh","float32")};return zm.runKernel(qd,t)}});var Ix=Qm({cumprod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:Zm(e,"x","cumprod")},i={axis:t,exclusive:n,reverse:r};return zm.runKernel(Kd,a,i)}});var Ex=Qm({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a={x:Zm(e,"x","cumsum")},i={axis:t,exclusive:n,reverse:r};return zm.runKernel(Xd,a,i)}});var Cx=Qm({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Zm(e,"x","denseBincount"),i=Zm(t,"weights","denseBincount");ml("int32"===a.dtype,(function(){return"Error in denseBincount: input dtype must be int32, but got ".concat(a.dtype)})),ml(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got rank ".concat(a.rank,".")})),ml(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),ml(i.size===a.size||0===i.size,(function(){return"Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ".concat(a.shape,", weights shape: ").concat(i.shape,".")}));var o={x:a,weights:i},s={size:n,binaryOutput:r};return zm.runKernel(Yd,o,s)}});var Nx=Qm({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=Zm(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];ml(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),ml(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),ml(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),ml(o%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},u={blockSize:t,dataFormat:n};return zm.runKernel(Jd,s,u)}});var Tx=Qm({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=Zm(e,"x","depthwiseConv2d","float32"),u=Zm(t,"filter","depthwiseConv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=Kb(s,[1,s.shape[0],s.shape[1],s.shape[2]])),ml(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),ml(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank ".concat(u.rank,".")})),ml(c.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels (".concat(c.shape[3],") must match the inChannels dimension in filter ").concat(u.shape[2],".")})),qb("depthwiseConv2d",r,o);var d={x:c,filter:u},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},p=zm.runKernel(Qd,d,f);return l?Kb(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var _x=Qm({diag_:function(e){var t={x:Zm(e,"x","diag")};return zm.runKernel(tf,t)}});var Rx=Qm({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=Zm(e,"x","dilation2d"),s=Zm(t,"filter","dilation2d");ml(3===o.rank||4===o.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank ".concat(o.rank,".")})),ml(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank ".concat(s.rank,".")})),ml("NHWC"===i,(function(){return"Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ".concat(i)}));var u=o,c=!1;3===o.rank&&(u=Kb(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0);var l={x:u,filter:s},d={strides:n,pad:r,dilations:a},f=zm.runKernel(nf,l,d);return c?Kb(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var Mx=Qm({equal_:function(e,t){var n,r=Zm(e,"a","equal","string_or_numeric"),a=Zm(t,"b","equal","string_or_numeric");r=(n=u(Cm(r,a),2))[0],a=n[1],vy(r.shape,a.shape);var i={a:r,b:a};return zm.runKernel(df,i)}});var Ox=Qm({where_:function(e,t,n){var r=Zm(t,"a","where"),a=Zm(n,"b","where"),i=Zm(e,"condition","where","bool"),o=vy(vy(i.shape,r.shape),a.shape),s={condition:cx(i,o),t:cx(r,o),e:cx(a,o)};return zm.runKernel(Op,s)}});var Fx=Qm({zerosLike_:function(e){var t={x:Zm(e,"x","zerosLike")};return zm.runKernel(hh,t)}});var Px=Qm({divNoNan_:function(e,t){var n=Zm(e,"a","div"),r=Zm(t,"b","div"),a=u(Cm(n,r),2);n=a[0],r=a[1];var i=vb(n,r),o=Fx(i),s=Mx(r,o);return Ox(s,o,i)}});var Dx=Qm({dot_:function(e,t){var n=Zm(e,"t1","dot"),r=Zm(t,"t2","dot");ml((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks ".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(ml(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got ".concat(a," and ").concat(i,".")})),1===n.rank&&1===r.rank){var o=Kb(n,[1,-1]),s=Kb(r,[-1,1]),u=Bg(o,s);return Kb(u,[])}if(1===n.rank&&2===r.rank){var c=Kb(n,[1,-1]),l=Kb(r,[r.shape[0],r.shape[1]]),d=Bg(c,l);return Kb(d,[d.size])}if(2===n.rank&&1===r.rank){var f=Kb(r,[-1,1]),p=Bg(n,f);return Kb(p,[p.size])}var h=Kb(r,[r.shape[0],r.shape[1]]);return Bg(n,h)}});var Lx=Qm({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map((function(e,t){return Zm(e,"tensors".concat(t),"einsum")})),i={equation:e};return zm.runKernel(sf,a,i)}});var zx=Qm({elu_:function(e){var t={x:Zm(e,"x","elu","float32")};return zm.runKernel(uf,t)}});var Bx=Qm({erf_:function(e){var t=Zm(e,"x","erf");ml("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=lg(t,"float32"));var n={x:t};return zm.runKernel(lf,n)}});function Wx(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function jx(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}function Vx(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function Ux(e,t){return jx(e,t.map((function(e){return 1})),t)}function Hx(e,t,n){ml(Wx(t,n),(function(){return"".concat(e," supports only inner-most axes for now. Got axes ").concat(t," and rank-").concat(n," input.")}))}function Gx(e,t){if(Wx(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function qx(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function Kx(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var Xx=Qm({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Zm(e,"x","max")},a={reductionIndices:t,keepDims:n};return zm.runKernel(Gf,r,a)}});var Zx=Qm({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Zm(e,"x","min")},a={axis:t,keepDims:n};return zm.runKernel($f,r,a)}});var Yx=Qm({pow_:function(e,t){var n=Zm(e,"base","pow"),r=Zm(t,"exp","pow"),a=u(Cm(n,r),2),i={a:n=a[0],b:r=a[1]};return zm.runKernel(mp,i)}});function Jx(e,t){if((Dl(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Dl(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return ev(e,[],[],t)}var Qx=Qm({sqrt_:function(e){var t={x:Zm(e,"x","sqrt","float32")};return zm.runKernel(jp,t)}});var $x=Qm({square_:function(e){var t=Zm(e,"x","square");return zm.runKernel("Square",{x:t},{})}});var eA=Qm({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Zm(e,"x","sum");"bool"===r.dtype&&(r=lg(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return zm.runKernel(Vp,a,i)}});function tA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return yb(e);if(1!==e.rank&&null===n)return tA(Kb(e,[-1]),t,n);if(1===e.rank||"number"==typeof n||Array.isArray(n)&&1===n.length){if(1===t)return eA(yb(e),n);if(t===1/0)return Xx(yb(e),n);if(t===-1/0)return Zx(yb(e),n);if("euclidean"===t||2===t)return Qx(eA(Yx(yb(e),Jx(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return Xx(eA(yb(e),n[0]),n[1]-1);if(t===1/0)return Xx(eA(yb(e),n[1]),n[0]);if(t===-1/0)return Zx(eA(yb(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Qx(eA($x(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var nA=Qm({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=tA(e=Zm(e,"x","norm"),t,n),i=a.shape;if(r){var o=Tl(n,e.shape);i=Ux(a.shape,o)}return Kb(a,i)}});var rA=Qm({euclideanNorm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return nA(e,"euclidean",t,n)}});var aA=Qm({exp_:function(e){var t={x:Zm(e,"x","exp")};return zm.runKernel(ff,t)}});var iA=Qm({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Zm(e,"x","expandDims","string_or_numeric");ml(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return zm.runKernel(pf,r,a)}});var oA=Qm({expm1_:function(e){var t={x:Zm(e,"x","expm1")};return zm.runKernel(hf,t)}});var sA=Qm({tile_:function(e,t){var n=Zm(e,"x","tile","string_or_numeric");ml(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," must match length of reps ").concat(t,".")}));var r={x:n},a={reps:t};return zm.runKernel(oh,r,a)}});var uA=Qm({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=cg([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=Kb(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return sA(iA(s,0),[n[0],1,1]);if(2===n.length)return sA(iA(iA(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return sA(iA(iA(iA(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received ".concat(n.length,"D."))}});function cA(e,t,n){var r={shape:e,value:t,dtype:n};return zm.runKernel(vf,{},r)}var lA=Qm({floor_:function(e){var t={x:Zm(e,"x","floor","float32")};return zm.runKernel(yf,t)}});var dA=Qm({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=Zm(e,"x","gather"),i=Zm(t,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return zm.runKernel(Af,o,s)}});var fA=Qm({greater_:function(e,t){var n,r=Zm(e,"a","greater","string_or_numeric"),a=Zm(t,"b","greater","string_or_numeric");r=(n=u(Cm(r,a),2))[0],a=n[1],vy(r.shape,a.shape);var i={a:r,b:a};return zm.runKernel(wf,i)}});var pA=Qm({greaterEqual_:function(e,t){var n,r=Zm(e,"a","greaterEqual","string_or_numeric"),a=Zm(t,"b","greaterEqual","string_or_numeric");r=(n=u(Cm(r,a),2))[0],a=n[1],vy(r.shape,a.shape);var i={a:r,b:a};return zm.runKernel(Sf,i)}});var hA=Qm({isFinite_:function(e){var t={x:Zm(e,"x","isFinite")};return zm.runKernel(Nf,t)}});var mA=Qm({isInf_:function(e){var t={x:Zm(e,"x","isInf")};return zm.runKernel(Tf,t)}});var vA=Qm({isNaN_:function(e){var t={x:Zm(e,"x","isNaN")};return zm.runKernel(_f,t)}});var gA=Qm({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n={x:Zm(e,"x","leakyRelu")},r={alpha:t};return zm.runKernel(Rf,n,r)}});var yA=Qm({less_:function(e,t){var n,r=Zm(e,"a","less","string_or_numeric"),a=Zm(t,"b","less","string_or_numeric");r=(n=u(Cm(r,a),2))[0],a=n[1],vy(r.shape,a.shape);var i={a:r,b:a};return zm.runKernel(Mf,i)}});var bA=Qm({lessEqual_:function(e,t){var n,r=Zm(e,"a","lessEqual","string_or_numeric"),a=Zm(t,"b","lessEqual","string_or_numeric");r=(n=u(Cm(r,a),2))[0],a=n[1],vy(r.shape,a.shape);var i={a:r,b:a};return zm.runKernel(Of,i)}});function xA(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return zm.runKernel(Ff,{},r)}var AA=Qm({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=Zm(e,"x","localResponseNormalization");ml(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")})),ml(kl(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ".concat(t,".")}));var o=i,s=!1;3===i.rank&&(s=!0,o=Kb(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var u={x:o},c={depthRadius:t,bias:n,alpha:r,beta:a},l=zm.runKernel(Uf,u,c);return s?Kb(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var kA=Qm({log_:function(e){var t={x:Zm(e,"x","log","float32")};return zm.runKernel(Pf,t)}});var wA=Qm({log1p_:function(e){var t={x:Zm(e,"x","log1p")};return zm.runKernel(Df,t)}});function SA(e){return ml(Ul(e),(function(){return"The f passed in grad(f) must be a function"})),function(t,n){var r=Zm(t,"x","tf.grad","string_or_numeric"),a=null!=n?Zm(n,"dy","tf.grad"):null;return zm.tidy((function(){var t=zm.gradients((function(){return e(r)}),[r],a),n=t.value,i=t.grads;return null!=a&&vl(n.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),_A(i),i[0]}))}}function IA(e){return ml(Ul(e),(function(){return"The f passed in grads(f) must be a function"})),function(t,n){ml(Array.isArray(t),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var r=Ym(t,"args","tf.grads","string_or_numeric"),a=null!=n?Zm(n,"dy","tf.grads"):null;return zm.tidy((function(){var t=zm.gradients((function(){return e.apply(void 0,Tn(r))}),r,a),n=t.value,i=t.grads;return null!=a&&vl(n.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),_A(i),i}))}}function EA(e){return ml(Ul(e),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(t,n){ml(t instanceof vm,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),ml(null==n||n instanceof vm,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=zm.gradients((function(){return e(t)}),[t],n),a=r.grads,i=r.value;return _A(a),{grad:a[0],value:i}}}function CA(e){return ml(Ul(e),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(t,n){ml(Array.isArray(t)&&t.every((function(e){return e instanceof vm})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),ml(null==n||n instanceof vm,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var r=zm.gradients((function(){return e.apply(void 0,Tn(t))}),t,n);return null!=n&&vl(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),_A(r.grads),r}}function NA(e,t){ml(Ul(e),(function(){return"The f passed in variableGrads(f) must be a function"})),ml(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof gm})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],zm.registeredVariables)t.push(zm.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,i=t.length;t=t.filter((function(e){return e.trainable})),ml(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the ".concat(i," variables is trainable.")}));var o=zm.gradients(e,t,null,!0),s=o.value,u=o.grads;ml(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),ml(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-".concat(s.rank," tensor")}));var c={};return t.forEach((function(e,t){null!=u[t]&&(c[e.name]=u[t])})),null!=a&&a.forEach((function(e){return c[e.name]=null})),{value:s,grads:c}}function TA(e){return zm.customGrad(e)}function _A(e){if(e.filter((function(e){return null==e})).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}var RA=Qm({softplus_:function(e){var t={x:Zm(e,"x","softplus")};return zm.runKernel(Wp,t)}});var MA=Qm({logSigmoid_:function(e){var t=Zm(e,"x","logSigmoid");return TA((function(e){return{value:cy(RA(cy(e))),gradFunc:function(t){return gb(t,Jb(cy(e)))}}}))(t)}});var OA=Qm({sub_:function(e,t){var n=Zm(e,"a","sub"),r=Zm(t,"b","sub"),a=u(Cm(n,r),2),i={a:n=a[0],b:r=a[1]};return zm.runKernel(rh,i)}});var FA=Qm({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Zm(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(n.rank," and axis was ").concat(t));return TA((function(e,n){var r=Xx(e,t,!0),a=OA(e,r),i=OA(lg(a,"float32"),kA(eA(aA(a),t,!0)));return n([i]),{value:i,gradFunc:function(e,n){var r=u(n,1)[0],a=aA(r);return OA(e,gb(eA(e,t,!0),a))}}}))(n)}});var PA=Qm({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Zm(e,"x","logSumExp"),a=Tl(t,r.shape),i=Xx(r,a,!0),o=OA(r,i),s=aA(o),u=eA(s,a),c=kA(u),l=hb(Kb(i,c.shape),c);if(n){var d=Ux(l.shape,a);return Kb(l,d)}return l}});var DA=Qm({logicalAnd_:function(e,t){var n=Zm(e,"a","logicalAnd","bool"),r=Zm(t,"b","logicalAnd","bool");vy(n.shape,r.shape);var a={a:n,b:r};return zm.runKernel(Lf,a)}});var LA=Qm({logicalNot_:function(e){var t={x:Zm(e,"x","logicalNot","bool")};return zm.runKernel(zf,t)}});var zA=Qm({logicalOr_:function(e,t){var n=Zm(e,"a","logicalOr","bool"),r=Zm(t,"b","logicalOr","bool");vy(n.shape,r.shape);var a={a:n,b:r};return zm.runKernel(Bf,a)}});var BA=Qm({logicalXor_:function(e,t){var n=Zm(e,"a","logicalXor","bool"),r=Zm(t,"b","logicalXor","bool");return vy(n.shape,r.shape),DA(zA(e,t),LA(DA(e,t)))}}),WA=2147483648;var jA=Qm({searchSorted_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"left",r=Zm(e,"sortedSequence","searchSorted"),a=Zm(t,"values","searchSorted"),i=r.shape[r.shape.length-1],o=a.shape[a.shape.length-1],s=Kb(r,[-1,i]),u=Kb(a,[-1,o]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==u.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(bl(u.shape)>=WA)throw new Error("values tensor size must less than ".concat(WA));if(s.shape[1]>=WA)throw new Error("trailing dim_size must less than ".concat(WA," for int32 output type, was ").concat(s.shape[1]));var c={sortedSequence:s,values:u},l={side:n};return zm.runKernel(Mp,c,l)}});function VA(e,t){return jA(e,t,"left")}var UA=Qm({maxPool_:function(e,t,n,r,a){var i=Zm(e,"x","maxPool"),o=i,s=!1;3===i.rank&&(s=!0,o=Kb(i,[1,i.shape[0],i.shape[1],i.shape[2]])),ml(4===o.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")})),ml(Hb(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(n," and dilations '").concat(1,"'")})),qb("maxPool",r,a);var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=zm.runKernel(Kf,u,c);return s?Kb(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var HA=Qm({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=Zm(e,"x","maxPool3d"),s=o,u=!1;4===o.rank&&(u=!0,s=Kb(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),ml(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),ml("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ".concat(i)})),qb("maxPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=zm.runKernel(Zf,c,l);return u?Kb(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var GA=Qm({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i={x:Zm(e,"x","maxPoolWithArgmax")},o={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},s=zm.runKernel(Jf,i,o);return{result:s[0],indexes:s[1]}}});var qA=Qm({maximum_:function(e,t){var n,r=Zm(e,"a","maximum"),a=Zm(t,"b","maximum");r=(n=u(Cm(r,a),2))[0],a=n[1],"bool"===r.dtype&&(r=lg(r,"int32"),a=lg(a,"int32")),vy(r.shape,a.shape);var i={a:r,b:a};return zm.runKernel(qf,i)}});var KA=Qm({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={x:Zm(e,"x","mean")},a={axis:t,keepDims:n};return zm.runKernel(Qf,r,a)}});function XA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=XA(e,"float32"),r=XA(e,"float32");return $m(n,r)}var a=Zl(bl(e),t);return zm.makeTensor(a,e,t)}function ZA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=ZA(e,"float32"),r=XA(e,"float32");return $m(n,r)}var a=Xl(bl(e),t);return zm.makeTensor(a,e,t)}function YA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.indexing,a=void 0===r?"xy":r;if("xy"!==a&&"ij"!==a)throw new TypeError("".concat(a," is not a valid third argument to meshgrid"));if(void 0===e)return[];var i=Zm(e,"x","meshgrid",e instanceof vm?e.dtype:"float32");if(void 0===t)return[i];var o=Zm(t,"y","meshgrid",t instanceof vm?t.dtype:"float32"),s=bl(i.shape),u=bl(o.shape);return"xy"===a?(i=Kb(i,[1,-1]),o=Kb(o,[-1,1]),[Bg(ZA([u,1],i.dtype),i),Bg(o,ZA([1,s],o.dtype))]):(i=Kb(i,[-1,1]),o=Kb(o,[1,-1]),[Bg(i,ZA([1,u],i.dtype)),Bg(ZA([s,1],o.dtype),o)])}var JA=Qm({minimum_:function(e,t){var n,r=Zm(e,"a","minimum"),a=Zm(t,"b","minimum");r=(n=u(Cm(r,a),2))[0],a=n[1],"bool"===r.dtype&&(r=lg(r,"int32"),a=lg(a,"int32")),vy(r.shape,a.shape);var i={a:r,b:a};return zm.runKernel(ep,i)}});var QA=Qm({mirrorPad_:function(e,t,n){ml("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. Got ".concat(n,".")}));var r=Zm(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");ml(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". Got ").concat(t.length,".")}));for(var a="reflect"===n?1:0,i=function(e){ml(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),ml(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal to ").concat(r.shape[e]-a," or less than 0 for input of shape ").concat(r.shape)}))},o=0;o<r.rank;o++)i(o);var s={paddings:t,mode:n},u={x:r};return zm.runKernel(tp,u,s)}});var $A=Qm({mod_:function(e,t){var n=Zm(e,"a","mod"),r=Zm(t,"b","mod"),a=u(Cm(n,r),2),i={a:n=a[0],b:r=a[1]};return zm.runKernel(np,i)}});var ek=Qm({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Tl(t,(e=Zm(e,"x","moments")).shape),a=KA(e,r,n),i=a.shape;n||(i=Ux(a.shape,r));var o=$x(OA(lg(e,"float32"),Kb(a,i))),s=KA(o,r,n);return{mean:a,variance:s}}});var tk=Qm({multiRNNCell_:function(e,t,n,r){for(var a=Zm(t,"data","multiRNNCell"),i=Ym(n,"c","multiRNNCell"),o=Ym(r,"h","multiRNNCell"),s=a,u=[],c=0;c<e.length;c++){var l=e[c](s,i[c],o[c]);u.push(l[0]),u.push(l[1]),s=l[1]}for(var d=[],f=[],p=0;p<u.length;p+=2)d.push(u[p]),f.push(u[p+1]);return[d,f]}});var nk=Qm({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Zm(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got ".concat(i,"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(o));n=n||Math.random();var s={logits:1===o?Kb(a,[1,-1]):a},u={numSamples:t,seed:n,normalized:r},c=zm.runKernel(rp,s,u);return 1===o?Kb(c,[c.size]):c}});var rk=Qm({notEqual_:function(e,t){var n,r=Zm(e,"a","notEqual","string_or_numeric"),a=Zm(t,"b","notEqual","string_or_numeric");r=(n=u(Cm(r,a),2))[0],a=n[1],vy(r.shape,a.shape);var i={a:r,b:a};return zm.runKernel(op,i)}});var ak=Qm({onesLike_:function(e){var t={x:Zm(e,"x","onesLike")};return zm.runKernel(lp,t)}});var ik=Qm({outerProduct_:function(e,t){var n=Zm(e,"v1","outerProduct"),r=Zm(t,"v2","outerProduct");ml(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks ".concat(n.rank," and ").concat(r.rank,".")}));var a=Kb(n,[-1,1]),i=Kb(r,[1,-1]);return Bg(a,i)}});var ok=Qm({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Zm(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},i={x:r};return zm.runKernel(pp,i,a)}});var sk=Qm({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ml(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),ok(e,[t],n)}});var uk=Qm({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ml(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),ok(e,t,n)}});var ck=Qm({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ml(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),ok(e,t,n)}});var lk=Qm({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ml(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),ok(e,t,n)}});var dk=Qm({spaceToBatchND_:function(e,t,n){var r=Zm(e,"x","spaceToBatchND");ml(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),ml(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),ml(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},i={blockShape:t,paddings:n};return zm.runKernel(Up,a,i)}});var fk=Qm({pool_:function(e,t,n,r,a,i,o){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var s=Zm(e,"x","maxPool"),c=s,l=!1;3===s.rank&&(l=!0,c=Kb(s,[1,s.shape[0],s.shape[1],s.shape[2]])),ml(Hb(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides ".concat(i," and dilations '").concat(a,"'")}));var d,f=Mb(c.shape,t,i,a,r),p=[f.dilationHeight,f.dilationWidth];d="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),a=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],a[t]]}))}([f.filterHeight,f.filterWidth],p):[[0,0],[0,0]];var h=1===p[0]&&1===p[1],m=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),c=t.map((function(e,t){return[0,o[t]]}));return[u,c]}([f.inHeight,f.inWidth],p,d),v=u(m,2),g=v[0],y=v[1],b=h?r:"valid",x=h?c:dk(c,p,g),A=("avg"===n?function(){return Xb(x,t,i,b,o)}:function(){return UA(x,t,i,b,o)})(),k=h?A:tx(A,p,y);return l?Kb(k,[k.shape[1],k.shape[2],k.shape[3]]):k}});var pk=Qm({prelu_:function(e,t){var n={x:Zm(e,"x","prelu"),alpha:Zm(t,"alpha","prelu")};return zm.runKernel(vp,n)}});var hk=Qm({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Zm(e,"x","prod");"bool"===r.dtype&&(r=lg(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return zm.runKernel(gp,a,i)}});var mk=Qm({rand_:function(e,t,n){var r=bl(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return zm.makeTensor(a,e,n)}}),vk=Lc(Zc()),gk=function(){function e(t,n,r,a,i){Ye(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=vk.alea(o.toString())}return Qe(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,(!this.truncated||this.isValidTruncated(t))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),yk=function(){function e(t,n,r,a){Ye(this,e),this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=vk.alea(i.toString()),this.randn=new gk(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return Qe(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),bk=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(Ye(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==i&&(i=Math.random()),"number"==typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=vk.alea(i)}return Qe(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var xk=Qm({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new yk(t,n,r,a),o=cg(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var Ak=Qm({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new gk(t,n,r,!1,a),o=cg(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var kk=Qm({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0,i=cg(e,r),o=new bk(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});function wk(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return zm.runKernel(yp,{},a)}var Sk=Qm({reciprocal_:function(e){var t={x:Zm(e,"x","reciprocal")};return zm.runKernel(xp,t)}});var Ik=Qm({relu_:function(e){var t={x:Zm(e,"x","relu")};return zm.runKernel(Ap,t)}});var Ek=Qm({relu6_:function(e){var t={x:Zm(e,"x","relu6")};return zm.runKernel(Cp,t)}});var Ck=Qm({reverse_:function(e,t){var n={x:Zm(e,"x","reverse")},r={dims:t};return zm.runKernel(Np,n,r)}});var Nk=Qm({reverse1d_:function(e){var t=Zm(e,"x","reverse");return ml(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),Ck(t,0)}});var Tk=Qm({reverse2d_:function(e,t){var n=Zm(e,"x","reverse");return ml(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),Ck(n,t)}});var _k=Qm({reverse3d_:function(e,t){var n=Zm(e,"x","reverse");return ml(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),Ck(n,t)}});var Rk=Qm({reverse4d_:function(e,t){var n=Zm(e,"x","reverse");return ml(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),Ck(n,t)}});var Mk=Qm({round_:function(e){var t={x:Zm(e,"x","round")};return zm.runKernel(Tp,t)}});var Ok=Qm({rsqrt_:function(e){var t={x:Zm(e,"x","rsqrt","float32")};return zm.runKernel(_p,t)}});var Fk=Qm({selu_:function(e){var t={x:Zm(e,"x","selu")};return zm.runKernel(Fp,t)}});var Pk=Qm({separableConv2d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=Zm(e,"x","separableConv2d"),u=Zm(t,"depthwiseFilter","separableConv2d"),c=Zm(n,"pointwiseFilter","separableConv2d"),l=s,d=!1;if(3===s.rank&&(d=!0,l=Kb(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");ml(4===l.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank ".concat(l.rank,".")})),ml(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank ".concat(u.rank,".")})),ml(4===c.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank ".concat(u.rank,".")})),ml(1===c.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ".concat(c.shape[0],".")})),ml(1===c.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ".concat(c.shape[1],".")}));var f=u.shape[2],p=u.shape[3];ml(c.shape[2]===f*p,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be ".concat(f*p,", but got ").concat(c.shape[2],".")}));var h=Tx(l,u,r,a,o,i),m=vx(h,c,1,"valid",o);return d?Kb(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});function Dk(){return Dk=ct(st().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,p;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zm(t,"x","setdiff1d"),a=Zm(n,"y","setdiff1d"),ml(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),ml(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),ml(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=4,r.data();case 4:return i=e.sent,e.next=7,a.data();case 7:for(o=e.sent,s=new Set(o),u=0,c=0;c<i.length;c++)s.has(i[c])||u++;for(l=new pm([u],r.dtype),d=new pm([u],"int32"),f=0,p=0;f<i.length;f++)s.has(i[f])||(l.values[p]=i[f],d.values[p]=f,p++);return e.abrupt("return",[l.toTensor(),d.toTensor()]);case 14:case"end":return e.stop()}}),e)}))),Dk.apply(this,arguments)}var Lk=function(e,t){return Dk.apply(this,arguments)};var zk=Qm({sign_:function(e){var t={x:Zm(e,"x","sign")};return zm.runKernel(zp,t)}});var Bk=Qm({sin_:function(e){var t={x:Zm(e,"x","sin","float32")};return zm.runKernel(Dp,t)}});var Wk=Qm({sinh_:function(e){var t={x:Zm(e,"x","sinh")};return zm.runKernel(Lp,t)}});var jk=Qm({slice1d_:function(e,t,n){var r=Zm(e,"x","slice1d");return ml(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),Qb(r,[t],[n])}});var Vk=Qm({slice2d_:function(e,t,n){var r=Zm(e,"x","slice2d");return ml(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),Qb(r,t,n)}});var Uk=Qm({slice3d_:function(e,t,n){var r=Zm(e,"x","slice3d");return ml(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),Qb(r,t,n)}});var Hk=Qm({slice4d_:function(e,t,n){var r=Zm(e,"x","slice4d");return ml(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),Qb(r,t,n)}});var Gk=Qm({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Zm(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return zm.runKernel(Gp,r,a)}});var qk=Qm({fft_:function(e){ml("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got ".concat(e.dtype,".")}));var t={input:e};return zm.runKernel(mf,t)}});var Kk=Qm({ifft_:function(e){ml("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got ".concat(e.dtype,".")}));var t={input:e};return zm.runKernel(Ef,t)}});var Xk=Qm({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=Kb(e,[r,n]);t=Kk(a)}else{var i=[r,2*(n-1)],o=Kb(ly(e),[r,n]),s=Kb(uy(e),[r,n]),u=Ck(Qb(o,[0,1],[r,n-2]),1),c=gb(Ck(Qb(s,[0,1],[r,n-2]),1),Jx(-1)),l=Yb([o,u],1),d=Yb([s,c],1),f=Kb($m(l,d),[i[0],i[1]]);t=Kk(f)}if(t=ly(t),3===e.rank&&0!==e.shape[0]){var p=t,h=e.shape[0];t=Kb(t,[h,t.shape[0]/h,t.shape[1]]),p.dispose()}return t}});var Zk=Qm({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={x:Zm(e,"x","split")},a={numOrSizeSplits:t,axis:n};return zm.runKernel(Hp,r,a)}});var Yk=Qm({rfft_:function(e,t){ml("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=Qb(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=Yb([e,XA(s)],e.shape.length-1),r=t}else n=e;var u=Fx(n),c=Kb($m(n,u),[a,r]),l=qk(c),d=Math.floor(r/2)+1,f=ly(l),p=uy(l),h=Zk(f,[d,r-d],f.shape.length-1),m=Zk(p,[d,r-d],p.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=d,Kb($m(h[0],m[0]),v)}});var Jk=Qm({squaredDifference_:function(e,t){var n,r=Zm(e,"a","squaredDifference"),a=Zm(t,"b","squaredDifference");r=(n=u(Cm(r,a),2))[0],a=n[1],vy(r.shape,a.shape);var i={a:r,b:a};return zm.runKernel(Jp,i,{})}});var Qk=Qm({squeeze_:function(e,t){var n=Zm(e,"x","squeeze");return Kb(n,_l(n.shape,t).newShape)}});var $k=Qm({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Ym(e,"tensors","stack","string_or_numeric");ml(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&ml(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return zm.runKernel(fp,r,a)}});var ew=Qm({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={x:Zm(e,"x","step")},r={alpha:t};return zm.runKernel(mh,n,r)}});var tw=Qm({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c={x:Zm(e,"x","stridedSlice","string_or_numeric")},l={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return zm.runKernel($p,c,l)}});var nw=Qm({tan_:function(e){var t={x:Zm(e,"x","tan","float32")};return zm.runKernel(ah,t)}});function rw(e,t){gl(e);var n=qm(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return ev(e,null,n,t)}function aw(e,t,n){if(gl(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=qm(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return ev(e,t,r,n)}function iw(e,t,n){if(gl(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=qm(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return ev(e,t,r,n)}function ow(e,t,n){if(gl(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=qm(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return ev(e,t,r,n)}function sw(e,t,n){if(gl(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=qm(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return ev(e,t=t||r,r,n)}var uw=Qm({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Zm(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") but got ").concat(t));var i={x:r},o={k:t,sorted:n},s=zm.runKernel(sh,i,o),c=u(s,2),l=c[0],d=c[1];return{values:l,indices:d}}});var cw=Qm({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new gk(t,n,r,!0,a),o=cg(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var lw=Qm({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Zm(e,"x","unique","string_or_numeric");ml(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},i=zm.runKernel(lh,r,a),o=u(i,2),s=o[0],c=o[1];return{values:s,indices:c}}});var dw=Qm({unsortedSegmentSum_:function(e,t,n){var r=Zm(e,"x","unsortedSegmentSum"),a=Zm(t,"segmentIds","unsortedSegmentSum","int32");ml(kl(n),(function(){return"numSegments must be of dtype int"}));var i={x:r,segmentIds:a},o={numSegments:n};return zm.runKernel(fh,i,o)}});var fw=Qm({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Zm(e,"x","unstack","string_or_numeric");ml(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return zm.runKernel(dh,r,a)}});function pw(e,t){return jA(e,t,"right")}function hw(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return zm.makeVariable(e,t,n,r)}function mw(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=cg(e,"int32"),i=cg([n.length,e.length],"int32"),o=0;o<n.length;o++){var s=a.indexToLoc(n[o]),u=o*e.length;i.values.set(s,u)}return i.toTensor()}function vw(){return vw=ct(st().mark((function e(t){var n,r,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Zm(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=mw(n.shape,r),e.abrupt("return",(t!==n&&n.dispose(),a));case 6:case"end":return e.stop()}}),e)}))),vw.apply(this,arguments)}var gw=function(e){return vw.apply(this,arguments)};function yw(){return yw=ct(st().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,p,h,m,v;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=Zm(t,"tensor","boolMask"),i=Zm(n,"mask","boolMask","bool"),o=null==r?0:r,s=i.rank,u=a.shape,ml(s>0,(function(){return"mask cannot be scalar"})),vl(u.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=o;l<o+s;l++)c*=u[l];return d=u.slice(0,o).concat([c],u.slice(o+s)),f=Kb(a,d),p=Kb(i,[-1]),e.next=9,gw(p);case 9:return h=e.sent,m=Qk(h,[1]),v=dA(f,m,o),e.abrupt("return",(t!==a&&a.dispose(),n!==i&&i.dispose(),m.dispose(),f.dispose(),p.dispose(),h.dispose(),v));case 13:case"end":return e.stop()}}),e)}))),yw.apply(this,arguments)}var bw=function(e,t,n){return yw.apply(this,arguments)};var xw=Qm({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=Zm(e,"v","movingAverage"),o=Zm(t,"x","movingAverage"),s=Zm(n,"decay","movingAverage");Nm(i,o),ml(Al(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var u=Jx(1),c=OA(u,s),l=gb(OA(o,i),c);if(a){ml(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var d=Zm(r,"step","movingAverage");l=vb(l,OA(u,Yx(s,d)))}return hb(i,l)}});var Aw=Qm({scatterND_:function(e,t,n){var r=Zm(e,"indices","scatterND","int32"),a=Zm(t,"updates","scatterND");Ry(a,r,n);var i={indices:r,updates:a},o={shape:n};return zm.runKernel(Rp,i,o)}});function kw(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:, ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape ".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var ww=Qm({sparseToDense_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=Zm(e,"sparseIndices","sparseToDense","int32"),i=Zm(t,"sparseValues","sparseToDense","string_or_numeric"),o=Zm(r,"defaultValue","sparseToDense",i.dtype);kw(a,i,n,o);var s={sparseIndices:a,sparseValues:i,defaultValue:o},u={outputShape:n};return zm.runKernel(Yp,s,u)}});var Sw=Qm({gatherND_:function(e,t){var n=Zm(t,"indices","gatherND","int32"),r={params:Zm(e,"x","gatherND","string_or_numeric"),indices:n};return zm.runKernel(kf,r)}});var Iw=Qm({dropout_:function(e,t,n,r){var a=Zm(e,"x","dropout");if(ml("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a ".concat(a.dtype," tensor instead.")})),ml(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof vm?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(Al(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=vb(lA(hb(kk(i,0,1,"float32",r),o)),o);return gb(a,s)}});function Ew(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Cw(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return rw(a,"float32")}function Nw(){return Nw=ct(st().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,p,h,m,v,g,y=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>2&&void 0!==y[2]?y[2]:1,a=Zm(t,"predictions","inTopK"),i=Zm(n,"targets","inTopK"),ml(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got ".concat(a.rank)})),ml(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank ".concat(a.rank," and targets rank ").concat(i.rank)})),vl(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],ml(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension (".concat(o,"), but got ").concat(r)})),e.next=7,a.data();case 7:return s=e.sent,e.next=10,i.data();case 10:u=e.sent,c=s.length/o,l=o,d=Rl("bool",c),f=0;case 15:if(!(f<c)){e.next=30;break}for(p=f*l,h=s.subarray(p,p+l),m=[],v=0;v<h.length;v++)m.push({value:h[v],index:v});m.sort((function(e,t){return t.value-e.value})),d[f]=0,g=0;case 20:if(!(g<r)){e.next=27;break}if(m[g].index!==u[f]){e.next=24;break}return d[f]=1,e.abrupt("break",27);case 24:g++,e.next=20;break;case 27:f++,e.next=15;break;case 30:return e.abrupt("return",(t!==a&&a.dispose(),n!==i&&i.dispose(),tv(d,i.shape,"bool")));case 31:case"end":return e.stop()}}),e)}))),Nw.apply(this,arguments)}var Tw=function(e,t){return Nw.apply(this,arguments)},_w={};Dc(_w,{conv2d:function(){return Dw},depthwiseConv2d:function(){return Bw},matMul:function(){return Ww}});var Rw=Qm({conv2DBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Kb(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=Kb(t,[1,t.shape[0],t.shape[1],t.shape[2]])),ml(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape ".concat(s.shape,".")})),ml(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape ".concat(u.shape,".")})),ml(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got ".concat(n,".")}));var c="NHWC"===i?s.shape[3]:s.shape[1],l="NHWC"===i?u.shape[3]:u.shape[1];ml(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(c,") must match input depth in filter (").concat(n[2],".")})),ml(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(l,") must match output depth for filter (").concat(n[3],").")})),qb("conv2dDerFilter",a,o);var d={x:s,dy:u},f={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return zm.runKernel(Wd,d,f)}});function Mw(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return gb(e,ew(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function Ow(e,t){var n=t,r=my(e.shape,t.shape);return r.length>0&&(n=eA(n,r)),Kb(n,e.shape)}function Fw(e,t,n,r){if("linear"===t)return e;if("relu"===t)return Ik(e);if("elu"===t)return zx(e);if("relu6"===t)return Ek(e);if("prelu"===t)return pk(e,n);if("leakyrelu"===t)return gA(e,r);if("sigmoid"===t)return Jb(e);throw new Error("Unknown fused activation ".concat(t,"."))}var Pw=function(e,t){return!(e>0)||"linear"===t};var Dw=Qm({fusedConv2d_:function(e){var t,n=e.x,r=e.filter,a=e.strides,i=e.pad,o=e.dataFormat,s=void 0===o?"NHWC":o,c=e.dilations,l=void 0===c?[1,1]:c,d=e.dimRoundingMode,f=e.bias,p=e.activation,h=void 0===p?"linear":p,m=e.preluActivationWeights,v=e.leakyreluAlpha;if(h=h||"linear",!1===Pw(zm.state.gradientDepth,h)){ml("NHWC"===s,(function(){return"Error in fused conv2d: got dataFormat of ".concat(s," but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.")}));var g=vx(n,r,a,i,s,l,d);return null!=f&&(g=hb(g,f)),Fw(g,h,m,v)}var y=Zm(n,"x","conv2d","float32"),b=Zm(r,"filter","conv2d","float32"),x=y,A=!1;3===y.rank&&(A=!0,x=Kb(y,[1,y.shape[0],y.shape[1],y.shape[2]])),ml(4===x.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank ".concat(x.rank,".")})),ml(4===b.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank ".concat(b.rank,".")})),qb("fused conv2d",i,d);var k="NHWC"===s?x.shape[3]:x.shape[1];ml(b.shape[2]===k,(function(){return"Error in conv2d: depth of input (".concat(k,") must match input depth for filter ").concat(b.shape[2],".")})),ml(Hb(a,l),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides ".concat(a," and dilations '").concat(l,"'")}));var w,S,I=Fb(x.shape,b.shape,a,l,i,d);if(null!=f&&(t=u(Cm(w=Zm(f,"bias","fused conv2d"),y),1),w=t[0],"NHWC"===s?vy(I.outShape,w.shape):(ml(w.shape.length<=1,(function(){return"Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-".concat(w.shape.length,".")})),ml(0===w.shape.length||w.shape[0]===I.outChannels||1===w.shape[0],(function(){return"Error in fused conv2d: bias shape (".concat(w.shape,") is not compatible with the number of output channels (").concat(I.outChannels,")")})))),null!=m){if(ml((g=m.shape).length<=1||3===g.length,(function(){return"Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-".concat(g.length,".")})),1===g.length)ml(1===g[0]||g[0]===I.outChannels,(function(){return"Error in fused conv2d: PReLU activation weights (".concat(g,") is not compatible with the number of output channels (").concat(I.outChannels,").")}));else if(3===g.length)try{vy(g,I.outShape)}catch(_){var E="Error in fused conv2d: PReLU activation weights (".concat(g,") is not compatible with the output shape of the conv2d (").concat(I.outShape,").");throw Error(E)}S=Zm(m,"prelu weights","fused conv2d")}var C=function(e,t){ml("NHWC"===s,(function(){return"Error in gradient of fused conv2D: got dataFormat of ".concat(s," but only NHWC is currently supported.")}));var n=u(t,4),r=n[0],o=n[1],c=n[2],d=n[3],f=Mw(e,c,h);ml(Ub(l),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(l,"'")}));var p=[yx(o.shape,f,r,a,i),Rw(o,f,r.shape,a,i)];if(null!=d){var m=Ow(d,f);p.push(m)}return p},N={x:x,filter:b,bias:w,preluActivationWeights:S},T={strides:a,pad:i,dataFormat:s,dilations:l,dimRoundingMode:d,activation:h,leakyreluAlpha:v};return null==f?TA((function(e,t,n){var r=zm.runKernel(bh,N,T);return n([t,e,r]),A&&(r=Kb(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:C}}))(x,b):TA((function(e,t,n,r){var a=zm.runKernel(bh,N,T);return r([t,e,a,n]),A&&(a=Kb(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:C}}))(x,b,w)}});var Lw=Qm({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=Kb(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=Kb(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={x:s,dy:u},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return zm.runKernel($d,c,l)}});var zw=Qm({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=Kb(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={dy:s,filter:n},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},d=zm.runKernel(ef,c,l);return u?Kb(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var Bw=Qm({fusedDepthwiseConv2d_:function(e){var t,n=e.x,r=e.filter,a=e.strides,i=e.pad,o=e.dataFormat,s=void 0===o?"NHWC":o,c=e.dilations,l=void 0===c?[1,1]:c,d=e.dimRoundingMode,f=e.bias,p=e.activation,h=void 0===p?"linear":p,m=e.preluActivationWeights,v=e.leakyreluAlpha;if(!1===Pw(zm.state.gradientDepth,h)){var g=Tx(n,r,a,i,s,l,d);return null!=f&&(g=hb(g,f)),Fw(g,h,m,v)}var y=Zm(n,"x","depthwiseConv2d","float32"),b=Zm(r,"filter","depthwiseConv2d","float32"),x=y,A=!1;3===y.rank&&(A=!0,x=Kb(y,[1,y.shape[0],y.shape[1],y.shape[2]])),ml(4===x.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank ".concat(x.rank,".")})),ml(4===b.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank ".concat(b.rank,".")})),ml(x.shape[3]===b.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels (".concat(x.shape[3],") must match the inChannels dimension in filter ").concat(b.shape[2],".")})),null==l&&(l=[1,1]),ml(Hb(a,l),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(a," and dilations '").concat(l,"'")})),qb("fused depthwiseConv2d",i,d);var k,w,S=Fb(x.shape,b.shape,a,l,i,d,!0);null!=f&&(t=u(Cm(k=Zm(f,"bias","fused conv2d"),y),1),k=t[0],vy(S.outShape,k.shape)),null!=m&&(w=Zm(m,"prelu weights","fused depthwiseConv2d"));var I=function(e,t){ml(Ub(l),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '".concat(l,"'")}));var n=u(t,4),r=n[0],o=n[1],s=n[2],c=n[3],f=Mw(e,s,h),p=zw(o.shape,f,r,a,i,l,d),m=Lw(o,f,r.shape,a,i,l,d);return null!=c?[p,m,Ow(k,f)]:[p,m]},E={x:x,filter:b,bias:k,preluActivationWeights:w},C={strides:a,pad:i,dataFormat:s,dilations:l,dimRoundingMode:d,activation:h,leakyreluAlpha:v};return null==f?TA((function(e,t,n){var r=zm.runKernel(xh,E,C);return n([t,e,r]),A&&(r=Kb(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:I}}))(x,b):TA((function(e,t,n,r){var a=zm.runKernel(xh,E,C);return r([t,e,a,n]),A&&(a=Kb(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:I}}))(x,b,k)}});var Ww=Qm({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,s=e.bias,c=e.activation,l=void 0===c?"linear":c,d=e.preluActivationWeights,f=e.leakyreluAlpha,p=void 0===f?.2:f;if(!1===Pw(zm.state.gradientDepth,l)){var h=Bg(t,n,a,o);return null!=s&&(h=hb(h,s)),Fw(h,l,d,p)}var m=Zm(t,"a","fused matMul"),v=Zm(n,"b","fused matMul"),g=u(Cm(m,v),2);m=g[0],v=g[1];var y=a?m.shape[m.rank-2]:m.shape[m.rank-1],b=o?v.shape[v.rank-1]:v.shape[v.rank-2],x=a?m.shape[m.rank-1]:m.shape[m.rank-2],A=o?v.shape[v.rank-2]:v.shape[v.rank-1],k=m.shape.slice(0,-2),w=v.shape.slice(0,-2),S=bl(k),I=bl(w);ml(y===b,(function(){return"Error in fused matMul: inner shapes (".concat(y,") and (").concat(b,") of Tensors with shapes ").concat(m.shape," and ").concat(v.shape," and transposeA=").concat(a," and transposeB=").concat(o," must match.")}));var E,C,N=vy(m.shape.slice(0,-2),v.shape.slice(0,-2)).concat([x,A]),T=Kb(m,a?[S,y,x]:[S,x,y]),_=Kb(v,o?[I,A,b]:[I,b,A]);null!=s&&(E=u(Cm(E=Zm(s,"bias","fused matMul"),m),1)[0],vy(N,E.shape)),null!=d&&(C=Zm(d,"prelu weights","fused matMul"));var R=function(e,t){var n,r,i=u(t,4),c=i[0],d=i[1],f=i[2],p=i[3],h=Mw(Kb(e,f.shape),f,l);return a||o?!a&&o?(n=Bg(h,d,!1,!1),r=Bg(h,c,!0,!1)):a&&!o?(n=Bg(d,h,!1,!0),r=Bg(c,h,!1,!1)):(n=Bg(d,h,!0,!0),r=Bg(h,c,!0,!0)):(n=Bg(h,d,!1,!0),r=Bg(c,h,!0,!1)),null!=s?[n,r,Ow(p,h)]:[n,r]},M={a:T,b:_,bias:E,preluActivationWeights:C},O={transposeA:a,transposeB:o,activation:l,leakyreluAlpha:p};return null==s?TA((function(e,t,n){var r=zm.runKernel(yh,M,O);return n([e,t,r]),{value:Kb(r,N),gradFunc:R}}))(T,_):TA((function(e,t,n,r){var a=zm.runKernel(yh,M,O);return r([e,t,a,n]),{value:Kb(a,N),gradFunc:R}}))(T,_,E)}});var jw=Qm({hammingWindow_:function(e){return Cw(e,.54,.46)}});var Vw=Qm({hannWindow_:function(e){return Cw(e,.5,.5)}});var Uw=Qm({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(Qb(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=Yb([Qb(e,i,t-s),cA([s],a)]);o.push(u),i+=n}return 0===o.length?aw([],[0,t]):Kb(Yb(o),[o.length,t])}});var Hw=Qm({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Vw;null==r&&(r=Ew(t));var i=Uw(e,t,n),o=gb(i,a(t));return Yk(o,r)}});var Gw=Qm({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Zm(e,"image","cropAndResize"),s=Zm(t,"boxes","cropAndResize","float32"),u=Zm(n,"boxInd","cropAndResize","int32"),c=s.shape[0];ml(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank ".concat(o.rank,".")})),ml(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] but had shape ").concat(s.shape,".")})),ml(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] but had shape ").concat(s.shape,".")})),ml(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length ".concat(r.length,".")})),ml(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),ml("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:o,boxes:s,boxInd:u},d={method:a,extrapolationValue:i,cropSize:r};return zm.runKernel(Zd,l,d)}});var qw=Qm({flipLeftRight_:function(e){var t=Zm(e,"image","flipLeftRight","float32");ml(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,but got rank ".concat(t.rank,".")}));var n={image:t};return zm.runKernel(gf,n,{})}});var Kw=Qm({grayscaleToRGB_:function(e){var t=Zm(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];ml(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, but got rank ".concat(t.rank,".")})),ml(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,sA(t,a)}});var Xw=Qm({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=Zm(e,"image","rotateWithOffset","float32");ml(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r};return zm.runKernel(gh,i,o)}});function Zw(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),ml(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),ml(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),ml(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),ml(1===t.rank,(function(){return"scores must be a 1D tensor"})),ml(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", but was ").concat(t.shape[0])})),ml(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var Yw=Qm({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=Zm(e,"boxes","nonMaxSuppression","float32"),o=Zm(t,"scores","nonMaxSuppression","float32"),s=Zw(i,o,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return zm.runKernel(sp,{boxes:i,scores:o},u)}});function Jw(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,a=e.length,i=0,o=!1;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||Qw)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function Qw(e,t){return e>t?1:e<t?-1:0}function $w(e,t,n,r,a){return nS(e,t,n,r,a,0)}function eS(e,t,n,r,a,i){return nS(e,t,n,r,a,0,!1,i,!0)}function tS(e,t,n,r,a,i){return nS(e,t,n,r,a,i,!0)}function nS(e,t,n,r,a,i){for(var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=[],l=0;l<t.length;l++)t[l]>a&&c.push({score:t[l],boxIndex:l,suppressBeginIndex:0});c.sort(iS);for(var d=i>0?-.5/i:0,f=[],p=[];f.length<n&&c.length>0;){var h=c.pop(),m=h.score,v=h.boxIndex,g=h.suppressBeginIndex;if(m<a)break;for(var y=!1,b=f.length-1;b>=g;--b){var x=rS(e,v,f[b]);if(x>=r){y=!0;break}if(h.score=h.score*aS(r,d,x),h.score<=a)break}h.suppressBeginIndex=f.length,y||(h.score===m?(f.push(v),p.push(h.score)):h.score>a&&Jw(c,h,iS))}var A=f.length,k=n-A;s&&k>0&&(f.push.apply(f,Tn(new Array(k).fill(0))),p.push.apply(p,Tn(new Array(k).fill(0))));var w={selectedIndices:f};return o&&(w.selectedScores=p),u&&(w.validOutputs=A),w}function rS(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),f=Math.max(a[1],a[3]),p=(s-i)*(u-o),h=(d-c)*(f-l);if(p<=0||h<=0)return 0;var m=Math.max(i,c),v=Math.max(o,l),g=Math.min(s,d),y=Math.min(u,f),b=Math.max(g-m,0)*Math.max(y-v,0);return b/(p+h-b)}function aS(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function iS(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function oS(){return oS=ct(st().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,p,h=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:.5,i=h.length>4&&void 0!==h[4]?h[4]:Number.NEGATIVE_INFINITY,o=Zm(t,"boxes","nonMaxSuppressionAsync"),s=Zm(n,"scores","nonMaxSuppressionAsync"),u=Zw(o,s,r,a,i),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,e.next=6,Promise.all([o.data(),s.data()]);case 6:return c=e.sent,l=c[0],d=c[1],f=$w(l,d,r,a,i),p=f.selectedIndices,e.abrupt("return",(o!==t&&o.dispose(),s!==n&&s.dispose(),rw(p,"int32")));case 12:case"end":return e.stop()}}),e)}))),oS.apply(this,arguments)}var sS=function(e,t,n){return oS.apply(this,arguments)};var uS=Qm({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=Zm(e,"boxes","nonMaxSuppression"),s=Zm(t,"scores","nonMaxSuppression"),u=Zw(o,s,n,r,a,i),c={boxes:o,scores:s},l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},d=zm.runKernel(cp,c,l);return{selectedIndices:d[0],selectedScores:d[1]}}});function cS(){return cS=ct(st().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,p,h,m,v=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=v.length>3&&void 0!==v[3]?v[3]:.5,i=v.length>4&&void 0!==v[4]?v[4]:Number.NEGATIVE_INFINITY,o=v.length>5&&void 0!==v[5]?v[5]:0,s=Zm(t,"boxes","nonMaxSuppressionAsync"),u=Zm(n,"scores","nonMaxSuppressionAsync"),c=Zw(s,u,r,a,i,o),r=c.maxOutputSize,a=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma,e.next=7,Promise.all([s.data(),u.data()]);case 7:return l=e.sent,d=l[0],f=l[1],p=tS(d,f,r,a,i,o),h=p.selectedIndices,m=p.selectedScores,e.abrupt("return",(s!==t&&s.dispose(),u!==n&&u.dispose(),{selectedIndices:rw(h,"int32"),selectedScores:rw(m)}));case 14:case"end":return e.stop()}}),e)}))),cS.apply(this,arguments)}var lS=function(e,t,n){return cS.apply(this,arguments)};var dS=Qm({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=Zm(e,"boxes","nonMaxSuppression"),s=Zm(t,"scores","nonMaxSuppression"),u=Zw(o,s,n,r,a,null),c=u.maxOutputSize,l=u.iouThreshold,d=u.scoreThreshold,f={boxes:o,scores:s},p={maxOutputSize:c,iouThreshold:l,scoreThreshold:d,padToMaxOutputSize:i},h=zm.runKernel(up,f,p);return{selectedIndices:h[0],validOutputs:h[1]}}});function fS(){return fS=ct(st().mark((function e(t,n,r){var a,i,o,s,c,l,d,f,p,h,m,v,g,y,b,x,A=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=A.length>3&&void 0!==A[3]?A[3]:.5,i=A.length>4&&void 0!==A[4]?A[4]:Number.NEGATIVE_INFINITY,o=A.length>5&&void 0!==A[5]&&A[5],s=Zm(t,"boxes","nonMaxSuppressionAsync"),c=Zm(n,"scores","nonMaxSuppressionAsync"),l=Zw(s,c,r,a,i,null),d=l.maxOutputSize,f=l.iouThreshold,p=l.scoreThreshold,e.next=11,Promise.all([s.data(),c.data()]);case 11:return h=e.sent,m=u(h,2),v=m[0],g=m[1],y=eS(v,g,d,f,p,o),b=y.selectedIndices,x=y.validOutputs,e.abrupt("return",(s!==t&&s.dispose(),c!==n&&c.dispose(),{selectedIndices:rw(b,"int32"),validOutputs:Jx(x,"int32")}));case 19:case"end":return e.stop()}}),e)}))),fS.apply(this,arguments)}var pS=function(e,t,n){return fS.apply(this,arguments)};var hS=Qm({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Zm(e,"images","resizeBilinear");ml(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank ".concat(a.rank,".")})),ml(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape ".concat(t,".")})),ml(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=Kb(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ia(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=zm.runKernel(Ip,s,u);return o?Kb(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var mS=Qm({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Zm(e,"images","resizeNearestNeighbor");ml(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ".concat(a.rank,".")})),ml(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape ".concat(t,".")})),ml("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),ml(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=Kb(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ia(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=zm.runKernel(wp,s,u);return o?Kb(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});function vS(e,t){for(var n,r,a,i,o,s,u=rw([-1]),c=rw([0]),l=rw([0]),d=0;d<e.size-1;d++){n=Qb(e,0,d+1),r=Qb(e,d+1),o=vb(eA(n),t),s=vb(eA(r),t);var f=eA(gb(n,wk(0,n.size)));a=vb(f,eA(n));var p=cA(r.shape,n.size),h=hb(wk(0,r.size),p),m=gb(r,h);i=vb(eA(m),eA(r));var v=OA(a,i),g=OA(a,i),y=gb(o,s);l=gb(gb(y,v),g);var b=fA(l,c);c=Ox(b,l,c),u=Ox(b,rw([d]),u)}return u}var gS=Qm({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,c=Zm(e,"image","threshold"),l=.2989,d=.587,f=.114,p=c.shape[0]*c.shape[1],h=gb(rw([s]),255);if(ml(3===c.rank,(function(){return"Error in threshold: image must be rank 3,but got rank ".concat(c.rank,".")})),ml(3===c.shape[2]||1===c.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1but got ".concat(c.shape[2],".")})),ml("int32"===c.dtype||"float32"===c.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,but got dtype ".concat(c.dtype,".")})),ml("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===c.shape[2]){var m=Zk(c,[1,1,1],-1),v=u(m,3);t=v[0],n=v[1],r=v[2];var g=gb(t,l),y=gb(n,d),b=gb(r,f);a=hb(hb(g,y),b)}else a=e;if("otsu"===i){var x=sx(lg(Mk(a),"int32"),tv([]),256);h=vS(x,p)}var A=o?bA(a,h):fA(a,h);return lg(gb(A,255),"int32")}});var yS=Qm({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=Zm(e,"image","transform","float32"),s=Zm(t,"transforms","transform","float32");ml(4===o.rank,(function(){return"Error in transform: image must be rank 4,but got rank ".concat(o.rank,".")})),ml(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),ml(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, but got ".concat(i,".")}));var u={image:o,transforms:s},c={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return zm.runKernel(uh,u,c)}});var bS=Qm({bandPart_:function(e,t,n){ml(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),ml(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=Zm(e,"a","bandPart");ml(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=u(r.shape.slice(-2),2),o=i[0],s=i[1];if(!(t<=o))throw new Error("bandPart(): numLower (".concat(t,") must not be greater than the number of rows (").concat(o,")."));if(!(n<=s))throw new Error("bandPart(): numUpper (".concat(n,") must not be greater than the number of columns (").concat(s,")."));t<0&&(t=o),n<0&&(n=s);var c=Kb(wk(0,o,1,"int32"),[-1,1]),l=wk(0,s,1,"int32"),d=OA(c,l),f=DA(bA(d,Jx(+t,"int32")),pA(d,Jx(-n,"int32"))),p=XA([o,s],r.dtype);return Kb($k(fw(Kb(r,[-1,o,s])).map((function(e){return Ox(f,e,p)}))),a)}});var xS=Qm({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,ml(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){ml(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: (".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=Zk(e,e.shape[0],0).map((function(e){return Qk(e,[0])}))),ml(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds number of dimensions (").concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(zm.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=gb(eA(gb(n[a],t)),n[a]);t=OA(t,i)}return vb(t,nA(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?$k(n,0):n}});function AS(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return zm.tidy((function(){ml(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=uA(n),i=dg(e),o=aw([[1]],[1,1]),s=dg(o),c=n>=r?r:n,l=function(e){var t,c,l=i,d=s,f=a;t=zm.tidy((function(){var t=Qb(i,[e,e],[n-e,1]),u=nA(t),c=Qb(i,[e,e],[1,1]),l=Ox(fA(c,0),aw([[-1]]),aw([[1]])),d=OA(c,gb(l,u)),f=vb(t,d);s=1===f.shape[0]?dg(o):Yb([o,Qb(f,[1,0],[f.shape[0]-1,f.shape[1]])],0);var p=cy(vb(Bg(l,d),u)),h=Qb(i,[e,0],[n-e,r]),m=gb(p,s),v=dy(s);if(0===e)i=OA(h,Bg(m,Bg(v,h)));else{var g=OA(h,Bg(m,Bg(v,h)));i=Yb([Qb(i,[0,0],[e,r]),g],0)}var y=dy(m),b=Qb(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=OA(b,Bg(Bg(b,s),y));else{var x=OA(b,Bg(Bg(b,s),y));a=Yb([Qb(a,[0,0],[n,e]),x],1)}return[s,i,a]})),c=u(t,3),s=c[0],i=c[1],a=c[2],Yg([l,d,f])},d=0;d<c;++d)l(d);return!t&&n>r&&(a=Qb(a,[0,0],[n,r]),i=Qb(i,[0,0],[r,r])),[a,i]}))}var kS=Qm({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ml(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return AS(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=fw(Kb(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach((function(e){var n=u(AS(e,t),2),r=n[0],o=n[1];a.push(r),i.push(o)}));var o=Kb($k(a,0),e.shape),s=Kb($k(i,0),e.shape);return[o,s]}}),wS=function(e){return e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",e}(wS||{});var SS=Qm({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=Zm(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=Zm(t,"weights","computeWeightedLoss"));var i=null==a?r:gb(r,a);if(0===n)return i;if(2===n)return eA(i);if(1===n){if(null==a)return KA(i);var o=r.size/a.size,s=vb(eA(i),eA(a));return o>1?vb(s,Jx(o)):s}if(3===n){if(null==a)return vb(eA(i),Jx(r.size));var u=gb(a,ZA(r.shape)),c=lg(eA(rk(u,Jx(0))),"float32");return vb(eA(i),c)}throw Error("Unknown reduction: ".concat(n))}});var IS=Qm({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=Zm(e,"labels","absoluteDifference"),i=Zm(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=Zm(n,"weights","absoluteDifference")),vl(a.shape,i.shape,"Error in absoluteDifference: ");var s=yb(OA(a,i));return SS(s,o,r)}});var ES=Qm({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,i=Zm(e,"labels","cosineDistance"),o=Zm(t,"predictions","cosineDistance"),s=null;null!=r&&(s=Zm(r,"weights","cosineDistance")),vl(i.shape,o.shape,"Error in cosineDistance: ");var u=Jx(1),c=OA(u,eA(gb(i,o),n,!0));return SS(c,s,a)}});var CS=Qm({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=Zm(e,"labels","hingeLoss"),i=Zm(t,"predictions","hingeLoss"),o=null;null!=n&&(o=Zm(n,"weights","hingeLoss")),vl(a.shape,i.shape,"Error in hingeLoss: ");var s=Jx(1);a=OA(gb(Jx(2),a),s);var u=Ik(OA(s,gb(a,i)));return SS(u,o,r)}});var NS=Qm({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,i=Zm(e,"labels","huberLoss"),o=Zm(t,"predictions","huberLoss"),s=null;null!=n&&(s=Zm(n,"weights","huberLoss")),vl(i.shape,o.shape,"Error in huberLoss: ");var u=Jx(r),c=yb(OA(o,i)),l=JA(c,u),d=OA(c,l),f=hb(gb(Jx(.5),$x(l)),gb(u,d));return SS(f,s,a)}});var TS=Qm({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,i=Zm(e,"labels","logLoss"),o=Zm(t,"predictions","logLoss"),s=null;null!=n&&(s=Zm(n,"weights","logLoss")),vl(i.shape,o.shape,"Error in logLoss: ");var u=Jx(1),c=Jx(r),l=cy(gb(i,kA(hb(o,c)))),d=gb(OA(u,i),kA(hb(OA(u,o),c))),f=OA(l,d);return SS(f,s,a)}});var _S=Qm({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=Zm(e,"labels","meanSquaredError"),i=Zm(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=Zm(n,"weights","meanSquaredError")),vl(a.shape,i.shape,"Error in meanSquaredError: ");var s=Jk(a,i);return SS(s,o,r)}});function RS(e,t){var n=Zm(e,"labels","sigmoidCrossEntropyWithLogits"),r=Zm(t,"logits","sigmoidCrossEntropyWithLogits");vl(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=Ik(r),i=gb(r,n),o=wA(aA(cy(yb(r))));return hb(OA(a,i),o)}var MS=Qm({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,i=Zm(e,"multiClassLabels","sigmoidCrossEntropy"),o=Zm(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=Zm(n,"weights","sigmoidCrossEntropy")),vl(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Jx(r),c=Jx(1),l=Jx(.5);i=hb(gb(i,OA(c,u)),gb(l,u))}var d=RS(i,o);return SS(d,s,a)}});function OS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ".concat(t.rank," and dim was ").concat(n));return TA((function(e,t,r){var a=PA(t,[n],!0),i=OA(lg(t,"float32"),a);r([e,i]);var o=cy(gb(i,e));return{value:eA(o,[n]),gradFunc:function(e,t){var r=u(t,2),a=r[0],i=r[1],o=Ux(e.shape,[n]);return[gb(Kb(e,o),OA(lg(a,"float32"),aA(i))),gb(Kb(e,o),OA(aA(i),lg(a,"float32")))]}}}))(e,t)}var FS=Qm({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,i=Zm(e,"onehotLabels","softmaxCrossEntropy"),o=Zm(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=Zm(n,"weights","softmaxCrossEntropy")),vl(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Jx(r),c=Jx(1),l=Jx(i.shape[1]);i=hb(gb(i,OA(c,u)),vb(u,l))}var d=OS(i,o);return SS(d,s,a)}});var PS=Qm({sparseFillEmptyRows_:function(e,t,n,r){var a=Zm(e,"indices","sparseFillEmptyRows","int32"),i=Zm(t,"values","sparseFillEmptyRows"),o=Zm(n,"denseShape","sparseFillEmptyRows","int32"),s=Zm(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:i,denseShape:o,defaultValue:s},c=zm.runKernel(qp,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});var DS=Qm({sparseReshape_:function(e,t,n){var r=Zm(e,"inputIndices","sparseReshape","int32"),a=Zm(t,"inputShape","sparseReshape","int32"),i=Zm(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},s=zm.runKernel(Kp,o);return{outputIndices:s[0],outputShape:s[1]}}});var LS=Qm({sparseSegmentMean_:function(e,t,n){var r=Zm(e,"data","sparseSegmentMean"),a=Zm(t,"indices","sparseSegmentMean","int32"),i=Zm(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return zm.runKernel(Xp,o)}});var zS=Qm({sparseSegmentSum_:function(e,t,n){var r=Zm(e,"data","sparseSegmentSum"),a=Zm(t,"indices","sparseSegmentSum","int32"),i=Zm(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return zm.runKernel(Zp,o)}});var BS=Qm({stringNGrams_:function(e,t,n,r,a,i,o,s){var u=Zm(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var c=Zm(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");var l={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},d={data:u,dataSplits:c},f=zm.runKernel(eh,d,l);return{nGrams:f[0],nGramsSplits:f[1]}}});var WS=Qm({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Zm(e,"input","stringSplit","string"),a=Zm(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},s=zm.runKernel(th,o,i);return{indices:s[0],values:s[1],shape:s[2]}}});var jS=Qm({stringToHashBucketFast_:function(e,t){var n=Zm(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return zm.runKernel(nh,a,r)}}),VS={fft:qk,ifft:Kk,rfft:Yk,irfft:Xk},US={hammingWindow:jw,hannWindow:Vw,frame:Uw,stft:Hw},HS={flipLeftRight:qw,grayscaleToRGB:Kw,resizeNearestNeighbor:mS,resizeBilinear:hS,rotateWithOffset:Xw,cropAndResize:Gw,nonMaxSuppression:Yw,nonMaxSuppressionAsync:sS,nonMaxSuppressionWithScore:uS,nonMaxSuppressionWithScoreAsync:lS,nonMaxSuppressionPadded:dS,nonMaxSuppressionPaddedAsync:pS,threshold:gS,transform:yS},GS={bandPart:bS,gramSchmidt:xS,qr:kS},qS={absoluteDifference:IS,computeWeightedLoss:SS,cosineDistance:ES,hingeLoss:CS,huberLoss:NS,logLoss:TS,meanSquaredError:_S,sigmoidCrossEntropy:MS,softmaxCrossEntropy:FS},KS={sparseFillEmptyRows:PS,sparseReshape:DS,sparseSegmentMean:LS,sparseSegmentSum:zS},XS={stringNGrams:BS,stringSplit:WS,stringToHashBucketFast:jS},ZS=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"minimize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return Yg(i),t?a:(a.dispose(),null)}},{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}},{key:"incrementIterations",value:function(){this.iterations_=this.iterations+1}},{key:"computeGradients",value:function(e,t){return NA(e,t)}},{key:"dispose",value:function(){null!=this.iterations_&&Yg(this.iterations_)}},{key:"saveIterations",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:Jx(this.iterations_,"int32")}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWeights",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class ".concat(this.getClassName()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"extractIterations",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Qy);Object.defineProperty(ZS,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var YS=function(e){et(n,e);var t=ot(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Ye(this,n),(a=t.call(this)).learningRate=e,a.rho=r,a.epsilon=i,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==i&&(a.epsilon=zm.backend.epsilon()),a}return Qe(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=zm.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accum_grad"),variable:Zg((function(){return Fx(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:"".concat(n,"/accum_var"),variable:Zg((function(){return Fx(a).variable(false)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;Zg((function(){var e=hb(gb(o,t.rho),gb($x(i),1-t.rho)),n=gb(vb(Qx(hb(s,t.epsilon)),Qx(hb(o,t.epsilon))),i),r=hb(gb(s,t.rho),gb($x(n),1-t.rho));o.assign(e),s.assign(r);var u=hb(gb(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedUpdates&&(Yg(this.accumulatedGrads.map((function(e){return e.variable}))),Yg(this.accumulatedUpdates.map((function(e){return e.variable}))))}},{key:"getWeights",value:function(){var e=ct(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(Tn(this.accumulatedGrads),Tn(this.accumulatedUpdates)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=ct(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.rho,t.epsilon)}}]),n}(ZS);YS.className="Adadelta",eb(YS);var JS=function(e){et(n,e);var t=ot(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return Ye(this,n),(r=t.call(this)).learningRate=e,r.initialAccumulatorValue=a,r.accumulatedGrads=[],r}return Qe(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=zm.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:"".concat(n,"/accumulator"),variable:Zg((function(){return cA(a.shape,t.initialAccumulatorValue).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;Zg((function(){var e=hb(o,$x(i));o.assign(e);var n=hb(gb(vb(i,Qx(hb(e,zm.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedGrads&&Yg(this.accumulatedGrads.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}}]),n}(ZS);JS.className="Adagrad",eb(JS);var QS=function(e){et(n,e);var t=ot(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Ye(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],Zg((function(){i.accBeta1=Jx(r).variable(),i.accBeta2=Jx(a).variable()})),null==o&&(i.epsilon=zm.backend.epsilon()),i}return Qe(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Zg((function(){var r=OA(1,t.accBeta1),a=OA(1,t.accBeta2);n.forEach((function(n,i){var o=zm.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:Zg((function(){return Fx(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:"".concat(n,"/v"),variable:Zg((function(){return Fx(o).variable(false)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedSecondMoment[i].variable,l=hb(gb(u,t.beta1),gb(s,1-t.beta1)),d=hb(gb(c,t.beta2),gb($x(s),1-t.beta2)),f=vb(l,r),p=vb(d,a);u.assign(l),c.assign(d);var h=hb(gb(vb(f,hb(Qx(p),t.epsilon)),-t.learningRate),o);o.assign(h)}})),t.accBeta1.assign(gb(t.accBeta1,t.beta1)),t.accBeta2.assign(gb(t.accBeta2,t.beta2))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Yg(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&Yg(this.accumulatedSecondMoment.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=ct(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(Tn(this.accumulatedFirstMoment),Tn(this.accumulatedSecondMoment)),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=ct(st().mark((function e(t){var n,r=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,Zg((function(){r.accBeta1.assign(Yx(r.beta1,r.iterations_+1)),r.accBeta2.assign(Yx(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}}]),n}(ZS);QS.className="Adam",eb(QS);var $S=function(e){et(n,e);var t=ot(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return Ye(this,n),(i=t.call(this)).learningRate=e,i.beta1=r,i.beta2=a,i.epsilon=o,i.decay=s,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],Zg((function(){i.iteration=Jx(0).variable(),i.accBeta1=Jx(r).variable()})),null==o&&(i.epsilon=zm.backend.epsilon()),i}return Qe(n,[{key:"applyGradients",value:function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);Zg((function(){var r=OA(1,t.accBeta1),a=vb(-t.learningRate,hb(gb(t.iteration,t.decay),1));n.forEach((function(n,i){var o=zm.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:"".concat(n,"/m"),variable:Fx(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:"".concat(n,"/v"),variable:Fx(o).variable(false)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,c=t.accumulatedWeightedInfNorm[i].variable,l=hb(gb(u,t.beta1),gb(s,1-t.beta1)),d=gb(c,t.beta2),f=yb(s),p=qA(d,f);u.assign(l),c.assign(p);var h=hb(gb(vb(a,r),vb(l,hb(p,t.epsilon))),o);o.assign(h)}})),t.iteration.assign(hb(t.iteration,1)),t.accBeta1.assign(gb(t.accBeta1,t.beta1))})),this.incrementIterations()}},{key:"dispose",value:function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Yg(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&Yg(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}}]),n}(ZS);$S.className="Adamax",eb($S);var eI=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).learningRate=e,r.setLearningRate(e),r}return Qe(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=zm.registeredVariables[n];Zg((function(){var e=hb(gb(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()}},{key:"setLearningRate",value:function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Jg(Jx(-e))}},{key:"dispose",value:function(){this.c.dispose()}},{key:"getWeights",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate)}}]),n}(ZS);eI.className="SGD",eb(eI);var tI=function(e){et(n,e);var t=ot(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Ye(this,n),(a=t.call(this,e)).learningRate=e,a.momentum=r,a.useNesterov=i,a.accumulations=[],a.m=Jx(a.momentum),a}return Qe(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=zm.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:"".concat(n,"/momentum"),variable:Zg((function(){return Fx(a).variable(!1)}))});var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&Zg((function(){var e,n=hb(gb(t.m,i),o);e=t.useNesterov?hb(gb(t.c,hb(o,gb(n,t.m))),a):hb(gb(t.c,n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()}},{key:"dispose",value:function(){this.m.dispose(),null!=this.accumulations&&Yg(this.accumulations.map((function(e){return e.variable})))}},{key:"setMomentum",value:function(e){this.momentum=e}},{key:"getWeights",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}}]),n}(eI);tI.className="Momentum",eb(tI);var nI=function(e){et(n,e);var t=ot(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Ye(this,n),(r=t.call(this)).learningRate=e,r.decay=a,r.momentum=i,r.epsilon=o,r.accumulatedMeanSquares=[],r.accumulatedMoments=[],r.accumulatedMeanGrads=[],r.centered=s,null==o&&(r.epsilon=zm.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.");return it(r)}return Qe(n,[{key:"applyGradients",value:function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=zm.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:"".concat(n,"/rms"),variable:Zg((function(){return Fx(a).variable(i)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:"".concat(n,"/momentum"),variable:Zg((function(){return Fx(a).variable(i)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:"".concat(n,"/mg"),variable:Zg((function(){return Fx(a).variable(i)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var s=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;Zg((function(){var e=hb(gb(s,t.decay),gb($x(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,i=hb(gb(n,t.decay),gb(o,1-t.decay)),c=vb(gb(o,t.learningRate),Qx(OA(e,hb($x(i),t.epsilon)))),l=hb(gb(u,t.momentum),c);s.assign(e),n.assign(i),u.assign(l);var d=OA(a,l);a.assign(d)}else{var f=hb(gb(s,t.decay),gb($x(o),1-t.decay)),p=hb(gb(u,t.momentum),vb(gb(o,t.learningRate),Qx(hb(f,t.epsilon))));s.assign(f),u.assign(p);var h=OA(a,p);a.assign(h)}}))}})),this.incrementIterations()}},{key:"dispose",value:function(){null!=this.accumulatedMeanSquares&&Yg(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&Yg(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&Yg(this.accumulatedMoments.map((function(e){return e.variable})))}},{key:"getWeights",value:function(){var e=ct(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(Tn(this.accumulatedMeanSquares),Tn(this.accumulatedMoments)),this.centered&&t.push.apply(t,Tn(this.accumulatedMeanGrads)),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setWeights",value:function(){var e=ct(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getConfig",value:function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}}],[{key:"fromConfig",value:function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}}]),n}(ZS);nI.className="RMSProp",eb(nI);var rI=function(){function e(){Ye(this,e)}return Qe(e,null,[{key:"sgd",value:function(e){return new eI(e)}},{key:"momentum",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new tI(e,t,n)}},{key:"rmsprop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new nI(e,t,n,r,a)}},{key:"adam",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new QS(e,t,n,r)}},{key:"adadelta",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.001,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.95,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new YS(e,t,n)}},{key:"adamax",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.002,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.9,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.999,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return new $S(e,t,n,r,a)}},{key:"adagrad",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return new JS(e,t)}}]),e}(),aI={sgd:rI.sgd,momentum:rI.momentum,adadelta:rI.adadelta,adagrad:rI.adagrad,rmsprop:rI.rmsprop,adamax:rI.adamax,adam:rI.adam},iI="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:function(e){return e()};function oI(){return new Promise((function(e){return iI((function(){return e()}))}))}var sI={};function uI(e,t){var n=e[0].length;e.forEach((function(e,t){ml(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same as the rank of the rest (").concat(n,")")}))})),ml(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)ml(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") does not match the shape of the rest (").concat(r,") along the non-concatenated axis ").concat(a,".")}))}))}function cI(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}Dc(sI,{ERF_A1:function(){return AI},ERF_A2:function(){return kI},ERF_A3:function(){return wI},ERF_A4:function(){return SI},ERF_A5:function(){return II},ERF_P:function(){return xI},PARALLELIZE_THRESHOLD:function(){return lI},SELU_SCALE:function(){return bI},SELU_SCALEALPHA:function(){return yI},applyActivation:function(){return Fw},assertAndGetBroadcastShape:function(){return vy},assertAxesAreInnerMostDims:function(){return Hx},assertParamsConsistent:function(){return uI},assignToTypedArray:function(){return RI},axesAreInnerMostDims:function(){return Wx},calculateShapes:function(){return My},checkEinsumDimSizes:function(){return zI},checkPadOnDimRoundingMode:function(){return qb},combineLocations:function(){return jx},complexWithEvenIndex:function(){return NI},complexWithOddIndex:function(){return TI},computeConv2DInfo:function(){return Fb},computeConv3DInfo:function(){return Pb},computeDefaultPad:function(){return Db},computeDilation2DInfo:function(){return Rb},computeOptimalWindowSize:function(){return dI},computeOutAndReduceShapes:function(){return Vx},computeOutShape:function(){return cI},computePool2DInfo:function(){return Mb},computePool3DInfo:function(){return Ob},convertConv2DDataFormat:function(){return Gb},decodeEinsumEquation:function(){return DI},eitherStridesOrDilationsAreOne:function(){return Hb},expandShapeToKeepDim:function(){return Ux},exponent:function(){return OI},exponents:function(){return MI},fromStringArrayToUint8:function(){return oE},fromUint8ToStringArray:function(){return iE},getAxesPermutation:function(){return Gx},getBroadcastDims:function(){return hy},getComplexWithIndex:function(){return _I},getEinsumComputePath:function(){return BI},getEinsumPermutation:function(){return LI},getFusedBiasGradient:function(){return Ow},getFusedDyActivation:function(){return Mw},getImageCenter:function(){return fI},getInnerMostAxes:function(){return Kx},getPermuted:function(){return hI},getReductionAxes:function(){return my},getReshaped:function(){return pI},getReshapedPermuted:function(){return mI},getSliceBeginCoords:function(){return vI},getSliceSize:function(){return gI},getSparseFillEmptyRowsIndicesDenseShapeMismatch:function(){return UI},getSparseFillEmptyRowsNegativeIndexErrorMessage:function(){return HI},getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:function(){return GI},getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:function(){return XI},getSparseReshapeInputOutputMismatchErrorMessage:function(){return YI},getSparseReshapeInputOutputMultipleErrorMessage:function(){return ZI},getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:function(){return qI},getSparseReshapeNegativeOutputDimErrorMessage:function(){return KI},getSparseSegmentReductionIndicesOutOfRangeErrorMessage:function(){return eE},getSparseSegmentReductionNegativeSegmentIdsErrorMessage:function(){return JI},getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:function(){return QI},getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:function(){return $I},getUndoAxesPermutation:function(){return qx},isIdentityPermutation:function(){return WI},log:function(){return kh},mergeRealAndImagArrays:function(){return EI},prepareAndValidate:function(){return Ny},prepareSplitSize:function(){return VI},segment_util:function(){return tE},shouldFuse:function(){return Pw},slice_util:function(){return Oy},splitRealAndImagArrays:function(){return CI},tupleValuesAreOne:function(){return Ub},upcastType:function(){return Im},validateInput:function(){return Ry},validateUpdateShape:function(){return _y},warn:function(){return Ah}});var lI=30;function dI(e){return e<=lI?e:Hl(e,Math.floor(Math.sqrt(e)))}function fI(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function pI(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function hI(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2===1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function mI(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function vI(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function gI(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}var yI=1.7580993408473768,bI=1.0507009873554805,xI=.3275911,AI=.254829592,kI=-.284496736,wI=1.421413741,SI=-1.453152027,II=1.061405429;function EI(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function CI(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function NI(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function TI(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function _I(e,t){return{real:e[2*t],imag:e[2*t+1]}}function RI(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function MI(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function OI(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var FI="->",PI=/->/g;function DI(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(PI,"").length)/FI.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(FI,'").'));var r=u(e.split(FI),2),a=r[0],i=r[1];ml(-1===a.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var o=a.split(","),s=o.length;if(t!==s)throw new Error("Expected ".concat(s," input tensors, received ").concat(t));if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var c=[],l=function(e){var t=i[e];if(!o.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," not present in the input subscripts."));-1===c.indexOf(t)&&c.push(t)},d=0;d<i.length;++d)l(d);for(var f=0;f<a.length;++f){var p=a[f];-1===c.indexOf(p)&&","!==p&&c.push(p)}for(var h=new Array(o.length),m=0;m<s;++m){if(new Set(o[m].split("")).size!==o[m].length)throw new Error("Found duplicate axes in input component ".concat(o[m],". Support for duplicate axes in input is not implemented yet."));h[m]=[];for(var v=0;v<o[m].length;++v)h[m].push(c.indexOf(o[m][v]))}for(var g=c.length,y=[],b=i.length;b<g;++b)y.push(b);return{allDims:c,summedDims:y,idDims:h}}function LI(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],i=0;i<e;++i)-1===n[i]&&a.push(i);return n=n.filter((function(e){return-1!==e})),{permutationIndices:n,expandDims:a}}function zI(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,i=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:ml(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," of input shaped ").concat(JSON.stringify(a),", but got dimension ").concat(a[n])}))},o=0;o<t[e].length;++o)i(o)},i=0;i<n.length;++i)a(i)}function BI(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var i=0;i<n;++i)a.push([]);for(var o=[],s=0;s<r.length;++s){var u,c=lc(jI(t,r[s]));try{for(c.s();!(u=c.n()).done;){var l=u.value;-1===o.indexOf(l)&&(a[s].push(l),o.push(l))}}catch(d){c.e(d)}finally{c.f()}}return{path:r,steps:a}}function WI(e){return e.every((function(e,t){return e===t}))}function jI(e,t){for(var n=[],r=0;r<e.length;++r)(0===e[r].length||-1!==e[r].indexOf(t)||-1===t)&&n.push(r);return n}function VI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"==typeof t)ml(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);ml(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}ml(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function UI(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function HI(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function GI(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function qI(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function KI(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function XI(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function ZI(e,t){var n=bl(e),r=bl(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function YI(e,t){var n=bl(e),r=bl(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function JI(){return"segment ids must be >= 0"}function QI(){return"segment ids are not increasing"}function $I(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function eE(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}var tE={};function nE(e,t){var n,r=!1;for(e<=lI?(n=e,r=!0):n=Hl(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Hl(e,n+1);return n}function rE(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}function aE(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],c=1,l=1,d=1,f=0;f<r;++f)u.push(e.shape[f]),c*=e.shape[f];for(var p=r;p<n;p++)u.push(e.shape[p]),l*=e.shape[p];for(var h=r;h<a;h++)u.push(t.shape[h]);for(var m=n+1;m<i;m++)u.push(e.shape[m]),d*=e.shape[m];return{batchSize:c,sliceSize:d,outerSize:l,dimSize:s,outputShape:u}}function iE(e){try{return e.map((function(e){return rm(e)}))}catch(Co){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(Co))}}function oE(e){return e.map((function(e){return nm(e)}))}Dc(tE,{collectGatherOpShapeInfo:function(){return aE},computeOutShape:function(){return rE},segOpComputeOptimalWindowSize:function(){return nE}});var sE={};Dc(sE,{nonMaxSuppressionV3Impl:function(){return $w},nonMaxSuppressionV4Impl:function(){return eS},nonMaxSuppressionV5Impl:function(){return tS},whereImpl:function(){return mw}});var uE=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),r=t.call(this,e),Object.setPrototypeOf(at(r),n.prototype),r}return Qe(n)}(cc(Error)),cE=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),r=t.call(this,e),Object.setPrototypeOf(at(r),n.prototype),r}return Qe(n)}(cc(Error)),lE=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),r=t.call(this,e),Object.setPrototypeOf(at(r),n.prototype),r}return Qe(n)}(cc(Error)),dE=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),r=t.call(this,e),Object.setPrototypeOf(at(r),n.prototype),r}return Qe(n)}(cc(Error)),fE=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),r=t.call(this,e),Object.setPrototypeOf(at(r),n.prototype),r}return Qe(n)}(cc(Error)),pE=function(){function e(t){Ye(this,e),this.maxEntries=t||100,this.cache=new Map}return Qe(e,[{key:"get",value:function(e){var t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}},{key:"put",value:function(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}},{key:"getMaxEntries",value:function(){return this.maxEntries}},{key:"setMaxEntries",value:function(e){if(e<0)throw new Error("The maxEntries of LRU caches must be at least 0, but got ".concat(e,"."));if(this.maxEntries>e)for(var t=0;t<this.maxEntries-e;t++){var n=this.cache.keys().next().value;this.cache.delete(n)}this.maxEntries=e}}]),e}();function hE(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function mE(e,t){if(!e)throw new fE(t)}function vE(e,t){var n,r=0,a=lc(e);try{for(a.s();!(n=a.n()).done;){n.value===t&&r++}}catch(i){a.e(i)}finally{a.f()}return r}function gE(e){return 1===e.length?e[0]:e}function yE(e){return Array.isArray(e)?e:[e]}function bE(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function xE(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var AE={};function kE(e){if(null==e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function wE(e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))e.forEach((function(e){return wE(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"==typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!=typeof a.value?wE(a):e[r]=a.value)}}function SE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"object",a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if("string"==typeof e){var i,o=e;if(o in n)i=n[o];else if(o in AE)i=AE[o];else if(null==(i=t[o]))throw new lE("Unknown ".concat(r,": ").concat(e,". This may be due to one of the following reasons:\n1. The ").concat(r," is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ").concat(r," is defined in JavaScript, but is not registered properly with tf.serialization.registerClass()."));return i}var s,c,l,d=e;if(null==d.className||null==d.config)throw new lE("".concat(r,": Improper config format: ").concat(JSON.stringify(d),".\n'className' and 'config' must set."));var f,p,h=d.className;if(h in n?(f=(s=u(n[h],2))[0],p=s[1]):h in AE?(f=(c=u(AE.className,2))[0],p=c[1]):h in t&&(f=(l=u(t[h],2))[0],p=l[1]),null==f)throw new lE("Unknown ".concat(r,": ").concat(h,". This may be due to one of the following reasons:\n1. The ").concat(r," is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ").concat(r," is defined in JavaScript, but is not registered properly with tf.serialization.registerClass()."));if(null!=p){for(var m={},v=0,g=Object.keys(AE);v<g.length;v++){var y=g[v];m[y]=AE[y]}for(var b=0,x=Object.keys(n);b<x.length;b++){var A=x[b];m[A]=n[A]}var k=d.config;k.customObjects=m;for(var w=Ze({},AE),S=0,I=Object.keys(n);S<I.length;S++){var E=I[S];AE[E]=n[E]}wE(d.config);var C=p(f,d.config,n,a);return AE=Ze({},w),C}for(var N=Ze({},AE),T=0,_=Object.keys(n);T<_.length;T++){var R=_[T];AE[R]=n[R]}var M=new f(d.config);return AE=Ze({},N),M}function IE(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function EE(e){if(null==e)return e;var t,n=[],r=lc(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}}catch(i){r.e(i)}finally{r.f()}return n}function CE(e){if(null==e)throw new lE("Invalid value in obj: ".concat(JSON.stringify(e)));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function NE(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new lE("".concat(n," is not a valid ").concat(t,".  Valid values are ").concat(e," or null/undefined."))}function TE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return mE(n>=0),mE(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function _E(e,t){Array.isArray(e)?(Fh.assert(e.length>0,(function(){return"".concat(t," is unexpectedly an empty array.")})),e.forEach((function(e,n){return _E(e,"element ".concat(n+1," of ").concat(t))}))):Fh.assert(Number.isInteger(e)&&e>0,(function(){return"Expected ".concat(t," to be a positive integer, but got ").concat(RE(e),".")}))}function RE(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return RE(e)})).join(",")+"]":"string"==typeof e?'"'.concat(e,'"'):"".concat(e)}function ME(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}var OE=0;function FE(){return OE++}var PE={};function DE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e in PE||(PE[e]=0),PE[e]+=1,e+PE[e].toString()}var LE=["channelsFirst","channelsLast"],zE=["nearest","bilinear"],BE=["valid","same","causal"],WE=["max","avg"],jE=["sum","mul","concat","ave"],VE=new Map;function UE(e){NE(LE,"DataFormat",e)}function HE(e){NE(BE,"PaddingMode",e)}function GE(e){NE(WE,"PoolMode",e)}var qE=[];function KE(e,t){qE.push(e);try{var n=t();return qE.pop(),n}catch(n){throw qE.pop(),n}}function XE(e){if(!QE(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===qE.length?"":qE.join("/")+"/")+e}function ZE(e){if(!QE(e))throw new Error("Not a valid tensor name: '"+e+"'");VE.has(e)||VE.set(e,0);var t=VE.get(e);if(VE.set(e,VE.get(e)+1),t>0){var n="".concat(e,"_").concat(t);return VE.set(n,1),n}return e}var YE,JE=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function QE(e){return!!e.match(JE)}function $E(e){return e===parseInt(e.toString(),10)}function eC(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function tC(e){if(0===e.length)return Number.NaN;for(var t=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r<t&&(t=r)}return t}function nC(e){if(0===e.length)return Number.NaN;for(var t=Number.NEGATIVE_INFINITY,n=0;n<e.length;n++){var r=e[n];r>t&&(t=r)}return t}function rC(e,t){if(t<e)throw new lE("end (".concat(t,") < begin (").concat(e,") is forbidden."));for(var n=[],r=e;r<t;++r)n.push(r);return n}function aC(){return null==YE&&(YE=oy().epsilon()),YE}function iC(e,t){return lg(e,t)}function oC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),Kb(e,n)}function sC(e){var t=[eC(e.shape)];return Kb(e,t)}function uC(e,t,n){return Zg((function(){switch(e.rank){case 1:return jk(e,t,n);case 2:return Vk(e,[t,0],[n,e.shape[1]]);case 3:return Uk(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return Hk(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Qb(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Qb(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new lE("sliceAlongFirstAxis() received an unsupported tensor rank: ".concat(e.rank))}}))}function cC(e,t,n){return Zg((function(){switch(e.rank){case 1:return jk(e,t,n);case 2:return Vk(e,[0,t],[e.shape[0],n]);case 3:return Uk(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return Hk(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new lE("sliceAlongLastAxis() received an unsupported tensor rank: ".concat(e.rank))}}))}function lC(e,t,n,r){return Zg((function(){switch(e.rank){case 1:return jk(e,t,n);case 2:switch(r){case 1:return uC(e,t,n);case 2:return cC(e,t,n);default:throw new lE("The axis is not within the rank of the tensor ".concat(r))}case 3:switch(r){case 1:return uC(e,t,n);case 2:return Uk(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return cC(e,t,n);default:throw new lE("The axis is not within the rank of the tensor ".concat(r))}case 4:switch(r){case 1:return uC(e,t,n);case 2:return Hk(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return Hk(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return cC(e,t,n);default:throw new lE("The axis is not within the rank of the tensor ".concat(r))}default:throw new lE("sliceAlongLastAxis() received an unsupported tensor rank: ".concat(e.rank))}}))}function dC(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return n<0&&(n=0!==(t=e[0].rank)?t:0),n===e[0].rank&&(n=-1),Yb(e,n)}function fC(e,t){switch(e.rank){case 1:return fx([e,t]);case 2:return px([e,t],0);case 3:return hx([e,t],0);case 4:return mx([e,t],0);default:throw new lE("concatAlongFirstAxis() received an unsupported tensor rank: ".concat(e.rank))}}function pC(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new lE("The length of input n (".concat(t.length,") does not match the number of dimensions in input x (").concat(e.rank,")"));return sA(e,t)}function hC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return Ak(e,t,n,r,a)}function mC(e,t,n,r){if(e.rank<2||t.rank<2)throw new dE("dot requires both inputs to be rank >= 2 but got x shape = ".concat(e.shape," and y shape = ").concat(t.shape));if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new dE("If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ".concat(e.shape," and  y shape = ").concat(t.shape));if(2===e.rank&&2===t.rank)return _w.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?yC(e.rank,r,"channelsLast"):null,activation:n});var a=e.shape.slice(),i=a.pop();e=Kb(e,[-1,i]);var o=t.shape.slice(),s=o.pop(),u=o.pop(),c=[].concat(Tn(o),[s]),l=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=Kb(dy(t,l),[u,-1]);var d=[].concat(Tn(a),Tn(c));return Kb(_w.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?yC(e.rank,r,"channelsLast"):null,activation:n}),d)}function vC(e,t,n){return Zg((function(){return t=Array.isArray(t)?rw(t,"int32"):lg(t,"int32"),dA(e,t,n)}))}function gC(e){return gb(e,e)}function yC(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new lE("Unexpected bias dimensions: ".concat(t.rank,"; expected it to be 1 or ").concat(e));if(5===e){if("channelsFirst"===n)return 1===r.length?Kb(t,[1,r[0],1,1,1]):Kb(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?Kb(t,[1,1,1,1,r[0]]):Kb(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?Kb(t,[1,r[0],1,1]):Kb(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?Kb(t,[1,1,1,r[0]]):Kb(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?Kb(t,[1,r[0],1]):Kb(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?Kb(t,[1,1,r[0]]):Kb(t,[1].concat(r))}else if(e<3)return t;throw new lE("Unsupported input rank by biasAdd: ".concat(t.rank))}function bC(e,t,n){return Zg((function(){return null==n&&(n="channelsLast"),UE(n),hb(e,yC(e.rank,t,n))}))}function xC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1!==t)throw new dE("Support for alpha values other than 1 (".concat(t,") is not implemented yet."));return zx(e)}function AC(e,t,n,r){return Zg((function(){return Iw(e,t,n,r)}))}function kC(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?e():t()}var wC=["fanIn","fanOut","fanAvg"],SC=["normal","uniform","truncatedNormal"];var IC=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"fromConfigUsesCustomObjects",value:function(){return!1}},{key:"getConfig",value:function(){return{}}}]),n}(Jy.Serializable),EC=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e,t){return XA(e,t)}}]),n}(IC);EC.className="Zeros",Jy.registerClass(EC);var CC=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e,t){return ZA(e,t)}}]),n}(IC);CC.className="Ones",Jy.registerClass(CC);var NC=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),r=t.call(this),"object"!=typeof e)throw new lE("Expected argument of type ConstantConfig but got ".concat(e));if(void 0===e.value)throw new lE("config must have value set but got ".concat(e));return r.value=e.value,it(r)}return Qe(n,[{key:"apply",value:function(e,t){var n=this;return Zg((function(){return gb(Jx(n.value),ZA(e,t))}))}},{key:"getConfig",value:function(){return{value:this.value}}}]),n}(IC);NC.className="Constant",Jy.registerClass(NC);var TC=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).DEFAULT_MINVAL=-.05,r.DEFAULT_MAXVAL=.05,r.minval=e.minval||r.DEFAULT_MINVAL,r.maxval=e.maxval||r.DEFAULT_MAXVAL,r.seed=e.seed,r}return Qe(n,[{key:"apply",value:function(e,t){return kk(e,this.minval,this.maxval,t)}},{key:"getConfig",value:function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}]),n}(IC);TC.className="RandomUniform",Jy.registerClass(TC);var _C=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return Qe(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new dE("randomNormal does not support dType ".concat(t,"."));return hC(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(IC);_C.className="RandomNormal",Jy.registerClass(_C);var RC=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).DEFAULT_MEAN=0,r.DEFAULT_STDDEV=.05,r.mean=e.mean||r.DEFAULT_MEAN,r.stddev=e.stddev||r.DEFAULT_STDDEV,r.seed=e.seed,r}return Qe(n,[{key:"apply",value:function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new dE("truncatedNormal does not support dType ".concat(t,"."));return cw(e,this.mean,this.stddev,t,this.seed)}},{key:"getConfig",value:function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}]),n}(IC);RC.className="TruncatedNormal",Jy.registerClass(RC);var MC=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).gain=null!=e.gain?e.gain:1,r}return Qe(n,[{key:"apply",value:function(e,t){var n=this;return Zg((function(){if(2!==e.length||e[0]!==e[1])throw new lE("Identity matrix initializer can only be used for 2D square matrices.");return gb(n.gain,uA(e[0]))}))}},{key:"getConfig",value:function(){return{gain:this.gain}}}]),n}(IC);MC.className="Identity",Jy.registerClass(MC);var OC=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),r=t.call(this),e.scale<0)throw new lE("scale must be a positive float. Got: ".concat(e.scale));return r.scale=null==e.scale?1:e.scale,r.mode=null==e.mode?"fanIn":e.mode,function(e){NE(wC,"FanMode",e)}(r.mode),r.distribution=null==e.distribution?"normal":e.distribution,function(e){NE(SC,"Distribution",e)}(r.distribution),r.seed=e.seed,it(r)}return Qe(n,[{key:"apply",value:function(e,t){var n=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"channelsLast";if(UE(r),2===e.length)t=e[0],n=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===r){var a=eC(e,2);t=e[1]*a,n=e[0]*a}else if("channelsLast"===r){var i=eC(e,0,e.length-2);t=e[e.length-2]*i,n=e[e.length-1]*i}}else{var o=eC(e);t=Math.sqrt(o),n=Math.sqrt(o)}return[t,n]}(e),r=n[0],a=n[1],i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new dE("".concat(this.getClassName()," does not support dType ").concat(t,"."));return cw(e,0,o,t,this.seed)}var s=Math.sqrt(3*i);return kk(e,-s,s,t)}},{key:"getConfig",value:function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}]),n}(IC);OC.className="VarianceScaling",Jy.registerClass(OC);var FC=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}return Qe(n,[{key:"getClassName",value:function(){return OC.className}}]),n}(OC);FC.className="GlorotUniform",Jy.registerClass(FC);var PC=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}return Qe(n,[{key:"getClassName",value:function(){return OC.className}}]),n}(OC);PC.className="GlorotNormal",Jy.registerClass(PC);var DC=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return Qe(n,[{key:"getClassName",value:function(){return OC.className}}]),n}(OC);DC.className="HeNormal",Jy.registerClass(DC);var LC=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return Qe(n,[{key:"getClassName",value:function(){return OC.className}}]),n}(OC);LC.className="HeUniform",Jy.registerClass(LC);var zC=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}return Qe(n,[{key:"getClassName",value:function(){return OC.className}}]),n}(OC);zC.className="LeCunNormal",Jy.registerClass(zC);var BC=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}return Qe(n,[{key:"getClassName",value:function(){return OC.className}}]),n}(OC);BC.className="LeCunNormal",Jy.registerClass(BC);var WC=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),(r=t.call(this)).DEFAULT_GAIN=1,r.gain=null==e.gain?r.DEFAULT_GAIN:e.gain,r.seed=e.seed,null!=r.seed)throw new dE("Random seed is not implemented for Orthogonal Initializer yet.");return it(r)}return Qe(n,[{key:"apply",value:function(e,t){var n=this;return Zg((function(){if(e.length<2)throw new dE("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more than 2000 (".concat(e[0]*e[1],") elements: Slowness may result."));var t=hC(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=GS.gramSchmidt(t);return e[0]>e[1]&&(r=dy(r)),gb(n.gain,r)}))}},{key:"getConfig",value:function(){return{gain:this.gain,seed:this.seed}}}]),n}(IC);WC.className="Orthogonal",Jy.registerClass(WC);var jC={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function VC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return SE(e,Jy.SerializationMap.getMap().classNameMap,t,"initializer")}function UC(e){return kE(e)}function HC(e){if("string"==typeof e){var t=e in jC?jC[e]:e;if("GlorotNormal"===t)return new PC;if("GlorotUniform"===t)return new FC;if("HeNormal"===t)return new DC;if("HeUniform"===t)return new LC;if("LeCunNormal"===t)return new zC;if("LeCunUniform"===t)return new BC;var n={};return n.className=t,n.config={},VC(n)}return e instanceof IC?e:VC(e)}function GC(e){return Array.isArray(e)&&Array.isArray(e[0])}function qC(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function KC(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new lE("Expected Tensor length to be 1; got ".concat(e.length));t=e[0]}else t=e;return t}function XC(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new lE("Expected exactly 1 Shape; got ".concat(e.length))}return e}function ZC(e){var t,n=0,r=lc(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}}catch(i){r.e(i)}finally{r.f()}return n}var YC="Variable",JC=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:YC,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Ye(this,e),this.dtype=null==n?"float32":n,this.shape=t.shape,this.id=FE(),r=null==r?YC:r,this.originalName=XE(r),this.name=ZE(this.originalName),this.trainable_=a,this.constraint=i,this.val=hw(t,this.trainable_,this.name,this.dtype)}return Qe(e,[{key:"read",value:function(){return this.assertNotDisposed(),this.val}},{key:"write",value:function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}},{key:"dispose",value:function(){this.assertNotDisposed(),this.val.dispose()}},{key:"assertNotDisposed",value:function(){if(this.val.isDisposed)throw new Error("LayersVariable ".concat(this.name," is already disposed."))}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function QC(e){return e.map((function(e){return e.read()}))}function $C(e){e.forEach((function(e){e[0].write(e[1])}))}var eN=Qe((function e(t){Ye(this,e),this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}})),tN=Qe((function e(t,n,r,a,i,o,s){Ye(this,e),this.dtype=t,this.shape=n,this.sourceLayer=r,this.inputs=a,this.callArgs=i,this.outputTensorIndex=s,this.id=FE(),null!=o&&(this.originalName=XE(o),this.name=ZE(this.originalName)),this.rank=n.length})),nN=0,rN=function(){function e(t,n){Ye(this,e),this.callArgs=n,this.id=nN++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;var r,a=lc(t.inboundLayers);try{for(a.s();!(r=a.n()).done;){var i=r.value;null!=i&&i.outboundNodes.push(this)}}catch(o){a.e(o)}finally{a.f()}t.outboundLayer.inboundNodes.push(this)}return Qe(e,[{key:"getConfig",value:function(){var e,t=[],n=lc(this.inboundLayers);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}}catch(a){n.e(a)}finally{n.f()}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}}]),e}(),aN=0,iN=function(e){et(n,e);var t=ot(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ye(this,n),(e=t.call(this))._callHook=null,e._addedWeightNames=[],e._stateful=!1,e.id=aN++,e.activityRegularizer=null,e.inputSpec=null,e.supportsMasking=!1,e._trainableWeights=[],e._nonTrainableWeights=[],e._losses=[],e._updates=[],e._built=!1,e.inboundNodes=[],e.outboundNodes=[];var a=r.name;if(!a){var i=e.getClassName();a=bE(i)+"_"+DE(i)}if(e.name=a,e.trainable_=null==r.trainable||r.trainable,null!=r.inputShape||null!=r.batchInputShape){var o;if(null!=r.batchInputShape)o=r.batchInputShape;else if(null!=r.inputShape){var s=null;null!=r.batchSize&&(s=r.batchSize),o=[s].concat(r.inputShape)}e.batchInputShape=o;var u=r.dtype;null==u&&(u=r.inputDType),null==u&&(u="float32"),e.dtype=u}return null!=r.weights?e.initialWeights=r.weights:e.initialWeights=null,e._refCount=null,e.fastWeightInitDuringBuild=!1,e}return Qe(n,[{key:"getNodeAtIndex",value:function(e,t){if(0===this.inboundNodes.length)throw new cE("The layer has never been called and thus has no defined ".concat(t,"."));if(this.inboundNodes.length<=e)throw new lE("Asked to get ".concat(t," at node ").concat(e,", but the layer has only ").concat(this.inboundNodes.length," inbound nodes."));return this.inboundNodes[e]}},{key:"getInputAt",value:function(e){return gE(this.getNodeAtIndex(e,"input").inputTensors)}},{key:"getOutputAt",value:function(e){return gE(this.getNodeAtIndex(e,"output").outputTensors)}},{key:"input",get:function(){if(this.inboundNodes.length>1)throw new uE("Layer ".concat(this.name,' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.'));if(0===this.inboundNodes.length)throw new uE("Layer ".concat(this.name," is not connected, no input to return."));return gE(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new uE("Layer ".concat(this.name," has no inbound nodes."));if(this.inboundNodes.length>1)throw new uE("Layer ".concat(this.name,' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.'));return gE(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"calculateLosses",value:function(){return this.losses.map((function(e){return e()}))}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"resetStates",value:function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}},{key:"assertInputCompatibility",value:function(e){if(e=yE(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=yE(this.inputSpec);if(e.length!==t.length)throw new lE("Layer ".concat(this.name," expects ").concat(t.length," inputs, but it received ").concat(e.length," input tensors. Input received: ").concat(e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new lE("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected ndim=").concat(a.ndim,", found ndim=").concat(i));if(null!=a.maxNDim&&i>a.maxNDim)throw new lE("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected max_ndim=").concat(a.maxNDim,", found ndim=").concat(i));if(null!=a.minNDim&&i<a.minNDim)throw new lE("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected min_ndim=").concat(a.minNDim,", found ndim=").concat(i,"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new lE("Input ".concat(n," is incompatible with layer ").concat(this.name," : expected dtype=").concat(a.dtype,", found dtype=").concat(r.dtype,"."));if(a.axes){var o=r.shape;for(var s in a.axes){var u=Number(s),c=a.axes[s],l=u>=0?o[u]:o[o.length+u];if(null!=c&&-1===[c,null].indexOf(l))throw new lE("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected axis ").concat(u," of input shape to have value ").concat(c," but got shape ").concat(o,"."))}}if(null!=a.shape)for(var d=0;d<a.shape.length;++d){var f=a.shape[d],p=r.shape[d];if(null!=f&&null!=p&&f!==p)throw new lE("Input ".concat(n," is incompatible with layer ").concat(this.name,": expected shape=").concat(a.shape,", found shape=").concat(r.shape,"."))}}}}}},{key:"call",value:function(e,t){return e}},{key:"invokeCallHook",value:function(e,t){null!=this._callHook&&this._callHook(e,t)}},{key:"setCallHook",value:function(e){this._callHook=e}},{key:"clearCallHook",value:function(){this._callHook=null}},{key:"apply",value:function(e,t){var n=this;t=t||{},this.assertNotDisposed();var r,a=yE(e),i=!0,o=lc(a);try{for(o.s();!(r=o.n()).done;){if(!(r.value instanceof tN)){i=!1;break}}}catch(l){o.e(l)}finally{o.f()}var s,u=!0,c=lc(a);try{for(c.s();!(s=c.n()).done;){if(s.value instanceof tN){u=!1;break}}}catch(l){c.e(l)}finally{c.f()}if(i===u)throw new lE("Arguments to apply() must be all SymbolicTensors or all Tensors");return KE(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);var r,i=[],o=lc(yE(e));try{for(o.s();!(r=o.n()).done;){var s=r.value;i.push(s.shape)}}catch(l){o.e(l)}finally{o.f()}n.build(gE(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&u&&(n._refCount=1)}if(n.assertInputCompatibility(e),u){var c,d=n.call(e,t),f=[],p=lc(yE(d));try{for(p.s();!(c=p.n()).done;){var h=c.value;-1!==a.indexOf(h)&&(h=h.clone()),f.push(h)}}catch(l){p.e(l)}finally{p.f()}if(d=gE(f),null!=n.activityRegularizer)throw new dE("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return d}var m,v=function(e){e=yE(e);var t,n=[],r=lc(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.shape)}}catch(l){r.e(l)}finally{r.f()}return gE(n)}(e),g=n.computeOutputShape(v),y="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?v[0]:v),m=null!=g&&g.length>0&&Array.isArray(g[0])?g.map((function(r,a){return new tN(y,r,n,yE(e),t,n.name,a)})):new tN(y,g,n,yE(e),t,n.name),n.addInboundNode(e,m,null,null,v,g,t),n._refCount++,null!=n.activityRegularizer)throw new dE("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return m}))}},{key:"warnOnIncompatibleInputShape",value:function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: ".concat(JSON.stringify(e),") does not match that of the batchInputShape (").concat(JSON.stringify(this.batchInputShape),") of the layer ").concat(this.name));else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor (".concat(JSON.stringify(e),") does not match the expectation of layer ").concat(this.name,": ").concat(JSON.stringify(this.batchInputShape)))}}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new uE("The layer ".concat(this.name," has never been called and thus has no defined output shape."));var e,t=[],n=lc(this.inboundNodes);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}}catch(o){n.e(o)}finally{n.f()}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new uE("The layer ".concat(this.name,' has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.'))}},{key:"countParams",value:function(){if(!this.built)throw new cE("You tried to call countParams() on ".concat(this.name,", but the layer is not built yet. Build it first by calling build(batchInputShape)."));return ZC(this.weights)}},{key:"build",value:function(e){this.built=!0}},{key:"getWeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return QC(e?this.trainableWeights:this.weights)}},{key:"setWeights",value:function(e){var t=this;Zg((function(){var n=t.weights;if(n.length!==e.length)throw new lE('You called setWeights(weights) on layer "'.concat(t.name,'" with a weight list of length ').concat(e.length,", but the layer was expecting ").concat(n.length," weights. Provided weights: ").concat(e,"..."));if(0!==n.length){for(var r=[],a=QC(n),i=0;i<a.length;++i){var o=a[i],s=n[i],u=e[i];if(!Fh.arraysEqual(o.shape,u.shape))throw new lE("Layer weight shape ".concat(o.shape," not compatible with provided weight shape ").concat(u.shape));r.push([s,u])}$C(r)}}))}},{key:"addWeight",value:function(e,t,n,r,a,i,o,s){if(-1!==this._addedWeightNames.indexOf(e))throw new lE("Duplicate weight name ".concat(e," for layer ").concat(this.name));this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():HC("zeros"));var u=r.apply(t,n),c=new JC(u,n,e,i,o);return u.dispose(),null!=a&&this.addLoss((function(){return a.apply(c.read())})),null==i&&(i=!0),i?this._trainableWeights.push(c):this._nonTrainableWeights.push(c),c}},{key:"setFastWeightInitDuringBuild",value:function(e){this.fastWeightInitDuringBuild=e}},{key:"addLoss",value:function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=yE(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,Tn(e)))}},{key:"computeOutputShape",value:function(e){return e}},{key:"computeMask",value:function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer ".concat(this.name," does not support masking, but was passed an inputMask."));t.forEach((function(e){if(null!=e)throw new TypeError("Layer ".concat(n.name," does not support masking, but was passed an inputMask."))}))}return null}return t}},{key:"addInboundNode",value:function(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=yE(e);t=yE(t),n=yE(n),r=yE(r),a=qC(a),i=qC(i);var u,c=[],l=[],d=[],f=lc(s);try{for(f.s();!(u=f.n()).done;){var p=u.value;c.push(p.sourceLayer),l.push(p.nodeIndex),d.push(p.tensorIndex)}}catch(m){f.e(m)}finally{f.f()}new rN({outboundLayer:this,inboundLayers:c,nodeIndices:l,tensorIndices:d,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var h=0;h<t.length;h++)t[h].sourceLayer=this,t[h].nodeIndex=this.inboundNodes.length-1,t[h].tensorIndex=h}},{key:"getConfig",value:function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}},{key:"disposeWeights",value:function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length}},{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Layer '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){if(!this.built)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been built yet."));if(null===this._refCount)throw new Error("Cannot dispose Layer ".concat(this.name," because it has not been used yet."));this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}],[{key:"nodeKey",value:function(e,t){return e.name+"_ib-"+t.toString()}}]),n}(Jy.Serializable);function oN(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++){var o,s=lc(oN(r.inputTensors[i],r.inboundLayers[i],r.nodeIndices[i]));try{for(s.s();!(o=s.n()).done;){var u=o.value;-1===a.indexOf(u)&&a.push(u)}}catch(c){s.e(c)}finally{s.f()}}return a}var sN=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),r=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:DE("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),r.trainable=!1,r.built=!0,r.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new lE("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var a=e.batchInputShape;if(null==a){if(null==e.inputShape)throw new lE("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");a=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new lE("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var i=e.dtype||"float32";r.batchInputShape=a,r.dtype=i,r.inputSpec=[{shape:a}];var o=new tN(r.dtype,r.batchInputShape,at(r),[],{},r.name);return o.nodeIndex=0,o.tensorIndex=0,new rN({outboundLayer:at(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[a],outputShapes:[a]}),it(r)}return Qe(n,[{key:"apply",value:function(e,t){throw new lE("Cannot pass any input to an InputLayer's apply() method. InputLayer name: ".concat(this.name))}},{key:"dispose",value:function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}},{key:"getConfig",value:function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}]),n}(iN);function uN(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new lE("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new sN({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}sN.className="InputLayer",Jy.registerClass(sN);var cN=function(){function e(t){if(Ye(this,e),this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;var r,a=lc(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.add(i.key,i.value)}}catch(o){a.e(o)}finally{a.f()}}}return Qe(e,[{key:"add",value:function(e,t,n){if(null!=this.id2Value[e.id])throw new lE("Duplicate key: name=".concat(e.name,", id=").concat(e.id));return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return lg(t,e.dtype)}catch(n){throw new lE("The dtype of the feed (".concat(t.dtype,") can not be cast to the dtype of the key '").concat(e.name,"' (").concat(e.dtype,")."))}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}},{key:"addFeed",value:function(e){this.add(e.key,e.value)}},{key:"hasKey",value:function(e){return null!=this.id2Value[e.id]}},{key:"names",value:function(){return Object.keys(this.name2Id)}},{key:"getValue",value:function(e){if(e instanceof tN){if(null==this.id2Value[e.id])throw new lE("Nonexistent key: ".concat(e.name));return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new lE("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Value[t]}},{key:"getMask",value:function(e){if(e instanceof tN){if(null==this.id2Value[e.id])throw new lE("Nonexistent key: ".concat(e.name));return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new lE("Feed dict has no SymbolicTensor name: ".concat(e));return this.id2Mask[t]}},{key:"disposeMasks",value:function(){null!=this.id2Mask&&Yg(this.id2Mask)}}]),e}(),lN=new pE,dN=new pE;function fN(e,t,n,r){var a,i=null!=n&&n.training,o=Array.isArray(e),s=o?e:[e],u=s.map((function(e){return e.name})),c=[],l=t.names(),d=lc(u);try{for(d.s();!(a=d.n()).done;){var f=a.value;-1!==l.indexOf(f)?c.push(t.getValue(f)):c.push(null)}}catch(L){d.e(L)}finally{d.f()}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var p,h=u.join(",")+"|"+t.names().sort().join(","),m=lN.get(h);if(null==m){var v=function(e,t){Fh.assert(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=hN(e[0],t);n=a.sorted,r=a.recipientMap}else{var i,o=new Set,s=lc(e);try{for(s.s();!(i=s.n()).done;){var u,c=hN(i.value,t),l=c.sorted,d=c.recipientMap,f=lc(l);try{for(f.s();!(u=f.n()).done;){var p=u.value;o.has(p.name)||(n.push(p),o.add(p.name))}}catch(L){f.e(L)}finally{f.f()}var h=function(e){null==r[e]&&(r[e]=new Set),d[e].forEach((function(t){return r[e].add(t)}))};for(var m in d)h(m)}}catch(L){s.e(L)}finally{s.f()}}return{sorted:n,recipientCounts:pN(r)}}(s,t);m=v.sorted,p=v.recipientCounts,lN.put(h,m),dN.put(h,p)}p={},i||Object.assign(p,dN.get(h));for(var g=new cN(t),y=0;y<m.length;++y){if(null!=r){var b=Kg().numTensors;b>r.maxNumTensors&&(r.maxNumTensors=b),b<r.minNumTensors&&(r.minNumTensors=b)}var x=m[y],A=x.sourceLayer;if(!(A instanceof sN)){var k,w=[],S=[],I=[],E=!1,C=lc(x.inputs);try{for(C.s();!(k=C.n()).done;){var N=k.value,T=g.getValue(N),_=g.getMask(N);w.push(T),S.push(_),null!=_&&(E=!0),i||(p[N.name]--,0===p[N.name]&&!t.hasKey(N)&&-1===u.indexOf(N.name)&&!T.isDisposed&&!0!==N.sourceLayer.stateful&&I.push(T))}}catch(L){C.e(L)}finally{C.f()}E&&((n=n||{}).mask=S[0]);var R=yE(A.apply(w,n)),M=null;A.supportsMasking&&(M=A.computeMask(w,S));for(var O=mN(x),F=Array.isArray(O)?O:[O],P=0;P<F.length;++P){g.hasKey(F[P])||g.add(F[P],R[P],Array.isArray(M)?M[0]:M);var D=u.indexOf(F[P].name);-1!==D&&(c[D]=R[P])}i||Yg(I)}}return g.disposeMasks(),o?c:c[0]}function pN(e){var t={};for(var n in e)t[n]=e[n].size;return t}function hN(e,t){var n,r=new Set,a=[],i={},o=lc(t.names());try{for(o.s();!(n=o.n()).done;){var s=n.value;r.add(s)}}catch(m){o.e(m)}finally{o.f()}var u=[],c=[];for(u.push(e);u.length>0;){var l=u[u.length-1];if(r.has(l.name))u.pop();else{var d=c[c.length-1]===u.length-1;if(0===l.inputs.length||d)u.pop(),a.push(l),r.add(l.name),d&&c.pop();else{c.push(u.length-1);var f,p=lc(l.inputs);try{for(p.s();!(f=p.n()).done;){var h=f.value;null==i[h.name]&&(i[h.name]=new Set),i[h.name].add(l.name),!r.has(h.name)&&u.push(h)}}catch(m){p.e(m)}finally{p.f()}}}}return{sorted:a,recipientMap:i}}function mN(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r){var a,i=lc(e.sourceLayer.inboundNodes[r].outputTensors);try{for(i.s();!(a=i.n()).done;){if(a.value.id===e.id){n=r;break}}}catch(o){i.e(o)}finally{i.f()}}t=e.sourceLayer.getOutputAt(n)}return t}id().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",(function(){return 100}),(function(e){null!=lN&&lN.setMaxEntries(e),null!=dN&&dN.setMaxEntries(e)}));var vN={kernelName:ld,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return gb(e,ew(lg(n,"float32"),-1))}}}},gN={kernelName:dd,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){var t=$x(lg(n,"float32")),r=Qx(OA(Jx(1),t));return cy(vb(e,r))}}}},yN={kernelName:fd,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){var t=Qx(OA($x(lg(n,"float32")),1));return vb(e,t)}}}},bN={kernelName:pd,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1],i=vy(r.shape,a.shape);return{a:function(){var t=e,n=my(r.shape,i);return n.length>0&&(t=eA(t,n)),Kb(t,r.shape)},b:function(){var t=e,n=my(a.shape,i);return n.length>0&&(t=eA(t,n)),Kb(t,a.shape)}}}},xN={kernelName:hd,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},AN={kernelName:gd,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return Fx(n)}}}},kN={kernelName:yd,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return Fx(n)}}}},wN={kernelName:bd,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return vb(e,Qx(OA(Jx(1),$x(lg(n,"float32")))))}}}},SN={kernelName:xd,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){var t=Qx(hb(Jx(1),$x(lg(n,"float32"))));return vb(e,t)}}}},IN={kernelName:wd,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1],i=vy(r.shape,a.shape);return{a:function(){var t=hb($x(r),$x(a)),n=gb(e,vb(a,t)),o=my(r.shape,i);return o.length>0&&(n=eA(n,o)),Kb(n,r.shape)},b:function(){var t=hb($x(r),$x(a)),n=cy(gb(e,vb(r,t))),o=my(a.shape,i);return o.length>0&&(n=eA(n,o)),Kb(n,a.shape)}}}},EN={kernelName:Ad,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return vb(e,hb($x(lg(n,"float32")),1))}}}},CN={kernelName:kd,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return vb(e,OA(Jx(1),$x(lg(n,"float32"))))}}}};var NN=Qm({avgPool3dGrad_:function(e,t,n,r,a,i){var o=Zm(e,"dy","avgPool3dGrad"),s=Zm(t,"input","avgPool3dGrad"),u=o,c=s,l=!1;4===s.rank&&(l=!0,u=Kb(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=Kb(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),ml(5===u.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank ".concat(u.rank,".")})),ml(5===c.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank ".concat(c.rank,".")})),qb("avgPool3dGrad",a,i);var d={dy:u,input:c},f={filterSize:n,strides:r,pad:a,dimRoundingMode:i},p=zm.runKernel(Cd,d,f);return l?Kb(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}}),TN={kernelName:Ed,inputsToSave:["x"],gradFunc:function(e,t,n){var r=u(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad,s=n.dimRoundingMode;return{x:function(){return NN(e,r,a,i,o,s)}}}};var _N=Qm({avgPoolGrad_:function(e,t,n,r,a){var i=Zm(e,"dy","avgPoolGrad"),o=Zm(t,"input","avgPoolGrad");ml(o.rank===i.rank,(function(){return"Rank of input (".concat(o.rank,") does not match rank of dy (").concat(i.rank,")")}));var s=o,u=i,c=!1;3===o.rank&&(c=!0,s=Kb(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=Kb(i,[1,i.shape[0],i.shape[1],i.shape[2]])),ml(4===u.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank ".concat(u.rank,".")})),ml(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank ".concat(s.rank,".")}));var l={dy:u,input:s},d={filterSize:n,strides:r,pad:a},f=zm.runKernel(Id,l,d);return c?Kb(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),RN={kernelName:Sd,inputsToSave:["x"],gradFunc:function(e,t,n){var r=u(t,1)[0],a=n.filterSize,i=n.strides,o=n.pad;return{x:function(){return _N(e,r,a,i,o)}}}},MN={kernelName:Nd,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=u(t,2),a=r[0],i=r[1],o=n.transposeA,s=n.transposeB;return o||s?!o&&s?{a:function(){return Bg(e,i,!1,!1)},b:function(){return Bg(e,a,!0,!1)}}:o&&!s?{a:function(){return Bg(i,e,!1,!0)},b:function(){return Bg(a,e,!1,!1)}}:{a:function(){return Bg(i,e,!0,!0)},b:function(){return Bg(e,a,!0,!0)}}:{a:function(){return Bg(e,i,!1,!0)},b:function(){return Bg(a,e,!0,!1)}}}},ON={kernelName:Td,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return dk(e,r,a)}}}},FN={kernelName:Rd,gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,i=r.shape,o=Array.from(i),s=a.length-1;s>=0;s--)if(a[s]===i[s])o[s]=1;else if(1!==a[s])throw new Error("broadcastTo(): [".concat(a,"] cannot be broadcast to [").concat(i,"]."));for(var u=[],c=0;c<o.length;c++)o[c]>1&&u.push(c);return{x:function(){return eA(e,u,!0)}}}},PN={kernelName:Od,gradFunc:function(e){return{x:function(){return e.clone()}}}},DN={kernelName:Fd,gradFunc:function(e){return{x:function(){return Fx(e)}}}},LN={kernelName:Pd,inputsToSave:["x"],gradFunc:function(e,t,n){var r=u(t,1)[0],a=n.clipValueMin,i=n.clipValueMax;return{x:function(){return Ox(DA(pA(r,a),bA(r,i)),e,Fx(e))}}}},zN={kernelName:Ld,inputsToSave:["x"],gradFunc:vN.gradFunc},BN={kernelName:zd,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=Tl(n.axis,t[0].shape)[0],i=r.map((function(e){return e[a]}));return Zk(e,i,a).map((function(e){return function(){return e}}))}},WN={kernelName:Bd,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=u(t,2),a=r[0],i=r[1],o=n.dilations,s=n.strides,c=n.pad,l=n.dataFormat;return ml(Ub(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(o,"'")})),{x:function(){return yx(a.shape,e,i,s,c,l)},filter:function(){return Rw(a,e,i.shape,s,c,l)}}}},jN={kernelName:jd,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=u(t,2),a=r[0],i=r[1],o=n.strides,s=n.pad,c=n.dataFormat,l=n.dimRoundingMode;return{dy:function(){return vx(e,i,o,s,c,1,l)},filter:function(){return Rw(e,a,i.shape,o,s,c,l)}}}};var VN=Qm({conv3DBackpropFilter_:function(e,t,n,r,a){var i=e;4===e.rank&&(i=Kb(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var o=t;4===o.rank&&(o=Kb(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),ml(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape ".concat(i.shape,".")})),ml(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape ".concat(o.shape,".")})),ml(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got ".concat(n,".")})),ml(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input ".concat(i.shape[4],") must match input depth in filter (").concat(n[3],".")})),ml(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy (".concat(o.shape[4],") must match output depth for filter (").concat(n[4],").")}));var s={x:i,dy:o},u={strides:r,pad:a,filterShape:n};return zm.runKernel(Ud,s,u)}}),UN={kernelName:Vd,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad;ml(Ub(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '".concat(r,"'")}));var o=u(t,2),s=o[0],c=o[1];return{x:function(){return Ax(s.shape,e,c,a,i)},filter:function(){return VN(s,e,c.shape,a,i)}}}},HN={kernelName:Gd,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return gb(cy(Bk(lg(n,"float32"))),e)}}}},GN={kernelName:qd,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return gb(Wk(lg(n,"float32")),e)}}}},qN={kernelName:Xd,inputsToSave:["x"],gradFunc:function(e,t,n){var r=u(t,1)[0],a=n.axis,i=n.exclusive,o=n.reverse;return{x:function(){var t=Gx([a],r.rank),n=Ex(e,a,i,!o);return null!=t&&(n=dy(n,t)),n}}}},KN={kernelName:Qd,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad,o=n.dimRoundingMode,s=null==r?[1,1]:r;ml(Ub(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '".concat(s,"'")}));var c=u(t,2),l=c[0],d=c[1];return ml(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ".concat(l.rank,".")})),ml(4===d.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ".concat(d.rank,".")})),ml(l.shape[3]===d.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input channels (".concat(l.shape[3],") must match the inChannels dimension in filter ").concat(d.shape[2],".")})),ml(Hb(a,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ".concat(a," and dilations '").concat(s,"'.")})),qb("depthwiseConv2d",i,o),{x:function(){return zw(l.shape,e,d,a,i,s,o)},filter:function(){return Lw(l,e,d.shape,a,i,s,o)}}}},XN={kernelName:nf,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=u(t,2),a=r[0],i=r[1],o={x:a,filter:i,dy:e},s={x:a,filter:i,dy:e};return{x:function(){return zm.runKernel(rf,o,n)},filter:function(){return zm.runKernel(af,s,n)}}}},ZN={kernelName:uf,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:u(t,1)[0]};return{x:function(){return zm.runKernel(cf,n)}}}},YN={kernelName:lf,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0],r=gb(aA(cy($x(n))),2/Math.sqrt(Math.PI));return{x:function(){return gb(e,r)}}}},JN={kernelName:ff,outputsToSave:[!0],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return gb(e,n)}}}},QN={kernelName:pf,inputsToSave:["input"],gradFunc:function(e,t){var n=u(t,1)[0];return{input:function(){return Kb(e,n.shape)}}}},$N={kernelName:hf,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return gb(e,aA(n))}}}},eT={kernelName:yf,gradFunc:function(e){return{x:function(){return Fx(e)}}}},tT={kernelName:bf,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1],i=vy(r.shape,a.shape);return{a:function(){var t=vb(e,lg(a,"float32")),n=my(r.shape,i);return n.length>0?Kb(eA(t,n),r.shape):t},b:function(){var t=gb(e,lg(r,"float32")),n=my(a.shape,i);n.length>0&&(t=Kb(eA(t,n),a.shape));var o=$x(a);return cy(vb(t,lg(o,"float32")))}}}},nT={kernelName:xf,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=u(t,4),i=a[0],o=a[1],s=a[2],c=a[3],l=null==c?Jx(1):c,d=my(o.shape,i.shape),f=[];if(1===o.rank){for(var p=0;p<i.shape.length-1;++p)f.push(i.shape[p]);f.push(1)}var h=OA(i,o),m=gb(e,l),v=Ok(hb(s,Jx(r))),g=gb(gb(gb(v,v),v),Jx(-.5));return{x:function(){return 1===o.rank?Kb(gb(gb(e,sA(Kb(v,[1,1,1,o.shape[0]]),f)),l),i.shape):Kb(gb(gb(e,v),l),i.shape)},mean:function(){var e=gb(gb(v,Jx(-1)),m);return 1===o.rank&&(e=eA(e,d)),Kb(e,o.shape)},variance:function(){var e=gb(gb(g,h),m);return 1===o.rank&&(e=eA(e,d)),Kb(e,o.shape)},scale:function(){var t=gb(h,v),n=gb(e,t);return 1===o.rank&&(n=eA(n,d)),Kb(n,o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=eA(t,d)),Kb(t,o.shape)}}}},rT={kernelName:Af,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=u(t,2),a=r[0],i=r[1],o=n.axis,s=Tl(o,a.shape)[0];return{x:function(){var t=a.shape,n=i.size,r=t.slice(0,s),u=r.length,c=t.slice(o,t.length).slice(1),l=c.length,d=aT(0,u),f=aT(u+1,u+1+l),p=iT([r,[n],c]),h=Kb(e,p),m=Kb(i,[n]),v=iT([[u],d,f]),g=dy(h,v),y=dw(g,m,a.shape[s]),b=qx(v);return y=dy(y,b)},indices:function(){return i}}}};function aT(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function iT(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var oT={kernelName:Sf,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1];return{a:function(){return Fx(r)},b:function(){return Fx(a)}}}},sT={kernelName:If,gradFunc:function(e){return{x:function(){return lg(e,"float32")}}}},uT={kernelName:Nf,gradFunc:function(e){return{x:function(){return Fx(e)}}}},cT={kernelName:Tf,gradFunc:function(e){return{x:function(){return Fx(e)}}}},lT={kernelName:_f,gradFunc:function(e){return{x:function(){return Fx(e)}}}},dT={kernelName:Rf,inputsToSave:["x"],gradFunc:function(e,t,n){var r=u(t,1)[0],a=n.alpha,i=fA(r,0);return{x:function(){return Ox(i,e,gb(e,a))}}}},fT={kernelName:Df,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return vb(e,hb(n,1))}}}},pT={kernelName:Pf,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return vb(e,lg(n,"float32"))}}}},hT={kernelName:jf,inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=u(t,1)[0],a=n.axis;return{logits:function(){var t=aA(r);return OA(e,gb(eA(e,a,!0),t))}}}};var mT=Qm({localResponseNormalizationBackprop_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.5,s={x:e,y:t,dy:n},u={depthRadius:r,bias:a,alpha:i,beta:o};return zm.runKernel(Hf,s,u)}}),vT={kernelName:Uf,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=u(t,2),a=r[0],i=r[1],o=n.depthRadius,s=n.bias,c=n.alpha,l=n.beta;return{x:function(){return mT(a,i,e,o,s,c,l)}}}};function gT(e,t,n,r){return t.rank<n.rank&&(t=Kb(t,Ux(t.shape,r))),e.rank<n.rank&&(e=Kb(e,Ux(e.shape,r))),{x:function(){return gb(e,lg(Mx(n,t),e.dtype))}}}var yT={kernelName:Gf,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],i=gT(e,t[1],a,Tl(r,a.shape));return{x:function(){return i.x()}}}},bT={kernelName:qf,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1];return{a:function(){return gb(e,lg(pA(r,a),"float32"))},b:function(){return gb(e,lg(yA(r,a),"float32"))}}}};var xT=Qm({maxPool3dGrad_:function(e,t,n,r,a,i,o){var s=Zm(e,"dy","maxPool3dGrad"),u=Zm(t,"input","maxPool3dGrad"),c=Zm(n,"output","maxPool3dGrad"),l=s,d=u,f=c,p=!1;4===u.rank&&(p=!0,l=Kb(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),d=Kb(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),f=Kb(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),ml(5===l.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank ".concat(l.rank,".")})),ml(5===d.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank ".concat(d.rank,".")})),ml(5===f.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank ".concat(f.rank,".")})),qb("maxPool3dGrad",i,o);var h={dy:l,input:d,output:f},m={filterSize:r,strides:a,pad:i,dimRoundingMode:o},v=zm.runKernel(Yf,h,m);return p?Kb(v,[v.shape[1],v.shape[2],v.shape[3],v.shape[4]]):v}}),AT={kernelName:Zf,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=u(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,c=n.pad,l=n.dimRoundingMode;return{x:function(){return xT(e,a,i,o,s,c,l)}}}};var kT=Qm({maxPoolGrad_:function(e,t,n,r,a,i,o){var s=Zm(e,"dy","maxPoolGrad"),u=Zm(t,"input","maxPoolGrad"),c=Zm(n,"output","maxPoolGrad");ml(u.rank===s.rank,(function(){return"Rank of input (".concat(u.rank,") does not match rank of dy (").concat(s.rank,")")})),ml(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank ".concat(s.rank,".")})),ml(4===u.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank ".concat(u.rank,".")})),qb("maxPoolGrad",i,o);var l={dy:s,input:u,output:c},d={filterSize:r,strides:a,pad:i,dimRoundingMode:o};return zm.runKernel(Xf,l,d)}}),wT={kernelName:Kf,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=u(t,2),a=r[0],i=r[1],o=n.filterSize,s=n.strides,c=n.pad;return{x:function(){return kT(e,a,i,o,s,c)}}}},ST={kernelName:Qf,inputsToSave:["x"],gradFunc:function(e,t,n){var r=u(t,1)[0],a=Tl(n.axis,r.shape),i=bl(Vx(r.shape,a)[1]);return{x:function(){var t=r.shape.slice();a.forEach((function(e){t[e]=1}));var n=Kb(e,t);return vb(gb(n,ZA(r.shape,"float32")),i)}}}},IT={kernelName:$f,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=u(t,2),i=a[0],o=gT(e,a[1],i,Tl(r,i.shape));return{x:function(){return o.x()}}}},ET={kernelName:ep,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1];return{a:function(){return gb(e,lg(bA(r,a),"float32"))},b:function(){return gb(e,lg(fA(r,a),"float32"))}}}},CT={kernelName:tp,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Qb(e,a,r.shape)}}}},NT={kernelName:np,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1],i=vy(r.shape,a.shape);return{a:function(){var t=my(r.shape,i);return t.length>0?Kb(eA(e,t),r.shape):e},b:function(){var t=gb(e,cy(lA(vb(r,a)))),n=my(a.shape,i);return n.length>0?Kb(eA(t,n),a.shape):t}}}},TT={kernelName:ap,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1],i=vy(r.shape,a.shape);return{a:function(){var t=gb(e,lg(a,"float32")),n=my(r.shape,i);return n.length>0?Kb(eA(t,n),r.shape):t},b:function(){var t=gb(e,lg(r,"float32")),n=my(a.shape,i);return n.length>0?Kb(eA(t,n),a.shape):t}}}},_T={kernelName:ip,gradFunc:function(e){return{x:function(){return cy(e)}}}},RT={kernelName:dp,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return XA(n.shape,"float32")}}}},MT={kernelName:lp,gradFunc:function(e){return{x:function(){return Fx(e)}}}},OT={kernelName:fp,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return fw(e,r).map((function(e){return function(){return e}}))}},FT={kernelName:pp,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return Qb(e,a,r.shape)}}}},PT={kernelName:mp,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=u(t,3),r=n[0],a=n[1],i=n[2],o=r,s=a,c=vy(o.shape,s.shape);return{a:function(){var t=lg(s,"float32"),n=gb(e,gb(t,Yx(o,OA(t,Jx(1))))),r=my(o.shape,c);return r.length>0&&(n=eA(n,r)),Kb(n,o.shape)},b:function(){var t=fA(o,0),n=Ox(t,kA(o),Fx(o)),r=gb(e,gb(i,n)),a=my(s.shape,c);return a.length>0&&(r=eA(r,a)),Kb(r,s.shape)}}}},DT={kernelName:vp,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1],i=fA(r,0);return{x:function(){return Ox(i,e,gb(e,a))},alpha:function(){var t=Ox(i,Fx(e),gb(e,r)),n=my(a.shape,e.shape);return n.length>0&&(t=eA(t,n)),Kb(t,a.shape)}}}};function LT(e,t,n){var r=e.shape.length,a=r-n.length,i=sI.getAxesPermutation(n,r),o=e;null!=i&&(o=dy(e,i));var s=o.shape.slice(),u=s.splice(r-n.length,n.length).reduce((function(e,t){return e*t}),1);s.push(u);var c=function(e,t,n){var r=e.shape.slice();r[n]=1;var a=Kb(t,r),i=Ix(e,n,!0,!1),o=Ix(e,n,!0,!0),s=gb(i,o);return gb(a,s)}(o.reshape(s),t,a);if(c=c.reshape(o.shape),null!=i){var l=sI.getUndoAxesPermutation(i);c=dy(c,l)}return c}var zT={kernelName:gp,inputsToSave:["x"],gradFunc:function(e,t,n){var r=u(t,1)[0],a=n.axis,i=[];return i=null==a?r.shape.map((function(e,t){return t})):"number"==typeof a?[a]:a,{x:function(){return LT(r,e,i)}}}},BT={kernelName:of,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1],i=vy(r.shape,a.shape);return{a:function(){var t=vb(e,lg(a,"float32")),n=my(r.shape,i);return n.length>0?Kb(eA(t,n),r.shape):t},b:function(){var t=gb(e,lg(r,"float32")),n=my(a.shape,i);n.length>0&&(t=Kb(eA(t,n),a.shape));var o=$x(a);return cy(vb(t,lg(o,"float32")))}}}},WT={kernelName:xp,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return vb(e,cy($x(n)))}}}},jT={kernelName:Cp,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0],r=gb(bA(n,6),ew(n));return{x:function(){return gb(e,lg(r,"float32"))}}}},VT={kernelName:Ap,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return gb(e,lg(ew(n),"float32"))}}}},UT={kernelName:kp,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return Kb(e,n.shape)}}}},HT={kernelName:Ip,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:u(t,1)[0]};return{images:function(){return zm.runKernel(Ep,r,n)}}}},GT={kernelName:wp,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:u(t,1)[0]};return{images:function(){return zm.runKernel(Sp,r,n)}}}},qT={kernelName:Np,gradFunc:function(e,t,n){var r=Tl(n.dims,e.shape);return{x:function(){return Ck(e,r)}}}},KT={kernelName:Tp,gradFunc:function(e){return{x:function(){return Fx(e)}}}},XT={kernelName:_p,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return cy(vb(e,gb(Yx(n,1.5),2)))}}}},ZT={kernelName:Op,inputsToSave:["condition"],gradFunc:function(e,t){var n=u(t,1)[0];return{condition:function(){return lg(Fx(n),"float32")},t:function(){return gb(e,lg(n,e.dtype))},e:function(){return gb(e,lg(LA(n),e.dtype))}}}},YT={kernelName:Fp,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){var t=fA(n,Jx(0)),r=Jx(yI),a=Jx(bI),i=gb(e,a),o=gb(gb(e,r),aA(lg(n,"float32")));return Ox(t,i,o)}}}},JT={kernelName:Bp,outputsToSave:[!0],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return gb(e,gb(n,OA(Jx(1),n)))}}}},QT={kernelName:zp,gradFunc:function(e){return{x:function(){return Fx(e)}}}},$T={kernelName:Dp,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return gb(wx(lg(n,"float32")),e)}}}},e_={kernelName:Lp,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return gb(Sx(lg(n,"float32")),e)}}}},t_={kernelName:Pp,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=u(t,1)[0],a=n.begin,i=n.size,o=r.shape,s=u(Xy(r,a,i),2),c=s[0],l=s[1],d=[],f=0;f<e.rank;f++)d.push([c[f],o[f]-c[f]-l[f]]);return{x:function(){return ok(e,d)}}}},n_={kernelName:Gp,outputsToSave:[!0],gradFunc:function(e,t,n){var r=u(t,1)[0],a=n.dim,i=gb(e,r);return{logits:function(){return OA(i,gb(eA(i,[a],true),r))}}}},r_={kernelName:Wp,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return gb(e,Jb(n))}}}},a_={kernelName:Up,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return tx(e,r,a)}}}},i_={kernelName:Hp,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return Yb(e,r)}}}},o_={kernelName:jp,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return vb(e,gb(Qx(lg(n,"float32")),2))}}}},s_={kernelName:Qp,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return gb(e,gb(lg(n,"float32"),2))}}}},u_={kernelName:Jp,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1],i=Jx(2);return{a:function(){return gb(e,gb(i,OA(r,a)))},b:function(){return gb(e,gb(i,OA(a,r)))}}}},c_={kernelName:mh,gradFunc:function(e){return{x:function(){return Fx(e)}}}},l_={kernelName:rh,inputsToSave:["a","b"],gradFunc:function(e,t){var n=u(t,2),r=n[0],a=n[1],i=vy(r.shape,a.shape);return{a:function(){var t=e,n=my(r.shape,i);return n.length>0&&(t=eA(t,n)),Kb(t,r.shape)},b:function(){var t=e,n=my(a.shape,i);return n.length>0&&(t=eA(t,n)),Kb(cy(t),a.shape)}}}},d_={kernelName:Vp,inputsToSave:["x"],gradFunc:function(e,t,n){var r=u(t,1)[0],a=r.shape.slice();Tl(n.axis,r.shape).forEach((function(e){a[e]=1}));var i=Kb(e,a),o=gb(i,ZA(r.shape,"float32"));return{x:function(){return o}}}},f_={kernelName:ah,inputsToSave:["x"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return vb(e,$x(wx(n)))}}}},p_={kernelName:ih,outputsToSave:[!0],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return gb(OA(Jx(1),$x(n)),e)}}}},h_={kernelName:oh,inputsToSave:["x"],gradFunc:function(e,t,n){var r=u(t,1)[0],a=n.reps;return{x:function(){var t=Fx(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=hb(t,Qb(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var i=0;i<a[0];++i)for(var o=0;o<a[1];++o)t=hb(t,Qb(e,[i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var s=0;s<a[0];++s)for(var u=0;u<a[1];++u)for(var c=0;c<a[2];++c)t=hb(t,Qb(e,[s*r.shape[0],u*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-".concat(r.rank," tensors yet."));for(var l=0;l<a[0];++l)for(var d=0;d<a[1];++d)for(var f=0;f<a[2];++f)for(var p=0;p<a[3];++p)t=hb(t,Qb(e,[l*r.shape[0],d*r.shape[1],f*r.shape[2],p*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},m_={kernelName:ch,gradFunc:function(e,t,n){var r=qx(n.perm);return{x:function(){return dy(e,r)}}}},v_={kernelName:dh,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return $k(e,r)}}}},g_={kernelName:fh,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=u(t,1)[0];return{x:function(){return function(e,t){for(var n=qA(t,Fx(t)),r=dA(e,n),a=pA(t,Jx(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=iA(a,o+1);a=DA(a,ZA(r.shape,"bool"));var s=Fx(r);return Ox(a,r,s)}(e,n)}}}};for(var y_={kernelName:hh,gradFunc:function(e){return{x:function(){return Fx(e)}}}},b_=0,x_=[vN,gN,yN,bN,xN,AN,kN,wN,SN,IN,EN,CN,TN,RN,MN,ON,FN,PN,DN,LN,zN,BN,jN,WN,UN,HN,GN,qN,KN,XN,BT,ZN,YN,JN,QN,$N,tT,eT,nT,rT,oT,sT,uT,cT,lT,dT,fT,pT,hT,vT,yT,yT,bT,AT,wT,ST,IT,ET,CT,NT,TT,_T,RT,MT,OT,FT,FT,PT,DT,zT,WT,jT,VT,UT,HT,GT,qT,KT,XT,ZT,YT,JT,QT,$T,e_,t_,n_,r_,a_,a_,i_,i_,o_,u_,s_,c_,l_,d_,f_,p_,h_,m_,v_,g_,y_];b_<x_.length;b_++){Th(x_[b_])}var A_={};function k_(e,t){return Zg((function(){return Qx(eA(gb(e,e),t,!0))}))}Dc(A_,{maxNorm:function(){return M_},minMaxNorm:function(){return P_},nonNeg:function(){return F_},unitNorm:function(){return O_}});var w_=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"getConfig",value:function(){return{}}}]),n}(Jy.Serializable),S_=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).defaultMaxValue=2,r.defaultAxis=0,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return Qe(n,[{key:"apply",value:function(e){var t=this;return Zg((function(){var n=k_(e,t.axis),r=dx(n,0,t.maxValue);return gb(e,vb(r,hb(aC(),n)))}))}},{key:"getConfig",value:function(){return{maxValue:this.maxValue,axis:this.axis}}}]),n}(w_);S_.className="MaxNorm",Jy.registerClass(S_);var I_=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).defaultAxis=0,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return Qe(n,[{key:"apply",value:function(e){var t=this;return Zg((function(){return vb(e,hb(aC(),k_(e,t.axis)))}))}},{key:"getConfig",value:function(){return{axis:this.axis}}}]),n}(w_);I_.className="UnitNorm",Jy.registerClass(I_);var E_=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return Ik(e)}}]),n}(w_);E_.className="NonNeg",Jy.registerClass(E_);var C_=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).defaultMinValue=0,r.defaultMaxValue=1,r.defaultRate=1,r.defaultAxis=0,r.minValue=null!=e.minValue?e.minValue:r.defaultMinValue,r.maxValue=null!=e.maxValue?e.maxValue:r.defaultMaxValue,r.rate=null!=e.rate?e.rate:r.defaultRate,r.axis=null!=e.axis?e.axis:r.defaultAxis,r}return Qe(n,[{key:"apply",value:function(e){var t=this;return Zg((function(){var n=k_(e,t.axis),r=hb(gb(t.rate,dx(n,t.minValue,t.maxValue)),gb(1-t.rate,n));return gb(e,vb(r,hb(aC(),n)))}))}},{key:"getConfig",value:function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}]),n}(w_);C_.className="MinMaxNorm",Jy.registerClass(C_);var N_={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function T_(e){return kE(e)}function __(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return SE(e,Jy.SerializationMap.getMap().classNameMap,t,"constraint")}function R_(e){return null==e?null:"string"==typeof e?__({className:e in N_?N_[e]:e,config:{}}):e instanceof w_?e:__(e)}function M_(e){return new S_(e)}function O_(e){return new I_(e)}function F_(){return new E_}function P_(e){return new C_(e)}var D_={};function L_(){return new EC}function z_(){return new CC}function B_(e){return new NC(e)}function W_(e){return new TC(e)}function j_(e){return new _C(e)}function V_(e){return new RC(e)}function U_(e){return new MC(e)}function H_(e){return new OC(e)}function G_(e){return new FC(e)}function q_(e){return new PC(e)}function K_(e){return new DC(e)}function X_(e){return new LC(e)}function Z_(e){return new zC(e)}function Y_(e){return new BC(e)}function J_(e){return new WC(e)}Dc(D_,{constant:function(){return B_},glorotNormal:function(){return q_},glorotUniform:function(){return G_},heNormal:function(){return K_},heUniform:function(){return X_},identity:function(){return U_},leCunNormal:function(){return Z_},leCunUniform:function(){return Y_},ones:function(){return z_},orthogonal:function(){return J_},randomNormal:function(){return j_},randomUniform:function(){return W_},truncatedNormal:function(){return V_},varianceScaling:function(){return H_},zeros:function(){return L_}});var Q_={};function $_(e){return eR.apply(this,arguments)}function eR(){return eR=ct(st().mark((function e(t){var n,r,a,i,o,s,u,c;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(i in n=[],r=[],a=[],t)"number"!=typeof(o=t[i])&&(s=o,n.push(s.data()),r.push(i),a.push(s));if(!(n.length>0)){e.next=10;break}return e.next=7,Promise.all(n);case 7:for(u=e.sent,c=0;c<u.length;++c)t[r[c]]=u[c][0];Yg(a);case 10:case"end":return e.stop()}}),e)}))),eR.apply(this,arguments)}function tR(e){if(null!=e)for(var t in e){var n=e[t];"number"!=typeof n&&n.dispose()}}Dc(Q_,{Layer:function(){return iN},RNN:function(){return WO},RNNCell:function(){return jO},activation:function(){return cP},add:function(){return yP},alphaDropout:function(){return uD},average:function(){return bP},averagePooling1d:function(){return NP},averagePooling2d:function(){return RP},averagePooling3d:function(){return FP},avgPool1d:function(){return TP},avgPool2d:function(){return MP},avgPool3d:function(){return PP},avgPooling1d:function(){return _P},avgPooling2d:function(){return OP},avgPooling3d:function(){return DP},batchNormalization:function(){return IP},bidirectional:function(){return eD},concatenate:function(){return xP},conv1d:function(){return eP},conv2d:function(){return tP},conv2dTranspose:function(){return nP},conv3d:function(){return rP},conv3dTranspose:function(){return aP},convLstm2d:function(){return YP},convLstm2dCell:function(){return JP},cropping2D:function(){return oP},dense:function(){return lP},depthwiseConv2d:function(){return uP},dot:function(){return SP},dropout:function(){return dP},elu:function(){return XF},embedding:function(){return gP},flatten:function(){return pP},gaussianDropout:function(){return sD},gaussianNoise:function(){return oD},globalAveragePooling1d:function(){return LP},globalAveragePooling2d:function(){return zP},globalMaxPool1d:function(){return nD},globalMaxPool2d:function(){return rD},globalMaxPooling1d:function(){return BP},globalMaxPooling2d:function(){return WP},gru:function(){return HP},gruCell:function(){return GP},input:function(){return LM},inputLayer:function(){return KF},layerNormalization:function(){return EP},leakyReLU:function(){return YF},lstm:function(){return qP},lstmCell:function(){return KP},masking:function(){return cD},maxPool1d:function(){return aD},maxPool2d:function(){return iD},maxPooling1d:function(){return jP},maxPooling2d:function(){return VP},maxPooling3d:function(){return UP},maximum:function(){return AP},minimum:function(){return kP},multiply:function(){return wP},permute:function(){return vP},prelu:function(){return JF},reLU:function(){return ZF},repeatVector:function(){return hP},reshape:function(){return mP},rnn:function(){return QP},separableConv2d:function(){return iP},simpleRNN:function(){return XP},simpleRNNCell:function(){return ZP},softmax:function(){return QF},spatialDropout1d:function(){return fP},stackedRNNCells:function(){return $P},thresholdedReLU:function(){return $F},timeDistributed:function(){return tD},upSampling2d:function(){return sP},zeroPadding2d:function(){return CP}});var nR=function(){function e(){Ye(this,e),this.validationData=null}return Qe(e,[{key:"setParams",value:function(e){this.params=e}},{key:"onEpochBegin",value:function(){var e=ct(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=ct(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=ct(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=ct(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setModel",value:function(e){}}]),e}(),rR=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;Ye(this,e),null==t&&(t=[]),this.callbacks=t,this.queueLength=n}return Qe(e,[{key:"append",value:function(e){this.callbacks.push(e)}},{key:"setParams",value:function(e){var t,n=lc(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setParams(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"setModel",value:function(e){var t,n=lc(this.callbacks);try{for(n.s();!(t=n.n()).done;){t.value.setModel(e)}}catch(r){n.e(r)}finally{n.f()}}},{key:"onEpochBegin",value:function(){var e=ct(st().mark((function e(t,n){var r,a,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=lc(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=ct(st().mark((function e(t,n){var r,a,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=lc(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onEpochEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=ct(st().mark((function e(t,n){var r,a,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=lc(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchBegin(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=ct(st().mark((function e(t,n){var r,a,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=lc(this.callbacks),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return i=a.value,e.next=8,i.onBatchEnd(t,n);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=ct(st().mark((function e(t){var n,r,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=lc(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainBegin(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=ct(st().mark((function e(t){var n,r,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=lc(this.callbacks),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a.onTrainEnd(t);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,this,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),aR=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.call(this)}return Qe(n,[{key:"onEpochBegin",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=ct(st().mark((function e(t,n){var r,a,i,o=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=function(e){var t=n[e];if("number"==typeof t)o.totals.hasOwnProperty(e)||(o.totals[e]=0),o.totals[e]=o.totals[e]+t*r;else{var a;e in o.totals?a=o.totals[e]:o.totals[e]=0;var i=Zg((function(){return hb(o.totals[e],gb(t,r))}));o.totals[e]=i,null!=a&&a.dispose()}},n)a(i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=ct(st().mark((function e(t,n){var r,a,i,o=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n){r=lc(this.params.metrics);try{for(i=function(){var e=a.value;null!=o.totals[e]&&("number"==typeof o.totals[e]?n[e]=o.totals[e]/o.seen:Zg((function(){var t=gb(vb(1,o.seen),o.totals[e]);n[e]=t,o.totals[e].dispose(),Jg(n[e])})))},r.s();!(a=r.n()).done;)i()}catch(t){r.e(t)}finally{r.f()}}case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(nR),iR=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"onTrainBegin",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=ct(st().mark((function e(t,n){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"syncData",value:function(){var e=ct(st().mark((function e(){var t,n,r,a,i,o,s,u,c;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(i=this.history[a],o=0;o<i.length;++o)"number"!=typeof i[o]&&(s=i[o],t.push(s.data()),n.push(a),r.push(o));return e.next=4,Promise.all(t);case 4:for(u=e.sent,c=0;c<u.length;++c)this.history[n[c]][r[c]].dispose(),this.history[n[c]][r[c]]=u[c][0];case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(nR),oR=function(e){et(n,e);var t=ot(n);function n(e,r){var a;if(Ye(this,n),(a=t.call(this)).currentEpoch=0,a.nowFunc=e.nowFunc,a.nextFrameFunc=e.nextFrameFunc||oI,a.yieldEvery=r||"auto","auto"===a.yieldEvery&&(a.yieldEvery=125),"never"===a.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return Fh.isNumber(a.yieldEvery)&&(a.maybeWait=function(e,t,n){var r,a=null!=n?n():Fh.now();return function(){var i=null!=n?n():Fh.now();return i-a<t||(a=i,r=e.apply(void 0,arguments)),r}}(a.maybeWait.bind(at(a)),a.yieldEvery,a.nowFunc)),a.trainBegin=e.onTrainBegin,a.trainEnd=e.onTrainEnd,a.epochBegin=e.onEpochBegin,a.epochEnd=e.onEpochEnd,a.batchBegin=e.onBatchBegin,a.batchEnd=e.onBatchEnd,a.yield=e.onYield,it(a)}return Qe(n,[{key:"maybeWait",value:function(){var e=ct(st().mark((function e(t,n,r){var a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],e.t0=null!=this.yield,!e.t0){e.next=6;break}return e.next=5,$_(r);case 5:a.push(this.yield(t,n,r));case 6:return a.push(this.nextFrameFunc()),e.next=9,Promise.all(a);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"onEpochBegin",value:function(){var e=ct(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,e.t0=null!=this.epochBegin,!e.t0){e.next=7;break}return e.next=5,$_(n);case 5:return e.next=7,this.epochBegin(t,n);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=ct(st().mark((function e(t,n){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],e.t0=null!=this.epochEnd,!e.t0){e.next=6;break}return e.next=5,$_(n);case 5:r.push(this.epochEnd(t,n));case 6:return"epoch"===this.yieldEvery&&r.push(this.nextFrameFunc()),e.next=9,Promise.all(r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchBegin",value:function(){var e=ct(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null!=this.batchBegin,!e.t0){e.next=6;break}return e.next=4,$_(n);case 4:return e.next=6,this.batchBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onBatchEnd",value:function(){var e=ct(st().mark((function e(t,n){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],e.t0=null!=this.batchEnd,!e.t0){e.next=6;break}return e.next=5,$_(n);case 5:r.push(this.batchEnd(t,n));case 6:return"batch"===this.yieldEvery?r.push(this.nextFrameFunc()):Fh.isNumber(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=9,Promise.all(r);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainBegin",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null!=this.trainBegin,!e.t0){e.next=6;break}return e.next=4,$_(t);case 4:return e.next=6,this.trainBegin(t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null!=this.trainEnd,!e.t0){e.next=6;break}return e.next=4,$_(t);case 4:return e.next=6,this.trainEnd(t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(nR);function sR(e,t){return null==e&&(e={}),e instanceof nR?[e]:Array.isArray(e)&&e[0]instanceof nR?e:yE(e).map((function(e){return new oR(e,t)}))}var uR=function(){function e(){Ye(this,e)}return Qe(e,null,[{key:"registerCallbackConstructor",value:function(t,n){Fh.assert(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, but got ".concat(t)})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)}},{key:"checkForDuplicate",value:function(t){for(var n in e.constructors)e.constructors[+n].forEach((function(e){if(e===t)throw new lE("Duplicate callback constructor.")}))}},{key:"clear",value:function(){e.constructors={}}},{key:"createCallbacks",value:function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,Tn(e.constructors[a]))}return n.map((function(e){return new e}))}}]),e}(),cR=uR;function lR(e,t,n,r,a,i,o,s,u){var c=new iR,l=[new aR].concat(Tn(cR.createCallbacks(t)));null!=e&&l.push.apply(l,Tn(e)),l.push(c);var d=new rR(l);return d.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:u}),{callbackList:d,history:c}}function dR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return SE(e,Jy.SerializationMap.getMap().classNameMap,t,"layer",n)}function fR(e,t){return Zg((function(){"float32"!==e.dtype&&(e=lg(e,"float32"));var n=eA(gC(e),t,!0),r=cA(n.shape,aC()),a=Qx(qA(n,r));return vb(e,a)}))}function pR(e,t){return Zg((function(){return KA(gC(OA(t,e)),-1)}))}function hR(e,t){return Zg((function(){return KA(yb(OA(t,e)),-1)}))}function mR(e,t){return Zg((function(){var n=OA(e,t),r=dx(yb(e),aC(),Number.MAX_VALUE),a=yb(vb(n,r));return gb(100,KA(a,-1))}))}function vR(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Zg((function(){if(n)t=Gk(t);else{var r=eA(t,t.shape.length-1,!0);t=vb(t,r)}return t=dx(t,aC(),1-aC()),cy(eA(gb(lg(e,"float32"),kA(t)),t.shape.length-1))}))}function gR(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Zg((function(){var r=lg(lA(sC(e)),"int32"),a=(t=dx(t,aC(),1-aC())).shape;return vR(Kb(Wg(r,a[a.length-1]),a),t,n)}))}function yR(e,t){return Zg((function(){var n;return n=dx(t,aC(),1-aC()),n=kA(vb(n,OA(1,n))),KA(function(e,t){if(!Fh.arraysEqual(e.shape,t.shape))throw new lE("logits and labels must have the same shape, but got shapes ".concat(JSON.stringify(e.shape)," and ").concat(JSON.stringify(t.shape)));return Zg((function(){var n=Ik(t),r=cy(yb(t));return hb(OA(n,gb(t,e)),wA(aA(r)))}))}(e,n),-1)}))}function bR(e,t){return Zg((function(){var n=fR(e,-1),r=fR(t,-1),a=gb(n,r);return cy(eA(a,-1))}))}cR.constructors={};var xR={meanSquaredError:pR,meanAbsoluteError:hR,meanAbsolutePercentageError:mR,meanSquaredLogarithmicError:function(e,t){return Zg((function(){var n=dx(t,aC(),Number.MAX_VALUE),r=kA(hb(1,n)),a=dx(e,aC(),Number.MAX_VALUE),i=kA(hb(1,a));return KA(gC(OA(r,i)),-1)}))},squaredHinge:function(e,t){return Zg((function(){var n=qA(0,OA(1,gb(e,t)));return KA(gC(n),-1)}))},hinge:function(e,t){return Zg((function(){var n=qA(0,OA(1,gb(e,t)));return KA(n,-1)}))},categoricalHinge:function(e,t){return Zg((function(){var n=eA(gb(e,t),-1),r=Xx(gb(OA(1,e),t),-1);return qA(0,hb(1,OA(r,n)))}))},logcosh:function(e,t){return Zg((function(){var n=Math.log(2),r=OA(t,e),a=OA(hb(r,RA(gb(-2,r))),n);return KA(a,-1)}))},categoricalCrossentropy:vR,sparseCategoricalCrossentropy:gR,binaryCrossentropy:yR,kullbackLeiblerDivergence:function(e,t){return Zg((function(){var n=dx(e,aC(),1),r=dx(t,aC(),1);return eA(gb(e,kA(vb(n,r))),-1)}))},poisson:function(e,t){return Zg((function(){var n=kA(hb(aC(),t));return KA(OA(t,gb(e,n)),-1)}))},cosineProximity:bR};function AR(e){if("string"==typeof e){if(e in xR)return xR[e];var t="Unknown loss ".concat(e);throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss ".concat(e,'. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy')),new lE(t)}return e}function kR(e,t){return Zg((function(){var n=gb(.5,ak(t)),r=iC(fA(t,n),e.dtype);return KA(Mx(e,r),-1)}))}function wR(e,t){return Zg((function(){return iC(Mx(Sb(e,-1),Sb(t,-1)),"float32")}))}function SR(e,t){return Zg((function(){return lg(eA(DA(Mx(e,1),Mx(t,1))),"float32")}))}function IR(e,t){return Zg((function(){var n=SR(e,t),r=function(e,t){return Zg((function(){return lg(eA(DA(Mx(e,0),Mx(t,1))),"float32")}))}(e,t),a=hb(n,r);return lg(Ox(fA(a,0),vb(n,a),0),"float32")}))}function ER(e,t){return Zg((function(){var n=SR(e,t),r=function(e,t){return Zg((function(){return lg(eA(DA(Mx(e,1),Mx(t,0))),"float32")}))}(e,t),a=hb(n,r);return lg(Ox(fA(a,0),vb(n,a),0),"float32")}))}function CR(e,t){return yR(e,t)}function NR(e,t){return e.rank===t.rank&&(e=Qk(e,[e.rank-1])),(t=Sb(t,-1)).dtype!==e.dtype&&(t=lg(t,e.dtype)),lg(Mx(e,t),"float32")}var TR=vR,_R=gR,RR={binaryAccuracy:kR,categoricalAccuracy:wR,precision:IR,categoricalCrossentropy:TR,sparseCategoricalCrossentropy:_R,mse:pR,MSE:pR,mae:hR,MAE:hR,mape:mR,MAPE:mR,cosine:bR};function MR(e){if("string"==typeof e&&e in RR)return RR[e];if("string"!=typeof e&&null!=e)return e;throw new lE("Unknown metric ".concat(e))}function OR(e){if(mE(null!==e,"Unknown LossOrMetricFn ".concat(e)),"string"==typeof e)return e;for(var t,n=0,r=Object.keys(xR);n<r.length;n++){var a=r[n];if(xR[a]===e){t=a;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(RR);i<o.length;i++){var s=o[i];if(RR[s]===e){t=s;break}}return void 0!==t?t:e.name}var FR=1048576;function PR(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!DR(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>FR&&console.warn('User-defined metadata of model "'.concat(t,'" is too large in size (length=').concat(r.length," when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ").concat(FR,"."))}}function DR(e){if(null===e)return!0;if("object"==typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!=typeof r||!DR(e[r]))return!1}return!0}if(Array.isArray(e)){var a,i=lc(e);try{for(i.s();!(a=i.n()).done;){if(!DR(a.value))return!1}}catch(s){i.e(s)}finally{i.f()}return!0}return!1}var o=typeof e;return"string"===o||"number"===o||"boolean"===o}function LR(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log,i=BR(e),o=["Layer (type)","Input Shape","Output shape","Param #"];if(i?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var s in o.push("Receives inputs"),r=[],e.nodesByDepth){var u;(u=r).push.apply(u,Tn(e.nodesByDepth[s]))}a("_".repeat(t)),WR(o,n,a),a("=".repeat(t));for(var c=e.layers,l=0;l<c.length;++l)i?jR(c[l],n,a):VR(c[l],n,r,a),a((l===c.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var d=zR(e),f=ZC(e.nonTrainableWeights);a("Total params: ".concat(d+f)),a("Trainable params: ".concat(d)),a("Non-trainable params: ".concat(f)),a("_".repeat(t))}function zR(e){return null!=e.collectedTrainableWeights?ZC(e.collectedTrainableWeights):ZC(e.trainableWeights)}function BR(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var s=o[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,Tn(s))}if(t){var u,c=lc(e.layers);try{for(c.s();!(u=c.n()).done;){var l,d=u.value,f=!1,p=lc(d.inboundNodes);try{for(p.s();!(l=p.n()).done;){var h=l.value;if(-1!==r.indexOf(h)){if(f){t=!1;break}f=!0}}}catch(m){p.e(m)}finally{p.f()}if(!t)break}}catch(m){c.e(m)}finally{c.f()}}return t}function WR(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function jR(e,t,n){var r,a;try{a=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(s){a="multiple"}try{r=JSON.stringify(e.outputShape)}catch(s){r="multiple"}var i=e.name,o=e.getClassName();WR(["".concat(i," (").concat(o,")"),a,r,e.countParams().toString()],t,n)}function VR(e,t,n,r){var a,i;try{i=e.inboundNodes.map((function(e){return JSON.stringify(e.inputShapes)})).join(",")}catch(g){i="multiple"}try{a=JSON.stringify(e.outputShape)}catch(g){a="multiple"}var o,s=[],u=lc(e.inboundNodes);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(c)))for(var l=0;l<c.inboundLayers.length;++l){var d=c.inboundLayers[l].name,f=c.nodeIndices[l],p=c.tensorIndices[l];s.push("".concat(d,"[").concat(f,"][").concat(p,"]"))}}}catch(y){u.e(y)}finally{u.f()}var h=e.name,m=e.getClassName(),v=0===s.length?"":s[0];WR(["".concat(h," (").concat(m,")"),i,a,e.countParams().toString(),v],t,r);for(var g=1;g<s.length;++g)WR(["","","","",s[g]],t,r)}function UR(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function HR(e,t){if(null===e)return null;if("string"==typeof e)return xE(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];UR(t,a,i)?n.push(i):n.push(HR(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var c=u[s],l=e[c];if("name"===c&&"string"==typeof l)o[c]=l;else{var d=xE(c);o[d]=HR(l,d)}}return o}function GR(e,t){if(null==e)return null;if("string"==typeof e)return bE(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];UR(t,a,i)?n.push(i):n.push(GR(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var c=u[s],l=e[c],d=bE(c);o[d]="name"!==c&&"className"!==c||"string"!=typeof l?GR(l,c):l}return o}var qR="0.0.0",KR=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),(r=t.call(this,{})).containerNodes=new Set,r.name=e.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=DE(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(e.inputs)?r.inputs=e.inputs.slice():r.inputs=[e.inputs],Array.isArray(e.outputs)?r.outputs=e.outputs.slice():r.outputs=[e.outputs],EE(r.inputs).length!==r.inputs.length)throw new lE("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ".concat(r.inputs.map((function(e){return e.name}))));EE(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ".concat(r.outputs.map((function(e){return e.name})))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];var i,o=lc(r.outputs);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.sourceLayer,c=s.nodeIndex,l=s.tensorIndex;r.outputLayers.push(u),r.outputLayersNodeIndices.push(c),r.outputLayersTensorIndices.push(l)}}catch(xe){o.e(xe)}finally{o.f()}var d,f=lc(r.inputs);try{for(f.s();!(d=f.n()).done;){var p=d.value,h=p.sourceLayer,m=p.nodeIndex,v=p.tensorIndex;mE(0===m,"input layer has >1 nodes"),mE(0===v,"input layer has >1 tensors"),r.inputLayers.push(h),r.inputLayersNodeIndices.push(m),r.inputLayersTensorIndices.push(v)}}catch(xe){f.e(xe)}finally{f.f()}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var g=0;g<r.inputLayers.length;g++){var y=r.inputLayers[g];if(!(y instanceof sN))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. Received inputs: ".concat(e.inputs,". Input ").concat(g," (0-based) originates from layer type ").concat(y.getClassName(),"."));r.inputNames.push(y.name),r.feedInputShapes.push(y.batchInputShape),r.feedInputNames.push(y.name)}var b,x=lc(r.outputLayers);try{for(x.s();!(b=x.n()).done;){var A=b.value;r.outputNames.push(A.name)}}catch(xe){x.e(xe)}finally{x.f()}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));var k,w={},S={},I={},E={},C={},N=[],T=function e(t,a,i,o,s,u){(null==o||null==s||null==u)&&(o=t.sourceLayer,s=t.nodeIndex,u=t.tensorIndex);var c=o.inboundNodes[s];if(-1!==i.indexOf(c))throw new cE("The tensor ".concat(t.name,' at layer "').concat(o.name,'" is part of a cycle.'));if(-1===a.indexOf(c)){r.containerNodes.add(n.nodeKey(o,s)),o.id in C||(C[o.id]=Object.keys(C).length),-1===i.indexOf(c)&&i.push(c);for(var l=c.inboundLayers.length,d=0;d<l;d++){e(c.inputTensors[d],a,i,c.inboundLayers[d],c.nodeIndices[d],c.tensorIndices[d])}for(a.push(c);i.indexOf(c)>=0;)i.splice(i.indexOf(c),1);N.push(c)}},_=[],R=[],M=lc(r.outputs);try{for(M.s();!(k=M.n()).done;){T(k.value,_,R)}}catch(xe){M.e(xe)}finally{M.f()}var O,F=lc(N.slice().reverse());try{for(F.s();!(O=F.n()).done;){var P=O.value;S[P.id]=P,P.id in w||(w[P.id]=0);var D=w[P.id],L=null==I[P.outboundLayer.id]?0:I[P.outboundLayer.id];D=Math.max(D,L),I[P.outboundLayer.id]=D,E[P.outboundLayer.id]=P.outboundLayer,w[P.id]=D;for(var z=0;z<P.inboundLayers.length;z++){var B=P.inboundLayers[z],W=P.nodeIndices[z],j=B.inboundNodes[W],V=null==w[j.id]?0:w[j.id];w[j.id]=Math.max(D+1,V),S[j.id]=j}}}catch(xe){F.e(xe)}finally{F.f()}var U={};for(var H in w){var G=w[H];G in U||(U[G]=[]),U[G].push(S[H])}var q={};for(var K in I){var X=I[K];X in q||(q[X]=[]),q[X].push(E[K])}var Z=Object.keys(q).map((function(e){return parseInt(e,10)})).sort(IE);r.layers=[];var Y,J=lc(Z);try{for(J.s();!(Y=J.n()).done;){var Q=q[Y.value];Q.sort((function(e,t){var n=C[e.id],r=C[t.id];return n<r?-1:n>r?1:0}));var $,ee=lc(Q);try{for(ee.s();!($=ee.n()).done;){var te=$.value;te instanceof n&&r.internalContainerRefs.push(te),r.layers.push(te)}}catch(xe){ee.e(xe)}finally{ee.f()}}}catch(xe){J.e(xe)}finally{J.f()}r.layersByDepth=q,Z=Object.keys(U).map((function(e){return parseInt(e,10)})).sort(IE);var ne,re=r.inputs.slice(),ae=[],ie=lc(Z);try{for(ie.s();!(ne=ie.n()).done;){var oe,se=lc(U[ne.value]);try{for(se.s();!(oe=se.n()).done;){var ue=oe.value,ce=ue.outboundLayer;if(null!=ce){var le,de=lc(ue.inputTensors);try{for(de.s();!(le=de.n()).done;){var fe=le.value;if(-1===re.indexOf(fe))throw new cE("Graph disconnected: cannot obtain value for tensor ".concat(fe,' at layer "').concat(ce.name,'". The following previous layers were accessed without issue: ').concat(ae))}}catch(xe){de.e(xe)}finally{de.f()}var pe,he=lc(ue.outputTensors);try{for(he.s();!(pe=he.n()).done;){var me=pe.value;re.push(me)}}catch(xe){he.e(xe)}finally{he.f()}ae.push(ce.name)}}}catch(xe){se.e(xe)}finally{se.f()}}}catch(xe){ie.e(xe)}finally{ie.f()}r.nodesByDepth=U;var ve,ge=r.layers.map((function(e){return e.name})),ye=lc(ge);try{var be=function(){var e=ve.value,t=ge.filter((function(t){return t===e})).length;if(1!==t)throw new cE('The name "'.concat(e,'" is used ').concat(t," times in the model. All layer names should be unique. Layer names: ")+JSON.stringify(ge))};for(ye.s();!(ve=ye.n()).done;)be()}catch(xe){ye.e(xe)}finally{ye.f()}return r.outboundNodes=[],r.inboundNodes=[],new rN({outboundLayer:at(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,it(r)}return Qe(n,[{key:"assertNotDisposed",value:function(){if(0===this._refCount)throw new Error("Container '".concat(this.name,"' is already disposed."))}},{key:"dispose",value:function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount){var t,n=lc(this.layers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}}catch(s){n.e(s)}finally{n.f()}var a,i=lc(this.internalContainerRefs);try{for(i.s();!(a=i.n()).done;){var o=a.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}catch(s){i.e(s)}finally{i.f()}}return e.refCountAfterDispose=this._refCount,e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new lE("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];var e,t=[],n=lc(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=lc(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Tn(r.nonTrainableWeights))}}catch(u){n.e(u)}finally{n.f()}if(!this.trainable){var a,i=[],o=lc(this.layers);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,Tn(s.trainableWeights))}}catch(u){o.e(u)}finally{o.f()}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"loadWeights",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},a=0,i=lc(this.layers);try{for(i.s();!(t=i.n()).done;){var o,s=t.value,u=lc(s.weights);try{for(u.s();!(o=u.n()).done;){var c=o.value;if(null!=r[c.originalName])throw new lE("Duplicate weight name: ".concat(c.originalName));r[c.originalName]=c,a++}}catch(v){u.e(v)}finally{u.f()}}}catch(v){i.e(v)}finally{i.f()}var l=[];for(var d in e){var f=d;if(null==r[d]){var p=d.split("/");f=p.slice(0,-2).concat([p[p.length-1]]).join("/")}if(null!=r[f])l.push([r[f],e[d]]);else if(n)throw new lE("Provided weight data has no target variable: ".concat(d));delete r[f]}if(n){var h=[];for(var m in r)h.push(m);if(h.length>0)throw new lE("".concat(h.length," of ").concat(a," weights are not set: ").concat(h))}$C(l)}},{key:"updatedConfig",value:function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers ".concat(qR),t.backend="TensorFlow.js",t}},{key:"toJSON",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=GR(this.updatedConfig());return t?JSON.stringify(n):n}},{key:"call",value:function(e,t){var n=this;return Zg((function(){e=yE(e);for(var r=new cN,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return fN(n.outputs,r,t)}))}},{key:"computeMask",value:function(e,t){var n=this;return Zg((function(){var r;return e=yE(e),r=null==t?hE(null,e.length):yE(t),n.runInternalGraph(e,r)[1]}))}},{key:"computeOutputShape",value:function(e){var t=qC(e);if(t.length!==this.inputLayers.length)throw new lE("Invalid inputShape argument ".concat(e,": model has ").concat(this.inputLayers.length," tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],i=t[r];n[a.name+"_0_0"]=i}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(IE);if(o.length>1){var s,u=lc(o);try{for(u.s();!(s=u.n()).done;){var c,l=s.value,d=lc(this.nodesByDepth[l]);try{for(d.s();!(c=d.n()).done;){var f=c.value,p=f.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(p.id)){for(var h=[],m=0;m<f.inboundLayers.length;m++){var v=f.inboundLayers[m],g=f.nodeIndices[m],y=f.tensorIndices[m],b=n["".concat(v.name,"_").concat(g,"_").concat(y)];h.push(b)}for(var x=qC(p.computeOutputShape(gE(h))),A=p.inboundNodes.indexOf(f),k=0;k<x.length;k++){n["".concat(p.name,"_").concat(A,"_").concat(k)]=x[k]}}}}catch(M){d.e(M)}finally{d.f()}}}catch(M){u.e(M)}finally{u.f()}}for(var w=[],S=[],I=0;I<this.outputLayers.length;I++){var E=this.outputLayers[I],C=this.outputLayersNodeIndices[I],N=this.outputLayersTensorIndices[I],T="".concat(E.name,"_").concat(C,"_").concat(N);S.push(T)}for(var _=0;_<S.length;_++){var R=S[_];mE(R in n),w.push(n[R])}return gE(w)}},{key:"runInternalGraph",value:function(e,t){null==t&&(t=hE(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],i=e[r],o=t[r];n[a.id]=[i,o]}var s,c=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(IE),l=lc(c);try{for(l.s();!(s=l.n()).done;){var d,f=s.value,p=lc(this.nodesByDepth[f]);try{for(p.s();!(d=p.n()).done;){var h,m=d.value,v=m.outboundLayer,g=m.inputTensors,y=m.outputTensors,b=new Array,x=lc(g);try{for(x.s();!(h=x.n()).done;){var A=h.value;A.id in n&&b.push(n[A.id])}}catch(U){x.e(U)}finally{x.f()}if(b.length===g.length){var k={},w=void 0,S=void 0,I=void 0,E=void 0;if(null!=m.callArgs&&(k=m.callArgs),1===b.length){var C=u(b[0],2),N=C[0],T=C[1];null==k.mask&&(k.mask=T),I=yE(v.call(N,k)),E=yE(v.computeMask(N,T)),w=[N],S=[T]}else w=b.map((function(e){return e[0]})),S=b.map((function(e){return e[1]})),null==k.mask&&(k.mask=S),I=yE(v.call(w,k)),E=yE(v.computeMask(w,S));if(v.activityRegularizer)throw new dE("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var _=0;_<y.length;++_){var R=y[_],M=I[_],O=E[_];n[R.id]=[M,O]}}}}catch(U){p.e(U)}finally{p.f()}}}catch(U){l.e(U)}finally{l.f()}var F,P=[],D=[],L=[],z=lc(this.outputs);try{for(z.s();!(F=z.n()).done;){var B=F.value;mE(B.id in n,"Could not compute output ".concat(B.name," : ").concat(B.id));var W=u(n[B.id],2),j=W[0],V=W[1];L.push(j.shape),P.push(j),D.push(V)}}catch(U){z.e(U)}finally{z.f()}return[P,D,L]}},{key:"buildNodeConversionMap",value:function(e){var t,r,a={},i=lc(this.layers);try{for(i.s();!(r=i.n()).done;){var o=r.value;t=o instanceof n?1:0;for(var s=0;s<o.inboundNodes.length;s++){var u=n.nodeKey(o,s);this.containerNodes.has(u)&&(a[u]=t,t+=1)}}}catch(c){i.e(c)}finally{i.f()}return a}},{key:"getLayer",value:function(e,t){if(null!=t){if(this.layers.length<=t)throw new lE("Was asked to retrieve layer at index ".concat(t,", but model only has ").concat(this.layers.length," layer(s)."));return this.layers[t]}if(null==e)throw new lE("Provide either a layer name or layer index");var n,r=lc(this.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.name===e)return a}}catch(i){r.e(i)}finally{r.f()}throw new lE("No such layer: ".concat(e))}},{key:"calculateLosses",value:function(){var e=this;return Zg((function(){var t,r=[],a=lc(e.layers);try{for(a.s();!(t=a.n()).done;)for(var i=t.value,o=0;o<i.inboundNodes.length;++o){var s=n.nodeKey(i,o);e.containerNodes.has(s)&&r.push.apply(r,Tn(i.calculateLosses()))}}catch(u){a.e(u)}finally{a.f()}return r}))}},{key:"getConfig",value:function(){var e,t={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],i=lc(this.layers);try{for(i.s();!(e=i.n()).done;){for(var o=e.value,s=o.getClassName(),u=o.getConfig(),c=[],l=0;l<o.inboundNodes.length;l++){var d=o.inboundNodes[l],f=n.nodeKey(o,l),p={};if(this.containerNodes.has(f)){if(d.callArgs)try{JSON.stringify(d.callArgs),p=d.callArgs}catch(h){console.warn("Layer ".concat(o.name," was passed non-serializable keyword arguments: ").concat(d.callArgs,". They will not be included in the serialized model (and thus will be missing at deserialization time).")),p={}}if(d.inboundLayers.length>0){for(var h=[],m=0;m<d.inboundLayers.length;m++){var v=d.inboundLayers[m],g=d.nodeIndices[m],y=d.tensorIndices[m],b=r[n.nodeKey(v,g)];null==b&&(b=0),h.push([v.name,b,y,p])}c.push(h)}}}var x={};x.name=o.name,x.className=s,x.config=u,x.inboundNodes=c,a.push(x)}}catch(P){i.e(P)}finally{i.f()}t.layers=a;for(var A=[],k=0;k<this.inputLayers.length;k++){var w=this.inputLayers[k],S=this.inputLayersNodeIndices[k],I=n.nodeKey(w,S);if(this.containerNodes.has(I)){var E=r[I];null==E&&(E=0);var C=this.inputLayersTensorIndices[k];A.push([w.name,E,C])}}t.inputLayers=A;for(var N=[],T=0;T<this.outputLayers.length;T++){var _=this.outputLayers[T],R=this.outputLayersNodeIndices[T],M=n.nodeKey(_,R);if(this.containerNodes.has(M)){var O=r[M];null==O&&(O=0);var F=this.outputLayersTensorIndices[T];N.push([_.name,O,F])}}return t.outputLayers=N,t}},{key:"stateful",get:function(){if(this._stateful)throw new lE("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");var e,t=lc(this.layers);try{for(t.s();!(e=t.n()).done;){if(e.value.stateful)return!0}}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"resetStates",value:function(){var e=this;Zg((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r={},a={};function i(e,t){e.name in a?a[e.name].push(t):a[e.name]=[t]}function o(e,t){var n,a,o=[],s=lc(t);try{for(s.s();!(a=s.n()).done;){var u=a.value,c=u[0],l=u[1],d=u[2];if(n=null==u[3]?{}:u[3],!(c in r))return void i(e,t);var f=r[c];if(f.inboundNodes.length<=l)return void i(e,t);var p=f.inboundNodes[l];o.push(p.outputTensors[d])}}catch(h){s.e(h)}finally{s.f()}o.length>0&&e.apply(gE(o),n)}function s(e){var a=e.name,o=dR(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(n),r[a]=o,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new lE("Corrupted configuration, expected array for nodeData: ".concat(e));i(o,e)}))}var u,c=t.name,l=t.layers,d=lc(l);try{for(d.s();!(u=d.n()).done;){var f=u.value;s(f)}}catch(B){d.e(B)}finally{d.f()}for(;!CE(a);){var p,h=lc(l);try{for(h.s();!(p=h.n()).done;){var m=p.value,v=r[m.name];if(v.name in a){var g=a[v.name];delete a[v.name];var y,b=lc(g);try{for(b.s();!(y=b.n()).done;){var x=y.value;o(v,x)}}catch(B){b.e(B)}finally{b.f()}}}}catch(B){h.e(B)}finally{h.f()}}var A,k=[],w=[],S=t.inputLayers,I=lc(S);try{for(I.s();!(A=I.n()).done;){var E=A.value,C=E[0],N=E[1],T=E[2];mE(C in r);var _=r[C].inboundNodes[N].outputTensors;k.push(_[T])}}catch(B){I.e(B)}finally{I.f()}var R,M=t.outputLayers,O=lc(M);try{for(O.s();!(R=O.n()).done;){var F=R.value,P=F[0],D=F[1],L=F[2];mE(P in r);var z=r[P].inboundNodes[D].outputTensors;w.push(z[L])}}catch(B){O.e(B)}finally{O.f()}return new e({inputs:k,outputs:w,name:c})}}]),n}(iN);function XR(e,t){return function(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided ".concat(n," is an array of ").concat(e.length," element(s), but the model has ").concat(r," outputs. Make sure a set of weights is provided for each model output."));return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple (".concat(r,") outputs, so ").concat(n," must be either an array with ").concat(r," elements or an object with ").concat(t," keys. Provided ").concat(n," not understood: ").concat(JSON.stringify(e)))}(e,t,"classWeight")}function ZR(e,t,n,r){return YR.apply(this,arguments)}function YR(){return YR=ct(st().mark((function e(t,n,r,a){var i,o,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=14;break}return i=Zg((function(){if(1===t.shape.length)return dg(t);if(2===t.shape.length){if(t.shape[1]>1)return Sb(t,1);if(1===t.shape[1])return Kb(t,[t.shape[0]]);throw new Error("Encountered unexpected last-dimension size (".concat(t.shape[1],") during handling of class weights. The size is expected to be >= 1."))}throw new Error("Unexpected rank of target (y) tensor (".concat(t.rank,") during handling of class weights. The rank is expected to be 1 or 2."))})),e.t0=Array,e.next=7,i.data();case 7:return e.t1=e.sent,o=e.t0.from.call(e.t0,e.t1),Yg(i),s=[],e.abrupt("return",(o.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. The class ".concat(e," exists in the data but not in classWeight"));s.push(r[e])})),rw(s,"float32")));case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e)}))),YR.apply(this,arguments)}function JR(e,t){return gb(e,t)}function QR(e,t){var n,r,a=t;n=a.xs,r=a.ys,Fh.assert(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ".concat(t)}));var i=$R("input",e.inputNames,n),o=$R("output",e.outputNames,r),s=i[0].shape[0];Fh.assert(i.length===e.inputs.length,(function(){return"LayersModel has ".concat(e.inputs.length," inputs, but the dataset provides ").concat(i.length," inputs.  (Expected input keys: ").concat(JSON.stringify(e.inputNames),")")})),Fh.assert(o.length===e.outputs.length,(function(){return"LayersModel has ".concat(e.outputs.length," outputs, but the dataset provides ").concat(o.length," outputs.  (Expected output keys: ").concat(JSON.stringify(e.outputNames),")")}));for(var u=function(t){Fh.assert(i[t].shape[0]===s,(function(){return"Batch size mismatch: input ".concat(e.inputNames[t]," has ").concat(i[t].shape[0],"; expected  ").concat(s," based on input ").concat(e.inputNames[0],".")}))},c=0;c<i.length;c++)u(c);for(var l=function(t){Fh.assert(o[t].shape[0]===s,(function(){return"Batch size mismatch: output ".concat(e.outputNames[t]," has ").concat(o[t].shape[0],"; expected  ").concat(s," based on input ").concat(e.inputNames[0],".")}))},d=0;d<o.length;d++)l(d);return{xs:i,ys:o}}function $R(e,t,n){if(n instanceof vm)return[n];if(Array.isArray(n))return Fh.assert(n.length===t.length,(function(){return"Received an array of ".concat(n.length," Tensors, but expected ").concat(t.length," to match the ").concat(e," keys ").concat(t,".")})),n;var r,a=[],i=lc(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(null==n[o])throw new lE("The feature data generated by the dataset lacks the required ".concat(e," key '").concat(o,"'."));a.push(n[o])}}catch(s){i.e(s)}finally{i.f()}return a}function eM(e){if(3===e.length)throw new dE("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function tM(e,t,n){return nM.apply(this,arguments)}function nM(){return nM=ct(st().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,p,h,m,v,g,y,b,x,A,k,w,S,I,E,C,N,T,_,R,M,O,F,P,D;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,Fh.assert(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),Fh.assert(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),Fh.assert(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive integer, but got ".concat(r.epochs)})),Fh.assert(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ".concat(r.batchesPerEpoch)})),Fh.assert(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,(i=null!=r.validationData)&&(aM(r.validationData)?Fh.assert(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ".concat(r.validationBatches)})):(u=eM(r.validationData),o=u.xs,s=u.ys)),c=t.makeTrainFunction(),l=t.getDedupedMetricsNames(),d=i?l.slice().concat(l.map((function(e){return"val_"+e}))):l.slice(),f=sR(r.callbacks,r.yieldEvery),p=null==r.verbose?1:r.verbose,h=lR(f,p,r.epochs,null,null,rM(n,r),null,i,d),m=h.callbackList,v=h.history,m.setModel(t),t.history=v,e.next=14,m.onTrainBegin();case 14:return t.stopTraining_=!1,g=null==r.initialEpoch?0:r.initialEpoch,e.next=18,n.iterator();case 18:y=e.sent;case 19:if(!(g<r.epochs)){e.next=88;break}return b={},e.next=23,m.onEpochBegin(g);case 23:if(x=0,A=0,e.t0=a,e.t0){e.next=29;break}return e.next=28,n.iterator();case 28:y=e.sent;case 29:if(a&&!(x<r.batchesPerEpoch)){e.next=81;break}return e.next=32,y.next();case 32:if(k=e.sent,!a||!k.done){e.next=36;break}return console.warn("You provided `batchesPerEpoch` as ".concat(r.batchesPerEpoch,", but your dataset iterator ran out of data after ").concat(x," batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, ").concat(r.batchesPerEpoch*r.epochs," batches). You may need to use the repeat() function when building your dataset.")),e.abrupt("break",81);case 36:if(null==k.value){e.next=63;break}return w=QR(t,k.value),S=w.xs,I=w.ys,(E={}).batch=A,E.size=S[0].shape[0],e.next=42,m.onBatchBegin(A,E);case 42:if(C=[],null==r.classWeight){e.next=55;break}N=XR(r.classWeight,t.outputNames),T=0;case 46:if(!(T<N.length)){e.next=55;break}return e.t1=C,e.next=50,ZR(I[T],null,N[T]);case 50:e.t2=e.sent,e.t1.push.call(e.t1,e.t2);case 52:++T,e.next=46;break;case 55:for(_=S.concat(I).concat(C),R=c(_),Yg(_),M=0;M<l.length;++M)O=l[M],F=R[M],E[O]=F,Jg(F);return e.next=60,m.onBatchEnd(A,E);case 60:tR(E),A++,x++;case 63:if(!(a?x>=r.batchesPerEpoch:k.done)){e.next=77;break}if(!i){e.next=76;break}if(P=void 0,!aM(r.validationData)){e.next=74;break}return e.t3=yE,e.next=70,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 70:e.t4=e.sent,P=(0,e.t3)(e.t4),e.next=75;break;case 74:P=yE(t.evaluate(o,s,{batchSize:null==r.validationBatchSize?32:r.validationBatchSize,verbose:0}));case 75:for(D=0;D<t.metricsNames.length;++D)b["val_".concat(t.metricsNames[D])]=P[D];case 76:return e.abrupt("break",81);case 77:if(!t.stopTraining_){e.next=79;break}return e.abrupt("break",81);case 79:e.next=29;break;case 81:return e.next=83,m.onEpochEnd(g,b);case 83:if(g++,!t.stopTraining_){e.next=86;break}return e.abrupt("break",88);case 86:e.next=19;break;case 88:return e.next=90,m.onTrainEnd();case 90:return e.next=92,t.history.syncData();case 92:return e.abrupt("return",t.history);case 93:return e.prev=93,t.isTraining=!1,e.finish(93);case 96:case"end":return e.stop()}}),e,null,[[4,,93,96]])}))),nM.apply(this,arguments)}function rM(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function aM(e){return"function"==typeof e.iterator}function iM(e){return"function"==typeof e.next}function oM(e,t,n){return sM.apply(this,arguments)}function sM(){return sM=ct(st().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,i=t.testFunction,o=[],!(r.verbose>0)){e.next=4;break}throw new dE("Verbose mode is not implemented yet.");case 4:if(Fh.assert(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but received ".concat(JSON.stringify(r.batches))})),!iM(n)){e.next=9;break}e.t0=n,e.next=12;break;case 9:return e.next=11,n.iterator();case 11:e.t0=e.sent;case 12:s=e.t0,u=0,c=0,l=st().mark((function e(){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,o=Zg((function(){return n.value&&function(){var e=QR(t,n.value),r=e.xs,a=e.ys,s=r.concat(a),l=Zg((function(){return i(s)}));if(Yg(s),0===c)for(var d=0;d<l.length;++d)o.push(Jx(0));for(var f=s[0].shape[0],p=function(e){var t=l[e],n=o[e];o[e]=Zg((function(){return hb(o[e],gb(f,t))})),c>0&&Yg(n)},h=0;h<l.length;++h)p(h);Yg(l),u+=f,++c}(),o})),!n.done){e.next=6;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` batches (in this case, ".concat(r.batches," batches). You may need to use the repeat() function when building your dataset.")),e.abrupt("return","break");case 6:case"end":return e.stop()}}),e)}));case 16:if(a&&!(c<r.batches)){e.next=23;break}return e.delegateYield(l(),"t1",18);case 18:if("break"!==e.t1){e.next=21;break}return e.abrupt("break",23);case 21:e.next=16;break;case 23:for(d=0;d<o.length;++d)f=o[d],o[d]=vb(o[d],u),Yg(f);return e.abrupt("return",gE(o));case 25:case"end":return e.stop()}}),e)}))),sM.apply(this,arguments)}function uM(e){Fh.assert(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got ".concat(e)}))}function cM(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return uC(e,t,n-t)})):uC(e,t,n-t)}function lM(e,t){return Zg((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return lM(e,t)})):vC(e,"int32"===t.dtype?t:lg(t,"int32"))}))}function dM(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function fM(e,t,n,r,a,i,o,s,u,c,l,d,f,p,h){return pM.apply(this,arguments)}function pM(){return pM=ct(st().mark((function e(t,n,r,a,i,o,s,u,c,l,d,f,p,h,m){var v,g,y,b,x,A,k,w;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==i&&(i=32),null==o&&(o=1),null==d&&(d=!0),null==p&&(p=0),v=!1,null!=c&&null!=l&&(v=!0),null==m||(v=!0,null!=h)){e.next=4;break}throw new lE("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 4:return null!=(g=t.checkNumSamples(r,i,h,"steps_per_epoch"))&&(y=rC(0,g)),null==s&&(s=1),b=lR(u,s,o,p,g,h,i,v,f),x=b.callbackList,A=b.history,x.setModel(t),t.history=A,e.next=11,x.onTrainBegin();case 11:t.stopTraining_=!1,k=st().mark((function e(o){var s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.onEpochBegin(o);case 2:if(s={},null==h){e.next=5;break}throw new dE("stepsPerEpoch mode is not implemented yet.");case 5:return e.delegateYield(st().mark((function e(){var o,u,f,p;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("batch"!==d){e.next=2;break}throw new dE("batch shuffling is not implemneted yet");case 2:d&&Fh.shuffle(y),o=rw(y),u=dM(g,i),f=st().mark((function e(d){var f;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f={},e.next=3,x.onBatchBegin(d,f);case 3:return Zg((function(){var e=u[d][0],p=u[d][1],h=uC(o,e,p-e);f.batch=d,f.size=p-e;for(var m=lM(r,h),g=n(m),y=0;y<a.length;++y){var b=a[y],x=g[y];f[b]=x,Jg(x)}if(d===u.length-1&&v)for(var A=t.testLoop(c,l,i),k=0;k<a.length;++k){var w=a[k],S=A[k];Jg(S),s["val_"+w]=S}})),e.next=6,x.onBatchEnd(d,f);case 6:if(tR(f),!t.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),p=0;case 6:if(!(p<u.length)){e.next=14;break}return e.delegateYield(f(p),"t0",8);case 8:if("break"!==e.t0){e.next=11;break}return e.abrupt("break",14);case 11:++p,e.next=6;break;case 14:o.dispose();case 15:case"end":return e.stop()}}),e)}))(),"t0",6);case 6:return e.next=8,x.onEpochEnd(o,s);case 8:if(!t.stopTraining_){e.next=10;break}return e.abrupt("return","break");case 10:case"end":return e.stop()}}),e)})),w=p;case 14:if(!(w<o)){e.next=22;break}return e.delegateYield(k(w),"t0",16);case 16:if("break"!==e.t0){e.next=19;break}return e.abrupt("break",22);case 19:++w,e.next=14;break;case 22:return e.next=24,x.onTrainEnd();case 24:return e.next=26,t.history.syncData();case 26:return e.abrupt("return",t.history);case 27:case"end":return e.stop()}}),e)}))),pM.apply(this,arguments)}function hM(e,t,n){return mM.apply(this,arguments)}function mM(){return mM=ct(st().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,p,h,m,v,g,y,b,x,A,k,w,S,I,E,C,N,T=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=T.length>3&&void 0!==T[3]?T[3]:{},!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,uM(h=null==a.batchSize?32:a.batchSize),m=!1,e.next=10,t.standardizeUserData(n,r,a.sampleWeight,a.classWeight,m,h);case 10:if(v=e.sent,i=v[0],o=v[1],p=v[2],g=!1,!(null!=a.validationData&&a.validationData.length>0)){e.next=26;break}if(g=!0,2!==a.validationData.length){e.next=18;break}c=a.validationData[0],l=a.validationData[1],e.next=19;break;case 18:throw 3===a.validationData.length?new dE("validationData including sample weights is not supported yet."):new lE("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ".concat(a.validationData," is invalid."));case 19:return b=!0,e.next=22,t.standardizeUserData(c,l,null,null,b,h);case 22:x=e.sent,d=x[0],f=x[1],y=d.concat(f),e.next=27;break;case 26:null!=a.validationSplit&&a.validationSplit>0&&a.validationSplit<1?(g=!0,A=Math.floor(i[0].shape[0]*(1-a.validationSplit)),k=i[0].shape[0],d=cM(i,A,k),s=i,i=cM(i,0,A),f=cM(o,A,k),u=o,o=cM(o,0,A),y=d.concat(f)):null!=a.validationSteps&&(g=!0);case 27:return w=i.concat(o).concat(p),t.checkTrainableWeightsConsistency(),S=t.makeTrainFunction(),I=t.getDedupedMetricsNames(),g?(t.makeTestFunction(),E=t.testFunction,C=I.slice().concat(I.map((function(e){return"val_"+e})))):(E=null,y=[],C=I.slice()),N=sR(a.callbacks,a.yieldEvery),e.next=34,fM(t,S,w,I,h,a.epochs,a.verbose,N,E,y,a.shuffle,C,a.initialEpoch,null,null);case 34:return e.abrupt("return",e.sent);case 35:return e.prev=35,t.isTraining=!1,gM(i,n),gM(o,r),gM(s,n),gM(u,r),gM(d,c),gM(f,l),null!=p&&Yg(p),e.finish(35);case 38:case"end":return e.stop()}}),e,null,[[4,,35,38]])}))),mM.apply(this,arguments)}function vM(e){var t=[];e instanceof vm&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(oC(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function gM(e,t){if(null!=e){var n=[];if(t instanceof vm)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var i=[];if(e instanceof vm)-1===n.indexOf(e.id)&&i.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&i.push(e)}));else if(null!=e)for(var o in e){var s=e[o];-1===n.indexOf(s.id)&&i.push(s)}i.forEach((function(e){e.isDisposed||e.dispose()}))}}function yM(e){return Array.isArray(e)}function bM(e){return!function(e){return e instanceof vm}(e)&&!yM(e)}function xM(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(null==t||0===t.length){if(null!=e){var o=!1;if(yM(e)&&e.length>0)o=!0;else if(bM(e)){for(var s in e)if(e.hasOwnProperty(s)){o=!0;break}}else o=!0;if(o)throw new lE("Error when checking model ".concat(i," expected no data, but got ").concat(e))}return[]}if(null==e)return t.map((function(e){return null}));if(bM(e)){r=[];var u,c=lc(t);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(null==e[l])throw new lE('No data provided for "'.concat(l,'". Need data for each key in: ').concat(t));r.push(e[l])}}catch(v){c.e(v)}finally{c.f()}}else if(yM(e)){if(e.length!==t.length)throw new lE("Error when checking model ".concat(i,": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ").concat(t.length," Tensor(s), but instead got the following list of Tensor(s): ").concat(e));r=e}else{if(t.length>1)throw new lE("The model ".concat(i," expects ").concat(t.length," Tensor(s), but only received one Tensor. Found: Tensor with shape ").concat(e.shape));r=[e]}if(r=vM(r),null!=n)for(var d=0;d<t.length;++d)if(null!=n[d]){var f=r[d];if(f.shape.length!==n[d].length)throw new lE("Error when checking ".concat(i,": expected ").concat(t[d]," to have ").concat(n[d].length," dimension(s). but got array with shape ").concat(f.shape));for(var p=0;p<n[d].length;++p)if(0!==p||a){var h=f.shape[p],m=n[d][p];if(null!=m&&m>=0&&h!==m)throw new lE("".concat(i," expected a batch of elements where each example has shape [").concat(n[d].slice(1,n[d].length),"] (i.e.,tensor shape [*,").concat(n[d].slice(1,n[d].length),"]) but the ").concat(i," received an input with ").concat(f.shape[0]," examples, each with shape [").concat(f.shape.slice(1,f.shape.length),"] (tensor shape [").concat(f.shape,"])"))}}return r}function AM(e,t,n){var r=EE(e.map((function(e){return e.shape[0]})));r.sort();var a=EE(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new lE("All input Tensors (x) should have the same number of samples. Got array shapes: ".concat(JSON.stringify(e.map((function(e){return e.shape})))));if(a.length>1)throw new lE("All target Tensors (y) should have the same number of samples. Got array shapes: ".concat(JSON.stringify(t.map((function(e){return e.shape})))));if(r.length>0&&a.length>0&&!Fh.arraysEqual(r,a))throw new lE("Input Tensors should have the same number of samples as target Tensors. Found ".concat(r[0]," input sample(s) and ").concat(a[0]," target sample(s)."))}function kM(e,t,n){for(var r=[pR,yR,vR],a=0;a<e.length;++a){var i=e[a],o=t[a],s=n[a];if(null!=o){if(o===vR&&1===i.shape[i.shape.length-1])throw new lE("You are passing a target array of shape ".concat(i.shape," while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes]."));if(-1!==r.indexOf(o))for(var u=i.shape.slice(1),c=s.slice(1),l=0;l<u.length;++l){var d=u[l],f=c[l];if(null!=f&&d!==f)throw new lE("A target Tensor with shape ".concat(i.shape," was passed for an output of shape ").concat(s,", while using a loss function that expects targets to have the same shape as the output."))}}}}function wM(e,t,n){var r,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(Array.isArray(e)){if(e.length!==t.length)throw new lE("Error when checking model ".concat(i,": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ").concat(t.length," Tensor(s), but instead got ").concat(e.length," Tensors(s)."));r=e}else{if(t.length>1)throw new lE("The model expects ".concat(t.length," ").concat(i," Tensors, but only received one Tensor. Found: array with shape ").concat(JSON.stringify(e.shape),"."));r=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var s=r[o];if(s.shape.length!==n[o].length)throw new lE("Error when checking ".concat(i,": expected ").concat(t[o]," to have ").concat(n[o].length," dimension(s), but got array with shape ").concat(JSON.stringify(s.shape)));for(var u=0;u<n[o].length;++u)if(0!==u||a){var c=s.shape[u],l=n[o][u];if(null!=l&&l!==c)throw new lE("Error when checking ".concat(i,": expected ").concat(t[o]," to have shape ").concat(JSON.stringify(n[o])," but got array with shape ").concat(JSON.stringify(s.shape),"."))}}}var SM=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).isTraining=!1,r}return Qe(n,[{key:"summary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;if(!this.built)throw new lE("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");LR(this,e,t,n)}},{key:"compile",value:function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return aI.adagrad(.01)},Adadelta:function(){return aI.adadelta(1,.95,aC())},Adam:function(){return aI.adam(.001,.9,.999,aC())},Adamax:function(){return aI.adamax(.002,.9,.999,aC(),0)},RMSProp:function(){return aI.rmsprop(.001,.9,0,aC())},SGD:function(){return aI.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new lE("Unknown Optimizer ".concat(e))}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof ZS))throw new lE("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new lE("When passing an Array as loss, it should have one entry per model output. The model has ".concat(this.outputs.length," output(s), but you passed loss=").concat(e.loss,"."));n=e.loss.map((function(e){return AR(e)}))}else{var r=AR(e.loss);this.outputs.forEach((function(e){n.push(r)}))}else{for(var a in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(a))throw new lE('Unknown entry in loss dictionary: "'.concat(a,'". Only expected the following keys: ').concat(this.outputNames));var i,o=lc(this.outputNames);try{for(o.s();!(i=o.n()).done;){var s=i.value;null==e.loss[s]&&console.warn('Output "'.concat(s,'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ').concat(s," during training")),n.push(AR(e.loss[s]))}}catch(h){o.e(h)}finally{o.f()}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var u=0;u<this.outputs.length;++u){var c=this.internalOutputShapes[u],l=this.outputNames[u];this.feedOutputNames.push(l),this.feedOutputShapes.push(c),this.feedLossFns.push(this.lossFunctions[u])}var d=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],KE("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===d.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var f=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"==typeof e||"function"==typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ".concat(e));n=e}if(Array.isArray(n))return t.map((function(e){return n}));var r,a=[],i=lc(t);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),a.push(s)}}catch(h){i.e(h)}finally{i.f()}return a}(e.metrics,this.outputNames),p=function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])};KE("metric",(function(){for(var e=function(e){if(-1!==d.indexOf(e))return"continue";!function(n){var r,a,i,o,s=lc(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;if("string"==typeof u&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(u)){var c=t.internalOutputShapes[e];1===c[c.length-1]||t.lossFunctions[e]===yR?-1!==["accuracy","acc"].indexOf(u)?a=kR:-1!==["crossentropy","ce"].indexOf(u)&&(a=CR):t.lossFunctions[e]===gR?-1!==["accuracy","acc"].indexOf(u)?a=NR:-1!==["crossentropy","ce"].indexOf(u)&&(a=_R):-1!==["accuracy","acc"].indexOf(u)?a=wR:-1!==["crossentropy","ce"].indexOf(u)&&(a=TR);var l=void 0;-1!==["accuracy","acc"].indexOf(u)?l="acc":-1!==["crossentropy","ce"].indexOf(u)&&(l="ce"),i=a,r=""+l}else i=MR(u),r=""+OR(u);var d=void 0;KE(r,(function(){d=i})),p(e,r,d)}}catch(h){s.e(h)}finally{s.f()}}(f[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights}},{key:"checkTrainableWeightsConsistency",value:function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null==n.batchSize?32:n.batchSize;uM(r);var a=!0,i=this.standardizeUserDataXY(e,t,a,r);try{var o=i[0].concat(i[1]);this.makeTestFunction();var s=this.testFunction,u=this.testLoop(s,o,r,n.verbose,n.steps);return gE(u)}finally{gM(i[0],e),gM(i[1],t)}}},{key:"evaluateDataset",value:function(){var e=ct(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.makeTestFunction(),oM(this,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"checkNumSamples",value:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"steps";if(null!=n){if(r=null,null!=t)throw new lE("If ".concat(a," is set, batchSize must be null or undefined.Got batchSize = ").concat(t))}else{if(null==e)throw new lE("Either the input data should have a defined shape, or ".concat(a," shoud be specified."));r=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return r}},{key:"execute",value:function(e,t){if(Array.isArray(t)&&0===t.length)throw new lE("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new cN;if(e instanceof vm&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new lE("The number of inputs provided (".concat(e.length,") does not match the number of inputs of this model (").concat(this.inputs.length,")."));for(var o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else{var s,u=lc(this.inputs);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=e[c.name];if(null==l)throw new lE("No value is provided for the model's input ".concat(c.name));i.add(c,l)}}catch(f){u.e(f)}finally{u.f()}}var d=fN(a,i);return n?d:d[0]}},{key:"retrieveSymbolicTensors",value:function(e){var t,n=hE(null,e.length),r=e.length,a=lc(this.layers);try{for(a.s();!(t=a.n()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],s=o.map((function(e){return e.name})),u=0;u<e.length;++u){var c=s.indexOf(e[u]);if(-1!==c&&(n[u]=o[c],r--),0===r)break}if(0===r)break}}catch(d){a.e(d)}finally{a.f()}if(r>0){var l=[];throw n.forEach((function(t,n){null==t&&l.push(e[n])})),new lE("Cannot find SymbolicTensors for output name(s): ".concat(JSON.stringify(l)))}return n}},{key:"predictLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Zg((function(){var a=t.checkNumSamples(e);if(r)throw new dE("Verbose predictLoop() is not implemented yet.");for(var i=dM(a,n),o=t.outputs.map((function(e){return[]})),s=function(n){Zg((function(){var r=i[n][0],a=i[n][1],o=cM(e,r,a),s=[];if(Array.isArray(o))for(var u=0;u<o.length;++u)s.push({key:t.inputs[u],value:o[u]});else s.push({key:t.inputs[0],value:o});var c=new cN(s);return fN(t.outputs,c)})).forEach((function(e,t){return o[t].push(e)}))},u=0;u<i.length;++u)s(u);return gE(o.map((function(e){return Yb(e,0)})))}))}},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=vM(e);wM(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return uM(r),this.predictLoop(n,r)}finally{gM(n,e)}}},{key:"predictOnBatch",value:function(e){wM(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}},{key:"standardizeUserDataXY",value:function(e,t){var n=arguments.length>3?arguments[3]:void 0;if(null==this.optimizer_)throw new cE("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var r=[],a=0;a<this.feedOutputShapes.length;++a){var i=this.feedOutputShapes[a];this.feedLossFns[a]===gR?r.push(i.slice(0,i.length-1).concat([1])):r.push(i)}if(AM(e=xM(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=xM(t,this.feedOutputNames,r,!1,"target")),kM(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=n&&n>0&&e[0].shape[0]%n!==0)throw new lE("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ".concat(n,". Found: ").concat(e[0].shape[0]," sample(s)."));return[e,t]}},{key:"standardizeUserData",value:function(){var e=ct(st().mark((function e(t,n,r,a){var i,o,s,c,l,d,f,p,h,m=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=!(m.length>4&&void 0!==m[4])||m[4],o=m.length>5?m[5]:void 0,s=this.standardizeUserDataXY(t,n,i,o),c=u(s,2),l=c[0],d=c[1],null==r){e.next=5;break}throw new Error("sample weight is not supported yet.");case 5:if(f=null,null==a){e.next=19;break}p=XR(a,this.outputNames),f=[],h=0;case 10:if(!(h<p.length)){e.next=19;break}return e.t0=f,e.next=14,ZR(d[h],null,p[h]);case 14:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 16:++h,e.next=10;break;case 19:return e.abrupt("return",[l,d,f]);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"testLoop",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;return Zg((function(){var o=r.checkNumSamples(t,n,i,"steps"),s=[];if(a>0)throw new dE("Verbose mode is not implemented yet.");if(null!=i)throw new dE("steps mode in testLoop() is not implemented yet");for(var u=dM(o,n),c=rw(rC(0,o)),l=0;l<u.length;++l){var d=u[l][0],f=u[l][1],p=uC(c,d,f-d),h=lM(t,p),m=e(h);if(0===l)for(var v=0;v<m.length;++v)s.push(Jx(0));for(var g=0;g<m.length;++g){var y=m[g];s[g]=hb(s[g],gb(f-d,y))}}for(var b=0;b<s.length;++b)s[b]=vb(s[b],o);return s}))}},{key:"getDedupedMetricsNames",value:function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;vE(e,r)>1&&(a+="_".concat(vE(e.slice(0,n),r))),t.push(a)}return t}},{key:"makeTrainFunction",value:function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),o=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var u,c=new cN(t),l=fN(e.outputs,c,{training:!0}),d=0;d<e.lossFunctions.length;++d){var f=e.lossFunctions[d](a[d],l[d]);null!=i[d]&&(f=JR(f,i[d]));var p=KA(f);n.push(p),u=0===d?f:hb(u,f)}for(var h=0;h<e.metricsTensors.length;++h){var m=void 0;if(e.outputs.length>1&&h<e.outputs.length)m=n[h];else{var v=e.metricsTensors[h][0],g=e.metricsTensors[h][1];m=KA(v(a[g],l[g]))}Jg(m),o.push(m)}return u=KA(u),e.calculateLosses().forEach((function(e){u=hb(u,e)})),u}),!0,s)].concat(o)}}},{key:"makeTestFunction",value:function(){var e=this;this.testFunction=function(t){return Zg((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],s=0;s<e.inputs.length;++s)o.push({key:e.inputs[s],value:a[s]});for(var u=new cN(o),c=fN(e.outputs,u),l=0;l<e.lossFunctions.length;++l){var d=e.lossFunctions[l],f=KA(d(i[l],c[l]));n=0===l?f:hb(n,f),r.push(n)}for(var p=0;p<e.metricsTensors.length;++p){var h=e.metricsTensors[p][0],m=e.metricsTensors[p][1],v=KA(h(i[m],c[m]));r.push(v)}return r}))}}},{key:"fit",value:function(){var e=ct(st().mark((function e(t,n){var r,a=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.abrupt("return",hM(this,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=ct(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tM(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=ct(st().mark((function e(t,n){var r,a,i,o,s,u,c,l,d;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],i=r[1],o=this.makeTrainFunction()(a.concat(i)),s=[],u=lc(o),e.prev=8,u.s();case 10:if((c=u.n()).done){e.next=18;break}return l=c.value,e.next=14,l.data();case 14:d=e.sent,s.push(d[0]);case 16:e.next=10;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(8),u.e(e.t0);case 23:return e.prev=23,u.f(),e.finish(23);case 26:return e.abrupt("return",(Yg(o),gM(r[0],t),gM(r[1],n),gE(s)));case 27:case"end":return e.stop()}}),e,this,[[8,20,23,26]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNamedWeights",value:function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t}},{key:"stopTraining",get:function(){return this.stopTraining_},set:function(e){this.stopTraining_=e}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}},{key:"dispose",value:function(){var e=sc(tt(n.prototype),"dispose",this).call(this);if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var t=Kg().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-Kg().numTensors}return e}},{key:"getLossIdentifiers",value:function(){var e;if("string"==typeof this.loss)e=bE(this.loss);else if(Array.isArray(this.loss)){var t,n=lc(this.loss);try{for(n.s();!(t=n.n()).done;){if("string"!=typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}}catch(u){n.e(u)}finally{n.f()}e=this.loss.map((function(e){return bE(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var s=o[i];if("string"!=typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=bE(a[s])}}return e}},{key:"getMetricIdentifiers",value:function(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[bE(OR(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return bE(OR(e))}));var e={};for(var t in this.metrics)e[t]=bE(OR(this.metrics[t]));return e}},{key:"getTrainingConfig",value:function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}},{key:"loadTrainingConfig",value:function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=dR(HR(e.optimizer_config));if("string"==typeof e.loss)t=xE(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return xE(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=xE(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return xE(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=xE(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})}},{key:"save",value:function(){var e=ct(st().mark((function e(t,n){var r,a,i,o,s,u,c,l;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=7;break}if(0!==(r=pg.getSaveHandlers(t)).length){e.next=4;break}throw new lE("Cannot find any save handlers for URL '".concat(t,"'"));case 4:if(!(r.length>1)){e.next=6;break}throw new lE("Found more than one (".concat(r.length,") save handlers for URL '").concat(t,"'"));case 6:t=r[0];case 7:if(null!=t.save){e.next=9;break}throw new lE("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 9:return e.next=11,pg.encodeWeights(this.getNamedWeights(n));case 11:if(a=e.sent,!1,null,i={modelTopology:this.toJSON(null,false),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v".concat(qR),convertedBy:null},null==n||!n.includeOptimizer||null==this.optimizer){e.next=29;break}return i.trainingConfig=this.getTrainingConfig(),s="optimizer",e.t0=pg,e.next=21,this.optimizer.getWeights();case 21:return e.t1=e.sent,e.t2=s,e.next=25,e.t0.encodeWeights.call(e.t0,e.t1,e.t2);case 25:u=e.sent,c=u.data,l=u.specs,(o=a.specs).push.apply(o,Tn(l)),a.data=pg.concatenateArrayBuffers([a.data,c]);case 29:return e.abrupt("return",(null!=this.userDefinedMetadata&&(PR(this.userDefinedMetadata,this.name,!0),i.userDefinedMetadata=this.userDefinedMetadata),i.weightData=a.data,i.weightSpecs=a.specs,t.save(i)));case 30:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setUserDefinedMetadata",value:function(e){PR(e,this.name),this.userDefinedMetadata=e}},{key:"getUserDefinedMetadata",value:function(){return this.userDefinedMetadata}}]),n}(KR);SM.className="Model",Jy.registerClass(SM);var IM=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n)}(SM);function EM(e,t){return CM.apply(this,arguments)}function CM(){return CM=ct(st().mark((function e(t,n){var r,a,i,o,s,u,c,l;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("modelTopology"in t||(t={modelTopology:t}),null!=(r=t.modelTopology).model_config&&(r=r.model_config),a=HR(r),i=dR(a,n),null==t.weightsManifest){e.next=12;break}return e.next=7,pg.loadWeights(t.weightsManifest,t.pathPrefix,i.weights.map((function(e){return e.originalName})));case 7:o=e.sent,s={},u=lc(i.weights);try{for(u.s();!(c=u.n()).done;)l=c.value,s[l.originalName]=o[l.originalName]}catch(d){u.e(d)}finally{u.f()}i.loadWeights(s),Yg(o);case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)}))),CM.apply(this,arguments)}function NM(){return NM=ct(st().mark((function e(t,n){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),"string"!=typeof t){e.next=9;break}if(0!==(r=pg.getLoadHandlers(t,n)).length){e.next=6;break}r.push(pg.browserHTTPRequest(t,n)),e.next=8;break;case 6:if(!(r.length>1)){e.next=8;break}throw new lE("Found more than one (".concat(r.length,") load handlers for URL '").concat(t,"'"));case 8:t=r[0];case 9:return e.abrupt("return",TM(t,void 0,n));case 10:case"end":return e.stop()}}),e)}))),NM.apply(this,arguments)}function TM(e,t,n){return _M.apply(this,arguments)}function _M(){return _M=ct(st().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r&&(r={}),null!=t.load){e.next=2;break}throw new lE("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 2:return e.next=4,t.load();case 4:if(a=e.sent,null!=(i=a.modelTopology).model_config&&(i=i.model_config),o=null==r.strict||r.strict,s=null!=a.weightData&&null!=a.weightSpecs&&o,u=dR(HR(i),n,s),null!=(c=a.trainingConfig)&&u.loadTrainingConfig(c),null!=a.userDefinedMetadata&&u.setUserDefinedMetadata(a.userDefinedMetadata),null==a.weightData){e.next=19;break}if(null!=a.weightSpecs){e.next=11;break}throw new lE("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");case 11:if(l=RM(a.weightData,a.weightSpecs),d=l.modelWeights,f=l.optimizerWeights,u.loadWeights(d,o),e.t0=null!=u.optimizer&&f.length>0,!e.t0){e.next=17;break}return e.next=17,u.optimizer.setWeights(f);case 17:Yg(d),Yg(f.map((function(e){return e.tensor})));case 19:return e.abrupt("return",u);case 20:case"end":return e.stop()}}),e)}))),_M.apply(this,arguments)}function RM(e,t){var n=pg.decodeWeights(e,t),r={},a=[];return t.forEach((function(e){"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]})),{modelWeights:r,optimizerWeights:a}}IM.className="Functional",Jy.registerClass(IM);var MM=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),e=e||{},(r=t.call(this,{inputs:[],outputs:[]})).trainable=!0,r.built=!1,r.name=null!=e.name?e.name:DE("sequential_"),null!=e.layers){var a,i=lc(e.layers);try{for(i.s();!(a=i.n()).done;){var o=a.value;r.add(o)}}catch(s){i.e(s)}finally{i.f()}}return it(r)}return Qe(n,[{key:"checkShape",value:function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new lE("Negative dimension size caused by adding layer ".concat(e.name," with input shape [").concat(e.inboundNodes[0].inputTensors[0].shape,"]"))}},{key:"add",value:function(e){var t,r=e instanceof n||e instanceof SM;if(r){if(1!==(t=e).outputs.length)throw new lE("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new lE("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new lE("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=uN({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new lE("A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ".concat(e.name," which has ").concat(e.inboundNodes.length," pre-existing inbound connections."));if(1!==e.inboundNodes[0].outputTensors.length)throw new lE("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=oN(this.outputs[0])}this.inboundNodes=[],new rN({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:hE(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}},{key:"pop",value:function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}},{key:"call",value:function(e,t){return null==this.model&&this.build(),this.model.call(e,t)}},{key:"build",value:function(e){if(XC(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new SM({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}},{key:"countParams",value:function(){return this.built||this.build(),sc(tt(n.prototype),"countParams",this).call(this)}},{key:"summary",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;this.built||this.build(),sc(tt(n.prototype),"summary",this).call(this,e,t,r)}},{key:"setWeights",value:function(e){null==this.model&&this.build(),this.model.setWeights(e)}},{key:"evaluate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this.built)throw new cE("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}},{key:"evaluateDataset",value:function(){var e=ct(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new cE("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==this.model&&this.build(),this.model.predict(e,t)}},{key:"predictOnBatch",value:function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}},{key:"compile",value:function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}},{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"fit",value:function(){var e=ct(st().mark((function e(t,n){var r,a=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},this.built){e.next=3;break}throw new cE("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fitDataset",value:function(){var e=ct(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new cE("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"trainOnBatch",value:function(){var e=ct(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stopTraining",get:function(){if(null==this.model)throw new lE("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining},set:function(e){if(null==this.model)throw new lE("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}},{key:"getConfig",value:function(){var e,t=[],n=lc(this.layers);try{for(n.s();!(e=n.n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}}catch(i){n.e(i)}finally{n.f()}return{name:this.name,layers:t}}}],[{key:"fromConfig",value:function(e,t){var r,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new lE("Legacy serialization format not supported yet.");r=t}else Fh.assert(null!=t.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),r=t.layers,delete t.layers,i=t;var o=new e(i);if(!(o instanceof n))throw new dE("Sequential.fromConfig called on non-Sequential input: ".concat(o));var s,u=lc(r);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=dR(c,void 0,a);a&&l.setFastWeightInitDuringBuild(!0),o.add(l)}}catch(d){u.e(d)}finally{u.f()}return o}}]),n}(SM),OM=MM;function FM(e){return new SM(e)}function PM(e){return new OM(e)}function DM(e,t){return null==t&&(t={}),function(e,t){return NM.apply(this,arguments)}(e,t)}function LM(e){return uN(e)}function zM(e,t){cR.registerCallbackConstructor(e,t)}OM.className="Sequential",Jy.registerClass(OM);var BM=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"getConfig",value:function(){return{}}}]),n}(Jy.Serializable),WM=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return xC(e,t)}}]),n}(BM);WM.className="elu",Jy.registerClass(WM);var jM=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return Fk(e)}}]),n}(BM);jM.className="selu",Jy.registerClass(jM);var VM=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return Ik(e)}}]),n}(BM);VM.className="relu",Jy.registerClass(VM);var UM=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return Zg((function(){return JA(6,Ik(e))}))}}]),n}(BM);UM.className="relu6",Jy.registerClass(UM);var HM=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return e}}]),n}(BM);HM.className="linear",Jy.registerClass(HM);var GM=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return Jb(e)}}]),n}(BM);GM.className="sigmoid",Jy.registerClass(GM);var qM=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return function(e){return Zg((function(){var t=hb(.5,gb(.2,e));return dx(t,0,1)}))}(e)}}]),n}(BM);qM.className="hardSigmoid",Jy.registerClass(qM);var KM=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return RA(e)}}]),n}(BM);KM.className="softplus",Jy.registerClass(KM);var XM=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return function(e){return Zg((function(){return vb(e,hb(yb(e),1))}))}(e)}}]),n}(BM);XM.className="softsign",Jy.registerClass(XM);var ZM=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return $b(e)}}]),n}(BM);ZM.className="tanh",Jy.registerClass(ZM);var YM=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return Gk(e,t)}}]),n}(BM);YM.className="softmax",Jy.registerClass(YM);var JM=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return FA(e,t)}}]),n}(BM);JM.className="logSoftmax",Jy.registerClass(JM);var QM=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Zg((function(){return gb(Jb(gb(e,t)),e)}))}}]),n}(BM);QM.className="swish",Jy.registerClass(QM);var $M=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e){return Zg((function(){return gb(e,$b(RA(e)))}))}}]),n}(BM);function eO(e){return e.getClassName()}function tO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return SE(e,Jy.SerializationMap.getMap().classNameMap,t,"activation")}function nO(e){if(null==e){var t={className:"linear",config:{}};return tO(t)}if("string"==typeof e){var n={};return n.className=e,n.config={},tO(n)}return e instanceof BM?e:tO(e)}function rO(e){if(null!=e&&"object"!=typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: ".concat(e))}$M.className="mish",Jy.registerClass($M);var aO=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n)}(Jy.Serializable),iO=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),r=t.call(this),rO(e),r.l1=null==e||null==e.l1?.01:e.l1,r.l2=null==e||null==e.l2?.01:e.l2,r.hasL1=0!==r.l1,r.hasL2=0!==r.l2,r}return Qe(n,[{key:"apply",value:function(e){var t=this;return Zg((function(){var n=XA([1]);return t.hasL1&&(n=hb(n,eA(gb(t.l1,yb(e))))),t.hasL2&&(n=hb(n,eA(gb(t.l2,gC(e))))),Kb(n,[])}))}},{key:"getConfig",value:function(){return{l1:this.l1,l2:this.l2}}}],[{key:"fromConfig",value:function(e,t){return new e({l1:t.l1,l2:t.l2})}}]),n}(aO);iO.className="L1L2",Jy.registerClass(iO);var oO={l1l2:"L1L2"};function sO(e){return kE(e)}function uO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return SE(e,Jy.SerializationMap.getMap().classNameMap,t,"regularizer")}function cO(e){return null==e?null:"string"==typeof e?uO({className:e in oO?oO[e]:e,config:{}}):e instanceof aO?e:uO(e)}var lO=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,null!=e&&(r.maxValue=e.maxValue),r}return Qe(n,[{key:"call",value:function(e,t){e=KC(e);var n=Ik(e);return null!=this.maxValue&&(n=dx(n,0,this.maxValue)),n}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={maxValue:this.maxValue},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN);lO.className="ReLU",Jy.registerClass(lO);var dO=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=.3,null==e&&(e={}),r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,r}return Qe(n,[{key:"call",value:function(e,t){var n=KC(e);return gA(n,this.alpha)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN);dO.className="LeakyReLU",Jy.registerClass(dO);var fO=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),r.supportsMasking=!0,r.alphaInitializer=HC(e.alphaInitializer||r.DEFAULT_ALPHA_INITIALIZER),r.alphaRegularizer=cO(e.alphaRegularizer),r.alphaConstraint=R_(e.alphaConstraint),null==e.sharedAxes)r.sharedAxes=null;else if(Array.isArray(e.sharedAxes))r.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new lE("Expected sharedAxes to be a number or an array of numbers, but got ".concat(e.sharedAxes));r.sharedAxes=[e.sharedAxes]}return it(r)}return Qe(n,[{key:"build",value:function(e){var t=(e=XC(e)).slice(1);if(null!=this.sharedAxes){var n,r=lc(this.sharedAxes);try{for(r.s();!(n=r.n()).done;){t[n.value-1]=1}}catch(o){r.e(o)}finally{r.f()}}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)a[i]=e[i];this.inputSpec=[new eN({ndim:e.length,axes:a})],this.built=!0}},{key:"call",value:function(e,t){return e=KC(e),pk(e,this.alpha.read())}},{key:"getConfig",value:function(){var e={alphaInitializer:UC(this.alphaInitializer),alphaRegularizer:sO(this.alphaRegularizer),alphaConstraint:T_(this.alphaConstraint),sharedAxes:this.sharedAxes},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN);fO.className="PReLU",Jy.registerClass(fO);var pO=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==r.DEFAULT_ALPHA)throw new dE("Non-default alpha value (".concat(e.alpha,") is not supported by the ELU layer yet."));return r.alpha=null==e.alpha?r.DEFAULT_ALPHA:e.alpha,it(r)}return Qe(n,[{key:"call",value:function(e,t){var n=KC(e);return zx(n)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={alpha:this.alpha},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN);pO.className="ELU",Jy.registerClass(pO);var hO=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_THETA=1,null==e&&(e={}),r.theta=null==e.theta?r.DEFAULT_THETA:e.theta,r}return Qe(n,[{key:"call",value:function(e,t){var n=KC(e);return gb(n,lg(fA(n,this.theta),"float32"))}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={theta:this.theta},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN);hO.className="ThresholdedReLU",Jy.registerClass(hO);var mO=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,null==e?{}:e)).DEFAULT_AXIS=1,null==e&&(e={}),r.softmax=(new YM).apply,r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r}return Qe(n,[{key:"call",value:function(e,t){var n=KC(e);return this.softmax(n,this.axis)}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e={axis:this.axis},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN);function vO(e,t,n){if("number"==typeof e)return hE(e,t);if(e.length!==t)throw new lE("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers. Received: ").concat(e.length," elements."));for(var r=0;r<t;++r){var a=e[r];if(!$E(a))throw new lE("The ".concat(n," argument must be an integer or tuple of ").concat(t," integers. Received: ").concat(JSON.stringify(e)," including a non-integer number ").concat(a))}return e}function gO(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(null==e)return e;var i,o=t+(t-1)*(a-1);return i="same"===n?e:e-o+1,Math.floor((i+r-1)/r)}function yO(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+nC([n-t,0]);else{if("same"!==r)throw new lE("Unsupport padding mode: ".concat(r,"."));e*=t}return e}function bO(e,t){return Zg((function(){return UE(t),"channelsFirst"===t?dy(e,[0,2,3,1]):e}))}function xO(e,t){return Zg((function(){return UE(t),"channelsFirst"===t?dy(e,[0,2,3,4,1]):e}))}function AO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;return Zg((function(){if(null==i&&(i="channelsLast"),UE(i),3!==e.rank&&4!==e.rank)throw new lE("conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ".concat(e.rank,"."));if(3!==t.rank&&4!==t.rank)throw new lE("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ".concat(e.rank,"."));var u=bO(e,i);if("causal"===a)throw new dE("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=_w.conv2d({x:u,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(u=dy(u,[0,3,1,2])),u}))}mO.className="Softmax",Jy.registerClass(mO);var kO=function(e){et(n,e);var t=ot(n);function n(e,r){var a;if(Ye(this,n),(a=t.call(this,r)).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",n.verifyArgs(r),a.rank=e,_E(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new dE("Convolution layer for rank other than 1, 2, or 3 (".concat(a.rank,") is not implemented yet."));if(a.kernelSize=vO(r.kernelSize,e,"kernelSize"),a.strides=vO(null==r.strides?1:r.strides,e,"strides"),a.padding=null==r.padding?"valid":r.padding,HE(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,UE(a.dataFormat),a.activation=nO(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=HC(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=R_(r.biasConstraint),a.biasRegularizer=cO(r.biasRegularizer),a.activityRegularizer=cO(r.activityRegularizer),a.dilationRate=vO(null==r.dilationRate?1:r.dilationRate,e,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new lE("dilationRate must be a number or an array of a single number for 1D convolution, but received ".concat(JSON.stringify(a.dilationRate)));if(2===a.rank){if("number"==typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new lE("dilationRate must be a number or array of two numbers for 2D convolution, but received ".concat(JSON.stringify(a.dilationRate)))}else if(3===a.rank)if("number"==typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new lE("dilationRate must be a number or array of three numbers for 3D convolution, but received ".concat(JSON.stringify(a.dilationRate)));return it(a)}return Qe(n,[{key:"getConfig",value:function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:eO(this.activation),useBias:this.useBias,biasInitializer:UC(this.biasInitializer),biasRegularizer:sO(this.biasRegularizer),activityRegularizer:sO(this.activityRegularizer),biasConstraint:T_(this.biasConstraint)},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(mE("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!TE(e.kernelSize,"number",1,3))throw new lE("BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(iN),wO=function(e){et(n,e);var t=ot(n);function n(e,r){var a;return Ye(this,n),(a=t.call(this,e,r)).kernel=null,n.verifyArgs(r),a.filters=r.filters,_E(a.filters,"filters"),a.kernelInitializer=HC(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=R_(r.kernelConstraint),a.kernelRegularizer=cO(r.kernelRegularizer),a}return Qe(n,[{key:"build",value:function(e){e=XC(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new lE("The channel dimension of the input should be defined. Found ".concat(e[t]));var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:qe({},t,n)}],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Zg((function(){e=KC(e);var t,r=null==n.bias?null:n.bias.read(),a=ME(n.activation.getClassName());if(null!=a&&2===n.rank)t=AO(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Zg((function(){if(null==i&&(i="channelsLast"),UE(i),3!==e.shape.length)throw new lE("The input of a conv1dWithBias operation should be 3, but is ".concat(e.shape.length," instead."));if(3!==t.shape.length)throw new lE("The kernel for a conv1dWithBias operation should be 3, but is ".concat(t.shape.length," instead"));if(null!=n&&1!==n.shape.length)throw new lE("The bias for a conv1dWithBias operation should be 1, but is ".concat(t.shape.length," instead"));if("channelsFirst"===i&&(e=dy(e,[0,2,1])),"causal"===a)throw new dE("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=gx(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(s=bC(s,n)),s}))}(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=AO(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new dE("convolutions greater than 3D are not implemented yet.");t=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"valid",i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;return Zg((function(){if(null==i&&(i="channelsLast"),UE(i),4!==e.rank&&5!==e.rank)throw new lE("conv3dWithBias expects input to be of rank 4 or 5, but received ".concat(e.rank,"."));if(4!==t.rank&&5!==t.rank)throw new lE("conv3dWithBias expects kernel to be of rank 4 or 5, but received ".concat(e.rank,"."));var s=xO(e,i);if("causal"===a)throw new dE("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=xx(s,t,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(s=bC(s,n)),"channelsFirst"===i&&(s=dy(s,[0,4,1,2,3])),s}))}(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))}},{key:"computeOutputShape",value:function(e){e=XC(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=gO(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i}},{key:"getConfig",value:function(){var e={filters:this.filters,kernelInitializer:UC(this.kernelInitializer),kernelRegularizer:sO(this.kernelRegularizer),kernelConstraint:T_(this.kernelConstraint)},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"verifyArgs",value:function(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new lE("Convolution layer expected config.filters to be a 'number' > 0 but got ".concat(JSON.stringify(e.filters)))}}]),n}(kO),SO=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),r=t.call(this,2,e),n.verifyArgs(e),r}return Qe(n,[{key:"getConfig",value:function(){var e=sc(tt(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!=typeof e.kernelSize&&!TE(e.kernelSize,"number",1,2))throw new lE("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(wO),IO=SO;IO.className="Conv2D",Jy.registerClass(IO);var EO=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),r=t.call(this,3,e),n.verifyArgs(e),r}return Qe(n,[{key:"getConfig",value:function(){var e=sc(tt(n.prototype),"getConfig",this).call(this);return delete e.rank,e}}],[{key:"verifyArgs",value:function(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new lE("Conv3D expects config.kernelSize to be number or [number, number, number], but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(wO),CO=EO;CO.className="Conv3D",Jy.registerClass(CO);var NO=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),(r=t.call(this,e)).inputSpec=[new eN({ndim:4})],"same"!==r.padding&&"valid"!==r.padding)throw new lE("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ".concat(r.padding));return it(r)}return Qe(n,[{key:"build",value:function(e){if(4!==(e=XC(e)).length)throw new lE("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new lE("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new eN({ndim:4,axes:qe({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Zg((function(){var t=KC(e);if(4!==t.shape.length)throw new lE("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-".concat(t.shape.length));var r,a,i=t.shape,o=i[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=i[r],u=i[a],c=n.kernelSize[0],l=n.kernelSize[1],d=n.strides[0],f=n.strides[1],p=[o,yO(s,d,c,n.padding),yO(u,f,l,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=dy(t,[0,2,3,1]));var h=bx(t,n.kernel.read(),p,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(h=dy(h,[0,3,1,2])),null!=n.bias&&(h=bC(h,n.bias.read(),n.dataFormat)),null!=n.activation&&(h=n.activation.apply(h)),h}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=(e=XC(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=yO(a[n],s,i,this.padding),a[r]=yO(a[r],u,o,this.padding),a}},{key:"getConfig",value:function(){var e=sc(tt(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(IO);NO.className="Conv2DTranspose",Jy.registerClass(NO);var TO=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),(r=t.call(this,e)).inputSpec=[new eN({ndim:5})],"same"!==r.padding&&"valid"!==r.padding)throw new lE("Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ".concat(r.padding));return it(r)}return Qe(n,[{key:"build",value:function(e){if(5!==(e=XC(e)).length)throw new lE("Input should have rank 5; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new lE("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new eN({ndim:5,axes:qe({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Zg((function(){var t=KC(e);if(5!==t.shape.length)throw new lE("Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-".concat(t.shape.length));var r,a,i,o=t.shape,s=o[0];"channelsFirst"===n.dataFormat?(i=2,r=3,a=4):(i=1,r=2,a=3);var u=o[i],c=o[r],l=o[a],d=n.kernelSize[0],f=n.kernelSize[1],p=n.kernelSize[2],h=n.strides[0],m=n.strides[1],v=n.strides[2],g=[s,yO(u,h,d,n.padding),yO(c,m,f,n.padding),yO(l,v,p,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=dy(t,[0,2,3,4,1]));var y=kx(t,n.kernel.read(),g,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(y=dy(y,[0,4,1,2,3])),null!==n.bias&&(y=bC(y,n.bias.read(),n.dataFormat)),null!==n.activation&&(y=n.activation.apply(y)),y}))}},{key:"computeOutputShape",value:function(e){var t,n,r,a,i=(e=XC(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,a=4):(t=4,n=1,r=2,a=3);var o=this.kernelSize[0],s=this.kernelSize[1],u=this.kernelSize[2],c=this.strides[0],l=this.strides[1],d=this.strides[2];return i[t]=this.filters,i[n]=yO(i[n],c,o,this.padding),i[r]=yO(i[r],l,s,this.padding),i[a]=yO(i[a],d,u,this.padding),i}},{key:"getConfig",value:function(){var e=sc(tt(n.prototype),"getConfig",this).call(this);return delete e.dilationRate,e}}]),n}(CO);TO.className="Conv3DTranspose",Jy.registerClass(TO);var _O=function(e){et(n,e);var t=ot(n);function n(e,r){var a;if(Ye(this,n),(a=t.call(this,e,r)).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",a.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",a.depthwiseKernel=null,a.pointwiseKernel=null,null==r.filters)throw new lE("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=r.kernelInitializer||null!=r.kernelRegularizer||null!=r.kernelConstraint)throw new lE("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=r.padding&&"same"!==r.padding&&"valid"!==r.padding)throw new lE("SeparableConv".concat(a.rank,"D supports only padding modes: 'same' and 'valid', but received ").concat(JSON.stringify(r.padding)));return a.depthMultiplier=null==r.depthMultiplier?1:r.depthMultiplier,a.depthwiseInitializer=HC(r.depthwiseInitializer||a.DEFAULT_DEPTHWISE_INITIALIZER),a.depthwiseRegularizer=cO(r.depthwiseRegularizer),a.depthwiseConstraint=R_(r.depthwiseConstraint),a.pointwiseInitializer=HC(r.depthwiseInitializer||a.DEFAULT_POINTWISE_INITIALIZER),a.pointwiseRegularizer=cO(r.pointwiseRegularizer),a.pointwiseConstraint=R_(r.pointwiseConstraint),it(a)}return Qe(n,[{key:"build",value:function(e){if((e=XC(e)).length<this.rank+2)throw new lE("Inputs to SeparableConv".concat(this.rank,"D should have rank ").concat(this.rank+2,", but received input shape: ").concat(JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new lE("The channel dimension of the inputs should be defined, but found ".concat(JSON.stringify(e[t])));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],i=0;i<this.rank;++i)a.push(1);a.push(n*this.depthMultiplier,this.filters);var o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new eN({ndim:this.rank+2,axes:qe({},t,n)})],this.built=!0}},{key:"call",value:function(e,t){var n=this;return Zg((function(){var t;if(e=KC(e),1===n.rank)throw new dE("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=dy(e,[0,2,3,1])),t=Pk(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=bC(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=dy(t,[0,3,1,2])),t}))}},{key:"getConfig",value:function(){var e=sc(tt(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=UC(this.depthwiseInitializer),e.pointwiseInitializer=UC(this.pointwiseInitializer),e.depthwiseRegularizer=sO(this.depthwiseRegularizer),e.pointwiseRegularizer=sO(this.pointwiseRegularizer),e.depthwiseConstraint=T_(this.depthwiseConstraint),e.pointwiseConstraint=T_(this.pointwiseConstraint),e}}]),n}(wO);_O.className="SeparableConv";var RO=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,2,e)}return Qe(n)}(_O);RO.className="SeparableConv2D",Jy.registerClass(RO);var MO=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),r=t.call(this,1,e),n.verifyArgs(e),r.inputSpec=[{ndim:3}],r}return Qe(n,[{key:"getConfig",value:function(){var e=sc(tt(n.prototype),"getConfig",this).call(this);return delete e.rank,delete e.dataFormat,e}}],[{key:"verifyArgs",value:function(e){if("number"!=typeof e.kernelSize&&!TE(e.kernelSize,"number",1,1))throw new lE("Conv1D expects config.kernelSize to be number or number[] with length 1, but received ".concat(JSON.stringify(e.kernelSize),"."))}}]),n}(wO),OO=MO;OO.className="Conv1D",Jy.registerClass(OO);var FO=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),r=t.call(this,e),"number"==typeof e.cropping?r.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?r.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:r.cropping=e.cropping,r.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,r.inputSpec=[{ndim:4}],r}return Qe(n,[{key:"computeOutputShape",value:function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}},{key:"call",value:function(e,t){var n=this;return Zg((function(){if(e=KC(e),"channelsLast"===n.dataFormat){var t=lC(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return lC(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=lC(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return lC(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))}},{key:"getConfig",value:function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN);FO.className="Cropping2D",Jy.registerClass(FO);var PO=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).DEFAULT_SIZE=[2,2],r.inputSpec=[{ndim:4}],r.size=null==e.size?r.DEFAULT_SIZE:e.size,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,UE(r.dataFormat),r.interpolation=null==e.interpolation?"nearest":e.interpolation,function(e){NE(zE,"InterpolationFormat",e)}(r.interpolation),r}return Qe(n,[{key:"computeOutputShape",value:function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]}},{key:"call",value:function(e,t){var n=this;return Zg((function(){var t=KC(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=dy(t,[0,2,3,1]);var a=n.size[0]*r[2],i=n.size[1]*r[3],o="nearest"===n.interpolation?HS.resizeNearestNeighbor(t,[a,i]):HS.resizeBilinear(t,[a,i]);return dy(o,[0,3,1,2])}var s=n.size[0]*r[1],u=n.size[1]*r[2];return"nearest"===n.interpolation?HS.resizeNearestNeighbor(t,[s,u]):HS.resizeBilinear(t,[s,u])}))}},{key:"getConfig",value:function(){var e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN);PO.className="UpSampling2D",Jy.registerClass(PO);var DO=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,2,e)).depthwiseKernel=null,r.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,r.depthwiseInitializer=HC(e.depthwiseInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.depthwiseConstraint=R_(e.depthwiseConstraint),r.depthwiseRegularizer=cO(e.depthwiseRegularizer),r}return Qe(n,[{key:"build",value:function(e){if((e=XC(e)).length<4)throw new lE("Inputs to DepthwiseConv2D should have rank 4. Received input shape: ".concat(JSON.stringify(e),"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new lE("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (".concat(e[t],")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Zg((function(){var t=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"valid",a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;return Zg((function(){null==a&&(a="channelsLast"),UE(a);var o=bO(e,a);if(4!==e.rank)throw new lE("Input for depthwiseConv2d is required to be 4-D, but is instead ".concat(e.rank,"-D"));if(4!==t.rank)throw new lE("depthwiseKernel is required to be 4-D, but is instead ".concat(t.rank,"-D"));return o=Tx(o,t,n,"same"===r?"same":"valid","NHWC",i),"channelsFirst"===a&&(o=dy(o,[0,3,1,2])),o}))}(e=KC(e),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=bC(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t}))}},{key:"computeOutputShape",value:function(e){e=XC(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=gO(t,this.kernelSize[0],this.padding,this.strides[0]),i=gO(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]}},{key:"getConfig",value:function(){var e=sc(tt(n.prototype),"getConfig",this).call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=UC(this.depthwiseInitializer),e.depthwiseRegularizer=sO(this.depthwiseRegularizer),e.depthwiseConstraint=T_(this.depthwiseRegularizer),e}}]),n}(kO);function LO(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new lE("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function zO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return Zg((function(){var u=t.shape.length;if(u<3)throw new lE("Input should be at least 3D, but is ".concat(u,"D."));var c=[1,0].concat(rC(2,u));if(t=dy(t,c),null!=i)throw new dE("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=lg(lg(a,"bool"),"float32")).rank===u-1&&(a=iA(a,-1)),a=dy(a,c)),r&&(t=Ck(t,0),null!=a&&(a=Ck(a,0)));var l,d,f=[],p=n,h=t.shape[0],m=fw(t);null!=a&&(d=fw(a));for(var v,g=function(t){var n=m[t],r=Zg((function(){return e(n,p)}));if(null==a)l=r[0],p=r[1];else{var i=Zg((function(){var e=d[t],n=OA(ak(e),e),a=hb(gb(r[0],e),gb(p[0],n)),i=p.map((function(t,a){return hb(gb(r[1][a],e),gb(t,n))}));return{output:a,newStates:i}}));l=i.output,p=i.newStates}s&&f.push(l)},y=0;y<h;++y)g(y);return s&&(v=$k(f,1)),[l,v,p]}))}DO.className="DepthwiseConv2D",Jy.registerClass(DO);var BO=function(e){et(n,e);var t=ot(n);function n(e){var r,a;if(Ye(this,n),r=t.call(this,e),null==e.cell)throw new lE("cell property is missing for the constructor of RNN.");if(null==(a=Array.isArray(e.cell)?new XO({cells:e.cell}):e.cell).stateSize)throw new lE("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=a,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new eN({ndim:3})],r.stateSpec=null,r.states_=null,r.numConstants=null,r.keptStates=[],r}return Qe(n,[{key:"getStates",value:function(){return null==this.states_?rC(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_}},{key:"setStates",value:function(e){this.states_=e}},{key:"computeOutputShape",value:function(e){GC(e)&&(e=e[0]);var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){var a,i=[],o=lc(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push([e[0],s])}}catch(u){o.e(u)}finally{o.f()}return[n].concat(i)}return n}},{key:"computeMask",value:function(e,t){var n=this;return Zg((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))}},{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"build",value:function(e){if(null!=this.numConstants)throw new dE("Constants support is not implemented in RNN yet.");GC(e)&&(e=e[0]);var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new eN({shape:[t,null].concat(Tn(n))});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!Fh.arraysEqual(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new lE("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=".concat(this.stateSpec,"; However cell.stateSize is ").concat(this.cell.stateSize))}else this.stateSpec=r.map((function(e){return new eN({shape:[null,e]})}));this.stateful&&this.resetStates()}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Zg((function(){if(!t.stateful)throw new uE("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape[0];if(null==r)throw new lE("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states_)Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return XA([r,e])})):t.states_=[XA([r,t.cell.stateSize])];else if(null==e)Yg(t.states_),null!=t.keptStates&&(Yg(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(e){return XA([r,e])})):t.states_[0]=XA([r,t.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new lE("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), but it received ").concat(e.length," state value(s). Input received: ").concat(e));!0===n?t.keptStates.push(t.states_.slice()):Yg(t.states_);for(var a=0;a<t.states_.length;++a){var i=e[a],o=Array.isArray(t.cell.stateSize)?t.cell.stateSize[a]:t.cell.stateSize,s=[r,o];if(!Fh.arraysEqual(i.shape,s))throw new lE("State ".concat(a," is incompatible with layer ").concat(t.name,": expected shape=").concat(s,", received shape=").concat(i.shape));t.states_[a]=i}}t.states_=t.states_.map((function(e){return Jg(e.clone())}))}))}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=LO(e,r,a,this.numConstants);e=i.inputs,r=i.initialState,a=i.constants;var o=[],s=[];if(null!=r){t.initialState=r,o=o.concat(r),this.stateSpec=[];var u,c=lc(r);try{for(c.s();!(u=c.n()).done;){var l=u.value;this.stateSpec.push(new eN({shape:l.shape}))}}catch(m){c.e(m)}finally{c.f()}s=s.concat(this.stateSpec)}if(null!=a&&(t.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof tN){var d=[e].concat(o),f=this.inputSpec.concat(s),p=this.inputSpec;this.inputSpec=f;var h=sc(tt(n.prototype),"apply",this).call(this,d,t);return this.inputSpec=p,h}return sc(tt(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Zg((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;e=KC(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new lE("RNN Layer has ".concat(o," state(s) but was passed ").concat(i.length," initial state(s)."));n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},u=zO((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,i,n.goBackwards,r,null,n.unroll,n.returnSequences),c=u[0],l=u[1],d=u[2];n.stateful&&n.resetStates(d,a);var f=n.returnSequences?l:c;return n.returnState?[f].concat(d):f}))}},{key:"getInitialState",value:function(e){var t=this;return Zg((function(){var n=XA(e.shape);return n=oC(n=eA(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?pC(n,[1,e]):n})):t.cell.stateSize>1?[pC(n,[1,t.cell.stateSize])]:[n]}))}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}},{key:"setFastWeightInitDuringBuild",value:function(e){sc(tt(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e=sc(tt(n.prototype),"getConfig",this).call(this),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var r=this.cell.getConfig();return this.getClassName()===n.className&&(t.cell={className:this.cell.getClassName(),config:r}),Ze(Ze(Ze({},r),e),t)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.cell,a=dR(r,n);return new e(Object.assign(t,{cell:a}))}}]),n}(iN),WO=BO;WO.className="RNN",Jy.registerClass(WO);var jO=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n)}(iN),VO=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,_E(r.units,"units"),r.activation=nO(null==e.activation?r.DEFAULT_ACTIVATION:e.activation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=HC(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=HC(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=HC(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=cO(e.kernelRegularizer),r.recurrentRegularizer=cO(e.recurrentRegularizer),r.biasRegularizer=cO(e.biasRegularizer),r.kernelConstraint=R_(e.kernelConstraint),r.recurrentConstraint=R_(e.recurrentConstraint),r.biasConstraint=R_(e.biasConstraint),r.dropout=tC([1,nC([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=tC([1,nC([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,r}return Qe(n,[{key:"build",value:function(e){e=XC(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Zg((function(){if(2!==e.length)throw new lE("SimpleRNNCell expects 2 input Tensors, got ".concat(e.length,"."));var r=e[1];e=e[0];var a=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=ZO({ones:function(){return ak(e)},rate:n.dropout,training:a,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=ZO({ones:function(){return ak(r)},rate:n.recurrentDropout,training:a,dropoutFunc:n.dropoutFunc}));var i,o=n.dropoutMask,s=n.recurrentDropoutMask;i=mC(null!=o?gb(e,o):e,n.kernel.read()),null!=n.bias&&(i=bC(i,n.bias.read())),null!=s&&(r=gb(r,s));var u=hb(i,mC(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))}},{key:"getConfig",value:function(){var e=sc(tt(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:eO(this.activation),useBias:this.useBias,kernelInitializer:UC(this.kernelInitializer),recurrentInitializer:UC(this.recurrentInitializer),biasInitializer:UC(this.biasInitializer),kernelRegularizer:sO(this.kernelRegularizer),recurrentRegularizer:sO(this.recurrentRegularizer),biasRegularizer:sO(this.biasRegularizer),activityRegularizer:sO(this.activityRegularizer),kernelConstraint:T_(this.kernelConstraint),recurrentConstraint:T_(this.recurrentConstraint),biasConstraint:T_(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Ze(Ze({},e),t)}}]),n}(jO);VO.className="SimpleRNNCell",Jy.registerClass(VO);var UO=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),e.cell=new VO(e),t.call(this,e)}return Qe(n,[{key:"call",value:function(e,t){var r=this;return Zg((function(){null!=r.cell.dropoutMask&&(Yg(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Yg(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return sc(tt(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(WO);UO.className="SimpleRNN",Jy.registerClass(UO);var HO=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new lE("GRUCell does not support reset_after parameter set to true.");return r.units=e.units,_E(r.units,"units"),r.activation=nO(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=nO(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=HC(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=HC(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=HC(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelRegularizer=cO(e.kernelRegularizer),r.recurrentRegularizer=cO(e.recurrentRegularizer),r.biasRegularizer=cO(e.biasRegularizer),r.kernelConstraint=R_(e.kernelConstraint),r.recurrentConstraint=R_(e.recurrentConstraint),r.biasConstraint=R_(e.biasConstraint),r.dropout=tC([1,nC([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=tC([1,nC([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=r.units,r.dropoutMask=null,r.recurrentDropoutMask=null,it(r)}return Qe(n,[{key:"build",value:function(e){var t=(e=XC(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}},{key:"call",value:function(e,t){var n=this;return Zg((function(){if(2!==e.length)throw new lE("GRUCell expects 2 input Tensors (inputs, h, c), got ".concat(e.length,"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=ZO({ones:function(){return ak(e)},rate:n.dropout,training:r,count:3,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=ZO({ones:function(){return ak(a)},rate:n.recurrentDropout,training:r,count:3,dropoutFunc:n.dropoutFunc}));var i,o,s,c=n.dropoutMask,l=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=gb(e,c[0]));var d=mC(e,n.kernel.read());n.useBias&&(d=bC(d,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=gb(a,l[0]));var f=n.recurrentKernel.read(),p=u(Zk(f,[2*n.units,n.units],f.rank-1),2),h=p[0],m=p[1],v=mC(a,h),g=u(Zk(d,3,d.rank-1),3),y=g[0],b=g[1],x=g[2],A=u(Zk(v,2,v.rank-1),2),k=A[0],w=A[1];i=n.recurrentActivation.apply(hb(y,k)),o=n.recurrentActivation.apply(hb(b,w));var S=mC(gb(o,a),m);s=n.activation.apply(hb(x,S));var I=hb(gb(i,a),gb(hb(1,cy(i)),s));return[I,I]}))}},{key:"getConfig",value:function(){var e=sc(tt(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:eO(this.activation),recurrentActivation:eO(this.recurrentActivation),useBias:this.useBias,kernelInitializer:UC(this.kernelInitializer),recurrentInitializer:UC(this.recurrentInitializer),biasInitializer:UC(this.biasInitializer),kernelRegularizer:sO(this.kernelRegularizer),recurrentRegularizer:sO(this.recurrentRegularizer),biasRegularizer:sO(this.biasRegularizer),activityRegularizer:sO(this.activityRegularizer),kernelConstraint:T_(this.kernelConstraint),recurrentConstraint:T_(this.recurrentConstraint),biasConstraint:T_(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Ze(Ze({},e),t)}}]),n}(jO);HO.className="GRUCell",Jy.registerClass(HO);var GO=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new HO(e),t.call(this,e)}return Qe(n,[{key:"call",value:function(e,t){var r=this;return Zg((function(){null!=r.cell.dropoutMask&&(Yg(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Yg(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return sc(tt(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(WO);GO.className="GRU",Jy.registerClass(GO);var qO=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).DEFAULT_ACTIVATION="tanh",r.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_RECURRENT_INITIALIZER="orthogonal",r.DEFAULT_BIAS_INITIALIZER="zeros",r.units=e.units,_E(r.units,"units"),r.activation=nO(void 0===e.activation?r.DEFAULT_ACTIVATION:e.activation),r.recurrentActivation=nO(void 0===e.recurrentActivation?r.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),r.useBias=null==e.useBias||e.useBias,r.kernelInitializer=HC(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.recurrentInitializer=HC(e.recurrentInitializer||r.DEFAULT_RECURRENT_INITIALIZER),r.biasInitializer=HC(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.unitForgetBias=e.unitForgetBias,r.kernelRegularizer=cO(e.kernelRegularizer),r.recurrentRegularizer=cO(e.recurrentRegularizer),r.biasRegularizer=cO(e.biasRegularizer),r.kernelConstraint=R_(e.kernelConstraint),r.recurrentConstraint=R_(e.recurrentConstraint),r.biasConstraint=R_(e.biasConstraint),r.dropout=tC([1,nC([0,null==e.dropout?0:e.dropout])]),r.recurrentDropout=tC([1,nC([0,null==e.recurrentDropout?0:e.recurrentDropout])]),r.dropoutFunc=e.dropoutFunc,r.implementation=e.implementation,r.stateSize=[r.units,r.units],r.dropoutMask=null,r.recurrentDropoutMask=null,r}return Qe(n,[{key:"build",value:function(e){var t,n,r=(e=XC(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,i=this.units;n=new(t=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e,t){var n=a.apply([i]),r=(new CC).apply([i]),o=a.apply([2*i]);return fC(fC(n,r),o)}}]),n}(IC),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}},{key:"call",value:function(e,t){var n=this;return Zg((function(){var r=null!=t.training&&t.training;if(3!==e.length)throw new lE("LSTMCell expects 3 input Tensors (inputs, h, c), got ".concat(e.length,"."));var a=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=ZO({ones:function(){return ak(e)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=ZO({ones:function(){return ak(a)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var o,s,c,l,d=n.dropoutMask,f=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=gb(e,d[0]));var p=mC(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=gb(a,f[0])),p=hb(p,mC(a,n.recurrentKernel.read())),n.useBias&&(p=bC(p,n.bias.read()));var h=u(Zk(p,4,p.rank-1),4),m=h[0],v=h[1],g=h[2],y=h[3];o=n.recurrentActivation.apply(m),s=n.recurrentActivation.apply(v),c=hb(gb(s,i),gb(o,n.activation.apply(g))),l=n.recurrentActivation.apply(y);var b=gb(l,n.activation.apply(c));return[b,b,c]}))}},{key:"getConfig",value:function(){var e=sc(tt(n.prototype),"getConfig",this).call(this),t={units:this.units,activation:eO(this.activation),recurrentActivation:eO(this.recurrentActivation),useBias:this.useBias,kernelInitializer:UC(this.kernelInitializer),recurrentInitializer:UC(this.recurrentInitializer),biasInitializer:UC(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:sO(this.kernelRegularizer),recurrentRegularizer:sO(this.recurrentRegularizer),biasRegularizer:sO(this.biasRegularizer),activityRegularizer:sO(this.activityRegularizer),kernelConstraint:T_(this.kernelConstraint),recurrentConstraint:T_(this.recurrentConstraint),biasConstraint:T_(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Ze(Ze({},e),t)}}]),n}(jO);qO.className="LSTMCell",Jy.registerClass(qO);var KO=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new qO(e),t.call(this,e)}return Qe(n,[{key:"call",value:function(e,t){var r=this;return Zg((function(){null!=r.cell.dropoutMask&&(Yg(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Yg(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return sc(tt(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}}],[{key:"fromConfig",value:function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}}]),n}(WO);KO.className="LSTM",Jy.registerClass(KO);var XO=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).cells=e.cells,r}return Qe(n,[{key:"stateSize",get:function(){var e,t=[],n=lc(this.cells.slice().reverse());try{for(n.s();!(e=n.n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,Tn(r.stateSize)):t.push(r.stateSize)}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"call",value:function(e,t){var n=this;return Zg((function(){var r,a=e.slice(1),i=[],o=lc(n.cells.slice().reverse());try{for(o.s();!(r=o.n()).done;){var s=r.value;Array.isArray(s.stateSize)?i.push(a.splice(0,s.stateSize.length)):i.push(a.splice(0,1))}}catch(v){o.e(v)}finally{o.f()}i.reverse();for(var u,c=[],l=0;l<n.cells.length;++l){var d=n.cells[l];a=i[l],u=0===l?[e[0]].concat(a):[u[0]].concat(a),u=d.call(u,t),c.push(u.slice(1))}a=[];var f,p=lc(c.slice().reverse());try{for(p.s();!(f=p.n()).done;){var h,m=f.value;(h=a).push.apply(h,Tn(m))}}catch(v){p.e(v)}finally{p.f()}return[u[0]].concat(a)}))}},{key:"build",value:function(e){var t;GC(e)&&(e=e[0]),this.cells.forEach((function(n,r){KE("RNNCell_".concat(r),(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0}},{key:"getConfig",value:function(){var e=sc(tt(n.prototype),"getConfig",this).call(this),t={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Ze(Ze({},e),t)}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];var e,t=[],n=lc(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Tn(r.trainableWeights))}}catch(a){n.e(a)}finally{n.f()}return t}},{key:"nonTrainableWeights",get:function(){var e,t=[],n=lc(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Tn(r.nonTrainableWeights))}}catch(u){n.e(u)}finally{n.f()}if(!this.trainable){var a,i=[],o=lc(this.cells);try{for(o.s();!(a=o.n()).done;){var s=a.value;i.push.apply(i,Tn(s.trainableWeights))}}catch(u){o.e(u)}finally{o.f()}return i.concat(t)}return t}},{key:"getWeights",value:function(){var e,t=[],n=lc(this.cells);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push.apply(t,Tn(r.weights))}}catch(a){n.e(a)}finally{n.f()}return QC(t)}},{key:"setWeights",value:function(e){var t,n=[],r=lc(this.cells);try{for(r.s();!(t=r.n()).done;)for(var a=t.value,i=a.weights.length,o=e.splice(i),s=0;s<a.weights.length;++s)n.push([a.weights[s],o[s]])}catch(u){r.e(u)}finally{r.f()}$C(n)}}],[{key:"fromConfig",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=[],i=lc(t.cells);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(dR(o,r))}}catch(s){i.e(s)}finally{i.f()}return new e({cells:a})}}]),n}(jO);function ZO(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,i=e.count,o=void 0===i?1:i,s=e.dropoutFunc,u=function(){return null!=s?s(t(),n):AC(t(),n)},c=function(){return kC(u,t,a)};return!o||o<=1?Jg(c().clone()):Array(o).fill(void 0).map(c).map((function(e){return Jg(e.clone())}))}XO.className="StackedRNNCells",Jy.registerClass(XO);var YO=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),e.unroll)throw new dE("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new dE("It is not possible at the moment to stack convolutional cells.");return(r=t.call(this,e)).inputSpec=[new eN({ndim:5})],r}return Qe(n,[{key:"call",value:function(e,t){var r=this;return Zg((function(){if(null!=r.cell.dropoutMask&&(Yg(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(Yg(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),t&&t.constants)throw new lE("ConvRNN2D cell does not support constants");var a=null==t?null:t.mask,i=null==t?null:t.training,o=null==t?null:t.initialState;return sc(tt(n.prototype),"call",r).call(r,e,{mask:a,training:i,initialState:o})}))}},{key:"computeOutputShape",value:function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat(Tn(t.slice(2)))),this.returnState&&(t=[t].concat(Tn(Array(2).fill([e[0]].concat(Tn(t.slice(-3))))))),t}},{key:"getInitialState",value:function(e){var t=this;return Zg((function(){var n=t.cell.stateSize,r=e.shape,a=t.computeSingleOutputShape(r),i=XA([a[0]].concat(Tn(a.slice(2))));return Array.isArray(n)?Array(n.length).fill(i):[i]}))}},{key:"resetStates",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Zg((function(){if(!t.stateful)throw new uE("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=t.inputSpec[0].shape,a=t.computeSingleOutputShape(r),i=[a[0]].concat(Tn(a.slice(2)));if(null==r[0])throw new lE("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.getStates())Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return XA(i)})):t.states_=[XA(i)];else if(null==e)Yg(t.states_),null!=t.keptStates&&(Yg(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states_=t.cell.stateSize.map((function(){return XA(i)})):t.states_[0]=XA(i);else{if(Array.isArray(e)||(e=[e]),e.length!==t.states_.length)throw new lE("Layer ".concat(t.name," expects ").concat(t.states_.length," state(s), but it received ").concat(e.length," state value(s). Input received: ").concat(e));n?t.keptStates.push(t.states_.slice()):Yg(t.states_);for(var o=0;o<t.states_.length;++o){var s=e[o],u=i;if(!Fh.arraysEqual(s.shape,u))throw new lE("State ".concat(o," is incompatible with layer ").concat(t.name,": expected shape=").concat(u,", received shape=").concat(s.shape));t.states_[o]=s}}t.states_=t.states_.map((function(e){return Jg(e.clone())}))}))}},{key:"computeSingleOutputShape",value:function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,i=t.padding,o=t.strides,s=t.dilationRate,u="channelsFirst"===n,c=e[u?3:2],l=e[u?4:3],d=gO(c,a[0],i,o[0],s[0]),f=gO(l,a[1],i,o[1],s[1]);return[].concat(Tn(e.slice(0,2)),Tn(u?[r,d,f]:[d,f,r]))}}]),n}(WO);YO.className="ConvRNN2D";var JO=function(e){et(n,e);var t=ot(n);function n(e){var r;Ye(this,n);var a=e.filters,i=e.kernelSize,o=e.strides,s=e.padding,u=e.dataFormat,c=e.dilationRate;return(r=t.call(this,Ze(Ze({},e),{},{units:a}))).filters=a,_E(r.filters,"filters"),r.kernelSize=vO(i,2,"kernelSize"),r.kernelSize.forEach((function(e){return _E(e,"kernelSize")})),r.strides=vO(o||1,2,"strides"),r.strides.forEach((function(e){return _E(e,"strides")})),r.padding=s||"valid",HE(r.padding),r.dataFormat=u||"channelsLast",UE(r.dataFormat),r.dilationRate=vO(c||1,2,"dilationRate"),r.dilationRate.forEach((function(e){return _E(e,"dilationRate")})),r}return Qe(n,[{key:"build",value:function(e){var t;e=XC(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new lE("The channel dimension of the input should be defined. Found ".concat(e[n]));var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var o;if(this.unitForgetBias){var s=this.biasInitializer,u=this.filters;o=new(t=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"apply",value:function(e,t){return dC([s.apply([u]),ZA([u]),s.apply([2*u])])}}]),n}(IC),t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}},{key:"call",value:function(e,t){var n=this;return Zg((function(){if(3!==e.length)throw new lE("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ".concat(e.length,"."));var r=t.training||!1,a=e[0],i=e[1],o=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=ZO({ones:function(){return ak(a)},rate:n.dropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var s=n.dropoutMask,c=function(e,t,n){return t&&t[n]?gb(t[n],e):e},l=c(a,s,0),d=c(a,s,1),f=c(a,s,2),p=c(a,s,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=ZO({ones:function(){return ak(i)},rate:n.recurrentDropout,training:r,count:4,dropoutFunc:n.dropoutFunc}));var h=n.recurrentDropoutMask,m=c(i,h,0),v=c(i,h,1),g=c(i,h,2),y=c(i,h,3),b=u(Zk(n.kernel.read(),4,3),4),x=b[0],A=b[1],k=b[2],w=b[3],S=u(n.useBias?Zk(n.bias.read(),4):[null,null,null,null],4),I=S[0],E=S[1],C=S[2],N=S[3];l=n.inputConv(l,x,I,n.padding),d=n.inputConv(d,A,E,n.padding),f=n.inputConv(f,k,C,n.padding),p=n.inputConv(p,w,N,n.padding);var T=u(Zk(n.recurrentKernel.read(),4,3),4),_=T[0],R=T[1],M=T[2],O=T[3];m=n.recurrentConv(m,_),v=n.recurrentConv(v,R),g=n.recurrentConv(g,M),y=n.recurrentConv(y,O);var F=n.recurrentActivation.apply(hb(l,m)),P=n.recurrentActivation.apply(hb(d,v)),D=hb(gb(P,o),gb(F,n.activation.apply(hb(f,g)))),L=gb(n.recurrentActivation.apply(hb(p,y)),n.activation.apply(D));return[L,L,D]}))}},{key:"getConfig",value:function(){var e=sc(tt(n.prototype),"getConfig",this).call(this),t=(e.units,Ke(e,hc)),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Ze(Ze({},t),r)}},{key:"inputConv",value:function(e,t,n,r){var a=vx(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?bC(a,n,this.dataFormat):a}},{key:"recurrentConv",value:function(e,t){return vx(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}}]),n}(qO);JO.className="ConvLSTM2DCell",Jy.registerClass(JO);var QO=function(e){et(n,e);var t=ot(n);function n(e){Ye(this,n);var r=new JO(e);return t.call(this,Ze(Ze({},e),{},{cell:r}))}return Qe(n,null,[{key:"fromConfig",value:function(e,t){return new e(t)}}]),n}(YO);QO.className="ConvLSTM2D",Jy.registerClass(QO);var $O=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).rate=Math.max(Math.min(e.rate,1),0),r.noiseShape=e.noiseShape,r.seed=e.seed,r.supportsMasking=!0,r}return Qe(n,[{key:"getNoiseShape",value:function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n}},{key:"call",value:function(e,t){var n=this;return Zg((function(){n.invokeCallHook(e,t);var r=KC(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return kC((function(){return AC(r,n.rate,i,n.seed)}),(function(){return r}),a)}return e}))}},{key:"getConfig",value:function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"dispose",value:function(){return sc(tt(n.prototype),"dispose",this).call(this)}}]),n}(iN);$O.className="Dropout",Jy.registerClass($O);var eF=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).inputSpec=[{ndim:3}],r}return Qe(n,[{key:"getNoiseShape",value:function(e){var t=e.shape;return[t[0],1,t[2]]}}]),n}($O);eF.className="SpatialDropout1D",Jy.registerClass(eF);var tF=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),(r=t.call(this,e)).activation=null,r.useBias=!0,r.kernel=null,r.bias=null,r.DEFAULT_KERNEL_INITIALIZER="glorotNormal",r.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var a=null;null!=e.batchSize&&(a=e.batchSize),r.batchInputShape=[a,e.inputDim]}return r.units=e.units,_E(r.units,"units"),r.activation=nO(e.activation),null!=e.useBias&&(r.useBias=e.useBias),r.kernelInitializer=HC(e.kernelInitializer||r.DEFAULT_KERNEL_INITIALIZER),r.biasInitializer=HC(e.biasInitializer||r.DEFAULT_BIAS_INITIALIZER),r.kernelConstraint=R_(e.kernelConstraint),r.biasConstraint=R_(e.biasConstraint),r.kernelRegularizer=cO(e.kernelRegularizer),r.biasRegularizer=cO(e.biasRegularizer),r.activityRegularizer=cO(e.activityRegularizer),r.supportsMasking=!0,r.inputSpec=[{minNDim:2}],it(r)}return Qe(n,[{key:"build",value:function(e){var t=(e=XC(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:qe({},-1,t)}],this.built=!0}},{key:"computeOutputShape",value:function(e){var t=(e=XC(e)).slice();return t[t.length-1]=this.units,t}},{key:"call",value:function(e,t){var n=this;return Zg((function(){n.invokeCallHook(e,t);var r,a=KC(e),i=ME(n.activation.getClassName());return null!=i?r=mC(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=mC(a,n.kernel.read()),null!=n.bias&&(r=bC(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))}},{key:"getConfig",value:function(){var e={units:this.units,activation:eO(this.activation),useBias:this.useBias,kernelInitializer:UC(this.kernelInitializer),biasInitializer:UC(this.biasInitializer),kernelRegularizer:sO(this.kernelRegularizer),biasRegularizer:sO(this.biasRegularizer),activityRegularizer:sO(this.activityRegularizer),kernelConstraint:T_(this.kernelConstraint),biasConstraint:T_(this.biasConstraint)},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN);tF.className="Dense",Jy.registerClass(tF);var nF=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),e=e||{},(r=t.call(this,e)).inputSpec=[{minNDim:3}],r.dataFormat=e.dataFormat,r}return Qe(n,[{key:"computeOutputShape",value:function(e){var t,n=lc((e=XC(e)).slice(1));try{for(n.s();!(t=n.n()).done;){if(null==t.value)throw new lE('The shape of the input to "Flatten" is not fully defined (got '.concat(e.slice(1),'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.'))}}catch(r){n.e(r)}finally{n.f()}return[e[0],eC(e,1)]}},{key:"call",value:function(e,t){var n=this;return Zg((function(){n.invokeCallHook(e,t);var r=KC(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],i=2;i<r.rank;++i)a.push(i);a.push(1),r=dy(r,a)}return function(e){if(e.rank<=1)throw new lE("batchFlatten requires a minimum rank of 2. Got rank: ".concat(e.rank,"."));var t=[e.shape[0],eC(e.shape,1)];return Kb(e,t)}(r)}))}},{key:"getConfig",value:function(){var e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);var t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN);nF.className="Flatten",Jy.registerClass(nF);var rF=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).supportsMasking=!0,r.activation=nO(e.activation),r}return Qe(n,[{key:"call",value:function(e,t){var n=this;return Zg((function(){n.invokeCallHook(e,t);var r=KC(e);return n.activation.apply(r)}))}},{key:"getConfig",value:function(){var e={activation:eO(this.activation)},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN);rF.className="Activation",Jy.registerClass(rF);var aF=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).n=e.n,r.inputSpec=[{ndim:2}],r}return Qe(n,[{key:"computeOutputShape",value:function(e){return[e[0],this.n,e[1]]}},{key:"call",value:function(e,t){var n=this;return Zg((function(){return function(e,t){return Zg((function(){if(2!==e.shape.length)throw new lE("repeat() expects a rank-2 tensor, but received a rank-".concat(e.shape.length," tensor."));return pC(oC(e,1),[1,t,1])}))}(e=KC(e),n.n)}))}},{key:"getConfig",value:function(){var e={n:this.n},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN);aF.className="RepeatVector",Jy.registerClass(aF);var iF=function(e){et(n,e);var t=ot(n);function n(e){var r;Ye(this,n),(r=t.call(this,e)).targetShape=e.targetShape;for(var a=0;a<r.targetShape.length;++a)r.isUnknown(r.targetShape[a])&&(r.targetShape[a]=null);return r}return Qe(n,[{key:"isUnknown",value:function(e){return e<0||null==e}},{key:"fixUnknownDimension",value:function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==i)throw new lE("Can only specifiy one unknown dimension.");i=o}else a*=s}var u=eC(e);if(null!==i){if(0===a||u%a!==0)throw new lE(n);r[i]=u/a}else if(u!==a)throw new lE(n);return r}},{key:"computeOutputShape",value:function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}},{key:"call",value:function(e,t){var n=this;return Zg((function(){n.invokeCallHook(e,t);var r=KC(e),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return Kb(r,i)}))}},{key:"getConfig",value:function(){var e={targetShape:this.targetShape},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN);iF.className="Reshape",Jy.registerClass(iF);var oF=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),r=t.call(this,e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received ".concat(e.dims," instead."));var a=rC(1,e.dims.length+1);if(!Fh.arraysEqual(e.dims.slice().sort(),a))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return r.dims=e.dims,r.dimsIncludingBatch=[0].concat(r.dims),r.inputSpec=[new eN({ndim:r.dims.length+1})],it(r)}return Qe(n,[{key:"computeOutputShape",value:function(e){var t=(e=XC(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t}},{key:"call",value:function(e,t){return dy(KC(e),this.dimsIncludingBatch)}},{key:"getConfig",value:function(){var e={dims:this.dims},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN);oF.className="Permute",Jy.registerClass(oF);var sF=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,null==e?{}:e)).supportsMasking=!0,r.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0,r}return Qe(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=sc(tt(n.prototype),"getConfig",this).call(this),t={maskValue:this.maskValue};return Object.assign(t,e),t}},{key:"computeMask",value:function(e,t){var n=KC(e);return wb(rk(n,this.maskValue),-1)}},{key:"call",value:function(e,t){var n=this;return Zg((function(){n.invokeCallHook(e,t);var r=KC(e),a=wb(rk(r,n.maskValue),-1,!0);return gb(r,lg(a,r.dtype))}))}}]),n}(iN);sF.className="Masking",Jy.registerClass(sF);var uF=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),(r=t.call(this,e)).embeddings=null,r.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var a=null;null!=e.batchSize&&(a=e.batchSize),null==e.inputLength?r.batchInputShape=[a,null]:r.batchInputShape=[a].concat(yE(e.inputLength))}return r.inputDim=e.inputDim,_E(r.inputDim,"inputDim"),r.outputDim=e.outputDim,_E(r.outputDim,"outputDim"),r.embeddingsInitializer=HC(e.embeddingsInitializer||r.DEFAULT_EMBEDDINGS_INITIALIZER),r.embeddingsRegularizer=cO(e.embeddingsRegularizer),r.activityRegularizer=cO(e.activityRegularizer),r.embeddingsConstraint=R_(e.embeddingsConstraint),r.maskZero=e.maskZero,r.supportsMasking=e.maskZero,r.inputLength=e.inputLength,it(r)}return Qe(n,[{key:"build",value:function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}},{key:"warnOnIncompatibleInputShape",value:function(e){}},{key:"computeMask",value:function(e,t){var n=this;return Zg((function(){return n.maskZero?(e=KC(e),rk(e,Fx(e))):null}))}},{key:"computeOutputShape",value:function(e){if(e=XC(e),null==this.inputLength)return[].concat(Tn(e),[this.outputDim]);var t=yE(this.inputLength);if(t.length!==e.length-1)throw new lE('"inputLength" is '.concat(this.inputLength,", but received input shape has shape ").concat(e));for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new lE('"inputLength" is '.concat(this.inputLength,", but received input shape has shape ").concat(e));null==a&&(t[n]=i),n++}return[e[0]].concat(Tn(t),[this.outputDim])}},{key:"call",value:function(e,t){var n=this;return Zg((function(){n.invokeCallHook(e,t);var r=KC(e);"int32"!==r.dtype&&(r=iC(r,"int32"));var a=vC(n.embeddings.read(),Kb(r,[r.size]));return Kb(a,XC(n.computeOutputShape(r.shape)))}))}},{key:"getConfig",value:function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:UC(this.embeddingsInitializer),embeddingsRegularizer:sO(this.embeddingsRegularizer),activityRegularizer:sO(this.activityRegularizer),embeddingsConstraint:T_(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN);uF.className="Embedding",Jy.registerClass(uF);var cF=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e||{})).supportsMasking=!0,r}return Qe(n,[{key:"mergeFunction",value:function(e){throw new dE}},{key:"computeElementwiseOpOutputShape",value:function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new lE("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n}},{key:"build",value:function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[XC(e)]),e.length<2)throw new lE("A merge layer should be called on an Array of at least 2 inputs. Got ".concat(e.length," input(s)."));var t,n=[],r=lc(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}}catch(c){r.e(c)}finally{r.f()}if((n=EE(n)).length>1)throw new lE("Can not merge tensors with different batch sizes. Got tensors with shapes: ".concat(JSON.stringify(e),"."));for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var s=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}var u=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===EE(u).length?this.reshapeRequired=!1:this.reshapeRequired=!0}},{key:"call",value:function(e,t){var n=this;return Zg((function(){if(n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){var a,i=nC(r),o=lc(e);try{for(o.s();!(a=o.n()).done;){for(var s=a.value,u=s.rank,c=0;c<i-u;++c)s=oC(s,1);t.push(s)}}catch(E){o.e(E)}finally{o.f()}return n.mergeFunction(t)}var l,d=!1,f=lc(e);try{for(f.s();!(l=f.n()).done;){var p=l.value,h=p.rank;if(null==h){var m=p.shape,v=m[0],g=m.slice(1).concat([v]),y=Kb(p,[v].concat(eC(m.slice(1))));y=dy(y,[1,0]),y=Kb(y,g),t.push(y),d=!0}else if(h>1){var b=rC(1,h).concat([0]);t.push(dy(p,b)),d=!0}else t.push(p)}}catch(E){f.e(E)}finally{f.f()}var x=n.mergeFunction(t),A=x.rank;if(d)if(null==A){var k=x.shape,w=k[k.length-1],S=[w].concat(k.slice(0,k.length-1));x=Kb(dy(Kb(x,[-1,w]),[1,0]),S)}else if(A>1){var I=[A-1].concat(rC(0,A-1));x=dy(x,I)}return x}return n.mergeFunction(e)}))}},{key:"computeOutputShape",value:function(e){var t;t=null==e[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}var a,i=[],o=lc(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;null!=s&&null!==s[0]&&i.push(s[0])}}catch(u){o.e(u)}finally{o.f()}return t=1===(i=EE(i)).length?i.concat(t):[null].concat(t)}},{key:"computeMask",value:function(e,t){return Zg((function(){if(null==t)return null;if(!Array.isArray(t))throw new lE("`mask` should be an Array");if(!Array.isArray(e))throw new lE("`inputs` should be an Array");if(t.length!==e.length)throw new lE("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (".concat(e.length," vs ").concat(t.length,")"));if(t.every((function(e){return null==e})))return null;t=t.map((function(e){return null==e?e:iA(e,0)}));for(var n=t[0],r=1;r<t.length-1;++r)n=DA(n,t[r]);return n}))}}]),n}(iN),lF=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,e)}return Qe(n,[{key:"mergeFunction",value:function(e){return Zg((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=hb(t,e[n]);return t}))}}]),n}(cF);lF.className="Add",Jy.registerClass(lF);var dF=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,e)}return Qe(n,[{key:"mergeFunction",value:function(e){return Zg((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=gb(t,e[n]);return t}))}}]),n}(cF);dF.className="Multiply",Jy.registerClass(dF);var fF=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,e)}return Qe(n,[{key:"mergeFunction",value:function(e){return Zg((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=hb(t,e[n]);return gb(1/e.length,t)}))}}]),n}(cF);fF.className="Average",Jy.registerClass(fF);var pF=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,e)}return Qe(n,[{key:"mergeFunction",value:function(e){return Zg((function(){for(var t=e[0],n=1;n<e.length;++n)t=qA(t,e[n]);return t}))}}]),n}(cF);pF.className="Maximum",Jy.registerClass(pF);var hF=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,e)}return Qe(n,[{key:"mergeFunction",value:function(e){return Zg((function(){for(var t=e[0],n=1;n<e.length;++n)t=JA(t,e[n]);return t}))}}]),n}(cF);hF.className="Minimum",Jy.registerClass(hF);var mF=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).DEFAULT_AXIS=-1,null==e&&(e={}),r.axis=null==e.axis?r.DEFAULT_AXIS:e.axis,r.supportsMasking=!0,r.reshapeRequired=!1,r}return Qe(n,[{key:"build",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new lE("A `Concatenate` layer should be called on a list of at least 2 inputs");var t,n=!0,r=lc(e);try{for(r.s();!(t=r.n()).done;){if(null!=t.value){n=!1;break}}}catch(d){r.e(d)}finally{r.f()}if(!n){for(var a=[],i=0;i<e.length;++i){var o=e[i].slice();o.splice(this.axis,1);var s,u=!1,c=lc(a);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(Fh.arraysEqual(l,o)){u=!0;break}}}catch(d){c.e(d)}finally{c.f()}u||a.push(o)}if(a.length>1)throw new lE("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}}},{key:"mergeFunction",value:function(e){var t=this;return Zg((function(){return dC(e,t.axis)}))}},{key:"computeOutputShape",value:function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new lE("A `Concatenate` layer should be called on a list of inputs.");var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,i=lc(n.slice(1));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(null==r[a]||null==o[a]){r[a]=null;break}r[a]+=o[a]}}catch(s){i.e(s)}finally{i.f()}return r}},{key:"computeMask",value:function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new lE("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new lE("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new lE("Mismatch in the length of mask (".concat(t.length,") and the legnth of inputs (").concat(e.length,")"));return Zg((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],i=0;i<e.length;++i)null==t[i]?a.push(lg(ak(e[i]),"bool")):t[i].rank<e[i].rank?a.push(iA(t[i],-1)):a.push(t[i]);var o=Yb(a,n.axis);return kb(o,-1,!1)}))}},{key:"getConfig",value:function(){var e={axis:this.axis},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(cF);function vF(e,t){for(;e<0;)e+=t;return e}mF.className="Concatenate",Jy.registerClass(mF);var gF=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).axes=e.axes,r.normalize=null!=e.normalize&&e.normalize,r.supportsMasking=!0,r.reshapeRequired=!1,r}return Qe(n,[{key:"build",value:function(e){Fh.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new dE("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new lE("Dimension incompatibility: ".concat(t[r[0]]," !== ").concat(n[r[1]]))}},{key:"mergeFunction",value:function(e){if(2!==e.length)throw new lE("A `Dot` layer must be called on exactly 2 inputs, but received ".concat(e.length," input(s)."));var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return vF(t,e[n].shape.length)})):[vF(this.axes,n.shape.length),vF(this.axes,r.shape.length)],this.normalize&&(n=fR(n,t[0]),r=fR(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new dE("batchDot is not implemented for tensors of 4D or higher rank yet");if(Fh.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, but got ".concat(e.shape.length)})),Fh.assert(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, but got ".concat(t.shape.length)})),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new dE("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var i=n;return Zg((function(){var n,o;if(r>a){n=r-a;for(var s=[],u=0;u<n;++u)s.push(1);t=Kb(t,t.shape.concat(s))}else if(a>r){n=a-r;for(var c=[],l=0;l<n;++l)c.push(1);e=Kb(e,e.shape.concat(c))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=i[0]===i[1]?eA(gb(e,t),i[0]):eA(gb(dy(e,[1,0]),t),i[1]);else{var d=i[0]!==e.shape.length-1,f=i[1]===t.shape.length-1;o=Bg(e,t,d,f)}if(n>0){for(var p,h=[],m=p=r>a?r+a-3:r-1;m<p+n;++m)h.push(m);o=Qk(o,h)}return 1===o.shape.length&&(o=iA(o,1)),o}))}(n,r,t)}},{key:"interpretAxes",value:function(e,t){return Array.isArray(this.axes)?this.axes:[vF(this.axes,e.length),vF(this.axes,t.length)]}},{key:"computeOutputShape",value:function(e){Fh.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new dE("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a}},{key:"computeMask",value:function(e,t){return null}},{key:"getConfig",value:function(){var e={axes:this.axes,normalize:this.normalize},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(cF);gF.className="Dot",Jy.registerClass(gF);var yF=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).supportsMasking=!0,r.stddev=e.stddev,r}return Qe(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=sc(tt(n.prototype),"getConfig",this).call(this),t={stddev:this.stddev};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Zg((function(){n.invokeCallHook(e,t);var r=KC(e);return kC((function(){return hb(hC(r.shape,0,n.stddev),r)}),(function(){return r}),t.training||!1)}))}}]),n}(iN);yF.className="GaussianNoise",Jy.registerClass(yF);var bF=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r}return Qe(n,[{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=sc(tt(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Zg((function(){n.invokeCallHook(e,t);var r=KC(e);return n.rate>0&&n.rate<1?kC((function(){var e=Math.sqrt(n.rate/(1-n.rate));return gb(r,hC(r.shape,1,e))}),(function(){return r}),t.training||!1):r}))}}]),n}(iN);bF.className="GaussianDropout",Jy.registerClass(bF);var xF=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).supportsMasking=!0,r.rate=e.rate,r.noiseShape=e.noiseShape,r}return Qe(n,[{key:"_getNoiseShape",value:function(e){return this.noiseShape||KC(e).shape}},{key:"computeOutputShape",value:function(e){return e}},{key:"getConfig",value:function(){var e=sc(tt(n.prototype),"getConfig",this).call(this),t={rate:this.rate};return Object.assign(t,e),t}},{key:"call",value:function(e,t){var n=this;return Zg((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return kC((function(){var t=KC(e),a=-1.7580993408473766,i=pA(kk(r),n.rate);i=iC(i,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-o*a*n.rate,u=hb(gb(t,i),gb(hb(i,-1),a));return hb(gb(u,o),s)}),(function(){return KC(e)}),t.training||!1)}return e}))}}]),n}(iN);function AF(e,t,n,r,a){var i,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.001;if(2===e.rank)i=ax(e,t,n,r,a,o);else if(3===e.rank)i=ix(e,t,n,r,a,o);else{if(4!==e.rank)throw new dE("batchNormalization is not implemented for array of rank ".concat(e.rank," yet"));i=ox(e,t,n,r,a,o)}return i}function kF(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Zg((function(){var i=ek(e,r),o=i.mean,s=i.variance;return[AF(e,o,s,n,t,a),o,s]}))}function wF(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Zg((function(){var i,o=ek(e,r),s=o.mean,u=o.variance,c=[],l=lc(rC(0,e.rank));try{for(l.s();!(i=l.n()).done;){var d=i.value;-1!==r.indexOf(d)?c.push(1):c.push(e.shape[d])}}catch(v){l.e(v)}finally{l.f()}var f=Kb(s,c),p=Kb(u,c),h=null==t?null:Kb(t,c),m=null==n?null:Kb(n,c);return[AF(e,f,p,m,h,a),s,u]}))}xF.className="AlphaDropout",Jy.registerClass(xF);var SF=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),null==e&&(e={}),(r=t.call(this,e)).supportsMasking=!0,r.axis=null==e.axis?-1:e.axis,r.momentum=null==e.momentum?.99:e.momentum,r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=HC(e.betaInitializer||"zeros"),r.gammaInitializer=HC(e.gammaInitializer||"ones"),r.movingMeanInitializer=HC(e.movingMeanInitializer||"zeros"),r.movingVarianceInitializer=HC(e.movingVarianceInitializer||"ones"),r.betaConstraint=R_(e.betaConstraint),r.gammaConstraint=R_(e.gammaConstraint),r.betaRegularizer=cO(e.betaRegularizer),r.gammaRegularizer=cO(e.gammaRegularizer),r}return Qe(n,[{key:"build",value:function(e){e=XC(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new lE("Axis ".concat(t," of input tensor should have a defined dimension but the layer received an input with shape ").concat(JSON.stringify(e),"."));this.inputSpec=[new eN({ndim:e.length,axes:qe({},t,n)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}},{key:"call",value:function(e,t){var n=this;return Zg((function(){var r=null!=t.training&&t.training,a=KC(e),i=a.shape,o=i.length,s=rC(0,o),c=n.axis>=0?n.axis:n.axis+o;s.splice(c,1);var l=hE(1,o);l[c]=i[c];var d=s.slice();d.sort();var f=!Fh.arraysEqual(d,rC(0,o).slice(0,o-1));if(!r)return function(){if(f){var e=Kb(n.movingMean.read(),l),t=Kb(n.movingVariance.read(),l),r=n.center?Kb(n.beta.read(),l):null,i=n.scale?Kb(n.gamma.read(),l):null;return AF(a,e,t,r,i,n.epsilon)}return AF(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var p=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.001;return Fh.arraysEqual(r.slice().sort(),rC(0,e.rank-1))?kF(e,t,n,r,a):wF(e,t,n,r,a)}(a,n.gamma.read(),n.beta.read(),s,n.epsilon),h=u(p,3),m=h[0],v=h[1],g=h[2],y=function(e,t,n){Zg((function(){var r=1-n,a=e.read(),i=gb(OA(a,t),r);e.write(OA(a,i))}))};return y(n.movingMean,v,n.momentum),y(n.movingVariance,g,n.momentum),m}))}},{key:"getConfig",value:function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:UC(this.betaInitializer),gammaInitializer:UC(this.gammaInitializer),movingMeanInitializer:UC(this.movingMeanInitializer),movingVarianceInitializer:UC(this.movingVarianceInitializer),betaRegularizer:sO(this.betaRegularizer),gammaRegularizer:sO(this.gammaRegularizer),betaConstraint:T_(this.betaConstraint),gammaConstraint:T_(this.gammaConstraint)},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN);SF.className="BatchNormalization",Jy.registerClass(SF);var IF=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),null==e&&(e={}),(r=t.call(this,e)).axis=null==e.axis?-1:e.axis,"number"==typeof r.axis){if(!Number.isInteger(r.axis))throw new Error("Expected axis to be an integer, but received ".concat(r.axis))}else{if(!Array.isArray(r.axis))throw new Error("Expected axis to be an integer or an array of integers, but received ".concat(JSON.stringify(r.axis)));var a,i=lc(r.axis);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(!Number.isInteger(o))throw new Error("Expected axis to be an array of integers, but received ".concat(JSON.stringify(r.axis)))}}catch(s){i.e(s)}finally{i.f()}}return r.epsilon=null==e.epsilon?.001:e.epsilon,r.center=null==e.center||e.center,r.scale=null==e.scale||e.scale,r.betaInitializer=HC(e.betaInitializer||"zeros"),r.gammaInitializer=HC(e.gammaInitializer||"ones"),r.betaRegularizer=cO(e.betaRegularizer),r.gammaRegularizer=cO(e.gammaRegularizer),r.supportsMasking=!0,it(r)}return Qe(n,[{key:"build",value:function(e){var t=(e=XC(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);var r,a=lc(this.axis);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i<0||i>=t)throw new Error("Invalid axis: ".concat(i))}}catch(s){a.e(s)}finally{a.f()}if(this.axis.length!==EE(this.axis).length)throw new Error("Found duplicate axes in: ".concat(this.axis));var o=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0}},{key:"call",value:function(e,t){var n=this,r=KC(e),a=r.shape,i=a.length;return Zg((function(){var e,t=ek(r,n.axis,!0),o=t.mean,s=t.variance,u=hE(1,i),c=lc(n.axis);try{for(c.s();!(e=c.n()).done;){var l=e.value;u[l]=a[l]}}catch(g){c.e(g)}finally{c.f()}for(var d=function(e){return null!=e&&e.shape.length!==i?Kb(e,u):e},f=n.scale?d(n.gamma.read()):null,p=n.center?d(n.beta.read()):null,h=[],m=[],v=0;v<i;++v)-1!==n.axis.indexOf(v)?(h.push(a[v]),m.push(1)):(h.push(1),m.push(a[v]));return o=sA(o,h),s=sA(s,h),null!=f&&(f=sA(f,m)),null!=p&&(p=sA(p,m)),AF(r,o,s,p,f,n.epsilon)}))}},{key:"getConfig",value:function(){var e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:UC(this.betaInitializer),gammaInitializer:UC(this.gammaInitializer),betaRegularizer:sO(this.betaRegularizer),gammaRegularizer:sO(this.gammaRegularizer)},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN);IF.className="LayerNormalization",Jy.registerClass(IF);var EF=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),null==e&&(e={}),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)r.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)r.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new lE("ZeroPadding2D expects padding to be a length-2 array, but received a length-".concat(e.padding.length," array."));var a,i;if("number"==typeof e.padding[0])a=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new lE("ZeroPadding2D expects height padding to be a length-2 array, but received a length-".concat(e.padding[0].length," array."));if(a=e.padding[0],2!==e.padding[1].length)throw new lE("ZeroPadding2D expects width padding to be a length-2 array, but received a length-".concat(e.padding[1].length," array."));i=e.padding[1]}r.padding=[a,i]}return r.inputSpec=[new eN({ndim:4})],it(r)}return Qe(n,[{key:"computeOutputShape",value:function(e){var t,n;return e=XC(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}},{key:"call",value:function(e,t){var n=this;return Zg((function(){return function(e,t,n){return Zg((function(){if(4!==e.rank)throw new lE("temporalPadding expects input tensor to be 4-D, but received a ".concat(e.rank,"-D tensor."));if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new lE("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new lE("Unknown data format: ".concat(n,". Supported data formats are 'channelsLast' and 'channelsFirst."));var r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],ok(e,r)}))}(KC(e),n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={padding:this.padding,dataFormat:this.dataFormat},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN);function CF(e,t,n,r,a,i){return Zg((function(){UE(a),GE(i),HE(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=bO(e,a);var o,s="same"===r?"same":"valid";return o="max"===i?UA(e,t,n,s):Xb(e,t,n,s),"channelsFirst"===a&&(o=dy(o,[0,3,1,2])),o}))}function NF(e,t,n,r,a,i){return Zg((function(){UE(a),GE(i),HE(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=xO(e,a);var o,s="same"===r?"same":"valid";return o="max"===i?HA(e,t,n,s):Zb(e,t,n,s),"channelsFirst"===a&&(o=dy(o,[0,4,1,2,3])),o}))}EF.className="ZeroPadding2D",Jy.registerClass(EF);var TF=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),null==e.poolSize&&(e.poolSize=2),r=t.call(this,e),"number"==typeof e.poolSize)r.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new lE("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ".concat(JSON.stringify(e.poolSize)));r.poolSize=e.poolSize}if(_E(r.poolSize,"poolSize"),null==e.strides)r.strides=r.poolSize;else if("number"==typeof e.strides)r.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new lE("strides for 1D convolutional layer must be a number or an Array of a single number, but received ".concat(JSON.stringify(e.strides)));r.strides=e.strides}return _E(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,HE(r.padding),r.inputSpec=[new eN({ndim:3})],it(r)}return Qe(n,[{key:"computeOutputShape",value:function(e){var t=gO((e=XC(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}},{key:"call",value:function(e,t){var n=this;return Zg((function(){n.invokeCallHook(e,t),e=oC(KC(e),2);var r=n.poolingFunction(KC(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return Qk(r,[2])}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN),_F=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,e)}return Qe(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return UE(a),HE(r),CF(e,t,n,r,a,"max")}}]),n}(TF);_F.className="MaxPooling1D",Jy.registerClass(_F);var RF=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,e)}return Qe(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return UE(a),HE(r),CF(e,t,n,r,a,"avg")}}]),n}(TF);RF.className="AveragePooling1D",Jy.registerClass(RF);var MF=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),null==e.poolSize&&(e.poolSize=[2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new lE("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides];return _E(r.poolSize,"poolSize"),_E(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,UE(r.dataFormat),HE(r.padding),r.inputSpec=[new eN({ndim:4})],it(r)}return Qe(n,[{key:"computeOutputShape",value:function(e){e=XC(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=gO(t,this.poolSize[0],this.padding,this.strides[0]),n=gO(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}},{key:"call",value:function(e,t){var n=this;return Zg((function(){return n.invokeCallHook(e,t),n.poolingFunction(KC(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN),OF=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,e)}return Qe(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return UE(a),HE(r),CF(e,t,n,r,a,"max")}}]),n}(MF);OF.className="MaxPooling2D",Jy.registerClass(OF);var FF=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,e)}return Qe(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return UE(a),HE(r),CF(e,t,n,r,a,"avg")}}]),n}(MF);FF.className="AveragePooling2D",Jy.registerClass(FF);var PF=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),null==e.poolSize&&(e.poolSize=[2,2,2]),(r=t.call(this,e)).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)r.strides=r.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new lE("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ".concat(e.strides.length,"."));r.strides=e.strides}else r.strides=[e.strides,e.strides,e.strides];return _E(r.poolSize,"poolSize"),_E(r.strides,"strides"),r.padding=null==e.padding?"valid":e.padding,r.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,UE(r.dataFormat),HE(r.padding),r.inputSpec=[new eN({ndim:5})],it(r)}return Qe(n,[{key:"computeOutputShape",value:function(e){e=XC(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=gO(t,this.poolSize[0],this.padding,this.strides[0]),n=gO(n,this.poolSize[1],this.padding,this.strides[1]),r=gO(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}},{key:"call",value:function(e,t){var n=this;return Zg((function(){return n.invokeCallHook(e,t),n.poolingFunction(KC(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))}},{key:"getConfig",value:function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN),DF=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,e)}return Qe(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return UE(a),HE(r),NF(e,t,n,r,a,"max")}}]),n}(PF);DF.className="MaxPooling3D",Jy.registerClass(DF);var LF=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,e)}return Qe(n,[{key:"poolingFunction",value:function(e,t,n,r,a){return UE(a),HE(r),NF(e,t,n,r,a,"avg")}}]),n}(PF);LF.className="AveragePooling3D",Jy.registerClass(LF);var zF=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).inputSpec=[new eN({ndim:3})],r}return Qe(n,[{key:"computeOutputShape",value:function(e){return[e[0],e[2]]}},{key:"call",value:function(e,t){throw new dE}}]),n}(iN),BF=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,e||{})}return Qe(n,[{key:"call",value:function(e,t){return Zg((function(){var t=KC(e);return KA(t,1)}))}}]),n}(zF);BF.className="GlobalAveragePooling1D",Jy.registerClass(BF);var WF=function(e){et(n,e);var t=ot(n);function n(e){return Ye(this,n),t.call(this,e||{})}return Qe(n,[{key:"call",value:function(e,t){return Zg((function(){var t=KC(e);return Xx(t,1)}))}}]),n}(zF);WF.className="GlobalMaxPooling1D",Jy.registerClass(WF);var jF=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,UE(r.dataFormat),r.inputSpec=[new eN({ndim:4})],r}return Qe(n,[{key:"computeOutputShape",value:function(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}},{key:"call",value:function(e,t){throw new dE}},{key:"getConfig",value:function(){var e={dataFormat:this.dataFormat},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}]),n}(iN),VF=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"call",value:function(e,t){var n=this;return Zg((function(){var t=KC(e);return"channelsLast"===n.dataFormat?KA(t,[1,2]):KA(t,[2,3])}))}}]),n}(jF);VF.className="GlobalAveragePooling2D",Jy.registerClass(VF);var UF=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"call",value:function(e,t){var n=this;return Zg((function(){var t=KC(e);return"channelsLast"===n.dataFormat?Xx(t,[1,2]):Xx(t,[2,3])}))}}]),n}(jF);UF.className="GlobalMaxPooling2D",Jy.registerClass(UF);var HF=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).layer=e.layer,r}return Qe(n,[{key:"build",value:function(e){this.built=!0}},{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}},{key:"getWeights",value:function(){return this.layer.getWeights()}},{key:"setWeights",value:function(e){this.layer.setWeights(e)}},{key:"getConfig",value:function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}},{key:"setFastWeightInitDuringBuild",value:function(e){sc(tt(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}}],[{key:"fromConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.layer,a=dR(r,n);delete t.layer;var i={layer:a};return Object.assign(i,t),new e(i)}}]),n}(iN),GF=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this,e)).supportsMasking=!0,r}return Qe(n,[{key:"build",value:function(e){if((e=XC(e)).length<3)throw new lE("TimeDistributed layer expects an input shape >= 3D, but received input shape ".concat(JSON.stringify(e)));this.inputSpec=[{shape:e}];var t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),sc(tt(n.prototype),"build",this).call(this,e)}},{key:"computeOutputShape",value:function(e){var t=[(e=XC(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}},{key:"call",value:function(e,t){var n=this;return Zg((function(){return zO((function(e,r){return[KC(n.layer.call(e,t)),[]]}),e=KC(e),[],!1,null,null,!1,!0)[1]}))}}]),n}(HF);GF.className="TimeDistributed",Jy.registerClass(GF);var qF=function(e){et(n,e);var t=ot(n);function n(e){var r;Ye(this,n),r=t.call(this,e);var a=e.layer.getConfig(),i={};i.className=e.layer.getClassName(),i.config=a,r.forwardLayer=dR(i),a.goBackwards=!0!==a.goBackwards;var o={};if(o.className=e.layer.getClassName(),o.config=a,r.backwardLayer=dR(o),r.forwardLayer.name="forward_"+r.forwardLayer.name,r.backwardLayer.name="backward_"+r.backwardLayer.name,r.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function(e){NE(jE,"BidirectionalMergeMode",e)}(r.mergeMode),e.weights)throw new dE("weights support is not implemented for Bidirectional layer yet.");return r._stateful=e.layer.stateful,r.returnSequences=e.layer.returnSequences,r.returnState=e.layer.returnState,r.supportsMasking=!0,r._trainable=!0,r.inputSpec=e.layer.inputSpec,r.numConstants=null,r}return Qe(n,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"getWeights",value:function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}},{key:"setWeights",value:function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}},{key:"computeOutputShape",value:function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState&&(r=a.slice(1)),t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):gE(n)}},{key:"apply",value:function(e,t){var r=null==t?null:t.initialState,a=null==t?null:t.constants;null==t&&(t={});var i=LO(e,r,a,this.numConstants);if(e=i.inputs,r=i.initialState,a=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==a)return sc(tt(n.prototype),"apply",this).call(this,e,t);var o=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new lE("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=r,o.push.apply(o,Tn(r));var c=r.map((function(e){return new eN({shape:e.shape})}));this.forwardLayer.stateSpec=c.slice(0,u/2),this.backwardLayer.stateSpec=c.slice(u/2),s.push.apply(s,Tn(c))}if(null!=a)throw new dE("Support for constants in Bidirectional layers is not implemented yet.");for(var l=o[0]instanceof tN,d=0,f=o;d<f.length;d++){if(f[d]instanceof tN!==l)throw new lE("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(l){var p=[e].concat(o),h=this.inputSpec.concat(s),m=this.inputSpec;this.inputSpec=h;var v=sc(tt(n.prototype),"apply",this).call(this,p,t);return this.inputSpec=m,v}return sc(tt(n.prototype),"apply",this).call(this,e,t)}},{key:"call",value:function(e,t){var n=this;return Zg((function(){var r,a,i,o,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var u=s.slice(0,s.length/2),c=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:c}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=Ck(a,1)),"concat"===n.mergeMode?o=dC([r,a]):"sum"===n.mergeMode?o=hb(r,a):"ave"===n.mergeMode?o=gb(.5,hb(r,a)):"mul"===n.mergeMode?o=gb(r,a):null==n.mergeMode&&(o=[r,a]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))}},{key:"resetStates",value:function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}},{key:"build",value:function(e){var t=this;KE(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),KE(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0}},{key:"computeMask",value:function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}},{key:"setFastWeightInitDuringBuild",value:function(e){sc(tt(n.prototype),"setFastWeightInitDuringBuild",this).call(this,e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}},{key:"getConfig",value:function(){var e={mergeMode:this.mergeMode},t=sc(tt(n.prototype),"getConfig",this).call(this);return Object.assign(e,t),e}}],[{key:"fromConfig",value:function(e,t){var n=dR(t.layer);if(delete t.layer,null!=t.numConstants)throw new dE("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)}}]),n}(HF);function KF(e){return new sN(e)}function XF(e){return new pO(e)}function ZF(e){return new lO(e)}function YF(e){return new dO(e)}function JF(e){return new fO(e)}function QF(e){return new mO(e)}function $F(e){return new hO(e)}function eP(e){return new OO(e)}function tP(e){return new IO(e)}function nP(e){return new NO(e)}function rP(e){return new CO(e)}function aP(e){return new TO(e)}function iP(e){return new RO(e)}function oP(e){return new FO(e)}function sP(e){return new PO(e)}function uP(e){return new DO(e)}function cP(e){return new rF(e)}function lP(e){return new tF(e)}function dP(e){return new $O(e)}function fP(e){return new eF(e)}function pP(e){return new nF(e)}function hP(e){return new aF(e)}function mP(e){return new iF(e)}function vP(e){return new oF(e)}function gP(e){return new uF(e)}function yP(e){return new lF(e)}function bP(e){return new fF(e)}function xP(e){return new mF(e)}function AP(e){return new pF(e)}function kP(e){return new hF(e)}function wP(e){return new dF(e)}function SP(e){return new gF(e)}function IP(e){return new SF(e)}function EP(e){return new IF(e)}function CP(e){return new EF(e)}function NP(e){return new RF(e)}function TP(e){return NP(e)}function _P(e){return NP(e)}function RP(e){return new FF(e)}function MP(e){return RP(e)}function OP(e){return RP(e)}function FP(e){return new LF(e)}function PP(e){return FP(e)}function DP(e){return FP(e)}function LP(e){return new BF(e)}function zP(e){return new VF(e)}function BP(e){return new WF(e)}function WP(e){return new UF(e)}function jP(e){return new _F(e)}function VP(e){return new OF(e)}function UP(e){return new DF(e)}function HP(e){return new GO(e)}function GP(e){return new HO(e)}function qP(e){return new KO(e)}function KP(e){return new qO(e)}function XP(e){return new UO(e)}function ZP(e){return new VO(e)}function YP(e){return new QO(e)}function JP(e){return new JO(e)}function QP(e){return new WO(e)}function $P(e){return new XO(e)}function eD(e){return new qF(e)}function tD(e){return new GF(e)}qF.className="Bidirectional",Jy.registerClass(qF);var nD=BP,rD=WP,aD=jP,iD=VP;function oD(e){return new yF(e)}function sD(e){return new bF(e)}function uD(e){return new xF(e)}function cD(e){return new sF(e)}var lD={};function dD(e,t){return kR(e,t)}function fD(e,t){return CR(e,t)}function pD(e,t){return NR(e,t)}function hD(e,t){return wR(e,t)}function mD(e,t){return TR(e,t)}function vD(e,t){return IR(e,t)}function gD(e,t){return ER(e,t)}function yD(e,t){return bR(e,t)}function bD(e,t){return hR(e,t)}function xD(e,t){return mR(e,t)}function AD(e,t){return mR(e,t)}function kD(e,t){return mR(e,t)}function wD(e,t){return pR(e,t)}function SD(e,t){return pR(e,t)}function ID(e,t){return pR(e,t)}Dc(lD,{MAPE:function(){return AD},MSE:function(){return SD},binaryAccuracy:function(){return dD},binaryCrossentropy:function(){return fD},categoricalAccuracy:function(){return hD},categoricalCrossentropy:function(){return mD},cosineProximity:function(){return yD},mape:function(){return kD},meanAbsoluteError:function(){return bD},meanAbsolutePercentageError:function(){return xD},meanSquaredError:function(){return wD},mse:function(){return ID},precision:function(){return vD},recall:function(){return gD},sparseCategoricalAccuracy:function(){return pD}});var ED={};Dc(ED,{modelFromJSON:function(){return EM}});var CD={};function ND(e){return new iO(e)}function TD(e){return function(e){return rO(e),new iO({l1:null!=e?e.l1:null,l2:0})}(e)}function _D(e){return function(e){return rO(e),new iO({l2:null!=e?e.l2:null,l1:0})}(e)}Dc(CD,{l1:function(){return TD},l1l2:function(){return ND},l2:function(){return _D}});var RD=function(e){et(n,e);var t=ot(n);function n(){var e;return Ye(this,n),(e=t.apply(this,arguments)).model=null,e}return Qe(n,[{key:"setModel",value:function(e){if(!(e instanceof SM))throw new Error("model must be a LayersModel, not some other Container");this.model=e}}]),n}(nR);function MD(e,t){return e<t}function OD(e,t){return e>t}var FD=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),r=t.call(this),null==e&&(e={}),e.restoreBestWeights)throw new dE("restoreBestWeights = True is not implemented in EarlyStopping yet.");return r.monitor=e.monitor||"val_loss",r.minDelta=Math.abs(e.minDelta||0),r.patience=e.patience||0,r.verbose=e.verbose||0,r.mode=e.mode||"auto",r.baseline=e.baseline,-1===["auto","min","max"].indexOf(r.mode)&&(console.warn("EarlyStopping mode '".concat(r.mode,"' is invalid. Falling back to mode 'auto'.")),r.mode="auto"),"min"===r.mode?r.monitorFunc=MD:"max"===r.mode||-1!==r.monitor.indexOf("acc")?r.monitorFunc=OD:r.monitorFunc=MD,r.monitorFunc===MD&&(r.minDelta*=-1),it(r)}return Qe(n,[{key:"onTrainBegin",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===MD?1/0:-1/0;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onEpochEnd",value:function(){var e=ct(st().mark((function e(t,n){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$_(n);case 2:null!=(r=this.getMonitorValue(n))&&(this.monitorFunc(r-this.minDelta,this.best)?(this.best=r,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=t,this.model.stopTraining=!0)));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onTrainEnd",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.stoppedEpoch>0&&this.verbose&&console.log("Epoch ".concat(this.stoppedEpoch,": early stopping."));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMonitorValue",value:function(e){null==e&&(e={});var t=e[this.monitor];return null==t&&console.warn("Metric for EarlyStopping ".concat(this.monitor," is not available. Available metrics are: ").concat(Object.keys(e))),t}}]),n}(RD);var PD={earlyStopping:function(e){return new FD(e)}};id().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}));var DD,LD=function(e){return e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF",e}(LD||{});!function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(DD||(DD={}));var zD={};function BD(e,t){var n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};zD[e]=n}function WD(e){return zD[e]}function jD(e){delete zD[e]}function VD(e,t,n,r,a){var i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){var o=i.inputIndexStart,s=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?o+1:i.inputIndexEnd;if("tensor"===i.type)return UD(t.inputNames[i.inputIndexStart],n,r,a);if("tensors"===i.type)return t.inputNames.slice(o,s).map((function(e){return UD(e,n,r,a)}));var u=UD(t.inputNames.slice(o)[0],n,r,a),c=u.dataSync();return"number"===i.type?c[0]:Fh.toNestedArray(u.shape,c)}var l=t.attrParams[e];return l&&l.value}function UD(e,t,n,r){var a=u(qD(e),2),i=a[0],o=a[1];if(null!=r){var s=r.getHashTableHandleByName(i);if(null!=s)return s}var c=n.currentContextIds.find((function(e){return!!t[GD(i,e)]}));return void 0!==c?t[GD(i,c)][o]:void 0}function HD(e,t){var n=u(qD(e),3),r=n[0],a=n[1],i=n[2];return[GD(r,t&&t.currentContextId),a,i]}function GD(e,t){return t?"".concat(e,"-").concat(t):e}function qD(e){var t=e.split(":");if(1===t.length)return[e,0,void 0];var n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function KD(e,t,n){var r=VD("pad",e,t,n);if("explicit"===r){r=VD("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],i=0;i<4;i++)a[i][0]=r[2*i],a[i][1]=r[2*i+1];return a}return r}function XD(e){return e.kept?e:dg(e)}var ZD={};Dc(ZD,{json:function(){return YD}});var YD=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],JD={};Dc(JD,{json:function(){return QD}});var QD=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],$D={};Dc($D,{json:function(){return eL}});var eL=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],tL={};Dc(tL,{json:function(){return nL}});var nL=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],rL={};Dc(rL,{json:function(){return aL}});var aL=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],iL={};Dc(iL,{json:function(){return oL}});var oL=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],sL={};Dc(sL,{json:function(){return uL}});var uL=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],cL={};Dc(cL,{json:function(){return lL}});var lL=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],dL={};Dc(dL,{json:function(){return fL}});var fL=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],pL={};Dc(pL,{json:function(){return hL}});var hL=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],mL={};Dc(mL,{json:function(){return vL}});var vL=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],gL={};Dc(gL,{json:function(){return yL}});var yL=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],bL={};Dc(bL,{json:function(){return xL}});var xL=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],AL={};Dc(AL,{json:function(){return kL}});var kL=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],wL={};Dc(wL,{json:function(){return SL}});var SL=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],IL={};Dc(IL,{json:function(){return EL}});var EL=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],CL={};Dc(CL,{json:function(){return NL}});var NL=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],TL={};Dc(TL,{json:function(){return _L}});var _L=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],RL={};Dc(RL,{json:function(){return ML}});var ML=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],OL=function(){function e(){var t;Ye(this,e);var n=[ZD,JD,$D,tL,rL,iL,sL,cL,dL,pL,mL,gL,bL,AL,wL,IL,CL,TL,RL],r=(t=[]).concat.apply(t,Tn(n.map((function(e){return e.json}))));this.opMappers=r.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return Qe(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],i=[],o=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?i.push(e[n.name]):(null==n.input||0===n.input.length)&&o.push(e[n.name]),e}),{}),c=[],l=[],d={},f={};null!=n&&(d=this.mapSignatureEntries(n.inputs),f=this.mapSignatureEntries(n.outputs));var p=Object.keys(s);p.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e,n){var r=u(HD(e),3),a=r[0],i=r[2],o=s[a];if(null!=o.outputs){var c=o.outputs.indexOf(i);if(-1!==c){var l="".concat(a,":").concat(c);t.inputNames[n]=l}}t.inputs.push(o),o.children.push(t)}))})),0===Object.keys(f).length?p.forEach((function(e){var t=s[e];0===t.children.length&&l.push(t)})):Object.keys(f).forEach((function(e){var t=u(HD(e),1)[0],n=s[t];null!=n&&(n.signatureKey=f[e],l.push(n))})),Object.keys(d).length>0?Object.keys(d).forEach((function(e){var t=u(HD(e),1)[0],n=s[t];n&&(n.signatureKey=d[e],c.push(n))})):c=a;var h={};null!=e.library&&null!=e.library.function&&(h=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var m={nodes:s,inputs:c,outputs:l,weights:i,placeholders:a,signature:n,functions:h};return o.length>0&&(m.initNodes=o),m}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=WD(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.slice(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r,a=n.type;switch(n.type){case"string":void 0===(r=PL(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=PL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(r=GL(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=GL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(r=LL(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(r=LL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(r=HL(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=HL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(r=DL(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=DL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(r=KL(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=KL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(r=UL(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=UL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(r=qL(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=qL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(r=WL(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=WL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(r=jL(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=jL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(r=BL(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(r=BL(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:r,type:a},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var i=[],o=[];e.signature.inputArg.forEach((function(e){var t=u(HD(e.name),1)[0],n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:zL(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,i.push(n),a[t]=n})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=u(HD(e),3),i=r[0],o=r[2],s=a[i];if(null!=s.outputs){var c=s.outputs.indexOf(o);if(-1!==c){var l="".concat(i,":").concat(c);t.inputNames[n]=l}}t.inputs.push(s),s.children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=u(HD(s[e.name]),2),n=t[0],r=t[1],i=a[n];null!=i&&(i.defaultOutput=r,o.push(i))}));var c=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:r,placeholders:[],signature:c}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function FL(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=id().global;if("undefined"!=typeof t.atob)return t.atob(e);if("undefined"!=typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function PL(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?FL(a.s,r):n}function DL(e,t,n){var r=e[t];return r?r.b:n}function LL(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof a?a:parseInt(a,10)}function zL(e){switch("string"==typeof e&&(e=LD[e]),e){case 1:case 19:case 2:return"float32";case 3:case 9:case 6:case 4:return"int32";case 10:return"bool";case 7:return"string";default:return null}}function BL(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function WL(e,t,n){var r=e[t];return r&&r.type?zL(r.type):n}function jL(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return zL(e)})):n}function VL(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"==typeof e.size?e.size:parseInt(e.size,10)})):[]}function UL(e,t,n){var r=e[t];return r&&r.shape?VL(r.shape):n}function HL(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"==typeof e?e:parseInt(e,10)})):n}function GL(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return FL(e,r)})):n}function qL(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return VL(e)})):n}function KL(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var XL=function(){function e(t,n,r){var a=this;Ye(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return Qe(e,[{key:"getInput",value:function(e){return UD(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return UD(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return LL(this.node.rawAttrs,e,t);if(null!=n.s)return PL(this.node.rawAttrs,e,t);if(null!=n.b)return DL(this.node.rawAttrs,e,t);if(null!=n.shape)return UL(this.node.rawAttrs,e,t);if(null!=n.type)return WL(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return HL(this.node.rawAttrs,e,t);if(null!=n.list.s)return GL(this.node.rawAttrs,e,t);if(null!=n.list.shape)return qL(this.node.rawAttrs,e,t);if(null!=n.list.b)return KL(this.node.rawAttrs,e,t);if(null!=n.list.type)return jL(this.node.rawAttrs,e,t)}return t}}]),e}();function ZL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!=typeof e&&"number"!=typeof t){Fh.assert(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],i=t[r];Fh.assert(a<0||i<0||a===i,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function YL(e){return!("number"==typeof e||e.some((function(e){return e<0})))}function JL(e,t,n){var r=QL(e,n),a=!YL(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=QL(e.shape,r)})),!YL(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function QL(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var $L=function(){function e(t,n,r,a,i,o,s){Ye(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=Jx(0),Jg(this.idTensor)}return Qe(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){(null==e||!e.has(t.tensor.id))&&t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?)."));return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0===this.size()&&(null==this.elementShape||0===this.elementShape.length)&&(this.elementShape=t.shape),ZL(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,Jg(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,because the index size: ").concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return tv([],[0].concat(this.elementShape));var r=this.readMany(e);return ZL(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),$k(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return tv([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return ZL(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),Yb(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,Tn(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,fw(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), and the TensorArray is not marked as dynamically resizeable"));var i=0===r?0:t.size/r,o=[];Zg((function(){t=Kb(t,[1,r,i]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,e[s],i];o[s]=Kb(Qb(t,u,c),n.elementShape)}return o}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,o)}}]),e}(),ez=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;Ye(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));ZL(n,e.shape,"TensorList shape mismatch: "),Jg(e)})),this.idTensor=Jx(0),this.maxNumElements=a,Jg(this.idTensor)}return Qe(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e(Tn(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){(null==e||!e.has(t.id))&&t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));ZL(e,this.elementShape,"TensorList shape mismatch: ");var a=JL(this.elementShape,this.tensors,e);return Zg((function(){var e=n.tensors.map((function(e){return Kb(e,a)}));return $k(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=JL(this.elementShape,this.tensors,e),r=this.tensors.pop();return ZL(r.shape,e,"TensorList shape mismatch: "),Kb(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(ZL(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Jg(e),this.tensors.push(e)}},{key:"resize",value:function(t){if(t<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(t));if(-1!==this.maxNumElements&&t>this.maxNumElements)throw new Error("TensorListResize input size ".concat(t," is greater maxNumElement ").concat(this.maxNumElements,"."));var n=new e([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=t;for(var r=0;r<Math.min(this.tensors.length,t);++r)n.tensors[r]=this.tensors[r];return n}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));ZL(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=JL(this.elementShape,this.tensors,t);return Kb(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));ZL(this.elementShape,t.shape,"TensorList shape mismatch: "),Jg(t),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));ZL(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=JL(this.elementShape,this.tensors,n);return 0===e.length?tv([],[0].concat(a)):Zg((function(){var t=e.map((function(e){return Kb(r.tensors[e],a)}));return $k(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));ZL(this.elementShape,t,"TensorList shape mismatch: ");var r=JL(this.elementShape,this.tensors,t);return 0===this.size()?tv([],[0].concat(r)):Zg((function(){var e=n.tensors.map((function(e){return Kb(e,r)}));return Yb(e,0)}))}}]),e}();function tz(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));ZL(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=fw(e);return new ez(a,t,r)}function nz(e,t,n){return new ez([],e,t,n)}function rz(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,Tn(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var i=new ez([],n,e.dtype,r),o=fw(e,0);return t.forEach((function(e,t){i.setItem(e,o[t])})),i}function az(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var i=QL(e.shape.slice(1),n),o=0===r?0:e.size/r,s=Zg((function(){var n=[];e=Kb(e,[1,r,o]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,t[s],o];n[s]=Kb(Qb(e,u,c),i)}return e.dispose(),n})),u=new ez([],n,e.dtype,t.length),c=0;c<s.length;c++)u.setItem(c,s[c]);return u}var iz=function(){var e=ct(st().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,p,h,m,v,g,y,b,x,A,k,w,S,I,E,C,N,T,_,R,M,O,F,P,D,L,z,B,W,j,V,U,H,G,q,K,X,Z,Y,J,Q,$,ee,te,ne,re,ae,ie,oe,se,ue,ce,le,de,fe,pe,he,me,ve,ge,ye,be,xe,Ae,ke,we,Se,Ie,Ee,Ce,Ne,Te,_e,Re,Me,Oe,Fe,Pe,De,Le,ze,Be,We,je,Ve,Ue,He;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?12:"LoopCond"===e.t0?16:"Switch"===e.t0?18:"Merge"===e.t0?28:"Enter"===e.t0?33:"Exit"===e.t0?35:"NextIteration"===e.t0?37:"TensorArrayV3"===e.t0?39:"TensorArrayWriteV3"===e.t0?41:"TensorArrayReadV3"===e.t0?43:"TensorArrayGatherV3"===e.t0?45:"TensorArrayScatterV3"===e.t0?47:"TensorArrayConcatV3"===e.t0?49:"TensorArraySplitV3"===e.t0?51:"TensorArraySizeV3"===e.t0?53:"TensorArrayCloseV3"===e.t0?55:"TensorListSetItem"===e.t0?57:"TensorListGetItem"===e.t0?59:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?61:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?63:"TensorListGather"===e.t0?67:"TensorListStack"===e.t0?69:"TensorListFromTensor"===e.t0?71:"TensorListConcat"===e.t0||"TensorListConcatV2"===e.t0?73:"TensorListPushBack"===e.t0?75:"TensorListPopBack"===e.t0?77:"TensorListSplit"===e.t0?79:"TensorListLength"===e.t0?81:"TensorListResize"===e.t0?83:85;break;case 3:return a=VD("thenBranch",t,n,r),i=VD("elseBranch",t,n,r),o=VD("cond",t,n,r),s=VD("args",t,n,r),e.next=6,o.data();case 6:if(!e.sent[0]){e.next=10;break}e.t1=r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap),e.next=11;break;case 10:e.t1=r.functionMap[i].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap);case 11:return e.abrupt("return",e.t1);case 12:return e.delegateYield(st().mark((function e(){var a,i,o,s,u,c,l,d;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=VD("body",t,n,r),i=VD("cond",t,n,r),o=VD("args",t,n,r),e.next=5,r.functionMap[i].executeFunctionAsync(o,r.tensorArrayMap,r.tensorListMap);case 5:return s=e.sent,u=o.map((function(e){return e.id})),e.next=9,s[0].data();case 9:c=e.sent,s.forEach((function(e){!e.kept&&-1===u.indexOf(e.id)&&e.dispose()})),l=o,d=st().mark((function e(){var t,n,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l,e.next=3,r.functionMap[a].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 3:return l=e.sent,n=l.map((function(e){return e.id})),t.forEach((function(e){!e.kept&&-1===u.indexOf(e.id)&&-1===n.indexOf(e.id)&&e.dispose()})),e.next=8,r.functionMap[i].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 8:return o=e.sent,e.next=11,o[0].data();case 11:c=e.sent,o.forEach((function(e){!e.kept&&-1===u.indexOf(e.id)&&-1===n.indexOf(e.id)&&e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 13:if(!c[0]){e.next=17;break}return e.delegateYield(d(),"t0",15);case 15:e.next=13;break;case 17:return e.abrupt("return",{v:l});case 18:case"end":return e.stop()}}),e)}))(),"t2",13);case 13:if("object"!==typeof(u=e.t2)){e.next=16;break}return e.abrupt("return",u.v);case 16:return c=VD("pred",t,n,r),e.abrupt("return",[XD(c)]);case 18:return l=VD("pred",t,n,r),(d=VD("data",t,n,r)).kept||(d=XD(d)),e.next=22,l.data();case 22:if(!e.sent[0]){e.next=26;break}e.t3=[void 0,d],e.next=27;break;case 26:e.t3=[d,void 0];case 27:return e.abrupt("return",e.t3);case 28:if(f=t.inputNames.find((function(e){return void 0!==UD(e,n,r)})),!f){e.next=32;break}return p=UD(f,n,r),e.abrupt("return",[XD(p)]);case 32:return e.abrupt("return");case 33:return h=VD("frameName",t,n,r),m=VD("tensor",t,n,r),e.abrupt("return",(r.enterFrame(h),[XD(m)]));case 35:return v=VD("tensor",t,n,r),e.abrupt("return",(r.exitFrame(),[XD(v)]));case 37:return g=VD("tensor",t,n,r),e.abrupt("return",(r.nextIteration(),[XD(g)]));case 39:return y=VD("size",t,n,r),b=VD("dtype",t,n,r),x=VD("elementShape",t,n,r),A=VD("dynamicSize",t,n,r),k=VD("clearAfterRead",t,n,r),w=VD("identicalElementShapes",t,n,r),S=VD("name",t,n,r),I=new $L(S,b,y,x,w,A,k),e.abrupt("return",(r.addTensorArray(I),[I.idTensor,Jx(1)]));case 41:return E=VD("tensorArrayId",t,n,r),C=VD("index",t,n,r),N=VD("tensor",t,n,r),T=r.getTensorArray(E.id),e.abrupt("return",(T.write(C,N),[T.idTensor]));case 43:return _=VD("tensorArrayId",t,n,r),R=VD("index",t,n,r),e.abrupt("return",[r.getTensorArray(_.id).read(R)]);case 45:return M=VD("tensorArrayId",t,n,r),O=VD("indices",t,n,r),F=VD("dtype",t,n,r),e.abrupt("return",[r.getTensorArray(M.id).gather(O,F)]);case 47:return P=VD("tensorArrayId",t,n,r),D=VD("indices",t,n,r),L=VD("tensor",t,n,r),z=r.getTensorArray(P.id),e.abrupt("return",(z.scatter(D,L),[z.idTensor]));case 49:return B=VD("tensorArrayId",t,n,r),W=r.getTensorArray(B.id),j=VD("dtype",t,n,r),e.abrupt("return",[W.concat(j)]);case 51:return V=VD("tensorArrayId",t,n,r),U=VD("tensor",t,n,r),H=VD("lengths",t,n,r),G=r.getTensorArray(V.id),e.abrupt("return",(G.split(H,U),[G.idTensor]));case 53:return q=VD("tensorArrayId",t,n,r),K=r.getTensorArray(q.id),e.abrupt("return",[Jx(K.size(),"int32")]);case 55:return X=VD("tensorArrayId",t,n,r),Z=r.getTensorArray(X.id),e.abrupt("return",(Z.clearAndClose(),[Z.idTensor]));case 57:return Y=VD("tensorListId",t,n,r),J=VD("index",t,n,r),Q=VD("tensor",t,n,r),$=r.getTensorList(Y.id),e.abrupt("return",($.setItem(J,Q),[$.idTensor]));case 59:return ee=VD("tensorListId",t,n,r),te=VD("index",t,n,r),ne=VD("elementShape",t,n,r),re=VD("elementDType",t,n,r),e.abrupt("return",[r.getTensorList(ee.id).getItem(te,ne,re)]);case 61:return ae=VD("indices",t,n,r),ie=VD("tensor",t,n,r),oe=VD("elementShape",t,n,r),se=VD("numElements",t,n,r),ue=rz(ie,ae,oe,se),e.abrupt("return",(r.addTensorList(ue),[ue.idTensor]));case 63:return ce=VD("elementShape",t,n,r),le=VD("elementDType",t,n,r),de="TensorListReserve"===t.op?"numElements":"maxNumElements",fe=VD(de,t,n,r),pe=nz(ce,le,fe),e.abrupt("return",(r.addTensorList(pe),[pe.idTensor]));case 67:return he=VD("tensorListId",t,n,r),me=VD("indices",t,n,r),ve=VD("elementShape",t,n,r),ge=VD("elementDType",t,n,r),e.abrupt("return",[r.getTensorList(he.id).gather(me,ge,ve)]);case 69:return ye=VD("tensorListId",t,n,r),be=VD("elementShape",t,n,r),xe=VD("elementDType",t,n,r),Ae=VD("numElements",t,n,r),e.abrupt("return",[r.getTensorList(ye.id).stack(be,xe,Ae)]);case 71:return ke=VD("tensor",t,n,r),we=VD("elementShape",t,n,r),Se=VD("elementDType",t,n,r),Ie=tz(ke,we,Se),e.abrupt("return",(r.addTensorList(Ie),[Ie.idTensor]));case 73:return Ee=VD("tensorListId",t,n,r),Ce=r.getTensorList(Ee.id),Ne=VD("dtype",t,n,r),Te=VD("elementShape",t,n,r),e.abrupt("return",[Ce.concat(Ne,Te)]);case 75:return _e=VD("tensorListId",t,n,r),Re=VD("tensor",t,n,r),Me=r.getTensorList(_e.id),e.abrupt("return",(Me.pushBack(Re),[Me.idTensor]));case 77:return Oe=VD("tensorListId",t,n,r),Fe=VD("elementShape",t,n,r),Pe=VD("elementDType",t,n,r),e.abrupt("return",[r.getTensorList(Oe.id).popBack(Fe,Pe)]);case 79:return De=VD("tensor",t,n,r),Le=VD("elementShape",t,n,r),ze=VD("lengths",t,n,r),Be=az(De,ze,Le),e.abrupt("return",(r.addTensorList(Be),[Be.idTensor]));case 81:return We=VD("tensorListId",t,n,r),je=r.getTensorList(We.id),e.abrupt("return",[Jx(je.size(),"int32")]);case 83:return Ve=VD("tensorListId",t,n,r),Ue=VD("size",t,n,r),He=r.getTensorList(Ve.id).resize(Ue),e.abrupt("return",(r.addTensorList(He),[He.idTensor]));case 85:throw TypeError("Node type ".concat(t.op," is not implemented"));case 86:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function oz(e,t,n){var r=u(VD("fusedOps",e,t,n),2),a=r[0],i=r[1],o="biasadd"===a,s=!o,c="prelu"===i,l="fusedbatchnorm"===a,d=VD("numArgs",e,t,n);if(o){if(c&&2!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&o&&1!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var f=VD("strides",e,t,n),p=KD(e,t,n),h=VD("dataFormat",e,t,n).toUpperCase(),m=VD("dilations",e,t,n),v=u(VD("args",e,t,n),2),g=v[0],y=v[1];return s&&(y=g,g=void 0),{stride:f,pad:p,dataFormat:h,dilations:m,biasArg:g,preluArg:y,activationFunc:i,leakyreluAlpha:VD("leakyreluAlpha",e,t,n)}}function sz(e,t,n){return{boxes:VD("boxes",e,t,n),scores:VD("scores",e,t,n),maxOutputSize:VD("maxOutputSize",e,t,n),iouThreshold:VD("iouThreshold",e,t,n),scoreThreshold:VD("scoreThreshold",e,t,n),softNmsSigma:VD("softNmsSigma",e,t,n)}}var uz=function(){var e=ct(st().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,p,h,m,v,g,y,b,x,A,k,w,S,I,E,C;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?3:"NonMaxSuppressionV4"===e.t0?14:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?25:"Where"===e.t0?30:"ListDiff"===e.t0?36:37;break;case 3:return a=sz(t,n,r),i=a.boxes,o=a.scores,s=a.maxOutputSize,u=a.iouThreshold,c=a.scoreThreshold,l=a.softNmsSigma,e.next=12,HS.nonMaxSuppressionWithScoreAsync(i,o,s,u,c,l);case 12:return d=e.sent,e.abrupt("return",[d.selectedIndices,d.selectedScores]);case 14:return f=sz(t,n,r),p=f.boxes,h=f.scores,m=f.maxOutputSize,v=f.iouThreshold,g=f.scoreThreshold,y=VD("padToMaxOutputSize",t,n,r),e.next=23,HS.nonMaxSuppressionPaddedAsync(p,h,m,v,g,y);case 23:return b=e.sent,e.abrupt("return",[b.selectedIndices,b.validOutputs]);case 25:return x=sz(t,n,r),A=x.boxes,k=x.scores,w=x.maxOutputSize,S=x.iouThreshold,I=x.scoreThreshold,e.next=28,HS.nonMaxSuppressionAsync(A,k,w,S,I);case 28:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 30:return E=lg(VD("condition",t,n,r),"bool"),e.next=33,gw(E);case 33:return e.t2=e.sent,C=[e.t2],e.abrupt("return",(E.dispose(),C));case 36:return e.abrupt("return",Lk(VD("x",t,n,r),VD("y",t,n,r)));case 37:throw TypeError("Node type ".concat(t.op," is not implemented"));case 38:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),cz=function(){function e(t,n){Ye(this,e),this.keyDType=t,this.valueDType=n,this.handle=Jx(0),this.tensorMap=new Map,Jg(this.handle)}return Qe(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return Jx(this.size(),"int32")}},{key:"import",value:function(){var e=ct(st().mark((function e(t,n){var r,a=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",(this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),Zg((function(){var e=fw(n),t=r.length,i=e.length;Fh.assert(t===i,(function(){return"The number of elements doesn't match, keys has ".concat(t," elements, the values has ").concat(i," elements.")}));for(var o=0;o<t;o++){var s=r[o],u=e[o];Jg(u),a.tensorMap.set(s,u)}return a.handle}))));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=ct(st().mark((function e(t,n){var r,a=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",Zg((function(){for(var e=[],t=0;t<r.length;t++){var i=r[t],o=a.findWithDefault(i,n);e.push(o)}return $k(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ").concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ").concat(t.dtype))}}]),e}(),lz=function(){var e=ct(st().mark((function e(t,n,r,a){var i,o,s,u,c,l,d,f,p,h;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?5:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?10:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?15:17;break;case 3:return i=VD("keyDType",t,n,r),o=VD("valueDType",t,n,r),s=new cz(i,o),e.abrupt("return",(a.addHashTable(t.name,s),[s.handle]));case 5:return u=VD("tableHandle",t,n,r,a),c=VD("keys",t,n,r),l=VD("values",t,n,r),e.next=8,a.getHashTableById(u.id).import(c,l);case 8:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 10:return d=VD("tableHandle",t,n,r,a),f=VD("keys",t,n,r),p=VD("defaultValue",t,n,r),e.next=13,a.getHashTableById(d.id).find(f,p);case 13:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 15:return h=VD("tableHandle",t,n,r,a),e.abrupt("return",[a.getHashTableById(h.id).tensorSize()]);case 17:throw TypeError("Node type ".concat(t.op," is not implemented"));case 18:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}();function dz(e,t,n,r){var a=function(e,t,n){switch(e.category){case"arithmetic":return Zg((function(){return function(e,t,n){switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[hb(VD("a",e,t,n),VD("b",e,t,n))];case"AddN":return[Ab(VD("tensors",e,t,n))];case"FloorMod":case"Mod":return[$A(VD("a",e,t,n),VD("b",e,t,n))];case"Mul":return[gb(VD("a",e,t,n),VD("b",e,t,n))];case"RealDiv":case"Div":return[vb(VD("a",e,t,n),VD("b",e,t,n))];case"DivNoNan":return[Px(VD("a",e,t,n),VD("b",e,t,n))];case"FloorDiv":return[mb(VD("a",e,t,n),VD("b",e,t,n))];case"Sub":return[OA(VD("a",e,t,n),VD("b",e,t,n))];case"Minimum":return[JA(VD("a",e,t,n),VD("b",e,t,n))];case"Maximum":return[qA(VD("a",e,t,n),VD("b",e,t,n))];case"Pow":return[Yx(VD("a",e,t,n),VD("b",e,t,n))];case"SquaredDifference":return[Jk(VD("a",e,t,n),VD("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"basic_math":return Zg((function(){return function(e,t,n){switch(e.op){case"Abs":case"ComplexAbs":return[yb(VD("x",e,t,n))];case"Acos":return[bb(VD("x",e,t,n))];case"Acosh":return[xb(VD("x",e,t,n))];case"Asin":return[Eb(VD("x",e,t,n))];case"Asinh":return[Cb(VD("x",e,t,n))];case"Atan":return[Nb(VD("x",e,t,n))];case"Atan2":return[Tb(VD("x",e,t,n),VD("y",e,t,n))];case"Atanh":return[_b(VD("x",e,t,n))];case"Ceil":return[lx(VD("x",e,t,n))];case"Complex":return[$m(VD("real",e,t,n),VD("imag",e,t,n))];case"Cos":return[wx(VD("x",e,t,n))];case"Cosh":return[Sx(VD("x",e,t,n))];case"Elu":return[zx(VD("x",e,t,n))];case"Erf":return[Bx(VD("x",e,t,n))];case"Exp":return[aA(VD("x",e,t,n))];case"Expm1":return[oA(VD("x",e,t,n))];case"Floor":return[lA(VD("x",e,t,n))];case"Log":return[kA(VD("x",e,t,n))];case"Log1p":return[wA(VD("x",e,t,n))];case"Imag":return[uy(VD("x",e,t,n))];case"Neg":return[cy(VD("x",e,t,n))];case"Reciprocal":return[Sk(VD("x",e,t,n))];case"Real":return[ly(VD("x",e,t,n))];case"Relu":return[Ik(VD("x",e,t,n))];case"Round":return[Mk(VD("x",e,t,n))];case"Selu":return[Fk(VD("x",e,t,n))];case"Sigmoid":return[Jb(VD("x",e,t,n))];case"Sin":return[Bk(VD("x",e,t,n))];case"Sign":return[zk(VD("x",e,t,n))];case"Sinh":return[Wk(VD("x",e,t,n))];case"Softplus":return[RA(VD("x",e,t,n))];case"Sqrt":return[Qx(VD("x",e,t,n))];case"Square":return[$x(VD("x",e,t,n))];case"Tanh":return[$b(VD("x",e,t,n))];case"Tan":return[nw(VD("x",e,t,n))];case"ClipByValue":return[dx(VD("x",e,t,n),VD("clipValueMin",e,t,n),VD("clipValueMax",e,t,n))];case"Relu6":return[Ek(VD("x",e,t,n))];case"Rsqrt":return[Ok(UD(e.inputNames[0],t,n))];case"Prod":return[hk(VD("x",e,t,n),VD("axes",e,t,n))];case"LeakyRelu":return[gA(VD("x",e,t,n),VD("alpha",e,t,n))];case"Prelu":return[pk(VD("x",e,t,n),VD("alpha",e,t,n))];case"IsNan":return[vA(UD(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"control":return iz(e,t,n);case"convolution":return Zg((function(){return function(e,t,n){switch(e.op){case"Conv1D":var r=VD("stride",e,t,n),a=VD("pad",e,t,n),i=VD("dataFormat",e,t,n).toUpperCase(),o=VD("dilation",e,t,n);return[gx(VD("x",e,t,n),VD("filter",e,t,n),r,a,i,o)];case"Conv2D":var s=VD("strides",e,t,n),u=KD(e,t,n),c=VD("dataFormat",e,t,n).toUpperCase(),l=VD("dilations",e,t,n);return[vx(VD("x",e,t,n),VD("filter",e,t,n),[s[1],s[2]],u,c,[l[1],l[2]])];case"_FusedConv2D":var d=oz(e,t,n),f=d.stride,p=d.pad,h=d.dataFormat,m=d.dilations,v=d.biasArg,g=d.preluArg,y=d.activationFunc,b=d.leakyreluAlpha;return[_w.conv2d({x:VD("x",e,t,n),filter:VD("filter",e,t,n),strides:[f[1],f[2]],pad:p,dataFormat:h,dilations:[m[1],m[2]],bias:v,activation:y,preluActivationWeights:g,leakyreluAlpha:b})];case"FusedDepthwiseConv2dNative":var x=oz(e,t,n),A=x.stride,k=x.pad,w=x.dataFormat,S=x.dilations,I=x.biasArg,E=x.preluArg,C=x.activationFunc,N=x.leakyreluAlpha;return[_w.depthwiseConv2d({x:VD("x",e,t,n),filter:VD("filter",e,t,n),strides:[A[1],A[2]],pad:k,dataFormat:w,dilations:[S[1],S[2]],bias:I,activation:C,preluActivationWeights:E,leakyreluAlpha:N})];case"Conv2DBackpropInput":case"Conv2dTranspose":var T=VD("outputShape",e,t,n),_=VD("strides",e,t,n),R=KD(e,t,n);return[bx(VD("x",e,t,n),VD("filter",e,t,n),T,[_[1],_[2]],R)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var M=VD("strides",e,t,n),O=KD(e,t,n),F=VD("dilations",e,t,n),P=VD("dataFormat",e,t,n).toUpperCase();return[Tx(VD("input",e,t,n),VD("filter",e,t,n),[M[1],M[2]],O,P,[F[1],F[2]])];case"Conv3D":var D=VD("strides",e,t,n),L=VD("pad",e,t,n),z=VD("dataFormat",e,t,n).toUpperCase(),B=VD("dilations",e,t,n);return[xx(VD("x",e,t,n),VD("filter",e,t,n),[D[1],D[2],D[3]],L,z,[B[1],B[2],B[3]])];case"AvgPool":var W=VD("strides",e,t,n),j=VD("pad",e,t,n),V=VD("kernelSize",e,t,n);return[Xb(VD("x",e,t,n),[V[1],V[2]],[W[1],W[2]],j)];case"MaxPool":var U=VD("strides",e,t,n),H=VD("pad",e,t,n),G=VD("kernelSize",e,t,n);return[UA(VD("x",e,t,n),[G[1],G[2]],[U[1],U[2]],H)];case"MaxPoolWithArgmax":var q=VD("strides",e,t,n),K=VD("pad",e,t,n),X=VD("kernelSize",e,t,n),Z=VD("includeBatchInIndex",e,t,n),Y=GA(VD("x",e,t,n),[X[1],X[2]],[q[1],q[2]],K,Z);return[Y.result,Y.indexes];case"AvgPool3D":var J=VD("strides",e,t,n),Q=VD("pad",e,t,n),$=VD("kernelSize",e,t,n);return[Zb(VD("x",e,t,n),[$[1],$[2],$[3]],[J[1],J[2],J[3]],Q)];case"MaxPool3D":var ee=VD("strides",e,t,n),te=VD("pad",e,t,n),ne=VD("kernelSize",e,t,n);return[HA(VD("x",e,t,n),[ne[1],ne[2],ne[3]],[ee[1],ee[2],ee[3]],te)];case"Dilation2D":var re=VD("strides",e,t,n),ae=VD("pad",e,t,n),ie=VD("dilations",e,t,n),oe=re[1],se=re[2],ue=ie[1],ce=ie[2];return[Rx(VD("x",e,t,n),VD("filter",e,t,n),[oe,se],ae,[ue,ce],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"creation":return Zg((function(){return function(e,t,n){switch(e.op){case"Fill":var r=VD("shape",e,t,n),a=VD("dtype",e,t,n);return[cA(r,VD("value",e,t,n),a)];case"LinSpace":return[xA(VD("start",e,t,n),VD("stop",e,t,n),VD("num",e,t,n))];case"Multinomial":var i=VD("logits",e,t,n),o=VD("numSamples",e,t,n),s=VD("seed",e,t,n);return[nk(i,o,s)];case"OneHot":var u=VD("indices",e,t,n),c=VD("depth",e,t,n),l=VD("onValue",e,t,n),d=VD("offValue",e,t,n);return[Wg(u,c,l,d)];case"Ones":return[ZA(VD("shape",e,t,n),VD("dtype",e,t,n))];case"OnesLike":return[ak(VD("x",e,t,n))];case"RandomUniform":return[kk(VD("shape",e,t,n),VD("minval",e,t,n),VD("maxval",e,t,n),VD("dtype",e,t,n))];case"Range":return[wk(VD("start",e,t,n),VD("stop",e,t,n),VD("step",e,t,n),VD("dtype",e,t,n))];case"TruncatedNormal":var f=VD("shape",e,t,n),p=VD("mean",e,t,n),h=VD("stdDev",e,t,n),m=VD("seed",e,t,n);return[cw(f,p,h,VD("dtype",e,t,n),m)];case"Zeros":return[XA(VD("shape",e,t,n),VD("dtype",e,t,n))];case"ZerosLike":return[Fx(VD("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"dynamic":return uz(e,t,n);case"evaluation":return Zg((function(){return function(e,t,n){switch(e.op){case"LowerBound":return[VA(VD("sortedSequence",e,t,n),VD("values",e,t,n))];case"TopKV2":var r=VD("x",e,t,n),a=VD("k",e,t,n),i=VD("sorted",e,t,n),o=uw(r,a,i);return[o.values,o.indices];case"UpperBound":return[pw(VD("sortedSequence",e,t,n),VD("values",e,t,n))];case"Unique":var s=VD("x",e,t,n),u=lw(s);return[u.values,u.indices];case"UniqueV2":var c=VD("x",e,t,n),l=VD("axis",e,t,n),d=lw(c,l);return[d.values,d.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"image":return Zg((function(){return function(e,t,n){switch(e.op){case"ResizeBilinear":var r=VD("images",e,t,n),a=VD("size",e,t,n),i=VD("alignCorners",e,t,n),o=VD("halfPixelCenters",e,t,n);return[HS.resizeBilinear(r,[a[0],a[1]],i,o)];case"ResizeNearestNeighbor":var s=VD("images",e,t,n),u=VD("size",e,t,n),c=VD("alignCorners",e,t,n),l=VD("halfPixelCenters",e,t,n);return[HS.resizeNearestNeighbor(s,[u[0],u[1]],c,l)];case"CropAndResize":var d=VD("image",e,t,n),f=VD("boxes",e,t,n),p=VD("boxInd",e,t,n),h=VD("cropSize",e,t,n),m=VD("method",e,t,n),v=VD("extrapolationValue",e,t,n);return[HS.cropAndResize(d,f,p,h,m,v)];case"ImageProjectiveTransformV3":var g=VD("images",e,t,n),y=VD("transforms",e,t,n),b=VD("outputShape",e,t,n),x=VD("fillValue",e,t,n),A=VD("interpolation",e,t,n),k=VD("fillMode",e,t,n);return[HS.transform(g,y,A.toLowerCase(),k.toLowerCase(),x,b)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"graph":return Zg((function(){return function(e,t,n){switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var r=VD("default",e,t,n);return[UD(e.name,t,n)||r];case"Placeholder":return[UD(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[XD(VD("x",e,t,n))];case"IdentityN":return VD("x",e,t,n).map((function(e){return XD(e)}));case"Shape":return[rw(VD("x",e,t,n).shape,"int32")];case"ShapeN":return VD("x",e,t,n).map((function(e){return rw(e.shape)}));case"Size":return[Jx(VD("x",e,t,n).size,"int32")];case"Rank":return[Jx(VD("x",e,t,n).rank,"int32")];case"NoOp":return[Jx(1)];case"Print":var a=VD("x",e,t,n),i=VD("data",e,t,n),o=VD("message",e,t,n),s=VD("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(var u=0;u<i.length;u++)console.log(Array.prototype.slice.call(i[u].dataSync()).slice(0,s));return[a];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"logical":return Zg((function(){return function(e,t,n){switch(e.op){case"Equal":return[Mx(VD("a",e,t,n),VD("b",e,t,n))];case"NotEqual":return[rk(VD("a",e,t,n),VD("b",e,t,n))];case"Greater":return[fA(VD("a",e,t,n),VD("b",e,t,n))];case"GreaterEqual":return[pA(VD("a",e,t,n),VD("b",e,t,n))];case"Less":return[yA(VD("a",e,t,n),VD("b",e,t,n))];case"LessEqual":return[bA(VD("a",e,t,n),VD("b",e,t,n))];case"LogicalAnd":return[DA(VD("a",e,t,n),VD("b",e,t,n))];case"LogicalNot":return[LA(VD("a",e,t,n))];case"LogicalOr":return[zA(VD("a",e,t,n),VD("b",e,t,n))];case"Select":case"SelectV2":return[Ox(VD("condition",e,t,n),VD("a",e,t,n),VD("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"matrices":return Zg((function(){return function(e,t,n){switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[Bg(VD("a",e,t,n),VD("b",e,t,n),VD("transposeA",e,t,n),VD("transposeB",e,t,n))];case"Einsum":return[Lx.apply(void 0,[VD("equation",e,t,n)].concat(Tn(VD("tensors",e,t,n))))];case"Transpose":return[dy(VD("x",e,t,n),VD("perm",e,t,n))];case"_FusedMatMul":var r=u(VD("fusedOps",e,t,n),2),a=r[0],i=r[1],o="biasadd"===a,s="prelu"===i,c=VD("numArgs",e,t,n),l=VD("leakyreluAlpha",e,t,n);if(o){if(s&&2!==c)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==c)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var d=u(VD("args",e,t,n),2),f=d[0],p=d[1];return[_w.matMul({a:VD("a",e,t,n),b:VD("b",e,t,n),transposeA:VD("transposeA",e,t,n),transposeB:VD("transposeB",e,t,n),bias:f,activation:i,preluActivationWeights:p,leakyreluAlpha:l})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"normalization":return Zg((function(){return function(e,t,n){switch(e.op){case"EuclideanNorm":return[rA(VD("x",e,t,n),VD("axis",e,t,n),VD("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[rx(VD("x",e,t,n),VD("mean",e,t,n),VD("variance",e,t,n),VD("offset",e,t,n),VD("scale",e,t,n),VD("epsilon",e,t,n))];case"LRN":return[AA(VD("x",e,t,n),VD("radius",e,t,n),VD("bias",e,t,n),VD("alpha",e,t,n),VD("beta",e,t,n))];case"Softmax":return[Gk(VD("x",e,t,n))];case"LogSoftmax":return[FA(VD("x",e,t,n))];case"SparseToDense":return[ww(VD("sparseIndices",e,t,n),VD("outputShape",e,t,n),VD("sparseValues",e,t,n),VD("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"reduction":return Zg((function(){return function(e,t,n){switch(e.op){case"Max":var r=VD("axis",e,t,n),a=VD("keepDims",e,t,n);return[Xx(VD("x",e,t,n),r,a)];case"Mean":var i=VD("axis",e,t,n),o=VD("keepDims",e,t,n);return[KA(VD("x",e,t,n),i,o)];case"Min":var s=VD("axis",e,t,n),u=VD("keepDims",e,t,n);return[Zx(VD("x",e,t,n),s,u)];case"Sum":var c=VD("axis",e,t,n),l=VD("keepDims",e,t,n);return[eA(VD("x",e,t,n),c,l)];case"All":var d=VD("axis",e,t,n),f=VD("keepDims",e,t,n);return[kb(VD("x",e,t,n),d,f)];case"Any":var p=VD("axis",e,t,n),h=VD("keepDims",e,t,n);return[wb(VD("x",e,t,n),p,h)];case"ArgMax":var m=VD("axis",e,t,n);return[Sb(VD("x",e,t,n),m)];case"ArgMin":var v=VD("axis",e,t,n);return[Ib(VD("x",e,t,n),v)];case"Prod":var g=VD("axis",e,t,n),y=VD("keepDims",e,t,n);return[hk(VD("x",e,t,n),g,y)];case"Cumprod":var b=VD("axis",e,t,n),x=VD("exclusive",e,t,n),A=VD("reverse",e,t,n);return[Ix(VD("x",e,t,n),b,x,A)];case"Cumsum":var k=VD("axis",e,t,n),w=VD("exclusive",e,t,n),S=VD("reverse",e,t,n);return[Ex(VD("x",e,t,n),k,w,S)];case"Bincount":var I=VD("x",e,t,n),E=VD("weights",e,t,n),C=VD("size",e,t,n);return[sx(I,E,C)];case"DenseBincount":var N=VD("x",e,t,n),T=VD("weights",e,t,n),_=VD("size",e,t,n),R=VD("binaryOutput",e,t,n);return[Cx(N,T,_,R)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"slice_join":return Zg((function(){return function(e,t,n){switch(e.op){case"ConcatV2":case"Concat":var r=VD("n",e,t,n),a=VD("axis",e,t,n),i=VD("tensors",e,t,n);return i=i.slice(0,r),[Yb(i,a)];case"Gather":var o=VD("x",e,t,n),s=VD("indices",e,t,n);return[dA(o,lg(s,"int32"),0)];case"GatherV2":var u=VD("axis",e,t,n),c=VD("batchDims",e,t,n),l=VD("x",e,t,n),d=VD("indices",e,t,n);return[dA(l,lg(d,"int32"),u,c)];case"Reverse":for(var f=VD("dims",e,t,n),p=[],h=0;h<f.length;h++)f[h]&&p.push(h);var m=VD("x",e,t,n);return[Ck(m,p)];case"ReverseV2":var v=VD("axis",e,t,n),g=VD("x",e,t,n);return[Ck(g,v)];case"Slice":var y=VD("begin",e,t,n),b=VD("size",e,t,n);return[Qb(VD("x",e,t,n),y,b)];case"StridedSlice":var x=VD("begin",e,t,n),A=VD("end",e,t,n),k=VD("strides",e,t,n),w=VD("beginMask",e,t,n),S=VD("endMask",e,t,n),I=VD("ellipsisMask",e,t,n),E=VD("newAxisMask",e,t,n),C=VD("shrinkAxisMask",e,t,n),N=VD("x",e,t,n);return[tw(N,x,A,k,w,S,I,E,C)];case"Pack":return Zg((function(){var r=VD("axis",e,t,n),a=VD("tensors",e,t,n),i=a[0].shape,o=Qk(a[0]).shape,s=a.map((function(e){var t=Fh.arraysEqual(e.shape,i);if(!t&&!Fh.arraysEqual(Qk(e).shape,o))throw new Error("the input tensors shape does not match");return t?e:Kb(e,i)}));return[$k(s,r)]}));case"Unpack":var T=VD("axis",e,t,n),_=VD("tensor",e,t,n);return fw(_,T);case"Tile":var R=VD("reps",e,t,n);return[sA(VD("x",e,t,n),R)];case"Split":case"SplitV":var M=VD("axis",e,t,n),O=VD("numOrSizeSplits",e,t,n),F=VD("x",e,t,n);return Zk(F,O,M);case"ScatterNd":var P=VD("indices",e,t,n),D=VD("values",e,t,n),L=VD("shape",e,t,n);return[Aw(P,D,L)];case"GatherNd":var z=VD("x",e,t,n),B=VD("indices",e,t,n);return[Sw(z,B)];case"SparseToDense":var W=VD("sparseIndices",e,t,n),j=VD("outputShape",e,t,n),V=VD("sparseValues",e,t,n),U=VD("defaultValue",e,t,n);return[ww(W,V,j,V.dtype===U.dtype?U:lg(U,V.dtype))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"sparse":return Zg((function(){return function(e,t,n){switch(e.op){case"SparseFillEmptyRows":var r=KS.sparseFillEmptyRows(VD("indices",e,t,n),VD("values",e,t,n),VD("denseShape",e,t,n),VD("defaultValue",e,t,n));return[r.outputIndices,r.outputValues,r.emptyRowIndicator,r.reverseIndexMap];case"SparseReshape":var a=KS.sparseReshape(VD("inputIndices",e,t,n),VD("inputShape",e,t,n),VD("newShape",e,t,n));return[a.outputIndices,a.outputShape];case"SparseSegmentMean":return[KS.sparseSegmentMean(VD("data",e,t,n),VD("indices",e,t,n),VD("segmentIds",e,t,n))];case"SparseSegmentSum":return[KS.sparseSegmentSum(VD("data",e,t,n),VD("indices",e,t,n),VD("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"spectral":return Zg((function(){return function(e,t,n){switch(e.op){case"FFT":return[qk(VD("x",e,t,n))];case"IFFT":return[Kk(VD("x",e,t,n))];case"RFFT":return[Yk(VD("x",e,t,n))];case"IRFFT":return[Xk(VD("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"string":return Zg((function(){return function(e,t,n){switch(e.op){case"StringNGrams":var r=XS.stringNGrams(VD("data",e,t,n),VD("dataSplits",e,t,n),VD("separator",e,t,n),VD("nGramWidths",e,t,n),VD("leftPad",e,t,n),VD("rightPad",e,t,n),VD("padWidth",e,t,n),VD("preserveShortSequences",e,t,n));return[r.nGrams,r.nGramsSplits];case"StringSplit":var a=XS.stringSplit(VD("input",e,t,n),VD("delimiter",e,t,n),VD("skipEmpty",e,t,n));return[a.indices,a.values,a.shape];case"StringToHashBucketFast":return[XS.stringToHashBucketFast(VD("input",e,t,n),VD("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"transformation":return Zg((function(){return function(e,t,n){switch(e.op){case"Cast":return[lg(VD("x",e,t,n),VD("dtype",e,t,n))];case"ExpandDims":var r=VD("axis",e,t,n);return[iA(VD("x",e,t,n),r)];case"Squeeze":var a=VD("axis",e,t,n);return[Qk(VD("x",e,t,n),a)];case"Reshape":return[Kb(VD("x",e,t,n),VD("shape",e,t,n))];case"MirrorPad":return[QA(VD("x",e,t,n),VD("padding",e,t,n),VD("mode",e,t,n))];case"PadV2":case"Pad":return[ok(VD("x",e,t,n),VD("padding",e,t,n),VD("constantValue",e,t,n))];case"SpaceToBatchND":var i=VD("blockShape",e,t,n),o=VD("paddings",e,t,n);return[dk(VD("x",e,t,n),i,o)];case"BatchToSpaceND":var s=VD("blockShape",e,t,n),u=VD("crops",e,t,n);return[tx(VD("x",e,t,n),s,u)];case"DepthToSpace":var c=VD("blockSize",e,t,n),l=VD("dataFormat",e,t,n).toUpperCase();return[Nx(VD("x",e,t,n),c,l)];case"BroadcastTo":return[cx(VD("x",e,t,n),VD("shape",e,t,n))];case"BroadcastArgs":return[ux(VD("s0",e,t,n),VD("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"hash_table":return lz(e,t,n,r);case"custom":var a=WD(e.op);if(a&&a.customExecutor)return a.customExecutor(new XL(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()"))}}(e,t,n);return Fh.isPromise(a)?a.then((function(e){return[].concat(e)})):[].concat(a)}var fz=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Ye(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return Qe(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function pz(e,t,n,r){var a=new Set,i=[],o=null,s=null,u=new Set,c=Object.keys(e).map((function(e){return qD(e)[0]})),l=[];null!=r&&(l=r.map((function(e){return qD(e.name)[0]})));for(var d=Tn(t);d.length>0;){var f=d.pop();if((gz(f)||yz(f)||bz(f))&&null==o&&(s=(o=f).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(f.name),null==n[f.name]&&-1===c.indexOf(f.name)&&-1===l.indexOf(f.name)){if(0===f.inputs.length){i.push(f.name);continue}f.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),d.push(e))}))}}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}var hz=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],mz=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],vz=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function gz(e){return hz.indexOf(e.op)>=0}function yz(e){return mz.indexOf(e.op)>=0}function bz(e){return vz.indexOf(e.op)>=0}var xz=function(){function e(t,n){var r=this;Ye(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}return Qe(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,Tn(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(e,t){var n=pz(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,i=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has the dynamic op '").concat(a.op,"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [").concat(i,"]"));if(r.length>0){var o=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(o,"] from the provided inputs [").concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(e,t,n){var r=n.usedNodes,a=n.inputs,i=[],o=Object.keys(a).map((function(e){return qD(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;o.forEach((function(e){r.has(e.name)&&i.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&i.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&i.push(e)}));for(var u=new Set,c=[];i.length>0;){var l=i.pop();u.add(l.name),t[l.name]||c.push(l),l.children.forEach((function(e){!u.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return u.has(e.name)}))&&i.push(e)}))}return c}(this.graph,this.weightMap,n)}},{key:"execute",value:function(e,t){var n=this;e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[qD(e)[0]]})),i=t.map((function(e){return qD(e)[0]})),o=i.map((function(e){return n.graph.nodes[e]}));this.resetIntermediateTensors(),0===o.length&&(o=this._outputs);var s=this.getCompilationKey(a,o),c=this.compiledMap.get(s);null==c&&(c=this.compile(e,o),this.compiledMap.set(s,c));var l={},d={};return Zg((function(){var r=new fz(n.weightMap,l,d,n.functionExecutorMap),a=Ze({},n.weightMap);Object.keys(e).forEach((function(t){var n=u(qD(t),2),r=n[0],i=[];i[n[1]]=e[t],a[r]=i}));for(var o=n.getFrozenTensorIds(a),s={},f=0;f<c.length;f++){var p=c[f];if(!a[p.name]){var h=dz(p,a,r,n._resourceManager);if(Fh.isPromise(h))throw new Error("The execution of the op '".concat(p.op,"' returned a promise. Please use model.executeAsync() instead."));a[p.name]=h,n.checkTensorForDisposal(p.name,p,a,r,o,i,s)}}return null==n.parent&&r.dispose(o),t.map((function(e){return UD(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,i,o){var s=this;"control"===t.category||-1!==i.indexOf(e)||(n[e].forEach((function(e){null!=e&&(o[e.id]=(o[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var i=function(e,t,n){return t[GD(e,n.currentContextId)]}(e.name,n,r);null!=i&&i.forEach((function(e){if(e&&!e.kept&&!a.has(e.id)){var n=o[e.id];if(1===n){if(s.keepTensorForDebug){var i=u(HD(t.name,r),2),c=i[0],l=i[1];s.intermediateTensors[c]||(s.intermediateTensors[c]=[]),s.intermediateTensors[c][l]=e}else e.dispose();delete o[e.id]}else null!=n&&o[e.id]--}}))}})))}},{key:"executeAsync",value:function(){var e=ct(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"disposeIntermediateTensors",value:function(){var e=this;!this.intermediateTensors||(Object.keys(this.intermediateTensors).forEach((function(t){return e.intermediateTensors[t].forEach((function(e){return e.dispose()}))})),this.disposeTensorsMap())}},{key:"disposeTensorsMap",value:function(){var e=this;!this.tensorsMap||Object.keys(this.tensorsMap).forEach((function(t){e.tensorsMap[t].forEach((function(t){t&&!t.kept&&!t.isDisposed&&!e.keepIds.has(t.id)&&t.dispose()}))}))}},{key:"getIntermediateTensors",value:function(){return this.tensorsMap}},{key:"resetIntermediateTensors",value:function(){for(var e in this.intermediateTensors)this.intermediateTensors[e].forEach((function(e){return e.dispose()})),delete this.intermediateTensors[e]}},{key:"_executeAsync",value:function(){var e=ct(st().mark((function e(t,n){var r,a,i,o,s,u,c,l=this,d=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=d.length>2&&void 0!==d[2]&&d[2],a=d.length>3&&void 0!==d[3]?d[3]:{},i=d.length>4&&void 0!==d[4]?d[4]:{},r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=id().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(Lo){console.warn(Lo.message)}return this.resetIntermediateTensors(),o=new fz(this.weightMap,a,i,this.functionExecutorMap),e.next=9,this.executeWithControlFlow(t,o,n,r);case 9:return this.tensorsMap=e.sent,s=n.map((function(e){return UD(e,l.tensorsMap,o)})),u=s.map((function(e){return e.id})),c=Object.keys(t).map((function(e){return t[e].id})),e.abrupt("return",(this.keepIds=new Set([].concat(Tn(u),Tn(c),Tn(this.weightIds))),this.keepTensorForDebug||this.disposeTensorsMap(),null==this.parent&&o.dispose(this.keepIds),s));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var e=ct(st().mark((function e(t,n,r){var a,i=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[i.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var e=ct(st().mark((function e(t,n,r,a){var i,o,s,c,l,d,f,p,h,m,v,g,y,b,x,A,k,w=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object.keys(t),o=i.map((function(e){return w.graph.nodes[qD(e)[0]]})),s=r.map((function(e){return qD(e)[0]})),c=s.map((function(e){return w.graph.nodes[e]})),0===c.length&&(c=this._outputs),l=pz(t,c,this.weightMap,this._initNodes),d=l.usedNodes,f=l.missingInputs,p=l.dynamicNode,h=l.syncInputs,m=[].concat(Tn(o),Tn(this.graph.weights),Tn(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),v=Ze({},this.weightMap),Object.keys(t).forEach((function(e){var n=u(qD(e),2),r=n[0],a=[];a[n[1]]=t[e],v[r]=a})),g={},y=this.getFrozenTensorIds(v),b={};case 5:if(!(m.length>0)){e.next=11;break}return x=this.processStack(o,m,n,v,b,y,s,g,d),e.next=9,Promise.all(x);case 9:e.next=5;break;case 11:if(null==p&&!a&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),A=c.filter((function(e){return!gz(e)&&!UD(e.name,v,n)})).map((function(e){return e.name})),!(A.length>0)){e.next=16;break}throw k="",null!=p&&(k="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [".concat(h,"]")),new Error("Cannot compute the outputs [".concat(A,"] from the provided inputs [").concat(i,"]. Consider providing the following inputs: [").concat(f,"]. ").concat(k));case 16:return e.abrupt("return",v);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"processStack",value:function(e,t,n,r,a,i,o,s,c){for(var l=this,d=[],f=function(){var e,f=t.pop();n.currentContext=f.contexts;var p="";if("Enter"===f.node.op&&VD("isConstant",f.node,r,n)&&(e=u(HD(f.node.name,n),1),p=e[0]),null==r[f.node.name]){var h,m=dz(f.node,r,n,l._resourceManager);p||(h=u(HD(f.node.name,n),1),p=h[0]);var v=n.currentContext;Fh.isPromise(m)?d.push(m.then((function(e){return r[p]=e,n.currentContext=v,l.checkTensorForDisposal(p,f.node,r,n,i,o,s),l.processChildNodes(f.node,t,n,r,a,c),e}))):(r[p]=m,l.checkTensorForDisposal(p,f.node,r,n,i,o,s),l.processChildNodes(f.node,t,n,r,a,c))}else l.processChildNodes(f.node,t,n,r,a,c)};t.length>0;)f();return d}},{key:"processChildNodes",value:function(e,t,n,r,a,i){e.children.forEach((function(e){var o=u(HD(e.name,n),1)[0];a[o]||!i.has(e.name)||("Merge"===e.op?e.inputNames.some((function(e){return!!UD(e,r,n)}))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!UD(e,r,n)}))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=u(qD(n),1)[0],i=t.graph.nodes[a];if(i.attrParams.shape&&i.attrParams.shape.value){var o=i.attrParams.shape.value,s=o.length===r.shape.length&&r.shape.every((function(e,t){return-1===o[t]||o[t]===e}));Fh.assert(s,(function(){return"The shape of dict['".concat(i.name,"'] provided in model.execute(dict) must be [").concat(o,"], but was [").concat(r.shape,"]")}))}i.attrParams.dtype&&i.attrParams.dtype.value&&Fh.assert(r.dtype===i.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(i.name,"'] provided in model.execute(dict) must be ").concat(i.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t={};for(var n in e){if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n])t[this._signature.inputs[n].name]=e[n];else t[n]=e[n]}return t}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=u(qD(e),1)[0];return null==t.graph.nodes[n]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=u(qD(e),1)[0];if(!t.graph.nodes[n])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),Az=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ye(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return Qe(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),kz=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ye(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",null==n&&(this.loadOptions={}),this.resourceManager=new Az}return Qe(e,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"findIOHandler",value:function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=pg.browserHTTPRequest(e,this.loadOptions);else{var t=pg.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(pg.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one (".concat(t.length,") load handlers for URL '").concat([e],"'"));this.handler=t[0]}}},{key:"load",value:function(){var e=this;if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");var t=this.handler.load();return Fh.isPromise(t)?t.then((function(t){return e.loadSync(t)})):this.loadSync(t)}},{key:"loadSync",value:function(e){this.artifacts=e;var t,n=this.artifacts.modelTopology;t=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=t,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer);var r=pg.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new xz(OL.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var a=OL.Instance.transformGraph(e.modelInitializer);this.initializer=new xz(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}},{key:"save",value:function(){var e=ct(st().mark((function e(t,n){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=7;break}if(0!==(r=pg.getSaveHandlers(t)).length){e.next=4;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 4:if(!(r.length>1)){e.next=6;break}throw new Error("Found more than one (".concat(r.length,") save handlers for URL '").concat(t,"'"));case 6:t=r[0];case 7:if(null!=t.save){e.next=9;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 9:return e.abrupt("return",t.save(this.artifacts));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e,t){return this.execute(e,this.outputNodes)}},{key:"normalizeInputs",value:function(e){if(!(e instanceof vm)&&!Array.isArray(e))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the graph model has ".concat(this.inputNodes.length," placeholders, while there are ").concat(e.length," input tensors."));return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"execute",value:function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var e=ct(st().mark((function e(t,n){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=3,this.executor.executeAsync(t,n);case 3:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getIntermediateTensors",value:function(){return this.executor.getIntermediateTensors()}},{key:"disposeIntermediateTensors",value:function(){this.executor.disposeIntermediateTensors()}},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}]),e}();function wz(e){return Sz.apply(this,arguments)}function Sz(){return Sz=ct(st().mark((function e(t){var n,r,a=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},null!=t){e.next=3;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 3:return null==n&&(n={}),n.fromTFHub&&"string"==typeof t&&(t=Ez(t)),r=new kz(t,n),e.next=7,r.load();case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)}))),Sz.apply(this,arguments)}function Iz(e){if(null==e)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide a url or an IOHandler that loads the model");if(!e.load)throw new Error("modelUrl IO Handler ".concat(e," has no load function"));var t=new kz(e);return t.load(),t}function Ez(e){return e.endsWith("/")||(e+="/"),"".concat(e).concat("model.json").concat("?tfjs-format=file")}var Cz="0.0.0",Nz={};Dc(Nz,{CSVDataset:function(){return SB},Dataset:function(){return dB},FileDataSource:function(){return BB},TextLineDataset:function(){return gB},URLDataSource:function(){return WB},array:function(){return pB},csv:function(){return jB},func:function(){return VB},generator:function(){return UB},microphone:function(){return qB},version_data:function(){return XB},webcam:function(){return HB},zip:function(){return hB}});var Tz=Lc(Zc()),_z=Lc(Zc());function Rz(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set;if(null==e)return null;if("function"==typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(Lz(e)){var i=Array.isArray(e)?[]:{};for(var o in r.add(e),e){var s=e[o],u=Rz(s,t,n,r);i[o]=u}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error("Can't recurse into non-iterable type: ".concat(e))}return n.set(e,a.value),a.value}function Mz(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fz;return Oz(e,t)}function Oz(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(Lz(r)){var i=Array.isArray(r)?[]:{};n.add(r);var o=function(r){var a=e.map((function(e){return e[r]})),o=Oz(a,t,n);i[r]=o};for(var s in r)o(s);return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: ".concat(r))}return a.value}function Fz(e){return null===e?null:Lz(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function Pz(e,t){return Dz.apply(this,arguments)}function Dz(){return Dz=ct(st().mark((function e(t,n){var r,a,i,o,s,u;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Rz(t,n,r=new Map),a=0,i=Array.from(r.keys());case 3:if(!(a<i.length)){e.next=14;break}if(o=i[a],s=r.get(o),!Fh.isPromise(s)){e.next=11;break}return e.next=9,s;case 9:u=e.sent,r.set(o,u);case 11:a++,e.next=3;break;case 14:return e.abrupt("return",Rz(t,n,r));case 15:case"end":return e.stop()}}),e)}))),Dz.apply(this,arguments)}function Lz(e){var t=!1;id().get("IS_BROWSER")?t=e instanceof TextDecoder:t=e instanceof Yc().StringDecoder;return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof vm)&&!(e instanceof Promise)&&!t)}function zz(e){return function(e,t){return Rz(e,t)}(e,Bz)}function Bz(e){return e instanceof vm?{value:e.clone(),recurse:!1}:Lz(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var Wz=function(){function e(t){if(Ye(this,e),this.capacity=t,this.begin=0,this.end=0,null==t)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(t<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(t),this.doubledCapacity=2*t}return Qe(e,[{key:"wrap",value:function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}},{key:"get",value:function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}},{key:"set",value:function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}},{key:"length",value:function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}},{key:"isFull",value:function(){return this.length()===this.capacity}},{key:"isEmpty",value:function(){return 0===this.length()}},{key:"push",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}},{key:"pushAll",value:function(e){var t,n=lc(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.push(r)}}catch(a){n.e(a)}finally{n.f()}}},{key:"pop",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e}},{key:"unshift",value:function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}},{key:"shift",value:function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}},{key:"shuffleExcise",value:function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}}]),e}(),jz=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.call(this,n.INITIAL_CAPACITY)}return Qe(n,[{key:"isFull",value:function(){return!1}},{key:"push",value:function(e){sc(tt(n.prototype),"isFull",this).call(this)&&this.expand(),sc(tt(n.prototype),"push",this).call(this,e)}},{key:"unshift",value:function(e){sc(tt(n.prototype),"isFull",this).call(this)&&this.expand(),sc(tt(n.prototype),"unshift",this).call(this,e)}},{key:"expand",value:function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}}]),n}(Wz),Vz=jz;function Uz(e){return new Xz(e)}function Hz(e){return new Zz(e)}function Gz(e,t){return new oB(e,t)}function qz(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sB.FAIL;return new uB(e,t)}Vz.INITIAL_CAPACITY=32;var Kz=function(){function e(){Ye(this,e)}return Qe(e,[{key:"toArray",value:function(){var e=ct(st().mark((function e(){var t,n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent;case 9:e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=ct(st().mark((function e(){var t,n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent;case 10:e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveFully",value:function(){var e=ct(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent;case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"resolveWhile",value:function(){var e=ct(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value);case 9:e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e){return new nB(this,e)}},{key:"filter",value:function(e){return new eB(this,e)}},{key:"map",value:function(e){return new tB(this,e)}},{key:"mapAsync",value:function(e){return new rB(this,e)}},{key:"serialMapAsync",value:function(e){return new rB(this,e).serial()}},{key:"flatmap",value:function(e){return new iB(this,e)}},{key:"forEachAsync",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"serialForEach",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"rowMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new $z(this,e,t)}},{key:"columnMajorBatch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fz;return this.rowMajorBatch(e,t).map((function(e){return Mz(e,n)}))}},{key:"concatenate",value:function(e,t){return new oB(Uz([this,e]),t)}},{key:"take",value:function(e){return e<0||null==e?this:new Qz(this,e)}},{key:"skip",value:function(e){return e<0||null==e?this:new Jz(this,e)}},{key:"prefetch",value:function(e){return new cB(this,e)}},{key:"shuffle",value:function(e,t){return new lB(this,e,t)}},{key:"serial",value:function(){return new Yz(this)}}]),e}(),Xz=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).items=e,r.trav=0,r}return Qe(n,[{key:"summary",value:function(){return"Array of ".concat(this.items.length," items")}},{key:"next",value:function(){var e=ct(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],e.abrupt("return",(this.trav++,{value:zz(t),done:!1}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Kz),Zz=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).nextFn=e,r}return Qe(n,[{key:"summary",value:function(){return"Function call"}},{key:"next",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: ".concat(e.t0.message),e.t0;case 7:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}()}]),n}(Kz),Yz=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).upstream=e,r.lastRead=Promise.resolve({value:null,done:!1}),r}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Serial")}},{key:"next",value:function(){var e=ct(st().mark((function e(){var t=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Kz),Jz=function(e){et(n,e);var t=ot(n);function n(e,r){var a;return Ye(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Skip")}},{key:"next",value:function(){var e=ct(st().mark((function e(){var t=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=ct(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:Yg(t.value);case 7:e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Kz),Qz=function(e){et(n,e);var t=ot(n);function n(e,r){var a;return Ye(this,n),(a=t.call(this)).upstream=e,a.maxCount=r,a.count=0,a}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Take")}},{key:"next",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Kz),$z=function(e){et(n,e);var t=ot(n);function n(e,r){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Ye(this,n),(a=t.call(this)).upstream=e,a.batchSize=r,a.enableSmallLastBatch=i,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> RowMajorBatch")}},{key:"next",value:function(){var e=ct(st().mark((function e(){var t=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=ct(st().mark((function e(){var t,n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=10;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=7;break}return e.abrupt("return",this.enableSmallLastBatch&&t.length>0?{value:t,done:!1}:{value:null,done:!0});case 7:t.push(n.value);case 8:e.next=1;break;case 10:return e.abrupt("return",{value:t,done:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Kz),eB=function(e){et(n,e);var t=ot(n);function n(e,r){var a;return Ye(this,n),(a=t.call(this)).upstream=e,a.predicate=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Filter")}},{key:"next",value:function(){var e=ct(st().mark((function e(){var t=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=ct(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=5;break}return e.abrupt("return",t);case 5:Yg(t.value);case 6:e.next=0;break;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Kz),tB=function(e){et(n,e);var t=ot(n);function n(e,r){var a;return Ye(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Map")}},{key:"next",value:function(){var e=ct(st().mark((function e(){var t,n,r,a,i,o,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:n=ym.getTensorsInContainer(t.value),r=this.transform(t.value),a=ym.getTensorsInContainer(r),i=lc(n);try{for(i.s();!(o=i.n()).done;)s=o.value,ym.isTensorInList(s,a)||s.dispose()}catch(u){i.e(u)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Kz),nB=function(e){et(n,e);var t=ot(n);function n(e,r){var a;return Ye(this,n),(a=t.call(this)).upstream=e,a.handler=r,a.count=0,a.lastRead=Promise.resolve({value:null,done:!1}),a}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> handleErrors")}},{key:"next",value:function(){var e=ct(st().mark((function e(){var t=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.upstream.next();case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),this.handler(e.t0)){e.next=10;break}return e.abrupt("return",{value:null,done:!0});case 10:e.next=0;break;case 12:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()}]),n}(Kz),rB=function(e){et(n,e);var t=ot(n);function n(e,r){var a;return Ye(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> AsyncMap")}},{key:"next",value:function(){var e=ct(st().mark((function e(){var t,n,r,a,i,o,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=ym.getTensorsInContainer(t.value),e.next=8,this.transform(t.value);case 8:r=e.sent,a=ym.getTensorsInContainer(r),i=lc(n);try{for(i.s();!(o=i.n()).done;)s=o.value,ym.isTensorInList(s,a)||s.dispose()}catch(u){i.e(u)}finally{i.f()}return e.abrupt("return",{value:r,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Kz),aB=function(e){et(n,e);var t=ot(n);function n(){var e;return Ye(this,n),(e=t.call(this)).outputQueue=new Vz,e.lastRead=Promise.resolve({value:null,done:!1}),e}return Qe(n,[{key:"next",value:function(){var e=ct(st().mark((function e(){var t=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"serialNext",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Kz),iB=function(e){et(n,e);var t=ot(n);function n(e,r){var a;return Ye(this,n),(a=t.call(this)).upstream=e,a.transform=r,a}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Flatmap")}},{key:"pump",value:function(){var e=ct(st().mark((function e(){var t,n,r,a,i,o,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:n=ym.getTensorsInContainer(t.value),r=this.transform(t.value),a=ym.getTensorsInContainer(r),this.outputQueue.pushAll(r),i=lc(n);try{for(i.s();!(o=i.n()).done;)s=o.value,ym.isTensorInList(s,a)||s.dispose()}catch(u){i.e(u)}finally{i.f()}return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(aB),oB=function(e){et(n,e);var t=ot(n);function n(e,r){var a;return Ye(this,n),(a=t.call(this)).baseErrorHandler=r,a.lastRead=null,a.iterator=null,a.moreIterators=e,a}return Qe(n,[{key:"summary",value:function(){return"TODO: fill in upstream of chained summaries -> Chained"}},{key:"next",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.readFromChain(this.lastRead),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readFromChain",value:function(){var e=ct(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=9;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 9:return e.next=11,this.iterator.next();case 11:return r=e.sent,e.abrupt("return",r.done?(this.iterator=null,this.readFromChain(t)):r);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Kz),sB=function(e){return e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST",e}(sB||{}),uB=function(e){et(n,e);var t=ot(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Ye(this,n),(r=t.call(this)).iterators=e,r.mismatchMode=a,r.count=0,r.currentPromise=null,r}return Qe(n,[{key:"summary",value:function(){return"{TODO: fill in upstream of zip summaries} -> Zip"}},{key:"nextState",value:function(){var e=ct(st().mark((function e(t){var n,r,a,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return e instanceof Kz?{value:e.next().then((function(e){return n++,e.done&&r++,e.value})),recurse:!1}:{value:null,recurse:!0}},e.next=3,t;case 3:return n=0,r=0,e.next=6,Pz(this.iterators,a);case 6:if(i=e.sent,n!==r){e.next=9;break}return e.abrupt("return",{value:null,done:!0});case 9:if(!(r>0)){e.next=15;break}e.t0=this.mismatchMode,e.next=0===e.t0?13:1===e.t0?14:(e.t0,15);break;case 13:throw new Error("Zipped streams should have the same length. Mismatched at element ".concat(this.count,"."));case 14:return e.abrupt("return",{value:null,done:!0});case 15:return e.abrupt("return",(this.count++,{value:i,done:!1}));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.currentPromise=this.nextState(this.currentPromise),this.currentPromise));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Kz),cB=function(e){et(n,e);var t=ot(n);function n(e,r){var a;return Ye(this,n),(a=t.call(this)).upstream=e,a.bufferSize=r,a.buffer=new Wz(r),a}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Prefetch")}},{key:"refill",value:function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}}},{key:"next",value:function(){return this.refill(),this.buffer.shift()}}]),n}(Kz),lB=function(e){et(n,e);var t=ot(n);function n(e,r,a){var i;return Ye(this,n),(i=t.call(this,e,r)).upstream=e,i.windowSize=r,i.upstreamExhausted=!1,i.random=_z.alea(a||Fh.now().toString()),i.lastRead=Promise.resolve({value:null,done:!1}),i}return Qe(n,[{key:"next",value:function(){var e=ct(st().mark((function e(){var t=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.lastRead=this.lastRead.then((function(){return t.serialNext()})),this.lastRead));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"randomInt",value:function(e){return Math.floor(this.random()*e)}},{key:"chooseIndex",value:function(){return this.randomInt(this.buffer.length())}},{key:"serialNext",value:function(){var e=ct(st().mark((function e(){var t,n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=13;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=11;break;case 10:return e.abrupt("return",(this.refill(),n));case 11:e.next=1;break;case 13:return e.abrupt("return",{value:null,done:!0});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(cB),dB=function(){function e(){Ye(this,e),this.size=null}return Qe(e,[{key:"batch",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this;return Fh.assert(e>0,(function(){return"batchSize needs to be positive, but it is\n      ".concat(e)})),t=this.size===1/0||null==this.size?this.size:n?Math.ceil(this.size/e):Math.floor(this.size/e),fB(ct(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.iterator();case 2:return t.abrupt("return",t.sent.columnMajorBatch(e,n,mB));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"concatenate",value:function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,fB(ct(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)}},{key:"filter",value:function(e){var t,n=this;return t=this.size===1/0?1/0:null,fB(ct(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return Zg((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"forEachAsync",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"map",value:function(e){var t=this;return fB(ct(st().mark((function n(){return st().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return Zg((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"mapAsync",value:function(e){var t=this;return fB(ct(st().mark((function n(){return st().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"prefetch",value:function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return fB(ct(st().mark((function n(){return st().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)}},{key:"repeat",value:function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,fB(ct(st().mark((function t(){var r;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Hz(ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",Gz(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)}},{key:"skip",value:function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,fB(ct(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"shuffle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting bufferSize to the dataset size (".concat(this.size," elements)"));var r=this,a=Tz.alea(t||Fh.now().toString());return fB(ct(st().mark((function t(){var i;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.int32(),n&&(i+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,i.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)}},{key:"take",value:function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,fB(ct(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)}},{key:"toArray",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toArrayForTest",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function fB(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new(function(n){et(a,n);var r=ot(a);function a(){var e;return Ye(this,a),(e=r.apply(this,arguments)).size=t,e}return Qe(a,[{key:"iterator",value:function(){var t=ct(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),a}(dB))}function pB(e){return fB(ct(st().mark((function t(){return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Uz(e));case 1:case"end":return t.stop()}}),t)}))),e.length)}function hB(e){if(!Lz(e))throw new Error("The argument to zip() must be an object or array.");var t;if(Array.isArray(e))for(var n=0;n<e.length;n++)t=null==t?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(var r in e)t=null==t?e[r].size:Math.min(t,e[r].size);return fB(ct(st().mark((function t(){var n;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Pz(e,(function(e){if(e instanceof dB)return{value:e.iterator(),recurse:!1};if(Lz(e))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")}));case 2:return n=t.sent,t.abrupt("return",qz(n,1));case 4:case"end":return t.stop()}}),t)}))),t)}function mB(e){return null===e?null:function(e){return null==e||function(e){return null===e||"object"!=typeof e&&"function"!=typeof e}(e)||Array.isArray(e)||"object"==typeof e&&e instanceof vm||Fh.isTypedArray(e)}(e[0])?{value:vB(e),recurse:!1}:{value:null,recurse:!0}}function vB(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof vm?$k(e):tv(e)}dB.MAX_BUFFER_SIZE=1e4;var gB=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).input=e,r}return Qe(n,[{key:"iterator",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.input.iterator();case 2:return e.abrupt("return",e.sent.decodeUTF8().split("\n").map((function(e){return e.endsWith("\r")&&(e=e.slice(0,-1)),e})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(dB),yB='"',bB=Symbol("out"),xB=Symbol("field"),AB=Symbol("quote"),kB=Symbol("quoteafterquote"),wB=Symbol("quoteinquote"),SB=function(e){et(n,e);var t=ot(n);function n(e,r){var a;return Ye(this,n),(a=t.call(this)).input=e,a.hasHeader=!0,a.fullColumnNames=null,a.columnNamesValidated=!1,a.columnConfigs=null,a.configuredColumnsOnly=!1,a.delimiter=",",a.delimWhitespace=!1,a.base=new gB(e),r||(r={}),a.hasHeader=!1!==r.hasHeader,a.fullColumnNames=r.columnNames,a.columnConfigs=r.columnConfigs,a.configuredColumnsOnly=r.configuredColumnsOnly,r.delimWhitespace?(Fh.assert(null==r.delimiter,(function(){return"Delimiter should not be provided when delimWhitespace is true."})),a.delimWhitespace=!0,a.delimiter=" "):a.delimiter=r.delimiter?r.delimiter:",",a}return Qe(n,[{key:"columnNames",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.columnNamesValidated,e.t0){e.next=4;break}return e.next=4,this.setColumnNames();case 4:return e.abrupt("return",this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setColumnNames",value:function(){var e=ct(st().mark((function e(){var t,n,r,a,i,o,s=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.maybeReadHeaderLine();case 2:if(t=e.sent,this.fullColumnNames||t){e.next=5;break}throw new Error("Column names must be provided if there is no header line.");case 5:if(this.fullColumnNames&&t&&Fh.assert(t.length===this.fullColumnNames.length,(function(){return"The length of provided columnNames ("+s.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."})),this.fullColumnNames||(this.fullColumnNames=t),n=this.fullColumnNames.reduce((function(e,t){return e[t]=e[t]+1||1,e}),{}),r=Object.keys(n).filter((function(e){return n[e]>1})),Fh.assert(0===r.length,(function(){return"Duplicate column names found: "+r.toString()})),!this.columnConfigs){e.next=16;break}a=0,i=Object.keys(this.columnConfigs);case 9:if(!(a<i.length)){e.next=16;break}if(o=i[a],-1!==this.fullColumnNames.indexOf(o)){e.next=13;break}throw new Error('The key "'+o+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").");case 13:a++,e.next=9;break;case 16:this.columnNamesValidated=!0;case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"maybeReadHeaderLine",value:function(){var e=ct(st().mark((function e(){var t,n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasHeader){e.next=12;break}return e.next=3,this.base.iterator();case 3:return e.next=5,e.sent.next();case 5:if(!(t=e.sent).done){e.next=8;break}throw new Error("No data was found for CSV parsing.");case 8:return n=t.value,e.abrupt("return",this.parseRow(n,!1));case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"iterator",value:function(){var e=ct(st().mark((function e(){var t,n=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.columnNamesValidated,e.t0){e.next=4;break}return e.next=4,this.setColumnNames();case 4:return e.next=6,this.base.iterator();case 6:return t=e.sent,e.abrupt("return",(this.hasHeader&&(t=t.skip(1)),t.map((function(e){return n.makeDataElement(e)}))));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"makeDataElement",value:function(e){for(var t=this.parseRow(e),n={},r={},a=0;a<this.fullColumnNames.length;a++){var i=this.fullColumnNames[a],o=this.columnConfigs?this.columnConfigs[i]:null;if(!this.configuredColumnsOnly||o){var s=t[a],u=null;if(""===s)if(o&&void 0!==o.default)u=o.default;else{if(o&&(o.required||o.isLabel))throw new Error("Required column ".concat(i," is empty in this line: ").concat(e));u=void 0}else{var c=Number(s);if(isNaN(c))u=o&&"bool"===o.dtype?this.getBoolean(s):s;else if(o&&o.dtype)switch(o.dtype){case"float32":default:u=c;break;case"int32":u=Math.floor(c);break;case"bool":u=this.getBoolean(s)}else u=c}o&&o.isLabel?r[i]=u:n[i]=u}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}},{key:"getBoolean",value:function(e){return"1"===e||"true"===e.toLowerCase()?1:0}},{key:"parseRow",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],r=0,a=e.length,i=bB,o=0;o<a;o++)switch(i){case bB:switch(e.charAt(o)){case yB:r=o+1,i=AB;break;case this.delimiter:if(r=o+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),i=bB;break;default:i=xB,r=o}break;case xB:if(e.charAt(o)===this.delimiter)n.push(e.substring(r,o)),i=bB,r=o+1;break;case AB:if(e.charAt(o)===yB)i=kB;break;case kB:switch(e.charAt(o)){case this.delimiter:n.push(e.substring(r,o-1)),i=bB,r=o+1;break;case yB:i=AB;break;default:i=wB}break;case wB:if(e.charAt(o)===yB)i=AB}if(i===kB?n.push(e.substring(r,a-1)):n.push(e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have ".concat(this.fullColumnNames.length," elements in a row, but got ").concat(n));return n}}]),n}(dB),IB=function(e){et(n,e);var t=ot(n);function n(e){var r;Ye(this,n),(r=t.call(this)).microphoneConfig=e,r.isClosed=!1,r.fftSize=e.fftSize||1024;var a=Math.log2(r.fftSize);if(r.fftSize<0||a<4||a>14||!Number.isInteger(a))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got ".concat(r.fftSize));if(r.numFrames=e.numFramesPerSpectrogram||43,r.sampleRateHz=e.sampleRateHz,r.columnTruncateLength=e.columnTruncateLength||r.fftSize,r.audioTrackConstraints=e.audioTrackConstraints,r.smoothingTimeConstant=e.smoothingTimeConstant||0,r.includeSpectrogram=!1!==e.includeSpectrogram,r.includeWaveform=!0===e.includeWaveform,!r.includeSpectrogram&&!r.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.");return r}return Qe(n,[{key:"summary",value:function(){return"microphone"}},{key:"start",value:function(){var e=ct(st().mark((function e(){var t,n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1});case 3:this.stream=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error thrown while initializing video stream: ".concat(e.t0.message));case 9:if(this.stream){e.next=11;break}throw new Error("Could not obtain audio from microphone.");case 11:if(t=window.AudioContext||window.webkitAudioContext,this.audioContext=new t,this.sampleRateHz){e.next=16;break}this.sampleRateHz=this.audioContext.sampleRate,e.next=18;break;case 16:if(this.audioContext.sampleRate===this.sampleRateHz){e.next=18;break}throw new Error("Mismatch in sampling rate: Expected: ".concat(this.sampleRateHz,"; Actual: ").concat(this.audioContext.sampleRate));case 18:n=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,n.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize);case 20:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=ct(st().mark((function e(){var t,n,r,a,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClosed){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.next=4,this.getAudioData();case 4:return r=e.sent,this.includeSpectrogram&&(a=this.flattenQueue(r.freqDataQueue),t=this.getTensorFromAudioDataArray(a,[this.numFrames,this.columnTruncateLength,1])),this.includeWaveform&&(i=this.flattenQueue(r.timeDataQueue),n=this.getTensorFromAudioDataArray(i,[this.numFrames*this.fftSize,1])),e.abrupt("return",{value:{spectrogram:t,waveform:n},done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"capture",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAudioData",value:function(){var e=ct(st().mark((function e(){var t,n,r,a=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],r=0,e.abrupt("return",new Promise((function(e){var i=setInterval((function(){a.includeSpectrogram&&(a.analyser.getFloatFrequencyData(a.freqData),a.freqData[0]===-1/0&&e({freqDataQueue:t,timeDataQueue:n}),t.push(a.freqData.slice(0,a.columnTruncateLength))),a.includeWaveform&&(a.analyser.getFloatTimeDomainData(a.timeData),n.push(a.timeData.slice())),++r===a.numFrames&&(clearInterval(i),e({freqDataQueue:t,timeDataQueue:n}))}),a.fftSize/a.sampleRateHz*1e3)})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}},{key:"toArray",value:function(){throw new Error("Can not convert infinite audio stream to array.")}},{key:"getSampleRate",value:function(){return this.sampleRateHz}},{key:"flattenQueue",value:function(e){var t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((function(e,r){return n.set(e,r*t)})),n}},{key:"getTensorFromAudioDataArray",value:function(e,t){var n=new Float32Array(Fh.sizeFromShape(t));return n.set(e,n.length-e.length),tv(n,t)}}],[{key:"create",value:function(){var e=ct(st().mark((function e(){var t,r,a=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},id().get("IS_BROWSER")){e.next=3;break}throw new Error("microphone API is only supported in browser environment.");case 3:return r=new n(t),e.next=6,r.start();case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(Kz),EB=function(e){et(n,e);var t=ot(n);function n(e,r){var a;if(Ye(this,n),(a=t.call(this)).webcamVideoElement=e,a.webcamConfig=r,a.isClosed=!0,a.resize=!1,a.needToResize())if(a.resize=!0,a.cropSize=[a.webcamConfig.resizeHeight,a.webcamConfig.resizeWidth],a.cropBoxInd=rw([0],"int32"),a.webcamConfig.centerCrop){var i=1*a.webcamConfig.resizeWidth/a.webcamVideoElement.width,o=1*a.webcamConfig.resizeHeight/a.webcamVideoElement.height,s=(1-i)/2,u=(1-o)/2,c=s+i,l=o+u;a.cropBox=aw([u,s,l,c],[1,4])}else a.cropBox=aw([0,0,1,1],[1,4]);return it(a)}return Qe(n,[{key:"summary",value:function(){return"webcam"}},{key:"start",value:function(){var e=ct(st().mark((function e(){var t=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.webcamConfig.facingMode&&Fh.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,(function(){return"Invalid webcam facing mode: ".concat(t.webcamConfig.facingMode,". Please provide 'user' or 'environment'")})),e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}});case 4:this.stream=e.sent,e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0.message="Error thrown while initializing video stream: ".concat(e.t0.message),e.t0;case 10:if(this.stream){e.next=12;break}throw new Error("Could not obtain video from webcam.");case 12:try{this.webcamVideoElement.srcObject=this.stream}catch(A_e){console.log(A_e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return e.abrupt("return",(this.webcamVideoElement.play(),this.isClosed=!1,new Promise((function(e){t.webcamVideoElement.onloadedmetadata=function(){e()}}))));case 14:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=ct(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClosed){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:e.prev=2,t=yy.fromPixels(this.webcamVideoElement),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),new Error("Error thrown converting video to pixels: ".concat(JSON.stringify(e.t0)));case 9:if(!this.resize){e.next=22;break}return e.prev=10,e.abrupt("return",{value:this.cropAndResizeFrame(t),done:!1});case 14:throw e.prev=14,e.t1=e.catch(10),new Error("Error thrown cropping the video: ".concat(e.t1.message));case 17:return e.prev=17,t.dispose(),e.finish(17);case 20:e.next=23;break;case 22:return e.abrupt("return",{value:t,done:!1});case 23:case"end":return e.stop()}}),e,this,[[2,6],[10,14,17,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"needToResize",value:function(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}},{key:"cropAndResizeFrame",value:function(e){var t=this;return Zg((function(){var n,r=iA(lg(e,"float32"),0),a=(n=HS.cropAndResize(r,t.cropBox,t.cropBoxInd,t.cropSize,"bilinear")).shape;return Kb(n,a.slice(1))}))}},{key:"capture",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){this.stream.getTracks().forEach((function(e){return e.stop()}));try{this.webcamVideoElement.srcObject=null}catch(Co){console.log(Co),this.webcamVideoElement.src=null}this.isClosed=!0}},{key:"toArray",value:function(){throw new Error("Can not convert infinite video stream to array.")}}],[{key:"create",value:function(){var e=ct(st().mark((function e(t){var r,a,i=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:{},id().get("IS_BROWSER")){e.next=3;break}throw new Error("tf.data.webcam is only supported in browser environment.");case 3:if(t){e.next=7;break}if(t=document.createElement("video"),r.resizeWidth&&r.resizeHeight){e.next=6;break}throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");case 6:t.width=r.resizeWidth,t.height=r.resizeHeight;case 7:return a=new n(t,r),e.next=10,a.start();case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Kz),CB=Qe((function e(){Ye(this,e)})),NB=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"split",value:function(e){return new TB(this,e)}}]),n}(Kz),TB=function(e){et(n,e);var t=ot(n);function n(e,r){var a;return Ye(this,n),(a=t.call(this)).upstream=e,a.impl=new _B(e,r),a}return Qe(n,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(NB),_B=function(e){et(n,e);var t=ot(n);function n(e,r){var a;return Ye(this,n),(a=t.call(this)).upstream=e,a.separator=r,a.carryover="",a}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Split('").concat(this.separator,"')")}},{key:"pump",value:function(){var e=ct(st().mark((function e(){var t,n,r,a,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0));case 5:(n=t.value.split(this.separator))[0]=this.carryover+n[0],r=lc(n.slice(0,-1));try{for(r.s();!(a=r.n()).done;)i=a.value,this.outputQueue.push(i)}catch(o){r.e(o)}finally{r.f()}return e.abrupt("return",(this.carryover=n[n.length-1],!0));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(aB),RB=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"decodeUTF8",value:function(){return new MB(this)}}]),n}(Kz),MB=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).upstream=e,r.impl=new OB(e),r}return Qe(n,[{key:"summary",value:function(){return this.impl.summary()}},{key:"next",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(NB),OB=function(e){et(n,e);var t=ot(n);function n(e){var r;if(Ye(this,n),(r=t.call(this)).upstream=e,id().get("IS_BROWSER"))r.decoder=new TextDecoder("utf-8");else{var a=Yc().StringDecoder;r.decoder=new a("utf8")}return it(r)}return Qe(n,[{key:"summary",value:function(){return"".concat(this.upstream.summary()," -> Utf8")}},{key:"pump",value:function(){var e=ct(st().mark((function e(){var t,n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:return n=t.value,e.abrupt("return",(r=id().get("IS_BROWSER")?this.decoder.decode(n,{stream:!0}):this.decoder.write(Buffer.from(n.buffer)),this.outputQueue.push(r),!0));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(aB),FB=function(e){et(n,e);var t=ot(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ye(this,n),(r=t.call(this)).file=e,r.options=a,Fh.assert(e instanceof Uint8Array||!!id().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),(function(){return"FileChunkIterator only supports File, Blob and Uint8Array right now."})),r.offset=a.offset||0,r.chunkSize=a.chunkSize||1048576,r}return Qe(n,[{key:"summary",value:function(){return"FileChunks ".concat(this.file)}},{key:"next",value:function(){var e=ct(st().mark((function e(){var t=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))){e.next=4;break}e.t0={value:null,done:!0},e.next=8;break;case 4:return e.next=6,new Promise((function(e,n){var r=t.offset+t.chunkSize;if(t.file instanceof Uint8Array)e(new Uint8Array(t.file.slice(t.offset,r)));else{var a=new FileReader;a.onload=function(t){var r=a.result;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),!(r instanceof Uint8Array))return n(new TypeError("FileReader returned unknown type."));e(r)},a.onabort=function(e){return n(new Error("Aborted"))},a.onerror=function(e){return n(new Error(e.type))};var i=t.file.slice(t.offset,r);a.readAsArrayBuffer(i)}t.offset=r}));case 6:e.t1=e.sent,e.t0={value:e.t1,done:!1};case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(RB);function PB(e){return DB.apply(this,arguments)}function DB(){return DB=ct(st().mark((function e(t){var n,r,a,i,o,s,u=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},r=u.length>2?u[2]:void 0,"string"==typeof t?a=t:(a=t.url,i=LB(t)),e.next=5,(r||Fh.fetch)(a,i);case 5:if(!(o=e.sent).ok){e.next=15;break}return e.t0=Uint8Array,e.next=10,o.arrayBuffer();case 10:return e.t1=e.sent,s=new e.t0(e.t1),e.abrupt("return",new FB(s,n));case 15:throw new Error(o.statusText);case 16:case"end":return e.stop()}}),e)}))),DB.apply(this,arguments)}var LB=function(e){return{method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity}};function zB(e){return"string"==typeof e&&"file://"===e.slice(0,7)}var BB=function(e){et(n,e);var t=ot(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ye(this,n),(r=t.call(this)).input=e,r.options=a,r}return Qe(n,[{key:"iterator",value:function(){var e=ct(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zB(this.input)&&id().get("IS_NODE")&&(t=Jc(),this.input=t.readFileSync(this.input.slice(7))),e.abrupt("return",new FB(this.input,this.options));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(CB),WB=function(e){et(n,e);var t=ot(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ye(this,n),(r=t.call(this)).url=e,r.fileOptions=a,r}return Qe(n,[{key:"iterator",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zB(this.url)?new BB(this.url,this.fileOptions).iterator():PB(this.url,this.fileOptions));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(CB);function jB(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new SB(new WB(e),t)}function VB(e){var t=Hz(e);return fB(ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))))}function UB(e){return fB(ct(st().mark((function t(){var n;return st().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return n=t.sent,t.abrupt("return",Hz((function(){return n.next()})));case 4:case"end":return t.stop()}}),t)}))))}function HB(e,t){return GB.apply(this,arguments)}function GB(){return GB=ct(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",EB.create(t,n));case 1:case"end":return e.stop()}}),e)}))),GB.apply(this,arguments)}function qB(e){return KB.apply(this,arguments)}function KB(){return KB=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",IB.create(t));case 1:case"end":return e.stop()}}),e)}))),KB.apply(this,arguments)}var XB="0.0.0";function ZB(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Fh.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}var YB=sE.whereImpl,JB=function(e){et(n,e);var t=ot(n);function n(){var e;return Ye(this,n),(e=t.call(this)).blockSize=48,e.firstUse=!0,e.data=new al(at(e),qg()),e}return Qe(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"write",value:function(e,t,n){this.firstUse&&(this.firstUse=!1,id().get("IS_NODE")&&sI.warn("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));var r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&Fh.isString(n[0])){var a=n.map((function(e){return Fh.encodeString(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"refCount",value:function(e){return this.data.has(e)?this.data.get(e).refCount:0}},{key:"incRef",value:function(e){this.data.get(e).refCount++}},{key:"decRef",value:function(e){this.data.has(e)&&this.data.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){this.data.set(e,{values:t,dtype:r,refCount:a})}},{key:"numDataIds",value:function(){return this.data.numDataIds()}},{key:"read",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;if("complex64"===n){var a=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return sI.mergeRealAndImagArrays(a,i)}return this.data.get(e).values}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return Fh.decodeString(e)}));return cg(e.shape,e.dtype,n)}catch(r){throw new Error("Failed to decode encoded string bytes into utf-8")}return cg(e.shape,e.dtype,t)}},{key:"makeOutput",value:function(e,t,n){return qg().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;var n=this.data.get(e),r=n.complexTensorInfos;null!=r&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"time",value:function(){var e=ct(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fh.now(),e.abrupt("return",(t(),{kernelMs:Fh.now()-n}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"memory",value:function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}},{key:"where",value:function(e){ZB([e],"where");var t=this.readSync(e.dataId);return YB(e.shape,t)}},{key:"dispose",value:function(){}},{key:"floatPrecision",value:function(){return 32}},{key:"epsilon",value:function(){return sc(tt(n.prototype),"epsilon",this).call(this)}}]),n}(il),QB=JB;QB.nextDataId=0;var $B={};function eW(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}Dc($B,{addImpl:function(){return hW},bincountImpl:function(){return yW},bincountReduceImpl:function(){return bW},ceilImpl:function(){return wW},concatImpl:function(){return EW},equalImpl:function(){return CW},expImpl:function(){return _W},expm1Impl:function(){return OW},floorImpl:function(){return DW},gatherNdImpl:function(){return BW},gatherV2Impl:function(){return WW},greaterEqualImpl:function(){return HW},greaterImpl:function(){return jW},lessEqualImpl:function(){return YW},lessImpl:function(){return KW},linSpaceImpl:function(){return $W},logImpl:function(){return ej},maxImpl:function(){return rj},maximumImpl:function(){return aj},minimumImpl:function(){return sj},multiplyImpl:function(){return lj},negImpl:function(){return hj},notEqualImpl:function(){return vj},prodImpl:function(){return kj},rangeImpl:function(){return Sj},rsqrtImpl:function(){return Ij},scatterImpl:function(){return Nj},sigmoidImpl:function(){return Tj},simpleAbsImpl:function(){return eW},sliceImpl:function(){return Mj},sparseFillEmptyRowsImpl:function(){return Pj},sparseReshapeImpl:function(){return Dj},sparseSegmentReductionImpl:function(){return Lj},sqrtImpl:function(){return zj},squaredDifferenceImpl:function(){return jj},stridedSliceImpl:function(){return Hj},stringNGramsImpl:function(){return qj},stringSplitImpl:function(){return Xj},stringToHashBucketFastImpl:function(){return Zj},subImpl:function(){return Yj},tileImpl:function(){return eV},topKImpl:function(){return rV},transposeImpl:function(){return bj},uniqueImpl:function(){return aV}});var tW={kernelName:ld,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;ZB(t,"abs");var r=new Float32Array(Fh.sizeFromShape(t.shape));return r=eW(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}};function nW(e){return function(t,n,r,a,i){var o=sI.assertAndGetBroadcastShape(t,n),s=o.length,u=Fh.computeStrides(o),c=Fh.sizeFromShape(o),l=Fh.getTypedArrayFromDType(i,c),d=t.length,f=n.length,p=Fh.computeStrides(t),h=Fh.computeStrides(n),m=sI.getBroadcastDims(t,o),v=sI.getBroadcastDims(n,o);if(m.length+v.length===0)for(var g=0;g<l.length;++g)l[g]=e(r[g%r.length],a[g%a.length]);else for(var y=function(t){var n=Fh.indexToLoc(t,s,u),i=n.slice(-d);m.forEach((function(e){return i[e]=0}));var o=Fh.locToIndex(i,d,p),c=n.slice(-f);v.forEach((function(e){return c[e]=0}));var g=Fh.locToIndex(c,f,h);l[t]=e(r[o],a[g])},b=0;b<l.length;++b)y(b);return[l,o]}}function rW(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}var aW={kernelName:Dd,backendName:"cpu",kernelFunc:rW};function iW(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=iW(e,t,"float32"),a=iW(e,t,"float32");return rW({inputs:{real:r,imag:a},backend:e})}var i=Fh.makeZerosTypedArray(Fh.sizeFromShape(t),n);return e.makeTensorInfo(t,n,i)}function oW(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var sW={kernelName:If,backendName:"cpu",kernelFunc:oW};function uW(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var cW={kernelName:bp,backendName:"cpu",kernelFunc:uW};function lW(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if("complex64"===i){if("complex64"===a.dtype)return oW({inputs:{x:a},backend:n});var o=iW(n,a.shape,a.dtype),s=lW({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),c=rW({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),c}if("complex64"===a.dtype){var l=uW({inputs:{input:a},backend:n}),d=lW({inputs:{x:l},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(l),d}if(!Fh.hasEncodingLoss(a.dtype,i)){var f=oW({inputs:{x:a},backend:n});return{dataId:f.dataId,shape:f.shape,dtype:i}}if("int32"===i){var p=n.data.get(a.dataId).values,h=Int32Array.from(p);return n.makeTensorInfo(a.shape,"int32",h)}if("bool"===i){var m=n.data.get(a.dataId).values,v=Fh.toTypedArray([0],a.dtype),g=nW((function(e,t){return e!==t?1:0}))(a.shape,[],m,v,"bool"),y=u(g,2),b=y[0],x=y[1];return n.makeTensorInfo(x,"bool",b)}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(i))}var dW={kernelName:Od,backendName:"cpu",kernelFunc:lW};function fW(e,t,n,r){return null==n?function(n){var a=n.inputs,i=n.backend,o=a.a,s=a.b,c=i;ZB([o,s],e);var l=c.data.get(o.dataId).values,d=c.data.get(s.dataId).values,f="string"===o.dtype?sI.fromUint8ToStringArray(l):l,p="string"===o.dtype?sI.fromUint8ToStringArray(d):d,h=r||o.dtype,m=u(t(o.shape,s.shape,f,p,h),2),v=m[0],g=m[1];return c.makeTensorInfo(g,h,v)}:function(e){var a=e.inputs,i=e.backend,o=a.a,s=a.b,c=i;if("complex64"===o.dtype||"complex64"===s.dtype){var l=lW({inputs:{x:o},backend:c,attrs:{dtype:"complex64"}}),d=c.data.get(l.dataId),f=d.complexTensorInfos.real,p=d.complexTensorInfos.imag,h=c.data.get(f.dataId).values,m=c.data.get(p.dataId).values,v=lW({inputs:{x:s},backend:c,attrs:{dtype:"complex64"}}),g=c.data.get(v.dataId),y=g.complexTensorInfos.real,b=g.complexTensorInfos.imag,x=c.data.get(y.dataId).values,A=c.data.get(b.dataId).values,k=u(n(o.shape,s.shape,h,m,x,A),3),w=k[0],S=k[1],I=k[2],E=c.makeTensorInfo(I,"float32",w),C=c.makeTensorInfo(I,"float32",S),N=rW({inputs:{real:E,imag:C},backend:c});return c.disposeIntermediateTensorInfo(l),c.disposeIntermediateTensorInfo(v),c.disposeIntermediateTensorInfo(E),c.disposeIntermediateTensorInfo(C),N}var T=c.data.get(o.dataId).values,_=c.data.get(s.dataId).values,R=r||o.dtype,M=u(t(o.shape,s.shape,T,_,R),2),O=M[0],F=M[1];return c.makeTensorInfo(F,R,O)}}function pW(e){return function(t,n,r,a,i,o){var s=sI.assertAndGetBroadcastShape(t,n),u=Fh.sizeFromShape(s),c=s.length,l=Fh.computeStrides(s),d=Fh.getTypedArrayFromDType("float32",u),f=Fh.getTypedArrayFromDType("float32",u),p=sI.getBroadcastDims(t,s),h=sI.getBroadcastDims(n,s),m=sI.mergeRealAndImagArrays(r,a),v=sI.mergeRealAndImagArrays(i,o),g=t.length,y=Fh.computeStrides(t),b=n.length,x=Fh.computeStrides(n);if(p.length+h.length===0)for(var A=0;A<d.length;A++){var k=A%m.length,w=A%v.length,S=e(m[2*k],m[2*k+1],v[2*w],v[2*w+1]);d[A]=S.real,f[A]=S.imag}else for(var I=function(t){var n=Fh.indexToLoc(t,c,l),r=n.slice(-g);p.forEach((function(e){return r[e]=0}));var a=Fh.locToIndex(r,g,y),i=n.slice(-b);h.forEach((function(e){return i[e]=0}));var o=Fh.locToIndex(i,b,x),s=e(m[2*a],m[2*a+1],v[2*o],v[2*o+1]);d[t]=s.real,f[t]=s.imag},E=0;E<d.length;E++)I(E);return[d,f,s]}}var hW=nW((function(e,t){return e+t})),mW=pW((function(e,t,n,r){return{real:e+n,imag:t+r}})),vW=fW(pd,hW,mW),gW={kernelName:pd,backendName:"cpu",kernelFunc:vW};function yW(e,t,n,r,a){for(var i=Fh.sizeFromShape(r),o=Fh.makeZerosTypedArray(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(o[u]+=i>0?t[s]:1)}return o}function bW(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],i=e.shape[1],o=cg([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<i;u++){var c=e.get(s,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,s,c):t.size>0?o.set(o.get(s,c)+t.get(s,u),s,c):o.set(o.get(s,c)+1,s,c))}return o}function xW(e){return function(t,n,r){for(var a=Fh.getTypedArrayFromDType(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}function AW(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(ZB(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=o,c=u.data.get(s.dataId).values,l=Fh.sizeFromShape(s.shape),d=n||s.dtype,f=Fh.getArrayFromDType(d,l),p=0;p<l;++p)f[p]=t(c[p],i);return u.makeTensorInfo(s.shape,d,f)}}function kW(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(ZB(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=o,c=u.data.get(s.dataId).values,l=n||s.dtype,d=t(c,l,i);return u.makeTensorInfo(s.shape,l,d)}}var wW=xW((function(e){return Math.ceil(e)})),SW=kW(Fd,wW),IW={kernelName:Fd,backendName:"cpu",kernelFunc:SW};function EW(e,t,n,r){var a=Fh.getArrayFromDType(n,Fh.sizeFromShape(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=Fh.sizeFromShape(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?sI.fromUint8ToStringArray(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+o,c=0;c<e.shape[1];++c)a[u+c]=r[i++];o+=e.shape[1]}))}return a}var CW=nW((function(e,t){return e===t?1:0})),NW=fW(df,CW,null,"bool"),TW={kernelName:df,backendName:"cpu",kernelFunc:NW},_W=xW((function(e){return Math.exp(e)})),RW=kW(ff,_W,"float32"),MW={kernelName:ff,backendName:"cpu",kernelFunc:RW},OW=xW((function(e){return Math.expm1(e)})),FW=kW(hf,OW),PW={kernelName:hf,backendName:"cpu",kernelFunc:FW},DW=xW((function(e){return Math.floor(e)})),LW=kW(yf,DW),zW={kernelName:yf,backendName:"cpu",kernelFunc:LW};function BW(e,t,n,r,a,i,o,s,u){for(var c=cg([r,i],n),l=0;l<r;l++){for(var d=[],f=0,p=0;p<a;p++){var h=e[l*a+p];f+=h*o[p],d.push(h)}if(f<0||f>=u/i)throw new Error("Invalid indices: ".concat(d," does not index into ").concat(s));for(var m=0;m<i;m++)c.values[l*i+m]=t.get.apply(t,Tn(t.indexToLoc(f*i+m)))}return c}function WW(e,t,n){for(var r=cg(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a).slice(),o=i[0],s=i[2],u=t.locToIndex([o,s]);i[2]=t.values[u];var c=e.locToIndex(i);0<=c&&c<e.values.length&&(r.values[a]=e.values[c])}return r}var jW=nW((function(e,t){return e>t?1:0})),VW=fW(wf,jW,null,"bool"),UW={kernelName:wf,backendName:"cpu",kernelFunc:VW},HW=nW((function(e,t){return e>=t?1:0})),GW=fW(Sf,HW,null,"bool"),qW={kernelName:Sf,backendName:"cpu",kernelFunc:GW},KW=nW((function(e,t){return e<t?1:0})),XW=fW(Mf,KW,null,"bool"),ZW={kernelName:Mf,backendName:"cpu",kernelFunc:XW},YW=nW((function(e,t){return e<=t?1:0})),JW=fW(Of,YW,null,"bool"),QW={kernelName:Of,backendName:"cpu",kernelFunc:JW};function $W(e,t,n){var r=(t-e)/(n-1),a=Fh.makeZerosTypedArray(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}var ej=xW((function(e){return Math.log(e)})),tj=kW(Pf,ej),nj={kernelName:Pf,backendName:"cpu",kernelFunc:tj};function rj(e,t,n,r){for(var a=Fh.getTypedArrayFromDType(r,Fh.sizeFromShape(n)),i=0;i<a.length;++i){for(var o=i*t,s=e[o],u=0;u<t;++u){var c=e[o+u];(Number.isNaN(c)||c>s)&&(s=c)}a[i]=s}return a}var aj=nW((function(e,t){return Math.max(e,t)})),ij=fW(qf,aj),oj={kernelName:qf,backendName:"cpu",kernelFunc:ij},sj=nW((function(e,t){return Math.min(e,t)})),uj=fW(ep,sj),cj={kernelName:ep,backendName:"cpu",kernelFunc:uj},lj=nW((function(e,t){return e*t})),dj=pW((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),fj=fW(ap,lj,dj),pj={kernelName:ap,backendName:"cpu",kernelFunc:fj};function hj(e,t,n){var r=Fh.createScalarValue(-1,n);return lj([],t,r,e,n)}var mj={kernelName:ip,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;ZB(r,"neg");var a=u(hj(n.data.get(r.dataId).values,r.shape,r.dtype),2),i=a[0],o=a[1];return n.makeTensorInfo(o,r.dtype,i)}},vj=nW((function(e,t){return e!==t?1:0})),gj=fW(op,vj,null,"bool"),yj={kernelName:op,backendName:"cpu",kernelFunc:gj};function bj(e,t,n,r,a){for(var i=t.length,o=Fh.sizeFromShape(t),s=Fh.computeStrides(t),u=Fh.computeStrides(a),c=Fh.getTypedArrayFromDType(n,Fh.sizeFromShape(a)),l=0;l<o;++l){for(var d=Fh.indexToLoc(l,i,s),f=new Array(d.length),p=0;p<f.length;p++)f[p]=d[r[p]];c[Fh.locToIndex(f,i,u)]=e[l]}return c}function xj(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm;ZB(a,"transpose");for(var o=a.shape.length,s=new Array(o),u=0;u<s.length;u++)s[u]=a.shape[i[u]];var c=bj(r.data.get(a.dataId).values,a.shape,a.dtype,i,s);return{dataId:r.write(c,s,a.dtype),shape:s,dtype:a.dtype}}var Aj={kernelName:ch,backendName:"cpu",kernelFunc:xj};function kj(e,t,n,r){for(var a=u(sI.computeOutAndReduceShapes(e,r),2),i=a[0],o=a[1],s=Im(t,"int32"),c=Fh.makeZerosTypedArray(Fh.sizeFromShape(i),s),l=Fh.sizeFromShape(o),d=0;d<c.length;++d){for(var f=d*l,p=1,h=0;h<l;++h)p*=n[f+h];c[d]=p}return{outVals:c,outShape:i,outDtype:s}}var wj={kernelName:gp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;ZB(a,"prod");var s=a.shape.length,u=Fh.parseAxisParam(i,a.shape),c=sI.getAxesPermutation(u,s),l=u,d=a,f=[];null!=c&&(d=xj({inputs:{x:a},backend:n,attrs:{perm:c}}),f.push(d),l=sI.getInnerMostAxes(l.length,s));var p=n.data.get(d.dataId).values,h=kj(d.shape,d.dtype,p,l),m=h.outVals,v=h.outShape,g=h.outDtype,y=v;return o&&(y=sI.expandShapeToKeepDim(v,u)),f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,g,m)}};function Sj(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return Fh.makeZerosTypedArray(0,r);var a=Math.abs(Math.ceil((t-e)/n)),i=Fh.makeZerosTypedArray(a,r);t<e&&1===n&&(n=-1),i[0]=e;for(var o=1;o<i.length;o++)i[o]=i[o-1]+n;return i}var Ij=xW((function(e){return 1/Math.sqrt(e)})),Ej=kW(_p,Ij),Cj={kernelName:_p,backendName:"cpu",kernelFunc:Ej};function Nj(e,t,n,r,a,i,o,s,u,c){var l=[r/a,a],d=e.values,f=t.values;if(0===r)return cg(n,t.dtype);var p=cg(l,t.dtype);"string"==typeof u||"number"==typeof u?p.values.fill(u):"boolean"==typeof u&&p.values.fill(+u);for(var h=0;h<i;h++){for(var m=[],v=0,g=0;g<o;g++){var y=d[h*o+g];m.push(y),v+=y*s[g]}if(v<0||v>=r/a)throw new Error("Invalid indices: ".concat(m," does not index into ").concat(n));for(var b=0;b<a;b++)c?p.values[v*a+b]+=f[h*a+b]:p.values[v*a+b]=0===t.rank?f[0]:f[h*a+b]}return p}var Tj=xW((function(e){return 1/(1+Math.exp(-e))})),_j=AW(Bp,(function(e){return 1/(1+Math.exp(-e))})),Rj={kernelName:Bp,backendName:"cpu",kernelFunc:_j};function Mj(e,t,n,r,a){var i=Oy.isSliceContinous(r,t,n),o=Fh.sizeFromShape(n),s=Fh.computeStrides(r);if(i){var u=Oy.computeFlatOffset(t,s);return"string"===a?e.slice(u,u+o):e.subarray(u,u+o)}for(var c=cg(r,a,"string"===a?sI.fromUint8ToStringArray(e):e),l=cg(n,a),d=0;d<l.size;++d){var f=l.indexToLoc(d),p=f.map((function(e,n){return e+t[n]}));l.set.apply(l,[c.get.apply(c,Tn(p))].concat(Tn(f)))}return"string"===a?sI.fromStringArrayToUint8(l.values):l.values}function Oj(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size;ZB(a,"slice");var s=u(Oy.parseSliceParams(a,i,o),2),c=s[0],l=s[1];Oy.assertParamsValid(a,c,l);var d=Mj(n.data.get(a.dataId).values,c,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,d)}var Fj={kernelName:Pp,backendName:"cpu",kernelFunc:Oj};function Pj(e,t,n,r,a,i,o){var s=t[0],u=i[0],c=new Array(u),l=new Array(s),d=t[1];if(0===u){if(0!==s)throw new Error(sI.getSparseFillEmptyRowsIndicesDenseShapeMismatch(s));return[Fh.getArrayFromDType(n,0),[0,d],Fh.getArrayFromDType(a,0),c,l]}for(var f=!0,p=0,h=new Array(u).fill(0),m=0;m<s;++m){var v=e[m*d];if(v<0)throw new Error(sI.getSparseFillEmptyRowsNegativeIndexErrorMessage(m,v));if(v>=u)throw new Error(sI.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(m,v,u));++h[v],f=f&&v>=p,p=v}for(var g=!0,y=0;y<u;++y){var b=0===h[y];c[y]=b,g=g&&!b,h[y]=Math.max(h[y],1),y>0&&(h[y]+=h[y-1])}if(g&&f){for(var x=e,A=r,k=0;k<s;++k)l[k]=k;return[x,[s,d],A,c,l]}for(var w=h[u-1],S=Fh.getArrayFromDType(n,w*d),I=Fh.getArrayFromDType(a,w),E=new Array(u).fill(0),C=0;C<s;++C){var N=e[C*d],T=E[N],_=(0===N?0:h[N-1])+T;E[N]++;for(var R=0;R<d;++R)S[_*d+R]=e[C*d+R];I[_]=r[C],l[C]=_}for(var M=0;M<u;++M)if(0===E[M]){var O=0===M?0:h[M-1];S[O*d+0]=M;for(var F=1;F<d;++F)S[O*d+F]=0;I[O]=o}return[S,[w,d],I,c,l]}function Dj(e,t,n,r,a){for(var i=Fh.sizeFromShape(r),o=t[0],s=a.length,u=[],c=1,l=-1,d=0;d<s;++d){var f=a[d];if(-1===f){if(-1!==l)throw new Error(sI.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(l,d));l=d,u.push(1)}else{if(f<0)throw new Error(sI.getSparseReshapeNegativeOutputDimErrorMessage(d,f));c*=f,u.push(f)}}if(-1!==l){if(c<=0)throw new Error(sI.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());var p=Math.trunc(i/c);if(c*p!==i)throw new Error(sI.getSparseReshapeInputOutputMultipleErrorMessage(r,u));u[l]=p}if(Fh.sizeFromShape(u)!==i)throw new Error(sI.getSparseReshapeInputOutputMismatchErrorMessage(r,u));var h=r.length,m=[];if(h>0){m[h-1]=1;for(var v=h-2;v>=0;--v)m[v]=m[v+1]*r[v+1]}var g=[];if(s>0){g[s-1]=1;for(var y=s-2;y>=0;--y)g[y]=g[y+1]*u[y+1]}for(var b=Fh.getArrayFromDType(n,o*s),x=0;x<o;++x){for(var A=0,k=0;k<h;++k)A+=e[x*h+k]*m[k];for(var w=0;w<s;++w)b[x*s+w]=Math.trunc(A/g[w]),A%=g[w]}return[b,[o,s],u]}function Lj(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,u=[t[0],e.length/t[0]],c=u[1],l=s>0?a[s-1]+1:0;if(l<0)throw new Error(sI.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());var d=t.slice();d[0]=l;var f=d.reduce((function(e,t){return e*t}),1),p=Fh.getArrayFromDType(n,f);if(0===s)return l>0&&p.fill(o),[p,d];if(l<=0)throw new Error(sI.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());for(var h=0,m=1,v=0,g=a[h];;){var y=0;if(m<s){if(g===(y=a[m])){++m;continue}if(g>=y)throw new Error(sI.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(g<0||g>=l)throw new Error(sI.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(g,l));g>v&&p.fill(o,v*c,g*c);for(var b=h;b<m;++b){var x=r[b];if(x<0||x>=u[0])throw new Error(sI.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(b,r[b],u[0]));for(var A=0;A<c;A++)p[g*c+A]+=e[x*c+A]}if(i)for(var k=0;k<c;k++)p[g*c+k]/=m-h;if(h=m,v=g+1,g=y,++m>s)break}return v<l&&p.fill(o,v*c,l*c),[p,d]}var zj=xW((function(e){return Math.sqrt(e)})),Bj=AW(jp,(function(e){return Math.sqrt(e)})),Wj={kernelName:jp,backendName:"cpu",kernelFunc:Bj},jj=nW((function(e,t){var n=e-t;return n*n})),Vj=fW(Jp,jj),Uj={kernelName:Jp,backendName:"cpu",kernelFunc:Vj};function Hj(e,t,n,r){for(var a=cg(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),u=0;u<s.length;u++)s[u]=o[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat(Tn(o)))}return a}var Gj=function(){function e(t,n,r,a,i,o){Ye(this,e),this.separator=Fh.encodeString(t),this.nGramWidths=n,this.leftPad=Fh.encodeString(r),this.rightPad=Fh.encodeString(a),this.padWidth=i,this.preserveShort=o}return Qe(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,i){for(var o=this,s=function(s){var u=o.getPadWidth(i),c=Math.max(0,u-s),l=Math.max(0,u-(a-(s+1))),d=i-(c+l),f=t+(c>0?0:s-u),p=0;p+=c*o.leftPad.length;for(var h=0;h<d;++h)p+=e[f+h].length;p+=l*o.rightPad.length,p+=(c+l+d-1)*o.separator.length,n[r+s]=new Uint8Array(p);for(var m=n[r+s],v=0,g=function(e){return e.forEach((function(e){return m[v++]=e}))},y=0;y<c;++y)g(o.leftPad),g(o.separator);for(var b=0;b<d-1;++b)g(e[f+b]),g(o.separator);if(d>0){g(e[f+d-1]);for(var x=0;x<l;++x)g(o.separator),g(o.rightPad)}else{for(var A=0;A<l-1;++A)g(o.rightPad),g(o.separator);g(o.rightPad)}},u=0;u<a;++u)s(u)}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var i=t[0];if(0!==i)throw new Error("First split value must be 0, got ".concat(i));for(var o=1;o<a;++o){var s=t[o]>=i;if(!(s=s&&t[o]<=r))throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(i,", ").concat(r,"]"));i=t[o]}if(i!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(i))}var u=a-1,c=Fh.getArrayFromDType("int32",a);if(0===r||0===a){for(var l=new Array(r),d=0;d<=u;++d)c[d]=0;return[l,c]}c[0]=0;for(var f=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),c[e]=c[e-1]+a},p=1;p<=u;++p)f(p);for(var h=new Array(c[u]),m=function(r){var a=t[r],i=c[r];if(n.nGramWidths.forEach((function(o){var s=t[r+1]-t[r],u=n.getNumNGrams(s,o);n.createNGrams(e,a,h,i,u,o),i+=u})),n.preserveShort&&i===c[r]){var o=t[r+1]-t[r];if(0===o)return"continue";var s=o+2*n.padWidth;n.createNGrams(e,a,h,i,1,s)}},v=0;v<u;++v)m(v);return[h,c]}}]),e}();function qj(e,t,n,r,a,i,o,s){return new Gj(n,r,a,i,o,s).compute(e,t)}function Kj(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){var o=e.subarray(a,i);(!n||0!==o.length)&&r.push(o),a=i+1}}else{for(var s=t[0],u=e.indexOf(s);-1!==u;){var c=e.subarray(0,u);(!n||0!==c.length)&&r.push(c),u=(e=e.subarray(u+1)).indexOf(s)}(!n||0!==e.length)&&r.push(e)}else for(var l=0;l<e.length;++l)r.push(e.subarray(l,l+1))}function Xj(e,t,n){for(var r=e.length,a=[],i=0,o=0,s=new Array(r),u=0;u<r;++u){var c=a.length;Kj(e[u],t,n,a);var l=a.length-c;s[u]=l,i+=l,o=Math.max(o,l)}for(var d=Fh.getArrayFromDType("int32",2*i),f=new Array(i),p=[r,o],h=0,m=0;m<r;++m)for(var v=0;v<s[m];++v)d[2*h]=m,d[2*h+1]=v,f[h]=a[h],++h;return[d,f,p]}function Zj(e,t){for(var n=Fh.getArrayFromDType("int32",e.length),r=0;r<e.length;++r)n[r]=Fh.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}var Yj=nW((function(e,t){return e-t})),Jj=pW((function(e,t,n,r){return{real:e-n,imag:t-r}})),Qj=fW(rh,Yj,Jj),$j={kernelName:rh,backendName:"cpu",kernelFunc:Qj};function eV(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=cg(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=o[u]%e.shape[u];var c=e.locToIndex(s);a.values[i]=e.values[c]}return a}var tV=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function nV(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,i=t-n+1,o=Math.log(a),s=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*s*(a-s)/a)*Math.sign(i-a/2),c=Math.max(n,Math.floor(t-i*s/a+u)),l=Math.min(r,Math.floor(t+(a-i)*s/a+u));nV(e,t,c,l)}var d=e[t],f=n,p=r;for(Fh.swap(e,n,t),tV(e[r],d)>0&&Fh.swap(e,n,r);f<p;){for(Fh.swap(e,f,p),f++,p--;tV(e[f],d)<0;)f+=1;for(;tV(e[p],d)>0;)p-=1}0===tV(e[n],d)?Fh.swap(e,n,p):(p+=1,Fh.swap(e,p,r)),p<=t&&(n=p+1),t<=p&&(r=p-1)}}function rV(e,t,n,r,a){for(var i=t[t.length-1],o=e.length/i,s=i,u=Fh.getTypedArrayFromDType(n,o*r),c=Fh.getTypedArrayFromDType("int32",o*r),l=function(t){var n=t*s,i=e.subarray(n,n+s),o=new Array(i.length);i.forEach((function(e,t){return o[t]={value:e,index:t}})),r<o.length&&(nV(o,r),o=o.slice(0,r)),a&&o.sort(tV);for(var l=t*r,d=u.subarray(l,l+r),f=c.subarray(l,l+r),p=0;p<r;p++)d[p]=o[p].value,f[p]=o[p].index},d=0;d<o;d++)l(d);var f=t.slice();return f[f.length-1]=r,[cg(f,n,u),cg(f,"int32",c)]}function aV(e,t,n,r){for(var a=Fh.parseAxisParam(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var s=a+1;s<n.length;s++)i[2]*=n[s];for(var u={},c=new Int32Array(n[a]),l=new pm(i,r,e),d=[],f=1===i[0]&&1===i[2],p=0;p<n[a];p++){var h=void 0;if(f)h=e[p].toString();else{for(var m=[],v=0;v<i[0];v++)for(var g=0;g<i[2];g++)m.push(l.get(v,p,g));h=m.join(",")}if(void 0!==u[h])c[p]=u[h];else{var y=Object.keys(u).length;u[h]=y,c[p]=y,d.push(p)}}var b=i.slice();b[1]=Object.keys(u).length;var x=new pm(b,r);d.forEach((function(e,t){for(var n=0;n<i[0];n++)for(var r=0;r<i[2];r++)x.set(l.get(n,e,r),n,t,r)}));var A=n.slice();return A[a]=b[1],{outputValues:x.values,outputShape:A,indices:c}}var iV="0.0.0";iy("cpu",(function(){return new QB}),1);var oV=AW(uf,(function(e){return e>=0?e:Math.exp(e)-1})),sV={kernelName:uf,backendName:"cpu",kernelFunc:oV};function uV(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha;ZB([a],"leakyRelu");for(var o=Fh.sizeFromShape(a.shape),s=n.data.get(a.dataId).values,u=Fh.getTypedArrayFromDType("float32",o),c=0;c<s.length;c++)u[c]=s[c]<0?i*s[c]:s[c];return n.makeTensorInfo(a.shape,"float32",u)}var cV={kernelName:Rf,backendName:"cpu",kernelFunc:uV},lV=nW((function(e,t){return e<0?t*e:e}));function dV(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;ZB([r,a],"prelu");var i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=u(lV(r.shape,a.shape,i,o,"float32"),2),c=s[0],l=s[1];return n.makeTensorInfo(l,"float32",c)}var fV={kernelName:vp,backendName:"cpu",kernelFunc:dV},pV=AW(Ap,(function(e){return Math.max(0,e)})),hV={kernelName:Ap,backendName:"cpu",kernelFunc:pV},mV=AW(Cp,(function(e){return Math.min(Math.max(0,e),6)})),vV={kernelName:Cp,backendName:"cpu",kernelFunc:mV};function gV(e,t,n,r,a){if("linear"===n)return oW({inputs:{x:t},backend:e});if("relu"===n)return pV({inputs:{x:t},backend:e});if("elu"===n)return oV({inputs:{x:t},backend:e});if("relu6"===n)return mV({inputs:{x:t},backend:e});if("prelu"===n)return dV({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return uV({inputs:{x:t},backend:e,attrs:{alpha:a}});if("sigmoid"===n)return _j({inputs:{x:t},backend:e});throw new Error("Activation ".concat(n," has not been implemented for the CPU backend."))}function yV(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=Fh.sizeFromShape(a.shape),s=Fh.inferFromImplicitShape(i,o),u=Fh.sizeFromShape(s);Fh.assert(o===u,(function(){return"The new shape (".concat(s,") has ").concat(u," elements and the old shape (").concat(a.shape,") has ").concat(o," elements. The new shape and old shape must have the same number of elements.")})),n.incRef(a.dataId);var c=n.data.get(a.dataId);if(null!=c.complexTensorInfos){var l=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;l.shape=s,d.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var bV={kernelName:kp,backendName:"cpu",kernelFunc:yV};function xV(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;ZB([a,i],"matMul");var c=a.shape.length,l=i.shape.length,d=o?a.shape[c-2]:a.shape[c-1],f=s?i.shape[l-1]:i.shape[l-2],p=o?a.shape[c-1]:a.shape[c-2],h=s?i.shape[l-2]:i.shape[l-1],m=a.shape.slice(0,-2),v=i.shape.slice(0,-2),g=Fh.sizeFromShape(m),y=Fh.sizeFromShape(v),b=py.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([p,h]);Fh.assert(d===f,(function(){return"Error in matMul: inner shapes (".concat(d,") and (").concat(f,") of Tensors with shapes ").concat(a.shape," and ").concat(i.shape," and transposeA=").concat(o," and transposeB=").concat(s," must match.")}));for(var x=s?[y,h,f]:[y,f,h],A=yV({inputs:{x:a},backend:n,attrs:{shape:o?[g,d,p]:[g,p,d]}}),k=yV({inputs:{x:i},backend:n,attrs:{shape:x}}),w=o?A.shape[1]:A.shape[2],S=o?A.shape[2]:A.shape[1],I=s?k.shape[1]:k.shape[2],E=Math.max(g,y),C=n.data.get(A.dataId).values,N=n.data.get(k.dataId).values,T=Fh.computeStrides(A.shape),_=Fh.computeStrides(k.shape),R=u(o?[T[0],1,T[1]]:[T[0],T[1],1],3),M=R[0],O=R[1],F=R[2],P=u(s?[1,_[1],_[0]]:[_[1],1,_[0]],3),D=P[0],L=P[1],z=P[2],B=S*I,W=cg([E,S,I],A.dtype),j=W.values,V=n.blockSize,U=0;U<E;U++)for(var H=0;H<S;H+=V)for(var G=0;G<I;G+=V)for(var q=0;q<w;q+=V)for(var K=Math.min(H+V,S),X=Math.min(G+V,I),Z=Math.min(q+V,w),Y=H;Y<K;Y++)for(var J=G;J<X;J++){for(var Q=0,$=q;$<Z;$++){var ee=Math.min(U,g-1)*M,te=Math.min(U,y-1)*z;Q+=C[ee+Y*O+$*F]*N[$*D+J*L+te]}j[U*B+(Y*I+J)]+=Q}return n.disposeIntermediateTensorInfo(A),n.disposeIntermediateTensorInfo(k),n.makeTensorInfo(b,W.dtype,W.values)}var AV={kernelName:Nd,backendName:"cpu",kernelFunc:xV};var kV={kernelName:yh,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,i=e.backend,o=e.attrs,s=a.a,u=a.b,c=a.bias,l=a.preluActivationWeights,d=o.transposeA,f=o.transposeB,p=o.activation,h=o.leakyreluAlpha,m=[];t=xV({inputs:{a:s,b:u},attrs:{transposeA:d,transposeB:f},backend:i}),c&&(n=vW({inputs:{a:t,b:c},backend:i}),m.push(t),t=n),p&&(r=gV(i,t,p,l,h),m.push(t),t=r);for(var v=0,g=m;v<g.length;v++){var y=g[v];i.disposeIntermediateTensorInfo(y)}return t}},wV=AW(dd,(function(e){return Math.acos(e)})),SV={kernelName:dd,backendName:"cpu",kernelFunc:wV},IV=AW(fd,(function(e){return Math.acosh(e)})),EV={kernelName:fd,backendName:"cpu",kernelFunc:IV};var CV={kernelName:hd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;ZB(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),i=cg(r[0].shape,r[0].dtype),o=i.values,s=0;s<r.length;s++)for(var u=a[s],c=0;c<o.length;c++)o[c]+=u[c];return n.makeTensorInfo(i.shape,i.dtype,i.values)}};var NV={kernelName:md,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;ZB(a,"all");var s=Fh.parseAxisParam(i,a.shape),c=s,l=sI.getAxesPermutation(c,a.shape.length),d=a;null!=l&&(d=xj({inputs:{x:a},backend:n,attrs:{perm:l}}),c=sI.getInnerMostAxes(c.length,a.shape.length)),sI.assertAxesAreInnerMostDims("all",c,d.shape.length);for(var f=u(sI.computeOutAndReduceShapes(d.shape,c),2),p=f[0],h=f[1],m=Fh.sizeFromShape(h),v=Fh.makeZerosTypedArray(Fh.sizeFromShape(p),d.dtype),g=n.data.get(d.dataId).values,y=0;y<v.length;++y){for(var b=y*m,x=g[b],A=0;A<m;++A){var k=g[b+A];x=x&&k}v[y]=x}null!=l&&n.disposeIntermediateTensorInfo(d);var w=n.makeTensorInfo(p,d.dtype,v);if(o){var S=yV({inputs:{x:w},backend:n,attrs:{shape:sI.expandShapeToKeepDim(p,s)}});return n.disposeIntermediateTensorInfo(w),S}return w}};var TV={kernelName:vd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;ZB(a,"any");var s=Fh.parseAxisParam(i,a.shape),c=s,l=sI.getAxesPermutation(c,a.shape.length),d=a;null!=l&&(d=xj({inputs:{x:a},backend:n,attrs:{perm:l}}),c=sI.getInnerMostAxes(c.length,a.shape.length)),sI.assertAxesAreInnerMostDims("any",c,d.shape.length);for(var f=u(sI.computeOutAndReduceShapes(d.shape,c),2),p=f[0],h=f[1],m=Fh.sizeFromShape(h),v=Fh.makeZerosTypedArray(Fh.sizeFromShape(p),d.dtype),g=n.data.get(d.dataId).values,y=0;y<v.length;++y){for(var b=y*m,x=g[b],A=0;A<m;++A){var k=g[b+A];x=x||k}v[y]=x}null!=l&&n.disposeIntermediateTensorInfo(d);var w=n.makeTensorInfo(p,d.dtype,v);if(o){var S=yV({inputs:{x:w},backend:n,attrs:{shape:sI.expandShapeToKeepDim(p,s)}});return n.disposeIntermediateTensorInfo(w),S}return w}};var _V={kernelName:gd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;ZB(a,"argMax");var o=Fh.parseAxisParam(i,a.shape),s=sI.getAxesPermutation(o,a.shape.length),c=a,l=[];null!=s&&(c=xj({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(c),o=sI.getInnerMostAxes(o.length,c.shape.length)),o=[o[0]],sI.assertAxesAreInnerMostDims("argMax",o,c.shape.length);for(var d=u(sI.computeOutAndReduceShapes(c.shape,o),2),f=d[0],p=d[1],h=Fh.sizeFromShape(f),m=Fh.makeZerosTypedArray(h,"int32"),v=Fh.sizeFromShape(p),g=n.data.get(c.dataId).values,y=0;y<m.length;++y){for(var b=y*v,x=g[b],A=0,k=0;k<v;++k){var w=g[b+k];w>x&&(x=w,A=k)}m[y]=A}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",m)}};var RV={kernelName:yd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;ZB(a,"argMin");var o=Fh.parseAxisParam(i,a.shape),s=sI.getAxesPermutation(o,a.shape.length),c=a,l=[];null!=s&&(c=xj({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(c),o=sI.getInnerMostAxes(o.length,c.shape.length)),o=[o[0]],sI.assertAxesAreInnerMostDims("argMin",o,c.shape.length);for(var d=u(sI.computeOutAndReduceShapes(c.shape,o),2),f=d[0],p=d[1],h=Fh.sizeFromShape(f),m=Fh.makeZerosTypedArray(h,"int32"),v=Fh.sizeFromShape(p),g=n.data.get(c.dataId).values,y=0;y<m.length;++y){for(var b=y*v,x=g[b],A=0,k=0;k<v;++k){var w=g[b+k];w<x&&(x=w,A=k)}m[y]=A}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(f,"int32",m)}},MV=AW(bd,(function(e){return Math.asin(e)})),OV={kernelName:bd,backendName:"cpu",kernelFunc:MV},FV=AW(xd,(function(e){return Math.asinh(e)})),PV={kernelName:xd,backendName:"cpu",kernelFunc:FV},DV=AW(Ad,(function(e){return Math.atan(e)})),LV={kernelName:Ad,backendName:"cpu",kernelFunc:DV},zV=nW((function(e,t){return Math.atan2(e,t)})),BV=fW(wd,zV),WV={kernelName:wd,backendName:"cpu",kernelFunc:BV},jV=AW(kd,(function(e){return Math.atanh(e)})),VV={kernelName:kd,backendName:"cpu",kernelFunc:jV};function UV(e,t,n,r,a,i){for(var o=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,c=a.dilationWidth,l=a.effectiveFilterHeight,d=a.effectiveFilterWidth,f=a.padInfo.top,p=a.padInfo.left,h="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=cg(a.outShape,n),v=m.values,g=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var A=x*g,k=x*r[0],w=0;w<a.inChannels;++w)for(var S=0;S<a.outHeight;++S)for(var I=S*o-f,E=Math.max(0,I),C=Math.min(a.inHeight,l+I),N=A+S*y,T=0;T<a.outWidth;++T){for(var _=T*s-p,R=Math.max(0,_),M=Math.min(a.inWidth,d+_),O=h,F=0,P=0,D=E;D<C;D+=u){for(var L=k+D*r[1],z=R;z<M;z+=c){var B=e[L+z*r[2]+w];"max"===i&&B>O?O=B:"avg"===i&&(F+=B,P++)}if(isNaN(O))break}v[N+T*b+w]="avg"===i?F/P:O}return m}function HV(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=cg(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,c=r.dilationHeight,l=r.dilationWidth,d=r.effectiveFilterHeight,f=r.effectiveFilterWidth,p=r.padInfo.top,h=r.padInfo.left,m=cg(t,n,e),v=0;v<r.batchSize;++v)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.outHeight;++y){for(var b=y*s-p,x=b;x<0;)x+=c;for(var A=Math.min(r.inHeight,d+b),k=0;k<r.outWidth;++k){for(var w=k*u-h,S=w;S<0;)S+=l;for(var I=Math.min(r.inWidth,f+w),E=Number.NEGATIVE_INFINITY,C=-1,N=x;N<A;N+=c)for(var T=N-b,_=S;_<I;_+=l){var R=_-w,M=m.get(v,N,_,g);M>E&&(E=M,C=a?i?((v*r.inHeight+N)*r.inWidth+_)*r.inChannels+g:(N*r.inWidth+_)*r.inChannels+g:T*f+R)}o.set(C,v,y,k,g)}}return o}function GV(e,t,n,r,a,i){for(var o=a.strideDepth,s=a.strideHeight,u=a.strideWidth,c=a.dilationDepth,l=a.dilationHeight,d=a.dilationWidth,f=a.effectiveFilterDepth,p=a.effectiveFilterHeight,h=a.effectiveFilterWidth,m=a.padInfo.front,v=a.padInfo.top,g=a.padInfo.left,y="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=cg(a.outShape,n),x=b.values,A=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[2]*a.outShape[3]*a.outShape[4],w=a.outShape[3]*a.outShape[4],S=a.outShape[4],I=0;I<a.batchSize;++I)for(var E=I*A,C=I*r[0],N=0;N<a.inChannels;++N)for(var T=0;T<a.outDepth;++T){for(var _=T*o-m,R=_;R<0;)R+=c;for(var M=Math.min(a.inDepth,f+_),O=E+T*k,F=0;F<a.outHeight;++F){for(var P=F*s-v,D=P;D<0;)D+=l;for(var L=Math.min(a.inHeight,p+P),z=O+F*w,B=0;B<a.outWidth;++B){for(var W=B*u-g,j=W;j<0;)j+=d;for(var V=Math.min(a.inWidth,h+W),U=z+B*S,H=y,G=0,q=0,K=R;K<M;K+=c){for(var X=C+K*r[1],Z=D;Z<L;Z+=l){for(var Y=X+Z*r[2],J=j;J<V;J+=d){var Q=e[Y+J*r[3]+N];if("max"===i&&Q>H?H=Q:"avg"===i&&(G+=Q,q++),isNaN(H))break}if(isNaN(H))break}if(isNaN(H))break}x[U+N]="avg"===i?G/q:H}}}return b}var qV={kernelName:Sd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;ZB(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Fh.assert(sI.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(1,"'")}));var c,l=sI.computePool2DInfo(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&Fh.arraysEqual(l.inShape,l.outShape))c=oW({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,f=Fh.computeStrides(a.shape),p=UV(d,a.shape,a.dtype,f,l,"avg");c=n.makeTensorInfo(l.outShape,a.dtype,p.values)}return c}};var KV={kernelName:Ed,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;ZB(a,"avgPool3d");var l=sI.computePool3DInfo(a.shape,i,o,1,s,u,c),d=GV(n.data.get(a.dataId).values,a.shape,a.dtype,Fh.computeStrides(a.shape),l,"avg");return n.makeTensorInfo(d.shape,"float32",d.values)}};var XV={kernelName:Cd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;ZB([a,i],"avgPool3DGrad");for(var l=sI.computePool3DInfo(i.shape,o,s,1,u,c),d=l.strideDepth,f=l.strideHeight,p=l.strideWidth,h=l.filterDepth,m=l.filterHeight,v=l.filterWidth,g=l.dilationDepth,y=l.dilationHeight,b=l.dilationWidth,x=l.effectiveFilterDepth,A=l.effectiveFilterHeight,k=l.effectiveFilterWidth,w=x-1-l.padInfo.front,S=k-1-l.padInfo.left,I=A-1-l.padInfo.top,E=cg(i.shape,"float32"),C=1/(h*m*v),N=n.bufferSync(a),T=0;T<l.batchSize;++T)for(var _=0;_<l.inChannels;++_)for(var R=0;R<l.inDepth;++R)for(var M=0;M<l.inHeight;++M)for(var O=0;O<l.inWidth;++O){for(var F=R-w,P=M-I,D=O-S,L=0,z=0;z<x;z+=g){var B=(F+z)/d;if(!(B<0||B>=l.outDepth||Math.floor(B)!==B))for(var W=0;W<A;W+=y){var j=(P+W)/f;if(!(j<0||j>=l.outHeight||Math.floor(j)!==j))for(var V=0;V<k;V+=b){var U=(D+V)/p;U<0||U>=l.outWidth||Math.floor(U)!==U||(L+=N.get(T,B,j,U,_))}}}E.set(L*C,T,R,M,O,_)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}};var ZV={kernelName:Id,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;ZB([a,i],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=sI.computePool2DInfo(o.shape,s,u,1,c),d=l.strideHeight,f=l.strideWidth,p=l.filterHeight,h=l.filterWidth,m=l.dilationHeight,v=l.dilationWidth,g=l.effectiveFilterHeight,y=l.effectiveFilterWidth,b=y-1-l.padInfo.left,x=g-1-l.padInfo.top,A=cg(o.shape,"float32"),k=1/(p*h),w=n.data.get(a.dataId).values,S=cg(a.shape,"float32",w),I=0;I<l.batchSize;++I)for(var E=0;E<l.inChannels;++E)for(var C=0;C<l.inHeight;++C)for(var N=0;N<l.inWidth;++N){for(var T=C-x,_=N-b,R=0,M=0;M<g;M+=m){var O=(T+M)/d;if(!(O<0||O>=l.outHeight||Math.floor(O)!==O))for(var F=0;F<y;F+=v){var P=(_+F)/f;P<0||P>=l.outWidth||Math.floor(P)!==P||(R+=S.get(I,O,P,E))}}A.set(R*k,I,C,N,E)}return n.makeTensorInfo(A.shape,A.dtype,A.values)}};var YV={kernelName:xf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.scale,o=t.offset,s=t.mean,u=t.variance;Fh.assert(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Fh.assert(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Fh.assert(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),ZB([a,s,u,i,o],"batchNorm");var c=r.varianceEpsilon;null==c&&(c=.001);for(var l=n.data.get(a.dataId).values,d=n.data.get(s.dataId).values,f=n.data.get(u.dataId).values,p=i?n.data.get(i.dataId).values:new Float32Array([1]),h=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(l.length),v=h.length,g=p.length,y=f.length,b=d.length,x=0,A=0,k=0,w=0,S=0;S<l.length;++S)m[S]=h[x++]+(l[S]-d[A++])*p[k++]/Math.sqrt(f[w++]+c),x>=v&&(x=0),A>=b&&(A=0),k>=g&&(k=0),w>=y&&(w=0);return n.makeTensorInfo(a.shape,a.dtype,m)}};var JV={kernelName:Td,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;ZB([a],"batchToSpaceND");var s=i.reduce((function(e,t){return e*t})),u=sI.getReshaped(a.shape,i,s),c=sI.getPermuted(u.length,i.length),l=sI.getReshapedPermuted(a.shape,i,s),d=sI.getSliceBeginCoords(o,i.length),f=sI.getSliceSize(l,o,i.length),p=yV({inputs:{x:a},backend:n,attrs:{shape:u}}),h=xj({inputs:{x:p},backend:n,attrs:{perm:c}}),m=yV({inputs:{x:h},backend:n,attrs:{shape:l}}),v=Oj({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),v}};var QV={kernelName:_d,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=yW(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}};var $V={kernelName:Md,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=sI.assertAndGetBroadcastShape(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},eU=AW(Pd,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),tU={kernelName:Pd,backendName:"cpu",kernelFunc:eU},nU={kernelName:Ld,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(Fh.sizeFromShape(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,c=0;c<s.length;c++){var l=s[c],d=u[c];r[c]=Math.hypot(l,d)}return n.makeOutput(r,t.shape,"float32")}};function rU(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var aU={kernelName:Cf,backendName:"cpu",kernelFunc:rU};function iU(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,a=Fh.parseAxisParam(r,t[0].shape)[0],i=sI.computeOutShape(t.map((function(e){return e.shape})),a);if(0===Fh.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);var o=t.filter((function(e){return Fh.sizeFromShape(e.shape)>0}));if(1===o.length)return oW({inputs:{x:o[0]},backend:n});var s=o.map((function(e){return e.shape}));if(sI.assertParamsConsistent(s,a),"complex64"===o[0].dtype){var u=o.map((function(e){return uW({inputs:{input:e},backend:n})})),c=o.map((function(e){return rU({inputs:{input:e},backend:n})})),l=iU({inputs:u,backend:n,attrs:{axis:a}}),d=iU({inputs:c,backend:n,attrs:{axis:a}}),f=rW({inputs:{real:l,imag:d},backend:n});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),f}var p=o.map((function(e){var t=Fh.sizeFromShape(e.shape.slice(a));return yV({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),h=p.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));i=sI.computeOutShape(p.map((function(e){return e.shape})),1);var m=1===p[0].shape[0],v=EW(h,i,t[0].dtype,m),g=sI.computeOutShape(o.map((function(e){return e.shape})),a),y=n.makeTensorInfo(g,t[0].dtype,v);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}var oU={kernelName:zd,backendName:"cpu",kernelFunc:iU};function sU(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dilations,l=r.dimRoundingMode;ZB([a,i],"conv2d");for(var d=sI.convertConv2DDataFormat(u),f=sI.computeConv2DInfo(a.shape,i.shape,o,c,s,l,!1,d),p=f.filterHeight,h=f.filterWidth,m=f.dilationHeight,v=f.dilationWidth,g=f.padInfo.left,y=f.padInfo.top,b="channelsLast"===f.dataFormat,x=new pm(f.outShape,a.dtype),A=Fh.computeStrides(a.shape),k=Fh.computeStrides(i.shape),w=A[0],S=b?A[1]:A[2],I=b?A[2]:1,E=b?1:A[1],C=x.strides[0],N=b?x.strides[1]:x.strides[2],T=b?x.strides[2]:1,_=b?1:x.strides[1],R=n.data.get(a.dataId).values,M=n.data.get(i.dataId).values,O=x.values,F=0;F<f.batchSize;++F)for(var P=F*w,D=F*C,L=0;L<f.outHeight;++L)for(var z=D+L*N,B=L*f.strideHeight-y,W=0;W<p;++W){var j=B+W*m;if(!(j<0||j>=f.inHeight))for(var V=W*k[0],U=P+j*S,H=0;H<f.outWidth;++H)for(var G=z+H*T,q=H*f.strideWidth-g,K=0;K<h;++K){var X=q+K*v;if(!(X<0||X>=f.inWidth))for(var Z=U+X*I,Y=V+K*k[1],J=0;J<f.inChannels;++J){for(var Q=R[Z+J*E],$=0;$<f.outChannels;++$)O[G+$*_]+=Q*M[Y+$];Y+=f.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,O)}var uU={kernelName:Bd,backendName:"cpu",kernelFunc:sU};var cU={kernelName:Wd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape;ZB([a,i],"conv2dBackpropFilter");for(var d=sI.convertConv2DDataFormat(u),f=sI.computeConv2DInfo(a.shape,l,o,1,s,c,!1,d),p=f.strideHeight,h=f.strideWidth,m=f.filterHeight,v=f.filterWidth,g="channelsLast"===f.dataFormat,y=new pm(f.filterShape,"float32"),b=f.padInfo.left,x=f.padInfo.top,A=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,w=new pm(a.shape,a.dtype,A),S=new pm(i.shape,i.dtype,k),I=0;I<m;++I)for(var E=Math.max(0,Math.ceil((x-I)/p)),C=Math.min(f.outHeight,(f.inHeight+x-I)/p),N=0;N<v;++N)for(var T=Math.max(0,Math.ceil((b-N)/h)),_=Math.min(f.outWidth,(f.inWidth+b-N)/h),R=0;R<f.inChannels;++R)for(var M=0;M<f.outChannels;++M){for(var O=0,F=0;F<f.batchSize;++F)for(var P=E;P<C;++P)for(var D=I+P*p-x,L=T;L<_;++L){var z=N+L*h-b;O+=g?w.get(F,D,z,R)*S.get(F,P,L,M):w.get(F,R,D,z)*S.get(F,M,P,L)}y.set(O,I,N,R,M)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var lU={kernelName:jd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,c=r.pad,l=r.dataFormat,d=r.dimRoundingMode;ZB([a,i],"conv2dBackpropInput");var f=Fh.computeStrides(i.shape),p=Fh.computeStrides(a.shape),h=sI.convertConv2DDataFormat(l),m=sI.computeConv2DInfo(o,i.shape,s,1,c,d,!1,h),v=new pm(m.inShape,"float32"),g=v.values,y=n.data.get(a.dataId).values,b=n.data.get(i.dataId).values,x=u(f,3),A=x[0],k=x[1],w=x[2],S=m.batchSize,I=m.filterHeight,E=m.filterWidth,C=m.inChannels,N=m.inHeight,T=m.inWidth,_=m.outChannels,R=m.outHeight,M=m.outWidth,O=m.strideHeight,F=m.strideWidth;h=m.dataFormat;for(var P=I-1-m.padInfo.top,D=E-1-m.padInfo.left,L="channelsLast"===h,z=v.strides[0],B=L?v.strides[1]:v.strides[2],W=L?v.strides[2]:1,j=L?1:v.strides[1],V=p[0],U=L?p[1]:p[2],H=L?p[2]:1,G=L?1:p[1],q=0;q<S;++q)for(var K=0;K<C;++K)for(var X=0;X<N;++X)for(var Z=X-P,Y=Math.max(0,Math.ceil(Z/O)),J=Math.min(R,(I+Z)/O),Q=0;Q<T;++Q){for(var $=Q-D,ee=Math.max(0,Math.ceil($/F)),te=Math.min(M,(E+$)/F),ne=0,re=Y;re<J;++re)for(var ae=re*O-Z,ie=ee;ie<te;++ie)for(var oe=V*q+U*re+H*ie,se=A*(I-1-ae)+k*(E-1-(ie*F-$))+w*K,ue=0;ue<_;++ue){ne+=y[oe+G*ue]*b[se+ue]}g[z*q+B*X+W*Q+j*K]=ne}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var dU={kernelName:Vd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations;ZB([a,i],"conv3d");for(var c=sI.computeConv3DInfo(a.shape,i.shape,o,u,s),l=c.filterDepth,d=c.filterHeight,f=c.filterWidth,p=c.dilationDepth,h=c.dilationHeight,m=c.dilationWidth,v=c.padInfo,g=v.front,y=v.left,b=v.top,x=new pm(c.outShape,a.dtype),A=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,w=x.values,S=Fh.computeStrides(a.shape),I=Fh.computeStrides(i.shape),E=0;E<c.batchSize;++E)for(var C=E*S[0],N=E*x.strides[0],T=0;T<c.outDepth;++T)for(var _=N+T*x.strides[1],R=T*c.strideDepth-g,M=0;M<l;++M){var O=R+M*p;if(!(O<0||O>=c.inDepth))for(var F=M*I[0],P=C+O*S[1],D=0;D<c.outHeight;++D)for(var L=_+D*x.strides[2],z=D*c.strideHeight-b,B=0;B<d;++B){var W=z+B*h;if(!(W<0||W>=c.inHeight))for(var j=F+B*I[1],V=P+W*S[2],U=0;U<c.outWidth;++U)for(var H=L+U*c.outChannels,G=U*c.strideWidth-y,q=0;q<f;++q){var K=G+q*m;if(!(K<0||K>=c.inWidth))for(var X=j+q*I[2],Z=V+K*c.inChannels,Y=X,J=0;J<c.inChannels;++J){for(var Q=A[Z+J],$=0;$<c.outChannels;++$)w[H+$]+=Q*k[Y+$];Y+=c.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var fU={kernelName:Ud,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,c=r.filterShape;ZB([a,i],"conv3dBackpropFilterV2");for(var l=Fh.computeStrides(a.shape),d=Fh.computeStrides(i.shape),f=sI.computeConv3DInfo(a.shape,c,o,1,s),p=f.strideDepth,h=f.strideHeight,m=f.strideWidth,v=f.filterDepth,g=f.filterHeight,y=f.filterWidth,b=new pm(f.filterShape,"float32"),x=b.values,A=u(b.strides,4),k=A[0],w=A[1],S=A[2],I=A[3],E=n.data.get(i.dataId).values,C=u(d,4),N=C[0],T=C[1],_=C[2],R=C[3],M=n.data.get(a.dataId).values,O=u(l,4),F=O[0],P=O[1],D=O[2],L=O[3],z=f.padInfo.front,B=f.padInfo.left,W=f.padInfo.top,j=0;j<v;++j)for(var V=Math.max(0,Math.ceil((z-j)/p)),U=Math.min(f.outDepth,(f.inDepth+z-j)/p),H=j*k,G=0;G<g;++G)for(var q=Math.max(0,Math.ceil((W-G)/h)),K=Math.min(f.outHeight,(f.inHeight+W-G)/h),X=G*w+H,Z=0;Z<y;++Z)for(var Y=Math.max(0,Math.ceil((B-Z)/m)),J=Math.min(f.outWidth,(f.inWidth+B-Z)/m),Q=Z*S+X,$=0;$<f.inChannels;++$)for(var ee=$*I+Q,te=0;te<f.outChannels;++te){for(var ne=0,re=0;re<f.batchSize;++re)for(var ae=re*F,ie=re*N,oe=V;oe<U;++oe)for(var se=(j+oe*p-z)*P+ae,ue=oe*T+ie,ce=q;ce<K;++ce)for(var le=(G+ce*h-W)*D+se,de=ce*_+ue,fe=Y;fe<J;++fe){var pe=fe*R+de;ne+=M[(Z+fe*m-B)*L+le+$]*E[pe+te]}x[ee+te]=ne}return n.makeTensorInfo(b.shape,b.dtype,b.values)}};var pU={kernelName:Hd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,c=r.inputShape;ZB([a],"conv3dBackpropInputV2");for(var l=Fh.computeStrides(a.shape),d=Fh.computeStrides(i.shape),f=sI.computeConv3DInfo(c,i.shape,s,1,o),p=new pm(f.inShape,"float32"),h=p.values,m=u(p.strides,4),v=m[0],g=m[1],y=m[2],b=m[3],x=n.data.get(a.dataId).values,A=u(l,4),k=A[0],w=A[1],S=A[2],I=A[3],E=n.data.get(i.dataId).values,C=u(d,4),N=C[0],T=C[1],_=C[2],R=C[3],M=f.batchSize,O=f.filterDepth,F=f.filterHeight,P=f.filterWidth,D=f.inChannels,L=f.inDepth,z=f.inHeight,B=f.inWidth,W=f.outChannels,j=f.outDepth,V=f.outHeight,U=f.outWidth,H=f.strideDepth,G=f.strideHeight,q=f.strideWidth,K=O-1-f.padInfo.front,X=F-1-f.padInfo.top,Z=P-1-f.padInfo.left,Y=0;Y<M;++Y)for(var J=0;J<D;++J)for(var Q=0;Q<L;++Q)for(var $=Q-K,ee=Math.max(0,Math.ceil($/H)),te=Math.min(j,(O+$)/H),ne=0;ne<z;++ne)for(var re=ne-X,ae=Math.max(0,Math.ceil(re/G)),ie=Math.min(V,(F+re)/G),oe=0;oe<B;++oe){for(var se=oe-Z,ue=Math.max(0,Math.ceil(se/q)),ce=Math.min(U,(P+se)/q),le=0,de=ee;de<te;++de)for(var fe=de*H-$,pe=ae;pe<ie;++pe)for(var he=pe*G-re,me=ue;me<ce;++me)for(var ve=k*Y+w*de+S*pe+I*me,ge=N*(O-1-fe)+T*(F-1-he)+_*(P-1-(me*q-se))+R*J,ye=0;ye<W;++ye){le+=x[ve+ye]*E[ge+ye]}h[v*Y+g*Q+y*ne+b*oe+J]=le}return n.makeTensorInfo(p.shape,p.dtype,p.values)}},hU=AW(Gd,(function(e){return Math.cos(e)})),mU={kernelName:Gd,backendName:"cpu",kernelFunc:hU},vU=AW(qd,(function(e){return Math.cosh(e)})),gU={kernelName:qd,backendName:"cpu",kernelFunc:vU};var yU={kernelName:Zd,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,c=r.method,l=r.extrapolationValue,d=u(a.shape,4),f=d[0],p=d[1],h=d[2],m=d[3],v=i.shape[0],g=u(s,2),y=g[0],b=g[1],x=cg([v,y,b,m],"float32"),A=n.data.get(i.dataId).values,k=n.data.get(o.dataId).values,w=n.data.get(a.dataId).values,S=Fh.computeStrides(a.shape),I=Fh.computeStrides(x.shape),E=0;E<v;E++){var C=4*E,N=A[C],T=A[C+1],_=A[C+2],R=A[C+3],M=k[E];if(!(M>=f))for(var O=y>1?(_-N)*(p-1)/(y-1):0,F=b>1?(R-T)*(h-1)/(b-1):0,P=0;P<y;P++){var D=y>1?N*(p-1)+P*O:.5*(N+_)*(p-1);if(D<0||D>p-1)for(var L=0;L<b;L++)for(var z=0;z<m;z++){var B=z+L*I[2]+P*I[1]+E*I[0];x.values[B]=l}else if("bilinear"===c)for(var W=Math.floor(D),j=Math.ceil(D),V=D-W,U=0;U<b;U++){var H=b>1?T*(h-1)+U*F:.5*(T+R)*(h-1);if(H<0||H>h-1)for(var G=0;G<m;G++){var q=G+U*I[2]+P*I[1]+E*I[0];x.values[q]=l}else for(var K=Math.floor(H),X=Math.ceil(H),Z=H-K,Y=0;Y<m;Y++){var J=Y+K*S[2]+W*S[1]+M*S[0],Q=w[J],$=w[J=Y+X*S[2]+W*S[1]+M*S[0]],ee=w[J=Y+K*S[2]+j*S[1]+M*S[0]],te=Q+($-Q)*Z,ne=ee+(w[J=Y+X*S[2]+j*S[1]+M*S[0]]-ee)*Z;J=Y+U*I[2]+P*I[1]+E*I[0],x.values[J]=te+(ne-te)*V}}else for(var re=0;re<b;++re){var ae=b>1?T*(h-1)+re*F:.5*(T+R)*(h-1);if(ae<0||ae>h-1)for(var ie=0;ie<m;ie++){var oe=ie+re*I[2]+P*I[1]+E*I[0];x.values[oe]=l}else for(var se=Math.round(ae),ue=Math.round(D),ce=0;ce<m;ce++){var le=ce+se*S[2]+ue*S[1]+M*S[0],de=ce+re*I[2]+P*I[1]+E*I[0];x.values[de]=w[le]}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var bU={kernelName:Kd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;ZB(a,"cumprod");var u=sI.getAxesPermutation([i],a.shape.length),c=a;null!=u&&(c=xj({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=sI.getInnerMostAxes(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumprod in CPU expects an inner-most axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var d=Im(c.dtype,"int32"),f=Fh.makeOnesTypedArray(Fh.sizeFromShape(c.shape),d),p=n.data.get(c.dataId).values,h=c.shape[c.shape.length-1],m=s?function(e,t){return e+h-t-1}:function(e,t){return e+t},v=0;v<p.length;v+=h)for(var g=0;g<h;g++){var y=m(v,g);if(0===g)f[y]=o?1:p[y];else{var b=m(v,g-1);f[y]=o?p[b]*f[b]:p[y]*f[b]}}var x=n.makeTensorInfo(c.shape,d,f);if(null!=u){var A=xj({inputs:{x:x},backend:n,attrs:{perm:sI.getUndoAxesPermutation(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),A}return x}};var xU={kernelName:Xd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;ZB(a,"cumsum");var u=sI.getAxesPermutation([i],a.shape.length),c=a;null!=u&&(c=xj({inputs:{x:a},backend:n,attrs:{perm:u}}));var l=sI.getInnerMostAxes(1,a.shape.length)[0];if(l!==c.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most axis=".concat(c.shape.length-1," but got axis=").concat(l));for(var d=Im(c.dtype,"int32"),f=Fh.makeZerosTypedArray(Fh.sizeFromShape(c.shape),d),p=n.data.get(c.dataId).values,h=c.shape[c.shape.length-1],m=s?function(e,t){return e+h-t-1}:function(e,t){return e+t},v=0;v<p.length;v+=h)for(var g=0;g<h;g++){var y=m(v,g);if(0===g)f[y]=o?0:p[y];else{var b=m(v,g-1);f[y]=o?p[b]+f[b]:p[y]+f[b]}}var x=n.makeTensorInfo(c.shape,d,f);if(null!=u){var A=xj({inputs:{x:x},backend:n,attrs:{perm:sI.getUndoAxesPermutation(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(c),A}return x}};var AU={kernelName:Yd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=yW(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}if(2===a.shape.length){var c=bW(n.bufferSync(a),n.bufferSync(i),o,s);return n.makeTensorInfo(c.shape,i.dtype,c.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}};var kU={kernelName:Jd,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat;Fh.assert("NHWC"===o,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got ".concat(o)}));for(var s=a.shape[0],u=a.shape[1],c=a.shape[2],l=a.shape[3],d=u*i,f=c*i,p=l/(i*i),h=n.data.get(a.dataId).values,m=new Float32Array(s*d*f*p),v=0,g=0;g<s;++g)for(var y=0;y<d;++y)for(var b=Math.floor(y/i),x=y%i,A=0;A<f;++A)for(var k=Math.floor(A/i),w=(x*i+A%i)*p,S=0;S<p;++S){var I=S+w+l*(k+c*(b+u*g));m[v++]=h[I]}return n.makeTensorInfo([s,d,f,p],a.dtype,m)}};function wU(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode;ZB([a,i],"depthwiseConv2DNative");var l=Fh.computeStrides(a.shape),d=Fh.computeStrides(i.shape),f=u;null==f&&(f=[1,1]),Fh.assert(sI.eitherStridesOrDilationsAreOne(o,f),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(f,"'")}));for(var p=sI.computeConv2DInfo(a.shape,i.shape,o,f,s,c,!0),h=p.filterHeight,m=p.filterWidth,v=p.dilationHeight,g=p.dilationWidth,y=p.padInfo,b=y.left,x=y.top,A=p.outChannels/p.inChannels,k=new pm(p.outShape,a.dtype),w=n.data.get(a.dataId).values,S=n.data.get(i.dataId).values,I=k.values,E=0;E<p.batchSize;++E)for(var C=E*l[0],N=E*k.strides[0],T=0;T<p.outHeight;++T)for(var _=N+T*k.strides[1],R=T*p.strideHeight-x,M=0;M<h;++M){var O=R+M*v;if(!(O<0||O>=p.inHeight))for(var F=M*d[0],P=C+O*l[1],D=0;D<p.outWidth;++D)for(var L=_+D*k.strides[2],z=D*p.strideWidth-b,B=0;B<m;++B){var W=z+B*g;if(!(W<0||W>=p.inWidth))for(var j=F+B*d[1],V=P+W*p.inChannels,U=L,H=j,G=0;G<p.inChannels;++G){for(var q=w[V+G],K=0;K<A;++K)I[U+K]+=q*S[H+K];U+=A,H+=A}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}var SU={kernelName:Qd,backendName:"cpu",kernelFunc:wU};var IU={kernelName:$d,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape;ZB([a,i],"depthwiseConv2dNativeBackpropFilter");for(var d=sI.computeConv2DInfo(a.shape,l,o,s,u,c,!0),f=d.strideHeight,p=d.strideWidth,h=d.filterHeight,m=d.filterWidth,v=new pm(d.filterShape,"float32"),g=d.padInfo.left,y=d.padInfo.top,b=d.outChannels/d.inChannels,x=n.data.get(a.dataId).values,A=new pm(a.shape,a.dtype,x),k=n.data.get(i.dataId).values,w=new pm(i.shape,i.dtype,k),S=0;S<h;++S)for(var I=Math.max(0,Math.ceil((y-S)/f)),E=Math.min(d.outHeight,(d.inHeight+y-S)/f),C=0;C<m;++C)for(var N=Math.max(0,Math.ceil((g-C)/p)),T=Math.min(d.outWidth,(d.inWidth+g-C)/p),_=0;_<d.outChannels;++_){for(var R=Math.trunc(_/b),M=_%b,O=0,F=0;F<d.batchSize;++F)for(var P=I;P<E;++P)for(var D=S+P*f-y,L=N;L<T;++L){var z=C+L*p-g;O+=A.get(F,D,z,R)*w.get(F,P,L,_)}v.set(O,S,C,R,M)}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var EU={kernelName:ef,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,c=r.pad,l=r.dimRoundingMode,d=r.inputShape;ZB([a,i],"depthwiseConv2DNativeBackpropInput");for(var f=Fh.computeStrides(a.shape),p=Fh.computeStrides(i.shape),h=sI.computeConv2DInfo(d,i.shape,o,s,c,l,!0),m=new pm(h.inShape,"float32"),v=m.values,g=u(m.strides,3),y=g[0],b=g[1],x=g[2],A=n.data.get(a.dataId).values,k=u(f,3),w=k[0],S=k[1],I=k[2],E=n.data.get(i.dataId).values,C=u(p,3),N=C[0],T=C[1],_=C[2],R=h.batchSize,M=h.filterHeight,O=h.filterWidth,F=h.inChannels,P=h.inHeight,D=h.inWidth,L=h.outChannels,z=h.outHeight,B=h.outWidth,W=h.strideHeight,j=h.strideWidth,V=M-1-h.padInfo.top,U=O-1-h.padInfo.left,H=L/F,G=0;G<R;++G)for(var q=0;q<F;++q)for(var K=0;K<P;++K)for(var X=K-V,Z=Math.max(0,Math.ceil(X/W)),Y=Math.min(z,(M+X)/W),J=0;J<D;++J){for(var Q=J-U,$=Math.max(0,Math.ceil(Q/j)),ee=Math.min(B,(O+Q)/j),te=0,ne=Z;ne<Y;++ne)for(var re=ne*W-X,ae=$;ae<ee;++ae)for(var ie=w*G+S*ne+I*ae,oe=N*(M-1-re)+T*(O-1-(ae*j-Q))+_*q,se=0;se<H;++se){te+=A[ie+(q*H+se)]*E[oe+se]}v[y*G+b*K+x*J+q]=te}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var CU={kernelName:tf,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=Fh.sizeFromShape(r.shape),i=n.data.get(r.dataId).values,o=cg([a,a],r.dtype),s=o.values,u=0;u<i.length;u++)s[u*a+u]=i[u];var c=[].concat(Tn(r.shape),Tn(r.shape));return n.makeTensorInfo(c,o.dtype,o.values)}},NU={kernelName:nf,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=n,l=c.data.get(a.dataId).values,d=a.shape.length,f=c.data.get(i.dataId).values,p=i.shape.length,h=sI.computeDilation2DInfo(a.shape,i.shape,o,s,"NHWC",u),m=h.batchSize,v=h.inHeight,g=h.inWidth,y=h.inChannels,b=h.outHeight,x=h.outWidth,A=h.padInfo,k=h.strideHeight,w=h.strideWidth,S=h.filterHeight,I=h.filterWidth,E=h.dilationHeight,C=h.dilationWidth,N=h.outShape,T=Fh.sizeFromShape(N),_=N.length,R=Fh.getArrayFromDType(a.dtype,T),M=0;M<m;++M)for(var O=0;O<b;++O)for(var F=O*k-A.top,P=0;P<x;++P)for(var D=P*w-A.left,L=0;L<y;++L){for(var z=Number.MIN_SAFE_INTEGER,B=0;B<S;++B){var W=F+B*E;if(W>=0&&W<v)for(var j=0;j<I;++j){var V=D+j*C;if(V>=0&&V<g){var U=Fh.locToIndex([M,W,V,L],d,Fh.computeStrides(a.shape)),H=Fh.locToIndex([B,j,L],p,Fh.computeStrides(i.shape)),G=l[U]+f[H];G>z&&(z=G)}}}R[Fh.locToIndex([M,O,P,L],_,Fh.computeStrides(N))]=z}return{dataId:c.write(Fh.toTypedArray(R,a.dtype),N,a.dtype),shape:N,dtype:a.dtype}}},TU={kernelName:af,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,d=Fh.toNestedArray(a.shape,l.data.get(a.dataId).values),f=Fh.toNestedArray(i.shape,l.data.get(i.dataId).values),p=sI.computeDilation2DInfo(a.shape,i.shape,s,u,"NHWC",c),h=p.batchSize,m=p.inHeight,v=p.inWidth,g=p.inChannels,y=p.outHeight,b=p.outWidth,x=p.padInfo,A=p.strideHeight,k=p.strideWidth,w=p.filterHeight,S=p.filterWidth,I=p.dilationHeight,E=p.dilationWidth,C=p.outShape;Fh.assert(o.rank===C.length,(function(){return"Error in ".concat(af,", dy must have the same rank as output ").concat(C.length,", but got ").concat(o.rank)}));for(var N=Fh.toNestedArray(C,l.data.get(o.dataId).values),T=Fh.makeZerosNestedTypedArray(i.shape,i.dtype),_=0;_<h;++_)for(var R=0;R<y;++R)for(var M=R*A-x.top,O=0;O<b;++O)for(var F=O*k-x.left,P=0;P<g;++P){for(var D=Number.MIN_SAFE_INTEGER,L=0,z=0,B=0;B<w;++B){var W=M+B*I;if(W>=0&&W<m)for(var j=0;j<S;++j){var V=F+j*E;if(V>=0&&V<v){var U=d[_][W][V][P]+f[B][j][P];U>D&&(D=U,L=B,z=j)}}}T[L][z][P]+=N[_][R][O][P]}return{dataId:l.write(Fh.toTypedArray(T,a.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},_U={kernelName:rf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,c=r.dilations,l=n,d=Fh.toNestedArray(a.shape,l.data.get(a.dataId).values),f=Fh.toNestedArray(i.shape,l.data.get(i.dataId).values),p=sI.computeDilation2DInfo(a.shape,i.shape,s,u,"NHWC",c),h=p.batchSize,m=p.inHeight,v=p.inWidth,g=p.inChannels,y=p.outHeight,b=p.outWidth,x=p.padInfo,A=p.strideHeight,k=p.strideWidth,w=p.filterHeight,S=p.filterWidth,I=p.dilationHeight,E=p.dilationWidth,C=p.outShape;Fh.assert(o.rank===C.length,(function(){return"Error in ".concat(rf,", dy must have the same rank as output ").concat(C.length,", but got ").concat(o.rank)}));for(var N=Fh.toNestedArray(C,l.data.get(o.dataId).values),T=Fh.makeZerosNestedTypedArray(a.shape,a.dtype),_=0;_<h;++_)for(var R=0;R<y;++R)for(var M=R*A-x.top,O=0;O<b;++O)for(var F=O*k-x.left,P=0;P<g;++P){for(var D=Number.MIN_SAFE_INTEGER,L=M<0?0:M,z=F<0?0:F,B=0;B<w;++B){var W=M+B*I;if(W>=0&&W<m)for(var j=0;j<S;++j){var V=F+j*E;if(V>=0&&V<v){var U=d[_][W][V][P]+f[B][j][P];U>D&&(D=U,L=W,z=V)}}}T[_][L][z][P]+=N[_][R][O][P]}return{dataId:l.write(Fh.toTypedArray(T,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};function RU(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims;ZB(i,"sum");var c=(t="bool"===i.dtype?lW({inputs:{x:i},backend:r,attrs:{dtype:"int32"}}):oW({inputs:{x:i},backend:r})).shape.length,l=Fh.parseAxisParam(o,t.shape),d=sI.getAxesPermutation(l,c),f=l,p=t;null!=d&&(p=xj({inputs:{x:t},backend:r,attrs:{perm:d}}),f=sI.getInnerMostAxes(f.length,c)),sI.assertAxesAreInnerMostDims("sum",f,p.shape.length);for(var h=u(sI.computeOutAndReduceShapes(p.shape,f),2),m=h[0],v=h[1],g=iW(r,m,sI.upcastType(p.dtype,"int32")),y=Fh.sizeFromShape(v),b=r.data.get(g.dataId).values,x=r.data.get(p.dataId).values,A=0;A<b.length;++A){for(var k=A*y,w=0,S=0;S<y;++S)w+=x[k+S];b[A]=w}if(s){var I=g;g=yV({inputs:{x:g},backend:r,attrs:{shape:sI.expandShapeToKeepDim(g.shape,l)}}),r.disposeIntermediateTensorInfo(I)}return r.disposeIntermediateTensorInfo(t),null!=d&&r.disposeIntermediateTensorInfo(p),g}var MU={kernelName:Vp,backendName:"cpu",kernelFunc:RU};var OU={kernelName:sf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,a=t,i=sI.decodeEinsumEquation(r,a.length),o=i.allDims,s=i.summedDims,u=i.idDims;sI.checkEinsumDimSizes(o.length,u,a);for(var c=sI.getEinsumComputePath(s,u),l=c.path,d=c.steps,f=d.length,p=null,h=o.length,m=[],v=0;v<f;++v){var g,y=lc(d[v]);try{for(y.s();!(g=y.n()).done;){var b=g.value,x=sI.getEinsumPermutation(h,u[b]),A=x.permutationIndices,k=x.expandDims,w=void 0;sI.isIdentityPermutation(A)?w=a[b]:(w=xj({inputs:{x:a[b]},backend:n,attrs:{perm:A}}),m.push(w));for(var S=w.shape.slice(),I=0;I<k.length;++I)S.splice(k[I],0,1);Fh.arraysEqual(w.shape,S)||(w=yV({inputs:{x:w},backend:n,attrs:{shape:S}}),m.push(w)),null===p?p=w:(p=fj({inputs:{a:w,b:p},backend:n}),m.push(p))}}catch(T){y.e(T)}finally{y.f()}v<f-1&&(l[v]>=0&&(p=RU({inputs:{x:p},backend:n,attrs:{axis:l[v]-(o.length-h),keepDims:!1}}),m.push(p)),h--)}for(var E=0,C=m;E<C.length;E++){var N=C[E];N!==p&&n.disposeIntermediateTensorInfo(N)}return p}};var FU={kernelName:cf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;ZB([r,a],"eluGrad");for(var i=new Float32Array(Fh.sizeFromShape(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<o.length;++u){var c=o[u];i[u]=c>=1?s[u]:s[u]*(c+1)}return n.makeTensorInfo(a.shape,"float32",i)}},PU=sI.ERF_P,DU=sI.ERF_A1,LU=sI.ERF_A2,zU=sI.ERF_A3,BU=sI.ERF_A4,WU=sI.ERF_A5,jU=AW(lf,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+PU*n);return t*(1-((((WU*r+BU)*r+zU)*r+LU)*r+DU)*r*Math.exp(-n*n))})),VU={kernelName:lf,backendName:"cpu",kernelFunc:jU};function UU(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,i=r.dim,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(Fh.assert(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+i+1),s.splice(u,0,1),yV({inputs:{x:a},backend:n,attrs:{shape:s}})}var HU={kernelName:pf,backendName:"cpu",kernelFunc:UU},GU=nW((function(e,t){return e/t})),qU=fW(of,GU),KU={kernelName:of,backendName:"cpu",kernelFunc:qU};function XU(e,t,n){for(var r=e.shape,a=r[0],i=r[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,u=o.complexTensorInfos.imag,c=[a,i],l=Fh.sizeFromShape(c),d=Fh.getTypedArrayFromDType("float32",l),f=Fh.getTypedArrayFromDType("float32",l),p=0;p<a;p++){for(var h=Oj({inputs:{x:s},backend:n,attrs:{begin:[p,0],size:[1,i]}}),m=Oj({inputs:{x:u},backend:n,attrs:{begin:[p,0],size:[1,i]}}),v=rW({inputs:{real:h,imag:m},backend:n}),g=ZU(v,t,n),y=g.real,b=g.imag,x=sI.mergeRealAndImagArrays(y,b),A=0;A<i;A++){var k=sI.getComplexWithIndex(x,A);d[p*i+A]=k.real,f[p*i+A]=k.imag}n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v)}var w=n.makeTensorInfo(c,"float32",d),S=n.makeTensorInfo(c,"float32",f),I=rW({inputs:{real:w,imag:S},backend:n});return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(S),I}function ZU(e,t,n){var r=Fh.sizeFromShape(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(function(e){return 0===(e&e-1)}(r)){var s=YU(i,o,r,t,n),u=[e.shape[0],e.shape[1]];if(t){var c=n.makeTensorInfo(u,"float32",s.real),l=n.makeTensorInfo(u,"float32",s.imag),d=n.makeTensorInfo([],"float32",Fh.createScalarValue(r,"float32")),f=oW({inputs:{x:d},backend:n}),p=KU.kernelFunc({inputs:{a:c,b:d},backend:n}),h=KU.kernelFunc({inputs:{a:l,b:f},backend:n}),m=n.data.get(p.dataId).values,v=n.data.get(h.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),{real:m,imag:v}}return s}var g=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var u=sI.exponent(a*s,t,n),c=sI.getComplexWithIndex(e,s);i+=c.real*u.real-c.imag*u.imag,o+=c.real*u.imag+c.imag*u.real}n&&(i/=t,o/=t),sI.assignToTypedArray(r,i,o,a)}return r}(sI.mergeRealAndImagArrays(i,o),r,t);return sI.splitRealAndImagArrays(g)}function YU(e,t,n,r,a){if(1===n)return{real:e,imag:t};var i=sI.mergeRealAndImagArrays(e,t),o=n/2,s=sI.complexWithEvenIndex(i),u=s.real,c=s.imag,l=[u.length],d=a.makeTensorInfo(l,"float32",u),f=a.makeTensorInfo(l,"float32",c),p=rW({inputs:{real:d,imag:f},backend:a}),h=sI.complexWithOddIndex(i),m=h.real,v=h.imag,g=[m.length],y=a.makeTensorInfo(g,"float32",m),b=a.makeTensorInfo(g,"float32",v),x=rW({inputs:{real:y,imag:b},backend:a}),A=YU(u,c,o,r,a),k=A.real,w=A.imag,S=[k.length],I=a.makeTensorInfo(S,"float32",k),E=a.makeTensorInfo(S,"float32",w),C=rW({inputs:{real:I,imag:E},backend:a}),N=YU(m,v,o,r,a),T=N.real,_=N.imag,R=[T.length],M=a.makeTensorInfo(R,"float32",T),O=a.makeTensorInfo(R,"float32",_),F=rW({inputs:{real:M,imag:O},backend:a}),P=sI.exponents(n,r),D=[P.real.length],L=a.makeTensorInfo(D,"float32",P.real),z=a.makeTensorInfo(D,"float32",P.imag),B=rW({inputs:{real:L,imag:z},backend:a}),W=fj({inputs:{a:B,b:F},backend:a}),j=vW({inputs:{a:C,b:W},backend:a}),V=Qj({inputs:{a:C,b:W},backend:a}),U=uW({inputs:{input:j},backend:a}),H=uW({inputs:{input:V},backend:a}),G=rU({inputs:{input:j},backend:a}),q=rU({inputs:{input:V},backend:a}),K=iU({inputs:[U,H],backend:a,attrs:{axis:0}}),X=iU({inputs:[G,q],backend:a,attrs:{axis:0}}),Z=a.data.get(K.dataId).values,Y=a.data.get(X.dataId).values;return a.disposeIntermediateTensorInfo(d),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(I),a.disposeIntermediateTensorInfo(E),a.disposeIntermediateTensorInfo(C),a.disposeIntermediateTensorInfo(M),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(F),a.disposeIntermediateTensorInfo(L),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(X),{real:Z,imag:Y}}var JU={kernelName:mf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=Fh.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],o=yV({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=XU(o,!1,n),u=yV({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}};function QU(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype||Fh.inferDtype(a),o=Fh.getArrayFromDType(i,Fh.sizeFromShape(r));return function(e,t,n){e.fill(t)}(o,a),t.makeTensorInfo(r,i,o)}var $U={kernelName:vf,backendName:"cpu",kernelFunc:QU};var eH={kernelName:gf,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,i=Fh.getTypedArrayFromDType(r.dtype,Fh.sizeFromShape(r.shape)),o=u(r.shape,4),s=o[0],c=o[1],l=o[2],d=o[3],f=a.data.get(r.dataId).values,p=0;p<s;p++)for(var h=p*l*c*d,m=0;m<c;m++)for(var v=m*(l*d),g=0;g<l;g++)for(var y=g*d,b=0;b<d;b++){var x=Math.round(l-g-1),A=h+v+y+b,k=f[A];if(x>=0&&x<l)k=f[h+v+x*d+b];i[A]=k}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},tH=nW((function(e,t){return Math.floor(e/t)})),nH=fW(bf,tH,null,"int32"),rH={kernelName:bf,backendName:"cpu",kernelFunc:nH};var aH={kernelName:bh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,f=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,m=sU({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:f}});if(o){var v=m;if("NCHW"===l&&1===o.shape.length&&1!==o.shape[0]){var g=yV({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=vW({inputs:{a:m,b:g},backend:n}),n.disposeIntermediateTensorInfo(g)}else m=vW({inputs:{a:m,b:o},backend:n});n.disposeIntermediateTensorInfo(v)}if(p){var y=m;if("NCHW"===l&&"prelu"===p&&1===s.shape.length&&1!==s.shape[0]){var b=yV({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=gV(n,m,p,b,h),n.disposeIntermediateTensorInfo(b)}else m=gV(n,m,p,s,h);n.disposeIntermediateTensorInfo(y)}return m}};var iH={kernelName:xh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,f=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,m=wU({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:c,dataFormat:l,dilations:d,dimRoundingMode:f}});if(o){var v=m;m=vW({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(p){var g=m;m=gV(n,m,p,s,h),n.disposeIntermediateTensorInfo(g)}return m}};var oH={kernelName:kf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=Fh.sizeFromShape(r.shape),o=a.shape,s=o[o.length-1],c=u(sI.prepareAndValidate(r,a),4),l=c[0],d=c[1],f=c[2],p=c[3];if(0===d)return n.makeTensorInfo(l,r.dtype,[]);var h=BW(n.data.get(a.dataId).values,n.bufferSync(r),r.dtype,d,s,f,p,r.shape,i);return n.makeTensorInfo(l,r.dtype,h.values)}};var sH={kernelName:Af,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims;ZB([a,i],"gatherV2");for(var u=Fh.parseAxisParam(o,a.shape)[0],c=n.data.get(i.dataId).values,l=a.shape[u],d=function(e){var t=c[e];Fh.assert(t<=l-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(l-1,"]")}))},f=0;f<c.length;++f)d(f);var p=s;null==s&&(p=0);var h=Fh.sizeFromShape(i.shape),m=sI.segment_util.collectGatherOpShapeInfo(a,i,u,p),v=yV({inputs:{x:a},backend:n,attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]}}),g=yV({inputs:{x:i},backend:n,attrs:{shape:[m.batchSize,h/m.batchSize]}}),y=[m.batchSize,m.outerSize,h/m.batchSize,m.sliceSize],b=n.bufferSync(g),x=WW(n.bufferSync(v),b,y);return n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),n.makeTensorInfo(m.outputShape,x.dtype,x.values)}};var uH={kernelName:Ef,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=Fh.sizeFromShape(r.shape),i=r.shape[r.shape.length-1],o=yV({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=XU(o,!0,n),u=yV({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}},cH=AW(Nf,(function(e){return Number.isFinite(e)?1:0}),"bool"),lH={kernelName:Nf,backendName:"cpu",kernelFunc:cH},dH=AW(Tf,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),fH={kernelName:Tf,backendName:"cpu",kernelFunc:dH},pH=AW(_f,(function(e){return Number.isNaN(e)?1:0}),"bool"),hH={kernelName:_f,backendName:"cpu",kernelFunc:pH};var mH={kernelName:Ff,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=$W(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},vH=AW(Df,(function(e){return Math.log1p(e)})),gH={kernelName:Df,backendName:"cpu",kernelFunc:vH},yH=nW((function(e,t){return e&&t})),bH=fW(Lf,yH,null,"bool"),xH={kernelName:Lf,backendName:"cpu",kernelFunc:bH},AH=AW(zf,(function(e){return e?0:1}),"bool"),kH={kernelName:zf,backendName:"cpu",kernelFunc:AH},wH=nW((function(e,t){return e||t})),SH=fW(Bf,wH,null,"bool"),IH={kernelName:Bf,backendName:"cpu",kernelFunc:SH};var EH={kernelName:Uf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta;ZB(a,"LRN");var c=a.shape[3],l=c-1,d=n.data.get(a.dataId).values,f=Fh.sizeFromShape(a.shape),p=new Float32Array(f);function h(e){for(var t=e%c,n=e-t+Math.max(0,t-i),r=e-t+Math.min(t+i,l),a=0;n<=r;n++){var o=d[n];a+=o*o}return a}for(var m=0;m<f;m++){var v=h(m),g=d[m]*Math.pow(o+s*v,-u);p[m]=g}return n.makeTensorInfo(a.shape,a.dtype,p)}};var CH={kernelName:Hf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta;ZB(o,"LRNGrad");for(var d=Fh.sizeFromShape(o.shape),f=o.shape[3],p=n.data.get(o.dataId).values,h=n.data.get(a.dataId).values,m=n.data.get(i.dataId).values,v=new Float32Array(d),g=d,y=0;y<g;y++){for(var b=y%f,x=y-b+Math.max(0,b-s),A=y-b+Math.min(f,b+s+1),k=0,w=x;w<A;w++)k+=Math.pow(h[w],2);k=c*k+u;for(var S=x;S<A;S++){var I=-2*c*l*h[S]*m[y]/k;y===S&&(I+=Math.pow(k,-l)),I*=p[y],v[S]+=I}}return n.makeTensorInfo(o.shape,a.dtype,v)}};function NH(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=n,c=a.shape,l=c.length,d=Fh.parseAxisParam(i,c),f=d,p=sI.getAxesPermutation(f,l),h=s.data.get(a.dataId).values;if(null!=p){for(var m=new Array(l),v=0;v<m.length;v++)m[v]=c[p[v]];h=bj(h,c,a.dtype,p,m),f=sI.getInnerMostAxes(f.length,l),c=m}ZB(a,"max"),sI.assertAxesAreInnerMostDims("max",f,l);var g=u(sI.computeOutAndReduceShapes(c,f),2),y=g[0],b=g[1],x=rj(h,Fh.sizeFromShape(b),y,a.dtype),A=s.write(x,y,a.dtype),k=y;return o&&(k=sI.expandShapeToKeepDim(y,d)),{dataId:A,shape:k,dtype:a.dtype}}var TH={kernelName:Gf,backendName:"cpu",kernelFunc:NH};var _H={kernelName:Kf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;ZB(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Fh.assert(sI.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(1,"'")}));var c,l=sI.computePool2DInfo(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&Fh.arraysEqual(l.inShape,l.outShape))c=oW({inputs:{x:a},backend:n});else{var d=n.data.get(a.dataId).values,f=Fh.computeStrides(a.shape),p=UV(d,a.shape,a.dtype,f,l,"max");c=n.makeTensorInfo(l.outShape,a.dtype,p.values)}return c}};var RH={kernelName:Zf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat;ZB(a,"maxPool3d");var l=sI.computePool3DInfo(a.shape,i,o,1,s,u,c),d=GV(n.data.get(a.dataId).values,a.shape,a.dtype,Fh.computeStrides(a.shape),l,"max");return n.makeTensorInfo(d.shape,"float32",d.values)}};var MH={kernelName:Yf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode;ZB([a,i],"maxPool3DGrad");for(var l=sI.computePool3DInfo(i.shape,o,s,1,u,c),d=function(e,t){for(var n=cg(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,d=t.effectiveFilterWidth,f=t.padInfo.front,p=t.padInfo.top,h=t.padInfo.left,m=0;m<t.batchSize;++m)for(var v=0;v<t.inChannels;++v)for(var g=0;g<t.outDepth;++g){for(var y=g*r-f,b=y;b<0;)b+=o;for(var x=Math.min(t.inDepth,c+y),A=0;A<t.outHeight;++A){for(var k=A*a-p,w=k;w<0;)w+=s;for(var S=Math.min(t.inHeight,l+k),I=0;I<t.outWidth;++I){for(var E=I*i-h,C=E;C<0;)C+=u;for(var N=Math.min(t.inWidth,d+E),T=Number.NEGATIVE_INFINITY,_=-1,R=b;R<x;R+=o)for(var M=R-y,O=w;O<S;O+=s)for(var F=O-k,P=C;P<N;P+=u){var D=P-E,L=e.get(m,R,O,P,v);L>=T&&(T=L,_=M*l*d+F*l+D)}n.set(_,m,g,A,I,v)}}}return n}(n.bufferSync(i),l),f=l.strideDepth,p=l.strideHeight,h=l.strideWidth,m=l.dilationDepth,v=l.dilationHeight,g=l.dilationWidth,y=l.effectiveFilterDepth,b=l.effectiveFilterHeight,x=l.effectiveFilterWidth,A=y-1-l.padInfo.front,k=x-1-l.padInfo.left,w=b-1-l.padInfo.top,S=cg(i.shape,"float32"),I=n.bufferSync(a),E=0;E<l.batchSize;++E)for(var C=0;C<l.inChannels;++C)for(var N=0;N<l.inDepth;++N)for(var T=0;T<l.inHeight;++T)for(var _=0;_<l.inWidth;++_){for(var R=N-A,M=T-w,O=_-k,F=0,P=0;P<y;P+=m){var D=(R+P)/f;if(!(D<0||D>=l.outDepth||Math.floor(D)!==D))for(var L=0;L<b;L+=v){var z=(M+L)/p;if(!(z<0||z>=l.outHeight||Math.floor(z)!==z))for(var B=0;B<x;B+=g){var W=(O+B)/h;if(!(W<0||W>=l.outWidth||Math.floor(W)!==W)){var j=y*b*x-1-d.get(E,D,z,W,C)===P*b*x+L*x+B?1:0;0!==j&&(F+=I.get(E,D,z,W,C)*j)}}}}S.set(F,E,N,T,_,C)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};var OH={kernelName:Xf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;ZB([i,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,d=sI.computePool2DInfo(o.shape,s,u,1,c,l),f=n.data.get(o.dataId).values,p=cg(d.outShape,o.dtype,HV(f,o.shape,o.dtype,d).values),h=d.strideHeight,m=d.strideWidth,v=d.dilationHeight,g=d.dilationWidth,y=d.effectiveFilterHeight,b=d.effectiveFilterWidth,x=b-1-d.padInfo.left,A=y-1-d.padInfo.top,k=cg(o.shape,"float32"),w=n.data.get(a.dataId).values,S=cg(a.shape,"float32",w),I=0;I<d.batchSize;++I)for(var E=0;E<d.inChannels;++E)for(var C=0;C<d.inHeight;++C)for(var N=0;N<d.inWidth;++N){for(var T=C-A,_=N-x,R=0,M=0;M<y;M+=v){var O=(T+M)/h;if(!(O<0||O>=d.outHeight||Math.floor(O)!==O))for(var F=0;F<b;F+=g){var P=(_+F)/m;if(!(P<0||P>=d.outWidth||Math.floor(P)!==P)){var D=y*b-1-p.get(I,O,P,E)===M*b+F?1:0;0!==D&&(R+=S.get(I,O,P,E)*D)}}}k.set(R,I,C,N,E)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};var FH={kernelName:Jf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,c=n.includeBatchInIndex,l=r;ZB(a,"MaxPoolWithArgmax");var d=l.data.get(a.dataId).values,f=sI.computePool2DInfo(a.shape,i,o,[1,1],s),p=function(e,t,n,r,a){var i=UV(e,0,n,Fh.computeStrides(t),a,"max"),o=HV(e,t,n,a,!0,r);return[i.values,o.values]}(d,a.shape,a.dtype,c,f),h=u(p,2),m=h[0],v=h[1],g=l.write(m,f.outShape,a.dtype),y=l.write(v,f.outShape,a.dtype);return[{dataId:g,shape:f.outShape,dtype:a.dtype},{dataId:y,shape:f.outShape,dtype:"int32"}]}};var PH={kernelName:Qf,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=Fh.parseAxisParam(i,a.shape),u=sI.computeOutAndReduceShapes(a.shape,s)[1],c=Fh.sizeFromShape(u),l=[],d=n.makeTensorInfo([],"float32",new Float32Array([c]));l.push(d);var f=lW({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});l.push(f);var p=qU({inputs:{a:f,b:d},backend:n});l.push(p);var h=RU({inputs:{x:p},backend:n,attrs:{axis:i,keepDims:o}});return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),h}};var DH={kernelName:$f,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;ZB(a,"min");var s=Fh.parseAxisParam(i,a.shape),c=s,l=sI.getAxesPermutation(c,a.shape.length),d=a;null!=l&&(d=xj({inputs:{x:a},backend:n,attrs:{perm:l}}),c=sI.getInnerMostAxes(c.length,a.shape.length)),sI.assertAxesAreInnerMostDims("min",c,d.shape.length);for(var f=u(sI.computeOutAndReduceShapes(d.shape,c),2),p=f[0],h=f[1],m=Fh.sizeFromShape(h),v=Fh.makeZerosTypedArray(Fh.sizeFromShape(p),d.dtype),g=n.data.get(d.dataId).values,y=0;y<v.length;++y){for(var b=y*m,x=g[b],A=0;A<m;++A){var k=g[b+A];(Number.isNaN(k)||k<x)&&(x=k)}v[y]=x}null!=l&&n.disposeIntermediateTensorInfo(d);var w=n.makeTensorInfo(p,d.dtype,v);if(o){var S=yV({inputs:{x:w},backend:n,attrs:{shape:sI.expandShapeToKeepDim(p,s)}});return n.disposeIntermediateTensorInfo(w),S}return w}};var LH={kernelName:tp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode;ZB(a,"mirrorPad");for(var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),c=i.map((function(e,t){return e[0]+a.shape[t]})),l="reflect"===o?0:1,d=n.data.get(a.dataId).values,f=a.shape.length,p=Fh.computeStrides(a.shape),h=Fh.sizeFromShape(s),m=s.length,v=Fh.computeStrides(s),g=Fh.getTypedArrayFromDType(a.dtype,h),y=0;y<h;y++){for(var b=Fh.indexToLoc(y,m,v),x=0;x<m;x++)b[x]<u[x]?b[x]=2*u[x]-b[x]-l:b[x]>=c[x]&&(b[x]=2*(c[x]-1)-b[x]+l);b=b.map((function(e,t){return e-u[t]}));var A=Fh.locToIndex(b,f,p);g[y]=d[A]}return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},zH=nW((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),BH=fW(np,zH),WH={kernelName:np,backendName:"cpu",kernelFunc:BH},jH=Lc(Zc());function VH(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=a.shape.length,s=i;if(-1===s&&(s=o-1),s!==o-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank ".concat(o," and dim was ").concat(s));var u=Fh.parseAxisParam([s],a.shape),c=NH({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),l=sI.expandShapeToKeepDim(c.shape,u),d=yV({inputs:{x:c},backend:n,attrs:{shape:l}}),f=Qj({inputs:{a:a,b:d},backend:n}),p=RW({inputs:{x:f},backend:n}),h=RU({inputs:{x:p},backend:n,attrs:{axis:u,keepDims:!1}}),m=yV({inputs:{x:h},backend:n,attrs:{shape:l}}),v=qU({inputs:{a:p,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),v}var UH={kernelName:Gp,backendName:"cpu",kernelFunc:VH};var HH={kernelName:rp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized;ZB(a,"multinomial");for(var u=s?a:VH({inputs:{logits:a},backend:n,attrs:{dim:-1}}),c=u.shape[0],l=u.shape[1],d=n.data.get(u.dataId).values,f=[c,i],p=Fh.makeZerosTypedArray(Fh.sizeFromShape(f),"int32"),h=0;h<c;++h){var m=h*l,v=new Float32Array(l-1);v[0]=d[m];for(var g=1;g<v.length;++g)v[g]=v[g-1]+d[m+g];for(var y=jH.alea(o.toString()),b=h*i,x=0;x<i;++x){var A=y();p[b+x]=v.length;for(var k=0;k<v.length;k++)if(A<v[k]){p[b+x]=k;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(f,"int32",p)}},GH=sE.nonMaxSuppressionV3Impl;var qH={kernelName:sp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;ZB(a,"NonMaxSuppression");var c=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,d=GH(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},KH=sE.nonMaxSuppressionV4Impl;var XH={kernelName:up,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize;ZB(a,"NonMaxSuppressionPadded");var l=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,f=KH(l,d,o,s,u,c),p=f.selectedIndices,h=f.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},ZH=sE.nonMaxSuppressionV5Impl;var YH={kernelName:cp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma;ZB(a,"NonMaxSuppressionWithScore");var l=n.data.get(a.dataId).values,d=n.data.get(i.dataId).values,f=ZH(l,d,o,s,u,c),p=f.selectedIndices,h=f.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}};var JH={kernelName:dp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue;ZB(a,"oneHot");var u=Fh.sizeFromShape(a.shape),c=new Float32Array(u*i);c.fill(s);for(var l=n.data.get(a.dataId).values,d=0;d<u;++d)l[d]>=0&&l[d]<i&&(c[d*i+l[d]]=o);return n.makeTensorInfo([].concat(Tn(a.shape),[i]),"int32",c)}};function QH(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=uW({inputs:{input:r},backend:n}),i=QH({inputs:{x:a},backend:n}),o=rU({inputs:{input:r},backend:n}),s=QH({inputs:{x:o},backend:n}),u=rW({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return QU({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var $H={kernelName:hh,backendName:"cpu",kernelFunc:QH};var eG={kernelName:lp,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=uW({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=rU({inputs:{input:a},backend:r}),u=QH({inputs:{x:s},backend:r}),c=rW({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return QU({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};function tG(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return UU({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){Fh.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),Fh.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=UU({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=iU({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}var nG={kernelName:fp,backendName:"cpu",kernelFunc:tG};var rG={kernelName:pp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;ZB(a,"pad");var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),c=n.data.get(a.dataId).values,l=Fh.sizeFromShape(a.shape),d=a.shape.length,f=Fh.computeStrides(a.shape),p=Fh.sizeFromShape(s),h=s.length,m=Fh.computeStrides(s),v=Fh.getTypedArrayFromDType(a.dtype,p);0!==o&&v.fill(o);for(var g=0;g<l;g++){var y=Fh.indexToLoc(g,d,f).map((function(e,t){return e+u[t]}));v[Fh.locToIndex(y,h,m)]=c[g]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}},aG=nW((function(e,t){return Math.pow(e,t)})),iG=fW(mp,aG),oG={kernelName:mp,backendName:"cpu",kernelFunc:iG};var sG={kernelName:yp,backendName:"cpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=Sj(r,a,n.step,i);return t.makeTensorInfo([o.length],i,o)}},uG=AW(xp,(function(e){return 1/e})),cG={kernelName:xp,backendName:"cpu",kernelFunc:uG};var lG={kernelName:Ip,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;ZB(a,"resizeBilinear");for(var c=Fh.computeStrides(a.shape),l=u(s,2),d=l[0],f=l[1],p=u(a.shape,4),h=p[0],m=p[1],v=p[2],g=p[3],y=n.data.get(a.dataId).values,b=new Float32Array(Fh.sizeFromShape([h,d,f,g])),x=[i&&d>1?m-1:m,i&&f>1?v-1:v],A=[i&&d>1?d-1:d,i&&f>1?f-1:f],k=0,w=x[0]/A[0],S=x[1]/A[1],I=0;I<h;I++)for(var E=0;E<d;E++){var C=void 0;C=o?w*(E+.5)-.5:w*E;for(var N=Math.max(0,Math.floor(C)),T=C-N,_=Math.min(m-1,Math.ceil(C)),R=I*c[0]+N*c[1],M=I*c[0]+_*c[1],O=0;O<f;O++){var F=void 0;F=o?S*(O+.5)-.5:S*O;for(var P=Math.max(0,Math.floor(F)),D=F-P,L=Math.min(v-1,Math.ceil(F)),z=R+P*c[2],B=M+P*c[2],W=R+L*c[2],j=M+L*c[2],V=0;V<g;V++){var U=y[z+V],H=y[B+V],G=U+(y[W+V]-U)*D,q=G+(H+(y[j+V]-H)*D-G)*T;b[k++]=q}}}return n.makeTensorInfo([h,d,f,g],"float32",b)}};var dG={kernelName:Ep,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;ZB([i,a],"resizeBilinearGrad");for(var s=Fh.computeStrides(a.shape),c=u(a.shape,4),l=c[0],d=c[1],f=c[2],p=c[3],h=u(i.shape,3),m=h[1],v=h[2],g=new Float32Array(l*d*f*p),y=[o&&m>1?d-1:d,o&&v>1?f-1:f],b=[o&&m>1?m-1:m,o&&v>1?v-1:v],x=y[0]/b[0],A=y[1]/b[1],k=n.data.get(i.dataId).values,w=0,S=0;S<l;S++)for(var I=S*s[0],E=0;E<m;E++)for(var C=E*x,N=Math.floor(C),T=Math.min(Math.ceil(C),d-1),_=I+N*s[1],R=I+T*s[1],M=C-N,O=1-M,F=0;F<v;F++)for(var P=F*A,D=Math.floor(P),L=Math.min(Math.ceil(P),f-1),z=P-D,B=1-z,W=_+D*s[2],j=_+L*s[2],V=R+D*s[2],U=R+L*s[2],H=O*B,G=O*z,q=M*B,K=M*z,X=0;X<p;X++){var Z=k[w++];g[W+X]+=Z*H,g[j+X]+=Z*G,g[V+X]+=Z*q,g[U+X]+=Z*K}return n.makeTensorInfo([l,f,d,p],"float32",g)}};var fG={kernelName:wp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;ZB(a,"resizeNearestNeighbor");for(var c=Fh.computeStrides(a.shape),l=u(s,2),d=l[0],f=l[1],p=u(a.shape,4),h=p[0],m=p[1],v=p[2],g=p[3],y=n.data.get(a.dataId).values,b=new Float32Array(h*d*f*g),x=[i&&d>1?m-1:m,i&&f>1?v-1:v],A=[i&&d>1?d-1:d,i&&f>1?f-1:f],k=x[0]/A[0],w=x[1]/A[1],S=0,I=0;I<h;I++)for(var E=I*c[0],C=0;C<d;C++){var N=o?k*(C+.5):k*C,T=Math.min(m-1,i?Math.round(N):Math.floor(N));o&&(T=Math.max(0,T));for(var _=E+T*c[1],R=0;R<f;R++){var M=o?w*(R+.5):w*R,O=Math.min(v-1,i?Math.round(M):Math.floor(M));o&&(O=Math.max(0,O));for(var F=_+O*c[2],P=0;P<g;P++){var D=y[F+P];b[S++]=D}}}return n.makeTensorInfo([h,d,f,g],a.dtype,b)}};var pG={kernelName:Sp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;ZB([i,a],"resizeNearestNeighborGrad");for(var s=Fh.computeStrides(a.shape),c=Fh.computeStrides(i.shape),l=u(a.shape,4),d=l[0],f=l[1],p=l[2],h=l[3],m=u(i.shape,3),v=m[1],g=m[2],y=new Float32Array(d*f*p*h),b=n.data.get(i.dataId).values,x=[o&&v>1?f-1:f,o&&g>1?p-1:p],A=[o&&v>1?v-1:v,o&&g>1?g-1:g],k=x[0]/A[0],w=x[1]/A[1],S=1/k,I=1/w,E=2*Math.ceil(S)+2,C=2*Math.ceil(I)+2,N=0;N<d;N++)for(var T=N*s[0],_=0;_<f;_++)for(var R=T+_*s[1],M=Math.floor(_*S),O=Math.floor(M-E/2),F=0;F<p;F++)for(var P=R+F*s[2],D=Math.floor(F*I),L=Math.floor(D-C/2),z=0;z<h;z++){for(var B=0,W=0;W<E;W++){var j=W+O;if(!(j<0||j>=v)){var V=T+j*c[1],U=j*k;if(_===Math.min(f-1,o?Math.round(U):Math.floor(U)))for(var H=0;H<C;H++){var G=H+L;if(!(G<0||G>=g)){var q=V+G*c[2],K=G*w;F===Math.min(p-1,o?Math.round(K):Math.floor(K))&&(B+=b[q+z])}}}}y[P+z]=B}return n.makeTensorInfo(a.shape,a.dtype,y)}};var hG={kernelName:Np,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims;ZB(a,"reverse");var o=a.shape.length,s=Fh.parseAxisParam(i,a.shape);if(0===o)return oW({inputs:{x:a},backend:n});for(var u=new pm(a.shape,a.dtype),c=n.bufferSync(a),l=function(e){var t=u.indexToLoc(e),n=t.slice();s.forEach((function(e){return n[e]=a.shape[e]-1-n[e]})),u.set.apply(u,[c.get.apply(c,Tn(n))].concat(Tn(t)))},d=0;d<u.size;d++)l(d);return n.makeTensorInfo(u.shape,u.dtype,u.values)}},mG={kernelName:gh,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,c=r,l=Fh.getTypedArrayFromDType(a.dtype,Fh.sizeFromShape(a.shape)),d=u(a.shape,4),f=d[0],p=d[1],h=d[2],m=d[3],v=u(sI.getImageCenter(s,p,h),2),g=v[0],y=v[1],b=Math.sin(i),x=Math.cos(i),A=c.data.get(a.dataId).values,k=0;k<f;k++)for(var w=k*h*p*m,S=0;S<p;S++)for(var I=S*(h*m),E=0;E<h;E++)for(var C=E*m,N=0;N<m;N++){var T=[f,S,E,N],_=T[2],R=T[1],M=(_-g)*x-(R-y)*b,O=(_-g)*b+(R-y)*x;M=Math.round(M+g),O=Math.round(O+y);var F=o;if("number"!=typeof o&&(F=3===N?255:o[N]),M>=0&&M<h&&O>=0&&O<p)F=A[w+O*(h*m)+M*m+N];l[w+I+C+N]=F}return{dataId:c.write(l,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},vG=AW(Tp,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2===0?t:t+1})),gG={kernelName:Tp,backendName:"cpu",kernelFunc:vG};var yG={kernelName:Rp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=sI.calculateShapes(i,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,f=s.outputSize,p=Nj(n.bufferSync(a),n.bufferSync(i),o,f,l,c,u,d,0,!0);return n.makeTensorInfo(o,p.dtype,p.values)}};function bG(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<t?n=a+1:r=a;return r}function xG(e,t){for(var n=0,r=e.length,a=0;n<r;)e[a=Math.floor((n+r)/2)]<=t?n=a+1:r=a;return r}var AG={kernelName:Mp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=function(e,t,n,r,a,i){for(var o=Fh.getArrayFromDType("int32",n*a),s=0;s<n;++s)for(var u=e.slice(s*r,(s+1)*r),c=s*a,l=0;l<a;++l)o[c+l]="left"===i?bG(u,t[l+c]):xG(u,t[l+c]);return o}(n.data.get(a.dataId).values,n.data.get(i.dataId).values,a.shape[0],a.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",s)}};var kG={kernelName:Op,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e;ZB([r,a,i],"select");for(var o=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=Im(a.dtype,i.dtype),d=Fh.makeZerosTypedArray(Fh.sizeFromShape(a.shape),l),f=0,p=0===o||o>1||1===a.shape.length?1:Fh.sizeFromShape(a.shape.slice(1)),h=0;h<s.length;h++)for(var m=0;m<p;m++)1===s[h]?d[f++]=u[h]:d[f++]=c[h];return n.makeTensorInfo(a.shape,l,d)}},wG=sI.SELU_SCALEALPHA,SG=sI.SELU_SCALE,IG=AW(Fp,(function(e){return e>=0?SG*e:wG*(Math.exp(e)-1)})),EG={kernelName:Fp,backendName:"cpu",kernelFunc:IG},CG=AW(zp,(function(e){return e<0?-1:e>0?1:0})),NG={kernelName:zp,backendName:"cpu",kernelFunc:CG},TG=AW(Dp,(function(e){return Math.sin(e)})),_G={kernelName:Dp,backendName:"cpu",kernelFunc:TG},RG=AW(Lp,(function(e){return Math.sinh(e)})),MG={kernelName:Lp,backendName:"cpu",kernelFunc:RG},OG=Math.log(1.1920928955078125e-7)+2,FG=AW(Wp,(function(e){var t=e>-OG,n=e<OG,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),PG={kernelName:Wp,backendName:"cpu",kernelFunc:FG};var DG={kernelName:Up,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;ZB([a],"spaceToBatchND");var s=Fh.sizeFromShape(i),u=[[0,0]];u.push.apply(u,Tn(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=rG.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=sI.getReshaped(l.shape,i,s,!1),f=sI.getPermuted(d.length,i.length,!1),p=sI.getReshapedPermuted(l.shape,i,s,!1),h=yV({inputs:{x:l},backend:n,attrs:{shape:d}}),m=xj({inputs:{x:h},backend:n,attrs:{perm:f}}),v=yV({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),v}};var LG={kernelName:qp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n        ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n        ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.data.get(r.dataId).values,c=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values[0],f=u(Pj(s,r.shape,r.dtype,c,a.dtype,l,d),5),p=f[0],h=f[1],m=f[2],v=f[3],g=f[4];return[n.makeTensorInfo(h,r.dtype,p),n.makeTensorInfo([h[0]],a.dtype,m),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};var zG={kernelName:Kp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.data.get(a.dataId).values),s=n.data.get(r.dataId).values,c=Array.from(n.data.get(i.dataId).values),l=u(Dj(s,r.shape,r.dtype,o,c),3),d=l[0],f=l[1],p=l[2];return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([p.length],i.dtype,new Int32Array(p))]}};var BG={kernelName:Xp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n          ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n          ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=u(Lj(o,r.shape,r.dtype,s,c,!0),2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var WG={kernelName:Zp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n         ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n         ".concat(i.shape));if(a.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");var o=n.data.get(r.dataId).values,s=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,l=u(Lj(o,r.shape,r.dtype,s,c),2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var jG={kernelName:Yp,backendName:"cpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.sparseIndices,o=n.sparseValues,s=n.defaultValue,u=a.outputShape,c=sI.calculateShapes(o,i,u),l=c.sliceRank,d=c.numUpdates,f=c.sliceSize,p=c.strides,h=c.outputSize,m=!1,v=r.bufferSync(i);switch(o.dtype){case"bool":t=Nj(v,r.bufferSync(o),u,h,f,d,l,p,Boolean(r.data.get(s.dataId).values[0]),m);break;case"float32":t=Nj(v,r.bufferSync(o),u,h,f,d,l,p,r.data.get(s.dataId).values[0],m);break;case"int32":t=Nj(v,r.bufferSync(o),u,h,f,d,l,p,r.data.get(s.dataId).values[0],m);break;case"string":t=Nj(v,r.bufferSync(o),u,h,f,d,l,p,Fh.decodeString(r.data.get(s.dataId).values[0]),m);break;default:throw new Error("Unsupported type ".concat(o.dtype))}return r.makeTensorInfo(u,t.dtype,t.values)}};var VG={kernelName:Hp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=r.axis,s=Fh.parseAxisParam(o,a.shape)[0],u=sI.prepareSplitSize(a,i,s),c=new Array(a.shape.length).fill(0),l=a.shape.slice();return u.map((function(e){var t=Tn(l);t[s]=e;var r=Oj({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[s]+=e,r}))}},UG={kernelName:Qp,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;ZB(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];o[s]=u*u}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},HG=AW(mh,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),GG={kernelName:mh,backendName:"cpu",kernelFunc:HG};var qG={kernelName:$p,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.end,s=r.strides,u=r.beginMask,c=r.endMask,l=r.ellipsisMask,d=r.newAxisMask,f=r.shrinkAxisMask;ZB(a,"stridedSlice");var p,h=Oy.sliceInfo(a.shape,i,o,s,u,c,l,d,f),m=h.finalShapeSparse,v=h.finalShape,g=h.isIdentity,y=h.sliceDim0,b=h.isSimpleSlice,x=h.begin,A=h.end,k=h.strides;if(g)p=yV({inputs:{x:a},backend:n,attrs:{shape:v}});else if(y||b){Fh.assert(a.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(a.shape.length)}));var w=Oy.computeOutShape(x,A,k),S=Oj({inputs:{x:a},backend:n,attrs:{begin:x,size:w}});p=yV({inputs:{x:S},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(S)}else{var I=Hj(m,n.bufferSync(a),k,x);p=n.makeTensorInfo(v,I.dtype,I.values)}return p}};var KG={kernelName:eh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,c=r.padWidth,l=r.preserveShortSequences,d=t.data,f=t.dataSplits,p=u(qj(n.data.get(d.dataId).values,n.data.get(f.dataId).values,a,i,o,s,c,l),2),h=p[0],m=p[1];return[n.makeTensorInfo([h.length],"string",h),n.makeTensorInfo(f.shape,"int32",m)]}};var XG={kernelName:th,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=u(Xj(n.data.get(a.dataId).values,n.data.get(i.dataId).values[0],r),3),s=o[0],c=o[1],l=o[2],d=c.length;return[n.makeTensorInfo([d,2],"int32",s),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(l))]}};var ZG={kernelName:nh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=Zj(n.data.get(a.dataId).values,r);return n.makeTensorInfo(a.shape,"int32",i)}},YG=AW(ah,(function(e){return Math.tan(e)})),JG={kernelName:ah,backendName:"cpu",kernelFunc:YG},QG=AW(ih,(function(e){return Math.tanh(e)}));var $G={kernelName:oh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;ZB(a,"tile");var o=eV(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}};var eq={kernelName:sh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted;ZB(a,"topk");var s=u(rV(n.data.get(a.dataId).values,a.shape,a.dtype,i,o),2),c=s[0],l=s[1];return[n.makeTensorInfo(c.shape,c.dtype,c.values),n.makeTensorInfo(l.shape,l.dtype,l.values)]}};var tq={kernelName:uh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=t.transforms,o=n.interpolation,s=n.fillMode,c=n.fillValue,l=n.outputShape,d=u(a.shape,4),f=d[0],p=d[1],h=d[2],m=d[3],v=u(null!=l?l:[p,h],2),g=v[0],y=v[1],b=[f,g,y,m],x=Fh.computeStrides(a.shape),A=x[0],k=x[1],w=x[2],S=Fh.getTypedArrayFromDType(a.dtype,Fh.sizeFromShape(b));S.fill(c);for(var I=r.data.get(a.dataId).values,E=r.data.get(i.dataId).values,C=0;C<f;++C){for(var N=1===i.shape[0]?E:E.subarray(8*C,8*C+8),T=0;T<g;++T)for(var _=0;_<y;++_)for(var R=0;R<m;++R){var M=void 0,O=N[6]*_+N[7]*T+1;if(0!==O){var F=(N[0]*_+N[1]*T+N[2])/O,P=(N[3]*_+N[4]*T+N[5])/O,D=nq(F,h,s),L=nq(P,p,s);switch(o){case"nearest":M=aq(I,p,h,A,k,w,C,L,D,R,c);break;case"bilinear":M=iq(I,p,h,A,k,w,C,L,D,R,c);break;default:throw new Error("Error in Transform: Expect 'nearest' or 'bilinear', but got ".concat(o))}S[C*A+T*k+_*w+R]=M}}return r.makeTensorInfo(b,a.dtype,S)}return{dataId:r.write(S,b,a.dtype),shape:a.shape,dtype:a.dtype}}};function nq(e,t,n){switch(n){case"reflect":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=2*t;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-t?n+r:-n-1}else if(n>t-1)if(t<=1)n=0;else{var a=2*t;(n-=a*Math.trunc(n/a))>=t&&(n=a-n-1)}return Fh.clamp(0,n,t-1)}(e,t);case"wrap":return function(e,t){var n=e;if(n<0)if(t<=1)n=0;else{var r=t-1;n+=t*(Math.trunc(-n/r)+1)}else if(n>t-1)if(t<=1)n=0;else{var a=t-1;n-=t*Math.trunc(n/a)}return Fh.clamp(0,n,t-1)}(e,t);case"nearest":return function(e,t){return Fh.clamp(0,e,t-1)}(e,t);default:return function(e,t){return e}(e)}}function rq(e,t,n,r,a,i,o,s,u,c,l){return 0<=s&&s<t&&0<=u&&u<n?e[o*r+s*a+u*i+c]:l}function aq(e,t,n,r,a,i,o,s,u,c,l){return rq(e,t,n,r,a,i,o,Math.round(s),Math.round(u),c,l)}function iq(e,t,n,r,a,i,o,s,u,c,l){var d=Math.floor(s),f=Math.floor(u),p=d+1,h=f+1;return(p-s)*((h-u)*rq(e,t,n,r,a,i,o,d,f,c,l)+(u-f)*rq(e,t,n,r,a,i,o,d,h,c,l))+(s-d)*((h-u)*rq(e,t,n,r,a,i,o,p,f,c,l)+(u-f)*rq(e,t,n,r,a,i,o,p,h,c,l))}var oq={kernelName:lh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;ZB(i,"unique");var o=aV(r.data.get(i.dataId).values,a,i.shape,i.dtype),s=o.outputValues,u=o.outputShape,c=o.indices;return[r.makeTensorInfo(u,i.dtype,s),r.makeTensorInfo([c.length],"int32",c)]}};var sq={kernelName:dh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,s=a.shape[i],u=new Array(o-1),c=0,l=0;l<o;l++)l!==i&&(u[c++]=a.shape[l]);var d=new Array(o).fill(0),f=a.shape.slice();f[i]=1;for(var p=new Array(s),h=0;h<p.length;h++){d[i]=h;var m=Oj({inputs:{x:a},backend:n,attrs:{begin:d,size:f}});p[h]=yV({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return p}};for(var uq={kernelName:fh,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments;ZB(a,"unsortedSegmentSum");for(var s=[],u=[],c=a.shape.length-i.shape.length,l=i,d=0;d<c;++d){var f=UU({inputs:{input:l},backend:n,attrs:{dim:d+1}});l=f,u.push(f)}for(var p=0;p<o;++p){var h=Fh.createScalarValue(p,"int32"),m=n.makeTensorInfo([],"int32",h),v=NW({inputs:{a:m,b:l},backend:n}),g=lW({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),y=fj({inputs:{a:g,b:a},backend:n}),b=RU({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(m),u.push(v),u.push(g),u.push(y),u.push(b)}var x=tG({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},cq=0,lq=[kV,tW,SV,EV,gW,CV,NV,TV,_V,RV,OV,PV,LV,WV,VV,qV,KV,XV,ZV,AV,YV,JV,QV,$V,dW,IW,tU,aW,nU,oU,uU,cU,lU,dU,fU,pU,mU,gU,yU,bU,xU,AU,kU,SU,IU,EU,CU,NU,TU,_U,OU,sV,FU,TW,VU,MW,HU,PW,JU,$U,eH,zW,rH,aH,iH,oH,sH,UW,qW,sW,uH,aU,lH,fH,hH,cV,ZW,QW,mH,nj,gH,xH,kH,IH,EH,CH,TH,oj,_H,RH,MH,OH,FH,PH,DH,cj,LH,WH,HH,pj,mj,qH,XH,YH,yj,JH,eG,nG,rG,oG,fV,wj,sG,cW,KU,cG,hV,vV,bV,lG,dG,fG,pG,hG,mG,gG,Cj,yG,AG,kG,EG,Rj,NG,_G,MG,Fj,UH,PG,DG,LG,zG,BG,WG,jG,VG,Wj,UG,Uj,GG,qG,KG,XG,ZG,$j,MU,JG,{kernelName:ih,backendName:"cpu",kernelFunc:QG},$G,eq,tq,Aj,oq,sq,uq,$H];cq<lq.length;cq++){Nh(lq[cq])}var dq={};Dc(dq,{assertNotComplex:function(){return mK},bindCanvasToFramebuffer:function(){return Gq},bindColorTextureToFramebuffer:function(){return qq},bindTextureToProgramUniformSampler:function(){return Hq},bindTextureUnit:function(){return Wq},bindVertexBufferToProgramAttribute:function(){return Bq},callAndCheck:function(){return xq},canBeRepresented:function(){return Aq},createFragmentShader:function(){return Iq},createFramebuffer:function(){return zq},createProgram:function(){return _q},createStaticIndexBuffer:function(){return Fq},createStaticVertexBuffer:function(){return Oq},createTexture:function(){return Dq},createVertexShader:function(){return Sq},getBatchDim:function(){return Qq},getExtensionOrThrow:function(){return wq},getFramebufferErrorMessage:function(){return Zq},getMaxTexturesInShader:function(){return sK},getNumChannels:function(){return Pq},getProgramUniformLocation:function(){return Uq},getProgramUniformLocationOrThrow:function(){return Vq},getRowsCols:function(){return $q},getShapeAs3D:function(){return eK},getTextureShapeFromLogicalShape:function(){return tK},getWebGLDisjointQueryTimerVersion:function(){return uK},getWebGLErrorMessage:function(){return kq},getWebGLMaxTextureSize:function(){return aK},hasExtension:function(){return cK},isCapableOfRenderingToFloatTexture:function(){return dK},isDownloadFloatTextureEnabled:function(){return fK},isReshapeFree:function(){return rK},isWebGLFenceEnabled:function(){return hK},isWebGLVersionEnabled:function(){return lK},linkProgram:function(){return Rq},logShaderSourceAndInfoLog:function(){return Tq},resetMaxTextureSize:function(){return iK},resetMaxTexturesInShader:function(){return oK},unbindColorTextureFromFramebuffer:function(){return Kq},unbindTextureUnit:function(){return jq},validateFramebuffer:function(){return Xq},validateProgram:function(){return Mq},validateTextureSize:function(){return Lq}});var fq={},pq={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function hq(e,t){fq[e]=t}function mq(e,t){if(!(e in fq)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;return n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete fq[e]}),!1),1===e?n.getContext("webgl",pq)||n.getContext("experimental-webgl",pq):n.getContext("webgl2",pq)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;fq[e]=n}var r=fq[e];return null==r||r.isContextLost()?(delete fq[e],mq(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),fq[e])}function vq(e,t){return[t,e]}function gq(e){var t=Fh.sizeFromShape(e),n=Math.ceil(t/4);return Fh.sizeToSquarishShape(n)}function yq(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function bq(e,t){var n,r,a,i,o,s,u,c,l,d,f=e;return 2===id().getNumber("WEBGL_VERSION")?(n=f.R32F,r=f.R16F,a=f.RGBA16F,i=f.RGBA32F,o=f.RED,u=4,c=1,l=f.HALF_FLOAT,d=f.FLOAT,s=f.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=f.RGBA,o=e.RGBA,u=4,c=4,l=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:d}}function xq(e,t){var n=t();return id().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+kq(e,t))}(e),n}function Aq(e){return!!(id().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function kq(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}function wq(e,t){return Yq(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function Sq(e,t){var n=Yq(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(xq(e,(function(){return e.shaderSource(n,t)})),xq(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function Iq(e,t){var n=Yq(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(xq(e,(function(){return e.shaderSource(n,t)})),xq(e,(function(){return e.compileShader(n)})),id().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw Tq(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var Eq,Cq,Nq=/ERROR: [0-9]+:([0-9]+):/g;function Tq(e,t){var n=Nq.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return Fh.rightPad((t+1).toString(),i)+e})),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var c=o.slice(0,r-1),l=o.slice(r-1,r),d=o.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(Fh.rightPad(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}function _q(e){return Yq(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function Rq(e,t){if(xq(e,(function(){return e.linkProgram(t)})),!id().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function Mq(e,t){if(xq(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function Oq(e,t){var n=Yq(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return xq(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),xq(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}function Fq(e,t){var n=Yq(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return xq(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),xq(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}function Pq(){return 2===id().getNumber("WEBGL_VERSION")?1:4}function Dq(e){return Yq(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function Lq(e,t){var n=id().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+i+".")}}function zq(e){return Yq(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function Bq(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(xq(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),xq(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),xq(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function Wq(e,t,n){Jq(e,n),xq(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),xq(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}function jq(e,t){Jq(e,t),xq(e,(function(){return e.activeTexture(e.TEXTURE0+t)})),xq(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function Vq(e,t,n){return Yq(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function Uq(e,t,n){return e.getUniformLocation(t,n)}function Hq(e,t,n,r){xq(e,(function(){return Wq(e,t,r)})),xq(e,(function(){return e.uniform1i(n,r)}))}function Gq(e){xq(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),xq(e,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),xq(e,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))}function qq(e,t,n){xq(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),xq(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function Kq(e,t){xq(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),xq(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Xq(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Zq(e,t))}function Zq(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}function Yq(e,t,n){var r=xq(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function Jq(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function Qq(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Fh.sizeFromShape(e.slice(0,e.length-t))}function $q(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function eK(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[Qq(e)].concat(Tn($q(e)))),t}function tK(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=id().getNumber("WEBGL_MAX_TEXTURE_SIZE");t&&(n*=2,e=e.map((function(t,n){return n>=e.length-2?Fh.nearestLargerEven(e[n]):e[n]})),1===e.length&&(e=[2,e[0]])),2!==e.length&&(e=Fh.squeezeShape(e).newShape);var r=Fh.sizeFromShape(e);if(e.length<=1&&r<=n)return[1,r];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var a,i=Qq(e),o=2,s=2;return e.length&&(o=(a=u($q(e),2))[0],s=a[1]),r=i*(o/2)*(s/2),Fh.sizeToSquarishShape(r).map((function(e){return 2*e}))}return Fh.sizeToSquarishShape(r)}function nK(e){return e%2===0}function rK(e,t){if(e=e.slice(-2),t=t.slice(-2),Fh.arraysEqual(e,t)||!e.length||!t.length||0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r||nK(n)&&nK(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&nK(e[0])&&nK(t[0])}function aK(e){if(null==Eq){var t=mq(e);Eq=t.getParameter(t.MAX_TEXTURE_SIZE)}return Eq}function iK(){Eq=null}function oK(){Cq=null}function sK(e){if(null==Cq){var t=mq(e);Cq=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Cq)}function uK(e){if(0===e)return 0;var t=mq(e);return cK(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:cK(t,"EXT_disjoint_timer_query")?1:0}function cK(e,t){return null!=e.getExtension(t)}function lK(e){try{if(null!=mq(e))return!0}catch(Co){return console.log("Error when getting WebGL context: ",Co),!1}return!1}function dK(e){if(0===e)return!1;var t=mq(e);if(1===e){if(!cK(t,"OES_texture_float"))return!1}else if(!cK(t,"EXT_color_buffer_float"))return!1;return pK(t)}function fK(e){if(0===e)return!1;var t=mq(e);if(1!==e){if(cK(t,"EXT_color_buffer_float"))return pK(t);var n="EXT_color_buffer_half_float";if(cK(t,n)){var r=t.getExtension(n);return function(e,t){var n=bq(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,r)}return!1}return!(!cK(t,"OES_texture_float")||!cK(t,"WEBGL_color_buffer_float"))&&pK(t)}function pK(e){var t=bq(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function hK(e){return 2===e&&null!=mq(e).fenceSync}function mK(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Fh.assert("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the WebGL backend.")}))}))}var vK=id();function gK(){var e,t,n,r,a,i,o,s,u,c;return 2===id().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function yK(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=Fh.computeStrides(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function bK(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=Fh.computeStrides(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function xK(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}function AK(e){var t=Fh.computeStrides(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}vK.registerFlag("HAS_WEBGL",(function(){return vK.getNumber("WEBGL_VERSION")>0})),vK.registerFlag("WEBGL_VERSION",(function(){return lK(2)?2:lK(1)?1:0})),vK.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),vK.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===vK.get("WEBGL_VERSION")})),vK.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),vK.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),vK.registerFlag("WEBGL_PACK",(function(){return vK.getBool("HAS_WEBGL")})),vK.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return vK.getBool("WEBGL_PACK")})),vK.registerFlag("WEBGL_PACK_CLIP",(function(){return vK.getBool("WEBGL_PACK")})),vK.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return vK.getBool("WEBGL_PACK")})),vK.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return vK.getBool("WEBGL_PACK")})),vK.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return vK.getBool("WEBGL_PACK")})),vK.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return vK.getBool("WEBGL_PACK")})),vK.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return vK.getBool("WEBGL_PACK")})),vK.registerFlag("WEBGL_PACK_REDUCE",(function(){return vK.getBool("WEBGL_PACK")})),vK.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return vK.getBool("WEBGL_PACK")})),vK.registerFlag("WEBGL_CONV_IM2COL",(function(){return vK.getBool("WEBGL_PACK")})),vK.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return aK(vK.getNumber("WEBGL_VERSION"))})),vK.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return sK(vK.getNumber("WEBGL_VERSION"))})),vK.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=vK.getNumber("WEBGL_VERSION");return 0===e?0:uK(e)})),vK.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return vK.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!jm.isMobile()})),vK.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return dK(vK.getNumber("WEBGL_VERSION"))})),vK.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!vK.getBool("WEBGL_FORCE_F16_TEXTURES")&&vK.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),vK.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return fK(vK.getNumber("WEBGL_VERSION"))})),vK.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return hK(vK.getNumber("WEBGL_VERSION"))})),vK.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return vK.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),vK.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ".concat(e,"."))})),vK.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return jm.isMobile()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ".concat(e,"."))})),vK.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),vK.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),vK.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),vK.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128}));var kK="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",wK=sI.getBroadcastDims;function SK(e,t,n){var r=[];if(e.forEach((function(e){var t=Fh.sizeFromShape(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(UK(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,i,o=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?EK(e,r):IK(e,r);var i=e.shapeInfo.logicalShape,o=t.logicalShape;return i.length<=o.length&&(a+=n?WK(e,t):jK(e,t)),a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,c=gK(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(c),d=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(CK,"\n    ").concat(NK,"\n    ").concat(TK,"\n  ")}(c);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===r[0]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    "):1===r[1]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    "):n?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Fh.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);return n?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),o=i,s="",u="b, r, c",c=2;c<e.length-1;c++)o*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(o,";\n      index -= b").concat(c," * ").concat(o,";\n    ")+s,u="b".concat(c,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(c)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){return 1===t[0]?n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    "):1===t[1]?n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    "):n?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){return Fh.arraysEqual(e,t)?n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    "):1===e[1]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    "):1===e[0]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    "):n?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(bK(["r","c","d"],e),"\n    return ivec3(r, c, d);\n  }\n");var r=yK(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(bK(["r","c","d","d2"],e),"\n      return ivec4(r, c, d, d2);\n    }\n  ");var r=yK(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=yK(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=yK(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(c)),n.packedInputs&&(d+=_K),[d,l,i,o,a,s,n.userCode].join("\n")}function IK(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return MK(e,t);case 1:return OK(e,t);case 2:return FK(e,t);case 3:return PK(e,t);case 4:return DK(e,t);case 5:return LK(e);case 6:return zK(e);default:throw new Error("".concat(n.length,"-D input sampling is not yet supported"))}}function EK(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=gK();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=gK();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");var o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],u=gK();if(null!=i&&Fh.arraysEqual(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],l=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(l,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var s=[1,2],u=HK(e,n.slice(1)),c=["b","row","col"];return"\n        ".concat(EK(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(GK(c,s),");\n        }\n      ")}var l=gK();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");var d=o[0],f=o[1],p=Math.ceil(n[2]/2),h=p*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(d,", ").concat(f,", ").concat(h,", ").concat(p,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=gK();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var i=e.shapeInfo.logicalShape,o=i.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=u[0],l=u[1],d=Math.ceil(i[o-1]/2),f=d*Math.ceil(i[o-2]/2),p="int b, int row, int col",h="b * ".concat(f," + (row / 2) * ").concat(d," + (col / 2)"),m=2;m<o-1;m++)p="int b".concat(m,", ")+p,f*=i[o-m-1],h="b".concat(m," * ").concat(f," + ")+h;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(h,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var CK="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",NK="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",TK="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",_K="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function RK(e){return"offset".concat(e)}function MK(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=u(e.shapeInfo.texShape,2),i=a[0],o=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=RK(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var c=u(e.shapeInfo.texShape,2),l=c[0],d=c[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(l,", ").concat(d,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function OK(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(BK(e),"\n      }\n    ");var a=e.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=RK(n);return 1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function FK(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&Fh.arraysEqual(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var o=i[0],s=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=Fh.squeezeShape(n),c=u.newShape,l=u.keptDims,d=c;if(d.length<n.length){o=HK(e,d),s=["row","col"];return"\n      ".concat(IK(o,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(GK(s,l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(BK(e),"\n      }\n    ");var f=i[0],p=i[1],h=RK(r);return 1===p?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(f,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===f?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(h,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(p,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(h,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(h,";\n    vec2 uv = uvFromFlat(").concat(f,", ").concat(p,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function PK(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],s=Fh.squeezeShape(n),u=s.newShape,c=s.keptDims,l=u;if(l.length<n.length){var d=HK(e,l);return"\n        ".concat(IK(d,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(GK(["row","col","depth"],c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(BK(e),"\n      }\n    ");var f=e.shapeInfo.texShape,p=f[0],h=f[1],m=e.shapeInfo.flatOffset;if(h===i&&null==m)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(h,".0, ").concat(p,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(h===o&&null==m)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(h,".0, ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var v=RK(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(v,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(p,", ").concat(h,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function DK(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,u=Fh.squeezeShape(n),c=u.newShape,l=u.keptDims;if(c.length<n.length){var d=HK(e,c);return"\n      ".concat(IK(d,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(GK(["row","col","depth","depth2"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(BK(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],m=p[1],v="int stride2 = ".concat(r,"Shape[3];"),g="int stride1 = ".concat(r,"Shape[2] * stride2;"),y="int stride0 = ".concat(r,"Shape[1] * stride1;");if(m===s&&null==f)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(v,"\n        ").concat(g,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(m===i&&null==f)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var b=RK(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(v,"\n      ").concat(g,"\n      ").concat(y,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(m,", index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function LK(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,u=Fh.squeezeShape(t),c=u.newShape,l=u.keptDims;if(c.length<t.length){var d=HK(e,c);return"\n      ".concat(IK(d),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(GK(["row","col","depth","depth2","depth3"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(o,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(BK(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],m=p[1];if(m===s&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===a&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var v=RK(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(v,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function zK(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=Fh.squeezeShape(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var s=HK(e,i);return"\n      ".concat(IK(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(GK(["row","col","depth","depth2","depth3","depth4"],o),");\n      }\n    ")}var u=t[5],c=t[4]*u,l=t[3]*c,d=t[2]*l,f=t[1]*d;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(f,", ").concat(d,", ").concat(l,", ").concat(c,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(u,", 1)));\n        ").concat(BK(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,m=h[0],v=h[1];if(v===f&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(d,", ").concat(l,", ").concat(c,", ").concat(u,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===u&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(m,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var g=RK(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(f," + col * ").concat(d," + depth * ").concat(l," +\n          depth2 * ").concat(c," + depth3 * ").concat(u," + depth4 + ").concat(g,";\n      vec2 uv = uvFromFlat(").concat(m,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function BK(e){var t=e.name,n=Fh.sizeFromShape(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function WK(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=wK(e.shapeInfo.logicalShape,t.logicalShape),c=VK(s),l=s-o,d=["x","y","z","w","u","v"];n=0===o?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(d[e+l]," = 0;")})).join("\n");var f="";f=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(d[t+l])})).join(", ");var p="return outputValue;",h=1===Fh.sizeFromShape(e.shapeInfo.logicalShape),m=1===Fh.sizeFromShape(t.logicalShape);if(1!==o||h||m){if(h&&!m)p=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var v=o-2,g=o-1;u.indexOf(v)>-1&&u.indexOf(g)>-1?p="return vec4(outputValue.x);":u.indexOf(v)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(f,");\n      ").concat(p,"\n    }\n  ")}function jK(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&Fh.arraysEqual(o,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var c,l=VK(u),d=wK(e.shapeInfo.logicalShape,t.logicalShape),f=u-s,p=["x","y","z","w","u","v"];c=0===s?"":u<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords.".concat(p[e+f]," = 0;")})).join("\n");var h="";return h=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(p[t+f])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(r,"(").concat(h,");\n    }\n  ")}function VK(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function UK(e,t,n){var r=Fh.squeezeShape(t),a=r.newShape,i=r.keptDims,o=t.length,s=e&&3===o&&1===t[0],u=s?t.slice(1):a,c=!e&&o>1&&!Fh.arraysEqual(t,n)&&a.length<o||s;return{useSqueezeShape:c,uniformShape:c?u:t,keptDims:i}}function HK(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function GK(e,t){return t.map((function(t){return e[t]})).join(", ")}function qK(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=SK(a,o,t),u=Iq(e.gl,s),c=e.createProgram(u);return id().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o,uniformLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,inShapesLocations:null,inTexShapesLocations:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:Ze({program:t,fragmentShader:u,source:s,webGLProgram:c,inShapeInfos:i,outShapeInfo:o},KK(e,t,c))}function KK(e,t,n){var r,a,i,o,s={},u={},c={},l=[],d=null;o=e.getUniformLocation(n,"NAN",!1),1===id().getNumber("WEBGL_VERSION")&&(d=e.getUniformLocation(n,"INFINITY",!1));for(var f=!1,p=0;p<t.variableNames.length;p++){var h=t.variableNames[p];s[h]=e.getUniformLocation(n,h,f),s["offset".concat(h)]=e.getUniformLocation(n,"offset".concat(h),f),t.enableShapeUniforms&&(u["".concat(h,"Shape")]=e.getUniformLocation(n,"".concat(h,"Shape"),f),c["".concat(h,"TexShape")]=e.getUniformLocation(n,"".concat(h,"TexShape"),f))}return t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",f),i=e.getUniformLocation(n,"outShapeStrides",f),a=e.getUniformLocation(n,"outTexShape",f)),t.customUniforms&&t.customUniforms.forEach((function(t,r){l[r]=e.getUniformLocation(n,t.name,f)})),{uniformLocations:s,customUniformLocations:l,infLoc:d,nanLoc:o,inShapesLocations:u,inTexShapesLocations:c,outShapeLocation:r,outShapeStridesLocation:i,outTexShapeLocation:a}}function XK(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but was executed with ").concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!Fh.arraysEqual(r,i))throw Error("Binary was compiled with different shapes than the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!Fh.arraysEqual(o,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape ".concat(o," and ").concat(s," must match"))}}))}function ZK(e,t,n,r,a){t.program.enableShapeUniforms||(XK(t.inShapeInfos,n),XK([t.outShapeInfo],[r]));var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),1===id().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],i=t.uniformLocations[a],o=t.uniformLocations["offset".concat(a)],s=t.inShapesLocations["".concat(a,"Shape")],u=t.inTexShapesLocations["".concat(a,"TexShape")];if(s){var c=UK(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(c.length){case 1:e.gl.uniform1iv(s,new Int32Array(c));break;case 2:e.gl.uniform2iv(s,new Int32Array(c));break;case 3:e.gl.uniform3iv(s,new Int32Array(c));break;case 4:e.gl.uniform4iv(s,new Int32Array(c))}}if(u&&e.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=i){if(n.isUniform){if(Fh.sizeFromShape(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var l=n.uniformValues;l instanceof Float32Array||(l=new Float32Array(l)),e.gl.uniform1fv(i,l)}return}null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,i,r)}}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var u=Fh.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var i=t.customUniformLocations[r],o=a[r];if("float"===n.type)e.gl.uniform1fv(i,o);else if("vec2"===n.type)e.gl.uniform2fv(i,o);else if("vec3"===n.type)e.gl.uniform3fv(i,o);else if("vec4"===n.type)e.gl.uniform4fv(i,o);else if("int"===n.type)e.gl.uniform1iv(i,o);else if("ivec2"===n.type)e.gl.uniform2iv(i,o);else if("ivec3"===n.type)e.gl.uniform3iv(i,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(i,o)}})),e.executeProgram()}function YK(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var i=t.texData.texShape,o=UK(e.packedInputs,t.shape,i),s=o.useSqueezeShape,u=o.uniformShape,c=o.keptDims,l="",d="",f="";if(1===u.length&&e.packedInputs){var p=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];l="".concat(p[0]>1,"_").concat(p[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var h=Fh.computeStrides(u);f="".concat(h[0]===i[1],"_").concat(h[h.length-1]===i[1])}}else d="".concat(u[0]>1,"_").concat(u[1]>1);var m=t.shape.length,v=2===u.length&&Fh.arraysEqual(t.shape,i),g=1===Fh.sizeFromShape(t.shape),y=sI.getBroadcastDims(t.shape,n.shape),b=!e.packedInputs&&m===n.shape.length&&Fh.arraysEqual(i,n.texData.texShape),x=e.packedInputs||u.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(m,"_").concat(b,"_").concat(s?c:"","_").concat(u.length,"_").concat(g,"_").concat(y,"_").concat(v,"_").concat(l,"_").concat(d,"_").concat(f,"_").concat(x,"_").concat(a)}else{var A=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(A,"_").concat(a)}}));var a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a+"".concat(id().getNumber("WEBGL_VERSION"))}function JK(e){return id().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var QK=Qe((function e(t){Ye(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=gK();this.outputShape=t,this.enableShapeUniforms=JK(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?bK(["r","c","d"],t):yK(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),$K=Qe((function e(t){Ye(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=gK();this.outputShape=t,this.enableShapeUniforms=JK(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?bK(["r","c","d"],t):yK(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),eX=Qe((function e(t){Ye(this,e),this.variableNames=["A"],this.outTexUsage=3;var n=gK();this.outputShape=t,this.userCode="\n      ".concat(kK,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),tX=Qe((function e(t){Ye(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=3;var n=gK();this.outputShape=t,this.userCode="\n      ".concat(kK,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),nX=Qe((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ye(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=gK();this.outputShape=t,this.enableShapeUniforms=JK(this.outputShape.length);var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":AK(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ").concat(r.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")})),rX=Qe((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ye(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=gK();this.outputShape=t,this.enableShapeUniforms=JK(this.outputShape.length);var a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var s=0;s<=1;s++){var u=2*o+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":AK(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(i,";\n        }\n    ")})),aX={};function iX(e){var t=gK();return Sq(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function oX(e){return Oq(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function sX(e){return Fq(e,new Uint16Array([0,1,2,2,1,3]))}function uX(e,t,n,r,a,i){Lq(t,n);var o=Dq(e),s=e.TEXTURE_2D;return xq(e,(function(){return e.bindTexture(s,o)})),xq(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),xq(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),xq(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),xq(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===id().getNumber("WEBGL_VERSION")?xq(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})):xq(e,(function(){return e.texStorage2D(s,1,r,t,n)})),xq(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:o,texShape:[n,t]}}function cX(e){return e.internalFormatFloat}function lX(e,t,n,r){var a=u(vq(t,n),2);return uX(e,a[0],a[1],cX(r),r.textureFormatFloat,e.FLOAT)}function dX(e){return e.internalFormatHalfFloat}function fX(e,t,n,r){var a=u(vq(t,n),2);return uX(e,a[0],a[1],dX(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function pX(e){return e.downloadTextureFormat}function hX(e,t,n,r){var a=u(vq(t,n),2);return uX(e,a[0],a[1],pX(r),e.RGBA,e.UNSIGNED_BYTE)}function mX(e){return e.internalFormatPackedFloat}function vX(e,t,n,r){var a=u(yq(t,n),2);return uX(e,a[0],a[1],mX(r),e.RGBA,e.FLOAT)}function gX(e){return e.internalFormatPackedHalfFloat}function yX(e,t,n,r){var a=u(yq(t,n),2);return uX(e,a[0],a[1],gX(r),e.RGBA,r.textureTypeHalfFloat)}function bX(e,t,n){return xq(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),Bq(e,t,"clipSpacePos",n,3,20,0)&&Bq(e,t,"uv",n,2,20,12)}function xX(e,t,n,r,a,i){var o,s,u;xq(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,u=i.internalFormatPackedFloat),o.set(a),2===id().getNumber("WEBGL_VERSION")?xq(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,o)})):xq(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,o)})),xq(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function AX(e,t,n){xq(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===id().getNumber("WEBGL_VERSION")?xq(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):xq(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===id().getNumber("WEBGL_VERSION")?xq(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):xq(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),xq(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function kX(e,t,n,r){var a=e.createBuffer();xq(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return xq(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),xq(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),xq(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}function wX(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function SX(e,t,n,r){var a=u(vq(t,n),2),i=a[0],o=a[1],s=new Uint8Array(function(e,t){return e*t}(t*n,4));return xq(e,(function(){return e.readPixels(0,0,i,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)})),new Float32Array(s.buffer)}function IX(e,t,n,r,a,i,o,s){var c=e,l=new Float32Array(function(e,t){var n=u(yq(e,t),2);return n[0]*n[1]*4}(i,o));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,l),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),l}function EX(e,t,n){var r=new Float32Array(t*n*4);return xq(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}Dc(aX,{bindVertexProgramAttributeStreams:function(){return bX},createBufferFromOutputTexture:function(){return kX},createFloat16MatrixTexture:function(){return fX},createFloat16PackedMatrixTexture:function(){return yX},createFloat32MatrixTexture:function(){return lX},createIndexBuffer:function(){return sX},createPackedMatrixTexture:function(){return vX},createUnsignedBytesMatrixTexture:function(){return hX},createVertexBuffer:function(){return oX},createVertexShader:function(){return iX},downloadByteEncodedFloatMatrixFromOutputTexture:function(){return SX},downloadFloat32MatrixFromBuffer:function(){return wX},downloadMatrixFromPackedOutputTexture:function(){return EX},downloadPackedMatrixFromBuffer:function(){return IX},getInternalFormatForFloat16MatrixTexture:function(){return dX},getInternalFormatForFloat16PackedMatrixTexture:function(){return gX},getInternalFormatForFloat32MatrixTexture:function(){return cX},getInternalFormatForPackedMatrixTexture:function(){return mX},getInternalFormatForUnsignedBytesMatrixTexture:function(){return pX},uploadDenseMatrixToTexture:function(){return xX},uploadPixelDataToTexture:function(){return AX}});var CX=function(){function e(t){Ye(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=id().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,hq(n,t)):this.gl=mq(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===id().getNumber("WEBGL_VERSION")){var i="OES_texture_half_float";if(this.textureFloatExtension=wq(this.gl,"OES_texture_float"),cK(this.gl,i))this.textureHalfFloatExtension=wq(this.gl,i);else if(id().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),cK(this.gl,a))this.colorBufferHalfFloatExtension=wq(this.gl,a);else if(id().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",cK(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!cK(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=oX(this.gl),this.indexBuffer=sX(this.gl),this.framebuffer=zq(this.gl),this.textureConfig=bq(this.gl,this.textureHalfFloatExtension)}return Qe(e,[{key:"debug",get:function(){return id().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;xq(t,(function(){return t.finish()})),xq(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),xq(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),xq(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),xq(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),xq(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),lX(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),fX(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),hX(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),AX(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),xX(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),yX(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),vX(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(Kq(this.gl,this.framebuffer),this.outputTexture=null),xq(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return SX(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return IX(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return wX(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=kX(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(id().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else id().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,id().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return EX(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=iX(n));var r=_q(n);return xq(n,(function(){return n.attachShader(r,t.vertexShader)})),xq(n,(function(){return n.attachShader(r,e)})),Rq(n,r),this.debug&&Mq(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=bX(n,this.program,this.vertexBuffer)),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&xq(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&Mq(this.gl,this.program),xq(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?Vq(this.gl,e,t):Uq(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),xq(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Hq(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=u(yq(t,n),2),a=r[0],i=r[1];this.setOutputMatrixTextureDriver(e,a,i)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&Mq(this.gl,this.program),Xq(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),xq(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),xq(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=wq(this.gl,2===id().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===id().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==id().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=ct(st().mark((function e(t){var n=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fh.repeatedTry((function(){return n.disposed||n.isQueryAvailable(t,id().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,id().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),!(this.itemsToPoll.length>1)&&Fh.repeatedTry((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),qq(this.gl,e,this.framebuffer),this.debug&&Xq(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(qq(this.gl,this.outputTexture,this.framebuffer),this.debug&&Xq(this.gl)):Kq(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;qq(r,e,this.framebuffer),this.debug&&Xq(r),this.outputTexture=e,xq(r,(function(){return r.viewport(0,0,t,n)})),xq(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),xq(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();var NX=$B.addImpl,TX=$B.bincountImpl,_X=$B.bincountReduceImpl,RX=$B.ceilImpl,MX=$B.concatImpl,OX=$B.equalImpl,FX=$B.expImpl,PX=$B.expm1Impl,DX=$B.floorImpl,LX=$B.gatherNdImpl,zX=$B.gatherV2Impl,BX=$B.greaterImpl,WX=$B.greaterEqualImpl,jX=$B.lessImpl,VX=$B.lessEqualImpl,UX=$B.linSpaceImpl,HX=$B.logImpl,GX=$B.maxImpl,qX=$B.maximumImpl,KX=$B.minimumImpl,XX=$B.multiplyImpl,ZX=$B.negImpl,YX=$B.notEqualImpl,JX=$B.prodImpl,QX=$B.rangeImpl,$X=$B.rsqrtImpl,eZ=$B.scatterImpl,tZ=$B.sigmoidImpl,nZ=$B.simpleAbsImpl,rZ=$B.sliceImpl,aZ=$B.sparseFillEmptyRowsImpl,iZ=$B.sparseReshapeImpl,oZ=$B.sparseSegmentReductionImpl,sZ=$B.sqrtImpl,uZ=$B.stridedSliceImpl,cZ=$B.stringNGramsImpl,lZ=$B.stringSplitImpl,dZ=$B.stringToHashBucketFastImpl,fZ=$B.subImpl,pZ=$B.tileImpl,hZ=$B.topKImpl,mZ=$B.transposeImpl,vZ=$B.uniqueImpl;function gZ(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function yZ(e,t){return 1===t?[e]:gZ(e,t)}var bZ=function(){function e(t){if(Ye(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=JK(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=yZ("rc",this.rank),r=VK(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}return Qe(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),i=2;i<this.rank;i++)a="".concat(e[e.length-1-i],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);return 1===this.rank?"getA(rc), (rc + 1 >= ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]," ? 0. : getA(rc + 1)), 0, 0"):"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),xZ=Qe((function e(t,n){Ye(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=JK(this.outputShape.length);for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((function(e,t){return t})),a=xK(r,t);return a.map((function(t,r){var i="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),o=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(i,"; ").concat(o,";")})).join("")}(["r","c","d"],"inputShape"):yK(["r","c","d"],e),"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":AK(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var AZ=function(){function e(t){Ye(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return Qe(e,[{key:"acquireTexture",value:function(e,t,n){var r=wZ(t,n),a=SZ(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=kZ(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return 3===r?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):4===r?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):1===r?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):0===r?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):2===r&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=wZ(n,r),i=SZ(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=kZ(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=id().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var u=this.usedTextures[i],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function kZ(e,t,n,r,a){var i,o=function(e,t){switch(e){case 3:return mX(t);case 4:return gX(t);case 1:return cX(t);case 0:return dX(t);case 2:return pX(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=u(yq(e[0],e[1]),2);i=s[0]*s[1]}else{var c=u(vq(e[0],e[1]),2);i=c[0]*c[1]}var l=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*l}function wZ(e,t){if(1===e)return 3;if(0===e||null==e)return function(e){return id().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?3:1:e?4:0}(t);if(3===e||2===e)return 2;throw new Error("Unknown logical texture type ".concat(e))}function SZ(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var IZ=Qe((function e(t,n){Ye(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=JK(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),EZ="if (isnan(x)) return x;",CZ="return x;",NZ="return abs(x);",TZ="return (x >= 0.0) ? x : (exp(x) - 1.0);",_Z=EZ+"\n  return (x < 0.0) ? 0.0 : x;\n",RZ=EZ+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",MZ="return x;",OZ="return 1.0 / (1.0 + exp(-1.0 * x));",FZ="return x;",PZ="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",DZ="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",LZ="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",zZ="return 1.0 / (1.0 + exp(-1.0 * x));",BZ=Qe((function e(t,n){Ye(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=JK(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),WZ=Qe((function e(t){Ye(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=JK(this.outputShape.length);var n=t.length,r=yZ("rc",n),a=VK(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),jZ=sE.whereImpl,VZ={};var UZ=id().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var HZ=function(e){et(n,e);var t=ot(n);function n(e){var r,a;if(Ye(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!id().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof CX)a=e;else{var i=mq(id().getNumber("WEBGL_VERSION"),e);a=new CX(i)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var o=mq(id().getNumber("WEBGL_VERSION"));a=new CX(o),r.binaryCache=function(e){return e in VZ||(VZ[e]={}),VZ[e]}(id().getNumber("WEBGL_VERSION")),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new AZ(r.gpgpu),r.numMBBeforeWarning=null==id().global.screen?1024:id().global.screen.height*id().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new al(at(r),qg()),it(r)}return Qe(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"write",value:function(e,t,n){if((id().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||id().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:1,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(id().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:1,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var u;u=s?new BZ(o,MZ):new IZ(o,MZ);var c=this.runWebGLProgram(u,[{dataId:e,shape:o,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,f,p=null!=this.activeTimers;if(p&&(d=Fh.now()),"complex64"===r){var h=this.readSync(a.real.dataId),m=this.readSync(a.imag.dataId);f=sI.mergeRealAndImagArrays(h,m)}else f=this.getValuesFromTexture(e);return p&&(this.downloadWaitMs+=Fh.now()-d),this.convertAndCacheOnCPU(e,f)}},{key:"read",value:function(){var e=ct(st().mark((function e(t){var n,r,a,i,o,s,u,c,l,d,f,p,h,m,v,g,y,b,x,A,k,w;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,i=r.shape,o=r.slice,s=r.dtype,u=r.complexTensorInfos,c=r.isPacked,null==o){e.next=8;break}return n=c?new BZ(i,MZ):new IZ(i,MZ),l=this.runWebGLProgram(n,[{dataId:t,shape:i,dtype:s}],s),d=this.read(l.dataId),e.abrupt("return",(this.disposeIntermediateTensorInfo(l),d));case 8:if(null==a){e.next=10;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 10:if(!id().getBool("DEBUG")||id().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==id().getNumber("WEBGL_VERSION")){e.next=12;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 12:if(f=null,"complex64"!==s&&id().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(t),m=this.texData.get(p.dataId),f=(h=this.gpgpu).createBufferFromTexture.apply(h,[m.texture.texture].concat(Tn(gq(i))))),this.pendingRead.set(t,[]),e.t0="complex64"!==s,!e.t0){e.next=19;break}return e.next=19,this.gpgpu.createAndWaitForFence();case 19:if("complex64"!==s){e.next=28;break}return e.next=22,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 22:g=e.sent,y=g[0],b=g[1],v=sI.mergeRealAndImagArrays(y,b),e.next=29;break;case 28:null==f?v=this.getValuesFromTexture(t):(x=Fh.sizeFromShape(i),v=this.gpgpu.downloadFloat32MatrixFromBuffer(f,x));case 29:return null!=p&&this.disposeIntermediateTensorInfo(p),null!=f&&xq(A=this.gpgpu.gl,(function(){return A.deleteBuffer(f)})),k=this.convertAndCacheOnCPU(t,v),w=this.pendingRead.get(t),e.abrupt("return",(this.pendingRead.delete(t),w.forEach((function(e){return e(k)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&qg().removeDataId(t,this),this.pendingDeletes--),k));case 32:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.isPacked,u=n.texture;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var c;c=s?new BZ(a,MZ):new IZ(a,MZ);var l=this.runWebGLProgram(c,[{dataId:e,shape:a,dtype:o}],o),d=this.readToGPU(l,t);return this.disposeIntermediateTensorInfo(l),d}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var f=this.decode(e,t.customTexShape),p=qg().makeTensorFromTensorInfo(f),h=this.texData.get(f.dataId);return Ze({tensorRef:p},h.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return Fh.decodeString(e)}));return cg(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return cg(e.shape,e.dtype,t)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!Aq(n))throw id().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value ".concat(n," cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'")):Error("The value ".concat(n," cannot be represented on this device."))}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,i=Fh.sizeFromShape(n);if(id().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,s=this.decode(e),u=this.texData.get(s.dataId),c=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[u.texture.texture].concat(Tn(gq(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(s),c}var l=id().getBool("WEBGL_PACK")&&!0===a,d=l?eK(n):n,f=l?new tX(d):new eX(d),p=this.runWebGLProgram(f,[{shape:d,dtype:r,dataId:e}],"float32"),h=this.texData.get(p.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture.texture,h.texShape[0],h.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(p),m}},{key:"timerAvailable",value:function(){return id().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var i=Fh.flatten(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=Fh.flatten(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return ct(st().mark((function e(){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(id().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=7;break}return e.next=3,Promise.all(i);case 3:n=e.sent,s.kernelMs=Fh.sum(n),s.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=8;break;case 7:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 8:return e.abrupt("return",(t.uploadWaitMs=0,t.downloadWaitMs=0,s));case 9:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return id().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Fh.now(),endMs:null}}},{key:"endTimer",value:function(e){return id().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Fh.now(),e)}},{key:"getQueryTime",value:function(){var e=ct(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(id().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:UZ;return id().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&Fh.sizeFromShape(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){sI.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return jZ(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new BZ(e.shape,t),a=this.compileAndRun(r,[e],n);return qg().makeTensorFromTensorInfo(a)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=nZ(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(id().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,NZ,e.dtype);var n=new IZ(e.shape,NZ),r=this.compileAndRun(n,[e]);return qg().makeTensorFromTensorInfo(r)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&Fh.isString(n[0])){var a=n.map((function(e){return Fh.encodeString(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){return qg().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}},{key:"unpackTensor",value:function(e){var t=new WZ(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new bZ(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[Qq(e.shape)].concat(Tn($q(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[Qq(t)].concat(Tn($q(t))),i=new xZ(a,n),o=[n],s=this.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype;if(null!=t){var o=Fh.sizeFromShape(a),s=t[0]*t[1]*4;Fh.assert(o<=s,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}))}var u,c=eK(a);u=r?new $K(c):new QK(c);var l=[null!=t?t:gq(c)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(u,[{shape:c,dtype:i,dataId:e}],i,l,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),0===e.outPackingScheme){var c=null!=o?o:gq(e.outputShape);u.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===Fh.sizeFromShape(s.shape))return u.values=Fh.getTypedArrayFromDType(s.dtype,0),s;var l=[],d=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Fh.sizeFromShape(t.shape)<=id().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!=!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),l.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!rK(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),l.push(t),n=a.texData.get(t.dataId),r.shape=i}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var f,p={shape:s.shape,texData:u,isUniform:!1},h=YK(e,d,p),m=this.getAndSaveBinary(h,(function(){return qK(a.gpgpu,e,d,p)})),v=null!=this.activeTimers;v&&(f=this.startTimer()),id().get("ENGINE_COMPILE_ONLY")||ZK(this.gpgpu,m,d,p,r),l.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),v&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));var g=id().get("WEBGL_FLUSH_THRESHOLD");if(g>0){var y=Fh.now();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!id().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===i){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,r,a)}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;this.disposed||(id().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Zg((function(){if(!id().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=id().getBool("DEBUG");id().set("DEBUG",!1);var n=e.abs(Jx(1e-8)).dataSync()[0];if(id().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,i=t.texture,o=t.usage,s=t.isPacked;if(null==i){var c,l=null!=this.activeTimers;l&&(c=Fh.now());var d=t.texShape;if(null==d&&(d=tK(n,s),t.texShape=d),null!=a){var f,p,h=eK(n),m=d[1],v=d[0],g=a instanceof Uint8Array||a instanceof Uint8ClampedArray;(s||!g)&&(m=(f=u(yq(d[0],d[1]),2))[0],v=f[1]),p=s?new rX(h,g):new nX(h,g);var y=g?[v,m]:d,b=this.makeTensorInfo(y,r),x=this.texData.get(b.dataId);x.usage=g?2:1,x.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),m,v,a);var A=[[v,m]],k=this.runWebGLProgram(p,[b],r,A,!0),w=this.texData.get(k.dataId);t.texShape=w.texShape,t.isPacked=w.isPacked,t.usage=w.usage,id().get("ENGINE_COMPILE_ONLY")?this.disposeData(k.dataId):(t.texture=w.texture,t.values=null,this.texData.delete(k.dataId)),this.disposeIntermediateTensorInfo(b),l&&(this.uploadWaitMs+=Fh.now()-c)}else{var S=this.acquireTexture(d,o,r,s);t.texture=S}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, most likely due to a memory leak"))}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*Fh.bytesPerElement(t)}},{key:"checkCompileCompletion",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=u(t[e],2)[1];this.checkCompletion_(n)}}},{key:"checkCompileCompletionAsync",value:function(){var e=ct(st().mark((function e(){var t,n,r,a,i,o,s,c,l=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!this.gpgpu.parallelCompilationExtension){e.next=6;break}for(n=0,r=Object.entries(this.binaryCache);n<r.length;n++)a=u(r[n],2),i=a[1],t.push(this.checkCompletionAsync_(i));return e.abrupt("return",Promise.all(t));case 6:for(o=function(){var e=u(c[s],2)[1],n=new Promise((function(t){try{l.checkCompletion_(e),t(!0)}catch(Eo){throw Eo}}));t.push(n)},s=0,c=Object.entries(this.binaryCache);s<c.length;s++)o();return e.abrupt("return",Promise.all(t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkCompletionAsync_",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gpgpu.gl.getProgramParameter(t.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)){e.next=4;break}e.t0=this.checkCompletion_(t),e.next=7;break;case 4:return e.next=6,oI();case 6:e.t0=this.checkCompletionAsync_(t);case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCompletion_",value:function(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS))throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)?(Tq(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}},{key:"getUniformLocations",value:function(){for(var e=0,t=Object.entries(this.binaryCache);e<t.length;e++){var n=u(t[e],2)[1],r=KK(this.gpgpu,n.program,n.webGLProgram),a=r.uniformLocations,i=r.customUniformLocations,o=r.infLoc,s=r.nanLoc,c=r.inShapesLocations,l=r.inTexShapesLocations,d=r.outShapeLocation,f=r.outShapeStridesLocation,p=r.outTexShapeLocation;n.uniformLocations=a,n.customUniformLocations=i,n.infLoc=o,n.nanLoc=s,n.inShapesLocations=c,n.inTexShapesLocations=l,n.outShapeLocation=d,n.outShapeStridesLocation=f,n.outTexShapeLocation=p}}}]),n}(il),GZ=HZ;GZ.nextDataId=0;var qZ="0.0.0";function KZ(){id().set("WEBGL_FORCE_F16_TEXTURES",!0)}jm.isBrowser()&&iy("webgl",(function(){return new GZ}),2);var XZ={forceHalfFloat:KZ},ZZ=Qe((function e(t,n,r){Ye(this,e),this.variableNames=["A","B"],this.outputShape=sI.assertAndGetBroadcastShape(n,r),this.enableShapeUniforms=JK(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),YZ=Qe((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Ye(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=sI.assertAndGetBroadcastShape(n,r);var i=this.outputShape.length;this.enableShapeUniforms=JK(i);var o="";if(a)if(0===i||1===Fh.sizeFromShape(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(o="\n          ".concat(VK(i)," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var s=yZ("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(s[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(s[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(s[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(s[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}));function JZ(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var QZ={kernelName:If,backendName:"webgl",kernelFunc:JZ};function $Z(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=JZ({inputs:{x:r},backend:n}),u=JZ({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var eY={kernelName:Dd,backendName:"webgl",kernelFunc:$Z},tY="return (a < 0.) ? b * a : a;",nY="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var rY={kernelName:Rf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",Fh.createScalarValue(i,"float32")),s=id().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new YZ(nY,a.shape,o.shape):new ZZ(tY,a.shape,o.shape),u=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),u}},aY="return (a < 0.) ? b * a : a;",iY="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var oY={kernelName:vp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=id().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new YZ(iY,r.shape,a.shape):new ZZ(aY,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}};function sY(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,u=o.x,c=s,l=a||u.dtype;if(c.shouldExecuteOnCPU([u])&&null!=r){var d=c.texData.get(u.dataId),f=r(d.values,l);return c.makeTensorInfo(u.shape,l,f)}return i=id().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new BZ(u.shape,n):new IZ(u.shape,t),c.runWebGLProgram(i,[u],l)}}function uY(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,s=e.cpuKernelImpl,c=e.dtype;return function(e){var r=e.inputs,i=e.backend,l=r.a,d=r.b,f=i;if(o&&"complex64"===l.dtype){var p=f.texData.get(l.dataId),h=f.texData.get(d.dataId),m=[[p.complexTensorInfos.real,h.complexTensorInfos.real],[p.complexTensorInfos.imag,h.complexTensorInfos.imag]].map((function(e){var n=u(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:l.shape},o={dataId:a.dataId,dtype:a.dtype,shape:d.shape},s=new ZZ(t,l.shape,d.shape);return f.runWebGLProgram(s,[i,o],Im(r.dtype,a.dtype))})),v=u(m,2),g=v[0],y=v[1],b=$Z({inputs:{real:g,imag:y},backend:f});return f.disposeIntermediateTensorInfo(g),f.disposeIntermediateTensorInfo(y),b}var x,A=c||Im(l.dtype,d.dtype);if(("string"===l.dtype||"string"===d.dtype||f.shouldExecuteOnCPU([l,d]))&&null!=s){var k=f.texData.get(l.dataId).values,w=f.texData.get(d.dataId).values,S="string"===l.dtype?sI.fromUint8ToStringArray(k):k,I="string"===l.dtype?sI.fromUint8ToStringArray(w):w,E=u(s(l.shape,d.shape,S,I,A),2),C=E[0],N=E[1],T=f.makeTensorInfo(N,A);return f.texData.get(T.dataId).values=C,T}return x=id().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new YZ(n,l.shape,d.shape,a):new ZZ(t,l.shape,d.shape),f.runWebGLProgram(x,[l,d],A)}}function cY(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?FZ:CZ;if("relu"===e)return t?DZ:_Z;if("elu"===e)return t?PZ:TZ;if("relu6"===e)return t?LZ:RZ;if("prelu"===e)return t?iY:aY;if("leakyrelu"===e)return t?nY:tY;if("sigmoid"===e)return t?zZ:OZ;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var lY=Qe((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];Ye(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=JK(this.outputShape.length);var l=a?t[1]:t[2],d=Math.ceil(l/2),f=a?"i * 2, rc.y":"rc.y, i * 2",p=i?"rc.z, i * 2":"i * 2, rc.z",h=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],v="",g="";s&&(v=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),g="result = activation(result);");var y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var b="rc.x",x="rc.x";t[0]<n[0]?b="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(x="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(v,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(d,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(d,"; i++) {\n          int batchA = ").concat(b,";\n          int batchB = ").concat(x,";\n          vec4 a = getMatrixA(batchA, ").concat(f,");\n          vec4 b = getMatrixB(batchB, ").concat(p,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(h[0]," * ").concat(m[0],");\n          result += (").concat(h[1]," * ").concat(m[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(y,"\n\n        ").concat(g,"\n\n        setOutput(result);\n      }\n    ")})),dY="return areal * breal - aimag * bimag;",fY="return areal * bimag + aimag * breal;",pY=Qe((function e(t,n,r){Ye(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=sI.assertAndGetBroadcastShape(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),hY="return a * b;";function mY(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=sI.upcastType(a.dtype,i.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),c=r.texData.get(i.dataId),l=new pY(dY,a.shape,i.shape),d=new pY(fY,a.shape,i.shape),f=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:c.complexTensorInfos.real.dataId,dtype:c.complexTensorInfos.real.dtype,shape:i.shape},{dataId:c.complexTensorInfos.imag.dataId,dtype:c.complexTensorInfos.imag.dtype,shape:i.shape}],p=r.runWebGLProgram(l,f,"float32"),h=r.runWebGLProgram(d,f,"float32"),m=$Z({inputs:{real:p,imag:h},backend:r});return r.disposeIntermediateTensorInfo(p),r.disposeIntermediateTensorInfo(h),m}if(r.shouldExecuteOnCPU([a,i])){var v=r.texData.get(a.dataId),g=r.texData.get(i.dataId),y=u(XX(a.shape,i.shape,v.values,g.values,o),2),b=y[0],x=y[1],A=r.makeTensorInfo(x,o);return r.texData.get(A.dataId).values=b,A}return t=id().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new YZ(hY,a.shape,i.shape):new ZZ(hY,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var vY={kernelName:ap,backendName:"webgl",kernelFunc:mY};function gY(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,s=Fh.sizeFromShape(a.shape),u=Fh.inferFromImplicitShape(i,s),c=Fh.sizeFromShape(u);Fh.assert(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old shape (").concat(a.shape,") has ").concat(s," elements. The new shape and old shape must have the same number of elements.")}));var l=o.texData.get(a.dataId);return!l.isPacked||rK(a.shape,u)||null!==l.texture&&rK(l.shape,u)?(o.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[Qq(e.shape)].concat(Tn($q(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[Qq(t)].concat(Tn($q(t))),o=new xZ(i,r),s=[r],u=n.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,u,o)}var yY={kernelName:kp,backendName:"webgl",kernelFunc:gY},bY=Qe((function e(t,n){Ye(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s=4*Math.floor(r/4),u=r%4,c="sumValue += dot(values, ones);";if(null!=n){var l=1/n;c="sumValue += dot(values * ".concat(Fh.isInt(l)?l.toPrecision(2):l,", ones);")}var d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),xY=Qe((function e(t,n){Ye(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),d=r%4,f="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),p="vec4";"all"===n?(s="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===n&&(s="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var h="";i%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(f,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(2===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(3===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(f,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}));function AY(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=sI.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var s,u=a[o],c=u.inSize,l=u.windowSize,d=u.outSize,f=void 0;f="mean"===n?0===o?new bY({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:d},c):new bY({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:d}):new xY({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:d},n),s=i,i=r.runWebGLProgram(f,[i],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return i}var kY=Qe((function e(t,n){Ye(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=VK(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}));var wY=Qe((function e(t,n){Ye(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=VK(this.rank),o=gZ("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=o[u];var c="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),d="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(d,";\n      if(").concat(l,") {\n        result[1] = ").concat(d,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(d,";\n        if(").concat(l,") {\n          result[3] = ").concat(d,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function SY(e,t,n){var r=id().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new wY(e.shape,t):new kY(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function IY(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,i=e.shape.length,o=Fh.parseAxisParam(a,e.shape),s=o,c=sI.getAxesPermutation(s,i),l=null!=c,d=e;l&&(d=SY(e,c,r),s=sI.getInnerMostAxes(s.length,i)),sI.assertAxesAreInnerMostDims("sum",s,i);var f=u(sI.computeOutAndReduceShapes(d.shape,s),2),p=f[0],h=f[1],m=p;n&&(m=sI.expandShapeToKeepDim(p,o));var v=Fh.sizeFromShape(h),g=gY({inputs:{x:d},attrs:{shape:[Fh.sizeFromShape(e.shape)/v,v]},backend:r}),y=AY(g,Em(e.dtype),"sum",r),b=gY({inputs:{x:y},attrs:{shape:m},backend:r});return r.disposeIntermediateTensorInfo(g),r.disposeIntermediateTensorInfo(y),l&&r.disposeIntermediateTensorInfo(d),b}(t.x,r.axis,r.keepDims,n)}var EY={kernelName:Vp,backendName:"webgl",kernelFunc:IY};function CY(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,s=r,u=i.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=i.shape[o[l]];if(s.shouldExecuteOnCPU([i])){var d=s.texData.get(i.dataId).values,f=mZ(d,i.shape,i.dtype,o,c);t=s.makeTensorInfo(c,i.dtype),s.texData.get(t.dataId).values=f}else t=SY(i,o,s);return t}var NY={kernelName:ch,backendName:"webgl",kernelFunc:CY};function TY(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,f=e.activation,p=void 0===f?null:f,h=t.shape.length,m=n.shape.length,v=r?t.shape[h-2]:t.shape[h-1],g=a?n.shape[m-1]:n.shape[m-2],y=r?t.shape[h-1]:t.shape[h-2],b=a?n.shape[m-2]:n.shape[m-1],x=t.shape.slice(0,-2),A=n.shape.slice(0,-2),k=Fh.sizeFromShape(x),w=Fh.sizeFromShape(A),S=py.assertAndGetBroadcastShape(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);Fh.assert(v===g,(function(){return"Error in matMul: inner shapes (".concat(v,") and (").concat(g,") of Tensors with shapes ").concat(t.shape," and ").concat(n.shape," and transposeA=").concat(r," and transposeB=").concat(a," must match.")}));var I,E=r?[k,v,y]:[k,y,v],C=a?[w,b,g]:[w,g,b],N=gY({inputs:{x:t},backend:i,attrs:{shape:E}}),T=gY({inputs:{x:n},backend:i,attrs:{shape:C}}),_=[N,T],R=Math.max(k,w),M=r?N.shape[1]:N.shape[2],O=null!=s,F=null!=c,P="leakyrelu"===p,D=null!=p?cY(p,!0):null;if((1===y||1===b)&&M>1e3&&!1===(O||F||P||null!=D)){var L=N,z=T;r&&(L=CY({inputs:{x:N},backend:i,attrs:{perm:[0,2,1]}}),_.push(L)),a&&(z=CY({inputs:{x:T},backend:i,attrs:{perm:[0,2,1]}}),_.push(z));var B=1===b,W=L;1!==b&&(W=gY({inputs:{x:L},backend:i,attrs:{shape:[R,M,1]}}),_.push(W));var j=1===b?2:1,V=z;B&&(V=gY({inputs:{x:z},backend:i,attrs:{shape:[R,1,M]}}),_.push(V));var U=mY({inputs:{a:W,b:V},backend:i});I=IY({inputs:{x:U},backend:i,attrs:{axis:j,keepDims:!0}}),_.push(U)}else{var H=Im(t.dtype,n.dtype),G=new lY(E,C,[R,y,b],r,a,O,D,F,P),q=[N,T];if(null!=s&&q.push(s),F&&q.push(c),P){var K=i.makeTensorInfo([],"float32",Fh.createScalarValue(d,"float32"));q.push(K),_.push(K)}I=i.runWebGLProgram(G,q,H)}var X=gY({inputs:{x:I},backend:i,attrs:{shape:S}});_.push(I);for(var Z=0,Y=_;Z<Y.length;Z++){var J=Y[Z];i.disposeIntermediateTensorInfo(J)}return X}var _Y={kernelName:yh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return TY({a:a,b:i,transposeA:u,transposeB:c,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},RY="return abs(x);";var MY={kernelName:ld,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=nZ(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=id().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new BZ(a.shape,RY):new IZ(a.shape,RY),r.runWebGLProgram(t,[a],a.dtype)}},OY=sY({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),FY={kernelName:dd,backendName:"webgl",kernelFunc:OY},PY=sY({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),DY={kernelName:fd,backendName:"webgl",kernelFunc:PY},LY="return a + b;",zY=uY({opSnippet:LY,packedOpSnippet:LY,supportsComplex:!0,cpuKernelImpl:NX}),BY={kernelName:pd,backendName:"webgl",kernelFunc:zY},WY=Qe((function e(t,n){Ye(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),jY=Qe((function e(t,n){Ye(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var VY={kernelName:hd,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return JZ({inputs:{x:a[0]},backend:r});if(a.length>id().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),s=e({inputs:a.slice(i),backend:r});return e({inputs:[o,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return Im(e,t)})),c=a.map((function(e){return e.shape})),l=id().getBool("WEBGL_PACK")?new jY(a[0].shape,c):new WY(a[0].shape,c);return r.runWebGLProgram(l,a,u)}};var UY={kernelName:md,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,c=Fh.parseAxisParam(i,a.shape),l=c,d=sI.getAxesPermutation(l,s),f=a;null!=d&&(f=CY({inputs:{x:a},backend:n,attrs:{perm:d}}),l=sI.getInnerMostAxes(l.length,s)),sI.assertAxesAreInnerMostDims("all",l,s);var p,h=u(sI.computeOutAndReduceShapes(f.shape,l),2),m=h[0],v=h[1],g=gY({inputs:{x:f},backend:n,attrs:{shape:[-1,Fh.sizeFromShape(v)]}}),y=AY(g,g.dtype,"all",n);return p=gY(o?{inputs:{x:y},backend:n,attrs:{shape:sI.expandShapeToKeepDim(m,c)}}:{inputs:{x:y},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),null!=d&&n.disposeIntermediateTensorInfo(f),p}};var HY={kernelName:vd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,c=Fh.parseAxisParam(i,a.shape),l=c,d=sI.getAxesPermutation(l,s),f=a;null!=d&&(f=CY({inputs:{x:a},backend:n,attrs:{perm:d}}),l=sI.getInnerMostAxes(l.length,s)),sI.assertAxesAreInnerMostDims("any",l,s);var p,h=u(sI.computeOutAndReduceShapes(f.shape,l),2),m=h[0],v=h[1],g=gY({inputs:{x:f},backend:n,attrs:{shape:[-1,Fh.sizeFromShape(v)]}}),y=AY(g,g.dtype,"any",n);return p=gY(o?{inputs:{x:y},backend:n,attrs:{shape:sI.expandShapeToKeepDim(m,c)}}:{inputs:{x:y},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),null!=d&&n.disposeIntermediateTensorInfo(f),p}},GY=Qe((function e(t,n,r){Ye(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),qY=Qe((function e(t,n,r,a){Ye(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Fh.assert(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");var s,u,c=this.outputShape,l=c.length,d=VK(l),f=yZ("coords",l);if(1===o){var p=VK(u=l+1);s="\n        ".concat(p," sourceLocR = ").concat(p,"(").concat(f.join(),", 0);\n        ++").concat(f[l-1],";\n        ").concat(p," sourceLocG = ").concat(p,"(").concat(f.join(),", 0);\n        ++").concat(f[l-2],";\n        ").concat(p," sourceLocA = ").concat(p,"(").concat(f.join(),", 0);\n        --").concat(f[l-1],";\n        ").concat(p," sourceLocB = ").concat(p,"(").concat(f.join(),", 0);\n        --").concat(f[l-2],";")}else u=l,s="\n        ".concat(d," sourceLocR = coords;\n        ++").concat(f[l-1],";\n        ").concat(d," sourceLocG = coords;\n        ++").concat(f[l-2],";\n        ").concat(d," sourceLocA = coords;\n        --").concat(f[l-1],";\n        ").concat(d," sourceLocB = coords;\n        --").concat(f[l-2],";");var h=["x","y","z","w","u","v"].slice(0,u),m="."+h[u-1],v=h.map((function(e){return"int "+e})),g=yZ("sourceLocR",u-1).concat("inIdx.r"),y=yZ("sourceLocG",u-1).concat("inIdx.g"),b=yZ("sourceLocB",u-1).concat("inIdx.b"),x=yZ("sourceLocA",u-1).concat("inIdx.a"),A="max"===r?"greaterThan":"lessThan",k=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),w="vec4(\n            getAChannel(".concat(g.join(),"),\n            hasNextCol ? getAChannel(").concat(y.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),S=a?"":"\n      float getBestIndicesAChannel(".concat(v.join(),") {\n        return getChannel(getBestIndicesA(").concat(h.join(),"),\n                                          vec2(").concat(h.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(v.join(),") {\n        return getChannel(getA(").concat(h.join(),"),\n                               vec2(").concat(h.slice(-2).join(),"));\n      }\n      ").concat(S,"\n      void main() {\n        ").concat(d," coords = getOutputCoords();\n        bool hasNextCol = ").concat(f[l-1]," < ").concat(c[l-1]-1,";\n        bool hasNextRow = ").concat(f[l-2]," < ").concat(c[l-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(m,", sourceLocG").concat(m,",\n          sourceLocB").concat(m,", sourceLocA").concat(m,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(w,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(k,"\n          vec4 candidate = ").concat(w,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(A,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function KY(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);var o=sI.computeOptimalWindowSize(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},u=new GY(s,n,null==r),c=[t];null!=r&&c.push(r);var l=e.runWebGLProgram(u,c,"int32");if(1===l.shape[1])return l;var d=KY(e,t,n,l);return e.disposeIntermediateTensorInfo(l),d}function XY(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,i=a[a.length-1],o=sI.computeOptimalWindowSize(i),s=new qY(a,o,n,null==r),u=null==r?[t]:[t,r],c=e.runWebGLProgram(s,u,"int32");if(c.shape.length===t.shape.length){var l=XY(e,t,n,c);return e.disposeIntermediateTensorInfo(c),l}return c}function ZY(e,t,n,r){var a=[n];if(sI.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!id().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=e.texData.get(t.dataId),s=t;null!==o&&o.isPacked&&(s=e.unpackTensor(t),i.push(s));var c=u(sI.computeOutAndReduceShapes(s.shape,a),2),l=c[0],d=c[1],f=Fh.sizeFromShape(d),p=gY({inputs:{x:s},backend:e,attrs:{shape:[-1,f]}});i.push(p);var h=KY(e,p,r);i.push(h);var m=gY({inputs:{x:h},backend:e,attrs:{shape:l}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),m}return XY(e,t,r)}var YY={kernelName:gd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=Fh.parseAxisParam(i,a.shape),s=sI.getAxesPermutation(o,a.shape.length),u=a,c=[];null!=s&&(u=CY({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),o=sI.getInnerMostAxes(o.length,u.shape.length)),sI.assertAxesAreInnerMostDims("argMax",[o[0]],u.shape.length);var l=ZY(n,u,o[0],"max");return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}};var JY={kernelName:yd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=Fh.parseAxisParam(i,a.shape),s=sI.getAxesPermutation(o,a.shape.length),u=a,c=[];null!=s&&(u=CY({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),o=sI.getInnerMostAxes(o.length,u.shape.length)),sI.assertAxesAreInnerMostDims("argMin",[o[0]],u.shape.length);var l=ZY(n,u,o[0],"min");return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}},QY=sY({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),$Y={kernelName:bd,backendName:"webgl",kernelFunc:QY},eJ=sY({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),tJ={kernelName:xd,backendName:"webgl",kernelFunc:eJ},nJ=sY({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),rJ={kernelName:Ad,backendName:"webgl",kernelFunc:nJ},aJ=uY({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),iJ={kernelName:wd,backendName:"webgl",kernelFunc:aJ},oJ=sY({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),sJ={kernelName:kd,backendName:"webgl",kernelFunc:oJ},uJ=Qe((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Ye(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,p=t.padInfo.top,h=t.padInfo.left;this.outputShape=t.outShape;var m="avg"===n,v="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),g="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="0.0";if(m||(y="-1.0 / 1e-20"),r){var b=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(b," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?v:g:"wR * ".concat(f," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var x="max",A="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"avg"===n&&(A="avgValue / count");var k=4*Math.floor(o/4),w=o%4,S="\n      if (".concat(m,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(x,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n      const float initializationValue = ").concat(y,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(y,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(d,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(k,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(S,"\n          }\n\n          int xC = xCCorner + ").concat(k,";\n          if (").concat(1===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(S,"\n          } else if (").concat(2===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(S,"\n          } else if (").concat(3===w,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(S,"\n          }\n        }\n        setOutput(").concat(A,");\n      }\n    ")}})),cJ=Qe((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Ye(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,u=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,d=t.dilationHeight,f=t.dilationWidth,p=t.effectiveFilterDepth,h=t.effectiveFilterHeight,m=t.effectiveFilterWidth,v=t.padInfo.front,g=t.padInfo.top,y=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,x="0.0";if(b||(x="-1.0 / 1e-20"),r){var A=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(v,", ").concat(g,", ").concat(y,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(p,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(h,";\n                wR += ").concat(d,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(m,";\n                  wC += ").concat(f,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(A," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(h," * ").concat(m," +\n                      wR * ").concat(m," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var k="max",w="".concat(n,"(").concat(n,"(").concat(n,"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])");"avg"===n&&(w="avgValue / count");var S=4*Math.floor(o/4),I=o%4,E="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(k,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(v,", ").concat(g,", ").concat(y,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(p,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(d,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(S,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(f,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(f,", ch)\n              );\n\n              ").concat(E,"\n            }\n\n            int xC = xCCorner + ").concat(S,";\n            if (").concat(1===I,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(2===I,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(3===I,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                initializationValue\n              );\n\n              ").concat(E,"\n            }\n          }\n          setOutput(").concat(w,");\n        }\n      }\n    ")}}));var lJ={kernelName:Sd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;mK(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Fh.assert(sI.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=sI.computePool2DInfo(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&Fh.arraysEqual(c.inShape,c.outShape))return JZ({inputs:{x:a},backend:n});var l=new uJ(c,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}};var dJ={kernelName:Ed,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat,l=sI.computePool3DInfo(a.shape,i,o,[1,1,1],s,u,c),d=new cJ(l,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}},fJ=Qe((function e(t){Ye(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=u-1-t.padInfo.top,d=c-1-t.padInfo.left,f=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(d,");\n      const float avgMultiplier = float(").concat(f,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),pJ=Qe((function e(t){Ye(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterDepth,f=t.effectiveFilterHeight,p=t.effectiveFilterWidth,h=d-1-t.padInfo.front,m=f-1-t.padInfo.top,v=p-1-t.padInfo.left,g=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(h,", ").concat(m,", ").concat(v,");\n      const float avgMultiplier = float(").concat(g,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var hJ={kernelName:Cd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=sI.computePool3DInfo(i.shape,o,s,[1,1,1],u,c),d=new pJ(l);return n.runWebGLProgram(d,[a],i.dtype)}};var mJ={kernelName:Id,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;mK([a,i],"avgPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=sI.computePool2DInfo(o.shape,s,u,1,c),d=new fJ(l);return n.runWebGLProgram(d,[a],o.dtype)}};var vJ={kernelName:Nd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return TY({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},gJ=Qe((function e(t,n,r,a,i,o){Ye(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],sI.assertAndGetBroadcastShape(t,n),sI.assertAndGetBroadcastShape(t,r);var s="0.0";null!=a&&(sI.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=i&&(sI.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),yJ=Qe((function e(t,n,r,a,i,o){Ye(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],sI.assertAndGetBroadcastShape(t,n),sI.assertAndGetBroadcastShape(t,r);var s="vec4(0.0)";null!=a&&(sI.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=i&&(sI.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),bJ={kernelName:xf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,s=t.offset,u=t.scale;Fh.assert(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Fh.assert(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Fh.assert(null==u||i.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c=r.varianceEpsilon;null==c&&(c=.001);var l=[a,i,o],d=null;null!=s&&(d=s.shape,l.push(s));var f=null;null!=u&&(f=u.shape,l.push(u));var p=id().getBool("WEBGL_PACK_NORMALIZATION")?new yJ(a.shape,i.shape,o.shape,d,f,c):new gJ(a.shape,i.shape,o.shape,d,f,c);return n.runWebGLProgram(p,l,l[0].dtype)}},xJ=Qe((function e(t){Ye(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=VK(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return AJ.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),i=t.map((function(e,t){return"sourceLoc.".concat(AJ[t]," = start[").concat(t,"] + coords.").concat(AJ[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),AJ=["x","y","z","w","u","v"];var kJ=Qe((function e(t){Ye(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=VK(this.rank),r=yZ("coords",this.rank),a=yZ("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function wJ(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size,s=u(Oy.parseSliceParams(a,i,o),2),c=s[0],l=s[1];if(Oy.assertParamsValid(a,c,l),0===Fh.sizeFromShape(l))return n.makeTensorInfo(l,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var d=n.texData.get(a.dataId),f=rZ(d.values,c,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,f)}var p=n.texData.get(a.dataId).isPacked,h=Oy.isSliceContinous(a.shape,c,l);if(p||!h){d=id().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new kJ(l):new xJ(l),f=[c];return n.runWebGLProgram(d,[a],a.dtype,f)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;var s=Oy.computeFlatOffset(t,Fh.computeStrides(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),i}(a,c,l,n)}var SJ={kernelName:Pp,backendName:"webgl",kernelFunc:wJ},IJ={kernelName:Td,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;Fh.assert(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=sI.getReshaped(a.shape,i,s),c=sI.getPermuted(u.length,i.length),l=sI.getReshapedPermuted(a.shape,i,s),d=sI.getSliceBeginCoords(o,i.length),f=sI.getSliceSize(l,o,i.length),p=[],h=gY({inputs:{x:a},backend:n,attrs:{shape:u}}),m=CY({inputs:{x:h},backend:n,attrs:{perm:c}}),v=gY({inputs:{x:m},backend:n,attrs:{shape:l}}),g=wJ({inputs:{x:v},backend:n,attrs:{begin:d,size:f}});return p.push(h),p.push(m),p.push(v),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var EJ={kernelName:_d,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=TX(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}};var CJ={kernelName:Md,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=sI.assertAndGetBroadcastShape(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},NJ=uY({opSnippet:"return float(a != b);",cpuKernelImpl:YX,dtype:"bool"}),TJ={kernelName:op,backendName:"webgl",kernelFunc:NJ};function _J(e){var t=e.inputs,n=e.backend,r=t.input;return JZ({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var RJ={kernelName:bp,backendName:"webgl",kernelFunc:_J};var MJ={kernelName:Od,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return JZ({inputs:{x:i},backend:r});var s=XA(i.shape),u=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),c=$Z({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),c}if("complex64"===i.dtype){var l=_J({inputs:{input:i},backend:r}),d=e({inputs:{x:l},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(l),d}if(!Fh.hasEncodingLoss(i.dtype,o)){var f=JZ({inputs:{x:i},backend:r});return{dataId:f.dataId,shape:f.shape,dtype:o}}if("int32"===o)return function(e,t){var n=new IZ(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var p=r.makeTensorInfo([],"bool",Fh.getTypedArrayFromDType("bool",1)),h=NJ({inputs:{a:i,b:p},backend:r});return r.disposeIntermediateTensorInfo(p),h}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},OJ="return ceil(x);",FJ=sY({opSnippet:OJ,packedOpSnippet:OJ,cpuKernelImpl:RX}),PJ={kernelName:Fd,backendName:"webgl",kernelFunc:FJ},DJ=Qe((function e(t){Ye(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),LJ=Qe((function e(t){Ye(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var zJ={kernelName:Pd,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,s=a.clipValueMax;t=id().getBool("WEBGL_PACK_CLIP")?new LJ(i.shape):new DJ(i.shape);var u=[[o],[s]];return r.runWebGLProgram(t,[i],i.dtype,u)}},BJ=Qe((function e(t){Ye(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function WJ(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var jJ={kernelName:Ld,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new BJ(r.shape),o=[WJ(r,a.complexTensorInfos.real),WJ(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},VJ=Qe((function e(t){Ye(this,e),this.outputShape=[],this.outputShape=sI.computeOutShape(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var o=n[i-1];a.push("else if (yC < ".concat(n[i],") setOutput(getT").concat(i,"(yR, yC-").concat(o,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),UJ=Qe((function e(t,n){Ye(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=sI.computeOutShape(t,n);var r=this.outputShape,a=r.length,i=VK(a),o=yZ("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var c=1;c<u.length;c++)u[c]=u[c-1]+t[c][n];for(var l=s[n],d=s.slice(-2),f=s.join(),p="if (".concat(l," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(f,"), vec2(").concat(d.join(),"));\n        }"),h=1;h<u.length;h++){var m=u[h-1];p+="\n        if (".concat(l," < ").concat(u[h],"  && ").concat(l," >= ").concat(u[h-1],") {\n          return getChannel(\n            getT").concat(h,"(").concat(HJ(s,l,m),"),\n            vec2(").concat(HJ(d,l,m),"));\n        }")}var v=u.length,g=u[u.length-1];p+="\n        return getChannel(\n          getT".concat(v,"(").concat(HJ(s,l,g),"),\n          vec2(").concat(HJ(d,l,g),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(p,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}));function HJ(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e})).join()}function GJ(e){var t=e.inputs,n=e.backend,r=t.input;return JZ({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var qJ={kernelName:Cf,backendName:"webgl",kernelFunc:GJ};function KJ(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return _J({inputs:{input:e},backend:n})})),i=e.map((function(e){return GJ({inputs:{input:e},backend:n})})),o=KJ(a,t,n),s=KJ(i,t,n),u=$Z({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}var c=n.shouldExecuteOnCPU(e);if("string"===r&&(c=!0),c){var l=e.map((function(e){var r=Fh.sizeFromShape(e.shape.slice(t));return gY({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),d=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),f=sI.computeOutShape(l.map((function(e){return e.shape})),1),p=1===l[0].shape[0],h=MX(d,f,r,p),m=sI.computeOutShape(e.map((function(e){return e.shape})),t),v=n.makeTensorInfo(m,r,h);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}if(e.length>id().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var g=Math.floor(e.length/2),y=KJ(e.slice(0,g),t,n),b=KJ(e.slice(g),t,n),x=KJ([y,b],t,n);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),x}if(id().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var A=new UJ(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(A,e,r)}var k=function(e,t,n){var r=sI.computeOutShape(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return gY({inputs:{x:e},attrs:{shape:[-1,Fh.sizeFromShape(e.shape.slice(t))]},backend:n})})),outShape:r}}(e,t,n),w=k.tensors2D,S=k.outShape,I=new VJ(w.map((function(e){return e.shape}))),E=n.runWebGLProgram(I,w,r);w.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var C=gY({inputs:{x:E},attrs:{shape:S},backend:n});return n.disposeIntermediateTensorInfo(E),C}function XJ(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,a=Fh.parseAxisParam(r,t[0].shape)[0],i=sI.computeOutShape(t.map((function(e){return e.shape})),a);if(0===Fh.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);var o=t.filter((function(e){return Fh.sizeFromShape(e.shape)>0}));if(1===o.length)return JZ({inputs:{x:o[0]},backend:n});var s=o.map((function(e){return e.shape}));return sI.assertParamsConsistent(s,a),KJ(o,a,n)}var ZJ={kernelName:zd,backendName:"webgl",kernelFunc:XJ},YJ=Qe((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Ye(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,d=t.dilationWidth,f=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),m=t.inChannels%4,v="channelsLast"===t.dataFormat,g=v?1:2,y=v?2:3,b=v?3:1,x="",A="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),A="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(g,"], coords[").concat(y,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(f,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(p,"; wC++) {\n            int xC = xCCorner + wC * ").concat(d,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(v,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===m,") {\n\n              if (").concat(v,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(h,") *\n                    getW(wR, wC, ").concat(h,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(h,", xR, xC) *\n                    getW(wR, wC, ").concat(h,", d2);\n              }\n\n            } else if (").concat(2===m,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2)\n              );\n\n              if (").concat(v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===m,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2),\n                getW(wR, wC, ").concat(h," + 2, d2)\n              );\n\n              if (").concat(v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1),\n                  getX(batch, xR, xC, ").concat(h," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC),\n                  getX(batch, ").concat(h," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(k,"\n        ").concat(A,"\n        setOutput(result);\n      }\n    ")})),JJ=Qe((function e(t){Ye(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.filterDepth,f=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),m=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(d,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(f,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===m,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(h,") *\n                  getW(wF, wR, wC, ").concat(h,", d2);\n              } else if (").concat(2===m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1),\n                  getX(batch, xF, xR, xC, ").concat(h," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2),\n                  getW(wF, wR, wC, ").concat(h," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),QJ=Qe((function e(t,n){Ye(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=JK(this.outputShape.length);for(var r=n.dataFormat,a=gK(),i="channelsLast"===r,o=i?1:2,s=i?2:3,u=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":"if(blockIndex < ".concat(t[2]," && pos < ").concat(t[1],") {"),c="",l=0;l<=1;l++)for(var d=0;d<=1;d++)c+="\n          blockIndex = rc.z + ".concat(d,";\n          pos = rc.y + ").concat(l,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+d,"] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+d,"] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function $J(e,t){var n=e.length;return n>=3?[].concat(Tn(e.slice(0,-3)),t?[e[n-3]*e[n-2],e[n-1]]:[e[n-3],e[n-2]*e[n-1]]):!t&&1===n&&e[0]>1?[e[0],1]:null}function eQ(e){var t,n=e.x,r=e.filter,a=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,f=e.activation,p=void 0===f?null:f,h=n.shape,m=i.texData.get(n.dataId),v=a.inChannels,g=h[0]*h[1]*h[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[];if(null!=c){var A=$J(c.shape,b);null!=A&&(c=gY({inputs:{x:c},backend:i,attrs:{shape:A}}),x.push(c))}if(null!=s){var k=$J(s.shape,b);null!=k&&(s=gY({inputs:{x:s},backend:i,attrs:{shape:k}}),x.push(s))}if((1!==g&&1!==y||!(v>1e3))&&m.isPacked&&b&&null!=m.texture&&h[2]%2!==0&&Fh.arraysEqual(m.shape.slice(-3),h.slice(-3))){var w=h[0]*h[1]*(h[2]+1),S={dataId:n.dataId,shape:[1,w,a.inChannels],dtype:n.dtype},I=m.shape;m.shape=m.shape.slice(),m.shape[m.shape.length-2]++,Fh.assert(rK(m.shape,S.shape),(function(){return"packed reshape ".concat(m.shape," to ").concat(S.shape," isn't free")}));var E=gY({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(E);var C=TY({a:S,b:E,backend:i,transposeA:!1,transposeB:false,bias:s,activation:p,preluActivationWeights:c,leakyreluAlpha:d}),N=i.texData.get(C.dataId);Fh.assert(N.isPacked,(function(){return"batchMatMul result is expected to be packed"})),m.shape=I,N.shape=a.outShape,(t=JZ({inputs:{x:C},backend:i})).shape=a.outShape,x.push(C)}else{var T=a.outHeight*a.outWidth,_=gY({inputs:{x:n},backend:i,attrs:{shape:b?[a.batchSize,T,a.inChannels]:[a.batchSize,a.inChannels,T]}}),R=gY({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),M=TY({a:b?_:R,b:b?R:_,transposeA:!b,transposeB:false,backend:i,bias:s,activation:p,preluActivationWeights:c,leakyreluAlpha:d});t=gY({inputs:{x:M},backend:i,attrs:{shape:a.outShape}}),x.push(_),x.push(R),x.push(M)}for(var O=0,F=x;O<F.length;O++){var P=F[O];i.disposeIntermediateTensorInfo(P)}return t}function tQ(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,u=void 0===s?null:s,c=e.leakyreluAlpha,l=void 0===c?0:c,d=e.activation,f=void 0===d?null:d,p=r.filterWidth,h=r.filterHeight,m=r.inChannels,v=r.outWidth,g=r.outHeight,y="channelsLast"===r.dataFormat,b=p*h*m,x=g*v,A=[r.batchSize,b,x],k=[];if(null!=u){var w=$J(u.shape,y);null!=w&&(u=gY({inputs:{x:u},backend:a,attrs:{shape:w}}),k.push(u))}if(null!=o){var S=$J(o.shape,y);null!=S&&(o=gY({inputs:{x:o},backend:a,attrs:{shape:S}}),k.push(o))}var I=gY({inputs:{x:n},backend:a,attrs:{shape:[1,b,Fh.sizeFromShape(n.shape)/b]}});k.push(I);var E=new QJ(A,r),C=[t.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],N=a.runWebGLProgram(E,[t],"float32",C),T=gY({inputs:{x:N},backend:a,attrs:{shape:A}});k.push(N),k.push(T);var _=null!=o,R=null!=u,M="leakyrelu"===f,O=f?cY(f,!0):null,F=new lY(y?T.shape:I.shape,y?I.shape:T.shape,y?[r.batchSize,x,r.outChannels]:[r.batchSize,r.outChannels,x],!0,!1,_,O,R,M),P=y?[T,I]:[I,T];if(o&&P.push(o),R&&P.push(u),M){var D=a.makeTensorInfo([],"float32",Fh.createScalarValue(l,"float32"));P.push(D),k.push(D)}var L=a.runWebGLProgram(F,P,"float32"),z=gY({inputs:{x:L},backend:a,attrs:{shape:r.outShape}});k.push(L);for(var B=0,W=k;B<W.length;B++){var j=W[B];a.disposeIntermediateTensorInfo(j)}return z}var nQ={kernelName:Bd,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dataFormat,l=a.dilations,d=a.dimRoundingMode,f=sI.convertConv2DDataFormat(c),p=sI.computeConv2DInfo(i.shape,o.shape,s,l,u,d,!1,f);if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(id().getBool("WEBGL_CONV_IM2COL"))t=tQ({x:i,filter:o,convInfo:p,backend:r});else{var h=new YJ(p);t=r.runWebGLProgram(h,[i,o],"float32")}else t=eQ({x:i,filter:o,convInfo:p,backend:r});var m=gY({inputs:{x:t},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(t),m}},rQ=Qe((function e(t){Ye(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(o,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),aQ=Qe((function e(t){Ye(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=o?1:2,l=o?2:3,d=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(d,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),iQ=Qe((function e(t){Ye(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),oQ=Qe((function e(t){Ye(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var sQ={kernelName:Wd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape,d=sI.convertConv2DDataFormat(u),f=sI.computeConv2DInfo(a.shape,l,o,1,s,c,!1,d),p=new rQ(f);return n.runWebGLProgram(p,[a,i],"float32")}};var uQ={kernelName:jd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode,d=sI.convertConv2DDataFormat(c),f=sI.computeConv2DInfo(o,i.shape,s,1,u,l,!1,d),p=new aQ(f);return n.runWebGLProgram(p,[a,i],"float32")}};var cQ={kernelName:Vd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=sI.computeConv3DInfo(a.shape,i.shape,o,u,s),l=new JJ(c);return n.runWebGLProgram(l,[a,i],"float32")}};var lQ={kernelName:Ud,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape,c=sI.computeConv3DInfo(a.shape,u,o,1,s),l=new iQ(c);return n.runWebGLProgram(l,[a,i],"float32")}};var dQ={kernelName:Hd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=r.inputShape,c=sI.computeConv3DInfo(u,i.shape,s,1,o),l=new oQ(c);return n.runWebGLProgram(l,[a,i],"float32")}},fQ=sY({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),pQ={kernelName:Gd,backendName:"webgl",kernelFunc:fQ},hQ=sY({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),mQ={kernelName:qd,backendName:"webgl",kernelFunc:hQ},vQ=Qe((function e(t,n,r,a,i){Ye(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=u(t,4),s=o[0],c=o[1],l=o[2],d=o[3],f=u(n,1)[0],p=u(r,2),h=p[0],m=p[1];this.outputShape=[f,h,m,d];var v="bilinear"===a?1:0,g="".concat(c-1,".0"),y="".concat(l-1,".0"),b=u(h>1?["".concat((c-1)/(h-1)),"(y2-y1) * height_ratio","y1*".concat(g," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(g)],3),x=b[0],A=b[1],k=b[2],w=u(m>1?["".concat((l-1)/(m-1)),"(x2-x1) * width_ratio","x1*".concat(y," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(y)],3),S=w[0],I=w[1],E=w[2];this.userCode="\n      const float height_ratio = float(".concat(x,");\n      const float width_ratio = float(").concat(S,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(A,";\n        float width_scale = ").concat(I,";\n\n        float in_y = ").concat(k,";\n        if( in_y < 0.0 || in_y > ").concat(g," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(E,";\n        if( in_x < 0.0 || in_x > ").concat(y," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(v," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),gQ={kernelName:Zd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new vQ(a.shape,i.shape,s,u,c);return n.runWebGLProgram(l,[a,i,o],"float32")}},yQ=Qe((function e(t,n,r,a){Ye(this,e),this.op=t,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];var i=this.outputShape.length,o="*"===this.op?"1.0":"0.0",s=r?o:"getX(".concat(bQ(i,"coords",this.op),")"),u=this.outputShape[this.outputShape.length-1],c="",l="";r?(c=a?"end != ".concat(u-1):"end != 0",l=a?"end + 1":"end - 1"):(c=a?"end + pow2 < ".concat(u):"end >= pow2",l=a?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(VK(i)," coords = getOutputCoords();\n        int end = ").concat(xQ(i,"coords",this.op),";\n        float val = ").concat(s,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(c,") {\n          int idx = ").concat(l,";\n          ").concat(xQ(i,"coords",this.op)," = idx;\n          val ").concat(this.op,"= getX(").concat(bQ(i,"coords",this.op),");\n        }\n        setOutput(val);\n      }\n    ")}));function bQ(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function xQ(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw new Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function AQ(e,t,n,r,a,i){var o=t.shape.length,s=sI.getAxesPermutation([r],o),u=t;null!=s&&(u=CY({inputs:{x:t},backend:n,attrs:{perm:s}}));var c=sI.getInnerMostAxes(1,o)[0];if(c!==o-1)throw new Error("WebGL cumprod shader expects an inner-most axis=".concat(t.shape.length-1," but got axis=").concat(r));for(var l=u.shape[c],d=JZ({inputs:{x:u},backend:n}),f=0;f<=Math.ceil(Math.log2(l))-1;f++){var p=new yQ(e,u.shape,!1,i),h=[[f]],m=d;d=n.runWebGLProgram(p,[d],d.dtype,h),n.disposeIntermediateTensorInfo(m)}if(a){var v=new yQ(e,u.shape,a,i),g=d;d=n.runWebGLProgram(v,[d],d.dtype),n.disposeIntermediateTensorInfo(g)}if(null!=s){var y=CY({inputs:{x:d},backend:n,attrs:{perm:sI.getUndoAxesPermutation(s)}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(u),y}return d}var kQ={kernelName:Kd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return AQ("*",t.x,n,r.axis,r.exclusive,r.reverse)}};var wQ={kernelName:Xd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return AQ("+",t.x,n,r.axis,r.exclusive,r.reverse)}};var SQ={kernelName:Yd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=TX(u,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}if(2===a.shape.length){var d=n.bufferSync(a),f=n.bufferSync(i),p=_X(d,f,o,s);return n.makeTensorInfo(p.shape,i.dtype,p.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank".concat(a.shape.length,"."))}},IQ=function(){function e(t,n,r){Ye(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return Qe(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var EQ={kernelName:Jd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,c=("NHWC"===o?a.shape[2]:a.shape[3])*i,l=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),d=new IQ("NHWC"===o?[s,u,c,l]:[s,l,u,c],i,o);return n.runWebGLProgram(d,[a],a.dtype)}},CQ=Qe((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Ye(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=JK(this.outputShape.length);var o=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,c="",l="";r&&(c=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),l="result = activation(result);");var d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(d,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")})),NQ=Qe((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Ye(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=JK(this.outputShape.length);for(var o=t.outChannels/t.inChannels,s=t.padInfo.left,u=t.strideWidth,c=t.dilationWidth,l=t.filterHeight,d=t.filterWidth,f=d,p="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",h=0;h<d;h++)p+="\n          vec4 xTexelC".concat(2*h,";\n          int xTexelC").concat(2*h,"Ready;\n          vec4 xTexelC").concat(2*h+1,";\n          int xTexelC").concat(2*h+1,"Ready;\n          vec4 xC").concat(h,";");p+="\n    for (int r = 0; r < ".concat(l,"; r++) {\n      ");for(var m=0;m<d;m++)p+="\n          xTexelC".concat(2*m," = vec4(0.0);\n          xTexelC").concat(2*m,"Ready = 0;\n          xTexelC").concat(2*m+1," = vec4(0.0);\n          xTexelC").concat(2*m+1,"Ready = 0;\n          xC").concat(m," = vec4(0.0);");p+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var v=0;v<(f+1)/2;v++){var g=2*v;if(p+="\n          xC = xCCorner + ".concat(g*c,";\n          "),1===u){if(g<d&&(s%2===1?(p+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n              "),p+=1===c&&g>0?"\n                xC".concat(g," = vec4(xTexelC").concat(g-2,".zw, xTexelC").concat(g,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(g," = vec4(previous.zw, xTexelC").concat(g,".xy);\n                  } else {\n                    xC").concat(g," = vec4(0.0, 0.0, xTexelC").concat(g,".xy);\n                  }\n                  ")):p+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                xC").concat(g," = xTexelC").concat(g,";\n                "),g+1<d)){var y=s%2===0?Fh.nearestLargerEven(c):c;c%2===0&&s%2===1||c%2!==0&&s%2!==1?(p+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(y,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                    xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(g+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(g+1,"Ready = 1;\n                  }\n                  "),c>1&&(p+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                      xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                      xTexelC").concat(g,"Ready = 1;\n                    }\n                    ")),p+="\n                  xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".xy);\n                  ")):p+=1===y?"\n                    xC".concat(g+1," = xTexelC").concat(g,";\n                    "):"\n                    xCOffset = xC + ".concat(y,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                      xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(g+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(g+1,"Ready = 1;\n                    }\n\n                    xC").concat(g+1," = xTexelC").concat(g+1,";\n                    ")}}else g<d&&(s%2===1?(p+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                  xTexelC").concat(g+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(g+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g+1,"Ready = 1;\n                }\n\n                xC").concat(g," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n              "),g+1<d&&(p+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(g+1," = vec4(xTexelC").concat(g+1,".xy, final.xy);\n                "))):(p+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(g,"Ready == 0) {\n                  xTexelC").concat(g," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(g,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(g,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(g+1,"Ready == 0) {\n                  xTexelC").concat(g+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(g+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(g+1,"Ready = 1;\n                }\n\n                xC").concat(g," = vec4(\n                  xTexelC").concat(g,".xy, xTexelC").concat(g+1,".xy);\n              "),g+1<d&&(p+="\n                  xC".concat(g+1," = vec4(xTexelC").concat(g,".zw, xTexelC").concat(g+1,".zw);\n                "))));g<d&&(p+="\n            wTexel = getW(r, ".concat(g,", d1, q);\n            dotProd += xC").concat(g," * vec4(wTexel.xz, wTexel.xz);\n          "),g+1<d&&(p+="\n              wTexel = getW(r, ".concat(g+1,", d1, q);\n              dotProd += xC").concat(g+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}p+="\n    }\n  ",p+="\n      }\n    ";var b="",x="";r&&(b=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),x="result = activation(result);");var A=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(p,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(A,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}));var TQ={kernelName:Qd,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode,l=u;null==l&&(l=[1,1]),Fh.assert(sI.eitherStridesOrDilationsAreOne(o,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(l,"'")}));var d,f=sI.computeConv2DInfo(a.shape,i.shape,o,l,s,c,!0);d=id().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?new NQ(f):new CQ(f);var p=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(d,[a,i],"float32",p)}},_Q=Qe((function e(t){Ye(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),RQ=Qe((function e(t){Ye(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var MQ={kernelName:$d,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape,d=sI.computeConv2DInfo(a.shape,l,o,s,u,c,!0),f=new _Q(d);return n.runWebGLProgram(f,[a,i],"float32")}};var OQ={kernelName:ef,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.inputShape,d=sI.computeConv2DInfo(l,i.shape,o,s,u,c,!0),f=new RQ(d);return n.runWebGLProgram(f,[a,i],"float32")}},FQ=Qe((function e(t){Ye(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var PQ={kernelName:tf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat(Tn(r.shape),Tn(r.shape)),i=Fh.sizeFromShape(r.shape),o=gY({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new FQ(i),u=n.runWebGLProgram(s,[o],o.dtype),c=gY({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),c}},DQ=Qe((function e(t){Ye(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,d=a.top,f=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(f,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var LQ={kernelName:nf,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dilations,l=sI.computeDilation2DInfo(i.shape,o.shape,s,u,"NHWC",c),d=new DQ(l),f=gY({inputs:{x:t=r.runWebGLProgram(d,[i,o],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),f}};var zQ={kernelName:sf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,a=t,i=sI.decodeEinsumEquation(r,a.length),o=i.allDims,s=i.summedDims,u=i.idDims;sI.checkEinsumDimSizes(o.length,u,a);for(var c=sI.getEinsumComputePath(s,u),l=c.path,d=c.steps,f=d.length,p=null,h=o.length,m=[],v=0;v<f;++v){var g,y=lc(d[v]);try{for(y.s();!(g=y.n()).done;){var b=g.value,x=sI.getEinsumPermutation(h,u[b]),A=x.permutationIndices,k=x.expandDims,w=void 0;sI.isIdentityPermutation(A)?w=a[b]:(w=CY({inputs:{x:a[b]},backend:n,attrs:{perm:A}}),m.push(w));for(var S=w.shape.slice(),I=0;I<k.length;++I)S.splice(k[I],0,1);Fh.arraysEqual(w.shape,S)||(w=gY({inputs:{x:w},backend:n,attrs:{shape:S}}),m.push(w)),null===p?p=w:(p=mY({inputs:{a:w,b:p},backend:n}),m.push(p))}}catch(T){y.e(T)}finally{y.f()}v<f-1&&(l[v]>=0&&(p=IY({inputs:{x:p},backend:n,attrs:{axis:l[v]-(o.length-h),keepDims:!1}}),m.push(p)),h--)}for(var E=0,C=m;E<C.length;E++){var N=C[E];N!==p&&n.disposeIntermediateTensorInfo(N)}return p}},BQ=sY({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),WQ={kernelName:uf,backendName:"webgl",kernelFunc:BQ},jQ={kernelName:cf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=id().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new YZ("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new ZZ("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},VQ=uY({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:OX}),UQ={kernelName:df,backendName:"webgl",kernelFunc:VQ},HQ=sY({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(sI.ERF_P,";\n  float a1 = ").concat(sI.ERF_A1,";\n  float a2 = ").concat(sI.ERF_A2,";\n  float a3 = ").concat(sI.ERF_A3,";\n  float a4 = ").concat(sI.ERF_A4,";\n  float a5 = ").concat(sI.ERF_A5,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")}),GQ={kernelName:lf,backendName:"webgl",kernelFunc:HQ},qQ=sY({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:FX,dtype:"float32"}),KQ={kernelName:ff,backendName:"webgl",kernelFunc:qQ};function XQ(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),u=a;return a<0&&(Fh.assert(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+a+1),s.splice(u,0,1),gY({inputs:{x:i},backend:r,attrs:{shape:s}})}var ZQ={kernelName:pf,backendName:"webgl",kernelFunc:XQ},YQ="return exp(x) - 1.0;",JQ=sY({opSnippet:YQ,packedOpSnippet:YQ,cpuKernelImpl:PX}),QQ={kernelName:hf,backendName:"webgl",kernelFunc:JQ},$Q=Qe((function e(t,n,r){Ye(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function e$(e,t,n){var r=n.texData.get(e.dataId),a=Fh.sizeFromShape(e.shape),i=e.shape[e.shape.length-1],o=gY({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),s=o.shape,u=new $Q("real",s,t),c=new $Q("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(u,l,"float32"),f=n.runWebGLProgram(c,l,"float32"),p=$Z({inputs:{real:d,imag:f},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f);var h=gY({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(p),h}var t$={kernelName:mf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return e$(t.input,!1,n)}},n$=Qe((function e(t,n){Ye(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function r$(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||Fh.inferDtype(a))){var o=Fh.getArrayFromDType(i,Fh.sizeFromShape(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new n$(r,a),u=[[a]];return t.runWebGLProgram(s,[],i,u)}var a$,i$={kernelName:vf,backendName:"webgl",kernelFunc:r$},o$=Qe((function e(t){Ye(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),s$={kernelName:gf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new o$(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},u$="return floor(x);",c$=sY({opSnippet:u$,packedOpSnippet:u$,cpuKernelImpl:DX}),l$={kernelName:yf,backendName:"webgl",kernelFunc:c$},d$=uY({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),f$={kernelName:bf,backendName:"webgl",kernelFunc:d$},p$=Qe((function e(t){Ye(this,e),this.variableNames=["A"];var n=gK(),r=u(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),h$=Qe((function e(t){Ye(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=gK(),r=u(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),m$={kernelName:vh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,c=u(o?[a.videoWidth,a.videoHeight]:[a.width,a.height],2),l=c[0],d=c[1],f=[d,l],p=[d,l,i];(s||o)&&(null==a$&&(a$=document.createElement("canvas").getContext("2d")),a$.canvas.width=l,a$.canvas.height=d,a$.drawImage(a,0,0,l,d),a=a$.canvas);var h=n.makeTensorInfo(f,"int32");n.texData.get(h.dataId).usage=2,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),a);var m=id().getBool("WEBGL_PACK")?new h$(p):new p$(p),v=n.runWebGLProgram(m,[h],"int32");return n.disposeData(h.dataId),v}};var v$={kernelName:bh,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=n.bias,u=n.preluActivationWeights,c=a.strides,l=a.pad,d=a.dataFormat,f=a.dilations,p=a.dimRoundingMode,h=a.activation,m=a.leakyreluAlpha,v=sI.convertConv2DDataFormat(d),g=sI.computeConv2DInfo(i.shape,o.shape,c,f,l,p,!1,v),y=[];if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(id().getBool("WEBGL_CONV_IM2COL"))t=tQ({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:h,preluActivationWeights:u,leakyreluAlpha:m});else{var b=null!=s,x=null!=u,A="leakyrelu"===h,k=h?cY(h,!1):null,w=new YJ(g,b,k,x,A),S=[i,o],I=function(e,t){if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){var n=gY({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return y.push(n),n}return e};if(b&&S.push(I(s,d)),x&&S.push(I(u,d)),A){var E=r.makeTensorInfo([],"float32",Fh.createScalarValue(m,"float32"));S.push(E),y.push(E)}t=r.runWebGLProgram(w,S,"float32")}else t=eQ({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:h,preluActivationWeights:u,leakyreluAlpha:m});var C=gY({inputs:{x:t},backend:r,attrs:{shape:g.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),C}};var g$={kernelName:xh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dilations,d=r.dimRoundingMode,f=r.activation,p=r.leakyreluAlpha,h=[],m=l;null==m&&(m=[1,1]),Fh.assert(sI.eitherStridesOrDilationsAreOne(u,m),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(u," and dilations '").concat(m,"'")}));var v,g=sI.computeConv2DInfo(a.shape,i.shape,u,m,c,d,!0),y=id().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=f?cY(f,y):null,x=[a,i],A=null!=o,k=null!=s,w="leakyrelu"===f;if(A&&x.push(o),k&&x.push(s),w){var S=n.makeTensorInfo([],"float32",Fh.createScalarValue(p,"float32"));x.push(S),h.push(S)}v=y?new NQ(g,A,b,k,w):new CQ(g,A,b,k,w);var I=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],E=n.runWebGLProgram(v,x,"float32",I);return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),E}},y$=Qe((function e(t,n,r,a){Ye(this,e),this.sliceDim=t,this.strides=n,this.paramsShape=a,this.variableNames=["x","indices"],this.outputShape=r;var i=VK(n.length),o=VK(r.length),s=this.sliceDim>1?"strides[j]":"strides",u=VK(a.length),c=a.length>1?"paramsShape[j]":"paramsShape";this.userCode="\n        ".concat(i," strides = ").concat(i,"(").concat(this.strides,");\n        ").concat(u," paramsShape = ").concat(u,"(").concat(this.paramsShape,");\n         void main() {\n          ").concat(o," coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            out_of_bounds = out_of_bounds || index < 0;\n            out_of_bounds = out_of_bounds || index >= ").concat(c,";\n            flattenIndex += index * ").concat(s,";\n          }\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      ")}));var b$={kernelName:kf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=Fh.sizeFromShape(r.shape),c=u(sI.prepareAndValidate(r,a),4),l=c[0],d=c[1],f=c[2],p=c[3],h=gY({inputs:{x:a},backend:n,attrs:{shape:[d,o]}}),m=gY({inputs:{x:r},backend:n,attrs:{shape:[Fh.sizeFromShape(r.shape)/f,f]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var v=n.readSync(a.dataId),g=n.bufferSync(r),y=LX(v,g,r.dtype,d,o,f,p,r.shape,s);return n.makeTensorInfo(l,r.dtype,y.values)}var b=new y$(o,p,[d,f],r.shape),x=n.runWebGLProgram(b,[m,h],m.dtype),A=gY({inputs:{x:x},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(x),A}},x$=Qe((function e(t,n){Ye(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=VK(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function A$(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,u=Fh.parseAxisParam(o,a.shape)[0];id().get("DEBUG")&&function(){for(var e=n.readSync(i.dataId),t=a.shape[u],r=function(n){var r=e[n];Fh.assert(r<=t-1&&r>=0,(function(){return"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")}))},o=0;o<e.length;++o)r(o)}();var c=sI.segment_util.collectGatherOpShapeInfo(a,i,u,s),l=Fh.sizeFromShape(i.shape),d=[],f=gY({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=gY({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,l/c.batchSize]}});d.push(f),d.push(p);var h=[c.batchSize,c.outerSize,l/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var m=n.bufferSync(p),v=n.bufferSync(f),g=zX(v,m,h);return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(c.outputShape,g.dtype,g.values)}var y=new x$(f.shape,h),b=n.runWebGLProgram(y,[f,p],f.dtype);d.push(b);var x=gY({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}var k$={kernelName:Af,backendName:"webgl",kernelFunc:A$},w$=uY({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:BX,dtype:"bool"}),S$={kernelName:wf,backendName:"webgl",kernelFunc:w$},I$=uY({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:WX}),E$={kernelName:Sf,backendName:"webgl",kernelFunc:I$};var C$={kernelName:Ef,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return e$(t.input,!0,n)}},N$=sY({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),T$={kernelName:Nf,backendName:"webgl",kernelFunc:N$},_$=sY({opSnippet:"return float(isinf(x));",dtype:"bool"}),R$={kernelName:Tf,backendName:"webgl",kernelFunc:_$},M$=sY({opSnippet:"return float(isnan(x));",dtype:"bool"}),O$={kernelName:_f,backendName:"webgl",kernelFunc:M$},F$=uY({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:jX,dtype:"bool"}),P$={kernelName:Mf,backendName:"webgl",kernelFunc:F$},D$=uY({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:VX,dtype:"bool"}),L$={kernelName:Of,backendName:"webgl",kernelFunc:D$};var z$={kernelName:Ff,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=UX(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},B$=sY({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:HX}),W$={kernelName:Pf,backendName:"webgl",kernelFunc:B$},j$=sY({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),V$={kernelName:Df,backendName:"webgl",kernelFunc:j$},U$=uY({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),H$={kernelName:Lf,backendName:"webgl",kernelFunc:U$},G$=sY({opSnippet:"return float(!(x >= 1.0));"}),q$={kernelName:zf,backendName:"webgl",kernelFunc:G$},K$=uY({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),X$={kernelName:Bf,backendName:"webgl",kernelFunc:K$},Z$=Qe((function e(t,n,r,a,i){Ye(this,e),this.variableNames=["x"],this.outputShape=[];var o=n,s=t[3]-1;this.outputShape=t;var u,c="float(".concat(r,") + float(").concat(a,") * sum");u=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(o,"; j <= ").concat(o,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(s,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(u,";\n        setOutput(val);\n      }\n    ")})),Y$=Qe((function e(t,n,r,a,i){Ye(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o=n,s=t[3]-1;this.outputShape=t;var u,c="float(".concat(r,") + float(").concat(a,") * sum");u=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(o,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(o,"; j <= ").concat(o,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(s,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(u,";\n        setOutput(result);\n      }\n    ")})),J$={kernelName:Uf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta,c=id().getBool("WEBGL_PACK_NORMALIZATION")?new Y$(a.shape,i,o,s,u):new Z$(a.shape,i,o,s,u);return n.runWebGLProgram(c,[a],a.dtype)}},Q$=Qe((function e(t,n,r,a,i){Ye(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),$$={kernelName:Hf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta,d=new Q$(a.shape,s,u,c,l);return n.runWebGLProgram(d,[a,i,o],a.dtype)}};function e0(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=a.shape.length,c=Fh.parseAxisParam(i,a.shape),l=c,d=sI.getAxesPermutation(l,s),f=null!=d,p=n.shouldExecuteOnCPU([a]),h=a;if(f){if(p){for(var m=n.texData.get(h.dataId).values,v=new Array(s),g=0;g<v.length;g++)v[g]=a.shape[d[g]];var y=mZ(m,a.shape,a.dtype,d,v);h=n.makeTensorInfo(v,a.dtype),n.texData.get(h.dataId).values=y}else h=SY(a,d,n);l=sI.getInnerMostAxes(l.length,s)}sI.assertAxesAreInnerMostDims("max",l,s);var b,x=u(sI.computeOutAndReduceShapes(h.shape,l),2),A=x[0],k=x[1],w=A;if(o&&(w=sI.expandShapeToKeepDim(A,c)),p){m=n.texData.get(h.dataId).values,v=GX(m,Fh.sizeFromShape(k),w,a.dtype);b=n.makeTensorInfo(w,a.dtype),(y=n.texData.get(b.dataId)).values=v}else b=function(e,t,n,r){var a=Fh.sizeFromShape(t),i=gY({inputs:{x:e},attrs:{shape:[Fh.sizeFromShape(e.shape)/a,a]},backend:r}),o=AY(i,e.dtype,"max",r),s=gY({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(h,k,w,n);return f&&n.disposeIntermediateTensorInfo(h),b}var t0={kernelName:Gf,backendName:"webgl",kernelFunc:e0},n0=uY({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:qX}),r0={kernelName:qf,backendName:"webgl",kernelFunc:n0};var a0={kernelName:Kf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;mK(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Fh.assert(sI.eitherStridesOrDilationsAreOne(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=sI.computePool2DInfo(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&Fh.arraysEqual(c.inShape,c.outShape))return JZ({inputs:{x:a},backend:n});var l=new uJ(c,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}};var i0={kernelName:Zf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=sI.computePool3DInfo(a.shape,i,o,[1,1,1],s,c,u),d=new cJ(l,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}},o0=Qe((function e(t){Ye(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,u=o-1-t.padInfo.left,c=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),s0=Qe((function e(t){Ye(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,d=u-1-t.padInfo.front,f=c-1-t.padInfo.top,p=l-1-t.padInfo.left,h=u*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(d,", ").concat(f,", ").concat(p,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(h," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var u0={kernelName:Yf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=sI.computePool3DInfo(i.shape,o,s,[1,1,1],u,c),d=new cJ(l,"max",!0),f=n.runWebGLProgram(d,[i],i.dtype),p=new s0(l),h=n.runWebGLProgram(p,[a,f],i.dtype);return n.disposeIntermediateTensorInfo(f),h}};var c0={kernelName:Xf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;mK([i,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,d=sI.computePool2DInfo(o.shape,s,u,1,c,l),f=new uJ(d,"max",!0),p=n.runWebGLProgram(f,[o],o.dtype),h=new o0(d),m=n.runWebGLProgram(h,[a,p],o.dtype);return n.disposeIntermediateTensorInfo(p),m}};var l0={kernelName:Jf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,c=n.includeBatchInIndex,l=r;Fh.assert(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var d=[1,1];Fh.assert(sI.eitherStridesOrDilationsAreOne(o,d),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides ".concat(o," and dilations '").concat(d,"'")}));var f=sI.computePool2DInfo(a.shape,i,o,d,s),p=function(e,t,n,r){var a=new uJ(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new uJ(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,c,f,l),h=u(p,2);return[h[0],h[1]]}};var d0={kernelName:Qf,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.keepDims,o=n.axis,s=r,c=a.shape.length,l=Fh.parseAxisParam(o,a.shape),d=l,f=sI.getAxesPermutation(d,c),p=null!=f,h=s.shouldExecuteOnCPU([a]),m=[],v=a;if(p){if(h){for(var g=s.texData.get(v.dataId).values,y=new Array(c),b=0;b<y.length;b++)y[b]=a.shape[f[b]];var x=mZ(g,a.shape,a.dtype,f,y);v=s.makeTensorInfo(y,a.dtype),s.texData.get(v.dataId).values=x}else v=SY(a,f,s);m.push(v),d=sI.getInnerMostAxes(d.length,c)}sI.assertAxesAreInnerMostDims("sum",d,c);var A=u(sI.computeOutAndReduceShapes(v.shape,d),2),k=A[0],w=A[1],S=k;i&&(S=sI.expandShapeToKeepDim(k,l));for(var I=function(e,t,n,r){var a=Fh.sizeFromShape(t),i=gY({inputs:{x:e},attrs:{shape:[Fh.sizeFromShape(e.shape)/a,a]},backend:r}),o=AY(i,"float32","mean",r),s=gY({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(v,w,S,s),E=0,C=m;E<C.length;E++){var N=C[E];s.disposeIntermediateTensorInfo(N)}return I}};var f0={kernelName:$f,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,c=Fh.parseAxisParam(i,a.shape),l=c,d=sI.getAxesPermutation(l,s),f=a;null!=d&&(f=CY({inputs:{x:a},backend:n,attrs:{perm:d}}),l=sI.getInnerMostAxes(l.length,a.shape.length)),sI.assertAxesAreInnerMostDims("min",l,s);var p,h=u(sI.computeOutAndReduceShapes(f.shape,l),2),m=h[0],v=h[1],g=gY({inputs:{x:f},backend:n,attrs:{shape:[-1,Fh.sizeFromShape(v)]}}),y=AY(g,g.dtype,"min",n);return p=gY(o?{inputs:{x:y},backend:n,attrs:{shape:sI.expandShapeToKeepDim(m,c)}}:{inputs:{x:y},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(y),null!=d&&n.disposeIntermediateTensorInfo(f),p}},p0=uY({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:KX}),h0={kernelName:ep,backendName:"webgl",kernelFunc:p0},m0=Qe((function e(t,n,r){Ye(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=VK(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),v0=Qe((function e(t,n,r){Ye(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=VK(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=yZ("rc",a),c=yZ("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f="reflect"===r?0:1,p="";if(1===a){var h="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(f,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(f,";\n        }\n        source -= start;\n      ");p="\n        ".concat(i," rc = outputLoc;\n        ").concat(h,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(h,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ")}else{var m="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(f,") +\n                gte * ((end - 1) * 2 - source + ").concat(f,");\n        source -= start;\n      ");p="\n        ".concat(i," rc = outputLoc;\n        ").concat(m,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(m,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(m,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(m,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),g0={kernelName:tp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=id().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new v0(a.shape,i,o):new m0(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},y0=uY({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),b0={kernelName:np,backendName:"webgl",kernelFunc:y0},x0=Qe((function e(t,n,r){Ye(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),A0=uY({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),k0={kernelName:of,backendName:"webgl",kernelFunc:A0},w0="return a - b;",S0=uY({opSnippet:w0,packedOpSnippet:w0,supportsComplex:!0,cpuKernelImpl:fZ}),I0={kernelName:rh,backendName:"webgl",kernelFunc:S0};function E0(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=Fh.parseAxisParam([i],a.shape),s=e0({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),u=sI.expandShapeToKeepDim(s.shape,o),c=gY({inputs:{x:s},backend:n,attrs:{shape:u}}),l=S0({inputs:{a:a,b:c},backend:n}),d=qQ({inputs:{x:l},backend:n}),f=IY({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),p=gY({inputs:{x:f},backend:n,attrs:{shape:u}}),h=A0({inputs:{a:d,b:p},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),h}var C0={kernelName:Gp,backendName:"webgl",kernelFunc:E0};var N0={kernelName:rp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,u=s?a:E0({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],l=u.shape[1],d=new x0(c,l,i),f=[[o]],p=n.runWebGLProgram(d,[u],"int32",f);return s||n.disposeIntermediateTensorInfo(u),p}};var T0={kernelName:ip,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=u(ZX(i.values,a.shape,a.dtype),2),s=o[0],c=o[1];return r.makeTensorInfo(c,a.dtype,s)}return t=id().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new BZ(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new IZ(a.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[a],a.dtype)}},_0=sE.nonMaxSuppressionV3Impl;var R0={kernelName:sp,backendName:"webgl",kernelFunc:function(e){sI.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(i.dataId),d=_0(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},M0=sE.nonMaxSuppressionV4Impl;var O0={kernelName:up,backendName:"webgl",kernelFunc:function(e){sI.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize,l=n.readSync(a.dataId),d=n.readSync(i.dataId),f=M0(l,d,o,s,u,c),p=f.selectedIndices,h=f.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},F0=sE.nonMaxSuppressionV5Impl;var P0={kernelName:cp,backendName:"webgl",kernelFunc:function(e){sI.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),d=n.readSync(i.dataId),f=F0(l,d,o,s,u,c),p=f.selectedIndices,h=f.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},D0=Qe((function e(t,n,r,a){Ye(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),L0={kernelName:dp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue,u=Fh.sizeFromShape(a.shape),c=new D0(u,i,o,s),l=gY({inputs:{x:a},backend:n,attrs:{shape:[u]}}),d=n.runWebGLProgram(c,[l],a.dtype);n.disposeIntermediateTensorInfo(l);var f=gY({inputs:{x:d},backend:n,attrs:{shape:[].concat(Tn(a.shape),[i])}});return n.disposeIntermediateTensorInfo(d),f}};function z0(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=_J({inputs:{input:r},backend:n}),i=z0({inputs:{x:a},backend:n}),o=GJ({inputs:{input:r},backend:n}),s=z0({inputs:{x:o},backend:n}),u=$Z({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return r$({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var B0={kernelName:hh,backendName:"webgl",kernelFunc:z0};var W0={kernelName:lp,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=_J({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=GJ({inputs:{input:a},backend:r}),u=z0({inputs:{x:s},backend:r}),c=$Z({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return r$({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var j0={kernelName:fp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return XQ({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){Fh.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),Fh.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=XQ({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=XJ({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}},V0=Qe((function e(t,n,r){Ye(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=VK(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),U0=Qe((function e(t,n,r){Ye(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=VK(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=yZ("rc",a),c=yZ("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f=["".concat(i," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(l,") {")],p=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",m=0,v=1===a?2:4;m<v;m++)h+="\n        ".concat(f[m],"\n        if (").concat(p,") {\n          result[").concat(m,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(m,"] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ");h+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")})),H0=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(0===Fh.sizeFromShape(a.shape)){var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return r$({backend:n,attrs:{shape:s,value:o,dtype:a.dtype}})}var u=id().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new U0(a.shape,i,o):new V0(a.shape,i,o),c=[[o]];return n.runWebGLProgram(u,[a],a.dtype,c)},G0={kernelName:pp,backendName:"webgl",kernelFunc:H0},q0=uY({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),K0={kernelName:mp,backendName:"webgl",kernelFunc:q0};var X0={kernelName:gp,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims,c=i.shape.length,l=[],d=Fh.parseAxisParam(o,i.shape),f=d,p=sI.getAxesPermutation(f,c),h=i;if(null!=p&&(h=CY({inputs:{x:i},backend:r,attrs:{perm:p}}),f=sI.getInnerMostAxes(f.length,c),l.push(h)),sI.assertAxesAreInnerMostDims("prod",f,c),r.shouldExecuteOnCPU([h])){var m=r.texData.get(h.dataId).values,v=JX(h.shape,h.dtype,m,f),g=v.outVals,y=v.outShape,b=v.outDtype;t=r.makeTensorInfo(y,b,g)}else{var x=u(sI.computeOutAndReduceShapes(h.shape,f),2),A=x[0],k=x[1],w=Fh.sizeFromShape(k),S=gY({inputs:{x:h},backend:r,attrs:{shape:[-1,w]}}),I=AY(S,Em(i.dtype),"prod",r);t=gY({inputs:{x:I},backend:r,attrs:{shape:A}}),l.push(S),l.push(I)}if(s){l.push(t);var E=sI.expandShapeToKeepDim(t.shape,d);t=gY({inputs:{x:t},backend:r,attrs:{shape:E}})}return l.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},Z0=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=QX(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},Y0={kernelName:yp,backendName:"webgl",kernelFunc:Z0},J0=sY({opSnippet:"return 1.0 / x;"}),Q0={kernelName:xp,backendName:"webgl",kernelFunc:J0},$0=sY({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),e1={kernelName:Ap,backendName:"webgl",kernelFunc:$0},t1=sY({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),n1={kernelName:Cp,backendName:"webgl",kernelFunc:t1},r1=Qe((function e(t,n,r,a,i){Ye(this,e),this.variableNames=["A"],this.outputShape=[];var o=u(t,4),s=o[0],c=o[1],l=o[2],d=o[3];this.outputShape=[s,n,r,d];var f,p=[a&&n>1?c-1:c,a&&r>1?l-1:l],h=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(p[0]/h[0],",\n          ").concat(p[1]/h[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),a1=Qe((function e(t,n,r,a,i){Ye(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=u(t,4),s=o[0],c=o[1],l=o[2],d=o[3];this.outputShape=[s,n,r,d];var f,p=[a&&n>1?c-1:c,a&&r>1?l-1:l],h=[a&&n>1?n-1:n,a&&r>1?r-1:r];f=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(p[0]/h[0],",\n          ").concat(p[1]/h[1],",\n          ").concat(p[1]/h[1],");\n      const vec3 inputShapeRC = vec3(").concat(c,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(d-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var i1={kernelName:Ip,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=u(r.size,2),c=s[0],l=s[1],d=id().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new a1(a.shape,c,l,i,o):new r1(a.shape,c,l,i,o);return n.runWebGLProgram(d,[a],"float32")}},o1=Qe((function e(t,n,r){Ye(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=u(n,3),i=a[1],o=a[2],s=u(t,3),c=s[1],l=s[2],d=[r&&c>1?i-1:i,r&&l>1?o-1:o],f=[r&&c>1?c-1:c,r&&l>1?l-1:l],p=d[0]/f[0],h=d[1]/f[1],m=1/p,v=1/h,g=2*Math.ceil(m)+2,y=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(p,");\n        const float widthScale = float(").concat(h,");\n\n        const float invHeightScale = float(").concat(m,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var s1={kernelName:Ep,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new o1(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},u1=Qe((function e(t,n,r,a,i){Ye(this,e),this.variableNames=["A"],this.outputShape=[];var o=u(t,4),s=o[0],c=o[1],l=o[2],d=o[3];this.outputShape=[s,n,r,d];var f,p=[a&&n>1?c-1:c,a&&r>1?l-1:l],h=[a&&n>1?n-1:n,a&&r>1?r-1:r],m=a?"0.5":"0.0";f=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(p[0]/h[0],",\n          ").concat(p[1]/h[1],");\n      const vec2 inputShapeRC = vec2(").concat(c,".0, ").concat(l,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(m,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),c1=Qe((function e(t,n,r,a,i){Ye(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=u(t,4),s=o[0],c=o[1],l=o[2],d=o[3];this.outputShape=[s,n,r,d];var f,p=[a&&n>1?c-1:c,a&&r>1?l-1:l],h=[a&&n>1?n-1:n,a&&r>1?r-1:r],m=a?"0.5":"0.0";f=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(p[0]/h[0],",\n          ").concat(p[1]/h[1],",\n          ").concat(p[1]/h[1],");\n      const vec3 inputShapeRC = vec3(").concat(c,".0, ").concat(l,".0,\n                                     ").concat(l,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(f,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(m,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(d-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var l1={kernelName:wp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=u(r.size,2),c=s[0],l=s[1],d=id().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new c1(a.shape,c,l,i,o):new u1(a.shape,c,l,i,o);return n.runWebGLProgram(d,[a],a.dtype)}},d1=Qe((function e(t,n,r){Ye(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=u(n,3),i=a[1],o=a[2],s=u(t,3),c=s[1],l=s[2],d=[r&&c>1?i-1:i,r&&l>1?o-1:o],f=[r&&c>1?c-1:c,r&&l>1?l-1:l],p=d[0]/f[0],h=d[1]/f[1],m=1/p,v=1/h,g=2*Math.ceil(m)+2,y=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(p,");\n        const float widthScale = float(").concat(h,");\n\n        const float invHeightScale = float(").concat(m,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(g,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(c,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(l,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(d[0],") *\n                (float(dyR) / float(").concat(f[0],"));\n\n            float sourceFracCol =\n                float(").concat(d[1],") *\n                  (float(dyC) / float(").concat(f[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var f1={kernelName:Sp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new d1(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},p1=Qe((function e(t,n){Ye(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=VK(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),h1=Qe((function e(t,n){Ye(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=yZ("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=VK(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var m1={kernelName:Np,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,s=Fh.parseAxisParam(i,a.shape);if(0===o)return JZ({inputs:{x:a},backend:n});var u=id().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new h1(a.shape,s):new p1(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},v1=Qe((function e(t,n){Ye(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var i="";i="number"==typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),g1={kernelName:gh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,c=r,l=new v1(a.shape,o),d=u(sI.getImageCenter(s,a.shape[1],a.shape[2]),2),f=[[d[0],d[1],Math.sin(i),Math.cos(i)]];return c.runWebGLProgram(l,[a],a.dtype,f)}},y1=sY({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),b1={kernelName:Tp,backendName:"webgl",kernelFunc:y1},x1=sY({opSnippet:"return inversesqrt(x);",cpuKernelImpl:$X}),A1={kernelName:_p,backendName:"webgl",kernelFunc:x1},k1=Qe((function e(t,n,r,a,i,o){Ye(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=VK(i.length),u=VK(o.length),c="";1===r?c="i":2===r&&(c="i, j");var l="getIndices(".concat(c,")"),d="";1===a?d="i":2===a&&(d="i, coords[1]");var f="getUpdates(".concat(d,")"),p=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(p,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(f,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}));var w1={kernelName:Rp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=sI.calculateShapes(i,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,f=s.outputSize,p=[f/l,l];if(0===f)return n.makeTensorInfo(o,a.dtype);var h=gY({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),m=gY({inputs:{x:i},backend:n,attrs:{shape:[c,l]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new k1(c,u,h.shape.length,m.shape.length,d,p),y=n.runWebGLProgram(g,[m,h,v],m.dtype),b=gY({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),b}},S1=Qe((function e(t,n,r,a){Ye(this,e),this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[t,r];var i="for (int i = 0; i < ".concat(Math.ceil(Math.log2(n+1)),"; ++i) { if (left >= right) break;"),o=2===id().getNumber("WEBGL_VERSION")?"while (left < right) {":i,s="left"===a?"<":"<=";this.userCode="\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ".concat(o,"\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ").concat(s," value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     ")}));var I1={kernelName:Mp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sortedSequence,i=t.values,o=r.side,s=new S1(a.shape[0],a.shape[1],i.shape[1],o),u=[[a.shape[1]]];return n.runWebGLProgram(s,[a,i],"int32",u)}},E1=Qe((function e(t,n,r){var a,i;if(Ye(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(o[c])),c<t&&s.push("".concat(o[c]));a=s.join(),i=u.join()}var l=VK(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}));var C1={kernelName:Op,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new E1(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],Im(a.dtype,i.dtype))}},N1=sY({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(sI.SELU_SCALEALPHA,";\n  float scale = ").concat(sI.SELU_SCALE,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),T1={kernelName:Fp,backendName:"webgl",kernelFunc:N1},_1=sY({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:tZ}),R1={kernelName:Bp,backendName:"webgl",kernelFunc:_1},M1=sY({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),O1={kernelName:zp,backendName:"webgl",kernelFunc:M1},F1=sY({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),P1={kernelName:Dp,backendName:"webgl",kernelFunc:F1},D1=sY({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),L1={kernelName:Lp,backendName:"webgl",kernelFunc:D1},z1=sY({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),B1={kernelName:Wp,backendName:"webgl",kernelFunc:z1},W1={kernelName:Up,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;Fh.assert(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,Tn(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=[],d=H0({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),f=sI.getReshaped(d.shape,i,s,!1),p=sI.getPermuted(f.length,i.length,!1),h=sI.getReshapedPermuted(d.shape,i,s,!1),m=gY({inputs:{x:d},backend:n,attrs:{shape:f}}),v=CY({inputs:{x:m},backend:n,attrs:{perm:p}}),g=gY({inputs:{x:v},backend:n,attrs:{shape:h}});return l.push(d),l.push(m),l.push(v),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};var j1={kernelName:qp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.readSync(r.dataId),c=n.readSync(a.dataId),l=n.readSync(i.dataId),d=n.readSync(o.dataId)[0],f=u(aZ(s,r.shape,r.dtype,c,a.dtype,l,d),5),p=f[0],h=f[1],m=f[2],v=f[3],g=f[4];return[n.makeTensorInfo(h,r.dtype,p),n.makeTensorInfo([h[0]],a.dtype,m),n.makeTensorInfo([v.length],"bool",new Uint8Array(v.map((function(e){return Number(e)})))),n.makeTensorInfo([g.length],r.dtype,new Int32Array(g))]}};var V1={kernelName:Kp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),c=Array.from(n.readSync(i.dataId)),l=u(iZ(s,r.shape,r.dtype,o,c),3),d=l[0],f=l[1],p=l[2];return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([p.length],i.dtype,new Int32Array(p))]}};var U1={kernelName:Xp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),c=n.readSync(i.dataId),l=u(oZ(o,r.shape,r.dtype,s,c,!0),2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var H1={kernelName:Zp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),c=n.readSync(i.dataId),l=u(oZ(o,r.shape,r.dtype,s,c),2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var G1={kernelName:Yp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=sI.calculateShapes(i,a,s),c=u.sliceRank,l=u.numUpdates,d=u.sliceSize,f=u.strides,p=u.outputSize;if("string"===i.dtype){var h=n.bufferSync(a),m=n.bufferSync(i),v=Fh.decodeString(n.readSync(o.dataId)[0]),g=eZ(h,m,s,p,d,l,c,f,v,false);return n.makeTensorInfo(s,g.dtype,g.values)}var y=new k1(l,c,a.shape.length,i.shape.length,f,[p,1],false),b=n.runWebGLProgram(y,[i,a,o],i.dtype),x=gY({inputs:{x:b},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(b),x}};var q1={kernelName:Hp,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=r.axis,s=Fh.parseAxisParam(o,a.shape)[0],u=sI.prepareSplitSize(a,i,s),c=a.shape.length,l=new Array(c).fill(0),d=a.shape.slice();return u.map((function(e){var t=Tn(d);t[s]=e;var r=wJ({inputs:{x:a},backend:n,attrs:{begin:l,size:t}});return l[s]+=e,r}))}},K1="return sqrt(x);",X1=sY({opSnippet:K1,packedOpSnippet:K1,cpuKernelImpl:sZ}),Z1={kernelName:jp,backendName:"webgl",kernelFunc:X1},Y1=sY({opSnippet:"return x * x;"}),J1={kernelName:Qp,backendName:"webgl",kernelFunc:Y1},Q1="return (a - b) * (a - b);",$1=uY({opSnippet:Q1,packedOpSnippet:Q1}),e2={kernelName:Jp,backendName:"webgl",kernelFunc:$1};var t2={kernelName:mh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=EZ+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new IZ(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},n2=Qe((function e(t,n,r){Ye(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=VK(r.length),o=VK(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var r2={kernelName:$p,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,d=a.ellipsisMask,f=a.newAxisMask,p=a.shrinkAxisMask,h=Oy.sliceInfo(i.shape,o,s,u,c,l,d,f,p),m=h.finalShapeSparse,v=h.finalShape,g=h.isIdentity,y=h.sliceDim0,b=h.isSimpleSlice,x=h.begin,A=h.end,k=h.strides;if(g)t=gY({inputs:{x:i},backend:r,attrs:{shape:v}});else if(y||b){Fh.assert(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var w=Oy.computeOutShape(x,A,k),S=wJ({inputs:{x:i},backend:r,attrs:{begin:x,size:w}});t=gY({inputs:{x:S},backend:r,attrs:{shape:v}}),r.disposeIntermediateTensorInfo(S)}else if(r.shouldExecuteOnCPU([i])){var I=r.readSync(i.dataId),E=cg(i.shape,i.dtype,I),C=uZ(m,E,k,x);t=r.makeTensorInfo(v,i.dtype,C.values)}else{var N=new n2(x,k,m);t=r.runWebGLProgram(N,[i],i.dtype)}var T=gY({inputs:{x:t},backend:r,attrs:{shape:v}});return r.disposeIntermediateTensorInfo(t),T}};var a2={kernelName:eh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,c=r.padWidth,l=r.preserveShortSequences,d=t.data,f=t.dataSplits,p=n.readSync(d.dataId),h=n.readSync(f.dataId),m=u(cZ(p,h,a,i,o,s,c,l),2),v=m[0],g=m[1];return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(f.shape,"int32",g)]}};var i2={kernelName:th,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=n.readSync(a.dataId),s=n.readSync(i.dataId)[0],c=u(lZ(o,s,r),3),l=c[0],d=c[1],f=c[2],p=d.length;return[n.makeTensorInfo([p,2],"int32",l),n.makeTensorInfo([p],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(f))]}};var o2={kernelName:nh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=n.readSync(a.dataId),o=dZ(i,r);return n.makeTensorInfo(a.shape,"int32",o)}},s2=sY({opSnippet:"return tan(x);"}),u2={kernelName:ah,backendName:"webgl",kernelFunc:s2},c2=sY({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),l2={kernelName:ih,backendName:"webgl",kernelFunc:c2},d2=Qe((function e(t,n){Ye(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=VK(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}));function f2(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if("string"===a.dtype||a.shape.length>5){var o=n.readSync(a.dataId),s="string"===a.dtype?o.map((function(e){return Fh.decodeString(e)})):o,u=cg(a.shape,a.dtype,s),c=pZ(u,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var l=new d2(a.shape,i);return n.runWebGLProgram(l,[a],a.dtype)}var p2={kernelName:oh,backendName:"webgl",kernelFunc:f2},h2=Qe((function e(t){Ye(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),m2=Qe((function e(t){Ye(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function v2(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function g2(e){for(var t=1;t<e;)t*=2;return t}var y2={kernelName:sh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=id().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),c=id().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),l=a.shape,d=l[l.length-1];if(n.shouldExecuteOnCPU([a])||d<s||i>c){var f=n.readSync(a.dataId),p=u(hZ(f,l,a.dtype,i,o),2),h=p[0],m=p[1];return[n.makeTensorInfo(h.shape,h.dtype,h.values),n.makeTensorInfo(m.shape,m.dtype,m.values)]}if(0===i)return l[l.length-1]=0,[n.makeTensorInfo(l,a.dtype,[]),n.makeTensorInfo(l,"int32",[])];if(1===d)return[a,r$({attrs:{shape:l,dtype:"int32",value:0},backend:n})];var v=n.texData.get(a.dataId),g=null!==v&&v.isPacked,y=g?n.unpackTensor(a):a,b=Fh.sizeFromShape(l)/d,x=gY({inputs:{x:y},attrs:{shape:[b,d]},backend:n});g&&v2(n,y);for(var A=g2(i),k=g2(d),w=null,S=function(){return null===w?[x,x]:[x,w]},I=function(e,t,r){var a=S(),i=new h2(r),o=[[d],[null===w?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=w;w=n.runWebGLProgram(i,a,"int32",o),v2(n,s)},E=1;E<A;E*=2)for(var C=2*E,N=E;N>=1;N/=2)I(C,N,[b,k]);for(var T=k;T>A;T/=2){var _=S(),R=new m2([b,T/2]),M=[[d],[null===w?1:0],[A]],O=w;w=n.runWebGLProgram(R,_,"int32",M),v2(n,O);for(var F=A/2,P=2*F,D=F;D>=1;D/=2)I(P,D,w.shape)}var L=w;w=wJ({inputs:{x:w},backend:n,attrs:{begin:0,size:[b,i]}}),v2(n,L);var z=A$({inputs:{x:x,indices:w},backend:n,attrs:{axis:1,batchDims:1}});v2(n,x);var B=l.slice(0,-1);B.push(i),L=w,w=gY({inputs:{x:w},attrs:{shape:B},backend:n}),v2(n,L);var W=z;return z=gY({inputs:{x:z},attrs:{shape:B},backend:n}),v2(n,W),[z,w]}},b2=Qe((function e(t,n,r,a,i,o){Ye(this,e),this.variableNames=["Image","Transforms"],this.outputShape=o;var s,u="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var x2={kernelName:uh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.transforms,o=r.interpolation,s=r.fillMode,c=r.fillValue,l=r.outputShape,d=u(a.shape,4),f=d[0],p=d[1],h=d[2],m=d[3],v=u(null!=l?l:[p,h],2),g=v[0],y=v[1],b=new b2(p,h,o,s,c,[f,g,y,m]);return n.runWebGLProgram(b,[a,i],"float32")}};var A2={kernelName:lh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;mK(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=vZ(o,a,i.shape,i.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,i.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}};var k2={kernelName:dh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],c=new Array(s-1),l=0,d=0;d<s;d++)d!==i&&(c[l++]=o.shape[d]);var f=[],p=new Array(s).fill(0),h=o.shape.slice();h[i]=1;for(var m=new Array(u),v=0;v<m.length;v++){p[i]=v;var g=wJ({inputs:{x:o},backend:n,attrs:{begin:p,size:h}}),y=gY({inputs:{x:g},backend:n,attrs:{shape:c}});m[v]=y,f.push(g)}return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},w2=Qe((function e(t,n){Ye(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(f,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var S2={kernelName:fh,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,s=a.shape.length,u=[],c=0,l=sI.getAxesPermutation([c],s),d=a;null!=l&&(d=CY({inputs:{x:a},backend:n,attrs:{perm:l}}),u.push(d),c=sI.getInnerMostAxes(1,s)[0]);var f=sI.segment_util.computeOutShape(d.shape,c,o),p=Fh.sizeFromShape([d.shape[c]]),h=gY({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});u.push(h);var m=function e(t,r,a,i,o){var s=t.shape[0],c=t.shape[1],l=sI.segment_util.segOpComputeOptimalWindowSize(c,o),d=new w2({windowSize:l,inSize:c,batchSize:s,numSegments:o},r),f=n.compileAndRun(d,[t,a],i);if(u.push(f),f.shape[1]===o)return f;var p=Z0({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),h=f2({inputs:{x:p},backend:n,attrs:{reps:[c/l]}});return u.push(p),u.push(h),e(f,r,h,i,o)}(h,"unsortedSegmentSum",i,Em(a.dtype),o),v=gY({inputs:{x:m},backend:n,attrs:{shape:f}}),g=v;if(null!=l){u.push(v);var y=sI.getUndoAxesPermutation(l);g=CY({inputs:{x:g},backend:n,attrs:{perm:y}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},I2=0,E2=[_Y,MY,FY,DY,BY,VY,UY,HY,YY,JY,$Y,tJ,rJ,iJ,sJ,lJ,dJ,hJ,mJ,vJ,bJ,IJ,EJ,CJ,MJ,PJ,zJ,eY,jJ,ZJ,nQ,sQ,uQ,cQ,lQ,dQ,pQ,mQ,gQ,kQ,wQ,SQ,EQ,TQ,MQ,OQ,PQ,LQ,zQ,WQ,jQ,UQ,GQ,KQ,ZQ,QQ,t$,i$,s$,l$,f$,m$,v$,g$,b$,k$,S$,E$,QZ,C$,qJ,T$,R$,O$,rY,P$,L$,z$,W$,V$,H$,q$,X$,J$,$$,t0,r0,a0,i0,u0,c0,l0,d0,f0,h0,g0,b0,N0,vY,T0,R0,O0,P0,TJ,L0,W0,j0,G0,K0,oY,X0,Y0,RJ,k0,Q0,e1,n1,yY,i1,s1,l1,f1,m1,g1,b1,A1,w1,I1,C1,T1,R1,O1,P1,L1,SJ,C0,B1,W1,j1,V1,U1,H1,G1,q1,Z1,J1,e2,t2,r2,a2,i2,o2,I0,EY,u2,l2,p2,y2,x2,NY,A2,k2,S2,B0];I2<E2.length;I2++){Nh(E2[I2])}var C2=id();C2.registerFlag("WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE",(function(){return 15})),C2.registerFlag("WEBGPU_CPU_FORWARD",(function(){return!0})),C2.registerFlag("WEBGPU_MATMUL_WORK_PER_THREAD",(function(){return 4})),C2.registerFlag("WEBGPU_USE_NAIVE_CONV2D_TRANSPOSE",(function(){return!1})),C2.registerFlag("WEBGPU_USE_LOW_POWER_GPU",(function(){return!1})),C2.registerFlag("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e3})),C2.registerFlag("WEBGPU_USE_PROFILE_TOOL",(function(){return!1})),C2.registerFlag("WEBGPU_USE_IMPORT",(function(){return!1}));var N2="\n  if (isNaN.r) {\n    resultTemp.r = uniforms.NAN;\n  }\n  if (isNaN.g) {\n    resultTemp.g = uniforms.NAN;\n  }\n  if (isNaN.b) {\n    resultTemp.b = uniforms.NAN;\n  }\n  if (isNaN.a) {\n    resultTemp.a = uniforms.NAN;\n  }\n  ",T2="\n  let isModRound1Bool = vec4<i32>(round(abs(b) % vec4<f32>(2.0))) == vec4<i32>(1);\n  let isModRound1 = vec4<f32>(isModRound1Bool);\n  let multiplier = sign(a) * isModRound1 + (vec4<f32>(1.0) - isModRound1);\n  var resultTemp = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  let isExpZero = b == vec4<f32>(0.0);\n  if (isExpZero.r) {\n    resultTemp.r = 1.0;\n  }\n  if (isExpZero.g) {\n    resultTemp.g = 1.0;\n  }\n  if (isExpZero.b) {\n    resultTemp.b = 1.0;\n  }\n  if (isExpZero.a) {\n    resultTemp.a = 1.0;\n  }\n  let isNaN = a < vec4<f32>(0.0) & floor(b) < b;\n  ".concat(N2,"\n  return resultTemp;\n  ");function _2(e,t){var n=t?N2:"\n  if (isnan(a)) { return a; }\n  if (isnan(b)) { return b; }\n  ";return t?"\n    var resultTemp = vec4<f32>(".concat(e,"(a, b));\n    let isNaN = isnanVec4(a) | isnanVec4(b);\n    ")+n+"\n    return resultTemp;\n  ":n+"\n    return ".concat(e,"(a, b);\n  ")}function R2(e,t){switch(e){case 0:return"return a * b;";case 1:return"return a + b;";case 2:return"return a - b;";case 3:return"return a / b;";case 4:return t?"return vec4<f32>(a == b);":"return f32(a == b);";case 5:return t?"return vec4<f32>(a > b);":"return f32(a > b);";case 6:return t?"return vec4<f32>(a >= b);":"return f32(a >= b);";case 7:return t?"return vec4<f32>(a < b);":"return f32(a < b);";case 8:return t?"return vec4<f32>(a <= b);":"return f32(a <= b);";case 9:return t?"return (vec4<f32>(a >= vec4<f32>(1.0)) *\n  vec4<f32>(b >= vec4<f32>(1.0)));":"return f32(f32(a) >= 1.0 && f32(b) >= 1.0);";case 10:return t?"return vec4<f32>(a != b);":"return f32(a != b);";case 11:return"return (a - b) * (a - b);";case 12:return t?"\n  let ia = vec4<i32>(round(a));\n  let ib = vec4<i32>(round(b));\n  let cond = ib != vec4<i32>(0);\n  var resultTemp = vec4<i32>(0);\n  let s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    resultTemp[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    resultTemp[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    resultTemp[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    resultTemp[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4<f32>(resultTemp);\n  ":"\n  let s = sign(a) * sign(b);\n  let ia = i32(round(a));\n  let ib = i32(round(b));\n  return f32(idiv(ia, ib, s));\n  ";case 14:return t?"\n  let aLessThanZero = vec4<f32>(a < vec4<f32>(0.0));\n  return (aLessThanZero * (b * a)) + ((vec4<f32>(1.0) - aLessThanZero) * a);\n  ":"if (a < 0.0) { return b * a; }  return a;";case 15:return _2("max",t);case 16:return _2("min",t);case 13:return t?T2:"\n  if(a < 0.0 && floor(b) < b) {\n    return uniforms.NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  if (round(abs(b) % 2.0) != 1.0) {\n    return pow(abs(a), b);\n  }\n  return sign(a) * pow(abs(a), b);\n  ";case 17:return"return areal * breal - aimag * bimag;";case 18:return"return areal * bimag + aimag * breal;";default:throw new Error("BinaryType ".concat(e," is not implemented!"))}}function M2(e,t){switch(e){case 0:return"return abs(a);";case 2:return"return cos(a);";case 3:return"\n  let e2x = exp(-a);\n  return (e2x + 1.0 / e2x) / 2.0;\n";case 1:return"return ceil(a);";case 4:return t?"\n  var resFloat = exp(a) - vec4<f32>(1.0);\n  if (a.r >= 0.0) {\n    resFloat.r = a.r;\n  }\n  if (a.g >= 0.0) {\n    resFloat.g = a.g;\n  }\n  if (a.b >= 0.0) {\n    resFloat.b = a.b;\n  }\n  if (a.a >= 0.0) {\n    resFloat.a = a.a;\n  }\n  return resFloat;\n":"if (a >= 0.0) { return a; }  return (exp(a) - 1.0);";case 5:return"return exp(a);";case 6:return"return exp(a) - 1.0;";case 7:return"return floor(a);";case 8:return"return a;";case 9:return"if (a < 0.0) { return 1.0/0.0; }\n  return log(a);";case 10:return"return f32(!(a >= 1.0));";case 11:return"return -a;";case 14:return t?"\n  let aLessThanZero = vec4<f32>(a < vec4<f32>(0.0));\n  return (aLessThanZero * (uniforms.alpha * a)) + ((vec4<f32>(1.0) - aLessThanZero) * a);\n":"if (a < 0.0) { return uniforms.alpha * a; } return a;";case 12:return t?"\n  return select(a, vec4<f32>(0.0), a < vec4<f32>(0.0));\n":"return select(a, 0.0, a < 0.0);";case 13:return t?"return clamp(a, vec4<f32>(0.0, 0.0, 0.0, 0.0), vec4<f32>(6.0, 6.0, 6.0, 6.0));":"return clamp(a, 0.0, 6.0);";case 15:return"return 1.0/sqrt(a);";case 18:return"return 1.0 / (1.0 + exp(-1.0 * a));";case 16:return"return sin(a);";case 17:return"\n  let e2x = exp(a);\n  return (e2x - 1.0 / e2x) / 2.0;\n";case 19:return"return sqrt(a);";case 20:return"return a * a;";case 21:return"\n  let e2x = exp(-2.0 * abs(a));\n  return sign(a) * (1.0 - e2x) / (1.0 + e2x);\n";case 22:return"return f32(i32((a)));";default:throw new Error("BinaryType ".concat(e," is not implemented!"))}}function O2(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===e)return null;if("linear"===e)return M2(8);if("relu"===e)return M2(12,t);if("elu"===e)return M2(4,t);if("relu6"===e)return M2(13,t);if("prelu"===e)return R2(14,t);if("sigmoid"===e)return M2(18,t);if("leakyrelu"===e)return M2(14,t);throw new Error("Activation ".concat(e," has not been implemented for the WebGPU backend."))}var F2={};Dc(F2,{ArrayBufferToTypedArray:function(){return U2},GPUBytesPerElement:function(){return V2},computeDispatch:function(){return L2},computeWorkGroupSizeForConv2d:function(){return z2},computeWorkGroupSizeForMatMul:function(){return B2},computeWorkPerThreadForConv2d:function(){return W2},flatDispatchLayout:function(){return j2},isWebGPUSupported:function(){return H2},tilesFitEvenlyIntoShape:function(){return D2}});var P2=function(e){for(var t=1,n=0;n<e.length;n++)t*=e[n];return t};function D2(e,t){if(e.length!==t.length)throw new Error("Cannot compute whether rank ".concat(e.length," tiles fit evenly into rank ").concat(t.length," shape - ranks must match."));return t.every((function(t,n){return t%e[n]===0}))}function L2(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1,1],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1],a=[Math.ceil(P2(e.x.map((function(e){return t[e]})))/(n[0]*r[0])),e.y?Math.ceil(P2(e.y.map((function(e){return t[e]})))/(n[1]*r[1])):1,e.z?Math.ceil(P2(e.z.map((function(e){return t[e]})))/(n[2]*r[2])):1],i=a[0],o=a[1],s=a[2];return[i,o,s]}function z2(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n)return[8,8,1];var r=P2(e.x.map((function(e){return t[e]}))),a=P2(e.y.map((function(e){return t[e]})));return r<=4?[4,16,1]:a<=4?[16,4,1]:[16,16,1]}function B2(e,t,n){return 1===e?[32,1,1]:1===n?[1,32,1]:[8,8,1]}function W2(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n)return[4,4,1];var r=P2(e.x.map((function(e){return t[e]}))),a=P2(e.y.map((function(e){return t[e]})));return r<=4?[1,2,1]:a<=4?[2,1,1]:[2,2,1]}function j2(e){return{x:e.map((function(e,t){return t}))}}function V2(e){if("float32"===e||"int32"===e||"bool"===e||"string"===e)return 4;if("complex64"===e)return 8;throw new Error("Unknown dtype ".concat(e))}function U2(e,t){if("float32"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype ".concat(t))}function H2(){return("undefined"!=typeof window||"undefined"!=typeof WorkerGlobalScope)&&!!navigator.gpu}var G2=function(e,t){return e?"\n        mm_Asub[inputRow][inputCol] = mm_readA(\n          t * TileInner + inputRow,\n          globalRowStart / ".concat(t," + inputCol, globalId);\n        "):"\n        mm_Asub[inputRow][inputCol] = mm_readA(\n          globalRow + innerRow,\n          t * TileInner / ".concat(t," + inputCol, globalId);\n        ")},q2=function(e,t){return e?"\n        let ACached0 = mm_Asub[k * InnerElementSize][localRow];\n        let ACached1 = mm_Asub[k * InnerElementSize + 1][localRow];\n        let ACached2 = mm_Asub[k * InnerElementSize + 2][localRow];\n        ".concat(3===t?"":"let ACached3 = mm_Asub[k * InnerElementSize + 3][localRow];","\n        for (var i = 0; i < RowPerThread; i = i + 1) {\n          acc[i] = BCached[0] * ACached0[i] + acc[i];\n          acc[i] = BCached[1] * ACached1[i] + acc[i];\n          acc[i] = BCached[2] * ACached2[i] + acc[i];\n          ").concat(3===t?"":"acc[i] = BCached[3] * ACached3[i] + acc[i];","\n        }"):"\n        for (var i = 0; i < RowPerThread; i = i + 1) {\n          let ACached = mm_Asub[tileRow + i][k];\n          acc[i] = BCached[0] * ACached.x + acc[i];\n          acc[i] = BCached[1] * ACached.y + acc[i];\n          acc[i] = BCached[2] * ACached.z + acc[i];\n          ".concat(3===t?"":"acc[i] = BCached[3] * ACached.w + acc[i];","\n        }")};function K2(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=i?t:r,s=i?r:t,u=i?e[1]:a;return Fh.assert((i&&t===n||r%4===0||r%3===0)&&4===e[0]&&(3===a||4===a),(function(){return"tileInner ".concat(r," must be divisible by 4|3. ColPerThread ").concat(e[0]," must be 4.\n           innerElementSize ").concat(a," must be 3|4.")})),"\n  var<workgroup> mm_Asub : array<array<vec".concat(u,"<f32>, ").concat(o/u,">, ").concat(s,">;\n  var<workgroup> mm_Bsub : array<array<vec4<f32>, ").concat(n/e[0],">, ").concat(r,">;\n\n  let RowPerThread = ").concat(e[1],";\n  let ColPerThread = ").concat(e[0],";\n  let InnerElementSize = ").concat(a,";\n  let TileInner = ").concat(r,";\n\n  @stage(compute) @workgroup_size(workGroupSizeX, workGroupSizeY, workGroupSizeZ)\n  fn main(@builtin(local_invocation_id) LocalId : vec3<u32>,\n          @builtin(global_invocation_id) GlobalId : vec3<u32>,\n          @builtin(num_workgroups) NumWorkgroups: vec3<u32>,\n          @builtin(workgroup_id) workgroupId: vec3<u32>) {\n    localId = LocalId;\n    globalId = GlobalId;\n    numWorkgroups = NumWorkgroups;\n\n    let localRow = i32(localId.y);\n    let tileRow = ").concat(1===t?"0":"localRow * RowPerThread",";\n    let tileCol = i32(localId.x);\n\n    let globalRow = ").concat(1===t?"0":"i32(globalId.y) * RowPerThread",";\n    let globalCol = i32(globalId.x);\n    let globalRowStart = i32(workgroupId.y) * ").concat(t,";\n\n    let numTiles = (uniforms.dimInner - 1) / TileInner + 1;\n\n    var acc: array<vec4<f32>, RowPerThread>;\n    var BCached : array<vec4<f32>, 4>;\n\n    // Loop over shared dimension.\n    let RowPerThreadB = TileInner / i32(workGroupSizeY);\n    let tileRowB = localRow * RowPerThreadB;\n    for (var t = 0; t < numTiles; t = t + 1) {\n        // Load one tile of A into local memory.\n        for (var innerRow = 0; innerRow < RowPerThread; innerRow = innerRow + 1) {\n            let inputRow = tileRow + innerRow;\n            let inputCol = tileCol;\n            ").concat(G2(i,u),"\n        }\n\n        // Load one tile of B into local memory.\n        for (var innerRow = 0; innerRow < RowPerThreadB; innerRow = innerRow + 1) {\n            let inputRow = tileRowB + innerRow;\n            let inputCol = tileCol;\n            mm_Bsub[inputRow][inputCol] = mm_readB(t * TileInner + inputRow, globalCol, globalId);\n        }\n\n        workgroupBarrier();\n\n        // Compute acc values for a single thread.\n        for (var k = 0; k < TileInner / InnerElementSize; k = k + 1) {\n            BCached[0] = mm_Bsub[k * InnerElementSize][tileCol];\n            BCached[1] = mm_Bsub[k * InnerElementSize + 1][tileCol];\n            BCached[2] = mm_Bsub[k * InnerElementSize + 2][tileCol];\n            ").concat(3===a?"":"BCached[3] = mm_Bsub[k * InnerElementSize + 3][tileCol];","\n\n            ").concat(q2(i,a),"\n        }\n\n        workgroupBarrier();\n    }\n\n    for (var innerRow = 0; innerRow < RowPerThread; innerRow = innerRow + 1) {\n        mm_write(globalRow + innerRow,\n                 globalCol,\n                 acc[innerRow], globalId);\n    }\n  }")}var X2=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Ye(this,e),this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workGroupSize=[8,8,1],this.isVec4=!0,this.outputShape=n,this.dispatchLayout={x:[2],y:[1],z:[0]},1!==n[1]||i?this.elementsPerThread=[4,4,1]:this.elementsPerThread=[4,1,1],this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize,this.elementsPerThread);var c=null!=o,l=null!=u;c&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),this.tileAOuter=1!==n[1]||i?this.workGroupSize[1]*this.elementsPerThread[1]:1,this.tileBOuter=this.workGroupSize[0]*this.elementsPerThread[0],this.tileInner=this.tileBOuter,this.aShape=t,this.addBias=c,this.activation=s,this.hasPreluActivationWeights=l,this.batchAEqualOne=r,this.batchBEqualOne=a,this.transposeA=i;var d=i?t[1]:t[2];this.fitAOuter=n[1]%this.tileAOuter===0,this.fitBOuter=n[2]%this.tileBOuter===0,this.fitInner=d%this.tileInner===0,this.shaderKey="matMulPackedVec4_".concat(this.activation,"_").concat(this.fitAOuter,"_").concat(this.fitBOuter,"_").concat(this.fitInner,"_").concat(this.elementsPerThread,"_").concat(this.batchAEqualOne,"_").concat(this.batchBEqualOne,"_").concat(this.transposeA)}return Qe(e,[{key:"getUserCode",value:function(){var e=this.fitAOuter&&this.fitInner?"return A[batch * batchASize + row * uniforms.aShape[2] / 4 + col]":"if (coordsInBounds2D(vec2<i32>(row, col * 4), vec2<i32>(uniforms.aShape[1], uniforms.aShape[2]))) {\n            return A[batch * batchASize + row * uniforms.aShape[2] / 4 + col];\n        }\n        return vec4<f32>(0.0)",t=this.fitInner&&this.fitBOuter?"return B[batch * batchBSize + row * uniforms.dimBOuter / 4 + col]":"if(coordsInBounds2D(vec2<i32>(row, col * 4), vec2<i32>(uniforms.dimInner, uniforms.dimBOuter))) {\n             return B[batch * batchBSize + row * uniforms.dimBOuter / 4 + col];\n        }\n        return vec4<f32>(0.0)",n="",r="";if(this.activation){var a=O2(this.activation,this.isVec4);n=this.hasPreluActivationWeights?"fn activation(a : vec4<f32>, outCoord : vec3<i32>) -> vec4<f32> {\n                  let b = getPreluActivationWeightsByOutputCoords(outCoord);\n                  ".concat(a,"\n                }"):"\n            fn activation(a : vec4<f32>, outCoord : vec3<i32>) -> vec4<f32> {\n              ".concat(a,"\n            }"),r="value = activation(value, outCoord);"}var i=this.addBias?"value = value + getBiasByOutputCoords(outCoord);":"";return"\n      ".concat(n,"\n      fn mm_readA(row : i32, col : i32,  globalId : vec3<u32>) -> vec4<f32> {\n        ").concat(this.batchAEqualOne?"\n          let batchASize = 0;\n          let batch = 0;\n        ":"\n          let batchASize = uniforms.aShape[1] * uniforms.aShape[2] / 4;\n          let batch = i32(globalId.z);\n        ","\n\n        ").concat(e,";\n      }\n\n      fn mm_readB(row : i32, col : i32,  globalId : vec3<u32>) -> vec4<f32> {\n        ").concat(this.batchBEqualOne?"\n          let batchBSize = 0;\n          let batch = 0;\n          ":"\n          let batchBSize = uniforms.bShape[1] * uniforms.bShape[2] / 4;\n          let batch = i32(globalId.z);\n       ","\n        ").concat(t,";\n      }\n\n      fn mm_write(row : i32, col : i32, valueIn : vec4<f32>, globalId : vec3<u32>) {\n        if (row < uniforms.dimAOuter && col * 4 < uniforms.dimBOuter)\n        {\n          var value = valueIn;\n          let batch = i32(globalId.z);\n          let outCoord = vec3<i32>(batch, row, col * 4);\n          ").concat(i,"\n          ").concat(r,"\n          setOutputAtCoords(outCoord[0], outCoord[1], outCoord[2], value);\n        }\n      }\n      ").concat(K2(this.elementsPerThread,this.tileAOuter,this.tileBOuter,this.tileInner,4,this.transposeA),"\n    ")}}]),e}();function Z2(e,t){if(Math.max.apply(Math,Tn(e))>3)throw new Error("Cannot symbolically compute strides for rank > 4 tensor.");var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}var Y2=function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o={dtype:a.dtype,shape:a.shape},s=t5(r,o,t,i),u=e.createShaderModule({code:s,label:t.constructor.name});return e.createComputePipeline({layout:n,compute:{module:u,entryPoint:"main"},label:t.constructor.name})};function J2(e){if(e<=1)return"i32";if(2===e)return"vec2<i32>";if(3===e)return"vec3<i32>";if(4===e)return"vec4<i32>";if(5===e)return"vec5";if(6===e)return"vec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function Q2(e){if(0===e)return"x";if(1===e)return"y";if(2===e)return"z";if(3===e)return"w";if(4===e)return"u";if(5===e)return"v";throw Error("Index ".concat(e," is not yet supported"))}function $2(){return"\n    ".concat(e5(),"\n      let index = getGlobalIndex();\n")}function e5(){return"\n  ".concat("\n  @stage(compute) @workgroup_size(workGroupSizeX, workGroupSizeY, workGroupSizeZ)\n","\n  fn main(@builtin(local_invocation_id) LocalId : vec3<u32>,\n          @builtin(global_invocation_id) GlobalId : vec3<u32>,\n          @builtin(num_workgroups) NumWorkgroups: vec3<u32>) {\n    localId = LocalId;\n    globalId = GlobalId;\n    numWorkgroups = NumWorkgroups;\n")}function t5(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=[];if(a.push("\n      let workGroupSizeX = ".concat(n.workGroupSize[0],"u;\n      let workGroupSizeY = ").concat(n.workGroupSize[1],"u;\n      let workGroupSizeZ = ").concat(n.workGroupSize[2],"u;\n\n      var<private> localId: vec3<u32>;\n      var<private> globalId: vec3<u32>;\n      var<private> numWorkgroups: vec3<u32>;\n\n      // Only used when the y/z dimension of workgroup size is 1.\n      fn getGlobalIndex() -> i32 {\n        ").concat(u5(n)?"  return i32(globalId.x);":"  let localInvocationIndex = localId.z * workGroupSizeX * workGroupSizeY +\n                   localId.y * workGroupSizeX + localId.x;\n               let workGroupID = (globalId - localId)/vec3<u32>(\n                   workGroupSizeX, workGroupSizeY, workGroupSizeZ);\n\n               return i32((workGroupID.z * numWorkgroups.x * numWorkgroups.y +\n                   workGroupID.y * numWorkgroups.x + workGroupID.x) *\n                   (workGroupSizeX * workGroupSizeY * workGroupSizeZ) +\n                   localInvocationIndex);\n        ","\n      }\n    ")),!0===r)return a.push("\n        struct Uniform {\n          size            : i32,\n          numChannels     : i32,\n          outShapeStrides : vec2<i32>,\n          dispatchSize    : vec3<u32>,\n        };\n\n        @group(0) @binding(0) var<storage, write> result: array<".concat(c5(t.dtype,n.isVec4),">;\n        @group(0) @binding(2) var<uniform> uniforms: Uniform;\n      ")),[r5,a.join("\n"),a5(t.shape),n.getUserCode()].join("\n");var i=!1,o=!1,s="struct Uniforms { NAN : f32, ";n.variableNames.forEach((function(t,n){var r=J2(e[n].shape.length);("vec5"===r||"vec6"===r)&&(o=!0),(i||o)&&(s+="@align(16) "),i=o,s+="".concat(t.charAt(0).toLowerCase()+t.slice(1),"Shape : ").concat(r,", ")}));var c=J2(t.shape.length);o="vec5"===c||"vec6"===c,(i||o)&&(s+="@align(16) "),i=o,s+="outShape : ".concat(c,", ");var l=t.shape.length-1,d=J2(l);o="vec5"===d||"vec6"===d,(i||o)&&(s+="@align(16) "),i=o,s+="\n         outShapeStrides: ".concat(d,", "),n.size&&(i&&(s+="@align(16) "),i=!1,s+="size : i32, "),n.uniforms&&(i&&(s+="@align(16) "),s+=n.uniforms),s+="};",a.push(s),n.atomic?a.push("\n      @group(0) @binding(0) var<storage, read_write> result: array<atomic<i32>>;\n    "):a.push("\n      @group(0) @binding(0) var<storage, write> result: array<".concat(c5(t.dtype,n.isVec4),">;\n    ")),n.variableNames.forEach((function(t,r){a.push("\n      @group(0) @binding(".concat(1+r,") var<storage, read> ").concat(t,": array<").concat(n.variableTypes?n.variableTypes[r]:c5(e[r].dtype,n.isVec4),">;\n        "))})),""!==s&&a.push("\n      @group(0) @binding(".concat(1+n.variableNames.length,") var<uniform> uniforms: Uniforms;\n      "));var f=o5(t.shape,n.dispatchLayout),p=u(f,2),h=p[0],m=p[1],v=[r5,a.join("\n"),a5(t.shape),h,s5(t.shape.length)];if(n.atomic||v.push(l5(t.shape,t.dtype,n.isVec4)),m===t.shape.length){var g=e.map((function(e,r){return i5(e,t.shape,n.variableTypes?"vec4<f32>"===n.variableTypes[r]:n.isVec4,n.dispatchLayout.x.length===t.shape.length)})).join("\n");v.push(g)}return v.push(n.getUserCode()),v.join("\n")}function n5(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=u5(e)?"flatDispatch":"";return e.shaderKey+"_"+(e.workGroupSize?e.workGroupSize.join(","):"")+t.map((function(e){return e.length})).join(",")+n.join(",")+e.variableNames.join(",")+r+a+i}var r5="\n  struct vec5 {x: i32, y: i32, z: i32, w: i32, u: i32};\n  struct vec6 {x: i32, y: i32, z: i32, w: i32, u: i32, v: i32};\n\n  // Checks whether coordinates lie within the bounds of the shape.\n  fn coordsInBounds2D(coord : vec2<i32>, shape : vec2<i32>) -> bool {\n    return all(coord >= vec2<i32>(0)) && all(coord < shape);\n  }\n  fn coordsInBounds3D(coord : vec3<i32>, shape : vec3<i32>) -> bool {\n    return all(coord >= vec3<i32>(0)) && all(coord < shape);\n  }\n  fn coordsInBounds4D(coord : vec4<i32>, shape : vec4<i32>) -> bool {\n    return all(coord >= vec4<i32>(0)) && all(coord < shape);\n  }\n\n  fn getIndexFromCoords1D(coord : i32, shape : i32) -> i32 {\n    return coord;\n  }\n  fn getIndexFromCoords2D(coords : vec2<i32>, shape : vec2<i32>) -> i32 {\n    return dot(coords, vec2<i32>(shape.y, 1));\n  }\n  fn getIndexFromCoords3D(coords : vec3<i32>, shape : vec3<i32>) -> i32 {\n    return dot(coords, vec3<i32>(shape.y * shape.z, shape.z, 1));\n  }\n  fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\n    return dot(coords, vec4<i32>(\n        shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\n  }\n  fn getIndexFromCoords5D(coords : vec5, shape : vec5) -> i32 {\n    let shapeStrides: vec5 = vec5(shape.y * shape.z * shape.w * shape.u, shape.z * shape.w * shape.u, shape.w * shape.u, shape.u, 1);\n    return coords.x*shapeStrides.x + coords.y*shapeStrides.y + coords.z*shapeStrides.z + coords.w*shapeStrides.w + coords.u*shapeStrides.u;\n  }\n  fn getIndexFromCoords6D(coords : vec6, shape : vec6) -> i32 {\n    let shapeStrides: vec6 = vec6(shape.y * shape.z * shape.w * shape.u * shape.v, shape.z * shape.w * shape.u * shape.v, shape.w * shape.u * shape.v, shape.u * shape.v, shape.v, 1);\n    return coords.x*shapeStrides.x + coords.y*shapeStrides.y + coords.z*shapeStrides.z + coords.w*shapeStrides.w + coords.u*shapeStrides.u + coords.v*shapeStrides.v;\n  }\n\n  fn idiv(a: i32, b: i32, sign: f32) -> i32 {\n    var res: i32 = a / b;\n    let mod: i32 = a % b;\n    if (sign < 0. && mod != 0) {\n      res = res - 1;\n    }\n    return res;\n  }\n\n  // NaN defination in IEEE 754-1985 is :\n  //   - sign = either 0 or 1.\n  //   - biased exponent = all 1 bits.\n  //   - fraction = anything except all 0 bits (since all 0 bits represents infinity).\n  // https://en.wikipedia.org/wiki/IEEE_754-1985#Representation_of_non-numbers\n  fn isnan(val: f32) -> bool {\n    let floatToUint: u32 = bitcast<u32>(val);\n    return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n  }\n  fn isnanVec4(val : vec4<f32>) -> vec4<bool> {\n    return vec4<bool>(isnan(val[0]), isnan(val[1]), isnan(val[2]), isnan(val[3]));\n  }\n";function a5(e){var t=e.length;if(t<=1)return"fn getCoordsFromIndex(index : i32) -> i32 { return index; }";for(var n,r=Fh.computeStrides(e),a=J2(t),i=[],o=0;o<t;o++)i.push("d".concat(o));return 1===r.length?"    fn getCoordsFromIndex(index : i32) -> vec2<i32> {\n      let d0 = index / uniforms.outShapeStrides; let d1 = index - d0 * uniforms.outShapeStrides;\n      return vec2<i32>(d0, d1);\n    }":(n="var index2 = index;"+r.map((function(e,t){var n="let ".concat(i[t]," = index2 / uniforms.outShapeStrides.").concat(Q2(t)),a=t===r.length-1?"let ".concat(i[t+1]," = index2 - ").concat(i[t]," * uniforms.outShapeStrides.").concat(Q2(t)):"index2 = index2 - ".concat(i[t]," * uniforms.outShapeStrides.").concat(Q2(t));return"".concat(n,"; ").concat(a,";")})).join(""),"\n    fn getCoordsFromIndex(index : i32) -> ".concat(a," {\n      ").concat(n,"\n      return ").concat(a,"(").concat(i.join(","),");\n    }\n  "))}function i5(e,t,n,r){var a=function(e,t){var n=e.name,r=e.shape.length,a=J2(r),i="get"+n.charAt(0).toUpperCase()+n.slice(1),o=["d0","d1","d2","d3","d4","d5"].slice(0,r),s=o.map((function(e){return"".concat(e," : i32")})).join(", ");if(r<1)return t?"\n        fn ".concat(i,"() -> vec4<f32> {\n          return vec4<f32>(").concat(n,"[0]);\n        }\n      "):"\n      fn ".concat(i,"() ->f32 {\n        return f32(").concat(n,"[0]);\n      }\n    ");var u="uniforms.".concat(n.charAt(0).toLowerCase()+n.slice(1),"Shape"),c="".concat(r,"D");return 0===r&&(c="1D"),t?"\n      fn ".concat(i,"(").concat(s,") -> vec4<f32> {\n        return vec4<f32>(").concat(n,"[getIndexFromCoords").concat(c,"(").concat(a,"(").concat(o.join(","),"),\n          ").concat(u,") / 4]);\n      }\n      "):"\n    fn ".concat(i,"(").concat(s,") -> f32 {\n      return f32(").concat(n,"[getIndexFromCoords").concat(c,"(").concat(a,"(").concat(o.join(","),"),\n        ").concat(u,")]);\n    }\n   ")}(e,n);return e.shape.length<=t.length&&(a+=function(e,t,n,r){var a=e.name,i=a.charAt(0).toUpperCase()+a.slice(1),o="get"+i+"ByOutput",s=e.shape.length,u=t.length,c=J2(u);if(Fh.arraysEqual(e.shape,t)&&r)return n?"\n      fn ".concat(o,"Index(globalIndex : i32) -> vec4<f32> {\n        return vec4<f32>(").concat(a,"[globalIndex]);\n      }\n\n      fn ").concat(o,"Coords(coords : ").concat(c,") -> vec4<f32> {\n        return vec4<f32>(").concat(a,"[").concat(u>1?"getOutputIndexFromCoords(coords)":"coords"," / 4]);\n      }\n      "):"\n    fn ".concat(o,"Index(globalIndex : i32) -> f32 {\n      return f32(").concat(a,"[globalIndex]);\n    }\n\n    fn ").concat(o,"Coords(coords : ").concat(c,") -> f32 {\n      return f32(").concat(a,"[").concat(u>1?"getOutputIndexFromCoords(coords)":"coords","]);\n    }\n    ");var l=sI.getBroadcastDims(e.shape,t),d=u-s,f="";if(0===s)return n?"\n    fn ".concat(o,"Index(globalIndex : i32) -> vec4<f32> {\n      return get").concat(i,"();\n    }\n\n    fn ").concat(o,"Coords(coords : ").concat(c,") -> vec4<f32> {\n      return get").concat(i,"();\n    }\n  "):"\n    fn ".concat(o,"Index(globalIndex : i32) -> f32{\n      return get").concat(i,"();\n    }\n\n    fn ").concat(o,"Coords(coords : ").concat(c,") -> f32{\n      return get").concat(i,"();\n    }\n  ");f=u<2&&l.length>=1?"coords = 0;":l.map((function(e){return"coords.".concat(Q2(e+d)," = 0;")})).join("\n");var p="";if(u<2&&s>0)p="coords";else if(u>1){var h=J2(s),m=e.shape.map((function(e,t){return"coords.".concat(Q2(t+d))})).join(", ");p="".concat(h,"(").concat(m,")")}else p="coords";var v="uniforms.".concat(a.charAt(0).toLowerCase()+a.slice(1),"Shape"),g="".concat(s,"D");return n?"\n    fn ".concat(o,"Index(globalIndex : i32) -> vec4<f32> {\n      var coords = getCoordsFromIndex(globalIndex);\n      ").concat(f,"\n      return ").concat(a,"[getIndexFromCoords").concat(g,"(").concat(p,", ").concat(v,") / 4];\n    }\n\n    fn ").concat(o,"Coords(coordsIn : ").concat(c,") -> vec4<f32> {\n      var coords = coordsIn;\n      ").concat(f,"\n      return ").concat(a,"[getIndexFromCoords").concat(g,"(").concat(p,", ").concat(v,") / 4];\n    }\n  "):"\n  fn ".concat(o,"Index(globalIndex : i32) -> f32 {\n    var coords = getCoordsFromIndex(globalIndex);\n    ").concat(f,"\n    return f32(").concat(a,"[getIndexFromCoords").concat(g,"(").concat(p,", ").concat(v,")]);\n  }\n\n  fn ").concat(o,"Coords(coordsIn : ").concat(c,") -> f32 {\n    var coords = coordsIn;\n    ").concat(f,"\n    return f32(").concat(a,"[getIndexFromCoords").concat(g,"(").concat(p,", ").concat(v,")]);\n  }\n")}(e,t,n,r)),a}function o5(e,t){var n=t.x,r=t.y,a=void 0===r?[]:r,i=t.z,o=void 0===i?[]:i,s=e.length;if(n.length===s)return["fn getOutputCoords() -> ".concat(J2(s),"{\n    let globalIndex = getGlobalIndex();\n    return getCoordsFromIndex(globalIndex);\n  }\n  "),s];for(var u="",c=[n,a,o],l=0,d=0;d<c.length;d++){var f=c[d];if(0!==f.length)if(l+=f.length,1===f.length)u+="let d".concat(f[0]," = i32(globalId[").concat(d,"]);");else{var p=Z2(f,"uniforms.outShape");u+="var index".concat(d," = i32(globalId[").concat(d,"]);");for(var h=0;h<p.length;h++)u+="let d".concat(f[h]," = index").concat(d," / ").concat(p[h],";"),h===p.length-1?u+="let d".concat(f[h+1]," = index").concat(d," - d").concat(f[h]," * ").concat(p[h],";"):u+="index".concat(d," = index").concat(d," - d").concat(f[h]," * ").concat(p[h],";")}}for(var m=[],v=0;v<l;v++)m.push("d".concat(v));var g=J2(l),y="fn getOutputCoords() -> ".concat(g," {\n  ").concat(u,"\n");return 0===m.length?y+="return ".concat(g,"(0); }"):y+="return ".concat(g,"(").concat(m.join(","),"); }"),[y,l]}function s5(e){var t="";switch(e){case 0:case 1:t+="\n        fn getOutputIndexFromCoords(coords : i32) -> i32 {\n          return coords;\n        }\n        ";break;case 2:t+="\n        fn getOutputIndexFromCoords(coords : vec2<i32>) -> i32 {\n          return dot(coords, vec2<i32>(uniforms.outShapeStrides, 1));\n        }\n        ";break;case 3:t+="\n        fn getOutputIndexFromCoords(coords : vec3<i32>) -> i32 {\n          return dot(coords, vec3<i32>(uniforms.outShapeStrides.x, uniforms.outShapeStrides.y, 1));\n        }\n        ";break;case 4:t+="\n        fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\n          return dot(coords, vec4<i32>(\n            uniforms.outShapeStrides.x, uniforms.outShapeStrides.y, uniforms.outShapeStrides.z, 1));\n        }\n        ";break;case 5:t+="\n        fn getOutputIndexFromCoords(coords : vec5) -> i32 {\n          return coords.x * uniforms.outShapeStrides.x +\n              coords.y * uniforms.outShapeStrides.y +\n              coords.z * uniforms.outShapeStrides.z +\n              coords.w * uniforms.outShapeStrides.w +\n              coords.u;\n        }\n        ";break;case 6:t+="\n        fn getOutputIndexFromCoords(coords : vec6) -> i32 {\n          return coords.x * uniforms.outShapeStrides.x +\n              coords.y * uniforms.outShapeStrides.y +\n              coords.z * uniforms.outShapeStrides.z +\n              coords.w * uniforms.outShapeStrides.w +\n              coords.u * uniforms.outShapeStrides.u +\n              coords.v;\n        }\n        ";break;default:Fh.assert(!1,(function(){return"Unsupported ".concat(e,"D shape")}))}return t}function u5(e){return 1===e.dispatch[1]&&1===e.dispatch[2]}function c5(e,t){return"float32"===e?t?"vec4<f32>":"f32":"int32"===e||"bool"===e?t?"vec4<i32>":"i32":e}function l5(e,t,n){var r,a=e.length,i=c5(t,n);if(r=n?"fn setOutputAtIndex(flatIndex : i32, value : vec4<f32>) {\n      result[flatIndex] = ".concat(i,"(value);\n    }\n    fn setOutputAtIndexI32(flatIndex : i32, value : vec4<i32>) {\n      result[flatIndex] = ").concat(i,"(value);\n    }"):"fn setOutputAtIndex(flatIndex : i32, value : f32) {\n      result[flatIndex] = ".concat(i,"(value);\n    }\n    fn setOutputAtIndexI32(flatIndex : i32, value : i32) {\n      result[flatIndex] = ").concat(i,"(value);\n    }"),a>=2){var o=["d0","d1","d2","d3","d4","d5"].slice(0,a),s=J2(a);r+=n?"\n      fn setOutputAtCoords(".concat(o.map((function(e){return"".concat(e," : i32")})).join(", "),", value : vec4<f32>) {\n        let flatIndex = getOutputIndexFromCoords(").concat(s,"(").concat(o.join(", "),"));\n        setOutputAtIndex(flatIndex / 4, value);\n      }\n      fn setOutputAtCoordsI32(").concat(o.map((function(e){return"".concat(e," : i32")})).join(", "),", value : vec4<i32>) {\n        let flatIndex = getOutputIndexFromCoords(").concat(s,"(").concat(o.join(", "),"));\n        setOutputAtIndexI32(flatIndex / 4, value);\n      }\n    "):"\n      fn setOutputAtCoords(".concat(o.map((function(e){return"".concat(e," : i32")})).join(", "),", value : f32) {\n        let flatIndex = getOutputIndexFromCoords(").concat(s,"(").concat(o.join(", "),"));\n        setOutputAtIndex(flatIndex, value);\n      }\n      fn setOutputAtCoordsI32(").concat(o.map((function(e){return"".concat(e," : i32")})).join(", "),", value : i32) {\n        let flatIndex = getOutputIndexFromCoords(").concat(s,"(").concat(o.join(", "),"));\n        setOutputAtIndexI32(flatIndex, value);\n      }\n    ")}return r}var d5=function(e){return e?"\n        mm_Asub[inputRow][inputCol] = mm_readA(\n          t * TileInner + inputRow,\n          globalRowStart + inputCol, globalId);\n        ":"\n        mm_Asub[inputRow][inputCol] = mm_readA(\n          globalRowStart + inputRow,\n          t * TileInner + inputCol, globalId);\n        "},f5=function(e){return e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];"};function p5(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,a=e[1]*t[1],i=e[0]*t[0],o=n?a:r,s=n?r:a;Fh.assert(s%t[1]===0&&o%t[0]===0&&r%t[1]===0,(function(){return"tileAHight ".concat(s," must be divisible by workGroupSize[1]").concat(t[1],", tileAWidth ").concat(o," must be divisible by workGroupSize[0]").concat(t[0],", tileInner ").concat(r," must be divisible by workGroupSize[1]").concat(t[1])}));var u=s/t[1],c=o/t[0],l=r/t[1];return"\n    var<workgroup> mm_Asub : array<array<f32, ".concat(o,">, ").concat(s,">;\n    var<workgroup> mm_Bsub : array<array<f32, ").concat(i,">, ").concat(r,">;\n    let RowPerThread = ").concat(e[1],";\n    let ColPerThread = ").concat(e[0],";\n    let TileInner = ").concat(r,";\n\n    @stage(compute) @workgroup_size(workGroupSizeX, workGroupSizeY, workGroupSizeZ)\n    fn main(@builtin(local_invocation_id) LocalId : vec3<u32>,\n            @builtin(global_invocation_id) GlobalId : vec3<u32>,\n            @builtin(num_workgroups) NumWorkgroups: vec3<u32>,\n            @builtin(workgroup_id) workgroupId: vec3<u32>) {\n      localId = LocalId;\n      globalId = GlobalId;\n      numWorkgroups = NumWorkgroups;\n\n      let tileRow = i32(localId.y) * RowPerThread;\n      let tileCol = i32(localId.x) * ColPerThread;\n\n      let globalRow = i32(globalId.y) * RowPerThread;\n      let globalCol = i32(globalId.x) * ColPerThread;\n\n      let globalRowStart = i32(workgroupId.y) * ").concat(a,";\n\n      let numTiles = (uniforms.dimInner - 1) / TileInner + 1;\n\n      var acc : array<array<f32, ColPerThread>, RowPerThread>;\n\n      // Without this initialization strange values show up in acc.\n      for (var innerRow = 0; innerRow < RowPerThread; innerRow = innerRow + 1) {\n        for (var innerCol = 0; innerCol < ColPerThread; innerCol = innerCol + 1) {\n          acc[innerRow][innerCol] = 0.0;\n        }\n      }\n\n      let tileRowA = i32(localId.y) * ").concat(u,";\n      let tileColA = i32(localId.x) * ").concat(c,";\n      let tileRowB = i32(localId.y) * ").concat(l,";\n      // Loop over shared dimension.\n      for (var t = 0; t < numTiles; t = t + 1) {\n        // Load one tile of A into local memory.\n        for (var innerRow = 0; innerRow < ").concat(u,"; innerRow = innerRow + 1) {\n          for (var innerCol = 0; innerCol < ").concat(c,"; innerCol = innerCol + 1) {\n            let inputRow = tileRowA + innerRow;\n            let inputCol = tileColA + innerCol;\n            ").concat(d5(n),"\n          }\n        }\n\n        // Load one tile of B into local memory.\n        for (var innerRow = 0; innerRow < ").concat(l,"; innerRow = innerRow + 1) {\n          for (var innerCol = 0; innerCol < ColPerThread; innerCol = innerCol + 1) {\n            let inputRow = tileRowB + innerRow;\n            let inputCol = tileCol + innerCol;\n            mm_Bsub[inputRow][inputCol] = mm_readB(\n              t * ").concat(r," + inputRow,\n              globalCol + innerCol, globalId);\n          }\n        }\n\n        workgroupBarrier();\n\n        // Compute acc values for a single thread.\n        var BCached : array<f32, ColPerThread>;\n        for (var k = 0; k < TileInner; k = k + 1) {\n          for (var inner = 0; inner < ColPerThread; inner = inner + 1) {\n            BCached[inner] = mm_Bsub[k][tileCol + inner];\n          }\n\n          for (var innerRow = 0; innerRow < RowPerThread; innerRow = innerRow + 1) {\n            ").concat(f5(n),"\n            for (var innerCol = 0; innerCol < ColPerThread; innerCol = innerCol + 1) {\n              acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];\n            }\n          }\n        }\n\n        workgroupBarrier();\n      }\n\n      for (var innerRow = 0; innerRow < RowPerThread; innerRow = innerRow + 1) {\n        for (var innerCol = 0; innerCol < ColPerThread; innerCol = innerCol + 1) {\n          mm_write(globalRow + innerRow,\n                   globalCol + innerCol,\n                   acc[innerRow][innerCol], globalId);\n        }\n      }\n    }\n  ")}var h5=function(e){return e?"\n      mm_readA(colA, globalRow, globalId),\n      mm_readA(colA + 1, globalRow, globalId),\n      mm_readA(colA + 2, globalRow, globalId),\n      mm_readA(colA + 3, globalRow, globalId)\n  ":"\n      mm_readA(globalRow, colA, globalId),\n      mm_readA(globalRow, colA + 1, globalId),\n      mm_readA(globalRow, colA + 2, globalId),\n      mm_readA(globalRow, colA + 3, globalId)\n  "};var m5=function(){function e(t,n,r,a,i){var o,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,d=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null;Ye(this,e),this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workGroupSize=[16,16,1],this.outputShape=n,this.dispatchLayout={x:[2],y:[1],z:[0]};var p=s?t[1]:t[2];this.workGroupSize=B2(n[1],0,n[2]),(1===n[1]||1===n[2])&&(r=1),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize,[r,r,1]),Fh.arraysEqual(this.dispatch,[1,1,1])&&(r=1,this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize,[r,r,1]));var h=null!=l,m=null!=f;h&&this.variableNames.push("bias"),m&&this.variableNames.push("preluActivationWeights"),this.workPerThread=r,this.transposeA=s,this.transposeB=c,this.addBias=h,this.activation=d,this.hasPreluActivationWeights=m,this.batchAEqualOne=a,this.batchBEqualOne=i,o=u(this.getShapeFit(n[1],n[2],p),3),this.fitAOuter=o[0],this.fitBOuter=o[1],this.fitInner=o[2],this.shaderKey="matMulPacked_".concat(this.workPerThread,"_").concat(s,"_").concat(c,"_").concat(this.activation,"_").concat(this.fitAOuter,"_").concat(this.fitBOuter,"_").concat(this.fitInner,"_").concat(this.outputShape[1]>1,"_").concat(this.batchAEqualOne,"_").concat(this.batchBEqualOne)}return Qe(e,[{key:"getShapeFit",value:function(e,t,n){var r=this.workGroupSize[1]*this.workPerThread,a=this.workGroupSize[0]*this.workPerThread;return this.tileInner=32,1===this.outputShape[1]&&(this.tileInner=4*this.workGroupSize[0]),[e%r===0,t%a===0,n%this.tileInner===0]}},{key:"getUserCode",value:function(){var e,t=this.fitAOuter&&this.fitInner?"return A[batch * batchASize + row * uniforms.aShape[2] + col];":"\n        if(row < uniforms.aShape[1] && col < uniforms.aShape[2]) {\n          return A[batch * batchASize + row * uniforms.aShape[2] + col];\n        }\n        return 0.0;\n         ";e=!1===this.transposeB?"return B[batch * batchBSize + row * uniforms.dimBOuter + col];":"return B[batch * batchBSize + col * uniforms.dimInner + row];";var n="",r="";if(this.activation){var a=O2(this.activation,!1);n=this.hasPreluActivationWeights?"fn activation(a : f32, outCoord : vec3<i32>) -> f32 {\n               let b = getPreluActivationWeightsByOutputCoords(outCoord);\n               ".concat(a,"\n            }"):"\n              fn activation(a : f32, outCoord : vec3<i32>) -> f32 {\n                ".concat(a,"\n              }\n            "),r="value = activation(value, outCoord);"}var i=this.addBias?"value = value + getBiasByOutputCoords(outCoord);":"";return"\n      ".concat(n,"\n\n      fn mm_readA(row : i32, col : i32,  globalId : vec3<u32>) -> f32 {\n        ").concat(this.batchAEqualOne?"\n        let batch = 0;\n        let batchASize = 0;\n        ":"\n        let batch = i32(globalId.z);\n        let batchASize = uniforms.aShape[1] * uniforms.aShape[2];\n        ","\n        ").concat(t,"\n      }\n\n      fn mm_readB(row : i32, col : i32,  globalId : vec3<u32>) -> f32 {\n        ").concat(this.batchBEqualOne?"\n        let batch = 0;\n        let batchBSize = 0;\n        ":"\n        let batch = i32(globalId.z);\n        let batchBSize = uniforms.bShape[1] * uniforms.bShape[2];\n        ","\n        ").concat(e,"\n      }\n\n      fn mm_write(row : i32, col : i32, valueIn : f32, globalId : vec3<u32>) {\n        ").concat(this.fitAOuter&&this.fitBOuter?"":"if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)","\n        {\n        var value = valueIn;\n        let batch = i32(globalId.z);\n        let outCoord = vec3<i32>(batch, row, col);\n        ").concat(i,"\n        ").concat(r,"\n        setOutputAtCoords(batch, row, col, value);\n        }\n      }\n      ").concat(this.outputShape[1]>1?p5([this.workPerThread,this.workPerThread,1],this.workGroupSize,this.transposeA,this.tileInner):function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Fh.assert(1===e[1]&&1===e[2],(function(){return"A linear work group size is required. But got ".concat(e,".")})),"\n    let TileSize = ".concat(4*e[0],";\n    var<workgroup> mm_Asub : array<vec4<f32>, ").concat(e[0],">;\n\n    ").concat(e5(),"\n      let tileCol = i32(localId.x);\n      let globalCol = i32(globalId.x);\n      let globalRow = i32(globalId.y);\n\n      let numTiles = (uniforms.dimInner - 1) / TileSize + 1;\n\n      // Without this initialization strange values show up in acc.\n      var acc = 0.0;\n\n      // Loop over shared dimension.\n      for (var t = 0; t < numTiles; t = t + 1) {\n        // Load one tile of A into local memory.\n        let colA = t * TileSize + tileCol * 4;\n        mm_Asub[tileCol] = vec4<f32>(").concat(h5(t),");\n        workgroupBarrier();\n\n        // Compute acc values for a single thread.\n        for (var k = 0; k < TileSize / 4; k = k + 1) {\n          let rowB = t * TileSize + k * 4;\n          let BCached = vec4<f32>(mm_readB(rowB, globalCol, globalId),\n                              mm_readB(rowB + 1, globalCol, globalId),\n                              mm_readB(rowB + 2, globalCol, globalId),\n                              mm_readB(rowB + 3, globalCol, globalId));\n\n          let ACached = mm_Asub[k];\n          acc = acc + dot(ACached, BCached);\n        }\n\n        workgroupBarrier();\n      }\n\n      mm_write(globalRow, globalCol, acc, globalId);\n    }\n  ")}(this.workGroupSize,this.transposeA),"\n    ")}}]),e}();var v5=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Ye(this,e),this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workGroupSize=[256,1,1],this.outputShape=t,this.dispatchLayout={x:[],y:[1,2],z:[0]},this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize);var c=null!=o,l=null!=u;c&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),this.transposeA=a,this.transposeB=i,this.addBias=c,this.activation=s,this.hasPreluActivationWeights=l,this.batchAEqualOne=n,this.batchBEqualOne=r,this.shaderKey="matMulReduce_".concat(this.activation,"_").concat(a,"_").concat(i,"_").concat(this.batchAEqualOne,"_").concat(this.batchBEqualOne)}return Qe(e,[{key:"getUserCode",value:function(){var e,t;e=!1===this.transposeA?"return f32(A[batch * batchASize + row * uniforms.dimInner + col]);":"return f32(A[batch * batchASize + col * uniforms.dimAOuter + row]);",t=!1===this.transposeB?"return f32(B[batch * batchBSize + row * uniforms.dimBOuter + col]);":"return f32(B[batch * batchBSize + col * uniforms.dimInner + row]);";var n="",r="";if(this.activation){var a=O2(this.activation,!1);n=this.hasPreluActivationWeights?"fn activation(a : f32, outCoord : vec3<i32>) -> f32 {\n               let b = getPreluActivationWeightsByOutputCoords(outCoord);\n               ".concat(a,"\n            }"):"\n              fn activation(a : f32, outCoord : vec3<i32>) -> f32 {\n                ".concat(a,"\n              }\n            "),r="value = activation(value, outCoord);"}var i=this.addBias?"value = value + getBiasByOutputCoords(outCoord);":"";return"\n      ".concat(n,"\n\n      fn mm_readA(batchIn: i32, row : i32, col : i32) -> f32 {\n        ").concat(this.batchAEqualOne?"\n          let batchASize = 0;\n          let batch = 0;\n          ":"\n          let batchASize = uniforms.aShape[1] * uniforms.aShape[2];\n          let batch = batchIn;\n          ","\n        ").concat(e,"\n      }\n\n      fn mm_readB(batchIn: i32, row : i32, col : i32) -> f32 {\n        ").concat(this.batchBEqualOne?"\n          let batch = 0;\n          let batchBSize = 0;\n          ":"\n          let batch = batchIn;\n          let batchBSize = uniforms.bShape[1] * uniforms.bShape[2];\n          ","\n        ").concat(t,"\n      }\n\n      fn mm_write(batch: i32, row : i32, col : i32, valueIn : f32) {\n        var value = valueIn;\n        let outCoord = vec3<i32>(batch, row, col);\n        ").concat(i,"\n        ").concat(r,"\n        setOutputAtCoords(batch, row, col, value);\n      }\n      ").concat("\n    var<workgroup> sumValues : array<f32, workGroupSizeX>;\n    ".concat(e5(),"\n      let coords = getOutputCoords();\n      let batch = coords[0];\n      let row = coords[1];\n      let col = coords[2];\n      var sum = 0.0;\n      let Length = uniforms.dimInner;\n      for (var k = i32(localId.x); k < Length; k = k + i32(workGroupSizeX)) {\n        let dataA = mm_readA(batch, row, k);\n        let dataB = mm_readB(batch, k, col);\n        sum = sum + dataA * dataB;\n      }\n      sumValues[localId.x] = sum;\n      workgroupBarrier();\n\n      for(var currentSize = workGroupSizeX / 2u; currentSize > 1u;\n          currentSize = currentSize / 2u) {\n        if (localId.x < currentSize)\n        {\n          sumValues[localId.x] = sumValues[localId.x] + sumValues[localId.x + currentSize];\n        }\n        workgroupBarrier();\n      }\n\n      if (localId.x == 0u) {\n        sum = sumValues[0] + sumValues[1];\n        mm_write(batch, row, col, sum);\n      }\n    }\n  "),"\n    ")}}]),e}();var g5=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;Ye(this,e),this.variableNames=["A","B"],this.uniforms="dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.workGroupSize=[8,16,1],Fh.assert(t[1]<=16||n[2]<=16,(function(){return"This program can be only used when A width or B Height are small"})),this.outputShape=r,this.dispatchLayout={x:[2],y:[1],z:[0]},this.dispatch=[Math.ceil(r[2]/this.workGroupSize[0]),Math.ceil(2*r[1]/this.workGroupSize[1]),r[0]];var s=null!=a;s&&this.variableNames.push("bias");var u=null!=o;u&&this.variableNames.push("preluActivationWeights"),this.addBias=s,this.activation=i,this.hasPreluActivationWeights=u,this.batchAEqualOne=1===t[0],this.batchBEqualOne=1===n[0],this.shaderKey="matMulSmallOutputSize_".concat(this.activation,"_").concat(this.batchAEqualOne,"_").concat(this.batchBEqualOne)}return Qe(e,[{key:"getUserCode",value:function(){var e="",t="";if(this.activation){var n=O2(this.activation,!1);e=this.hasPreluActivationWeights?"fn activation(a : f32, outCoord : vec3<i32>) -> f32 {\n            let b = getPreluActivationWeightsByOutputCoords(outCoord);\n            ".concat(n,"\n            }"):"fn activation(a : f32, outCoord : vec3<i32>) -> f32 {\n            ".concat(n,"\n        }"),t="value = activation(value, outCoord);"}var r=this.addBias?"value = value + getBiasByOutputCoords(outCoord);":"";return"\n      ".concat(e,"\n\n      fn mm_readA(row : i32, col : i32,  globalId : vec3<u32>) -> f32 {\n        ").concat(this.batchAEqualOne?"\n          let batch = 0;\n          let batchASize = 0;\n          ":"\n          let batchASize = uniforms.aShape[1] * uniforms.aShape[2];\n          let batch = i32(globalId.z);\n          ","\n        ").concat("if (coordsInBounds2D(vec2<i32>(row, col), vec2<i32>(uniforms.dimAOuter, uniforms.dimInner))) {\n          return A[batch * batchASize + row * uniforms.dimInner + col];\n        }\n        return 0.0;","\n      }\n      fn mm_readB(row : i32, col : i32,  globalId : vec3<u32>) -> f32 {\n        ").concat(this.batchBEqualOne?"\n          let batch = 0;\n          let batchBSize = 0;\n          ":"\n          let batch = i32(globalId.z);\n          let batchBSize = uniforms.bShape[1] * uniforms.bShape[2];\n          ","\n        ").concat("if (coordsInBounds2D(vec2<i32>(row, col), vec2<i32>(uniforms.dimInner, uniforms.dimBOuter))) {\n           return B[batch * batchBSize + row * uniforms.dimBOuter + col];\n         }\n         return 0.0;","\n      }\n      fn mm_write(row : i32, col : i32, valueIn : f32, globalId : vec3<u32>) {\n        if (coordsInBounds2D(vec2<i32>(row, col), vec2<i32>(uniforms.dimAOuter, uniforms.dimBOuter))) {\n          let batch = i32(globalId.z);\n          let outCoord = vec3<i32>(batch, row, col);\n          var value = valueIn;\n          ").concat(r,"\n          ").concat(t,"\n          setOutputAtCoords(batch, row, col, value);\n        }\n      }\n      ").concat(function(e){var t=e[1]/2,n=e[0],r=t>n?t:n;return"\n  var<workgroup> mm_Asub1 : array<array<f32, ".concat(r,">, ").concat(t,">;\n  var<workgroup> mm_Bsub1 : array<array<f32, ").concat(n,">, ").concat(r,">;\n  var<workgroup> mm_Asub2 : array<array<f32, ").concat(r,">, ").concat(t,">;\n  var<workgroup> mm_Bsub2 : array<array<f32, ").concat(n,">, ").concat(r,">;\n\n  // If the output size is small for matrix multiplication, avoid to use vec4\n  // and handle some elements per thread to optimally utilize the ALU.\n  // Introduces two shared memory buffers, some logical threads could handle\n  // arithmetic operations and others handle IO operations between barrier api,\n  // makes ALUs and load/store units work simultaneously, could improves\n  // the performance.\n  ").concat(e5(),"\n    let tileRow = i32(localId.y);\n    let tileCol = i32(localId.x);\n    let globalRow = i32(globalId.y);\n    let globalCol = i32(globalId.x);\n\n    // uniforms.dimInner should be greater than 0.\n    let numTiles = (uniforms.dimInner - 1) / ").concat(r," + 1;\n    var acc = 0.0;\n\n    var globalColA = tileCol;\n    var globalRowB = tileRow;\n    for (var t = 0; t < numTiles; t = t + 1) {\n      if (t == 0) {\n        if (tileRow < ").concat(t,") {\n          // Load one tile of A and B into local memory.\n          // globalRow is always greater than or equal tileRow.\n          mm_Asub1[tileRow][tileCol] =\n              mm_readA((globalRow - tileRow) / 2 + tileRow, globalColA, globalId);\n          globalColA = globalColA + ").concat(r,";\n          mm_Bsub1[tileRow][tileCol] = mm_readB(globalRowB, globalCol, globalId);\n          globalRowB = globalRowB + ").concat(r,";\n        }\n      } else {\n        if (tileRow < ").concat(t,") {\n          // Load one tile of A and B into local memory.\n          // globalRow is always greater than or equal tileRow.\n          mm_Asub1[tileRow][tileCol] =\n              mm_readA((globalRow - tileRow) / 2 + tileRow, globalColA, globalId);\n          globalColA = globalColA + ").concat(r,";\n          mm_Bsub1[tileRow][tileCol] = mm_readB(globalRowB, globalCol, globalId);\n          globalRowB = globalRowB + ").concat(r,";\n        } else {\n          // Compute acc values for a single thread.\n          for (var k = 0; k < ").concat(r,"; k = k + 1) {\n            let subRow = tileRow - ").concat(t,";\n            if (subRow < 0) {\n              continue;\n            }\n            acc = acc + mm_Asub2[subRow][k] * mm_Bsub2[k][tileCol];\n          }\n        }\n      }\n      workgroupBarrier();\n      if (t != 0) {\n        t = t + 1;\n      }\n\n      if (t < numTiles) {\n        if (tileRow < ").concat(t,") {\n          // Load one tile of A and B into local memory.\n          // globalRow is always greater than or equal tileRow.\n          mm_Asub2[tileRow][tileCol] =\n              mm_readA((globalRow - tileRow) / 2 + tileRow, globalColA, globalId);\n          globalColA = globalColA + ").concat(r,";\n          mm_Bsub2[tileRow][tileCol] = mm_readB(globalRowB, globalCol, globalId);\n          globalRowB = globalRowB + ").concat(r,";\n        } else {\n          // Compute acc values for a single thread.\n          for (var k = 0; k < ").concat(r,"; k = k + 1) {\n            let subRow = tileRow - ").concat(t,";\n            if (subRow < 0) {\n              continue;\n            }\n            acc = acc + mm_Asub1[subRow][k] * mm_Bsub1[k][tileCol];\n          }\n        }\n      }\n      workgroupBarrier();\n    }\n    let writeCol = (globalRow - tileRow) / 2 + tileRow - ").concat(t,";\n    if (tileRow >= ").concat(t," && writeCol >= 0) {\n      mm_write(writeCol, globalCol, acc, globalId);\n    }\n  }\n  ")}(this.workGroupSize),"\n    ")}}]),e}();function y5(e){var t=e.inputs,n=e.attrs,r=t.x,a=n.shape,i=Fh.sizeFromShape(r.shape),o=Fh.inferFromImplicitShape(a,i),s=Fh.sizeFromShape(o);return Fh.assert(i===s,(function(){return"The new shape (".concat(o,") has ").concat(s," elements and the old shape (").concat(r.shape,") has ").concat(i," elements. The new shape and old shape must have the same number of elements.")})),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:o,dtype:r.dtype}}var b5={kernelName:kp,backendName:"webgpu",kernelFunc:y5};function x5(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,f=e.activation,p=void 0===f?null:f,h=t.shape.length,m=n.shape.length,v=r?t.shape[h-2]:t.shape[h-1],g=a?n.shape[m-1]:n.shape[m-2],y=r?t.shape[h-1]:t.shape[h-2],b=a?n.shape[m-2]:n.shape[m-1],x=t.shape.slice(0,-2),A=n.shape.slice(0,-2),k=Fh.sizeFromShape(x),w=Fh.sizeFromShape(A),S=py.assertAndGetBroadcastShape(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([y,b]);Fh.assert(v===g,(function(){return"Error in matMul: inner shapes (".concat(v,") and (").concat(g,") of Tensors with shapes ").concat(t.shape," and ").concat(n.shape," and transposeA=").concat(r," and transposeB=").concat(a," must match.")}));var I,E=r?[k,v,y]:[k,y,v],C=a?[w,b,g]:[w,g,b],N=y5({inputs:{x:t},backend:i,attrs:{shape:E}}),T=y5({inputs:{x:n},backend:i,attrs:{shape:C}}),_=[N,T],R=Math.max(k,w),M=1===k,O=1===w,F=(v%4===0&&!r||y%4===0&&r)&&b%4===0&&!a;I=y*b<=32?new v5([R,y,b],M,O,r,a,s,p,c):r||a||!(y<=16&&(b<=512||g>=2*b)||b<=16&&(y<=512||v>=2*y))?F?new X2(E,[R,y,b],M,O,r,s,p,c):new m5(E,[R,y,b],id().get("WEBGPU_MATMUL_WORK_PER_THREAD"),M,O,r,a,s,p,c):new g5(E,C,[R,y,b],s,p,c);var P=[N,T];s&&P.push(s),c&&P.push(c);var D=[{type:"int32",data:[y]},{type:"int32",data:[b]},{type:"int32",data:[v]}];"leakyrelu"===p&&(D.push({type:"float32",data:[d]}),I.uniforms+=" alpha : f32,");var L=i.runWebGPUProgram(I,P,t.dtype,D),z=y5({inputs:{x:L},backend:i,attrs:{shape:S}});_.push(L);for(var B=0,W=_;B<W.length;B++){var j=W[B];i.disposeData(j.dataId)}return z}var A5={kernelName:yh,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return x5({a:a,b:i,transposeA:u,transposeB:c,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},k5=function(){function e(t,n,r){Ye(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.workGroupSize=[128,1,1],this.size=!0,this.outputShape=sI.assertAndGetBroadcastShape(n,r),this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="binaryOpComplex_".concat(t),this.op=t}return Qe(e,[{key:"getUserCode",value:function(){return"\n      fn binaryOpComplex(\n          areal : f32, aimag : f32, breal : f32, bimag : f32) -> f32 {\n        ".concat(R2(this.op,!1),"\n      }\n\n      ").concat($2(),"\n        if(index < uniforms.size) {\n          let areal = getARealByOutputIndex(index);\n          let aimag = getAImagByOutputIndex(index);\n          let breal = getBRealByOutputIndex(index);\n          let bimag = getBImagByOutputIndex(index);\n          setOutputAtIndex(index, binaryOpComplex(areal, aimag, breal, bimag));\n        }\n      }\n    ")}}]),e}(),w5=function(){function e(t,n,r,a){Ye(this,e),this.variableNames=["A","B"],this.size=!0;this.workGroupSize=[256,1,1],this.outputShape=sI.assertAndGetBroadcastShape(n,r),this.dispatchLayout=j2(this.outputShape),this.lastDimensionSize=a?r[0]:n[0],this.lastDimensionSize<256?this.workPerThread=1:this.lastDimensionSize<512?this.workPerThread=2:this.workPerThread=4,this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize,[this.workPerThread,1,1]),this.useSharedMemoryWithB=a,this.op=t,this.shaderKey="binaryShared_".concat(t,"_").concat(this.lastDimensionSize,"_").concat(this.useSharedMemoryWithB)}return Qe(e,[{key:"getUserCode",value:function(){var e=this.lastDimensionSize>1?"coords[".concat(this.outputShape.length-1,"]"):"0",t=this.useSharedMemoryWithB?"let a = getAByOutputCoords(coords);\n         let b = sharedBuf[".concat(e,"];"):"let a = sharedBuf[".concat(e,"];\n         let b = getBByOutputCoords(coords);");return"\n        fn binaryOperation(a : f32, b : f32) -> f32 {\n          ".concat(R2(this.op,!1),"\n        }\n        var<workgroup> sharedBuf : array<f32, ").concat(this.lastDimensionSize,">;\n        ").concat($2(),"\n\n          // Fill in the shared memory buffer. Here we need a loop to make sure\n          // that all data in A|B are uploaded when |sharedMemorySize| is larger\n          // than work group size.\n          for(var localIndex = i32(localId.x); localIndex < ").concat(this.lastDimensionSize,"; localIndex = localIndex + ").concat(this.workGroupSize[0],") {\n            sharedBuf[localIndex] = f32(").concat(this.useSharedMemoryWithB?"B":"A","[localIndex]);\n          }\n          workgroupBarrier();\n\n          for(var i = 0; i < ").concat(this.workPerThread,"; i = i + 1) {\n            let flatIndex = index * ").concat(this.workPerThread," + i;\n            if(flatIndex < uniforms.size) {\n              let coords = getCoordsFromIndex(flatIndex);\n\n              ").concat(t,"\n              setOutputAtIndex(flatIndex, binaryOperation(a, b));\n            }\n          }\n        }\n        ")}}]),e}(),S5=function(){function e(t,n,r){Ye(this,e),this.variableNames=["A","B"],this.workPerThread=4,this.isVec4=!0,this.size=!0;this.workGroupSize=[128,1,1],this.outputShape=sI.assertAndGetBroadcastShape(n,r),this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize,[this.workPerThread,1,1]),this.op=t,this.shaderKey="binaryVec4_".concat(t)}return Qe(e,[{key:"getUserCode",value:function(){return"\n      fn binaryOperation(a : vec4<f32>, b : vec4<f32>) -> vec4<f32> {\n        ".concat(R2(this.op,this.isVec4),"\n      }\n      ").concat($2(),"\n        if (index < uniforms.size) {\n          let a = getAByOutputIndex(index);\n          let b = getBByOutputIndex(index);\n          setOutputAtIndex(index, binaryOperation(a, b));\n        }\n      }\n    ")}}]),e}(),I5=function(){function e(t,n,r){Ye(this,e),this.variableNames=["A","B"],this.size=!0;this.workGroupSize=[128,1,1],this.outputShape=sI.assertAndGetBroadcastShape(n,r),this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="binary_".concat(t),this.op=t}return Qe(e,[{key:"getUserCode",value:function(){return"\n      fn binaryOperation(a : f32, b : f32) -> f32 {\n        ".concat(R2(this.op,!1),"\n      }\n      ").concat($2(),"\n        if (index < uniforms.size) {\n          let a = getAByOutputIndex(index);\n          let b = getBByOutputIndex(index);\n          setOutputAtIndex(index, binaryOperation(a, b));\n        }\n      }\n      ")}}]),e}();function E5(e,t,n){if(Fh.arraysEqual(t,n)&&Fh.sizeFromShape(t)%4===0)return new S5(e,t,n);var r=1===t.length&&n.length>1&&t[0]<1024,a=1===n.length&&t.length>1&&n[0]<1024;return r||a?new w5(e,t,n,a):new I5(e,t,n)}function C5(e){var t=e.inputs.x;return e.backend.incRef(t.dataId),{dataId:t.dataId,shape:t.shape,dtype:t.dtype}}var N5={kernelName:If,backendName:"webgpu",kernelFunc:C5};function T5(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.tensorMap.get(i.dataId),s=C5({inputs:{x:r},backend:n}),u=C5({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var _5={kernelName:Dd,backendName:"webgpu",kernelFunc:T5},R5=function(){function e(t,n){Ye(this,e),this.variableNames=["A"],this.size=!0;this.workGroupSize=[128,1,1],this.outputShape=t,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.op=n,this.shaderKey="unary_".concat(n)}return Qe(e,[{key:"getUserCode",value:function(){return"\n      fn unaryOperation(a : f32) -> f32 {\n        ".concat(M2(this.op,!1),"\n      }\n      ").concat($2(),"\n        if (index < uniforms.size) {\n          let a = getAByOutputIndex(index);\n          setOutputAtIndex(index, unaryOperation(a));\n        }\n      }\n      ")}}]),e}();function M5(e){var t=e.opType,n=e.cpuKernelImpl,r=e.dtype;return function(e){var a=e.inputs,i=e.backend,o=a.x,s=i,u=r||o.dtype;if(s.shouldExecuteOnCPU([o])&&null!=n){var c=s.tensorMap.get(o.dataId),l=n(c.values,u);return s.makeTensorInfo(o.shape,u,l)}var d=new R5(o.shape,t);return s.runWebGPUProgram(d,[o],u)}}function O5(e){var t=e.opSnippet,n=e.cpuKernelImpl,r=e.supportsComplex,a=void 0!==r&&r,i=e.dtype;return function(e){var r=e.inputs,o=e.backend,s=r.a,c=r.b,l=o;if(a&&"complex64"===s.dtype){var d,f,p=l.tensorMap.get(s.dataId),h=l.tensorMap.get(c.dataId);if(0!==t){var m=[[p.complexTensorInfos.real,h.complexTensorInfos.real],[p.complexTensorInfos.imag,h.complexTensorInfos.imag]].map((function(e){var n=u(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:s.shape},o={dataId:a.dataId,dtype:a.dtype,shape:c.shape},d=E5(t,s.shape,c.shape);return l.runWebGPUProgram(d,[i,o],Im(r.dtype,a.dtype))})),v=u(m,2);d=v[0],f=v[1]}else{var g=new k5(17,s.shape,c.shape),y=new k5(18,s.shape,c.shape),b=[{dataId:p.complexTensorInfos.real.dataId,dtype:p.complexTensorInfos.real.dtype,shape:s.shape},{dataId:p.complexTensorInfos.imag.dataId,dtype:p.complexTensorInfos.imag.dtype,shape:s.shape},{dataId:h.complexTensorInfos.real.dataId,dtype:h.complexTensorInfos.real.dtype,shape:c.shape},{dataId:h.complexTensorInfos.imag.dataId,dtype:h.complexTensorInfos.imag.dtype,shape:c.shape}];d=l.runWebGPUProgram(g,b,"float32"),f=l.runWebGPUProgram(y,b,"float32")}var x=T5({inputs:{real:d,imag:f},backend:l});return l.disposeData(d.dataId),l.disposeData(f.dataId),x}var A=i||Im(s.dtype,c.dtype);if(("string"===s.dtype||"string"===c.dtype||l.shouldExecuteOnCPU([s,c]))&&null!=n){var k=l.tensorMap.get(s.dataId).values,w=l.tensorMap.get(c.dataId).values,S="string"===s.dtype?sI.fromUint8ToStringArray(k):k,I="string"===s.dtype?sI.fromUint8ToStringArray(w):w,E=u(n(s.shape,c.shape,S,I,A),2),C=E[0],N=E[1];return l.makeTensorInfo(N,A,C)}var T=E5(t,s.shape,c.shape);return l.runWebGPUProgram(T,[s,c],A)}}var F5=$B.addImpl,P5=$B.ceilImpl,D5=$B.concatImpl,L5=$B.equalImpl,z5=$B.expImpl,B5=$B.expm1Impl,W5=$B.floorImpl,j5=$B.gatherNdImpl,V5=$B.gatherV2Impl,U5=$B.greaterEqualImpl,H5=$B.greaterImpl,G5=$B.lessEqualImpl,q5=$B.lessImpl,K5=$B.logImpl,X5=$B.maxImpl,Z5=$B.maximumImpl,Y5=$B.minimumImpl,J5=$B.multiplyImpl,Q5=$B.negImpl,$5=$B.notEqualImpl,e3=$B.prodImpl,t3=$B.rangeImpl,n3=$B.rsqrtImpl,r3=$B.scatterImpl,a3=$B.simpleAbsImpl,i3=$B.sliceImpl,o3=$B.stridedSliceImpl,s3=$B.stringNGramsImpl,u3=$B.subImpl,c3=$B.tileImpl,l3=$B.topKImpl,d3=$B.transposeImpl,f3=($B.uniqueImpl,M5({opType:0,cpuKernelImpl:a3})),p3={kernelName:ld,backendName:"webgpu",kernelFunc:f3},h3=O5({opSnippet:1,cpuKernelImpl:F5,supportsComplex:!0}),m3={kernelName:pd,backendName:"webgpu",kernelFunc:h3},v3=function(){function e(t){Ye(this,e),this.workPerThread=4,this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=t[0],this.variableNames=t.map((function(e,t){return"T".concat(t)})),this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize,[this.workPerThread,1,1]),this.shaderKey="addN"}return Qe(e,[{key:"getUserCode",value:function(){var e=[];this.variableNames.forEach((function(t){e.push("let v".concat(t," = get").concat(t,"ByOutputCoords(coords);"))}));var t=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");return"\n      ".concat($2(),"\n        for (var i = 0; i < ").concat(this.workPerThread,"; i = i + 1) {\n          let flatIndex = index * ").concat(this.workPerThread," + i;\n          if (flatIndex < uniforms.size) {\n            let coords = getCoordsFromIndex(flatIndex);\n            ").concat(e.join("\n        "),"\n            setOutputAtIndex(flatIndex, ").concat(t,");\n          }\n        }\n      }\n    ")}}]),e}();var g3={kernelName:hd,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t;if(1===r.length)return C5({inputs:{x:r[0]},backend:n});var a=r.map((function(e){return e.dtype})).reduce((function(e,t){return Im(e,t)})),i=r.map((function(e){return e.shape})),o=new v3(i);return n.runWebGPUProgram(o,r,a)}},y3=function(){function e(t,n,r){Ye(this,e),this.workGroupSize=[64,1,1],this.variableNames=["x"],this.uniforms="infinityValue : f32,",this.size=!0;var a=[n];sI.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.length),this.op="min"===r?"<":">";var i=u(sI.computeOutAndReduceShapes(t,a),1)[0];this.outputShape=0===i.length?[1]:i,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,[1,1,1]),this.inputShape=t,this.shaderKey="argMinMax".concat(this.op)}return Qe(e,[{key:"getUserCode",value:function(){var e=this,t="\n      var<workgroup> xBestIndices : array<i32, ".concat(this.workGroupSize[0],">;\n      var<workgroup> xBestValues : array<f32, ").concat(this.workGroupSize[0],">;\n    ");return"\n      fn DIV_CEIL(a : u32, b : u32) -> u32 {\n        return ((a - 1u) / b + 1u);\n      }\n\n      ".concat(t,"\n\n      ").concat($2(),"\n        let outputIndex = index / i32(workGroupSizeX);\n        let reduceLength = ").concat(1===e.inputShape.length?"uniforms.xShape":"uniforms.xShape.".concat(Q2(e.inputShape.length-1)),";\n\n        var bestIndex = i32(localId.x);\n        var bestValue = uniforms.infinityValue;\n        let outputCoords = getCoordsFromIndex(outputIndex);\n        for (var k = i32(localId.x); k < reduceLength && outputIndex < uniforms.size;\n            k = k + i32(workGroupSizeX)) {\n          let candidate = getX(").concat(function(){var t="";if(1===e.outputShape.length)1!==e.inputShape.length&&(t+="outputCoords,");else for(var n=0;n<e.outputShape.length;n++)t+="outputCoords.".concat(Q2(n),",");return t}()," k);\n          if (!isnan(candidate) && candidate ").concat(this.op," bestValue) {\n            bestValue = candidate;\n            bestIndex = k;\n          }\n        }\n        xBestValues[localId.x] = bestValue;\n        xBestIndices[localId.x] = bestIndex;\n        workgroupBarrier();\n\n        var reduceSize = min(u32(reduceLength), workGroupSizeX);\n        for (var currentSize = reduceSize / 2u; reduceSize > 1u;\n            currentSize = reduceSize / 2u) {\n          let interval = DIV_CEIL(reduceSize, 2u);\n          if (localId.x < currentSize) {\n            let candidate = xBestValues[localId.x + interval];\n            if (candidate ").concat(this.op," bestValue) {\n              bestValue = candidate;\n              xBestValues[localId.x] = bestValue;\n              xBestIndices[localId.x] = xBestIndices[localId.x + interval];\n            }\n          }\n          reduceSize = interval;\n          workgroupBarrier();\n        }\n\n        if (localId.x == 0u && outputIndex < uniforms.size) {\n          setOutputAtIndexI32(outputIndex, xBestIndices[localId.x]);\n        }\n      }\n    ")}}]),e}(),b3=function(){function e(t,n){Ye(this,e),this.variableNames=["A"],this.workGroupSize=[16,16,1];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.dispatchLayout={x:[0],y:[1]},this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize,[1,1,1]),this.shaderKey="transposeShared"}return Qe(e,[{key:"getUserCode",value:function(){return"\n      let TILE_DIM = ".concat(this.workGroupSize[0],";\n      var<workgroup> tile : array<array<f32, ").concat(this.workGroupSize[0]+1,">, ").concat(this.workGroupSize[0],">;\n      ").concat("\n  @stage(compute) @workgroup_size(workGroupSizeX, workGroupSizeY, workGroupSizeZ)\n","\n      fn main(@builtin(local_invocation_id) localId : vec3<u32>,\n              @builtin(workgroup_id) workgroupId : vec3<u32>) {\n        var x = i32(workgroupId.x) * TILE_DIM + i32(localId.x);\n        var y = i32(workgroupId.y) * TILE_DIM + i32(localId.y);\n        let width = uniforms.outShape[0];\n        let height = uniforms.outShape[1];\n        if (x < width && y < height) {\n          tile[localId.y][localId.x] = A[y * width + x];\n        }\n        workgroupBarrier();\n\n        x = i32(workgroupId.y) * TILE_DIM + i32(localId.x);\n        y = i32(workgroupId.x) * TILE_DIM + i32(localId.y);\n        if (x < height && y < width) {\n          setOutputAtIndex((y * height + x), tile[localId.x]\n            [localId.y]);\n        }\n      }\n    ")}}]),e}(),x3=function(){function e(t,n){Ye(this,e),this.variableNames=["A"],this.workPerThread=4,this.workGroupSize=[64,1,1],this.size=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize,[this.workPerThread,1,1]),this.newDim=n,this.shaderKey="transpose_".concat(n)}return Qe(e,[{key:"getUserCode",value:function(){var e=J2(this.outputShape.length),t=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=new Array(t),r=0;r<e.length;r++)n[e[r]]="resRC.".concat(Q2(r));return n.join()}(this.newDim);return"\n      ".concat($2(),"\n\n        for(var i = 0; i < ").concat(this.workPerThread,"; i = i + 1) {\n          let flatIndex = index * ").concat(this.workPerThread," + i;\n          if(flatIndex < uniforms.size) {\n            let resRC = getCoordsFromIndex(flatIndex);\n            setOutputAtIndex(flatIndex, A[getIndexFromCoords").concat(this.outputShape.length,"D(\n              ").concat(e,"(").concat(t,"), uniforms.aShape)]);\n          }\n        }\n      }\n    ")}}]),e}();function A3(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.perm,o=n,s=a.shape.length,u=new Array(s),c=0;c<u.length;c++)u[c]=a.shape[i[c]];if(n.shouldExecuteOnCPU([a])){var l=o.tensorMap.get(a.dataId).values,d=d3(l,a.shape,a.dtype,i,u);return n.makeTensorInfo(u,a.dtype,d)}if(2===a.shape.length&&Fh.arraysEqual(i,[1,0])){var f=new b3(a.shape,i);return o.runWebGPUProgram(f,[a],a.dtype)}var p=new x3(a.shape,i);return o.runWebGPUProgram(p,[a],a.dtype)}var k3={kernelName:ch,backendName:"webgpu",kernelFunc:A3};var w3={kernelName:gd,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=Fh.parseAxisParam(i,a.shape),s=sI.getAxesPermutation(o,a.shape.length),u=a,c=[];null!=s&&(u=A3({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),o=sI.getInnerMostAxes(o.length,u.shape.length)),sI.assertAxesAreInnerMostDims("argMax",[o[0]],u.shape.length);var l=new y3(u.shape,o[0],"max"),d=[{type:"float32",data:[Number.NEGATIVE_INFINITY]}],f=n.runWebGPUProgram(l,[u],"int32",d);return c.forEach((function(e){return n.disposeData(e.dataId)})),f}};var S3={kernelName:yd,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=Fh.parseAxisParam(i,a.shape),s=sI.getAxesPermutation(o,a.shape.length),u=a,c=[];null!=s&&(u=A3({inputs:{x:a},backend:n,attrs:{perm:s}}),c.push(u),o=sI.getInnerMostAxes(o.length,u.shape.length)),sI.assertAxesAreInnerMostDims("argMin",[o[0]],u.shape.length);var l=new y3(u.shape,o[0],"min"),d=[{type:"float32",data:[Number.POSITIVE_INFINITY]}],f=n.runWebGPUProgram(l,[u],"int32",d);return c.forEach((function(e){return n.disposeData(e.dataId)})),f}},I3=function(){function e(t,n){Ye(this,e),this.variableNames=["x"],this.uniforms="stride : vec2<i32>, pad : vec2<i32>, dilation : vec2<i32>, convDims : vec2<i32>, filterDims : vec2<i32>,",this.workGroupSize=[128,1,1],this.size=!0,this.outputShape=t.outShape,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="pool2D_".concat(n),this.poolType=n}return Qe(e,[{key:"getUserCode",value:function(){var e="resultValue = max(value, resultValue);";"avg"===this.poolType&&(e="resultValue = resultValue + value; count = count + 1.0;");var t="resultValue";return"avg"===this.poolType&&(t="resultValue / count"),"\n      ".concat($2(),"\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n          let batch = coords[0];\n          let xRCCorner = vec2<i32>(coords.yz) * uniforms.stride - uniforms.pad;\n          let xRCorner = xRCCorner.x;\n          let xCCorner = xRCCorner.y;\n\n          var resultValue = ").concat("avg"===this.poolType?"0.0":"-1.0 / pow(10.0, -20.0)",";\n          var count = 0.0;\n\n          for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + uniforms.dilation.x) {\n            let xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= uniforms.convDims.x) {\n              continue;\n            }\n\n            for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + uniforms.dilation.y) {\n              let xC = xCCorner + wC;\n              if (xC < 0 || xC >= uniforms.convDims.y) {\n                continue;\n              }\n\n              let value = getX(batch, xR, xC, coords[3]);\n              ").concat(e,"\n            }\n          }\n\n          setOutputAtIndex(index, ").concat(t,");\n        }\n      }\n    ")}}]),e}(),E3=function(){function e(t){Ye(this,e),this.variableNames=["x"],this.uniforms="stride : vec2<i32>,",this.workGroupSize=[256,1,1],this.size=!0,this.outputShape=t.outShape,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="poolWithFilterSizeEqualsOne"}return Qe(e,[{key:"getUserCode",value:function(){return"\n      ".concat($2(),"\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let batch = coords[0];\n          let d = coords[3];\n\n          let xRCCorner = coords.yz * uniforms.stride;\n          let xRCorner = xRCCorner.x;\n          let xCCorner = xRCCorner.y;\n\n          let value = getX(batch, xRCorner, xCCorner, d);\n          setOutputAtIndex(index, value);\n        }\n      }\n    ")}}]),e}();var C3={kernelName:Sd,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=sI.computePool2DInfo(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&Fh.arraysEqual(c.inShape,c.outShape))return C5({inputs:{x:a},backend:n});var l,d=[{type:"int32",data:[c.strideHeight,c.strideWidth]}];return 1===c.filterHeight&&1===c.filterWidth?l=new E3(c):(l=new I3(c,"avg"),d.push({type:"int32",data:[c.padInfo.top,c.padInfo.left]},{type:"int32",data:[c.dilationHeight,c.dilationWidth]},{type:"int32",data:[c.inHeight,c.inWidth]},{type:"int32",data:[c.effectiveFilterHeight,c.effectiveFilterWidth]})),n.runWebGPUProgram(l,[a],a.dtype,d)}};var N3={kernelName:Nd,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return x5({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},T3=function(){function e(t,n){Ye(this,e),this.variableNames=["source"],this.workPerThread=1,this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=n,this.rank=n.length,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize,[this.workPerThread,1,1]),this.start=t,this.uniforms="start : ".concat(J2(t.length),", "),this.shaderKey="slice"}return Qe(e,[{key:"getUserCode",value:function(){var e,t=J2(this.rank),n=function(e){if(1===e)return"sourceLoc";if(e<=6)return _3.slice(0,e).map((function(e){return"sourceLoc.".concat(e)})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank);return e=1===this.start.length?this.outputShape.map((function(e,t){return"sourceLoc = uniforms.start + coords;"})):this.outputShape.map((function(e,t){return"sourceLoc.".concat(_3[t]," = uniforms.start[").concat(t,"] + coords.").concat(_3[t],";")})),"\n      ".concat($2(),"\n        if (index < uniforms.size) {\n          var sourceLoc : ").concat(t,";\n          let coords = getCoordsFromIndex(index);\n          ").concat(e.join("\n"),"\n          setOutputAtIndex(index, getSource(").concat(n,"));\n        }\n      }\n    ")}}]),e}(),_3=["x","y","z","w","u","v"];function R3(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size,s=u(Oy.parseSliceParams(a,i,o),2),c=s[0],l=s[1];if(Oy.assertParamsValid(a,c,l),n.shouldExecuteOnCPU([a])||"string"===a.dtype){var d=n.tensorMap.get(a.dataId),f=i3(d.values,c,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,f)}if(0===Fh.sizeFromShape(l))return n.makeTensorInfo(l,a.dtype,[]);var p=new T3(c,l),h=[{type:"int32",data:c}];return n.runWebGPUProgram(p,[a],a.dtype,h)}var M3={kernelName:Pp,backendName:"webgpu",kernelFunc:R3},O3={kernelName:Td,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;Fh.assert(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGPU backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=sI.getReshaped(a.shape,i,s),c=sI.getPermuted(u.length,i.length),l=sI.getReshapedPermuted(a.shape,i,s),d=sI.getSliceBeginCoords(o,i.length),f=sI.getSliceSize(l,o,i.length),p=[],h=y5({inputs:{x:a},backend:n,attrs:{shape:u}}),m=A3({inputs:{x:h},backend:n,attrs:{perm:c}}),v=y5({inputs:{x:m},backend:n,attrs:{shape:l}}),g=R3({inputs:{x:v},backend:n,attrs:{begin:d,size:f}});return p.push(h),p.push(m),p.push(v),p.forEach((function(e){return n.disposeData(e.dataId)})),g}},F3=O5({opSnippet:10,dtype:"bool",cpuKernelImpl:$5}),P3={kernelName:op,backendName:"webgpu",kernelFunc:F3};function D3(e){var t=e.inputs,n=e.backend,r=t.input;return C5({inputs:{x:n.tensorMap.get(r.dataId).complexTensorInfos.real},backend:n})}var L3={kernelName:bp,backendName:"webgpu",kernelFunc:D3};var z3={kernelName:Od,backendName:"webgpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return C5({inputs:{x:i},backend:r});var s=XA(i.shape),u=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),c=T5({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeData(u.dataId),c}if("complex64"===i.dtype){var l=D3({inputs:{input:i},backend:r}),d=e({inputs:{x:l},backend:r,attrs:{dtype:o}});return r.disposeData(l.dataId),d}if(!Fh.hasEncodingLoss(i.dtype,o)){var f=C5({inputs:{x:i},backend:r});return{dataId:f.dataId,shape:f.shape,dtype:o}}if("int32"===o)return function(e,t){var n=new R5(e.shape,22),r=t.runWebGPUProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var p=r.makeTensorInfo([],"bool",Fh.getTypedArrayFromDType("bool",1)),h=F3({inputs:{a:i,b:p},backend:r});return r.disposeData(p.dataId),h}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},B3=M5({opType:1,cpuKernelImpl:P5}),W3={kernelName:Fd,backendName:"webgpu",kernelFunc:B3},j3=function(){function e(t){Ye(this,e),this.variableNames=["A"],this.uniforms="minVal : f32, maxVal : f32,",this.workPerThread=4,this.workGroupSize=[64,1,1],this.isVec4=!0,this.size=!0,this.outputShape=t,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize,[this.workPerThread,1,1]),this.shaderKey="clipVec4"}return Qe(e,[{key:"getUserCode",value:function(){return"\n      ".concat($2(),"\n        if(index < uniforms.size) {\n          let value = getAByOutputIndex(index);\n          var clampedValue : vec4<f32>;\n          for (var i = 0; i < 4; i = i + 1) {\n            if (isnan(value[i])) {\n              clampedValue[i] = value[i];\n            } else {\n              clampedValue[i] = clamp(value[i], uniforms.minVal, uniforms.maxVal);\n            }\n          }\n\n          setOutputAtIndex(index, clampedValue);\n        }\n      }\n    ")}}]),e}(),V3=function(){function e(t){Ye(this,e),this.variableNames=["A"],this.uniforms="minVal : f32, maxVal : f32,",this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="clip"}return Qe(e,[{key:"getUserCode",value:function(){return"\n      ".concat($2(),"\n        if(index < uniforms.size) {\n          let value = getAByOutputIndex(index);\n          if (isnan(value)) {\n            setOutputAtIndex(index, value);\n            return;\n          }\n          setOutputAtIndex(index, clamp(value, uniforms.minVal, uniforms.maxVal));\n        }\n      }\n    ")}}]),e}();var U3={kernelName:Pd,backendName:"webgpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=[{type:"float32",data:[a.clipValueMin]},{type:"float32",data:[a.clipValueMax]}];return t=Fh.sizeFromShape(i.shape)%4===0?new j3(i.shape):new V3(i.shape),r.runWebGPUProgram(t,[i],i.dtype,o)}},H3=function(){function e(t){Ye(this,e),this.uniforms="",this.workPerThread=4,this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=sI.computeOutShape(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)})),this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize,[this.workPerThread,1,1]),this.offsetLength=t.length-1;for(var n=0;n<this.offsetLength;n++)this.uniforms+="offset".concat(n," : i32,");this.shaderKey="concat"}return Qe(e,[{key:"getUserCode",value:function(){var e=[];if(this.offsetLength>0){e.push("if (yC < uniforms.offset0){ setOutputAtCoords(coords.x, coords.y, getT0(yR, yC)); }");for(var t=1;t<this.offsetLength;t++)e.push("else if (yC < uniforms.offset".concat([t],"){ setOutputAtCoords(coords.x, coords.y, getT").concat(t,"(yR, yC - uniforms.offset").concat(t-1,")); }"));var n=this.offsetLength,r=this.offsetLength-1;e.push("else { setOutputAtCoords(coords.x, coords.y, getT".concat(n,"(yR, yC - uniforms.offset").concat(r,")); }"))}else e.push("setOutputAtCoords(coords.x, coords.y, getT0(yR, yC));");return"\n      ".concat($2(),"\n        for(var i = 0; i < ").concat(this.workPerThread,"; i = i + 1) {\n          let flatIndex = index * ").concat(this.workPerThread," + i;\n          if(flatIndex < uniforms.size) {\n            let coords = getCoordsFromIndex(flatIndex);\n            let yR = coords.x;\n            let yC = coords.y;\n\n            ").concat(e.join("\n        "),"\n          }\n        }\n      }\n    ")}}]),e}();function G3(e){var t=e.inputs,n=e.backend,r=t.input;return C5({inputs:{x:n.tensorMap.get(r.dataId).complexTensorInfos.imag},backend:n})}var q3={kernelName:Cf,backendName:"webgpu",kernelFunc:G3};function K3(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return D3({inputs:{input:e},backend:n})})),i=e.map((function(e){return G3({inputs:{input:e},backend:n})})),o=K3(a,t,n),s=K3(i,t,n),u=T5({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeData(e.dataId)})),i.forEach((function(e){return n.disposeData(e.dataId)})),n.disposeData(o.dataId),n.disposeData(s.dataId),u}var c=n.shouldExecuteOnCPU(e);if("string"===r&&(c=!0),c){var l=e.map((function(e){var r=Fh.sizeFromShape(e.shape.slice(t));return y5({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),d=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),f=sI.computeOutShape(l.map((function(e){return e.shape})),1),p=1===l[0].shape[0],h=D5(d,f,r,p),m=sI.computeOutShape(e.map((function(e){return e.shape})),t),v=n.makeTensorInfo(m,r,h);return l.forEach((function(e){return n.disposeData(e.dataId)})),v}var g=function(e,t,n){var r=sI.computeOutShape(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return y5({inputs:{x:e},backend:n,attrs:{shape:[Fh.sizeFromShape(e.shape.slice(0,t)),Fh.sizeFromShape(e.shape.slice(t))]}})})),outShape:r}}(e,t,n),y=g.tensors2D,b=g.outShape,x=y.map((function(e){return e.shape})),A=new H3(x),k=[],w=new Array(x.length-1);if(w.length>0){w[0]=x[0][1],k.push({type:"int32",data:[w[0]]});for(a=1;a<w.length;a++)w[a]=w[a-1]+x[a][1],k.push({type:"int32",data:[w[a]]})}var S=n.runWebGPUProgram(A,y,y[0].dtype,k);y.forEach((function(e){return n.disposeData(e.dataId)}));var I=y5({inputs:{x:S},backend:n,attrs:{shape:b}});return n.disposeData(S.dataId),I}function X3(e){var t=e.inputs,n=e.backend,r=e.attrs.axis,a=Fh.parseAxisParam(r,t[0].shape)[0],i=sI.computeOutShape(t.map((function(e){return e.shape})),a);if(0===Fh.sizeFromShape(i))return n.makeTensorInfo(i,t[0].dtype,[]);var o=t.filter((function(e){return Fh.sizeFromShape(e.shape)>0}));if(1===o.length)return C5({inputs:{x:o[0]},backend:n});var s=o.map((function(e){return e.shape}));return sI.assertParamsConsistent(s,a),K3(o,a,n)}var Z3={kernelName:zd,backendName:"webgpu",kernelFunc:X3},Y3=function(e){switch(e){case 1:return"f32";case 2:return"vec2<f32>";case 3:return"vec3<f32>";case 4:return"vec4<f32>";default:throw new Error("innerElementSize ".concat(e," is not supported."))}};var J3=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Ye(this,e),this.variableNames=["x","W"],this.uniforms="filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>, dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=t.outShape,this.isChannelsLast="channelsLast"===t.dataFormat,this.isVec4=u,this.dispatchLayout=this.isChannelsLast?{x:[3],y:[1,2],z:[0]}:{x:[2,3],y:[1],z:[0]},this.workGroupSize=z2(this.dispatchLayout,this.outputShape,this.isVec4),this.elementsPerThread=W2(this.dispatchLayout,this.outputShape,this.isVec4),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize,this.elementsPerThread),this.innerElementSize=this.isVec4?t.inChannels%4===0?4:3:this.elementsPerThread[0],this.isVec4&&(this.variableTypes=3===this.innerElementSize?["f32","vec4<f32>"]:["vec4<f32>","vec4<f32>"]),i&&(this.variableNames.push("bias"),this.isVec4&&this.variableTypes.push("vec4<f32>")),s&&(this.variableNames.push("preluActivationWeights"),this.isVec4&&this.variableTypes.push("vec4<f32>")),this.addBias=i,this.activation=o,this.hasPreluActivationWeights=s,this.tileAOuter=this.workGroupSize[1]*this.elementsPerThread[1],this.tileBOuter=this.workGroupSize[0]*this.elementsPerThread[0],this.tileInner=Math.max(this.workGroupSize[0]*this.innerElementSize,this.workGroupSize[1]),this.fitAOuter=n%this.tileAOuter===0,this.fitBOuter=r%this.tileBOuter===0,this.fitInner=a%this.tileInner===0,this.shaderKey="conv2DMM_".concat(this.elementsPerThread,"_").concat(this.activation,"}_").concat(this.fitAOuter,"_").concat(this.fitBOuter,"_").concat(this.fitInner,"_").concat(this.isVec4,"_").concat(this.innerElementSize,"_").concat(this.isChannelsLast)}return Qe(e,[{key:"getUserCode",value:function(){var e=this.isVec4?K2(this.elementsPerThread,this.tileAOuter,this.tileBOuter,this.tileInner,this.innerElementSize,!this.isChannelsLast):p5(this.elementsPerThread,this.workGroupSize,!this.isChannelsLast,this.tileInner),t=this.isVec4?[this.isChannelsLast?this.innerElementSize:4,4,4]:[1,1,1];return"\n    ".concat(function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:4,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:4,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:4,l=function(e){switch(e){case 1:return"resData = x[xIndex];";case 3:return"resData = vec3<f32>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);";case 4:return"resData = x[xIndex / 4];";default:throw new Error("innerElementSize ".concat(e," is not supported."))}},d=function(e){switch(e){case 1:return"return W[row * uniforms.wShape[3] + colIn];";case 4:return"return W[row * uniforms.wShape[3] / 4 + colIn];";default:throw new Error("innerElementSize ".concat(e," is not supported."))}},f=e?"\n      let coord = vec4<i32>(batch, xRow, xCol, xCh);\n      ":"\n      let coord = vec4<i32>(batch, xCh, xRow, xCol);\n      ",p=e?"\n      let outCoord = vec4<i32>(\n        batch,\n        row / outWidth,\n        row % outWidth,\n        col);\n      ":"\n      let outCoord = vec4<i32>(\n        batch,\n        row,\n        col / outWidth,\n        col % outWidth);\n      ",h=e?"uniforms.xShape[1]":"uniforms.xShape[2]",m=e?"uniforms.xShape[2]":"uniforms.xShape[3]",v=e?"row":"col",g=e?"col":"row",y="\n      let inChannels = uniforms.wShape[2];\n      let outWidth = ".concat(e?"uniforms.outShape[2]":"uniforms.outShape[3]",";\n      let outRow = ").concat(v," / outWidth;\n      let outCol = ").concat(v," % outWidth;\n\n      let WRow = ").concat(g," / (uniforms.filterDims[1] * inChannels);\n      let WCol = ").concat(g," / inChannels % uniforms.filterDims[1];\n      let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];\n      let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];\n      let xCh = ").concat(g," % inChannels;\n      var resData = ").concat(Y3(s),"(0.0);\n      // The bounds checking is always needed since we use it to pad zero for\n      // the 'same' padding type.\n      if (xRow >= 0 && xRow < ").concat(h," && xCol >= 0 && xCol < ").concat(m,") {\n        ").concat(f,"\n        let xIndex = getIndexFromCoords4D(coord, uniforms.xShape);\n        ").concat(l(s),"\n      }\n      return resData;"),b=e?t&&r?"\n      let col = colIn * ".concat(s,";\n      ").concat(y):"\n      let col = colIn * ".concat(s,";\n      if (row < uniforms.dimAOuter && col < uniforms.dimInner) {\n        ").concat(y,"\n      }\n      return ").concat(Y3(s),"(0.0);"):r&&n?"\n      let col = colIn * ".concat(s,";\n      ").concat(y):"\n      let col = colIn * ".concat(s,";\n      if (row < uniforms.dimInner && col < uniforms.dimBOuter) {\n        ").concat(y,"\n      }\n      return ").concat(Y3(s),"(0.0);"),x="".concat(d(u)),A=Y3(c),k=Y3(e?s:u),w=Y3(e?u:s),S="",I="";if(i){var E=O2(i,4===c);S=o?"fn activation(a: ".concat(A,", outCoord : vec4<i32>) -> ").concat(A," {\n              let b = getPreluActivationWeightsByOutputCoords(outCoord);\n              ").concat(E,"\n           }"):"\n           fn activation(a : ".concat(A,", outCoord : vec4<i32>) -> ").concat(A," {\n             ").concat(E,"\n           }"),I="value = activation(value, outCoord);"}return"\n      ".concat(S,"\n      fn mm_readA(row : i32, colIn : i32, globalId : vec3<u32>) -> ").concat(k," {\n        var batch = i32(globalId.z);\n        ").concat(e?b:x,"\n      }\n\n      fn mm_readB(row : i32, colIn : i32, globalId : vec3<u32>) -> ").concat(w," {\n        var batch = i32(globalId.z);\n        ").concat(e?x:b,"\n      }\n\n      fn mm_write(row : i32, colIn : i32, valueIn : ").concat(A,", globalId : vec3<u32>) {\n        var col = colIn * ").concat(c,";\n        if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)\n        {\n        var batch = i32(globalId.z);\n        var value = valueIn;\n        let outWidth = ").concat(e?"uniforms.outShape[2]":"uniforms.outShape[3]",";\n        ").concat(p,"\n        ").concat(a?"value = value + getBiasByOutputCoords(outCoord);":"","\n        ").concat(I,"\n        setOutputAtCoords(outCoord[0], outCoord[1], outCoord[2], outCoord[3], value);\n        }\n      }")}(this.isChannelsLast,this.fitAOuter,this.fitBOuter,this.fitInner,this.addBias,this.activation,this.hasPreluActivationWeights,t[0],t[1],t[2]),"\n    ").concat(e,"\n  ")}}]),e}();function Q3(e,t){var n=e.length;return n>=3?[].concat(Tn(e.slice(0,-3)),t?[e[n-3]*e[n-2],e[n-1]]:[e[n-3],e[n-2]*e[n-1]]):!t&&1===n&&e[0]>1?[e[0],1]:null}function $3(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,u=void 0===s?null:s,c=e.leakyreluAlpha,l=void 0===c?0:c,d=e.activation,f=void 0===d?null:d,p=null!=o,h=null!=u,m="channelsLast"===r.dataFormat;if(m&&r.filterHeight===r.inHeight&&r.filterWidth===r.inWidth&&"VALID"===r.padInfo.type||1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return function(e){var t,n,r=e.x,a=e.filter,i=e.convInfo,o=e.backend,s=e.bias,u=void 0===s?null:s,c=e.preluActivationWeights,l=void 0===c?null:c,d=e.leakyreluAlpha,f=void 0===d?0:d,p=e.activation,h=void 0===p?null:p,m="channelsLast"===i.dataFormat,v=!m,g=[];if(m&&i.filterHeight===i.inHeight&&i.filterWidth===i.inWidth&&"VALID"===i.padInfo.type){var y=i.inHeight*i.inWidth*i.inChannels;t=y5({inputs:{x:r},backend:o,attrs:{shape:[1,i.batchSize,y]}}),n=y5({inputs:{x:a},backend:o,attrs:{shape:[1,y,i.outChannels]}})}else t=y5({inputs:{x:r},backend:o,attrs:{shape:m?[i.batchSize,i.inHeight*i.inWidth,i.inChannels]:[i.batchSize,i.inChannels,i.inHeight*i.inWidth]}}),n=y5({inputs:{x:a},backend:o,attrs:{shape:[1,i.inChannels,i.outChannels]}});if(g.push(t),g.push(n),null!=l){var b=Q3(l.shape,m);null!=b&&(l=y5({inputs:{x:l},backend:o,attrs:{shape:b}}),g.push(l))}if(null!=u){var x=Q3(u.shape,m);null!=x&&(u=y5({inputs:{x:u},backend:o,attrs:{shape:x}}),g.push(u))}var A=x5({a:m?t:n,b:m?n:t,transposeA:v,transposeB:!1,backend:o,bias:u,activation:h,preluActivationWeights:l,leakyreluAlpha:f}),k=y5({inputs:{x:A},backend:o,attrs:{shape:i.outShape}});g.push(A);for(var w=0,S=g;w<S.length;w++){var I=S[w];o.disposeData(I.dataId)}return k}({x:t,filter:n,convInfo:r,backend:a,bias:o,activation:f,preluActivationWeights:u,leakyreluAlpha:l});var v=((r.inChannels%4===0||r.inChannels%3===0)&&m||r.outWidth%4===0&&!m)&&r.outChannels%4===0,g=m?r.outHeight*r.outWidth:r.outChannels,y=m?r.outChannels:r.outHeight*r.outWidth,b=r.filterHeight*r.filterWidth*r.inChannels,x=[r.padInfo.top,r.padInfo.left],A=[{type:"int32",data:[r.filterHeight,r.filterWidth]},{type:"int32",data:[].concat(x)},{type:"int32",data:[r.strideHeight,r.strideWidth]},{type:"int32",data:[r.dilationHeight,r.dilationWidth]},{type:"int32",data:[g]},{type:"int32",data:[y]},{type:"int32",data:[b]}],k=new J3(r,g,y,b,p,f,h,v),w=[],S=[t,n];p&&(!m&&1===o.shape.length&&(o=y5({inputs:{x:o},backend:a,attrs:{shape:[o.shape[0],1,1]}}),w.push(o)),S.push(o)),h&&(!m&&1===u.shape.length&&(u=y5({inputs:{x:u},backend:a,attrs:{shape:[u.shape[0],1,1]}}),w.push(u)),S.push(u)),"leakyrelu"===f&&(A.push({type:"float32",data:[l]}),k.uniforms+=" alpha : f32,");for(var I=a.runWebGPUProgram(k,S,t.dtype,A),E=0,C=w;E<C.length;E++){var N=C[E];a.disposeData(N.dataId)}return I}var e4={kernelName:Bd,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=n.strides,s=n.pad,u=n.dataFormat,c=n.dilations,l=n.dimRoundingMode,d=sI.convertConv2DDataFormat(u);return $3({x:a,filter:i,convInfo:sI.computeConv2DInfo(a.shape,i.shape,o,c,s,l,!1,d),backend:r})}},t4=function(){function e(t){Ye(this,e),this.variableNames=["x","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, stride : vec2<i32>, outBackprop : vec4<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32,",this.outputShape=t.inShape,Fh.assert("channelsLast"===t.dataFormat,(function(){return"TODO: NCHW is unimplemented"})),this.dispatchLayout={x:[3],y:[1,2],z:[0]},this.workGroupSize=z2(this.dispatchLayout,this.outputShape),this.elementsPerThread=W2(this.dispatchLayout,this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize,this.elementsPerThread),this.shaderKey="conv2DDerInputMM_".concat(this.elementsPerThread)}return Qe(e,[{key:"getUserCode",value:function(){return"\n    fn mm_readA(row : i32, col : i32, globalId : vec3<u32>) -> f32 {\n      var batch = i32(globalId.z);\n      if (row < uniforms.dimAOuter && col < uniforms.dimInner) {\n      \n    let outRow = row / uniforms.outShape[2];\n    let outCol = row % uniforms.outShape[2];\n\n    let WRow = col / (uniforms.filterDims[1] * uniforms.outBackprop[3]);\n    let WCol = col / uniforms.outBackprop[3] % uniforms.filterDims[1];\n    let xR = f32(outRow - uniforms.pads[0] + WRow) / f32(uniforms.stride[0]);\n    let xC = f32(outCol - uniforms.pads[1] + WCol) / f32(uniforms.stride[1]);\n    if (xR < 0.0 || xR >= f32(uniforms.outBackprop[1]) || fract(xR) > 0.0) {\n      return 0.0;\n    }\n    if (xC < 0.0 || xC >= f32(uniforms.outBackprop[2]) || fract(xC) > 0.0) {\n      return 0.0;\n    }\n    let coord = vec4<i32>(\n        batch,\n        i32(xR),\n        i32(xC),\n        col % uniforms.outBackprop[3]);\n    return x[getIndexFromCoords4D(coord, uniforms.xShape)];\n    }\n    return 0.0;\n    }\n\n    fn mm_readB(row : i32, col : i32, globalId : vec3<u32>) -> f32 {\n      let coordX = uniforms.filterDims.x - 1 -\n          row / (uniforms.filterDims[1] * uniforms.outBackprop[3]);\n      let coordY = uniforms.filterDims.y - 1 -\n          (row / uniforms.outBackprop[3]) % uniforms.filterDims[1];\n      if (row < uniforms.dimInner && col < uniforms.dimBOuter &&\n          coordX >= 0 && coordY >= 0) {\n        let coord = vec4<i32>(coordX, coordY, col,\n            row % uniforms.outBackprop[3]);\n        return W[getIndexFromCoords4D(coord, uniforms.wShape)];\n      }\n      return 0.0;\n    }\n\n    fn mm_write(row : i32, col : i32, valueInput : f32, globalId : vec3<u32>) {\n      if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)\n      {\n      var batch = i32(globalId.z);\n      var value = valueInput;\n      let outCoord = vec4<i32>(\n          batch,\n          row / uniforms.outShape[2],\n          row % uniforms.outShape[2],\n          col);\n      result[getIndexFromCoords4D(outCoord, uniforms.outShape)] = value;\n      }\n    }\n\n    ".concat(p5(this.elementsPerThread,this.workGroupSize),"\n  ")}}]),e}(),n4=function(){function e(t){Ye(this,e),this.variableNames=["dy","W"],this.uniforms="filterDims : vec2<i32>, pads : vec2<i32>, stride : vec2<i32>, outBackprop : vec4<i32>,",this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=t.inShape,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.isChannelsLast="channelsLast"===t.dataFormat,this.shaderKey="conv2DDerInput_".concat(this.isChannelsLast)}return Qe(e,[{key:"getUserCode",value:function(){var e=this.isChannelsLast?1:2,t=this.isChannelsLast?2:3,n=this.isChannelsLast?3:1;return"\n    ".concat($2()," {\n      if(index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords[0];\n        let d1 = coords[").concat(n,"];\n\n        let dyCorner = vec2<i32>(coords[").concat(e,"]), coords[").concat(t,"]) - uniforms.pads;\n        let dyRCorner = dyCorner.x;\n        let dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + 1) {\n          let dyR = (f32(dyRCorner) + f32(wR)) / f32(uniforms.stride.x);\n          let wRPerm = uniforms.filterDims.x - 1 - wR;\n          if (dyR < 0.0 || dyR >= f32(uniforms.outBackprop[1]) || fract(dyR) > 0.0 ||\n              wRPerm < 0) {\n            continue;\n          }\n          let idyR = dyR;\n\n          for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + 1) {\n            let dyC = (f32(dyCCorner) + f32(wC)) / f32(uniforms.stride.y);\n            let wCPerm = uniforms.filterDims.y - 1 - wC;\n            if (dyC < 0.0 || dyC >= f32(uniforms.outBackprop[2]) ||\n                fract(dyC) > 0.0 || wCPerm < 0) {\n              continue;\n            }\n            let idyC = dyC;\n\n            for (var d2 = 0; d2 < uniforms.outBackprop[3]; d2 = d2 + 1) {\n              if (").concat(this.isChannelsLast,") {\n                let xValue = getDy(batch, idyR, idyC, d2);\n                let wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd = dotProd + xValue * wValue;\n              } else {\n                let xValue = getDy(batch, d2, idyR, idyC);\n                let wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd = dotProd + xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n  ")}}]),e}();var r4={kernelName:jd,backendName:"webgpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.dy,o=n.filter,s=a.inputShape,u=a.strides,c=a.pad,l=a.dataFormat,d=a.dimRoundingMode,f=sI.convertConv2DDataFormat(l),p=sI.computeConv2DInfo(s,o.shape,u,1,c,d,!1,f),h=[{type:"int32",data:[p.filterHeight,p.filterWidth]},{type:"int32",data:[p.filterHeight-1-p.padInfo.top,p.filterWidth-1-p.padInfo.left]},{type:"int32",data:[p.strideHeight,p.strideWidth]},{type:"int32",data:[p.batchSize,p.outHeight,p.outWidth,p.outChannels]}];if(id().getBool("WEBGPU_USE_NAIVE_CONV2D_TRANSPOSE"))t=new n4(p);else{t=new t4(p);var m=p.inShape[1]*p.inShape[2],v=p.inShape[3],g=p.filterHeight*p.filterWidth*p.outChannels;h.push({type:"uint32",data:[m]},{type:"uint32",data:[v]},{type:"uint32",data:[g]})}return r.runWebGPUProgram(t,[i,o],"float32",h)}},a4=M5({opType:2}),i4={kernelName:Gd,backendName:"webgpu",kernelFunc:a4},o4=M5({opType:3}),s4={kernelName:qd,backendName:"webgpu",kernelFunc:o4},u4=function(){function e(t,n,r,a){Ye(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.uniforms="extrapolationValue : f32,",this.workGroupSize=[64,1,1],this.size=!0;var i=u(n,1)[0];this.outputShape=[i,r[0],r[1],t],this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.methodId="bilinear"===a?1:0,this.cropHeightBiggerThan1=this.outputShape[1]>1,this.cropWidthBiggerThan1=this.outputShape[2]>1,this.shaderKey="cropAndResize_".concat(this.methodId,"_").concat(this.cropHeightBiggerThan1,"_").concat(this.cropWidthBiggerThan1)}return Qe(e,[{key:"getUserCode",value:function(){var e="f32(uniforms.imageShape[1] - 1)",t="f32(uniforms.imageShape[2] - 1)",n=u(this.cropHeightBiggerThan1?["(".concat(e," / f32(uniforms.outShape[1] - 1))"),"(y2-y1) * height_ratio","y1*".concat(e," + f32(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(e)],3),r=n[0],a=n[1],i=n[2],o=u(this.cropWidthBiggerThan1?["(".concat(t," / f32(uniforms.outShape[2] - 1))"),"(x2-x1) * width_ratio","x1*".concat(t," + f32(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(t)],3),s=o[0],c=o[1],l=o[2];return"\n      ".concat($2(),"\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let height_ratio = f32(").concat(r,");\n        let width_ratio = f32(").concat(s,");\n        let b = coords[0];\n        let y = coords[1];\n        let x = coords[2];\n        let d = coords[3];\n        // get box vals\n        let y1 = getBoxes(b, 0);\n        let x1 = getBoxes(b, 1);\n        let y2 = getBoxes(b, 2);\n        let x2 = getBoxes(b, 3);\n        // get image in batch index\n        let bInd = i32(round(getBoxInd(b)));\n        if(bInd < 0 || bInd >= uniforms.outShape[0]) {\n          return;\n        }\n        let height_scale = ").concat(a,";\n        let width_scale = ").concat(c,";\n        let in_y = ").concat(i,";\n        if( in_y < 0.0 || in_y > ").concat(e," ) {\n          setOutputAtIndex(index, uniforms.extrapolationValue);\n          return;\n        }\n        let in_x = ").concat(l,";\n        if( in_x < 0.0 || in_x > ").concat(t," ) {\n          setOutputAtIndex(index, uniforms.extrapolationValue);\n          return;\n        }\n        let sourceFracIndexCR = vec2<f32>(in_x,in_y);\n        if(").concat(this.methodId," == 1) {\n          // Compute the four integer indices.\n          let sourceFloorCR = vec2<i32>(sourceFracIndexCR);\n          let sourceCeilCR = vec2<i32>(ceil(sourceFracIndexCR));\n          let topLeft = getImage(bInd, sourceFloorCR.y, sourceFloorCR.x, d);\n          let bottomLeft = getImage(bInd, sourceCeilCR.y, sourceFloorCR.x, d);\n          let topRight = getImage(bInd, sourceFloorCR.y, sourceCeilCR.x, d);\n          let bottomRight = getImage(bInd, sourceCeilCR.y, sourceCeilCR.x, d);\n          let fracCR = sourceFracIndexCR - vec2<f32>(sourceFloorCR);\n          let top = topLeft + (topRight - topLeft) * fracCR.x;\n          let bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          let newValue = top + (bottom - top) * fracCR.y;\n          setOutputAtIndex(index, newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          let sourceNearestCR = vec2<i32>(floor(\n            sourceFracIndexCR + vec2<f32>(0.5,0.5)));\n          let newValue = getImage(\n            bInd, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutputAtIndex(index, newValue);\n        }\n      }\n    }\n    ")}}]),e}(),c4={kernelName:Zd,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new u4(a.shape[3],i.shape,s,u),d=[{type:"float32",data:[c]}];return n.runWebGPUProgram(l,[a,i,o],"float32",d)}},l4=function(){function e(t,n,r,a){Ye(this,e),this.variableNames=["x"],this.uniforms="index : f32,",this.size=!0;this.workGroupSize=[128,1,1],this.outputShape=n,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.exclusive=r,this.reverse=a,this.op=t,this.shaderKey="cum_".concat(this.op,"_").concat(this.exclusive,"_").concat(this.reverse)}return Qe(e,[{key:"getUserCode",value:function(){var e=this.outputShape.length,t="*"===this.op?"1.0":"0.0",n=this.exclusive?t:"getX(".concat(d4(e,"coords",this.op),")"),r=this.outputShape[this.outputShape.length-1],a="",i="";return this.exclusive?(a=this.reverse?"end != ".concat(r-1):"end != 0",i=this.reverse?"end + 1":"end - 1"):(a=this.reverse?"end + pow2 < ".concat(r):"end >= pow2",i=this.reverse?"end + pow2":"end - pow2"),"\n      ".concat($2(),"\n       if (index < uniforms.size) {\n         var coords = getCoordsFromIndex(index);\n\n         let end = ").concat(f4(e,"coords",this.op),";\n         var val = ").concat(n,";\n         let pow2 = i32(pow(2.0, uniforms.index));\n         if (").concat(a,") {\n           let idx = ").concat(i,";\n           ").concat(f4(e,"coords",this.op)," = idx;\n           val ").concat(this.op,"= getX(").concat(d4(e,"coords",this.op),");\n         }\n         setOutputAtIndex(index, val);\n       }\n      }\n    ")}}]),e}();function d4(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function f4(e,t,n){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative ".concat(n," for rank ").concat(e," is not yet supported"))}function p4(e,t,n,r,a,i){var o=t.shape.length,s=sI.getAxesPermutation([r],o),u=t;null!=s&&(u=A3({inputs:{x:t},backend:n,attrs:{perm:s}}));var c=sI.getInnerMostAxes(1,o)[0];if(c!==o-1)throw new Error("WebGPU cumprod shader expects an inner-most axis=".concat(t.shape.length-1," but got axis=").concat(r));for(var l=u.shape[c],d=C5({inputs:{x:u},backend:n}),f=0;f<=Math.ceil(Math.log2(l))-1;f++){var p=new l4(e,u.shape,!1,i),h=d,m=[{type:"float32",data:[f]}];d=n.runWebGPUProgram(p,[d],d.dtype,m),n.disposeData(h.dataId)}if(a){var v=new l4(e,u.shape,a,i),g=d;d=n.runWebGPUProgram(v,[d],d.dtype,[{type:"float32",data:[0]}]),n.disposeData(g.dataId)}if(null!=s){var y=A3({inputs:{x:d},backend:n,attrs:{perm:sI.getUndoAxesPermutation(s)}});return n.disposeData(d.dataId),n.disposeData(u.dataId),y}return d}var h4={kernelName:Kd,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return p4("*",t.x,n,r.axis,r.exclusive,r.reverse)}};var m4={kernelName:Xd,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return p4("+",t.x,n,r.axis,r.exclusive,r.reverse)}},v4=function(){function e(t,n){Ye(this,e),this.variableNames=["x"],this.workGroupSize=[64,1,1],this.size=!0,this.uniforms="blockSize : i32,",this.outputShape=t,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="depthToSpace_".concat(n),this.dataFormat=n}return Qe(e,[{key:"getUserCode",value:function(){return"\n      ".concat($2(),"\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let b = coords[0];\n          let h = ").concat(this.getHeightCoordString(),";\n          let w = ").concat(this.getWidthCoordString(),";\n          let d = ").concat(this.getDepthCoordString(),";\n\n          let in_h = h / uniforms.blockSize;\n          let offset_h = h % uniforms.blockSize;\n          let in_w = w / uniforms.blockSize;\n          let offset_w = w % uniforms.blockSize;\n          let offset_d = (offset_h * uniforms.blockSize + offset_w) *\n            ").concat(this.getOutputDepthSize(),";\n          let in_d = d + offset_d;\n\n          let rlt = ").concat(this.getInputSamplingString(),";\n          setOutputAtIndex(index, rlt);\n        }\n      }")}},{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?"uniforms.outShape[3]":"uniforms.outShape[1]"}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var g4={kernelName:Jd,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,c=("NHWC"===o?a.shape[2]:a.shape[3])*i,l=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),d=[{type:"int32",data:[i]}],f=new v4("NHWC"===o?[s,u,c,l]:[s,l,u,c],o);return n.runWebGPUProgram(f,[a],a.dtype,d)}},y4=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Ye(this,e),this.variableNames=["x","W"],this.uniforms="pad : vec2<i32>, stride : vec2<i32>, dilation : vec2<i32>, inDims : vec2<i32>,",this.workGroupSize=[4,4,4],this.isVec4=!0,this.outputShape=t.outShape,this.dispatchLayout={x:[0,1],y:[2],z:[3]},this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize,[1,4,4]),Fh.assert("channelsLast"===t.dataFormat,(function(){return"TODO: NCHW is unimplemented"})),n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.convInfo=t,this.addBias=n,this.activation=r,this.hasPreluActivation=a,this.shaderKey="depthwise3x3_".concat(r)}return Qe(e,[{key:"getUserCode",value:function(){var e="",t="";if(this.activation){var n=O2(this.activation,this.isVec4);e=this.hasPreluActivation?"fn activation(a : vec4<f32>, outCoord : vec4<i32>) -> vec4<f32> {\n          let b = getPreluActivationWeightsByOutputCoords(outCoord);\n          ".concat(n,"\n        }"):"\n        fn activation(a : vec4<f32>, outCoord : vec4<i32>) -> vec4<f32> {\n            ".concat(n,"\n          }\n        "),t="dotProd[i] = activation(dotProd[i], coords);"}var r=this.addBias?"dotProd[i] = dotProd[i] + getBiasByOutputCoords(coords);":"";return"\n      ".concat(e,"\n\n      ").concat("\n  @stage(compute) @workgroup_size(workGroupSizeX, workGroupSizeY, workGroupSizeZ)\n","\n      fn main(@builtin(global_invocation_id) globalId: vec3<u32>) {\n        let batch = 0;\n        let r = i32(globalId.x);\n        let c = i32(globalId.y) * 4;\n        let d2 = i32(globalId.z) * 4;\n        let xRCCorner = vec2<i32>(r, c) * uniforms.stride - uniforms.pad;\n        let d1 = d2;\n        let q = 0;\n\n        let xRCorner = xRCCorner.x;\n        let xCCorner = xRCCorner.y;\n\n        var wVals : array<vec4<f32>, 9>;\n        wVals[0] = getW(0, 0, d1, q);\n        wVals[1] = getW(0, 1, d1, q);\n        wVals[2] = getW(0, 2, d1, q);\n        wVals[3] = getW(1, 0, d1, q);\n        wVals[4] = getW(1, 1, d1, q);\n        wVals[5] = getW(1, 2, d1, q);\n        wVals[6] = getW(2, 0, d1, q);\n        wVals[7] = getW(2, 1, d1, q);\n        wVals[8] = getW(2, 2, d1, q);\n\n        var xVals : array<array<vec4<f32>, 6>, 3>;\n        for (var wR = 0; wR < 3; wR = wR + 1) {\n          let xR = xRCorner + wR * uniforms.dilation[0];\n          for (var wC = 0; wC < 6; wC = wC + 1) {\n            let xC = xCCorner + wC * uniforms.dilation[1];\n            if (xR < 0 || xR >= uniforms.inDims[0] || xC < 0 || xC >= uniforms.inDims[1]) {\n              xVals[wR][wC] = vec4<f32>(0.0);\n            } else {\n              xVals[wR][wC] = getX(batch, xR, xC, d1);\n            }\n          }\n        }\n\n        var dotProd : array<vec4<f32>, 4>;\n        dotProd[0] = vec4<f32>(0.0);\n        dotProd[1] = vec4<f32>(0.0);\n        dotProd[2] = vec4<f32>(0.0);\n        dotProd[3] = vec4<f32>(0.0);\n\n        for (var wR = 0; wR < 3; wR = wR + 1) {\n          for (var wC = 0; wC < 3; wC = wC + 1) {\n            let indexW = wR * 3 + wC;\n            dotProd[0] = dotProd[0] + xVals[wR][0 + wC] * wVals[indexW];\n            dotProd[1] = dotProd[1] + xVals[wR][1 + wC] * wVals[indexW];\n            dotProd[2] = dotProd[2] + xVals[wR][2 + wC] * wVals[indexW];\n            dotProd[3] = dotProd[3] + xVals[wR][3 + wC] * wVals[indexW];\n          }\n        }\n\n        for (var i = 0; i < 4; i = i + 1) {\n          let coords = vec4<i32>(batch, r, c + i, d2);\n          if (coordsInBounds4D(coords, uniforms.outShape)) {\n            ").concat(r,"\n            ").concat(t,"\n            setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], dotProd[i]);\n          }\n        }\n      }\n    ")}}]),e}(),b4=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Ye(this,e),this.variableNames=["x","W"],this.uniforms="pad : vec2<i32>, stride : vec2<i32>, dilation : vec2<i32>,\n      inDims : vec2<i32>, filterHeight : i32, filterWidth : i32,\n      channelMul : i32,",this.workGroupSize=[256,1,1],this.outputShape=t.outShape,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),Fh.assert("channelsLast"===t.dataFormat,(function(){return"TODO: NCHW is unimplemented"})),n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.convInfo=t,this.addBias=n,this.activation=r,this.hasPreluActivation=a,this.shaderKey="depthwise_".concat(this.activation)}return Qe(e,[{key:"getUserCode",value:function(){var e="",t="";if(this.activation){var n=O2(this.activation,!1);e=this.hasPreluActivation?"fn activation(a : f32, outCoord : vec4<i32>) -> f32 {\n          let b = getPreluActivationWeightsByOutputCoords(outCoord);\n          ".concat(n,"\n        }"):"\n          fn activation(a : f32, outCoord : vec4<i32>) -> f32 {\n            ".concat(n,"\n          }\n        "),t="dotProd = activation(dotProd, coords);"}var r=this.addBias?"dotProd = dotProd + getBiasByOutputCoords(coords);":"";return"\n      ".concat(e,"\n\n      fn writeResult(batch : i32, row : i32, col : i32, chan : i32,\n          value : f32) {\n        let coord = vec4<i32>(batch, row, col, chan);\n        if (coordsInBounds4D(coord, uniforms.outShape)) {\n          setOutputAtCoords(batch, row, col, chan, value);\n        }\n      }\n\n      ").concat(e5(),"\n        let coords = getOutputCoords();\n        let batch = coords[0];\n        let xRCCorner = vec2<i32>(coords.yz) * uniforms.stride - uniforms.pad;\n        let d2 = coords[3];\n        let d1 = d2 / uniforms.channelMul;\n        let q = d2 - d1 * uniforms.channelMul;\n\n        let inputRowStart = xRCCorner.x;\n        let inputColStart = xRCCorner.y;\n        let inputRowEnd = inputRowStart + uniforms.filterHeight *\n            uniforms.dilation[0];\n        let inputColEnd = inputColStart + uniforms.filterWidth *\n            uniforms.dilation[1];\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n\n        // Extract if checking out of for loop for performance.\n        if (inputRowStart >= 0 && inputColStart >= 0 &&\n          inputRowEnd < uniforms.inDims[0] &&\n              inputColEnd < uniforms.inDims[1]) {\n            // Here using a constant value |this.convInfo.filterHeight| instead\n            // of uniform value is in order to loop unrolling.\n            for (var wR = 0; wR < uniforms.filterHeight; wR = wR + 1) {\n              let xR = inputRowStart + wR * uniforms.dilation[0];\n\n              for (var wC = 0; wC < uniforms.filterWidth; wC = wC + 1) {\n                let xC = inputColStart + wC * uniforms.dilation[1];\n\n                let xVal = getX(batch, xR, xC, d1);\n                let wVal = getW(wR, wC, d1, q);\n                dotProd = dotProd + xVal * wVal;\n              }\n            }\n          } else {\n            for (var wR = 0; wR < uniforms.filterHeight; wR = wR + 1) {\n              let xR = inputRowStart + wR * uniforms.dilation[0];\n\n              if (xR < 0 || xR >= uniforms.inDims[0]) {\n                continue;\n              }\n\n              for (var wC = 0; wC < uniforms.filterWidth; wC = wC + 1) {\n                let xC = inputColStart + wC * uniforms.dilation[1];\n\n                if (xC < 0 || xC >= uniforms.inDims[1]) {\n                  continue;\n                }\n\n                let xVal = getX(batch, xR, xC, d1);\n                let wVal = getW(wR, wC, d1, q);\n                dotProd = dotProd + xVal * wVal;\n              }\n            }\n          }\n\n        ").concat(r,"\n        ").concat(t,"\n        writeResult(batch, coords[1], coords[2], d2, dotProd);\n      }\n    ")}}]),e}();var x4={kernelName:Qd,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode,l=u;null==l&&(l=[1,1]);var d,f=sI.computeConv2DInfo(a.shape,i.shape,o,l,s,c,!0),p=[{type:"int32",data:[f.padInfo.top,f.padInfo.left]},{type:"int32",data:[f.strideHeight,f.strideWidth]},{type:"int32",data:[f.dilationHeight,f.dilationWidth]},{type:"int32",data:[f.inHeight,f.inWidth]}];return 1===f.batchSize&&f.inHeight===f.outHeight&&f.inWidth===f.outWidth&&1===f.strideHeight&&1===f.strideWidth&&f.filterHeight===f.filterWidth&&f.inChannels===f.outChannels&&1===f.dilationHeight&&1===f.dilationWidth&&3===f.filterHeight&&f.inChannels%4===0?d=new y4(f):(d=new b4(f),p.push({type:"int32",data:[f.filterHeight]},{type:"int32",data:[f.filterWidth]},{type:"int32",data:[f.outChannels/f.inChannels]})),n.runWebGPUProgram(d,[a,i],a.dtype,p)}},A4=O5({opSnippet:0,cpuKernelImpl:J5,supportsComplex:!0}),k4={kernelName:ap,backendName:"webgpu",kernelFunc:A4},w4=function(){function e(t,n){Ye(this,e),this.workGroupSize=[64,1,1],this.variableNames=["x"],this.uniforms="reduceSize : i32,",this.size=!0,this.inputShape=[t.batchSize,t.inSize];var r=u(sI.computeOutAndReduceShapes(this.inputShape,[1]),1)[0];this.outputShape=0===r.length?[1]:r,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,[1,1,1]),this.reduceType=n,this.shaderKey="reduce_".concat(n)}return Qe(e,[{key:"getUserCode",value:function(){var e="",t="0.0";"min"===this.reduceType||"max"===this.reduceType?(e="\n         if (isnan(candidate)) {\n          bestValue = uniforms.NAN;\n         } else if (!isnan(bestValue) && candidate ".concat("min"===this.reduceType?"<":">"," bestValue)\n           {  bestValue = candidate; }"),t="f32(x[offset])"):"sum"===this.reduceType||"mean"===this.reduceType?e=" bestValue = bestValue + candidate; ":"prod"===this.reduceType&&(e=" bestValue = bestValue * candidate; ",t="1.0");var n="mean"===this.reduceType?"setOutputAtIndex(outputIndex, bestValue / f32(uniforms.reduceSize));":"setOutputAtIndex(outputIndex, bestValue);";return"\n       fn DIV_CEIL(a : u32, b : u32) -> u32 {\n        return ((a - 1u) / b + 1u);\n       }\n\n       ".concat("\n         var<workgroup> xBestValues : array<f32, ".concat(this.workGroupSize[0],">;\n       "),"\n       fn getOffset(outputIndex : i32) -> i32 {\n         let outputCoords = getCoordsFromIndex(outputIndex);\n         let offset = ",1===this.outputShape.length?"outputCoords":"outputCoords[0]"," * uniforms.reduceSize;\n          return offset;\n       }\n       ").concat($2(),"\n         let outputIndex = index / i32(workGroupSizeX);\n         let offset = getOffset(outputIndex);\n         var bestValue = ").concat(t,";\n         let Length = uniforms.reduceSize;\n         let WorkPerThread = DIV_CEIL(u32(Length), workGroupSizeX);\n         for (var k = i32(localId.x); k < Length && outputIndex < uniforms.size;\n             k = k + i32(workGroupSizeX)) {\n           let candidate = f32(x[offset + k]);\n           ").concat(e,"\n         }\n         xBestValues[localId.x] = bestValue;\n         workgroupBarrier();\n\n         var reduceSize = min(u32(Length), workGroupSizeX);\n         for (var currentSize = reduceSize / 2u; reduceSize > 1u;\n             currentSize = reduceSize / 2u) {\n           let interval = DIV_CEIL(reduceSize, 2u);\n           if (localId.x < currentSize) {\n            let candidate = xBestValues[localId.x + interval];\n            ").concat(e,"\n            xBestValues[localId.x] = bestValue;\n           }\n           reduceSize = interval;\n           workgroupBarrier();\n         }\n\n         if (localId.x == 0u && outputIndex < uniforms.size) {\n          ").concat(n,"\n        }\n       }\n     ")}}]),e}();function S4(e,t,n,r,a){var i=e.shape.length,o=[],s=Fh.parseAxisParam(t,e.shape),c=s,l=sI.getAxesPermutation(c,i),d=e;null!=l&&(d=A3({inputs:{x:e},attrs:{perm:l},backend:a}),c=sI.getInnerMostAxes(c.length,i),o.push(d)),sI.assertAxesAreInnerMostDims(r,c,i);var f,p=u(sI.computeOutAndReduceShapes(d.shape,c),2),h=p[0],m=p[1],v=h;if(n&&(v=sI.expandShapeToKeepDim(h,s)),"max"!==r&&"prod"!==r||!a.shouldExecuteOnCPU([d])){var g=Fh.sizeFromShape(m),y={windowSize:g,inSize:g,batchSize:Fh.sizeFromShape(d.shape)/g,outSize:1},b="mean"===r?"float32":Em(e.dtype),x=[{type:"int32",data:[g]}],A=new w4(y,r),k=a.runWebGPUProgram(A,[d],b,x);o.push(k),f=y5({inputs:{x:k},attrs:{shape:v},backend:a})}else{var w=a.tensorMap.get(d.dataId).values;switch(r){case"max":var S=X5(w,Fh.sizeFromShape(m),v,e.dtype);f=a.makeTensorInfo(v,e.dtype,S);break;case"prod":var I=e3(d.shape,d.dtype,w,c),E=I.outVals,C=I.outShape,N=I.outDtype;f=a.makeTensorInfo(C,N,E);break;default:throw new Error("".concat(r," CPU implementation is not yet supported."))}}return o.forEach((function(e){return a.disposeData(e.dataId)})),f}function I4(e){var t=e.inputs,n=e.backend,r=e.attrs;return S4(t.x,r.axis,r.keepDims,"sum",n)}var E4={kernelName:Vp,backendName:"webgpu",kernelFunc:I4};var C4={kernelName:sf,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.equation,a=t,i=sI.decodeEinsumEquation(r,a.length),o=i.allDims,s=i.summedDims,u=i.idDims;sI.checkEinsumDimSizes(o.length,u,a);for(var c=sI.getEinsumComputePath(s,u),l=c.path,d=c.steps,f=d.length,p=null,h=o.length,m=[],v=0;v<f;++v){var g,y=lc(d[v]);try{for(y.s();!(g=y.n()).done;){var b=g.value,x=sI.getEinsumPermutation(h,u[b]),A=x.permutationIndices,k=x.expandDims,w=void 0;sI.isIdentityPermutation(A)?w=a[b]:(w=A3({inputs:{x:a[b]},backend:n,attrs:{perm:A}}),m.push(w));for(var S=w.shape.slice(),I=0;I<k.length;++I)S.splice(k[I],0,1);Fh.arraysEqual(w.shape,S)||(w=y5({inputs:{x:w},backend:n,attrs:{shape:S}}),m.push(w)),null===p?p=w:(p=A4({inputs:{a:w,b:p},backend:n}),m.push(p))}}catch(T){y.e(T)}finally{y.f()}v<f-1&&(l[v]>=0&&(p=I4({inputs:{x:p},backend:n,attrs:{axis:l[v]-(o.length-h),keepDims:!1}}),m.push(p)),h--)}for(var E=0,C=m;E<C.length;E++){var N=C[E];N!==p&&n.disposeData(N.dataId)}return p}},N4=M5({opType:4}),T4={kernelName:uf,backendName:"webgpu",kernelFunc:N4},_4=O5({opSnippet:4,dtype:"bool",cpuKernelImpl:L5}),R4={kernelName:df,backendName:"webgpu",kernelFunc:_4},M4=M5({opType:5,cpuKernelImpl:z5,dtype:"float32"}),O4={kernelName:ff,backendName:"webgpu",kernelFunc:M4};function F4(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),u=a;return a<0&&(Fh.assert(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+a+1),s.splice(u,0,1),y5({inputs:{x:i},backend:r,attrs:{shape:s}})}var P4={kernelName:pf,backendName:"webgpu",kernelFunc:F4},D4=M5({opType:6,cpuKernelImpl:B5}),L4={kernelName:hf,backendName:"webgpu",kernelFunc:D4},z4=function(){function e(t){Ye(this,e),this.variableNames=[],this.outputShape=[],this.uniforms="value : f32,",this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="fill"}return Qe(e,[{key:"getUserCode",value:function(){return"\n    ".concat($2(),"\n      if (index < uniforms.size) {\n        setOutputAtIndex(index, uniforms.value);\n      }\n    }\n  ")}}]),e}();function B4(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||Fh.inferDtype(a))){var o=Fh.getArrayFromDType(i,Fh.sizeFromShape(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new z4(r),u=[{type:"float32",data:[a]}];return t.runWebGPUProgram(s,[],i,u)}var W4,j4={kernelName:vf,backendName:"webgpu",kernelFunc:B4},V4=function(){function e(t){Ye(this,e),this.outputShape=[],this.variableNames=["x"],this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="flipLeftRight"}return Qe(e,[{key:"getUserCode",value:function(){return"\n      ".concat($2(),"\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let coordX = uniforms.xShape[2] - coords[2] - 1;\n          let outputValue = getX(coords[0], coords[1], coordX, coords[3]);\n          setOutputAtIndex(index, outputValue);\n        }\n      }\n    ")}}]),e}(),U4={kernelName:gf,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new V4(r.shape);return a.runWebGPUProgram(i,[r],r.dtype)}},H4=M5({opType:7,cpuKernelImpl:W5}),G4={kernelName:yf,backendName:"webgpu",kernelFunc:H4},q4=O5({opSnippet:12,dtype:"int32"}),K4={kernelName:bf,backendName:"webgpu",kernelFunc:q4},X4=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Ye(this,e),this.outputShape=[0],this.variableNames=[],this.workGroupSize=[256,1,1],this.outputShape=t,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.useImport=n,this.shaderKey="fromPixels_".concat(this.useImport)}return Qe(e,[{key:"getUserCode",value:function(){var e=this.useImport?"textureLoad(src, vec2<i32>(coords.yx));":"textureLoad(src, vec2<i32>(coords.yx), 0)";return"\n      @binding(1) @group(0) var src: ".concat(this.useImport?"texture_external":"texture_2d<f32>",";\n\n      ").concat($2(),"\n        let flatIndexBase = index * uniforms.numChannels;\n        for (var i = 0; i < uniforms.numChannels; i = i + 1) {\n          let flatIndex = flatIndexBase + i;\n          if (flatIndex < uniforms.size) {\n            let coords = getCoordsFromIndex(flatIndexBase);\n            let values = ").concat(e,";\n            result[flatIndex] = i32(floor(255.0 * values[i]));\n          }\n        }\n      }\n  ")}}]),e}(),Z4={kernelName:vh,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels;if(null==a)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var o="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,c="undefined"!=typeof HTMLCanvasElement&&a instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&a instanceof OffscreenCanvas,l="undefined"!=typeof ImageBitmap&&a instanceof ImageBitmap,d=u(o?[a.videoWidth,a.videoHeight]:[a.width,a.height],2),f=d[0],p=d[1],h=[p,f,i];if(id().getBool("WEBGPU_USE_IMPORT")&&o)return Y4({externalImage:a,backend:n,attrs:r,outShape:h,useImport:!0});if((o||s)&&(null==W4&&(W4=document.createElement("canvas").getContext("2d")),W4.canvas.width=f,W4.canvas.height=p,W4.drawImage(a,0,0,f,p),a=W4.canvas),l||c||o||s)return Y4({externalImage:a,backend:n,attrs:r,outShape:h,useImport:!1});var m=a.data,v=m;if(null!=i&&4!==i){v=new Uint8Array(a.width*a.height*i);for(var g=m.length,y=0,b=0;b<g;b++)b%4<i&&(v[y++]=m[b])}var x=n.makeTensorInfo(h,"int32");return n.tensorMap.get(x.dataId).values=new Int32Array(v),n.maybeReleaseBuffer(x.dataId),n.uploadToGPU(x.dataId),x}};function Y4(e){var t=e.externalImage,n=e.backend,r=e.attrs,a=e.outShape,i=e.useImport,o=r.numChannels,s=Fh.sizeFromShape(a),u=Fh.computeStrides(a),c=new X4(a,i),l=[{type:"uint32",data:[s]},{type:"uint32",data:[o]},{type:"uint32",data:Tn(u)},{type:"uint32",data:Tn(c.dispatch)}];return n.runFromPixelsProgram(c,a,l,i,t)}var J4=function(){function e(t,n,r,a,i){Ye(this,e),this.uniforms="varianceEpsilon : f32,",this.workGroupSize=[128,1,1],this.size=!0,this.variableNames=["x","mean","variance"],sI.assertAndGetBroadcastShape(t,n),sI.assertAndGetBroadcastShape(t,r),this.outputShape=t,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),null!=a&&(sI.assertAndGetBroadcastShape(t,a),this.variableNames.push("offset")),null!=i&&(sI.assertAndGetBroadcastShape(t,i),this.variableNames.push("scale")),this.offsetShape=a,this.scaleShape=i,this.shaderKey="batchNorm"}return Qe(e,[{key:"getUserCode",value:function(){var e="0.0";null!=this.offsetShape&&(e="getOffsetByOutputIndex(index)");var t="1.0";return null!=this.scaleShape&&(t="getScaleByOutputIndex(index)"),"\n      ".concat($2(),"\n        if (index < uniforms.size)\n        {\n          let xValue = getXByOutputIndex(index);\n          let meanValue = getMeanByOutputIndex(index);\n          let varianValue = getVarianceByOutputIndex(index);\n          let offsetValue = ").concat(e,";\n          let scaleValue = ").concat(t,";\n          let inv = scaleValue * inverseSqrt(varianValue + f32(uniforms.varianceEpsilon));\n          setOutputAtIndex(index,dot(vec3<f32>(xValue, -meanValue, offsetValue), vec3<f32>(inv, inv, 1.0)));\n        }\n      }\n  ")}}]),e}(),Q4={kernelName:xf,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.scale,o=t.offset,s=t.mean,u=t.variance,c=n.varianceEpsilon,l=r,d=[a,s,u],f=null;null!=o&&(f=o.shape,d.push(o));var p=null;null!=i&&(p=i.shape,d.push(i));var h=new J4(a.shape,s.shape,u.shape,f,p),m=[{type:"float32",data:[c]}];return l.runWebGPUProgram(h,d,a.dtype,m)}};var $4={kernelName:bh,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dataFormat,d=r.dilations,f=r.dimRoundingMode,p=r.activation,h=r.leakyreluAlpha,m=sI.convertConv2DDataFormat(l);return $3({x:a,filter:i,convInfo:sI.computeConv2DInfo(a.shape,i.shape,u,d,c,f,!1,m),backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:h,activation:p})}};var e7={kernelName:xh,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dilations,d=r.dimRoundingMode,f=r.activation,p=r.leakyreluAlpha,h=l;null==h&&(h=[1,1]),Fh.assert(sI.eitherStridesOrDilationsAreOne(u,h),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ".concat(u," and dilations '").concat(h,"'")}));var m=sI.computeConv2DInfo(a.shape,i.shape,u,h,c,d,!0),v=[a,i],g=null!=o,y=null!=s;g&&v.push(o),y&&v.push(s);var b,x=[{type:"int32",data:[m.padInfo.top,m.padInfo.left]},{type:"int32",data:[m.strideHeight,m.strideWidth]},{type:"int32",data:[m.dilationHeight,m.dilationWidth]},{type:"int32",data:[m.inHeight,m.inWidth]}];return 1===m.batchSize&&m.inHeight===m.outHeight&&m.inWidth===m.outWidth&&1===m.strideHeight&&1===m.strideWidth&&m.filterHeight===m.filterWidth&&m.inChannels===m.outChannels&&1===m.dilationHeight&&1===m.dilationWidth&&3===m.filterHeight&&m.inChannels%4===0?b=new y4(m,g,f,y):(b=new b4(m,g,f,y),x.push({type:"int32",data:[m.filterHeight]},{type:"int32",data:[m.filterWidth]},{type:"int32",data:[m.outChannels/m.inChannels]})),"leakyrelu"===f&&(x.push({type:"float32",data:[p]}),b.uniforms+=" alpha : f32,"),n.runWebGPUProgram(b,v,"float32",x)}},t7=function(){function e(t,n){Ye(this,e),this.variableNames=["A","indices"],this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=n,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="gathernd_".concat(t),this.sliceDim=t,this.uniforms="sliceDim : i32, strides : ".concat(J2(t),",")}return Qe(e,[{key:"getUserCode",value:function(){var e;return e=this.sliceDim>1?"uniforms.strides[j]":"uniforms.strides","\n        ".concat($2(),"\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          var flattenIndex = 0;\n          for (var j = 0; j < uniforms.sliceDim; j = j + 1) {\n            let indexTemp = i32(round(getIndices(coords[0], j)));\n            let strideNum = ").concat(e,";\n            flattenIndex = flattenIndex + indexTemp * strideNum;\n          }\n\n          setOutputAtIndex(index, getA(flattenIndex, coords[1]));\n        }\n      }\n      ")}}]),e}();var n7={kernelName:kf,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=Fh.sizeFromShape(r.shape),c=u(sI.prepareAndValidate(r,a),4),l=c[0],d=c[1],f=c[2],p=c[3],h=y5({inputs:{x:a},backend:n,attrs:{shape:[d,o]}}),m=y5({inputs:{x:r},backend:n,attrs:{shape:[Fh.sizeFromShape(r.shape)/f,f]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var v=n.readSync(a.dataId),g=n.bufferSync(r),y=j5(v,g,r.dtype,d,o,f,p,r.shape,s);return n.makeTensorInfo(l,r.dtype,y.values)}var b=new t7(o,[d,f]),x=[{type:"int32",data:[o]},{type:"int32",data:p}],A=n.runWebGPUProgram(b,[m,h],m.dtype,x),k=y5({inputs:{x:A},backend:n,attrs:{shape:l}});return n.disposeData(h.dataId),n.disposeData(m.dataId),n.disposeData(A.dataId),k}},r7=function(){function e(t,n){Ye(this,e),this.variableNames=["A","indices"],this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=t.slice(),this.aShape=t,this.outputShape=n,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="gather"}return Qe(e,[{key:"getUserCode",value:function(){var e=function(e){for(var t=["resRC.x","resRC.y","resRC.z","resRC.w"],n=[],r=0;r<e.length;r++)2===r?n.push("indexZ"):n.push("".concat(t[r]));return n.join()}(this.aShape);return"\n      ".concat($2(),"\n        if (index < uniforms.size) {\n          let resRC = getCoordsFromIndex(index);\n          let indexZ = i32(getIndices(resRC.x, resRC.z));\n          let inBounds = select(0.0, 1.0, indexZ >= 0 && indexZ < uniforms.aShape[2]);\n          setOutputAtIndex(index, inBounds * getA(").concat(e,"));\n        }\n      }\n    ")}}]),e}();function a7(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,u=Fh.parseAxisParam(o,a.shape)[0],c=sI.segment_util.collectGatherOpShapeInfo(a,i,u,s),l=Fh.sizeFromShape(i.shape),d=[],f=y5({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=y5({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,l/c.batchSize]}});d.push(f),d.push(p);var h=[c.batchSize,c.outerSize,l/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([a,i])){var m=n.tensorMap.get(p.dataId).values,v=cg(p.shape,p.dtype,m),g=n.tensorMap.get(f.dataId).values,y=cg(f.shape,f.dtype,g),b=V5(y,v,h);return d.forEach((function(e){return n.disposeData(e.dataId)})),n.makeTensorInfo(c.outputShape,b.dtype,b.values)}var x=new r7(f.shape,h),A=n.runWebGPUProgram(x,[f,p],f.dtype);d.push(A);var k=y5({inputs:{x:A},backend:n,attrs:{shape:c.outputShape}});return d.forEach((function(e){return n.disposeData(e.dataId)})),k}var i7={kernelName:Af,backendName:"webgpu",kernelFunc:a7},o7=O5({opSnippet:5,cpuKernelImpl:H5,dtype:"bool"}),s7={kernelName:wf,backendName:"webgpu",kernelFunc:o7},u7=O5({opSnippet:6,dtype:"bool",cpuKernelImpl:U5}),c7={kernelName:Sf,backendName:"webgpu",kernelFunc:u7};var l7={kernelName:Rf,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=[{type:"float32",data:[r.alpha]}],o=new R5(a.shape,14);return o.uniforms="alpha : f32,",n.runWebGPUProgram(o,[a],"float32",i)}},d7=O5({opSnippet:7,dtype:"bool",cpuKernelImpl:q5}),f7={kernelName:Mf,backendName:"webgpu",kernelFunc:d7},p7=O5({opSnippet:8,dtype:"bool",cpuKernelImpl:G5}),h7={kernelName:Of,backendName:"webgpu",kernelFunc:p7},m7=M5({opType:9,cpuKernelImpl:K5}),v7={kernelName:Pf,backendName:"webgpu",kernelFunc:m7},g7=O5({opSnippet:9,dtype:"bool"}),y7={kernelName:Lf,backendName:"webgpu",kernelFunc:g7},b7=M5({opType:10}),x7={kernelName:zf,backendName:"webgpu",kernelFunc:b7};function A7(e){var t=e.inputs,n=e.backend,r=e.attrs;return S4(t.x,r.reductionIndices,r.keepDims,"max",n)}var k7={kernelName:Gf,backendName:"webgpu",kernelFunc:A7},w7=O5({opSnippet:15,cpuKernelImpl:Z5}),S7={kernelName:qf,backendName:"webgpu",kernelFunc:w7};var I7={kernelName:Kf,backendName:"webgpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.filterSize,s=a.strides,u=a.pad,c=a.dimRoundingMode,l=sI.computePool2DInfo(i.shape,o,s,1,u,c),d=[];if(1===l.filterHeight&&1===l.filterWidth){if(Fh.arraysEqual(l.inShape,l.outShape))return C5({inputs:{x:i},backend:r});t=new E3(l),d.push({type:"int32",data:[l.strideHeight,l.strideWidth]})}else t=new I3(l,"max"),d.push({type:"int32",data:[l.strideHeight,l.strideWidth]},{type:"int32",data:[l.padInfo.top,l.padInfo.left]},{type:"int32",data:[l.dilationHeight,l.dilationWidth]},{type:"int32",data:[l.inHeight,l.inWidth]},{type:"int32",data:[l.effectiveFilterHeight,l.effectiveFilterWidth]});return r.runWebGPUProgram(t,[i],i.dtype,d)}};var E7={kernelName:Qf,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.keepDims;return S4(a,r.axis,i,"mean",n)}};var C7={kernelName:$f,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return S4(t.x,r.axis,r.keepDims,"min",n)}},N7=O5({opSnippet:16,cpuKernelImpl:Y5}),T7={kernelName:ep,backendName:"webgpu",kernelFunc:N7},_7=function(){function e(t,n,r){var a=this;Ye(this,e),this.uniforms="",this.variableNames=["x"],this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]})),this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.xShape=t,n.map((function(e,t){a.uniforms+=" pad".concat(t," : vec2<i32>,")})),this.offset="reflect"===r?0:1,this.shaderKey="mirrorPad_".concat(r)}return Qe(e,[{key:"getUserCode",value:function(){var e=this.xShape.length,t=this.xShape.map((function(e,t){return"uniforms.pad".concat(t,"[0]")})).join(","),n=this.xShape.map((function(t,n){return"uniforms.pad".concat(n,"[0] + uniforms.xShape").concat(e>1?"[".concat(n,"]"):"")})).join(","),r=1===e?"start":"start[i]",a=1===e?"end":"end[i]",i=1===e?"outC":"outC[i]",o=J2(e),s=e>1?["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,e):"coords";return"\n      ".concat($2(),"\n        if (index < uniforms.size) {\n          let start = ").concat(o,"(").concat(t,");\n          let end = ").concat(o,"(").concat(n,");\n          var outC = getCoordsFromIndex(index);\n          for (var i = 0; i < ").concat(e,"; i = i + 1) {\n            if (").concat(i," < ").concat(r,") {\n              ").concat(i," = ").concat(r," * 2 - ").concat(i," - ").concat(this.offset,";\n            } else if(").concat(i," >= ").concat(a,") {\n              ").concat(i," = (").concat(a," - 1) * 2 - ").concat(i," + ").concat(this.offset,";\n            }\n          }\n          let coords = outC - start;\n          setOutputAtIndex(index, getX(").concat(s,"));\n        }\n      }\n    ")}}]),e}(),R7={kernelName:tp,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.paddings,o=n.mode,s=r,u=i.map((function(e){return{type:"int32",data:[e[0],e[1]]}})),c=new _7(a.shape,i,o);return s.runWebGPUProgram(c,[a],a.dtype,u)}};var M7={kernelName:ip,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;if(n.shouldExecuteOnCPU([r])){var a=n.tensorMap.get(r.dataId),i=u(Q5(a.values,r.shape,r.dtype),2),o=i[0],s=i[1];return n.makeTensorInfo(s,r.dtype,o)}var c=new R5(r.shape,11);return n.runWebGPUProgram(c,[r],r.dtype)}};var O7={kernelName:sp,backendName:"webgpu",kernelFunc:function(e){console.warn("tf.nonMaxSuppression() in webgpu locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(i.dataId),d=sE.nonMaxSuppressionV3Impl(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}};var F7={kernelName:cp,backendName:"webgpu",kernelFunc:function(e){console.warn("tf.nonMaxSuppression() in webgpu locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),d=n.readSync(i.dataId),f=o,p=s,h=u,m=c,v=sE.nonMaxSuppressionV5Impl(l,d,f,p,h,m),g=v.selectedIndices,y=v.selectedScores;return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};function P7(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=D3({inputs:{input:r},backend:n}),i=P7({inputs:{x:a},backend:n}),o=G3({inputs:{input:r},backend:n}),s=P7({inputs:{x:o},backend:n}),u=T5({inputs:{real:i,imag:s},backend:n});return n.disposeData(a.dataId),n.disposeData(i.dataId),n.disposeData(o.dataId),n.disposeData(s.dataId),u}return B4({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var D7={kernelName:hh,backendName:"webgpu",kernelFunc:P7};var L7={kernelName:lp,backendName:"webgpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=D3({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=G3({inputs:{input:a},backend:r}),u=P7({inputs:{x:s},backend:r}),c=T5({inputs:{real:o,imag:u},backend:r});return r.disposeData(i.dataId),r.disposeData(o.dataId),r.disposeData(s.dataId),r.disposeData(u.dataId),c}return B4({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var z7={kernelName:fp,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return F4({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){Fh.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),Fh.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=F4({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=X3({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeData(e.dataId)})),u}},B7=function(){function e(t,n){var r=this;Ye(this,e),this.variableNames=["x"],this.uniforms="constantValue : f32,",this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]})),this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),n.map((function(e,t){r.uniforms+=" pad".concat(t," : vec2<i32>,")})),this.xShape=t,this.shaderKey="pad"}return Qe(e,[{key:"getUserCode",value:function(){var e=this.xShape.length,t=J2(e),n=this.xShape.map((function(e,t){return"uniforms.pad".concat(t,"[0]")})).join(","),r=this.xShape.map((function(t,n){return"uniforms.pad".concat(n,"[0] + uniforms.xShape").concat(e>1?"[".concat(n,"]"):"")})).join(","),a=e>1?"".concat(t,"(").concat(n,")"):"".concat(n),i=e>1?"".concat(t,"(").concat(r,")"):"".concat(r),o=e>1?"any(outC < start)":"outC < start",s=e>1?"any(outC >= end)":"outC >= end",u=e>1?["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,e):"coords";return"\n      ".concat($2(),"\n        if (index < uniforms.size) {\n          let start = ").concat(a,";\n          let end = ").concat(i,";\n          let outC = getCoordsFromIndex(index);\n\n          if (").concat(o," || ").concat(s,") {\n            setOutputAtIndex(index, uniforms.constantValue);\n          } else {\n            let coords = outC - start;\n            setOutputAtIndex(index, getX(").concat(u,"));\n          }\n        }\n      }\n    ")}}]),e}(),W7=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(i.every((function(e){return Fh.arraysEqual(e,[0,0])})))return C5({inputs:{x:a},backend:n});if(0===Fh.sizeFromShape(a.shape)){var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return B4({backend:n,attrs:{shape:s,value:o,dtype:a.dtype}})}var u=[{type:"float32",data:[o]}];i.map((function(e){return u.push({type:"int32",data:[e[0],e[1]]})}));var c=new B7(a.shape,i);return n.runWebGPUProgram(c,[a],a.dtype,u)},j7={kernelName:pp,backendName:"webgpu",kernelFunc:W7},V7=O5({opSnippet:13}),U7={kernelName:mp,backendName:"webgpu",kernelFunc:V7};var H7={kernelName:vp,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=new I5(14,r.shape,a.shape);return n.runWebGPUProgram(i,[r,a],"float32")}};var G7={kernelName:gp,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return S4(t.x,r.axis,r.keepDims,"prod",n)}},q7={kernelName:yp,backendName:"webgpu",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=t3(r,a,i,o);return t.makeTensorInfo([s.length],o,s)}},K7=O5({opSnippet:3}),X7={kernelName:of,backendName:"webgpu",kernelFunc:K7},Z7=M5({opType:12}),Y7={kernelName:Ap,backendName:"webgpu",kernelFunc:Z7},J7=M5({opType:13}),Q7={kernelName:Cp,backendName:"webgpu",kernelFunc:J7},$7=function(){function e(t,n,r){Ye(this,e),this.variableNames=["x"],this.uniforms="adjustHeightWidth : vec2<f32>, halfPixelCenters : f32,",this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=[t[0],n,r,t[3]],this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="resizeBilinear"}return Qe(e,[{key:"getUserCode",value:function(){return"\n      ".concat($2(),"\n        if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n          let b = coords[0];\n          let d = coords[3];\n          let rc = coords.yz;\n\n          let effectiveInSize = vec2<f32>(\n            f32(uniforms.xShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.xShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveOutSize = vec2<f32>(\n            f32(uniforms.outShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.outShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveInputOverOutputRatioRC =\n              effectiveInSize / effectiveOutSize;\n\n          // Fractional source index\n          let sourceFracIndexRC =\n            (vec2<f32>(rc) + vec2<f32>(uniforms.halfPixelCenters)) *\n            effectiveInputOverOutputRatioRC - vec2<f32>(uniforms.halfPixelCenters);\n\n          // Compute the four integer indices.\n          let sourceFloorRC = vec2<i32>(sourceFracIndexRC);\n          let sourceCeilRC = vec2<i32>(\n            min(vec2<f32>(uniforms.xShape.yz) - vec2<f32>(1.0), ceil(sourceFracIndexRC)));\n\n          let topLeft = getX(b, sourceFloorRC.x, sourceFloorRC.y, d);\n          let bottomLeft = getX(b, sourceCeilRC.x, sourceFloorRC.y, d);\n          let topRight = getX(b, sourceFloorRC.x, sourceCeilRC.y, d);\n          let bottomRight = getX(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n          let fracRC = sourceFracIndexRC - vec2<f32>(sourceFloorRC);\n\n          let top = topLeft + (topRight - topLeft) * fracRC.y;\n          let bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n          let newValue = top + (bottom - top) * fracRC.x;\n\n          setOutputAtIndex(index, newValue);\n        }\n      }\n    ")}}]),e}();var e6={kernelName:Ip,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.size,s=r.halfPixelCenters,c=u(o,2),l=c[0],d=c[1],f=[{type:"float32",data:[i&&l>1?1:0,i&&d>1?1:0]},{type:"float32",data:[s?.5:0]}],p=new $7(a.shape,l,d);return n.runWebGPUProgram(p,[a],"float32",f)}},t6=function(){function e(t,n,r,a){Ye(this,e),this.variableNames=["x"],this.uniforms="adjustHeightWidth : vec2<f32>, roundBase : f32,",this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=[t[0],n,r,t[3]],this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.halfPixelCenters=a,this.shaderKey="resizeNearest_".concat(a)}return Qe(e,[{key:"getUserCode",value:function(){var e;return e=this.halfPixelCenters?"max((vec2<f32>(rc) + vec2<f32>(0.5)) * effectiveInputOverOutputRatioRC, vec2<f32>(0.0))":"vec2<f32>(rc) * effectiveInputOverOutputRatioRC","\n      ".concat($2(),"\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let b = coords[0];\n          let d = coords[3];\n          let rc = coords.yz;\n\n          let effectiveInSize = vec2<f32>(\n            f32(uniforms.xShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.xShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveOutSize = vec2<f32>(\n            f32(uniforms.outShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.outShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveInputOverOutputRatioRC =\n              effectiveInSize / effectiveOutSize;\n\n          // Fractional source index\n          let sourceFracIndexRC = ").concat(e,";\n\n          // Compute the coordinators of nearest neighbor point.\n          let inputShapeRC = vec2<f32>(f32(uniforms.xShape.y), f32(uniforms.xShape.z));\n          let sourceNearestRC = vec2<i32>(\n            min(inputShapeRC - 1.0, floor(sourceFracIndexRC + uniforms.roundBase)));\n          let newValue = getX(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n          setOutputAtIndex(index, newValue);\n        }\n      }\n    ")}}]),e}();var n6={kernelName:wp,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=u(r.size,2),c=s[0],l=s[1],d=[{type:"float32",data:[i&&c>1?1:0,i&&l>1?1:0]},{type:"float32",data:[i?.5:0]}],f=new t6(a.shape,c,l,o);return n.runWebGPUProgram(f,[a],a.dtype,d)}},r6=function(){function e(t,n){Ye(this,e),this.outputShape=[],this.variableNames=["x"],this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.uniforms="centerX : f32, centerY : f32, sinRadians : f32,\n          cosRadians : f32,",this.shaderKey="rotate",this.outputShape=t,"number"==typeof n?(this.uniforms+=" fillValue : f32,",this.fillSnippet="var outputValue = uniforms.fillValue;",this.shaderKey+="_float"):(this.uniforms+=" fillValue : vec3<f32>,",this.fillSnippet="var outputValue = uniforms.fillValue[coords[3]];",this.shaderKey+="_vec3")}return Qe(e,[{key:"getUserCode",value:function(){return"\n        ".concat($2(),"\n\n          if (index < uniforms.size) {\n            let coords = getCoordsFromIndex(index);\n            let coordXFloat = (f32(coords[2]) - uniforms.centerX) *\n                uniforms.cosRadians - (f32(coords[1]) - uniforms.centerY) *\n                uniforms.sinRadians;\n            let coordYFloat = (f32(coords[2]) - uniforms.centerX) *\n                uniforms.sinRadians + (f32(coords[1]) - uniforms.centerY) *\n                uniforms.cosRadians;\n            let coordX = i32(round(coordXFloat + uniforms.centerX));\n            let coordY = i32(round(coordYFloat + uniforms.centerY));\n            ").concat(this.fillSnippet,"\n            if(coordX >= 0 && coordX < uniforms.xShape[2] && coordY >= 0 &&\n                coordY < uniforms.xShape[1]) {\n              outputValue = getX(coords[0], coordY, coordX, coords[3]);\n            }\n            setOutputAtIndex(index, outputValue);\n          }\n        }\n      ")}}]),e}(),a6={kernelName:gh,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,c=r,l=new r6(a.shape,o),d=u(sI.getImageCenter(s,a.shape[1],a.shape[2]),2),f=[{type:"float32",data:[d[0]]},{type:"float32",data:[d[1]]},{type:"float32",data:[Math.sin(i)]},{type:"float32",data:[Math.cos(i)]}];return"number"==typeof o?f.push({type:"float32",data:[Number.parseFloat(o.toFixed(2))]}):f.push({type:"float32",data:o}),c.runWebGPUProgram(l,[a],a.dtype,f)}},i6=M5({opType:15,cpuKernelImpl:n3}),o6={kernelName:_p,backendName:"webgpu",kernelFunc:i6},s6=function(){function e(t,n,r,a,i,o,s){Ye(this,e),this.variableNames=["updates","indices"],this.workGroupSize=[64,1,1],this.atomic=!0,this.outputShape=o,this.type=s,this.dispatchLayout=j2(t),this.dispatch=L2(this.dispatchLayout,t,this.workGroupSize),this.sliceDimGreaterThanOne=n>1,this.shaderKey="scatter_".concat(r,"_").concat(a,"_").concat(this.sliceDimGreaterThanOne,"_").concat(s);var u=J2(i.length);this.uniforms="sliceDim : i32, strides: ".concat(u,", size: i32,"),this.updatesRank=a,this.indicesRank=r}return Qe(e,[{key:"getUserCode",value:function(){var e="";1===this.indicesRank?e="coords[0]":2===this.indicesRank&&(e="coords[0], j");var t="getIndices(".concat(e,")"),n=this.sliceDimGreaterThanOne?"uniforms.strides[j]":"uniforms.strides",r="",a="",i="";1===this.updatesRank?(r="coords[0]",a="flattenedIndex",i="\n      fn getUpdatesCoordsFromFlatIndex(index : i32) -> i32 {\n        return index;\n      }\n      "):2===this.updatesRank&&(r="coords[0], coords[1]",a="vec2<i32>(flattenedIndex, coords[1])",i="\n      fn getUpdatesCoordsFromFlatIndex(index : i32) -> vec2<i32> {\n        let d0 = index / uniforms.updatesShape[1];\n        let d1 = index - d0 * uniforms.updatesShape[1];\n        return vec2<i32>(d0, d1);\n      }\n      ");var o="getUpdates(".concat(r,")"),s="int32"===this.type?"atomicAdd(&(result[flatIndex]), i32(updateValue));":"\n     var oldValue = atomicLoad(&(result[flatIndex]));\n     var exchanged = false;\n     for (; !exchanged;) {\n       let newValueF32 = bitcast<f32>(oldValue) + updateValue;\n       let newValue = bitcast<i32>(newValueF32);\n       let res = atomicCompareExchangeWeak(&(result[flatIndex]), oldValue, newValue);\n       oldValue = res.old_value;\n       exchanged = res.exchanged;\n     }\n     ";return"\n    ".concat(i,"\n\n      ").concat($2(),"\n\n        if (index < uniforms.size) {\n          let coords = getUpdatesCoordsFromFlatIndex(index);\n          var flattenedIndex = 0;\n          for (var j = 0; j < uniforms.sliceDim; j = j + 1) {\n            let indexInside = i32(round(").concat(t,"));\n            flattenedIndex = flattenedIndex + indexInside * ").concat(n,";\n          }\n          let updateValue = ").concat(o,";\n          let flatIndex = getOutputIndexFromCoords(").concat(a,");\n\n         ").concat(s,"\n        }\n      }")}}]),e}();var u6={kernelName:Rp,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=sI.calculateShapes(i,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,f=s.outputSize,p=[f/l,l];if(0===f)return n.makeTensorInfo(o,a.dtype);var h=y5({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),m=y5({inputs:{x:i},backend:n,attrs:{shape:[c,l]}}),v=m.dtype,g=B4({backend:n,attrs:{shape:p,value:0,dtype:v}}),y=[{type:"int32",data:[u]},{type:"int32",data:d},{type:"int32",data:[Fh.sizeFromShape(m.shape)]}],b=new s6(m.shape,u,h.shape.length,m.shape.length,d,p,v),x=n.runWebGPUProgram(b,[m,h],v,y,g),A=y5({inputs:{x:x},backend:n,attrs:{shape:o}});return n.disposeData(h.dataId),n.disposeData(m.dataId),n.disposeData(x.dataId),A}},c6=function(){function e(t,n,r){Ye(this,e),this.variableNames=["c","a","b"],this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=n,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.cRank=t,this.rank=r,this.shaderKey="select"}return Qe(e,[{key:"getUserCode",value:function(){var e,t;if(this.rank>4)throw Error("Where for rank ".concat(this.rank," is not yet supported"));if(1===this.rank)t="resRC",e="resRC";else{for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=[],i=0;i<this.outputShape.length;i++)a.push("".concat(n[i])),i<this.cRank&&r.push("".concat(n[i]));e=r.join(),t=a.join()}return"\n      ".concat($2(),"\n        if (index < uniforms.size) {\n          let resRC = getCoordsFromIndex(index);\n          let cVal = getC(").concat(e,");\n          if (cVal >= 1.0) {\n            setOutputAtIndex(index, getA(").concat(t,"));\n          } else {\n            setOutputAtIndex(index, getB(").concat(t,"));\n          }\n        }\n      }\n    ")}}]),e}();var l6={kernelName:Op,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new c6(r.shape.length,a.shape,a.shape.length);return n.runWebGPUProgram(o,[r,a,i],Im(a.dtype,i.dtype))}},d6=M5({opType:18}),f6={kernelName:Bp,backendName:"webgpu",kernelFunc:d6},p6=M5({opType:16}),h6={kernelName:Dp,backendName:"webgpu",kernelFunc:p6},m6=M5({opType:17}),v6={kernelName:Lp,backendName:"webgpu",kernelFunc:m6},g6=O5({opSnippet:2,cpuKernelImpl:u3,supportsComplex:!0}),y6={kernelName:rh,backendName:"webgpu",kernelFunc:g6};var b6={kernelName:Gp,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=Fh.parseAxisParam([i],a.shape),s=A7({inputs:{x:a},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),u=sI.expandShapeToKeepDim(s.shape,o),c=y5({inputs:{x:s},backend:n,attrs:{shape:u}}),l=g6({inputs:{a:a,b:c},backend:n}),d=M4({inputs:{x:l},backend:n}),f=I4({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),p=y5({inputs:{x:f},backend:n,attrs:{shape:u}}),h=K7({inputs:{a:d,b:p},backend:n});return n.disposeData(s.dataId),n.disposeData(c.dataId),n.disposeData(l.dataId),n.disposeData(d.dataId),n.disposeData(f.dataId),n.disposeData(p.dataId),h}},x6={kernelName:Up,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;Fh.assert(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGPU backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,Tn(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=[],d=W7({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),f=sI.getReshaped(d.shape,i,s,!1),p=sI.getPermuted(f.length,i.length,!1),h=sI.getReshapedPermuted(d.shape,i,s,!1),m=y5({inputs:{x:d},backend:n,attrs:{shape:f}}),v=A3({inputs:{x:m},backend:n,attrs:{perm:p}}),g=y5({inputs:{x:v},backend:n,attrs:{shape:h}});return l.push(d),l.push(m),l.push(v),l.forEach((function(e){return n.disposeData(e.dataId)})),g}},A6=function(){function e(t,n,r,a,i,o){Ye(this,e),this.variableNames=["updates","indices","defaultValue"],this.workGroupSize=[64,1,1],this.workPerThread=4,this.size=!0,this.outputShape=o,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize,[this.workPerThread,1,1]);var s=n>1;this.shaderKey="scatter_".concat(r,"_").concat(a,"_").concat(s);var u=J2(i.length);this.uniforms="updateSize : i32, sliceDim : i32, strides: ".concat(u,",");var c="";1===r?c="i":2===r&&(c="i, j"),this.indicesSnippet="getIndices(".concat(c,")");var l="";1===a?l="i":2===a&&(l="i, coords[1]"),this.updatesSnippet="getUpdates(".concat(l,")"),this.strideString=s?"uniforms.strides[j]":"uniforms.strides"}return Qe(e,[{key:"getUserCode",value:function(){return"\n      ".concat($2(),"\n\n        let globalIndex = index * ").concat(this.workPerThread,";\n        if (globalIndex < uniforms.size) {\n          var sum = vec4<f32>(0.0);\n          var found = vec4<bool>(false);\n          for (var i = 0; i < uniforms.updateSize; i = i + 1) {\n            var flattenedIndex = 0;\n            for (var j = 0; j < uniforms.sliceDim; j = j + 1) {\n              let indexInside = i32(round(").concat(this.indicesSnippet,"));\n              flattenedIndex = flattenedIndex + indexInside * ").concat(this.strideString,";\n            }\n            for (var innerIndex = 0; innerIndex < ").concat(this.workPerThread,"; innerIndex = innerIndex + 1) {\n              let curIndex = globalIndex + innerIndex;\n              let coords = getCoordsFromIndex(curIndex);\n              if (flattenedIndex == coords[0]) {\n                sum[innerIndex] = sum[innerIndex] + ").concat(this.updatesSnippet,";\n                found[innerIndex] = true;\n              }\n            }\n          }\n          for (var innerIndex = 0; innerIndex < ").concat(this.workPerThread,"; innerIndex = innerIndex + 1) {\n            let curIndex = globalIndex + innerIndex;\n            if (curIndex < uniforms.size)\n            {\n              setOutputAtIndex(curIndex, mix(getDefaultValue(), sum[innerIndex], f32(found[innerIndex])));\n            }\n          }\n        }\n      }")}}]),e}();var k6={kernelName:Yp,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=sI.calculateShapes(i,a,s),c=u.sliceRank,l=u.numUpdates,d=u.sliceSize,f=u.strides,p=u.outputSize;if("string"===i.dtype){var h=n.bufferSync(a),m=n.bufferSync(i),v=Fh.decodeString(n.readSync(o.dataId)[0]),g=r3(h,m,s,p,d,l,c,f,v,false);return n.makeTensorInfo(s,g.dtype,g.values)}var y=[{type:"int32",data:[l]},{type:"int32",data:[c]},{type:"int32",data:f}],b=new A6(l,c,a.shape.length,i.shape.length,f,[p,1],false),x=n.runWebGPUProgram(b,[i,a,o],i.dtype,y),A=y5({inputs:{x:x},backend:n,attrs:{shape:s}});return n.disposeData(x.dataId),A}};var w6={kernelName:Hp,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=r.axis,s=Fh.parseAxisParam(o,a.shape)[0],u=sI.prepareSplitSize(a,i,s),c=a.shape.length,l=new Array(c).fill(0),d=a.shape.slice();return u.map((function(e){var t=Tn(d);t[s]=e;var r=R3({inputs:{x:a},backend:n,attrs:{begin:l,size:t}});return l[s]+=e,r}))}},S6=M5({opType:19}),I6={kernelName:jp,backendName:"webgpu",kernelFunc:S6},E6={kernelName:Qp,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n,i=new R5(r.shape,20);return a.runWebGPUProgram(i,[r],r.dtype)}},C6=O5({opSnippet:11}),N6={kernelName:Jp,backendName:"webgpu",kernelFunc:C6},T6=function(){function e(t){Ye(this,e),this.variableNames=["x"],this.workPerThread=1,this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize,[this.workPerThread,1,1]);var n=J2(this.outputShape.length);this.uniforms="begin : ".concat(n,",  strides : ").concat(n,", "),this.shaderKey="stridedSlice"}return Qe(e,[{key:"getUserCode",value:function(){var e=this,t="";if(1===this.outputShape.length)t="coords * uniforms.strides + uniforms.begin";else{var n=0;t=this.outputShape.map((function(t,r){return n++,1===e.outputShape.length?"coords * uniforms.strides[".concat(r,"] + uniforms.begin[").concat(r,"]"):"coords[".concat(n-1,"] * uniforms.strides[").concat(r,"] + uniforms.begin[").concat(r,"]")})).join(",")}return"\n       ".concat($2(),"\n         if (index < uniforms.size) {\n           let coords = getCoordsFromIndex(index);\n           setOutputAtIndex(index, getX(").concat(t,"));\n         }\n       }\n     ")}}]),e}();var _6={kernelName:$p,backendName:"webgpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,d=a.ellipsisMask,f=a.newAxisMask,p=a.shrinkAxisMask,h=Oy.sliceInfo(i.shape,o,s,u,c,l,d,f,p),m=h.finalShapeSparse,v=h.finalShape,g=h.isIdentity,y=h.sliceDim0,b=h.isSimpleSlice,x=h.begin,A=h.end,k=h.strides;if(g)t=y5({inputs:{x:i},backend:r,attrs:{shape:v}});else if(y||b){Fh.assert(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var w=Oy.computeOutShape(x,A,k),S=R3({inputs:{x:i},backend:r,attrs:{begin:x,size:w}});t=y5({inputs:{x:S},backend:r,attrs:{shape:v}}),r.disposeData(S.dataId)}else if(r.shouldExecuteOnCPU([i])){var I=r.readSync(i.dataId),E=cg(i.shape,i.dtype,I),C=o3(m,E,k,x);t=r.makeTensorInfo(v,i.dtype,C.values)}else{var N=new T6(m),T=[{type:"int32",data:x},{type:"int32",data:k}],_=r.runWebGPUProgram(N,[i],i.dtype,T);t=y5({inputs:{x:_},backend:r,attrs:{shape:v}}),r.disposeData(_.dataId)}return t}};var R6={kernelName:eh,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,c=r.padWidth,l=r.preserveShortSequences,d=t.data,f=t.dataSplits,p=n.readSync(d.dataId),h=n.readSync(f.dataId),m=u(s3(p,h,a,i,o,s,c,l),2),v=m[0],g=m[1];return[n.makeTensorInfo([v.length],"string",v),n.makeTensorInfo(f.shape,"int32",g)]}},M6=M5({opType:21}),O6={kernelName:ih,backendName:"webgpu",kernelFunc:M6},F6=function(){function e(t,n){Ye(this,e),this.variableNames=["A"],this.workGroupSize=[64,1,1],this.size=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.rank=this.outputShape.length,this.shaderKey="tile"}return Qe(e,[{key:"getUserCode",value:function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>=5)throw Error("Tile for rank ".concat(e," is not yet supported"));if(1===e)return"(resRC % ".concat(t,"aShape)");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e;a++)r.push("(".concat(n[a]," % ").concat(t,"aShape[").concat(a,"])"));return r.join()}(this.rank,"uniforms.");return"\n      ".concat($2(),"\n        if (index < uniforms.size) {\n          let resRC = getCoordsFromIndex(index);\n          setOutputAtIndex(index, getA(").concat(e,"));\n        }\n      }\n    ")}}]),e}();var P6={kernelName:oh,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if(n.shouldExecuteOnCPU([a])||"string"===a.dtype||a.shape.length>=5){var o=n.readSync(a.dataId),s="string"===a.dtype?o.map((function(e){return Fh.decodeString(e)})):o,u=cg(a.shape,a.dtype,s),c=c3(u,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var l=new F6(a.shape,i);return n.runWebGPUProgram(l,[a],a.dtype)}},D6=function(){function e(t){Ye(this,e),this.variableNames=["x","indices"],this.workGroupSize=[256,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.uniforms="inputSize : i32, firstPass : i32, negativeInf : f32,\n        dir : i32, inc : i32,",this.shaderKey="swap"}return Qe(e,[{key:"getUserCode",value:function(){return"\n        ".concat($2(),"\n          if (index < uniforms.size) {\n            let outC = getCoordsFromIndex(index);\n            let batch = outC[0];\n            let elemIdx = outC[1];\n            // We compare elements pair-wise within a group of size 2 * inc.\n            // The comparing rule for each group alternates between ascending\n            // and descending. Within each group, we compare each pair at\n            // positions i and i+inc. To decide whether an element at position i\n            // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n            // inc, it is in the first half of the group, we denote it as x0,\n            // otherwise we denote it as x1.\n            // For example, as shown in the Bitonic top K paper referenced\n            // above, Figure5(a) shows that element[1] is in the second half of\n            // the group when group size is 2, but it is in the first half of\n            // the group when group size is 4.\n            let isFirstInPair = elemIdx % (2 * uniforms.inc) < uniforms.inc;\n            var i = 0;\n            if (isFirstInPair) {\n              i = elemIdx;\n            } else {\n              i = elemIdx - uniforms.inc;\n            }\n\n            var i0 = 0;\n            if (uniforms.firstPass == 1) {\n              i0 = i;\n            } else {\n              i0 = i32(getIndices(batch, i));\n            }\n\n            var i1 = 0;\n            if (uniforms.firstPass == 1) {\n              i1 = i + uniforms.inc;\n            } else {\n              i1 = i32(getIndices(batch, i + uniforms.inc));\n            }\n\n            var x0 = f32(0.0);\n            var x1 = f32(0.0);\n            if (i0 < uniforms.inputSize) {\n              x0 = getX(batch, i0);\n            } else {\n              x0 = uniforms.negativeInf;\n            }\n            if (i1 < uniforms.inputSize) {\n              x1 = getX(batch, i1);\n            } else {\n              x1 = uniforms.negativeInf;\n            }\n\n            let reverse = elemIdx % (2 * uniforms.dir) >= uniforms.dir;\n            let isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n            if (reverse == isGreater) {\n              // Elements in opposite order of direction\n              let iTemp = i0;\n              i0 = i1;\n              i1 = iTemp;\n            }\n            if (isFirstInPair) {\n              setOutputAtIndex(index, f32(i0));\n            } else {\n              setOutputAtIndex(index, f32(i1));\n            }\n          }\n        }\n      ")}}]),e}(),L6=function(){function e(t){Ye(this,e),this.variableNames=["x","indices"],this.workGroupSize=[256,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.uniforms="inputSize : i32, firstPass : i32, k : i32,",this.shaderKey="merge"}return Qe(e,[{key:"getUserCode",value:function(){return"\n        ".concat($2(),"\n          if (index < uniforms.size) {\n            let outC = getCoordsFromIndex(index);\n            let batch = outC[0];\n            let elemIdx = outC[1];\n            // The output size is half of the previous size.\n            // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _\n            // (k=4), we only need to output the indices at positions |, the\n            // indices at positions _ can be thrown away, see Figure5(b) After\n            // Phase 2 (Merge phase) in the Bitonic Top K paper referenced\n            // above.\n            // For example, the paper shows we only need to output the orange\n            // bars. The output sequence should look like this | | | | | | | |.\n            // Because the sequence is halved, to map the output index back to\n            // the previous sequence to find the corresponding value, we need\n            // to double the index. When we double the index, we basically\n            // interpolate a position, so 2i looks like\n            // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k\n            // position of each 2k positions by - elemIdx % k. E.g. for output\n            // at index 4,5,6,7, we want to get the corresponding element at\n            // original index 8,9,10,11, for output at index 8,9,10,11,\n            // we want to get the corresponding element at original index\n            // 16,17,18,19, so on and so forth.\n\n            var i = 0;\n            if (elemIdx < uniforms.k) {\n              i = elemIdx;\n            } else {\n              i = elemIdx * 2 - elemIdx % uniforms.k;\n            }\n            var i0 = 0;\n            if (uniforms.firstPass == 1) {\n              i0 = i;\n            } else {\n              i0 = i32(getIndices(batch, i));\n            }\n            var i1 = 0;\n            if (uniforms.firstPass == 1) {\n              i1 = i + uniforms.k;\n            } else {\n              i1 = i32(getIndices(batch, i + uniforms.k));\n            }\n\n            let x0 = getX(batch, i0);\n            var x1 = f32(0.0);\n            if (i1 < uniforms.inputSize) {\n              x1 = getX(batch, i1);\n            } else {\n              x1 = x0;\n            }\n\n            if (x0 >= x1) {\n              setOutputAtIndex(index, f32(i0));\n            } else {\n              setOutputAtIndex(index, f32(i1));\n            }\n          }\n        }\n      ")}}]),e}();function z6(e,t){null!==t&&e.disposeData(t.dataId)}function B6(e){for(var t=1;t<e;)t*=2;return t}var W6={kernelName:sh,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=a.shape,c=s[s.length-1];if(n.shouldExecuteOnCPU([a])){var l=n.readSync(a.dataId),d=u(l3(l,s,a.dtype,i,o),2),f=d[0],p=d[1];return[n.makeTensorInfo(f.shape,f.dtype,f.values),n.makeTensorInfo(p.shape,p.dtype,p.values)]}if(0===i)return s[s.length-1]=0,[n.makeTensorInfo(s,a.dtype,[]),n.makeTensorInfo(s,"int32",[])];if(1===c)return[a,B4({attrs:{shape:s,dtype:"int32",value:0},backend:n})];for(var h=Fh.sizeFromShape(s)/c,m=y5({inputs:{x:a},attrs:{shape:[h,c]},backend:n}),v=B6(i),g=B6(c),y=null,b=function(){return null===y?[m,m]:[m,y]},x=function(e,t,r){var a=b(),i=new D6(r),o=[{type:"int32",data:[c]},{type:"int32",data:[null===y?1:0]},{type:"float32",data:[Number.NEGATIVE_INFINITY]},{type:"int32",data:[e]},{type:"int32",data:[t]}],s=y;y=n.runWebGPUProgram(i,a,"int32",o),z6(n,s)},A=1;A<v;A*=2)for(var k=2*A,w=A;w>=1;w/=2)x(k,w,[h,g]);for(var S=g;S>v;S/=2){var I=b(),E=new L6([h,S/2]),C=[{type:"int32",data:[c]},{type:"int32",data:[null===y?1:0]},{type:"int32",data:[v]}],N=y;y=n.runWebGPUProgram(E,I,"int32",C),z6(n,N);for(var T=v/2,_=2*T,R=T;R>=1;R/=2)x(_,R,y.shape)}var M=y;y=R3({inputs:{x:y},backend:n,attrs:{begin:0,size:[h,i]}}),z6(n,M);var O=a7({inputs:{x:m,indices:y},backend:n,attrs:{axis:1,batchDims:1}});z6(n,m);var F=s.slice(0,-1);F.push(i),M=y,y=y5({inputs:{x:y},attrs:{shape:F},backend:n}),z6(n,M);var P=O;return O=y5({inputs:{x:O},attrs:{shape:F},backend:n}),z6(n,P),[O,y]}},j6=function(){function e(t){Ye(this,e),this.variableNames=["Image","Transforms"],this.uniforms="interpolationModeId : i32, fillModeId : i32, fillValue : f32,",this.workGroupSize=[64,1,1],this.size=!0,this.outputShape=t,this.dispatchLayout=j2(this.outputShape),this.dispatch=L2(this.dispatchLayout,this.outputShape,this.workGroupSize),this.shaderKey="transform"}return Qe(e,[{key:"getUserCode",value:function(){return"\n          fn mapCoord(outCoord : f32, len : f32) -> f32{\n            var inCoord = outCoord;\n            if(uniforms.fillModeId == 2) {\n              if (inCoord < 0.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz2 = 2.0 * len;\n                  if (inCoord < sz2) {\n                    inCoord = sz2 * f32(i32(f32(-inCoord / sz2))) +\n                    inCoord;\n                  }\n                  if (inCoord < -len) {\n                    inCoord = inCoord + sz2;\n                  } else {\n                    inCoord = -inCoord - 1.0;\n                  }\n                }\n              } else if (inCoord > len - 1.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz2 = 2.0 * len;\n                  inCoord = inCoord - sz2 * f32(i32(f32(inCoord / sz2)));\n                  if (inCoord >= len) {\n                    inCoord = sz2 - inCoord - 1.0;\n                  }\n                }\n              }\n              return clamp(inCoord, 0.0, len - 1.0);\n            } else if (uniforms.fillModeId == 3) {\n              if (inCoord < 0.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz = len - 1.0;\n                  inCoord = inCoord + len * (f32(i32(f32(-inCoord / sz))) + 1.0);\n                }\n              } else if (inCoord > len - 1.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz = len - 1.0;\n                  inCoord = inCoord - len * f32(i32(f32(inCoord / sz)));\n                }\n              }\n              return clamp(inCoord, 0.0, len - 1.0);\n            } else if (uniforms.fillModeId == 4) {\n              return clamp(outCoord, 0.0, len - 1.0);\n            }\n            return outCoord;\n          }\n          fn readWithFillValue(batch : i32, coordY : i32, coordX : i32,\n            channel : i32) -> f32 {\n            var outputValue : f32;\n            if (0 <= coordY && coordY < uniforms.imageShape[1] && 0 <= coordX && coordX < uniforms.imageShape[2]) {\n                outputValue = getImage(batch, coordY, coordX, channel);\n            } else {\n              outputValue = uniforms.fillValue;\n            }\n            return outputValue;\n          }\n\n          ".concat($2(),"\n            if (index < uniforms.size) {\n              let coords = getCoordsFromIndex(index);\n              var outputValue : f32;\n              let batch = coords[0];\n              let x = coords[2];\n              let y = coords[1];\n              let channel = coords[3];\n              let xf = f32(x);\n              let yf = f32(y);\n              let a1 = getTransforms(batch, 0);\n              let a2 = getTransforms(batch, 1);\n              let a3 = getTransforms(batch, 2);\n              let b1 = getTransforms(batch, 3);\n              let b2 = getTransforms(batch, 4);\n              let b3 = getTransforms(batch, 5);\n              let c1 = getTransforms(batch, 6);\n              let c2 = getTransforms(batch, 7);\n              let projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = uniforms.fillValue;\n              } else {\n                let inX = (a1 * xf + a2 * yf + a3) / projection;\n                let inY = (b1 * xf + b2 * yf + b3) / projection;\n                let mapX = mapCoord(inX, f32(uniforms.imageShape[2]));\n                let mapY = mapCoord(inY, f32(uniforms.imageShape[1]));\n\n                if (uniforms.interpolationModeId == 1) {\n                  let coordY = i32(round(mapY));\n                  let coordX = i32(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  let yFloor = floor(mapY);\n                  let xFloor = floor(mapX);\n                  let yCeil = yFloor + 1.0;\n                  let xCeil = xFloor + 1.0;\n                  let valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, i32(yFloor), i32(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, i32(yFloor), i32(xCeil), channel);\n                  let valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, i32(yCeil), i32(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, i32(yCeil), i32(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutputAtIndex(index, outputValue);\n            }\n          }\n        ")}}]),e}();var V6={kernelName:uh,backendName:"webgpu",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.image,o=n.transforms,s=a.interpolation,c=a.fillMode,l=a.fillValue,d=a.outputShape,f=u(i.shape,4),p=f[0],h=f[1],m=f[2],v=f[3],g=u(null!=d?d:[h,m],2),y=g[0],b=g[1],x=new j6([p,y,b,v]),A="nearest"===s?1:2;switch(c){case"constant":default:t=1;break;case"reflect":t=2;break;case"wrap":t=3;break;case"nearest":t=4}var k=[{type:"int32",data:[A]},{type:"int32",data:[t]},{type:"float32",data:[l]}];return r.runWebGPUProgram(x,[i,o],"float32",k)}};for(var U6={kernelName:dh,backendName:"webgpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],c=new Array(s-1),l=0,d=0;d<s;d++)d!==i&&(c[l++]=o.shape[d]);var f=[],p=new Array(s).fill(0),h=o.shape.slice();h[i]=1;for(var m=new Array(u),v=0;v<m.length;v++){p[i]=v;var g=R3({inputs:{x:o},backend:n,attrs:{begin:p,size:h}}),y=y5({inputs:{x:g},backend:n,attrs:{shape:c}});m[v]=y,f.push(g)}return f.forEach((function(e){return n.disposeData(e.dataId)})),m}},H6=0,G6=[A5,p3,m3,g3,w3,S3,C3,N3,O3,z3,W3,U3,_5,Z3,e4,r4,i4,s4,c4,h4,m4,g4,x4,C4,T4,R4,O4,P4,L4,j4,U4,Z4,G4,K4,Q4,$4,e7,n7,i7,s7,c7,N5,q3,l7,f7,h7,v7,y7,x7,k7,S7,I7,E7,C7,T7,R7,k4,M7,O7,F7,P3,L7,z7,j7,U7,H7,G7,q7,L3,X7,Y7,Q7,b5,e6,n6,a6,o6,u6,l6,f6,h6,v6,M3,_6,R6,b6,x6,k6,w6,I6,E6,N6,y6,E4,O6,P6,W6,V6,k3,U6,D7];H6<G6.length;H6++){Nh(G6[H6])}var q6=function(){function e(t){Ye(this,e),this.device=t,this.numUsedBuffers=0,this.numFreeBuffers=0,this.freeBuffers=new Map,this.usedBuffers=new Map,this.numBytesUsed=0,this.numBytesAllocated=0}return Qe(e,[{key:"acquireUploadBuffer",value:function(e,t){return this.acquireBuffer(e,t,!0)}},{key:"acquireBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=K6(e,t);if(this.freeBuffers.has(r)||this.freeBuffers.set(r,[]),this.usedBuffers.has(r)||this.usedBuffers.set(r,[]),this.numBytesUsed+=e,this.numUsedBuffers++,this.freeBuffers.get(r).length>0){this.numFreeBuffers--;var a=this.freeBuffers.get(r).shift();return this.usedBuffers.get(r).push(a),a}this.numBytesAllocated+=e;var i=this.device.createBuffer({mappedAtCreation:n,size:e,usage:t});return this.usedBuffers.get(r).push(i),i}},{key:"releaseBuffer",value:function(e,t,n){if(0!==this.freeBuffers.size){var r=K6(t,n);this.freeBuffers.has(r)||this.freeBuffers.set(r,[]),this.freeBuffers.get(r).push(e),this.numFreeBuffers++,this.numUsedBuffers--;var a=this.usedBuffers.get(r),i=a.indexOf(e);if(i<0)throw new Error("Cannot release a buffer that was never provided by this buffer manager");a.splice(i,1),this.numBytesUsed-=t}}},{key:"releaseUploadBuffer",value:function(e,t,n){var r=this;e.mapAsync(GPUMapMode.WRITE).then((function(){r.releaseBuffer(e,t,n)}),(function(e){}))}},{key:"getNumUsedBuffers",value:function(){return this.numUsedBuffers}},{key:"getNumFreeBuffers",value:function(){return this.numFreeBuffers}},{key:"dispose",value:function(){this.freeBuffers.forEach((function(e,t){e.forEach((function(e){e.destroy()}))})),this.usedBuffers.forEach((function(e,t){e.forEach((function(e){e.destroy()}))})),this.freeBuffers=new Map,this.usedBuffers=new Map,this.numUsedBuffers=0,this.numFreeBuffers=0,this.numBytesUsed=0,this.numBytesAllocated=0}}]),e}();function K6(e,t){return"".concat(e,"_").concat(t)}var X6=function(){function e(t){Ye(this,e),this.device=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures=new Map,this.usedTextures=new Map,this.numBytesUsed=0,this.numBytesAllocated=0}return Qe(e,[{key:"acquireTexture",value:function(e,t,n,r){var a=e*t*Y6(n),i=Z6(e,t,n,r);if(this.freeTextures.has(i)||this.freeTextures.set(i,[]),this.usedTextures.has(i)||this.usedTextures.set(i,[]),this.numBytesUsed+=a,this.numUsedTextures++,this.freeTextures.get(i).length>0){this.numFreeTextures--;var o=this.freeTextures.get(i).shift();return this.usedTextures.get(i).push(o),o}this.numBytesAllocated+=a;var s=this.device.createTexture({size:[e,t],format:n,usage:r});return this.usedTextures.get(i).push(s),s}},{key:"releaseTexture",value:function(e,t,n,r,a){if(0!==this.freeTextures.size){var i=Z6(t,n,r,a);this.freeTextures.has(i)||this.freeTextures.set(i,[]),this.freeTextures.get(i).push(e),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures.get(i),s=o.indexOf(e);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(s,1);var u=t*n*Y6(r);this.numBytesUsed-=u}}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){this.freeTextures.forEach((function(e,t){e.forEach((function(e){e.destroy()}))})),this.usedTextures.forEach((function(e,t){e.forEach((function(e){e.destroy()}))})),this.freeTextures=new Map,this.usedTextures=new Map,this.numUsedTextures=0,this.numFreeTextures=0,this.numBytesUsed=0,this.numBytesAllocated=0}}]),e}();function Z6(e,t,n,r){return"".concat(e,"_").concat(t,"_").concat(n,"_").concat(r)}function Y6(e){if("rgba8unorm"===e)return 16;throw new Error("".concat(e," is not supported!"))}var J6=id().getNumber("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD"),Q6=function(e,t){var n=e.limits.maxComputeWorkgroupsPerDimension,r=t.dispatchLayout,a=t.dispatch;if(a.every((function(e){return e<=n})))return a;Fh.assert(a[0]>n&&void 0===r.y&&void 0===r.z,(function(){return"Dispatch size exceeds WebGPU limits in Y or Z dimension."}));var i=Math.ceil(Math.sqrt(a[0]));return i>n?(i=Math.ceil(Math.cbrt(a[0])),Fh.assert(i<=n,(function(){return"Total dispatch size exceeds WebGPU maximum."})),[i,i,i]):[i,i,1]},$6=function(e){et(n,e);var t=ot(n);function n(e){var r,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Ye(this,n),(r=t.call(this)).commandQueueOwnedIds=new WeakSet,r.tensorDisposalQueue=[],r.uniformDisposalQueue=[],r.stagingDisposalQueue=[],r.textureDisposalQueue=[],r.disposed=!1,r.uploadWaitMs=0,r.downloadWaitMs=0,r.dispatchNumberInEncoder=0,r.fromPixelTextureLayout=null,r.fromPixelImportTextureLayout=null,!H2())throw new Error("WebGPU is not supported on this device");return r.layoutCache={},r.pipelineCache={},r.device=e,r.queue=e.queue,r.currentCommandEncoder=null,r.currentComputePass=null,r.supportTimeQuery=a,r.bufferManager=new q6(r.device),r.textureManager=new X6(r.device),r.tensorMap=new al(at(r),qg()),r.supportTimeQuery&&(r.querySet=r.device.createQuerySet({type:"timestamp",count:2})),id().getBool("WEBGPU_USE_PROFILE_TOOL")&&(r.dummyCanvas=document.createElement("canvas"),r.dummyCanvas.width=1,r.dummyCanvas.height=1,r.dummyContext=r.dummyCanvas.getContext("webgpu"),r.dummyContext.configure({device:e,format:"bgra8unorm"}),document.body.appendChild(r.dummyCanvas)),it(r)}return Qe(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"floatPrecision",value:function(){return 32}},{key:"defaultGpuBufferUsage",value:function(){return GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST}},{key:"flushDisposalQueue",value:function(){var e=this;this.tensorDisposalQueue.forEach((function(t){e.maybeReleaseBuffer(t),e.tensorMap.delete(t)})),this.uniformDisposalQueue.forEach((function(t){return e.bufferManager.releaseBuffer(t.buffer,t.byteSize,t.usage)})),this.stagingDisposalQueue.forEach((function(t){return e.bufferManager.releaseUploadBuffer(t.buffer,t.byteSize,t.usage)})),this.textureDisposalQueue.forEach((function(t){return e.textureManager.releaseTexture(t.texture,t.width,t.height,t.format,t.usage)})),this.tensorDisposalQueue=[],this.uniformDisposalQueue=[],this.stagingDisposalQueue=[],this.textureDisposalQueue=[]}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.tensorMap.has(e)){var n=this.tensorMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;if(this.commandQueueOwnedIds.has(e))return this.tensorDisposalQueue.push(e),!1;this.maybeReleaseBuffer(e);var r=this.tensorMap.get(e),a=r.complexTensorInfos;null!=a&&(this.disposeData(a.real.dataId,!0),this.disposeData(a.imag.dataId,!0)),this.tensorMap.delete(e)}return!0}},{key:"memory",value:function(){return{numBytesInGPU:this.bufferManager.numBytesUsed,numBytesAllocatedInGPU:this.bufferManager.numBytesAllocated,unreliable:!1}}},{key:"getBufferManager",value:function(){return this.bufferManager}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"acquireBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultGpuBufferUsage();return this.bufferManager.acquireBuffer(e,t)}},{key:"maybeReleaseBuffer",value:function(e){var t=this.tensorMap.get(e);null!=t&&null!=t.bufferInfo.buffer&&(this.bufferManager.releaseBuffer(t.bufferInfo.buffer,t.bufferInfo.byteSize,t.bufferInfo.usage),t.bufferInfo.buffer=null)}},{key:"refCount",value:function(e){return this.tensorMap.has(e)?this.tensorMap.get(e).refCount:0}},{key:"incRef",value:function(e){this.tensorMap.get(e).refCount++}},{key:"decRef",value:function(e){this.tensorMap.has(e)&&this.tensorMap.get(e).refCount--}},{key:"write",value:function(e,t,n){if("complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()},a=Fh.sizeFromShape(t)*V2(n);return this.tensorMap.set(r,{dtype:n,shape:t,values:e,bufferInfo:{byteSize:a,usage:this.defaultGpuBufferUsage()},refCount:1}),r}},{key:"move",value:function(e,t,n,r,a){if("complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i=Fh.sizeFromShape(n)*V2(r);this.tensorMap.set(e,{dtype:r,shape:n,values:t,bufferInfo:{byteSize:i,usage:this.defaultGpuBufferUsage()},refCount:a})}},{key:"submitQueue",value:function(){this.ensureComputePassEnded(),this.queue.submit([this.currentCommandEncoder.finish()]),this.currentCommandEncoder=null,this.dispatchNumberInEncoder=0,this.commandQueueOwnedIds=new WeakSet,this.flushDisposalQueue()}},{key:"getBuffer",value:function(e){return this.uploadToGPU(e),this.tensorMap.get(e).bufferInfo.buffer}},{key:"ensureCommandEncoderReady",value:function(){this.currentCommandEncoder||(this.currentCommandEncoder=this.device.createCommandEncoder())}},{key:"ensureComputePassEnded",value:function(){this.currentComputePass&&(this.currentComputePass.end(),this.currentComputePass=null)}},{key:"getComputePass",value:function(){return this.currentComputePass||(this.currentComputePass=this.currentCommandEncoder.beginComputePass()),this.currentComputePass}},{key:"getBufferData",value:function(){var e=ct(st().mark((function e(t,n){var r,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.acquireBuffer(n,GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ),this.ensureCommandEncoderReady(),this.ensureComputePassEnded(),this.currentCommandEncoder.copyBufferToBuffer(t,0,r,0,n),this.submitQueue(),e.next=7,r.mapAsync(GPUMapMode.READ);case 7:return a=r.getMappedRange().slice(0),e.abrupt("return",(r.unmap(),null!=r&&this.bufferManager.releaseBuffer(r,n,GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ),id().getBool("WEBGPU_USE_PROFILE_TOOL")&&(Fh.assert(void 0!==this.dummyContext,(function(){return"Fail to get context for profiling tool"})),this.dummyContext.getCurrentTexture()),a));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.tensorMap.get(e);return this.maybeReleaseBuffer(e),n.values=t,n.values}},{key:"readSync",value:function(e){var t=this.tensorMap.get(e).values;if(null==t)throw new Error("WebGPU readSync is only available for CPU-resident tensors.");return t}},{key:"read",value:function(){var e=ct(st().mark((function e(t){var n,r,a,i,o,s,u;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.tensorMap.has(t)){e.next=2;break}throw new Error("Tensor ".concat(t," was not registered!"));case 2:if(n=this.tensorMap.get(t),null==(r=n.values)){e.next=5;break}return e.abrupt("return",this.convertAndCacheOnCPU(t,r));case 5:if("complex64"!==n.dtype){e.next=14;break}return e.next=8,Promise.all([this.read(n.complexTensorInfos.real.dataId),this.read(n.complexTensorInfos.imag.dataId)]);case 8:i=e.sent,o=i[0],s=i[1],a=sI.mergeRealAndImagArrays(o,s),e.next=23;break;case 14:if(null==n.values){e.next=18;break}e.t0=n.values,e.next=21;break;case 18:return e.next=20,this.getBufferData(n.bufferInfo.buffer,n.bufferInfo.byteSize);case 20:e.t0=e.sent;case 21:u=e.t0,a=U2(u,n.dtype);case 23:return e.abrupt("return",(this.convertAndCacheOnCPU(t,a),a));case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=this.tensorMap.get(e),n=t.values,r=t.dtype,a=t.shape,i=t.bufferInfo;if("complex64"===r)throw new Error("Does not support reading buffer for complex64 dtype.");if(null==i.buffer)throw null!=n?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var o=Fh.sizeFromShape(a)*V2(r),s=this.acquireBuffer(o);this.ensureCommandEncoderReady(),this.ensureComputePassEnded(),this.currentCommandEncoder.copyBufferToBuffer(i.buffer,0,s,0,o),this.submitQueue();var u=this.makeTensorInfo(a,r),c=qg().makeTensorFromTensorInfo(u);return this.tensorMap.get(u.dataId).bufferInfo.buffer=s,{tensorRef:c,buffer:s,bufSize:o}}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId);if("string"===e.dtype)try{var n=t.map((function(e){return Fh.decodeString(e)}));return cg(e.shape,e.dtype,n)}catch(n){throw new Error("Failed to decode encoded string bytes into utf-8")}return cg(e.shape,e.dtype,t)}},{key:"time",value:function(){var e=ct(st().mark((function e(t){var n,r,a,i,o,s,u;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.activeTimers,r=[],a=!1,null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,t(),i=Fh.flatten(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=Fh.flatten(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=n,a&&(this.programTimersStack=null),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},e.next=7,Promise.all(i);case 7:return u=e.sent,e.abrupt("return",(s.kernelMs=Fh.sum(u),s.getExtraProfileInfo=function(){return u.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},this.uploadWaitMs=0,this.downloadWaitMs=0,s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAndSavePipeline",value:function(e,t){return e in this.pipelineCache||(this.pipelineCache[e]=t()),this.pipelineCache[e]}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&Fh.isString(n[0])){var a=n.map((function(e){return Fh.encodeString(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}},{key:"tensorToBinding",value:function(e){if(!e)return null;var t=this.tensorMap.get(e.dataId);return{offset:0,size:t.bufferInfo.byteSize,buffer:t.bufferInfo.buffer}}},{key:"getQueryTime",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.supportTimeQuery?this.getTimeFromQuerySet(t):0);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uploadToGPU",value:function(e){var t=this.tensorMap.get(e);if(null==t.bufferInfo.buffer&&(t.bufferInfo.buffer=this.acquireBuffer(t.bufferInfo.byteSize),t.values)){var n=this.bufferManager.acquireUploadBuffer(t.bufferInfo.byteSize,GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC),r=n.getMappedRange();"int32"===t.dtype||"bool"===t.dtype?new Int32Array(r).set(t.values):new Float32Array(r).set(t.values),n.unmap(),this.ensureCommandEncoderReady(),this.ensureComputePassEnded(),this.currentCommandEncoder.copyBufferToBuffer(n,0,t.bufferInfo.buffer,0,t.bufferInfo.byteSize);var a={byteSize:t.bufferInfo.byteSize,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC,buffer:n};this.stagingDisposalQueue.push(a)}}},{key:"makeUniforms",value:function(e){var t=0,n=0,r=[];e.forEach((function(e){var a;switch(0===e.data.length&&(e.data=[1]),e.data.length){case 1:a=4;break;case 2:a=8;break;case 3:case 4:case 5:case 6:a=16;break;default:Fh.assert(!1,(function(){return"Unsupported ".concat(e.data.length,"D shape")}))}(5===n||6===n)&&(a=16),t=Math.ceil(t/a)*a,n=e.data.length,r.push(t),t+=4*e.data.length}));var a=new ArrayBuffer(t);e.forEach((function(e,t){var n=r[t];"int32"===e.type?new Int32Array(a,n,e.data.length).set(e.data):"uint32"===e.type?new Uint32Array(a,n,e.data.length).set(e.data):new Float32Array(a,n,e.data.length).set(e.data)}));var i=this.acquireBuffer(t,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.queue.writeBuffer(i,0,a,0,t);var o={byteSize:t,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM,buffer:i};return this.uniformDisposalQueue.push(o),{offset:0,size:t,buffer:i}}},{key:"createLayout",value:function(e){var t=[];t.push({binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}});for(var n=0;n<e;n++)t.push({binding:n+1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage"}});t.push({binding:e+1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}});var r=this.device.createBindGroupLayout({entries:t});return{bindGroupLayout:r,pipelineLayout:this.device.createPipelineLayout({bindGroupLayouts:[r]})}}},{key:"getCachedOrCreateLayout",value:function(e){return e in this.layoutCache||(this.layoutCache[e]=this.createLayout(e)),this.layoutCache[e]}},{key:"makeBindGroup",value:function(e,t,n,r,a){var i=[r].concat(Tn(n));return a&&i.push(a),e.createBindGroup({layout:t,entries:i.map((function(e,t){return{binding:t,resource:e}}))})}},{key:"runWebGPUProgram",value:function(e,t,n,r,a){var i=this;if(!a){if(a=this.makeTensorInfo(e.outputShape,n),0===Fh.sizeFromShape(a.shape))return this.tensorMap.get(a.dataId).values=Fh.getTypedArrayFromDType(a.dtype,0),a;this.uploadToGPU(a.dataId)}e.dispatch=Q6(this.device,e);var o=[{type:"float32",data:[NaN]}],s=t.concat(a).map((function(e){return e.shape})),u="int32";s.map((function(e){o.push({type:u,data:e})}));var c=Fh.computeStrides(a.shape);if(o.push({type:u,data:c}),e.size){var l=Fh.sizeFromShape(e.outputShape);o.push({type:u,data:[e.isVec4?l/4:l]})}r&&(o=[].concat(Tn(o),Tn(r)));var d=this.makeUniforms(o),f=t.map((function(t,n){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");return i.uploadToGPU(t.dataId),{dtype:i.tensorMap.get(t.dataId).dtype,shape:t.shape,name:e.variableNames[n]}})),p=f.map((function(e){return e.dtype})).concat(a.dtype),h=f.map((function(e){return sI.getBroadcastDims(e.shape,a.shape)})),m=f.map((function(e){return Fh.arraysEqual(e.shape,a.shape)})).join("_"),v=h.map((function(e){return e.join("_")})).join(";"),g=n5(e,s,p,v,m),y=this.getCachedOrCreateLayout(e.variableNames.length),b=y.bindGroupLayout,x=y.pipelineLayout,A=this.getAndSavePipeline(g,(function(){return Y2(i.device,e,x,f,a)})),k=null!=this.activeTimers,w=this.makeBindGroup(this.device,b,t.map((function(e){return i.tensorToBinding(e)})),this.tensorToBinding(a),d);this.ensureCommandEncoderReady();var S=this.getComputePass();return k&&this.supportTimeQuery&&S.writeTimestamp(this.querySet,0),S.setPipeline(A),S.setBindGroup(0,w),S.dispatchWorkgroups(e.dispatch[0],e.dispatch[1],e.dispatch[2]),k&&this.supportTimeQuery&&S.writeTimestamp(this.querySet,1),this.dispatchNumberInEncoder++,t.forEach((function(e){i.commandQueueOwnedIds.add(e.dataId)})),this.commandQueueOwnedIds.add(a.dataId),id().get("WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE")<=this.dispatchNumberInEncoder&&this.submitQueue(),k&&this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(this.querySet)}),a}},{key:"getFromPixelTextureLayout",value:function(e){return e?(null===this.fromPixelImportTextureLayout&&(this.fromPixelImportTextureLayout=this.createFromPixelTextureLayout(!0)),this.fromPixelImportTextureLayout):(null===this.fromPixelTextureLayout&&(this.fromPixelTextureLayout=this.createFromPixelTextureLayout(!1)),this.fromPixelTextureLayout)}},{key:"createFromPixelTextureLayout",value:function(e){var t=[];t.push({binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}),e?t.push({binding:1,visibility:GPUShaderStage.COMPUTE,externalTexture:{}}):t.push({binding:1,visibility:GPUShaderStage.COMPUTE,texture:{}}),t.push({binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{}});var n=this.device.createBindGroupLayout({entries:t});return{bindGroupLayout:n,pipelineLayout:this.device.createPipelineLayout({bindGroupLayouts:[n]})}}},{key:"copyExternalImageToTexture",value:function(e,t){var n=GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING,r="rgba8unorm",a=this.textureManager.acquireTexture(t[1],t[0],r,n),i=a.createView();this.queue.copyExternalImageToTexture({source:e},{texture:a},[t[1],t[0]]);var o={width:t[1],height:t[0],format:r,usage:n,texture:a};return this.textureDisposalQueue.push(o),i}},{key:"runFromPixelsProgram",value:function(e,t,n,r,a){var i=this;e.dispatch=Q6(this.device,e);var o=this.makeTensorInfo(t,"int32");if(0===Fh.sizeFromShape(o.shape))return this.tensorMap.get(o.dataId).values=Fh.getTypedArrayFromDType(o.dtype,0),o;this.uploadToGPU(o.dataId);var s,u=n5(e,[o.shape]),c=this.getFromPixelTextureLayout(r),l=this.getAndSavePipeline(u,(function(){return Y2(i.device,e,c.pipelineLayout,[],o,!0)}));if(r){var d={source:a};s=this.device.importExternalTexture(d)}else s=this.copyExternalImageToTexture(a,o.shape);var f=this.tensorToBinding(o),p=this.makeUniforms(n),h=this.device.createBindGroup({layout:c.bindGroupLayout,entries:[{binding:0,resource:{buffer:f.buffer}},{binding:1,resource:s},{binding:2,resource:{buffer:p.buffer}}]});this.ensureCommandEncoderReady();var m=this.getComputePass(),v=null!=this.activeTimers;return v&&this.supportTimeQuery&&m.writeTimestamp(this.querySet,0),m.setPipeline(l),m.setBindGroup(0,h),m.dispatchWorkgroups(e.dispatch[0],e.dispatch[1],e.dispatch[2]),v&&this.supportTimeQuery&&m.writeTimestamp(this.querySet,1),this.commandQueueOwnedIds.add(o.dataId),this.dispatchNumberInEncoder++,id().get("WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE")<=this.dispatchNumberInEncoder&&this.submitQueue(),v&&this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(this.querySet)}),o}},{key:"getTimeFromQuerySet",value:function(){var e=ct(st().mark((function e(t){var n,r,a,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.acquireBuffer(16,GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE),r=this.acquireBuffer(16,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),this.ensureCommandEncoderReady(),this.ensureComputePassEnded(),this.currentCommandEncoder.resolveQuerySet(t,0,2,n,0),this.currentCommandEncoder.copyBufferToBuffer(n,0,r,0,16),this.submitQueue(),e.next=8,r.mapAsync(GPUMapMode.READ);case 8:return a=new BigUint64Array(r.getMappedRange()),i=Number(a[1]-a[0]),e.abrupt("return",(r.unmap(),this.bufferManager.releaseBuffer(r,16,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),this.bufferManager.releaseBuffer(n,16,GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE),i/1e6));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J6;return id().getBool("WEBGPU_CPU_FORWARD")&&e.every((function(e){return null==t.tensorMap.get(e.dataId).bufferInfo.buffer&&Fh.sizeFromShape(e.shape)<n}))}},{key:"numDataIds",value:function(){return this.tensorMap.numDataIds()-this.tensorDisposalQueue.length}},{key:"dispose",value:function(){this.disposed||(this.bufferManager.dispose(),this.textureManager.dispose(),this.disposed=!0)}}]),n}(il),e8=$6;e8.nextDataId=0;var t8={};Dc(t8,{WebGPUBackend:function(){return e8},webgpu_util:function(){return F2}}),H2()&&iy("webgpu",ct(st().mark((function e(){var t,n,r,a,i,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return id().set("CHECK_COMPUTATION_FOR_ERRORS",!1),t={powerPreference:id().get("WEBGPU_USE_LOW_POWER_GPU")?"low-power":"high-performance"},e.next=4,navigator.gpu.requestAdapter(t);case 4:return n=e.sent,r=n.limits,a={},i=n.features.has("timestamp-query"),a.requiredLimits={maxComputeWorkgroupStorageSize:r.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:r.maxComputeWorkgroupsPerDimension},i?a.requiredFeatures=["timestamp-query"]:console.warn("This device doesn't support timestamp-query extension. Start Chrome browser with flag --disable-dawn-features=disallow_unsafe_apis then try again. Or zero will shown for the kernel time when profiling mode isenabled. Using performance.now is not workable for webgpu sinceit doesn't support synchronously to read data from GPU."),e.next=11,n.requestDevice(a);case 11:return o=e.sent,e.abrupt("return",new e8(o,i));case 13:case"end":return e.stop()}}),e)}))),3);var n8,r8=function(e){return e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64",e}(r8||{}),a8=function(e){return e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu",e}(a8||{});var i8={kernelName:yh,backendName:"wasm",setupFunc:function(e){n8=e.wasm.cwrap(yh,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights;if("float32"!==a.dtype||"float32"!==i.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");var u=r.transposeA,c=r.transposeB,l=r.activation,d=r.leakyreluAlpha,f=n.dataIdMap.get(a.dataId).id,p=n.dataIdMap.get(i.dataId).id,h=0;if(null!=o){var m=n.dataIdMap.get(o.dataId);if(1!==m.shape.length)throw new Error("_FusedMatMul only supports rank-1 bias but got rank ".concat(m.shape.length,"."));h=m.id}var v=null==s?0:n.dataIdMap.get(s.dataId).id,g=a8[l];if(null==g)throw new Error("".concat(l," activation not yet supported for FusedConv2D in the wasm backend."));var y=u?a.shape[2]:a.shape[1],b=c?i.shape[1]:i.shape[2],x=py.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)),A=n.makeOutput([].concat(Tn(x),[y,b]),a.dtype),k=n.dataIdMap.get(A.dataId).id,w=new Uint8Array(new Int32Array(a.shape).buffer),S=new Uint8Array(new Int32Array(i.shape).buffer);return n8(f,w,a.shape.length,p,S,i.shape.length,u,c,g,h,v,d||0,k),A}};function o8(e,t){var n;return{kernelName:e,backendName:"wasm",setupFunc:function(t){n=t.wasm.cwrap(e,null,["number","number","number"])},kernelFunc:function(e){var r=e.backend,a=e.inputs.x,i=r.dataIdMap.get(a.dataId).id,o=r.makeOutput(a.shape,t||a.dtype),s=r.dataIdMap.get(o.dataId).id;return 0===Fh.sizeFromShape(o.shape)||n(i,r8[a.dtype],s),o}}}var s8=o8(ld);function u8(e,t,n){var r;return{kernelName:e,backendName:"wasm",setupFunc:function(t){r=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs,i=a.a,o=a.b,s=t.dataIdMap.get(i.dataId).id,u=t.dataIdMap.get(o.dataId).id,c=null!=n?n:i.dtype,l=sI.assertAndGetBroadcastShape(i.shape,o.shape),d=t.makeOutput(l,c);if(0===Fh.sizeFromShape(l))return d;var f=new Uint8Array(new Int32Array(i.shape).buffer),p=new Uint8Array(new Int32Array(o.shape).buffer),h=t.dataIdMap.get(d.dataId).id;return r(s,f,i.shape.length,u,p,o.shape.length,r8[i.dtype],h),d}}}var c8,l8=u8(pd);var d8={kernelName:hd,backendName:"wasm",setupFunc:function(e){c8=e.wasm.cwrap(hd,null,["array","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=n.makeOutput(t[0].shape,t[0].dtype);if(0===Fh.sizeFromShape(r.shape))return r;var a=t.map((function(e){return n.dataIdMap.get(e.dataId).id})),i=new Uint8Array(new Int32Array(a).buffer),o=n.dataIdMap.get(r.dataId).id;return c8(i,a.length,r8[r.dtype],o),r}};function f8(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype),a=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(r).set(a),r}var p8,h8={kernelName:If,backendName:"wasm",kernelFunc:f8};function m8(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=function(e,t){for(var n=[],r=[],a=0;a<e.length;++a)1!==e[a]&&n.push(e[a]),1!==e[t[a]]&&r.push(t[a]);for(var i=0;i<r.length;++i){for(var o=-1,s=0;s<r.length;++s)r[s]>=i&&(-1===o||r[o]>r[s])&&(o=s);r[o]=i}return[n,r]}(t.x.shape,r.perm),i=u(a,2),o=i[0],s=i[1],c=!0,l=0;l<s.length;l++)s[l]!==l&&(c=!1);var d=function(e,t){for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];return n}(t.x.shape,r.perm),f={dataId:t.x.dataId,shape:o,dtype:t.x.dtype};if(c){var p=f8({inputs:t,backend:n});return p.shape=d,p}var h=n.makeOutput(d,f.dtype),m=n.dataIdMap.get(f.dataId).id,v=n.dataIdMap.get(h.dataId).id,g=new Uint8Array(new Int32Array(s).buffer),y=new Uint8Array(new Int32Array(f.shape).buffer);return p8(m,y,f.shape.length,r8[f.dtype],v,g,s.length),h}var v8,g8={kernelName:ch,backendName:"wasm",kernelFunc:m8,setupFunc:function(e){p8=e.wasm.cwrap(ch,null,["number","array","number","number","number","array","number"])}};function y8(e,t,n){var r=e.shape,a=e.shape.length,i=Fh.parseAxisParam(t,r),o=i,s=sI.getAxesPermutation(o,a),u=null,c=!1;if(null!=s){for(var l=new Array(a),d=0;d<l.length;d++)l[d]=r[s[d]];o=sI.getInnerMostAxes(o.length,a),u=m8({inputs:{x:e},attrs:{perm:s},backend:n});var f=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(u.dataId).id!==f&&(c=!0)}return{transposed:u,originalAxes:i,axes:o,inputWasTransposed:c}}var b8,x8={kernelName:md,backendName:"wasm",setupFunc:function(e){v8=e.wasm.cwrap(md,null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,c=o,l=y8(o,a,t),d=l.transposed,f=l.axes,p=l.originalAxes,h=l.inputWasTransposed;h&&(c=d,s=A=t.dataIdMap.get(d.dataId).id);var m=c.shape.length;sI.assertAxesAreInnerMostDims("all",f,m);var v=u(sI.computeOutAndReduceShapes(c.shape,f),2),g=v[0],y=v[1],b=Fh.sizeFromShape(y),x=t.makeOutput(g,o.dtype);if(0!==Fh.sizeFromShape(c.shape)){var A=t.dataIdMap.get(x.dataId).id;v8(s,b,A)}if(h&&t.disposeData(d.dataId),i){var k=sI.expandShapeToKeepDim(x.shape,p);x.shape=k}return x}};var A8,k8={kernelName:vd,backendName:"wasm",setupFunc:function(e){b8=e.wasm.cwrap(vd,null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,c=o,l=y8(o,a,t),d=l.transposed,f=l.axes,p=l.originalAxes,h=l.inputWasTransposed;h&&(c=d,s=A=t.dataIdMap.get(d.dataId).id);var m=c.shape.length;sI.assertAxesAreInnerMostDims("any",f,m);var v=u(sI.computeOutAndReduceShapes(c.shape,f),2),g=v[0],y=v[1],b=Fh.sizeFromShape(y),x=t.makeOutput(g,o.dtype);if(0!==Fh.sizeFromShape(c.shape)){var A=t.dataIdMap.get(x.dataId).id;b8(s,b,A)}if(h&&t.disposeData(d.dataId),i){var k=sI.expandShapeToKeepDim(x.shape,p);x.shape=k}return x}};var w8,S8={kernelName:gd,backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.axis,a=n.x,i=t.dataIdMap.get(a.dataId).id,o=i,s=a,u=y8(a,r,t),c=u.transposed,l=u.axes,d=u.inputWasTransposed;if(d){var f=t.dataIdMap.get(c.dataId).id;f!==i&&(s=c,o=f)}var p=s.shape.slice(0,-1),h=t.makeOutput(p,"int32"),m=t.dataIdMap.get(h.dataId).id,v=Fh.sizeFromShape(h.shape),g=s.shape[l[0]];return A8(o,r8[s.dtype],v,g,m),d&&t.disposeData(c.dataId),h},setupFunc:function(e){A8=e.wasm.cwrap(gd,null,["number","number","number","number","number"])}};var I8={kernelName:Sd,backendName:"wasm",setupFunc:function(e){w8=e.wasm.cwrap(Sd,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=r.dataIdMap.get(a.dataId).id,o=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode,l=sI.computePool2DInfo(a.shape,o,s,1,u,c),d=l.filterHeight,f=l.filterWidth,p=l.padInfo.top,h=l.padInfo.right,m=l.padInfo.bottom,v=l.padInfo.left,g=l.strideHeight,y=l.strideWidth,b=l.inChannels;if("channelsLast"!==l.dataFormat)throw new Error("wasm backend does not support dataFormat:'".concat(l.dataFormat,"'. Please use 'channelsLast'."));if(1!==l.dilationWidth||1!==l.dilationHeight)throw new Error("was backend only supports average pooling with dilation = [1, 1], got [".concat(l.dilationHeight,", ").concat(l.dilationWidth,"]."));var x=r.makeOutput(l.outShape,"float32"),A=r.dataIdMap.get(x.dataId).id;return w8(i,a.shape[0],a.shape[1],a.shape[2],d,f,p,h,m,v,g,y,b,A),x}};function E8(e){var t=e.inputs,n=e.attrs,r=t.x,a=n.shape,i=Fh.sizeFromShape(r.shape),o=Fh.inferFromImplicitShape(a,i);return Fh.assert(i===Fh.sizeFromShape(o),(function(){return"new shape: ".concat(o,", old shape: ").concat(r.shape,". New shape and old shape must have the same number of elements.")})),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:o,dtype:r.dtype}}var C8,N8={kernelName:kp,backendName:"wasm",kernelFunc:E8};var T8={kernelName:Nd,backendName:"wasm",setupFunc:function(e){C8=e.wasm.cwrap(Nd,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;if("float32"!==a.dtype||"float32"!==i.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");var u=a.shape.length,c=i.shape.length,l=o?a.shape[u-2]:a.shape[u-1],d=s?i.shape[c-1]:i.shape[c-2],f=o?a.shape[u-1]:a.shape[u-2],p=s?i.shape[c-2]:i.shape[c-1],h=a.shape.slice(0,-2),m=i.shape.slice(0,-2),v=Fh.sizeFromShape(h),g=Fh.sizeFromShape(m),y=py.assertAndGetBroadcastShape(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([f,p]);Fh.assert(l===d,(function(){return"Error in matMul: inner shapes (".concat(l,") and (").concat(d,") of Tensors with shapes ").concat(a.shape," and ").concat(i.shape," and transposeA=").concat(o," and transposeB=").concat(s," must match.")}));var b=s?[g,p,d]:[g,d,p],x=E8({inputs:{x:a},backend:n,attrs:{shape:o?[v,l,f]:[v,f,l]}}),A=E8({inputs:{x:i},backend:n,attrs:{shape:b}}),k=n.dataIdMap.get(x.dataId).id,w=n.dataIdMap.get(A.dataId).id,S=o?x.shape[2]:x.shape[1],I=s?A.shape[1]:A.shape[2],E=Math.max(v,g),C=n.makeOutput([E,S,I],x.dtype),N=n.dataIdMap.get(C.dataId).id,T=new Uint8Array(new Int32Array(x.shape).buffer),_=new Uint8Array(new Int32Array(A.shape).buffer);return C8(k,T,x.shape.length,w,_,A.shape.length,o,s,N),n.disposeData(x.dataId),n.disposeData(A.dataId),C.shape=y,C}};function _8(e){var t=e.inputs.x,n=e.attrs,r=n.begin,a=n.size,i=e.backend,o=u(Oy.parseSliceParams(t,r,a),2),s=o[0],c=o[1],l=Oy.isSliceContinous(t.shape,s,c),d=i.readSync(t.dataId),f=i.makeOutput(c,t.dtype),p=Fh.computeStrides(t.shape),h=i.dataIdMap.get(f.dataId);if(l){var m=Oy.computeFlatOffset(s,p);return"string"===t.dtype?h.stringBytes=d.slice(m,m+Fh.sizeFromShape(c)):i.typedArrayFromHeap(f).set(d.subarray(m,m+Fh.sizeFromShape(c))),f}if("string"===t.dtype){var v=Mj(d,s,c,t.shape,t.dtype);return h.stringBytes=v,f}var g=i.typedArrayFromHeap(f),y=t.shape.length;if(2===y)!function(e,t,n,r,a){for(var i=0,o=r[0],s=r[1],u=o+a[0],c=o;c<u;c++){var l=c*t+s;n.set(e.subarray(l,l+a[1]),i),i+=a[1]}}(d,p[0],g,s,c);else if(3===y)!function(e,t,n,r,a,i){for(var o=0,s=a[0],u=a[1],c=a[2],l=s+i[0],d=u+i[1],f=s;f<l;f++)for(var p=u;p<d;p++){var h=f*t+p*n+c;r.set(e.subarray(h,h+i[2]),o),o+=i[2]}}(d,p[0],p[1],g,s,c);else if(4===y)!function(e,t,n,r,a,i,o){for(var s=0,u=i[0],c=i[1],l=i[2],d=u+o[0],f=c+o[1],p=l+o[2],h=i[3],m=u;m<d;m++)for(var v=c;v<f;v++)for(var g=l;g<p;g++){var y=m*t+v*n+g*r+h;a.set(e.subarray(y,y+o[3]),s),s+=o[3]}}(d,p[0],p[1],p[2],g,s,c);else{var b=Mj(d,s,c,t.shape,t.dtype);g.set(b)}return f}var R8={kernelName:Pp,backendName:"wasm",kernelFunc:_8};var M8={kernelName:Td,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops,s=i.reduce((function(e,t){return e*t})),u=sI.getReshaped(a.shape,i,s),c=sI.getPermuted(u.length,i.length),l=sI.getReshapedPermuted(a.shape,i,s),d=sI.getSliceBeginCoords(o,i.length),f=sI.getSliceSize(l,o,i.length),p=E8({inputs:{x:a},backend:n,attrs:{shape:u}}),h=m8({inputs:{x:p},backend:n,attrs:{perm:c}}),m=_8({inputs:{x:E8({inputs:{x:h},backend:n,attrs:{shape:l}})},backend:n,attrs:{begin:d,size:f}});return n.disposeData(p.dataId),n.disposeData(h.dataId),n.disposeData(p.dataId),m}};function O8(e){var t=e.inputs.x,n=e.attrs.dtype,r=e.backend,a=r.makeOutput(t.shape,n),i=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(a).set(i),a}var F8,P8={kernelName:Od,backendName:"wasm",kernelFunc:O8},D8=o8(Fd);var L8={kernelName:Pd,backendName:"wasm",setupFunc:function(e){F8=e.wasm.cwrap(Pd,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.clipValueMin,o=r.clipValueMax,s=n.dataIdMap.get(a.dataId).id,u=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(u.dataId).id;return F8(s,i,o,c),u}};function z8(e){var t=e.inputs,n=e.backend,r=Fh.parseAxisParam(e.attrs.axis,t[0].shape)[0],a=sI.computeOutShape(t.map((function(e){return e.shape})),r),i=t.filter((function(e){return Fh.sizeFromShape(e.shape)>0}));if(1===i.length)return f8({inputs:{x:i[0]},backend:n});var o=n.makeOutput(a,t[0].dtype);if(0===Fh.sizeFromShape(a))return o;var s=i.map((function(e){return e.shape}));if(sI.assertParamsConsistent(s,r),"string"===i[0].dtype){var u=i.map((function(e){var t=Fh.sizeFromShape(e.shape.slice(r));return E8({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),c=u.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}}));a=sI.computeOutShape(u.map((function(e){return e.shape})),1);var l=1===u[0].shape[0],d=EW(c,a,t[0].dtype,l),f=sI.computeOutShape(i.map((function(e){return e.shape})),r);return o.shape=f,n.dataIdMap.get(o.dataId).stringBytes=sI.fromStringArrayToUint8(d),u.forEach((function(e){return n.disposeData(e.dataId)})),o}for(var p=Fh.sizeFromShape(i[0].shape.slice(0,r)),h=0,m=i.map((function(e){var t=Fh.sizeFromShape(e.shape.slice(r));return h+=t,t})),v=i.map((function(e){return n.typedArrayFromHeap(e)})),g=n.typedArrayFromHeap(o),y=0;y<p;y++)for(var b=y*h,x=0;x<v.length;x++){var A=m[x],k=y*A,w=v[x].subarray(k,k+A);g.set(w,b),b+=A}return o}var B8,W8={kernelName:zd,backendName:"wasm",kernelFunc:z8};var j8,V8={kernelName:Bd,backendName:"wasm",setupFunc:function(e){B8=e.wasm.cwrap(Bd,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(i.dataId).id,u=n.strides,c=n.dilations,l=n.pad,d=n.dimRoundingMode,f=n.dataFormat,p=sI.convertConv2DDataFormat(f),h=sI.computeConv2DInfo(a.shape,i.shape,u,c,l,d,!1,p),m=h.filterHeight,v=h.filterWidth,g=h.padInfo.top,y=h.padInfo.right,b=h.padInfo.bottom,x=h.padInfo.left,A=h.dilationHeight,k=h.dilationWidth,w=h.strideHeight,S=h.strideWidth,I=h.inChannels,E=h.outChannels,C="SAME"===h.padInfo.type?1:0;if("channelsLast"!==h.dataFormat)throw new Error("wasm backend Conv2D does not support dataFormat:'".concat(h.dataFormat,"'. Please use 'channelsLast'."));var N=r.makeOutput(h.outShape,"float32"),T=r.dataIdMap.get(N.dataId).id;return B8(o,a.shape[0],a.shape[1],a.shape[2],s,m,v,g,y,b,x,C,A,k,w,S,I,E,T),N}};var U8,H8={kernelName:jd,backendName:"wasm",setupFunc:function(e){j8=e.wasm.cwrap(jd,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.dy,i=n.filter,o=r.strides,s=r.pad,c=r.dataFormat,l=r.dimRoundingMode,d=r.inputShape,f=sI.convertConv2DDataFormat(c),p=sI.computeConv2DInfo(d,i.shape,o,1,s,l,!1,f),h=p.batchSize,m=p.filterHeight,v=p.filterWidth,g=p.inChannels,y=p.inHeight,b=p.inWidth,x=p.outChannels,A=p.outHeight,k=p.outWidth,w=p.strideHeight,S=p.strideWidth,I=m-1-p.padInfo.top,E=v-1-p.padInfo.left,C="channelsLast"===p.dataFormat,N=Fh.computeStrides(p.inShape),T=Fh.computeStrides(a.shape),_=u(Fh.computeStrides(i.shape),3),R=_[0],M=_[1],O=_[2],F=N[0],P=C?N[1]:N[2],D=C?N[2]:1,L=C?1:N[1],z=T[0],B=C?T[1]:T[2],W=C?T[2]:1,j=C?1:T[1],V=t.makeOutput(p.inShape,"float32"),U=t.dataIdMap.get(V.dataId).id,H=t.dataIdMap.get(a.dataId).id,G=t.dataIdMap.get(i.dataId).id;return j8(H,G,h,m,v,y,b,g,A,k,x,w,S,I,E,R,M,O,F,P,D,L,z,B,W,j,U),V}},G8=o8(Gd),q8=o8(qd),K8=function(e){return e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest",e}(K8||{});var X8,Z8={kernelName:Zd,backendName:"wasm",setupFunc:function(e){U8=e.wasm.cwrap(Zd,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=a.method,o=a.extrapolationValue,s=a.cropSize,c=r.image,l=r.boxes,d=r.boxInd,f=l.shape[0],p=u(s,2),h=p[0],m=p[1],v=[f,h,m,c.shape[3]],g=n.dataIdMap.get(c.dataId);"float32"!==c.dtype&&(t=O8({backend:n,inputs:{x:c},attrs:{dtype:"float32"}}),g=n.dataIdMap.get(t.dataId));var y=g.id,b=n.dataIdMap.get(l.dataId).id,x=n.dataIdMap.get(d.dataId).id,A=n.makeOutput(v,"float32"),k=n.dataIdMap.get(A.dataId).id,w=new Uint8Array(new Int32Array(c.shape).buffer);return U8(y,b,x,f,w,h,m,K8[i],o,k),null!=t&&n.disposeData(t.dataId),A}};var Y8,J8={kernelName:Kd,backendName:"wasm",setupFunc:function(e){X8=e.wasm.cwrap(Kd,null,["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse,u=a.shape.length;Fh.assert("float32"===a.dtype||"int32"===a.dtype,(function(){return"cumprod does not support ".concat(a.dtype," tensors in the WASM backend")}));var c=sI.getAxesPermutation([i],u),l=a;null!==c&&(l=m8({inputs:{x:a},attrs:{perm:c},backend:n}));var d=sI.getInnerMostAxes(1,u)[0];sI.assertAxesAreInnerMostDims("cumprod",[d],u);var f=n.makeOutput(l.shape,l.dtype),p=l.shape[d],h=n.dataIdMap.get(l.dataId).id,m=n.dataIdMap.get(f.dataId).id;X8(h,o?1:0,s?1:0,p,m,r8[a.dtype]);var v=f;return null!==c&&(v=m8({inputs:{x:f},attrs:{perm:sI.getUndoAxesPermutation(c)},backend:n}),n.disposeData(l.dataId),n.disposeData(f.dataId)),v}};var Q8,$8={kernelName:Xd,backendName:"wasm",setupFunc:function(e){Y8=e.wasm.cwrap(Xd,null,["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse,u=a.shape.length;Fh.assert("float32"===a.dtype||"int32"===a.dtype,(function(){return"cumsum does not support ".concat(a.dtype," tensors in the WASM backend")}));var c=sI.getAxesPermutation([i],u),l=a;null!==c&&(l=m8({inputs:{x:a},attrs:{perm:c},backend:n}));var d=sI.getInnerMostAxes(1,u)[0];sI.assertAxesAreInnerMostDims("cumsum",[d],u);var f=n.makeOutput(l.shape,l.dtype),p=l.shape[d],h=n.dataIdMap.get(l.dataId).id,m=n.dataIdMap.get(f.dataId).id;Y8(h,o?1:0,s?1:0,p,m,r8[a.dtype]);var v=f;return null!==c&&(v=m8({inputs:{x:f},attrs:{perm:sI.getUndoAxesPermutation(c)},backend:n}),n.disposeData(l.dataId),n.disposeData(f.dataId)),v}};var e9,t9={kernelName:Jd,backendName:"wasm",setupFunc:function(e){Q8=e.wasm.cwrap(Jd,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,c=("NHWC"===o?a.shape[2]:a.shape[3])*i,l=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),d="NHWC"===o?[s,u,c,l]:[s,l,u,c],f=t.makeOutput(d,"float32"),p=t.dataIdMap.get(a.dataId).id,h=new Uint8Array(new Int32Array(Fh.computeStrides(a.shape)).buffer),m=new Uint8Array(new Int32Array(d).buffer),v=new Uint8Array(new Int32Array(Fh.computeStrides(d)).buffer),g=t.dataIdMap.get(f.dataId).id;return Q8(p,i,"NHWC"===o?1:0,h,a.shape.length-1,m,v,d.length,g),f}};var n9={kernelName:Qd,backendName:"wasm",setupFunc:function(e){e9=e.wasm.cwrap(Qd,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(i.dataId).id,u=n.strides,c=n.dilations,l=n.pad,d=n.dimRoundingMode,f=null==c?[1,1]:c,p=sI.computeConv2DInfo(a.shape,i.shape,u,f,l,d,!0),h=p.filterHeight,m=p.filterWidth,v=p.padInfo.top,g=p.padInfo.right,y=p.padInfo.bottom,b=p.padInfo.left,x=p.dilationHeight,A=p.dilationWidth,k=p.strideHeight,w=p.strideWidth,S=p.inChannels,I=p.outChannels,E="SAME"===p.padInfo.type?1:0;if("channelsLast"!==p.dataFormat)throw new Error("wasm backend DepthwiseConv2dNative does not support dataFormat:'".concat(p.dataFormat,"'. Please use 'channelsLast'."));var C=r.makeOutput(p.outShape,"float32"),N=r.dataIdMap.get(C.dataId).id;return e9(o,a.shape[0],a.shape[1],a.shape[2],s,h,m,v,g,y,b,E,x,A,k,w,S,I,N),C}},r9=o8(uf),a9=u8(df,0,"bool"),i9=o8(ff,"float32");function o9(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.input,i=n.dim,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(Fh.assert(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+i+1),s.splice(u,0,1),E8({inputs:{x:a},backend:r,attrs:{shape:s}})}var s9={kernelName:pf,backendName:"wasm",kernelFunc:o9};function u9(e){var t=e.attrs,n=t.shape,r=t.value,a=t.dtype,i=e.backend,o=i.makeOutput(n,a);return i.typedArrayFromHeap(o).fill(r),o}var c9,l9={kernelName:vf,backendName:"wasm",kernelFunc:u9};var d9,f9={kernelName:gf,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n.makeOutput(r.shape,r.dtype),i=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(a.dataId).id,s=u(r.shape,4),c=s[0],l=s[1],d=s[2],f=s[3];return c9(i,c,l,d,f,o),a},setupFunc:function(e){c9=e.wasm.cwrap(gf,null,["number","number","number","number","number","number"])}},p9=o8(yf),h9=u8(bf);var m9,v9={kernelName:xf,backendName:"wasm",setupFunc:function(e){d9=e.wasm.cwrap(xf,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.varianceEpsilon,a=n.x,i=n.mean,o=n.variance,s=n.offset,u=n.scale,c=t.dataIdMap.get(a.dataId).id,l=t.dataIdMap.get(i.dataId).id,d=t.dataIdMap.get(o.dataId).id,f=null!=s?t.dataIdMap.get(s.dataId).id:0,p=null!=u?t.dataIdMap.get(u.dataId).id:0,h=t.makeOutput(a.shape,a.dtype);if(0===Fh.sizeFromShape(a.shape))return h;var m=t.dataIdMap.get(h.dataId).id;return d9(c,l,d,f,p,r,m),h}};var g9,y9={kernelName:bh,backendName:"wasm",setupFunc:function(e){m9=e.wasm.cwrap(bh,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=n.strides,c=n.pad,l=n.dilations,d=n.dataFormat,f=n.dimRoundingMode,p=n.activation,h=n.leakyreluAlpha,m=sI.computeConv2DInfo(a.shape,i.shape,u,l,c,f),v=a8[p];if(null==v)throw new Error("".concat(p," activation not yet supported for FusedConv2D in the wasm backend."));var g=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(i.dataId).id,b=m.outChannels,x=0;if(null!=o){var A=r.dataIdMap.get(o.dataId);if(1!==A.shape.length)throw new Error("FusedConv2D only supports rank-1 bias but got rank ".concat(A.shape.length,"."));if(A.shape[0]!==b)throw new Error("FusedConv2D bias shape (".concat(A.shape,") does not match the number of output channels (").concat(b,")"));x=A.id}var k=m.filterHeight,w=m.filterWidth,S=m.padInfo.top,I=m.padInfo.right,E=m.padInfo.bottom,C=m.padInfo.left,N=m.dilationHeight,T=m.dilationWidth,_=m.strideHeight,R=m.strideWidth,M=m.inChannels,O="SAME"===m.padInfo.type?1:0,F=m.batchSize,P=m.inHeight,D=m.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedConv2D does not support dataFormat:'".concat(d,"'. Please use 'NHWC'."));var L=r.makeOutput(m.outShape,"float32"),z=r.dataIdMap.get(L.dataId).id,B=null==s?0:r.dataIdMap.get(s.dataId).id;return m9(g,F,P,D,y,k,w,x,S,I,E,C,O,N,T,_,R,M,b,v,B,h||0,z),L}};var b9,x9={kernelName:xh,backendName:"wasm",setupFunc:function(e){g9=e.wasm.cwrap(xh,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=n.strides,c=n.pad,l=n.dilations,d=n.dataFormat,f=n.dimRoundingMode,p=n.activation,h=n.leakyreluAlpha,m=sI.computeConv2DInfo(a.shape,i.shape,u,l,c,f,!0),v=a8[p];if(null==v)throw new Error("".concat(p," activation not yet supported for FusedDepthwiseConv2D in the wasm backend."));var g=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(i.dataId).id,b=m.outChannels,x=0;if(null!=o){var A=r.dataIdMap.get(o.dataId);if(1!==A.shape.length)throw new Error("FusedDepthwiseConv2D only supports rank-1 bias but got rank ".concat(A.shape.length,"."));if(A.shape[0]!==b)throw new Error("FusedDepthwiseConv2D bias shape (".concat(A.shape,") does not match the number of output channels (").concat(b,")"));x=A.id}var k=m.filterHeight,w=m.filterWidth,S=m.padInfo.top,I=m.padInfo.right,E=m.padInfo.bottom,C=m.padInfo.left,N=m.dilationHeight,T=m.dilationWidth,_=m.strideHeight,R=m.strideWidth,M=m.inChannels,O="SAME"===m.padInfo.type?1:0,F=m.batchSize,P=m.inHeight,D=m.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedDepthwiseConv2D does not support dataFormat:'".concat(d,"'. Please use 'NHWC'."));var L=r.makeOutput(m.outShape,"float32"),z=r.dataIdMap.get(L.dataId).id,B=null==s?0:r.dataIdMap.get(s.dataId).id;return g9(g,F,P,D,y,k,w,x,S,I,E,C,O,N,T,_,R,M,b,v,B,h||0,z),L}};var A9,k9={kernelName:kf,backendName:"wasm",setupFunc:function(e){b9=e.wasm.cwrap(kf,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=n.params,a=n.indices,i=u(Cy.prepareAndValidate(r,a),4),o=i[0],s=i[1],c=i[2],l=i[3],d=t.makeOutput(o,r.dtype);if(0===s)return d;var f=a.shape,p=f[f.length-1],h=t.dataIdMap.get(r.dataId).id,m=t.dataIdMap.get(a.dataId).id,v=new Uint8Array(new Int32Array(l).buffer),g=t.dataIdMap.get(d.dataId).id;return b9(h,r8[r.dtype],m,s,p,c,v,g),d}};var w9,S9={kernelName:Af,backendName:"wasm",setupFunc:function(e){A9=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){for(var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,i=n.indices,o=r.axis,s=r.batchDims,u=Fh.parseAxisParam(o,a.shape)[0],c=t.readSync(i.dataId),l=a.shape[u],d=function(e){var t=c[e];Fh.assert(t<=l-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(l-1,"]")}))},f=0;f<c.length;++f)d(f);var p=sI.segment_util.collectGatherOpShapeInfo(a,i,u,s),h=E8({inputs:{x:a},attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]},backend:t}),m=Fh.sizeFromShape(i.shape),v=E8({inputs:{x:i},attrs:{shape:[p.batchSize,m/p.batchSize]},backend:t}),g=[p.batchSize,p.outerSize,m/p.batchSize,p.sliceSize],y=t.makeOutput(g,a.dtype);if(0===Fh.sizeFromShape(a.shape))return y;var b=h.shape.length-1,x=t.dataIdMap.get(h.dataId).id,A=t.dataIdMap.get(v.dataId).id,k=t.dataIdMap.get(y.dataId).id,w=new Uint8Array(new Int32Array(Fh.computeStrides(h.shape)).buffer),S=new Uint8Array(new Int32Array(Fh.computeStrides(g)).buffer);return A9(x,r8[a.dtype],w,b,A,p.batchSize,S,k),t.disposeData(h.dataId),t.disposeData(v.dataId),y.shape=p.outputShape,y}},I9=u8(wf,0,"bool"),E9=u8(Sf,0,"bool");var C9,N9={kernelName:Rf,backendName:"wasm",setupFunc:function(e){w9=e.wasm.cwrap(Rf,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.inputs.x,n=e.attrs.alpha,r=e.backend,a=r.dataIdMap.get(t.dataId).id,i=r.makeOutput(t.shape,"float32");if(0!==Fh.sizeFromShape(t.shape)){var o=r.dataIdMap.get(i.dataId).id;w9(a,r8[t.dtype],n,o)}return i}},T9=u8(Mf,0,"bool"),_9=u8(Of,0,"bool"),R9=o8(Pf),M9=u8(Lf,0,"bool"),O9=o8(zf),F9=u8(Bf,0,"bool"),P9=u8(Wf,0,"bool");var D9,L9={kernelName:Gf,backendName:"wasm",setupFunc:function(e){C9=e.wasm.cwrap(Gf,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.reductionIndices,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,c=o,l=y8(o,a,t),d=l.transposed,f=l.axes,p=l.originalAxes,h=l.inputWasTransposed;h&&(c=d,s=A=t.dataIdMap.get(d.dataId).id);var m=c.shape.length;sI.assertAxesAreInnerMostDims("max",f,m);var v=u(sI.computeOutAndReduceShapes(c.shape,f),2),g=v[0],y=v[1],b=Fh.sizeFromShape(y),x=t.makeOutput(g,o.dtype);if(0!==Fh.sizeFromShape(c.shape)){var A=t.dataIdMap.get(x.dataId).id;C9(s,r8[o.dtype],b,A)}if(h&&t.disposeData(d.dataId),i){var k=sI.expandShapeToKeepDim(x.shape,p);x.shape=k}return x}},z9=u8(qf);var B9,W9={kernelName:Kf,backendName:"wasm",setupFunc:function(e){D9=e.wasm.cwrap(Kf,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=r.dataIdMap.get(a.dataId).id;Fh.assert("float32"===a.dtype,(function(){return"Error in MaxPool: only float32 input is supported. Got ".concat(a.dtype,".")}));var o=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode,l=sI.computePool2DInfo(a.shape,o,s,1,u,c),d=l.filterHeight,f=l.filterWidth,p=l.padInfo.top,h=l.padInfo.right,m=l.padInfo.bottom,v=l.padInfo.left,g=l.dilationHeight,y=l.dilationWidth,b=l.strideHeight,x=l.strideWidth,A=l.inChannels,k=l.outChannels;if("channelsLast"!==l.dataFormat)throw new Error("wasm backend does not support dataFormat:'".concat(l.dataFormat,"'. Please use 'channelsLast'."));var w=r.makeOutput(l.outShape,"float32"),S=r.dataIdMap.get(w.dataId).id;return D9(i,a.shape[0],a.shape[1],a.shape[2],d,f,p,h,m,v,g,y,b,x,A,k,S),w}};var j9,V9={kernelName:Qf,backendName:"wasm",setupFunc:function(e){B9=e.wasm.cwrap(Qf,null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,c=s,l=o,d=y8(o,a,t),f=d.transposed,p=d.axes,h=d.originalAxes,m=d.inputWasTransposed,v=p;m&&(w=t.dataIdMap.get(f.dataId).id)!==s&&(l=f,c=w,v=sI.getInnerMostAxes(v.length,l.shape.length)),sI.assertAxesAreInnerMostDims("mean",v,l.shape.length);var g=u(sI.computeOutAndReduceShapes(l.shape,v),2),y=g[0],b=g[1],x=Fh.sizeFromShape(b),A=l;"float32"!==l.dtype&&(A=O8({backend:t,inputs:{x:l},attrs:{dtype:"float32"}}),c=t.dataIdMap.get(A.dataId).id);var k=t.makeOutput(y,"float32");if(0!==Fh.sizeFromShape(l.shape)){var w=t.dataIdMap.get(k.dataId).id;B9(c,x,w)}if(m&&t.disposeData(f.dataId),i){var S=sI.expandShapeToKeepDim(k.shape,h);k.shape=S}return"float32"!==l.dtype&&t.disposeData(A.dataId),k}};var U9,H9={kernelName:$f,backendName:"wasm",setupFunc:function(e){j9=e.wasm.cwrap($f,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,c=s,l=o,d=y8(o,a,t),f=d.transposed,p=d.axes,h=d.originalAxes,m=d.inputWasTransposed;m&&(k=t.dataIdMap.get(f.dataId).id)!==s&&(l=f,c=k);var v=l.shape.length;sI.assertAxesAreInnerMostDims("min",p,v);var g=u(sI.computeOutAndReduceShapes(l.shape,p),2),y=g[0],b=g[1],x=Fh.sizeFromShape(b),A=t.makeOutput(y,l.dtype);if(0!==Fh.sizeFromShape(l.shape)){var k=t.dataIdMap.get(A.dataId).id;j9(c,r8[o.dtype],x,k)}if(m&&t.disposeData(f.dataId),i){var w=sI.expandShapeToKeepDim(A.shape,h);A.shape=w}return A}},G9=u8(ep),q9=function(e){return e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric",e}(q9||{});var K9,X9={kernelName:tp,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=e.attrs,a=r.paddings,i=r.mode,o=a.map((function(e,n){return e[0]+t.shape[n]+e[1]})),s=n.dataIdMap.get(t.dataId).id,u=n.makeOutput(o,t.dtype),c=n.dataIdMap.get(u.dataId).id,l=new Uint8Array(new Int32Array(t.shape).buffer),d=a.map((function(e){return e[0]})),f=a.map((function(e){return e[1]})),p=new Uint8Array(new Int32Array(d).buffer),h=new Uint8Array(new Int32Array(f).buffer);return U9(s,l,t.shape.length,r8[t.dtype],p,h,q9[i],c),u},setupFunc:function(e){U9=e.wasm.cwrap(tp,null,["number","array","number","number","array","array","number","number"])}},Z9=u8(ap),Y9=o8(ip);function J9(e,t){var n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),r=n[0],a=n[1],i=n[2],o=n[3];return e.wasm._free(t),{pSelectedIndices:r,selectedSize:a,pSelectedScores:i,pValidOutputs:o}}var Q9,$9={kernelName:sp,backendName:"wasm",setupFunc:function(e){K9=e.wasm.cwrap(sp,"number",["number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,i=r.maxOutputSize,o=r.scoreThreshold,s=n.boxes,u=n.scores,c=t.dataIdMap.get(s.dataId).id,l=t.dataIdMap.get(u.dataId).id,d=J9(t,K9(c,l,i,a,o)),f=d.pSelectedIndices,p=d.selectedSize,h=d.pSelectedScores,m=d.pValidOutputs;return t.wasm._free(h),t.wasm._free(m),t.makeOutput([p],"int32",f)}};var eee,tee={kernelName:up,backendName:"wasm",setupFunc:function(e){Q9=e.wasm.cwrap(up,"number",["number","number","number","number","number","bool"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,i=r.maxOutputSize,o=r.scoreThreshold,s=r.padToMaxOutputSize,u=n.boxes,c=n.scores,l=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(c.dataId).id,f=J9(t,Q9(l,d,i,a,o,s)),p=f.pSelectedIndices,h=f.selectedSize,m=f.pSelectedScores,v=f.pValidOutputs;return t.wasm._free(m),[t.makeOutput([h],"int32",p),t.makeOutput([],"int32",v)]}};var nee,ree={kernelName:cp,backendName:"wasm",setupFunc:function(e){eee=e.wasm.cwrap(cp,"number",["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,i=r.maxOutputSize,o=r.scoreThreshold,s=r.softNmsSigma,u=n.boxes,c=n.scores,l=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(c.dataId).id,f=J9(t,eee(l,d,i,a,o,s)),p=f.pSelectedIndices,h=f.selectedSize,m=f.pSelectedScores,v=f.pValidOutputs;return t.wasm._free(v),[t.makeOutput([h],"int32",p),t.makeOutput([h],"float32",m)]}},aee=u8(op,0,"bool");var iee={kernelName:dp,backendName:"wasm",setupFunc:function(e){nee=e.wasm.cwrap(dp,null,["number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue,u=n.makeOutput([].concat(Tn(a.shape),[i]),"int32"),c=n.dataIdMap.get(u.dataId).id,l=n.dataIdMap.get(a.dataId).id;return nee(l,i,o,s,c),u}};var oee={kernelName:lp,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(1),r}};var see,uee={kernelName:fp,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return o9({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){Fh.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes"),Fh.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=o9({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=z8({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeData(e.dataId)})),u}};var cee,lee={kernelName:pp,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=e.attrs,a=r.paddings,i=r.constantValue,o=a.map((function(e,n){return e[0]+t.shape[n]+e[1]}));if(0===Fh.sizeFromShape(t.shape))return u9({backend:n,attrs:{shape:o,value:i,dtype:t.dtype}});var s=n.dataIdMap.get(t.dataId).id,u=n.makeOutput(o,t.dtype),c=n.dataIdMap.get(u.dataId).id,l=new Uint8Array(new Int32Array(t.shape).buffer),d=a.map((function(e){return e[0]})),f=a.map((function(e){return e[1]})),p=new Uint8Array(new Int32Array(d).buffer),h=new Uint8Array(new Int32Array(f).buffer);return see(s,l,t.shape.length,r8[t.dtype],p,h,i,c),u},setupFunc:function(e){see=e.wasm.cwrap(pp,null,["number","array","number","number","array","array","number","number"])}},dee=u8(mp);var fee,pee={kernelName:vp,backendName:"wasm",setupFunc:function(e){cee=e.wasm.cwrap(vp,null,["number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(a.dataId).id,s=i,u=r,c=u;"float32"!==u.dtype&&(c=O8({backend:n,inputs:{x:r},attrs:{dtype:"float32"}}),s=n.dataIdMap.get(c.dataId).id);var l=n.makeOutput(r.shape,"float32"),d=n.dataIdMap.get(l.dataId).id;return cee(s,o,d),"float32"!==u.dtype&&n.disposeData(c.dataId),l}};var hee,mee={kernelName:gp,backendName:"wasm",setupFunc:function(e){fee=e.wasm.cwrap(gp,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,c=s,l=o,d=y8(o,a,t),f=d.transposed,p=d.axes,h=d.originalAxes,m=d.inputWasTransposed,v=p;m&&(k=t.dataIdMap.get(f.dataId).id)!==s&&(l=f,c=k,v=sI.getInnerMostAxes(v.length,l.shape.length)),sI.assertAxesAreInnerMostDims("prod",v,l.shape.length);var g=u(sI.computeOutAndReduceShapes(l.shape,v),2),y=g[0],b=g[1],x=Fh.sizeFromShape(b),A=t.makeOutput(y,l.dtype);if(0!==Fh.sizeFromShape(l.shape)){var k=t.dataIdMap.get(A.dataId).id;fee(c,x,r8[A.dtype],k)}if(m&&t.disposeData(f.dataId),i){var w=sI.expandShapeToKeepDim(A.shape,h);A.shape=w}return A}},vee={kernelName:yp,backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=Sj(r,a,i,o),u=t.makeOutput([s.length],o);return t.typedArrayFromHeap(u).set(s),u}},gee=u8(of),yee=o8(Ap),bee=o8(Cp);var xee,Aee={kernelName:Ip,backendName:"wasm",setupFunc:function(e){hee=e.wasm.cwrap(Ip,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=r.images,o=a.alignCorners,s=a.halfPixelCenters,c=u(a.size,2),l=c[0],d=c[1],f=u(i.shape,4),p=f[0],h=f[1],m=f[2],v=f[3],g=[p,l,d,v],y=n.dataIdMap.get(i.dataId);"float32"!==y.dtype&&(t=O8({backend:n,inputs:{x:i},attrs:{dtype:"float32"}}),y=n.dataIdMap.get(t.dataId));var b=y.id,x=n.makeOutput(g,"float32");if(0===Fh.sizeFromShape(i.shape))return x;var A=n.dataIdMap.get(x.dataId).id;return hee(b,p,h,m,v,l,d,o?1:0,s?1:0,A),null!=t&&n.disposeData(t.dataId),x}};var kee,wee={kernelName:Np,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=Fh.parseAxisParam(i,a.shape);if(0===a.shape.length)return f8({inputs:{x:a},backend:n});var s=n.makeOutput(a.shape,a.dtype),u=n.dataIdMap.get(a.dataId).id,c=n.dataIdMap.get(s.dataId).id,l=new Uint8Array(new Int32Array(o).buffer),d=new Uint8Array(new Int32Array(a.shape).buffer);xee(u,l,o.length,d,a.shape.length,c);var f=E8({inputs:{x:s},attrs:{shape:a.shape},backend:n});return n.disposeData(s.dataId),f},setupFunc:function(e){xee=e.wasm.cwrap(Np,null,["number","array","number","array","number","number"])}};var See,Iee={kernelName:gh,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=r.radians,o=r.fillValue,s=r.center,c=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(a.dataId).id,d=n.dataIdMap.get(c.dataId).id,f=u(a.shape,4),p=f[0],h=f[1],m=f[2],v=f[3],g=u(sI.getImageCenter(s,h,m),2),y=g[0],b=g[1],x="number"==typeof o?[o,o,o,0===o?0:255]:[].concat(Tn(o),[255]),A=new Uint8Array(new Int32Array(x).buffer);return kee(l,p,h,m,v,i,y,b,A,x.length,d),c},setupFunc:function(e){kee=e.wasm.cwrap(gh,null,["number","number","number","number","number","number","number","number","array","number","number"])}},Eee=o8(Tp),Cee=o8(_p);var Nee,Tee={kernelName:Rp,backendName:"wasm",setupFunc:function(e){See=e.wasm.cwrap(Rp,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.indices,i=n.updates,o=r.shape,s=t.makeOutput(o,i.dtype);if(0===Fh.sizeFromShape(o))return s;var u=Ty.calculateShapes(i,a,o),c=u.sliceRank,l=u.numUpdates,d=u.sliceSize,f=u.strides,p=u.outputSize,h=t.dataIdMap.get(a.dataId).id,m=t.dataIdMap.get(i.dataId).id,v=new Uint8Array(new Int32Array(f).buffer),g=t.dataIdMap.get(s.dataId).id;return See(h,m,r8[i.dtype],c,l,d,v,p,g),s}};var _ee,Ree={kernelName:Op,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=n.dataIdMap.get(r.dataId).id,s=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(i.dataId).id,c=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(c.dataId).id,d=r.shape.length,f=a.shape.length,p=0===d||d>1||1===f?1:Fh.sizeFromShape(a.shape.slice(1));return Nee(o,s,u,p,l),c},setupFunc:function(e){Nee=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}};var Mee,Oee={kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){_ee=e.wasm.cwrap(Bp,null,["number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.x,r=t.dataIdMap.get(n.dataId).id,a=t.makeOutput(n.shape,n.dtype),i=t.dataIdMap.get(a.dataId).id;return 0===Fh.sizeFromShape(a.shape)||_ee(r,i),a}},Fee=o8(Dp);var Pee={kernelName:Gp,backendName:"wasm",setupFunc:function(e){Mee=e.wasm.cwrap(Gp,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.logits,r=e.attrs.dim,a=t.dataIdMap.get(n.dataId).id,i=t.makeOutput(n.shape,n.dtype),o=t.dataIdMap.get(i.dataId).id,s=n.shape[r],u=Fh.sizeFromShape(n.shape)/s;return 0===Fh.sizeFromShape(i.shape)||Mee(a,o,s,u),i}};var Dee,Lee={kernelName:Up,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings,s=Fh.sizeFromShape(i),u=[[0,0]];u.push.apply(u,Tn(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=lee.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=sI.getReshaped(l.shape,i,s,!1),f=sI.getPermuted(d.length,i.length,!1),p=sI.getReshapedPermuted(l.shape,i,s,!1),h=E8({inputs:{x:l},backend:n,attrs:{shape:d}}),m=m8({inputs:{x:h},backend:n,attrs:{perm:f}}),v=E8({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeData(l.dataId),n.disposeData(h.dataId),n.disposeData(m.dataId),v}};var zee,Bee={kernelName:qp,backendName:"wasm",setupFunc:function(e){Dee=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=r.indices,i=r.values,o=r.denseShape,s=r.defaultValue,u=a.shape[0],c=a.shape[1],l=n.readSync(o.dataId)[0],d=[u+l,c],f=n.dataIdMap.get(a.dataId).id,p=n.dataIdMap.get(i.dataId).id,h=n.dataIdMap.get(s.dataId).id,m=n.makeOutput(d,a.dtype),v=n.dataIdMap.get(m.dataId).id,g=n.makeOutput(d.slice(0,1),i.dtype),y=n.dataIdMap.get(g.dataId).id,b=n.makeOutput([l],"bool"),x=n.dataIdMap.get(b.dataId).id,A=n.makeOutput([u],a.dtype),k=n.dataIdMap.get(A.dataId).id,w=n.makeOutput([4],"int32"),S=n.dataIdMap.get(w.dataId).id,I=Dee(f,p,r8[i.dtype],u,l,c,h,v,y,x,k,S),E=n.readSync(w.dataId);switch(E[0]){case 1:t=sI.getSparseFillEmptyRowsIndicesDenseShapeMismatch(E[1]);break;case 2:t=sI.getSparseFillEmptyRowsNegativeIndexErrorMessage(E[1],E[2]);break;case 3:t=sI.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(E[1],E[2],E[3]);break;default:t=""}if(n.disposeData(w.dataId),t)throw n.disposeData(m.dataId),n.disposeData(g.dataId),n.disposeData(b.dataId),n.disposeData(A.dataId),new Error(t);var C=m,N=g;return I!==d[0]&&(C=_8({inputs:{x:m},attrs:{begin:0,size:[I,c]},backend:n}),N=_8({inputs:{x:g},attrs:{begin:0,size:I},backend:n}),n.disposeData(m.dataId),n.disposeData(g.dataId)),[C,N,b,A]}};var Wee,jee={kernelName:Kp,backendName:"wasm",setupFunc:function(e){zee=e.wasm.cwrap(Kp,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=n.inputIndices,a=n.inputShape,i=n.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=t.dataIdMap.get(r.dataId).id,s=t.dataIdMap.get(a.dataId).id,u=t.dataIdMap.get(i.dataId).id,c=r.shape[0],l=Fh.sizeFromShape(i.shape),d=t.makeOutput([c,l],r.dtype),f=t.dataIdMap.get(d.dataId).id,p=t.makeOutput([l],i.dtype),h=t.dataIdMap.get(p.dataId).id,m=t.makeOutput([3],"int32"),v=t.dataIdMap.get(m.dataId).id;zee(o,s,u,c,f,h,v);var g,y=t.readSync(m.dataId);switch(y[0]){case 0:g=sI.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(y[1],y[2]);break;case 1:g=sI.getSparseReshapeNegativeOutputDimErrorMessage(y[1],y[2]);break;case 2:g=sI.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage();break;case 3:var b=Array.from(t.readSync(a.dataId)),x=Array.from(t.readSync(p.dataId));g=sI.getSparseReshapeInputOutputMultipleErrorMessage(b,x);break;case 4:var A=Array.from(t.readSync(a.dataId)),k=Array.from(t.readSync(p.dataId));g=sI.getSparseReshapeInputOutputMismatchErrorMessage(A,k);break;default:g=""}if(t.disposeData(m.dataId),g)throw t.disposeData(d.dataId),t.disposeData(p.dataId),new Error(g);return[d,p]}};function Vee(e){Wee=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function Uee(e,t){var n=e.backend,r=e.inputs,a=r.data,i=r.indices,o=r.segmentIds,s=i.shape[0],u=n.readSync(o.dataId,s-1,s)[0],c=s>0?u+1:0;if(c<0)throw new Error(sI.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());var l=a.shape.slice();l[0]=c;var d=n.dataIdMap.get(a.dataId).id,f=n.dataIdMap.get(i.dataId).id,p=n.dataIdMap.get(o.dataId).id,h=n.makeOutput(l,a.dtype),m=n.dataIdMap.get(h.dataId).id,v=n.makeOutput([4],"int32"),g=n.dataIdMap.get(v.dataId).id;Wee(d,r8[a.dtype],a.shape[0],f,p,m,g,t,0);var y,b=n.readSync(v.dataId);switch(b[0]){case 0:y=sI.getSparseSegmentReductionNegativeSegmentIdsErrorMessage();break;case 1:y=sI.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage();break;case 2:y=sI.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(b[1],b[2]);break;case 3:y=sI.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(b[1],b[2],b[3]);break;default:y=""}if(n.disposeData(v.dataId),y)throw n.disposeData(h.dataId),new Error(y);return h}var Hee={kernelName:Xp,backendName:"wasm",setupFunc:Vee,kernelFunc:function(e){return Uee(e,!0)}};var Gee={kernelName:Zp,backendName:"wasm",setupFunc:Vee,kernelFunc:function(e){return Uee(e,!1)}};var qee,Kee={kernelName:Hp,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.numOrSizeSplits,o=n.axis,s=Fh.parseAxisParam(o,a.shape)[0],u=sI.prepareSplitSize(a,i,s),c=new Array(a.shape.length).fill(0),l=a.shape.slice();return u.map((function(e){var t=Tn(l);t[s]=e;var n=_8({inputs:{x:a},attrs:{begin:c,size:t},backend:r});return c[s]+=e,n}))}},Xee=o8(jp),Zee=o8(Qp),Yee=u8(Jp);var Jee,Qee={kernelName:mh,backendName:"wasm",setupFunc:function(e){qee=e.wasm.cwrap(mh,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.alpha,a=n.x,i=t.dataIdMap.get(a.dataId).id,o=t.makeOutput(a.shape,a.dtype),s=t.dataIdMap.get(o.dataId).id;return qee(i,r,r8[a.dtype],s),o}};var $ee,ete={kernelName:$p,backendName:"wasm",setupFunc:function(e){Jee=e.wasm.cwrap($p,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=r.x,o=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,d=a.ellipsisMask,f=a.newAxisMask,p=a.shrinkAxisMask,h=Oy.sliceInfo(i.shape,o,s,u,c,l,d,f,p),m=h.finalShapeSparse,v=h.finalShape,g=h.isIdentity,y=h.sliceDim0,b=h.isSimpleSlice,x=h.begin,A=h.end,k=h.strides;if(g)t=E8({inputs:{x:i},backend:n,attrs:{shape:v}});else if(y||b){Fh.assert(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var w=Oy.computeOutShape(x,A,k),S=_8({inputs:{x:i},backend:n,attrs:{begin:x,size:w}});t=E8({inputs:{x:S},backend:n,attrs:{shape:v}}),n.disposeData(S.dataId)}else{var I=n.makeOutput(m,"float32"),E=n.dataIdMap.get(i.dataId).id,C=new Uint8Array(new Int32Array(Fh.computeStrides(i.shape)).buffer),N=new Uint8Array(new Int32Array(x).buffer),T=new Uint8Array(new Int32Array(A).buffer),_=new Uint8Array(new Int32Array(k).buffer),R=new Uint8Array(new Int32Array(m).buffer),M=new Uint8Array(new Int32Array(Fh.computeStrides(m)).buffer),O=n.dataIdMap.get(I.dataId).id;Jee(E,C,i.shape.length,N,T,_,R,M,m.length,O),t=E8({inputs:{x:I},backend:n,attrs:{shape:v}}),n.disposeData(I.dataId)}return t}},tte=u8(rh);var nte,rte={kernelName:Vp,backendName:"wasm",setupFunc:function(e){$ee=e.wasm.cwrap(Vp,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,c=s,l=o,d=y8(o,a,t),f=d.transposed,p=d.axes,h=d.originalAxes,m=d.inputWasTransposed,v=p;m&&(k=t.dataIdMap.get(f.dataId).id)!==s&&(l=f,c=k,v=sI.getInnerMostAxes(v.length,l.shape.length)),sI.assertAxesAreInnerMostDims("sum",v,l.shape.length);var g=u(sI.computeOutAndReduceShapes(l.shape,v),2),y=g[0],b=g[1],x=Fh.sizeFromShape(b),A=t.makeOutput(y,l.dtype);if(0!==Fh.sizeFromShape(l.shape)){var k=t.dataIdMap.get(A.dataId).id;$ee(c,x,r8[A.dtype],k)}if(m&&t.disposeData(f.dataId),i){var w=sI.expandShapeToKeepDim(A.shape,h);A.shape=w}return A}},ate=o8(ah),ite=o8(ih);var ote,ste={kernelName:oh,backendName:"wasm",setupFunc:function(e){nte=e.wasm.cwrap(oh,null,["number","array","number","array","number","number"])},kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=n.dataIdMap.get(a.dataId).id,o=r.reps,s=new Array(a.shape.length),u=0;u<s.length;u++)s[u]=a.shape[u]*o[u];var c=new Uint8Array(new Int32Array(a.shape).buffer),l=new Uint8Array(new Int32Array(s).buffer),d=n.makeOutput(s,a.dtype),f=n.dataIdMap.get(d.dataId).id;return nte(i,c,a.shape.length,l,s.length,r8[d.dtype],f),d}};var ute,cte={kernelName:sh,backendName:"wasm",setupFunc:function(e){ote=e.wasm.cwrap(sh,null,["number","array","number","number","number","bool","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=n.dataIdMap.get(a.dataId).id,u=new Uint8Array(new Int32Array(a.shape).buffer),c=a.shape.slice();c[c.length-1]=i;var l=n.makeOutput(c,a.dtype),d=n.dataIdMap.get(l.dataId).id,f=n.makeOutput(c,"int32"),p=n.dataIdMap.get(f.dataId).id;return ote(s,u,a.shape.length,r8[a.dtype],i,o,d,p),[l,f]}};var lte={kernelName:uh,backendName:"wasm",setupFunc:function(e){ute=e.wasm.cwrap(uh,null,["number","number","bool","number","number","number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=r.image,o=r.transforms,s=a.interpolation,c=a.fillMode,l=a.fillValue,d=a.outputShape,f=u(i.shape,4),p=f[0],h=f[1],m=f[2],v=f[3],g=u(null!=d?d:[h,m],2),y=g[0],b=g[1],x=[p,y,b,v],A=new Uint8Array(new Int32Array(Fh.computeStrides(i.shape)).buffer),k=n.makeOutput(x,i.dtype),w=n.dataIdMap.get(k.dataId).id,S=n.dataIdMap.get(i.dataId).id,I=n.dataIdMap.get(o.dataId).id,E="nearest"===s?1:2;switch(c){case"constant":default:t=1;break;case"reflect":t=2;break;case"wrap":t=3;break;case"nearest":t=4}return ute(S,I,o.shape[0]>1,p,y,b,v,m,h,A,i.shape.length-1,E,t,l,w),k}};var dte={kernelName:dh,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape[i],s=a.shape.length,u=new Array(s-1),c=0,l=0;l<s;l++)l!==i&&(u[c++]=a.shape[l]);var d=new Array(o),f=new Array(s).fill(0),p=a.shape.slice();p[i]=1;for(var h=0;h<d.length;h++)f[i]=h,d[h]=_8({inputs:{x:a},attrs:{begin:f,size:p},backend:n});return d.map((function(e){return{dataId:e.dataId,dtype:e.dtype,shape:u}}))}};for(var fte={kernelName:hh,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(0),r}},pte=0,hte=[i8,s8,l8,d8,x8,k8,S8,I8,T8,M8,P8,D8,L8,W8,V8,H8,G8,q8,Z8,J8,$8,t9,n9,r9,a9,i9,s9,l9,f9,p9,h9,v9,y9,x9,k9,S9,I9,E9,h8,N9,T9,_9,R9,M9,O9,F9,P9,L9,z9,W9,V9,H9,G9,X9,Z9,Y9,$9,tee,ree,aee,iee,oee,uee,lee,dee,pee,mee,vee,gee,yee,bee,N8,Aee,wee,Iee,Eee,Cee,Tee,Ree,Oee,Fee,R8,Pee,Lee,Bee,jee,Hee,Gee,Kee,Xee,Zee,Yee,Qee,ete,tte,rte,ate,ite,ste,cte,lte,g8,dte,fte];pte<hte.length;pte++){Nh(hte[pte])}var mte=id();mte.registerFlag("WASM_HAS_SIMD_SUPPORT",ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11])));case 1:case"end":return e.stop()}}),e)})))),mte.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!mte.get("IS_NODE")){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.abrupt("return",((new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))));case 6:return e.prev=6,e.t0=e.catch(2),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,null,[[2,6]])}))));var vte=Lc(nl()),gte='"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",function(data){onmessage({data:data})});var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8"))},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"\n");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=((info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports});self.onmessage=(e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob==="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module).then(function(instance){Module=instance})}else if(e.data.cmd==="run"){Module["__performance_now_clock_drift"]=performance.now()-e.data.time;Module["__emscripten_thread_init"](e.data.threadInfoStruct,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInit();try{var result=Module["invokeEntryPoint"](e.data.start_routine,e.data.arg);if(Module["keepRuntimeAlive"]()){Module["PThread"].setExitStatus(result)}else{Module["__emscripten_thread_exit"](result)}}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processThreadQueue"){if(Module["_pthread_self"]()){Module["_emscripten_current_thread_process_queued_calls"]()}}else if(e.data.cmd==="processProxyingQueue"){if(Module["_pthread_self"]()){Module["_emscripten_proxy_execute_queue"](e.data.queue)}}else{err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){err("worker.js onmessage() captured an uncaught exception: "+ex);if(ex&&ex.stack)err(ex.stack);if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}});',yte=Lc(rl()),bte=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).wasm=e,r.dataIdNextNumber=1,r.wasm.tfjs.initWithThreadsCount(Mte),Ote=r.wasm.tfjs.getThreadsCount(),r.dataIdMap=new al(at(r),qg()),r}return Qe(n,[{key:"write",value:function(e,t,n){var r={id:this.dataIdNextNumber++};return this.move(r,e,t,n,1),r}},{key:"numDataIds",value:function(){return this.dataIdMap.numDataIds()}},{key:"time",value:function(){var e=ct(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fh.now(),e.abrupt("return",(t(),{kernelMs:Fh.now()-n}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"move",value:function(e,t,n,r,a){var i=this.dataIdNextNumber++;if("string"!==r){var o=Fh.sizeFromShape(n),s=o*Fh.bytesPerElement(r),u=this.wasm._malloc(s);this.dataIdMap.set(e,{id:i,memoryOffset:u,shape:n,dtype:r,refCount:a}),this.wasm.tfjs.registerTensor(i,o,u),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,s),u)}else{var c=t;this.dataIdMap.set(e,{id:i,stringBytes:c,shape:n,dtype:r,memoryOffset:null,refCount:a})}}},{key:"read",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e,t,n){var r=this.dataIdMap.get(e),a=r.memoryOffset,i=r.dtype,o=r.shape,s=r.stringBytes;if("string"===i)return null!=t&&0!==t||!(null==n||n>=s.length)?s.slice(t,n):s;t=t||0,n=n||Fh.sizeFromShape(o);var u=Fh.bytesPerElement(i);return function(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype ".concat(t))}}(this.wasm.HEAPU8.slice(a+t*u,a+n*u).buffer,i)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.dataIdMap.has(e)){var n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}},{key:"refCount",value:function(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}},{key:"incRef",value:function(e){var t=this.dataIdMap.get(e);null!=t&&t.refCount++}},{key:"floatPrecision",value:function(){return 32}},{key:"getMemoryOffset",value:function(e){return this.dataIdMap.get(e).memoryOffset}},{key:"dispose",value:function(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}},{key:"memory",value:function(){return{unreliable:!1}}},{key:"makeOutput",value:function(e,t,n){var r;if(null==n)r=this.write(null,e,t);else{var a=this.dataIdNextNumber++;r={id:a},this.dataIdMap.set(r,{id:a,memoryOffset:n,shape:e,dtype:t,refCount:1});var i=Fh.sizeFromShape(e);this.wasm.tfjs.registerTensor(a,i,n)}return{dataId:r,shape:e,dtype:t}}},{key:"typedArrayFromHeap",value:function(e){var t=e.shape,n=e.dtype,r=e.dataId,a=this.wasm.HEAPU8.buffer,i=this.dataIdMap.get(r).memoryOffset,o=Fh.sizeFromShape(t);switch(n){case"float32":return new Float32Array(a,i,o);case"int32":return new Int32Array(a,i,o);case"bool":return new Uint8Array(a,i,o);default:throw new Error("Unknown dtype ".concat(n))}}}]),n}(il);function xte(e){return function(t,n){return Fh.fetch(e,{credentials:"same-origin"}).then((function(r){r.ok||t.env.a("failed to load wasm binary file at '".concat(e,"'")),r.arrayBuffer().then((function(e){WebAssembly.instantiate(e,t).then((function(e){n(e.instance,e.module)}))}))})),{}}}function Ate(e,t,n){if(null!=Ite)return Ite;var r="tfjs-backend-wasm.wasm";return e&&t?r="tfjs-backend-wasm-threaded-simd.wasm":e&&(r="tfjs-backend-wasm-simd.wasm"),null!=Cte&&null!=Cte[r]?Cte[r]:n+r}function kte(){return wte.apply(this,arguments)}function wte(){return wte=ct(st().mark((function e(){var t,n,r,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([id().getAsync("WASM_HAS_SIMD_SUPPORT"),id().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);case 2:return t=e.sent,n=u(t,2),r=n[0],a=n[1],e.abrupt("return",new Promise((function(e,t){var n={locateFile:function(e,t){if(e.endsWith(".worker.js")){var n=gte.replace(/\n/g,"\\n"),i=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(i)}return e.endsWith(".wasm")?Ate(r,a,null!=Ete?Ete:t):t+e}};Tte&&(n.instantiateWasm=xte(Ate(r,a,null!=Ete?Ete:"")));var i,o=!1;n.onAbort=function(){o||Nte||(Nte=!0,t({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},a&&r&&null==Ite?(n.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+vte.default.toString()],{type:"text/javascript"}),i=(0,vte.default)(n)):i=(0,yte.default)(n),i.then((function(t){o=!0,Nte=!1;t.tfjs={init:t.cwrap("init",null,[]),initWithThreadsCount:t.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:t.cwrap("get_threads_count","number",[]),registerTensor:t.cwrap("register_tensor",null,["number","number","number"]),disposeData:t.cwrap("dispose_data",null,["number"]),dispose:t.cwrap("dispose",null,[])},e({wasm:t})}))})));case 7:case"end":return e.stop()}}),e)}))),wte.apply(this,arguments)}var Ste=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],Ite=null,Ete=null,Cte={},Nte=!1,Tte=!1;function _te(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Hg("setWasmPath has been deprecated in favor of setWasmPaths and will be removed in a future release."),Nte)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`");Ite=e,Tte=t}function Rte(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Nte)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)Ete=e;else{Cte=e;var n=Ste.filter((function(e){return null==Cte[e]}));if(n.length>0)throw new Error("There were no entries found for the following binaries: ".concat(n.join(","),". Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found."))}Tte=t}var Mte=-1,Ote=-1;function Fte(e){Mte=e}function Pte(){if(-1===Ote)throw new Error("WASM backend not initialized.");return Ote}var Dte="0.0.0";iy("wasm",ct(st().mark((function e(){var t,n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kte();case 2:return t=e.sent,n=t.wasm,e.abrupt("return",new bte(n));case 5:case"end":return e.stop()}}),e)}))),2);var Lte="3.18.0-20220602",zte={tfjs:Lte,"tfjs-core":Lte,"tfjs-data":Lte,"tfjs-layers":Lte,"tfjs-converter":Lte,"tfjs-backend-cpu":Lte,"tfjs-backend-webgl":Lte,"tfjs-backend-wasm":Lte},Bte=function(e,t,n){var r=new RegExp("\\b"+t+" \\w+ (\\w+)","ig");e.replace(r,(function(e,t){return n[t]=0,e}))},Wte=Qe((function e(t,n,r){var a=this;Ye(this,e),gc(this,"uniform",{}),gc(this,"attribute",{}),gc(this,"gl"),gc(this,"id"),gc(this,"compile",(function(e,t){var n=a.gl.createShader(t);return n?(a.gl.shaderSource(n,e),a.gl.compileShader(n),a.gl.getShaderParameter(n,a.gl.COMPILE_STATUS)?n:(kc("filter: gl compile failed: ".concat(a.gl.getShaderInfoLog(n))),null)):(kc("filter: could not create shader"),null)})),this.gl=t;var i=this.compile(n,this.gl.VERTEX_SHADER),o=this.compile(r,this.gl.FRAGMENT_SHADER);if(this.id=this.gl.createProgram(),i&&o)if(this.id)if(this.gl.attachShader(this.id,i),this.gl.attachShader(this.id,o),this.gl.linkProgram(this.id),this.gl.getProgramParameter(this.id,this.gl.LINK_STATUS)){for(var s in this.gl.useProgram(this.id),Bte(n,"attribute",this.attribute),this.attribute)this.attribute[s]=this.gl.getAttribLocation(this.id,s);for(var u in Bte(n,"uniform",this.uniform),Bte(r,"uniform",this.uniform),this.uniform)this.uniform[u]=this.gl.getUniformLocation(this.id,u)}else kc("filter: gl link failed: ".concat(this.gl.getProgramInfoLog(this.id)));else kc("filter: could not create webgl program")}));function jte(){var e=this,t=0,n=null,r=!1,a=-1,i=[null,null],o=[],s=null,u=null,c=Yte(100,100),l={},d=1,f=c.getContext("webgl");if(f){this.gl=f;var p={colorMatrix:function(e){var t=new Float32Array(e);t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255;var n=v(1===t[18]&&0===t[3]&&0===t[8]&&0===t[13]&&0===t[15]&&0===t[16]&&0===t[17]&&0===t[19]?"\n  precision highp float;\n  varying vec2 vUv;\n  uniform sampler2D texture;\n  uniform float m[20];\n  void main(void) {\n    vec4 c = texture2D(texture, vUv);\n    gl_FragColor.r = m[0] * c.r + m[1] * c.g + m[2] * c.b + m[4];\n    gl_FragColor.g = m[5] * c.r + m[6] * c.g + m[7] * c.b + m[9];\n    gl_FragColor.b = m[10] * c.r + m[11] * c.g + m[12] * c.b + m[14];\n    gl_FragColor.a = c.a;\n  }\n":"\n  precision highp float;\n  varying vec2 vUv;\n  uniform sampler2D texture;\n  uniform float m[20];\n  void main(void) {\n    vec4 c = texture2D(texture, vUv);\n    gl_FragColor.r = m[0] * c.r + m[1] * c.g + m[2] * c.b + m[3] * c.a + m[4];\n    gl_FragColor.g = m[5] * c.r + m[6] * c.g + m[7] * c.b + m[8] * c.a + m[9];\n    gl_FragColor.b = m[10] * c.r + m[11] * c.g + m[12] * c.b + m[13] * c.a + m[14];\n    gl_FragColor.a = m[15] * c.r + m[16] * c.g + m[17] * c.b + m[18] * c.a + m[19];\n  }\n");n&&(f.uniform1fv(n.uniform.m,t),m())},brightness:function(e){var t=(e||0)+1;p.colorMatrix([t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0])},saturation:function(e){var t=2*(e||0)/3+1,n=-.5*(t-1);p.colorMatrix([t,n,n,0,0,n,t,n,0,0,n,n,t,0,0,0,0,0,1,0])},desaturate:function(){p.saturation(-1)},contrast:function(e){var t=(e||0)+1,n=-128*(t-1);p.colorMatrix([t,0,0,0,n,0,t,0,0,n,0,0,t,0,n,0,0,0,1,0])},negative:function(){p.contrast(-2)},hue:function(e){e=(e||0)/180*Math.PI;var t=Math.cos(e),n=Math.sin(e),r=.213,a=.715,i=.072;p.colorMatrix([r+.787*t+n*-r,a+t*-a+n*-a,i+t*-i+.928*n,0,0,r+t*-r+.143*n,a+t*(1-a)+.14*n,i+t*-i+-.283*n,0,0,r+t*-r+-.787*n,a+t*-a+n*a,i+.928*t+n*i,0,0,0,0,0,1,0])},desaturateLuminance:function(){p.colorMatrix([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0])},sepia:function(){p.colorMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0])},brownie:function(){p.colorMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0])},vintagePinhole:function(){p.colorMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0])},kodachrome:function(){p.colorMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0])},technicolor:function(){p.colorMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0])},polaroid:function(){p.colorMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0])},shiftToBGR:function(){p.colorMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0])},convolution:function(e){var t=new Float32Array(e),n=1/c.width,r=1/c.height,a=v("\n  precision highp float;\n  varying vec2 vUv;\n  uniform sampler2D texture;\n  uniform vec2 px;\n  uniform float m[9];\n  void main(void) {\n    vec4 c11 = texture2D(texture, vUv - px); // top left\n    vec4 c12 = texture2D(texture, vec2(vUv.x, vUv.y - px.y)); // top center\n    vec4 c13 = texture2D(texture, vec2(vUv.x + px.x, vUv.y - px.y)); // top right\n    vec4 c21 = texture2D(texture, vec2(vUv.x - px.x, vUv.y) ); // mid left\n    vec4 c22 = texture2D(texture, vUv); // mid center\n    vec4 c23 = texture2D(texture, vec2(vUv.x + px.x, vUv.y) ); // mid right\n    vec4 c31 = texture2D(texture, vec2(vUv.x - px.x, vUv.y + px.y) ); // bottom left\n    vec4 c32 = texture2D(texture, vec2(vUv.x, vUv.y + px.y) ); // bottom center\n    vec4 c33 = texture2D(texture, vUv + px ); // bottom right\n    gl_FragColor = \n    c11 * m[0] + c12 * m[1] + c22 * m[2] +\n    c21 * m[3] + c22 * m[4] + c23 * m[5] +\n    c31 * m[6] + c32 * m[7] + c33 * m[8];\n    gl_FragColor.a = c22.a;\n  }\n");a&&(f.uniform1fv(a.uniform.m,t),f.uniform2f(a.uniform.px,n,r),m())},detectEdges:function(){p.convolution.call(e,[0,1,0,1,-4,1,0,1,0])},sobelX:function(){p.convolution.call(e,[-1,0,1,-2,0,2,-1,0,1])},sobelY:function(){p.convolution.call(e,[-1,-2,-1,0,0,0,1,2,1])},sharpen:function(t){var n=t||1;p.convolution.call(e,[0,-1*n,0,-1*n,1+4*n,-1*n,0,-1*n,0])},emboss:function(t){var n=t||1;p.convolution.call(e,[-2*n,-1*n,0,-1*n,1,1*n,0,1*n,2*n])},blur:function(e){var t=e/7/c.width,n=e/7/c.height,r=v("\n  precision highp float;\n  varying vec2 vUv;\n  uniform sampler2D texture;\n  uniform vec2 px;\n  void main(void) {\n    gl_FragColor = vec4(0.0);\n    gl_FragColor += texture2D(texture, vUv + vec2(-7.0*px.x, -7.0*px.y))*0.0044299121055113265;\n    gl_FragColor += texture2D(texture, vUv + vec2(-6.0*px.x, -6.0*px.y))*0.00895781211794;\n    gl_FragColor += texture2D(texture, vUv + vec2(-5.0*px.x, -5.0*px.y))*0.0215963866053;\n    gl_FragColor += texture2D(texture, vUv + vec2(-4.0*px.x, -4.0*px.y))*0.0443683338718;\n    gl_FragColor += texture2D(texture, vUv + vec2(-3.0*px.x, -3.0*px.y))*0.0776744219933;\n    gl_FragColor += texture2D(texture, vUv + vec2(-2.0*px.x, -2.0*px.y))*0.115876621105;\n    gl_FragColor += texture2D(texture, vUv + vec2(-1.0*px.x, -1.0*px.y))*0.147308056121;\n    gl_FragColor += texture2D(texture, vUv                             )*0.159576912161;\n    gl_FragColor += texture2D(texture, vUv + vec2( 1.0*px.x,  1.0*px.y))*0.147308056121;\n    gl_FragColor += texture2D(texture, vUv + vec2( 2.0*px.x,  2.0*px.y))*0.115876621105;\n    gl_FragColor += texture2D(texture, vUv + vec2( 3.0*px.x,  3.0*px.y))*0.0776744219933;\n    gl_FragColor += texture2D(texture, vUv + vec2( 4.0*px.x,  4.0*px.y))*0.0443683338718;\n    gl_FragColor += texture2D(texture, vUv + vec2( 5.0*px.x,  5.0*px.y))*0.0215963866053;\n    gl_FragColor += texture2D(texture, vUv + vec2( 6.0*px.x,  6.0*px.y))*0.00895781211794;\n    gl_FragColor += texture2D(texture, vUv + vec2( 7.0*px.x,  7.0*px.y))*0.0044299121055113265;\n  }\n");r&&(f.uniform2f(r.uniform.px,0,n),m(d),f.uniform2f(r.uniform.px,t,0),m())},pixelate:function(e){var t=e/c.width,n=e/c.height,r=v("\n  precision highp float;\n  varying vec2 vUv;\n  uniform vec2 size;\n  uniform sampler2D texture;\n  vec2 pixelate(vec2 coord, vec2 size) {\n    return floor( coord / size ) * size;\n  }\n  void main(void) {\n    gl_FragColor = vec4(0.0);\n    vec2 coord = pixelate(vUv, size);\n    gl_FragColor += texture2D(texture, coord);\n  }\n");r&&(f.uniform2f(r.uniform.size,t,n),m())}};this.add=function(e){var t=Array.prototype.slice.call(arguments,1),n=p[e];o.push({func:n,args:t})},this.reset=function(){o=[]},this.get=function(){return o},this.apply=function(e){!function(e,t){if(e!==c.width||t!==c.height){if(c.width=e,c.height=t,!s){var n=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,-1,1,0,0,1,-1,1,1,1,1,1,0]);s=f.createBuffer(),f.bindBuffer(f.ARRAY_BUFFER,s),f.bufferData(f.ARRAY_BUFFER,n,f.STATIC_DRAW),f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0)}f.viewport(0,0,c.width,c.height),i=[null,null]}}(e.width,e.height),t=0,n||(n=f.createTexture()),f.bindTexture(f.TEXTURE_2D,n),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,e);for(var a=0;a<o.length;a++){r=a===o.length-1;var u=o[a];u.func.apply(this,u.args||[])}return c},this.draw=function(e){return this.add("brightness",0),this.apply(e)}}else kc("filter: cannot get webgl context");function h(e){return i[e]=i[e]||function(e,t){var n=f.createFramebuffer();f.bindFramebuffer(f.FRAMEBUFFER,n);var r=f.createRenderbuffer();f.bindRenderbuffer(f.RENDERBUFFER,r);var a=f.createTexture();return f.bindTexture(f.TEXTURE_2D,a),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,e,t,0,f.RGBA,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,a,0),f.bindTexture(f.TEXTURE_2D,null),f.bindFramebuffer(f.FRAMEBUFFER,null),{fbo:n,texture:a}}(c.width,c.height),i[e]}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(u){var i=null,o=null,s=!1;i=0===t?n:h(a).texture||null,t++,!r||e&d?o=h(a=(a+1)%2).fbo||null:(o=null,s=t%2===0),f.bindTexture(f.TEXTURE_2D,i),f.bindFramebuffer(f.FRAMEBUFFER,o),f.uniform1f(u.uniform.flipY,s?-1:1),f.drawArrays(f.TRIANGLES,0,6)}}function v(e){if(l[e])return u=l[e],f.useProgram((u?u.id:null)||null),u;if(!(u=new Wte(f,"\n  precision highp float;\n  attribute vec2 pos;\n  attribute vec2 uv;\n  varying vec2 vUv;\n  uniform float flipY;\n  void main(void) {\n    vUv = uv;\n    gl_Position = vec4(pos.x, pos.y*flipY, 0.0, 1.);\n  }\n",e)))return kc("filter: could not get webgl program"),null;var t=Float32Array.BYTES_PER_ELEMENT,n=4*t;return f.enableVertexAttribArray(u.attribute.pos),f.vertexAttribPointer(u.attribute.pos,2,f.FLOAT,!1,n,0*t),f.enableVertexAttribArray(u.attribute.uv),f.vertexAttribPointer(u.attribute.uv,2,f.FLOAT,!1,n,2*t),l[e]=u,u}}function Vte(e){return Ute.apply(this,arguments)}function Ute(){return Ute=ct(st().mark((function e(t){var n,r,a,i,o,s,u,c,l,d,f,p;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=4===t.shape.length?Qk(t):t,r=Zk(n,3,2),a=[Zx(r[0]),Zx(r[1]),Zx(r[2])],i=[Xx(r[0]),Xx(r[1]),Xx(r[2])],e.next=6,Promise.all(i.map((function(e){return e.data()})));case 6:return o=e.sent,s=.99*Math.max(o[0][0],o[1][0],o[2][0]),u=[OA(r[0],a[0]),OA(r[1],a[1]),OA(r[2],a[2])],c=[OA(i[0],a[0]),OA(i[1],a[1]),OA(i[2],a[2])],l=[vb(s,c[0]),vb(s,c[1]),vb(s,c[2])],d=[gb(u[0],l[0]),gb(u[1],l[1]),gb(u[2],l[2])],f=$k([d[0],d[1],d[2]],2),p=Kb(f,[1,n.shape[0],n.shape[1],3]),Yg([].concat(Tn(r),a,i,u,c,l,d,[f,n])),e.abrupt("return",p);case 16:case"end":return e.stop()}}),e)}))),Ute.apply(this,arguments)}var Hte,Gte=3840,qte=null,Kte=null,Xte=null,Zte={inputSum:0,cacheDiff:1,sumMethod:0,inputTensor:void 0};function Yte(e,t){var n;if(ane.browser)if(ane.worker){if("undefined"===typeof OffscreenCanvas)throw new Error("canvas error: attempted to run in web worker but OffscreenCanvas is not supported");n=new OffscreenCanvas(e,t)}else{if("undefined"===typeof document)throw new Error("canvas error: attempted to run in browser but DOM is not defined");(n=document.createElement("canvas")).width=e,n.height=t}else"undefined"!==typeof ane.Canvas?n=new ane.Canvas(e,t):"undefined"!==typeof globalThis.Canvas&&(n=new globalThis.Canvas(e,t));return n}function Jte(e,t){var n=t||Yte(e.width,e.height);return n.getContext("2d").drawImage(e,0,0),n}function Qte(e,t){return $te.apply(this,arguments)}function $te(){return $te=ct(st().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,p,h,m,v,g,y,b,x,A,k=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!(k.length>2&&void 0!==k[2])||k[2],t){e.next=4;break}return n.debug&&kc("input error: input is missing"),e.abrupt("return",{tensor:null,canvas:null});case 4:if(t instanceof vm||"undefined"!==typeof Image&&t instanceof Image||"undefined"!==typeof ane.Canvas&&t instanceof ane.Canvas||"undefined"!==typeof globalThis.Canvas&&t instanceof globalThis.Canvas||"undefined"!==typeof ImageData&&t instanceof ImageData||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLMediaElement&&t instanceof HTMLMediaElement||"undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof OffscreenCanvas&&t instanceof OffscreenCanvas){e.next=6;break}throw new Error("input error: type is not recognized");case 6:if(!(t instanceof vm)){e.next=19;break}if(a=null,!t.isDisposedInternal){e.next=10;break}throw new Error("input error: attempted to use tensor but it is disposed");case 10:if(t.shape){e.next=12;break}throw new Error("input error: attempted to use tensor without a shape");case 12:if(3===t.shape.length?3===t.shape[2]?a=iA(t,0):4===t.shape[2]&&(i=Uk(t,[0,0,0],[-1,-1,3]),a=iA(i,0),Yg(i)):4===t.shape.length&&(3===t.shape[3]?a=dg(t):4===t.shape[3]&&(a=Hk(t,[0,0,0,0],[-1,-1,-1,3]))),null!=a&&4===a.shape.length&&1===a.shape[0]&&3===a.shape[3]){e.next=15;break}throw new Error("input error: attempted to use tensor with unrecognized shape: ".concat(t.shape));case 15:return"int32"===a.dtype&&(o=lg(a,"float32"),Yg(a),a=o),e.abrupt("return",{tensor:a,canvas:n.filter.return?Kte:null});case 19:if(!("undefined"!==typeof t.readyState&&t.readyState<=2)){e.next=22;break}return n.debug&&kc("input stream is not ready"),e.abrupt("return",{tensor:null,canvas:qte});case 22:if(s=t.naturalWidth||t.videoWidth||t.width||t.shape&&t.shape[1]>0,u=t.naturalHeight||t.videoHeight||t.height||t.shape&&t.shape[2]>0,s&&u){e.next=27;break}return n.debug&&kc("cannot determine input dimensions"),e.abrupt("return",{tensor:null,canvas:qte});case 27:if(l=u,(c=s)>Gte&&(c=Gte,l=Math.trunc(c*u/s)),l>Gte&&(l=Gte,c=Math.trunc(l*s/u)),(n.filter.width||0)>0?c=n.filter.width:(n.filter.height||0)>0&&(c=s*((n.filter.height||0)/u)),(n.filter.height||0)>0?l=n.filter.height:(n.filter.width||0)>0&&(l=u*((n.filter.width||0)/s)),c&&l){e.next=35;break}throw new Error("input error: cannot determine dimension");case 35:if(qte&&(null==qte?void 0:qte.width)===c&&(null==qte?void 0:qte.height)===l||(qte=Yte(c,l)),d=qte.getContext("2d"),"undefined"!==typeof ImageData&&t instanceof ImageData?d.putImageData(t,0,0):n.filter.flip&&"undefined"!==typeof d.translate?(d.translate(s,0),d.scale(-1,1),d.drawImage(t,0,0,s,u,0,0,null==qte?void 0:qte.width,null==qte?void 0:qte.height),d.setTransform(1,0,0,1,0,0)):d.drawImage(t,0,0,s,u,0,0,null==qte?void 0:qte.width,null==qte?void 0:qte.height),Kte&&qte.width===Kte.width&&(null==qte?void 0:qte.height)===(null==Kte?void 0:Kte.height)||(Kte=Yte(qte.width,qte.height)),n.filter.enabled&&ane.webgl.supported?(Hte||(Hte=ane.browser?new jte:null),ane.filter=!!Hte,Hte&&Hte.add?(Hte.reset(),0!==n.filter.brightness&&Hte.add("brightness",n.filter.brightness),0!==n.filter.contrast&&Hte.add("contrast",n.filter.contrast),0!==n.filter.sharpness&&Hte.add("sharpen",n.filter.sharpness),0!==n.filter.blur&&Hte.add("blur",n.filter.blur),0!==n.filter.saturation&&Hte.add("saturation",n.filter.saturation),0!==n.filter.hue&&Hte.add("hue",n.filter.hue),n.filter.negative&&Hte.add("negative"),n.filter.sepia&&Hte.add("sepia"),n.filter.vintage&&Hte.add("brownie"),n.filter.sepia&&Hte.add("sepia"),n.filter.kodachrome&&Hte.add("kodachrome"),n.filter.technicolor&&Hte.add("technicolor"),n.filter.polaroid&&Hte.add("polaroid"),0!==n.filter.pixelate&&Hte.add("pixelate",n.filter.pixelate),Kte=Hte.get()>0?Hte.apply(qte):Hte.draw(qte)):(n.debug&&kc("input process error: cannot initialize filters"),ane.webgl.supported=!1,n.filter.enabled=!1,Jte(qte,Kte))):(Jte(qte,Kte),Hte&&(Hte=null),ane.filter=!!Hte),r){e.next=42;break}return e.abrupt("return",{tensor:null,canvas:Kte});case 42:if(Kte){e.next=44;break}throw new Error("canvas error: cannot create output");case 44:if(p=3,"undefined"!==typeof ImageData&&t instanceof ImageData||t.data&&t.width&&t.height?ane.browser&&yy?f=yy?yy.fromPixels(t):null:(p=t.data.length/t.height/t.width,h=new Uint8Array(t.data.buffer),f=tv(h,[t.height,t.width,p],"int32")):(Xte&&Kte.width===Xte.width&&Kte.height===Xte.height||(Xte=Yte(Kte.width,Kte.height)),yy&&ane.browser?"webgl"===n.backend||"humangl"===n.backend||"webgpu"===n.backend?f=yy.fromPixels(Kte):(Xte=Jte(Kte),f=yy.fromPixels(Xte)):(m=Jte(Kte),v=m.getContext("2d"),g=v.getImageData(0,0,c,l),p=g.data.length/c/l,y=new Uint8Array(g.data.buffer),f=tv(y,[c,l,p]))),4===p&&(b=Uk(f,[0,0,0],[-1,-1,3]),Yg(f),f=b),f){e.next=49;break}throw new Error("input error: cannot create tensor");case 49:if(x=lg(f,"float32"),!n.filter.equalization){e.next=56;break}return e.next=53,Vte(x);case 53:e.t0=e.sent,e.next=57;break;case 56:e.t0=iA(x,0);case 57:return A=e.t0,Yg([f,x]),e.abrupt("return",{tensor:A,canvas:n.filter.return?Kte:null});case 60:case"end":return e.stop()}}),e)}))),$te.apply(this,arguments)}function ene(e,t){return tne.apply(this,arguments)}function tne(){return tne=ct(st().mark((function e(t,n){var r,a,i,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!1,!(0===t.cacheSensitivity||!n.shape||4!==n.shape.length||n.shape[1]>2048||n.shape[2]>2048)){e.next=3;break}return e.abrupt("return",r);case 3:if(Zte.inputTensor){e.next=7;break}Zte.inputTensor=dg(n),e.next=23;break;case 7:if(Zte.inputTensor.shape[1]===n.shape[1]&&Zte.inputTensor.shape[2]===n.shape[2]){e.next=12;break}Yg(Zte.inputTensor),Zte.inputTensor=dg(n),e.next=23;break;case 12:return(a={}).diff=OA(n,Zte.inputTensor),a.squared=gb(a.diff,a.diff),a.sum=eA(a.squared),e.next=18,a.sum.data();case 18:i=e.sent,o=i[0]/(n.shape[1]||1)/(n.shape[2]||1)/255/3,Yg([Zte.inputTensor,a.diff,a.squared,a.sum]),Zte.inputTensor=dg(n),r=o<=(t.cacheSensitivity||0);case 23:return e.abrupt("return",r);case 24:case"end":return e.stop()}}),e)}))),tne.apply(this,arguments)}function nne(){return nne=ct(st().mark((function e(t,n,r){var a,i,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={},n&&r&&4===n.shape.length&&n.shape.length===r.shape.length){e.next=4;break}return t.debug||kc("invalid input tensor or tensor shapes do not match:",n.shape,r.shape),e.abrupt("return",0);case 4:if(1===n.shape[0]&&1===r.shape[0]&&3===n.shape[3]&&3===r.shape[3]){e.next=7;break}return t.debug||kc("input tensors must be of shape [1, height, width, 3]:",n.shape,r.shape),e.abrupt("return",0);case 7:return a.input1=dg(n),a.input2=n.shape[1]!==r.shape[1]||n.shape[2]!==r.shape[2]?HS.resizeBilinear(r,[n.shape[1],n.shape[2]]):dg(r),a.diff=OA(a.input1,a.input2),a.squared=gb(a.diff,a.diff),a.sum=eA(a.squared),e.next=14,a.sum.data();case 14:return i=e.sent,o=i[0]/(n.shape[1]||1)/(n.shape[2]||1)/255/3,Yg([a.input1,a.input2,a.diff,a.squared,a.sum]),e.abrupt("return",o);case 18:case"end":return e.stop()}}),e)}))),nne.apply(this,arguments)}var rne=function(){function e(){if(Ye(this,e),gc(this,"browser"),gc(this,"node"),gc(this,"worker"),gc(this,"platform",""),gc(this,"agent",""),gc(this,"backends",[]),gc(this,"initial"),gc(this,"filter"),gc(this,"tfjs"),gc(this,"offscreen"),gc(this,"perfadd",!1),gc(this,"wasm",{supported:void 0,backend:void 0,simd:void 0,multithread:void 0}),gc(this,"webgl",{supported:void 0,backend:void 0,version:void 0,renderer:void 0}),gc(this,"webgpu",{supported:void 0,backend:void 0,adapter:void 0}),gc(this,"cpu",{model:void 0,flags:[]}),gc(this,"kernels",[]),gc(this,"Canvas"),gc(this,"Image"),gc(this,"ImageData"),this.browser="undefined"!==typeof navigator,this.node="undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node,this.tfjs={version:zte["tfjs-core"]},this.offscreen="undefined"!==typeof OffscreenCanvas,this.initial=!0,this.worker=this.browser&&this.offscreen?"undefined"!==typeof WorkerGlobalScope:void 0,"undefined"!==typeof navigator){var t=navigator.userAgent.match(/\(([^()]+)\)/g);if(t&&t[0]){var n=t[0].match(/\(([^()]+)\)/g);this.platform=n&&n[0]?n[0].replace(/\(|\)/g,""):"",this.agent=navigator.userAgent.replace(t[0],""),this.platform[1]&&(this.agent=this.agent.replace(t[1],"")),this.agent=this.agent.replace(/  /g," ")}}else"undefined"!==typeof process&&(this.platform="".concat(process.platform," ").concat(process.arch),this.agent="NodeJS ".concat(process.version))}return Qe(e,[{key:"updateBackend",value:function(){var e=ct(st().mark((function e(){var t,n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.backends=Object.keys(qg().registryFactory),this.wasm.supported="undefined"!==typeof WebAssembly,this.wasm.backend=this.backends.includes("wasm"),!this.wasm.supported||!this.wasm.backend||"wasm"!==ty()){e.next=10;break}return e.next=6,id().getAsync("WASM_HAS_SIMD_SUPPORT");case 6:return this.wasm.simd=e.sent,e.next=9,id().getAsync("WASM_HAS_MULTITHREAD_SUPPORT");case 9:this.wasm.multithread=e.sent;case 10:if(t=Yte(100,100),n=t?t.getContext("webgl2"):void 0,this.webgl.supported="undefined"!==typeof n,this.webgl.backend=this.backends.includes("webgl"),!this.webgl.supported||!this.webgl.backend||"webgl"!==ty()&&"humangl"!==ty()){e.next=24;break}if("undefined"===oy().gpgpu){e.next=21;break}return e.next=18,oy().getGPGPUContext().gl;case 18:e.t0=e.sent,e.next=22;break;case 21:e.t0=null;case 22:(r=e.t0)&&(this.webgl.version=r.getParameter(r.VERSION),this.webgl.renderer=r.getParameter(r.RENDERER));case 24:if(this.webgpu.supported=this.browser&&"undefined"!==typeof navigator.gpu,this.webgpu.backend=this.backends.includes("webgpu"),e.prev=26,!this.webgpu.supported){e.next=31;break}return e.next=30,navigator.gpu.requestAdapter();case 30:this.webgpu.adapter=e.sent.name;case 31:e.next=36;break;case 33:e.prev=33,e.t1=e.catch(26),this.webgpu.supported=!1;case 36:try{this.kernels=Ch(ty()).map((function(e){return e.kernelName.toLowerCase()}))}catch(A_e){}case 37:case"end":return e.stop()}}),e,this,[[26,33]])})));return function(){return e.apply(this,arguments)}}()},{key:"updateCPU",value:function(){var e=ct(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={model:"",flags:[]},this.node&&this.platform.startsWith("linux"),this.cpu?this.cpu=t:Object.defineProperty(this,"cpu",{value:t});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ane=new rne,ine={cacheModels:!1,verbose:!0,debug:!1,modelBasePath:""};function one(e,t){return sne.apply(this,arguments)}function sne(){return(sne=ct(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ine.debug&&kc("load model fetch:",t,n),e.abrupt("return",fetch(t,n));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function une(e){return cne.apply(this,arguments)}function cne(){return(cne=ct(st().mark((function e(t){var n,r,a,i,o,s,u,c,l,d;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=wc(ine.modelBasePath,t||"")).toLowerCase().endsWith(".json")||(n+=".json"),r=n.split("/"),a="indexeddb://"+r[r.length-1].replace(".json",""),e.next=6,pg.listModels();case 6:return i=e.sent,o=ine.cacheModels&&Object.keys(i).includes(a),s="undefined"===typeof fetch?{}:{fetchFunc:function(e,t){return one(e,t)}},u=new kz(o?a:n,s),c=!1,e.prev=11,u.findIOHandler(),ine.debug&&kc("model load handler:",u.handler),e.next=16,u.handler.load();case 16:l=e.sent,u.loadSync(l),ine.verbose&&kc("load model:",u.modelUrl),c=!0,e.next=25;break;case 22:e.prev=22,e.t0=e.catch(11),kc("error loading model:",n,e.t0);case 25:if(!c||!ine.cacheModels||o){e.next=36;break}return e.prev=26,e.next=29,u.save(a);case 29:d=e.sent,kc("model saved:",a,d),e.next=36;break;case 33:e.prev=33,e.t1=e.catch(26),kc("error saving model:",n,e.t1);case 36:return e.abrupt("return",u);case 37:case"end":return e.stop()}}),e,null,[[11,22],[26,33]])})))).apply(this,arguments)}var lne,dne="2.8.1";vc({},{Models:function(){return Xue},load:function(){return Yue},reset:function(){return Zue},validate:function(){return Que}});var fne=[],pne=["white","black","asian","indian","other"],hne=[15,23,28,35.5,45.5,55.5,65],mne=0,vne=0,gne=Number.MAX_SAFE_INTEGER;function yne(e){return bne.apply(this,arguments)}function bne(){return(bne=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ane.initial&&(lne=null),lne){e.next=7;break}return e.next=4,une(t.face.gear);case 4:lne=e.sent,e.next=8;break;case 7:t.debug&&kc("cached model:",lne.modelUrl);case 8:return e.abrupt("return",lne);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xne(e,t,n,r){return Ane.apply(this,arguments)}function Ane(){return Ane=ct(st().mark((function e(t,n,r,a){var i,o,s,c;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(lne){e.next=2;break}return e.abrupt("return",{age:0,gender:"unknown",genderScore:0,race:[]});case 2:if(s=gne<((null==(i=n.face.gear)?void 0:i.skipFrames)||0),c=((null==(o=n.face.gear)?void 0:o.skipTime)||0)>Sc()-vne,!(n.skipAllowed&&c&&s&&mne===a&&fne[r])){e.next=7;break}return gne++,e.abrupt("return",fne[r]);case 7:return gne=0,e.abrupt("return",new Promise(function(){var e=ct(st().mark((function e(i){var o,s,c,l,d,f,p,h,m,v,g,y,b,x;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==lne?void 0:lne.inputs[0].shape){e.next=2;break}return e.abrupt("return");case 2:return l=[[0,.1,.9,.9]],(c={}).resize=HS.cropAndResize(t,l,[0],[lne.inputs[0].shape[2],lne.inputs[0].shape[1]]),d={age:0,gender:"unknown",genderScore:0,race:[]},(null==(o=n.face.gear)?void 0:o.enabled)&&(f=lne.execute(c.resize,["age_output","gender_output","race_output"]),p=u(f,3),c.age=p[0],c.gender=p[1],c.race=p[2]),e.next=9,c.gender.data();case 9:return h=e.sent,d.gender=h[0]>h[1]?"male":"female",d.genderScore=Math.round(100*(h[0]>h[1]?h[0]:h[1]))/100,e.next=14,c.race.data();case 14:for(m=e.sent,v=0;v<m.length;v++)m[v]>((null==(s=n.face.gear)?void 0:s.minConfidence)||.2)&&d.race.push({score:Math.round(100*m[v])/100,race:pne[v]});return d.race.sort((function(e,t){return t.score-e.score})),e.t0=Array,e.next=20,c.age.data();case 20:for(e.t1=e.sent,g=e.t0.from.call(e.t0,e.t1),y=g.map((function(e,t){return[hne[t],e]})).sort((function(e,t){return t[1]-e[1]})),b=y[0][0],x=1;x<y.length;x++)b+=y[x][1]*(y[x][0]-b);d.age=Math.round(10*b)/10,Object.keys(c).forEach((function(e){return Yg(c[e])})),fne[r]=d,mne=a,vne=Sc(),i(d);case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),Ane.apply(this,arguments)}var kne,wne={tf255:255,tf1:1,tf2:2,tf05:.5,tf127:127.5,rgb:[.2989,.587,.114]};function Sne(){wne.tf255=Jx(255,"float32"),wne.tf1=Jx(1,"float32"),wne.tf2=Jx(2,"float32"),wne.tf05=Jx(.5,"float32"),wne.tf127=Jx(127.5,"float32"),wne.rgb=rw([.2989,.587,.114],"float32")}var Ine,Ene=[],Cne=0,Nne=0,Tne=Number.MAX_SAFE_INTEGER;function _ne(e){return Rne.apply(this,arguments)}function Rne(){return(Rne=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ane.initial&&(kne=null),kne){e.next=7;break}return e.next=4,une(t.face.ssrnet.modelPathAge);case 4:kne=e.sent,e.next=8;break;case 7:t.debug&&kc("cached model:",kne.modelUrl);case 8:return e.abrupt("return",kne);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mne(e,t,n,r){return One.apply(this,arguments)}function One(){return One=ct(st().mark((function e(t,n,r,a){var i,o,s,u,c,l;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kne){e.next=2;break}return e.abrupt("return",{age:0});case 2:if(c=Tne<((null==(i=n.face.ssrnet)?void 0:i.skipFrames)||0),l=((null==(o=n.face.ssrnet)?void 0:o.skipTime)||0)>Sc()-Nne,!(n.skipAllowed&&c&&l&&Cne===a&&(null==(s=Ene[r])?void 0:s.age)&&(null==(u=Ene[r])?void 0:u.age)>0)){e.next=7;break}return Tne++,e.abrupt("return",Ene[r]);case 7:return Tne=0,e.abrupt("return",new Promise(function(){var e=ct(st().mark((function e(i){var o,s,u;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null==kne?void 0:kne.inputs)&&kne.inputs[0]&&kne.inputs[0].shape){e.next=2;break}return e.abrupt("return");case 2:if((o={}).resize=HS.resizeBilinear(t,[kne.inputs[0].shape[2],kne.inputs[0].shape[1]],!1),o.enhance=gb(o.resize,wne.tf255),s={age:0},n.face.ssrnet.enabled&&(o.age=kne.execute(o.enhance)),!o.age){e.next=12;break}return e.next=10,o.age.data();case 10:u=e.sent,s.age=Math.trunc(10*u[0])/10;case 12:Object.keys(o).forEach((function(e){return Yg(o[e])})),Ene[r]=s,Cne=a,Nne=Sc(),i(s);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),One.apply(this,arguments)}var Fne,Pne=[],Dne=0,Lne=0,zne=Number.MAX_SAFE_INTEGER,Bne=[.2989,.587,.114];function Wne(e){return jne.apply(this,arguments)}function jne(){return(jne=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ane.initial&&(Ine=null),Ine){e.next=7;break}return e.next=4,une(t.face.ssrnet.modelPathGender);case 4:Ine=e.sent,e.next=8;break;case 7:t.debug&&kc("cached model:",Ine.modelUrl);case 8:return e.abrupt("return",Ine);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vne(e,t,n,r){return Une.apply(this,arguments)}function Une(){return Une=ct(st().mark((function e(t,n,r,a){var i,o,s,c,l,d;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ine){e.next=2;break}return e.abrupt("return",{gender:"unknown",genderScore:0});case 2:if(l=zne<((null==(i=n.face.ssrnet)?void 0:i.skipFrames)||0),d=((null==(o=n.face.ssrnet)?void 0:o.skipTime)||0)>Sc()-Lne,!(n.skipAllowed&&l&&d&&Dne===a&&(null==(s=Pne[r])?void 0:s.gender)&&(null==(c=Pne[r])?void 0:c.genderScore)>0)){e.next=7;break}return zne++,e.abrupt("return",Pne[r]);case 7:return zne=0,e.abrupt("return",new Promise(function(){var e=ct(st().mark((function e(i){var o,s,c;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==Ine?void 0:Ine.inputs[0].shape){e.next=2;break}return e.abrupt("return");case 2:return(o={}).resize=HS.resizeBilinear(t,[Ine.inputs[0].shape[2],Ine.inputs[0].shape[1]],!1),o.enhance=Zg((function(){var e=u(Zk(o.resize,3,3),3),t=e[0],n=e[1],r=e[2],a=gb(t,Bne[0]),i=gb(n,Bne[1]),s=gb(r,Bne[2]),c=Ab([a,i,s]);return gb(OA(c,wne.tf05),2)})),s={gender:"unknown",genderScore:0},n.face.ssrnet.enabled&&(o.gender=Ine.execute(o.enhance)),e.next=9,o.gender.data();case 9:c=e.sent,s.gender=c[0]>c[1]?"female":"male",s.genderScore=c[0]>c[1]?Math.trunc(100*c[0])/100:Math.trunc(100*c[1])/100,Object.keys(o).forEach((function(e){return Yg(o[e])})),Pne[r]=s,Dne=a,Lne=Sc(),i(s);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),Une.apply(this,arguments)}var Hne=[],Gne=Number.MAX_SAFE_INTEGER,qne=0,Kne=0;function Xne(e){return Zne.apply(this,arguments)}function Zne(){return(Zne=ct(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ane.initial&&(Fne=null),Fne){e.next=7;break}return e.next=4,une(null==(n=t.face.antispoof)?void 0:n.modelPath);case 4:Fne=e.sent,e.next=8;break;case 7:t.debug&&kc("cached model:",Fne.modelUrl);case 8:return e.abrupt("return",Fne);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yne(e,t,n,r){return Jne.apply(this,arguments)}function Jne(){return Jne=ct(st().mark((function e(t,n,r,a){var i,o,s,u;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fne){e.next=2;break}return e.abrupt("return",0);case 2:if(s=((null==(i=n.face.antispoof)?void 0:i.skipTime)||0)>Sc()-Kne,u=Gne<((null==(o=n.face.antispoof)?void 0:o.skipFrames)||0),!(n.skipAllowed&&s&&u&&qne===a&&Hne[r])){e.next=7;break}return Gne++,e.abrupt("return",Hne[r]);case 7:return Gne=0,e.abrupt("return",new Promise(function(){var e=ct(st().mark((function e(n){var i,o,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=HS.resizeBilinear(t,[(null==Fne?void 0:Fne.inputs[0].shape)?Fne.inputs[0].shape[2]:0,(null==Fne?void 0:Fne.inputs[0].shape)?Fne.inputs[0].shape[1]:0],!1),o=null==Fne?void 0:Fne.execute(i),e.next=4,o.data();case 4:s=e.sent[0],Hne[r]=Math.round(100*s)/100,qne=a,Kne=Sc(),Yg([i,o]),n(Hne[r]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),Jne.apply(this,arguments)}var Qne={silhouette:[10,338,297,332,284,251,389,356,454,323,361,288,397,365,379,378,400,377,152,148,176,149,150,136,172,58,132,93,234,127,162,21,54,103,67,109],lipsUpperOuter:[185,40,39,37,0,267,269,270,409],lipsLowerOuter:[61,146,91,181,84,17,314,405,321,375,291],lipsUpperInner:[191,80,81,82,13,312,311,310,415],lipsLowerInner:[78,95,88,178,87,14,317,402,318,324,308],lipsLowerSemiOuter:[76,77,90,180,85,16,315,404,320,307,306],lipsUpperSemiOuter:[184,74,73,72,11,302,303,304,408],lipsLowerSemiInner:[62,96,89,179,86,15,316,403,319,325,292],lipsUpperSemiInner:[183,42,41,38,12,268,271,272,407],rightEyeUpper0:[246,161,160,159,158,157,173],rightEyeLower0:[33,7,163,144,145,153,154,155,133],rightEyeUpper1:[247,30,29,27,28,56,190],rightEyeLower1:[130,25,110,24,23,22,26,112,243],rightEyeUpper2:[113,225,224,223,222,221,189],rightEyeLower2:[226,31,228,229,230,231,232,233,244],rightEyeLower3:[143,111,117,118,119,120,121,128,245],rightEyebrowUpper:[156,70,63,105,66,107,55,193],rightEyebrowLower:[35,124,46,53,52,65],rightEyeIris:[473,474,475,476,477],leftEyeUpper0:[466,388,387,386,385,384,398],leftEyeLower0:[263,249,390,373,374,380,381,382,362],leftEyeUpper1:[467,260,259,257,258,286,414],leftEyeLower1:[359,255,339,254,253,252,256,341,463],leftEyeUpper2:[342,445,444,443,442,441,413],leftEyeLower2:[446,261,448,449,450,451,452,453,464],leftEyeLower3:[372,340,346,347,348,349,350,357,465],leftEyebrowUpper:[383,300,293,334,296,336,285,417],leftEyebrowLower:[265,353,276,283,282,295],leftEyeIris:[468,469,470,471,472],midwayBetweenEyes:[168],noseTip:[1],noseBottom:[2],noseRightCorner:[98],noseLeftCorner:[327],rightCheek:[205],leftCheek:[425]},$ne={count:468,mouth:13,symmetryLine:[13,Qne.midwayBetweenEyes[0]]},ere={leftEye:0,rightEye:1,nose:2,mouth:3,leftEar:4,rightEar:5,symmetryLine:[3,2]},tre=[{key:"EyeUpper0",indices:[9,10,11,12,13,14,15]},{key:"EyeUpper1",indices:[25,26,27,28,29,30,31]},{key:"EyeUpper2",indices:[41,42,43,44,45,46,47]},{key:"EyeLower0",indices:[0,1,2,3,4,5,6,7,8]},{key:"EyeLower1",indices:[16,17,18,19,20,21,22,23,24]},{key:"EyeLower2",indices:[32,33,34,35,36,37,38,39,40]},{key:"EyeLower3",indices:[54,55,56,57,58,59,60,61,62]},{key:"EyebrowUpper",indices:[63,64,65,66,67,68,69,70]},{key:"EyebrowLower",indices:[48,49,50,51,52,53]}],nre=[[.499976992607117,.652534008026123],[.500025987625122,.547487020492554],[.499974012374878,.602371990680695],[.482113003730774,.471979022026062],[.500150978565216,.527155995368958],[.499909996986389,.498252987861633],[.499523013830185,.40106201171875],[.289712011814117,.380764007568359],[.499954998493195,.312398016452789],[.499987006187439,.269918978214264],[.500023007392883,.107050001621246],[.500023007392883,.666234016418457],[.5000159740448,.679224014282227],[.500023007392883,.692348003387451],[.499976992607117,.695277988910675],[.499976992607117,.70593398809433],[.499976992607117,.719385027885437],[.499976992607117,.737019002437592],[.499967992305756,.781370997428894],[.499816000461578,.562981009483337],[.473773002624512,.573909997940063],[.104906998574734,.254140973091125],[.365929991006851,.409575998783112],[.338757991790771,.41302502155304],[.311120003461838,.409460008144379],[.274657994508743,.389131009578705],[.393361985683441,.403706014156342],[.345234006643295,.344011008739471],[.370094001293182,.346076011657715],[.319321990013123,.347265005111694],[.297903001308441,.353591024875641],[.24779200553894,.410809993743896],[.396889001131058,.842755019664764],[.280097991228104,.375599980354309],[.106310002505779,.399955987930298],[.2099249958992,.391353011131287],[.355807989835739,.534406006336212],[.471751004457474,.65040397644043],[.474155008792877,.680191993713379],[.439785003662109,.657229006290436],[.414617002010345,.66654098033905],[.450374007225037,.680860996246338],[.428770989179611,.682690978050232],[.374971002340317,.727805018424988],[.486716985702515,.547628998756409],[.485300987958908,.527395009994507],[.257764995098114,.314490020275116],[.401223003864288,.455172002315521],[.429818987846375,.548614978790283],[.421351999044418,.533740997314453],[.276895999908447,.532056987285614],[.483370006084442,.499586999416351],[.33721199631691,.282882988452911],[.296391993761063,.293242990970612],[.169294998049736,.193813979625702],[.447580009698868,.302609980106354],[.392390012741089,.353887975215912],[.354490011930466,.696784019470215],[.067304998636246,.730105042457581],[.442739009857178,.572826027870178],[.457098007202148,.584792017936707],[.381974011659622,.694710969924927],[.392388999462128,.694203019142151],[.277076005935669,.271932005882263],[.422551989555359,.563233017921448],[.385919004678726,.281364023685455],[.383103013038635,.255840003490448],[.331431001424789,.119714021682739],[.229923993349075,.232002973556519],[.364500999450684,.189113974571228],[.229622006416321,.299540996551514],[.173287004232407,.278747975826263],[.472878992557526,.666198015213013],[.446828007698059,.668527007102966],[.422762006521225,.673889994621277],[.445307999849319,.580065965652466],[.388103008270264,.693961024284363],[.403039008378983,.706539988517761],[.403629004955292,.693953037261963],[.460041999816895,.557139039039612],[.431158006191254,.692366003990173],[.452181994915009,.692366003990173],[.475387006998062,.692366003990173],[.465828001499176,.779190003871918],[.472328990697861,.736225962638855],[.473087012767792,.717857003211975],[.473122000694275,.704625964164734],[.473033010959625,.695277988910675],[.427942007780075,.695277988910675],[.426479011774063,.703539967536926],[.423162013292313,.711845993995667],[.4183090031147,.720062971115112],[.390094995498657,.639572978019714],[.013953999616206,.560034036636353],[.499913990497589,.58014702796936],[.413199990987778,.69539999961853],[.409626007080078,.701822996139526],[.468080013990402,.601534962654114],[.422728985548019,.585985004901886],[.463079988956451,.593783974647522],[.37211999297142,.47341400384903],[.334562003612518,.496073007583618],[.411671012639999,.546965003013611],[.242175996303558,.14767599105835],[.290776997804642,.201445996761322],[.327338010072708,.256527006626129],[.399509996175766,.748921036720276],[.441727995872498,.261676013469696],[.429764986038208,.187834024429321],[.412198007106781,.108901023864746],[.288955003023148,.398952007293701],[.218936994671822,.435410976409912],[.41278201341629,.398970007896423],[.257135003805161,.355440020561218],[.427684992551804,.437960982322693],[.448339998722076,.536936044692993],[.178560003638268,.45755398273468],[.247308000922203,.457193970680237],[.286267012357712,.467674970626831],[.332827985286713,.460712015628815],[.368755996227264,.447206974029541],[.398963987827301,.432654976844788],[.476410001516342,.405806005001068],[.189241006970406,.523923993110657],[.228962004184723,.348950982093811],[.490725994110107,.562400996685028],[.404670000076294,.485132992267609],[.019469000399113,.401564002037048],[.426243007183075,.420431017875671],[.396993011236191,.548797011375427],[.266469985246658,.376977026462555],[.439121007919312,.51895797252655],[.032313998788595,.644356966018677],[.419054001569748,.387154996395111],[.462783008813858,.505746960639954],[.238978996872902,.779744982719421],[.198220998048782,.831938028335571],[.107550002634525,.540755033493042],[.183610007166862,.740257024765015],[.134409993886948,.333683013916016],[.385764002799988,.883153975009918],[.490967005491257,.579378008842468],[.382384985685349,.508572995662689],[.174399003386497,.397670984268188],[.318785011768341,.39623498916626],[.343364000320435,.400596976280212],[.396100014448166,.710216999053955],[.187885001301765,.588537991046906],[.430987000465393,.944064974784851],[.318993002176285,.898285031318665],[.266247987747192,.869701027870178],[.500023007392883,.190576016902924],[.499976992607117,.954452991485596],[.366169989109039,.398822009563446],[.393207013607025,.39553701877594],[.410373002290726,.391080021858215],[.194993004202843,.342101991176605],[.388664990663528,.362284004688263],[.365961998701096,.355970978736877],[.343364000320435,.355356991291046],[.318785011768341,.35834002494812],[.301414996385574,.363156020641327],[.058132998645306,.319076001644135],[.301414996385574,.387449026107788],[.499987989664078,.618434011936188],[.415838003158569,.624195992946625],[.445681989192963,.566076993942261],[.465844005346298,.620640993118286],[.49992299079895,.351523995399475],[.288718998432159,.819945991039276],[.335278987884521,.852819979190826],[.440512001514435,.902418971061707],[.128294005990028,.791940987110138],[.408771991729736,.373893976211548],[.455606997013092,.451801002025604],[.499877005815506,.908990025520325],[.375436991453171,.924192011356354],[.11421000212431,.615022003650665],[.448662012815475,.695277988910675],[.4480200111866,.704632043838501],[.447111994028091,.715808033943176],[.444831997156143,.730794012546539],[.430011987686157,.766808986663818],[.406787008047104,.685672998428345],[.400738000869751,.681069016456604],[.392399996519089,.677703022956848],[.367855995893478,.663918972015381],[.247923001646996,.601333022117615],[.452769994735718,.420849978923798],[.43639200925827,.359887003898621],[.416164010763168,.368713974952698],[.413385987281799,.692366003990173],[.228018000721931,.683571994304657],[.468268007040024,.352671027183533],[.411361992359161,.804327011108398],[.499989002943039,.469825029373169],[.479153990745544,.442654013633728],[.499974012374878,.439637005329132],[.432112008333206,.493588984012604],[.499886006116867,.866917014122009],[.49991300702095,.821729004383087],[.456548988819122,.819200992584229],[.344549000263214,.745438992977142],[.37890899181366,.574010014533997],[.374292999505997,.780184984207153],[.319687992334366,.570737957954407],[.357154995203018,.604269981384277],[.295284003019333,.621580958366394],[.447750002145767,.862477004528046],[.410986006259918,.508723020553589],[.31395098567009,.775308012962341],[.354128003120422,.812552988529205],[.324548006057739,.703992962837219],[.189096003770828,.646299958229065],[.279776990413666,.71465802192688],[.1338230073452,.682700991630554],[.336768001317978,.644733011722565],[.429883986711502,.466521978378296],[.455527991056442,.548622965812683],[.437114000320435,.558896005153656],[.467287987470627,.529924988746643],[.414712011814117,.335219979286194],[.37704598903656,.322777986526489],[.344107985496521,.320150971412659],[.312875986099243,.32233202457428],[.283526003360748,.333190023899078],[.241245999932289,.382785975933075],[.102986000478268,.468762993812561],[.267612010240555,.424560010433197],[.297879010438919,.433175981044769],[.333433985710144,.433878004550934],[.366427004337311,.426115989685059],[.396012008190155,.416696012020111],[.420121014118195,.41022801399231],[.007561000064015,.480777025222778],[.432949006557465,.569517970085144],[.458638995885849,.479089021682739],[.473466008901596,.545744001865387],[.476087987422943,.563830018043518],[.468472003936768,.555056989192963],[.433990985155106,.582361996173859],[.483518004417419,.562983989715576],[.482482999563217,.57784903049469],[.42645001411438,.389798998832703],[.438998997211456,.39649498462677],[.450067013502121,.400434017181396],[.289712011814117,.368252992630005],[.276670008897781,.363372981548309],[.517862021923065,.471948027610779],[.710287988185883,.380764007568359],[.526226997375488,.573909997940063],[.895093023777008,.254140973091125],[.634069979190826,.409575998783112],[.661242008209229,.41302502155304],[.688880026340485,.409460008144379],[.725341975688934,.389131009578705],[.606630027294159,.40370500087738],[.654766023159027,.344011008739471],[.629905998706818,.346076011657715],[.680678009986877,.347265005111694],[.702096998691559,.353591024875641],[.75221198797226,.410804986953735],[.602918028831482,.842862963676453],[.719901978969574,.375599980354309],[.893692970275879,.399959981441498],[.790081977844238,.391354024410248],[.643998026847839,.534487962722778],[.528249025344849,.65040397644043],[.525849997997284,.680191040039062],[.560214996337891,.657229006290436],[.585384011268616,.66654098033905],[.549625992774963,.680860996246338],[.57122802734375,.682691991329193],[.624852001667023,.72809898853302],[.513050019741058,.547281980514526],[.51509702205658,.527251958847046],[.742246985435486,.314507007598877],[.598631024360657,.454979002475739],[.570338010787964,.548575043678284],[.578631997108459,.533622980117798],[.723087012767792,.532054007053375],[.516445994377136,.499638974666595],[.662801027297974,.282917976379395],[.70362401008606,.293271005153656],[.830704987049103,.193813979625702],[.552385985851288,.302568018436432],[.607609987258911,.353887975215912],[.645429015159607,.696707010269165],[.932694971561432,.730105042457581],[.557260990142822,.572826027870178],[.542901992797852,.584792017936707],[.6180260181427,.694710969924927],[.607590973377228,.694203019142151],[.722943007946014,.271963000297546],[.577413976192474,.563166975975037],[.614082992076874,.281386971473694],[.616907000541687,.255886018276215],[.668509006500244,.119913995265961],[.770092010498047,.232020974159241],[.635536015033722,.189248979091644],[.77039098739624,.299556016921997],[.826722025871277,.278755009174347],[.527121007442474,.666198015213013],[.553171992301941,.668527007102966],[.577238023281097,.673889994621277],[.554691970348358,.580065965652466],[.611896991729736,.693961024284363],[.59696102142334,.706539988517761],[.596370995044708,.693953037261963],[.539958000183105,.557139039039612],[.568841993808746,.692366003990173],[.547818005084991,.692366003990173],[.52461302280426,.692366003990173],[.534089982509613,.779141008853912],[.527670979499817,.736225962638855],[.526912987232208,.717857003211975],[.526877999305725,.704625964164734],[.526966989040375,.695277988910675],[.572058022022247,.695277988910675],[.573521018028259,.703539967536926],[.57683801651001,.711845993995667],[.581691026687622,.720062971115112],[.609944999217987,.639909982681274],[.986046016216278,.560034036636353],[.5867999792099,.69539999961853],[.590372025966644,.701822996139526],[.531915009021759,.601536989212036],[.577268004417419,.585934996604919],[.536915004253387,.593786001205444],[.627542972564697,.473352015018463],[.665585994720459,.495950996875763],[.588353991508484,.546862006187439],[.757824003696442,.14767599105835],[.709249973297119,.201507985591888],[.672684013843536,.256581008434296],[.600408971309662,.74900496006012],[.55826598405838,.261672019958496],[.570303976535797,.187870979309082],[.588165998458862,.109044015407562],[.711045026779175,.398952007293701],[.781069993972778,.435405015945435],[.587247014045715,.398931980133057],[.742869973182678,.355445981025696],[.572156012058258,.437651991844177],[.55186802148819,.536570012569427],[.821442008018494,.457556009292603],[.752701997756958,.457181990146637],[.71375697851181,.467626988887787],[.66711300611496,.460672974586487],[.631101012229919,.447153985500336],[.6008620262146,.432473003864288],[.523481011390686,.405627012252808],[.810747981071472,.523926019668579],[.771045982837677,.348959028720856],[.509127020835876,.562718033790588],[.595292985439301,.485023975372314],[.980530977249146,.401564002037048],[.573499977588654,.420000016689301],[.602994978427887,.548687994480133],[.733529984951019,.376977026462555],[.560611009597778,.519016981124878],[.967685997486115,.644356966018677],[.580985009670258,.387160003185272],[.537728011608124,.505385041236877],[.760966002941132,.779752969741821],[.801778972148895,.831938028335571],[.892440974712372,.54076099395752],[.816350996494293,.740260004997253],[.865594983100891,.333687007427216],[.614073991775513,.883246004581451],[.508952975273132,.579437971115112],[.617941975593567,.508316040039062],[.825608015060425,.397674977779388],[.681214988231659,.39623498916626],[.656635999679565,.400596976280212],[.603900015354156,.710216999053955],[.81208598613739,.588539004325867],[.56801301240921,.944564998149872],[.681007981300354,.898285031318665],[.733752012252808,.869701027870178],[.633830010890961,.398822009563446],[.606792986392975,.39553701877594],[.589659988880157,.391062021255493],[.805015981197357,.342108011245728],[.611334979534149,.362284004688263],[.634037971496582,.355970978736877],[.656635999679565,.355356991291046],[.681214988231659,.35834002494812],[.698584973812103,.363156020641327],[.941866993904114,.319076001644135],[.698584973812103,.387449026107788],[.584177017211914,.624107003211975],[.554318010807037,.566076993942261],[.534153997898102,.62064003944397],[.711217999458313,.819975018501282],[.664629995822906,.852871000766754],[.559099972248077,.902631998062134],[.871706008911133,.791940987110138],[.591234028339386,.373893976211548],[.544341027736664,.451583981513977],[.624562978744507,.924192011356354],[.88577002286911,.615028977394104],[.551338016986847,.695277988910675],[.551980018615723,.704632043838501],[.552887976169586,.715808033943176],[.555167973041534,.730794012546539],[.569944024085999,.767035007476807],[.593203008174896,.685675978660583],[.599261999130249,.681069016456604],[.607599973678589,.677703022956848],[.631937980651855,.663500010967255],[.752032995223999,.601315021514893],[.547226011753082,.420395016670227],[.563543975353241,.359827995300293],[.583841025829315,.368713974952698],[.586614012718201,.692366003990173],[.771915018558502,.683578014373779],[.531597018241882,.352482974529266],[.588370978832245,.804440975189209],[.52079701423645,.442565023899078],[.567984998226166,.493479013442993],[.543282985687256,.819254994392395],[.655317008495331,.745514988899231],[.621008992195129,.574018001556396],[.625559985637665,.78031200170517],[.680198013782501,.570719003677368],[.64276397228241,.604337990283966],[.704662978649139,.621529996395111],[.552012026309967,.862591981887817],[.589071989059448,.508637011051178],[.685944974422455,.775357007980347],[.645735025405884,.812640011310577],[.675342977046967,.703978002071381],[.810858011245728,.646304965019226],[.72012197971344,.714666962623596],[.866151988506317,.682704985141754],[.663187026977539,.644596993923187],[.570082008838654,.466325998306274],[.544561982154846,.548375964164734],[.562758982181549,.558784961700439],[.531987011432648,.530140042304993],[.585271000862122,.335177004337311],[.622952997684479,.32277899980545],[.655896008014679,.320163011550903],[.687132000923157,.322345972061157],[.716481983661652,.333200991153717],[.758756995201111,.382786989212036],[.897013008594513,.468769013881683],[.732392013072968,.424547016620636],[.70211398601532,.433162987232208],[.66652500629425,.433866024017334],[.633504986763,.426087975502014],[.603875994682312,.416586995124817],[.579657971858978,.409945011138916],[.992439985275269,.480777025222778],[.567192018032074,.569419980049133],[.54136598110199,.478899002075195],[.526564002037048,.546118021011353],[.523913025856018,.563830018043518],[.531529009342194,.555056989192963],[.566035985946655,.582329034805298],[.51631098985672,.563053965568542],[.5174720287323,.577877044677734],[.573594987392426,.389806985855103],[.560697972774506,.395331978797913],[.549755990505219,.399751007556915],[.710287988185883,.368252992630005],[.723330020904541,.363372981548309]],rre=[127,34,139,11,0,37,232,231,120,72,37,39,128,121,47,232,121,128,104,69,67,175,171,148,157,154,155,118,50,101,73,39,40,9,151,108,48,115,131,194,204,211,74,40,185,80,42,183,40,92,186,230,229,118,202,212,214,83,18,17,76,61,146,160,29,30,56,157,173,106,204,194,135,214,192,203,165,98,21,71,68,51,45,4,144,24,23,77,146,91,205,50,187,201,200,18,91,106,182,90,91,181,85,84,17,206,203,36,148,171,140,92,40,39,193,189,244,159,158,28,247,246,161,236,3,196,54,68,104,193,168,8,117,228,31,189,193,55,98,97,99,126,47,100,166,79,218,155,154,26,209,49,131,135,136,150,47,126,217,223,52,53,45,51,134,211,170,140,67,69,108,43,106,91,230,119,120,226,130,247,63,53,52,238,20,242,46,70,156,78,62,96,46,53,63,143,34,227,173,155,133,123,117,111,44,125,19,236,134,51,216,206,205,154,153,22,39,37,167,200,201,208,36,142,100,57,212,202,20,60,99,28,158,157,35,226,113,160,159,27,204,202,210,113,225,46,43,202,204,62,76,77,137,123,116,41,38,72,203,129,142,64,98,240,49,102,64,41,73,74,212,216,207,42,74,184,169,170,211,170,149,176,105,66,69,122,6,168,123,147,187,96,77,90,65,55,107,89,90,180,101,100,120,63,105,104,93,137,227,15,86,85,129,102,49,14,87,86,55,8,9,100,47,121,145,23,22,88,89,179,6,122,196,88,95,96,138,172,136,215,58,172,115,48,219,42,80,81,195,3,51,43,146,61,171,175,199,81,82,38,53,46,225,144,163,110,246,33,7,52,65,66,229,228,117,34,127,234,107,108,69,109,108,151,48,64,235,62,78,191,129,209,126,111,35,143,163,161,246,117,123,50,222,65,52,19,125,141,221,55,65,3,195,197,25,7,33,220,237,44,70,71,139,122,193,245,247,130,33,71,21,162,153,158,159,170,169,150,188,174,196,216,186,92,144,160,161,2,97,167,141,125,241,164,167,37,72,38,12,145,159,160,38,82,13,63,68,71,226,35,111,158,153,154,101,50,205,206,92,165,209,198,217,165,167,97,220,115,218,133,112,243,239,238,241,214,135,169,190,173,133,171,208,32,125,44,237,86,87,178,85,86,179,84,85,180,83,84,181,201,83,182,137,93,132,76,62,183,61,76,184,57,61,185,212,57,186,214,207,187,34,143,156,79,239,237,123,137,177,44,1,4,201,194,32,64,102,129,213,215,138,59,166,219,242,99,97,2,94,141,75,59,235,24,110,228,25,130,226,23,24,229,22,23,230,26,22,231,112,26,232,189,190,243,221,56,190,28,56,221,27,28,222,29,27,223,30,29,224,247,30,225,238,79,20,166,59,75,60,75,240,147,177,215,20,79,166,187,147,213,112,233,244,233,128,245,128,114,188,114,217,174,131,115,220,217,198,236,198,131,134,177,132,58,143,35,124,110,163,7,228,110,25,356,389,368,11,302,267,452,350,349,302,303,269,357,343,277,452,453,357,333,332,297,175,152,377,384,398,382,347,348,330,303,304,270,9,336,337,278,279,360,418,262,431,304,408,409,310,415,407,270,409,410,450,348,347,422,430,434,313,314,17,306,307,375,387,388,260,286,414,398,335,406,418,364,367,416,423,358,327,251,284,298,281,5,4,373,374,253,307,320,321,425,427,411,421,313,18,321,405,406,320,404,405,315,16,17,426,425,266,377,400,369,322,391,269,417,465,464,386,257,258,466,260,388,456,399,419,284,332,333,417,285,8,346,340,261,413,441,285,327,460,328,355,371,329,392,439,438,382,341,256,429,420,360,364,394,379,277,343,437,443,444,283,275,440,363,431,262,369,297,338,337,273,375,321,450,451,349,446,342,467,293,334,282,458,461,462,276,353,383,308,324,325,276,300,293,372,345,447,382,398,362,352,345,340,274,1,19,456,248,281,436,427,425,381,256,252,269,391,393,200,199,428,266,330,329,287,273,422,250,462,328,258,286,384,265,353,342,387,259,257,424,431,430,342,353,276,273,335,424,292,325,307,366,447,345,271,303,302,423,266,371,294,455,460,279,278,294,271,272,304,432,434,427,272,407,408,394,430,431,395,369,400,334,333,299,351,417,168,352,280,411,325,319,320,295,296,336,319,403,404,330,348,349,293,298,333,323,454,447,15,16,315,358,429,279,14,15,316,285,336,9,329,349,350,374,380,252,318,402,403,6,197,419,318,319,325,367,364,365,435,367,397,344,438,439,272,271,311,195,5,281,273,287,291,396,428,199,311,271,268,283,444,445,373,254,339,263,466,249,282,334,296,449,347,346,264,447,454,336,296,299,338,10,151,278,439,455,292,407,415,358,371,355,340,345,372,390,249,466,346,347,280,442,443,282,19,94,370,441,442,295,248,419,197,263,255,359,440,275,274,300,383,368,351,412,465,263,467,466,301,368,389,380,374,386,395,378,379,412,351,419,436,426,322,373,390,388,2,164,393,370,462,461,164,0,267,302,11,12,374,373,387,268,12,13,293,300,301,446,261,340,385,384,381,330,266,425,426,423,391,429,355,437,391,327,326,440,457,438,341,382,362,459,457,461,434,430,394,414,463,362,396,369,262,354,461,457,316,403,402,315,404,403,314,405,404,313,406,405,421,418,406,366,401,361,306,408,407,291,409,408,287,410,409,432,436,410,434,416,411,264,368,383,309,438,457,352,376,401,274,275,4,421,428,262,294,327,358,433,416,367,289,455,439,462,370,326,2,326,370,305,460,455,254,449,448,255,261,446,253,450,449,252,451,450,256,452,451,341,453,452,413,464,463,441,413,414,258,442,441,257,443,442,259,444,443,260,445,444,467,342,445,459,458,250,289,392,290,290,328,460,376,433,435,250,290,392,411,416,433,341,463,464,453,464,465,357,465,412,343,412,399,360,363,440,437,399,456,420,456,363,401,435,288,372,383,353,339,255,249,448,261,255,133,243,190,133,155,112,33,246,247,33,130,25,398,384,286,362,398,414,362,463,341,263,359,467,263,249,255,466,467,260,75,60,166,238,239,79,162,127,139,72,11,37,121,232,120,73,72,39,114,128,47,233,232,128,103,104,67,152,175,148,173,157,155,119,118,101,74,73,40,107,9,108,49,48,131,32,194,211,184,74,185,191,80,183,185,40,186,119,230,118,210,202,214,84,83,17,77,76,146,161,160,30,190,56,173,182,106,194,138,135,192,129,203,98,54,21,68,5,51,4,145,144,23,90,77,91,207,205,187,83,201,18,181,91,182,180,90,181,16,85,17,205,206,36,176,148,140,165,92,39,245,193,244,27,159,28,30,247,161,174,236,196,103,54,104,55,193,8,111,117,31,221,189,55,240,98,99,142,126,100,219,166,218,112,155,26,198,209,131,169,135,150,114,47,217,224,223,53,220,45,134,32,211,140,109,67,108,146,43,91,231,230,120,113,226,247,105,63,52,241,238,242,124,46,156,95,78,96,70,46,63,116,143,227,116,123,111,1,44,19,3,236,51,207,216,205,26,154,22,165,39,167,199,200,208,101,36,100,43,57,202,242,20,99,56,28,157,124,35,113,29,160,27,211,204,210,124,113,46,106,43,204,96,62,77,227,137,116,73,41,72,36,203,142,235,64,240,48,49,64,42,41,74,214,212,207,183,42,184,210,169,211,140,170,176,104,105,69,193,122,168,50,123,187,89,96,90,66,65,107,179,89,180,119,101,120,68,63,104,234,93,227,16,15,85,209,129,49,15,14,86,107,55,9,120,100,121,153,145,22,178,88,179,197,6,196,89,88,96,135,138,136,138,215,172,218,115,219,41,42,81,5,195,51,57,43,61,208,171,199,41,81,38,224,53,225,24,144,110,105,52,66,118,229,117,227,34,234,66,107,69,10,109,151,219,48,235,183,62,191,142,129,126,116,111,143,7,163,246,118,117,50,223,222,52,94,19,141,222,221,65,196,3,197,45,220,44,156,70,139,188,122,245,139,71,162,145,153,159,149,170,150,122,188,196,206,216,92,163,144,161,164,2,167,242,141,241,0,164,37,11,72,12,144,145,160,12,38,13,70,63,71,31,226,111,157,158,154,36,101,205,203,206,165,126,209,217,98,165,97,237,220,218,237,239,241,210,214,169,140,171,32,241,125,237,179,86,178,180,85,179,181,84,180,182,83,181,194,201,182,177,137,132,184,76,183,185,61,184,186,57,185,216,212,186,192,214,187,139,34,156,218,79,237,147,123,177,45,44,4,208,201,32,98,64,129,192,213,138,235,59,219,141,242,97,97,2,141,240,75,235,229,24,228,31,25,226,230,23,229,231,22,230,232,26,231,233,112,232,244,189,243,189,221,190,222,28,221,223,27,222,224,29,223,225,30,224,113,247,225,99,60,240,213,147,215,60,20,166,192,187,213,243,112,244,244,233,245,245,128,188,188,114,174,134,131,220,174,217,236,236,198,134,215,177,58,156,143,124,25,110,7,31,228,25,264,356,368,0,11,267,451,452,349,267,302,269,350,357,277,350,452,357,299,333,297,396,175,377,381,384,382,280,347,330,269,303,270,151,9,337,344,278,360,424,418,431,270,304,409,272,310,407,322,270,410,449,450,347,432,422,434,18,313,17,291,306,375,259,387,260,424,335,418,434,364,416,391,423,327,301,251,298,275,281,4,254,373,253,375,307,321,280,425,411,200,421,18,335,321,406,321,320,405,314,315,17,423,426,266,396,377,369,270,322,269,413,417,464,385,386,258,248,456,419,298,284,333,168,417,8,448,346,261,417,413,285,326,327,328,277,355,329,309,392,438,381,382,256,279,429,360,365,364,379,355,277,437,282,443,283,281,275,363,395,431,369,299,297,337,335,273,321,348,450,349,359,446,467,283,293,282,250,458,462,300,276,383,292,308,325,283,276,293,264,372,447,346,352,340,354,274,19,363,456,281,426,436,425,380,381,252,267,269,393,421,200,428,371,266,329,432,287,422,290,250,328,385,258,384,446,265,342,386,387,257,422,424,430,445,342,276,422,273,424,306,292,307,352,366,345,268,271,302,358,423,371,327,294,460,331,279,294,303,271,304,436,432,427,304,272,408,395,394,431,378,395,400,296,334,299,6,351,168,376,352,411,307,325,320,285,295,336,320,319,404,329,330,349,334,293,333,366,323,447,316,15,315,331,358,279,317,14,316,8,285,9,277,329,350,253,374,252,319,318,403,351,6,419,324,318,325,397,367,365,288,435,397,278,344,439,310,272,311,248,195,281,375,273,291,175,396,199,312,311,268,276,283,445,390,373,339,295,282,296,448,449,346,356,264,454,337,336,299,337,338,151,294,278,455,308,292,415,429,358,355,265,340,372,388,390,466,352,346,280,295,442,282,354,19,370,285,441,295,195,248,197,457,440,274,301,300,368,417,351,465,251,301,389,385,380,386,394,395,379,399,412,419,410,436,322,387,373,388,326,2,393,354,370,461,393,164,267,268,302,12,386,374,387,312,268,13,298,293,301,265,446,340,380,385,381,280,330,425,322,426,391,420,429,437,393,391,326,344,440,438,458,459,461,364,434,394,428,396,262,274,354,457,317,316,402,316,315,403,315,314,404,314,313,405,313,421,406,323,366,361,292,306,407,306,291,408,291,287,409,287,432,410,427,434,411,372,264,383,459,309,457,366,352,401,1,274,4,418,421,262,331,294,358,435,433,367,392,289,439,328,462,326,94,2,370,289,305,455,339,254,448,359,255,446,254,253,449,253,252,450,252,256,451,256,341,452,414,413,463,286,441,414,286,258,441,258,257,442,257,259,443,259,260,444,260,467,445,309,459,250,305,289,290,305,290,460,401,376,435,309,250,392,376,411,433,453,341,464,357,453,465,343,357,412,437,343,399,344,360,440,420,437,456,360,420,363,361,401,288,265,372,353,390,339,249,339,448,255];[127,234,132,58,172,150,149,148,152,377,378,379,397,288,361,454,356,70,63,105,66,107,336,296,334,293,300,168,6,195,4,98,97,2,326,327,33,160,158,133,153,144,362,385,387,263,373,380,57,40,37,0,267,270,287,321,314,17,84,91,78,81,13,311,308,402,14,178].map((function(e){return nre[e]})),[33,133,362,263,1,62,308,159,145,386,374,6,102,331,2,13,14,70,105,107,336,334,300,54,10,284,50,280,234,454,58,288,152].map((function(e){return nre[e]})),[33,133,362,263,1,78,308].map((function(e){return nre[e]}));function are(e){var t=e.map((function(e){return e[0]}));return t.push(e[e.length-1][1]),t}are([[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]]),are([[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]]),are([[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]]),are([[474,475],[475,476],[476,477],[477,474]]),are([[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]]),are([[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]]),are([[469,470],[470,471],[471,472],[472,469]]),are([[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]]);var ire=function(e){return[Math.abs(e.endPoint[0]-e.startPoint[0]),Math.abs(e.endPoint[1]-e.startPoint[1])]},ore=function(e){return[e.startPoint[0]+(e.endPoint[0]-e.startPoint[0])/2,e.startPoint[1]+(e.endPoint[1]-e.startPoint[1])/2,1]},sre=function(e,t){return e?[Math.trunc(Math.max(0,e.startPoint[0])),Math.trunc(Math.max(0,e.startPoint[1])),Math.trunc(Math.min(t.shape[2]||0,e.endPoint[0])-Math.max(0,e.startPoint[0])),Math.trunc(Math.min(t.shape[1]||0,e.endPoint[1])-Math.max(0,e.startPoint[1]))]:[0,0,0,0]},ure=function(e,t){return e?[e.startPoint[0]/(t.shape[2]||0),e.startPoint[1]/(t.shape[1]||0),(e.endPoint[0]-e.startPoint[0])/(t.shape[2]||0),(e.endPoint[1]-e.startPoint[1])/(t.shape[1]||0)]:[0,0,0,0]},cre=function(e,t){return{startPoint:[e.startPoint[0]*t[0],e.startPoint[1]*t[1]],endPoint:[e.endPoint[0]*t[0],e.endPoint[1]*t[1]],landmarks:e.landmarks,confidence:e.confidence}},lre=function(e,t,n){var r=t.shape[1],a=t.shape[2],i=[e.startPoint[1]/r,e.startPoint[0]/a,e.endPoint[1]/r,e.endPoint[0]/a],o=HS.cropAndResize(t,[i],[0],n),s=vb(o,wne.tf255);return Yg(o),s},dre=function(e,t){var n=ore(e),r=ire(e),a=[t*r[0]/2,t*r[1]/2];return{startPoint:[n[0]-a[0],n[1]-a[1]],endPoint:[n[0]+a[0],n[1]+a[1]],landmarks:e.landmarks,confidence:e.confidence}},fre=function(e){var t=ore(e),n=ire(e),r=Math.max.apply(Math,Tn(n))/2;return{startPoint:[Math.round(t[0]-r),Math.round(t[1]-r)],endPoint:[Math.round(t[0]+r),Math.round(t[1]+r)],landmarks:e.landmarks,confidence:e.confidence}},pre=function(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{startPoint:[Math.min.apply(Math,Tn(t)),Math.min.apply(Math,Tn(n))],endPoint:[Math.max.apply(Math,Tn(t)),Math.max.apply(Math,Tn(n))],landmarks:e}},hre=[[1,0,0],[0,1,0],[0,0,1]],mre=function(e,t){return(n=Math.PI/2-Math.atan2(-(t[1]-e[1]),t[0]-e[0]))-2*Math.PI*Math.floor((n+Math.PI)/(2*Math.PI));var n},vre=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},gre=function(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n},yre=function(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r][t]);return n},bre=function(e,t){for(var n=[],r=e.length,a=0;a<r;a++){n.push([]);for(var i=0;i<r;i++)n[a].push(gre(e[a],yre(t,i)))}return n},xre=function(e,t){var n=Math.cos(e),r=Math.sin(e),a=[[n,-r,0],[r,n,0],[0,0,1]],i=vre(t[0],t[1]),o=bre(i,a),s=vre(-t[0],-t[1]);return bre(o,s)};function Are(e){for(var t=192===e?{strides:[4],anchors:[1]}:{strides:[e/16,e/8],anchors:[2,6]},n=[],r=0;r<t.strides.length;r++)for(var a=t.strides[r],i=Math.floor((e+a-1)/a),o=Math.floor((e+a-1)/a),s=t.anchors[r],u=0;u<i;u++)for(var c=a*(u+.5),l=0;l<o;l++)for(var d=a*(l+.5),f=0;f<s;f++)n.push([d,c]);return n}function kre(e,t,n,r,a){var i=ire(t),o=e.map((function(e){return[i[0]/a*(e[0]-a/2),i[1]/a*(e[1]-a/2),e[2]||0]})),s=n&&0!==n&&Math.abs(n)>.2,u=s?xre(n,[0,0]):hre,c=s?o.map((function(e){return[].concat(Tn(function(e,t){return[gre(e,t[0]),gre(e,t[1])]}(e,u)),[e[2]])})):o,l=s?function(e){var t=[[e[0][0],e[1][0]],[e[0][1],e[1][1]]],n=[e[0][2],e[1][2]],r=[-gre(t[0],n),-gre(t[1],n)];return[t[0].concat(r[0]),t[1].concat(r[1]),[0,0,1]]}(r):hre,d=ore(t),f=[gre(d,l[0]),gre(d,l[1])];return c.map((function(e){return[Math.trunc(e[0]+f[0]),Math.trunc(e[1]+f[1]),Math.trunc(e[2]||0)]}))}function wre(e,t,n,r){var a,i=t.landmarks.length>=$ne.count?$ne.symmetryLine:ere.symmetryLine,o=0,s=hre;if(e&&ane.kernels.includes("rotatewithoffset"))if((o=mre(t.landmarks[i[0]],t.landmarks[i[1]]))&&0!==o&&Math.abs(o)>.2){var u=ore(t),c=[u[0]/n.shape[2],u[1]/n.shape[1]],l=HS.rotateWithOffset(n,o,0,c);s=xre(-o,u),a=lre(t,l,[r,r]),Yg(l)}else a=lre(t,n,[r,r]);else a=lre(t,n,[r,r]);return[o,s,a]}var Sre,Ire=function(e,t){var n=function(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return[Math.min.apply(Math,Tn(t))+(Math.max.apply(Math,Tn(t))-Math.min.apply(Math,Tn(t)))/2,Math.min.apply(Math,Tn(n))+(Math.max.apply(Math,Tn(n))-Math.min.apply(Math,Tn(n)))/2]}(e),r=ire(t);return{startPoint:[n[0]-r[0]/2,n[1]-r[1]/2],endPoint:[n[0]+r[0]/2,n[1]+r[1]/2]}},Ere=null,Cre=0,Nre=null,Tre=function(){return Cre};function _re(e){return Rre.apply(this,arguments)}function Rre(){return(Rre=ct(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ane.initial&&(Sre=null),Sre){e.next=7;break}return e.next=4,une(null==(n=t.face.detector)?void 0:n.modelPath);case 4:Sre=e.sent,e.next=8;break;case 7:t.debug&&kc("cached model:",Sre.modelUrl);case 8:return Cre=Sre.inputs[0].shape?Sre.inputs[0].shape[2]:0,Nre=Jx(Cre,"int32"),Ere=aw(Are(Cre)),e.abrupt("return",Sre);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mre(e){var t={};t.boxStarts=Qb(e,[0,1],[-1,2]),t.centers=hb(t.boxStarts,Ere),t.boxSizes=Qb(e,[0,3],[-1,2]),t.boxSizesNormalized=vb(t.boxSizes,Nre),t.centersNormalized=vb(t.centers,Nre),t.halfBoxSize=vb(t.boxSizesNormalized,wne.tf2),t.starts=OA(t.centersNormalized,t.halfBoxSize),t.ends=hb(t.centersNormalized,t.halfBoxSize),t.startNormalized=gb(t.starts,Nre),t.endNormalized=gb(t.ends,Nre);var n=px([t.startNormalized,t.endNormalized],1);return Object.keys(t).forEach((function(e){return Yg(t[e])})),n}function Ore(e,t){return Fre.apply(this,arguments)}function Fre(){return Fre=ct(st().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,p,h;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!t||t.isDisposedInternal||4!==t.shape.length||t.shape[1]<1||t.shape[2]<1)){e.next=2;break}return e.abrupt("return",[]);case 2:return(s={}).resized=HS.resizeBilinear(t,[Cre,Cre]),s.div=vb(s.resized,wne.tf127),s.normalized=OA(s.div,wne.tf05),u=null==Sre?void 0:Sre.execute(s.normalized),Array.isArray(u)&&u.length>2?(c=u.sort((function(e,t){return e.size-t.size})),s.concat384=Yb([c[0],c[2]],2),s.concat512=Yb([c[1],c[3]],2),s.concat=Yb([s.concat512,s.concat384],1),s.batch=Qk(s.concat,0)):Array.isArray(u)?s.batch=Qk(u[0]):s.batch=Qk(u),Yg(u),s.boxes=Mre(s.batch),s.logits=Qb(s.batch,[0,0],[-1,1]),s.sigmoid=Jb(s.logits),s.scores=Qk(s.sigmoid),e.next=15,HS.nonMaxSuppressionAsync(s.boxes,s.scores,(null==(r=n.face.detector)?void 0:r.maxDetected)||0,(null==(a=n.face.detector)?void 0:a.iouThreshold)||0,(null==(i=n.face.detector)?void 0:i.minConfidence)||0);case 15:return s.nms=e.sent,e.next=18,s.nms.array();case 18:return l=e.sent,d=[],e.next=22,s.scores.data();case 22:f=e.sent,p=0;case 24:if(!(p<l.length)){e.next=31;break}if(!((h=f[l[p]])>((null==(o=n.face.detector)?void 0:o.minConfidence)||0))){e.next=28;break}return e.delegateYield(st().mark((function e(){var r,a,i,o,u,c;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={}).bbox=Qb(s.boxes,[l[p],0],[1,-1]),r.slice=Qb(s.batch,[l[p],5],[1,-1]),r.squeeze=Qk(r.slice),r.landmarks=Kb(r.squeeze,[6,-1]),e.next=7,r.bbox.data();case 7:return a=e.sent,e.t0=[a[0],a[1]],e.t1=[a[2],a[3]],e.next=12,r.landmarks.array();case 12:e.t2=e.sent,e.t3=h,i={startPoint:e.t0,endPoint:e.t1,landmarks:e.t2,confidence:e.t3},o=cre(i,[(t.shape[2]||0)/Cre,(t.shape[1]||0)/Cre]),u=dre(o,n.face.scale||1.4),c=fre(u),d.push(c),Object.keys(r).forEach((function(e){return Yg(r[e])}));case 20:case"end":return e.stop()}}),e)}))(),"t0",28);case 28:p++,e.next=24;break;case 31:return Object.keys(s).forEach((function(e){return Yg(s[e])})),e.abrupt("return",d);case 33:case"end":return e.stop()}}),e)}))),Fre.apply(this,arguments)}var Pre={};vc(Pre,{connected:function(){return Lre},kpt:function(){return Dre}});var Dre=["nose","leftEyeInside","leftEye","leftEyeOutside","rightEyeInside","rightEye","rightEyeOutside","leftEar","rightEar","leftMouth","rightMouth","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftPinky","rightPinky","leftIndex","rightIndex","leftThumb","rightThumb","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle","leftHeel","rightHeel","leftFoot","rightFoot","bodyCenter","bodyTop","leftPalm","leftHand","rightPalm","rightHand"],Lre={shoulders:["leftShoulder","rightShoulder"],hips:["rightHip","leftHip"],mouth:["leftMouth","rightMouth"],leftLegUpper:["leftHip","leftKnee"],leftLegLower:["leftKnee","leftAnkle"],leftFoot:["leftAnkle","leftHeel","leftFoot"],leftTorso:["leftShoulder","leftHip"],leftArmUpper:["leftShoulder","leftElbow"],leftArmLower:["leftElbow","leftWrist"],leftHand:["leftWrist","leftPalm"],leftHandPinky:["leftPalm","leftPinky"],leftHandIndex:["leftPalm","leftIndex"],leftHandThumb:["leftPalm","leftThumb"],leftEyeOutline:["leftEyeInside","leftEyeOutside"],rightLegUpper:["rightHip","rightKnee"],rightLegLower:["rightKnee","rightAnkle"],rightFoot:["rightAnkle","rightHeel","rightFoot"],rightTorso:["rightShoulder","rightHip"],rightArmUpper:["rightShoulder","rightElbow"],rightArmLower:["rightElbow","rightWrist"],rightHand:["rightWrist","rightPalm"],rightHandPinky:["rightPalm","rightPinky"],rightHandIndex:["rightPalm","rightIndex"],rightHandThumb:["rightPalm","rightThumb"],rightEyeOutline:["rightEyeInside","rightEyeOutside"]},zre=224,Bre=[8,16,32,32,32];function Wre(){return jre.apply(this,arguments)}function jre(){return jre=ct(st().mark((function e(){var t,n,r,a,i,o,s,u,c,l;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=[],n=0;n<5;){for(r=0,a=n;a<Bre.length&&Bre[a]===Bre[n];)r+=2,a++;for(i=Bre[n],o=Math.ceil(zre/i),s=Math.ceil(zre/i),u=0;u<o;++u)for(c=0;c<s;++c)for(l=0;l<r;++l)t.push({x:(c+.5)/s,y:(u+.5)/o});n=a}({x:rw(t.map((function(e){return e.x}))),y:rw(t.map((function(e){return e.y})))});case 4:case"end":return e.stop()}}),e)}))),jre.apply(this,arguments)}function Vre(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1],n=[e.map((function(e){return e[0]})),e.map((function(e){return e[1]}))],r=[Math.min.apply(Math,Tn(n[0])),Math.min.apply(Math,Tn(n[1]))],a=[Math.max.apply(Math,Tn(n[0])),Math.max.apply(Math,Tn(n[1]))],i=[r[0],r[1],a[0]-r[0],a[1]-r[1]],o=[i[0]/t[0],i[1]/t[1],i[2]/t[0],i[3]/t[1]];return{box:i,boxRaw:o}}function Ure(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1],n=[e.map((function(e){return e[0]})),e.map((function(e){return e[1]}))],r=[Math.min.apply(Math,Tn(n[0])),Math.min.apply(Math,Tn(n[1]))],a=[Math.max.apply(Math,Tn(n[0])),Math.max.apply(Math,Tn(n[1]))],i=[(r[0]+a[0])/2,(r[1]+a[1])/2],o=Math.max(i[0]-r[0],i[1]-r[1],-i[0]+a[0],-i[1]+a[1]),s=[Math.trunc(i[0]-o),Math.trunc(i[1]-o),Math.trunc(2*o),Math.trunc(2*o)],u=[s[0]/t[0],s[1]/t[1],s[2]/t[0],s[3]/t[1]];return{box:s,boxRaw:u}}function Hre(e,t){var n=[e[2]*t,e[3]*t];return[e[0]-(n[0]-e[2])/2,e[1]-(n[1]-e[3])/2,n[0],n[1]]}var Gre=!0,qre={detector:null,landmarks:null},Kre={detector:[224,224],landmarks:[256,256]},Xre=Number.MAX_SAFE_INTEGER,Zre=["ld_3d","activation_segmentation","activation_heatmap","world_3d","output_poseflag"],Yre=null,Jre=[[0,0],[0,0],[0,0],[0,0]],Qre=0,$re=function(e){return 1-1/(1+Math.exp(e))};function eae(e){return tae.apply(this,arguments)}function tae(){return(tae=ct(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Gre&&(qre.detector=null),qre.detector||!t.body.detector||!t.body.detector.modelPath){e.next=10;break}return e.next=4,une(t.body.detector.modelPath);case 4:qre.detector=e.sent,n=Object.values(qre.detector.modelSignature.inputs),Kre.detector[0]=Array.isArray(n)?parseInt(n[0].tensorShape.dim[1].size):0,Kre.detector[1]=Array.isArray(n)?parseInt(n[0].tensorShape.dim[2].size):0,e.next=11;break;case 10:t.debug&&qre.detector&&kc("cached model:",qre.detector.modelUrl);case 11:return e.next=13,Wre();case 13:return e.abrupt("return",qre.detector);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nae(e){return rae.apply(this,arguments)}function rae(){return(rae=ct(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Gre&&(qre.landmarks=null),qre.landmarks){e.next=10;break}return e.next=4,une(t.body.modelPath);case 4:qre.landmarks=e.sent,n=Object.values(qre.landmarks.modelSignature.inputs),Kre.landmarks[0]=Array.isArray(n)?parseInt(n[0].tensorShape.dim[1].size):0,Kre.landmarks[1]=Array.isArray(n)?parseInt(n[0].tensorShape.dim[2].size):0,e.next=11;break;case 10:t.debug&&kc("cached model:",qre.landmarks.modelUrl);case 11:return e.abrupt("return",qre.landmarks);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aae(e,t){return iae.apply(this,arguments)}function iae(){return iae=ct(st().mark((function e(t,n){var r,a,i,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},t.shape&&t.shape[1]&&t.shape[2]){e.next=3;break}return e.abrupt("return",t);case 3:return t.shape[1]!==t.shape[2]?(i=[t.shape[2]>t.shape[1]?Math.trunc((t.shape[2]-t.shape[1])/2):0,t.shape[2]>t.shape[1]?Math.trunc((t.shape[2]-t.shape[1])/2):0],o=[t.shape[1]>t.shape[2]?Math.trunc((t.shape[1]-t.shape[2])/2):0,t.shape[1]>t.shape[2]?Math.trunc((t.shape[1]-t.shape[2])/2):0],Jre=[[0,0],i,o,[0,0]],r.pad=ok(r.cropped||t,Jre),r.resize=HS.resizeBilinear(r.pad,[n,n]),a=vb(r.resize,wne.tf255)):t.shape[1]!==n?(r.resize=HS.resizeBilinear(r.cropped||t,[n,n]),a=vb(r.resize,wne.tf255)):a=vb(r.cropped||t,wne.tf255),Object.keys(r).forEach((function(e){return Yg(r[e])})),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)}))),iae.apply(this,arguments)}function oae(e,t){var n,r=lc(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.position=[Math.trunc(a.position[0]*(t[0]+Jre[2][0]+Jre[2][1])/t[0]-Jre[2][0]),Math.trunc(a.position[1]*(t[1]+Jre[1][0]+Jre[1][1])/t[1]-Jre[1][0]),a.position[2]],a.positionRaw=[a.position[0]/t[0],a.position[1]/t[1],2*a.position[2]/(t[0]+t[1])]}}catch(i){r.e(i)}finally{r.f()}return e}function sae(e){return uae.apply(this,arguments)}function uae(){return uae=ct(st().mark((function e(t){var n,r,a,i,o,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.find((function(e){return"leftPalm"===e.part})),r=t.find((function(e){return"leftWrist"===e.part})),a=t.find((function(e){return"leftIndex"===e.part})),n.position[2]=((r.position[2]||0)+(a.position[2]||0))/2,i=t.find((function(e){return"rightPalm"===e.part})),o=t.find((function(e){return"rightWrist"===e.part})),s=t.find((function(e){return"rightIndex"===e.part})),i.position[2]=((o.position[2]||0)+(s.position[2]||0))/2;case 8:case"end":return e.stop()}}),e)}))),uae.apply(this,arguments)}function cae(e,t,n){return lae.apply(this,arguments)}function lae(){return lae=ct(st().mark((function e(t,n,r){var a,i,o,s,c,l,d,f,p,h,m,v,g,y,b,x,A,k,w,S,I,E,C;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={},o=null==(a=qre.landmarks)?void 0:a.execute(t,Zre),s=u(o,5),i.ld=s[0],i.segmentation=s[1],i.heatmap=s[2],i.world=s[3],i.poseflag=s[4],e.next=10,i.poseflag.data();case 10:return c=e.sent[0],e.next=13,i.ld.data();case 13:return l=e.sent,e.next=16,i.world.data();case 16:for(d=e.sent,Object.keys(i).forEach((function(e){return Yg(i[e])})),f=[],5,p=0;p<l.length/5;p++)h=$re(l[5*p+3]),m=$re(l[5*p+4]),v=Math.trunc(100*h*m*c)/100,g=[l[5*p+0]/Kre.landmarks[0],l[5*p+1]/Kre.landmarks[1],l[5*p+2]+0],y=[Math.trunc(r[0]*g[0]),Math.trunc(r[1]*g[1]),g[2]],b=[d[5*p+0],d[5*p+1],d[5*p+2]+0],f.push({part:Dre[p],positionRaw:g,position:y,distance:b,score:v});if(!(c<(n.body.minConfidence||0))){e.next=23;break}return e.abrupt("return",null);case 23:for(sae(f),x=oae(f,r),A=x.map((function(e){return e.position})),k=Vre(A,[r[0],r[1]]),w={},S=function(){for(var e=u(E[I],2),t=e[0],n=e[1],r=[],a=function(e){var t=x.find((function(t){return t.part===n[e]})),a=x.find((function(t){return t.part===n[e+1]}));t&&a&&r.push([t.position,a.position])},i=0;i<n.length-1;i++)a(i);w[t]=r},I=0,E=Object.entries(Lre);I<E.length;I++)S();return C={id:0,score:Math.trunc(100*c)/100,box:k.box,boxRaw:k.boxRaw,keypoints:x,annotations:w},e.abrupt("return",C);case 32:case"end":return e.stop()}}),e)}))),lae.apply(this,arguments)}function dae(e,t){return fae.apply(this,arguments)}function fae(){return fae=ct(st().mark((function e(t,n){var r,a,i,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[t.shape[2]||0,t.shape[1]||0],a=(n.body.skipTime||0)>Sc()-Qre,i=Xre<(n.body.skipFrames||0),!(n.skipAllowed&&a&&i&&null!==Yre)){e.next=7;break}Xre++,e.next=17;break;case 7:return o={},e.next=10,aae(t,256);case 10:return o.landmarks=e.sent,e.next=13,cae(o.landmarks,n,r);case 13:Yre=e.sent,Object.keys(o).forEach((function(e){return Yg(o[e])})),Qre=Sc(),Xre=0;case 17:return e.abrupt("return",Yre?[Yre]:[]);case 18:case"end":return e.stop()}}),e)}))),fae.apply(this,arguments)}var pae,hae=[{class:1,label:"person"},{class:2,label:"bicycle"},{class:3,label:"car"},{class:4,label:"motorcycle"},{class:5,label:"airplane"},{class:6,label:"bus"},{class:7,label:"train"},{class:8,label:"truck"},{class:9,label:"boat"},{class:10,label:"traffic light"},{class:11,label:"fire hydrant"},{class:12,label:"stop sign"},{class:13,label:"parking meter"},{class:14,label:"bench"},{class:15,label:"bird"},{class:16,label:"cat"},{class:17,label:"dog"},{class:18,label:"horse"},{class:19,label:"sheep"},{class:20,label:"cow"},{class:21,label:"elephant"},{class:22,label:"bear"},{class:23,label:"zebra"},{class:24,label:"giraffe"},{class:25,label:"backpack"},{class:26,label:"umbrella"},{class:27,label:"handbag"},{class:28,label:"tie"},{class:29,label:"suitcase"},{class:30,label:"frisbee"},{class:31,label:"skis"},{class:32,label:"snowboard"},{class:33,label:"sports ball"},{class:34,label:"kite"},{class:35,label:"baseball bat"},{class:36,label:"baseball glove"},{class:37,label:"skateboard"},{class:38,label:"surfboard"},{class:39,label:"tennis racket"},{class:40,label:"bottle"},{class:41,label:"wine glass"},{class:42,label:"cup"},{class:43,label:"fork"},{class:44,label:"knife"},{class:45,label:"spoon"},{class:46,label:"bowl"},{class:47,label:"banana"},{class:48,label:"apple"},{class:49,label:"sandwich"},{class:50,label:"orange"},{class:51,label:"broccoli"},{class:52,label:"carrot"},{class:53,label:"hot dog"},{class:54,label:"pizza"},{class:55,label:"donut"},{class:56,label:"cake"},{class:57,label:"chair"},{class:58,label:"couch"},{class:59,label:"potted plant"},{class:60,label:"bed"},{class:61,label:"dining table"},{class:62,label:"toilet"},{class:63,label:"tv"},{class:64,label:"laptop"},{class:65,label:"mouse"},{class:66,label:"remote"},{class:67,label:"keyboard"},{class:68,label:"cell phone"},{class:69,label:"microwave"},{class:70,label:"oven"},{class:71,label:"toaster"},{class:72,label:"sink"},{class:73,label:"refrigerator"},{class:74,label:"book"},{class:75,label:"clock"},{class:76,label:"vase"},{class:77,label:"scissors"},{class:78,label:"teddy bear"},{class:79,label:"hair drier"},{class:80,label:"toothbrush"}],mae=0,vae=[],gae=0,yae=Number.MAX_SAFE_INTEGER;function bae(e){return xae.apply(this,arguments)}function xae(){return(xae=ct(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ane.initial&&(pae=null),pae){e.next=9;break}return e.next=4,une(t.object.modelPath);case 4:pae=e.sent,n=Object.values(pae.modelSignature.inputs),mae=Array.isArray(n)?parseInt(n[0].tensorShape.dim[2].size):0,e.next=10;break;case 9:t.debug&&kc("cached model:",pae.modelUrl);case 10:return e.abrupt("return",pae);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Aae(e,t,n){return kae.apply(this,arguments)}function kae(){return kae=ct(st().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,p,h,m,v,g,y,b;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return a={},i=[],e.next=6,t.array();case 6:return o=e.sent,a.squeeze=Qk(t),s=Zk(a.squeeze,6,1),a.stack=$k([s[1],s[0],s[3],s[2]],1),a.boxes=Qk(a.stack),a.scores=Qk(s[4]),a.classes=Qk(s[5]),Yg([t].concat(Tn(s))),e.next=16,HS.nonMaxSuppressionAsync(a.boxes,a.scores,r.object.maxDetected,r.object.iouThreshold,r.object.minConfidence||0);case 16:return a.nms=e.sent,e.next=19,a.nms.data();case 19:for(u=e.sent,c=0,l=0,d=Array.from(u);l<d.length;l++)f=d[l],p=Math.trunc(100*o[0][f][4])/100,h=o[0][f][5],m=hae[h].label,v=o[0][f][0]/mae,g=o[0][f][1]/mae,y=[v,g,o[0][f][2]/mae-v,o[0][f][3]/mae-g],b=[Math.trunc(y[0]*n[0]),Math.trunc(y[1]*n[1]),Math.trunc(y[2]*n[0]),Math.trunc(y[3]*n[1])],i.push({id:c++,score:p,class:h,label:m,box:b,boxRaw:y});return Object.keys(a).forEach((function(e){return Yg(a[e])})),e.abrupt("return",i);case 24:case"end":return e.stop()}}),e)}))),kae.apply(this,arguments)}function wae(e,t){return Sae.apply(this,arguments)}function Sae(){return Sae=ct(st().mark((function e(t,n){var r,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n.object.skipTime||0)>Sc()-gae,a=yae<(n.object.skipFrames||0),!(n.skipAllowed&&r&&a&&vae.length>0)){e.next=5;break}return yae++,e.abrupt("return",vae);case 5:return yae=0,e.abrupt("return",new Promise(function(){var e=ct(st().mark((function e(r){var a,i,o,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[t.shape[2]||0,t.shape[1]||0],i=HS.resizeBilinear(t,[mae,mae]),o=n.object.enabled?null==pae?void 0:pae.execute(i,["tower_0/detections"]):null,gae=Sc(),Yg(i),e.next=7,Aae(o,a,n);case 7:s=e.sent,vae=s,r(s);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:case"end":return e.stop()}}),e)}))),Sae.apply(this,arguments)}var Iae={};vc(Iae,{connected:function(){return Nae},kpt:function(){return Cae}});var Eae,Cae=["head","neck","rightShoulder","rightElbow","rightWrist","chest","leftShoulder","leftElbow","leftWrist","bodyCenter","rightHip","rightKnee","rightAnkle","leftHip","leftKnee","leftAnkle"],Nae={leftLeg:["leftHip","leftKnee","leftAnkle"],rightLeg:["rightHip","rightKnee","rightAnkle"],torso:["leftShoulder","rightShoulder","rightHip","leftHip","leftShoulder"],leftArm:["leftShoulder","leftElbow","leftWrist"],rightArm:["rightShoulder","rightElbow","rightWrist"],head:[]},Tae=0,_ae={id:0,keypoints:[],box:[0,0,0,0],boxRaw:[0,0,0,0],score:0,annotations:{}},Rae=Number.MAX_SAFE_INTEGER;function Mae(e){return Oae.apply(this,arguments)}function Oae(){return(Oae=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ane.initial&&(Eae=null),Eae){e.next=7;break}return e.next=4,une(t.body.modelPath);case 4:Eae=e.sent,e.next=8;break;case 7:t.debug&&kc("cached model:",Eae.modelUrl);case 8:return e.abrupt("return",Eae);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fae(e,t){return Pae.apply(this,arguments)}function Pae(){return Pae=ct(st().mark((function e(t,n){var r,a,i,o,s,c,l,d,f,p,h;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u(t.shape,2),a=r[0],i=r[1],o=Kb(t,[i*a]),s=Xx(o,0),e.next=5,s.data();case 5:if(c=e.sent[0],Yg([o,s]),!(c>n)){e.next=19;break}return l=Sb(o,0),d=$A(l,a),e.next=12,d.data();case 12:return f=e.sent[0],p=vb(l,Jx(a,"int32")),e.next=16,p.data();case 16:return h=e.sent[0],Yg([d,p]),e.abrupt("return",[f,h,c]);case 19:return e.abrupt("return",[0,0,c]);case 20:case"end":return e.stop()}}),e)}))),Pae.apply(this,arguments)}function Dae(e,t){return Lae.apply(this,arguments)}function Lae(){return Lae=ct(st().mark((function e(t,n){var r,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n.body.skipTime||0)>Sc()-Tae,a=Rae<(n.body.skipFrames||0),!(n.skipAllowed&&r&&a&&Object.keys(_ae.keypoints).length>0)){e.next=5;break}return Rae++,e.abrupt("return",[_ae]);case 5:return Rae=0,e.abrupt("return",new Promise(function(){var e=ct(st().mark((function e(r){var a,i,o,s,c,l,d,f,p,h,m,v,g,y,b,x,A,k;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Zg((function(){if(!(null==Eae?void 0:Eae.inputs[0].shape))return null;var e=HS.resizeBilinear(t,[Eae.inputs[0].shape[2],Eae.inputs[0].shape[1]],!1),n=gb(e,wne.tf2);return OA(n,wne.tf1)})),n.body.enabled&&(o=null==Eae?void 0:Eae.execute(i)),Tae=Sc(),Yg(i),!o){e.next=24;break}_ae.keypoints.length=0,s=o.squeeze(),Yg(o),c=s.unstack(2),Yg(s),l=0;case 11:if(!(l<c.length)){e.next=23;break}return e.next=14,Fae(c[l],n.body.minConfidence);case 14:d=e.sent,f=u(d,3),p=f[0],h=f[1],(m=f[2])>((null==(a=n.body)?void 0:a.minConfidence)||0)&&_ae.keypoints.push({score:Math.round(100*m)/100,part:Cae[l],positionRaw:[p/Eae.inputs[0].shape[2],h/Eae.inputs[0].shape[1]],position:[Math.round(t.shape[2]*p/Eae.inputs[0].shape[2]),Math.round(t.shape[1]*h/Eae.inputs[0].shape[1])]});case 20:l++,e.next=11;break;case 23:c.forEach((function(e){return Yg(e)}));case 24:for(_ae.score=_ae.keypoints.reduce((function(e,t){return t.score>e?t.score:e}),0),v=_ae.keypoints.map((function(e){return e.position[0]})),g=_ae.keypoints.map((function(e){return e.position[1]})),_ae.box=[Math.min.apply(Math,Tn(v)),Math.min.apply(Math,Tn(g)),Math.max.apply(Math,Tn(v))-Math.min.apply(Math,Tn(v)),Math.max.apply(Math,Tn(g))-Math.min.apply(Math,Tn(g))],y=_ae.keypoints.map((function(e){return e.positionRaw[0]})),b=_ae.keypoints.map((function(e){return e.positionRaw[1]})),_ae.boxRaw=[Math.min.apply(Math,Tn(y)),Math.min.apply(Math,Tn(b)),Math.max.apply(Math,Tn(y))-Math.min.apply(Math,Tn(y)),Math.max.apply(Math,Tn(b))-Math.min.apply(Math,Tn(b))],x=function(){for(var e=u(k[A],2),t=e[0],r=e[1],a=[],i=function(e){var t=_ae.keypoints.find((function(t){return t.part===r[e]})),i=_ae.keypoints.find((function(t){return t.part===r[e+1]}));t&&i&&t.score>(n.body.minConfidence||0)&&i.score>(n.body.minConfidence||0)&&a.push([t.position,i.position])},o=0;o<r.length-1;o++)i(o);_ae.annotations[t]=a},A=0,k=Object.entries(Nae);A<k.length;A++)x();r([_ae]);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:case"end":return e.stop()}}),e)}))),Lae.apply(this,arguments)}var zae,Bae,Wae=["angry","disgust","fear","happy","sad","surprise","neutral"],jae=[],Vae=0,Uae=0,Hae=Number.MAX_SAFE_INTEGER;function Gae(e){return qae.apply(this,arguments)}function qae(){return(qae=ct(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ane.initial&&(zae=null),zae){e.next=7;break}return e.next=4,une(null==(n=t.face.emotion)?void 0:n.modelPath);case 4:zae=e.sent,e.next=8;break;case 7:t.debug&&kc("cached model:",zae.modelUrl);case 8:return e.abrupt("return",zae);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kae(e,t,n,r){return Xae.apply(this,arguments)}function Xae(){return Xae=ct(st().mark((function e(t,n,r,a){var i,o,s,u;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zae){e.next=2;break}return e.abrupt("return",[]);case 2:if(s=Hae<((null==(i=n.face.emotion)?void 0:i.skipFrames)||0),u=((null==(o=n.face.emotion)?void 0:o.skipTime)||0)>Sc()-Uae,!(n.skipAllowed&&u&&s&&Vae===a&&jae[r]&&jae[r].length>0)){e.next=7;break}return Hae++,e.abrupt("return",jae[r]);case 7:return Hae=0,e.abrupt("return",new Promise(function(){var e=ct(st().mark((function e(i){var o,s,u,c,l,d,f;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=[],!(null==(o=n.face.emotion)?void 0:o.enabled)){e.next=17;break}return c={},l=(null==zae?void 0:zae.inputs[0].shape)?zae.inputs[0].shape[2]:0,c.resize=HS.resizeBilinear(t,[l,l],!1),c.channels=gb(c.resize,wne.rgb),c.grayscale=eA(c.channels,3,!0),c.grayscaleSub=OA(c.grayscale,wne.tf05),c.grayscaleMul=gb(c.grayscaleSub,wne.tf2),c.emotion=null==zae?void 0:zae.execute(c.grayscaleMul),Uae=Sc(),e.next=13,c.emotion.data();case 13:for(d=e.sent,f=0;f<d.length;f++)d[f]>((null==(s=n.face.emotion)?void 0:s.minConfidence)||0)&&u.push({score:Math.min(.99,Math.trunc(100*d[f])/100),emotion:Wae[f]});u.sort((function(e,t){return t.score-e.score})),Object.keys(c).forEach((function(e){return Yg(c[e])}));case 17:jae[r]=u,Vae=a,i(u);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),Xae.apply(this,arguments)}var Zae,Yae=[],Jae=0,Qae=0,$ae=Number.MAX_SAFE_INTEGER;function eie(e){return tie.apply(this,arguments)}function tie(){return(tie=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ane.initial&&(Bae=null),Bae){e.next=7;break}return e.next=4,une(t.face.mobilefacenet.modelPath);case 4:Bae=e.sent,e.next=8;break;case 7:t.debug&&kc("cached model:",Bae.modelUrl);case 8:return e.abrupt("return",Bae);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nie(e,t,n,r){return rie.apply(this,arguments)}function rie(){return rie=ct(st().mark((function e(t,n,r,a){var i,o,s,u;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Bae){e.next=2;break}return e.abrupt("return",[]);case 2:if(s=$ae<((null==(i=n.face.embedding)?void 0:i.skipFrames)||0),u=((null==(o=n.face.embedding)?void 0:o.skipTime)||0)>Sc()-Qae,!(n.skipAllowed&&u&&s&&Jae===a&&Yae[r])){e.next=7;break}return $ae++,e.abrupt("return",Yae[r]);case 7:return e.abrupt("return",new Promise(function(){var e=ct(st().mark((function e(i){var o,s,u,c;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=[],!(null==(o=n.face.embedding)?void 0:o.enabled)||!(null==Bae?void 0:Bae.inputs[0].shape)){e.next=9;break}return(u={}).crop=HS.resizeBilinear(t,[Bae.inputs[0].shape[2],Bae.inputs[0].shape[1]],!1),u.data=null==Bae?void 0:Bae.execute(u.crop),e.next=7,u.data.data();case 7:c=e.sent,s=Array.from(c);case 9:Yae[r]=s,Jae=a,Qae=Sc(),i(s);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:case"end":return e.stop()}}),e)}))),rie.apply(this,arguments)}var aie=0,iie=Qne.leftEyeLower0,oie=Qne.rightEyeLower0,sie={leftBounds:[iie[0],iie[iie.length-1]],rightBounds:[oie[0],oie[oie.length-1]]},uie=3,cie=4,lie=71,die=76;function fie(e){return pie.apply(this,arguments)}function pie(){return(pie=ct(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ane.initial&&(Zae=null),Zae){e.next=7;break}return e.next=4,une(null==(n=t.face.iris)?void 0:n.modelPath);case 4:Zae=e.sent,e.next=8;break;case 7:t.debug&&kc("cached model:",Zae.modelUrl);case 8:return-1===(aie=Zae.inputs[0].shape?Zae.inputs[0].shape[2]:0)&&(aie=64),e.abrupt("return",Zae);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hie(e,t,n,r){for(var a=0;a<tre.length;a++){var i=tre[a],o=i.key,s=i.indices,u=Qne["".concat(n).concat(o)];if(!r||r.includes(o))for(var c=0;c<s.length;c++){var l=s[c];e[u[c]]=[t[l][0],t[l][1],(t[l][2]+e[u[c]][2])/2]}}}var mie=function(e){return e[sie.leftBounds[0]][2]-e[sie.rightBounds[0]][2]},vie=function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=fre(dre(pre([e[n],e[r]]),2.3)),s=ire(o),u=HS.cropAndResize(t,[[o.startPoint[1]/a,o.startPoint[0]/a,o.endPoint[1]/a,o.endPoint[0]/a]],[0],[aie,aie]);if(i&&ane.kernels.includes("flipleftright")){var c=HS.flipLeftRight(u);Yg(u),u=c}return{box:o,boxSize:s,crop:u}},gie=function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=[],i=0;i<die;i++){var o=e[3*i],s=e[3*i+1],u=e[3*i+2];a.push([(r?1-o/aie:o/aie)*n[0]+t.startPoint[0],s/aie*n[1]+t.startPoint[1],u])}return{rawCoords:a,iris:a.slice(lie)}},yie=function(e,t,n){var r=e[Qne["".concat(n,"EyeUpper0")][uie]][2],a=e[Qne["".concat(n,"EyeLower0")][cie]][2],i=(r+a)/2;return t.map((function(e,t){var n=i;return 2===t?n=r:4===t&&(n=a),[e[0],e[1],n]}))};function bie(e,t,n,r){return xie.apply(this,arguments)}function xie(){return(xie=ct(st().mark((function e(t,n,r,a){var i,o,s,u,c,l,d,f,p,h,m,v,g,y,b,x,A,k,w,S,I,E,C;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zae){e.next=3;break}return r.debug&&kc("face mesh iris detection requested, but model is not loaded"),e.abrupt("return",t);case 3:return i=vie(t,n,sie.leftBounds[0],sie.leftBounds[1],a,!0),o=i.box,s=i.boxSize,u=i.crop,c=vie(t,n,sie.rightBounds[0],sie.rightBounds[1],a,!0),l=c.box,d=c.boxSize,f=c.crop,p=Yb([u,f]),Yg(u),Yg(f),h=Zae.execute(p),Yg(p),e.next=12,h.data();case 12:return m=e.sent,Yg(h),v=m.slice(0,3*die),g=gie(v,o,s,!0),y=g.rawCoords,b=g.iris,x=m.slice(3*die),A=gie(x,l,d,!1),k=A.rawCoords,w=A.iris,S=mie(t),Math.abs(S)<30?(hie(t,y,"left",null),hie(t,k,"right",null)):S<1?hie(t,y,"left",["EyeUpper0","EyeLower0"]):hie(t,k,"right",["EyeUpper0","EyeLower0"]),I=yie(t,b,"left"),E=yie(t,w,"right"),C=t.concat(I).concat(E),e.abrupt("return",C);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Aie(e){var t=e.map((function(e){return e[0]}));return t.push(e[e.length-1][1]),t}var kie={lips:Aie([[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]]),leftEye:Aie([[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]]),leftEyebrow:Aie([[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]]),leftIris:Aie([[474,475],[475,476],[476,477],[477,474]]),rightEye:Aie([[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]]),rightEyebrow:Aie([[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]]),rightIris:Aie([[469,470],[470,471],[471,472],[472,469]]),faceOval:Aie([[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]])},wie=Object.entries(kie).map((function(e){var t=u(e,2),n=t[0];return t[1].map((function(e){return[e,n]}))})).flat(),Sie=(new Map(wie),[61,146,91,181,84,17,314,405,321,375,291,185,40,39,37,0,267,269,270,409,78,95,88,178,87,14,317,402,318,324,308,191,80,81,82,13,312,311,310,415,76,77,90,180,85,16,315,404,320,307,306,184,74,73,72,11,302,303,304,408,62,96,89,179,86,15,316,403,319,325,292,183,42,41,38,12,268,271,272,407]),Iie=[33,7,163,144,145,153,154,155,133,246,161,160,159,158,157,173,130,25,110,24,23,22,26,112,243,247,30,29,27,28,56,190,226,31,228,229,230,231,232,233,244,113,225,224,223,222,221,189,35,124,46,53,52,65,143,111,117,118,119,120,121,128,245,156,70,63,105,66,107,55,193],Eie=[263,249,390,373,374,380,381,382,362,466,388,387,386,385,384,398,359,255,339,254,253,252,256,341,463,467,260,259,257,258,286,414,446,261,448,449,450,451,452,453,464,342,445,444,443,442,441,413,265,353,276,283,282,295,372,340,346,347,348,349,350,357,465,383,300,293,334,296,336,285,417];function Cie(e,t){return Nie.apply(this,arguments)}function Nie(){return Nie=ct(st().mark((function e(t,n){var r,a,i,o,s,u,c,l;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.filter((function(e){return 160===e.size}))[0].data();case 2:return e.t0=e.sent,e.next=5,n.filter((function(e){return 10===e.size}))[0].data();case 5:return e.t1=e.sent,e.next=8,n.filter((function(e){return 142===e.size}))[0].data();case 8:return e.t2=e.sent,e.next=11,n.filter((function(e){return 10===e.size}))[1].data();case 11:return e.t3=e.sent,e.next=14,n.filter((function(e){return 142===e.size}))[1].data();case 14:for(e.t4=e.sent,r={lips:e.t0,irisL:e.t1,eyeL:e.t2,irisR:e.t3,eyeR:e.t4},a=Iie.reduce((function(e,n){return e+t[n][2]}),0)/Iie.length,i=0;i<r.irisL.length/2;i++)t.push([r.irisL[2*i+0],r.irisL[2*i+1],a]);for(o=Eie.reduce((function(e,n){return e+t[n][2]}),0)/Eie.length,s=0;s<r.irisR.length/2;s++)t.push([r.irisR[2*s+0],r.irisR[2*s+1],o]);for(u=0;u<r.eyeL.length/2;u++)t[Iie[u]]=[r.eyeL[2*u+0],r.eyeL[2*u+1],t[Iie[u]][2]];for(c=0;c<r.eyeR.length/2;c++)t[Eie[c]]=[r.eyeR[2*c+0],r.eyeR[2*c+1],t[Eie[c]][2]];for(l=0;l<r.lips.length/2;l++)t[Sie[l]]=[r.lips[2*l+0],r.lips[2*l+1],t[Sie[l]][2]];return e.abrupt("return",t);case 24:case"end":return e.stop()}}),e)}))),Nie.apply(this,arguments)}var Tie={boxes:[],skipped:Number.MAX_SAFE_INTEGER,timestamp:0},_ie=null,Rie=0;function Mie(e,t){return Oie.apply(this,arguments)}function Oie(){return Oie=ct(st().mark((function e(t,n){var r,a,i,o,s,c,l,d,f,p,h,m,v,g,y,b,x,A;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m=((null==(r=n.face.detector)?void 0:r.skipTime)||0)>Sc()-Tie.timestamp,v=Tie.skipped<((null==(a=n.face.detector)?void 0:a.skipFrames)||0),n.skipAllowed&&m&&v&&0!==Tie.boxes.length){e.next=10;break}return e.next=5,Ore(t,n);case 5:Tie.boxes=e.sent,Tie.timestamp=Sc(),Tie.skipped=0,e.next=11;break;case 10:Tie.skipped++;case 11:g=[],y=[],b=0,x=st().mark((function e(r){var a,m,v,x,A,k,w,S,I,E,C,N,T,_,R,M,O,F,P,D,L,z,B;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Tie.boxes[r],m=0,v=void 0,x={id:b++,mesh:[],meshRaw:[],box:[0,0,0,0],boxRaw:[0,0,0,0],score:0,boxScore:0,faceScore:0,annotations:{}},A=wre(null==(i=n.face.detector)?void 0:i.rotation,a,t,(null==(o=n.face.mesh)?void 0:o.enabled)?Rie:Tre()),k=u(A,3),m=k[0],v=k[1],x.tensor=k[2],!(null==(s=null==n?void 0:n.filter)?void 0:s.equalization)){e.next=15;break}return e.next=12,Vte(x.tensor);case 12:w=e.sent,Yg(x.tensor),x.tensor=w;case 15:if(x.boxScore=Math.round(100*a.confidence)/100,null==(c=n.face.mesh)?void 0:c.enabled){e.next=25;break}for(x.box=sre(a,t),x.boxRaw=ure(a,t),x.score=x.boxScore,x.mesh=a.landmarks.map((function(e){return[(a.startPoint[0]+a.endPoint[0])/2+(a.endPoint[0]+a.startPoint[0])*e[0]/Tre(),(a.startPoint[1]+a.endPoint[1])/2+(a.endPoint[1]+a.startPoint[1])*e[1]/Tre()]})),x.meshRaw=x.mesh.map((function(e){return[e[0]/(t.shape[2]||0),e[1]/(t.shape[1]||0),(e[2]||0)/Rie]})),S=0,I=Object.keys(ere);S<I.length;S++)E=I[S],x.annotations[E]=[x.mesh[ere[E]]];e.next=64;break;case 25:if(_ie){e.next=29;break}n.debug&&kc("face mesh detection requested, but model is not loaded"),e.next=64;break;case 29:return C=_ie.execute(x.tensor),N=C.find((function(e){return 1===e.shape[e.shape.length-1]})),T=C.find((function(e){return 1404===e.shape[e.shape.length-1]})),e.next=34,N.data();case 34:return _=e.sent,x.faceScore=Math.round(100*_[0])/100,R=Kb(T,[-1,3]),e.next=39,R.array();case 39:if(M=e.sent,!(x.faceScore<((null==(l=n.face.detector)?void 0:l.minConfidence)||1))){e.next=45;break}if(a.confidence=x.faceScore,null==(d=n.face.mesh)?void 0:d.keepInvalid)for(x.box=sre(a,t),x.boxRaw=ure(a,t),x.score=x.boxScore,x.mesh=a.landmarks.map((function(e){return[(a.startPoint[0]+a.endPoint[0])/2+(a.endPoint[0]+a.startPoint[0])*e[0]/Tre(),(a.startPoint[1]+a.endPoint[1])/2+(a.endPoint[1]+a.startPoint[1])*e[1]/Tre()]})),x.meshRaw=x.mesh.map((function(e){return[e[0]/(t.shape[2]||0),e[1]/(t.shape[1]||0),(e[2]||0)/Rie]})),O=0,F=Object.keys(ere);O<F.length;O++)P=F[O],x.annotations[P]=[x.mesh[ere[P]]];e.next=63;break;case 45:if(!(null==(f=n.face.attention)?void 0:f.enabled)){e.next=51;break}return e.next=48,Cie(M,C);case 48:M=e.sent,e.next=55;break;case 51:if(!(null==(p=n.face.iris)?void 0:p.enabled)){e.next=55;break}return e.next=54,bie(M,x.tensor,n,Rie);case 54:M=e.sent;case 55:for(x.mesh=kre(M,a,m,v,Rie),x.meshRaw=x.mesh.map((function(e){return[e[0]/(t.shape[2]||0),e[1]/(t.shape[1]||0),(e[2]||0)/Rie]})),D=0,L=Object.keys(Qne);D<L.length;D++)z=L[D],x.annotations[z]=Qne[z].map((function(e){return x.mesh[e]}));x.score=x.faceScore,B=Ze(Ze({},Ire(x.mesh,a)),{},{confidence:a.confidence,landmarks:a.landmarks}),x.box=sre(B,t),x.boxRaw=ure(B,t),y.push(B);case 63:Yg([].concat(Tn(C),[R]));case 64:x.score>((null==(h=n.face.detector)?void 0:h.minConfidence)||1)?g.push(x):Yg(x.tensor);case 65:case"end":return e.stop()}}),e)})),A=0;case 16:if(!(A<Tie.boxes.length)){e.next=21;break}return e.delegateYield(x(A),"t0",18);case 18:A++,e.next=16;break;case 21:return Tie.boxes=y,e.abrupt("return",g);case 23:case"end":return e.stop()}}),e)}))),Oie.apply(this,arguments)}function Fie(e){return Pie.apply(this,arguments)}function Pie(){return(Pie=ct(st().mark((function e(t){var n,r,a,i,o,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ane.initial&&(_ie=null),(null==(r=null==(n=null==t?void 0:t.face)?void 0:n.attention)?void 0:r.enabled)&&(null==_ie?void 0:_ie.signature)&&Object.keys((null==(a=null==_ie?void 0:_ie.signature)?void 0:a.outputs)||{}).length<6&&(_ie=null),_ie){e.next=14;break}if(!(null==(i=t.face.attention)?void 0:i.enabled)){e.next=9;break}return e.next=6,une(null==(o=t.face.attention)?void 0:o.modelPath);case 6:_ie=e.sent,e.next=12;break;case 9:return e.next=11,une(null==(s=t.face.mesh)?void 0:s.modelPath);case 11:_ie=e.sent;case 12:e.next=15;break;case 14:t.debug&&kc("cached model:",_ie.modelUrl);case 15:return Rie=_ie.inputs[0].shape?_ie.inputs[0].shape[2]:0,e.abrupt("return",_ie);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Die,Lie=rre,zie=nre,Bie=[],Wie=0,jie=0,Vie=Number.MAX_SAFE_INTEGER;function Uie(e){return Hie.apply(this,arguments)}function Hie(){return(Hie=ct(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ane.initial&&(Die=null),Die){e.next=7;break}return e.next=4,une(null==(n=t.face.description)?void 0:n.modelPath);case 4:Die=e.sent,e.next=8;break;case 7:t.debug&&kc("cached model:",Die.modelUrl);case 8:return e.abrupt("return",Die);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gie(e){var t=e.image||e.tensor||e;if(!(null==Die?void 0:Die.inputs[0].shape))return t;var n=HS.resizeBilinear(t,[Die.inputs[0].shape[2],Die.inputs[0].shape[1]],!1),r=gb(n,wne.tf255);return Yg(n),r}function qie(e,t,n,r){return Kie.apply(this,arguments)}function Kie(){return Kie=ct(st().mark((function e(t,n,r,a){var i,o,s,u,c,l;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Die){e.next=2;break}return e.abrupt("return",{age:0,gender:"unknown",genderScore:0,descriptor:[]});case 2:if(c=Vie<((null==(i=n.face.description)?void 0:i.skipFrames)||0),l=((null==(o=n.face.description)?void 0:o.skipTime)||0)>Sc()-Wie,!(n.skipAllowed&&c&&l&&jie===a&&(null==(s=Bie[r])?void 0:s.age)&&(null==(u=Bie[r])?void 0:u.age)>0)){e.next=7;break}return Vie++,e.abrupt("return",Bie[r]);case 7:return Vie=0,e.abrupt("return",new Promise(function(){var e=ct(st().mark((function e(i){var o,s,u,c,l,d,f,p,h,m,v,g,y,b;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u={age:0,gender:"unknown",genderScore:0,descriptor:[]},!(null==(o=n.face.description)?void 0:o.enabled)){e.next=35;break}return c=Gie(t),l=null==Die?void 0:Die.execute(c),Wie=Sc(),Yg(c),e.next=8,l.find((function(e){return 1===e.shape[1]}));case 8:return d=e.sent,e.next=11,d.data();case 11:return f=e.sent,(p=Math.trunc(200*Math.abs(f[0]-.5))/100)>((null==(s=n.face.description)?void 0:s.minConfidence)||0)&&(u.gender=f[0]<=.5?"female":"male",u.genderScore=Math.min(.99,p)),h=Sb(l.find((function(e){return 100===e.shape[1]})),1),e.next=17,h.data();case 17:return m=e.sent[0],Yg(h),v=l.find((function(e){return 100===e.shape[1]})),e.next=22,v.data();case 22:if(g=e.sent,u.age=Math.round(g[m-1]>g[m+1]?10*m-100*g[m-1]:10*m+100*g[m+1])/10,y=l.find((function(e){return 1024===e.shape[1]})),!y){e.next=31;break}return e.next=28,y.data();case 28:e.t0=e.sent,e.next=32;break;case 31:e.t0=[];case 32:b=e.t0,u.descriptor=Array.from(b),l.forEach((function(e){return Yg(e)}));case 35:Bie[r]=u,jie=a,i(u);case 38:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),Kie.apply(this,arguments)}function Xie(e){return[Math.abs(e.endPoint[0]-e.startPoint[0]),Math.abs(e.endPoint[1]-e.startPoint[1])]}function Zie(e){return[e.startPoint[0]+(e.endPoint[0]-e.startPoint[0])/2,e.startPoint[1]+(e.endPoint[1]-e.startPoint[1])/2]}function Yie(e,t,n){var r=t.shape[1],a=t.shape[2],i=[[e.startPoint[1]/r,e.startPoint[0]/a,e.endPoint[1]/r,e.endPoint[0]/a]];return HS.cropAndResize(t,i,[0],n)}function Jie(e,t){return{startPoint:[e.startPoint[0]*t[0],e.startPoint[1]*t[1]],endPoint:[e.endPoint[0]*t[0],e.endPoint[1]*t[1]],palmLandmarks:e.palmLandmarks.map((function(e){return[e[0]*t[0],e[1]*t[1]]})),confidence:e.confidence}}function Qie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.5,n=Zie(e),r=Xie(e),a=[t*r[0]/2,t*r[1]/2],i=[n[0]-a[0],n[1]-a[1]],o=[n[0]+a[0],n[1]+a[1]];return{startPoint:i,endPoint:o,palmLandmarks:e.palmLandmarks}}function $ie(e){var t=Zie(e),n=Xie(e),r=Math.max.apply(Math,Tn(n))/2;return{startPoint:[t[0]-r,t[1]-r],endPoint:[t[0]+r,t[1]+r],palmLandmarks:e.palmLandmarks}}function eoe(e,t){var n,r=Math.PI/2-Math.atan2(-(t[1]-e[1]),t[0]-e[0]);return(n=r)-2*Math.PI*Math.floor((n+Math.PI)/(2*Math.PI))}var toe=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]};function noe(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function roe(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r][t]);return n}function aoe(e,t){for(var n=[],r=e.length,a=0;a<r;a++){n.push([]);for(var i=0;i<r;i++)n[a].push(noe(e[a],roe(t,i)))}return n}function ioe(e,t){var n=Math.cos(e),r=Math.sin(e),a=[[n,-r,0],[r,n,0],[0,0,1]],i=aoe(toe(t[0],t[1]),a);return aoe(i,toe(-t[0],-t[1]))}function ooe(e,t){return[noe(e,t[0]),noe(e,t[1])]}var soe=[{x:.015625,y:.015625},{x:.015625,y:.015625},{x:.046875,y:.015625},{x:.046875,y:.015625},{x:.078125,y:.015625},{x:.078125,y:.015625},{x:.109375,y:.015625},{x:.109375,y:.015625},{x:.140625,y:.015625},{x:.140625,y:.015625},{x:.171875,y:.015625},{x:.171875,y:.015625},{x:.203125,y:.015625},{x:.203125,y:.015625},{x:.234375,y:.015625},{x:.234375,y:.015625},{x:.265625,y:.015625},{x:.265625,y:.015625},{x:.296875,y:.015625},{x:.296875,y:.015625},{x:.328125,y:.015625},{x:.328125,y:.015625},{x:.359375,y:.015625},{x:.359375,y:.015625},{x:.390625,y:.015625},{x:.390625,y:.015625},{x:.421875,y:.015625},{x:.421875,y:.015625},{x:.453125,y:.015625},{x:.453125,y:.015625},{x:.484375,y:.015625},{x:.484375,y:.015625},{x:.515625,y:.015625},{x:.515625,y:.015625},{x:.546875,y:.015625},{x:.546875,y:.015625},{x:.578125,y:.015625},{x:.578125,y:.015625},{x:.609375,y:.015625},{x:.609375,y:.015625},{x:.640625,y:.015625},{x:.640625,y:.015625},{x:.671875,y:.015625},{x:.671875,y:.015625},{x:.703125,y:.015625},{x:.703125,y:.015625},{x:.734375,y:.015625},{x:.734375,y:.015625},{x:.765625,y:.015625},{x:.765625,y:.015625},{x:.796875,y:.015625},{x:.796875,y:.015625},{x:.828125,y:.015625},{x:.828125,y:.015625},{x:.859375,y:.015625},{x:.859375,y:.015625},{x:.890625,y:.015625},{x:.890625,y:.015625},{x:.921875,y:.015625},{x:.921875,y:.015625},{x:.953125,y:.015625},{x:.953125,y:.015625},{x:.984375,y:.015625},{x:.984375,y:.015625},{x:.015625,y:.046875},{x:.015625,y:.046875},{x:.046875,y:.046875},{x:.046875,y:.046875},{x:.078125,y:.046875},{x:.078125,y:.046875},{x:.109375,y:.046875},{x:.109375,y:.046875},{x:.140625,y:.046875},{x:.140625,y:.046875},{x:.171875,y:.046875},{x:.171875,y:.046875},{x:.203125,y:.046875},{x:.203125,y:.046875},{x:.234375,y:.046875},{x:.234375,y:.046875},{x:.265625,y:.046875},{x:.265625,y:.046875},{x:.296875,y:.046875},{x:.296875,y:.046875},{x:.328125,y:.046875},{x:.328125,y:.046875},{x:.359375,y:.046875},{x:.359375,y:.046875},{x:.390625,y:.046875},{x:.390625,y:.046875},{x:.421875,y:.046875},{x:.421875,y:.046875},{x:.453125,y:.046875},{x:.453125,y:.046875},{x:.484375,y:.046875},{x:.484375,y:.046875},{x:.515625,y:.046875},{x:.515625,y:.046875},{x:.546875,y:.046875},{x:.546875,y:.046875},{x:.578125,y:.046875},{x:.578125,y:.046875},{x:.609375,y:.046875},{x:.609375,y:.046875},{x:.640625,y:.046875},{x:.640625,y:.046875},{x:.671875,y:.046875},{x:.671875,y:.046875},{x:.703125,y:.046875},{x:.703125,y:.046875},{x:.734375,y:.046875},{x:.734375,y:.046875},{x:.765625,y:.046875},{x:.765625,y:.046875},{x:.796875,y:.046875},{x:.796875,y:.046875},{x:.828125,y:.046875},{x:.828125,y:.046875},{x:.859375,y:.046875},{x:.859375,y:.046875},{x:.890625,y:.046875},{x:.890625,y:.046875},{x:.921875,y:.046875},{x:.921875,y:.046875},{x:.953125,y:.046875},{x:.953125,y:.046875},{x:.984375,y:.046875},{x:.984375,y:.046875},{x:.015625,y:.078125},{x:.015625,y:.078125},{x:.046875,y:.078125},{x:.046875,y:.078125},{x:.078125,y:.078125},{x:.078125,y:.078125},{x:.109375,y:.078125},{x:.109375,y:.078125},{x:.140625,y:.078125},{x:.140625,y:.078125},{x:.171875,y:.078125},{x:.171875,y:.078125},{x:.203125,y:.078125},{x:.203125,y:.078125},{x:.234375,y:.078125},{x:.234375,y:.078125},{x:.265625,y:.078125},{x:.265625,y:.078125},{x:.296875,y:.078125},{x:.296875,y:.078125},{x:.328125,y:.078125},{x:.328125,y:.078125},{x:.359375,y:.078125},{x:.359375,y:.078125},{x:.390625,y:.078125},{x:.390625,y:.078125},{x:.421875,y:.078125},{x:.421875,y:.078125},{x:.453125,y:.078125},{x:.453125,y:.078125},{x:.484375,y:.078125},{x:.484375,y:.078125},{x:.515625,y:.078125},{x:.515625,y:.078125},{x:.546875,y:.078125},{x:.546875,y:.078125},{x:.578125,y:.078125},{x:.578125,y:.078125},{x:.609375,y:.078125},{x:.609375,y:.078125},{x:.640625,y:.078125},{x:.640625,y:.078125},{x:.671875,y:.078125},{x:.671875,y:.078125},{x:.703125,y:.078125},{x:.703125,y:.078125},{x:.734375,y:.078125},{x:.734375,y:.078125},{x:.765625,y:.078125},{x:.765625,y:.078125},{x:.796875,y:.078125},{x:.796875,y:.078125},{x:.828125,y:.078125},{x:.828125,y:.078125},{x:.859375,y:.078125},{x:.859375,y:.078125},{x:.890625,y:.078125},{x:.890625,y:.078125},{x:.921875,y:.078125},{x:.921875,y:.078125},{x:.953125,y:.078125},{x:.953125,y:.078125},{x:.984375,y:.078125},{x:.984375,y:.078125},{x:.015625,y:.109375},{x:.015625,y:.109375},{x:.046875,y:.109375},{x:.046875,y:.109375},{x:.078125,y:.109375},{x:.078125,y:.109375},{x:.109375,y:.109375},{x:.109375,y:.109375},{x:.140625,y:.109375},{x:.140625,y:.109375},{x:.171875,y:.109375},{x:.171875,y:.109375},{x:.203125,y:.109375},{x:.203125,y:.109375},{x:.234375,y:.109375},{x:.234375,y:.109375},{x:.265625,y:.109375},{x:.265625,y:.109375},{x:.296875,y:.109375},{x:.296875,y:.109375},{x:.328125,y:.109375},{x:.328125,y:.109375},{x:.359375,y:.109375},{x:.359375,y:.109375},{x:.390625,y:.109375},{x:.390625,y:.109375},{x:.421875,y:.109375},{x:.421875,y:.109375},{x:.453125,y:.109375},{x:.453125,y:.109375},{x:.484375,y:.109375},{x:.484375,y:.109375},{x:.515625,y:.109375},{x:.515625,y:.109375},{x:.546875,y:.109375},{x:.546875,y:.109375},{x:.578125,y:.109375},{x:.578125,y:.109375},{x:.609375,y:.109375},{x:.609375,y:.109375},{x:.640625,y:.109375},{x:.640625,y:.109375},{x:.671875,y:.109375},{x:.671875,y:.109375},{x:.703125,y:.109375},{x:.703125,y:.109375},{x:.734375,y:.109375},{x:.734375,y:.109375},{x:.765625,y:.109375},{x:.765625,y:.109375},{x:.796875,y:.109375},{x:.796875,y:.109375},{x:.828125,y:.109375},{x:.828125,y:.109375},{x:.859375,y:.109375},{x:.859375,y:.109375},{x:.890625,y:.109375},{x:.890625,y:.109375},{x:.921875,y:.109375},{x:.921875,y:.109375},{x:.953125,y:.109375},{x:.953125,y:.109375},{x:.984375,y:.109375},{x:.984375,y:.109375},{x:.015625,y:.140625},{x:.015625,y:.140625},{x:.046875,y:.140625},{x:.046875,y:.140625},{x:.078125,y:.140625},{x:.078125,y:.140625},{x:.109375,y:.140625},{x:.109375,y:.140625},{x:.140625,y:.140625},{x:.140625,y:.140625},{x:.171875,y:.140625},{x:.171875,y:.140625},{x:.203125,y:.140625},{x:.203125,y:.140625},{x:.234375,y:.140625},{x:.234375,y:.140625},{x:.265625,y:.140625},{x:.265625,y:.140625},{x:.296875,y:.140625},{x:.296875,y:.140625},{x:.328125,y:.140625},{x:.328125,y:.140625},{x:.359375,y:.140625},{x:.359375,y:.140625},{x:.390625,y:.140625},{x:.390625,y:.140625},{x:.421875,y:.140625},{x:.421875,y:.140625},{x:.453125,y:.140625},{x:.453125,y:.140625},{x:.484375,y:.140625},{x:.484375,y:.140625},{x:.515625,y:.140625},{x:.515625,y:.140625},{x:.546875,y:.140625},{x:.546875,y:.140625},{x:.578125,y:.140625},{x:.578125,y:.140625},{x:.609375,y:.140625},{x:.609375,y:.140625},{x:.640625,y:.140625},{x:.640625,y:.140625},{x:.671875,y:.140625},{x:.671875,y:.140625},{x:.703125,y:.140625},{x:.703125,y:.140625},{x:.734375,y:.140625},{x:.734375,y:.140625},{x:.765625,y:.140625},{x:.765625,y:.140625},{x:.796875,y:.140625},{x:.796875,y:.140625},{x:.828125,y:.140625},{x:.828125,y:.140625},{x:.859375,y:.140625},{x:.859375,y:.140625},{x:.890625,y:.140625},{x:.890625,y:.140625},{x:.921875,y:.140625},{x:.921875,y:.140625},{x:.953125,y:.140625},{x:.953125,y:.140625},{x:.984375,y:.140625},{x:.984375,y:.140625},{x:.015625,y:.171875},{x:.015625,y:.171875},{x:.046875,y:.171875},{x:.046875,y:.171875},{x:.078125,y:.171875},{x:.078125,y:.171875},{x:.109375,y:.171875},{x:.109375,y:.171875},{x:.140625,y:.171875},{x:.140625,y:.171875},{x:.171875,y:.171875},{x:.171875,y:.171875},{x:.203125,y:.171875},{x:.203125,y:.171875},{x:.234375,y:.171875},{x:.234375,y:.171875},{x:.265625,y:.171875},{x:.265625,y:.171875},{x:.296875,y:.171875},{x:.296875,y:.171875},{x:.328125,y:.171875},{x:.328125,y:.171875},{x:.359375,y:.171875},{x:.359375,y:.171875},{x:.390625,y:.171875},{x:.390625,y:.171875},{x:.421875,y:.171875},{x:.421875,y:.171875},{x:.453125,y:.171875},{x:.453125,y:.171875},{x:.484375,y:.171875},{x:.484375,y:.171875},{x:.515625,y:.171875},{x:.515625,y:.171875},{x:.546875,y:.171875},{x:.546875,y:.171875},{x:.578125,y:.171875},{x:.578125,y:.171875},{x:.609375,y:.171875},{x:.609375,y:.171875},{x:.640625,y:.171875},{x:.640625,y:.171875},{x:.671875,y:.171875},{x:.671875,y:.171875},{x:.703125,y:.171875},{x:.703125,y:.171875},{x:.734375,y:.171875},{x:.734375,y:.171875},{x:.765625,y:.171875},{x:.765625,y:.171875},{x:.796875,y:.171875},{x:.796875,y:.171875},{x:.828125,y:.171875},{x:.828125,y:.171875},{x:.859375,y:.171875},{x:.859375,y:.171875},{x:.890625,y:.171875},{x:.890625,y:.171875},{x:.921875,y:.171875},{x:.921875,y:.171875},{x:.953125,y:.171875},{x:.953125,y:.171875},{x:.984375,y:.171875},{x:.984375,y:.171875},{x:.015625,y:.203125},{x:.015625,y:.203125},{x:.046875,y:.203125},{x:.046875,y:.203125},{x:.078125,y:.203125},{x:.078125,y:.203125},{x:.109375,y:.203125},{x:.109375,y:.203125},{x:.140625,y:.203125},{x:.140625,y:.203125},{x:.171875,y:.203125},{x:.171875,y:.203125},{x:.203125,y:.203125},{x:.203125,y:.203125},{x:.234375,y:.203125},{x:.234375,y:.203125},{x:.265625,y:.203125},{x:.265625,y:.203125},{x:.296875,y:.203125},{x:.296875,y:.203125},{x:.328125,y:.203125},{x:.328125,y:.203125},{x:.359375,y:.203125},{x:.359375,y:.203125},{x:.390625,y:.203125},{x:.390625,y:.203125},{x:.421875,y:.203125},{x:.421875,y:.203125},{x:.453125,y:.203125},{x:.453125,y:.203125},{x:.484375,y:.203125},{x:.484375,y:.203125},{x:.515625,y:.203125},{x:.515625,y:.203125},{x:.546875,y:.203125},{x:.546875,y:.203125},{x:.578125,y:.203125},{x:.578125,y:.203125},{x:.609375,y:.203125},{x:.609375,y:.203125},{x:.640625,y:.203125},{x:.640625,y:.203125},{x:.671875,y:.203125},{x:.671875,y:.203125},{x:.703125,y:.203125},{x:.703125,y:.203125},{x:.734375,y:.203125},{x:.734375,y:.203125},{x:.765625,y:.203125},{x:.765625,y:.203125},{x:.796875,y:.203125},{x:.796875,y:.203125},{x:.828125,y:.203125},{x:.828125,y:.203125},{x:.859375,y:.203125},{x:.859375,y:.203125},{x:.890625,y:.203125},{x:.890625,y:.203125},{x:.921875,y:.203125},{x:.921875,y:.203125},{x:.953125,y:.203125},{x:.953125,y:.203125},{x:.984375,y:.203125},{x:.984375,y:.203125},{x:.015625,y:.234375},{x:.015625,y:.234375},{x:.046875,y:.234375},{x:.046875,y:.234375},{x:.078125,y:.234375},{x:.078125,y:.234375},{x:.109375,y:.234375},{x:.109375,y:.234375},{x:.140625,y:.234375},{x:.140625,y:.234375},{x:.171875,y:.234375},{x:.171875,y:.234375},{x:.203125,y:.234375},{x:.203125,y:.234375},{x:.234375,y:.234375},{x:.234375,y:.234375},{x:.265625,y:.234375},{x:.265625,y:.234375},{x:.296875,y:.234375},{x:.296875,y:.234375},{x:.328125,y:.234375},{x:.328125,y:.234375},{x:.359375,y:.234375},{x:.359375,y:.234375},{x:.390625,y:.234375},{x:.390625,y:.234375},{x:.421875,y:.234375},{x:.421875,y:.234375},{x:.453125,y:.234375},{x:.453125,y:.234375},{x:.484375,y:.234375},{x:.484375,y:.234375},{x:.515625,y:.234375},{x:.515625,y:.234375},{x:.546875,y:.234375},{x:.546875,y:.234375},{x:.578125,y:.234375},{x:.578125,y:.234375},{x:.609375,y:.234375},{x:.609375,y:.234375},{x:.640625,y:.234375},{x:.640625,y:.234375},{x:.671875,y:.234375},{x:.671875,y:.234375},{x:.703125,y:.234375},{x:.703125,y:.234375},{x:.734375,y:.234375},{x:.734375,y:.234375},{x:.765625,y:.234375},{x:.765625,y:.234375},{x:.796875,y:.234375},{x:.796875,y:.234375},{x:.828125,y:.234375},{x:.828125,y:.234375},{x:.859375,y:.234375},{x:.859375,y:.234375},{x:.890625,y:.234375},{x:.890625,y:.234375},{x:.921875,y:.234375},{x:.921875,y:.234375},{x:.953125,y:.234375},{x:.953125,y:.234375},{x:.984375,y:.234375},{x:.984375,y:.234375},{x:.015625,y:.265625},{x:.015625,y:.265625},{x:.046875,y:.265625},{x:.046875,y:.265625},{x:.078125,y:.265625},{x:.078125,y:.265625},{x:.109375,y:.265625},{x:.109375,y:.265625},{x:.140625,y:.265625},{x:.140625,y:.265625},{x:.171875,y:.265625},{x:.171875,y:.265625},{x:.203125,y:.265625},{x:.203125,y:.265625},{x:.234375,y:.265625},{x:.234375,y:.265625},{x:.265625,y:.265625},{x:.265625,y:.265625},{x:.296875,y:.265625},{x:.296875,y:.265625},{x:.328125,y:.265625},{x:.328125,y:.265625},{x:.359375,y:.265625},{x:.359375,y:.265625},{x:.390625,y:.265625},{x:.390625,y:.265625},{x:.421875,y:.265625},{x:.421875,y:.265625},{x:.453125,y:.265625},{x:.453125,y:.265625},{x:.484375,y:.265625},{x:.484375,y:.265625},{x:.515625,y:.265625},{x:.515625,y:.265625},{x:.546875,y:.265625},{x:.546875,y:.265625},{x:.578125,y:.265625},{x:.578125,y:.265625},{x:.609375,y:.265625},{x:.609375,y:.265625},{x:.640625,y:.265625},{x:.640625,y:.265625},{x:.671875,y:.265625},{x:.671875,y:.265625},{x:.703125,y:.265625},{x:.703125,y:.265625},{x:.734375,y:.265625},{x:.734375,y:.265625},{x:.765625,y:.265625},{x:.765625,y:.265625},{x:.796875,y:.265625},{x:.796875,y:.265625},{x:.828125,y:.265625},{x:.828125,y:.265625},{x:.859375,y:.265625},{x:.859375,y:.265625},{x:.890625,y:.265625},{x:.890625,y:.265625},{x:.921875,y:.265625},{x:.921875,y:.265625},{x:.953125,y:.265625},{x:.953125,y:.265625},{x:.984375,y:.265625},{x:.984375,y:.265625},{x:.015625,y:.296875},{x:.015625,y:.296875},{x:.046875,y:.296875},{x:.046875,y:.296875},{x:.078125,y:.296875},{x:.078125,y:.296875},{x:.109375,y:.296875},{x:.109375,y:.296875},{x:.140625,y:.296875},{x:.140625,y:.296875},{x:.171875,y:.296875},{x:.171875,y:.296875},{x:.203125,y:.296875},{x:.203125,y:.296875},{x:.234375,y:.296875},{x:.234375,y:.296875},{x:.265625,y:.296875},{x:.265625,y:.296875},{x:.296875,y:.296875},{x:.296875,y:.296875},{x:.328125,y:.296875},{x:.328125,y:.296875},{x:.359375,y:.296875},{x:.359375,y:.296875},{x:.390625,y:.296875},{x:.390625,y:.296875},{x:.421875,y:.296875},{x:.421875,y:.296875},{x:.453125,y:.296875},{x:.453125,y:.296875},{x:.484375,y:.296875},{x:.484375,y:.296875},{x:.515625,y:.296875},{x:.515625,y:.296875},{x:.546875,y:.296875},{x:.546875,y:.296875},{x:.578125,y:.296875},{x:.578125,y:.296875},{x:.609375,y:.296875},{x:.609375,y:.296875},{x:.640625,y:.296875},{x:.640625,y:.296875},{x:.671875,y:.296875},{x:.671875,y:.296875},{x:.703125,y:.296875},{x:.703125,y:.296875},{x:.734375,y:.296875},{x:.734375,y:.296875},{x:.765625,y:.296875},{x:.765625,y:.296875},{x:.796875,y:.296875},{x:.796875,y:.296875},{x:.828125,y:.296875},{x:.828125,y:.296875},{x:.859375,y:.296875},{x:.859375,y:.296875},{x:.890625,y:.296875},{x:.890625,y:.296875},{x:.921875,y:.296875},{x:.921875,y:.296875},{x:.953125,y:.296875},{x:.953125,y:.296875},{x:.984375,y:.296875},{x:.984375,y:.296875},{x:.015625,y:.328125},{x:.015625,y:.328125},{x:.046875,y:.328125},{x:.046875,y:.328125},{x:.078125,y:.328125},{x:.078125,y:.328125},{x:.109375,y:.328125},{x:.109375,y:.328125},{x:.140625,y:.328125},{x:.140625,y:.328125},{x:.171875,y:.328125},{x:.171875,y:.328125},{x:.203125,y:.328125},{x:.203125,y:.328125},{x:.234375,y:.328125},{x:.234375,y:.328125},{x:.265625,y:.328125},{x:.265625,y:.328125},{x:.296875,y:.328125},{x:.296875,y:.328125},{x:.328125,y:.328125},{x:.328125,y:.328125},{x:.359375,y:.328125},{x:.359375,y:.328125},{x:.390625,y:.328125},{x:.390625,y:.328125},{x:.421875,y:.328125},{x:.421875,y:.328125},{x:.453125,y:.328125},{x:.453125,y:.328125},{x:.484375,y:.328125},{x:.484375,y:.328125},{x:.515625,y:.328125},{x:.515625,y:.328125},{x:.546875,y:.328125},{x:.546875,y:.328125},{x:.578125,y:.328125},{x:.578125,y:.328125},{x:.609375,y:.328125},{x:.609375,y:.328125},{x:.640625,y:.328125},{x:.640625,y:.328125},{x:.671875,y:.328125},{x:.671875,y:.328125},{x:.703125,y:.328125},{x:.703125,y:.328125},{x:.734375,y:.328125},{x:.734375,y:.328125},{x:.765625,y:.328125},{x:.765625,y:.328125},{x:.796875,y:.328125},{x:.796875,y:.328125},{x:.828125,y:.328125},{x:.828125,y:.328125},{x:.859375,y:.328125},{x:.859375,y:.328125},{x:.890625,y:.328125},{x:.890625,y:.328125},{x:.921875,y:.328125},{x:.921875,y:.328125},{x:.953125,y:.328125},{x:.953125,y:.328125},{x:.984375,y:.328125},{x:.984375,y:.328125},{x:.015625,y:.359375},{x:.015625,y:.359375},{x:.046875,y:.359375},{x:.046875,y:.359375},{x:.078125,y:.359375},{x:.078125,y:.359375},{x:.109375,y:.359375},{x:.109375,y:.359375},{x:.140625,y:.359375},{x:.140625,y:.359375},{x:.171875,y:.359375},{x:.171875,y:.359375},{x:.203125,y:.359375},{x:.203125,y:.359375},{x:.234375,y:.359375},{x:.234375,y:.359375},{x:.265625,y:.359375},{x:.265625,y:.359375},{x:.296875,y:.359375},{x:.296875,y:.359375},{x:.328125,y:.359375},{x:.328125,y:.359375},{x:.359375,y:.359375},{x:.359375,y:.359375},{x:.390625,y:.359375},{x:.390625,y:.359375},{x:.421875,y:.359375},{x:.421875,y:.359375},{x:.453125,y:.359375},{x:.453125,y:.359375},{x:.484375,y:.359375},{x:.484375,y:.359375},{x:.515625,y:.359375},{x:.515625,y:.359375},{x:.546875,y:.359375},{x:.546875,y:.359375},{x:.578125,y:.359375},{x:.578125,y:.359375},{x:.609375,y:.359375},{x:.609375,y:.359375},{x:.640625,y:.359375},{x:.640625,y:.359375},{x:.671875,y:.359375},{x:.671875,y:.359375},{x:.703125,y:.359375},{x:.703125,y:.359375},{x:.734375,y:.359375},{x:.734375,y:.359375},{x:.765625,y:.359375},{x:.765625,y:.359375},{x:.796875,y:.359375},{x:.796875,y:.359375},{x:.828125,y:.359375},{x:.828125,y:.359375},{x:.859375,y:.359375},{x:.859375,y:.359375},{x:.890625,y:.359375},{x:.890625,y:.359375},{x:.921875,y:.359375},{x:.921875,y:.359375},{x:.953125,y:.359375},{x:.953125,y:.359375},{x:.984375,y:.359375},{x:.984375,y:.359375},{x:.015625,y:.390625},{x:.015625,y:.390625},{x:.046875,y:.390625},{x:.046875,y:.390625},{x:.078125,y:.390625},{x:.078125,y:.390625},{x:.109375,y:.390625},{x:.109375,y:.390625},{x:.140625,y:.390625},{x:.140625,y:.390625},{x:.171875,y:.390625},{x:.171875,y:.390625},{x:.203125,y:.390625},{x:.203125,y:.390625},{x:.234375,y:.390625},{x:.234375,y:.390625},{x:.265625,y:.390625},{x:.265625,y:.390625},{x:.296875,y:.390625},{x:.296875,y:.390625},{x:.328125,y:.390625},{x:.328125,y:.390625},{x:.359375,y:.390625},{x:.359375,y:.390625},{x:.390625,y:.390625},{x:.390625,y:.390625},{x:.421875,y:.390625},{x:.421875,y:.390625},{x:.453125,y:.390625},{x:.453125,y:.390625},{x:.484375,y:.390625},{x:.484375,y:.390625},{x:.515625,y:.390625},{x:.515625,y:.390625},{x:.546875,y:.390625},{x:.546875,y:.390625},{x:.578125,y:.390625},{x:.578125,y:.390625},{x:.609375,y:.390625},{x:.609375,y:.390625},{x:.640625,y:.390625},{x:.640625,y:.390625},{x:.671875,y:.390625},{x:.671875,y:.390625},{x:.703125,y:.390625},{x:.703125,y:.390625},{x:.734375,y:.390625},{x:.734375,y:.390625},{x:.765625,y:.390625},{x:.765625,y:.390625},{x:.796875,y:.390625},{x:.796875,y:.390625},{x:.828125,y:.390625},{x:.828125,y:.390625},{x:.859375,y:.390625},{x:.859375,y:.390625},{x:.890625,y:.390625},{x:.890625,y:.390625},{x:.921875,y:.390625},{x:.921875,y:.390625},{x:.953125,y:.390625},{x:.953125,y:.390625},{x:.984375,y:.390625},{x:.984375,y:.390625},{x:.015625,y:.421875},{x:.015625,y:.421875},{x:.046875,y:.421875},{x:.046875,y:.421875},{x:.078125,y:.421875},{x:.078125,y:.421875},{x:.109375,y:.421875},{x:.109375,y:.421875},{x:.140625,y:.421875},{x:.140625,y:.421875},{x:.171875,y:.421875},{x:.171875,y:.421875},{x:.203125,y:.421875},{x:.203125,y:.421875},{x:.234375,y:.421875},{x:.234375,y:.421875},{x:.265625,y:.421875},{x:.265625,y:.421875},{x:.296875,y:.421875},{x:.296875,y:.421875},{x:.328125,y:.421875},{x:.328125,y:.421875},{x:.359375,y:.421875},{x:.359375,y:.421875},{x:.390625,y:.421875},{x:.390625,y:.421875},{x:.421875,y:.421875},{x:.421875,y:.421875},{x:.453125,y:.421875},{x:.453125,y:.421875},{x:.484375,y:.421875},{x:.484375,y:.421875},{x:.515625,y:.421875},{x:.515625,y:.421875},{x:.546875,y:.421875},{x:.546875,y:.421875},{x:.578125,y:.421875},{x:.578125,y:.421875},{x:.609375,y:.421875},{x:.609375,y:.421875},{x:.640625,y:.421875},{x:.640625,y:.421875},{x:.671875,y:.421875},{x:.671875,y:.421875},{x:.703125,y:.421875},{x:.703125,y:.421875},{x:.734375,y:.421875},{x:.734375,y:.421875},{x:.765625,y:.421875},{x:.765625,y:.421875},{x:.796875,y:.421875},{x:.796875,y:.421875},{x:.828125,y:.421875},{x:.828125,y:.421875},{x:.859375,y:.421875},{x:.859375,y:.421875},{x:.890625,y:.421875},{x:.890625,y:.421875},{x:.921875,y:.421875},{x:.921875,y:.421875},{x:.953125,y:.421875},{x:.953125,y:.421875},{x:.984375,y:.421875},{x:.984375,y:.421875},{x:.015625,y:.453125},{x:.015625,y:.453125},{x:.046875,y:.453125},{x:.046875,y:.453125},{x:.078125,y:.453125},{x:.078125,y:.453125},{x:.109375,y:.453125},{x:.109375,y:.453125},{x:.140625,y:.453125},{x:.140625,y:.453125},{x:.171875,y:.453125},{x:.171875,y:.453125},{x:.203125,y:.453125},{x:.203125,y:.453125},{x:.234375,y:.453125},{x:.234375,y:.453125},{x:.265625,y:.453125},{x:.265625,y:.453125},{x:.296875,y:.453125},{x:.296875,y:.453125},{x:.328125,y:.453125},{x:.328125,y:.453125},{x:.359375,y:.453125},{x:.359375,y:.453125},{x:.390625,y:.453125},{x:.390625,y:.453125},{x:.421875,y:.453125},{x:.421875,y:.453125},{x:.453125,y:.453125},{x:.453125,y:.453125},{x:.484375,y:.453125},{x:.484375,y:.453125},{x:.515625,y:.453125},{x:.515625,y:.453125},{x:.546875,y:.453125},{x:.546875,y:.453125},{x:.578125,y:.453125},{x:.578125,y:.453125},{x:.609375,y:.453125},{x:.609375,y:.453125},{x:.640625,y:.453125},{x:.640625,y:.453125},{x:.671875,y:.453125},{x:.671875,y:.453125},{x:.703125,y:.453125},{x:.703125,y:.453125},{x:.734375,y:.453125},{x:.734375,y:.453125},{x:.765625,y:.453125},{x:.765625,y:.453125},{x:.796875,y:.453125},{x:.796875,y:.453125},{x:.828125,y:.453125},{x:.828125,y:.453125},{x:.859375,y:.453125},{x:.859375,y:.453125},{x:.890625,y:.453125},{x:.890625,y:.453125},{x:.921875,y:.453125},{x:.921875,y:.453125},{x:.953125,y:.453125},{x:.953125,y:.453125},{x:.984375,y:.453125},{x:.984375,y:.453125},{x:.015625,y:.484375},{x:.015625,y:.484375},{x:.046875,y:.484375},{x:.046875,y:.484375},{x:.078125,y:.484375},{x:.078125,y:.484375},{x:.109375,y:.484375},{x:.109375,y:.484375},{x:.140625,y:.484375},{x:.140625,y:.484375},{x:.171875,y:.484375},{x:.171875,y:.484375},{x:.203125,y:.484375},{x:.203125,y:.484375},{x:.234375,y:.484375},{x:.234375,y:.484375},{x:.265625,y:.484375},{x:.265625,y:.484375},{x:.296875,y:.484375},{x:.296875,y:.484375},{x:.328125,y:.484375},{x:.328125,y:.484375},{x:.359375,y:.484375},{x:.359375,y:.484375},{x:.390625,y:.484375},{x:.390625,y:.484375},{x:.421875,y:.484375},{x:.421875,y:.484375},{x:.453125,y:.484375},{x:.453125,y:.484375},{x:.484375,y:.484375},{x:.484375,y:.484375},{x:.515625,y:.484375},{x:.515625,y:.484375},{x:.546875,y:.484375},{x:.546875,y:.484375},{x:.578125,y:.484375},{x:.578125,y:.484375},{x:.609375,y:.484375},{x:.609375,y:.484375},{x:.640625,y:.484375},{x:.640625,y:.484375},{x:.671875,y:.484375},{x:.671875,y:.484375},{x:.703125,y:.484375},{x:.703125,y:.484375},{x:.734375,y:.484375},{x:.734375,y:.484375},{x:.765625,y:.484375},{x:.765625,y:.484375},{x:.796875,y:.484375},{x:.796875,y:.484375},{x:.828125,y:.484375},{x:.828125,y:.484375},{x:.859375,y:.484375},{x:.859375,y:.484375},{x:.890625,y:.484375},{x:.890625,y:.484375},{x:.921875,y:.484375},{x:.921875,y:.484375},{x:.953125,y:.484375},{x:.953125,y:.484375},{x:.984375,y:.484375},{x:.984375,y:.484375},{x:.015625,y:.515625},{x:.015625,y:.515625},{x:.046875,y:.515625},{x:.046875,y:.515625},{x:.078125,y:.515625},{x:.078125,y:.515625},{x:.109375,y:.515625},{x:.109375,y:.515625},{x:.140625,y:.515625},{x:.140625,y:.515625},{x:.171875,y:.515625},{x:.171875,y:.515625},{x:.203125,y:.515625},{x:.203125,y:.515625},{x:.234375,y:.515625},{x:.234375,y:.515625},{x:.265625,y:.515625},{x:.265625,y:.515625},{x:.296875,y:.515625},{x:.296875,y:.515625},{x:.328125,y:.515625},{x:.328125,y:.515625},{x:.359375,y:.515625},{x:.359375,y:.515625},{x:.390625,y:.515625},{x:.390625,y:.515625},{x:.421875,y:.515625},{x:.421875,y:.515625},{x:.453125,y:.515625},{x:.453125,y:.515625},{x:.484375,y:.515625},{x:.484375,y:.515625},{x:.515625,y:.515625},{x:.515625,y:.515625},{x:.546875,y:.515625},{x:.546875,y:.515625},{x:.578125,y:.515625},{x:.578125,y:.515625},{x:.609375,y:.515625},{x:.609375,y:.515625},{x:.640625,y:.515625},{x:.640625,y:.515625},{x:.671875,y:.515625},{x:.671875,y:.515625},{x:.703125,y:.515625},{x:.703125,y:.515625},{x:.734375,y:.515625},{x:.734375,y:.515625},{x:.765625,y:.515625},{x:.765625,y:.515625},{x:.796875,y:.515625},{x:.796875,y:.515625},{x:.828125,y:.515625},{x:.828125,y:.515625},{x:.859375,y:.515625},{x:.859375,y:.515625},{x:.890625,y:.515625},{x:.890625,y:.515625},{x:.921875,y:.515625},{x:.921875,y:.515625},{x:.953125,y:.515625},{x:.953125,y:.515625},{x:.984375,y:.515625},{x:.984375,y:.515625},{x:.015625,y:.546875},{x:.015625,y:.546875},{x:.046875,y:.546875},{x:.046875,y:.546875},{x:.078125,y:.546875},{x:.078125,y:.546875},{x:.109375,y:.546875},{x:.109375,y:.546875},{x:.140625,y:.546875},{x:.140625,y:.546875},{x:.171875,y:.546875},{x:.171875,y:.546875},{x:.203125,y:.546875},{x:.203125,y:.546875},{x:.234375,y:.546875},{x:.234375,y:.546875},{x:.265625,y:.546875},{x:.265625,y:.546875},{x:.296875,y:.546875},{x:.296875,y:.546875},{x:.328125,y:.546875},{x:.328125,y:.546875},{x:.359375,y:.546875},{x:.359375,y:.546875},{x:.390625,y:.546875},{x:.390625,y:.546875},{x:.421875,y:.546875},{x:.421875,y:.546875},{x:.453125,y:.546875},{x:.453125,y:.546875},{x:.484375,y:.546875},{x:.484375,y:.546875},{x:.515625,y:.546875},{x:.515625,y:.546875},{x:.546875,y:.546875},{x:.546875,y:.546875},{x:.578125,y:.546875},{x:.578125,y:.546875},{x:.609375,y:.546875},{x:.609375,y:.546875},{x:.640625,y:.546875},{x:.640625,y:.546875},{x:.671875,y:.546875},{x:.671875,y:.546875},{x:.703125,y:.546875},{x:.703125,y:.546875},{x:.734375,y:.546875},{x:.734375,y:.546875},{x:.765625,y:.546875},{x:.765625,y:.546875},{x:.796875,y:.546875},{x:.796875,y:.546875},{x:.828125,y:.546875},{x:.828125,y:.546875},{x:.859375,y:.546875},{x:.859375,y:.546875},{x:.890625,y:.546875},{x:.890625,y:.546875},{x:.921875,y:.546875},{x:.921875,y:.546875},{x:.953125,y:.546875},{x:.953125,y:.546875},{x:.984375,y:.546875},{x:.984375,y:.546875},{x:.015625,y:.578125},{x:.015625,y:.578125},{x:.046875,y:.578125},{x:.046875,y:.578125},{x:.078125,y:.578125},{x:.078125,y:.578125},{x:.109375,y:.578125},{x:.109375,y:.578125},{x:.140625,y:.578125},{x:.140625,y:.578125},{x:.171875,y:.578125},{x:.171875,y:.578125},{x:.203125,y:.578125},{x:.203125,y:.578125},{x:.234375,y:.578125},{x:.234375,y:.578125},{x:.265625,y:.578125},{x:.265625,y:.578125},{x:.296875,y:.578125},{x:.296875,y:.578125},{x:.328125,y:.578125},{x:.328125,y:.578125},{x:.359375,y:.578125},{x:.359375,y:.578125},{x:.390625,y:.578125},{x:.390625,y:.578125},{x:.421875,y:.578125},{x:.421875,y:.578125},{x:.453125,y:.578125},{x:.453125,y:.578125},{x:.484375,y:.578125},{x:.484375,y:.578125},{x:.515625,y:.578125},{x:.515625,y:.578125},{x:.546875,y:.578125},{x:.546875,y:.578125},{x:.578125,y:.578125},{x:.578125,y:.578125},{x:.609375,y:.578125},{x:.609375,y:.578125},{x:.640625,y:.578125},{x:.640625,y:.578125},{x:.671875,y:.578125},{x:.671875,y:.578125},{x:.703125,y:.578125},{x:.703125,y:.578125},{x:.734375,y:.578125},{x:.734375,y:.578125},{x:.765625,y:.578125},{x:.765625,y:.578125},{x:.796875,y:.578125},{x:.796875,y:.578125},{x:.828125,y:.578125},{x:.828125,y:.578125},{x:.859375,y:.578125},{x:.859375,y:.578125},{x:.890625,y:.578125},{x:.890625,y:.578125},{x:.921875,y:.578125},{x:.921875,y:.578125},{x:.953125,y:.578125},{x:.953125,y:.578125},{x:.984375,y:.578125},{x:.984375,y:.578125},{x:.015625,y:.609375},{x:.015625,y:.609375},{x:.046875,y:.609375},{x:.046875,y:.609375},{x:.078125,y:.609375},{x:.078125,y:.609375},{x:.109375,y:.609375},{x:.109375,y:.609375},{x:.140625,y:.609375},{x:.140625,y:.609375},{x:.171875,y:.609375},{x:.171875,y:.609375},{x:.203125,y:.609375},{x:.203125,y:.609375},{x:.234375,y:.609375},{x:.234375,y:.609375},{x:.265625,y:.609375},{x:.265625,y:.609375},{x:.296875,y:.609375},{x:.296875,y:.609375},{x:.328125,y:.609375},{x:.328125,y:.609375},{x:.359375,y:.609375},{x:.359375,y:.609375},{x:.390625,y:.609375},{x:.390625,y:.609375},{x:.421875,y:.609375},{x:.421875,y:.609375},{x:.453125,y:.609375},{x:.453125,y:.609375},{x:.484375,y:.609375},{x:.484375,y:.609375},{x:.515625,y:.609375},{x:.515625,y:.609375},{x:.546875,y:.609375},{x:.546875,y:.609375},{x:.578125,y:.609375},{x:.578125,y:.609375},{x:.609375,y:.609375},{x:.609375,y:.609375},{x:.640625,y:.609375},{x:.640625,y:.609375},{x:.671875,y:.609375},{x:.671875,y:.609375},{x:.703125,y:.609375},{x:.703125,y:.609375},{x:.734375,y:.609375},{x:.734375,y:.609375},{x:.765625,y:.609375},{x:.765625,y:.609375},{x:.796875,y:.609375},{x:.796875,y:.609375},{x:.828125,y:.609375},{x:.828125,y:.609375},{x:.859375,y:.609375},{x:.859375,y:.609375},{x:.890625,y:.609375},{x:.890625,y:.609375},{x:.921875,y:.609375},{x:.921875,y:.609375},{x:.953125,y:.609375},{x:.953125,y:.609375},{x:.984375,y:.609375},{x:.984375,y:.609375},{x:.015625,y:.640625},{x:.015625,y:.640625},{x:.046875,y:.640625},{x:.046875,y:.640625},{x:.078125,y:.640625},{x:.078125,y:.640625},{x:.109375,y:.640625},{x:.109375,y:.640625},{x:.140625,y:.640625},{x:.140625,y:.640625},{x:.171875,y:.640625},{x:.171875,y:.640625},{x:.203125,y:.640625},{x:.203125,y:.640625},{x:.234375,y:.640625},{x:.234375,y:.640625},{x:.265625,y:.640625},{x:.265625,y:.640625},{x:.296875,y:.640625},{x:.296875,y:.640625},{x:.328125,y:.640625},{x:.328125,y:.640625},{x:.359375,y:.640625},{x:.359375,y:.640625},{x:.390625,y:.640625},{x:.390625,y:.640625},{x:.421875,y:.640625},{x:.421875,y:.640625},{x:.453125,y:.640625},{x:.453125,y:.640625},{x:.484375,y:.640625},{x:.484375,y:.640625},{x:.515625,y:.640625},{x:.515625,y:.640625},{x:.546875,y:.640625},{x:.546875,y:.640625},{x:.578125,y:.640625},{x:.578125,y:.640625},{x:.609375,y:.640625},{x:.609375,y:.640625},{x:.640625,y:.640625},{x:.640625,y:.640625},{x:.671875,y:.640625},{x:.671875,y:.640625},{x:.703125,y:.640625},{x:.703125,y:.640625},{x:.734375,y:.640625},{x:.734375,y:.640625},{x:.765625,y:.640625},{x:.765625,y:.640625},{x:.796875,y:.640625},{x:.796875,y:.640625},{x:.828125,y:.640625},{x:.828125,y:.640625},{x:.859375,y:.640625},{x:.859375,y:.640625},{x:.890625,y:.640625},{x:.890625,y:.640625},{x:.921875,y:.640625},{x:.921875,y:.640625},{x:.953125,y:.640625},{x:.953125,y:.640625},{x:.984375,y:.640625},{x:.984375,y:.640625},{x:.015625,y:.671875},{x:.015625,y:.671875},{x:.046875,y:.671875},{x:.046875,y:.671875},{x:.078125,y:.671875},{x:.078125,y:.671875},{x:.109375,y:.671875},{x:.109375,y:.671875},{x:.140625,y:.671875},{x:.140625,y:.671875},{x:.171875,y:.671875},{x:.171875,y:.671875},{x:.203125,y:.671875},{x:.203125,y:.671875},{x:.234375,y:.671875},{x:.234375,y:.671875},{x:.265625,y:.671875},{x:.265625,y:.671875},{x:.296875,y:.671875},{x:.296875,y:.671875},{x:.328125,y:.671875},{x:.328125,y:.671875},{x:.359375,y:.671875},{x:.359375,y:.671875},{x:.390625,y:.671875},{x:.390625,y:.671875},{x:.421875,y:.671875},{x:.421875,y:.671875},{x:.453125,y:.671875},{x:.453125,y:.671875},{x:.484375,y:.671875},{x:.484375,y:.671875},{x:.515625,y:.671875},{x:.515625,y:.671875},{x:.546875,y:.671875},{x:.546875,y:.671875},{x:.578125,y:.671875},{x:.578125,y:.671875},{x:.609375,y:.671875},{x:.609375,y:.671875},{x:.640625,y:.671875},{x:.640625,y:.671875},{x:.671875,y:.671875},{x:.671875,y:.671875},{x:.703125,y:.671875},{x:.703125,y:.671875},{x:.734375,y:.671875},{x:.734375,y:.671875},{x:.765625,y:.671875},{x:.765625,y:.671875},{x:.796875,y:.671875},{x:.796875,y:.671875},{x:.828125,y:.671875},{x:.828125,y:.671875},{x:.859375,y:.671875},{x:.859375,y:.671875},{x:.890625,y:.671875},{x:.890625,y:.671875},{x:.921875,y:.671875},{x:.921875,y:.671875},{x:.953125,y:.671875},{x:.953125,y:.671875},{x:.984375,y:.671875},{x:.984375,y:.671875},{x:.015625,y:.703125},{x:.015625,y:.703125},{x:.046875,y:.703125},{x:.046875,y:.703125},{x:.078125,y:.703125},{x:.078125,y:.703125},{x:.109375,y:.703125},{x:.109375,y:.703125},{x:.140625,y:.703125},{x:.140625,y:.703125},{x:.171875,y:.703125},{x:.171875,y:.703125},{x:.203125,y:.703125},{x:.203125,y:.703125},{x:.234375,y:.703125},{x:.234375,y:.703125},{x:.265625,y:.703125},{x:.265625,y:.703125},{x:.296875,y:.703125},{x:.296875,y:.703125},{x:.328125,y:.703125},{x:.328125,y:.703125},{x:.359375,y:.703125},{x:.359375,y:.703125},{x:.390625,y:.703125},{x:.390625,y:.703125},{x:.421875,y:.703125},{x:.421875,y:.703125},{x:.453125,y:.703125},{x:.453125,y:.703125},{x:.484375,y:.703125},{x:.484375,y:.703125},{x:.515625,y:.703125},{x:.515625,y:.703125},{x:.546875,y:.703125},{x:.546875,y:.703125},{x:.578125,y:.703125},{x:.578125,y:.703125},{x:.609375,y:.703125},{x:.609375,y:.703125},{x:.640625,y:.703125},{x:.640625,y:.703125},{x:.671875,y:.703125},{x:.671875,y:.703125},{x:.703125,y:.703125},{x:.703125,y:.703125},{x:.734375,y:.703125},{x:.734375,y:.703125},{x:.765625,y:.703125},{x:.765625,y:.703125},{x:.796875,y:.703125},{x:.796875,y:.703125},{x:.828125,y:.703125},{x:.828125,y:.703125},{x:.859375,y:.703125},{x:.859375,y:.703125},{x:.890625,y:.703125},{x:.890625,y:.703125},{x:.921875,y:.703125},{x:.921875,y:.703125},{x:.953125,y:.703125},{x:.953125,y:.703125},{x:.984375,y:.703125},{x:.984375,y:.703125},{x:.015625,y:.734375},{x:.015625,y:.734375},{x:.046875,y:.734375},{x:.046875,y:.734375},{x:.078125,y:.734375},{x:.078125,y:.734375},{x:.109375,y:.734375},{x:.109375,y:.734375},{x:.140625,y:.734375},{x:.140625,y:.734375},{x:.171875,y:.734375},{x:.171875,y:.734375},{x:.203125,y:.734375},{x:.203125,y:.734375},{x:.234375,y:.734375},{x:.234375,y:.734375},{x:.265625,y:.734375},{x:.265625,y:.734375},{x:.296875,y:.734375},{x:.296875,y:.734375},{x:.328125,y:.734375},{x:.328125,y:.734375},{x:.359375,y:.734375},{x:.359375,y:.734375},{x:.390625,y:.734375},{x:.390625,y:.734375},{x:.421875,y:.734375},{x:.421875,y:.734375},{x:.453125,y:.734375},{x:.453125,y:.734375},{x:.484375,y:.734375},{x:.484375,y:.734375},{x:.515625,y:.734375},{x:.515625,y:.734375},{x:.546875,y:.734375},{x:.546875,y:.734375},{x:.578125,y:.734375},{x:.578125,y:.734375},{x:.609375,y:.734375},{x:.609375,y:.734375},{x:.640625,y:.734375},{x:.640625,y:.734375},{x:.671875,y:.734375},{x:.671875,y:.734375},{x:.703125,y:.734375},{x:.703125,y:.734375},{x:.734375,y:.734375},{x:.734375,y:.734375},{x:.765625,y:.734375},{x:.765625,y:.734375},{x:.796875,y:.734375},{x:.796875,y:.734375},{x:.828125,y:.734375},{x:.828125,y:.734375},{x:.859375,y:.734375},{x:.859375,y:.734375},{x:.890625,y:.734375},{x:.890625,y:.734375},{x:.921875,y:.734375},{x:.921875,y:.734375},{x:.953125,y:.734375},{x:.953125,y:.734375},{x:.984375,y:.734375},{x:.984375,y:.734375},{x:.015625,y:.765625},{x:.015625,y:.765625},{x:.046875,y:.765625},{x:.046875,y:.765625},{x:.078125,y:.765625},{x:.078125,y:.765625},{x:.109375,y:.765625},{x:.109375,y:.765625},{x:.140625,y:.765625},{x:.140625,y:.765625},{x:.171875,y:.765625},{x:.171875,y:.765625},{x:.203125,y:.765625},{x:.203125,y:.765625},{x:.234375,y:.765625},{x:.234375,y:.765625},{x:.265625,y:.765625},{x:.265625,y:.765625},{x:.296875,y:.765625},{x:.296875,y:.765625},{x:.328125,y:.765625},{x:.328125,y:.765625},{x:.359375,y:.765625},{x:.359375,y:.765625},{x:.390625,y:.765625},{x:.390625,y:.765625},{x:.421875,y:.765625},{x:.421875,y:.765625},{x:.453125,y:.765625},{x:.453125,y:.765625},{x:.484375,y:.765625},{x:.484375,y:.765625},{x:.515625,y:.765625},{x:.515625,y:.765625},{x:.546875,y:.765625},{x:.546875,y:.765625},{x:.578125,y:.765625},{x:.578125,y:.765625},{x:.609375,y:.765625},{x:.609375,y:.765625},{x:.640625,y:.765625},{x:.640625,y:.765625},{x:.671875,y:.765625},{x:.671875,y:.765625},{x:.703125,y:.765625},{x:.703125,y:.765625},{x:.734375,y:.765625},{x:.734375,y:.765625},{x:.765625,y:.765625},{x:.765625,y:.765625},{x:.796875,y:.765625},{x:.796875,y:.765625},{x:.828125,y:.765625},{x:.828125,y:.765625},{x:.859375,y:.765625},{x:.859375,y:.765625},{x:.890625,y:.765625},{x:.890625,y:.765625},{x:.921875,y:.765625},{x:.921875,y:.765625},{x:.953125,y:.765625},{x:.953125,y:.765625},{x:.984375,y:.765625},{x:.984375,y:.765625},{x:.015625,y:.796875},{x:.015625,y:.796875},{x:.046875,y:.796875},{x:.046875,y:.796875},{x:.078125,y:.796875},{x:.078125,y:.796875},{x:.109375,y:.796875},{x:.109375,y:.796875},{x:.140625,y:.796875},{x:.140625,y:.796875},{x:.171875,y:.796875},{x:.171875,y:.796875},{x:.203125,y:.796875},{x:.203125,y:.796875},{x:.234375,y:.796875},{x:.234375,y:.796875},{x:.265625,y:.796875},{x:.265625,y:.796875},{x:.296875,y:.796875},{x:.296875,y:.796875},{x:.328125,y:.796875},{x:.328125,y:.796875},{x:.359375,y:.796875},{x:.359375,y:.796875},{x:.390625,y:.796875},{x:.390625,y:.796875},{x:.421875,y:.796875},{x:.421875,y:.796875},{x:.453125,y:.796875},{x:.453125,y:.796875},{x:.484375,y:.796875},{x:.484375,y:.796875},{x:.515625,y:.796875},{x:.515625,y:.796875},{x:.546875,y:.796875},{x:.546875,y:.796875},{x:.578125,y:.796875},{x:.578125,y:.796875},{x:.609375,y:.796875},{x:.609375,y:.796875},{x:.640625,y:.796875},{x:.640625,y:.796875},{x:.671875,y:.796875},{x:.671875,y:.796875},{x:.703125,y:.796875},{x:.703125,y:.796875},{x:.734375,y:.796875},{x:.734375,y:.796875},{x:.765625,y:.796875},{x:.765625,y:.796875},{x:.796875,y:.796875},{x:.796875,y:.796875},{x:.828125,y:.796875},{x:.828125,y:.796875},{x:.859375,y:.796875},{x:.859375,y:.796875},{x:.890625,y:.796875},{x:.890625,y:.796875},{x:.921875,y:.796875},{x:.921875,y:.796875},{x:.953125,y:.796875},{x:.953125,y:.796875},{x:.984375,y:.796875},{x:.984375,y:.796875},{x:.015625,y:.828125},{x:.015625,y:.828125},{x:.046875,y:.828125},{x:.046875,y:.828125},{x:.078125,y:.828125},{x:.078125,y:.828125},{x:.109375,y:.828125},{x:.109375,y:.828125},{x:.140625,y:.828125},{x:.140625,y:.828125},{x:.171875,y:.828125},{x:.171875,y:.828125},{x:.203125,y:.828125},{x:.203125,y:.828125},{x:.234375,y:.828125},{x:.234375,y:.828125},{x:.265625,y:.828125},{x:.265625,y:.828125},{x:.296875,y:.828125},{x:.296875,y:.828125},{x:.328125,y:.828125},{x:.328125,y:.828125},{x:.359375,y:.828125},{x:.359375,y:.828125},{x:.390625,y:.828125},{x:.390625,y:.828125},{x:.421875,y:.828125},{x:.421875,y:.828125},{x:.453125,y:.828125},{x:.453125,y:.828125},{x:.484375,y:.828125},{x:.484375,y:.828125},{x:.515625,y:.828125},{x:.515625,y:.828125},{x:.546875,y:.828125},{x:.546875,y:.828125},{x:.578125,y:.828125},{x:.578125,y:.828125},{x:.609375,y:.828125},{x:.609375,y:.828125},{x:.640625,y:.828125},{x:.640625,y:.828125},{x:.671875,y:.828125},{x:.671875,y:.828125},{x:.703125,y:.828125},{x:.703125,y:.828125},{x:.734375,y:.828125},{x:.734375,y:.828125},{x:.765625,y:.828125},{x:.765625,y:.828125},{x:.796875,y:.828125},{x:.796875,y:.828125},{x:.828125,y:.828125},{x:.828125,y:.828125},{x:.859375,y:.828125},{x:.859375,y:.828125},{x:.890625,y:.828125},{x:.890625,y:.828125},{x:.921875,y:.828125},{x:.921875,y:.828125},{x:.953125,y:.828125},{x:.953125,y:.828125},{x:.984375,y:.828125},{x:.984375,y:.828125},{x:.015625,y:.859375},{x:.015625,y:.859375},{x:.046875,y:.859375},{x:.046875,y:.859375},{x:.078125,y:.859375},{x:.078125,y:.859375},{x:.109375,y:.859375},{x:.109375,y:.859375},{x:.140625,y:.859375},{x:.140625,y:.859375},{x:.171875,y:.859375},{x:.171875,y:.859375},{x:.203125,y:.859375},{x:.203125,y:.859375},{x:.234375,y:.859375},{x:.234375,y:.859375},{x:.265625,y:.859375},{x:.265625,y:.859375},{x:.296875,y:.859375},{x:.296875,y:.859375},{x:.328125,y:.859375},{x:.328125,y:.859375},{x:.359375,y:.859375},{x:.359375,y:.859375},{x:.390625,y:.859375},{x:.390625,y:.859375},{x:.421875,y:.859375},{x:.421875,y:.859375},{x:.453125,y:.859375},{x:.453125,y:.859375},{x:.484375,y:.859375},{x:.484375,y:.859375},{x:.515625,y:.859375},{x:.515625,y:.859375},{x:.546875,y:.859375},{x:.546875,y:.859375},{x:.578125,y:.859375},{x:.578125,y:.859375},{x:.609375,y:.859375},{x:.609375,y:.859375},{x:.640625,y:.859375},{x:.640625,y:.859375},{x:.671875,y:.859375},{x:.671875,y:.859375},{x:.703125,y:.859375},{x:.703125,y:.859375},{x:.734375,y:.859375},{x:.734375,y:.859375},{x:.765625,y:.859375},{x:.765625,y:.859375},{x:.796875,y:.859375},{x:.796875,y:.859375},{x:.828125,y:.859375},{x:.828125,y:.859375},{x:.859375,y:.859375},{x:.859375,y:.859375},{x:.890625,y:.859375},{x:.890625,y:.859375},{x:.921875,y:.859375},{x:.921875,y:.859375},{x:.953125,y:.859375},{x:.953125,y:.859375},{x:.984375,y:.859375},{x:.984375,y:.859375},{x:.015625,y:.890625},{x:.015625,y:.890625},{x:.046875,y:.890625},{x:.046875,y:.890625},{x:.078125,y:.890625},{x:.078125,y:.890625},{x:.109375,y:.890625},{x:.109375,y:.890625},{x:.140625,y:.890625},{x:.140625,y:.890625},{x:.171875,y:.890625},{x:.171875,y:.890625},{x:.203125,y:.890625},{x:.203125,y:.890625},{x:.234375,y:.890625},{x:.234375,y:.890625},{x:.265625,y:.890625},{x:.265625,y:.890625},{x:.296875,y:.890625},{x:.296875,y:.890625},{x:.328125,y:.890625},{x:.328125,y:.890625},{x:.359375,y:.890625},{x:.359375,y:.890625},{x:.390625,y:.890625},{x:.390625,y:.890625},{x:.421875,y:.890625},{x:.421875,y:.890625},{x:.453125,y:.890625},{x:.453125,y:.890625},{x:.484375,y:.890625},{x:.484375,y:.890625},{x:.515625,y:.890625},{x:.515625,y:.890625},{x:.546875,y:.890625},{x:.546875,y:.890625},{x:.578125,y:.890625},{x:.578125,y:.890625},{x:.609375,y:.890625},{x:.609375,y:.890625},{x:.640625,y:.890625},{x:.640625,y:.890625},{x:.671875,y:.890625},{x:.671875,y:.890625},{x:.703125,y:.890625},{x:.703125,y:.890625},{x:.734375,y:.890625},{x:.734375,y:.890625},{x:.765625,y:.890625},{x:.765625,y:.890625},{x:.796875,y:.890625},{x:.796875,y:.890625},{x:.828125,y:.890625},{x:.828125,y:.890625},{x:.859375,y:.890625},{x:.859375,y:.890625},{x:.890625,y:.890625},{x:.890625,y:.890625},{x:.921875,y:.890625},{x:.921875,y:.890625},{x:.953125,y:.890625},{x:.953125,y:.890625},{x:.984375,y:.890625},{x:.984375,y:.890625},{x:.015625,y:.921875},{x:.015625,y:.921875},{x:.046875,y:.921875},{x:.046875,y:.921875},{x:.078125,y:.921875},{x:.078125,y:.921875},{x:.109375,y:.921875},{x:.109375,y:.921875},{x:.140625,y:.921875},{x:.140625,y:.921875},{x:.171875,y:.921875},{x:.171875,y:.921875},{x:.203125,y:.921875},{x:.203125,y:.921875},{x:.234375,y:.921875},{x:.234375,y:.921875},{x:.265625,y:.921875},{x:.265625,y:.921875},{x:.296875,y:.921875},{x:.296875,y:.921875},{x:.328125,y:.921875},{x:.328125,y:.921875},{x:.359375,y:.921875},{x:.359375,y:.921875},{x:.390625,y:.921875},{x:.390625,y:.921875},{x:.421875,y:.921875},{x:.421875,y:.921875},{x:.453125,y:.921875},{x:.453125,y:.921875},{x:.484375,y:.921875},{x:.484375,y:.921875},{x:.515625,y:.921875},{x:.515625,y:.921875},{x:.546875,y:.921875},{x:.546875,y:.921875},{x:.578125,y:.921875},{x:.578125,y:.921875},{x:.609375,y:.921875},{x:.609375,y:.921875},{x:.640625,y:.921875},{x:.640625,y:.921875},{x:.671875,y:.921875},{x:.671875,y:.921875},{x:.703125,y:.921875},{x:.703125,y:.921875},{x:.734375,y:.921875},{x:.734375,y:.921875},{x:.765625,y:.921875},{x:.765625,y:.921875},{x:.796875,y:.921875},{x:.796875,y:.921875},{x:.828125,y:.921875},{x:.828125,y:.921875},{x:.859375,y:.921875},{x:.859375,y:.921875},{x:.890625,y:.921875},{x:.890625,y:.921875},{x:.921875,y:.921875},{x:.921875,y:.921875},{x:.953125,y:.921875},{x:.953125,y:.921875},{x:.984375,y:.921875},{x:.984375,y:.921875},{x:.015625,y:.953125},{x:.015625,y:.953125},{x:.046875,y:.953125},{x:.046875,y:.953125},{x:.078125,y:.953125},{x:.078125,y:.953125},{x:.109375,y:.953125},{x:.109375,y:.953125},{x:.140625,y:.953125},{x:.140625,y:.953125},{x:.171875,y:.953125},{x:.171875,y:.953125},{x:.203125,y:.953125},{x:.203125,y:.953125},{x:.234375,y:.953125},{x:.234375,y:.953125},{x:.265625,y:.953125},{x:.265625,y:.953125},{x:.296875,y:.953125},{x:.296875,y:.953125},{x:.328125,y:.953125},{x:.328125,y:.953125},{x:.359375,y:.953125},{x:.359375,y:.953125},{x:.390625,y:.953125},{x:.390625,y:.953125},{x:.421875,y:.953125},{x:.421875,y:.953125},{x:.453125,y:.953125},{x:.453125,y:.953125},{x:.484375,y:.953125},{x:.484375,y:.953125},{x:.515625,y:.953125},{x:.515625,y:.953125},{x:.546875,y:.953125},{x:.546875,y:.953125},{x:.578125,y:.953125},{x:.578125,y:.953125},{x:.609375,y:.953125},{x:.609375,y:.953125},{x:.640625,y:.953125},{x:.640625,y:.953125},{x:.671875,y:.953125},{x:.671875,y:.953125},{x:.703125,y:.953125},{x:.703125,y:.953125},{x:.734375,y:.953125},{x:.734375,y:.953125},{x:.765625,y:.953125},{x:.765625,y:.953125},{x:.796875,y:.953125},{x:.796875,y:.953125},{x:.828125,y:.953125},{x:.828125,y:.953125},{x:.859375,y:.953125},{x:.859375,y:.953125},{x:.890625,y:.953125},{x:.890625,y:.953125},{x:.921875,y:.953125},{x:.921875,y:.953125},{x:.953125,y:.953125},{x:.953125,y:.953125},{x:.984375,y:.953125},{x:.984375,y:.953125},{x:.015625,y:.984375},{x:.015625,y:.984375},{x:.046875,y:.984375},{x:.046875,y:.984375},{x:.078125,y:.984375},{x:.078125,y:.984375},{x:.109375,y:.984375},{x:.109375,y:.984375},{x:.140625,y:.984375},{x:.140625,y:.984375},{x:.171875,y:.984375},{x:.171875,y:.984375},{x:.203125,y:.984375},{x:.203125,y:.984375},{x:.234375,y:.984375},{x:.234375,y:.984375},{x:.265625,y:.984375},{x:.265625,y:.984375},{x:.296875,y:.984375},{x:.296875,y:.984375},{x:.328125,y:.984375},{x:.328125,y:.984375},{x:.359375,y:.984375},{x:.359375,y:.984375},{x:.390625,y:.984375},{x:.390625,y:.984375},{x:.421875,y:.984375},{x:.421875,y:.984375},{x:.453125,y:.984375},{x:.453125,y:.984375},{x:.484375,y:.984375},{x:.484375,y:.984375},{x:.515625,y:.984375},{x:.515625,y:.984375},{x:.546875,y:.984375},{x:.546875,y:.984375},{x:.578125,y:.984375},{x:.578125,y:.984375},{x:.609375,y:.984375},{x:.609375,y:.984375},{x:.640625,y:.984375},{x:.640625,y:.984375},{x:.671875,y:.984375},{x:.671875,y:.984375},{x:.703125,y:.984375},{x:.703125,y:.984375},{x:.734375,y:.984375},{x:.734375,y:.984375},{x:.765625,y:.984375},{x:.765625,y:.984375},{x:.796875,y:.984375},{x:.796875,y:.984375},{x:.828125,y:.984375},{x:.828125,y:.984375},{x:.859375,y:.984375},{x:.859375,y:.984375},{x:.890625,y:.984375},{x:.890625,y:.984375},{x:.921875,y:.984375},{x:.921875,y:.984375},{x:.953125,y:.984375},{x:.953125,y:.984375},{x:.984375,y:.984375},{x:.984375,y:.984375},{x:.03125,y:.03125},{x:.03125,y:.03125},{x:.09375,y:.03125},{x:.09375,y:.03125},{x:.15625,y:.03125},{x:.15625,y:.03125},{x:.21875,y:.03125},{x:.21875,y:.03125},{x:.28125,y:.03125},{x:.28125,y:.03125},{x:.34375,y:.03125},{x:.34375,y:.03125},{x:.40625,y:.03125},{x:.40625,y:.03125},{x:.46875,y:.03125},{x:.46875,y:.03125},{x:.53125,y:.03125},{x:.53125,y:.03125},{x:.59375,y:.03125},{x:.59375,y:.03125},{x:.65625,y:.03125},{x:.65625,y:.03125},{x:.71875,y:.03125},{x:.71875,y:.03125},{x:.78125,y:.03125},{x:.78125,y:.03125},{x:.84375,y:.03125},{x:.84375,y:.03125},{x:.90625,y:.03125},{x:.90625,y:.03125},{x:.96875,y:.03125},{x:.96875,y:.03125},{x:.03125,y:.09375},{x:.03125,y:.09375},{x:.09375,y:.09375},{x:.09375,y:.09375},{x:.15625,y:.09375},{x:.15625,y:.09375},{x:.21875,y:.09375},{x:.21875,y:.09375},{x:.28125,y:.09375},{x:.28125,y:.09375},{x:.34375,y:.09375},{x:.34375,y:.09375},{x:.40625,y:.09375},{x:.40625,y:.09375},{x:.46875,y:.09375},{x:.46875,y:.09375},{x:.53125,y:.09375},{x:.53125,y:.09375},{x:.59375,y:.09375},{x:.59375,y:.09375},{x:.65625,y:.09375},{x:.65625,y:.09375},{x:.71875,y:.09375},{x:.71875,y:.09375},{x:.78125,y:.09375},{x:.78125,y:.09375},{x:.84375,y:.09375},{x:.84375,y:.09375},{x:.90625,y:.09375},{x:.90625,y:.09375},{x:.96875,y:.09375},{x:.96875,y:.09375},{x:.03125,y:.15625},{x:.03125,y:.15625},{x:.09375,y:.15625},{x:.09375,y:.15625},{x:.15625,y:.15625},{x:.15625,y:.15625},{x:.21875,y:.15625},{x:.21875,y:.15625},{x:.28125,y:.15625},{x:.28125,y:.15625},{x:.34375,y:.15625},{x:.34375,y:.15625},{x:.40625,y:.15625},{x:.40625,y:.15625},{x:.46875,y:.15625},{x:.46875,y:.15625},{x:.53125,y:.15625},{x:.53125,y:.15625},{x:.59375,y:.15625},{x:.59375,y:.15625},{x:.65625,y:.15625},{x:.65625,y:.15625},{x:.71875,y:.15625},{x:.71875,y:.15625},{x:.78125,y:.15625},{x:.78125,y:.15625},{x:.84375,y:.15625},{x:.84375,y:.15625},{x:.90625,y:.15625},{x:.90625,y:.15625},{x:.96875,y:.15625},{x:.96875,y:.15625},{x:.03125,y:.21875},{x:.03125,y:.21875},{x:.09375,y:.21875},{x:.09375,y:.21875},{x:.15625,y:.21875},{x:.15625,y:.21875},{x:.21875,y:.21875},{x:.21875,y:.21875},{x:.28125,y:.21875},{x:.28125,y:.21875},{x:.34375,y:.21875},{x:.34375,y:.21875},{x:.40625,y:.21875},{x:.40625,y:.21875},{x:.46875,y:.21875},{x:.46875,y:.21875},{x:.53125,y:.21875},{x:.53125,y:.21875},{x:.59375,y:.21875},{x:.59375,y:.21875},{x:.65625,y:.21875},{x:.65625,y:.21875},{x:.71875,y:.21875},{x:.71875,y:.21875},{x:.78125,y:.21875},{x:.78125,y:.21875},{x:.84375,y:.21875},{x:.84375,y:.21875},{x:.90625,y:.21875},{x:.90625,y:.21875},{x:.96875,y:.21875},{x:.96875,y:.21875},{x:.03125,y:.28125},{x:.03125,y:.28125},{x:.09375,y:.28125},{x:.09375,y:.28125},{x:.15625,y:.28125},{x:.15625,y:.28125},{x:.21875,y:.28125},{x:.21875,y:.28125},{x:.28125,y:.28125},{x:.28125,y:.28125},{x:.34375,y:.28125},{x:.34375,y:.28125},{x:.40625,y:.28125},{x:.40625,y:.28125},{x:.46875,y:.28125},{x:.46875,y:.28125},{x:.53125,y:.28125},{x:.53125,y:.28125},{x:.59375,y:.28125},{x:.59375,y:.28125},{x:.65625,y:.28125},{x:.65625,y:.28125},{x:.71875,y:.28125},{x:.71875,y:.28125},{x:.78125,y:.28125},{x:.78125,y:.28125},{x:.84375,y:.28125},{x:.84375,y:.28125},{x:.90625,y:.28125},{x:.90625,y:.28125},{x:.96875,y:.28125},{x:.96875,y:.28125},{x:.03125,y:.34375},{x:.03125,y:.34375},{x:.09375,y:.34375},{x:.09375,y:.34375},{x:.15625,y:.34375},{x:.15625,y:.34375},{x:.21875,y:.34375},{x:.21875,y:.34375},{x:.28125,y:.34375},{x:.28125,y:.34375},{x:.34375,y:.34375},{x:.34375,y:.34375},{x:.40625,y:.34375},{x:.40625,y:.34375},{x:.46875,y:.34375},{x:.46875,y:.34375},{x:.53125,y:.34375},{x:.53125,y:.34375},{x:.59375,y:.34375},{x:.59375,y:.34375},{x:.65625,y:.34375},{x:.65625,y:.34375},{x:.71875,y:.34375},{x:.71875,y:.34375},{x:.78125,y:.34375},{x:.78125,y:.34375},{x:.84375,y:.34375},{x:.84375,y:.34375},{x:.90625,y:.34375},{x:.90625,y:.34375},{x:.96875,y:.34375},{x:.96875,y:.34375},{x:.03125,y:.40625},{x:.03125,y:.40625},{x:.09375,y:.40625},{x:.09375,y:.40625},{x:.15625,y:.40625},{x:.15625,y:.40625},{x:.21875,y:.40625},{x:.21875,y:.40625},{x:.28125,y:.40625},{x:.28125,y:.40625},{x:.34375,y:.40625},{x:.34375,y:.40625},{x:.40625,y:.40625},{x:.40625,y:.40625},{x:.46875,y:.40625},{x:.46875,y:.40625},{x:.53125,y:.40625},{x:.53125,y:.40625},{x:.59375,y:.40625},{x:.59375,y:.40625},{x:.65625,y:.40625},{x:.65625,y:.40625},{x:.71875,y:.40625},{x:.71875,y:.40625},{x:.78125,y:.40625},{x:.78125,y:.40625},{x:.84375,y:.40625},{x:.84375,y:.40625},{x:.90625,y:.40625},{x:.90625,y:.40625},{x:.96875,y:.40625},{x:.96875,y:.40625},{x:.03125,y:.46875},{x:.03125,y:.46875},{x:.09375,y:.46875},{x:.09375,y:.46875},{x:.15625,y:.46875},{x:.15625,y:.46875},{x:.21875,y:.46875},{x:.21875,y:.46875},{x:.28125,y:.46875},{x:.28125,y:.46875},{x:.34375,y:.46875},{x:.34375,y:.46875},{x:.40625,y:.46875},{x:.40625,y:.46875},{x:.46875,y:.46875},{x:.46875,y:.46875},{x:.53125,y:.46875},{x:.53125,y:.46875},{x:.59375,y:.46875},{x:.59375,y:.46875},{x:.65625,y:.46875},{x:.65625,y:.46875},{x:.71875,y:.46875},{x:.71875,y:.46875},{x:.78125,y:.46875},{x:.78125,y:.46875},{x:.84375,y:.46875},{x:.84375,y:.46875},{x:.90625,y:.46875},{x:.90625,y:.46875},{x:.96875,y:.46875},{x:.96875,y:.46875},{x:.03125,y:.53125},{x:.03125,y:.53125},{x:.09375,y:.53125},{x:.09375,y:.53125},{x:.15625,y:.53125},{x:.15625,y:.53125},{x:.21875,y:.53125},{x:.21875,y:.53125},{x:.28125,y:.53125},{x:.28125,y:.53125},{x:.34375,y:.53125},{x:.34375,y:.53125},{x:.40625,y:.53125},{x:.40625,y:.53125},{x:.46875,y:.53125},{x:.46875,y:.53125},{x:.53125,y:.53125},{x:.53125,y:.53125},{x:.59375,y:.53125},{x:.59375,y:.53125},{x:.65625,y:.53125},{x:.65625,y:.53125},{x:.71875,y:.53125},{x:.71875,y:.53125},{x:.78125,y:.53125},{x:.78125,y:.53125},{x:.84375,y:.53125},{x:.84375,y:.53125},{x:.90625,y:.53125},{x:.90625,y:.53125},{x:.96875,y:.53125},{x:.96875,y:.53125},{x:.03125,y:.59375},{x:.03125,y:.59375},{x:.09375,y:.59375},{x:.09375,y:.59375},{x:.15625,y:.59375},{x:.15625,y:.59375},{x:.21875,y:.59375},{x:.21875,y:.59375},{x:.28125,y:.59375},{x:.28125,y:.59375},{x:.34375,y:.59375},{x:.34375,y:.59375},{x:.40625,y:.59375},{x:.40625,y:.59375},{x:.46875,y:.59375},{x:.46875,y:.59375},{x:.53125,y:.59375},{x:.53125,y:.59375},{x:.59375,y:.59375},{x:.59375,y:.59375},{x:.65625,y:.59375},{x:.65625,y:.59375},{x:.71875,y:.59375},{x:.71875,y:.59375},{x:.78125,y:.59375},{x:.78125,y:.59375},{x:.84375,y:.59375},{x:.84375,y:.59375},{x:.90625,y:.59375},{x:.90625,y:.59375},{x:.96875,y:.59375},{x:.96875,y:.59375},{x:.03125,y:.65625},{x:.03125,y:.65625},{x:.09375,y:.65625},{x:.09375,y:.65625},{x:.15625,y:.65625},{x:.15625,y:.65625},{x:.21875,y:.65625},{x:.21875,y:.65625},{x:.28125,y:.65625},{x:.28125,y:.65625},{x:.34375,y:.65625},{x:.34375,y:.65625},{x:.40625,y:.65625},{x:.40625,y:.65625},{x:.46875,y:.65625},{x:.46875,y:.65625},{x:.53125,y:.65625},{x:.53125,y:.65625},{x:.59375,y:.65625},{x:.59375,y:.65625},{x:.65625,y:.65625},{x:.65625,y:.65625},{x:.71875,y:.65625},{x:.71875,y:.65625},{x:.78125,y:.65625},{x:.78125,y:.65625},{x:.84375,y:.65625},{x:.84375,y:.65625},{x:.90625,y:.65625},{x:.90625,y:.65625},{x:.96875,y:.65625},{x:.96875,y:.65625},{x:.03125,y:.71875},{x:.03125,y:.71875},{x:.09375,y:.71875},{x:.09375,y:.71875},{x:.15625,y:.71875},{x:.15625,y:.71875},{x:.21875,y:.71875},{x:.21875,y:.71875},{x:.28125,y:.71875},{x:.28125,y:.71875},{x:.34375,y:.71875},{x:.34375,y:.71875},{x:.40625,y:.71875},{x:.40625,y:.71875},{x:.46875,y:.71875},{x:.46875,y:.71875},{x:.53125,y:.71875},{x:.53125,y:.71875},{x:.59375,y:.71875},{x:.59375,y:.71875},{x:.65625,y:.71875},{x:.65625,y:.71875},{x:.71875,y:.71875},{x:.71875,y:.71875},{x:.78125,y:.71875},{x:.78125,y:.71875},{x:.84375,y:.71875},{x:.84375,y:.71875},{x:.90625,y:.71875},{x:.90625,y:.71875},{x:.96875,y:.71875},{x:.96875,y:.71875},{x:.03125,y:.78125},{x:.03125,y:.78125},{x:.09375,y:.78125},{x:.09375,y:.78125},{x:.15625,y:.78125},{x:.15625,y:.78125},{x:.21875,y:.78125},{x:.21875,y:.78125},{x:.28125,y:.78125},{x:.28125,y:.78125},{x:.34375,y:.78125},{x:.34375,y:.78125},{x:.40625,y:.78125},{x:.40625,y:.78125},{x:.46875,y:.78125},{x:.46875,y:.78125},{x:.53125,y:.78125},{x:.53125,y:.78125},{x:.59375,y:.78125},{x:.59375,y:.78125},{x:.65625,y:.78125},{x:.65625,y:.78125},{x:.71875,y:.78125},{x:.71875,y:.78125},{x:.78125,y:.78125},{x:.78125,y:.78125},{x:.84375,y:.78125},{x:.84375,y:.78125},{x:.90625,y:.78125},{x:.90625,y:.78125},{x:.96875,y:.78125},{x:.96875,y:.78125},{x:.03125,y:.84375},{x:.03125,y:.84375},{x:.09375,y:.84375},{x:.09375,y:.84375},{x:.15625,y:.84375},{x:.15625,y:.84375},{x:.21875,y:.84375},{x:.21875,y:.84375},{x:.28125,y:.84375},{x:.28125,y:.84375},{x:.34375,y:.84375},{x:.34375,y:.84375},{x:.40625,y:.84375},{x:.40625,y:.84375},{x:.46875,y:.84375},{x:.46875,y:.84375},{x:.53125,y:.84375},{x:.53125,y:.84375},{x:.59375,y:.84375},{x:.59375,y:.84375},{x:.65625,y:.84375},{x:.65625,y:.84375},{x:.71875,y:.84375},{x:.71875,y:.84375},{x:.78125,y:.84375},{x:.78125,y:.84375},{x:.84375,y:.84375},{x:.84375,y:.84375},{x:.90625,y:.84375},{x:.90625,y:.84375},{x:.96875,y:.84375},{x:.96875,y:.84375},{x:.03125,y:.90625},{x:.03125,y:.90625},{x:.09375,y:.90625},{x:.09375,y:.90625},{x:.15625,y:.90625},{x:.15625,y:.90625},{x:.21875,y:.90625},{x:.21875,y:.90625},{x:.28125,y:.90625},{x:.28125,y:.90625},{x:.34375,y:.90625},{x:.34375,y:.90625},{x:.40625,y:.90625},{x:.40625,y:.90625},{x:.46875,y:.90625},{x:.46875,y:.90625},{x:.53125,y:.90625},{x:.53125,y:.90625},{x:.59375,y:.90625},{x:.59375,y:.90625},{x:.65625,y:.90625},{x:.65625,y:.90625},{x:.71875,y:.90625},{x:.71875,y:.90625},{x:.78125,y:.90625},{x:.78125,y:.90625},{x:.84375,y:.90625},{x:.84375,y:.90625},{x:.90625,y:.90625},{x:.90625,y:.90625},{x:.96875,y:.90625},{x:.96875,y:.90625},{x:.03125,y:.96875},{x:.03125,y:.96875},{x:.09375,y:.96875},{x:.09375,y:.96875},{x:.15625,y:.96875},{x:.15625,y:.96875},{x:.21875,y:.96875},{x:.21875,y:.96875},{x:.28125,y:.96875},{x:.28125,y:.96875},{x:.34375,y:.96875},{x:.34375,y:.96875},{x:.40625,y:.96875},{x:.40625,y:.96875},{x:.46875,y:.96875},{x:.46875,y:.96875},{x:.53125,y:.96875},{x:.53125,y:.96875},{x:.59375,y:.96875},{x:.59375,y:.96875},{x:.65625,y:.96875},{x:.65625,y:.96875},{x:.71875,y:.96875},{x:.71875,y:.96875},{x:.78125,y:.96875},{x:.78125,y:.96875},{x:.84375,y:.96875},{x:.84375,y:.96875},{x:.90625,y:.96875},{x:.90625,y:.96875},{x:.96875,y:.96875},{x:.96875,y:.96875},{x:.0625,y:.0625},{x:.0625,y:.0625},{x:.0625,y:.0625},{x:.0625,y:.0625},{x:.0625,y:.0625},{x:.0625,y:.0625},{x:.1875,y:.0625},{x:.1875,y:.0625},{x:.1875,y:.0625},{x:.1875,y:.0625},{x:.1875,y:.0625},{x:.1875,y:.0625},{x:.3125,y:.0625},{x:.3125,y:.0625},{x:.3125,y:.0625},{x:.3125,y:.0625},{x:.3125,y:.0625},{x:.3125,y:.0625},{x:.4375,y:.0625},{x:.4375,y:.0625},{x:.4375,y:.0625},{x:.4375,y:.0625},{x:.4375,y:.0625},{x:.4375,y:.0625},{x:.5625,y:.0625},{x:.5625,y:.0625},{x:.5625,y:.0625},{x:.5625,y:.0625},{x:.5625,y:.0625},{x:.5625,y:.0625},{x:.6875,y:.0625},{x:.6875,y:.0625},{x:.6875,y:.0625},{x:.6875,y:.0625},{x:.6875,y:.0625},{x:.6875,y:.0625},{x:.8125,y:.0625},{x:.8125,y:.0625},{x:.8125,y:.0625},{x:.8125,y:.0625},{x:.8125,y:.0625},{x:.8125,y:.0625},{x:.9375,y:.0625},{x:.9375,y:.0625},{x:.9375,y:.0625},{x:.9375,y:.0625},{x:.9375,y:.0625},{x:.9375,y:.0625},{x:.0625,y:.1875},{x:.0625,y:.1875},{x:.0625,y:.1875},{x:.0625,y:.1875},{x:.0625,y:.1875},{x:.0625,y:.1875},{x:.1875,y:.1875},{x:.1875,y:.1875},{x:.1875,y:.1875},{x:.1875,y:.1875},{x:.1875,y:.1875},{x:.1875,y:.1875},{x:.3125,y:.1875},{x:.3125,y:.1875},{x:.3125,y:.1875},{x:.3125,y:.1875},{x:.3125,y:.1875},{x:.3125,y:.1875},{x:.4375,y:.1875},{x:.4375,y:.1875},{x:.4375,y:.1875},{x:.4375,y:.1875},{x:.4375,y:.1875},{x:.4375,y:.1875},{x:.5625,y:.1875},{x:.5625,y:.1875},{x:.5625,y:.1875},{x:.5625,y:.1875},{x:.5625,y:.1875},{x:.5625,y:.1875},{x:.6875,y:.1875},{x:.6875,y:.1875},{x:.6875,y:.1875},{x:.6875,y:.1875},{x:.6875,y:.1875},{x:.6875,y:.1875},{x:.8125,y:.1875},{x:.8125,y:.1875},{x:.8125,y:.1875},{x:.8125,y:.1875},{x:.8125,y:.1875},{x:.8125,y:.1875},{x:.9375,y:.1875},{x:.9375,y:.1875},{x:.9375,y:.1875},{x:.9375,y:.1875},{x:.9375,y:.1875},{x:.9375,y:.1875},{x:.0625,y:.3125},{x:.0625,y:.3125},{x:.0625,y:.3125},{x:.0625,y:.3125},{x:.0625,y:.3125},{x:.0625,y:.3125},{x:.1875,y:.3125},{x:.1875,y:.3125},{x:.1875,y:.3125},{x:.1875,y:.3125},{x:.1875,y:.3125},{x:.1875,y:.3125},{x:.3125,y:.3125},{x:.3125,y:.3125},{x:.3125,y:.3125},{x:.3125,y:.3125},{x:.3125,y:.3125},{x:.3125,y:.3125},{x:.4375,y:.3125},{x:.4375,y:.3125},{x:.4375,y:.3125},{x:.4375,y:.3125},{x:.4375,y:.3125},{x:.4375,y:.3125},{x:.5625,y:.3125},{x:.5625,y:.3125},{x:.5625,y:.3125},{x:.5625,y:.3125},{x:.5625,y:.3125},{x:.5625,y:.3125},{x:.6875,y:.3125},{x:.6875,y:.3125},{x:.6875,y:.3125},{x:.6875,y:.3125},{x:.6875,y:.3125},{x:.6875,y:.3125},{x:.8125,y:.3125},{x:.8125,y:.3125},{x:.8125,y:.3125},{x:.8125,y:.3125},{x:.8125,y:.3125},{x:.8125,y:.3125},{x:.9375,y:.3125},{x:.9375,y:.3125},{x:.9375,y:.3125},{x:.9375,y:.3125},{x:.9375,y:.3125},{x:.9375,y:.3125},{x:.0625,y:.4375},{x:.0625,y:.4375},{x:.0625,y:.4375},{x:.0625,y:.4375},{x:.0625,y:.4375},{x:.0625,y:.4375},{x:.1875,y:.4375},{x:.1875,y:.4375},{x:.1875,y:.4375},{x:.1875,y:.4375},{x:.1875,y:.4375},{x:.1875,y:.4375},{x:.3125,y:.4375},{x:.3125,y:.4375},{x:.3125,y:.4375},{x:.3125,y:.4375},{x:.3125,y:.4375},{x:.3125,y:.4375},{x:.4375,y:.4375},{x:.4375,y:.4375},{x:.4375,y:.4375},{x:.4375,y:.4375},{x:.4375,y:.4375},{x:.4375,y:.4375},{x:.5625,y:.4375},{x:.5625,y:.4375},{x:.5625,y:.4375},{x:.5625,y:.4375},{x:.5625,y:.4375},{x:.5625,y:.4375},{x:.6875,y:.4375},{x:.6875,y:.4375},{x:.6875,y:.4375},{x:.6875,y:.4375},{x:.6875,y:.4375},{x:.6875,y:.4375},{x:.8125,y:.4375},{x:.8125,y:.4375},{x:.8125,y:.4375},{x:.8125,y:.4375},{x:.8125,y:.4375},{x:.8125,y:.4375},{x:.9375,y:.4375},{x:.9375,y:.4375},{x:.9375,y:.4375},{x:.9375,y:.4375},{x:.9375,y:.4375},{x:.9375,y:.4375},{x:.0625,y:.5625},{x:.0625,y:.5625},{x:.0625,y:.5625},{x:.0625,y:.5625},{x:.0625,y:.5625},{x:.0625,y:.5625},{x:.1875,y:.5625},{x:.1875,y:.5625},{x:.1875,y:.5625},{x:.1875,y:.5625},{x:.1875,y:.5625},{x:.1875,y:.5625},{x:.3125,y:.5625},{x:.3125,y:.5625},{x:.3125,y:.5625},{x:.3125,y:.5625},{x:.3125,y:.5625},{x:.3125,y:.5625},{x:.4375,y:.5625},{x:.4375,y:.5625},{x:.4375,y:.5625},{x:.4375,y:.5625},{x:.4375,y:.5625},{x:.4375,y:.5625},{x:.5625,y:.5625},{x:.5625,y:.5625},{x:.5625,y:.5625},{x:.5625,y:.5625},{x:.5625,y:.5625},{x:.5625,y:.5625},{x:.6875,y:.5625},{x:.6875,y:.5625},{x:.6875,y:.5625},{x:.6875,y:.5625},{x:.6875,y:.5625},{x:.6875,y:.5625},{x:.8125,y:.5625},{x:.8125,y:.5625},{x:.8125,y:.5625},{x:.8125,y:.5625},{x:.8125,y:.5625},{x:.8125,y:.5625},{x:.9375,y:.5625},{x:.9375,y:.5625},{x:.9375,y:.5625},{x:.9375,y:.5625},{x:.9375,y:.5625},{x:.9375,y:.5625},{x:.0625,y:.6875},{x:.0625,y:.6875},{x:.0625,y:.6875},{x:.0625,y:.6875},{x:.0625,y:.6875},{x:.0625,y:.6875},{x:.1875,y:.6875},{x:.1875,y:.6875},{x:.1875,y:.6875},{x:.1875,y:.6875},{x:.1875,y:.6875},{x:.1875,y:.6875},{x:.3125,y:.6875},{x:.3125,y:.6875},{x:.3125,y:.6875},{x:.3125,y:.6875},{x:.3125,y:.6875},{x:.3125,y:.6875},{x:.4375,y:.6875},{x:.4375,y:.6875},{x:.4375,y:.6875},{x:.4375,y:.6875},{x:.4375,y:.6875},{x:.4375,y:.6875},{x:.5625,y:.6875},{x:.5625,y:.6875},{x:.5625,y:.6875},{x:.5625,y:.6875},{x:.5625,y:.6875},{x:.5625,y:.6875},{x:.6875,y:.6875},{x:.6875,y:.6875},{x:.6875,y:.6875},{x:.6875,y:.6875},{x:.6875,y:.6875},{x:.6875,y:.6875},{x:.8125,y:.6875},{x:.8125,y:.6875},{x:.8125,y:.6875},{x:.8125,y:.6875},{x:.8125,y:.6875},{x:.8125,y:.6875},{x:.9375,y:.6875},{x:.9375,y:.6875},{x:.9375,y:.6875},{x:.9375,y:.6875},{x:.9375,y:.6875},{x:.9375,y:.6875},{x:.0625,y:.8125},{x:.0625,y:.8125},{x:.0625,y:.8125},{x:.0625,y:.8125},{x:.0625,y:.8125},{x:.0625,y:.8125},{x:.1875,y:.8125},{x:.1875,y:.8125},{x:.1875,y:.8125},{x:.1875,y:.8125},{x:.1875,y:.8125},{x:.1875,y:.8125},{x:.3125,y:.8125},{x:.3125,y:.8125},{x:.3125,y:.8125},{x:.3125,y:.8125},{x:.3125,y:.8125},{x:.3125,y:.8125},{x:.4375,y:.8125},{x:.4375,y:.8125},{x:.4375,y:.8125},{x:.4375,y:.8125},{x:.4375,y:.8125},{x:.4375,y:.8125},{x:.5625,y:.8125},{x:.5625,y:.8125},{x:.5625,y:.8125},{x:.5625,y:.8125},{x:.5625,y:.8125},{x:.5625,y:.8125},{x:.6875,y:.8125},{x:.6875,y:.8125},{x:.6875,y:.8125},{x:.6875,y:.8125},{x:.6875,y:.8125},{x:.6875,y:.8125},{x:.8125,y:.8125},{x:.8125,y:.8125},{x:.8125,y:.8125},{x:.8125,y:.8125},{x:.8125,y:.8125},{x:.8125,y:.8125},{x:.9375,y:.8125},{x:.9375,y:.8125},{x:.9375,y:.8125},{x:.9375,y:.8125},{x:.9375,y:.8125},{x:.9375,y:.8125},{x:.0625,y:.9375},{x:.0625,y:.9375},{x:.0625,y:.9375},{x:.0625,y:.9375},{x:.0625,y:.9375},{x:.0625,y:.9375},{x:.1875,y:.9375},{x:.1875,y:.9375},{x:.1875,y:.9375},{x:.1875,y:.9375},{x:.1875,y:.9375},{x:.1875,y:.9375},{x:.3125,y:.9375},{x:.3125,y:.9375},{x:.3125,y:.9375},{x:.3125,y:.9375},{x:.3125,y:.9375},{x:.3125,y:.9375},{x:.4375,y:.9375},{x:.4375,y:.9375},{x:.4375,y:.9375},{x:.4375,y:.9375},{x:.4375,y:.9375},{x:.4375,y:.9375},{x:.5625,y:.9375},{x:.5625,y:.9375},{x:.5625,y:.9375},{x:.5625,y:.9375},{x:.5625,y:.9375},{x:.5625,y:.9375},{x:.6875,y:.9375},{x:.6875,y:.9375},{x:.6875,y:.9375},{x:.6875,y:.9375},{x:.6875,y:.9375},{x:.6875,y:.9375},{x:.8125,y:.9375},{x:.8125,y:.9375},{x:.8125,y:.9375},{x:.8125,y:.9375},{x:.8125,y:.9375},{x:.8125,y:.9375},{x:.9375,y:.9375},{x:.9375,y:.9375},{x:.9375,y:.9375},{x:.9375,y:.9375},{x:.9375,y:.9375},{x:.9375,y:.9375}],uoe=function(){function e(t){Ye(this,e),gc(this,"model"),gc(this,"anchors"),gc(this,"anchorsTensor"),gc(this,"inputSize"),gc(this,"inputSizeTensor"),gc(this,"doubleInputSizeTensor"),this.model=t,this.anchors=soe.map((function(e){return[e.x,e.y]})),this.anchorsTensor=aw(this.anchors),this.inputSize=this.model&&this.model.inputs&&this.model.inputs[0].shape?this.model.inputs[0].shape[2]:0,this.inputSizeTensor=rw([this.inputSize,this.inputSize]),this.doubleInputSizeTensor=rw([2*this.inputSize,2*this.inputSize])}return Qe(e,[{key:"normalizeBoxes",value:function(e){var t={};t.boxOffsets=Qb(e,[0,0],[-1,2]),t.boxSizes=Qb(e,[0,2],[-1,2]),t.div=vb(t.boxOffsets,this.inputSizeTensor),t.boxCenterPoints=hb(t.div,this.anchorsTensor),t.halfBoxSizes=vb(t.boxSizes,this.doubleInputSizeTensor),t.sub=OA(t.boxCenterPoints,t.halfBoxSizes),t.startPoints=gb(t.sub,this.inputSizeTensor),t.add=hb(t.boxCenterPoints,t.halfBoxSizes),t.endPoints=gb(t.add,this.inputSizeTensor);var n=px([t.startPoints,t.endPoints],1);return Object.keys(t).forEach((function(e){return Yg(t[e])})),n}},{key:"normalizeLandmarks",value:function(e,t){var n={};n.reshape=Kb(e,[-1,7,2]),n.div=vb(n.reshape,this.inputSizeTensor),n.landmarks=hb(n.div,this.anchors[t]);var r=gb(n.landmarks,this.inputSizeTensor);return Object.keys(n).forEach((function(e){return Yg(n[e])})),r}},{key:"predict",value:function(){var e=ct(st().mark((function e(t,n){var r,a,i,o,s,u,c,l=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r={}).resize=HS.resizeBilinear(t,[this.inputSize,this.inputSize]),r.div=vb(r.resize,wne.tf127),r.image=OA(r.div,wne.tf1),r.batched=this.model.execute(r.image),r.predictions=Qk(r.batched),r.slice=Qb(r.predictions,[0,0],[-1,1]),r.sigmoid=Jb(r.slice),r.scores=Qk(r.sigmoid),e.next=11,r.scores.data();case 11:return a=e.sent,r.boxes=Qb(r.predictions,[0,1],[-1,4]),r.norm=this.normalizeBoxes(r.boxes),e.next=16,HS.nonMaxSuppressionAsync(r.norm,r.scores,3*n.hand.maxDetected,n.hand.iouThreshold,n.hand.minConfidence);case 16:return r.nms=e.sent,e.next=19,r.nms.array();case 19:i=e.sent,o=[],s=lc(i),e.prev=22,c=st().mark((function e(){var n,i,s,c,d,f,p,h;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.value,(i={}).box=Qb(r.norm,[n,0],[1,-1]),i.slice=Qb(r.predictions,[n,5],[1,14]),i.norm=l.normalizeLandmarks(i.slice,n),i.palmLandmarks=Kb(i.norm,[-1,2]),e.next=8,i.box.data();case 8:return s=e.sent,c=s.slice(0,2),d=s.slice(2,4),e.next=13,i.palmLandmarks.array();case 13:f=e.sent,p={startPoint:c,endPoint:d,palmLandmarks:f,confidence:a[n]},h=Jie(p,[t.shape[2]/l.inputSize,t.shape[1]/l.inputSize]),o.push(h),Object.keys(i).forEach((function(e){return Yg(i[e])}));case 18:case"end":return e.stop()}}),e)})),s.s();case 25:if((u=s.n()).done){e.next=29;break}return e.delegateYield(c(),"t0",27);case 27:e.next=25;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(22),s.e(e.t1);case 34:return e.prev=34,s.f(),e.finish(34);case 37:return Object.keys(r).forEach((function(e){return Yg(r[e])})),e.abrupt("return",o);case 39:case"end":return e.stop()}}),e,this,[[22,31,34,37]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),coe=[0,5,9,13,17,1,2],loe=0,doe=function(){function e(t,n){Ye(this,e),gc(this,"handDetector"),gc(this,"handPoseModel"),gc(this,"inputSize"),gc(this,"storedBoxes"),gc(this,"skipped"),gc(this,"detectedHands"),this.handDetector=t,this.handPoseModel=n,this.inputSize=this.handPoseModel&&this.handPoseModel.inputs[0].shape?this.handPoseModel.inputs[0].shape[2]:0,this.storedBoxes=[],this.skipped=Number.MAX_SAFE_INTEGER,this.detectedHands=0}return Qe(e,[{key:"calculateLandmarksBoundingBox",value:function(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{startPoint:[Math.min.apply(Math,Tn(t)),Math.min.apply(Math,Tn(n))],endPoint:[Math.max.apply(Math,Tn(t)),Math.max.apply(Math,Tn(n))]}}},{key:"getBoxForPalmLandmarks",value:function(e,t){var n=e.map((function(e){return ooe([].concat(Tn(e),[1]),t)}));return Qie($ie(this.calculateLandmarksBoundingBox(n)),5)}},{key:"getBoxForHandLandmarks",value:function(e){var t=Qie($ie(this.calculateLandmarksBoundingBox(e)),1.65);t.palmLandmarks=[];for(var n=0;n<coe.length;n++)t.palmLandmarks.push(e[coe[n]].slice(0,2));return t}},{key:"transformRawCoords",value:function(e,t,n,r){var a=this,i=Xie(t),o=[i[0]/this.inputSize,i[1]/this.inputSize,(i[0]+i[1])/this.inputSize/2],s=e.map((function(e){return[o[0]*(e[0]-a.inputSize/2),o[1]*(e[1]-a.inputSize/2),o[2]*e[2]]})),u=ioe(n,[0,0]),c=s.map((function(e){var t=ooe(e,u);return[].concat(Tn(t),[e[2]])})),l=function(e){var t=[[e[0][0],e[1][0]],[e[0][1],e[1][1]]],n=[e[0][2],e[1][2]],r=[-noe(t[0],n),-noe(t[1],n)];return[t[0].concat(r[0]),t[1].concat(r[1]),[0,0,1]]}(r),d=[].concat(Tn(Zie(t)),[1]),f=[noe(d,l[0]),noe(d,l[1])];return c.map((function(e){return[Math.trunc(e[0]+f[0]),Math.trunc(e[1]+f[1]),Math.trunc(e[2])]}))}},{key:"estimateHands",value:function(){var e=ct(st().mark((function e(t,n){var r,a,i,o,s,c,l,d,f,p,h,m,v,g,y,b,x,A,k,w,S,I,E,C,N,T,_;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!1,i=(n.hand.skipTime||0)>Sc()-loe,o=this.skipped<(n.hand.skipFrames||0),!(n.skipAllowed&&i&&o)){e.next=8;break}return e.next=6,this.handDetector.predict(t,n);case 6:a=e.sent,this.skipped=0;case 8:n.skipAllowed&&this.skipped++,a&&a.length>0&&(a.length!==this.detectedHands&&this.detectedHands!==n.hand.maxDetected||!n.hand.landmarks)&&(this.detectedHands=0,this.storedBoxes=Tn(a),this.storedBoxes.length>0&&(r=!0)),s=[],c=0;case 12:if(!(c<this.storedBoxes.length)){e.next=58;break}if(l=this.storedBoxes[c]){e.next=16;break}return e.abrupt("continue",55);case 16:if(!n.hand.landmarks){e.next=52;break}return d=n.hand.rotation?eoe(l.palmLandmarks[0],l.palmLandmarks[2]):0,f=Zie(l),p=[f[0]/t.shape[2],f[1]/t.shape[1]],h=n.hand.rotation&&ane.kernels.includes("rotatewithoffset")?HS.rotateWithOffset(t,d,0,p):t.clone(),m=ioe(-d,f),v=r?this.getBoxForPalmLandmarks(l.palmLandmarks,m):l,g=Yie(v,h,[this.inputSize,this.inputSize]),y=vb(g,wne.tf255),Yg(g),Yg(h),b=this.handPoseModel.execute(y),x=u(b,2),A=x[0],k=x[1],loe=Sc(),Yg(y),e.next=32,A.data();case 32:if(w=e.sent[0],Yg(A),!(w>=n.hand.minConfidence/4)){e.next=48;break}return S=Kb(k,[-1,3]),e.next=38,S.array();case 38:I=e.sent,Yg(k),Yg(S),E=this.transformRawCoords(I,v,d,m),C=this.getBoxForHandLandmarks(E),this.storedBoxes[c]=Ze(Ze({},C),{},{confidence:w}),N={landmarks:E,confidence:w,boxConfidence:l.confidence,fingerConfidence:w,box:{topLeft:C.startPoint,bottomRight:C.endPoint}},s.push(N),e.next=49;break;case 48:this.storedBoxes[c]=null;case 49:Yg(k),e.next=55;break;case 52:T=Qie($ie(l),1.65),_={confidence:l.confidence,boxConfidence:l.confidence,fingerConfidence:0,box:{topLeft:T.startPoint,bottomRight:T.endPoint},landmarks:[]},s.push(_);case 55:c++,e.next=12;break;case 58:return this.storedBoxes=this.storedBoxes.filter((function(e){return null!==e})),this.detectedHands=s.length,s.length>n.hand.maxDetected&&(s.length=n.hand.maxDetected),e.abrupt("return",s);case 62:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),foe={thumb:0,index:1,middle:2,ring:3,pinky:4,all:[0,1,2,3,4],nameMapping:{0:"thumb",1:"index",2:"middle",3:"ring",4:"pinky"},pointsMapping:{0:[[0,1],[1,2],[2,3],[3,4]],1:[[0,5],[5,6],[6,7],[7,8]],2:[[0,9],[9,10],[10,11],[11,12]],3:[[0,13],[13,14],[14,15],[15,16]],4:[[0,17],[17,18],[18,19],[19,20]]},getName:function(e){return foe.nameMapping[e]},getPoints:function(e){return foe.pointsMapping[e]}},poe={none:0,half:1,full:2,nameMapping:{0:"none",1:"half",2:"full"},getName:function(e){return poe.nameMapping[e]}},hoe={verticalUp:0,verticalDown:1,horizontalLeft:2,horizontalRight:3,diagonalUpRight:4,diagonalUpLeft:5,diagonalDownRight:6,diagonalDownLeft:7,nameMapping:{0:"verticalUp",1:"verticalDown",2:"horizontalLeft",3:"horizontalRight",4:"diagonalUpRight",5:"diagonalUpLeft",6:"diagonalDownRight",7:"diagonalDownLeft"},getName:function(e){return hoe.nameMapping[e]}},moe=function(){function e(t){Ye(this,e),gc(this,"name"),gc(this,"curls"),gc(this,"directions"),gc(this,"weights"),gc(this,"weightsRelative"),this.name=t,this.curls={},this.directions={},this.weights=[1,1,1,1,1],this.weightsRelative=[1,1,1,1,1]}return Qe(e,[{key:"curl",value:function(e,t,n){"undefined"===typeof this.curls[e]&&(this.curls[e]=[]),this.curls[e].push([t,n])}},{key:"direction",value:function(e,t,n){this.directions[e]||(this.directions[e]=[]),this.directions[e].push([t,n])}},{key:"weight",value:function(e,t){this.weights[e]=t;var n=this.weights.reduce((function(e,t){return e+t}),0);this.weightsRelative=this.weights.map((function(e){return 5*e/n}))}},{key:"matchAgainst",value:function(e,t){var n=0;for(var r in e){var a=e[r],i=this.curls[r];if("undefined"!==typeof i){var o,s=lc(i);try{for(s.s();!(o=s.n()).done;){var c=u(o.value,2),l=c[0],d=c[1];if(a===l){n+=d*this.weightsRelative[r];break}}}catch(x){s.e(x)}finally{s.f()}}else n+=this.weightsRelative[r]}for(var f in t){var p=t[f],h=this.directions[f];if("undefined"!==typeof h){var m,v=lc(h);try{for(v.s();!(m=v.n()).done;){var g=u(m.value,2),y=g[0],b=g[1];if(p===y){n+=b*this.weightsRelative[f];break}}}catch(x){v.e(x)}finally{v.f()}}else n+=this.weightsRelative[f]}return n/10}}]),e}(),voe=foe.thumb,goe=foe.index,yoe=foe.middle,boe=foe.ring,xoe=foe.pinky,Aoe=poe.none,koe=poe.half,woe=poe.full,Soe=hoe.verticalUp,Ioe=(hoe.verticalDown,hoe.horizontalLeft),Eoe=hoe.horizontalRight,Coe=hoe.diagonalUpRight,Noe=hoe.diagonalUpLeft,Toe=(hoe.diagonalDownRight,hoe.diagonalDownLeft,new moe("thumbs up"));Toe.curl(voe,Aoe,1),Toe.direction(voe,Soe,1),Toe.direction(voe,Noe,.25),Toe.direction(voe,Coe,.25);for(var _oe=0,Roe=[foe.index,foe.middle,foe.ring,foe.pinky];_oe<Roe.length;_oe++){var Moe=Roe[_oe];Toe.curl(Moe,woe,1),Toe.direction(Moe,Ioe,1),Toe.direction(Moe,Eoe,1)}var Ooe=new moe("victory");Ooe.curl(voe,koe,.5),Ooe.curl(voe,Aoe,.5),Ooe.direction(voe,Soe,1),Ooe.direction(voe,Noe,1),Ooe.curl(goe,Aoe,1),Ooe.direction(goe,Soe,.75),Ooe.direction(goe,Noe,1),Ooe.curl(yoe,Aoe,1),Ooe.direction(yoe,Soe,1),Ooe.direction(yoe,Noe,.75),Ooe.curl(boe,woe,1),Ooe.direction(boe,Soe,.2),Ooe.direction(boe,Noe,1),Ooe.direction(boe,Ioe,.2),Ooe.curl(xoe,woe,1),Ooe.direction(xoe,Soe,.2),Ooe.direction(xoe,Noe,1),Ooe.direction(xoe,Ioe,.2),Ooe.weight(goe,2),Ooe.weight(yoe,2);var Foe=new moe("point");Foe.curl(voe,woe,1),Foe.curl(goe,Aoe,.5),Foe.curl(yoe,woe,.5),Foe.curl(boe,woe,.5),Foe.curl(xoe,woe,.5),Foe.weight(goe,2),Foe.weight(yoe,2);var Poe=new moe("middle finger");Poe.curl(voe,Aoe,1),Poe.curl(goe,woe,.5),Poe.curl(yoe,woe,.5),Poe.curl(boe,woe,.5),Poe.curl(xoe,woe,.5),Poe.weight(goe,2),Poe.weight(yoe,2);var Doe=new moe("open palm");Doe.curl(voe,Aoe,.75),Doe.curl(goe,Aoe,.75),Doe.curl(yoe,Aoe,.75),Doe.curl(boe,Aoe,.75),Doe.curl(xoe,Aoe,.75);var Loe=[Toe,Ooe,Foe,Poe,Doe],zoe=60,Boe=130,Woe=1.1,joe=.9,Voe=1.6;function Uoe(e,t,n,r){var a=(t-r)/(e-n),i=180*Math.atan(a)/Math.PI;return i<=0?i=-i:i>0&&(i=180-i),i}function Hoe(e,t){if(!e||!t)return[0,0];var n=Uoe(e[0],e[1],t[0],t[1]);return 2===e.length?n:[n,Uoe(e[1],e[2],t[1],t[2])]}function Goe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,r=0,a=0;return e>=75&&e<=105?n=1*t:e>=25&&e<=155?r=1*t:a=1*t,[n,r,a]}function qoe(e,t,n){var r=e[0]-t[0],a=e[0]-n[0],i=t[0]-n[0],o=e[1]-t[1],s=e[1]-n[1],u=t[1]-n[1],c=e[2]-t[2],l=e[2]-n[2],d=t[2]-n[2],f=Math.sqrt(r*r+o*o+c*c),p=Math.sqrt(a*a+s*s+l*l),h=Math.sqrt(i*i+u*u+d*d),m=(h*h+f*f-p*p)/(2*h*f);m>1?m=1:m<-1&&(m=-1);var v=Math.acos(m);return(v=57.2958*v%180)>Boe?poe.none:v>zoe?poe.half:poe.full}function Koe(e,t,n,r){return r===Math.abs(e)?e>0?hoe.horizontalLeft:hoe.horizontalRight:r===Math.abs(t)?t>0?hoe.horizontalLeft:hoe.horizontalRight:n>0?hoe.horizontalLeft:hoe.horizontalRight}function Xoe(e,t,n,r){return r===Math.abs(e)?e<0?hoe.verticalDown:hoe.verticalUp:r===Math.abs(t)?t<0?hoe.verticalDown:hoe.verticalUp:n<0?hoe.verticalDown:hoe.verticalUp}function Zoe(e,t,n,r){var a=e[0]-t[0],i=e[0]-n[0],o=t[0]-n[0],s=e[1]-t[1],u=e[1]-n[1],c=t[1]-n[1],l=Math.max(Math.abs(a),Math.abs(i),Math.abs(o)),d=Math.max(Math.abs(s),Math.abs(u),Math.abs(c)),f=0,p=0,h=0,m=d/(l+1e-5);m>1.5?f+=Woe:m>.66?p+=Woe:h+=Woe;var v=Math.sqrt(a*a+s*s),g=Math.sqrt(i*i+u*u),y=Math.sqrt(o*o+c*c),b=Math.max(v,g,y),x=e[0],A=e[1],k=n[0],w=n[1];b===v?(k=n[0],w=n[1]):b===y&&(x=t[0],A=t[1]);var S=Goe(Hoe([x,A],[k,w]),Voe);f+=S[0],p+=S[1],h+=S[2];var I,E,C=lc(r);try{for(C.s();!(I=C.n()).done;){var N=Goe(I.value,joe);f+=N[0],p+=N[1],h+=N[2]}}catch(T){C.e(T)}finally{C.f()}return E=f===Math.max(f,p,h)?Xoe(u,s,c,d):h===Math.max(p,h)?Koe(i,a,o,l):function(e,t,n,r,a,i,o,s){var u=Xoe(e,t,n,r),c=Koe(a,i,o,s);return u===hoe.verticalUp?c===hoe.horizontalLeft?hoe.diagonalUpLeft:hoe.diagonalUpRight:c===hoe.horizontalLeft?hoe.diagonalDownLeft:hoe.diagonalDownRight}(u,s,c,d,i,a,o,l),E}function Yoe(e){var t=[],n=[],r=[],a=[];if(!e)return{curls:r,directions:a};var i,o=lc(foe.all);try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=foe.getPoints(u),l=[],d=[],f=lc(c);try{for(f.s();!(s=f.n()).done;){var p=s.value,h=Hoe(e[p[0]],e[p[1]]),m=h[0],v=h[1];l.push(m),d.push(v)}}catch(C){f.e(C)}finally{f.f()}t.push(l),n.push(d)}}catch(C){o.e(C)}finally{o.f()}var g,y=lc(foe.all);try{for(y.s();!(g=y.n()).done;){var b=g.value,x=b===foe.thumb?1:0,A=foe.getPoints(b),k=e[A[x][0]],w=e[A[x+1][1]],S=e[A[3][1]],I=qoe(k,w,S),E=Zoe(k,w,S,t[b].slice(x));r[b]=I,a[b]=E}}catch(C){y.e(C)}finally{y.f()}return{curls:r,directions:a}}function Joe(e){if(!e||0===e.length)return null;var t,n=Yoe(e),r={},a=lc(foe.all);try{for(a.s();!(t=a.n()).done;){var i=t.value;r[foe.getName(i)]={curl:poe.getName(n.curls[i]),direction:hoe.getName(n.directions[i])}}}catch(o){a.e(o)}finally{a.f()}return r}function Qoe(e){var t=[];if(!e||0===e.length)return t;var n,r=Yoe(e),a=lc(Loe);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=i.matchAgainst(r.curls,r.directions);o>=.7&&t.push({name:i.name,confidence:o})}}catch(s){a.e(s)}finally{a.f()}return t}var $oe,ese,tse,nse={thumb:[1,2,3,4],index:[5,6,7,8],middle:[9,10,11,12],ring:[13,14,15,16],pinky:[17,18,19,20],palm:[0]};function rse(e,t){return ase.apply(this,arguments)}function ase(){return ase=ct(st().mark((function e(t,n){var r,a,i,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tse.estimateHands(t,n);case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:for(a=[],i=function(e){var n={};if(r[e].landmarks)for(var i=0,o=Object.keys(nse);i<o.length;i++){var s=o[i];n[s]=nse[s].map((function(t){return r[e].landmarks[t]}))}var u=r[e].landmarks,c=[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,0,0],l=[0,0,0,0];if(u&&u.length>0){var d,f=lc(u);try{for(f.s();!(d=f.n()).done;){var p=d.value;p[0]<c[0]&&(c[0]=p[0]),p[1]<c[1]&&(c[1]=p[1]),p[0]>c[2]&&(c[2]=p[0]),p[1]>c[3]&&(c[3]=p[1])}}catch(m){f.e(m)}finally{f.f()}c[2]-=c[0],c[3]-=c[1],l=[c[0]/(t.shape[2]||0),c[1]/(t.shape[1]||0),c[2]/(t.shape[2]||0),c[3]/(t.shape[1]||0)]}else c=r[e].box?[Math.trunc(Math.max(0,r[e].box.topLeft[0])),Math.trunc(Math.max(0,r[e].box.topLeft[1])),Math.trunc(Math.min(t.shape[2]||0,r[e].box.bottomRight[0])-Math.max(0,r[e].box.topLeft[0])),Math.trunc(Math.min(t.shape[1]||0,r[e].box.bottomRight[1])-Math.max(0,r[e].box.topLeft[1]))]:[0,0,0,0],l=[r[e].box.topLeft[0]/(t.shape[2]||0),r[e].box.topLeft[1]/(t.shape[1]||0),(r[e].box.bottomRight[0]-r[e].box.topLeft[0])/(t.shape[2]||0),(r[e].box.bottomRight[1]-r[e].box.topLeft[1])/(t.shape[1]||0)];var h=Joe(u);a.push({id:e,score:Math.round(100*r[e].confidence)/100,boxScore:Math.round(100*r[e].boxConfidence)/100,fingerScore:Math.round(100*r[e].fingerConfidence)/100,label:"hand",box:c,boxRaw:l,keypoints:u,annotations:n,landmarks:h})},o=0;o<r.length;o++)i(o);return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)}))),ase.apply(this,arguments)}function ise(e){return ose.apply(this,arguments)}function ose(){return(ose=ct(st().mark((function e(t){var n,r,a,i,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ane.initial&&($oe=null,ese=null),$oe&&ese){e.next=10;break}return e.next=4,Promise.all([t.hand.enabled?une(null==(n=t.hand.detector)?void 0:n.modelPath):null,t.hand.landmarks?une(null==(r=t.hand.skeleton)?void 0:r.modelPath):null]);case 4:a=e.sent,i=u(a,2),$oe=i[0],ese=i[1],e.next=12;break;case 10:t.debug&&kc("cached model:",$oe.modelUrl),t.debug&&kc("cached model:",ese.modelUrl);case 12:return o=new uoe($oe),tse=new doe(o,ese),e.abrupt("return",[$oe,ese]);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var sse,use=[null,null],cse=["StatefulPartitionedCall/Postprocessor/Slice","StatefulPartitionedCall/Postprocessor/ExpandDims_1"],lse=[[0,0],[0,0]],dse=["hand","fist","pinch","point","face","tip","pinchtip"],fse=1.6,pse=Number.MAX_SAFE_INTEGER,hse=0,mse=[0,0],vse={boxes:[],hands:[]},gse={thumb:[1,2,3,4],index:[5,6,7,8],middle:[9,10,11,12],ring:[13,14,15,16],pinky:[17,18,19,20],base:[0],palm:[0,17,13,9,5,1,0]};function yse(e){return bse.apply(this,arguments)}function bse(){return(bse=ct(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ane.initial&&(use[0]=null),use[0]){e.next=11;break}return sce(["tensorlistreserve","enter","tensorlistfromtensor","merge","loopcond","switch","exit","tensorliststack","nextiteration","tensorlistsetitem","tensorlistgetitem","reciprocal","shape","split","where"],t),e.next=5,une(null==(n=t.hand.detector)?void 0:n.modelPath);case 5:use[0]=e.sent,r=Object.values(use[0].modelSignature.inputs),lse[0][0]=Array.isArray(r)?parseInt(r[0].tensorShape.dim[1].size):0,lse[0][1]=Array.isArray(r)?parseInt(r[0].tensorShape.dim[2].size):0,e.next=12;break;case 11:t.debug&&kc("cached model:",use[0].modelUrl);case 12:return e.abrupt("return",use[0]);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xse(e){return Ase.apply(this,arguments)}function Ase(){return(Ase=ct(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ane.initial&&(use[1]=null),use[1]){e.next=10;break}return e.next=4,une(null==(n=t.hand.skeleton)?void 0:n.modelPath);case 4:use[1]=e.sent,r=Object.values(use[1].modelSignature.inputs),lse[1][0]=Array.isArray(r)?parseInt(r[0].tensorShape.dim[1].size):0,lse[1][1]=Array.isArray(r)?parseInt(r[0].tensorShape.dim[2].size):0,e.next=11;break;case 10:t.debug&&kc("cached model:",use[1].modelUrl);case 11:return e.abrupt("return",use[1]);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kse(e,t){return wse.apply(this,arguments)}function wse(){return wse=ct(st().mark((function e(t,n){var r,a,i,o,s,c,l,d,f,p,h,m,v,g,y,b,x,A,k,w,S,I,E;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],t&&use[0]){e.next=3;break}return e.abrupt("return",r);case 3:return a={},i=(t.shape[2]||1)/(t.shape[1]||1),o=Math.min(8*Math.round((t.shape[1]||0)/8),512),s=8*Math.round(o*i/8),a.resize=HS.resizeBilinear(t,[o,s]),a.cast=lg(a.resize,"int32"),e.next=11,use[0].executeAsync(a.cast,cse);case 11:return c=e.sent,l=u(c,2),a.rawScores=l[0],a.rawBoxes=l[1],a.boxes=Qk(a.rawBoxes,[0,2]),a.scores=Qk(a.rawScores,[0]),Yg((d=fw(a.scores,1))[4]),d.splice(4,1),a.filtered=$k(d,1),Yg(d),a.max=Xx(a.filtered,1),a.argmax=Sb(a.filtered,1),f=0,e.next=27,HS.nonMaxSuppressionAsync(a.boxes,a.max,(n.hand.maxDetected||0)+1,n.hand.iouThreshold||0,n.hand.minConfidence||1);case 27:return a.nms=e.sent,e.next=30,a.nms.data();case 30:return p=e.sent,e.next=33,a.max.data();case 33:return h=e.sent,e.next=36,a.argmax.data();case 36:m=e.sent,v=0,g=Array.from(p);case 38:if(!(v<g.length)){e.next=55;break}return y=g[v],b=Qb(a.boxes,y,1),e.next=43,b.data();case 43:x=e.sent,Yg(b),A=[x[1],x[0],x[3]-x[1],x[2]-x[0]],k=Hre(A,1.4),w=[Math.trunc(A[0]*mse[0]),Math.trunc(A[1]*mse[1]),Math.trunc(A[2]*mse[0]),Math.trunc(A[3]*mse[1])],S=h[y],I=dse[m[y]],E={id:f++,score:S,box:w,boxRaw:k,label:I},r.push(E);case 52:v++,e.next=38;break;case 55:return Object.keys(a).forEach((function(e){return Yg(a[e])})),r.sort((function(e,t){return t.score-e.score})),r.length>(n.hand.maxDetected||1)&&(r.length=n.hand.maxDetected||1),e.abrupt("return",r);case 59:case"end":return e.stop()}}),e)}))),wse.apply(this,arguments)}function Sse(e,t,n){return Ise.apply(this,arguments)}function Ise(){return Ise=ct(st().mark((function e(t,n,r){var a,i,o,s,c,l,d,f,p,h,m,v,g;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={id:n.id,score:Math.round(100*n.score)/100,boxScore:Math.round(100*n.score)/100,fingerScore:0,box:n.box,boxRaw:n.boxRaw,label:n.label,keypoints:[],landmarks:{},annotations:{}},!(t&&use[1]&&r.hand.landmarks&&n.score>(r.hand.minConfidence||0))){e.next=26;break}return i={},o=[n.boxRaw[1],n.boxRaw[0],n.boxRaw[3]+n.boxRaw[1],n.boxRaw[2]+n.boxRaw[0]],i.crop=HS.cropAndResize(t,[o],[0],[lse[1][0],lse[1][1]],"bilinear"),i.div=vb(i.crop,wne.tf255),s=use[1].execute(i.div,["Identity_1","Identity"]),c=u(s,2),i.score=c[0],i.keypoints=c[1],e.next=12,i.score.data();case 12:if(l=e.sent[0],!((d=(100-Math.trunc(100/(1+Math.exp(l))))/100)>=(r.hand.minConfidence||0))){e.next=25;break}return a.fingerScore=d,i.reshaped=Kb(i.keypoints,[-1,3]),e.next=19,i.reshaped.array();case 19:for(f=e.sent,p=f.map((function(e){return[e[0]/lse[1][1],e[1]/lse[1][0],e[2]||0]})),h=p.map((function(e){return[e[0]*n.boxRaw[2],e[1]*n.boxRaw[3],e[2]||0]})),a.keypoints=h.map((function(e){return[mse[0]*(e[0]+n.boxRaw[0]),mse[1]*(e[1]+n.boxRaw[1]),e[2]||0]})),a.landmarks=Joe(a.keypoints),m=0,v=Object.keys(gse);m<v.length;m++)g=v[m],a.annotations[g]=gse[g].map((function(e){return a.landmarks&&a.keypoints[e]?a.keypoints[e]:null}));case 25:Object.keys(i).forEach((function(e){return Yg(i[e])}));case 26:return e.abrupt("return",a);case 27:case"end":return e.stop()}}),e)}))),Ise.apply(this,arguments)}function Ese(e,t){return Cse.apply(this,arguments)}function Cse(){return Cse=ct(st().mark((function e(t,n){var r,a,i,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(use[0]&&use[1]&&(null==(r=use[0])?void 0:r.inputs[0].shape)&&(null==(a=use[1])?void 0:a.inputs[0].shape)){e.next=2;break}return e.abrupt("return",[]);case 2:if(mse=[t.shape[2]||0,t.shape[1]||0],pse++,i=(n.hand.skipTime||0)>Sc()-hse,o=pse<(n.hand.skipFrames||0),!(n.skipAllowed&&i&&o)){e.next=8;break}return e.abrupt("return",vse.hands);case 8:return e.abrupt("return",new Promise(function(){var e=ct(st().mark((function e(r){var a,i,o,s,u,c,l,d,f;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=3*(n.hand.skipTime||0)>Sc()-hse,i=pse<3*(n.hand.skipFrames||0),!n.skipAllowed||vse.hands.length!==n.hand.maxDetected){e.next=8;break}return e.next=5,Promise.all(vse.boxes.map((function(e){return Sse(t,e,n)})));case 5:vse.hands=e.sent,e.next=22;break;case 8:if(!(n.skipAllowed&&a&&i&&vse.hands.length>0)){e.next=14;break}return e.next=11,Promise.all(vse.boxes.map((function(e){return Sse(t,e,n)})));case 11:vse.hands=e.sent,e.next=22;break;case 14:return e.next=16,kse(t,n);case 16:return vse.boxes=e.sent,hse=Sc(),e.next=20,Promise.all(vse.boxes.map((function(e){return Sse(t,e,n)})));case 20:vse.hands=e.sent,pse=0;case 22:if(o=Tn(vse.boxes),vse.boxes.length=0,n.cacheSensitivity>0)for(s=0;s<vse.hands.length;s++)(u=Ure(vse.hands[s].keypoints,mse)).box[2]/(t.shape[2]||1)>.05&&u.box[3]/(t.shape[1]||1)>.05&&vse.hands[s].fingerScore&&vse.hands[s].fingerScore>(n.hand.minConfidence||0)&&(c=Hre(u.box,fse),l=Hre(u.boxRaw,fse),vse.boxes.push(Ze(Ze({},o[s]),{},{box:c,boxRaw:l})));for(d=0;d<vse.hands.length;d++)f=Vre(vse.hands[d].keypoints,mse),vse.hands[d].box=f.box,vse.hands[d].boxRaw=f.boxRaw;r(vse.hands);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),Cse.apply(this,arguments)}var Nse=[],Tse=Number.MAX_SAFE_INTEGER,_se=0,Rse=0;function Mse(e){return Ose.apply(this,arguments)}function Ose(){return(Ose=ct(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ane.initial&&(sse=null),sse){e.next=7;break}return e.next=4,une(null==(n=t.face.liveness)?void 0:n.modelPath);case 4:sse=e.sent,e.next=8;break;case 7:t.debug&&kc("cached model:",sse.modelUrl);case 8:return e.abrupt("return",sse);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fse(e,t,n,r){return Pse.apply(this,arguments)}function Pse(){return Pse=ct(st().mark((function e(t,n,r,a){var i,o,s,u;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(sse){e.next=2;break}return e.abrupt("return",0);case 2:if(s=((null==(i=n.face.liveness)?void 0:i.skipTime)||0)>Sc()-Rse,u=Tse<((null==(o=n.face.liveness)?void 0:o.skipFrames)||0),!(n.skipAllowed&&s&&u&&_se===a&&Nse[r])){e.next=7;break}return Tse++,e.abrupt("return",Nse[r]);case 7:return Tse=0,e.abrupt("return",new Promise(function(){var e=ct(st().mark((function e(n){var i,o,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=HS.resizeBilinear(t,[(null==sse?void 0:sse.inputs[0].shape)?sse.inputs[0].shape[2]:0,(null==sse?void 0:sse.inputs[0].shape)?sse.inputs[0].shape[1]:0],!1),o=null==sse?void 0:sse.execute(i),e.next=4,o.data();case 4:s=e.sent[0],Nse[r]=Math.round(100*s)/100,_se=a,Rse=Sc(),Yg([i,o]),n(Nse[r]);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),Pse.apply(this,arguments)}var Dse={};vc(Dse,{connected:function(){return Vse},horizontal:function(){return Bse},kpt:function(){return zse},relative:function(){return jse},vertical:function(){return Wse}});var Lse,zse=["nose","leftEye","rightEye","leftEar","rightEar","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle"],Bse=[["leftEye","rightEye"],["leftEar","rightEar"],["leftShoulder","rightShoulder"],["leftElbow","rightElbow"],["leftWrist","rightWrist"],["leftHip","rightHip"],["leftKnee","rightKnee"],["leftAnkle","rightAnkle"]],Wse=[["leftKnee","leftShoulder"],["rightKnee","rightShoulder"],["leftAnkle","leftKnee"],["rightAnkle","rightKnee"]],jse=[[["leftHip","rightHip"],["leftShoulder","rightShoulder"]],[["leftElbow","rightElbow"],["leftShoulder","rightShoulder"]]],Vse={leftLeg:["leftHip","leftKnee","leftAnkle"],rightLeg:["rightHip","rightKnee","rightAnkle"],torso:["leftShoulder","rightShoulder","rightHip","leftHip","leftShoulder"],leftArm:["leftShoulder","leftElbow","leftWrist"],rightArm:["rightShoulder","rightElbow","rightWrist"],head:[]},Use={keypoints:[],padding:[[0,0],[0,0],[0,0],[0,0]]};function Hse(e){var t,n=lc(Bse);try{var r=function(){var n=t.value,r=e.keypoints.findIndex((function(e){return e.part===n[0]})),a=e.keypoints.findIndex((function(e){return e.part===n[1]}));if(e.keypoints[r]&&e.keypoints[a]&&e.keypoints[r].position[0]<e.keypoints[a].position[0]){var i=e.keypoints[r];e.keypoints[r]=e.keypoints[a],e.keypoints[a]=i}};for(n.s();!(t=n.n()).done;)r()}catch(d){n.e(d)}finally{n.f()}var a,i=lc(Wse);try{var o=function(){var t=a.value,n=e.keypoints.findIndex((function(e){return e&&e.part===t[0]})),r=e.keypoints.findIndex((function(e){return e&&e.part===t[1]}));e.keypoints[n]&&e.keypoints[r]&&e.keypoints[n].position[1]<e.keypoints[r].position[1]&&e.keypoints.splice(n,1)};for(i.s();!(a=i.n()).done;)o()}catch(d){i.e(d)}finally{i.f()}var s,c=lc(jse);try{var l=function(){var t=u(s.value,2),n=t[0],r=t[1],a=e.keypoints.findIndex((function(e){return e&&e.part===n[0]})),i=e.keypoints.findIndex((function(e){return e&&e.part===n[1]})),o=e.keypoints.findIndex((function(e){return e&&e.part===r[0]})),c=e.keypoints.findIndex((function(e){return e&&e.part===r[1]}));if(!e.keypoints[o]||!e.keypoints[c])return"continue";var l=e.keypoints[a]?[Math.abs(e.keypoints[o].position[0]-e.keypoints[a].position[0]),Math.abs(e.keypoints[c].position[0]-e.keypoints[a].position[0])]:[0,0],d=e.keypoints[i]?[Math.abs(e.keypoints[c].position[0]-e.keypoints[i].position[0]),Math.abs(e.keypoints[o].position[0]-e.keypoints[i].position[0])]:[0,0];if(l[0]>l[1]||d[0]>d[1]){var f=e.keypoints[a];e.keypoints[a]=e.keypoints[i],e.keypoints[i]=f}};for(c.s();!(s=c.n()).done;)l()}catch(d){c.e(d)}finally{c.f()}}function Gse(e){for(var t=0;t<e.length;t++)if(e[t]&&Use.keypoints[t]){var n=[Math.abs(e[t].positionRaw[0]-Use.keypoints[t].positionRaw[0]),Math.abs(e[t].positionRaw[1]-Use.keypoints[t].positionRaw[1])];n[0]<.005&&n[1]<.005?e[t]=Use.keypoints[t]:Use.keypoints[t]=e[t]}else Use.keypoints[t]=e[t];return e}function qse(e,t){var n={};if(!e.shape||!e.shape[1]||!e.shape[2])return e;Use.padding=[[0,0],[e.shape[2]>e.shape[1]?Math.trunc((e.shape[2]-e.shape[1])/2):0,e.shape[2]>e.shape[1]?Math.trunc((e.shape[2]-e.shape[1])/2):0],[e.shape[1]>e.shape[2]?Math.trunc((e.shape[1]-e.shape[2])/2):0,e.shape[1]>e.shape[2]?Math.trunc((e.shape[1]-e.shape[2])/2):0],[0,0]],n.pad=ok(e,Use.padding),n.resize=HS.resizeBilinear(n.pad,[t,t]);var r=lg(n.resize,"int32");return Object.keys(n).forEach((function(e){return Yg(n[e])})),r}function Kse(e,t){e.keypoints=e.keypoints.filter((function(e){return e&&e.position}));var n,r=lc(e.keypoints);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.position=[a.position[0]*(t[0]+Use.padding[2][0]+Use.padding[2][1])/t[0]-Use.padding[2][0],a.position[1]*(t[1]+Use.padding[1][0]+Use.padding[1][1])/t[1]-Use.padding[1][0]],a.positionRaw=[a.position[0]/t[0],a.position[1]/t[1]]}}catch(o){r.e(o)}finally{r.f()}var i=Vre(e.keypoints.map((function(e){return e.position})),t);return e.box=i.box,e.boxRaw=i.boxRaw,e}var Xse,Zse=0,Yse=Number.MAX_SAFE_INTEGER,Jse={boxes:[],bodies:[],last:0};function Qse(e){return $se.apply(this,arguments)}function $se(){return($se=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ane.initial&&(Lse=null),Lse){e.next=8;break}return sce(["size"],t),e.next=5,une(t.body.modelPath);case 5:Lse=e.sent,e.next=9;break;case 8:t.debug&&kc("cached model:",Lse.modelUrl);case 9:return(Zse=Lse.inputs[0].shape?Lse.inputs[0].shape[2]:0)<64&&(Zse=256),e.abrupt("return",Lse);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eue(e,t,n){return tue.apply(this,arguments)}function tue(){return tue=ct(st().mark((function e(t,n,r){var a,i,o,s,c,l,d,f,p,h,m,v;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=t[0][0],i=[],o=0,s=0;s<a.length;s++)(o=a[s][2])>n.body.minConfidence&&(c=[a[s][1],a[s][0]],i.push({score:Math.round(100*o)/100,part:zse[s],positionRaw:c,position:[Math.round((r.shape[2]||0)*c[0]),Math.round((r.shape[1]||0)*c[1])]}));for(o=i.reduce((function(e,t){return t.score>e?t.score:e}),0),l=[],d=Vre(i.map((function(e){return e.position})),[r.shape[2],r.shape[1]]),f={},p=function(){for(var e=u(m[h],2),t=e[0],r=e[1],a=[],o=function(e){var t=i.find((function(t){return t.part===r[e]})),o=i.find((function(t){return t.part===r[e+1]}));t&&o&&t.score>(n.body.minConfidence||0)&&o.score>(n.body.minConfidence||0)&&a.push([t.position,o.position])},s=0;s<r.length-1;s++)o(s);f[t]=a},h=0,m=Object.entries(Vse);h<m.length;h++)p();return Hse(v={id:0,score:o,box:d.box,boxRaw:d.boxRaw,keypoints:i,annotations:f}),l.push(v),e.abrupt("return",l);case 14:case"end":return e.stop()}}),e)}))),tue.apply(this,arguments)}function nue(e,t,n){return rue.apply(this,arguments)}function rue(){return rue=ct(st().mark((function e(t,n,r){var a,i,o,s,c,l,d,f,p,h,m,v,g,y;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=[],i=0;i<t[0].length;i++)if(o=t[0][i],(s=Math.round(100*o[55])/100)>n.body.minConfidence){for(c=[],l=0;l<17;l++)(d=o[3*l+2])>n.body.minConfidence&&(f=[o[3*l+1],o[3*l+0]],c.push({part:zse[l],score:Math.round(100*d)/100,positionRaw:f,position:[Math.round((r.shape[2]||0)*f[0]),Math.round((r.shape[1]||0)*f[1])]}));for(p=Vre(c.map((function(e){return e.position})),[r.shape[2],r.shape[1]]),h={},m=function(){for(var e=u(g[v],2),t=e[0],r=e[1],a=[],i=function(e){var t=c.find((function(t){return t.part===r[e]})),i=c.find((function(t){return t.part===r[e+1]}));t&&i&&t.score>(n.body.minConfidence||0)&&i.score>(n.body.minConfidence||0)&&a.push([t.position,i.position])},o=0;o<r.length-1;o++)i(o);h[t]=a},v=0,g=Object.entries(Vse);v<g.length;v++)m();Hse(y={id:i,score:s,box:p.box,boxRaw:p.boxRaw,keypoints:[].concat(c),annotations:h}),a.push(y)}return a.sort((function(e,t){return t.score-e.score})),a.length>n.body.maxDetected&&(a.length=n.body.maxDetected),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),rue.apply(this,arguments)}function aue(e,t){return iue.apply(this,arguments)}function iue(){return iue=ct(st().mark((function e(t,n){var r,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Lse&&(null==Lse?void 0:Lse.inputs[0].shape)){e.next=2;break}return e.abrupt("return",[]);case 2:if(n.skipAllowed||(Jse.boxes.length=0),Yse++,r=(n.body.skipTime||0)>Sc()-Jse.last,a=Yse<(n.body.skipFrames||0),!(n.skipAllowed&&r&&a)){e.next=8;break}return e.abrupt("return",Jse.bodies);case 8:return e.abrupt("return",new Promise(function(){var e=ct(st().mark((function e(r){var a,i,o,s,u;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yse=0,(a={}).input=qse(t,Zse),a.res=null==Lse?void 0:Lse.execute(a.input),Jse.last=Sc(),e.next=7,a.res.array();case 7:if(i=e.sent,17!==a.res.shape[2]){e.next=14;break}return e.next=11,eue(i,n,t);case 11:e.t0=e.sent,e.next=17;break;case 14:return e.next=16,nue(i,n,t);case 16:e.t0=e.sent;case 17:Jse.bodies=e.t0,o=lc(Jse.bodies);try{for(o.s();!(s=o.n()).done;)Kse(u=s.value,[t.shape[2]||1,t.shape[1]||1]),Gse(u.keypoints)}catch(c){o.e(c)}finally{o.f()}Object.keys(a).forEach((function(e){return Yg(a[e])})),r(Jse.bodies);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),iue.apply(this,arguments)}var oue=[],sue=0,uue=Number.MAX_SAFE_INTEGER,cue=0,lue=2.5;function due(e){return fue.apply(this,arguments)}function fue(){return(fue=ct(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Xse&&!ane.initial){e.next=8;break}return e.next=3,une(t.object.modelPath);case 3:Xse=e.sent,n=Object.values(Xse.modelSignature.inputs),cue=Array.isArray(n)?parseInt(n[0].tensorShape.dim[2].size):0,e.next=9;break;case 8:t.debug&&kc("cached model:",Xse.modelUrl);case 9:return e.abrupt("return",Xse);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pue(e,t,n){return hue.apply(this,arguments)}function hue(){return hue=ct(st().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=0,i=[],o=function(){var e=u[s];Zg(ct(st().mark((function o(){var s,u,c,l,d,f,p,h,m,v,g,y,b,x,A,k,w,S,I;return st().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s=13*e,u=Qk(t.find((function(e){return e.shape[1]===Math.pow(s,2)&&(e.shape[2]||0)===hae.length}))),c=Qk(t.find((function(e){return e.shape[1]===Math.pow(s,2)&&(e.shape[2]||0)<hae.length}))),l=c.reshape([-1,4,c.shape[1]/4]),o.next=6,l.argMax(2).array();case 6:return d=o.sent,o.next=9,u.array();case 9:for(f=o.sent,p=0;p<u.shape[0];p++)for(h=0;h<u.shape[1];h++)(m=f[p][h])>(r.object.minConfidence||0)&&61!==h&&(v=(.5+Math.trunc(p%s))/s,g=(.5+Math.trunc(p/s))/s,y=d[p].map((function(t){return t*(s/e/cue)})),b=v-lue/e*y[0],x=g-lue/e*y[1],A=v+lue/e*y[2]-b,k=g+lue/e*y[3]-x,w=(w=[b,x,A,k]).map((function(e){return Math.max(0,Math.min(e,1))})),S=[w[0]*n[0],w[1]*n[1],w[2]*n[0],w[3]*n[1]],I={id:a++,score:Math.round(100*m)/100,class:h+1,label:hae[h].label,box:S.map((function(e){return Math.trunc(e)})),boxRaw:w},i.push(I));case 11:case"end":return o.stop()}}),o)}))))},s=0,u=[1,2,4];s<u.length;s++)o();if(t.forEach((function(e){return Yg(e)})),c=i.map((function(e){return[e.boxRaw[1],e.boxRaw[0],e.boxRaw[3],e.boxRaw[2]]})),l=i.map((function(e){return e.score})),d=[],!(c&&c.length>0)){e.next=16;break}return e.next=11,HS.nonMaxSuppressionAsync(c,l,r.object.maxDetected,r.object.iouThreshold,r.object.minConfidence);case 11:return f=e.sent,e.next=14,f.data();case 14:d=e.sent,Yg(f);case 16:return i=i.filter((function(e,t){return d.includes(t)})).sort((function(e,t){return t.score-e.score})),e.abrupt("return",i);case 18:case"end":return e.stop()}}),e)}))),hue.apply(this,arguments)}function mue(e,t){return vue.apply(this,arguments)}function vue(){return vue=ct(st().mark((function e(t,n){var r,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n.object.skipTime||0)>Sc()-sue,a=uue<(n.object.skipFrames||0),!(n.skipAllowed&&r&&a&&oue.length>0)){e.next=5;break}return uue++,e.abrupt("return",oue);case 5:if(uue=0,ane.kernels.includes("mod")&&ane.kernels.includes("sparsetodense")){e.next=8;break}return e.abrupt("return",oue);case 8:return e.abrupt("return",new Promise(function(){var e=ct(st().mark((function e(r){var a,i,o,s,u,c;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[t.shape[2]||0,t.shape[1]||0],i=HS.resizeBilinear(t,[cue,cue],!1),o=vb(i,wne.tf255),s=o.transpose([0,3,1,2]),Yg(o),Yg(i),n.object.enabled&&(u=Xse.execute(s)),sue=Sc(),Yg(s),e.next=11,pue(u,a,n);case 11:c=e.sent,oue=c,r(c);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:case"end":return e.stop()}}),e)}))),vue.apply(this,arguments)}var gue=["nose","leftEye","rightEye","leftEar","rightEar","leftShoulder","rightShoulder","leftElbow","rightElbow","leftWrist","rightWrist","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle"],yue=gue.length,bue=gue.reduce((function(e,t,n){return e[t]=n,e}),{}),xue=([["leftHip","leftShoulder"],["leftElbow","leftShoulder"],["leftElbow","leftWrist"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["rightHip","rightShoulder"],["rightElbow","rightShoulder"],["rightElbow","rightWrist"],["rightHip","rightKnee"],["rightKnee","rightAnkle"],["leftShoulder","rightShoulder"],["leftHip","rightHip"]].map((function(e){var t=u(e,2),n=t[0],r=t[1];return[bue[n],bue[r]]})),[["nose","leftEye"],["leftEye","leftEar"],["nose","rightEye"],["rightEye","rightEar"],["nose","leftShoulder"],["leftShoulder","leftElbow"],["leftElbow","leftWrist"],["leftShoulder","leftHip"],["leftHip","leftKnee"],["leftKnee","leftAnkle"],["nose","rightShoulder"],["rightShoulder","rightElbow"],["rightElbow","rightWrist"],["rightShoulder","rightHip"],["rightHip","rightKnee"],["rightKnee","rightAnkle"]]);function Aue(e){var t=e.reduce((function(e,t){var n=e.maxX,r=e.maxY,a=e.minX,i=e.minY,o=t.position,s=o.x,u=o.y;return{maxX:Math.max(n,s),maxY:Math.max(r,u),minX:Math.min(a,s),minY:Math.min(i,u)}}),{maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY});return[t.minX,t.minY,t.maxX-t.minX,t.maxY-t.minY]}function kue(e,t,n){var r=u(t,2),a=r[0],i=r[1],o=u(n,2),s=o[0],c=o[1],l=a/s,d=i/c,f=e.map((function(e,t){return function(e,t){return{id:t,score:e.score,boxRaw:[e.box[0]/c,e.box[1]/s,e.box[2]/c,e.box[3]/s],box:[Math.trunc(e.box[0]*d),Math.trunc(e.box[1]*l),Math.trunc(e.box[2]*d),Math.trunc(e.box[3]*l)],keypoints:e.keypoints.map((function(e){var t=e.score,n=e.part,r=e.position;return{score:t,part:n,position:[Math.trunc(r.x*d),Math.trunc(r.y*l)],positionRaw:[r.x/s,r.y/s]}})),annotations:{}}}(e,t)}));return f}var wue,Sue=function(){function e(t,n){Ye(this,e),gc(this,"priorityQueue"),gc(this,"numberOfElements"),gc(this,"getElementValue"),this.priorityQueue=new Array(t),this.numberOfElements=-1,this.getElementValue=n}return Qe(e,[{key:"enqueue",value:function(e){this.priorityQueue[++this.numberOfElements]=e,this.swim(this.numberOfElements)}},{key:"dequeue",value:function(){var e=this.priorityQueue[0];return this.exchange(0,this.numberOfElements--),this.sink(0),this.priorityQueue[this.numberOfElements+1]=null,e}},{key:"empty",value:function(){return-1===this.numberOfElements}},{key:"size",value:function(){return this.numberOfElements+1}},{key:"all",value:function(){return this.priorityQueue.slice(0,this.numberOfElements+1)}},{key:"max",value:function(){return this.priorityQueue[0]}},{key:"swim",value:function(e){for(;e>0&&this.less(Math.floor(e/2),e);)this.exchange(e,Math.floor(e/2)),e=Math.floor(e/2)}},{key:"sink",value:function(e){for(;2*e<=this.numberOfElements;){var t=2*e;if(t<this.numberOfElements&&this.less(t,t+1)&&t++,!this.less(e,t))break;this.exchange(e,t),e=t}}},{key:"getValueAt",value:function(e){return this.getElementValue(this.priorityQueue[e])}},{key:"less",value:function(e,t){return this.getValueAt(e)<this.getValueAt(t)}},{key:"exchange",value:function(e,t){var n=this.priorityQueue[e];this.priorityQueue[e]=this.priorityQueue[t],this.priorityQueue[t]=n}}]),e}();function Iue(e,t,n,r){return{y:r.get(e,t,n),x:r.get(e,t,n+yue)}}function Eue(e,t,n){var r=Iue(e.heatmapY,e.heatmapX,e.id,n),a=r.y,i=r.x;return{x:e.heatmapX*t+i,y:e.heatmapY*t+a}}function Cue(e,t,n){return e<t?t:e>n?n:e}function Nue(e,t){return{x:e.x+t.x,y:e.y+t.y}}var Tue,_ue=["MobilenetV1/offset_2/BiasAdd","MobilenetV1/heatmap_2/BiasAdd","MobilenetV1/displacement_fwd_2/BiasAdd","MobilenetV1/displacement_bwd_2/BiasAdd"],Rue=16,Mue=Math.pow(50,2);function Oue(e,t,n,r,a,i){for(var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2,s=function(t){return{y:i.get(t.y,t.x,e),x:i.get(t.y,t.x,i.shape[2]/2+e)}},c=function(e,t,n){return{y:Cue(Math.round(e.y/Rue),0,t-1),x:Cue(Math.round(e.x/Rue),0,n-1)}},l=u(r.shape,2),d=l[0],f=l[1],p=c(t.position,d,f),h=s(p),m=Nue(t.position,h),v=m,g=0;g<o;g++){var y=c(v,d,f),b=Iue(y.y,y.x,n,a);v=Nue({x:y.x*Rue,y:y.y*Rue},{x:b.x,y:b.y})}var x=c(v,d,f),A=r.get(x.y,x.x,n);return{position:v,part:gue[n],score:A}}function Fue(e,t,n,r,a){var i=xue.map((function(e){var t=u(e,2),n=t[0],r=t[1];return[bue[n],bue[r]]})),o=i.map((function(e){return u(e,2)[1]})),s=i.map((function(e){return u(e,1)[0]})),c=t.shape[2],l=o.length,d=new Array(c),f=Eue(e.part,Rue,n);d[e.part.id]={score:e.score,part:gue[e.part.id],position:f};for(var p=l-1;p>=0;--p){var h=o[p],m=s[p];d[h]&&!d[m]&&(d[m]=Oue(p,d[h],m,t,n,a))}for(var v=0;v<l;++v){var g=s[v],y=o[v];d[g]&&!d[y]&&(d[y]=Oue(v,d[g],y,t,n,r))}return d}function Pue(e,t,n,r,a){for(var i=u(a.shape,2),o=i[0],s=i[1],c=!0,l=Math.max(n-1,0),d=Math.min(n+1+1,o),f=l;f<d;++f){for(var p=Math.max(r-1,0),h=Math.min(r+1+1,s),m=p;m<h;++m)if(a.get(f,m,e)>t){c=!1;break}if(!c)break}return c}function Due(e,t,n){var r=t.x,a=t.y;return e.some((function(e){var t,i=null==(t=e.keypoints[n])?void 0:t.position;return!!i&&function(e,t,n,r){var a=n-e,i=r-t;return a*a+i*i}(a,r,i.y,i.x)<=Mue}))}function Lue(e,t){var n=t.reduce((function(t,n,r){var a=n.position,i=n.score;return Due(e,a,r)||(t+=i),t}),0);return n/t.length}function zue(e,t,n,r,a,i){for(var o=[],s=function(e,t){for(var n=u(t.shape,3),r=n[0],a=n[1],i=n[2],o=new Sue(r*a*i,(function(e){return e.score})),s=0;s<r;++s)for(var c=0;c<a;++c)for(var l=0;l<i;++l){var d=t.get(s,c,l);d<e||Pue(l,d,s,c,t)&&o.enqueue({score:d,part:{heatmapY:s,heatmapX:c,id:l}})}return o}(i,t);o.length<a&&!s.empty();){var c=s.dequeue();if(!Due(o,Eue(c.part,Rue,e),c.part.id)){var l=Fue(c,t,e,n,r);l=l.filter((function(e){return e.score>i}));var d=Lue(o,l),f=Aue(l);d>i&&o.push({keypoints:l,box:f,score:Math.round(100*d)/100})}}return o}function Bue(e,t){return Wue.apply(this,arguments)}function Wue(){return Wue=ct(st().mark((function e(t,n){var r,a,i,o,s,u;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Zg((function(){if(!wue.inputs[0].shape)return[];var e=HS.resizeBilinear(t,[wue.inputs[0].shape[2],wue.inputs[0].shape[1]]),n=OA(vb(lg(e,"float32"),127.5),1),r=wue.execute(n,_ue).map((function(e){return Qk(e,[0])}));return r[1]=Jb(r[1]),r})),e.next=3,Promise.all(r.map((function(e){return e.buffer()})));case 3:a=e.sent,i=lc(r);try{for(i.s();!(o=i.n()).done;)Yg(o.value)}catch(c){i.e(c)}finally{i.f()}return e.next=8,zue(a[0],a[1],a[2],a[3],n.body.maxDetected,n.body.minConfidence);case 8:if(s=e.sent,wue.inputs[0].shape){e.next=11;break}return e.abrupt("return",[]);case 11:return u=kue(s,[t.shape[1],t.shape[2]],[wue.inputs[0].shape[2],wue.inputs[0].shape[1]]),e.abrupt("return",u);case 13:case"end":return e.stop()}}),e)}))),Wue.apply(this,arguments)}function jue(e){return Vue.apply(this,arguments)}function Vue(){return(Vue=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wue&&!ane.initial){e.next=6;break}return e.next=3,une(t.body.modelPath);case 3:wue=e.sent,e.next=7;break;case 6:t.debug&&kc("cached model:",wue.modelUrl);case 7:return e.abrupt("return",wue);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Uue=!1;function Hue(e){return Gue.apply(this,arguments)}function Gue(){return(Gue=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Tue&&!ane.initial){e.next=6;break}return e.next=3,une(t.segmentation.modelPath);case 3:Tue=e.sent,e.next=7;break;case 6:t.debug&&kc("cached model:",Tue.modelUrl);case 7:return e.abrupt("return",Tue);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function que(e,t,n){return Kue.apply(this,arguments)}function Kue(){return Kue=ct(st().mark((function e(t,n,r){var a,i,o,s,c,l,d,f,p,h,m,v,g,y,b,x,A,k,w;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Uue){e.next=2;break}return e.abrupt("return",{data:[],canvas:null,alpha:null});case 2:if(Uue=!0,Tue){e.next=6;break}return e.next=6,Hue(r);case 6:return e.next=8,Qte(t,r);case 8:if(o=e.sent,s=(null==(a=o.tensor)?void 0:a.shape[2])||0,c=(null==(i=o.tensor)?void 0:i.shape[1])||0,o.tensor){e.next=13;break}return e.abrupt("return",{data:[],canvas:null,alpha:null});case 13:return(l={}).resize=HS.resizeBilinear(o.tensor,[Tue.inputs[0].shape?Tue.inputs[0].shape[1]:0,Tue.inputs[0].shape?Tue.inputs[0].shape[2]:0],!1),Yg(o.tensor),l.norm=vb(l.resize,wne.tf255),l.res=Tue.execute(l.norm),l.squeeze=Qk(l.res,0),2===l.squeeze.shape[2]?(l.softmax=Gk(l.squeeze),d=fw(l.softmax,2),f=u(d,2),l.bg=f[0],l.fg=f[1],l.expand=iA(l.fg,2),l.pad=iA(l.expand,0),l.crop=HS.cropAndResize(l.pad,[[0,0,.5,.5]],[0],[s,c]),l.data=Qk(l.crop,0)):l.data=HS.resizeBilinear(l.squeeze,[c,s]),e.t0=Array,e.next=23,l.data.data();case 23:if(e.t1=e.sent,p=e.t0.from.call(e.t0,e.t1),!ane.node||ane.Canvas||"undefined"!==typeof ImageData){e.next=29;break}return r.debug&&kc("canvas support missing"),Object.keys(l).forEach((function(e){return Yg(l[e])})),e.abrupt("return",{data:p,canvas:null,alpha:null});case 29:if(h=Yte(s,c),!yy){e.next=33;break}return e.next=33,yy.toPixels(l.data,h);case 33:for(m=h.getContext("2d"),r.segmentation.blur&&r.segmentation.blur>0&&(m.filter="blur(".concat(r.segmentation.blur,"px)")),v=m.getImageData(0,0,s,c),g=Yte(s,c),y=g.getContext("2d"),o.canvas&&y.drawImage(o.canvas,0,0),y.globalCompositeOperation="darken",r.segmentation.blur&&r.segmentation.blur>0&&(y.filter="blur(".concat(r.segmentation.blur,"px)")),y.drawImage(h,0,0),y.globalCompositeOperation="source-over",y.filter="none",b=y.getImageData(0,0,s,c),x=0;x<s*c;x++)b.data[4*x+3]=v.data[4*x+0];if(y.putImageData(b,0,0),A=null,!n||!g){e.next=57;break}return A=Yte(s,c),e.next=52,Qte(n,r);case 52:Yg((k=e.sent).tensor),(w=A.getContext("2d")).drawImage(k.canvas,0,0,A.width,A.height),w.drawImage(g,0,0);case 57:return Object.keys(l).forEach((function(e){return Yg(l[e])})),Uue=!1,e.abrupt("return",{data:p,canvas:g,alpha:h});case 60:case"end":return e.stop()}}),e)}))),Kue.apply(this,arguments)}var Xue=Qe((function e(){Ye(this,e),gc(this,"ssrnetage",null),gc(this,"gear",null),gc(this,"blazeposedetect",null),gc(this,"blazepose",null),gc(this,"centernet",null),gc(this,"efficientpose",null),gc(this,"mobilefacenet",null),gc(this,"emotion",null),gc(this,"facedetect",null),gc(this,"faceiris",null),gc(this,"facemesh",null),gc(this,"faceres",null),gc(this,"ssrnetgender",null),gc(this,"handpose",null),gc(this,"handskeleton",null),gc(this,"handtrack",null),gc(this,"liveness",null),gc(this,"movenet",null),gc(this,"nanodet",null),gc(this,"posenet",null),gc(this,"segmentation",null),gc(this,"antispoof",null)}));function Zue(e){for(var t=0,n=Object.keys(e.models);t<n.length;t++){var r=n[t];e.models[r]=null}}function Yue(e){return Jue.apply(this,arguments)}function Jue(){return(Jue=ct(st().mark((function e(t){var n,r,a,i,o,s,c,l,d,f,p,h,m,v,g,y,b,x,A,k,w,S,I,E,C,N,T,_,R,M,O,F,P,D,L,z,B,W,j,V,U;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ane.initial&&Zue(t),!t.config.hand.enabled){e.next=16;break}if(t.models.handpose||!(null==(r=null==(n=t.config.hand.detector)?void 0:n.modelPath)?void 0:r.includes("handdetect"))){e.next=9;break}return e.next=5,ise(t.config);case 5:F=e.sent,P=u(F,2),t.models.handpose=P[0],t.models.handskeleton=P[1];case 9:if(t.models.handskeleton||!t.config.hand.landmarks||!(null==(i=null==(a=t.config.hand.detector)?void 0:a.modelPath)?void 0:i.includes("handdetect"))){e.next=16;break}return e.next=12,ise(t.config);case 12:D=e.sent,L=u(D,2),t.models.handpose=L[0],t.models.handskeleton=L[1];case 16:t.config.body.enabled&&!t.models.blazepose&&(null==(s=null==(o=t.config.body)?void 0:o.modelPath)?void 0:s.includes("blazepose"))&&(t.models.blazepose=nae(t.config)),t.config.body.enabled&&!t.models.blazeposedetect&&t.config.body.detector&&t.config.body.detector.modelPath&&(t.models.blazeposedetect=eae(t.config)),t.config.body.enabled&&!t.models.efficientpose&&(null==(l=null==(c=t.config.body)?void 0:c.modelPath)?void 0:l.includes("efficientpose"))&&(t.models.efficientpose=Mae(t.config)),t.config.body.enabled&&!t.models.movenet&&(null==(f=null==(d=t.config.body)?void 0:d.modelPath)?void 0:f.includes("movenet"))&&(t.models.movenet=Qse(t.config)),t.config.body.enabled&&!t.models.posenet&&(null==(h=null==(p=t.config.body)?void 0:p.modelPath)?void 0:h.includes("posenet"))&&(t.models.posenet=jue(t.config)),t.config.face.enabled&&!t.models.facedetect&&(t.models.facedetect=_re(t.config)),t.config.face.enabled&&(null==(m=t.config.face.antispoof)?void 0:m.enabled)&&!t.models.antispoof&&(t.models.antispoof=Xne(t.config)),t.config.face.enabled&&(null==(v=t.config.face.liveness)?void 0:v.enabled)&&!t.models.liveness&&(t.models.liveness=Mse(t.config)),t.config.face.enabled&&(null==(g=t.config.face.description)?void 0:g.enabled)&&!t.models.faceres&&(t.models.faceres=Uie(t.config)),t.config.face.enabled&&(null==(y=t.config.face.emotion)?void 0:y.enabled)&&!t.models.emotion&&(t.models.emotion=Gae(t.config)),t.config.face.enabled&&(null==(b=t.config.face.iris)?void 0:b.enabled)&&!(null==(x=t.config.face.attention)?void 0:x.enabled)&&!t.models.faceiris&&(t.models.faceiris=fie(t.config)),t.config.face.enabled&&(null==(A=t.config.face.mesh)?void 0:A.enabled)&&!t.models.facemesh&&(t.models.facemesh=Fie(t.config)),t.config.face.enabled&&(null==(k=t.config.face.gear)?void 0:k.enabled)&&!t.models.gear&&(t.models.gear=yne(t.config)),t.config.face.enabled&&(null==(w=t.config.face.ssrnet)?void 0:w.enabled)&&!t.models.ssrnetage&&(t.models.ssrnetage=_ne(t.config)),t.config.face.enabled&&(null==(S=t.config.face.ssrnet)?void 0:S.enabled)&&!t.models.ssrnetgender&&(t.models.ssrnetgender=Wne(t.config)),t.config.face.enabled&&(null==(I=t.config.face.mobilefacenet)?void 0:I.enabled)&&!t.models.mobilefacenet&&(t.models.mobilefacenet=eie(t.config)),t.config.hand.enabled&&!t.models.handtrack&&(null==(C=null==(E=t.config.hand.detector)?void 0:E.modelPath)?void 0:C.includes("handtrack"))&&(t.models.handtrack=yse(t.config)),t.config.hand.enabled&&t.config.hand.landmarks&&!t.models.handskeleton&&(null==(T=null==(N=t.config.hand.detector)?void 0:N.modelPath)?void 0:T.includes("handtrack"))&&(t.models.handskeleton=xse(t.config)),t.config.object.enabled&&!t.models.centernet&&(null==(R=null==(_=t.config.object)?void 0:_.modelPath)?void 0:R.includes("centernet"))&&(t.models.centernet=bae(t.config)),t.config.object.enabled&&!t.models.nanodet&&(null==(O=null==(M=t.config.object)?void 0:M.modelPath)?void 0:O.includes("nanodet"))&&(t.models.nanodet=due(t.config)),t.config.segmentation.enabled&&!t.models.segmentation&&(t.models.segmentation=Hue(t.config)),z=!1,B=!1,e.prev=39,j=dc(Object.keys(t.models));case 41:return e.next=43,j.next();case 43:if(!(z=!(V=e.sent).done)){e.next=52;break}if(U=V.value,!t.models[U]||"undefined"===typeof t.models[U]){e.next=49;break}return e.next=48,t.models[U];case 48:t.models[U]=e.sent;case 49:z=!1,e.next=41;break;case 52:e.next=58;break;case 54:e.prev=54,e.t0=e.catch(39),B=!0,W=e.t0;case 58:if(e.prev=58,e.prev=59,!z||null==j.return){e.next=63;break}return e.next=63,j.return();case 63:if(e.prev=63,!B){e.next=66;break}throw W;case 66:return e.finish(63);case 67:return e.finish(58);case 68:case"end":return e.stop()}}),e,null,[[39,54,58,68],[59,,63,67]])})))).apply(this,arguments)}function Que(e){return $ue.apply(this,arguments)}function $ue(){return($ue=ct(st().mark((function e(t){var n,r,a,i,o,s,u,c,l,d,f,p,h,m,v;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=["const","placeholder","noop","pad","squeeze","add","sub","mul","div"],r=0,a=Object.keys(t.models);case 2:if(!(r<a.length)){e.next=16;break}if(i=a[r],o=t.models[i]){e.next=7;break}return e.abrupt("continue",13);case 7:if(s=[],(u=null==o?void 0:o.executor)&&u.graph.nodes)for(c=0,l=Object.values(u.graph.nodes);c<l.length;c++)d=l[c],f=d.op.toLowerCase(),s.includes(f)||s.push(f);else!u&&t.config.debug&&kc("model signature not determined:",i);for(p=[],h=0,m=s;h<m.length;h++)v=m[h],n.includes(v)||t.env.kernels.includes(v)||t.env.kernels.includes(v.replace("_",""))||t.env.kernels.includes(v.replace("native",""))||t.env.kernels.includes(v.replace("v2",""))||p.push(v);t.config.debug&&p.length>0&&kc("model validation failed:",i,p);case 13:r++,e.next=2;break;case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ece={name:"humangl",priority:999,canvas:null,gl:null,extensions:[],webGLattr:{alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!1,desynchronized:!0}};function tce(){var e=ece.gl;e&&(ece.extensions=e.getSupportedExtensions())}function nce(e){return rce.apply(this,arguments)}function rce(){return rce=ct(st().mark((function e(t){var n,r,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("humangl"===t.config.backend){e.next=2;break}return e.abrupt("return");case 2:if(!(ece.name in qg().registry)||ece.gl&&ece.gl.getParameter(ece.gl.VERSION)||(kc("error: humangl backend invalid context"),Zue(t)),ry(ece.name)){e.next=71;break}return e.prev=4,e.next=7,Yte(100,100);case 7:ece.canvas=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),kc("error: cannot create canvas:",e.t0),e.abrupt("return");case 14:if(e.prev=14,ece.gl=null==(n=ece.canvas)?void 0:n.getContext("webgl2",ece.webGLattr),ece.gl.getParameter(ece.gl.VERSION).includes("2.0")){e.next=21;break}return kc("override: using fallback webgl backend as webgl 2.0 is not detected"),t.config.backend="webgl",e.abrupt("return");case 21:ece.canvas&&(ece.canvas.addEventListener("webglcontextlost",function(){var e=ct(st().mark((function e(n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw kc("error: humangl:",n.type),kc("possible browser memory leak using webgl or conflict with multiple backend registrations"),t.emit("error"),new Error("backend error: webgl context lost");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ece.canvas.addEventListener("webglcontextrestored",(function(e){kc("error: humangl context restored:",e)})),ece.canvas.addEventListener("webglcontextcreationerror",(function(e){kc("error: humangl context create:",e)}))),e.next=28;break;case 24:return e.prev=24,e.t1=e.catch(14),kc("error: cannot get WebGL context:",e.t1),e.abrupt("return");case 28:e.prev=28,hq(2,ece.gl),e.next=36;break;case 32:return e.prev=32,e.t2=e.catch(28),kc("error: cannot set WebGL context:",e.t2),e.abrupt("return");case 36:e.prev=36,r=new CX(ece.gl),iy(ece.name,(function(){return new GZ(r)}),ece.priority),e.next=45;break;case 41:return e.prev=41,e.t3=e.catch(36),kc("error: cannot register WebGL backend:",e.t3),e.abrupt("return");case 45:e.prev=45,Ch("webgl").forEach((function(e){Nh(Ze(Ze({},e),{},{backendName:ece.name}))})),e.next=54;break;case 50:return e.prev=50,e.t4=e.catch(45),kc("error: cannot update WebGL backend registration:",e.t4),e.abrupt("return");case 54:if(!(a=oy().getGPGPUContext?oy().getGPGPUContext().gl:null)){e.next=59;break}kc("humangl webgl version:".concat(a.getParameter(a.VERSION)," renderer:").concat(a.getParameter(a.RENDERER))),e.next=61;break;case 59:return kc("error: no current gl context:",a,ece.gl),e.abrupt("return");case 61:e.prev=61,sd.set("WEBGL_VERSION",2),e.next=69;break;case 65:return e.prev=65,e.t5=e.catch(61),kc("error: cannot set WebGL backend flags:",e.t5),e.abrupt("return");case 69:tce(),kc("backend registered:",ece.name);case 71:case"end":return e.stop()}}),e,null,[[4,10],[14,24],[28,32],[36,41],[45,50],[61,65]])}))),rce.apply(this,arguments)}function ace(){ane.kernels.includes("mod")||(Nh({kernelName:"Mod",backendName:ty(),kernelFunc:function(e){return Zg((function(){return OA(e.inputs.a,gb(vb(e.inputs.a,e.inputs.b),e.inputs.b))}))}}),ane.kernels.push("mod"));ane.kernels.includes("floormod")||(Nh({kernelName:"FloorMod",backendName:ty(),kernelFunc:function(e){return Zg((function(){return mb(e.inputs.a/e.inputs.b)*e.inputs.b+$A(e.inputs.a,e.inputs.b)}))}}),ane.kernels.push("floormod"))}function ice(e){return oce.apply(this,arguments)}function oce(){return oce=ct(st().mark((function e(t){var n,r,a,i,o,s,u,c=arguments;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]&&c[1],t.state="backend",!(n||ane.initial||t.config.backend&&t.config.backend.length>0&&ty()!==t.config.backend)){e.next=88;break}if(r=Sc(),!(t.config.backend&&t.config.backend.length>0)){e.next=68;break}if("undefined"===typeof window&&"undefined"!==typeof WorkerGlobalScope&&t.config.debug&&t.config.debug&&kc("running inside web worker"),ane.browser&&"tensorflow"===t.config.backend&&(t.config.debug&&kc("override: backend set to tensorflow while running in browser"),t.config.backend="humangl"),!ane.node||"webgl"!==t.config.backend&&"humangl"!==t.config.backend||(t.config.debug&&kc("override: backend set to ".concat(t.config.backend," while running in nodejs")),t.config.backend="tensorflow"),!ane.browser||"webgpu"!==t.config.backend){e.next=32;break}if("undefined"!==typeof navigator&&"undefined"!==typeof navigator.gpu){e.next=14;break}kc("override: backend set to webgpu but browser does not support webgpu"),t.config.backend="humangl",e.next=32;break;case 14:return e.next=16,navigator.gpu.requestAdapter();case 16:if(a=e.sent,t.config.debug&&kc("enumerated webgpu adapter:",a),a){e.next=23;break}kc("override: backend set to webgpu but browser reports no available gpu"),t.config.backend="humangl",e.next=32;break;case 23:if(!("requestAdapterInfo"in a)){e.next=29;break}return e.next=26,a.requestAdapterInfo();case 26:e.t0=e.sent,e.next=30;break;case 29:e.t0=void 0;case 30:kc("webgpu adapter info:",e.t0);case 32:if("humangl"!==t.config.backend){e.next=35;break}return e.next=35,nce(t);case 35:if(i=Object.keys(qg().registryFactory),t.config.debug&&kc("available backends:",i),i.includes(t.config.backend)||(kc("error: backend ".concat(t.config.backend," not found in registry")),t.config.backend=ane.node?"tensorflow":"webgl",t.config.debug&&kc("override: setting backend ".concat(t.config.backend))),t.config.debug&&kc("setting backend:",t.config.backend),"wasm"!==t.config.backend){e.next=56;break}try{id().set("CANVAS2D_WILL_READ_FREQUENTLY",!0)}catch(A_e){}if(t.config.debug&&kc("wasm path:",t.config.wasmPath),"undefined"===typeof(null==Nc?void 0:Nc.setWasmPaths)){e.next=47;break}return e.next=45,Rte(t.config.wasmPath,t.config.wasmPlatformFetch);case 45:e.next=48;break;case 47:throw new Error("backend error: attempting to use wasm backend but wasm path is not set");case 48:return e.next=50,id().getAsync("WASM_HAS_SIMD_SUPPORT");case 50:return o=e.sent,e.next=53,id().getAsync("WASM_HAS_MULTITHREAD_SUPPORT");case 53:s=e.sent,t.config.debug&&kc("wasm execution: ".concat(o?"SIMD":"no SIMD"," ").concat(s?"multithreaded":"singlethreaded")),t.config.debug&&!o&&kc("warning: wasm simd support is not enabled");case 56:return e.prev=56,e.next=59,$g(t.config.backend);case 59:return e.next=61,ey();case 61:Sne(),e.next=68;break;case 64:return e.prev=64,e.t1=e.catch(56),kc("error: cannot set backend:",t.config.backend,e.t1),e.abrupt("return",!1);case 68:if("humangl"!==ty()){e.next=79;break}if(sd.set("CHECK_COMPUTATION_FOR_ERRORS",!1),sd.set("WEBGL_CPU_FORWARD",!0),sd.set("WEBGL_USE_SHAPES_UNIFORMS",!0),sd.set("CPU_HANDOFF_SIZE_THRESHOLD",256),"undefined"!==typeof t.config.deallocate&&t.config.deallocate&&(kc("changing webgl: WEBGL_DELETE_TEXTURE_THRESHOLD:",!0),sd.set("WEBGL_DELETE_TEXTURE_THRESHOLD",0)),!oy().getGPGPUContext){e.next=79;break}return e.next=77,oy().getGPGPUContext().gl;case 77:u=e.sent,t.config.debug&&kc("gl version:".concat(u.getParameter(u.VERSION)," renderer:").concat(u.getParameter(u.RENDERER)));case 79:return ty(),jg(),e.next=83,ey();case 83:return t.performance.initBackend=Math.trunc(Sc()-r),t.config.backend=ty(),e.next=87,ane.updateBackend();case 87:ace();case 88:return e.abrupt("return",!0);case 89:case"end":return e.stop()}}),e,null,[[56,64]])}))),oce.apply(this,arguments)}function sce(e,t){var n,r=lc(e);try{var a=function(){var e=n.value;Nh({kernelName:e,backendName:t.backend,kernelFunc:function(){t.debug&&kc("kernelFunc",e,t.backend)}})};for(r.s();!(n=r.n()).done;)a()}catch(i){r.e(i)}finally{r.f()}ane.kernels=Ch(ty()).map((function(e){return e.kernelName.toLowerCase()}))}vc({},{all:function(){return Bce},body:function(){return Ece},canvas:function(){return Lce},face:function(){return Sce},gesture:function(){return Mce},hand:function(){return Nce},object:function(){return _ce},options:function(){return gce},person:function(){return Pce}});var uce=function(e){if(e)if(e.getContext){var t=e.getContext("2d");if(t)return t;kc("draw error: cannot get canvas context")}else kc("draw error: canvas context not defined");else kc("draw error: invalid canvas");return null},cce=function(e){return Math.round(180*e/Math.PI)},lce=function(e,t){if(!t.useDepth||"undefined"===typeof e)return t.color;var n=Uint8ClampedArray.from([127+2*e,127-2*e,255]);return"rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", ").concat(t.alpha,")")};function dce(e,t,n,r,a){e.fillStyle=lce(r,a),e.beginPath(),e.arc(t,n,a.pointSize,0,2*Math.PI),e.fill()}function fce(e,t,n,r,a,i){if(e.beginPath(),e.lineWidth=i.lineWidth,i.useCurves){var o=(t+t+r)/2,s=(n+n+a)/2;e.ellipse(o,s,r/2,a/2,0,0,2*Math.PI)}else e.moveTo(t+i.roundRect,n),e.lineTo(t+r-i.roundRect,n),e.quadraticCurveTo(t+r,n,t+r,n+i.roundRect),e.lineTo(t+r,n+a-i.roundRect),e.quadraticCurveTo(t+r,n+a,t+r-i.roundRect,n+a),e.lineTo(t+i.roundRect,n+a),e.quadraticCurveTo(t,n+a,t,n+a-i.roundRect),e.lineTo(t,n+i.roundRect),e.quadraticCurveTo(t,n,t+i.roundRect,n),e.closePath();e.stroke()}function pce(e,t,n){if(!(t.length<2)){e.beginPath(),e.moveTo(t[0][0],t[0][1]);var r,a=lc(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;e.strokeStyle=lce(i[2],n),e.lineTo(Math.trunc(i[0]),Math.trunc(i[1]))}}catch(o){a.e(o)}finally{a.f()}e.stroke(),n.fillPolygons&&(e.closePath(),e.fill())}}function hce(e,t,n){if(!(t.length<2))if(e.lineWidth=n.lineWidth,!n.useCurves||t.length<=2)pce(e,t,n);else{e.moveTo(t[0][0],t[0][1]);for(var r=0;r<t.length-2;r++){var a=(t[r][0]+t[r+1][0])/2,i=(t[r][1]+t[r+1][1])/2;e.quadraticCurveTo(t[r][0],t[r][1],a,i)}e.quadraticCurveTo(t[t.length-2][0],t[t.length-2][1],t[t.length-1][0],t[t.length-1][1]),e.stroke(),n.fillPolygons&&(e.closePath(),e.fill())}}function mce(e,t,n){var r,a,i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;e.beginPath(),e.moveTo(t[0],t[1]),e.lineTo(n[0],n[1]),r=Math.atan2(n[1]-t[1],n[0]-t[0]),a=o*Math.cos(r)+n[0],i=o*Math.sin(r)+n[1],e.moveTo(a,i),r+=1/3*(2*Math.PI),a=o*Math.cos(r)+n[0],i=o*Math.sin(r)+n[1],e.lineTo(a,i),r+=1/3*(2*Math.PI),a=o*Math.cos(r)+n[0],i=o*Math.sin(r)+n[1],e.lineTo(a,i),e.closePath(),e.stroke(),e.fill()}var vce,gce={color:"rgba(173, 216, 230, 0.6)",labelColor:"rgba(173, 216, 230, 1)",shadowColor:"black",alpha:.5,font:'small-caps 16px "Segoe UI"',lineHeight:18,lineWidth:4,pointSize:2,roundRect:8,drawPoints:!1,drawLabels:!0,drawBoxes:!0,drawAttention:!0,drawGestures:!0,drawPolygons:!0,drawGaze:!0,fillPolygons:!1,useDepth:!0,useCurves:!1};function yce(e,t){if(vce.drawLabels){var n=[];if(n.push("face: ".concat(Math.trunc(100*e.score),"%")),e.genderScore&&n.push("".concat(e.gender||""," ").concat(Math.trunc(100*e.genderScore),"%")),e.age&&n.push("age: ".concat(e.age||"")),e.iris&&n.push("distance: ".concat(e.iris)),e.real&&n.push("real: ".concat(Math.trunc(100*e.real),"%")),e.live&&n.push("live: ".concat(Math.trunc(100*e.live),"%")),e.emotion&&e.emotion.length>0){var r=e.emotion.map((function(e){return"".concat(Math.trunc(100*e.score),"% ").concat(e.emotion)}));r.length>3&&(r.length=3),n.push(r.join(" "))}e.rotation&&e.rotation.angle&&e.rotation.gaze&&(e.rotation.angle.roll&&n.push("roll: ".concat(cce(e.rotation.angle.roll),"\xb0 yaw:").concat(cce(e.rotation.angle.yaw),"\xb0 pitch:").concat(cce(e.rotation.angle.pitch),"\xb0")),e.rotation.gaze.bearing&&n.push("gaze: ".concat(cce(e.rotation.gaze.bearing),"\xb0"))),0===n.length&&n.push("face"),t.fillStyle=vce.color;for(var a=n.length-1;a>=0;a--){var i=Math.max(e.box[0],0),o=a*vce.lineHeight+e.box[1];vce.shadowColor&&""!==vce.shadowColor&&(t.fillStyle=vce.shadowColor,t.fillText(n[a],i+5,o+16)),t.fillStyle=vce.labelColor,t.fillText(n[a],i+4,o+15)}}}function bce(e,t){var n;if(vce.drawGaze&&(null==(n=e.rotation)?void 0:n.angle)&&"undefined"!==typeof Path2D){t.strokeStyle="pink";var r=e.box[0]+e.box[2]/2-e.box[3]*cce(e.rotation.angle.yaw)/90,a=e.box[1]+e.box[3]/2+e.box[2]*cce(e.rotation.angle.pitch)/90,i=new Path2D("\n      M ".concat(e.box[0]+e.box[2]/2," ").concat(e.box[1],"\n      C\n        ").concat(r," ").concat(e.box[1],",\n        ").concat(r," ").concat(e.box[1]+e.box[3],",\n        ").concat(e.box[0]+e.box[2]/2," ").concat(e.box[1]+e.box[3],"\n    ")),o=new Path2D("\n      M ".concat(e.box[0]," ").concat(e.box[1]+e.box[3]/2,"\n      C \n        ").concat(e.box[0]," ").concat(a,",\n        ").concat(e.box[0]+e.box[2]," ").concat(a,",\n        ").concat(e.box[0]+e.box[2]," ").concat(e.box[1]+e.box[3]/2,"\n    "));t.stroke(o),t.stroke(i)}}function xce(e,t){var n,r,a,i;if(vce.drawGaze&&(null==(r=null==(n=e.rotation)?void 0:n.gaze)?void 0:r.strength)&&(null==(i=null==(a=e.rotation)?void 0:a.gaze)?void 0:i.bearing)&&e.annotations.leftEyeIris&&e.annotations.rightEyeIris&&e.annotations.leftEyeIris[0]&&e.annotations.rightEyeIris[0]){t.strokeStyle="pink",t.fillStyle="pink";var o=[e.annotations.leftEyeIris[0][0]+Math.sin(e.rotation.gaze.bearing)*e.rotation.gaze.strength*e.box[3],e.annotations.leftEyeIris[0][1]+Math.cos(e.rotation.gaze.bearing)*e.rotation.gaze.strength*e.box[2]];mce(t,[e.annotations.leftEyeIris[0][0],e.annotations.leftEyeIris[0][1]],[o[0],o[1]],4);var s=[e.annotations.rightEyeIris[0][0]+Math.sin(e.rotation.gaze.bearing)*e.rotation.gaze.strength*e.box[3],e.annotations.rightEyeIris[0][1]+Math.cos(e.rotation.gaze.bearing)*e.rotation.gaze.strength*e.box[2]];mce(t,[e.annotations.rightEyeIris[0][0],e.annotations.rightEyeIris[0][1]],[s[0],s[1]],4)}}function Ace(e,t){if(vce.drawPolygons&&e.mesh.length>=468){t.lineWidth=1;for(var n=0;n<rre.length/3;n++){pce(t,[rre[3*n+0],rre[3*n+1],rre[3*n+2]].map((function(t){return e.mesh[t]})),vce)}!function(e,t){if(e.annotations&&e.annotations.leftEyeIris&&e.annotations.leftEyeIris[0]){t.strokeStyle=vce.useDepth?"rgba(255, 200, 255, 0.3)":vce.color,t.beginPath();var n=Math.abs(e.annotations.leftEyeIris[3][0]-e.annotations.leftEyeIris[1][0])/2,r=Math.abs(e.annotations.leftEyeIris[4][1]-e.annotations.leftEyeIris[2][1])/2;t.ellipse(e.annotations.leftEyeIris[0][0],e.annotations.leftEyeIris[0][1],n,r,0,0,2*Math.PI),t.stroke(),vce.fillPolygons&&(t.fillStyle=vce.useDepth?"rgba(255, 255, 200, 0.3)":vce.color,t.fill())}if(e.annotations&&e.annotations.rightEyeIris&&e.annotations.rightEyeIris[0]){t.strokeStyle=vce.useDepth?"rgba(255, 200, 255, 0.3)":vce.color,t.beginPath();var a=Math.abs(e.annotations.rightEyeIris[3][0]-e.annotations.rightEyeIris[1][0])/2,i=Math.abs(e.annotations.rightEyeIris[4][1]-e.annotations.rightEyeIris[2][1])/2;t.ellipse(e.annotations.rightEyeIris[0][0],e.annotations.rightEyeIris[0][1],a,i,0,0,2*Math.PI),t.stroke(),vce.fillPolygons&&(t.fillStyle=vce.useDepth?"rgba(255, 255, 200, 0.3)":vce.color,t.fill())}}(e,t)}}function kce(e,t){if(vce.drawPoints&&e.mesh.length>=468)for(var n=0;n<e.mesh.length;n++)dce(t,e.mesh[n][0],e.mesh[n][1],e.mesh[n][2],vce),vce.drawAttention&&(Sie.includes(n)&&dce(t,e.mesh[n][0],e.mesh[n][1],e.mesh[n][2]+127,vce),Iie.includes(n)&&dce(t,e.mesh[n][0],e.mesh[n][1],e.mesh[n][2]-127,vce),Eie.includes(n)&&dce(t,e.mesh[n][0],e.mesh[n][1],e.mesh[n][2]-127,vce))}function wce(e,t){vce.drawBoxes&&fce(t,e.box[0],e.box[1],e.box[2],e.box[3],vce)}function Sce(e,t,n){return Ice.apply(this,arguments)}function Ice(){return(Ice=ct(st().mark((function e(t,n,r){var a,i,o,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vce=Ec(gce,r),n&&t){e.next=3;break}return e.abrupt("return");case 3:if(a=uce(t)){e.next=6;break}return e.abrupt("return");case 6:a.font=vce.font,a.strokeStyle=vce.color,a.fillStyle=vce.color,i=lc(n);try{for(i.s();!(o=i.n()).done;)wce(s=o.value,a),yce(s,a),s.mesh&&s.mesh.length>0&&(kce(s,a),Ace(s,a),bce(s,a),xce(s,a))}catch(u){i.e(u)}finally{i.f()}case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ece(e,t,n){return Cce.apply(this,arguments)}function Cce(){return Cce=ct(st().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,p,h,m,v,g;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Ec(gce,r),n&&t){e.next=3;break}return e.abrupt("return");case 3:if(o=uce(t)){e.next=6;break}return e.abrupt("return");case 6:o.lineJoin="round",s=0;case 8:if(!(s<n.length)){e.next=49;break}if(o.strokeStyle=i.color,o.fillStyle=i.color,o.lineWidth=i.lineWidth,o.font=i.font,i.drawBoxes&&n[s].box&&4===(null==(a=n[s].box)?void 0:a.length)&&(fce(o,n[s].box[0],n[s].box[1],n[s].box[2],n[s].box[3],i),i.drawLabels&&(i.shadowColor&&""!==i.shadowColor&&(o.fillStyle=i.shadowColor,o.fillText("body ".concat(100*n[s].score,"%"),n[s].box[0]+3,1+n[s].box[1]+i.lineHeight,n[s].box[2])),o.fillStyle=i.labelColor,o.fillText("body ".concat(100*n[s].score,"%"),n[s].box[0]+2,0+n[s].box[1]+i.lineHeight,n[s].box[2]))),!i.drawPoints||!n[s].keypoints){e.next=24;break}u=0;case 16:if(!(u<n[s].keypoints.length)){e.next=24;break}if(n[s].keypoints[u].score&&0!==n[s].keypoints[u].score){e.next=19;break}return e.abrupt("continue",21);case 19:o.fillStyle=lce(n[s].keypoints[u].position[2],i),dce(o,n[s].keypoints[u].position[0],n[s].keypoints[u].position[1],0,i);case 21:u++,e.next=16;break;case 24:if(!i.drawLabels||!n[s].keypoints){e.next=45;break}o.font=i.font,c=lc(n[s].keypoints),e.prev=27,c.s();case 29:if((l=c.n()).done){e.next=37;break}if((d=l.value).score&&0!==d.score){e.next=33;break}return e.abrupt("continue",35);case 33:o.fillStyle=lce(d.position[2],i),o.fillText("".concat(d.part," ").concat(Math.trunc(100*d.score),"%"),d.position[0]+4,d.position[1]+4);case 35:e.next=29;break;case 37:e.next=42;break;case 39:e.prev=39,e.t0=e.catch(27),c.e(e.t0);case 42:return e.prev=42,c.f(),e.finish(42);case 45:if(i.drawPolygons&&n[s].keypoints&&n[s].annotations)for(f=0,p=Object.values(n[s].annotations);f<p.length;f++){h=p[f],m=lc(h);try{for(m.s();!(v=m.n()).done;)g=v.value,hce(o,g,i)}catch(y){m.e(y)}finally{m.f()}}case 46:s++,e.next=8;break;case 49:case"end":return e.stop()}}),e,null,[[27,39,42,45]])}))),Cce.apply(this,arguments)}function Nce(e,t,n){return Tce.apply(this,arguments)}function Tce(){return Tce=ct(st().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,p;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Ec(gce,r),n&&t){e.next=3;break}return e.abrupt("return");case 3:if(i=uce(t)){e.next=6;break}return e.abrupt("return");case 6:i.lineJoin="round",i.font=a.font,o=lc(n);try{for(o.s();!(s=o.n()).done;){if(u=s.value,a.drawBoxes&&(i.strokeStyle=a.color,i.fillStyle=a.color,fce(i,u.box[0],u.box[1],u.box[2],u.box[3],a),a.drawLabels&&(a.shadowColor&&""!==a.shadowColor&&(i.fillStyle=a.shadowColor,i.fillText("hand:".concat(Math.trunc(100*u.score),"%"),u.box[0]+3,1+u.box[1]+a.lineHeight,u.box[2])),i.fillStyle=a.labelColor,i.fillText("hand:".concat(Math.trunc(100*u.score),"%"),u.box[0]+2,0+u.box[1]+a.lineHeight,u.box[2])),i.stroke()),a.drawPoints&&u.keypoints&&u.keypoints.length>0){c=lc(u.keypoints);try{for(c.s();!(l=c.n()).done;)d=l.value,i.fillStyle=lce(d[2],a),dce(i,d[0],d[1],0,a)}catch(h){c.e(h)}finally{c.f()}}a.drawLabels&&u.annotations&&(f=function(e,t){if(e&&0!==e.length&&e[0]){var n=e[e.length-1][2]||-256;i.fillStyle=lce(n,a),i.fillText(t,e[e.length-1][0]+4,e[e.length-1][1]+4)}},i.font=a.font,f(u.annotations.index,"index"),f(u.annotations.middle,"middle"),f(u.annotations.ring,"ring"),f(u.annotations.pinky,"pinky"),f(u.annotations.thumb,"thumb"),f(u.annotations.palm,"palm")),a.drawPolygons&&u.annotations&&(p=function(e){if(e&&0!==e.length&&e[0])for(var t=0;t<e.length;t++){i.beginPath();var n=e[t][2]||0;i.strokeStyle=lce(t*n,a),i.moveTo(e[t>0?t-1:0][0],e[t>0?t-1:0][1]),i.lineTo(e[t][0],e[t][1]),i.stroke()}},i.lineWidth=a.lineWidth,p(u.annotations.index),p(u.annotations.middle),p(u.annotations.ring),p(u.annotations.pinky),p(u.annotations.thumb))}}catch(h){o.e(h)}finally{o.f()}case 10:case"end":return e.stop()}}),e)}))),Tce.apply(this,arguments)}function _ce(e,t,n){return Rce.apply(this,arguments)}function Rce(){return Rce=ct(st().mark((function e(t,n,r){var a,i,o,s,u,c;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Ec(gce,r),n&&t){e.next=3;break}return e.abrupt("return");case 3:if(i=uce(t)){e.next=6;break}return e.abrupt("return");case 6:i.lineJoin="round",i.font=a.font,o=lc(n);try{for(o.s();!(s=o.n()).done;)u=s.value,a.drawBoxes&&(i.strokeStyle=a.color,i.fillStyle=a.color,fce(i,u.box[0],u.box[1],u.box[2],u.box[3],a),a.drawLabels&&(c="".concat(u.label," ").concat(Math.round(100*u.score),"%"),a.shadowColor&&""!==a.shadowColor&&(i.fillStyle=a.shadowColor,i.fillText(c,u.box[0]+3,1+u.box[1]+a.lineHeight,u.box[2])),i.fillStyle=a.labelColor,i.fillText(c,u.box[0]+2,0+u.box[1]+a.lineHeight,u.box[2])),i.stroke())}catch(l){o.e(l)}finally{o.f()}case 10:case"end":return e.stop()}}),e)}))),Rce.apply(this,arguments)}function Mce(e,t,n){return Oce.apply(this,arguments)}function Oce(){return Oce=ct(st().mark((function e(t,n,r){var a,i,o,s,c,l,d,f,p,h;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Ec(gce,r),n&&t){e.next=3;break}return e.abrupt("return");case 3:if(!a.drawGestures){e.next=11;break}if(i=uce(t)){e.next=7;break}return e.abrupt("return");case 7:for(i.font=a.font,i.fillStyle=a.color,o=1,s=0;s<n.length;s++)[],[],d=Object.entries(n[s]),f=u(d,2),c=f[0],(l=f[1]).length>1&&l[1].length>0&&(p=c[1]>0?"#".concat(c[1]):"",h="".concat(c[0]," ").concat(p,": ").concat(l[1]),a.shadowColor&&""!==a.shadowColor&&(i.fillStyle=a.shadowColor,i.fillText(h,8,2+o*a.lineHeight)),i.fillStyle=a.labelColor,i.fillText(h,6,0+o*a.lineHeight),o+=1);case 11:case"end":return e.stop()}}),e)}))),Oce.apply(this,arguments)}var Fce=0;function Pce(e,t,n){return Dce.apply(this,arguments)}function Dce(){return Dce=ct(st().mark((function e(t,n,r){var a,i,o,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Ec(gce,r),n&&t){e.next=3;break}return e.abrupt("return");case 3:if(i=uce(t)){e.next=6;break}return e.abrupt("return");case 6:for(i.lineJoin="round",i.font=a.font,o=0;o<n.length;o++)a.drawBoxes&&(i.strokeStyle=a.color,i.fillStyle=a.color,fce(i,n[o].box[0],n[o].box[1],n[o].box[2],n[o].box[3],a),a.drawLabels&&(s="person #".concat(o),a.shadowColor&&""!==a.shadowColor&&(i.fillStyle=a.shadowColor,i.fillText(s,n[o].box[0]+3,1+n[o].box[1]+a.lineHeight,n[o].box[2])),i.fillStyle=a.labelColor,i.fillText(s,n[o].box[0]+2,0+n[o].box[1]+a.lineHeight,n[o].box[2])),i.stroke());case 9:case"end":return e.stop()}}),e)}))),Dce.apply(this,arguments)}function Lce(e,t){return zce.apply(this,arguments)}function zce(){return(zce=ct(st().mark((function e(t,n){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return");case 2:if(r=uce(n)){e.next=5;break}return e.abrupt("return");case 5:r.drawImage(t,0,0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bce(e,t,n){return Wce.apply(this,arguments)}function Wce(){return(Wce=ct(st().mark((function e(t,n,r){var a,i,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.performance&&n&&t){e.next=2;break}return e.abrupt("return",null);case 2:return a=Sc(),i=Ec(gce,r),o=Promise.all([Sce(t,n.face,i),Ece(t,n.body,i),Nce(t,n.hand,i),_ce(t,n.object,i),Mce(t,n.gesture,i)]),Fce=ane.perfadd?Fce+Math.round(Sc()-a):Math.round(Sc()-a),n.performance.draw=Fce,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jce=.1,Vce=.5;function Uce(e,t,n){for(var r=!1,a=n.length-1,i=0;i<n.length;a=i++)n[i].y>t!==n[a].y>t&&e<(n[a].x-n[i].x)*(t-n[i].y)/(n[a].y-n[i].y)+n[i].x&&(r=!r);return r}function Hce(e){return Gce.apply(this,arguments)}function Gce(){return Gce=ct(st().mark((function e(t){var n,r,a,i,o,s,u,c,l,d;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.tensor){e.next=2;break}return e.abrupt("return",t.tensor);case 2:if(t.mesh&&!(t.mesh.length<100)){e.next=4;break}return e.abrupt("return",t.tensor);case 4:return n=t.tensor.shape[2]||0,r=t.tensor.shape[1]||0,e.next=8,t.tensor.buffer();case 8:a=e.sent,i=[],o=lc(Qne.silhouette);try{for(o.s();!(s=o.n()).done;)u=s.value,i.push({x:(t.mesh[u][0]-t.box[0])/t.box[2],y:(t.mesh[u][1]-t.box[1])/t.box[3]})}catch(f){o.e(f)}finally{o.f()}for(i=i.map((function(e){return{x:e.x>.5?e.x+jce:e.x-jce,y:e.y>.5?e.y+jce:e.y-jce}})),c=0;c<n;c++)for(l=0;l<r;l++)Uce(c/n,l/n,i)||(a.set(Vce*a.get(0,l,c,0),0,l,c,0),a.set(Vce*a.get(0,l,c,1),0,l,c,1),a.set(Vce*a.get(0,l,c,2),0,l,c,2));return d=a.toTensor(),Yg(a),e.abrupt("return",d);case 17:case"end":return e.stop()}}),e)}))),Gce.apply(this,arguments)}var qce=function(e,t){var n=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return e[0]/=t,e[1]/=t,e[2]/=t,e},r=function(e,t){return[e[0]-t[0],e[1]-t[1],e[2]-t[2]]},a=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},i=e.meshRaw;if(!i||i.length<300)return{angle:{pitch:0,yaw:0,roll:0},matrix:[1,0,0,0,1,0,0,0,1],gaze:{bearing:0,strength:0}};var o=Math.max(e.boxRaw[2]*t[0],e.boxRaw[3]*t[1])/1.5,s=[i[10],i[152],i[234],i[454]].map((function(e){return[e[0]*t[0]/o,e[1]*t[1]/o,e[2]]})),c=n(r(s[1],s[0])),l=n(r(s[3],s[2])),d=n(a(l,c)),f=[(l=a(c,d))[0],l[1],l[2],c[0],c[1],c[2],d[0],d[1],d[2]],p=function(e){var t,n,r,a=u(e,9),i=a[0],o=(a[1],a[2],a[3]),s=a[4],c=a[5],l=a[6],d=a[7],f=a[8];return o<1?o>-1?(r=Math.asin(o),n=Math.atan2(-l,i),t=Math.atan2(-c,s)):(r=-Math.PI/2,n=-Math.atan2(d,f),t=0):(r=Math.PI/2,n=Math.atan2(d,f),t=0),isNaN(t)&&(t=0),isNaN(n)&&(n=0),isNaN(r)&&(r=0),{pitch:2*-t,yaw:2*-n,roll:2*-r}}(f),h=478===i.length?function(e){if(!e.annotations.rightEyeIris||!e.annotations.leftEyeIris)return{bearing:0,strength:0};var t,n,r=[0,-.1],a=(e.mesh[33][2]||0)>(e.mesh[263][2]||0),i=a?e.mesh[473]:e.mesh[468],o=a?[(e.mesh[133][0]+e.mesh[33][0])/2,(e.mesh[133][1]+e.mesh[33][1])/2]:[(e.mesh[263][0]+e.mesh[362][0])/2,(e.mesh[263][1]+e.mesh[362][1])/2],s=a?[e.mesh[133][0]-e.mesh[33][0],e.mesh[23][1]-e.mesh[27][1]]:[e.mesh[263][0]-e.mesh[362][0],e.mesh[253][1]-e.mesh[257][1]],u=[(o[0]-i[0])/s[0]-r[0],1*(i[1]-o[1])/s[1]-r[1]],c=Math.sqrt(u[0]*u[0]+u[1]*u[1]);return c=Math.min(c,e.boxRaw[2]/2,e.boxRaw[3]/2),{bearing:(t=[0,0],n=u,(Math.atan2(t[1]-n[1],t[0]-n[0])+Math.PI/2)%Math.PI),strength:c}}(e):{bearing:0,strength:0};return{angle:p,matrix:f,gaze:h}},Kce=function(){var e=ct(st().mark((function e(t,n){var r,a,i,o,s,c,l,d,f,p,h,m,v,g,y,b,x,A,k,w,S,I,E,C,N,T,_,R,M,O,F,P,D,L,z,B,W,j,V,U,H;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E=Sc(),P=[],t.state="run:face",e.next=5,Mie(n,t.config);case 5:if(D=e.sent,t.performance.face=ane.perfadd?(t.performance.face||0)+Math.trunc(Sc()-E):Math.trunc(Sc()-E),n.shape&&4===n.shape.length){e.next=9;break}return e.abrupt("return",[]);case 9:if(D){e.next=11;break}return e.abrupt("return",[]);case 11:L=0;case 12:if(!(L<D.length)){e.next=191;break}if(t.analyze("Get Face"),D[L].tensor&&!D[L].tensor.isDisposedInternal){e.next=17;break}return kc("Face object is disposed:",D[L].tensor),e.abrupt("continue",188);case 17:if(!(null==(r=t.config.face.detector)?void 0:r.mask)){e.next=23;break}return e.next=20,Hce(D[L]);case 20:z=e.sent,Yg(D[L].tensor),D[L].tensor=z;case 23:if(B=D[L].mesh&&D[L].mesh.length>200?qce(D[L],[n.shape[2],n.shape[1]]):null,t.analyze("Start Emotion:"),!t.config.async){e.next=29;break}_=(null==(a=t.config.face.emotion)?void 0:a.enabled)?Kae(D[L].tensor||tv([]),t.config,L,D.length):[],e.next=40;break;case 29:if(t.state="run:emotion",E=Sc(),!(null==(i=t.config.face.emotion)?void 0:i.enabled)){e.next=37;break}return e.next=34,Kae(D[L].tensor||tv([]),t.config,L,D.length);case 34:e.t0=e.sent,e.next=38;break;case 37:e.t0=[];case 38:_=e.t0,t.performance.emotion=ane.perfadd?(t.performance.emotion||0)+Math.trunc(Sc()-E):Math.trunc(Sc()-E);case 40:if(t.analyze("End Emotion:"),t.analyze("Start AntiSpoof:"),!t.config.async){e.next=46;break}M=(null==(o=t.config.face.antispoof)?void 0:o.enabled)?Yne(D[L].tensor||tv([]),t.config,L,D.length):0,e.next=57;break;case 46:if(t.state="run:antispoof",E=Sc(),!(null==(s=t.config.face.antispoof)?void 0:s.enabled)){e.next=54;break}return e.next=51,Yne(D[L].tensor||tv([]),t.config,L,D.length);case 51:e.t1=e.sent,e.next=55;break;case 54:e.t1=0;case 55:M=e.t1,t.performance.antispoof=ane.perfadd?(t.performance.antispoof||0)+Math.trunc(Sc()-E):Math.trunc(Sc()-E);case 57:if(t.analyze("End AntiSpoof:"),t.analyze("Start Liveness:"),!t.config.async){e.next=63;break}O=(null==(c=t.config.face.liveness)?void 0:c.enabled)?Fse(D[L].tensor||tv([]),t.config,L,D.length):0,e.next=74;break;case 63:if(t.state="run:liveness",E=Sc(),!(null==(l=t.config.face.liveness)?void 0:l.enabled)){e.next=71;break}return e.next=68,Fse(D[L].tensor||tv([]),t.config,L,D.length);case 68:e.t2=e.sent,e.next=72;break;case 71:e.t2=0;case 72:O=e.t2,t.performance.liveness=ane.perfadd?(t.performance.antispoof||0)+Math.trunc(Sc()-E):Math.trunc(Sc()-E);case 74:if(t.analyze("End Liveness:"),t.analyze("Start GEAR:"),!t.config.async){e.next=80;break}N=(null==(d=t.config.face.gear)?void 0:d.enabled)?xne(D[L].tensor||tv([]),t.config,L,D.length):null,e.next=91;break;case 80:if(t.state="run:gear",E=Sc(),!(null==(f=t.config.face.gear)?void 0:f.enabled)){e.next=88;break}return e.next=85,xne(D[L].tensor||tv([]),t.config,L,D.length);case 85:e.t3=e.sent,e.next=89;break;case 88:e.t3=null;case 89:N=e.t3,t.performance.gear=Math.trunc(Sc()-E);case 91:if(t.analyze("End GEAR:"),t.analyze("Start SSRNet:"),!t.config.async){e.next=98;break}C=(null==(p=t.config.face.ssrnet)?void 0:p.enabled)?Mne(D[L].tensor||tv([]),t.config,L,D.length):null,T=(null==(h=t.config.face.ssrnet)?void 0:h.enabled)?Vne(D[L].tensor||tv([]),t.config,L,D.length):null,e.next=117;break;case 98:if(t.state="run:ssrnet",E=Sc(),!(null==(m=t.config.face.ssrnet)?void 0:m.enabled)){e.next=106;break}return e.next=103,Mne(D[L].tensor||tv([]),t.config,L,D.length);case 103:e.t4=e.sent,e.next=107;break;case 106:e.t4=null;case 107:if(C=e.t4,!(null==(v=t.config.face.ssrnet)?void 0:v.enabled)){e.next=114;break}return e.next=111,Vne(D[L].tensor||tv([]),t.config,L,D.length);case 111:e.t5=e.sent,e.next=115;break;case 114:e.t5=null;case 115:T=e.t5,t.performance.ssrnet=Math.trunc(Sc()-E);case 117:if(t.analyze("End SSRNet:"),t.analyze("Start MobileFaceNet:"),!t.config.async){e.next=123;break}R=(null==(g=t.config.face.mobilefacenet)?void 0:g.enabled)?nie(D[L].tensor||tv([]),t.config,L,D.length):null,e.next=134;break;case 123:if(t.state="run:mobilefacenet",E=Sc(),!(null==(y=t.config.face.mobilefacenet)?void 0:y.enabled)){e.next=131;break}return e.next=128,nie(D[L].tensor||tv([]),t.config,L,D.length);case 128:e.t6=e.sent,e.next=132;break;case 131:e.t6=null;case 132:R=e.t6,t.performance.mobilefacenet=Math.trunc(Sc()-E);case 134:if(t.analyze("End MobileFaceNet:"),t.analyze("Start Description:"),!t.config.async){e.next=140;break}F=(null==(b=t.config.face.description)?void 0:b.enabled)?qie(D[L].tensor||tv([]),t.config,L,D.length):null,e.next=151;break;case 140:if(t.state="run:description",E=Sc(),!(null==(x=t.config.face.description)?void 0:x.enabled)){e.next=148;break}return e.next=145,qie(D[L].tensor||tv([]),t.config,L,D.length);case 145:e.t7=e.sent,e.next=149;break;case 148:e.t7=null;case 149:F=e.t7,t.performance.description=ane.perfadd?(t.performance.description||0)+Math.trunc(Sc()-E):Math.trunc(Sc()-E);case 151:if(t.analyze("End Description:"),!t.config.async){e.next=165;break}return e.next=155,Promise.all([C,T,_,R,F,N,M,O]);case 155:W=e.sent,j=u(W,8),C=j[0],T=j[1],_=j[2],R=j[3],F=j[4],N=j[5],M=j[6],O=j[7];case 165:t.analyze("Finish Face:"),(null==(A=t.config.face.ssrnet)?void 0:A.enabled)&&C&&T&&(F=Ze(Ze({},F),{},{age:C.age,gender:T.gender,genderScore:T.genderScore})),(null==(k=t.config.face.gear)?void 0:k.enabled)&&N&&(F=Ze(Ze({},F),{},{age:N.age,gender:N.gender,genderScore:N.genderScore,race:N.race})),(null==(w=t.config.face.mobilefacenet)?void 0:w.enabled)&&R&&(F.descriptor=R),null==(S=t.config.face.iris)||S.enabled,V=D[L].annotations&&D[L].annotations.leftEyeIris&&D[L].annotations.leftEyeIris[0]&&D[L].annotations.rightEyeIris&&D[L].annotations.rightEyeIris[0]&&D[L].annotations.leftEyeIris.length>0&&D[L].annotations.rightEyeIris.length>0&&null!==D[L].annotations.leftEyeIris[0]&&null!==D[L].annotations.rightEyeIris[0]?Math.max(Math.abs(D[L].annotations.leftEyeIris[3][0]-D[L].annotations.leftEyeIris[1][0]),Math.abs(D[L].annotations.rightEyeIris[4][1]-D[L].annotations.rightEyeIris[2][1]))/n.shape[2]:0,U=(null==(I=t.config.face.detector)?void 0:I.return)?Qk(D[L].tensor):null,Yg(D[L].tensor),D[L].tensor&&delete D[L].tensor,H=Ze(Ze({},D[L]),{},{id:L}),(null==F?void 0:F.age)&&(H.age=F.age),(null==F?void 0:F.gender)&&(H.gender=F.gender),(null==F?void 0:F.genderScore)&&(H.genderScore=null==F?void 0:F.genderScore),(null==F?void 0:F.descriptor)&&(H.embedding=null==F?void 0:F.descriptor),(null==F?void 0:F.race)&&(H.race=null==F?void 0:F.race),_&&(H.emotion=_),M&&(H.real=M),O&&(H.live=O),V&&0!==V&&(H.iris=Math.trunc(500/V/11.7)/100),B&&(H.rotation=B),U&&(H.tensor=U),P.push(H),t.analyze("End Face");case 188:L++,e.next=12;break;case 191:return t.analyze("End FaceMesh:"),t.config.async&&(t.performance.face&&delete t.performance.face,t.performance.age&&delete t.performance.age,t.performance.gender&&delete t.performance.gender,t.performance.emotion&&delete t.performance.emotion),e.abrupt("return",P);case 194:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Xce=function(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n].keypoints.find((function(e){return"leftWrist"===e.part})),a=e[n].keypoints.find((function(e){return"rightWrist"===e.part})),i=e[n].keypoints.find((function(e){return"nose"===e.part}));i&&r&&a&&r.position[1]<i.position[1]&&a.position[1]<i.position[1]?t.push({body:n,gesture:"i give up"}):i&&r&&r.position[1]<i.position[1]?t.push({body:n,gesture:"raise left hand"}):i&&a&&a.position[1]<i.position[1]&&t.push({body:n,gesture:"raise right hand"});var o=e[n].keypoints.find((function(e){return"leftShoulder"===e.part})),s=e[n].keypoints.find((function(e){return"rightShoulder"===e.part}));o&&s&&Math.abs(o.positionRaw[1]-s.positionRaw[1])>.1&&t.push({body:n,gesture:"leaning ".concat(o.position[1]>s.position[1]?"left":"right")})}return t},Zce=function(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)if(e[n].mesh&&e[n].mesh.length>450){var r=(e[n].mesh[33][2]||0)-(e[n].mesh[263][2]||0),a=e[n].mesh[33][0]-e[n].mesh[263][0];Math.abs(r/a)<=.15?t.push({face:n,gesture:"facing center"}):t.push({face:n,gesture:"facing ".concat(r<0?"left":"right")}),Math.abs(e[n].mesh[374][1]-e[n].mesh[386][1])/Math.abs(e[n].mesh[443][1]-e[n].mesh[450][1])<.2&&t.push({face:n,gesture:"blink left eye"}),Math.abs(e[n].mesh[145][1]-e[n].mesh[159][1])/Math.abs(e[n].mesh[223][1]-e[n].mesh[230][1])<.2&&t.push({face:n,gesture:"blink right eye"});var i=Math.min(100,500*Math.abs(e[n].mesh[13][1]-e[n].mesh[14][1])/Math.abs(e[n].mesh[10][1]-e[n].mesh[152][1]));i>10&&t.push({face:n,gesture:"mouth ".concat(Math.trunc(i),"% open")});var o=e[n].mesh[152][2]||0;Math.abs(o)>10&&t.push({face:n,gesture:"head ".concat(o<0?"up":"down")})}return t},Yce=function(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)if(e[n].annotations&&e[n].annotations.leftEyeIris&&e[n].annotations.leftEyeIris[0]&&e[n].annotations.rightEyeIris&&e[n].annotations.rightEyeIris[0]){var r=e[n].annotations.leftEyeIris[3][0]-e[n].annotations.leftEyeIris[1][0],a=e[n].annotations.leftEyeIris[4][1]-e[n].annotations.leftEyeIris[2][1],i=Math.abs(r*a),o=e[n].annotations.rightEyeIris[3][0]-e[n].annotations.rightEyeIris[1][0],s=e[n].annotations.rightEyeIris[4][1]-e[n].annotations.rightEyeIris[2][1],u=Math.abs(o*s),c=!1;Math.abs(i-u)/Math.max(i,u)<.25&&(c=!0,t.push({iris:n,gesture:"facing center"}));var l=Math.abs(e[n].mesh[263][0]-e[n].annotations.leftEyeIris[0][0])/e[n].box[2],d=Math.abs(e[n].mesh[33][0]-e[n].annotations.rightEyeIris[0][0])/e[n].box[2];(l>.06||d>.06)&&(c=!1),l>d?l>.05&&t.push({iris:n,gesture:"looking right"}):d>.05&&t.push({iris:n,gesture:"looking left"});var f=Math.abs(e[n].mesh[145][1]-e[n].annotations.rightEyeIris[0][1])/e[n].box[3],p=Math.abs(e[n].mesh[374][1]-e[n].annotations.leftEyeIris[0][1])/e[n].box[3];(p<.01||f<.01||p>.022||f>.022)&&(c=!1),(p<.01||f<.01)&&t.push({iris:n,gesture:"looking down"}),(p>.022||f>.022)&&t.push({iris:n,gesture:"looking up"}),c&&t.push({iris:n,gesture:"looking center"})}return t},Jce=function(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++){var r=[];if(e[n].annotations)for(var a=0,i=Object.entries(e[n].annotations);a<i.length;a++){var o=u(i[a],2),s=o[0],c=o[1];"palmBase"!==s&&Array.isArray(c)&&c[0]&&r.push({name:s.toLowerCase(),position:c[0]})}if(r&&r.length>0){var l=r.reduce((function(e,t){return(e.position[2]||0)<(t.position[2]||0)?e:t}));t.push({hand:n,gesture:"".concat(l.name," forward")});var d=r.reduce((function(e,t){return e.position[1]<t.position[1]?e:t}));t.push({hand:n,gesture:"".concat(d.name," up")})}if(e[n].keypoints){var f,p=lc(Qoe(e[n].keypoints));try{for(p.s();!(f=p.n()).done;){var h=f.value;t.push({hand:n,gesture:h.name})}}catch(m){p.e(m)}finally{p.f()}}}return t},Qce={face:[],body:[],hand:[],gesture:[],object:[],persons:[],performance:{},timestamp:0,error:null},$ce=0;function ele(e,t){var n,r,a,i,o,s,c,l,d,f,p,h,m,v,g,y,b,x,A,k,w,S,I,E,C,N,T,_=Sc();if(!e)return{face:[],body:[],hand:[],gesture:[],object:[],persons:[],performance:{},timestamp:0,error:null};var R=Date.now()-e.timestamp,M=R<1e3?8-Math.log(R+1):1;if(e.canvas&&(Qce.canvas=e.canvas),e.error&&(Qce.error=e.error),Qce.body&&e.body.length===Qce.body.length)for(var O=function(c){var l=e.body[c].box.map((function(e,t){return((M-1)*Qce.body[c].box[t]+e)/M})),d=e.body[c].boxRaw.map((function(e,t){return((M-1)*Qce.body[c].boxRaw[t]+e)/M})),f=e.body[c].keypoints.map((function(e,t){var n,r,a,i,o,s,u,l,d;return{score:e.score,part:e.part,position:[Qce.body[c].keypoints[t]?((M-1)*(Qce.body[c].keypoints[t].position[0]||0)+(e.position[0]||0))/M:e.position[0],Qce.body[c].keypoints[t]?((M-1)*(Qce.body[c].keypoints[t].position[1]||0)+(e.position[1]||0))/M:e.position[1],Qce.body[c].keypoints[t]?((M-1)*(Qce.body[c].keypoints[t].position[2]||0)+(e.position[2]||0))/M:e.position[2]],positionRaw:[Qce.body[c].keypoints[t]?((M-1)*(Qce.body[c].keypoints[t].positionRaw[0]||0)+(e.positionRaw[0]||0))/M:e.positionRaw[0],Qce.body[c].keypoints[t]?((M-1)*(Qce.body[c].keypoints[t].positionRaw[1]||0)+(e.positionRaw[1]||0))/M:e.positionRaw[1],Qce.body[c].keypoints[t]?((M-1)*(Qce.body[c].keypoints[t].positionRaw[2]||0)+(e.positionRaw[2]||0))/M:e.positionRaw[2]],distance:[Qce.body[c].keypoints[t]?((M-1)*((null==(n=Qce.body[c].keypoints[t].distance)?void 0:n[0])||0)+((null==(r=e.distance)?void 0:r[0])||0))/M:null==(a=e.distance)?void 0:a[0],Qce.body[c].keypoints[t]?((M-1)*((null==(i=Qce.body[c].keypoints[t].distance)?void 0:i[1])||0)+((null==(o=e.distance)?void 0:o[1])||0))/M:null==(s=e.distance)?void 0:s[1],Qce.body[c].keypoints[t]?((M-1)*((null==(u=Qce.body[c].keypoints[t].distance)?void 0:u[2])||0)+((null==(l=e.distance)?void 0:l[2])||0))/M:null==(d=e.distance)?void 0:d[2]]}})),p={},h={connected:{}};(null==(r=null==(n=t.body)?void 0:n.modelPath)?void 0:r.includes("efficientpose"))?h=Iae:(null==(i=null==(a=t.body)?void 0:a.modelPath)?void 0:i.includes("blazepose"))?h=Pre:(null==(s=null==(o=t.body)?void 0:o.modelPath)?void 0:s.includes("movenet"))&&(h=Dse);for(var m=function(){for(var e=u(g[v],2),t=e[0],n=e[1],r=[],a=function(e){var t=f.find((function(t){return t.part===n[e]})),a=f.find((function(t){return t.part===n[e+1]}));t&&a&&r.push([t.position,a.position])},i=0;i<n.length-1;i++)a(i);p[t]=r},v=0,g=Object.entries(h.connected);v<g.length;v++)m();Qce.body[c]=Ze(Ze({},e.body[c]),{},{box:l,boxRaw:d,keypoints:f,annotations:p})},F=0;F<e.body.length;F++)O(F);else Qce.body=JSON.parse(JSON.stringify(e.body));if(Qce.hand&&e.hand.length===Qce.hand.length)for(var P=function(t){var n=e.hand[t].box.map((function(e,n){return((M-1)*Qce.hand[t].box[n]+e)/M})),r=e.hand[t].boxRaw.map((function(e,n){return((M-1)*Qce.hand[t].boxRaw[n]+e)/M}));Qce.hand[t].keypoints.length!==e.hand[t].keypoints.length&&(Qce.hand[t].keypoints=e.hand[t].keypoints);var a=e.hand[t].keypoints&&e.hand[t].keypoints.length>0?e.hand[t].keypoints.map((function(e,n){return e.map((function(e,r){return((M-1)*(Qce.hand[t].keypoints[n][r]||1)+(e||0))/M}))})):[],i={};if(Object.keys(Qce.hand[t].annotations).length!==Object.keys(e.hand[t].annotations).length)Qce.hand[t].annotations=e.hand[t].annotations,i=Qce.hand[t].annotations;else if(e.hand[t].annotations)for(var o=function(){var n=u[s];i[n]=e.hand[t].annotations[n]&&e.hand[t].annotations[n][0]?e.hand[t].annotations[n].map((function(e,r){return e.map((function(e,a){return((M-1)*Qce.hand[t].annotations[n][r][a]+e)/M}))})):null},s=0,u=Object.keys(e.hand[t].annotations);s<u.length;s++)o();Qce.hand[t]=Ze(Ze({},e.hand[t]),{},{box:n,boxRaw:r,keypoints:a,annotations:i})},D=0;D<e.hand.length;D++)P(D);else Qce.hand=JSON.parse(JSON.stringify(e.hand));if(Qce.face&&e.face.length===Qce.face.length)for(var L=function(t){var n=e.face[t].box.map((function(e,n){return((M-1)*Qce.face[t].box[n]+e)/M})),r=e.face[t].boxRaw.map((function(e,n){return((M-1)*Qce.face[t].boxRaw[n]+e)/M}));if(e.face[t].rotation){var a={matrix:[0,0,0,0,0,0,0,0,0],angle:{roll:0,yaw:0,pitch:0},gaze:{bearing:0,strength:0}};a.matrix=null==(c=e.face[t].rotation)?void 0:c.matrix,a.angle={roll:((M-1)*((null==(d=null==(l=Qce.face[t].rotation)?void 0:l.angle)?void 0:d.roll)||0)+((null==(p=null==(f=e.face[t].rotation)?void 0:f.angle)?void 0:p.roll)||0))/M,yaw:((M-1)*((null==(m=null==(h=Qce.face[t].rotation)?void 0:h.angle)?void 0:m.yaw)||0)+((null==(g=null==(v=e.face[t].rotation)?void 0:v.angle)?void 0:g.yaw)||0))/M,pitch:((M-1)*((null==(b=null==(y=Qce.face[t].rotation)?void 0:y.angle)?void 0:b.pitch)||0)+((null==(A=null==(x=e.face[t].rotation)?void 0:x.angle)?void 0:A.pitch)||0))/M},a.gaze={bearing:((M-1)*((null==(w=null==(k=Qce.face[t].rotation)?void 0:k.gaze)?void 0:w.bearing)||0)+((null==(I=null==(S=e.face[t].rotation)?void 0:S.gaze)?void 0:I.bearing)||0))/M,strength:((M-1)*((null==(C=null==(E=Qce.face[t].rotation)?void 0:E.gaze)?void 0:C.strength)||0)+((null==(T=null==(N=e.face[t].rotation)?void 0:N.gaze)?void 0:T.strength)||0))/M},Qce.face[t]=Ze(Ze({},e.face[t]),{},{rotation:a,box:n,boxRaw:r})}Qce.face[t]=Ze(Ze({},e.face[t]),{},{box:n,boxRaw:r})},z=0;z<e.face.length;z++)L(z);else Qce.face=JSON.parse(JSON.stringify(e.face));if(Qce.object&&e.object.length===Qce.object.length)for(var B=function(t){var n=e.object[t].box.map((function(e,n){return((M-1)*Qce.object[t].box[n]+e)/M})),r=e.object[t].boxRaw.map((function(e,n){return((M-1)*Qce.object[t].boxRaw[n]+e)/M}));Qce.object[t]=Ze(Ze({},e.object[t]),{},{box:n,boxRaw:r})},W=0;W<e.object.length;W++)B(W);else Qce.object=JSON.parse(JSON.stringify(e.object));if(e.persons){var j=e.persons;if(Qce.persons&&j.length===Qce.persons.length)for(var V=function(e){Qce.persons[e].box=j[e].box.map((function(t,n){return((M-1)*Qce.persons[e].box[n]+t)/M}))},U=0;U<j.length;U++)V(U);else Qce.persons=JSON.parse(JSON.stringify(j))}e.gesture&&(Qce.gesture=e.gesture);var H=Sc();return $ce=ane.perfadd?$ce+Math.round(H-_):Math.round(H-_),e.performance&&(Qce.performance=Ze(Ze({},e.performance),{},{interpolate:$ce})),Qce}function tle(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{order:2,multiplier:25},r=0,a=0;a<e.length;a++){var i=n.order&&2!==n.order?Math.abs(e[a]-t[a]):e[a]-t[a];r+=n.order&&2!==n.order?Math.pow(i,n.order):i*i}return(n.multiplier||20)*r}vc({},{distance:function(){return tle},match:function(){return ale},similarity:function(){return rle}});var nle=function(e,t,n,r){if(0===e)return 1;var a=(1-(2===t?Math.sqrt(e):Math.pow(e,1/t))/100-n)/(r-n);return Math.max(Math.min(a,1),0)};function rle(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{order:2,multiplier:25,min:.2,max:.8},r=tle(e,t,n);return nle(r,n.order||2,n.min||0,n.max||1)}function ale(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{order:2,multiplier:25,threshold:0,min:.2,max:.8};if(!Array.isArray(e)||!Array.isArray(t)||e.length<64||0===t.length||e.length!==t[0].length)return{index:-1,distance:Number.POSITIVE_INFINITY,similarity:0};for(var r=Number.MAX_SAFE_INTEGER,a=-1,i=0;i<t.length;i++){var o=tle(e,t[i],n);if(o<r&&(r=o,a=i),r<(n.threshold||0))break}var s=nle(r,n.order||2,n.min||0,n.max||1);return{index:a,distance:r,similarity:s}}function ile(e,t,n,r,a){var i,o,s,u,c,l,d,f,p,h,m,v,g,y,b,x,A,k=0,w=[],S=lc(e);try{var I=function(){var e,S=A.value,I={id:k++,face:S,body:null,hands:{left:null,right:null},gestures:[],box:[0,0,0,0]},E=lc(t);try{for(E.s();!(e=E.n()).done;){var C=e.value;S.box[0]>C.box[0]&&S.box[0]<C.box[0]+C.box[2]&&S.box[1]+S.box[3]>C.box[1]&&S.box[1]+S.box[3]<C.box[1]+C.box[3]&&(I.body=C)}}catch(B){E.e(B)}finally{E.f()}if(I.body){var N,T=lc(n);try{for(T.s();!(N=T.n()).done;){var _=N.value;_.box[0]+_.box[2]>I.body.box[0]&&_.box[0]+_.box[2]<I.body.box[0]+I.body.box[2]&&_.box[1]+_.box[3]>I.body.box[1]&&_.box[1]+_.box[3]<I.body.box[1]+I.body.box[3]&&I.hands&&(I.hands.left=_),_.box[0]<I.body.box[0]+I.body.box[2]&&_.box[0]>I.body.box[0]&&_.box[1]+_.box[3]>I.body.box[1]&&_.box[1]+_.box[3]<I.body.box[1]+I.body.box[3]&&I.hands&&(I.hands.right=_)}}catch(B){T.e(B)}finally{T.f()}}var R,M=lc(r);try{for(M.s();!(R=M.n()).done;){var O=R.value;void 0!==O.face&&O.face===S.id?null==(i=I.gestures)||i.push(O):void 0!==O.iris&&O.iris===S.id?null==(o=I.gestures)||o.push(O):void 0!==O.body&&O.body===(null==(s=I.body)?void 0:s.id)?null==(u=I.gestures)||u.push(O):void 0!==O.hand&&O.hand===(null==(l=null==(c=I.hands)?void 0:c.left)?void 0:l.id)?null==(d=I.gestures)||d.push(O):void 0!==O.hand&&O.hand===(null==(p=null==(f=I.hands)?void 0:f.right)?void 0:p.id)&&(null==(h=I.gestures)||h.push(O))}}catch(B){M.e(B)}finally{M.f()}var F=[],P=[],D=function(e){e&&4===e.length&&(F.push(e[0],e[0]+e[2]),P.push(e[1],e[1]+e[3]))};D(null==(m=I.face)?void 0:m.box),D(null==(v=I.body)?void 0:v.box),D(null==(y=null==(g=I.hands)?void 0:g.left)?void 0:y.box),D(null==(x=null==(b=I.hands)?void 0:b.right)?void 0:x.box);var L=Math.min.apply(Math,F),z=Math.min.apply(Math,P);I.box=[L,z,Math.max.apply(Math,F)-L,Math.max.apply(Math,P)-z],a&&a[1]&&a[2]&&(I.boxRaw=[I.box[0]/a[2],I.box[1]/a[1],I.box[2]/a[2],I.box[3]/a[1]]),w.push(I)};for(S.s();!(A=S.n()).done;)I()}catch(E){S.e(E)}finally{S.f()}return w}var ole,sle,ule,cle,lle="\n/9j/4AAQSkZJRgABAQEAYABgAAD/4QBoRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUA\nAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAARAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQu\nbmV0IDQuMi4xMwAA/9sAQwAGBAUGBQQGBgUGBwcGCAoQCgoJCQoUDg8MEBcUGBgXFBYWGh0lHxob\nIxwWFiAsICMmJykqKRkfLTAtKDAlKCko/9sAQwEHBwcKCAoTCgoTKBoWGigoKCgoKCgoKCgoKCgo\nKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgo/8AAEQgBAAEAAwEhAAIRAQMRAf/E\nAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAE\nEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZH\nSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1\ntre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEB\nAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXET\nIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFla\nY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXG\nx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A+qaKACigApGOKAML\nXp8xlF5A7V4X8RtYs7PzfNImnx8sa8Kp9z3q2tEgp6angWs62ZZ5CTGoJ6DArGNz5p+UrID6EUrF\nPUlW1EuN0XNW7PQ2L5j3JnoKXN0KijqNP0eYoqXBdgPuuo+ZPeupisWn2Jd4+0r924XgsQOCff3/\nAJ1FzRKxDqGii6m3siiQ8F1XGfXI6YNWLfRbiRQMkcZI9fpTDluT2/h6Qy8gDPbtmtG38JeY480Z\n5zSLUTZg8M28YwYxjAArXtdPt402qgHbpSaLWhma3o0Uqk7Nx9DWLaaVblgPs6qRyds2M/gRSQp9\nzZOni2iWS2hlQ+kjYz9OMGrdjq89vIPPVhj+8M/lQyDq9P1WOYBlMZz1AOD+VdDaTiReOKulK0jO\ntHmi0WDTlr0TyxRVhT8tJjIX+9SUxHXUV553BRQAVBcPhSBTSuxPY86+IGti0s5I7dsORy9fM3i6\n8e8mfDO5P90ZrWWiJicNPpZZtxV/xrW0jQt4DOv6Vk2dEEdTY6BHuB25rpbPSo0QARjP0qTRI17W\nwA/hFaMWmoQMgflQXYsDS142rU9tpqqenfNA7GgtihxkdKuRW6qMY/GkDZY8sY4Ap4hXbyB+VArk\nEtuH4wPyrk/EGkOm+a3jw3suRQLc5i38SX9hJ9nnY+XnBUdPyNdFY6pa3KkkAE9l6f8AfJ/pSJT6\nGhDmI+Zb4ZRycdv6ium0nUhKFydrelTsNnS2829RnrVgV6NKXNG55lWPLIM81Op+WrZkRMfmNNzT\nA7GivPO4KKAEY4XNYWt3vkwPg4OK0giJdjw/xrqhm87Zs8tc7pX5A+leSajf6aHYJ50kn4AZpTep\nrBWRm2Vobm4BXfyehPFdnpmnBFUY5rI2SN63tlToK0YI+KZpFF+3QdavwoKTLtoW0Toaswpk5pCb\nLCxipAhoIuP2dKevHXoaYDylRyxhlwRQI4nxVoCXWZI1GfpXGtbSWjYPGP73+NIGupt6TqMsLruZ\nih4xnP5V09mQ+JLd8gn0xSYJnVaVdkook69K34zuUGunDS3Rx4qOzHVIp4rrOMY3NJQI7GivPO8K\nKAILt9kZrz3xlebYiu8KCCWb0XvW0NFch6ysfO3jLVjfXLIn+pQkKorl7WxNxIPl71g2dUUdpo+l\npBGvHPet23iC8ihFosrxirkHQUFo0IF4FXI1O726CpKLacCrMJoJLYHAPpTwucHpSRJJ5e4AZI9x\nUqpxzVpCuOC8cUpQUMRnXttuB4rjNdsYyeVwfXpmpGmcvcQyafMCFJjPY10eg34BUg4DcZP8jUO4\nHaRq3lLNF+IHet7R7jz7c56rwa2wz9+xhiVeFy/T1PFegeaNPWigDsc0ZrzzvDNIaAM7VpNqdegr\nxL4l6kywyRhseZ19lrdfAZL4jxYg3Fw20d63tJsdrDI5rm3Z3R0R0Mce1eKnQYAplIkWrMJ45oZS\nNO3PHbNXIyfpSGWowSOasxLUiZdjFSqtNEMkUemKlAGKsRJjAppFAiORMjmsTVrNZEO4cfSoZSOD\n1eJ7WXBUzQZ+7nkfSo7e2Ei+ZaMzxntjBX2NSU1Y6/wxqojiEFzkA8KTXYaUoWRyv3W5rSjpNHPX\n+BmpSg8V6J5gUUAdhRXnneFFAGHrTfu5PpXzj8S70/aZtxzztXFbv4DKHxHI+H4GZiz9zxXXW8G3\nGBXMjvLRXAx0oPGPSmMVeOnWrMTYpFI0bcg1fh54xmgovRcD3qxETSIZcRvzp+/BpEkqsBUqsM9K\nq4Em4Gkxk0yRGXrVW6i8yFhkg+tJjRxGsWrxllkUMh9eK5uMz6bcebbnfG33kPcVkay2OntPKuo0\nnhXI67c8qa7Lw3c+adjcEDGK1paSRhVV4s6A0or0jyRRQ1AHX0V553hRQBz+vNtt5z3xXzX8Qbdm\nuic5YnOMdK3l8JnTXvlbwpYl+WySOgrp5YfLOOB9O1c62O7qQkc+9RsKChFPWp4DluOlSykaNruH\nArUgHShFNF2NT1qxGO3NBmyxGcE1N2560CFzjrUysO9JAPDDjFOVuKoQuSRTWouBkazbCa3cd8cV\nwF7IISQccHBzUSWpV9C3o1x5b5GAjdQD1rs9DjC3kckbEhqKfxIzn8LOupRXqnkPccBSkUAzraK8\n87wooA5rxMSI3HqK8B8bQl9Q8sffY5b/AAraXwkUviNrw9pH2W1ViMMRTdRjw4HpWNtDti9TPc4P\nFQs2M5qdyyMHLcfjV63HTAoBGtap0wK0YxigpsuRDtVhVYd6GQydVwwIqdRnqKCR23I5pCMUW6gD\nYNKuetAEise9KTxQBWuFyhrznxNZkXjFeN3I+tTIZg2OqmzmxNF0PO3vXp/g2+hukVl4zyPanTXv\nJmVR+60dpThXpnlPceopWFAbnV0V553hSGgRynjC5FujOey14Ssp1HxNmTnc+a3kvcIpv37HoEYQ\nQmMdVHSsnVbYJF5jVk0dsNzlruVIsl2wKxbjWrVHILjg1CRbZJb+ILHPzyhfStODWLQgFJFYd+el\nUJM27HUIXxhga1Y5lLVLKLkMnoauxnPPrSEx7ShF+Y/n2qrc6xBbhizDAqkK1zJuvG9nbg8ZA681\nly/Ei052RO3uKAsZlx8QGd8xxvt9Aa1NH8dK7AXMcip64zigdkdrZX8F7EJLdwwNXMkrz1qRMRly\nCK4TxmpidWI49felPYSOMmi80NIoOV6qRzXYeA5SskYPfirpfEjGr8LPWVHyD6U4CvQPL3ZItOYc\nUDOoNFeed4Uhpks4H4iE/Z5MeleMeGULeLgjds10S+BGdL+Jc9OSBU2Huc5Nc74yvUtrcDBrJnZF\n63PJdXvLy/lKWw46bvQVz82jXhkLO5Y+9ZlsYthcRnbIjY9R3q3awTRkEM3WmJI6C0ea3dGRsr1x\nXY6TqW9FLHnjrUs0izpLK5DDjofSta3ckH09KRUkZuuTvFGdvPauE1Y3U6Mqbssf/rUxHPTaJPK2\nZmJPbBqzY6DCZh5xJC9s9aBJHU6dpemJjfEmfetJtI0+VPkUr/unFOxdiextHs33W07YHQHk11mk\nXb3KbZ1xIvcd6LEyWho4Nct41sTPYb16ipexCPPZN+wYGCvH1rrPAEJmvkPoc1VL4kZVvgZ6yFwK\ncBXoHkkqinFaVyzo80GuE7WJRQSziPiGdthK5HQV4x4J/wBI8WPIewNdEvgRNL42emO/yj1UHNef\neNpRczbC+I17DvWT2OqJxc0sMK4TCisy41q0hfEkqj8aixdwTXNOlwvmqD9anS9tXH7uVG+hosO4\n/wC0oOhrR0+6G4YNIEzsNEuCxAPNdjZruA4xxUmjINSjURksOlcbqFykbnjFA1sYGoassaknCqO5\nrl7rxhGm7yBnBxuJq0rkSlYpw+NLlsfd5P8AerVsvHEqSBHwPVgcgVpyMyVXU3rXxcHYETAk+hru\n/DWti6ZSTyOKzZqndHaxvvUGq2rQ+dYyqR24qWI8dvbr7LqDxyDAzXpvw6FvIxePGSM06Xxoyr/A\nzviKFHNegeX1J41zUhXioGbuaSuM6wpCaBHG/EcA6HN/exxXjXw2jL67cv8A3Qa6H8CFR+NnoWpO\nI4XI44rxLxrqjQzSEsQM1gdSPM9U1uR1YbmWIdXHf2rmpIb67YS28UrRlsLI3c/jW0VZGUpO5pW1\njfLNOjahawzwReYI5cjzMkDavHJ5/SrVv9uhtPtVxCPLBwzxnlT9KGghLU3tKvvPjHzbl7EGuisJ\nGRxWLOg7nRXJEbDjmvSNK+aFSfSoZr0KutRkphc4NcRrdkVjL9aVio7Hk3iqS8ubhrWzUlsZY9kG\ncZNc5D4aee5MclzJIFTzHAO0MfatqSOWu7bFS1srDUZEis0vIZoUxPvfcC+4/dx2xjr712XiTwXb\nWmlQ6hol3cRhoFd4rlg3zY5wR0GelavQwjq7GD4etdVvSnk2wAB+9v8A8mvcfA2kXiRo0/UdcDis\nZnTTulqeoWqbUAJqWUb42X1FZlnjfjSwlGrr5S/eNdD4RkvLAAQ4yRyaUZcruVKl7TQ9I0G+mnzH\nckFwM8VuIK7ac3KF2eXiKapz5UWYxipNtMyNejNch0jSar3cjR27uoyQCRVRWom9DxTx54gu5fMi\nlbKdMVjfCZPNlv5v9rFbVHpYqjGzbOn8SzFI9o715L4u0r7arYzk+lYdTqSujy7U/C0u4vHk+WwO\nxuh9q3J9dgvbdVukMV1EwbDDgn04rZMwlHoZ+orZ6hfQ3RWVnQYCgZAq+8U0ln5NtBsV2yxYcfgK\nJtW0CnB31LlroVwJ1nQLGDjeP7w+lb0dsFxjrWB0tHS6NuWPJ6A16ToUm63T3Gallr4S7cxiTjrX\nPaxaF7dlVeSMUhxZ5jd+H7qCa4eF3DSE5x3zXN3Wk6jbyeaiFWUY6ZyPStYS5SalPmVipFbX0E4c\nW0alvmPHJrag0rVvEE6LdljGpG2NRtQD+tW5XMI0uU9M8NeFo9PiQhecDIIrtrOMIoG3H4VlJm9t\nC6CB06VPGM1IHLeItGS6uw+ORT7e3jsbQvj7gzUNam0JaWE+HN7NqOqX80n3FO1RXo8YzXdS+BHk\n4z+KyzGPapcU2YIv7qQtiuaxvcaWqG4O6FwfSrS1JbPnrxoxkv7qIfejcitj4V2f2exumI+8+aKn\nxHTT+G5d8Txlm4rjLxMsQwzWT3OiK0Mm6sEkVsAcjFc1d+FEmlGwEDPQVopaEuOpr6f4ZWNAu3tW\nvHpAj5ZQcUFIWaDjGMVUMQ3cVDBmvbhY7QAV2nh+T/R1yeKhlrY31+b61FcQK6nIoJMi401WblRi\nqr6PCw5UYq9y+YgOgWzNkRrx3xWjp+nx2v3FQcelAbmko9anQ4GBUNisPHWr1qMrQhS2K11HvmYV\nhamcxSRZ5xRIqluS/DKAQQXZxyXrvo2FdlL4EeZjH+/ZbjNSZpswLNBrE1Gt7VE4ODVIlnh/j61F\nj4lmeTGyUbq6LwdEqWbeX0YbhSqfEddP4Bddj4JIrhL5d8h7VjI6oLQqKNzelWre3yc4/ClFjaL6\nwqBxxUUxwCKu5BmXRA6c+9ZjP83FSBoQuPs4BrsNBlUW659KmRrDY6G1lyQtW3Hy0lqQ1qVJnAbm\noy3b9KYJCqRj3o4zRctIlhjLHmpSuOBRbQOpLGpPFaES7UqkZzKN1KsEc87/AHUUmvPLTVGv72aQ\nk7WJwKmRrQ3ud74Ltilgz4++2a6iNDXdS0gjyMU71my7GpqTbxSbMki3SViajTTHqkSeR/GeyZmg\nnQHkEE1S+F+oPPavBL96I4/Cia1udVF+4dVrkW+Fq8+v4tjMDWUkdVJ6WM0cNV+F+MVmjUcZgqnP\n1qpNNnkcVRLiZtxIS1UzzIF7mghlxUZpVQdq6nTVdAoAOKzkbQWhvwM6gMM1twOJYx3NOJE11Kt1\nH1/pVVlwBkk+9NocXoOQ45FPj+fkUJFF2NSB700v/hTEty5ZpkjvVyUgcCq6GM9zC14/8Se6GcZQ\n1574Xs5WkI2HBPHFQ1dm1KSSZ7Rotn9l0+KPHIHNacae1dy0Vjxaj5ptlhVp+2s2CJ9ppCKzuWNx\nzSFc1SYrHNeNdIGpaYw25ZeRXmvheyk0jVpEdcLJ0q3ZxNKTa0O3vQHg/DNcHrsJDmsmjspnNzNt\nfFIJ24GazOhC+azDmgZIOOKBsp3J2qSaZodubq58yQ4QAnmhGT3NO18pb7BORmu205LfYpyKVkWp\nOxr5gKYWoIZWgfGfloFq1qTPLubnGO1RPtxg4P0oBAkY/hBz6VNDDkZ6AU0W2WSdqkdKr9ZOaGSj\nVtcLHmnOcgmmYvcz7mBLy3MbdD1q9ouiRK6bUAVeelOC1InPlidSsWMDFOCEdq3uefykqrinYqGy\nrFvApMVka2DAowKAsMkRXQqwyDXn/iWyitNQ3qPl6itIvRoF8RXinW4tQ6HI6GuW8SIVBPalc6qe\n5x9x97r3qruwTjrWZ0ksZ9TUmcDNAmZ9/wAoao63rR0+w22MLPtAzt6mghmfofiB76LdJBJBIp5D\nd/oa7bSdWLIPnpDi9TM8TeKdas51XTbIyxd3J/pXS+E/EFxqNoFu7do5OmD60maHWrnZyDRkn/69\nMlEyOR0xntVoNx+FUgYjPxg4FLCuWDZyKQr2RoRnP0qO+nEFpJITgAUzLqZnhu6+0rknOTXpOmwJ\nFbrt5yMmnHYyr6Oxb2ijaKLnPYMClwKQWK3n0hn+lachHOJ9pNNN0apQFzsY10a4v4hXQh0xpieQ\nMA1XLZNjhK80cT8OdV+3Wl3A7ZZJCw+hrR1qLcjZ/CsbnfHRnFXseHJArOYYbrUs1uPhYbuatqFP\nByfSkMq3UIINYkto+87Tx6GkSxfsDbflGD7CtTw/pk4nzITtPIFMFudsukh4Rxz71paTpKwP5jcn\n0qTRy0NORMDgVCqewoJTJgAoxjntTiTu7fWmFxAcnn1q3EPl+X8KZMi4gKqB1Peob/Tv7Us5bfeU\nyOoq4R5nYxqT5I8xieH9J1DTbvyJELRg8ODwa9Ms5mSFV9BWiptbnNVrKdmif7Q1KLg96XIZc5Is\npNL5pqeUrmMtZs0jzV08phchaY00zH1p2ZNxjS1g+LdJOt6U9ssmxjyGp2urDjLlaZzng/wUPDqz\nTSTmWeTrjpVjVk3Rvjr2rnqQ5dDvo1XUd2cTqSNk9OKxXGCeKxZ1DAxHTr2q5C/y8GokUhsz54qu\nuCxzSQjQ0+FZblR2ro4bZYiMVQ0dBb7Qi5x0qzuG5QOh71LYErDufpSeWrHnimIXbjkUjLkH1Hem\ngGxryc+tXI19KYmWegq9YLiLJ7mtqS945cS7QsWehqxA9dEjz4krPSxyZqbFFhGxUm6smjRM55Lk\nHvSvNxXTY57kLT+9MNwKdhXGm5FIbkU7Bca1wMEVhaiuQcVhXWiZ14R6tHGanGBI2OtYkqEHjgVy\ns9ErEeo6UBsHipKEZs5qpPdRxcbhx70NCSuybTNWihc5brW9Fq6vjMnFSdEIdDRi8RRKygZbHFbu\nm6nb3RA3gMegNJhOm0jbXGOoxTuCc1Rz3FyoGKawz9KaAVcZqeMgCmIkB4FaUTbYwB6V00Fuzixb\n0SFMuDU8Mlbs4UPeXHeiOXkUrDuXYnyKk3cVk0ap6HMxxketSMhrcwRC0dMMZFMQ3yzSeVQAeUaz\n9Vj8uPd271nVV4m+GdpnHX67pCeKyLtBtNcR6xlk9RVeWTb3qRnO6trgttyIfm71z7ai8j7/AJmN\nDNqUVa5Yi1AnjynHuBV+11YJhWWXcP8AZNSzqgmaEerSsf3NtIQP4mGKtRavdRgMIpVI9KjU0a7n\nR6T43uYQI7qN2Tpkqciu503VVuQGAYZHQjFVc4alPlZrpKGAznpTwxOc9+lWjIlUACnM4XApiLNk\nnmvnsK0NvpXZRVonmYqV52GsmanhXitTmFkSiJTSAvwrxUxXIrJ7miOfjf1pzNWxkRlqYWpgJupu\n6gQbuahvIxPA6eo4pNXVioS5WmefakGhndH4INZs5DJXA10PaTurmLO21uKpSZqGMoXGnRzBiyjd\n9Kx5rcQS428fSkjanLoaOliHGZFB56VswW+mtPufcBsGOAfmxz+tFkd8HpoaUx09FAtFY8DO71qb\nSms/Nb7RbecG6AEjFLS5c78t+p0djpVs9wsyQiJAdyr1rW+zqjErzSe559Sbk9S3C+MA1bjbgE1S\nMSXzMVG0vNUI2tPKrAuCMnrVzNd0PhR49W/O2xrHmp4TxVMzQshpIzzQBehqesnuaI5VGzT2bitz\nFEbNTC1ADS1JupgG6l3UAc14s04yR/aYRll+8BXCtLncDXFWjys9TCz5oW7GddH5qqNzWDOgQnC8\nVSuo1kHzAGkPYopEY2+RWxV23Vzj5G/Kg3jWaNazhZuqNXS6TaKhB2c0jR1nJWOlhOxRxU4YkCgx\nY0OQatQyDbyaaFYe8uF4NY3iC9ltbVGj43NTIL3h7WzMihjzXVQXYYDdW9Cf2WcOJpfaRZ3g9KsQ\nmupnCLIabGeaAL0LcVY3cVmzRHIxtUhetzEjZqjLUAIWpN1ArhupwagAfDKQ3Q1594v0c2bm6tx+\n5Y8j+6ayrR5onThp8s7dzkZjuqAAmuBnqC7c0iwgtzSA0rWzjfGRW3ZadDu4AoNYo2rfS4v7orSh\n05UA2r0pDbsTm29KRottBNyJ0wpJ9KhD7f6U0ikNWffIFBz60zVUW52ow4UcUN6EPcx44WsbgOmd\nua7TT5Bd24KHnFKnLlZFSN4koluLdueRWvp14swweG9DXoxldHlTjYtzGoo25qzEvwtUxas2jRPQ\n5CNqkLVsYoYzUzdQA3dSFqBBmnqaBhuqhriCXTpVIzxUz+Fl03aSPI9QTypW2/dz0qKNw3SvOPZR\nMqin8VLKRcs3O4Cuk0w/MDjt1NBtHY6O2IIHY1pxgFaETIRwMkjtVSUEk4570MlFW5bap6dKzWm8\n1tqH8aY+hp2FvGoGayNevVt7/ap4xzUvYjqTLtvLPcvJxSaVcyWsxTnFZlnT2t15xHmCtOBYwQy4\nB9q7cPO+jPPxFO2qLEj5HWo42+aus4HpoX4W4FTF+KlotbHII9SFuK0MUNZqiLUDE3UbqBBupwag\nBc1DefPbyD/ZND2KjujyPWlKzuPesRZjHJXms9lMuw3StjnmphKDSLTJ7OfE3JrpbO4GQc9qlnRA\n3LO82k5NbFvdADkjBoCSHyXIIIzgVQvdRigT7wzjgUzO1jHknlvG7qnp61etYFQDIpCZoqVijzXn\n3iC8EmsOuaCGb/heR/s0ijkVv6fbxy3QMg5xmsnuX0Ldzut3+UYTPWk+2GJSe+M1pFtamcldalmx\n1eO4XaThhWnC+TXqR2PHqL3maUJ4qRjxSEjj42qXdxVmaGs1MJoATfSbqBAG5p6mgAzTJTmNvpQU\ntzzHXY83D/U1zF5FhjgV5r3Pa6FMsV5HWnLe7RhqBRdmTwagN2d2K2rPU1C5LAnPrUs6Iysbdrq6\nf3gK0BrUKj/WClY05iM6xLOcQAj3NT29uznfKSzHuadzNu7NSBFjHNSm5VO9IRnajqoWMhTzXFtA\nbvUfMduSeg702Qz0rS7FbTToQFwzjJqaGTFyfK5PQViyzUuFmuIdgGABya5u/vTaN5cnUHFUmLoZ\nzyskwlgJweSK6zQdUEwVJeGr0aUrxPLxEfe0OrhPAqVjxWhznGRtUwatDK4jNxURbmkAm6jNABup\n6tQAFqhupNtu59qUnZFwV5JHnWsHdIx96w5lz15rzT2uhRmt85xWbcxMnUGmZlB0bdxmrNvFIcfM\n350mWjbs7YkDJY/jW5ZWW4jikWkdNp9mqYJFaJdEHHakUULu/VB1rLn1Ld/FgetMGYd/qWSQmSa0\n/AemS32pfa7piLeLkg9z6UmQtz0W7uQ2cZx0A9BVzR7cAea6j2rPqX0L99KRat5A6Dk1wOoKZ52a\nYfMORTYRLujiGWEq6/NWza2yKQVHNdOHerRy4laJo6TTnbbtb8KuM3Fdh5z3OJjbmpt3FaMxAtUZ\nagBN1GaQBzTwaAAms3VbjERUGsa07RsdeFpuUuY4jUjljWTKK4j02RE4IpJYFk6imQkVl0xWarsO\nmAEcUi0bNnZBR0rWtoguMCkUi21wI161mXuocEKaYXMS4u+pY/hVCSWSY4HT0pEmlouiSahdpEBl\nmOceleiwWcNjClvHgJH97Hc1EmVFFi3Czy7mwIl/WtJbjP7uLgd/apQ2VNVvtsBhiPzdK5S4nAuR\nnqOCaTGi9pcytPlU+XpmumtWII44rah8ZjiNIXRuWeNvvViQ/LXpJWPJbu7nCRvVkNxVsxBmqJmo\nEPiXca0YLMuOlJsuKuPlsSi5IrNuG8s4HWs5VEkbwoOTKsk+FJY4rC1K53k1xTk5O7PSpwVNWRzt\n4cms+WpKICtSLTETQj5q0YeBSGiys23pUguGxQMq3E59ayrm4x3yaAKiRtO2WPHcmhruKFxFajzZ\nScA44qRHoXhuMaLpxaUg6hcDLMf4F9KlhuDeXGASIl+8azZslYma68y48m1+7nFW5rtbRNhb5z1p\niMKbUg0zuW4A4rPgb7VdKXOMmpA7HRbMS7nUYiUda0lkQOBngVrS+JGdbWLRt2bAx5BqeQ/LXpnj\nPQ4GJ+ashuK0MhWaoWcA0AaOmASMK7jRNPWYBmHyiuepO2x10qfcv6vYxCzYqoGK4HVYVTJrmb5l\nc6oaM5TUJ8EgGsG4kLNUHT0M64OaqMMikSRsuKbnFMRLG3zVehOaGNE445NNlnVFpDMu6uie9Vo1\n8z5mOAOST2pDK91cNN+5tsrH3PrW54a06KxT7fdrlh/q1Pc+tJ6IUdZGvHPLezMcnBOWbsPap5r3\nylFtbdT1xUWNWzU0/Zbwlgfmx8zGsHWtRHmMqE59aAMyNifvHPc1f0gtPdqkY5JosJHeNci2tktY\neuPnNY+oXWZEVJNrZ9aun8SIq/CzodHuriIokhDIR1ronbKZr0o6o8ipoz//2Q==",dle="\n/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAsICAoIBwsKCQoNDAsNERwSEQ8PESIZGhQcKSQrKigk\nJyctMkA3LTA9MCcnOEw5PUNFSElIKzZPVU5GVEBHSEX/2wBDAQwNDREPESESEiFFLicuRUVFRUVF\nRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUVFRUX/wAARCASwBLADASIA\nAhEBAxEB/8QAGwABAAIDAQEAAAAAAAAAAAAAAAEDAgQFBgf/xABDEAEAAgECBAMECQIDBgUFAQAA\nAQIDBBEFEiExE0FRBiJhcRQjMkJSgZGhsWLBJDNyFSVTY3OSNEPR4fAHFjWCokT/xAAYAQEAAwEA\nAAAAAAAAAAAAAAAAAQIDBP/EACARAQEBAQADAQEBAQEBAAAAAAABAhEDITFBEjJRIhP/2gAMAwEA\nAhEDEQA/APqYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAKNTq8OkxzfNkisQC8eb1XtRNbzXT4q7eU2nu0MntRq/D8StMccvW29ZmdvgjsTyvZjxOLj\n+s8WLxn8TFPXs6Oj9oct7c14rkxz22nrB2I49KOdTjelmszfmpMeUxv/AA28OqwZ4icWWtt/SUi4\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmdo3nsPNe0Pt\nFh09Z0+DNWL7+9O/7A3eJcZppsV5raI27esvH6jX5ddM25p79Ilo59VbUZOe2Tm/PeGvfPfT2iKR\nPLv1+DO678XmW/a97U6TtOyzTbTF538/T9WjTNecm9a7126tqk3rSYxY5ta1plRZqZNXGjyZcPXl\nmZmsx+qjBrsuO16xM7eXRt04JrdTltk5OWJnfaWf0a2lty5MdZnfzSn+WOHiOutFpjHa9e8bQ2fp\n+alYy462pk7zXbuxjPesbRS0f6ZZV1ET1tErzXFLHo+A+1ddZf6NrI8PJHa1vN6iJi0bxMTHwfOa\nzhzd61v1846utwniM6DUdb3nBaNrVmd9vjC/ZVePYirBqMWppz4rxaPgtEAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAItaK1m09ojcHnvarjM8P0vh49+a/eY8ng9D\nh1fGM1rxjtGPfvbzdbjuTJxHX48cTPNltM/KsS9Dw7S49Jp6UpHaGe2vjz1y9J7LYK13vHWe7bj2\nex1tvM80ekuxW3RnW3Vm6P5jRx8H0+OYmMcb+bapo8GKPdpC6bQwtdHU8JpWkdJ/JweL6e23iU67\nd4dubSqyVi9Zi0bwIs68XGp36TtEq7ZJmZmevzdbifCKWtbJinkt6eTgZPFw32t+sRurbWVzxs1y\nRv6T8V1NZNPtfq0seTm+Kevr+SZuxXjvaPiV8N4viycto9HseG6+uu08W6Rkj7UPmFck1tE1nlmP\nLd3eA8V8HVVi1pjq6Ma/pnqce/ERMTETHaUrKgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAADW19+TQ5p/p2bLS4v04Zmt5VjeQeJ4bjnLqsupv+Ka1+ERLv4reTmcNxcuC\nvy3l0qdI2hlr66sT02ot0ZV7qqrInruzrVZLGSZ37JjqgYTG0K5lbaFVhDT1Ub456RPweY4hixWi\neSdpjvD1eWejz3FNHWYtkpvFo9EIseb3tS3SerOms22rfpPqZKzvvHSYUz70TExG6Gdbs2rljeJ/\nMx5L0vEzPaelnOi98c9J2bFNTFpit47+a+PVUvx9T9nOIfT+GV5p3yY/ds67wvsXqpxau+G09Lx+\nr3TqrEAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADV4ljnLw3U0jvO\nO0fs2lWqyUw6XLkyfYrWZkHldBEV09eveG3Fq1mI3jd4vPrOIaid8G9MP3Y38k6fNrt/rMk9Ou8s\ntfXXn49rGWInuy8SO/k5Gl1E3rG/fzbOe94wTy99mbRvTrMOOvNfJWsesywniukrG/jU6fF43WYN\nTmtEeJtEQ06aSmK2+bNtEd+qfSO17unF9Hmvy1y13XWyVmN4tExLxVK8PmNq5NrT58zawam+m/yc\n0Xj8NpRYSvQZ7xEOdqI3rPozxayNRXe0ct/ON03jmrKB5nV4q1yTO20Obmv4c+cx8HoeI6WZpNoj\nq83niYmYscU0r8aJ6T1n49zeJ+Meqm1drb9J+Kd5p136StGVem9l9TbHxLDFp7W7+sS+q1nesT6w\n+PcAzVjiGHftzQ+v4f8AJpv6On8jH9ZgIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAABp8VrW/C9TW0ztOO3b5Nxp8VmI4bn37TWYB8f1HFtTfUfR9FWJmsdZ9I7MtJxDX5s\nd8ta1y0xzteaR2277rcuhycP12SceLxMeWNpjttHwlu8I0mfQ1y+D7k5YmJmY36T36Ka43z/AF1t\ncI1ds+qxVj7/AEej19PCw9HJ4NoK4OIU5Y35YmZdzVTGebVZabx5jJS+Tmns81rNLm1Wrzc9rVw4\nYibbem72mXTTS0w0M3BvEta1bWrM95ie5EanY87wXgNOL6XPfxraXLhra/W28bR/dzYzarBqJxRe\nbzE7Rt5vWU9n8mPHOGmS0Ypnea1naJb+k9ncNLR7u2y/WcxXO4TOoyUrN6zD0FaW5Y3hu49FiwUi\nKxCvLMR0hlW0jn6ukWw3iXjOJzbDlneOj3GaN6zDzfFOH+LE7SRGo83XNSZ2lbG2/WfdlvaT2cy6\nrNFInlrv1mfJ37cK4PwTTxOoidRm2+/2/KFuyMp47XB4LivXiunrH2b2iH2qn2K/J8x4fGDNxTSZ\n9Nh8OviRvTyfT6xtWI+DeXs9MNZubypASqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAOZx6/LoOWPvWiHTcf2hiZ0e8fc2mf1E5+vP/AEeuSd7RC2uKtI6QjHfeINTfwtPf\nJvty9WPfbt/lucP03gxfJf7d/wBoReYpm97zaNeLb4Ims9Nt94auDjem1Wo5PFi1onylS+1o7l8V\nbxvtupjDMdNkYtXS1+Stt+m63xImEJ4xjHER2ZxMUjeUTO3VRmydBbjLJqPi08mbeVOXJPq1sl5Q\nVbkz9+rRy35rxHqzmZlVEe/Ez5LRlW5iyfR6zffaIjq1OSNZps2a21rZInafSPJhxGMl9LStLRWM\nlorM/A4dkrWbYfLZC2W/7K6eubX6b4RzT+W76K8b7G6X62cu3Sten59nsm3j+OXz3/0ANGIAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0OIYfpOHPijvNNo+fdvtXJO18k/\n/OwPFYbz2ls3jx8VqW6xMdWPEdP9D4lkx/dt79flLLHbkxTPwY6nt2512ORTRzE2x4/dpE7cvkme\nE4IrW3hRMxO8THRtU1FKWtvtvK2upx22rzRCtXkqzh2jtF7ZbT122b01ndnpuWuP3Z3+Ky20qDVv\nfauzVy3mejZzNK8dVjqi87KLRLYtXruqvXzkQp7Qoid88R6rcl+WGlW0/Sa22mfhCZOq2x082ix6\njkm822pO8VrPdr4dNObVeDo8XW3uzMbzK+mvxT7szE27cvnu9j7PcNjSaXx8mOIzZevbrEeic5tN\n+SZnpt8J4fHD9HXHO3PPW0x/DeBtJxx29vaAJQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAKNRim9Z5e89Nl4DzXtVh5babURHrSf7f3ec1+qnDorWrvvt5Pccb0n0zhmWk\nRvevv1+cPE2rGTFNZU26PFfxwa5dVkjelI2772nZnX6bbrEUq3o0d678u8wmuDL2ittvVjXdneeK\ncGv4jpJ6U56+kS7+j118+GLXpakzHaWlp9NNY3tv+bbiYiNoQy1y30uyZJlrWmZnuym6q1iIJnop\nyW2Te8bdWnnypQqzZOadokiIpSZntWN5lrxki19vNRxrUeBwnNNd+fJEY6/OejXLn3Xe/wDp9wyn\nE8uo4lqqxblv7lJ26T6vpD5X7G8QycKzeBMbzMRM1/FH/wA/h9QwZ6ajDXLitvWzRgsAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAeL45w+dDrZvWv1OWd4+E+j2jX\n12jx67TWw5Y6T2nzifU+rZ1y9eHwzDYxxEy18+DJodXfT5o96vafWPVbjyxDn1OOzHudbM0rt2UW\niI69mVtRXZq5tREb9VUoy2iIlRbJ0UX1VZ6btTLrI7V6yk62M2oisT1c7JmtkttVMUyZp6x0beDS\nRWOvdKijDimvWd3G9pNRMfRcNfvZOb9Hpb0itJeP47k/3hgjaZnbaP1XxWW3T0movbNS0W645nbf\n0nrMPpXs3xamoxdJiLbe/X1n8Uf3fKsOTw4jbaXo+EarJhtGTHMxeJ6xH7Sti9Zaj6x3HM4NxXFx\nDS1mtoi8dJrv2l011QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAGjxLhODieOIye7kr9m8d4eM4to9RwjPXFa0ZIvG9bR0fQXmPbDFvTTZPOJmEWS/V8bs9R43NxLL\nG8eFbePg1bajU5/s0l1ceKLx1hbjwRE9mOpx0y2uRTSZsm3PMw2aaKtIjo6kYo9EXpET0hVLXxYK\nxC6MZvyx1lFs0RHfaPiCnU12pLyHGNDbUajBekWma2npWN3p8+opa20e9LSyZLxExTlpM+vdOdcZ\na9tPS8MyUvFrzWlI6727u1pYxYrbVmb7x+TQx6au3Nqcl7/0rcmW9axGnwZJj1novmxnZXV0fFp4\nZxLBPgTGK8xzXr5fOH0bFlpmxVyY7Rato3iYfNuG2x56Wrqa8s2jz+7Lu8O12bS6jkwzN6THNNI6\ntvrN68Y4rxlx1vHa0bskAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAA4XtTTm0OKfTJ/aXdcL2pyRGjwU362yb7fkJz9eTxxyZJjyltRXzUZK7TFtl9Lbwy06YzrHwa+\nfJFd/wCVt8m0bQ0eS2qzcm+1K/an+zNZFL5M1pjFXeI72ky48eGnPkvNp27+TPU6nHpMfLXaIjpE\nerk5dRMxOfN1mPeisfshW1ne1a1577Y6x5R3U0zze31FOWI6ze0byU098kRlzbxM9qrMlPDpyRMR\nMd5Vt/Ihp5898mWZm1pjftE91uCt7fCI7dWeHDEW3t723l6rslqxWZnasR+SYhFbzhnfxJ2jyeq9\nlcGXWZcmW0zWKxHLaI7794eJx5fpfEKabT8t8l5isddo3l9S4VjrwrRUwzSJt3tav3pdOL6Y6dXD\nj8HFWm+/KsU4NRXPvtWazHquWVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAa+fXYNP9u8b+kdZBsDkZOO135cWOZn4y5Wu4xqctbe9y19Kp4njt6vi+PDm8DFMWybbzPlV\n5PiGtz67UxbNbeKTtWIjaIXYpnwuaftT5tXJT3vmi1pMsrU5qIrG1V1a+5DCa7b9GFbRr5J6Wnbt\nCu+Wmk0m8956z8ZWZNorbfzcbX5rZslazPux3hUt41NTntktObJ13+zX1bek01r4/HzVm0bxPXy/\n+bNfDgjVa2uOY92kdfg6ufJOKvLXtttVVSqbcta2vM7zXtHpLQy5ZtMd+vWd+7Zy3mdJHXra3f0c\nvUarw7zFY5rT2hH1Lavnrgx81p3U49Pk4nE5L35MO/StfNRXR5tXnrS8W67WvfyiPSPi7uLHFK1p\njrtSsbR5Lc4RzsXBaYreP4l45esRD2HD9fnw6evvWvO3Tfr0aGk0U55ra0TFInv6uzgrXFXlx0i0\n77RPlC83Yj+JW7oddqr6vHzTTw9/f6dod+L1t9m0T8pcbFSmPHER3892W0zPuz+jSbVvidkcqmfP\nSel7bekrI4n4dZnPWIrHeYnZee2Wpy8dEaml4npNZblw5qzb8M9JbYgAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAABEzFYmZnaI7yCXL1XGa0jJXT0571nbee27DiXEprp8nhbxG20W8\n5cbD0ikfnKO+urTPvjoZdXqctdsmTaPSvRpWmsdZ6yztfaGplvv3lWW1tyRlz1x0vkn7Vo5atTNe\nY0+1o79V2KsZsvX7Ne5mwxnyTNvsx2iGneM/rCdRSuOsTasTt5kRFtpjqmOH4t4nk7estiMNa97R\nHwhna0iuKTEdmGWa4672nZtRele1N59Zlq6vLOSsYorEc07qcW65euzRvtXvPZy52naZ7ujr6fXV\nrWdukREK8+njHgmZmPc67bq6ivVWhxxgxZLztNrT1mZ/SP4VZs0zaOvfp84WUtNsXLvtv3699+rU\nz7+Jtt5qURqMnPpctaR1rMSw4ZoK57eNk6xHaJRh97Ltt7lo5Z+L1HAPZvVauZ2nFTSzMTzeJEz8\nto6xPfvsZntPZ9rXxabmxzefdrv0j1dXh/BcmstW1qxTHHasR3+b0GPhGl+kWmd64dNEVjf73T7X\ny8vy+Ddx6O3iRakxTH5RXrMw1/lX+3Itw2MFIraN48qRHdZi0cUjmmPen9noox1iO0fNzdXEYrTt\nstcmd9aX0bJ+HePmiKTitO8TMLZ1cVjrMfqpz6ys4pjfrPRWZ9rXXptUit6zO+23VyaRHEc05L1/\nw9J9ys/en1ljqdVbwYw452tlnl3jyjzbmmiMeKtYjpEbLeTXPUU8ee/+qjJpsV5rbkrFqzE1tEbT\nDpYNbW21Mnu29fKWna0KbqTdjXXjld0cvQ63ltGHNPSfs2n+HUbS9c2s2UASqAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAOVxPWe99HpP8ArmP4b+r1EabT3yT3iOkesvMVtN7za07zad5l\nXV5GmM9vVfEstvDx0jtaVVMlq+UJ18b5cMRvPeSuK87bUt+i2Z3PtG7zXpjkzXt6R+TXyTMzvM7t\nydHqZ+zhv1+Cv/ZuqvPTHMfOYaTMil1a1K2vHSLTELq2v+KWzThGo84rH5rq8JzedqR+ZeI7WnOS\n34pYTafWXR/2Pln/AMyrKOCWnvmiPyR6O1y9585lhWJvl557Q6eo4T4dYiMvW3b3UanhldHpJtGX\ne09unmjsT7eb1l4trI2t0hsZfrdNO0bzy+nzU20/+NmkzO9esz+TZxWis9dttvPv+Tn21jjaW8zn\n26bTG3mp1M/Wzv3t0jyWXiKZJmsTERaZhXXDbNl8WaztWenxZLstPp5pau8frDtVrNMM5cfTfpMf\n3aunxxbes9d/R09Dp8ebJi09ptFr3jtt2WyrW9wy1Jx132mK+Xq9PotT0iIU19ntLtExa3T47T+q\n6nBaYvsZstZ+cT/LeMnUi0TXffo1s2m8Ws2/OIMWk5Jib5L328rS2t94Sh5TV4ppklpW6PT6rh+P\nNbebTHyas8E081mZy5P2W6OFhjxNTE/hr/LoRO0Kvo9dPqctKzMxEx1la5t3tdnjnMs4noievcrO\nyZjeFF1OSnNV0OG62cn1GWffj7Mz5w05joovzY7xes7TE7w0xrjPeex6Ua+j1UarBFu1o6Wj0lsN\n3JfQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACrU5o0+nvlt92P3BxuM6nxNRGCs+7Tv8\n2hToxm1r3m9utrTvMsonqyt7XTmcja0u3O6FMfi5t/u0/lzdJM81p9O3zdvHTwsUR5+bfPqOfX1h\ndqV+3O7bs1+T31oqmI3TEM4rvCdkDGIIhlFd2daboS0NXG2bD6bufxXU1vlmu/u4us/N0+L1tTSx\nkr9qk7w89j1FNZMV3jxLzvaJ8mer+LSOZqK2xZotbvljfr/89U453rXt9lse081xZtNjx7TGKu0t\nDHlrevSevaN5Y6+tJ8c7VRNMt63n3ub+6/R54rERMztDYy4a5omclYmfxKcenrjtHLvtPrCnVmdb\neFe3JXmjy6eS/DrMuLVYsta9Mdt++6qLxO+0dEc8UmInr18iUfReHcXrqccb9Z27Q61Lb13eJ9nc\n1Z35rTvE9avY4bTkpG8xEfB05vYxqybc07R281naGMREdoT5JQqy9mply7Q3bV3iXG1eXw7TWSka\nc258t7+tpT5/BjT7MfHqndz12Z+M4lMMKyziUJJiN1WSu9fku23RaOgKNJqbaTU1t9yelo+D0cTE\nxEx1iXmM1Nt3W4PqvFweDaffx9vjDbGvxz+TP66QDRiAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAOJxzU73rp6z296zsZMkYsdr2naKxvLyObNOfNfJbvad1dXkaeOdpvsc2yuZVzfbfqybutwu\ns5s8R92J3dvJb3tnO4HSMegtmt3nfZvYp8SZl0z45NfSK7onH1bNcfRFqnUKJr0Y7dVtq7prjEsK\n0XVpEM6028mW20IHK41aPo3J6zs4ODhdcvPnvExFevNXpMOrxi/PlrTee7PLX6Pwa09uaNlKtHg9\ndM3z5d7ReOu02nu0JzZMfblrv5R5uvrcdImZ26T1mYhxs1Os7RH93PZ7axuafNfLitvbaYU3yZYt\nPXs9NwHhui1HBa5LVicsb81onrEuVqNNSuS8Y67dZ6xPZa59Il9uX41vEitImZme3q2Kxbxora0T\nMd/ROSa4Ztkj7c9OafL5LuGYubmyX3iu/TfbdSfVnpvZLT/XZK233+Mbbva1xRXyiPk8pwbH4N6T\nadq5a71n0tD1WDL4tPe6Xr0tDpz8YVnJHWEXYxbqlBedoef4tW0XraO09HdyztSZcbUz43C+ee9b\nSVMaeOfqq7+jGckQ1Yz7+7v2RN/WXPXZPjci2+2yyJaVMuy+uSJlA2d+pNoVRbeDcSxyTE+TDDlt\npdRXLTynrHrDOyiyZeVFnY9TjvXJjres71tG8MnJ4Nqt4tp7T1jrV1nRL1x2cvABKAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAHJ49qfD09cNZ97JPX5PPw2uI6j6Vrsl/ux7tfk1mWr7dOM8iLdm\nvfebREefRsWldw7SxqNbWbR7lPesrn3Vteo7dYjDpMGCvfbeXQ0uLlxRLRxROfUc34p6fCHYrXlr\nEejqrjY8uzCYW7MZjdVKqK9VlaxCYrsnYExBMRMJRPZA8/xPHtmpP9W2xx76vhWOInvt/C7ike7N\nvwzE9kcapGfhlevTaFbFo8RqJ5vy8/RoW09ek0msxHfp3dzNoLzp4zUmZpMbT8HJyYJi20X2n0lh\nZY1li/RaidBF4w2mK3jrHaFGp1lN+tptPp5IjBkid5mIp16TKu0abBPv33vPlM7z+iPdFNcWXU5I\ntkrNce/b1W5db1nTaf3ax9q0fxDW1ebNk2phty1mOu09VOm8W19orEz23j1TwfSeERFuEYMddptW\nd43dvBn21eKJ75KbW+cf/JcTgMxXTb3nbljz+TpcPmc2uyZO1KRtVtGVdi0bx07qJnllsRO6rNTe\nN4XVamsy8mnvPwc3R2jPwe8TPbdlxXNOPSZfhWWpwO85OFzv57qrODkzeHntSe8Sn6Rv0a3EZ218\n8nXekfr1a0ZLVnqx19dWb6demXybOO7lYMvNMdW9S/VVLo0us7tPHdtUtEwJiZU3jq2Jhham8CVG\nPNODNTJXvWd3qcWSubFXJWd4tG8PK3pPd1OB6veLaa89Y61/u2xfxh5c/rsgNHOAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAANLimq+i6O0xPv392rdeZ4rq/pOqnlnelOkIt5F8Z7Wj27I2I6sb25YY\nV1ImY3dbQ08LRc23vZp2j5OJG+XJWle9p2h6HHtbJXFT7OOIpX+7TxT31j5rycdTh+Dpz+XaG/sw\nw18PHWseULN2trBE9UcrJKBhFU7JAQi0dEomegNDUYovM7x3jb5tO1ZvpbaTLtzRExWfWPJ08kbT\nEx5NXWYYyV5omYtHWJieyeDzuizfRs19Jn6TM7Ru1uMcJxZqTkw+5f4ebqa7SV1MR4tdrx2vEfy1\naxqsNOTLjnLXytVXi3Xj8+nmsxTLM16d5npPyUzpekTtSK+U7vS6vQ/SYmK1vWPS1HOn2dvvvvE/\ntDO5XlcO+LbfHSd/W3o6/BdDOXPTnj3Kz38rS6Wm4FNrRyRzTH3p6RH/AKvR8L4dXSzE3jmtHn5I\nmbfqLV+m4dbLSsZInHjr3iI6zLpYaxS01rHuxHRHiT9mv6s67Vj1aqL6326MrWiYa+/Q54BxPaGe\nXRZpj8MquB4+Xg8zPnB7SX30to379GxpK1xcHiKz5IS8xr8PLPixH2bftLTy05o6dHYyVjLhy0t1\nizjZa3pMVv3iO/qz1G2L+NbSajbNyW7xLsY8kTDz+fJXFqKZN4iZnafi6WHL0iYlStI7OO+7axW2\ncrFl7dW9jvE9ULN+J3ZbdFGOy+AYWpEqN7afNXLj+1Wd23KrJVMvCzseh0+auow1yU7WhY4fCdV4\nOadPefcvPuz6S7jol649Tl4AJVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAV581NPhtkvO0R+4NPi2\nr8DB4dJ9+/7Q83Po2NTqLanNbLfvPaPSFDHV66sZ5ET0hRknyW2lTtMyouz0c8usx2n7s7vScKwx\nzc1vu/y85p+maJh6Th+SOWeveXR4/wDLm8v+nX5mUWa9bbrInolmu5jdTNkxYFk2Isr3TuCzeGMz\n+THdEyDDJO9Ja823rt2XWnya946pGvktDXta0ztWu/ybvLE9dkcoOf4GbJPWK1j49VmLh9JtE33v\nMevb9G7WsW8l1ccREISophiJ2jpDYpijbaOjOuOJ8ujOdqxsgVcsUjaETYvbaFFrgu5lVsm0yUtu\nryg43H5m+GIj1XcJzePoL4pnrWGtxmfchr8JvfHS1622if3QljzTTLes+qrNjrkiYtCzPMxnm095\nYZJ6boS5teB49Tqscza97VtvWvlv8V/FOF34RrIxTM2xXjelp/eHoeA6XnzReY3ivX/0dfivDcfE\n9HbDbaLx1pb0lOs+jO7K8Lis3cN+0NKcd9PmthzV5clJ2mF9J9GHHVL108dm1SznYr/Ft0tuhLb8\nmNohFbMhLWy0mJ3rPXvDvcO1karBG8/WV6Wj+7kWrvDDBlvpdRGSnbzj1hpjX4z8mOx6UYYstc2O\nuSk71tG7Ns5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZ2jeXneJ62dVl5KT9VTt8Z9W9xbWclPo+O\nfft9qfSHEU1pv48ftYST23ZTDC/p0YtlVuvVjMbM5+LCZjYGWGdrTPxiHY4ffaf3cjTxz1v6xMS6\nOlty2iXVj/Dk8n+ndrkhnGRo1v8AFdW3RCrZ5uiYsqrboncSu508yjmZRYQt50TfowYTbYGVrKrT\nuTZjvukQnYhMIGVY2ZxPVWyrHVCWzXpVXkt3TE7Va+W4K7X3jv1auTNy3jdba0RZpamfroQN7Hk3\n6wr1GTaN2OOJiu6Mu98NvgDi8Wy74d/yZ8PiPAiO2zU4nb6qIn1bugjfFE/ASp1ke9u15mbbRDZ1\nMb823kx0Ontn1OOkedoJCvT8I03gaKsz9q/WW+isRWsVjtHRKyrhe0XCfpWL6Vgr9fjjrEfeh5fF\nfeH0V5Dj3DPoOo+k4a/U5J6xH3ZZ7z3228evytOk7NvFbo0cdols47bSybt7HbddHVqUs2aW3Qnq\nxVeu8LILR3SlZw3V/R8nhXn6u0/pLuPMXjeHT4Zruf6jLPvR9mZ8/g1xrvpz+TH7HUAaMAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAABRq9VXSYJyW79qx6yvmdo3l5viGs+maqYrO+OnSvx+KLeLZz2te1rZL2v\ned7WneZYWnZl5K72YV1xEyxmeqJljzIEWlVkszvbZp5soN3h2SJz3pP3odCnuWmPRxuERfJrZmtZ\nmtY96fR28kbX3dXj/wAuTyf6bmK+9YX1s0cNtm3Sd4LFY2K23W1s16StiUJW7bp22RW3RluBuruz\nmWEgrmCGWyNkoExKE1QlPmsqRDKeyBjaejWy2W3ttDUyz1QKslvehVqKTNosyyTvELabXptIJpaP\nB39Ia2mz+JGpr51jdZefDx2hzuHZObNq58poJaGtjxJ2+LoaKP8ADRPo5+T3skx5OhpOmC0fBNQ0\n5yTbn+bt8A0u9raiY6RHLVwY62mI6zMvaaHBGn0mPHt1iN5+aYVsACBXqMFNTgviyxvW0bSsAeE1\nmkvw7V2w5Ote9besJx2er4rw2nEdNNekZa9aW9JeQjnxZLYskTW9Z2mJY7zz26fHrrdpbZsY7NGt\nmxjvso1b9NmUwpx33XRO4K7VUTE1nmrvEx1bVo2VWiJE/XY4frY1WPlt0y17x6/FuPM0m+HJGTHO\n1qu9pNVXVYt46Xj7VfRtnXXL5MfzexsALsgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHM4jxOMFJphmJv529Dq\nZLfjDjPEIx450+K3v2+1MeUOHSOWFc3nJkmZnf4yujpVlqunOeFpV2nctLCZUXRM7MJtsWlRkv3Q\nky5NmpWt9RnrixVm17TtEQnJabXisRMzPSIew9n+CRoccajURvqLx5/chfOest642OGcIpoOG2w7\nROW9d72+LQvXevyejcPUU5M+SvpLeOataraw2a0dLbLqTtK1G3Es4lVWWUSoldFtmcXUbpidgXzK\nGEW3TuCUSncnsDFMMLSms9EC6J6FpVzbZE5ALy0809ZbFr9GtfrEoFMzuuwz0Ueey3HbaBLDXe7i\ntMOfwWnP9I+NZbuttvhs1uBRtXPb4SDm3iIvf57N7Dbl0VrS5+XrltEd+Z1Jx7cNms9N4TURRw3T\n+PrcO3WszEvZOD7P6aYiMlvu16S7y1QAIAABxOPcLnUY/pWCv1tI96I+9DtgmXl68Biy7/NtUu3+\nO8HnFa2s0tfd75KR5fFyMWTdhrPHVnX9R0cd21S3Rzsdm1iuqs256wrmGcT0RYSx5d047X02SMmO\nesd49YRE9WcdSXhZ2O1p89NRji9J+cei1xMc3wXi+KZj1j1dTTaqmor06WjvWW+ddcu8XK8BZmAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAMMmWmKu952UZ9XFZmuP3revlDTtzWnmvO8q3XGmfHb9ZanV3yxtWeWn7y4es\nvPNtDqZJ6Ts5mppvdl/XXRMyfGvSNlu/RVvtOzLfoipLT1VTKbSpvfogRkvtDVyZOhkyvQcA4Dzz\nXV6yvTvTHMfvK+c9U3rkW+zvA/D21urr789cdZ8vi9KDb45rejl8Rry6iJ/FV1HP4vXbBTJEfYt1\n+UpiHM295bXsqrO9l8QkZ0lZEqqLeyBZHZLGvZkhIndADKJ3TMoqWQMZ6pjsxll2jsCLSrmU2lFY\n36gieyu0LJk3jbsga0wdqzK20QpyztQGprL/AFMrOE05NLkt6qdVWZxNrSe5o9vWBLiUjnzXn0vL\nq555dHt8HOwV928/1z/LpzXxbYccRvzTB+jucOwxh0dI22mY3ltIrHLWIjyjZKyoAAAAACJiJjaY\n3iXleM8InR5J1GniZw2n3oj7s/8Ao9Wi9a3rNbRE1mNpifNFnVs65XhcWTdt47bnFuF24dm8TFEz\np7T0/pn0a+HJux1OOrOux08d1ndqY7tillVkzExLOk7yd4YxGwluViJhE45raL0na0dtlWO0+bZr\n1TKi+2zptZGTamT3b/tLacvJjiY3XaTWdYxZZ6/dtPm1zrv1z78fPcbwC7EAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABhkyV\nxUm152iAZWtFazNp2iGhm1Vss8uP3aevnKrNntqLdelI7VRHRnrX/HRjx/tZREVjZXeybW6KbWZt\npCZ6S08tN7Nmbb7zCrJtyoS5145bSx5mWafelr3tsKmS/o08uXyhlly7RPV2+AcBnPNdZrK+53pS\nfP4ytnPVda4y4BwHxOXV6uvu96Unz+MvVxG0bQRG0bR2G0nHLb2gCUDX12LxtFmpHeazt82wT1gH\nmMN4tWs+rcr2aEV8DU5sM/cvO3yb+O0csLUTSdrLphRE8tlkZI7Atr2ZMazDJVKTYSCawi7Ksq7z\n1QERvLK3ZGPrKbyCrbdnMcsbeaa18/RhvvM7oGEwTG0JmYYTIML22a2e28xELM19oURPNO4lOem+\nn3ZY5+prVnMc2GYU4/L4A0a15cNf6rz/AC6fC6+NxCPOuOu/5tHJTbHj+F5/l1+BYumXJMd9o3/d\nMRXYASgAAAAAAABhlxUz4rY8lYtS0bTEvH8R4ffhmo6bzhtPu29Pg9mq1Gnx6rDbFmrzVsizq2df\nzXkMWTeIbNL7tbXaHLwzUctvexWn3bmPL8WFnHVL326VZ91MfFVjvvVlz79kLrcf2m7j7bNHH3bl\nJ2SirLQoy4t1++7G0dBC/RanxI8PJPv18/WG241+alovSdrV6w6mDNGfFF4/OPSW2b1zeTPL1aAs\nzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAVZ9RXBTe3WZ7R6iZOpzZq4ac1p+UermZMl89+a/byj0Ra9815ted59PQ32hlrXXRjH\nDpCLX6ML5NlNsm/ZRqstfdXzbsZt06sLZNvNB1Za8RDWyZdo7q8udq5Mu/mIMt4md2lmy7JzZuWJ\ndHgfBL8RvGo1MTXTxPSPx/8AstJ1XWpIs4BwSdbeNVqq/URPu0n73/s9hEREbRG0QUpWlYrWIisR\ntER5JbSccur2gCUAAAAPM8Sry8Uyz67fwuxbzVPGsE49XGbvF42V4M0TEL33ERnktsxpk3sumK2j\nadmFdPFZ33VS2Mdui2J3UU6LYlFSsN2O5NkCyJ6K7T1TEsbAsxdpReerKkTFGMxvYEz0rsqtbbpC\nb2VT1QEzuwtbaGUxspuJU3neWdKoiu8rq12gCI92YatLcublnzbEz1aOptyZqTuDHLfxN6R0+t5X\nqdJhjBp6UiPLeXl9NSMnEKxHa1+bb8nrlvxUAAAAAAAAAAABTqtNj1eC2LLXeto/R43VabJw/VTh\nydY+7b1h7ho8V4dXiGlmvbJXrS3xRZ1fGv5rzeHN02bEW3cys3xZJx5ImtqztMS3MeTeGFjqlb2O\n8btql3NpbZtYsnSBLeiWfdTjtutid+ghherHS5p0+f3vsX6T8Fkw181d4lMvEWdnHaGnw/UeNh5L\nT7+PpPxbjdyWcvAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAo1Oprgr63ntAmTqdRqK4K9etp7Q5d7Wy2m953lNrWyWm953mVd77R0\nZa1104xxlN9lV8qnJl2a9s3xUXX2ybsJyRDWtl3YWydEC+2VRkzeW6q+T4tbJm+KRdfK1cmWZnlr\nvNp7RC/R6HU8SycmCk7ed57Q9ZwvgOn4fEXtHi5/O9o7fJaZ6z1uRyOEezVstq6jiEbV71xevzer\nrWtKxWsRFY6REeSRrJxz22gCUAAAAAANbX6aNVpL0npMRvWfSXlKamsRMVvXm+EvZXjmpaPWHzfL\noNRjzXicfWJ8phfPxFejx72x7xMzK+sXiNoiXlq+Pi6fWV/VfTNqfLJl/WTg9Pji8R70LqvMV1Gq\nj/zcv6yz+lanzzZP1lWpelTET6S81Gp1P/Gyf90s412rjtnyfqql6asREdWM9+jz9eJ6yP8Az7uh\nodZqMt458tpB1JvEViI3/RhzRt13/R1MNaziiZiJn5K9ZNceKZiIiQcu/WekT+iYrWI3lzdTrs+8\n8uW0fJzcur1Np/zsn6g79phVaIeetqNR/wAXJ/3SwnUaj/i5P+6UD0ldonum161h5mNRqP8Ai5P1\nlNtRqJjacuT9Qd22WN5aGeZyZd/KHJy59RHbLf8AVq31Gp/4uT9ZEvS8Lr/vSs2npzRtL1z53wK+\noza/HW2XJNd99pmX0Rb8VAAAAAAAAAAAAAAcHj/C5yV+l4I9+v24jzj1cLFk8nu5jeNpeW41wmdL\nknU6ev1Vp96sfdn/ANFdTrXG+eq1q5F2LLtbZoY8m8d11bbSydErsYsm+zZrO/zcnBm226uhiyRK\nEtrvCrJDOJTeu8A1MWX6Lqq5N/dnpb5O5ExMbx2cPNTeJb/DM/iYPDtPvY+nzhri/jDy5/W6AuwA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAa2p1UYo5adbz+xbxMlvqJ1OqjDHLXree0ejmzNrWm953tPmTPWbWneZ7yoy5YhjrXXTjH8s75N\nmtkyxt0VZM2/m175N1V03yTKubMLXVXybeYLLX2VXy7eam+b0bOg4VquJW+rry4/O9uyZOq3UjVm\n9r25axMzPaIdvhns1kzbZddM0p5Y47z8/R2+HcF03Doi1a8+Xzvbv+TotJnjDXkt+K8ODHp8cY8N\nIpSO0RCwF2YAAAAAAAAACvUZYw6fJkntWN3k8dfHz2vLucdz8mkjFE9bz1+UOZosX1UzPm0nqI/W\nMYo9FlcPNklfFGeH/NshLGun+Cz6PtHZtVZWlRLS+jxPkRpIn7rdoupHTdA5s6SI+7H6Mfo+32Y2\n+To3neSIiZ7A0IjPXpXLePlMotGW3272t85datKzHZjbTVnsDj+FG/2Y/RlGP4R+jo20u7H6N1Ql\no+H8I/REY957R+jpfReiK6eOYHLtj2tttH6KrY/6Y/R2c+kjeJiFVtLG24hxpw7/AHY/RRkw9O37\nO99Hrt1YX0tfOBLjcGp4XF8c+u8fs9c4dcVcGemSI61nd3IneN1orQAAAAAAAAAAAAABFqxes1tE\nTE9JiUgPKcX4RbRXnNgiZwWnrH4XPi28PdXpW9JraImsxtMS8pxXhF9DecuGJtgmf+1TWW2N/la1\nL7N7T5e3Vy6W3hsYcvLbqzbO9jvvCzvDR0+XeO7crO6FmGSvRThy/RtVXJ92elvk2rRvDUzU7pl4\nizsd2J3jeBpcNz+Lg5LT7+Pp+Xk3W7js5eAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADs0NTrN96Yp6edkW8Wzm6+LNTq4pvTHO9vOfRoWtt\n1mes95YWvs1s2fZldddOczLPLn2ju0MmebT3YZc2/mpm3qqllN1drsbZIhr3yzvtHf4AsvlYYseb\nV5Yx4KTe0+UQ6nDvZ3UazbJqd8OKeu33peq0eh0+hxcmnxxWPOfOfm0mP+steT/ji8N9mKY9suum\nL37+HHaPm9DSlaVitKxWsdohI0Y22gAgAAAAAAAAAABXnyRhw3yT92Nwef4xm8bVzET0rPJH5d12\nCvLhho3rN9RWs9Z23n5y6O21YhrVYbdGOCfrrLPJRpv863zVS6FS09SvZj3lVZZRdPSqmnSWdrIE\nebOkK4ldTsgW1WKqd1oMZhEVZyRAImOjGI6rJ7IiATNd46qL02bHkiaxaoNGY2n4ImPgtyV2n0Vo\nGvlx7x2beiyTk08RPevSVUxux00+Fn2n7N+n5rRFb4AAAAAAAAAAAAAAACLVres1tETWekxKQHlu\nL8InR2nPp43wz3j8P/s5dLveWrFqzW0bxPeJeV4xwmdFec+CJnDM9Y/CrY1xv8qvTZ+WYdbDk5oh\n5zHk283U0eo3jaZZ2N5XYjrCnLSJhOK+8d1kxvCqzSwZvousrb7k9LfJ3nB1OLeJdLhufx9LEWn3\n6e7LXN9Ofy5/W4AuxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAETaKxMzO0Qi9646Ta07RDmZ9VbPbaOlI7Qi3i+c3TPUaqcu9adKfy0722ZXvFa9\nXO1OrjrESxt66ZJmcjPUanlidmhkzTZVfLN5VWvsC2b7R3U3yqrZZtO1esz2h2+F+zWTUcuXXTNM\nfeKR3n5+iZLVbqRzNJo9TxHLyaekz62ntD1fDOA6fQbZL7Zc/wCKY6R8odLBgxabFGPDSKUjyiFj\nSZkYa3aALKAAAAAAAAAAAAAADQ4pl2pTFH3p3n5Q33E12Tn1eSfKscsLZ+orS00eJqbW+Lfnu1tF\nXaJnZsz3WpCfsyp00fWSvmPdVYOmSUDd8kR3InoQosy7JmUX7MdwZ17ro7KKT1XRPRAsrO0rYndr\n79V1ZBaQiJ6JgCSIJASwrO07MpV2nqBlrv1a1o2bf2qtfLXaQUTO0sb05o3jv3ZXhjS20xEphW5h\nyeJjjf7UdJWNKLziyRePsz0lux1SgAQAAAAAAAAAAAAAADG9K5KTS8Rato2mJZAPIcU4ZbQZuekT\nOC3afT4NXFkmlntc2GmoxWx5K71tG0vHa/RX0GpmlutJ61t6wrY2xr8dXS5uesN+tt4ef0eaa223\n2dnHk3juyreM81OaFGiy/RtZET9jJ7s/2bdutd2jqKeic3iNTsd8a2h1H0jTVtP2o6W+bZbOO+gA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABje9cdJt\nadohGTLXFTmvO0fy52bJfU23t0pHaqLeL5xdK9Rnvqb+cUjtCi94xxvK3JetKuHrdZvaa1ljb10y\ncnIs1Wt3naJc++TmVWvMz1YWybfMGdsm3eWek0mo4jm8PT0mfW3lDf4V7P5tdMZdRviwfvZ6/TaX\nDpMMYsFIpWPTzXmf+steT8jn8L4Dp+HxF77Zc/4pjpHydYGjC3oAAAAAAAAAAAAAAAAADG9opS1p\n7RG7zszN6WtPe0zLua+3Joss/wBOzhzG2OsL5+IrY09dsSyYRijbHEMvOChb7KjF0yS2LQ169Mso\nS24noyrPVXWejNVKbTuw3T3REdQWU6LYlVvsyiUDPfqupPRr79VuOQX1lZEqoZxIMksd0gT2VT0l\nbPZVbuCaW8i8bwr32WxbcGnkjaZa9p2ndv5qbw5+aNugLItF6TEtvTX5sMb969HMpfazc0d9stqe\nvVZDdAQAAAAAAAAAAAAAAAADV1+iprtPOO/2u9bektoB4TJTJpNRbHkja1Z6uto8viVht+0HDvpG\nH6Tjj6zHHvbecONw7Ltfkmeqmo6Ma69DXbbZTkr1mGWO3RneOaGbZRoM30fVzSelMnT83aef1FZ7\nx3h1tBqfpGnjmn369LNc3sc3kzy9bQCzIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAa+q1dNNXr7157VhGp1Xh70x+9f9ocy283m1p5rz3mVbrjXHjt91lz\n5c9+fJ1nyjyhdM8lZlOOIiqrUXikd+kMreunnI5XEdX4dZiZcG+XmtNl/F83PeeWWHDOGanieSKY\nq+5H2rz2hMzWd1Iqx1yajJXHhrNrW6REeb1nCPZumn2z62Ivl7xTyr/6uhwzhGn4Zj2xxzZJ+1kn\nvLoNJnjHW7TbbsAszAAAAAAAAAAAAAAAAAAAAaPFrbaSK/itEOXt0rDf4xb/ACa/GZacRvaF58Q2\nIjasQnzPIhCU92tMbZGzHmotG10C6nZkwpPRmipIllEbMIZIE7solgmJBnCyk9VMM6z1BtVllEqK\nz0WRILYlluriWcSDJVbusV27gwInaSWM9ECyZ3hqamnSWxFmOSOaqRx725bNnSZNs9J+OynVY+WZ\nYYr7TE+nVaIr0Ais81Yn1hKAAAAAAAAAAAAAAAAAABExvG09peU4nov9n66L0j6q/WPg9Y1OJaON\nZpL0+9HWs/EWzeVz9PbmrEtnyc3h9reHy26TWdnSr2YX6657ijLXpLX0+onSamL/AHJ6W+Tbv2aW\nekTv16JzeI1Ox6KJiYiY7Slz+E6jxdN4dp3vj6fl5Og2clnKACAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACZ2jeQRMxEbzO0Q08uqtkma4ulfO3r8lefUePMxWf\ncjy9WvlzVxV6T1Z61/x0Y8f7Wc7Ur1lqVy+LqOWJ2hp6rXddon5rOF1tfmz5OkT0qzb8dWbxjp1c\nbiuuilJ5Z6r+IcQrixzEy8zl1E6rNt1tMztFY81sztU1eRucN4ffi2p5esRM72n0h7rS6XFo8FcO\nCkVpX082nwXh3+z9FWLxHi36328vg6TZyW9ABAAAAAAAAAAAAAAAAAAAAAADj8Unm1tK/hqppHvw\ny1k8/EMk+m0GOPeafiFpCZYwolnXspvHvLa9mF46gmnZmwozRUiUCBKYYsoBLOFbKAX0llEqqyzi\nQXRLOJVRLOOwLIljZMEgrlhKyYYTAK5nZPN0RZjugUanHzVlz6xtLq361c+9eXItPpXX0dubTU+E\nbL2lw2++O1fSW6m/VYAISAAAAAAAAAAAAAAAAAp1GbwcfTreelYEydcuMcRrM/L9nnlsV6wqpi2r\ntv133mfWVkRyRtEdGFva7MzkYZNoamWN4bV4mYa9qztKIujhVppxGI8r1mJegeZpknBqKZY+7L0t\nLRekWrO8TG8Ns/HJ5ZypAWZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAADS12fp4VJ6z9qVuq1HgUiI+3bpDl589cOKZmevqprXPTbx477rDJlrhr1nq4+s182tMRP\nRqaziXiZJrWekNG17ZbxWJ336M5LXRbI3dLTJrs07RMY6fan1dHLrowY+X7MVjt6N3R6Kul0EbWm\ns7bz8Z+LnabQX43r7Y53php/mXj+Dnv0f1JO1x/8ZxbUzj02O15mfLtD13AvZqnDds+pmMmo26el\nXX0Wh0/D8EYtNjilY7+s/NstpOOTW7QBKgAAAAAAAAAAAAAAAAAAAAAADG88tLW9I3BwJtz6nNf1\nvK/DHVqYJ3pzT5y3MPZeojOWMQylEKpTVjZnDCwkqzYQyRRICATCITAJZQxhMAshnEq4ZQC2srKq\nqrIBZCWNZZgwswmFloVyCu0dFcx1WyrtCBhv5NTPHXds2U5o3hIz4ffbPt+KHUcTSW5c9Jme0u2v\nVYAKpAAAAAAAAAAAAAAAAYZctcVOa35R6tLrltN795/YvknNqrfhpPLH92V5isd9mWq6fHjk6rn0\nZxG8KK5Jm/wbVZiYZtqrmkqL023bkxvCiY3lJHNyRG81mHS4Rn5sNsNp64+3yaWaNrzOzHBl+i6q\nmT7s9J+S+ay8mex6EIneN47SNXKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAImYiJme0JafEs3h6fkidrZOn5eaLeJk7eOdm1Hi2vmtPTry/CHmOJcUvmvOPF1n09Pm\n6HF9ZGm01qxO3R5vSY7XwzmzTy47zzTEd7en5Mfvt2/PURWdo3tvPrPlKymbktFqTtMTvHzbOLDG\nf63JXbFX7FdnoODcDprZpq9TjiMMTvSn4vj8l5fxnrk91saPSa7i2hpOfbTVt5x1m0fLydzR6PDo\ndPGHBXasd585n1lsRERG0dIF5OOe6tAEqgAAAAAAAAAAAAAAAAAAAAAAADX11+TRZrf0y2Gjxe22\ngtH4piP3TPpXKwxtjhuYo9xq442iIblI2pC1RET2ILd9kxCqRjZmwlCSEohIJAQAAJZISDKGUd2M\nMoBnVbVVCyAWVWeSuqyOwIlXZZKue4MJV2WWYT2QKbKL9YlfdRdIo35b7/Hd3KTzUrPrDh27uxpb\nc2mpPwX/ABX9XAKpAAAAAAAAAAAAAACekTIp1eTwtJmv+GkyJn1oafeazbfpMzLR4jq/o8b823zX\n6XNF8ERCvTcNpxLV5LauvPhx9Irv3lhztdtv8TtaWLicXrt03jzjzb2k1nid56ty3s/w+a7Uwzjn\n1raejlarhmbhl/FpbxMO/fzj5p/ixSeXOvTtRfeI280ZI26tfDm3pWe63LaZx7qtGvniJ6tPLvOK\nfOa9WzbJvTbza02jl3n5SSljscK1MajSxWZ96nSW88xw/VfQ9XMT9nfa3yemid43jtLeXsce88qQ\nEqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADia3UTm1l4j7OP3Y/u\n7Vp2rM+kPJW1PhYcmS0+9MzKm/jbwz31weMzbV8UppazPL9q0/BF4rk1GLDSNqxPWPhCnHmnNrtT\nqPKteWPm6U6OdHaZvO+SaRNvhv12Ub/q3FhtrNVj0uKOt56z6R5y9zix1w4qY6RtWsREOJ7L6OKa\nS2rvX6zNM7T6Vh3mmZyOfya7eACzIAAAAAAAAAAAAAAAAAAAAAAAAAAczjVvqMVfW/8AZ03I41bf\nLp6/OVs/UVrY47NyOzUxd4bUJpEbb3Z7IiOrKIVSjZhMLJYyhKIgmGUQSDESIEbJEgQmCITEAmGU\nIiGUAyhZVhDOoM4Wx2VQtqBKuyyWEgqlhKyyuyBVaGtkbNmvk7A15l1eH2300R6TMORPSXT4ZO+O\n8fFefEX63gEAAAAAAAAAAAAAAAq1WPxdLlp+Kkx+y1Fvsz8gjhaDauGK8sx07y3OE3m1tT6RaP4c\nvU6yMNKUx73zT0ilY3l2eF6a+m0kRl/zbzz3+Ez5M8z26fJruW6wzYq5sV8d43raNpZjRzPPaTmx\n5b6bJ9rHO3zb2WJ8GWPEscY9bgzxH2t62n19GWW0eHOzHU5XbjXZ1x8WTnz2iZ7S2M1IjH2+LX0V\nKTqs8zO9ot0j8nUthi1J3UaOFMTfLFo6xMbS9BwHWTqdHOO8+/hnln5eTjYMFo1WTH5VnePzXcIm\n2k4zlpPSmXy/hfF5eMfJns69OA2cgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAADG/2LfJ874rW845mubliY7bPoto5qzHrDz0+yePNF41OotaJ7RWNtpV1OtfHqZ715fhu\nj8adNpcVfeyzE2/vLuanhOu1nEctIxTTFa/+ZPbZ3eHcF0vDbTfFE2yzG03t32+DokynXl9+leDB\nTTYKYccbUpWIhYCzEAAAAAAAAAAAAAAAAAAAAAAAAAAAAcXjE/4zDH9M/wAu04XF5/3jj/0f3Wz9\nRUYmzDWxS2I7FSyjuzY1ZKpRKEygEwiWUIkGIk2QJNhKQhMIhkCYZQxhlAMoZwwZwgWQshVCyATL\nCWc9ldpBhZXLOVdpQK7NfJPRdaWvknoDVvPvOnwuel4+TlXn3nS4VPvXj4QtEV0wAAAAAAAAAAAA\nAAAAAVV02CmTxK4qRf8AFFeq0AAAanEsfPpZmO9Ji0NDLfkwdOsulrumiyzHlVzJrz4Ovoy26vB8\ncTBa9NffLtMY77Rv8Yegx5ImkKdJoY1HC81Y+3OSbVn0mGGkmbY45u6tnrrTOu2xGO0RxCd+nNVj\nqKxTV1vH2pjaGtnyzXXYdo96ZmGXEMk15b7/AGZiVerWPTYckZcNbx5wzc7hGbnxXxzPWk7x8pdF\n0S9jh1OXgAlUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAcPjEf4/FP9H93ccXjMf4vDP9Mx+62fqKrx+S+GvibEFSsqyYwlVK\nZYsmIMoRKYJQIPIEiQ2ATCUQygCGUIhMAyhnDCGUIFkLIV1ZxIMpVWWSrsCuyqyyyq09ECq8tfJK\n66jJ2Bp5J6upwn7dv9Lk5J951uE/av8AJaIrqAAAAAAAAAAAAAAAAAAAAAAq1Mc2myxPnWf4cmtu\nXT9fR0tffk0WSe28bfq5Wbamm3326MtunwfK6PCv/AxPraZ/dz9PO97/AOqf5dHhdZrw7Dv3mOb9\nXOxRFM+avpe38mvkPHf/AFWlrKba7Tzt99ZxKkfR7euyNXMTrtPHfa0z+zPiM/UR8Zj+Wbdu8HpN\nM2bfzrV13M4dO2pyR61dNvj44/J/oAWZgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADj8bj63BPzdhyeNx0wz8ZWz9RWri7Nmv\nVrYu0NmqaRZHZlDGGSiwxZSgCEkCBCQSCQBMJRCYgEsoYx3Z17AlMIhlCBnDOGEM4AlhZZKq4KrK\n7LLKrIFN2vdfZReAaObu6/CO9vk5OePR1uEd7fJeIrqAIAAAAAAAAAAAAAAAAAAAAGtxCk5NFliI\n3mI32+XVyNTyZOHTee946PQKPoeDffw4777eW/yVs60xv+ZxOnr4Okx1t05KRv8Ao41Z5q3yed5m\nXY1szXRZ5jvFJ/hxItP0aOSN9q7yrtr4f2tHFM5+KT16Yq/vK/iGSbXw4vO14UcPx5MGfNbPG18m\n1oj4THRsTw7VanPXVYpi3gzMcnrvCnG11JOupwuN8+a3pEQ6jT4divjxWnJExa09pbjbM5HHu90A\nJUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAHM41H1GOf6nTc/jEf4Ws+lls/UX45uGekNujTwdm5RNIthKIZKLDFlsiQIShIC\nEgCUJ7AmGTGO7IDzZQhMSDJMMYZQgZwzhhDOATuqssmVdgVWVWWyqtCBTeVF19lF+wNLNG7q8I+9\n8nLyupwnt+S8RXUAQAAAAAAAAAAAAAAAAAAAAAAItWL1mto3iY2lyrcLyUxzix2ia2nvPeK+jrCL\nOrTVnxpanhuPPemSs8l6RtE7dJj0ldpNP9GwRSZ3neZmV4cR/Vs4AJQAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANHi1d9H\nM+kt5ra+vPoskfDdOfqK4mn7Q3aNHBPZu0W0RdDOGFWcKLCJZeTGQQlCQSgASBsCYZQxhlAJTAmA\nTsmAgGcM4YQyjsgRLC3VnaVcgwsrt3Z2V2QK7tbJ1bN5a9waeWO7p8Knt8nNyebpcK8vkvlFdQBA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAK9RXmwZI+ErEWjesx6wQeZwejeo0cccuW8\nelpblJaaRGxVnCuss4ZrMvJEgCAASISCQIBlCYYpieoM0wx8k7gzIRueYM4Z79FcSy3QEsLJmWFp\nBjaVVpZWlXMoGNmvkXXlr3kGtknu6XCf7OXkl1OEdl8orqgIAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAHmskcmtzV/rls0U62OXiWX4zErcc9GmkRfWVkSqqziWayxCPIANwBIhIJSxS\nCRG6dwZwlhEs4BluMdzfqgZxLLdXuy3AmVdpZTKuZBjaVVpWWV2QlhZRdfZRcGpl7urwfrzfJy8r\nrcH61vPyWitdMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHA4nHLxKZ9awnH2ZcY\njbW459aq8fZpfiI2IZwrqzhmsz3Ebm4JN0AMhCQSIASndiAziWUSriWcAyRujc80DM3RCfIETLCW\nUsZEsJYSslXZAwlTddPZTkBp5e7r8Gj6rJPxhx8k9Xa4PG2C8/FaK10QAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAcfjcbZMFvnDWx9m5x2PqcNvS+zSxT7sNPxH62YZQwqzhRZO6UCB\nKUAJTux3SDIRuAncQAmJZRLBMSgZ7iIAZRKd2DICUSlAljLCYWMLIFVukNfI2bNbIDTyT7zu8Ijb\nSz/qcG/2nf4T/wCE/wD2WnxWt4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHL9oL\n+Hw2cm28VvEuPptfgyVj6yIn0no7/FtJfW8NzYMe3PaPd39d3iMug1WktNc2C9dvPbeP1aZ9xF+v\nT471tHu2iflK2HkqWmvaZj5Surqc9Ps5bx+alTHqYHm68S1Vf/NmfnC2vGNTXvyT84Ql6A3cSvHM\nsfaxVn5Ssrxyv3sM/lKB1xza8bwT3pePyWV4tpZ+/MfOEjfGrXiGlt2zV/PotrqcN/s5aT/+wLRj\nFontMSlAlKEgndO6IAZQljDIEgeQljLCzOVdkCu/SGrkbF56NPNeKxMzMRHxENe0+89DwuNtHHzl\n5PJr8NcnLW3Pbf7r1nCZm2gpae8zMrz4i/W6AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAETETG0xukB4HVaeMHEtRi26RedvkyjBSfX9W77QYvC4xz7dMlYlrU7M929dWJLFc6aPK0q\n7YLxPS0S22FlP6q38Zac0yR92s/KVc3tHfFf8tpbcsLRvB/dR/8ALLVnU0r9uL1+dZI1mnmdvGpv\n6TOy6ym+Oto2tWJ+cJ/tW+KLK5KW+zes/KU7tG+h01p64qx8Y6NXNo6Y+uPJlp8rLf0rfG7MXtHa\n0x8pZxqs9e2a8f8A7Oj7HaTHn0+f6RWM23LETfr6vRW4PoL99NT8ui7F4+vEdXXtnt+fVbXjGsr/\nAOZE/OsPS29nuH27YrV+VpeV9pdPXhOtw49NG9Mld55+vXcTPd42I47qo7xSfyWV9oM8d8VJ/VxM\nd8l46xWF9cV7en6o/qLfxp2I9ob+eCv/AHMo9op89P8A/wBORGmyT5R+qfo2X8P7n9Q/jTsx7RR5\n6ef+4/8AuHftg/8A6cWcOSO9J/WEbWr3pY7Efzp2Lcfv5YK/9zWy8d1E/ZpSv5Oba1/+Hb9lc+LP\nbFt87I7E/wAabWbiurvEx4nL/pjZzc2bJkn372t85ZXx55/BX85lucC0vPxnTxlnnjm32mOiZqUu\nLJ2p4TwnVavNWaYbRTfre0bQ99pcH0bT0xb78vmtiIiNojaErMwAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAHnfarF7umzRHaZrLjYrdIen9ocPi8JyTt1xzF4eUw23rCm3R4r6bMy\nwt6kdTaWLdjswmNoZontsCm0K5XWjopnuDC0dGpqG5bs08/daKV672MjbSaif6oh6Z5f2LtvptRX\n0tEvUN3Jfo8f7cYve0eX4zV7B5z20xc/C8eSPuZIRficfXlcPaG7ino08HWIbePpLF2NuiyOyrHK\n3fZFSwuovHVfaVF4QK5YWTM9UT0EKry6Ps1Tn4zjn8NZn9nOtLseydObiWW34cf918fWfk+PYANn\nKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAq1WKM+ly4p+/WYeBxTNd6zG0xO0\nvobw3FcP0bi2em20Tbmj5Srr418V9sa2Z7qKyzi07MXUylhaU7yjqhLCeiq3ddaFNxFYW7NLNG8t\nzya+WO6Va9J7FW66mvwidnrXiPY3Ny8RyUn71Jj9Ht3RPjk19HK9pMHj8D1ER3rHN+jqqtTjjNps\nuOe16zAifXzfTz7kNyndpYazS9qT0mszDdoxrsi6m8LazMq6zDOsq1ZEyrt1WWlXaUCqyq0rbKbi\nFdp6PReyFd8uqv8ACsfy83aXrPZHHto89/xX2/SP/dpj6y8vx6EBq5gAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAB5n2q03LfDqqx39y39npmlxbS/TOG5se29tuavzgWzeV4mtui2\nO3RRSY2hdVhqO2MvI36iu9lUsrSrvDHn6spnmSiq5jooyV6tq1VV69RC32byTh43h8otMx+r6I+Z\naK/g8TwX7bXh9Mid4iW+fjl8n1ICWb57xLBOm4zqse20Tbmj8+qKdnS9q8PhcTw5tumSm0/OHMxz\n0Za+uzx3sX1t0Zxurr1ZxvspWiZYWZbsbT0QK7KLrZVZJFaqt5vbezNOTg9J/FaZeJns93wCvLwb\nT/GJn92uGHldIBowAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADuAPA67F9H4l\nqMW20VvO3yRWW97T4fC4rXJHSMtI/WGhVlue3b473K2KzMML4+62tujG9pnozXaOSOVFMnVbmq1t\ntrJRW5E7wwvUxTvCyY6CHOt7moxz6Wh9PxTzYaT61h8x1MbZK/OH0zTf+Fxf6I/htj45vL9WgLMn\nmvbPFvocGWO9L7fq85p5maw9d7VYvE4JkmPu2if3eW0+PasdFNOnxfF1Y2hlykRsmY+LJ0MZjZXa\neq2eyi8oQTO0KLdZWzPRjWu6VaqtHR73g0bcI0sf0Q8Nkq93wqNuFaWP+XDTDDytwBowAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAef9q8HNpcGaI60vtPyl56k9Iew49j8ThGe\nPwxFv0l4zH2U26fDfTYiyJljvsjf4sm6vJ1hrXjq2MkqLdZEVbgbMx0auGdmzNt6iHN1Ub5af6of\nTdPG2nxx6Vj+HzaaTm1+nx/iyVj930ysbViPRrj45vL9SAuyc7j1efguqj+jd4/T33rD3HEcPj8O\n1GP8WOY/Z4TTT7sKadHhbcsZnaCJ3TPZk6VdrKbTutmP0U2nqgrGOsr8deiuI2X09EqKM1dt3uuG\nf/jdN/06/wAPE546S9rwud+Gaaf+XH8NMMPK2wGjAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAABrcRp4nDtRWPPHP8PCYusPoWSvNjtX1iYfPuWaXtX8MzCuvjfw32siu8ptXoxi\n0wy5t4YulReqmazu2skbquURWFInddM7VYRGyL291KFnCcfj8e0le/Lbmn8n0N4b2Ur4nHLWmPsY\n5e5a5+OXyXugBZmiY3iY9Xz7NjnTa3Ph/BeYj5PoTxftFg8Hjk2iOmWkW/Psrr418V5WrWd2faFc\nV2jdnEMXWxntupmN7NiYU27iWML6dVMVnddjgVqMsdHr+CW5uE6f4Rt+7yuSsTDv+zWXn0WTHP3L\n/tK+GHl+O0A1c4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8Dn93W56/wDM\nt/L3z59qp24jn+OS38lnpr4r7ZxHQ2TEstt3PXUrt27K57rr1VT0BjKnJPRbMqMs7QlV2fYvHvrd\nVknyrEfu9m8f7FZI8fVU85iJewbT45NfQBKo817W4eulzxHaZrL0rje09ItwqbfhtBVs3leai8RD\nKLw1sduesL606dWFdsZT1jdhNeq6K9DlhCVUU6s4jZnt1YzAhnM71dH2bycmszY/K1d/0c6OzY4R\nfwuK4p8rTstn6z8k7HrwGzkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHz3\nVxvr80/8y38voTwGpj/F5/8AqT/JfjTx/WVeyY6FPspc9dZPVXaOq2WEwIUTVRmjo2rNfLHRI3vZ\nDJycXtX8dZh7t879nsnhcbwz23tt+r6I2nxyb+gCVBzuPY/E4PqI9K7ui19fTxNBnp60n+Aj5/pJ\n3jZu1aOnnltMNussdfXbm+l3ZM9URHREdZVXTuT1Nk7boQiOkJw28PU47/htEp5eivJPLMTCZ9Vv\nx7mJ3iJ9UqNHk8XR4b+tIXuhxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD\nweqjbWZ4/wCZP8vePCaz/wDIaiP+Zb+UX408f0r9lOxWOifJhXWjfyYWllPRXYQxnrCrJHRd3YZI\n6A1NJecHEsN/S0T+76bE7xE+r5dk93LW3pL6ZpMni6PDf8VIn9m2fjm8s9rgFmQxvHNS0esbMiew\nPnHLyai9fS0w2aNfUTtrs3+uf5bGPqy068fF227KtSsdFlKqNGMV6myyY6sbdIQI8tlOWOi6Jhhk\nj3RD0vA8nicMx9etZmHRcT2Zyb6XNT8N9/2dt0T449T2AJVAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAHhdfG3E9TH9cvdPEcXjk4zqI/q3L8aeP6xr2TsxpLOekMK6mFo6qpXSrm\nOqBixvHSVmzC4OfqK7S9/wAByeLwbTW9K7fo8Fqo6Paeyl+fglI/Da0NcMPK7QC7AAB8313TiOf/\nAKk/y2MHWrX4jG3E9R/1Lfyv0/aFNOrHxuU7LI7MMayGTVlHWUXhNe6Z6wIUsb9d1m20q7dkDpez\nN9tRqKT5xEvRvKez9+Xis1/FSYerb5+OTyf6AFlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAB43j9eXjN/jWJ/Z7J5L2mry8Upb8VIF8f6aGOey2eynHvOy7bowrrYSxZSwQJ2YXZ\n92N4BoanrEvVexmTm4blr+HJ/aHltRHSXofYm/1Wrp5RaJaYY+X49WA0c4AD51xONuKan/qW/lbp\n+0MOLRtxbU/9SU4J7KadWPjep2WQrr2WRPRk1TvsndXMpiRCb9FNu0rbTuqvKBscCjfi9PhWZeue\nV9n434rafTHL1TfPxy+T/QAszAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmv\navHtfTZfnV6VxPajHzcNrf8ABeJFs/XnMcr4no18c+6vr2YadkY2YM57sEDLyY37Mo7MMnYGlqO0\nvQ+xNfqNVb1tEfs87qZ2rL0/sVX/AHdnt65P7Q0wx8vx6UBo5wAHz/jUbcX1PT78qtO2vaCnJxjP\n8Zif2amnnspp04+OjWejKJ6MKdmcMmyJn4m5ZHzEVPMwtJv0VZLbQDqezcb8RzT6Y/7vUPM+ytZt\nn1OTyiIh6Ztn45N/6AFlAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABocbxeLw\nnUR5xXm/Rvq8+OMuDJjntaswEeBxT0bNZ6NatZpNqz3rO0rqsdO3PxlaWEMpY+aqWXkryT0ZT2V3\n7A0dVPuy9f7G124NM/iyT/Z4zWT7sw957MYfB4Fp4/FE2/WWmGHldcBowAAeM9qKcvFeb8VIly9P\n0nq7ntbTbVYL+tJj93CwT76unR4/jo0nozhhTsy3Y1sWljM9Ce7HyQIm3RRlttVbaWrnt0Sh6n2U\nx8vD8mSfv3/h3XN4Bi8Lg2nj8Uc36y6TeOPXugCUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAPD8RxeBxXUU26Tbmj8+quro+02Lw+I4ssdslNvzhzazvDPbq8d7GW7Dfqz2VzG\n0s2qd+iu/Zn5Ksk9BVztX1mI8930zh2LwOHabH+HHWP2fNYp4+vwYvxXiP3fUqxtWIjyjZtj45/L\nfaQFmQADzftfj3w6fJ6WmHmsP23rvaqnNwqLfhvEvIYZ+sV038bo0noy36MK9oZQxrdMyrlnMbMZ\nQKrS1M07zEestq/RRjr4utwY/wAV4j91p9V18fQdJj8LR4ccfdpEfsuREbREJbuMAAAAAAAAAAAA\nBAJAAAAEAJEAJQAJQAJEAJQAJQAJEACUJAQlAJEAJQAJQJAAAEAJEAJBAAAJAABAJEJAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwvanDzaPFmjvjv8A\ntLztJ3h7HjGHx+FainnFeaPnHV4vFbeIU038VbHeGF+kso7Mb9mTdhKnLK3dRm7SIrHhGPxeP6Sv\n9cT/AHfSnz72Zx+J7Q45/BWZ/Z9BbZ+OXyfQBZQABzeP4/E4NqI9Ii36S8Ng/wAx9C4jTxOH6ivr\njn+Hz3B/mQi/GvjdCnWNlsdI2V07LIlg6USrt2ZzZXMoFV+zPhGLxeOaavpbm/RVltEN72Yx+Jxm\nb7dKUmf7L5+s9/HtRA2cqRACRACRACRACUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAACQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQCQQCRACRACRCQBCQBCQB\nACRACRACRACRACL1i9LVntMbPATTwdRkxT3pea/u+gPE8Xx+DxrPHlaYt+qNfGvjvtXXsi0dOrKk\ndEXjZg6VMtbP2bMtXUdpEV0/Y2nNxbNf8OP+727xvsXH+N1U/wBEfy9k3nxyb+gCVQAGOWvNivX1\nrMPnGGOXNNfOJ2fSZ6w+dZKeHxDPX8N7R+6L8a+L63KdoZ7q6zvEMpnowdKJ6ywmWUyqvIKM0vQ+\nx+D6rU55+9aKx+TzWa36vbezmDwODYenW+95/Nphj5L6dQBo5wAAAAAAAAAAAAAAAAAAAAAAAAAA\nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAEiAAAEoA\nAAAAAAAAAAAAAEAkEAkRuAkQbgkQAkQAkQAkQAl5T2nx8nEMOT8dNv0l6pwfarHvpcGWPu32/WCr\nYvK4mOem6b9mGKd4Z3idmFdka0y1c892zfpMtLPaNpEV6D2Kj/Eauf6YeweQ9ieuTVz8K/3evbT4\n5NfQBKoAA8FxCvJxrUx/XMvevD8Zry8fz/Haf2RfjTx/6RSOnRMyypHu9kXjowrqVSrvPRnZVl6V\nkK0775MsUjvadn0nT4ow6bFijtSsVfPuFYvpPGtNTy54mfy6vorXDm8l9pEC7JIgBIgBIgBIgBIg\nBIgBIhIAgBIhIAgBIgBIIBIAAhIAhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAA\nAAAAAAAAABAJQkAEAAAAAAAAAAjc3BIjdG4Mkbo5kcwMjdhzHMDPc3V8xzAs3N1fMjmBZubq+Y5g\nWbm6vmOYFm5ur5jmBZubq+Y5gWbm6vmOYFm5ur5jmBZubq+Y5gWbm6vmTzAz3N2HMnmBlu5ftFTx\nOEZJ/DMW/d0t2rxKni8N1FPWkiZ9eS08e7Cy8dGGn6UhZaJljXZGnmc3UT3dPP2cnUT78xCIV6j2\nH/8A9c/6f7vXPI+w8bU1U+vL/d63du5NfUiDcVSIAS8b7RV5eOb/AIqRL2TyXtNX/e2KfXH/AHlF\n+NPH/pr4+2xcxx0hFpY11K7R16KM32ZWz3UaidqSgrc9kcPicWyZJjfw6T+727y3sXh2xarN+K0V\nh6lvPjj3e0ASqAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJQAAAAAkQAkQAkAAAAAAAAAAAAAAA\nEgAAAAAAAAAAAAAAAAAAAAAgAAABKDcAN0bgkY8xzAyRux5kcwM9zdXNkTcFm6OZXzMeYFvMibKu\nZHMC2bo51U2RuC2bom6rc3BZzom6sBZzI52ADPnOdggFnMc6skFnMc6rc3BbznOp3RzAv50c6nml\nHMC/nOf4qOY5wX85zqOc5wbHOc7X5znBsc6edr85zg2ec52vzpi4NjmY5bROG+/bllVzsNTk5dLl\nn0pP8BHmMHWNmzt0aum8obm08vVjfrtnxztR0mXHzTvaZdjVRMTLkZo6yiFen9iZ2pqY/wBP93rN\n3kPY+/LfPX1rE/u9XzN3HfqzdO6vmTuIZ7m7Hc3Bnu8t7TR/vHBP9E/y9Pu837SV31umn+if5Rfi\n/j/01MMb1hjkrtKzBG0bMsmOZY11tOYamr6Und0LUc7XT7u3rJPqL8er9lcPhcFpbzyWm39v7O00\n+FYvA4Zpsc94xxu227jv1IAgAAAAAAAAABKAAAASgASgBIgBIgBIgBIhIAAAAAAAAAAAAAAAAAAC\nUACUJAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAg3AEbomQZbo3YzLGbAz3RNlc3YzcFs2YzdVN2\nM2Bdzom6nmNwW86JurTAMuY3REJ2BB1ZRVMVBhsbSsiqeUFXLucq3lTygp5TlXcpygp5TlXcpygp\n5TlXcqOUFXKjlXcrGYBXysdlswiYBVMdUTCyY6sZBWxlnMMZgGLGZZSwkDdHMiWO4MuY5mEyjcFn\nN1OdVzHMC3nTzqeY5gX85zqOZPMC+Lqdbk20eb/RKOZr8QybaK/XvtH7iZ9aGlp2luzT3fg19NHS\nOjbmPcYX67XH1XSZ9XIzRvMuzrK7zLkZYmYnciunb9lZ5dTk+OP+71cXeP8AZnJ/ip2nf3J/l6iL\n/Fu5L9bMWZczXi6YuIbEWTzKIuyiwLt3nuO25uI4a/hx7/rLuczg8TicvFLbfdpEK6+NPH/phhjo\nstLGkctUWnoxrrU3j1cnWTzZq1jzl1clo5Zcu8c+txR63iP3Tn6pv4+g4o5cVI9IiGe7CJ2iE7t3\nGyN2O6dwSINwSISAlAAlACRAAlAAlACRACRCQAAAAAAAAAASgASISAAAAAAAAAAAAACQAAAAAAAA\nAAAAAASAAAAAAAAAAAAAAAAIAAAQCAJljuljsCJlhMs9mOwMJYys5TkBVsjZdyHICrZPKt5E8oK4\nqmKrOVOwMIqyirPY2Bjyp2ZbAI2NmSARsbMgEbI2ZAMdjZICNkbMkSCNmOzJEgx2YyzljMAwlhKy\nWEwCuWErJhhMArlhLOWEgxljMpljIImWMyTKJA3N0IBO5vux3NwZbnMx3NwZczT4jf3MdPW27a3a\nfJOq1XNP2KdIRfi+J2trSYfcjeF+Wm1OicVeWIiN9kai8xjY12ORqultnI1Ecsujq79XP1FovWYI\nrTgeq+j8QrWZ+3Mx+r2UXeC0WG2Ti2kiN5mL807eUREvbzbaejefHJv62Iv8WUXa0WTFhVtRdlF2\nrz9WUXBtc7jR9dqc2T1ttHyhvZMvJitb0jdq6XHNcNenWVN3028U99WRj6Kb02be3Tq18/SN2Lpc\n3UdN9nOmZrqKX/DaJ/d0svvTLRzV3jomK6+Pd1vvWJj0ZczT0mXxNJht60hfFnQ4qu3N1cWTEgs3\nTur5k7gz3N2O5uDM3Y7m4MtxBuCQASIASIASAAAAAAACRCQAAAAAAAAEoSAAAAAAAAAAAlAAlCQA\nAAAAAAAAAAASAAAAAAAAAAAAIASgAAAEJAQJQCNkbMgGOyOVnsAw5TlZ7GwMOVPKy2NgY7GzIBGx\nskA2AAAAAAAAAAQkBAEghEskAxYzDPZGwK5hjMLJhjMAqmGEwumrCagomFcw2JqqtUFEsLLrV82F\no7gqljKyYYTGwMZRKUSCAQAboJnaN5Bjkneu0d5W4ccViIiOzHFWbTzNumP1Zarr8eeRMbxDW1Mx\nNO67NbkhzNVnmInqzaOZrL93JyZeV0M1++7S02jvxDWxhxx033tPpC8Z6rrezWjmZyazJG2/u03h\n2vFibTHoqvamiwVwY+nLGzV0+SZ1Mx8G0/45tOhzJ5lXMc3UVXRdlF1HP+iYsDPLPPy49/tz1+Te\npSIr0ho6ak5Ms5J8o2q6NImOrHV7XX488ypzTtHXo0s9t6zG7c1G1qz6ubeZiZ3UatXJG3yauSO7\ncvMTEx5tPLb3prPRMVr0HB8vicNxf0+7+kt+LOJwTJyY/Bnz3tH93X36N58cWvq6LSyiyndMSlC7\nmZcymLJiwLosmJVRLKLAtiU7q4lMSCzc3YxJuDMRuAlKAEgAAAlAkAAAAAABKAEgAAAAAJAAAAAA\nAAAAAAAEgAAAAAAAAAAAAAkAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAhIAAACAAAASgAAAAAAEAAAA\nhGzJAImGMwzQDDZjNVuyNgUTVhNGxysZqDVmiu1G5NN2M4waM0+DCaN2cbGcQNGaMZq3JxMJxA1J\nqx2bU4kU09slorWNwa20z02RXHbJbl26QvtFovbHWkxEdJt5y2MOHlr2U1W3jx+1hiw8vSO63lmI\nXRTaEWmtY6snRHO1VpmJ+DjavpSZl2s8b7y4HFcnh0n0gha5ebJN55KRM2mdoiPN6fh+kpwXh0Wy\nRHj5Otp/s5Ps1p62y31+em9aTMYt/OfVfxTiPjZ52naI7fBrI5t66xz5+a1rW7yx0eSL6iZjtEOX\nqNbSletom3lENjh2fbHzbbWt3iVozruc+5ztWubf4M4ybpQ2Oboyrva0Vjza8WdDR4OkXt3n9ldX\nkaePP9VtYqctYhdvt5oivTeCZ2YOxXk6ubqMfV0b9mrljfqlFcq88k7z2U5axeItDa1OPessuC8P\nya7XRWYnwqdbT/ZMilvIu4dpslNdixXja8Y5tt85djZdbDWnGOesRtXFtuw6T27No5Kx2OrKYQlC\nExKJgBnEpiyvdlEgsizKLKollFgWxLKJVRLKJBbEp3VxLKJBnuMWQJEbpBIAAAJAAAABIAAAAAAA\nlAJAAAAAAAAAAAAAASAAAAAAAAAAAAAJAAAABAJABAlAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAA\nAAABAJQAAAAgAABAAI2EoBGyJhkgGPKxmqxAKpownHC+YRMdN5BrTj67R3bOn01o7p01Iv71u89o\nb9a7LfBTfS1vWI2jf12VfQPSW8KX2mas+NC2iv6xMNfJpMnLtEbuuxtMRCtzF55NR5rPps1N/ctP\ny6uHreE6nXZ4pak48X3rT06fB7fNeI33cbX6mI32R/MWu7XF116aDSRhxbRERs8f499bkyZeeKae\nkzE2mdon81/tfxDLGOunwbzlzbx08oaHBvZHJlx48mrvaa94pu04y617576rNGLRRM0397JEd/lu\n9Dw/S3x4qxffo6mm4NjwUiKY4iI9Ib1dHFY6QIaNabbrYrLfrpJtaK1rMzPZb/s+05IpP59OyLeJ\nk7eNfRaOc1ue32I7fGXYpi5Y77M8OGMeOKxHSFsU3Y29deZMzirl6dlVvhLatCjJHeYQv1rXnps1\n8k9/VsW6qLVmZIi1rzitlvFKRvaZ2h6TSaenC9FFY+3brM+sqeG8Prp4+kZ+lvuxPkr1mqm95nfp\nDXM459676a2q1dsV7XietvNno78+CJn1cjX6mOeIm0bR33dfRU5NJjidt9t5afjG/V6JZ7I2QMNh\nnyo2BhsMuVG3wAhMSbbQRAMolnE+iuGUSCyJZRKuGUSCyJZK4llEgyZMYTuCUsYSCQASISAAAlCQ\nAAAAAAEoASCASAAAAAAAAAAAAlACRACQAAAAAAAAAEgCEoASCAAAAAAAAAAAAAAAAAAAAAAABAAA\nAAAAAAAISAIAAAAAAQAAACASgAAAQJAQAAhIDHZhln3do7z0WS18mWsajHjmes7pg3dNi5aRMNqO\nyvDHTpPRaigHZhN4hHRlaVN59JY3zRENLUavaO+yq0iNVlitJ6vNcR1MVi0zO0era1/Ea0rPvbz5\nPM5MWp45qvo2GZrhmfrsnpHpHzTCseEcM/2vrr8Q1Eb4qzy44nziPN63HpYiIiI7LNHoqabBTFii\nIpSNohuVxrKtWMEejPwY9G1FFmHB4mWJn7MdfnIM9JpIx15to5pbUaas/a6rqViI7MxPxqX0UT1r\nO3wVzpbR2hviP5i03Y5s6a879FNtHljydhExCv8AMTPJXBnRZbz0iG5ptFjwe/l96zctMVamTJtE\nyTMibu1VrdTzRMR0j0ed4lr64MVpm0RERvMz5NvX62uOJ69XhOKX1HH9bHDtFvNYnfJeOy0Z2ojX\n6jjnEq6fRUmccTvN/J9H0eKcOnx45neaxEbubwHgOHg+milI3vP2resu3Wu0JQmITsmISDHZHKz2\nJgFc1RMLJhGwK9iIZ7MZgEdgmAEwyiWCdwWRLKJVxKYsC2JTuriWUSDNlEsIlMAySx3SCRCQSIAS\nAAACRACQAAAAAAASIASAAAAAAAAAAAAAAACRACRACQASIAAAAAAAAAAAAAAAAAAAAAAAAQCUAAAA\nAAAAAAIAAAAAAAAQAAAAAACBICBICAAEJAQJQCJcLjuS2ny6fPG/LWdpd1o8T0X07SXx/e7wCdJx\nWa0jmneHQpxPDMdZmJfNtZm49weZrh0/j4o7VtSZ2+Uw0/8A7o49k92vBLc/ntFohFW9PqGXimOI\n6Tu1L8T3eCx6r2t1O3JwvHjifO99v7t/Bwf2l1PXU6rS6eJ8qUm8x+so5TsekzcSjbvs4mt4rzW5\nK2mbT0itesy2cHsvbvqtbmyz5xERWP2jd1tJwrTaONsOKtZ8585+cnDrzmn4Rq+IZObUROHD32n7\nVv8A0ej0uhxaXFGPFSK1j0bkY4jyZRVZVXFGUVWbGwKsk8mObekNrSW3pWf1a2aYjHbm7bNnQ1id\nPW0TvuDdhJEbQABMsLW2R0ZTMQrvfbz2YWzVhpanUxEd0dWkW5c8R5uXxDX1w4pnfr5Q19XxKuOJ\n2neXltVqtVxbV/RdJ715+1bypANfiOu1HENV9C0MTfNeesx2rD1PAeBYuE6aKx72W3W9/WVnBuB4\neF4dqRzZbdb5J72l160WVK02ZxCYhOwI23TsnY2BGxsnYBjsiYZsZBjMMZZSgGEolMsQDdG6NwZ7\npiVe6YkFsSziVMWZRILolMSriWUSCyJTuwhMSDMRCQSI3SAlACRCQAAEoAEoASAAAAAAAAACUACR\nACQAAAAAAAAAAAAASAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAABAAAAAAAAAAAAACBKAAAAAAAQ\nJQAAAhICEbJAYTWJ7wx8KvpC0BV4ceieWGewDHlNmWwCNjZICNhIDmcZredBecdpiY69FXCOLW+i\nUiZidukulmxxlx2paN4mNng+K4+I8Hy2yaTfl37TXetoCPfRxfp1qi3F48ofKMvtvxak8s6LDv61\nrZji9rPaLUf5PC+bfttS0q8q3p9W/wBrRMdpUZuKdN99nzvFqPbTVz7nD8OKs+do2/mW3h4D7Xaq\nZnPrtNpqz35aRaYOHY9Zk4pNt9rR+rl6zi+OnS+WN57Rv1lXp/YrNaYtruL6zNPnGO3hxP6O5w/2\nf0HDuun09Yv55Le9afznqcOvO4tBreMTHu30unnva0bWt8on+70nDuE4OHYYx4Kbesz3tPrMuhGO\nIjpDOKrK9YVpsyiGUQnYGOyUgI2SlAIEmwMWMs9kTAMJYzDOYRMArmGErZhhMArlHmzmGMwDE3Ts\nbAbs4swj5pgFkSziVcM4BZEsolXDKAZwyhjCYBkACQhIAAAAAAAJAAAAAAAAAAAAAAAAAAAShIAA\nAAAAAAJAAAAAAAAAAAAAABAJEAAAAAAAAAAAAAAAIEoBKAAAAAAAAAAAAAAABAlAAAAAAAIAAAAA\nBAkBAkBAkBAlACEgMZjdjbFW8bWrEx8YWANb6Fp+bfwab+vLDKMFK9qxH5L0bAr8OPRPKz2AY7J2\nSbAjYZAI2E7AIEgIEgIEgMdkSy2NgY7MdlmyNoBXsxmFuyNgVTVjNV3KjlBRNTlXTVHKCrlIqt5T\nlBhEMohlFerLlBjEMohMVTEARDKCITsAk2AEgAAAkAAAAAAAAAAAAAAAAAAAAAAAASAAAAAAAAD/\n2Q==";function fle(e){return ple.apply(this,arguments)}function ple(){return ple=ct(st().mark((function e(t){var n,r,a,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"application/octet-stream";return fetch("data:".concat(t,";base64,").concat(e)).then((function(e){return e.blob()}))},e.t0=t.config.warmup,e.next="face"===e.t0?4:"body"===e.t0||"full"===e.t0?8:12;break;case 4:return e.next=6,n(lle);case 6:return r=e.sent,e.abrupt("break",13);case 8:return e.next=10,n(dle);case 10:return r=e.sent,e.abrupt("break",13);case 12:r=null;case 13:if(!r){e.next=21;break}return e.next=16,createImageBitmap(r);case 16:return i=e.sent,e.next=19,t.detect(i,t.config);case 19:a=e.sent,i.close();case 21:return e.abrupt("return",a);case 22:case"end":return e.stop()}}),e)}))),ple.apply(this,arguments)}function hle(e){return mle.apply(this,arguments)}function mle(){return mle=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n,r;switch(t.config.warmup){case"face":n="data:image/jpeg;base64,"+lle;break;case"full":case"body":n="data:image/jpeg;base64,"+dle;break;default:n=null}if("undefined"!==typeof Image)r=new Image;else{if(!ane.Image)return;r=new ane.Image}r.onload=ct(st().mark((function n(){var a,i,o,s;return st().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=Yte(r.naturalWidth,r.naturalHeight)){n.next=6;break}kc("Warmup: Canvas not found"),e(void 0),n.next=15;break;case 6:return(i=a.getContext("2d"))&&i.drawImage(r,0,0),n.next=10,t.image(a);case 10:return o=n.sent,n.next=13,t.detect(o.tensor,t.config);case 13:s=n.sent,e(s);case 15:case"end":return n.stop()}}),n)}))),n?r.src=n:e(void 0)})));case 1:case"end":return e.stop()}}),e)}))),mle.apply(this,arguments)}function vle(e){return gle.apply(this,arguments)}function gle(){return(gle=ct(st().mark((function e(t){var n,r,a,i,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e){return Buffer.from(e,"base64")},r="face"===t.config.warmup?n(lle):n(dle),!("node"in Nc)){e.next=12;break}return i=(void 0).decodeJpeg(r),o=i.expandDims(0),t.tf.dispose(i),e.next=8,t.detect(o,t.config);case 8:a=e.sent,t.tf.dispose(o),e.next=13;break;case 12:t.config.debug&&kc("Warmup tfjs-node not loaded");case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yle(e){return ble.apply(this,arguments)}function ble(){return(ble=ct(st().mark((function e(t){var n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!==typeof createImageBitmap){e.next=6;break}return e.next=3,fle(t);case 3:n=e.sent,e.next=15;break;case 6:if("undefined"===typeof Image&&void 0===ane.Canvas){e.next=12;break}return e.next=9,hle(t);case 9:n=e.sent,e.next=15;break;case 12:return e.next=14,vle(t);case 14:n=e.sent;case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xle(e){return Ale.apply(this,arguments)}function Ale(){return Ale=ct(st().mark((function e(t){var n,r,a,i,o,s,c,l,d,f,p,h,m,v,g,y;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=ty(),r=oy(),("webgl"===n||"humangl"===n)&&r&&r.checkCompileCompletion){e.next=4;break}return e.abrupt("return");case 4:id().set("ENGINE_COMPILE_ONLY",!0),a=qg().state.numTensors,i=[],o=lc(Object.entries(t).filter((function(e){var t=u(e,2),n=t[0],r=t[1];return null!==n&&null!==r})));try{for(o.s();!(s=o.n()).done;){for(c=u(s.value,2),l=c[0],d=c[1],f=d.inputs&&d.inputs[0]&&d.inputs[0].shape?Tn(d.inputs[0].shape):[1,64,64,3],p=d.inputs&&d.inputs[0]&&d.inputs[0].dtype?d.inputs[0].dtype:"float32",h=0;h<f.length;h++)-1===f[h]&&(f[h]=0===h?1:64);m=XA(f,p);try{v=d.execute(m),i.push(l),Array.isArray(v)?v.forEach((function(e){return Yg(e)})):Yg(v)}catch(A_e){kc("compile fail model:",l)}Yg(m)}}catch(b){o.e(b)}finally{o.f()}return e.next=11,r.checkCompileCompletionAsync();case 11:g=e.sent,r.getUniformLocations(),kc("compile pass models:",i),kc("compile pass kernels:",g.length),id().set("ENGINE_COMPILE_ONLY",!1),(y=qg().state.numTensors)-a>0&&kc("tensor leak:",y-a);case 18:case"end":return e.stop()}}),e)}))),Ale.apply(this,arguments)}function kle(e,t){return wle.apply(this,arguments)}function wle(){return wle=ct(st().mark((function e(t,n){var r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Sc(),t.state="warmup",n&&(t.config=Ec(t.config,n)),t.config.warmup&&0!==t.config.warmup.length&&"none"!==t.config.warmup){e.next=5;break}return e.abrupt("return",{face:[],body:[],hand:[],gesture:[],object:[],performance:t.performance,timestamp:Sc(),persons:[],error:null});case 5:return e.abrupt("return",new Promise(function(){var e=ct(st().mark((function e(n){var a,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xle(t.models);case 2:return e.next=4,yle(t);case 4:a=e.sent,i=Sc(),t.config.debug&&kc("warmup",t.config.warmup,Math.round(i-r),"ms"),t.emit("warmup"),n(a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),wle.apply(this,arguments)}var Sle=function(){function e(t){var n,r=this;Ye(this,e),gc(this,"version"),gc(this,"config"),gc(this,"result"),gc(this,"state"),gc(this,"process"),gc(this,"tf"),gc(this,"env"),gc(this,"draw"),gc(this,"models"),gc(this,"events"),gc(this,"faceTriangulation"),gc(this,"faceUVMap"),gc(this,"performance"),xc(this,ole,void 0),xc(this,sle,void 0),xc(this,ule,void 0),gc(this,"gl"),gc(this,"analyze",(function(){if(bc(r,sle)){var e=r.tf.engine().state.numTensors,t=bc(r,ole);Ac(r,ole,e);for(var n=e-t,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];0!==n&&kc.apply(void 0,i.concat([n]))}})),xc(this,cle,(function(e){if(!bc(r,ule))return null;if(!e)return"input is not defined";if(r.env.node&&!(e instanceof vm))return"input must be a tensor";try{r.tf.getBackend()}catch(A_e){return"backend not loaded"}return null})),gc(this,"similarity",rle),gc(this,"distance",tle),gc(this,"match",ale),gc(this,"emit",(function(e){var t;r.events&&r.events.dispatchEvent&&(null==(t=r.events)||t.dispatchEvent(new Event(e)))})),this.env=ane;var a,i=((null==(n=zte)?void 0:n.tfjs)||pb).replace(/-(.*)/,"");Cc.wasmPath="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm@".concat(i,"/dist/"),Cc.modelBasePath=ane.browser?"../models/":"file://models/",Cc.backend=ane.browser?"humangl":"tensorflow",this.version=dne,Object.defineProperty(this,"version",{value:dne}),this.config=JSON.parse(JSON.stringify(Cc)),Object.seal(this.config),this.config.cacheModels="undefined"!==typeof indexedDB,t&&(this.config=Ec(this.config,t)),a=this.config,ine.cacheModels=a.cacheModels,ine.verbose=a.debug,ine.modelBasePath=a.modelBasePath,this.tf=Nc,this.state="idle",Ac(this,ole,0),Ac(this,sle,!1),Ac(this,ule,!1),this.performance={},this.events="undefined"!==typeof EventTarget?new EventTarget:void 0,this.models=new Xue,this.draw={options:gce,canvas:function(e,t){return Lce(e,t)},face:function(e,t,n){return Sce(e,t,n)},body:function(e,t,n){return Ece(e,t,n)},hand:function(e,t,n){return Nce(e,t,n)},gesture:function(e,t,n){return Mce(e,t,n)},object:function(e,t,n){return _ce(e,t,n)},person:function(e,t,n){return Pce(e,t,n)},all:function(e,t,n){return Bce(e,t,n)}},this.result={face:[],body:[],hand:[],gesture:[],object:[],performance:{},timestamp:0,persons:[],error:null},this.process={tensor:null,canvas:null},this.faceTriangulation=Lie,this.faceUVMap=zie,this.gl=ece,this.emit("create")}return Qe(e,[{key:"reset",value:function(){var e=this.config.backend;this.config=JSON.parse(JSON.stringify(Cc)),this.config.backend=e}},{key:"validate",value:function(e){return Ic(Cc,e||this.config)}},{key:"now",value:function(){return Sc()}},{key:"image",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Qte(e,this.config,t)}},{key:"segmentation",value:function(){var e=ct(st().mark((function e(t,n){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",que(t,n,this.config));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"enhance",value:function(e){return Gie(e)}},{key:"compare",value:function(e,t){return function(e,t,n){return nne.apply(this,arguments)}(this.config,e,t)}},{key:"init",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ice(this,!0);case 2:return e.next=4,this.tf.ready();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=ct(st().mark((function e(t){var n,r,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state="load",n=Sc(),r=Object.values(this.models).filter((function(e){return e})).length,t&&(this.config=Ec(this.config,t)),!this.env.initial){e.next=14;break}return this.config.debug&&kc("version: ".concat(this.version)),this.config.debug&&kc("tfjs version: ".concat(this.tf.version["tfjs-core"])),e.next=9,ice(this);case 9:if(e.sent){e.next=11;break}kc("error: backend check failed");case 11:return e.next=13,ey();case 13:this.env.browser&&(this.config.debug&&kc("configuration:",this.config),this.config.debug&&kc("environment:",this.env),this.config.debug&&kc("tf flags:",this.tf.ENV.flags));case 14:return e.next=16,Yue(this);case 16:if(this.env.initial&&this.config.debug&&kc("tf engine state:",this.tf.engine().state.numBytes,"bytes",this.tf.engine().state.numTensors,"tensors"),this.env.initial=!1,Object.values(this.models).filter((function(e){return e})).length===r){e.next=23;break}return e.next=22,Que(this);case 22:this.emit("load");case 23:(a=Math.trunc(Sc()-n))>(this.performance.loadModels||0)&&(this.performance.loadModels=this.env.perfadd?(this.performance.loadModels||0)+a:a);case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.result;return ele(e,this.config)}},{key:"warmup",value:function(){var e=ct(st().mark((function e(t){var n,r,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Sc(),e.next=3,kle(this,t);case 3:return r=e.sent,a=Sc(),this.performance.warmup=Math.trunc(a-n),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"profile",value:function(){var e=ct(st().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,p=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tf.profile((function(){return p.detect(t,n)}));case 2:r=e.sent,a={},i=lc(r.kernels);try{for(i.s();!(o=i.n()).done;)s=o.value,a[s.name]?a[s.name]+=s.kernelTimeMs:a[s.name]=s.kernelTimeMs}catch(h){i.e(h)}finally{i.f()}for(u=[],Object.entries(a).forEach((function(e){return u.push({name:e[0],ms:e[1]})})),u.sort((function(e,t){return t.ms-e.ms})),u.length=20,c={},l=0,d=u;l<d.length;l++)f=d[l],c[f.name]=f.ms;return e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"detect",value:function(){var e=ct(st().mark((function e(t,n){var r=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state="detect",e.abrupt("return",new Promise(function(){var e=ct(st().mark((function e(a){var i,o,s,c,l,d,f,p,h,m,v,g,y,b,x,A,k,w,S,I,E,C,N,T,_,R,M,O,F,P,D,L,z,B,W,j;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.state="config",r.config=Ec(r.config,n),r.state="check",(T=bc(r,cle).call(r,t))&&(kc(T,t),r.emit("error"),a({face:[],body:[],hand:[],gesture:[],object:[],performance:r.performance,timestamp:Sc(),persons:[],error:T})),_=Sc(),e.next=8,ice(r);case 8:return e.next=10,r.load();case 10:return N=Sc(),r.state="image",e.next=14,Qte(t,r.config);case 14:if(R=e.sent,r.process=R,r.performance.inputProcess=r.env.perfadd?(r.performance.inputProcess||0)+Math.trunc(Sc()-N):Math.trunc(Sc()-N),r.analyze("Get Image:"),R.tensor){e.next=23;break}return r.config.debug&&kc("could not convert input to tensor"),r.emit("error"),a({face:[],body:[],hand:[],gesture:[],object:[],performance:r.performance,timestamp:Sc(),persons:[],error:"could not convert input to tensor"}),e.abrupt("return");case 23:return r.emit("image"),N=Sc(),e.next=27,ene(r.config,R.tensor);case 27:if(r.config.skipAllowed=e.sent,r.performance.totalFrames||(r.performance.totalFrames=0),r.performance.cachedFrames||(r.performance.cachedFrames=0),r.performance.totalFrames++,r.config.skipAllowed&&r.performance.cachedFrames++,r.performance.cacheCheck=r.env.perfadd?(r.performance.cacheCheck||0)+Math.trunc(Sc()-N):Math.trunc(Sc()-N),r.analyze("Check Changed:"),M=[],O=[],F=[],P=[],r.state="detect:face",!r.config.async){e.next=44;break}M=r.config.face.enabled?Kce(r,R.tensor):[],r.performance.face&&delete r.performance.face,e.next=54;break;case 44:if(N=Sc(),!r.config.face.enabled){e.next=51;break}return e.next=48,Kce(r,R.tensor);case 48:e.t0=e.sent,e.next=52;break;case 51:e.t0=[];case 52:M=e.t0,r.performance.face=r.env.perfadd?(r.performance.face||0)+Math.trunc(Sc()-N):Math.trunc(Sc()-N);case 54:if(!r.config.async||-1!==r.config.body.maxDetected&&-1!==r.config.hand.maxDetected){e.next=58;break}return e.next=57,M;case 57:M=e.sent;case 58:if(r.analyze("Start Body:"),r.state="detect:body",D=-1===r.config.body.maxDetected?Ec(r.config,{body:{maxDetected:r.config.face.enabled?1*M.length:1}}):r.config,!r.config.async){e.next=66;break}(null==(i=r.config.body.modelPath)?void 0:i.includes("posenet"))?O=r.config.body.enabled?Bue(R.tensor,D):[]:(null==(o=r.config.body.modelPath)?void 0:o.includes("blazepose"))?O=r.config.body.enabled?dae(R.tensor,D):[]:(null==(s=r.config.body.modelPath)?void 0:s.includes("efficientpose"))?O=r.config.body.enabled?Dae(R.tensor,D):[]:(null==(c=r.config.body.modelPath)?void 0:c.includes("movenet"))&&(O=r.config.body.enabled?aue(R.tensor,D):[]),r.performance.body&&delete r.performance.body,e.next=110;break;case 66:if(N=Sc(),!(null==(l=r.config.body.modelPath)?void 0:l.includes("posenet"))){e.next=78;break}if(!r.config.body.enabled){e.next=74;break}return e.next=71,Bue(R.tensor,D);case 71:e.t1=e.sent,e.next=75;break;case 74:e.t1=[];case 75:O=e.t1,e.next=109;break;case 78:if(!(null==(d=r.config.body.modelPath)?void 0:d.includes("blazepose"))){e.next=89;break}if(!r.config.body.enabled){e.next=85;break}return e.next=82,dae(R.tensor,D);case 82:e.t2=e.sent,e.next=86;break;case 85:e.t2=[];case 86:O=e.t2,e.next=109;break;case 89:if(!(null==(f=r.config.body.modelPath)?void 0:f.includes("efficientpose"))){e.next=100;break}if(!r.config.body.enabled){e.next=96;break}return e.next=93,Dae(R.tensor,D);case 93:e.t3=e.sent,e.next=97;break;case 96:e.t3=[];case 97:O=e.t3,e.next=109;break;case 100:if(!(null==(p=r.config.body.modelPath)?void 0:p.includes("movenet"))){e.next=109;break}if(!r.config.body.enabled){e.next=107;break}return e.next=104,aue(R.tensor,D);case 104:e.t4=e.sent,e.next=108;break;case 107:e.t4=[];case 108:O=e.t4;case 109:r.performance.body=r.env.perfadd?(r.performance.body||0)+Math.trunc(Sc()-N):Math.trunc(Sc()-N);case 110:if(r.analyze("End Body:"),r.analyze("Start Hand:"),r.state="detect:hand",L=-1===r.config.hand.maxDetected?Ec(r.config,{hand:{maxDetected:r.config.face.enabled?2*M.length:1}}):r.config,!r.config.async){e.next=119;break}(null==(m=null==(h=r.config.hand.detector)?void 0:h.modelPath)?void 0:m.includes("handdetect"))?F=r.config.hand.enabled?rse(R.tensor,L):[]:(null==(g=null==(v=r.config.hand.detector)?void 0:v.modelPath)?void 0:g.includes("handtrack"))&&(F=r.config.hand.enabled?Ese(R.tensor,L):[]),r.performance.hand&&delete r.performance.hand,e.next=141;break;case 119:if(N=Sc(),!(null==(b=null==(y=r.config.hand.detector)?void 0:y.modelPath)?void 0:b.includes("handdetect"))){e.next=131;break}if(!r.config.hand.enabled){e.next=127;break}return e.next=124,rse(R.tensor,L);case 124:e.t5=e.sent,e.next=128;break;case 127:e.t5=[];case 128:F=e.t5,e.next=140;break;case 131:if(!(null==(A=null==(x=r.config.hand.detector)?void 0:x.modelPath)?void 0:A.includes("handtrack"))){e.next=140;break}if(!r.config.hand.enabled){e.next=138;break}return e.next=135,Ese(R.tensor,L);case 135:e.t6=e.sent,e.next=139;break;case 138:e.t6=[];case 139:F=e.t6;case 140:r.performance.hand=r.env.perfadd?(r.performance.hand||0)+Math.trunc(Sc()-N):Math.trunc(Sc()-N);case 141:if(r.analyze("End Hand:"),r.analyze("Start Object:"),r.state="detect:object",!r.config.async){e.next=149;break}(null==(k=r.config.object.modelPath)?void 0:k.includes("nanodet"))?P=r.config.object.enabled?mue(R.tensor,r.config):[]:(null==(w=r.config.object.modelPath)?void 0:w.includes("centernet"))&&(P=r.config.object.enabled?wae(R.tensor,r.config):[]),r.performance.object&&delete r.performance.object,e.next=171;break;case 149:if(N=Sc(),!(null==(S=r.config.object.modelPath)?void 0:S.includes("nanodet"))){e.next=161;break}if(!r.config.object.enabled){e.next=157;break}return e.next=154,mue(R.tensor,r.config);case 154:e.t7=e.sent,e.next=158;break;case 157:e.t7=[];case 158:P=e.t7,e.next=170;break;case 161:if(!(null==(I=r.config.object.modelPath)?void 0:I.includes("centernet"))){e.next=170;break}if(!r.config.object.enabled){e.next=168;break}return e.next=165,wae(R.tensor,r.config);case 165:e.t8=e.sent,e.next=169;break;case 168:e.t8=[];case 169:P=e.t8;case 170:r.performance.object=r.env.perfadd?(r.performance.object||0)+Math.trunc(Sc()-N):Math.trunc(Sc()-N);case 171:if(r.analyze("End Object:"),r.state="detect:await",!r.config.async){e.next=182;break}return e.next=176,Promise.all([M,O,F,P]);case 176:z=e.sent,B=u(z,4),M=B[0],O=B[1],F=B[2],P=B[3];case 182:r.state="detect:gesture",W=[],r.config.gesture.enabled&&(N=Sc(),W=[].concat(Tn(Zce(M)),Tn(Xce(O)),Tn(Jce(F)),Tn(Yce(M))),r.config.async?r.performance.gesture&&delete r.performance.gesture:r.performance.gesture=r.env.perfadd?(r.performance.gesture||0)+Math.trunc(Sc()-N):Math.trunc(Sc()-N)),r.performance.total=r.env.perfadd?(r.performance.total||0)+Math.trunc(Sc()-_):Math.trunc(Sc()-_),j=(null==(C=null==(E=r.process)?void 0:E.tensor)?void 0:C.shape)||[],e.t9=M,e.t10=O,e.t11=F,e.t12=W,e.t13=P,e.t14=r.performance,e.t15=r.process.canvas,e.t16=Date.now(),r.result={face:e.t9,body:e.t10,hand:e.t11,gesture:e.t12,object:e.t13,performance:e.t14,canvas:e.t15,timestamp:e.t16,error:null,get persons(){return ile(M,O,F,W,j)}},Yg(R.tensor),r.emit("detect"),r.state="idle",a(r.result);case 200:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();ole=new WeakMap,sle=new WeakMap,ule=new WeakMap,cle=new WeakMap;var Ile=n(6207),Ele=n.n(Ile),Cle=n(1527),Nle=n.n(Cle),Tle={alertStudySeconds:1500,alertRestSeconds:300,enableNotification:!1,notificationIntervalSeconds:60,notificationIntervalMultiplier:2,tempMissingSeconds:60,history:{maxLocalStorageTimeSlot:100,showPomodoroHistory:!0,onlyShowToday:!0},faceRecognition:{detectionInterval:5,scoreThreshold:.95,showFaceRecognitionStatus:!0,showFaceRecognitionCanvas:!1,showCameraPreview:!1},enableDetection:!1},_le=e.createContext(Tle),Rle=function(){function e(t,n){Ye(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return Qe(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),Mle=function(){function e(){Ye(this,e)}return Qe(e,[{key:"refCount",value:function(e){return Ole("refCount")}},{key:"incRef",value:function(e){return Ole("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return Ole("time")}},{key:"read",value:function(e){return Ole("read")}},{key:"readSync",value:function(e){return Ole("readSync")}},{key:"readToGPU",value:function(e,t){return Ole("readToGPU")}},{key:"numDataIds",value:function(){return Ole("numDataIds")}},{key:"disposeData",value:function(e,t){return Ole("disposeData")}},{key:"write",value:function(e,t,n){return Ole("write")}},{key:"move",value:function(e,t,n,r,a){return Ole("move")}},{key:"memory",value:function(){return Ole("memory")}},{key:"floatPrecision",value:function(){return Ole("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return Ole("dispose")}}]),e}();function Ole(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function Fle(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function Ple(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";Fle(Ble(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function Dle(e){Fle(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function Lle(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||Hle(e)&&!n)for(var r=0;r<e.length;++r)Lle(e[r],t,n);else t.push(e);return t}function zle(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Ble(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Wle(e){return e%1===0}function jle(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Vle(e,t){var n=t.length;return e=null==e?t.map((function(e,t){return t})):[].concat(e),Fle(e.every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),Fle(e.every((function(e){return Wle(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function Ule(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function Hle(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function Gle(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function qle(e){return"string"===typeof e||e instanceof String}function Kle(e){return Array.isArray(e)?Kle(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":"number"===typeof e?"float32":qle(e)?"string":function(e){return"boolean"===typeof e}(e)?"bool":"float32"}function Xle(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Zle(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Yle(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var s=t[0],u=t.slice(1),c=u.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<s;l++)a[l]=Yle(e+l*c,u,n,r);return a}function Jle(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return Yle(0,e,t,n)}function Qle(e,t){for(var n=$le(e,t),r=0;r<n.length;r++)n[r]=1;return n}function $le(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function ede(e){e.forEach((function(t){Fle(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function tde(e){return e&&e.then&&"function"===typeof e.then}var nde="tfjsflags",rde=function(){function e(t){Ye(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=ade,this.populateURLFlags()}return Qe(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(ode().getBool("IS_TEST")||ode().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];ode().getBool("IS_TEST")||ode().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(tde(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(nde in t)t.tfjsflags.split(",").forEach((function(t){var n=u(t.split(":"),2),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(r,a)}))}}}]),e}();function ade(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return ide(t,r[0],r[1]),r.join("=")})),t}function ide(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function ode(){return ude}var sde,ude=null;function cde(){if(null==sde){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}sde=e}return sde}function lde(e,t){var n=function(){var e=cde();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var dde="Add",fde="AddN",pde="ArgMax",hde="AvgPool",mde="BatchMatMul",vde="Cast",gde="ClipByValue",yde="Concat",bde="Conv2D",xde="Conv2DBackpropInput",Ade="Cumprod",kde="Cumsum",wde="CropAndResize",Sde="DepthToSpace",Ide="DepthwiseConv2dNative",Ede="RealDiv",Cde="ExpandDims",Nde="Fill",Tde="FlipLeftRight",_de="FloorDiv",Rde="FusedBatchNorm",Mde="GatherNd",Ode="Greater",Fde="GreaterEqual",Pde="Identity",Dde="LeakyRelu",Lde="LessEqual",zde="LogicalAnd",Bde="Max",Wde="MaxPool",jde="Mean",Vde="Min",Ude="Minimum",Hde="MirrorPad",Gde="Multiply",qde="NotEqual",Kde="NonMaxSuppressionV3",Xde="NonMaxSuppressionV4",Zde="NonMaxSuppressionV5",Yde="OneHot",Jde="Pack",Qde="PadV2",$de="Prelu",efe="Prod",tfe="Range",nfe="Relu",rfe="Reshape",afe="ResizeNearestNeighbor",ife="ResizeBilinear",ofe="Relu6",sfe="Reverse",ufe="Round",cfe="ScatterNd",lfe="Select",dfe="Slice",ffe="Sigmoid",pfe="Sqrt",hfe="Sum",mfe="SplitV",vfe="Softmax",gfe="SparseFillEmptyRows",yfe="SparseReshape",bfe="SparseSegmentMean",xfe="SparseSegmentSum",Afe="SquaredDifference",kfe="StridedSlice",wfe="StringSplit",Sfe="Tile",Ife="TopK",Efe="Transform",Cfe="Transpose",Nfe="Unpack",Tfe="ZerosLike",_fe="Step",Rfe="RotateWithOffset",Mfe="_FusedMatMul",Ofe="FusedConv2D",Ffe="FusedDepthwiseConv2D";function Pfe(){var e;ode().getBool("IS_TEST")||ode().getBool("PROD")||(e=console).warn.apply(e,arguments)}var Dfe=lde("kernelRegistry",(function(){return new Map})),Lfe=lde("gradRegistry",(function(){return new Map}));function zfe(e,t){var n=Vfe(e,t);return Dfe.get(n)}function Bfe(e){return Lfe.get(e)}function Wfe(e){for(var t=Dfe.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=u(i,2),s=o[0],c=o[1];u(s.split("_"),1)[0]===e&&n.push(c)}return n}function jfe(e){var t=e.kernelName,n=e.backendName,r=Vfe(t,n);Dfe.has(r)&&Pfe("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),Dfe.set(r,e)}function Vfe(e,t){return"".concat(t,"_").concat(e)}var Ufe=n(9849),Hfe=n.n(Ufe)()||Ufe;function Gfe(e){return Hfe.fromString(e,!0,16)}Gfe("c3a5c85c97cb3127"),Gfe("b492b66fbe98f273"),Gfe("9ae16a3b2f90404f");function qfe(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Lle(e)),ode().getBool("DEBUG")&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function Kfe(){return ode().platform.now()}function Xfe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",ode().platform.encode(e,t)}function Zfe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",ode().platform.decode(e,t)}var Yfe=function(){function e(t,n){Ye(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new Jfe)}return Qe(e,[{key:"profileKernel",value:function(e,t,n){var r,a,i=function(){r=n()},o=Kfe();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();var s,u=lc(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(d){u.e(d)}finally{u.f()}a=Promise.resolve({kernelMs:Kfe()-o})}if(ode().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var c=function(t){var n=r[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},l=0;l<r.length;l++)c(l);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var Jfe=function(){function e(){Ye(this,e)}return Qe(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"===typeof r?jle("".concat(r,"ms"),9):r.error,s=jle(e,25),u=t.rank,c=t.size,l=jle(t.shape.toString(),14),d="";for(var f in a){var p=a[f];if(null!=p){var h=p.shape||t.shape,m=h.length;d+="".concat(f,": ").concat(m,"D ").concat(m>0?h:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(d,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function Qfe(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var c in u){for(var l=u[c],d=!1,f=0;f<t.length;f++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),d=!0,a[s.id]=!0;break}if(d)break}}var p={};p[n.id]=!0;for(var h={},m=e.length-1;m>=0;m--)for(var v=e[m],g=v.inputs,y=0;y<v.outputs.length;y++)if(p[v.outputs[y].id]){for(var b in g)p[g[b].id]=!0,h[v.id]=!0;break}for(var x=[],A=0;A<e.length;A++){var k=e[A];if(a[k.id]&&h[k.id]){var w={};for(var S in k.inputs){var I=k.inputs[S];r[I.id]&&(w[S]=I)}var E=Object.assign({},k);E.inputs=w,E.outputs=k.outputs,x.push(E)}}return x}function $fe(e,t,n,r){for(var a=function(a){var i=t[a],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));var s=i.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var a=n((function(){return s[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var o=i.inputs[t];if(!Ble(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=a;else{var u=e[o.id];e[o.id]=r(u,a),u.dispose()}};for(var c in i.inputs)u(c)},i=t.length-1;i>=0;i--)a(i)}function epe(e,t,n,r){var a=Zle(t),i=function(e,t,n,r){var a=zle(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?ape(e):e;if(s>1)for(var c=0;c<a/i;c++)for(var l=c*i,d=0;d<i;d++)o[d]=Math.max(o[d],tpe(u[l+d],0,n).length);return o}(e,t,n,a),o=t.length,s=rpe(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function tpe(e,t,n){return jle(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):qle(e)?"'".concat(e,"'"):"bool"===n?npe(e):parseFloat(e.toFixed(7)).toString(),t)}function npe(e){return 0===e?"false":"true"}function rpe(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u){if("complex64"===n){var c=ape(e);return[tpe(c[0],0,n)]}return"bool"===n?[npe(e[0])]:[e[0].toString()]}if(1===u){if(s>20){var l=3*o,d=Array.from(e.slice(0,l)),f=Array.from(e.slice((s-3)*o,s*o));return"complex64"===n&&(d=ape(d),f=ape(f)),["["+d.map((function(e,t){return tpe(e,a[t],n)})).join(", ")+", ..., "+f.map((function(e,t){return tpe(e,a[s-3+t],n)})).join(", ")+"]"]}var p="complex64"===n?ape(e):Array.from(e);return["["+p.map((function(e,t){return tpe(e,a[t],n)})).join(", ")+"]"]}var h=t.slice(1),m=r.slice(1),v=r[0]*o,g=[];if(s>20){for(var y=0;y<3;y++){var b=y*v,x=b+v;g.push.apply(g,Tn(rpe(e.slice(b,x),h,n,m,a,!1)))}g.push("...");for(var A=s-3;A<s;A++){var k=A*v,w=k+v;g.push.apply(g,Tn(rpe(e.slice(k,w),h,n,m,a,A===s-1)))}}else for(var S=0;S<s;S++){var I=S*v,E=I+v;g.push.apply(g,Tn(rpe(e.slice(I,E),h,n,m,a,S===s-1)))}var C=2===u?",":"";g[0]="["+g[0]+C;for(var N=1;N<g.length-1;N++)g[N]=" "+g[N]+C;for(var T=",\n",_=2;_<u;_++)T+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(i?"":T),g}function ape(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var ipe=function(){function e(t,n,r){var a=this;if(Ye(this,e),this.dtype=n,this.shape=t.slice(),this.size=zle(t),null!=r){var i=r.length;Fle(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Ule(n,this.size),this.strides=Zle(t)}return Qe(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),Fle(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return ope().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),ope=null,spe=null;var upe=function(){function e(t,n,r,a){Ye(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=zle(t),this.strides=Zle(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return Qe(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=ct(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",spe.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return spe.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=ct(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",Jle(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return Jle(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=ct(st().mark((function e(){var t,n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=ope().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return Zfe(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),ope().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=ope().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return Zfe(e)}))}catch(Bd){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=ct(st().mark((function e(){var t;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,ope().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(ope().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return spe.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),spe.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return epe(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),spe.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),ope().makeVariable(this,e,t,n)}}]),e}();Object.defineProperty(upe,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),lde("Tensor",(function(){return upe}));var cpe,lpe,dpe,fpe,ppe,hpe=function(e){et(n,e);var t=ot(n);function n(e,r,a,i){var o;return Ye(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return Qe(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!Ble(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));ope().disposeTensor(this),this.dataId=e.dataId,ope().incRef(this,null)}},{key:"dispose",value:function(){ope().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(upe);Object.defineProperty(hpe,Symbol.hasInstance,{value:function(e){return e instanceof upe&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(cpe||(cpe={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(lpe||(lpe={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(dpe||(dpe={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(fpe||(fpe={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(ppe||(ppe={}));var mpe={float32:fpe,int32:lpe,bool:dpe,complex64:ppe};function vpe(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return mpe[e][t]}function gpe(e,t){if(e.dtype===t.dtype)return[e,t];var n=vpe(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function ype(e){var t=[];return bpe(e,t,new Set),t}function bpe(e,t,n){if(null!=e)if(e instanceof upe)t.push(e);else if(r=e,Array.isArray(r)||"object"===typeof r){var r,a=e;for(var i in a){var o=a[i];n.has(o)||(n.add(o),bpe(o,t,n))}}}function xpe(e){return null!=e.kernelName}var Ape=function(){function e(){Ye(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return Qe(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),kpe=function(){function e(t){Ye(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Ape}return Qe(e,[{key:"ready",value:function(){var e=ct(st().mark((function e(){var t,n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(Pfe("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=ct(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new Yfe(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;Wfe(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;Wfe(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof Mle||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,Pfe("Initialization of backend ".concat(e," failed")),Pfe(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return Pfe("Initialization of backend ".concat(e," failed")),Pfe(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=Ipe.runKernel(Pde,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return Ipe.runKernel(vde,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=zfe(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=xpe(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(xpe(e)){var l=e.kernelName,d=e.inputs,f=e.attrs;null==this.backendName&&this.backend;var p=zfe(l,this.backendName);Fle(null!=p,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=p.kernelFunc({inputs:d,attrs:f,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){return null!=e.rank?e:a.makeTensorFromTensorInfo(e)}));if(o){var s=a.getTensorsForGradient(l,d,n);i=a.saveTensorsForBackwardMode(s)}return n}}else{var h=e.forwardFunc,m=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return h(a.backend,m)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var v,g=e.inputs,y=e.attrs,b=xpe(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(v=a.profiler.profileKernel(c,g,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(v),t=v.outputs):t=n()})),o&&this.addTapeNode(c,g,t,b,i,y),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(g).map((function(e){return null!=g[e]?g[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:v.timeMs,extraInfo:v.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this;return e.map((function(e){return t.keep(t.clone(e))}))}},{key:"getTensorsForGradient",value:function(e,t,n){var r=Bfe(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(Fle(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&qle(e[0])&&(a=e.map((function(e){return Xfe(e)})));var i=r.write(a,t,n),o=new upe(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(a,r)}},{key:"makeTensorFromTensorInfo",value:function(e,t){var n=e.dataId,r=e.shape,a=e.dtype,i=new upe(r,a,n,this.nextTensorId());return this.trackTensor(i,t),i}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new hpe(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*Gle(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof hpe||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*Gle(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=ct(st().mark((function e(t){var n,r,a,i,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,Tn(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=lc(this.state.activeProfile.kernels),e.prev=12,a.s();case 14:if((i=a.n()).done){e.next=24;break}return o=i.value,e.next=18,o.kernelTimeMs;case 18:return o.kernelTimeMs=e.sent,e.next=21,o.extraInfo;case 21:o.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=Bfe(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=$le(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=ype(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Fle(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));Fle(i instanceof upe,(function(){return"The result y returned by f() must be a tensor."}));var o=Qfe(this.state.activeTape,t,i);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?wpe(i.shape):n,$fe(e,o,(function(e){return r.tidy(e)}),Epe);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=lc(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:i,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return Fle(Xle(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;Fle(r.every((function(e){return e instanceof upe})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(e,t){o[t]=e}));var s=function(t,n){return Fle((i=e.apply(void 0,[].concat(r,[n]))).value instanceof upe,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),Fle(Xle(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},u=function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];Fle(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),Fle(a.every((function(e){return e instanceof upe})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o};return t.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=ct(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Kfe(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=Kfe()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Ape,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function wpe(e){var t=Qle(zle(e),"float32");return Ipe.makeTensor(t,e,"float32")}function Spe(){var e=cde();if(null==e._tfengine){var t=new rde(e);e._tfengine=new kpe(t)}return function(e){ude=e}(e._tfengine.ENV),function(e){ope=e}((function(){return e._tfengine})),e._tfengine}kpe.nextTensorId=0,kpe.nextVariableId=0;var Ipe=Spe();function Epe(e,t){var n={a:e,b:t};return Ipe.runKernel(dde,n)}var Cpe=ode();Cpe.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Cpe.registerFlag("IS_BROWSER",(function(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope})),Cpe.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),Cpe.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),Cpe.registerFlag("PROD",(function(){return!1})),Cpe.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return Cpe.getBool("DEBUG")})),Cpe.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),Cpe.registerFlag("IS_TEST",(function(){return!1})),Cpe.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),Cpe.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1})),Cpe.registerFlag("ENGINE_COMPILE_ONLY",(function(){return!1}));var Npe="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function Tpe(e){return Npe?Buffer.byteLength(e):new Blob([e]).size}function _pe(e){if(Npe)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function Rpe(e){if(Npe){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function Mpe(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function Ope(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function Fpe(e,t){return Ppe.apply(this,arguments)}function Ppe(){return Ppe=ct(st().mark((function e(t,n){var r,a,i,o,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null==t.weightsManifest){e.next=11;break}return e.next=5,n(t.weightsManifest);case 5:a=e.sent,i=u(a,2),o=i[0],s=i[1],r.weightSpecs=o,r.weightData=s;case 11:return null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)}))),Ppe.apply(this,arguments)}function Dpe(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Tpe(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Tpe(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var Lpe=function(){function e(){Ye(this,e),this.saveRouters=[],this.loadRouters=[]}return Qe(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),zpe="tensorflowjs",Bpe="models_store",Wpe="model_info_store";function jpe(){if(!ode().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Vpe(e){var t=e.result;t.createObjectStore(Bpe,{keyPath:"modelPath"}),t.createObjectStore(Wpe,{keyPath:"modelPath"})}var Upe=function(){function e(t){if(Ye(this,e),this.indexedDB=jpe(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return Qe(e,[{key:"save",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(zpe,1);a.onupgradeneeded=function(){return Vpe(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(Bpe,"readonly"),s=o.objectStore(Bpe).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,c=Dpe(t),l=i.transaction(Wpe,"readwrite"),d=l.objectStore(Wpe),f=d.put({modelPath:n.modelPath,modelArtifactsInfo:c});f.onsuccess=function(){var a=(u=i.transaction(Bpe,"readwrite")).objectStore(Bpe).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(d=l.objectStore(Wpe)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},f.onerror=function(e){return i.close(),r(f.error)},l.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();Upe.URL_SCHEME="indexeddb://";var Hpe=function(e){return ode().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Upe.URL_SCHEME)?(t=e.slice(Upe.URL_SCHEME.length),new Upe(t)):null;var t};function Gpe(e){return e.startsWith(Upe.URL_SCHEME)?e.slice(Upe.URL_SCHEME.length):e}Lpe.registerSaveRouter(Hpe),Lpe.registerLoadRouter(Hpe);var qpe=function(){function e(){Ye(this,e),this.indexedDB=jpe()}return Qe(e,[{key:"listModels",value:function(){var e=ct(st().mark((function e(){var t=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(zpe,1);r.onupgradeneeded=function(){return Vpe(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(Wpe,"readonly"),i=a.objectStore(Wpe).getAll();i.onsuccess=function(){var t,n={},r=lc(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=ct(st().mark((function e(t){var n=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Gpe(t),e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(zpe,1);a.onupgradeneeded=function(){return Vpe(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(Wpe,"readwrite"),s=o.objectStore(Wpe),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),o=function(){var a=(n=i.transaction(Bpe,"readwrite")).objectStore(Bpe).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Kpe="/",Xpe="tensorflowjs_models",Zpe="info",Ype="model_topology",Jpe="weight_specs",Qpe="weight_data",$pe="model_metadata";function ehe(e){return{info:[Xpe,e,Zpe].join(Kpe),topology:[Xpe,e,Ype].join(Kpe),weightSpecs:[Xpe,e,Jpe].join(Kpe),weightData:[Xpe,e,Qpe].join(Kpe),modelMetadata:[Xpe,e,$pe].join(Kpe)}}function the(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function nhe(e){var t=e.split(Kpe);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(Kpe)}function rhe(e){return e.startsWith(ahe.URL_SCHEME)?e.slice(ahe.URL_SCHEME.length):e}var ahe=function(){function e(t){if(Ye(this,e),!ode().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=ehe(this.modelPath)}return Qe(e,[{key:"save",value:function(){var e=ct(st().mark((function e(t){var n,r,a,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=Dpe(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,_pe(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),the(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=ct(st().mark((function e(){var t,n,r,a,i,o,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=Rpe(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();ahe.URL_SCHEME="localstorage://";var ihe=function(e){return ode().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ahe.URL_SCHEME)?(t=e.slice(ahe.URL_SCHEME.length),new ahe(t)):null;var t};Lpe.registerSaveRouter(ihe),Lpe.registerLoadRouter(ihe);var ohe=function(){function e(){Ye(this,e),Fle(ode().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Fle("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return Qe(e,[{key:"listModels",value:function(){var e=ct(st().mark((function e(){var t,n,r,a,i,o;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=Xpe+Kpe,r=Kpe+Zpe,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=nhe(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=ct(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=rhe(t),n=ehe(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),the(n),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),she="://",uhe=function(){function e(){Ye(this,e),this.managers={}}return Qe(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){Fle(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(she)&&(t=t.slice(0,t.indexOf(she))),Fle(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Fle(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();var che=function(){function e(){Ye(this,e)}return Qe(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if(ode().get("IS_BROWSER")){ode().setPlatform("browser",new che);try{uhe.registerManager(ahe.URL_SCHEME,new ohe)}catch(k_e){}try{uhe.registerManager(Upe.URL_SCHEME,new qpe)}catch(k_e){}}var lhe,dhe=function(){return n(5410)};var fhe=function(){function e(){Ye(this,e),this.util=n(8628),this.textEncoder=new this.util.TextEncoder}return Qe(e,[{key:"fetch",value:function(e,t){return null!=ode().global.fetch?ode().global.fetch(e,t):(null==lhe&&(lhe=dhe()),lhe(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();function phe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",ede(e),new ipe(e,t,n)}function hhe(e,t){var n=e;if(Hle(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||Hle(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&ode().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&mhe(e,r,[]),r}function mhe(e,t,n){if(n=n||[],Array.isArray(e)||Hle(e)){Fle(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),Fle(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)mhe(e[a],r,n.concat(a))}else Fle(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function vhe(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function ghe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof upe)return vhe(r,e.dtype,t,n),e;var a=Kle(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),vhe(r,a,t,n),null==e||!Hle(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(i,"'"))}var o=hhe(e,a);Hle(e)||Array.isArray(e)||(e=[e]);var s=!0,u="string"!==a?qfe(e,a):Lle(e,[],s);return Ipe.makeTensor(u,o,a)}function yhe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return ghe(e,"".concat(t,"[").concat(a,"]"),n,r)}))}ode().get("IS_NODE")&&!ode().get("IS_BROWSER")&&ode().setPlatform("node",new fhe);function bhe(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+="__op";var a=function(){Ipe.startScope(n);try{var e=r.apply(void 0,arguments);return tde(e)&&console.error("Cannot return a Promise inside of tidy."),Ipe.endScope(e),e}catch(t){throw Ipe.endScope(null),t}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var xhe=bhe({cast_:function(e,t){var n=ghe(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return Ipe.runKernel(vde,r,a)}});var Ahe=bhe({clone_:function(e){var t={x:ghe(e,"x","clone","string_or_numeric")};return Ipe.runKernel(Pde,t)}});Spe();var khe={buffer:phe,cast:xhe,clone:Ahe,print:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}};spe=khe;function whe(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var She=function(){function e(t){if(Ye(this,e),!ode().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return Qe(e,[{key:"save",value:function(){var e=ct(st().mark((function e(t){var n,r,a,i,o,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=Ope(t,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,o.href=i,e.next=15,whe((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,whe((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:Dpe(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();She.URL_SCHEME="downloads://";function Ihe(e,t,n,r){!function(e){Fle(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Fle(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),Fle(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),Fle(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function Ehe(e,t){return Che.apply(this,arguments)}function Che(){return(Che=ct(st().mark((function e(t,n){var r,a,i,o,s,u,c,l,d;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?ode().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,Ihe(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0,u=s.map((function(e){return e.arrayBuffer()})),c=.5,l=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,Ihe(u,n.onProgress,c,l);case 26:e.t1=e.sent;case 27:return d=e.t1,e.abrupt("return",d);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Lpe.registerSaveRouter((function(e){return ode().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(She.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new She(e)}(e.slice(She.URL_SCHEME.length)):null}));var Nhe=function(){function e(t,n){if(Ye(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(Fle("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=ode().platform.fetch,Fle(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&Fle(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return Qe(e,[{key:"save",value:function(){var e=ct(st().mark((function e(t){var n,r,a,i;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=Ope(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(i=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:Dpe(t),responses:[i]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=ct(st().mark((function e(){var t,n,r,a,i,o=this;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",Fpe(n,(function(e){return o.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=ct(st().mark((function e(t){var n,r,a,i,o,s,c,l,d,f,p,h,m,v,g,y,b,x,A;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=The(n),a=u(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,c=[],l=lc(t);try{for(l.s();!(d=l.n()).done;)f=d.value,c.push.apply(c,Tn(f.weights))}catch(k_e){l.e(k_e)}finally{l.f()}p=[],h=[],m=lc(t);try{for(m.s();!(v=m.n()).done;){g=v.value,y=lc(g.paths);try{for(y.s();!(b=y.n()).done;)x=b.value,null!=this.weightUrlConverter?h.push(this.weightUrlConverter(x)):p.push(s+x+o)}catch(k_e){y.e(k_e)}finally{y.f()}}}catch(k_e){m.e(k_e)}finally{m.f()}if(!this.weightUrlConverter){e.next=19;break}return e.t0=p.push,e.t1=p,e.t2=Tn,e.next=16,Promise.all(h);case 16:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 19:return e.next=21,Ehe(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 21:return A=e.sent,e.abrupt("return",[c,Mpe(A)]);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function The(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function _he(e){return null!=e.match(Nhe.URL_SCHEME_REGEX)}Nhe.URL_SCHEME_REGEX=/^https?:\/\//;var Rhe=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return _he(e)})):_he(e))?Mhe(e,t):null};function Mhe(e,t){return new Nhe(e,t)}Lpe.registerSaveRouter(Rhe),Lpe.registerLoadRouter(Rhe);function Ohe(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(i)}}return n}function Fhe(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function Phe(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Dhe(e,t,n){var r,a,i=e.shape.length;return(r="number"===typeof t?[t].concat(Tn(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){Fle(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"===typeof n?[n].concat(Tn(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(Fle(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function Lhe(e,t,n,r,a,i,o,s,u){var c;if(null==r?(c=new Array(t.length)).fill(1):c=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var l=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u},f=0;f<d.dims;f++)l&&0!==(1<<f&s)&&d.numAddAxisAfterEllipsis++,1<<f&o&&(l=!0);l||(d.ellipsisMask|=1<<d.dims,d.dims++);var p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,p);for(var h=!0,m=!0,v=!0,g=[],y=[],b=0;b<e.length;++b){if(0===p.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(p.shrinkAxisMask&1<<b),A=e[b];if(-1!==A){var k=[p.beginMask&1<<b,p.endMask&1<<b],w=[p.strides[b]>0?0:-1,p.strides[b]>0?A:A-1];if(x&&p.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");v=v&&1===p.strides[b];var S=!!(p.beginMask&1<<b&&p.endMask&1<<b);if(p.beginValid&&p.endValid){if(x){var I=p.begin[b]<0?A+p.begin[b]:p.begin[b];if(p.begin[b]=I,p.end[b]=p.begin[b]+1,I<0||I>=A)throw Error("slice index ".concat(p.begin[b]," of dimension ").concat(b," out of bounds."))}else p.begin[b]=zhe(p.begin[b],0,p.strides[b],A,k,w),p.end[b]=zhe(p.end[b],1,p.strides[b],A,k,w);var E=1===p.strides[b]&&0===p.begin[b]&&p.end[b]===A;h=h&&E,m=m&&(0===b&&1===p.strides[b]||E)}else h=h&&1===p.strides[b]&&S,m=m&&(0===b&&1===p.strides[b]||S);var C=void 0,N=!1;if(p.beginValid&&p.endValid?(C=p.end[b]-p.begin[b],N=!0):x?(C=1,N=!0):S&&A>=0&&(C=p.strides[b]<0?-A:A,N=!0),N){var T=void 0;T=0===C||C<0!==p.strides[b]<0?0:Math.trunc(C/p.strides[b])+(C%p.strides[b]!==0?1:0),g.push(T)}else g.push(-1)}else g.push(x?1:-1)}for(var _=0;_<p.finalShapeGatherIndices.length;++_){var R=p.finalShapeGatherIndices[_];R>=0?y.push(g[R]):-2===R&&y.push(1)}var M=y.filter((function(e,t){return-2!==p.finalShapeGatherIndices[t]}));return{finalShapeSparse:M,finalShape:y,isIdentity:h,sliceDim0:m,isSimpleSlice:v,begin:p.begin,end:p.end,strides:p.strides}}function zhe(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}var Bhe=bhe({complex_:function(e,t){var n=ghe(e,"real","complex"),r=ghe(t,"imag","complex");Ple(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return Ipe.runKernel("Complex",a)}});var Whe=bhe({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Fle(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=yhe(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return Ahe(n[0]);var r=n,a={axis:t};return Ipe.runKernel(yde,r,a)}});var jhe=bhe({imag_:function(e){var t={input:ghe(e,"input","imag")};return Ipe.runKernel("Imag",t)}});var Vhe=bhe({real_:function(e){var t={input:ghe(e,"input","real")};return Ipe.runKernel("Real",t)}});var Uhe=bhe({reshape_:function(e,t){var n={x:ghe(e,"x","reshape","string_or_numeric")},r={shape:t};return Ipe.runKernel(rfe,n,r)}});var Hhe=bhe({slice_:function(e,t,n){var r=ghe(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return Ipe.runKernel(dfe,a,i)}});var Ghe=bhe({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=ghe(e,"x","split"),a={x:r},i={numOrSizeSplits:t,axis:n};return Ipe.runKernel(mfe,a,i)}});function qhe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=qhe(e,"float32"),r=qhe(e,"float32");return Bhe(n,r)}var a=$le(zle(e),t);return Ipe.makeTensor(a,e,t)}var Khe=bhe({zerosLike_:function(e){var t={x:ghe(e,"x","zerosLike")};return Ipe.runKernel(Tfe,t)}});var Xhe=bhe({fft_:function(e){Fle("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return Ipe.runKernel("FFT",t)}});var Zhe=bhe({rfft_:function(e,t){Fle("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=Hhe(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=Whe([e,qhe(s)],e.shape.length-1),r=t}else n=e;var u=Khe(n),c=Uhe(Bhe(n,u),[a,r]),l=Xhe(c),d=Math.floor(r/2)+1,f=Vhe(l),p=jhe(l),h=Ghe(f,[d,r-d],f.shape.length-1),m=Ghe(p,[d,r-d],p.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=d,Uhe(Bhe(h[0],m[0]),v)}});var Yhe=bhe({ifft_:function(e){Fle("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return Ipe.runKernel("IFFT",t)}});var Jhe=bhe({mul_:function(e,t){var n=ghe(e,"a","mul"),r=ghe(t,"b","mul"),a=u(gpe(n,r),2),i={a:n=a[0],b:r=a[1]};return Ipe.runKernel(Gde,i)}});var Qhe=bhe({reverse_:function(e,t){var n={x:ghe(e,"x","reverse")},r={dims:t};return Ipe.runKernel(sfe,n,r)}});function $he(e,t,n,r){if(null==r&&(r=Kle(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Hle(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){ede(t);var a=zle(t),i=zle(n);Fle(a===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==zle(t.slice(o));Fle(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return Hle(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?qfe(e,r):Lle(e,[],!0),Ipe.makeTensor(e,t,r)}function eme(e,t){if((Hle(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Hle(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return $he(e,[],[],t)}bhe({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=Uhe(e,[r,n]);t=Yhe(a)}else{var i=[r,2*(n-1)],o=Uhe(Vhe(e),[r,n]),s=Uhe(jhe(e),[r,n]),u=Qhe(Hhe(o,[0,1],[r,n-2]),1),c=Jhe(Qhe(Hhe(s,[0,1],[r,n-2]),1),eme(-1)),l=Whe([o,u],1),d=Whe([s,c],1),f=Uhe(Bhe(l,d),[i[0],i[1]]);t=Yhe(f)}if(t=Vhe(t),3===e.rank&&0!==e.shape[0]){var p=t,h=e.shape[0];t=Uhe(t,[h,t.shape[0]/h,t.shape[1]]),p.dispose()}return t}});function tme(e,t){Dle(e);var n=hhe(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return $he(e,null,n,t)}function nme(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function rme(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return tme(a,"float32")}bhe({hammingWindow_:function(e){return rme(e,.54,.46)}});var ame=bhe({hannWindow_:function(e){return rme(e,.5,.5)}});function ime(e,t,n){var r={shape:e,value:t,dtype:n};return Ipe.runKernel(Nde,{},r)}function ome(e,t,n){if(Dle(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=hhe(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return $he(e,t,r,n)}var sme=bhe({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(Hhe(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=Whe([Hhe(e,i,t-s),ime([s],a)]);o.push(u),i+=n}return 0===o.length?ome([],[0,t]):Uhe(Whe(o),[o.length,t])}});bhe({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ame;null==r&&(r=nme(t));var i=sme(e,t,n),o=Jhe(i,a(t));return Zhe(o,r)}});bhe({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=ghe(e,"image","cropAndResize"),s=ghe(t,"boxes","cropAndResize","float32"),u=ghe(n,"boxInd","cropAndResize","int32"),c=s.shape[0];Fle(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),Fle(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(s.shape,".")})),Fle(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(s.shape,".")})),Fle(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),Fle(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),Fle("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:o,boxes:s,boxInd:u},d={method:a,extrapolationValue:i,cropSize:r},f=Ipe.runKernel(wde,l,d);return f}});bhe({flipLeftRight_:function(e){var t=ghe(e,"image","flipLeftRight","float32");Fle(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return Ipe.runKernel(Tde,n,{})}});var ume=bhe({tile_:function(e,t){var n=ghe(e,"x","tile","string_or_numeric");Fle(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return Ipe.runKernel(Sfe,r,a)}});bhe({grayscaleToRGB_:function(e){var t=ghe(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];Fle(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),Fle(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,ume(t,a)}});bhe({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=ghe(e,"image","rotateWithOffset","float32");Fle(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r},s=Ipe.runKernel(Rfe,i,o);return s}});function cme(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),Fle(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),Fle(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),Fle(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),Fle(1===t.rank,(function(){return"scores must be a 1D tensor"})),Fle(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),Fle(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}bhe({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=ghe(e,"boxes","nonMaxSuppression","float32"),o=ghe(t,"scores","nonMaxSuppression","float32"),s=cme(i,o,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return Ipe.runKernel(Kde,{boxes:i,scores:o},u)}});bhe({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=ghe(e,"boxes","nonMaxSuppression"),s=ghe(t,"scores","nonMaxSuppression"),u=cme(o,s,n,r,a,i),c={boxes:o,scores:s},l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},d=Ipe.runKernel(Zde,c,l);return{selectedIndices:d[0],selectedScores:d[1]}}});bhe({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=ghe(e,"boxes","nonMaxSuppression"),s=ghe(t,"scores","nonMaxSuppression"),u=cme(o,s,n,r,a,null),c=u.maxOutputSize,l=u.iouThreshold,d=u.scoreThreshold,f={boxes:o,scores:s},p={maxOutputSize:c,iouThreshold:l,scoreThreshold:d,padToMaxOutputSize:i},h=Ipe.runKernel(Xde,f,p);return{selectedIndices:h[0],validOutputs:h[1]}}});bhe({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=ghe(e,"images","resizeBilinear");Fle(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),Fle(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),Fle(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=Uhe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ia(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=Ipe.runKernel(ife,s,u);return o?Uhe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});bhe({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=ghe(e,"images","resizeNearestNeighbor");Fle(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),Fle(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),Fle("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),Fle(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=Uhe(a,[1,a.shape[0],a.shape[1],a.shape[2]])),ia(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=Ipe.runKernel(afe,s,u);return o?Uhe(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var lme=bhe({bincount_:function(e,t,n){var r=ghe(e,"x","bincount"),a=ghe(t,"weights","bincount");Fle("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),Fle(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),Fle(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var i={x:r,weights:a},o={size:n};return Ipe.runKernel("Bincount",i,o)}});var dme=bhe({lessEqual_:function(e,t){var n=ghe(e,"a","lessEqual","string_or_numeric"),r=ghe(t,"b","lessEqual","string_or_numeric"),a=u(gpe(n,r),2);n=a[0],r=a[1],Ohe(n.shape,r.shape);var i={a:n,b:r};return Ipe.runKernel(Lde,i)}});var fme=bhe({greater_:function(e,t){var n=ghe(e,"a","greater","string_or_numeric"),r=ghe(t,"b","greater","string_or_numeric"),a=u(gpe(n,r),2);n=a[0],r=a[1],Ohe(n.shape,r.shape);var i={a:n,b:r};return Ipe.runKernel(Ode,i)}});var pme=bhe({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=ghe(e,"x","sum");"bool"===r.dtype&&(r=xhe(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return Ipe.runKernel(hfe,a,i)}});var hme=bhe({add_:function(e,t){var n=ghe(e,"a","add"),r=ghe(t,"b","add"),a=u(gpe(n,r),2),i={a:n=a[0],b:r=a[1]};return Ipe.runKernel(dde,i)}});var mme=bhe({floorDiv_:function(e,t){var n=ghe(e,"a","floorDiv"),r=ghe(t,"b","floorDiv"),a=u(gpe(n,r),2),i={a:n=a[0],b:r=a[1]};return Ipe.runKernel(_de,i)}});var vme=bhe({div_:function(e,t){var n=ghe(e,"a","div"),r=ghe(t,"b","div"),a=u(gpe(n,r),2);if(n=a[0],r=a[1],"int32"===n.dtype&&"int32"===r.dtype)return mme(n,r);var i={a:n,b:r};return Ipe.runKernel(Ede,i,{})}});var gme=bhe({sub_:function(e,t){var n=ghe(e,"a","sub"),r=ghe(t,"b","sub"),a=u(gpe(n,r),2),i={a:n=a[0],b:r=a[1]};return Ipe.runKernel("Sub",i)}});var yme=bhe({round_:function(e){var t={x:ghe(e,"x","round")};return Ipe.runKernel(ufe,t)}});var bme=bhe({broadcastTo_:function(e,t){var n=ghe(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=Uhe(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var u=o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===u.length)return Ahe(n);var c={x:n},l={reps:o};return Ipe.runKernel(Sfe,c,l)}});var xme=bhe({where_:function(e,t,n){var r=ghe(t,"a","where"),a=ghe(n,"b","where"),i=ghe(e,"condition","where","bool"),o=Ohe(Ohe(i.shape,r.shape),a.shape),s={condition:bme(i,o),t:bme(r,o),e:bme(a,o)};return Ipe.runKernel(lfe,s)}});function Ame(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return Ipe.runKernel(tfe,{},a)}function kme(e,t,n){return $he(e,t,hhe(e,n),n)}function wme(e,t){for(var n,r,a,i,o,s,u=tme([-1]),c=tme([0]),l=tme([0]),d=0;d<e.size-1;d++){n=Hhe(e,0,d+1),r=Hhe(e,d+1),o=vme(pme(n),t),s=vme(pme(r),t);var f=pme(Jhe(n,Ame(0,n.size)));a=vme(f,pme(n));var p=ime(r.shape,n.size),h=hme(Ame(0,r.size),p),m=Jhe(r,h);i=vme(pme(m),pme(r));var v=gme(a,i),g=gme(a,i),y=Jhe(o,s);l=Jhe(Jhe(y,v),g);var b=fme(l,c);c=xme(b,l,c),u=xme(b,tme([d]),u)}return u}bhe({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,c=ghe(e,"image","threshold"),l=.2989,d=.587,f=.114,p=c.shape[0]*c.shape[1],h=Jhe(tme([s]),255);if(Fle(3===c.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(c.rank,".")})),Fle(3===c.shape[2]||1===c.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(c.shape[2],".")})),Fle("int32"===c.dtype||"float32"===c.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(c.dtype,".")})),Fle("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===c.shape[2]){var m=Ghe(c,[1,1,1],-1),v=u(m,3);t=v[0],n=v[1],r=v[2];var g=Jhe(t,l),y=Jhe(n,d),b=Jhe(r,f);a=hme(hme(g,y),b)}else a=e;if("otsu"===i){var x=lme(xhe(yme(a),"int32"),kme([]),256);h=wme(x,p)}var A=o?dme(a,h):fme(a,h),k=xhe(Jhe(A,255),"int32");return k}});bhe({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=ghe(e,"image","transform","float32"),s=ghe(t,"transforms","transform","float32");Fle(4===o.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),Fle(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),Fle(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")}));var u={image:o,transforms:s},c={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return Ipe.runKernel(Efe,u,c)}});var Sme=bhe({greaterEqual_:function(e,t){var n=ghe(e,"a","greaterEqual","string_or_numeric"),r=ghe(t,"b","greaterEqual","string_or_numeric"),a=u(gpe(n,r),2);n=a[0],r=a[1],Ohe(n.shape,r.shape);var i={a:n,b:r};return Ipe.runKernel(Fde,i)}});var Ime=bhe({logicalAnd_:function(e,t){var n=ghe(e,"a","logicalAnd","bool"),r=ghe(t,"b","logicalAnd","bool");Ohe(n.shape,r.shape);var a={a:n,b:r};return Ipe.runKernel(zde,a)}});var Eme=bhe({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=yhe(e,"tensors","stack","string_or_numeric");Fle(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&Fle(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return Ipe.runKernel(Jde,r,a)}});var Cme=bhe({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ghe(e,"x","unstack","string_or_numeric");Fle(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return Ipe.runKernel(Nfe,r,a)}});bhe({bandPart_:function(e,t,n){Fle(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),Fle(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=ghe(e,"a","bandPart");Fle(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=u(r.shape.slice(-2),2),o=i[0],s=i[1];if(!(t<=o))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(o,")."));if(!(n<=s))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(s,")."));t<0&&(t=o),n<0&&(n=s);var c=Uhe(Ame(0,o,1,"int32"),[-1,1]),l=Ame(0,s,1,"int32"),d=gme(c,l),f=Ime(dme(d,eme(+t,"int32")),Sme(d,eme(-n,"int32"))),p=qhe([o,s],r.dtype);return Uhe(Eme(Cme(Uhe(r,[-1,o,s])).map((function(e){return xme(f,e,p)}))),a)}});var Nme=bhe({abs_:function(e){var t=ghe(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return Ipe.runKernel("ComplexAbs",n)}var r={x:t};return Ipe.runKernel("Abs",r)}});function Tme(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function _me(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function Rme(e,t){return function(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}(e,t.map((function(e){return 1})),t)}function Mme(e,t,n){Fle(Tme(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function Ome(e,t){if(Tme(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function Fme(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function Pme(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var Dme=bhe({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=ghe(e,"x","max"),a={x:r},i={reductionIndices:t,keepDims:n};return Ipe.runKernel(Bde,a,i)}});var Lme=bhe({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=ghe(e,"x","min"),a={x:r},i={axis:t,keepDims:n};return Ipe.runKernel(Vde,a,i)}});var zme=bhe({pow_:function(e,t){var n=ghe(e,"base","pow"),r=ghe(t,"exp","pow"),a=u(gpe(n,r),2),i={a:n=a[0],b:r=a[1]};return Ipe.runKernel("Pow",i)}});var Bme=bhe({sqrt_:function(e){var t={x:ghe(e,"x","sqrt","float32")};return Ipe.runKernel(pfe,t)}});var Wme=bhe({square_:function(e){var t=ghe(e,"x","square");return Ipe.runKernel("Square",{x:t},{})}});function jme(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return Nme(e);if(1!==e.rank&&null===n)return jme(Uhe(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return pme(Nme(e),n);if(t===1/0)return Dme(Nme(e),n);if(t===-1/0)return Lme(Nme(e),n);if("euclidean"===t||2===t)return Bme(pme(zme(Nme(e),eme(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return Dme(pme(Nme(e),n[0]),n[1]-1);if(t===1/0)return Dme(pme(Nme(e),n[1]),n[0]);if(t===-1/0)return Lme(pme(Nme(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return Bme(pme(Wme(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var Vme=bhe({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=jme(e=ghe(e,"x","norm"),t,n),i=a.shape;if(r){var o=Vle(n,e.shape);i=Rme(a.shape,o)}return Uhe(a,i)}});var Ume=bhe({squeeze_:function(e,t){var n=ghe(e,"x","squeeze");return Uhe(n,function(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:Vle(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}(n.shape,t).newShape)}});bhe({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,Fle(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Fle(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=Ghe(e,e.shape[0],0).map((function(e){return Ume(e,[0])}))),Fle(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(Ipe.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=Jhe(pme(Jhe(n[a],t)),n[a]);t=gme(t,i)}return vme(t,Vme(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?Eme(n,0):n}});function Hme(e){ype(e).forEach((function(e){return e.dispose()}))}!function(e){e}((function(e){ode().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}));var Gme=bhe({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ghe(e,"x","expandDims","string_or_numeric");Fle(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return Ipe.runKernel(Cde,r,a)}});var qme=bhe({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=phe([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=Uhe(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return ume(Gme(s,0),[n[0],1,1]);if(2===n.length)return ume(Gme(Gme(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return ume(Gme(Gme(Gme(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});var Kme=bhe({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=ghe(e,"a","matMul"),i=ghe(t,"b","matMul"),o=gpe(a,i),s=u(o,2),c={a:a=s[0],b:i=s[1]},l={transposeA:n,transposeB:r};return Ipe.runKernel(mde,c,l)}});var Xme=bhe({neg_:function(e){var t={x:ghe(e,"x","neg")};return Ipe.runKernel("Neg",t)}});var Zme=bhe({transpose_:function(e,t,n){var r=ghe(e,"x","transpose");if(null==t&&(t=r.shape.map((function(e,t){return t})).reverse()),Fle(r.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(r.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){Fle(e>=0&&e<r.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(r.rank-1)+" but got ".concat(t)}))})),r.rank<=1)return r.clone();var a={x:r},i={perm:t};return"complex64"===r.dtype?function(e,t){return Ipe.tidy(e,t)}((function(){var e=Vhe(r),t=jhe(r);return e=Ipe.runKernel(Cfe,{x:e},i),t=Ipe.runKernel(Cfe,{x:t},i),n&&(t=Xme(t)),Bhe(e,t)})):Ipe.runKernel(Cfe,a,i)}});function Yme(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ipe.tidy((function(){Fle(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=qme(n),i=Ahe(e),o=ome([[1]],[1,1]),s=Ahe(o),c=n>=r?r:n,l=function(e){var t=i,c=s,l=a,d=Ipe.tidy((function(){var t=Hhe(i,[e,e],[n-e,1]),u=Vme(t),c=Hhe(i,[e,e],[1,1]),l=xme(fme(c,0),ome([[-1]]),ome([[1]])),d=gme(c,Jhe(l,u)),f=vme(t,d);s=1===f.shape[0]?Ahe(o):Whe([o,Hhe(f,[1,0],[f.shape[0]-1,f.shape[1]])],0);var p=Xme(vme(Kme(l,d),u)),h=Hhe(i,[e,0],[n-e,r]),m=Jhe(p,s),v=Zme(s);if(0===e)i=gme(h,Kme(m,Kme(v,h)));else{var g=gme(h,Kme(m,Kme(v,h)));i=Whe([Hhe(i,[0,0],[e,r]),g],0)}var y=Zme(m),b=Hhe(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=gme(b,Kme(Kme(b,s),y));else{var x=gme(b,Kme(Kme(b,s),y));a=Whe([Hhe(a,[0,0],[n,e]),x],1)}return[s,i,a]})),f=u(d,3);s=f[0],i=f[1],a=f[2],Hme([t,c,l])},d=0;d<c;++d)l(d);return!t&&n>r&&(a=Hhe(a,[0,0],[n,r]),i=Hhe(i,[0,0],[r,r])),[a,i]}))}var Jme;bhe({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Fle(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return Yme(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=Cme(Uhe(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach((function(e){var n=u(Yme(e,t),2),r=n[0],o=n[1];a.push(r),i.push(o)}));var o=Uhe(Eme(a,0),e.shape),s=Uhe(Eme(i,0),e.shape);return[o,s]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Jme||(Jme={}));var Qme=bhe({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=ghe(e,"x","mean"),a={x:r},i={axis:t,keepDims:n};return Ipe.runKernel(jde,a,i)}});var $me=bhe({notEqual_:function(e,t){var n=ghe(e,"a","notEqual","string_or_numeric"),r=ghe(t,"b","notEqual","string_or_numeric"),a=u(gpe(n,r),2);n=a[0],r=a[1],Ohe(n.shape,r.shape);var i={a:n,b:r};return Ipe.runKernel(qde,i)}});function eve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=eve(e,"float32"),r=qhe(e,"float32");return Bhe(n,r)}var a=Qle(zle(e),t);return Ipe.makeTensor(a,e,t)}var tve=bhe({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jme.SUM_BY_NONZERO_WEIGHTS,r=ghe(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=ghe(t,"weights","computeWeightedLoss"));var i=null==a?r:Jhe(r,a);if(n===Jme.NONE)return i;if(n===Jme.SUM)return pme(i);if(n===Jme.MEAN){if(null==a)return Qme(i);var o=r.size/a.size,s=vme(pme(i),pme(a));return o>1?vme(s,eme(o)):s}if(n===Jme.SUM_BY_NONZERO_WEIGHTS){if(null==a)return vme(pme(i),eme(r.size));var u=Jhe(a,eve(r.shape)),c=xhe(pme($me(u,eme(0))),"float32");return vme(pme(i),c)}throw Error("Unknown reduction: ".concat(n))}});bhe({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Jme.SUM_BY_NONZERO_WEIGHTS,a=ghe(e,"labels","absoluteDifference"),i=ghe(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=ghe(n,"weights","absoluteDifference")),Ple(a.shape,i.shape,"Error in absoluteDifference: ");var s=Nme(gme(a,i));return tve(s,o,r)}});bhe({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Jme.SUM_BY_NONZERO_WEIGHTS,i=ghe(e,"labels","cosineDistance"),o=ghe(t,"predictions","cosineDistance"),s=null;null!=r&&(s=ghe(r,"weights","cosineDistance")),Ple(i.shape,o.shape,"Error in cosineDistance: ");var u=eme(1),c=gme(u,pme(Jhe(i,o),n,!0));return tve(c,s,a)}});var nve=bhe({relu_:function(e){var t={x:ghe(e,"x","relu")};return Ipe.runKernel(nfe,t)}});bhe({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Jme.SUM_BY_NONZERO_WEIGHTS,a=ghe(e,"labels","hingeLoss"),i=ghe(t,"predictions","hingeLoss"),o=null;null!=n&&(o=ghe(n,"weights","hingeLoss")),Ple(a.shape,i.shape,"Error in hingeLoss: ");var s=eme(1);a=gme(Jhe(eme(2),a),s);var u=nve(gme(s,Jhe(a,i)));return tve(u,o,r)}});var rve=bhe({minimum_:function(e,t){var n=ghe(e,"a","minimum"),r=ghe(t,"b","minimum"),a=u(gpe(n,r),2);n=a[0],r=a[1],"bool"===n.dtype&&(n=xhe(n,"int32"),r=xhe(r,"int32")),Ohe(n.shape,r.shape);var i={a:n,b:r};return Ipe.runKernel(Ude,i)}});bhe({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Jme.SUM_BY_NONZERO_WEIGHTS,i=ghe(e,"labels","huberLoss"),o=ghe(t,"predictions","huberLoss"),s=null;null!=n&&(s=ghe(n,"weights","huberLoss")),Ple(i.shape,o.shape,"Error in huberLoss: ");var u=eme(r),c=Nme(gme(o,i)),l=rve(c,u),d=gme(c,l),f=hme(Jhe(eme(.5),Wme(l)),Jhe(u,d));return tve(f,s,a)}});var ave=bhe({log_:function(e){var t={x:ghe(e,"x","log","float32")};return Ipe.runKernel("Log",t)}});bhe({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Jme.SUM_BY_NONZERO_WEIGHTS,i=ghe(e,"labels","logLoss"),o=ghe(t,"predictions","logLoss"),s=null;null!=n&&(s=ghe(n,"weights","logLoss")),Ple(i.shape,o.shape,"Error in logLoss: ");var u=eme(1),c=eme(r),l=Xme(Jhe(i,ave(hme(o,c)))),d=Jhe(gme(u,i),ave(hme(gme(u,o),c))),f=gme(l,d);return tve(f,s,a)}});var ive=bhe({squaredDifference_:function(e,t){var n=ghe(e,"a","squaredDifference"),r=ghe(t,"b","squaredDifference"),a=u(gpe(n,r),2);n=a[0],r=a[1],Ohe(n.shape,r.shape);var i={a:n,b:r};return Ipe.runKernel(Afe,i,{})}});bhe({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Jme.SUM_BY_NONZERO_WEIGHTS,a=ghe(e,"labels","meanSquaredError"),i=ghe(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=ghe(n,"weights","meanSquaredError")),Ple(a.shape,i.shape,"Error in meanSquaredError: ");var s=ive(a,i);return tve(s,o,r)}});var ove=bhe({exp_:function(e){var t={x:ghe(e,"x","exp")};return Ipe.runKernel("Exp",t)}});var sve=bhe({log1p_:function(e){var t={x:ghe(e,"x","log1p")};return Ipe.runKernel("Log1p",t)}});function uve(e,t){var n=ghe(e,"labels","sigmoidCrossEntropyWithLogits"),r=ghe(t,"logits","sigmoidCrossEntropyWithLogits");Ple(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=nve(r),i=Jhe(r,n),o=sve(ove(Xme(Nme(r))));return hme(gme(a,i),o)}bhe({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Jme.SUM_BY_NONZERO_WEIGHTS,i=ghe(e,"multiClassLabels","sigmoidCrossEntropy"),o=ghe(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=ghe(n,"weights","sigmoidCrossEntropy")),Ple(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=eme(r),c=eme(1),l=eme(.5);i=hme(Jhe(i,gme(c,u)),Jhe(l,u))}var d=uve(i,o);return tve(d,s,a)}});function cve(e){return Ipe.customGrad(e)}var lve=bhe({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=ghe(e,"x","logSumExp"),a=Vle(t,r.shape),i=Dme(r,a,!0),o=gme(r,i),s=ove(o),u=pme(s,a),c=ave(u),l=hme(Uhe(i,c.shape),c);if(n){var d=Rme(l.shape,a);return Uhe(l,d)}return l}});function dve(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=cve((function(e,t,r){var a=lve(t,[n],!0),i=gme(xhe(t,"float32"),a);r([e,i]);var o=Xme(Jhe(i,e));return{value:pme(o,[n]),gradFunc:function(e,t){var r=u(t,2),a=r[0],i=r[1],o=Rme(e.shape,[n]);return[Jhe(Uhe(e,o),gme(xhe(a,"float32"),ove(i))),Jhe(Uhe(e,o),gme(ove(i),xhe(a,"float32")))]}}}));return r(e,t)}bhe({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Jme.SUM_BY_NONZERO_WEIGHTS,i=ghe(e,"onehotLabels","softmaxCrossEntropy"),o=ghe(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=ghe(n,"weights","softmaxCrossEntropy")),Ple(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=eme(r),c=eme(1),l=eme(i.shape[1]);i=hme(Jhe(i,gme(c,u)),vme(u,l))}var d=dve(i,o);return tve(d,s,a)}});bhe({sparseFillEmptyRows_:function(e,t,n,r){var a=ghe(e,"indices","sparseFillEmptyRows","int32"),i=ghe(t,"values","sparseFillEmptyRows"),o=ghe(n,"denseShape","sparseFillEmptyRows","int32"),s=ghe(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:i,denseShape:o,defaultValue:s},c=Ipe.runKernel(gfe,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});bhe({sparseReshape_:function(e,t,n){var r=ghe(e,"inputIndices","sparseReshape","int32"),a=ghe(t,"inputShape","sparseReshape","int32"),i=ghe(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},s=Ipe.runKernel(yfe,o);return{outputIndices:s[0],outputShape:s[1]}}});bhe({sparseSegmentMean_:function(e,t,n){var r=ghe(e,"data","sparseSegmentMean"),a=ghe(t,"indices","sparseSegmentMean","int32"),i=ghe(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return Ipe.runKernel(bfe,o)}});bhe({sparseSegmentSum_:function(e,t,n){var r=ghe(e,"data","sparseSegmentSum"),a=ghe(t,"indices","sparseSegmentSum","int32"),i=ghe(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return Ipe.runKernel(xfe,o)}});bhe({stringNGrams_:function(e,t,n,r,a,i,o,s){var u=ghe(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var c=ghe(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");var l={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},d={data:u,dataSplits:c},f=Ipe.runKernel("StringNGrams",d,l);return{nGrams:f[0],nGramsSplits:f[1]}}});bhe({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=ghe(e,"input","stringSplit","string"),a=ghe(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},s=Ipe.runKernel(wfe,o,i);return{indices:s[0],values:s[1],shape:s[2]}}});bhe({stringToHashBucketFast_:function(e,t){var n=ghe(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return Ipe.runKernel("StringToHashBucketFast",a,r)}});function fve(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function pve(e,t,n,r,a,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",c=vve(t),l=u(c,2),d=l[0],f=l[1];if("channelsLast"===s)o=[d,f,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[d,f,e[1],e[1]]}return hve(e,o,n,r,a,i,!1,s)}function hve(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",c=-1,l=-1,d=-1,f=-1;if("channelsLast"===s){var p=u(e,4);c=p[0],l=p[1],d=p[2],f=p[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var h=u(e,4);c=h[0],f=h[1],l=h[2],d=h[3]}var m,v=u(t,4),g=v[0],y=v[1],b=v[3],x=vve(n),A=u(x,2),k=A[0],w=A[1],S=vve(r),I=u(S,2),E=I[0],C=I[1],N=gve(g,E),T=gve(y,C),_=yve(a,l,d,k,w,N,T,i,s),R=_.padInfo,M=_.outHeight,O=_.outWidth,F=o?b*f:b;return"channelsFirst"===s?m=[c,F,M,O]:"channelsLast"===s&&(m=[c,M,O,F]),{batchSize:c,dataFormat:s,inHeight:l,inWidth:d,inChannels:f,outHeight:M,outWidth:O,outChannels:F,padInfo:R,strideHeight:k,strideWidth:w,filterHeight:g,filterWidth:y,effectiveFilterHeight:N,effectiveFilterWidth:T,dilationHeight:E,dilationWidth:C,inShape:e,outShape:m,filterShape:t}}function mve(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=gve(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function vve(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function gve(e,t){return t<=1?e:e+(e-1)*(t-1)}function yve(e,t,n,r,a,i,o,s,u){var c,l,d;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,a){null==r&&(r=mve(e,t,n));var i=e[0],o=e[1];return[bve((i-t+2*r)/n+1,a),bve((o-t+2*r)/n+1,a)]}([t,n],i,r,e,s);l=f[0],d=f[1]}else if("same"===e){l=Math.ceil(t/r),d=Math.ceil(n/a);var p=Math.max(0,(l-1)*r+i-t),h=Math.max(0,(d-1)*a+o-n),m=Math.floor(p/2),v=p-m,g=Math.floor(h/2);c={top:m,bottom:v,left:g,right:h-g,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-i+1)/r),d=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var y="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],x="channelsLast"===u?e[2][0]:e[3][0],A="channelsLast"===u?e[2][1]:e[3][1];c={top:y,bottom:b,left:x,right:A,type:0===y&&0===b&&0===x&&0===A?"VALID":"EXPLICIT"},l=bve((t-i+y+b)/r+1,s),d=bve((n-o+x+A)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:d}}function bve(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function xve(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}bhe({elu_:function(e){var t={x:ghe(e,"x","elu","float32")};return Ipe.runKernel("Elu",t)}});bhe({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=ghe(e,"x","leakyRelu"),r={x:n},a={alpha:t};return Ipe.runKernel(Dde,r,a)}});bhe({prelu_:function(e,t){var n={x:ghe(e,"x","prelu"),alpha:ghe(t,"alpha","prelu")};return Ipe.runKernel($de,n)}});bhe({relu6_:function(e){var t={x:ghe(e,"x","relu6")};return Ipe.runKernel(ofe,t)}});bhe({sigmoid_:function(e){var t={x:ghe(e,"x","sigmoid","float32")};return Ipe.runKernel(ffe,t)}});bhe({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ghe(e,"x","step"),r={x:n},a={alpha:t};return Ipe.runKernel(_fe,r,a)}});function Ave(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function kve(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2===1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function wve(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}var Sve,Ive,Eve;function Cve(e){try{return e.map((function(e){return Zfe(e)}))}catch(k_e){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(k_e))}}function Nve(e){return e.map((function(e){return Xfe(e)}))}!function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(Sve||(Sve={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"}(Ive||(Ive={}));var Tve={kernelName:Mfe,backendName:"wasm",setupFunc:function(e){Eve=e.wasm.cwrap(Mfe,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights;if("float32"!==a.dtype||"float32"!==i.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");var u=r.transposeA,c=r.transposeB,l=r.activation,d=r.leakyreluAlpha,f=n.dataIdMap.get(a.dataId).id,p=n.dataIdMap.get(i.dataId).id,h=0;if(null!=o){var m=n.dataIdMap.get(o.dataId);if(1!==m.shape.length)throw new Error("_FusedMatMul only supports rank-1 bias but got "+"rank ".concat(m.shape.length,"."));h=m.id}var v=null==s?0:n.dataIdMap.get(s.dataId).id,g=Ive[l];if(null==g)throw new Error("".concat(l," activation not yet supported for FusedConv2D ")+"in the wasm backend.");var y=u?a.shape[2]:a.shape[1],b=c?i.shape[1]:i.shape[2],x=Ohe(a.shape.slice(0,-2),i.shape.slice(0,-2)),A=n.makeOutput([].concat(Tn(x),[y,b]),a.dtype),k=n.dataIdMap.get(A.dataId).id,w=new Uint8Array(new Int32Array(a.shape).buffer),S=new Uint8Array(new Int32Array(i.shape).buffer);return Eve(f,w,a.shape.length,p,S,i.shape.length,u,c,g,h,v,d||0,k),A}};function _ve(e,t){var n;return{kernelName:e,backendName:"wasm",setupFunc:function(t){n=t.wasm.cwrap(e,null,["number","number","number"])},kernelFunc:function(e){var r=e.backend,a=e.inputs.x,i=r.dataIdMap.get(a.dataId).id,o=r.makeOutput(a.shape,t||a.dtype),s=r.dataIdMap.get(o.dataId).id;return 0===zle(o.shape)||n(i,Sve[a.dtype],s),o}}}var Rve=_ve("Abs");function Mve(e,t,n){var r;return{kernelName:e,backendName:"wasm",setupFunc:function(t){r=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs,i=a.a,o=a.b,s=t.dataIdMap.get(i.dataId).id,u=t.dataIdMap.get(o.dataId).id,c=null!=n?n:i.dtype,l=Ohe(i.shape,o.shape),d=t.makeOutput(l,c);if(0===zle(l))return d;var f=new Uint8Array(new Int32Array(i.shape).buffer),p=new Uint8Array(new Int32Array(o.shape).buffer),h=t.dataIdMap.get(d.dataId).id;return r(s,f,i.shape.length,u,p,o.shape.length,Sve[i.dtype],h),d}}}var Ove,Fve=Mve(dde);var Pve={kernelName:fde,backendName:"wasm",setupFunc:function(e){Ove=e.wasm.cwrap(fde,null,["array","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=n.makeOutput(t[0].shape,t[0].dtype);if(0===zle(r.shape))return r;var a=t.map((function(e){return n.dataIdMap.get(e.dataId).id})),i=new Uint8Array(new Int32Array(a).buffer),o=n.dataIdMap.get(r.dataId).id;return Ove(i,a.length,Sve[r.dtype],o),r}};function Dve(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype),a=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(r).set(a),r}var Lve,zve={kernelName:Pde,backendName:"wasm",kernelFunc:Dve};function Bve(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=function(e,t){for(var n=[],r=[],a=0;a<e.length;++a)1!==e[a]&&n.push(e[a]),1!==e[t[a]]&&r.push(t[a]);for(var i=0;i<r.length;++i){for(var o=-1,s=0;s<r.length;++s)r[s]>=i&&(-1===o||r[o]>r[s])&&(o=s);r[o]=i}return[n,r]}(t.x.shape,r.perm),i=u(a,2),o=i[0],s=i[1],c=!0,l=0;l<s.length;l++)s[l]!==l&&(c=!1);var d=function(e,t){for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];return n}(t.x.shape,r.perm),f={dataId:t.x.dataId,shape:o,dtype:t.x.dtype};if(c){var p=Dve({inputs:t,backend:n});return p.shape=d,p}var h=n.makeOutput(d,f.dtype),m=n.dataIdMap.get(f.dataId).id,v=n.dataIdMap.get(h.dataId).id,g=new Uint8Array(new Int32Array(s).buffer),y=new Uint8Array(new Int32Array(f.shape).buffer);return Lve(m,y,f.shape.length,Sve[f.dtype],v,g,s.length),h}var Wve,jve={kernelName:Cfe,backendName:"wasm",kernelFunc:Bve,setupFunc:function(e){Lve=e.wasm.cwrap(Cfe,null,["number","array","number","number","number","array","number"])}};function Vve(e,t,n){var r=e.shape,a=e.shape.length,i=Vle(t,r),o=i,s=Ome(o,a),u=null,c=!1;if(null!=s){for(var l=new Array(a),d=0;d<l.length;d++)l[d]=r[s[d]];o=Pme(o.length,a),u=Bve({inputs:{x:e},attrs:{perm:s},backend:n});var f=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(u.dataId).id!==f&&(c=!0)}return{transposed:u,originalAxes:i,axes:o,inputWasTransposed:c}}var Uve,Hve={kernelName:"All",backendName:"wasm",setupFunc:function(e){Wve=e.wasm.cwrap("All",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,c=o,l=Vve(o,a,t),d=l.transposed,f=l.axes,p=l.originalAxes,h=l.inputWasTransposed;h&&(c=d,s=t.dataIdMap.get(d.dataId).id),Mme("all",f,c.shape.length);var m=u(_me(c.shape,f),2),v=m[0],g=zle(m[1]),y=t.makeOutput(v,o.dtype);if(0!==zle(c.shape)){var b=t.dataIdMap.get(y.dataId).id;Wve(s,g,b)}if(h&&t.disposeData(d.dataId),i){var x=Rme(y.shape,p);y.shape=x}return y}};var Gve,qve={kernelName:"Any",backendName:"wasm",setupFunc:function(e){Uve=e.wasm.cwrap("Any",null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,c=o,l=Vve(o,a,t),d=l.transposed,f=l.axes,p=l.originalAxes,h=l.inputWasTransposed;h&&(c=d,s=t.dataIdMap.get(d.dataId).id),Mme("any",f,c.shape.length);var m=u(_me(c.shape,f),2),v=m[0],g=zle(m[1]),y=t.makeOutput(v,o.dtype);if(0!==zle(c.shape)){var b=t.dataIdMap.get(y.dataId).id;Uve(s,g,b)}if(h&&t.disposeData(d.dataId),i){var x=Rme(y.shape,p);y.shape=x}return y}};var Kve,Xve={kernelName:pde,backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.axis,a=n.x,i=t.dataIdMap.get(a.dataId).id,o=i,s=a,u=Vve(a,r,t),c=u.transposed,l=u.axes,d=u.inputWasTransposed;if(d){var f=t.dataIdMap.get(c.dataId).id;f!==i&&(s=c,o=f)}var p=s.shape.slice(0,-1),h=t.makeOutput(p,"int32"),m=t.dataIdMap.get(h.dataId).id,v=zle(h.shape),g=s.shape[l[0]];return Gve(o,Sve[s.dtype],v,g,m),d&&t.disposeData(c.dataId),h},setupFunc:function(e){Gve=e.wasm.cwrap(pde,null,["number","number","number","number","number"])}};var Zve={kernelName:hde,backendName:"wasm",setupFunc:function(e){Kve=e.wasm.cwrap(hde,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=r.dataIdMap.get(a.dataId).id,o=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode,l=pve(a.shape,o,s,1,u,c),d=l.filterHeight,f=l.filterWidth,p=l.padInfo.top,h=l.padInfo.right,m=l.padInfo.bottom,v=l.padInfo.left,g=l.strideHeight,y=l.strideWidth,b=l.inChannels;if("channelsLast"!==l.dataFormat)throw new Error("wasm backend does not support dataFormat:'"+"".concat(l.dataFormat,"'. Please use 'channelsLast'."));if(1!==l.dilationWidth||1!==l.dilationHeight)throw new Error("was backend only supports average pooling with dilation = [1, 1], "+"got [".concat(l.dilationHeight,", ").concat(l.dilationWidth,"]."));var x=r.makeOutput(l.outShape,"float32"),A=r.dataIdMap.get(x.dataId).id;return Kve(i,a.shape[0],a.shape[1],a.shape[2],d,f,p,h,m,v,g,y,b,A),x}};function Yve(e){var t=e.inputs,n=e.attrs,r=t.x,a=n.shape,i=zle(r.shape),o=function(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}(a,i);return Fle(i===zle(o),(function(){return"new shape: ".concat(o,", old shape: ").concat(r.shape,". New shape and old ")+"shape must have the same number of elements."})),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:o,dtype:r.dtype}}var Jve,Qve={kernelName:rfe,backendName:"wasm",kernelFunc:Yve};var $ve={kernelName:mde,backendName:"wasm",setupFunc:function(e){Jve=e.wasm.cwrap(mde,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;if("float32"!==a.dtype||"float32"!==i.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");var u=a.shape.length,c=i.shape.length,l=o?a.shape[u-2]:a.shape[u-1],d=s?i.shape[c-1]:i.shape[c-2],f=o?a.shape[u-1]:a.shape[u-2],p=s?i.shape[c-2]:i.shape[c-1],h=a.shape.slice(0,-2),m=i.shape.slice(0,-2),v=zle(h),g=zle(m),y=Ohe(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([f,p]);Fle(l===d,(function(){return"Error in matMul: inner shapes (".concat(l,") and (")+"".concat(d,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(i.shape," and transposeA=").concat(o)+" and transposeB=".concat(s," must match.")}));var b=s?[g,p,d]:[g,d,p],x=Yve({inputs:{x:a},backend:n,attrs:{shape:o?[v,l,f]:[v,f,l]}}),A=Yve({inputs:{x:i},backend:n,attrs:{shape:b}}),k=n.dataIdMap.get(x.dataId).id,w=n.dataIdMap.get(A.dataId).id,S=o?x.shape[2]:x.shape[1],I=s?A.shape[1]:A.shape[2],E=Math.max(v,g),C=n.makeOutput([E,S,I],x.dtype),N=n.dataIdMap.get(C.dataId).id,T=new Uint8Array(new Int32Array(x.shape).buffer),_=new Uint8Array(new Int32Array(A.shape).buffer);return Jve(k,T,x.shape.length,w,_,A.shape.length,o,s,N),n.disposeData(x.dataId),n.disposeData(A.dataId),C.shape=y,C}};function ege(e,t,n,r,a){var i=Fhe(r,t,n),o=zle(n),s=Zle(r);if(i){var u=Phe(t,s);return"string"===a?e.slice(u,u+o):e.subarray(u,u+o)}for(var c=phe(r,a,"string"===a?Cve(e):e),l=phe(n,a),d=0;d<l.size;++d){var f=l.indexToLoc(d),p=f.map((function(e,n){return e+t[n]}));l.set.apply(l,[c.get.apply(c,Tn(p))].concat(Tn(f)))}return"string"===a?Nve(l.values):l.values}function tge(e){var t=e.inputs.x,n=e.attrs,r=n.begin,a=n.size,i=e.backend,o=u(Dhe(t,r,a),2),s=o[0],c=o[1],l=Fhe(t.shape,s,c),d=i.readSync(t.dataId),f=i.makeOutput(c,t.dtype),p=Zle(t.shape),h=i.dataIdMap.get(f.dataId);if(l){var m=Phe(s,p);if("string"===t.dtype)h.stringBytes=d.slice(m,m+zle(c));else i.typedArrayFromHeap(f).set(d.subarray(m,m+zle(c)));return f}if("string"===t.dtype){var v=ege(d,s,c,t.shape,t.dtype);return h.stringBytes=v,f}var g=i.typedArrayFromHeap(f),y=t.shape.length;if(2===y)!function(e,t,n,r,a){for(var i=0,o=r[0],s=r[1],u=o+a[0],c=o;c<u;c++){var l=c*t+s;n.set(e.subarray(l,l+a[1]),i),i+=a[1]}}(d,p[0],g,s,c);else if(3===y)!function(e,t,n,r,a,i){for(var o=0,s=a[0],u=a[1],c=a[2],l=s+i[0],d=u+i[1],f=s;f<l;f++)for(var p=u;p<d;p++){var h=f*t+p*n+c;r.set(e.subarray(h,h+i[2]),o),o+=i[2]}}(d,p[0],p[1],g,s,c);else if(4===y)!function(e,t,n,r,a,i,o){for(var s=0,u=i[0],c=i[1],l=i[2],d=u+o[0],f=c+o[1],p=l+o[2],h=i[3],m=u;m<d;m++)for(var v=c;v<f;v++)for(var g=l;g<p;g++){var y=m*t+v*n+g*r+h;a.set(e.subarray(y,y+o[3]),s),s+=o[3]}}(d,p[0],p[1],p[2],g,s,c);else{var b=ege(d,s,c,t.shape,t.dtype);g.set(b)}return f}var nge={kernelName:dfe,backendName:"wasm",kernelFunc:tge};var rge={kernelName:"BatchToSpaceND",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops,s=i.reduce((function(e,t){return e*t})),u=Ave(a.shape,i,s),c=kve(u.length,i.length),l=wve(a.shape,i,s),d=function(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}(o,i.length),f=function(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}(l,o,i.length),p=Yve({inputs:{x:a},backend:n,attrs:{shape:u}}),h=Bve({inputs:{x:p},backend:n,attrs:{perm:c}}),m=tge({inputs:{x:Yve({inputs:{x:h},backend:n,attrs:{shape:l}})},backend:n,attrs:{begin:d,size:f}});return n.disposeData(p.dataId),n.disposeData(h.dataId),n.disposeData(p.dataId),m}};function age(e){var t=e.inputs.x,n=e.attrs.dtype,r=e.backend,a=r.makeOutput(t.shape,n),i=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(a).set(i),a}var ige,oge={kernelName:vde,backendName:"wasm",kernelFunc:age},sge=_ve("Ceil");var uge={kernelName:gde,backendName:"wasm",setupFunc:function(e){ige=e.wasm.cwrap(gde,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.clipValueMin,o=r.clipValueMax,s=n.dataIdMap.get(a.dataId).id,u=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(u.dataId).id;return ige(s,i,o,c),u}};function cge(e){var t=e.inputs,n=e.backend,r=Vle(e.attrs.axis,t[0].shape)[0],a=fve(t.map((function(e){return e.shape})),r),i=t.filter((function(e){return zle(e.shape)>0}));if(1===i.length)return Dve({inputs:{x:i[0]},backend:n});var o=n.makeOutput(a,t[0].dtype);if(0===zle(a))return o;var s=i.map((function(e){return e.shape}));if(function(e,t){var n=e[0].length;e.forEach((function(e,t){Fle(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),Fle(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)Fle(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}(s,r),"string"===i[0].dtype){var u=i.map((function(e){var t=zle(e.shape.slice(r));return Yve({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),c=u.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}}));a=fve(u.map((function(e){return e.shape})),1);var l=1===u[0].shape[0],d=function(e,t,n,r){var a=Ule(n,zle(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=zle(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?Cve(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+o,c=0;c<e.shape[1];++c)a[u+c]=r[i++];o+=e.shape[1]}))}return a}(c,a,t[0].dtype,l),f=fve(i.map((function(e){return e.shape})),r);return o.shape=f,n.dataIdMap.get(o.dataId).stringBytes=Nve(d),u.forEach((function(e){return n.disposeData(e.dataId)})),o}for(var p=zle(i[0].shape.slice(0,r)),h=0,m=i.map((function(e){var t=zle(e.shape.slice(r));return h+=t,t})),v=i.map((function(e){return n.typedArrayFromHeap(e)})),g=n.typedArrayFromHeap(o),y=0;y<p;y++)for(var b=y*h,x=0;x<v.length;x++){var A=m[x],k=y*A,w=v[x].subarray(k,k+A);g.set(w,b),b+=A}return o}var lge,dge={kernelName:yde,backendName:"wasm",kernelFunc:cge};var fge,pge={kernelName:bde,backendName:"wasm",setupFunc:function(e){lge=e.wasm.cwrap(bde,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(i.dataId).id,u=n.strides,c=n.dilations,l=n.pad,d=n.dimRoundingMode,f=xve(n.dataFormat),p=hve(a.shape,i.shape,u,c,l,d,!1,f),h=p.filterHeight,m=p.filterWidth,v=p.padInfo.top,g=p.padInfo.right,y=p.padInfo.bottom,b=p.padInfo.left,x=p.dilationHeight,A=p.dilationWidth,k=p.strideHeight,w=p.strideWidth,S=p.inChannels,I=p.outChannels,E="SAME"===p.padInfo.type?1:0;if("channelsLast"!==p.dataFormat)throw new Error("wasm backend Conv2D does not support dataFormat:'"+"".concat(p.dataFormat,"'. Please use 'channelsLast'."));var C=r.makeOutput(p.outShape,"float32"),N=r.dataIdMap.get(C.dataId).id;return lge(o,a.shape[0],a.shape[1],a.shape[2],s,h,m,v,g,y,b,E,x,A,k,w,S,I,N),C}};var hge,mge,vge={kernelName:xde,backendName:"wasm",setupFunc:function(e){fge=e.wasm.cwrap(xde,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.dy,i=n.filter,o=r.strides,s=r.pad,c=r.dataFormat,l=r.dimRoundingMode,d=r.inputShape,f=xve(c),p=hve(d,i.shape,o,1,s,l,!1,f),h=p.batchSize,m=p.filterHeight,v=p.filterWidth,g=p.inChannels,y=p.inHeight,b=p.inWidth,x=p.outChannels,A=p.outHeight,k=p.outWidth,w=p.strideHeight,S=p.strideWidth,I=m-1-p.padInfo.top,E=v-1-p.padInfo.left,C="channelsLast"===p.dataFormat,N=Zle(p.inShape),T=Zle(a.shape),_=u(Zle(i.shape),3),R=_[0],M=_[1],O=_[2],F=N[0],P=C?N[1]:N[2],D=C?N[2]:1,L=C?1:N[1],z=T[0],B=C?T[1]:T[2],W=C?T[2]:1,j=C?1:T[1],V=t.makeOutput(p.inShape,"float32"),U=t.dataIdMap.get(V.dataId).id,H=t.dataIdMap.get(a.dataId).id,G=t.dataIdMap.get(i.dataId).id;return fge(H,G,h,m,v,y,b,g,A,k,x,w,S,I,E,R,M,O,F,P,D,L,z,B,W,j,U),V}},gge=_ve("Cos"),yge=_ve("Cosh");!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(hge||(hge={}));var bge,xge={kernelName:wde,backendName:"wasm",setupFunc:function(e){mge=e.wasm.cwrap(wde,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=a.method,o=a.extrapolationValue,s=a.cropSize,c=r.image,l=r.boxes,d=r.boxInd,f=l.shape[0],p=u(s,2),h=p[0],m=p[1],v=[f,h,m,c.shape[3]],g=n.dataIdMap.get(c.dataId);"float32"!==c.dtype&&(t=age({backend:n,inputs:{x:c},attrs:{dtype:"float32"}}),g=n.dataIdMap.get(t.dataId));var y=g.id,b=n.dataIdMap.get(l.dataId).id,x=n.dataIdMap.get(d.dataId).id,A=n.makeOutput(v,"float32"),k=n.dataIdMap.get(A.dataId).id,w=new Uint8Array(new Int32Array(c.shape).buffer);return mge(y,b,x,f,w,h,m,hge[i],o,k),null!=t&&n.disposeData(t.dataId),A}};var Age,kge={kernelName:Ade,backendName:"wasm",setupFunc:function(e){bge=e.wasm.cwrap(Ade,null,["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse,u=a.shape.length;Fle("float32"===a.dtype||"int32"===a.dtype,(function(){return"cumprod does not support ".concat(a.dtype," tensors in the WASM backend")}));var c=Ome([i],u),l=a;null!==c&&(l=Bve({inputs:{x:a},attrs:{perm:c},backend:n}));var d=Pme(1,u)[0];Mme("cumprod",[d],u);var f=n.makeOutput(l.shape,l.dtype),p=l.shape[d],h=n.dataIdMap.get(l.dataId).id,m=n.dataIdMap.get(f.dataId).id;bge(h,o?1:0,s?1:0,p,m,Sve[a.dtype]);var v=f;return null!==c&&(v=Bve({inputs:{x:f},attrs:{perm:Fme(c)},backend:n}),n.disposeData(l.dataId),n.disposeData(f.dataId)),v}};var wge,Sge={kernelName:kde,backendName:"wasm",setupFunc:function(e){Age=e.wasm.cwrap(kde,null,["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse,u=a.shape.length;Fle("float32"===a.dtype||"int32"===a.dtype,(function(){return"cumsum does not support ".concat(a.dtype," tensors in the WASM backend")}));var c=Ome([i],u),l=a;null!==c&&(l=Bve({inputs:{x:a},attrs:{perm:c},backend:n}));var d=Pme(1,u)[0];Mme("cumsum",[d],u);var f=n.makeOutput(l.shape,l.dtype),p=l.shape[d],h=n.dataIdMap.get(l.dataId).id,m=n.dataIdMap.get(f.dataId).id;Age(h,o?1:0,s?1:0,p,m,Sve[a.dtype]);var v=f;return null!==c&&(v=Bve({inputs:{x:f},attrs:{perm:Fme(c)},backend:n}),n.disposeData(l.dataId),n.disposeData(f.dataId)),v}};var Ige,Ege={kernelName:Sde,backendName:"wasm",setupFunc:function(e){wge=e.wasm.cwrap(Sde,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,c=("NHWC"===o?a.shape[2]:a.shape[3])*i,l=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),d="NHWC"===o?[s,u,c,l]:[s,l,u,c],f=t.makeOutput(d,"float32"),p=t.dataIdMap.get(a.dataId).id,h=new Uint8Array(new Int32Array(Zle(a.shape)).buffer),m=new Uint8Array(new Int32Array(d).buffer),v=new Uint8Array(new Int32Array(Zle(d)).buffer),g=t.dataIdMap.get(f.dataId).id;return wge(p,i,"NHWC"===o?1:0,h,a.shape.length-1,m,v,d.length,g),f}};var Cge={kernelName:Ide,backendName:"wasm",setupFunc:function(e){Ige=e.wasm.cwrap(Ide,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(i.dataId).id,u=n.strides,c=n.dilations,l=n.pad,d=n.dimRoundingMode,f=null==c?[1,1]:c,p=hve(a.shape,i.shape,u,f,l,d,!0),h=p.filterHeight,m=p.filterWidth,v=p.padInfo.top,g=p.padInfo.right,y=p.padInfo.bottom,b=p.padInfo.left,x=p.dilationHeight,A=p.dilationWidth,k=p.strideHeight,w=p.strideWidth,S=p.inChannels,I=p.outChannels,E="SAME"===p.padInfo.type?1:0;if("channelsLast"!==p.dataFormat)throw new Error("wasm backend DepthwiseConv2dNative does not support dataFormat:'"+"".concat(p.dataFormat,"'. Please use 'channelsLast'."));var C=r.makeOutput(p.outShape,"float32"),N=r.dataIdMap.get(C.dataId).id;return Ige(o,a.shape[0],a.shape[1],a.shape[2],s,h,m,v,g,y,b,E,x,A,k,w,S,I,N),C}},Nge=_ve("Elu"),Tge=Mve("Equal",0,"bool"),_ge=_ve("Exp","float32");function Rge(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.input,i=n.dim,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(Fle(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+i+1),s.splice(u,0,1),Yve({inputs:{x:a},backend:r,attrs:{shape:s}})}var Mge={kernelName:Cde,backendName:"wasm",kernelFunc:Rge};function Oge(e){var t=e.attrs,n=t.shape,r=t.value,a=t.dtype,i=e.backend,o=i.makeOutput(n,a);return i.typedArrayFromHeap(o).fill(r),o}var Fge,Pge={kernelName:Nde,backendName:"wasm",kernelFunc:Oge};var Dge,Lge={kernelName:Tde,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n.makeOutput(r.shape,r.dtype),i=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(a.dataId).id,s=u(r.shape,4),c=s[0],l=s[1],d=s[2],f=s[3];return Fge(i,c,l,d,f,o),a},setupFunc:function(e){Fge=e.wasm.cwrap(Tde,null,["number","number","number","number","number","number"])}},zge=_ve("Floor"),Bge=Mve(_de);var Wge,jge={kernelName:Rde,backendName:"wasm",setupFunc:function(e){Dge=e.wasm.cwrap(Rde,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.varianceEpsilon,a=n.x,i=n.mean,o=n.variance,s=n.offset,u=n.scale,c=t.dataIdMap.get(a.dataId).id,l=t.dataIdMap.get(i.dataId).id,d=t.dataIdMap.get(o.dataId).id,f=null!=s?t.dataIdMap.get(s.dataId).id:0,p=null!=u?t.dataIdMap.get(u.dataId).id:0,h=t.makeOutput(a.shape,a.dtype);if(0===zle(a.shape))return h;var m=t.dataIdMap.get(h.dataId).id;return Dge(c,l,d,f,p,r,m),h}};var Vge,Uge={kernelName:Ofe,backendName:"wasm",setupFunc:function(e){Wge=e.wasm.cwrap(Ofe,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=n.strides,c=n.pad,l=n.dilations,d=n.dataFormat,f=n.dimRoundingMode,p=n.activation,h=n.leakyreluAlpha,m=hve(a.shape,i.shape,u,l,c,f),v=Ive[p];if(null==v)throw new Error("".concat(p," activation not yet supported for FusedConv2D ")+"in the wasm backend.");var g=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(i.dataId).id,b=m.outChannels,x=0;if(null!=o){var A=r.dataIdMap.get(o.dataId);if(1!==A.shape.length)throw new Error("FusedConv2D only supports rank-1 bias but got "+"rank ".concat(A.shape.length,"."));if(A.shape[0]!==b)throw new Error("FusedConv2D bias shape (".concat(A.shape,") does not ")+"match the number of output channels (".concat(b,")"));x=A.id}var k=m.filterHeight,w=m.filterWidth,S=m.padInfo.top,I=m.padInfo.right,E=m.padInfo.bottom,C=m.padInfo.left,N=m.dilationHeight,T=m.dilationWidth,_=m.strideHeight,R=m.strideWidth,M=m.inChannels,O="SAME"===m.padInfo.type?1:0,F=m.batchSize,P=m.inHeight,D=m.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedConv2D does not support dataFormat:'"+"".concat(d,"'. Please use 'NHWC'."));var L=r.makeOutput(m.outShape,"float32"),z=r.dataIdMap.get(L.dataId).id,B=null==s?0:r.dataIdMap.get(s.dataId).id;return Wge(g,F,P,D,y,k,w,x,S,I,E,C,O,N,T,_,R,M,b,v,B,h||0,z),L}};var Hge,Gge={kernelName:Ffe,backendName:"wasm",setupFunc:function(e){Vge=e.wasm.cwrap(Ffe,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=n.strides,c=n.pad,l=n.dilations,d=n.dataFormat,f=n.dimRoundingMode,p=n.activation,h=n.leakyreluAlpha,m=hve(a.shape,i.shape,u,l,c,f,!0),v=Ive[p];if(null==v)throw new Error("".concat(p," activation not yet supported for FusedDepthwiseConv2D ")+"in the wasm backend.");var g=r.dataIdMap.get(a.dataId).id,y=r.dataIdMap.get(i.dataId).id,b=m.outChannels,x=0;if(null!=o){var A=r.dataIdMap.get(o.dataId);if(1!==A.shape.length)throw new Error("FusedDepthwiseConv2D only supports rank-1 bias but got "+"rank ".concat(A.shape.length,"."));if(A.shape[0]!==b)throw new Error("FusedDepthwiseConv2D bias shape (".concat(A.shape,") does not ")+"match the number of output channels (".concat(b,")"));x=A.id}var k=m.filterHeight,w=m.filterWidth,S=m.padInfo.top,I=m.padInfo.right,E=m.padInfo.bottom,C=m.padInfo.left,N=m.dilationHeight,T=m.dilationWidth,_=m.strideHeight,R=m.strideWidth,M=m.inChannels,O="SAME"===m.padInfo.type?1:0,F=m.batchSize,P=m.inHeight,D=m.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedDepthwiseConv2D does not support dataFormat:'"+"".concat(d,"'. Please use 'NHWC'."));var L=r.makeOutput(m.outShape,"float32"),z=r.dataIdMap.get(L.dataId).id,B=null==s?0:r.dataIdMap.get(s.dataId).id;return Vge(g,F,P,D,y,k,w,x,S,I,E,C,O,N,T,_,R,M,b,v,B,h||0,z),L}};var qge,Kge={kernelName:Mde,backendName:"wasm",setupFunc:function(e){Hge=e.wasm.cwrap(Mde,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=n.params,a=n.indices,i=function(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===zle(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,d=i;d<n;++d)l*=u[d],c.push(u[d]);var f=[].concat(Tn(Zle(e.shape).map((function(e){return e/l}))),[1]).slice(0,i);return[c,o,l,f]}(r,a),o=u(i,4),s=o[0],c=o[1],l=o[2],d=o[3],f=t.makeOutput(s,r.dtype);if(0===c)return f;var p=a.shape,h=p[p.length-1],m=t.dataIdMap.get(r.dataId).id,v=t.dataIdMap.get(a.dataId).id,g=new Uint8Array(new Int32Array(d).buffer),y=t.dataIdMap.get(f.dataId).id;return Hge(m,Sve[r.dtype],v,c,h,l,g,y),f}};var Xge,Zge={kernelName:"GatherV2",backendName:"wasm",setupFunc:function(e){qge=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){for(var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,i=n.indices,o=r.axis,s=r.batchDims,u=Vle(o,a.shape)[0],c=t.readSync(i.dataId),l=a.shape[u],d=function(e){var t=c[e];Fle(t<=l-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(l-1,"]")}))},f=0;f<c.length;++f)d(f);var p=function(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],c=1,l=1,d=1,f=0;f<r;++f)u.push(e.shape[f]),c*=e.shape[f];for(var p=r;p<n;p++)u.push(e.shape[p]),l*=e.shape[p];for(var h=r;h<a;h++)u.push(t.shape[h]);for(var m=n+1;m<i;m++)u.push(e.shape[m]),d*=e.shape[m];return{batchSize:c,sliceSize:d,outerSize:l,dimSize:s,outputShape:u}}(a,i,u,s),h=Yve({inputs:{x:a},attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]},backend:t}),m=zle(i.shape),v=Yve({inputs:{x:i},attrs:{shape:[p.batchSize,m/p.batchSize]},backend:t}),g=[p.batchSize,p.outerSize,m/p.batchSize,p.sliceSize],y=t.makeOutput(g,a.dtype);if(0===zle(a.shape))return y;var b=h.shape.length-1,x=t.dataIdMap.get(h.dataId).id,A=t.dataIdMap.get(v.dataId).id,k=t.dataIdMap.get(y.dataId).id,w=new Uint8Array(new Int32Array(Zle(h.shape)).buffer),S=new Uint8Array(new Int32Array(Zle(g)).buffer);return qge(x,Sve[a.dtype],w,b,A,p.batchSize,S,k),t.disposeData(h.dataId),t.disposeData(v.dataId),y.shape=p.outputShape,y}},Yge=Mve(Ode,0,"bool"),Jge=Mve(Fde,0,"bool");var Qge,$ge={kernelName:Dde,backendName:"wasm",setupFunc:function(e){Xge=e.wasm.cwrap(Dde,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.inputs.x,n=e.attrs.alpha,r=e.backend,a=r.dataIdMap.get(t.dataId).id,i=r.makeOutput(t.shape,"float32");if(0!==zle(t.shape)){var o=r.dataIdMap.get(i.dataId).id;Xge(a,Sve[t.dtype],n,o)}return i}},eye=Mve("Less",0,"bool"),tye=Mve(Lde,0,"bool"),nye=_ve("Log"),rye=Mve(zde,0,"bool");var aye,iye={kernelName:Bde,backendName:"wasm",setupFunc:function(e){Qge=e.wasm.cwrap(Bde,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.reductionIndices,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,c=o,l=Vve(o,a,t),d=l.transposed,f=l.axes,p=l.originalAxes,h=l.inputWasTransposed;h&&(c=d,s=t.dataIdMap.get(d.dataId).id),Mme("max",f,c.shape.length);var m=u(_me(c.shape,f),2),v=m[0],g=zle(m[1]),y=t.makeOutput(v,o.dtype);if(0!==zle(c.shape)){var b=t.dataIdMap.get(y.dataId).id;Qge(s,Sve[o.dtype],g,b)}if(h&&t.disposeData(d.dataId),i){var x=Rme(y.shape,p);y.shape=x}return y}},oye=Mve("Maximum");var sye,uye={kernelName:Wde,backendName:"wasm",setupFunc:function(e){aye=e.wasm.cwrap(Wde,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=r.dataIdMap.get(a.dataId).id;Fle("float32"===a.dtype,(function(){return"Error in MaxPool: only float32 input is supported. Got ".concat(a.dtype,".")}));var o=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode,l=pve(a.shape,o,s,1,u,c),d=l.filterHeight,f=l.filterWidth,p=l.padInfo.top,h=l.padInfo.right,m=l.padInfo.bottom,v=l.padInfo.left,g=l.dilationHeight,y=l.dilationWidth,b=l.strideHeight,x=l.strideWidth,A=l.inChannels,k=l.outChannels;if("channelsLast"!==l.dataFormat)throw new Error("wasm backend does not support dataFormat:'"+"".concat(l.dataFormat,"'. Please use 'channelsLast'."));var w=r.makeOutput(l.outShape,"float32"),S=r.dataIdMap.get(w.dataId).id;return aye(i,a.shape[0],a.shape[1],a.shape[2],d,f,p,h,m,v,g,y,b,x,A,k,S),w}};var cye,lye={kernelName:jde,backendName:"wasm",setupFunc:function(e){sye=e.wasm.cwrap(jde,null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,c=s,l=o,d=Vve(o,a,t),f=d.transposed,p=d.axes,h=d.originalAxes,m=d.inputWasTransposed,v=p;if(m){var g=t.dataIdMap.get(f.dataId).id;g!==s&&(l=f,c=g,v=Pme(v.length,l.shape.length))}Mme("mean",v,l.shape.length);var y=u(_me(l.shape,v),2),b=y[0],x=zle(y[1]),A=l;"float32"!==l.dtype&&(A=age({backend:t,inputs:{x:l},attrs:{dtype:"float32"}}),c=t.dataIdMap.get(A.dataId).id);var k=t.makeOutput(b,"float32");if(0!==zle(l.shape)){var w=t.dataIdMap.get(k.dataId).id;sye(c,x,w)}if(m&&t.disposeData(f.dataId),i){var S=Rme(k.shape,h);k.shape=S}return"float32"!==l.dtype&&t.disposeData(A.dataId),k}};var dye,fye,pye={kernelName:Vde,backendName:"wasm",setupFunc:function(e){cye=e.wasm.cwrap(Vde,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,c=s,l=o,d=Vve(o,a,t),f=d.transposed,p=d.axes,h=d.originalAxes,m=d.inputWasTransposed;if(m){var v=t.dataIdMap.get(f.dataId).id;v!==s&&(l=f,c=v)}Mme("min",p,l.shape.length);var g=u(_me(l.shape,p),2),y=g[0],b=zle(g[1]),x=t.makeOutput(y,l.dtype);if(0!==zle(l.shape)){var A=t.dataIdMap.get(x.dataId).id;cye(c,Sve[o.dtype],b,A)}if(m&&t.disposeData(f.dataId),i){var k=Rme(x.shape,h);x.shape=k}return x}},hye=Mve(Ude);!function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"}(dye||(dye={}));var mye,vye={kernelName:Hde,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=e.attrs,a=r.paddings,i=r.mode,o=a.map((function(e,n){return e[0]+t.shape[n]+e[1]})),s=n.dataIdMap.get(t.dataId).id,u=n.makeOutput(o,t.dtype),c=n.dataIdMap.get(u.dataId).id,l=new Uint8Array(new Int32Array(t.shape).buffer),d=a.map((function(e){return e[0]})),f=a.map((function(e){return e[1]})),p=new Uint8Array(new Int32Array(d).buffer),h=new Uint8Array(new Int32Array(f).buffer);return fye(s,l,t.shape.length,Sve[t.dtype],p,h,dye[i],c),u},setupFunc:function(e){fye=e.wasm.cwrap(Hde,null,["number","array","number","number","array","array","number","number"])}},gye=Mve(Gde),yye=_ve("Neg");function bye(e,t){var n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),r=n[0],a=n[1],i=n[2],o=n[3];return e.wasm._free(t),{pSelectedIndices:r,selectedSize:a,pSelectedScores:i,pValidOutputs:o}}var xye,Aye={kernelName:Kde,backendName:"wasm",setupFunc:function(e){mye=e.wasm.cwrap(Kde,"number",["number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,i=r.maxOutputSize,o=r.scoreThreshold,s=n.boxes,u=n.scores,c=t.dataIdMap.get(s.dataId).id,l=t.dataIdMap.get(u.dataId).id,d=bye(t,mye(c,l,i,a,o)),f=d.pSelectedIndices,p=d.selectedSize,h=d.pSelectedScores,m=d.pValidOutputs;return t.wasm._free(h),t.wasm._free(m),t.makeOutput([p],"int32",f)}};var kye,wye={kernelName:Xde,backendName:"wasm",setupFunc:function(e){xye=e.wasm.cwrap(Xde,"number",["number","number","number","number","number","bool"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,i=r.maxOutputSize,o=r.scoreThreshold,s=r.padToMaxOutputSize,u=n.boxes,c=n.scores,l=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(c.dataId).id,f=bye(t,xye(l,d,i,a,o,s)),p=f.pSelectedIndices,h=f.selectedSize,m=f.pSelectedScores,v=f.pValidOutputs;return t.wasm._free(m),[t.makeOutput([h],"int32",p),t.makeOutput([],"int32",v)]}};var Sye,Iye={kernelName:Zde,backendName:"wasm",setupFunc:function(e){kye=e.wasm.cwrap(Zde,"number",["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,i=r.maxOutputSize,o=r.scoreThreshold,s=r.softNmsSigma,u=n.boxes,c=n.scores,l=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(c.dataId).id,f=bye(t,kye(l,d,i,a,o,s)),p=f.pSelectedIndices,h=f.selectedSize,m=f.pSelectedScores,v=f.pValidOutputs;return t.wasm._free(v),[t.makeOutput([h],"int32",p),t.makeOutput([h],"float32",m)]}},Eye=Mve(qde,0,"bool");var Cye={kernelName:Yde,backendName:"wasm",setupFunc:function(e){Sye=e.wasm.cwrap(Yde,null,["number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue,u=n.makeOutput([].concat(Tn(a.shape),[i]),"int32"),c=n.dataIdMap.get(u.dataId).id,l=n.dataIdMap.get(a.dataId).id;return Sye(l,i,o,s,c),u}};var Nye={kernelName:"OnesLike",backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(1),r}};var Tye,_ye={kernelName:Jde,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Rge({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){Ple(a,e.shape,"All tensors passed to stack must have matching shapes"),Fle(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=Rge({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=cge({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeData(e.dataId)})),u}};var Rye,Mye={kernelName:Qde,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=e.attrs,a=r.paddings,i=r.constantValue,o=a.map((function(e,n){return e[0]+t.shape[n]+e[1]}));if(0===zle(t.shape))return Oge({backend:n,attrs:{shape:o,value:i,dtype:t.dtype}});var s=n.dataIdMap.get(t.dataId).id,u=n.makeOutput(o,t.dtype),c=n.dataIdMap.get(u.dataId).id,l=new Uint8Array(new Int32Array(t.shape).buffer),d=a.map((function(e){return e[0]})),f=a.map((function(e){return e[1]})),p=new Uint8Array(new Int32Array(d).buffer),h=new Uint8Array(new Int32Array(f).buffer);return Tye(s,l,t.shape.length,Sve[t.dtype],p,h,i,c),u},setupFunc:function(e){Tye=e.wasm.cwrap(Qde,null,["number","array","number","number","array","array","number","number"])}},Oye=Mve("Pow");var Fye,Pye={kernelName:$de,backendName:"wasm",setupFunc:function(e){Rye=e.wasm.cwrap($de,null,["number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(a.dataId).id,s=i,u=r,c=u;"float32"!==u.dtype&&(c=age({backend:n,inputs:{x:r},attrs:{dtype:"float32"}}),s=n.dataIdMap.get(c.dataId).id);var l=n.makeOutput(r.shape,"float32"),d=n.dataIdMap.get(l.dataId).id;return Rye(s,o,d),"float32"!==u.dtype&&n.disposeData(c.dataId),l}};var Dye={kernelName:efe,backendName:"wasm",setupFunc:function(e){Fye=e.wasm.cwrap(efe,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,c=s,l=o,d=Vve(o,a,t),f=d.transposed,p=d.axes,h=d.originalAxes,m=d.inputWasTransposed,v=p;if(m){var g=t.dataIdMap.get(f.dataId).id;g!==s&&(l=f,c=g,v=Pme(v.length,l.shape.length))}Mme("prod",v,l.shape.length);var y=u(_me(l.shape,v),2),b=y[0],x=zle(y[1]),A=t.makeOutput(b,l.dtype);if(0!==zle(l.shape)){var k=t.dataIdMap.get(A.dataId).id;Fye(c,x,Sve[A.dtype],k)}if(m&&t.disposeData(f.dataId),i){var w=Rme(A.shape,h);A.shape=w}return A}};var Lye,zye={kernelName:tfe,backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=function(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return $le(0,r);var a=$le(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return a}(r,a,i,o),u=t.makeOutput([s.length],o);return t.typedArrayFromHeap(u).set(s),u}},Bye=Mve(Ede),Wye=_ve(nfe),jye=_ve(ofe);var Vye,Uye={kernelName:ife,backendName:"wasm",setupFunc:function(e){Lye=e.wasm.cwrap(ife,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=r.images,o=a.alignCorners,s=a.halfPixelCenters,c=u(a.size,2),l=c[0],d=c[1],f=u(i.shape,4),p=f[0],h=f[1],m=f[2],v=f[3],g=[p,l,d,v],y=n.dataIdMap.get(i.dataId);"float32"!==y.dtype&&(t=age({backend:n,inputs:{x:i},attrs:{dtype:"float32"}}),y=n.dataIdMap.get(t.dataId));var b=y.id,x=n.makeOutput(g,"float32");if(0===zle(i.shape))return x;var A=n.dataIdMap.get(x.dataId).id;return Lye(b,p,h,m,v,l,d,o?1:0,s?1:0,A),null!=t&&n.disposeData(t.dataId),x}};var Hye,Gye={kernelName:sfe,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=Vle(r.dims,a.shape);if(0===a.shape.length)return Dve({inputs:{x:a},backend:n});var o=n.makeOutput(a.shape,a.dtype),s=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(o.dataId).id,c=new Uint8Array(new Int32Array(i).buffer),l=new Uint8Array(new Int32Array(a.shape).buffer);Vye(s,c,i.length,l,a.shape.length,u);var d=Yve({inputs:{x:o},attrs:{shape:a.shape},backend:n});return n.disposeData(o.dataId),d},setupFunc:function(e){Vye=e.wasm.cwrap(sfe,null,["number","array","number","array","number","number"])}};var qye,Kye={kernelName:Rfe,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=r.radians,o=r.fillValue,s=r.center,c=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(a.dataId).id,d=n.dataIdMap.get(c.dataId).id,f=u(a.shape,4),p=f[0],h=f[1],m=f[2],v=f[3],g=function(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}(s,h,m),y=u(g,2),b=y[0],x=y[1],A="number"===typeof o?[o,o,o,0===o?0:255]:[].concat(Tn(o),[255]),k=new Uint8Array(new Int32Array(A).buffer);return Hye(l,p,h,m,v,i,b,x,k,A.length,d),c},setupFunc:function(e){Hye=e.wasm.cwrap(Rfe,null,["number","number","number","number","number","number","number","number","array","number","number"])}},Xye=_ve(ufe),Zye=_ve("Rsqrt");var Yye,Jye={kernelName:cfe,backendName:"wasm",setupFunc:function(e){qye=e.wasm.cwrap(cfe,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.indices,i=n.updates,o=r.shape,s=t.makeOutput(o,i.dtype);if(0===zle(o))return s;var u=function(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:zle(t.shape)/u,sliceSize:o,strides:[].concat(Tn(Zle(n.slice(0,a))),[1]),outputSize:zle(n)}}(0,a,o),c=u.sliceRank,l=u.numUpdates,d=u.sliceSize,f=u.strides,p=u.outputSize,h=t.dataIdMap.get(a.dataId).id,m=t.dataIdMap.get(i.dataId).id,v=new Uint8Array(new Int32Array(f).buffer),g=t.dataIdMap.get(s.dataId).id;return qye(h,m,Sve[i.dtype],c,l,d,v,p,g),s}};var Qye,$ye={kernelName:lfe,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=n.dataIdMap.get(r.dataId).id,s=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(i.dataId).id,c=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(c.dataId).id,d=r.shape.length,f=a.shape.length,p=0===d||d>1||1===f?1:zle(a.shape.slice(1));return Yye(o,s,u,p,l),c},setupFunc:function(e){Yye=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}};var ebe,tbe={kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){Qye=e.wasm.cwrap(ffe,null,["number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.x,r=t.dataIdMap.get(n.dataId).id,a=t.makeOutput(n.shape,n.dtype),i=t.dataIdMap.get(a.dataId).id;return 0===zle(a.shape)||Qye(r,i),a}},nbe=_ve("Sin");var rbe={kernelName:vfe,backendName:"wasm",setupFunc:function(e){ebe=e.wasm.cwrap(vfe,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.logits,r=e.attrs.dim,a=t.dataIdMap.get(n.dataId).id,i=t.makeOutput(n.shape,n.dtype),o=t.dataIdMap.get(i.dataId).id,s=n.shape[r],u=zle(n.shape)/s;return 0===zle(i.shape)||ebe(a,o,s,u),i}};var abe,ibe={kernelName:"SpaceToBatchND",backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings,s=zle(i),u=[[0,0]];u.push.apply(u,Tn(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=Mye.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=Ave(l.shape,i,s,!1),f=kve(d.length,i.length,!1),p=wve(l.shape,i,s,!1),h=Yve({inputs:{x:l},backend:n,attrs:{shape:d}}),m=Bve({inputs:{x:h},backend:n,attrs:{perm:f}}),v=Yve({inputs:{x:m},backend:n,attrs:{shape:p}});return n.disposeData(l.dataId),n.disposeData(h.dataId),n.disposeData(m.dataId),v}};var obe,sbe={kernelName:gfe,backendName:"wasm",setupFunc:function(e){abe=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t,n,r=e.backend,a=e.inputs,i=a.indices,o=a.values,s=a.denseShape,u=a.defaultValue,c=i.shape[0],l=i.shape[1],d=r.readSync(s.dataId)[0],f=[c+d,l],p=r.dataIdMap.get(i.dataId).id,h=r.dataIdMap.get(o.dataId).id,m=r.dataIdMap.get(u.dataId).id,v=r.makeOutput(f,i.dtype),g=r.dataIdMap.get(v.dataId).id,y=r.makeOutput(f.slice(0,1),o.dtype),b=r.dataIdMap.get(y.dataId).id,x=r.makeOutput([d],"bool"),A=r.dataIdMap.get(x.dataId).id,k=r.makeOutput([c],i.dtype),w=r.dataIdMap.get(k.dataId).id,S=r.makeOutput([4],"int32"),I=r.dataIdMap.get(S.dataId).id,E=abe(p,h,Sve[o.dtype],c,d,l,m,g,b,A,w,I),C=r.readSync(S.dataId);switch(C[0]){case 1:n=C[1],t="Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(n);break;case 2:t=function(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}(C[1],C[2]);break;case 3:t=function(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}(C[1],C[2],C[3]);break;default:t=""}if(r.disposeData(S.dataId),t)throw r.disposeData(v.dataId),r.disposeData(y.dataId),r.disposeData(x.dataId),r.disposeData(k.dataId),new Error(t);var N=v,T=y;return E!==f[0]&&(N=tge({inputs:{x:v},attrs:{begin:0,size:[E,l]},backend:r}),T=tge({inputs:{x:y},attrs:{begin:0,size:E},backend:r}),r.disposeData(v.dataId),r.disposeData(y.dataId)),[N,T,x,k]}};var ube,cbe={kernelName:yfe,backendName:"wasm",setupFunc:function(e){obe=e.wasm.cwrap(yfe,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=n.inputIndices,a=n.inputShape,i=n.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=t.dataIdMap.get(r.dataId).id,s=t.dataIdMap.get(a.dataId).id,u=t.dataIdMap.get(i.dataId).id,c=r.shape[0],l=zle(i.shape),d=t.makeOutput([c,l],r.dtype),f=t.dataIdMap.get(d.dataId).id,p=t.makeOutput([l],i.dtype),h=t.dataIdMap.get(p.dataId).id,m=t.makeOutput([3],"int32"),v=t.dataIdMap.get(m.dataId).id;obe(o,s,u,c,f,h,v);var g,y,b,x,A,k=t.readSync(m.dataId);switch(k[0]){case 0:x=k[1],A=k[2],g="only one output dimension may be -1, not both ".concat(x," and ").concat(A);break;case 1:y=k[1],b=k[2],g="size ".concat(y," must be non-negative, not ").concat(b);break;case 2:g="reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero";break;case 3:g=function(e,t){var n=zle(e),r=zle(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}(Array.from(t.readSync(a.dataId)),Array.from(t.readSync(p.dataId)));break;case 4:g=function(e,t){var n=zle(e),r=zle(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}(Array.from(t.readSync(a.dataId)),Array.from(t.readSync(p.dataId)));break;default:g=""}if(t.disposeData(m.dataId),g)throw t.disposeData(d.dataId),t.disposeData(p.dataId),new Error(g);return[d,p]}};function lbe(e){ube=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function dbe(e,t){var n=e.backend,r=e.inputs,a=r.data,i=r.indices,o=r.segmentIds,s=i.shape[0],u=n.readSync(o.dataId,s-1,s)[0],c=s>0?u+1:0;if(c<0)throw new Error("segment ids must be >= 0");var l=a.shape.slice();l[0]=c;var d=n.dataIdMap.get(a.dataId).id,f=n.dataIdMap.get(i.dataId).id,p=n.dataIdMap.get(o.dataId).id,h=n.makeOutput(l,a.dtype),m=n.dataIdMap.get(h.dataId).id,v=n.makeOutput([4],"int32"),g=n.dataIdMap.get(v.dataId).id;ube(d,Sve[a.dtype],a.shape[0],f,p,m,g,t,0);var y,b=n.readSync(v.dataId);switch(b[0]){case 0:y="segment ids must be >= 0";break;case 1:y="segment ids are not increasing";break;case 2:y=function(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}(b[1],b[2]);break;case 3:y=function(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}(b[1],b[2],b[3]);break;default:y=""}if(n.disposeData(v.dataId),y)throw n.disposeData(h.dataId),new Error(y);return h}var fbe={kernelName:bfe,backendName:"wasm",setupFunc:lbe,kernelFunc:function(e){return dbe(e,!0)}};var pbe={kernelName:xfe,backendName:"wasm",setupFunc:lbe,kernelFunc:function(e){return dbe(e,!1)}};var hbe,mbe={kernelName:mfe,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.numOrSizeSplits,o=Vle(n.axis,a.shape)[0],s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)Fle(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);Fle(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}Fle(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}(a,i,o),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return s.map((function(e){var t=Tn(c);t[o]=e;var n=tge({inputs:{x:a},attrs:{begin:u,size:t},backend:r});return u[o]+=e,n}))}},vbe=_ve(pfe),gbe=_ve("Square"),ybe=Mve(Afe);var bbe,xbe={kernelName:_fe,backendName:"wasm",setupFunc:function(e){hbe=e.wasm.cwrap(_fe,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.alpha,a=n.x,i=t.dataIdMap.get(a.dataId).id,o=t.makeOutput(a.shape,a.dtype),s=t.dataIdMap.get(o.dataId).id;return hbe(i,r,Sve[a.dtype],s),o}};var Abe,kbe={kernelName:kfe,backendName:"wasm",setupFunc:function(e){bbe=e.wasm.cwrap(kfe,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=r.x,o=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,d=a.ellipsisMask,f=a.newAxisMask,p=a.shrinkAxisMask,h=Lhe(i.shape,o,s,u,c,l,d,f,p),m=h.finalShapeSparse,v=h.finalShape,g=h.isIdentity,y=h.sliceDim0,b=h.isSimpleSlice,x=h.begin,A=h.end,k=h.strides;if(g)t=Yve({inputs:{x:i},backend:n,attrs:{shape:v}});else if(y||b){Fle(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var w=function(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}(x,A,k),S=tge({inputs:{x:i},backend:n,attrs:{begin:x,size:w}});t=Yve({inputs:{x:S},backend:n,attrs:{shape:v}}),n.disposeData(S.dataId)}else{var I=n.makeOutput(m,"float32"),E=n.dataIdMap.get(i.dataId).id,C=new Uint8Array(new Int32Array(Zle(i.shape)).buffer),N=new Uint8Array(new Int32Array(x).buffer),T=new Uint8Array(new Int32Array(A).buffer),_=new Uint8Array(new Int32Array(k).buffer),R=new Uint8Array(new Int32Array(m).buffer),M=new Uint8Array(new Int32Array(Zle(m)).buffer),O=n.dataIdMap.get(I.dataId).id;bbe(E,C,i.shape.length,N,T,_,R,M,m.length,O),t=Yve({inputs:{x:I},backend:n,attrs:{shape:v}}),n.disposeData(I.dataId)}return t}},wbe=Mve("Sub");var Sbe,Ibe={kernelName:hfe,backendName:"wasm",setupFunc:function(e){Abe=e.wasm.cwrap(hfe,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,c=s,l=o,d=Vve(o,a,t),f=d.transposed,p=d.axes,h=d.originalAxes,m=d.inputWasTransposed,v=p;if(m){var g=t.dataIdMap.get(f.dataId).id;g!==s&&(l=f,c=g,v=Pme(v.length,l.shape.length))}Mme("sum",v,l.shape.length);var y=u(_me(l.shape,v),2),b=y[0],x=zle(y[1]),A=t.makeOutput(b,l.dtype);if(0!==zle(l.shape)){var k=t.dataIdMap.get(A.dataId).id;Abe(c,x,Sve[A.dtype],k)}if(m&&t.disposeData(f.dataId),i){var w=Rme(A.shape,h);A.shape=w}return A}},Ebe=_ve("Tan"),Cbe=_ve("Tanh");var Nbe,Tbe={kernelName:Sfe,backendName:"wasm",setupFunc:function(e){Sbe=e.wasm.cwrap(Sfe,null,["number","array","number","array","number","number"])},kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=n.dataIdMap.get(a.dataId).id,o=r.reps,s=new Array(a.shape.length),u=0;u<s.length;u++)s[u]=a.shape[u]*o[u];var c=new Uint8Array(new Int32Array(a.shape).buffer),l=new Uint8Array(new Int32Array(s).buffer),d=n.makeOutput(s,a.dtype),f=n.dataIdMap.get(d.dataId).id;return Sbe(i,c,a.shape.length,l,s.length,Sve[d.dtype],f),d}};var _be,Rbe={kernelName:Ife,backendName:"wasm",setupFunc:function(e){Nbe=e.wasm.cwrap(Ife,null,["number","array","number","number","number","bool","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=n.dataIdMap.get(a.dataId).id,u=new Uint8Array(new Int32Array(a.shape).buffer),c=a.shape.slice();c[c.length-1]=i;var l=n.makeOutput(c,a.dtype),d=n.dataIdMap.get(l.dataId).id,f=n.makeOutput(c,"int32"),p=n.dataIdMap.get(f.dataId).id;return Nbe(s,u,a.shape.length,Sve[a.dtype],i,o,d,p),[l,f]}};var Mbe={kernelName:Efe,backendName:"wasm",setupFunc:function(e){_be=e.wasm.cwrap(Efe,null,["number","number","bool","number","number","number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=r.image,o=r.transforms,s=a.interpolation,c=a.fillMode,l=a.fillValue,d=a.outputShape,f=u(i.shape,4),p=f[0],h=f[1],m=f[2],v=f[3],g=u(null!=d?d:[h,m],2),y=g[0],b=g[1],x=[p,y,b,v],A=new Uint8Array(new Int32Array(Zle(i.shape)).buffer),k=n.makeOutput(x,i.dtype),w=n.dataIdMap.get(k.dataId).id,S=n.dataIdMap.get(i.dataId).id,I=n.dataIdMap.get(o.dataId).id,E="nearest"===s?1:2;switch(c){case"constant":default:t=1;break;case"reflect":t=2;break;case"wrap":t=3;break;case"nearest":t=4}return _be(S,I,o.shape[0]>1,p,y,b,v,m,h,A,i.shape.length-1,E,t,l,w),k}};var Obe={kernelName:Nfe,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape[i],s=a.shape.length,u=new Array(s-1),c=0,l=0;l<s;l++)l!==i&&(u[c++]=a.shape[l]);var d=new Array(o),f=new Array(s).fill(0),p=a.shape.slice();p[i]=1;for(var h=0;h<d.length;h++)f[i]=h,d[h]=tge({inputs:{x:a},attrs:{begin:f,size:p},backend:n});return d.map((function(e){return{dataId:e.dataId,dtype:e.dtype,shape:u}}))}};for(var Fbe={kernelName:Tfe,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(0),r}},Pbe=0,Dbe=[Tve,Rve,Fve,Pve,Hve,qve,Xve,Zve,$ve,rge,oge,sge,uge,dge,pge,vge,gge,yge,xge,kge,Sge,Ege,Cge,Nge,Tge,_ge,Mge,Pge,Lge,zge,Bge,jge,Uge,Gge,Kge,Zge,Yge,Jge,zve,$ge,eye,tye,nye,rye,iye,oye,uye,lye,pye,hye,vye,gye,yye,Aye,wye,Iye,Eye,Cye,Nye,_ye,Mye,Oye,Pye,Dye,zye,Bye,Wye,jye,Qve,Uye,Gye,Kye,Xye,Zye,Jye,$ye,tbe,nbe,nge,rbe,ibe,sbe,cbe,fbe,pbe,mbe,vbe,gbe,ybe,xbe,kbe,wbe,Ibe,Ebe,Cbe,Tbe,Rbe,Mbe,jve,Obe,Fbe];Pbe<Dbe.length;Pbe++){jfe(Dbe[Pbe])}var Lbe=ode();Lbe.registerFlag("WASM_HAS_SIMD_SUPPORT",ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11])));case 1:case"end":return e.stop()}}),e)})))),Lbe.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",ct(st().mark((function e(){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Lbe.get("IS_NODE")){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),e.abrupt("return",WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])));case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))));var zbe=n(9056),Bbe=n.n(zbe),Wbe='"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",function(data){onmessage({data:data})});var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8"))},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"\n");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=((info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports});self.onmessage=(e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob==="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module).then(function(instance){Module=instance})}else if(e.data.cmd==="run"){Module["__performance_now_clock_drift"]=performance.now()-e.data.time;Module["__emscripten_thread_init"](e.data.threadInfoStruct,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInit();try{var result=Module["invokeEntryPoint"](e.data.start_routine,e.data.arg);if(Module["keepRuntimeAlive"]()){Module["PThread"].setExitStatus(result)}else{Module["__emscripten_thread_exit"](result)}}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processThreadQueue"){if(Module["_pthread_self"]()){Module["_emscripten_current_thread_process_queued_calls"]()}}else if(e.data.cmd==="processProxyingQueue"){if(Module["_pthread_self"]()){Module["_emscripten_proxy_execute_queue"](e.data.queue)}}else{err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){err("worker.js onmessage() captured an uncaught exception: "+ex);if(ex&&ex.stack)err(ex.stack);if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}});',jbe=n(136),Vbe=n.n(jbe),Ube=function(e){et(n,e);var t=ot(n);function n(e){var r;return Ye(this,n),(r=t.call(this)).wasm=e,r.dataIdNextNumber=1,r.wasm.tfjs.initWithThreadsCount(exe),r.wasm.tfjs.getThreadsCount(),r.dataIdMap=new Rle(at(r),Ipe),r}return Qe(n,[{key:"write",value:function(e,t,n){var r={id:this.dataIdNextNumber++};return this.move(r,e,t,n,1),r}},{key:"numDataIds",value:function(){return this.dataIdMap.numDataIds()}},{key:"time",value:function(){var e=ct(st().mark((function e(t){var n,r;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Kfe(),t(),r=Kfe()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"move",value:function(e,t,n,r,a){var i=this.dataIdNextNumber++;if("string"!==r){var o=zle(n),s=o*Gle(r),u=this.wasm._malloc(s);this.dataIdMap.set(e,{id:i,memoryOffset:u,shape:n,dtype:r,refCount:a}),this.wasm.tfjs.registerTensor(i,o,u),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,s),u)}else{var c=t;this.dataIdMap.set(e,{id:i,stringBytes:c,shape:n,dtype:r,memoryOffset:null,refCount:a})}}},{key:"read",value:function(){var e=ct(st().mark((function e(t){return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e,t,n){var r=this.dataIdMap.get(e),a=r.memoryOffset,i=r.dtype,o=r.shape,s=r.stringBytes;if("string"===i)return null!=t&&0!==t||!(null==n||n>=s.length)?s.slice(t,n):s;t=t||0,n=n||zle(o);var u=Gle(i);return function(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype ".concat(t))}}(this.wasm.HEAPU8.slice(a+t*u,a+n*u).buffer,i)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.dataIdMap.has(e)){var n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}},{key:"refCount",value:function(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}},{key:"incRef",value:function(e){var t=this.dataIdMap.get(e);null!=t&&t.refCount++}},{key:"floatPrecision",value:function(){return 32}},{key:"getMemoryOffset",value:function(e){return this.dataIdMap.get(e).memoryOffset}},{key:"dispose",value:function(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}},{key:"memory",value:function(){return{unreliable:!1}}},{key:"makeOutput",value:function(e,t,n){var r;if(null==n)r=this.write(null,e,t);else{var a=this.dataIdNextNumber++;r={id:a},this.dataIdMap.set(r,{id:a,memoryOffset:n,shape:e,dtype:t,refCount:1});var i=zle(e);this.wasm.tfjs.registerTensor(a,i,n)}return{dataId:r,shape:e,dtype:t}}},{key:"typedArrayFromHeap",value:function(e){var t=e.shape,n=e.dtype,r=e.dataId,a=this.wasm.HEAPU8.buffer,i=this.dataIdMap.get(r).memoryOffset,o=zle(t);switch(n){case"float32":return new Float32Array(a,i,o);case"int32":return new Int32Array(a,i,o);case"bool":return new Uint8Array(a,i,o);default:throw new Error("Unknown dtype ".concat(n))}}}]),n}(Mle);function Hbe(e){return function(t,n){return function(e,t){return ode().platform.fetch(e,t)}(e,{credentials:"same-origin"}).then((function(r){r.ok||t.env.a("failed to load wasm binary file at '".concat(e,"'")),r.arrayBuffer().then((function(e){WebAssembly.instantiate(e,t).then((function(e){n(e.instance,e.module)}))}))})),{}}}function Gbe(e,t,n){if(null!=Zbe)return Zbe;var r="tfjs-backend-wasm.wasm";return e&&t?r="tfjs-backend-wasm-threaded-simd.wasm":e&&(r="tfjs-backend-wasm-simd.wasm"),null!=Jbe&&null!=Jbe[r]?Jbe[r]:n+r}function qbe(){return Kbe.apply(this,arguments)}function Kbe(){return Kbe=ct(st().mark((function e(){var t,n,r,a;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([ode().getAsync("WASM_HAS_SIMD_SUPPORT"),ode().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);case 2:return t=e.sent,n=u(t,2),r=n[0],a=n[1],e.abrupt("return",new Promise((function(e,t){var n={locateFile:function(e,t){if(e.endsWith(".worker.js")){var n=Wbe.replace(/\n/g,"\\n"),i=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(i)}return e.endsWith(".wasm")?Gbe(r,a,null!=Ybe?Ybe:t):t+e}};$be&&(n.instantiateWasm=Hbe(Gbe(r,a,null!=Ybe?Ybe:"")));var i,o=!1;n.onAbort=function(){if(!o&&!Qbe){Qbe=!0;t({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"})}},a&&r&&null==Zbe?(n.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+Bbe().toString()],{type:"text/javascript"}),i=Bbe()(n)):i=Vbe()(n),i.then((function(t){o=!0,Qbe=!1;t.tfjs={init:t.cwrap("init",null,[]),initWithThreadsCount:t.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:t.cwrap("get_threads_count","number",[]),registerTensor:t.cwrap("register_tensor",null,["number","number","number"]),disposeData:t.cwrap("dispose_data",null,["number"]),dispose:t.cwrap("dispose",null,[])},e({wasm:t})}))})));case 7:case"end":return e.stop()}}),e)}))),Kbe.apply(this,arguments)}var Xbe=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],Zbe=null,Ybe=null,Jbe={},Qbe=!1,$be=!1;var exe=-1;!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Ipe.registerBackend(e,t,n)}("wasm",ct(st().mark((function e(){var t,n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qbe();case 2:return t=e.sent,n=t.wasm,e.abrupt("return",new Ube(n));case 5:case"end":return e.stop()}}),e)}))),2);var txe=n.p+"static/media/tfjs-backend-wasm.2b1202ac2cd1b46a0ba4.wasm",nxe=Ps((function(t,n){var r,a=t.use,i=Is(t,["use"]),o=su().typography,s=(null===o||void 0===o?void 0:o[a])||(null===o||void 0===o?void 0:o.defaultTag)||"span",u=Ms(t,[(r={},r["mdc-typography--"+t.use]=t.use,r)]);return e.createElement(Rs,Ss({tag:s},i,{ref:n,className:u}))})),rxe=(n(8697),function(e,t){return rxe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},rxe(e,t)});var axe=function(){return axe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},axe.apply(this,arguments)};function ixe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function oxe(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}var sxe={animation:{prefixed:"-webkit-animation",standard:"animation"},transform:{prefixed:"-webkit-transform",standard:"transform"},transition:{prefixed:"-webkit-transition",standard:"transition"}};function uxe(e){return Boolean(e.document)&&"function"===typeof e.document.createElement}var cxe,lxe,dxe=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),fxe={CLOSED_CLASS:"mdc-linear-progress--closed",INDETERMINATE_CLASS:"mdc-linear-progress--indeterminate",REVERSED_CLASS:"mdc-linear-progress--reversed"},pxe={ARIA_VALUENOW:"aria-valuenow",BUFFER_BAR_SELECTOR:".mdc-linear-progress__buffer-bar",FLEX_BASIS:"flex-basis",PRIMARY_BAR_SELECTOR:".mdc-linear-progress__primary-bar"},hxe=function(e){function t(n){return e.call(this,axe(axe({},t.defaultAdapter),n))||this}return function(e,t){function n(){this.constructor=e}rxe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return fxe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return pxe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},forceLayout:function(){},setBufferBarStyle:function(){return null},setPrimaryBarStyle:function(){return null},hasClass:function(){return!1},removeAttribute:function(){},removeClass:function(){},setAttribute:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.isDeterminate=!this.adapter.hasClass(fxe.INDETERMINATE_CLASS),this.isReversed=this.adapter.hasClass(fxe.REVERSED_CLASS),this.progress=0,this.buffer=1},t.prototype.setDeterminate=function(e){if(this.isDeterminate=e,this.isDeterminate)return this.adapter.removeClass(fxe.INDETERMINATE_CLASS),this.adapter.setAttribute(pxe.ARIA_VALUENOW,this.progress.toString()),this.setPrimaryBarProgress(this.progress),void this.setBufferBarProgress(this.buffer);this.isReversed&&(this.adapter.removeClass(fxe.REVERSED_CLASS),this.adapter.forceLayout(),this.adapter.addClass(fxe.REVERSED_CLASS)),this.adapter.addClass(fxe.INDETERMINATE_CLASS),this.adapter.removeAttribute(pxe.ARIA_VALUENOW),this.setPrimaryBarProgress(1),this.setBufferBarProgress(1)},t.prototype.getDeterminate=function(){return this.isDeterminate},t.prototype.setProgress=function(e){this.progress=e,this.isDeterminate&&(this.setPrimaryBarProgress(e),this.adapter.setAttribute(pxe.ARIA_VALUENOW,e.toString()))},t.prototype.getProgress=function(){return this.progress},t.prototype.setBuffer=function(e){this.buffer=e,this.isDeterminate&&this.setBufferBarProgress(e)},t.prototype.setReverse=function(e){this.isReversed=e,this.isDeterminate||(this.adapter.removeClass(fxe.INDETERMINATE_CLASS),this.adapter.forceLayout(),this.adapter.addClass(fxe.INDETERMINATE_CLASS)),this.isReversed?this.adapter.addClass(fxe.REVERSED_CLASS):this.adapter.removeClass(fxe.REVERSED_CLASS)},t.prototype.open=function(){this.adapter.removeClass(fxe.CLOSED_CLASS)},t.prototype.close=function(){this.adapter.addClass(fxe.CLOSED_CLASS)},t.prototype.setPrimaryBarProgress=function(e){var t="scaleX("+e+")",n="undefined"!==typeof window?function(e,t){if(uxe(e)&&t in sxe){var n=e.document.createElement("div"),r=sxe[t],a=r.standard,i=r.prefixed;return a in n.style?a:i}return t}(window,"transform"):"transform";this.adapter.setPrimaryBarStyle(n,t)},t.prototype.setBufferBarProgress=function(e){var t=100*e+"%";this.adapter.setBufferBarStyle(pxe.FLEX_BASIS,t)},t}(dxe),mxe=Ps((function(t,n){var r=t.reversed,a=t.closed,i=t.progress,o=(t.buffer,t.foundationRef,ixe(t,["reversed","closed","progress","buffer","foundationRef"])),s=Ms(t,["mdc-linear-progress",{"mdc-linear-progress--reversed":r,"mdc-linear-progress--closed":a}]),u=function(t){var n=function(e,t,n,r){var a,i=null!==(a=null===e||void 0===e?void 0:e.querySelector(t))&&void 0!==a?a:null;i&&(i.style[n]=r)},r=fu({props:t,elements:{rootEl:!0},foundation:function(e){var t=e.rootEl;return new hxe({addClass:function(e){return t.addClass(e)},forceLayout:function(){var e;return null===(e=t.ref)||void 0===e?void 0:e.offsetWidth},hasClass:function(e){return t.hasClass(e)},removeClass:function(e){return t.removeClass(e)},setBufferBarStyle:function(e,r){n(t.ref,hxe.strings.BUFFER_BAR_SELECTOR,e,r)},setPrimaryBarStyle:function(e,r){n(t.ref,hxe.strings.PRIMARY_BAR_SELECTOR,e,r)},setAttribute:function(e,n){t.setProp(e,n)},removeAttribute:function(e){return t.removeProp(e)}})}}),a=r.foundation,i=ixe(r,["foundation"]),o=oxe((0,e.useState)(void 0),2),s=o[0],u=o[1];return(0,e.useEffect)((function(){a.setProgress(t.progress||0);var e=void 0!==t.progress;e!==s&&(a.setDeterminate(e),u(e))}),[t.progress,s,a]),(0,e.useEffect)((function(){a.setBuffer(t.buffer||0)}),[t.buffer,a]),(0,e.useEffect)((function(){a.setReverse(!!t.reversed)}),[t.reversed,a]),(0,e.useEffect)((function(){t.closed?a.close():a.open()}),[t.closed,a]),axe({foundation:a},i)}(t).rootEl;return e.createElement(Rs,axe({"aria-label":"Progress Bar"},o,{"aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":i,tag:"nav",role:"progressbar",element:u,className:s,ref:n}),e.createElement(vxe,null))})),vxe=e.memo((function(){return e.createElement(e.Fragment,null,e.createElement("div",{className:"mdc-linear-progress__buffer"},e.createElement("div",{className:"mdc-linear-progress__buffer-bar"}),e.createElement("div",{className:"mdc-linear-progress__buffer-dots"})),e.createElement("div",{className:"mdc-linear-progress__bar mdc-linear-progress__primary-bar"},e.createElement("div",{className:"mdc-linear-progress__bar-inner"})),e.createElement("div",{className:"mdc-linear-progress__bar mdc-linear-progress__secondary-bar"},e.createElement("div",{className:"mdc-linear-progress__bar-inner"})))})),gxe=(n(881),n(6417));function yxe(e){return(0,gxe.jsxs)(nxe,{use:"body2",tag:"div",className:Oe(cxe||(cxe=r(["text-align: center"]))),children:[e.msg," ",e.status?(0,gxe.jsx)(Ele(),{style:{color:"#1faa00"}}):(0,gxe.jsx)(Nle(),{style:{color:"#a30000"}})]})}function bxe(e,t,n,r){var a=e?"Camera Ready:":"Camera Supported",i=e?t:e;return(0,gxe.jsxs)(Ls,{children:[(0,gxe.jsx)(zs,{desktop:4,span:2,phone:4,children:(0,gxe.jsx)(yxe,{msg:a,status:i})}),(0,gxe.jsx)(zs,{desktop:4,span:2,phone:4,children:(0,gxe.jsx)(yxe,{msg:"Model loaded:",status:r>1})}),(0,gxe.jsx)(zs,{desktop:4,span:2,phone:4,children:(0,gxe.jsx)(yxe,{msg:"Face Detected:",status:n})})]})}var xxe=function(t){var n=(0,e.useContext)(_le),a=(0,e.useRef)(null),i=(0,e.useRef)(null),o=u((0,e.useState)(!1),2),s=o[0],c=o[1],d=u((0,e.useState)("mediaDevices"in navigator),1)[0],f=t.onFaceDetectionResult,p=n.faceRecognition.detectionInterval,h=n.faceRecognition.scoreThreshold,m=n.enableDetection,v=u((0,e.useState)(!1),2),g=v[0],y=v[1],b=(0,e.useRef)(null);(0,e.useEffect)((function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Qbe)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"===typeof e)Ybe=e;else{Jbe=e;var n=Xbe.filter((function(e){return null==Jbe[e]}));if(n.length>0)throw new Error("There were no entries found for the following binaries: "+"".concat(n.join(","),". Please either call setWasmPaths with a ")+"map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.")}$be=t}(txe);var e={modelBasePath:"https://cdn.jsdelivr.net/npm/@vladmandic/human/models/",wasmPath:"https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm@3.9.0/dist/",face:{enabled:!0,emotion:{enabled:!1},antispoof:{enabled:!1},liveness:{enabled:!1},mesh:{enabled:!0},attention:{enabled:!1},iris:{enabled:!1},description:{enabled:!1}},body:{enabled:!1},hand:{enabled:!1},object:{enabled:!1},gesture:{enabled:!1}};b.current=new Sle(e),b.current.warmup(e),console.log("Human init:",b)}),[]),l((function(){function e(){return e=ct(st().mark((function e(){var t,r,o,s;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),t=new Date,r=a.current.video,e.next=6,b.current.detect(r);case 6:o=e.sent,s=o.face.filter((function(e){return e.score>h})).at(-1),f(s),c(s),console.log("Detection used ",(new Date-t).toString(),"ms"),n.faceRecognition.showFaceRecognitionCanvas&&(b.current.draw.canvas(r,i.current),b.current.draw.all(i.current,o));case 12:return e.prev=12,y(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,,12,15]])}))),e.apply(this,arguments)}m&&k&&(g||b.current&&function(){e.apply(this,arguments)}())}),1e3*p,!0);var x={width:{ideal:640},height:{ideal:480},facingMode:"user"};m&&!n.faceRecognition.showCameraPreview&&navigator.mediaDevices.getSupportedConstraints&&navigator.mediaDevices.getSupportedConstraints().frameRate&&(x.frameRate={ideal:2});var A=n.faceRecognition.showCameraPreview?"100%":"1px",k=!!a.current&&(void 0!==a.current.video.readyState&&a.current.video.readyState>2),w=b.current?Object.keys(b.current.models).filter((function(e){return null!==b.current.models[e]})).length:0,S=.1*d+.4*k+w/2*.5;return(0,gxe.jsx)(gxe.Fragment,{children:(0,gxe.jsxs)(Ls,{children:[(0,gxe.jsxs)(zs,{span:12,children:[(0,gxe.jsx)(mxe,{closed:S>=1,progress:S}),m&&n.faceRecognition.showFaceRecognitionStatus?bxe(d,k,s,w):(0,gxe.jsx)(gxe.Fragment,{})]}),m?(0,gxe.jsx)(zs,{span:12,children:(0,gxe.jsx)("div",{className:Oe(lxe||(lxe=r(["\n              height: ",";\n              width: ",";\n              overflow: hidden;\n            "])),A,A),children:(0,gxe.jsx)(ic(),{audio:!1,ref:a,screenshotFormat:"image/jpeg",videoConstraints:x})})}):(0,gxe.jsx)(gxe.Fragment,{}),m&&b&&n.faceRecognition.showFaceRecognitionCanvas?(0,gxe.jsx)(zs,{span:12,children:(0,gxe.jsx)("canvas",{width:"640px",height:"480px",ref:i})}):(0,gxe.jsx)(gxe.Fragment,{})]})})},Axe=n(1465),kxe=n.n(Axe);var wxe=function(t){var n=(0,e.useRef)(null),r=(0,e.useRef)(null),a=t.startTime;return(0,e.useEffect)((function(){null===r.current&&(r.current=new(kxe())(n.current,new Date(a),{face:"HourCounter",showLabels:!1}),r.current.originalValue=new Date(a),r.current.value=new Date,r.current.start()),(a!==r.current.originalValue.toJSON()||Math.abs(new Date-r.current.value.value)>1e3)&&(r.current.originalValue=new Date(a),r.current.value=new Date)})),(0,gxe.jsx)("div",{ref:n})},Sxe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Ixe=function(t){var n=t.prefixCls,r=t.className,a=t.hoverable,i=void 0===a||a,o=Sxe(t,["prefixCls","className","hoverable"]);return e.createElement(Er,null,(function(t){var a=(0,t.getPrefixCls)("card",n),s=St()("".concat(a,"-grid"),r,qe({},"".concat(a,"-grid-hoverable"),i));return e.createElement("div",Ge({},o,{className:s}))}))},Exe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},Cxe=function(t){return e.createElement(Er,null,(function(n){var r=n.getPrefixCls,a=t.prefixCls,i=t.className,o=t.avatar,s=t.title,u=t.description,c=Exe(t,["prefixCls","className","avatar","title","description"]),l=r("card",a),d=St()("".concat(l,"-meta"),i),f=o?e.createElement("div",{className:"".concat(l,"-meta-avatar")},o):null,p=s?e.createElement("div",{className:"".concat(l,"-meta-title")},s):null,h=u?e.createElement("div",{className:"".concat(l,"-meta-description")},u):null,m=p||h?e.createElement("div",{className:"".concat(l,"-meta-detail")},p,h):null;return e.createElement("div",Ge({},c,{className:d}),f,m)}))};function Nxe(e,t){var n=Ze({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}var Txe=function(){if("undefined"===typeof navigator||"undefined"===typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null===e||void 0===e?void 0:e.substr(0,4)))};function _xe(t,n){var r=n||{},a=r.defaultValue,i=r.value,o=r.onChange,s=r.postState,c=u($t((function(){return void 0!==i?i:void 0!==a?"function"===typeof a?a():a:"function"===typeof t?t():t})),2),l=c[0],d=c[1],f=void 0!==i?i:l;s&&(f=s(f));var p=e.useRef(o);p.current=o;var h=e.useCallback((function(e,t){d(e,t),f!==e&&p.current&&p.current(e,f)}),[f,p]),m=e.useRef(i);return e.useEffect((function(){void 0===i&&i!==m.current&&d(i),m.current=i}),[i]),[f,h]}var Rxe=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var a=r[n];e.call(t,a[1],a[0])}},t}()}(),Mxe="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,Oxe="undefined"!==typeof n.g&&n.g.Math===Math?n.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),Fxe="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(Oxe):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var Pxe=["top","right","bottom","left","width","height","size","weight"],Dxe="undefined"!==typeof MutationObserver,Lxe=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,a=0;function i(){n&&(n=!1,e()),r&&s()}function o(){Fxe(i)}function s(){var e=Date.now();if(n){if(e-a<2)return;r=!0}else n=!0,r=!1,setTimeout(o,t);a=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){Mxe&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Dxe?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Mxe&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t,r=Pxe.some((function(e){return!!~n.indexOf(e)}));r&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),zxe=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];Object.defineProperty(e,a,{value:t[a],enumerable:!1,writable:!1,configurable:!0})}return e},Bxe=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||Oxe},Wxe=qxe(0,0,0,0);function jxe(e){return parseFloat(e)||0}function Vxe(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+jxe(e["border-"+n+"-width"])}),0)}function Uxe(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return Wxe;var r=Bxe(e).getComputedStyle(e),a=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var a=r[n],i=e["padding-"+a];t[a]=jxe(i)}return t}(r),i=a.left+a.right,o=a.top+a.bottom,s=jxe(r.width),u=jxe(r.height);if("border-box"===r.boxSizing&&(Math.round(s+i)!==t&&(s-=Vxe(r,"left","right")+i),Math.round(u+o)!==n&&(u-=Vxe(r,"top","bottom")+o)),!function(e){return e===Bxe(e).document.documentElement}(e)){var c=Math.round(s+i)-t,l=Math.round(u+o)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(l)&&(u-=l)}return qxe(a.left,a.top,s,u)}var Hxe="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof Bxe(e).SVGGraphicsElement}:function(e){return e instanceof Bxe(e).SVGElement&&"function"===typeof e.getBBox};function Gxe(e){return Mxe?Hxe(e)?function(e){var t=e.getBBox();return qxe(0,0,t.width,t.height)}(e):Uxe(e):Wxe}function qxe(e,t,n,r){return{x:e,y:t,width:n,height:r}}var Kxe=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=qxe(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=Gxe(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),Xxe=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(i.prototype);return zxe(o,{x:t,y:n,width:r,height:a,top:n,right:t+r,bottom:a+n,left:t}),o}(t);zxe(this,{target:e,contentRect:n})},Zxe=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new Rxe,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof Bxe(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Kxe(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof Bxe(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new Xxe(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Yxe="undefined"!==typeof WeakMap?new WeakMap:new Rxe,Jxe=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Lxe.getInstance(),r=new Zxe(t,n,this);Yxe.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){Jxe.prototype[e]=function(){var t;return(t=Yxe.get(this))[e].apply(t,arguments)}}));var Qxe="undefined"!==typeof Oxe.ResizeObserver?Oxe.ResizeObserver:Jxe,$xe=new Map;var eAe=new Qxe((function(e){e.forEach((function(e){var t,n=e.target;null===(t=$xe.get(n))||void 0===t||t.forEach((function(e){return e(n)}))}))}));var tAe=function(e){et(n,e);var t=ot(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Qe(n,[{key:"render",value:function(){return this.props.children}}]),n}(e.Component),nAe=e.createContext(null);function rAe(t){var n=t.children,r=t.disabled,a=e.useRef(null),i=e.useRef(null),o=e.useContext(nAe),s="function"===typeof n,u=s?n(a):n,c=e.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),l=!s&&e.isValidElement(u)&&_t(u),d=l?u.ref:null,f=e.useMemo((function(){return Tt(d,a)}),[d,a]),p=e.useRef(t);p.current=t;var h=e.useCallback((function(e){var t=p.current,n=t.onResize,r=t.data,a=e.getBoundingClientRect(),i=a.width,s=a.height,u=e.offsetWidth,l=e.offsetHeight,d=Math.floor(i),f=Math.floor(s);if(c.current.width!==d||c.current.height!==f||c.current.offsetWidth!==u||c.current.offsetHeight!==l){var h={width:d,height:f,offsetWidth:u,offsetHeight:l};c.current=h;var m=u===Math.round(i)?i:u,v=l===Math.round(s)?s:l,g=Ze(Ze({},h),{},{offsetWidth:m,offsetHeight:v});null===o||void 0===o||o(g,e,r),n&&Promise.resolve().then((function(){n(g,e)}))}}),[]);return e.useEffect((function(){var e,t,n=It(a.current)||It(i.current);return n&&!r&&(e=n,t=h,$xe.has(e)||($xe.set(e,new Set),eAe.observe(e)),$xe.get(e).add(t)),function(){return function(e,t){$xe.has(e)&&($xe.get(e).delete(t),$xe.get(e).size||(eAe.unobserve(e),$xe.delete(e)))}(n,h)}}),[a.current,r]),e.createElement(tAe,{ref:i},l?e.cloneElement(u,{ref:f}):u)}function aAe(t){var n=t.children;return("function"===typeof n?[n]:Cr(n)).map((function(n,r){var a=(null===n||void 0===n?void 0:n.key)||"".concat("rc-observer-key","-").concat(r);return e.createElement(rAe,Ge({},t,{key:a}),n)}))}aAe.Collection=function(t){var n=t.children,r=t.onBatchResize,a=e.useRef(0),i=e.useRef([]),o=e.useContext(nAe),s=e.useCallback((function(e,t,n){a.current+=1;var s=a.current;i.current.push({size:e,element:t,data:n}),Promise.resolve().then((function(){s===a.current&&(null===r||void 0===r||r(i.current),i.current=[])})),null===o||void 0===o||o(e,t,n)}),[r,o]);return e.createElement(nAe.Provider,{value:s},n)};var iAe=aAe;function oAe(t){var n=(0,e.useRef)(),r=(0,e.useRef)(!1);return(0,e.useEffect)((function(){return r.current=!1,function(){r.current=!0,on.cancel(n.current)}}),[]),function(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];r.current||(on.cancel(n.current),n.current=on((function(){t.apply(void 0,a)})))}}var sAe={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=sAe.F1&&t<=sAe.F12)return!1;switch(t){case sAe.ALT:case sAe.CAPS_LOCK:case sAe.CONTEXT_MENU:case sAe.CTRL:case sAe.DOWN:case sAe.END:case sAe.ESC:case sAe.HOME:case sAe.INSERT:case sAe.LEFT:case sAe.MAC_FF_META:case sAe.META:case sAe.NUMLOCK:case sAe.NUM_CENTER:case sAe.PAGE_DOWN:case sAe.PAGE_UP:case sAe.PAUSE:case sAe.PRINT_SCREEN:case sAe.RIGHT:case sAe.SHIFT:case sAe.UP:case sAe.WIN_KEY:case sAe.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=sAe.ZERO&&e<=sAe.NINE)return!0;if(e>=sAe.NUM_ZERO&&e<=sAe.NUM_MULTIPLY)return!0;if(e>=sAe.A&&e<=sAe.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case sAe.SPACE:case sAe.QUESTION_MARK:case sAe.NUM_PLUS:case sAe.NUM_MINUS:case sAe.NUM_PERIOD:case sAe.NUM_DIVISION:case sAe.SEMICOLON:case sAe.DASH:case sAe.EQUALS:case sAe.COMMA:case sAe.PERIOD:case sAe.SLASH:case sAe.APOSTROPHE:case sAe.SINGLE_QUOTE:case sAe.OPEN_SQUARE_BRACKET:case sAe.BACKSLASH:case sAe.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},uAe=sAe;function cAe(t,n){var r,a=t.prefixCls,i=t.id,o=t.active,s=t.tab,u=s.key,c=s.tab,l=s.disabled,d=s.closeIcon,f=t.closable,p=t.renderWrapper,h=t.removeAriaLabel,m=t.editable,v=t.onClick,g=t.onRemove,y=t.onFocus,b=t.style,x="".concat(a,"-tab");e.useEffect((function(){return g}),[]);var A=m&&!1!==f&&!l;function k(e){l||v(e)}var w=e.createElement("div",{key:u,ref:n,className:St()(x,(r={},qe(r,"".concat(x,"-with-remove"),A),qe(r,"".concat(x,"-active"),o),qe(r,"".concat(x,"-disabled"),l),r)),style:b,onClick:k},e.createElement("div",{role:"tab","aria-selected":o,id:i&&"".concat(i,"-tab-").concat(u),className:"".concat(x,"-btn"),"aria-controls":i&&"".concat(i,"-panel-").concat(u),"aria-disabled":l,tabIndex:l?null:0,onClick:function(e){e.stopPropagation(),k(e)},onKeyDown:function(e){[uAe.SPACE,uAe.ENTER].includes(e.which)&&(e.preventDefault(),k(e))},onFocus:y},c),A&&e.createElement("button",{type:"button","aria-label":h||"remove",tabIndex:0,className:"".concat(x,"-remove"),onClick:function(e){var t;e.stopPropagation(),(t=e).preventDefault(),t.stopPropagation(),m.onEdit("remove",{key:u,event:t})}},d||m.removeIcon||"\xd7"));return p?p(w):w}var lAe=e.forwardRef(cAe),dAe={width:0,height:0,left:0,top:0};var fAe={width:0,height:0,left:0,top:0,right:0};var pAe=n(9767),hAe=n.n(pAe),mAe=Rt()?e.useLayoutEffect:e.useEffect,vAe=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],gAe=void 0;function yAe(t,n){var r=t.prefixCls,a=t.invalidate,i=t.item,o=t.renderItem,s=t.responsive,u=t.responsiveDisabled,c=t.registerSize,l=t.itemKey,d=t.className,f=t.style,p=t.children,h=t.display,m=t.order,v=t.component,g=void 0===v?"div":v,y=Ke(t,vAe),b=s&&!h;function x(e){c(l,e)}e.useEffect((function(){return function(){x(null)}}),[]);var A,k=o&&i!==gAe?o(i):p;a||(A={opacity:b?0:1,height:b?0:gAe,overflowY:b?"hidden":gAe,order:s?m:gAe,pointerEvents:b?"none":gAe,position:b?"absolute":gAe});var w={};b&&(w["aria-hidden"]=!0);var S=e.createElement(g,Ge({className:St()(!a&&r,d),style:Ze(Ze({},A),f)},w,y,{ref:n}),k);return s&&(S=e.createElement(iAe,{onResize:function(e){x(e.offsetWidth)},disabled:u},S)),S}var bAe=e.forwardRef(yAe);bAe.displayName="Item";var xAe=bAe;var AAe=["component"],kAe=["className"],wAe=["className"],SAe=function(t,n){var r=e.useContext(NAe);if(!r){var a=t.component,i=void 0===a?"div":a,o=Ke(t,AAe);return e.createElement(i,Ge({},o,{ref:n}))}var s=r.className,u=Ke(r,kAe),c=t.className,l=Ke(t,wAe);return e.createElement(NAe.Provider,{value:null},e.createElement(xAe,Ge({ref:n,className:St()(s,c)},u,l)))},IAe=e.forwardRef(SAe);IAe.displayName="RawItem";var EAe=IAe,CAe=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],NAe=e.createContext(null),TAe="responsive",_Ae="invalidate";function RAe(e){return"+ ".concat(e.length," ...")}function MAe(t,n){var r=t.prefixCls,a=void 0===r?"rc-overflow":r,i=t.data,o=void 0===i?[]:i,s=t.renderItem,c=t.renderRawItem,l=t.itemKey,d=t.itemWidth,f=void 0===d?10:d,p=t.ssr,h=t.style,m=t.className,v=t.maxCount,g=t.renderRest,y=t.renderRawRest,b=t.suffix,x=t.component,A=void 0===x?"div":x,k=t.itemComponent,w=t.onVisibleChange,S=Ke(t,CAe),I=function(){var t=u($t({}),2)[1],n=(0,e.useRef)([]),r=0,a=0;return function(e){var i=r;return r+=1,n.current.length<i+1&&(n.current[i]=e),[n.current[i],function(e){n.current[i]="function"===typeof e?e(n.current[i]):e,on.cancel(a),a=on((function(){t({},!0)}))}]}}(),E="full"===p,C=u(I(null),2),N=C[0],T=C[1],_=N||0,R=u(I(new Map),2),M=R[0],O=R[1],F=u(I(0),2),P=F[0],D=F[1],L=u(I(0),2),z=L[0],B=L[1],W=u(I(0),2),j=W[0],V=W[1],U=u((0,e.useState)(null),2),H=U[0],G=U[1],q=u((0,e.useState)(null),2),K=q[0],X=q[1],Z=e.useMemo((function(){return null===K&&E?Number.MAX_SAFE_INTEGER:K||0}),[K,N]),Y=u((0,e.useState)(!1),2),J=Y[0],Q=Y[1],$="".concat(a,"-item"),ee=Math.max(P,z),te=v===TAe,ne=o.length&&te,re=v===_Ae,ae=ne||"number"===typeof v&&o.length>v,ie=(0,e.useMemo)((function(){var e=o;return ne?e=null===N&&E?o:o.slice(0,Math.min(o.length,_/f)):"number"===typeof v&&(e=o.slice(0,v)),e}),[o,f,N,v,ne]),oe=(0,e.useMemo)((function(){return ne?o.slice(Z+1):o.slice(ie.length)}),[o,ie,ne,Z]),se=(0,e.useCallback)((function(e,t){var n;return"function"===typeof l?l(e):null!==(n=l&&(null===e||void 0===e?void 0:e[l]))&&void 0!==n?n:t}),[l]),ue=(0,e.useCallback)(s||function(e){return e},[s]);function ce(e,t){X(e),t||(Q(e<o.length-1),null===w||void 0===w||w(e))}function le(e,t){O((function(n){var r=new Map(n);return null===t?r.delete(e):r.set(e,t),r}))}function de(e){return M.get(se(ie[e],e))}mAe((function(){if(_&&ee&&ie){var e=j,t=ie.length,n=t-1;if(!t)return ce(0),void G(null);for(var r=0;r<t;r+=1){var a=de(r);if(E&&(a=a||0),void 0===a){ce(r-1,!0);break}if(e+=a,0===n&&e<=_||r===n-1&&e+de(n)<=_){ce(n),G(null);break}if(e+ee>_){ce(r-1),G(e-a-j+z);break}}b&&de(0)+j>_&&G(null)}}),[_,M,z,j,se,ie]);var fe=J&&!!oe.length,pe={};null!==H&&ne&&(pe={position:"absolute",left:H,top:0});var he,me={prefixCls:$,responsive:ne,component:k,invalidate:re},ve=c?function(t,n){var r=se(t,n);return e.createElement(NAe.Provider,{key:r,value:Ze(Ze({},me),{},{order:n,item:t,itemKey:r,registerSize:le,display:n<=Z})},c(t,n))}:function(t,n){var r=se(t,n);return e.createElement(xAe,Ge({},me,{order:n,key:r,item:t,renderItem:ue,itemKey:r,registerSize:le,display:n<=Z}))},ge={order:fe?Z:Number.MAX_SAFE_INTEGER,className:"".concat($,"-rest"),registerSize:function(e,t){B(t),D(z)},display:fe};if(y)y&&(he=e.createElement(NAe.Provider,{value:Ze(Ze({},me),ge)},y(oe)));else{var ye=g||RAe;he=e.createElement(xAe,Ge({},me,ge),"function"===typeof ye?ye(oe):ye)}var be=e.createElement(A,Ge({className:St()(!re&&a,m),style:h,ref:n},S),ie.map(ve),ae?he:null,b&&e.createElement(xAe,Ge({},me,{responsive:te,responsiveDisabled:!ne,order:Z,className:"".concat($,"-suffix"),registerSize:function(e,t){V(t)},display:!0,style:pe}),b));return te&&(be=e.createElement(iAe,{onResize:function(e,t){T(t.clientWidth)},disabled:!ne},be)),be}var OAe=e.forwardRef(MAe);OAe.displayName="Overflow",OAe.Item=EAe,OAe.RESPONSIVE=TAe,OAe.INVALIDATE=_Ae;var FAe=OAe,PAe=["children","locked"],DAe=e.createContext(null);function LAe(t){var n=t.children,r=t.locked,a=Ke(t,PAe),i=e.useContext(DAe),o=Ct((function(){return function(e,t){var n=Ze({},e);return Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}(i,a)}),[i,a],(function(e,t){return!r&&(e[0]!==t[0]||!hAe()(e[1],t[1]))}));return e.createElement(DAe.Provider,{value:o},n)}function zAe(t,n,r,a){var i=e.useContext(DAe),o=i.activeKey,s=i.onActive,u=i.onInactive,c={active:o===t};return n||(c.onMouseEnter=function(e){null===r||void 0===r||r({key:t,domEvent:e}),s(t)},c.onMouseLeave=function(e){null===a||void 0===a||a({key:t,domEvent:e}),u(t)}),c}var BAe=["item"];function WAe(e){var t=e.item,n=Ke(e,BAe);return Object.defineProperty(n,"item",{get:function(){return Un(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}function jAe(t){var n=t.icon,r=t.props,a=t.children;return("function"===typeof n?e.createElement(n,Ze({},r)):n)||a||null}function VAe(t){var n=e.useContext(DAe),r=n.mode,a=n.rtl,i=n.inlineIndent;if("inline"!==r)return null;return a?{paddingRight:t*i}:{paddingLeft:t*i}}var UAe=[],HAe=e.createContext(null);function GAe(){return e.useContext(HAe)}var qAe=e.createContext(UAe);function KAe(t){var n=e.useContext(qAe);return e.useMemo((function(){return void 0!==t?[].concat(Tn(n),[t]):n}),[n,t])}var XAe=e.createContext(null),ZAe=e.createContext(null);function YAe(e,t){return void 0===e?null:"".concat(e,"-").concat(t)}function JAe(t){return YAe(e.useContext(ZAe),t)}var QAe=e.createContext({}),$Ae=["title","attribute","elementRef"],eke=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],tke=["active"],nke=function(t){et(r,t);var n=ot(r);function r(){return Ye(this,r),n.apply(this,arguments)}return Qe(r,[{key:"render",value:function(){var t=this.props,n=t.title,r=t.attribute,a=t.elementRef,i=Nxe(Ke(t,$Ae),["eventKey"]);return Un(!r,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),e.createElement(FAe.Item,Ge({},r,{title:"string"===typeof n?n:void 0},i,{ref:a}))}}]),r}(e.Component),rke=function(t){var n,r=t.style,a=t.className,i=t.eventKey,o=(t.warnKey,t.disabled),s=t.itemIcon,u=t.children,c=t.role,l=t.onMouseEnter,d=t.onMouseLeave,f=t.onClick,p=t.onKeyDown,h=t.onFocus,m=Ke(t,eke),v=JAe(i),g=e.useContext(DAe),y=g.prefixCls,b=g.onItemClick,x=g.disabled,A=g.overflowDisabled,k=g.itemIcon,w=g.selectedKeys,S=g.onActive,I=e.useContext(QAe)._internalRenderMenuItem,E="".concat(y,"-item"),C=e.useRef(),N=e.useRef(),T=x||o,_=KAe(i);var R=function(e){return{key:i,keyPath:Tn(_).reverse(),item:C.current,domEvent:e}},M=s||k,O=zAe(i,T,l,d),F=O.active,P=Ke(O,tke),D=w.includes(i),L=VAe(_.length),z={};"option"===t.role&&(z["aria-selected"]=D);var B=e.createElement(nke,Ge({ref:C,elementRef:N,role:null===c?"none":c||"menuitem",tabIndex:o?null:-1,"data-menu-id":A&&v?null:v},m,P,z,{component:"li","aria-disabled":o,style:Ze(Ze({},L),r),className:St()(E,(n={},qe(n,"".concat(E,"-active"),F),qe(n,"".concat(E,"-selected"),D),qe(n,"".concat(E,"-disabled"),T),n),a),onClick:function(e){if(!T){var t=R(e);null===f||void 0===f||f(WAe(t)),b(t)}},onKeyDown:function(e){if(null===p||void 0===p||p(e),e.which===uAe.ENTER){var t=R(e);null===f||void 0===f||f(WAe(t)),b(t)}},onFocus:function(e){S(i),null===h||void 0===h||h(e)}}),u,e.createElement(jAe,{props:Ze(Ze({},t),{},{isSelected:D}),icon:M}));return I&&(B=I(B,t,{selected:D})),B};var ake=function(t){var n=t.eventKey,r=GAe(),a=KAe(n);return e.useEffect((function(){if(r)return r.registerPath(n,a),function(){r.unregisterPath(n,a)}}),[a]),r?null:e.createElement(rke,t)},ike=["label","children","key","type"];function oke(t,n){return Cr(t).map((function(t,r){if(e.isValidElement(t)){var a,i,o=t.key,s=null!==(a=null===(i=t.props)||void 0===i?void 0:i.eventKey)&&void 0!==a?a:o;(null===s||void 0===s)&&(s="tmp_key-".concat([].concat(Tn(n),[r]).join("-")));var u={key:s,eventKey:s};return e.cloneElement(t,u)}return t}))}function ske(t){return(t||[]).map((function(t,n){if(t&&"object"===rt(t)){var r=t.label,a=t.children,i=t.key,o=t.type,s=Ke(t,ike),u=null!==i&&void 0!==i?i:"tmp-".concat(n);return a||"group"===o?"group"===o?e.createElement(NSe,Ge({key:u},s,{title:r}),ske(a)):e.createElement(tSe,Ge({key:u},s,{title:r}),ske(a)):"divider"===o?e.createElement(TSe,Ge({key:u},s)):e.createElement(ake,Ge({key:u},s),r)}return null})).filter((function(e){return e}))}function uke(e,t,n){var r=e;return t&&(r=ske(t)),oke(r,n)}function cke(t){var n=e.useRef(t);n.current=t;var r=e.useCallback((function(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return null===(e=n.current)||void 0===e?void 0:e.call.apply(e,[n].concat(r))}),[]);return t?r:void 0}var lke=["className","children"],dke=function(t,n){var r=t.className,a=t.children,i=Ke(t,lke),o=e.useContext(DAe),s=o.prefixCls,u=o.mode,c=o.rtl;return e.createElement("ul",Ge({className:St()(s,c&&"".concat(s,"-rtl"),"".concat(s,"-sub"),"".concat(s,"-").concat("inline"===u?"inline":"vertical"),r)},i,{"data-menu-list":!0,ref:n}),a)},fke=e.forwardRef(dke);fke.displayName="SubMenuList";var pke=fke;function hke(e,t){return!!e&&e.contains(t)}function mke(e,t,n,r){var a=dt.unstable_batchedUpdates?function(e){dt.unstable_batchedUpdates(n,e)}:n;return e.addEventListener&&e.addEventListener(t,a,r),{remove:function(){e.removeEventListener&&e.removeEventListener(t,a,r)}}}var vke=(0,e.forwardRef)((function(t,n){var r=t.didUpdate,a=t.getContainer,i=t.children,o=(0,e.useRef)(),s=(0,e.useRef)();(0,e.useImperativeHandle)(n,(function(){return{}}));var u=(0,e.useRef)(!1);return!u.current&&Rt()&&(s.current=a(),o.current=s.current.parentNode,u.current=!0),(0,e.useEffect)((function(){null===r||void 0===r||r(t)})),(0,e.useEffect)((function(){return null===s.current.parentNode&&null!==o.current&&o.current.appendChild(s.current),function(){var e,t;null===(e=s.current)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(s.current)}}),[]),s.current?dt.createPortal(i,s.current):null})),gke=vke;function yke(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function bke(e){var t=e.prefixCls,n=e.motion,r=e.animation,a=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:a?{motionName:a}:null)}function xke(t){var n=t.prefixCls,r=t.visible,a=t.zIndex,i=t.mask,o=t.maskMotion,s=t.maskAnimation,u=t.maskTransitionName;if(!i)return null;var c={};return(o||u||s)&&(c=Ze({motionAppear:!0},bke({motion:o,prefixCls:n,transitionName:u,animation:s}))),e.createElement(En,Ge({},c,{visible:r,removeOnLeave:!0}),(function(t){var r=t.className;return e.createElement("div",{style:{zIndex:a},className:St()("".concat(n,"-mask"),r)})}))}var Ake,kke=function(e){if(!e)return!1;if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox();if(t.width||t.height)return!0}if(e.getBoundingClientRect){var n=e.getBoundingClientRect();if(n.width||n.height)return!0}return!1};function wke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ske(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wke(Object(n),!0).forEach((function(t){Eke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ike(e){return Ike="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ike(e)}function Eke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cke={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function Nke(){if(void 0!==Ake)return Ake;Ake="";var e=document.createElement("p").style;for(var t in Cke)t+"Transform"in e&&(Ake=t);return Ake}function Tke(){return Nke()?"".concat(Nke(),"TransitionProperty"):"transitionProperty"}function _ke(){return Nke()?"".concat(Nke(),"Transform"):"transform"}function Rke(e,t){var n=Tke();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function Mke(e,t){var n=_ke();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}var Oke,Fke=/matrix\((.*)\)/,Pke=/matrix3d\((.*)\)/;function Dke(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function Lke(e,t,n){var r=n;if("object"!==Ike(t))return"undefined"!==typeof r?("number"===typeof r&&(r="".concat(r,"px")),void(e.style[t]=r)):Oke(e,t);for(var a in t)t.hasOwnProperty(a)&&Lke(e,a,t[a])}function zke(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!==typeof n){var a=e.document;"number"!==typeof(n=a.documentElement[r])&&(n=a.body[r])}return n}function Bke(e){return zke(e)}function Wke(e){return zke(e,!0)}function jke(e){var t=function(e){var t,n,r,a=e.ownerDocument,i=a.body,o=a&&a.documentElement;return t=e.getBoundingClientRect(),n=Math.floor(t.left),r=Math.floor(t.top),{left:n-=o.clientLeft||i.clientLeft||0,top:r-=o.clientTop||i.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=Bke(r),t.top+=Wke(r),t}function Vke(e){return null!==e&&void 0!==e&&e==e.window}function Uke(e){return Vke(e)?e.document:9===e.nodeType?e:e.ownerDocument}var Hke=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),Gke=/^(top|right|bottom|left)$/;function qke(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function Kke(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function Xke(e,t,n){"static"===Lke(e,"position")&&(e.style.position="relative");var r=-999,a=-999,i=qke("left",n),o=qke("top",n),s=Kke(i),u=Kke(o);"left"!==i&&(r=999),"top"!==o&&(a=999);var c="",l=jke(e);("left"in t||"top"in t)&&(c=function(e){return e.style.transitionProperty||e.style[Tke()]}(e)||"",Rke(e,"none")),"left"in t&&(e.style[s]="",e.style[i]="".concat(r,"px")),"top"in t&&(e.style[u]="",e.style[o]="".concat(a,"px")),Dke(e);var d=jke(e),f={};for(var p in t)if(t.hasOwnProperty(p)){var h=qke(p,n),m="left"===p?r:a,v=l[p]-d[p];f[h]=h===p?m+v:m-v}Lke(e,f),Dke(e),("left"in t||"top"in t)&&Rke(e,c);var g={};for(var y in t)if(t.hasOwnProperty(y)){var b=qke(y,n),x=t[y]-l[y];g[b]=y===b?f[b]+x:f[b]-x}Lke(e,g)}function Zke(e,t){var n=jke(e),r=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(_ke());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}(e),a={x:r.x,y:r.y};"left"in t&&(a.x=r.x+t.left-n.left),"top"in t&&(a.y=r.y+t.top-n.top),function(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(_ke());if(r&&"none"!==r){var a,i=r.match(Fke);i?((a=(i=i[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,a[5]=t.y,Mke(e,"matrix(".concat(a.join(","),")"))):((a=r.match(Pke)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,a[13]=t.y,Mke(e,"matrix3d(".concat(a.join(","),")")))}else Mke(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}(e,a)}function Yke(e,t){for(var n=0;n<e.length;n++)t(e[n])}function Jke(e){return"border-box"===Oke(e,"boxSizing")}"undefined"!==typeof window&&(Oke=window.getComputedStyle?function(e,t,n){var r=n,a="",i=Uke(e);return(r=r||i.defaultView.getComputedStyle(e,null))&&(a=r.getPropertyValue(t)||r[t]),a}:function(e,t){var n=e.currentStyle&&e.currentStyle[t];if(Hke.test(n)&&!Gke.test(t)){var r=e.style,a=r.left,i=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,r.left="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r.left=a,e.runtimeStyle.left=i}return""===n?"auto":n});var Qke=["margin","border","padding"];function $ke(e,t,n){var r,a={},i=e.style;for(r in t)t.hasOwnProperty(r)&&(a[r]=i[r],i[r]=t[r]);for(r in n.call(e),t)t.hasOwnProperty(r)&&(i[r]=a[r])}function ewe(e,t,n){var r,a,i,o=0;for(a=0;a<t.length;a++)if(r=t[a])for(i=0;i<n.length;i++){var s=void 0;s="border"===r?"".concat(r).concat(n[i],"Width"):r+n[i],o+=parseFloat(Oke(e,s))||0}return o}var twe={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function nwe(e,t,n){var r=n;if(Vke(e))return"width"===t?twe.viewportWidth(e):twe.viewportHeight(e);if(9===e.nodeType)return"width"===t?twe.docWidth(e):twe.docHeight(e);var a="width"===t?["Left","Right"]:["Top","Bottom"],i="width"===t?Math.floor(e.getBoundingClientRect().width):Math.floor(e.getBoundingClientRect().height),o=Jke(e),s=0;(null===i||void 0===i||i<=0)&&(i=void 0,(null===(s=Oke(e,t))||void 0===s||Number(s)<0)&&(s=e.style[t]||0),s=parseFloat(s)||0),void 0===r&&(r=o?1:-1);var u=void 0!==i||o,c=i||s;return-1===r?u?c-ewe(e,["border","padding"],a):s:u?1===r?c:c+(2===r?-ewe(e,["border"],a):ewe(e,["margin"],a)):s+ewe(e,Qke.slice(r),a)}Yke(["Width","Height"],(function(e){twe["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],twe["viewport".concat(e)](n))},twe["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,a=r.body,i=r.documentElement[n];return"CSS1Compat"===r.compatMode&&i||a&&a[n]||i}}));var rwe={position:"absolute",visibility:"hidden",display:"block"};function awe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,a=t[0];return 0!==a.offsetWidth?r=nwe.apply(void 0,t):$ke(a,rwe,(function(){r=nwe.apply(void 0,t)})),r}function iwe(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}Yke(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);twe["outer".concat(t)]=function(t,n){return t&&awe(t,e,n?0:1)};var n="width"===e?["Left","Right"]:["Top","Bottom"];twe[e]=function(t,r){var a=r;return void 0!==a?t?(Jke(t)&&(a+=ewe(t,["padding","border"],n)),Lke(t,e,a)):void 0:t&&awe(t,e,-1)}}));var owe={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:Uke,offset:function(e,t,n){if("undefined"===typeof t)return jke(e);!function(e,t,n){if(n.ignoreShake){var r=jke(e),a=r.left.toFixed(0),i=r.top.toFixed(0),o=t.left.toFixed(0),s=t.top.toFixed(0);if(a===o&&i===s)return}n.useCssRight||n.useCssBottom?Xke(e,t,n):n.useCssTransform&&_ke()in document.body.style?Zke(e,t):Xke(e,t,n)}(e,t,n||{})},isWindow:Vke,each:Yke,css:Lke,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:iwe,getWindowScrollLeft:function(e){return Bke(e)},getWindowScrollTop:function(e){return Wke(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)owe.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};iwe(owe,twe);var swe=owe.getParent;function uwe(e){if(owe.isWindow(e)||9===e.nodeType)return null;var t,n=owe.getDocument(e).body,r=owe.css(e,"position");if(!("fixed"===r||"absolute"===r))return"html"===e.nodeName.toLowerCase()?null:swe(e);for(t=swe(e);t&&t!==n&&9!==t.nodeType;t=swe(t))if("static"!==(r=owe.css(t,"position")))return t;return null}var cwe=owe.getParent;function lwe(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=uwe(e),a=owe.getDocument(e),i=a.defaultView||a.parentWindow,o=a.body,s=a.documentElement;r;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===o||r===s||"visible"===owe.css(r,"overflow")){if(r===o||r===s)break}else{var u=owe.offset(r);u.left+=r.clientLeft,u.top+=r.clientTop,n.top=Math.max(n.top,u.top),n.right=Math.min(n.right,u.left+r.clientWidth),n.bottom=Math.min(n.bottom,u.top+r.clientHeight),n.left=Math.max(n.left,u.left)}r=uwe(r)}var c=null;owe.isWindow(e)||9===e.nodeType||(c=e.style.position,"absolute"===owe.css(e,"position")&&(e.style.position="fixed"));var l=owe.getWindowScrollLeft(i),d=owe.getWindowScrollTop(i),f=owe.viewportWidth(i),p=owe.viewportHeight(i),h=s.scrollWidth,m=s.scrollHeight,v=window.getComputedStyle(o);if("hidden"===v.overflowX&&(h=i.innerWidth),"hidden"===v.overflowY&&(m=i.innerHeight),e.style&&(e.style.position=c),t||function(e){if(owe.isWindow(e)||9===e.nodeType)return!1;var t=owe.getDocument(e),n=t.body,r=null;for(r=cwe(e);r&&r!==n&&r!==t;r=cwe(r))if("fixed"===owe.css(r,"position"))return!0;return!1}(e))n.left=Math.max(n.left,l),n.top=Math.max(n.top,d),n.right=Math.min(n.right,l+f),n.bottom=Math.min(n.bottom,d+p);else{var g=Math.max(h,l+f);n.right=Math.min(n.right,g);var y=Math.max(m,d+p);n.bottom=Math.min(n.bottom,y)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function dwe(e){var t,n,r;if(owe.isWindow(e)||9===e.nodeType){var a=owe.getWindow(e);t={left:owe.getWindowScrollLeft(a),top:owe.getWindowScrollTop(a)},n=owe.viewportWidth(a),r=owe.viewportHeight(a)}else t=owe.offset(e),n=owe.outerWidth(e),r=owe.outerHeight(e);return t.width=n,t.height=r,t}function fwe(e,t){var n=t.charAt(0),r=t.charAt(1),a=e.width,i=e.height,o=e.left,s=e.top;return"c"===n?s+=i/2:"b"===n&&(s+=i),"c"===r?o+=a/2:"r"===r&&(o+=a),{left:o,top:s}}function pwe(e,t,n,r,a){var i=fwe(t,n[1]),o=fwe(e,n[0]),s=[o.left-i.left,o.top-i.top];return{left:Math.round(e.left-s[0]+r[0]-a[0]),top:Math.round(e.top-s[1]+r[1]-a[1])}}function hwe(e,t,n){return e.left<n.left||e.left+t.width>n.right}function mwe(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function vwe(e,t,n){var r=[];return owe.each(e,(function(e){r.push(e.replace(t,(function(e){return n[e]})))})),r}function gwe(e,t){return e[t]=-e[t],e}function ywe(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function bwe(e,t){e[0]=ywe(e[0],t.width),e[1]=ywe(e[1],t.height)}function xwe(e,t,n,r){var a=n.points,i=n.offset||[0,0],o=n.targetOffset||[0,0],s=n.overflow,u=n.source||e;i=[].concat(i),o=[].concat(o);var c={},l=0,d=lwe(u,!(!(s=s||{})||!s.alwaysByViewport)),f=dwe(u);bwe(i,f),bwe(o,t);var p=pwe(f,t,a,i,o),h=owe.merge(f,p);if(d&&(s.adjustX||s.adjustY)&&r){if(s.adjustX&&hwe(p,f,d)){var m=vwe(a,/[lr]/gi,{l:"r",r:"l"}),v=gwe(i,0),g=gwe(o,0);(function(e,t,n){return e.left>n.right||e.left+t.width<n.left})(pwe(f,t,m,v,g),f,d)||(l=1,a=m,i=v,o=g)}if(s.adjustY&&mwe(p,f,d)){var y=vwe(a,/[tb]/gi,{t:"b",b:"t"}),b=gwe(i,1),x=gwe(o,1);(function(e,t,n){return e.top>n.bottom||e.top+t.height<n.top})(pwe(f,t,y,b,x),f,d)||(l=1,a=y,i=b,o=x)}l&&(p=pwe(f,t,a,i,o),owe.mix(h,p));var A=hwe(p,f,d),k=mwe(p,f,d);if(A||k){var w=a;A&&(w=vwe(a,/[lr]/gi,{l:"r",r:"l"})),k&&(w=vwe(a,/[tb]/gi,{t:"b",b:"t"})),a=w,i=n.offset||[0,0],o=n.targetOffset||[0,0]}c.adjustX=s.adjustX&&A,c.adjustY=s.adjustY&&k,(c.adjustX||c.adjustY)&&(h=function(e,t,n,r){var a=owe.clone(e),i={width:t.width,height:t.height};return r.adjustX&&a.left<n.left&&(a.left=n.left),r.resizeWidth&&a.left>=n.left&&a.left+i.width>n.right&&(i.width-=a.left+i.width-n.right),r.adjustX&&a.left+i.width>n.right&&(a.left=Math.max(n.right-i.width,n.left)),r.adjustY&&a.top<n.top&&(a.top=n.top),r.resizeHeight&&a.top>=n.top&&a.top+i.height>n.bottom&&(i.height-=a.top+i.height-n.bottom),r.adjustY&&a.top+i.height>n.bottom&&(a.top=Math.max(n.bottom-i.height,n.top)),owe.mix(a,i)}(p,f,d,c))}return h.width!==f.width&&owe.css(u,"width",owe.width(u)+h.width-f.width),h.height!==f.height&&owe.css(u,"height",owe.height(u)+h.height-f.height),owe.offset(u,{left:h.left,top:h.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:a,offset:i,targetOffset:o,overflow:c}}function Awe(e,t,n){var r=n.target||t,a=dwe(r),i=!function(e,t){var n=lwe(e,t),r=dwe(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}(r,n.overflow&&n.overflow.alwaysByViewport);return xwe(e,a,n,i)}function kwe(e,t,n){var r,a,i=owe.getDocument(e),o=i.defaultView||i.parentWindow,s=owe.getWindowScrollLeft(o),u=owe.getWindowScrollTop(o),c=owe.viewportWidth(o),l=owe.viewportHeight(o),d={left:r="pageX"in t?t.pageX:s+t.clientX,top:a="pageY"in t?t.pageY:u+t.clientY,width:0,height:0},f=r>=0&&r<=s+c&&a>=0&&a<=u+l,p=[n.points[0],"cc"];return xwe(e,d,Ske(Ske({},n),{},{points:p}),f)}Awe.__getOffsetParent=uwe,Awe.__getVisibleRectForElement=lwe;var wwe=n(1905),Swe=n.n(wwe);function Iwe(e,t){var n=null,r=null;var a=new Qxe((function(e){var a=u(e,1)[0].target;if(document.documentElement.contains(a)){var i=a.getBoundingClientRect(),o=i.width,s=i.height,c=Math.floor(o),l=Math.floor(s);n===c&&r===l||Promise.resolve().then((function(){t({width:c,height:l})})),n=c,r=l}}));return e&&a.observe(e),function(){a.disconnect()}}function Ewe(e){return"function"!==typeof e?null:e()}function Cwe(e){return"object"===rt(e)&&e?e:null}var Nwe=function(t,n){var r=t.children,a=t.disabled,i=t.target,o=t.align,s=t.onAlign,c=t.monitorWindowResize,l=t.monitorBufferTime,d=void 0===l?0:l,f=e.useRef({}),p=e.useRef(),h=e.Children.only(r),m=e.useRef({});m.current.disabled=a,m.current.target=i,m.current.align=o,m.current.onAlign=s;var v=function(t,n){var r=e.useRef(!1),a=e.useRef(null);function i(){window.clearTimeout(a.current)}return[function e(o){if(i(),r.current&&!0!==o)a.current=window.setTimeout((function(){r.current=!1,e()}),n);else{if(!1===t())return;r.current=!0,a.current=window.setTimeout((function(){r.current=!1}),n)}},function(){r.current=!1,i()}]}((function(){var e=m.current,t=e.disabled,n=e.target,r=e.align,a=e.onAlign;if(!t&&n){var i,o=p.current,s=Ewe(n),u=Cwe(n);f.current.element=s,f.current.point=u,f.current.align=r;var c=document.activeElement;return s&&kke(s)?i=Awe(o,s,r):u&&(i=kwe(o,u,r)),function(e,t){e!==document.activeElement&&hke(t,e)&&"function"===typeof e.focus&&e.focus()}(c,o),a&&i&&a(o,i),!0}return!1}),d),g=u(v,2),y=g[0],b=g[1],x=e.useRef({cancel:function(){}}),A=e.useRef({cancel:function(){}});e.useEffect((function(){var e=Ewe(i),t=Cwe(i);p.current!==A.current.element&&(A.current.cancel(),A.current.element=p.current,A.current.cancel=Iwe(p.current,y)),f.current.element===e&&function(e,t){return e===t||!(!e||!t)&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY)}(f.current.point,t)&&Swe()(f.current.align,o)||(y(),x.current.element!==e&&(x.current.cancel(),x.current.element=e,x.current.cancel=Iwe(e,y)))})),e.useEffect((function(){a?b():y()}),[a]);var k=e.useRef(null);return e.useEffect((function(){c?k.current||(k.current=mke(window,"resize",y)):k.current&&(k.current.remove(),k.current=null)}),[c]),e.useEffect((function(){return function(){x.current.cancel(),A.current.cancel(),k.current&&k.current.remove(),b()}}),[]),e.useImperativeHandle(n,(function(){return{forceAlign:function(){return y(!0)}}})),e.isValidElement(h)&&(h=e.cloneElement(h,{ref:Tt(h.ref,p)})),h},Twe=e.forwardRef(Nwe);Twe.displayName="Align";var _we=Twe,Rwe=["measure","alignPre","align",null,"motion"],Mwe=e.forwardRef((function(t,n){var r=t.visible,a=t.prefixCls,i=t.className,o=t.style,s=t.children,c=t.zIndex,l=t.stretch,d=t.destroyPopupOnHide,f=t.forceRender,p=t.align,h=t.point,m=t.getRootDomNode,v=t.getClassNameFromAlign,g=t.onAlign,y=t.onMouseEnter,b=t.onMouseLeave,x=t.onMouseDown,A=t.onTouchStart,k=t.onClick,w=(0,e.useRef)(),S=(0,e.useRef)(),I=u((0,e.useState)(),2),E=I[0],C=I[1],N=function(t){var n=u(e.useState({width:0,height:0}),2),r=n[0],a=n[1];return[e.useMemo((function(){var e={};if(t){var n=r.width,a=r.height;-1!==t.indexOf("height")&&a?e.height=a:-1!==t.indexOf("minHeight")&&a&&(e.minHeight=a),-1!==t.indexOf("width")&&n?e.width=n:-1!==t.indexOf("minWidth")&&n&&(e.minWidth=n)}return e}),[t,r]),function(e){a({width:e.offsetWidth,height:e.offsetHeight})}]}(l),T=u(N,2),_=T[0],R=T[1];var M=function(t,n){var r=u($t(null),2),a=r[0],i=r[1],o=(0,e.useRef)();function s(e){i(e,!0)}function c(){on.cancel(o.current)}return(0,e.useEffect)((function(){s("measure")}),[t]),(0,e.useEffect)((function(){"measure"===a&&n(),a&&(o.current=on(ct(st().mark((function e(){var t,n;return st().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Rwe.indexOf(a),(n=Rwe[t+1])&&-1!==t&&s(n);case 3:case"end":return e.stop()}}),e)})))))}),[a]),(0,e.useEffect)((function(){return function(){c()}}),[]),[a,function(e){c(),o.current=on((function(){s((function(e){switch(a){case"align":return"motion";case"motion":return"stable"}return e})),null===e||void 0===e||e()}))}]}(r,(function(){l&&R(m())})),O=u(M,2),F=O[0],P=O[1],D=u((0,e.useState)(0),2),L=D[0],z=D[1],B=(0,e.useRef)();function W(){var e;null===(e=w.current)||void 0===e||e.forceAlign()}function j(e,t){var n=v(t);E!==n&&C(n),z((function(e){return e+1})),"align"===F&&(null===g||void 0===g||g(e,t))}mAe((function(){"alignPre"===F&&z(0)}),[F]),mAe((function(){"align"===F&&(L<2?W():P((function(){var e;null===(e=B.current)||void 0===e||e.call(B)})))}),[L]);var V=Ze({},bke(t));function U(){return new Promise((function(e){B.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=V[e];V[e]=function(e,n){return P(),null===t||void 0===t?void 0:t(e,n)}})),e.useEffect((function(){V.motionName||"motion"!==F||P()}),[V.motionName,F]),e.useImperativeHandle(n,(function(){return{forceAlign:W,getElement:function(){return S.current}}}));var H=Ze(Ze({},_),{},{zIndex:c,opacity:"motion"!==F&&"stable"!==F&&r?0:void 0,pointerEvents:r||"stable"===F?void 0:"none"},o),G=!0;!(null===p||void 0===p?void 0:p.points)||"align"!==F&&"stable"!==F||(G=!1);var q=s;return e.Children.count(s)>1&&(q=e.createElement("div",{className:"".concat(a,"-content")},s)),e.createElement(En,Ge({visible:r,ref:S,leavedClassName:"".concat(a,"-hidden")},V,{onAppearPrepare:U,onEnterPrepare:U,removeOnLeave:d,forceRender:f}),(function(t,n){var r=t.className,o=t.style,s=St()(a,i,E,r);return e.createElement(_we,{target:h||m,key:"popup",ref:w,monitorWindowResize:!0,disabled:G,align:p,onAlign:j},e.createElement("div",{ref:n,className:s,onMouseEnter:y,onMouseLeave:b,onMouseDownCapture:x,onTouchStartCapture:A,onClick:k,style:Ze(Ze({},o),H)},q))}))}));Mwe.displayName="PopupInner";var Owe=Mwe,Fwe=e.forwardRef((function(t,n){var r=t.prefixCls,a=t.visible,i=t.zIndex,o=t.children,s=t.mobile,u=(s=void 0===s?{}:s).popupClassName,c=s.popupStyle,l=s.popupMotion,d=void 0===l?{}:l,f=s.popupRender,p=t.onClick,h=e.useRef();e.useImperativeHandle(n,(function(){return{forceAlign:function(){},getElement:function(){return h.current}}}));var m=Ze({zIndex:i},c),v=o;return e.Children.count(o)>1&&(v=e.createElement("div",{className:"".concat(r,"-content")},o)),f&&(v=f(v)),e.createElement(En,Ge({visible:a,ref:h,removeOnLeave:!0},d),(function(t,n){var a=t.className,i=t.style,o=St()(r,u,a);return e.createElement("div",{ref:n,className:o,onClick:p,style:Ze(Ze({},i),m)},v)}))}));Fwe.displayName="MobilePopupInner";var Pwe=Fwe,Dwe=["visible","mobile"],Lwe=e.forwardRef((function(t,n){var r=t.visible,a=t.mobile,i=Ke(t,Dwe),o=u((0,e.useState)(r),2),s=o[0],c=o[1],l=u((0,e.useState)(!1),2),d=l[0],f=l[1],p=Ze(Ze({},i),{},{visible:s});(0,e.useEffect)((function(){c(r),r&&a&&f(Txe())}),[r,a]);var h=d?e.createElement(Pwe,Ge({},p,{mobile:a,ref:n})):e.createElement(Owe,Ge({},p,{ref:n}));return e.createElement("div",null,e.createElement(xke,p),h)}));Lwe.displayName="Popup";var zwe=Lwe,Bwe=e.createContext(null);function Wwe(){}function jwe(){return""}function Vwe(e){return e?e.ownerDocument:window.document}var Uwe=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];var Hwe=function(t){var n=function(n){et(a,n);var r=ot(a);function a(t){var n,i;return Ye(this,a),(n=r.call(this,t)).popupRef=e.createRef(),n.triggerRef=e.createRef(),n.portalContainer=void 0,n.attachId=void 0,n.clickOutsideHandler=void 0,n.touchOutsideHandler=void 0,n.contextMenuOutsideHandler1=void 0,n.contextMenuOutsideHandler2=void 0,n.mouseDownTimeout=void 0,n.focusTime=void 0,n.preClickTime=void 0,n.preTouchTime=void 0,n.delayTimer=void 0,n.hasPopupMouseDown=void 0,n.onMouseEnter=function(e){var t=n.props.mouseEnterDelay;n.fireEvents("onMouseEnter",e),n.delaySetPopupVisible(!0,t,t?null:e)},n.onMouseMove=function(e){n.fireEvents("onMouseMove",e),n.setPoint(e)},n.onMouseLeave=function(e){n.fireEvents("onMouseLeave",e),n.delaySetPopupVisible(!1,n.props.mouseLeaveDelay)},n.onPopupMouseEnter=function(){n.clearDelayTimer()},n.onPopupMouseLeave=function(e){var t;e.relatedTarget&&!e.relatedTarget.setTimeout&&hke(null===(t=n.popupRef.current)||void 0===t?void 0:t.getElement(),e.relatedTarget)||n.delaySetPopupVisible(!1,n.props.mouseLeaveDelay)},n.onFocus=function(e){n.fireEvents("onFocus",e),n.clearDelayTimer(),n.isFocusToShow()&&(n.focusTime=Date.now(),n.delaySetPopupVisible(!0,n.props.focusDelay))},n.onMouseDown=function(e){n.fireEvents("onMouseDown",e),n.preClickTime=Date.now()},n.onTouchStart=function(e){n.fireEvents("onTouchStart",e),n.preTouchTime=Date.now()},n.onBlur=function(e){n.fireEvents("onBlur",e),n.clearDelayTimer(),n.isBlurToHide()&&n.delaySetPopupVisible(!1,n.props.blurDelay)},n.onContextMenu=function(e){e.preventDefault(),n.fireEvents("onContextMenu",e),n.setPopupVisible(!0,e)},n.onContextMenuClose=function(){n.isContextMenuToShow()&&n.close()},n.onClick=function(e){if(n.fireEvents("onClick",e),n.focusTime){var t;if(n.preClickTime&&n.preTouchTime?t=Math.min(n.preClickTime,n.preTouchTime):n.preClickTime?t=n.preClickTime:n.preTouchTime&&(t=n.preTouchTime),Math.abs(t-n.focusTime)<20)return;n.focusTime=0}n.preClickTime=0,n.preTouchTime=0,n.isClickToShow()&&(n.isClickToHide()||n.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var r=!n.state.popupVisible;(n.isClickToHide()&&!r||r&&n.isClickToShow())&&n.setPopupVisible(!n.state.popupVisible,e)},n.onPopupMouseDown=function(){var e;(n.hasPopupMouseDown=!0,clearTimeout(n.mouseDownTimeout),n.mouseDownTimeout=window.setTimeout((function(){n.hasPopupMouseDown=!1}),0),n.context)&&(e=n.context).onPopupMouseDown.apply(e,arguments)},n.onDocumentClick=function(e){if(!n.props.mask||n.props.maskClosable){var t=e.target,r=n.getRootDomNode(),a=n.getPopupDomNode();hke(r,t)&&!n.isContextMenuOnly()||hke(a,t)||n.hasPopupMouseDown||n.close()}},n.getRootDomNode=function(){var e=n.props.getTriggerDOMNode;if(e)return e(n.triggerRef.current);try{var t=It(n.triggerRef.current);if(t)return t}catch(k_e){}return dt.findDOMNode(at(n))},n.getPopupClassNameFromAlign=function(e){var t=[],r=n.props,a=r.popupPlacement,i=r.builtinPlacements,o=r.prefixCls,s=r.alignPoint,u=r.getPopupClassNameFromAlign;return a&&i&&t.push(function(e,t,n,r){for(var a=n.points,i=Object.keys(e),o=0;o<i.length;o+=1){var s=i[o];if(yke(e[s].points,a,r))return"".concat(t,"-placement-").concat(s)}return""}(i,o,e,s)),u&&t.push(u(e)),t.join(" ")},n.getComponent=function(){var t=n.props,r=t.prefixCls,a=t.destroyPopupOnHide,i=t.popupClassName,o=t.onPopupAlign,s=t.popupMotion,u=t.popupAnimation,c=t.popupTransitionName,l=t.popupStyle,d=t.mask,f=t.maskAnimation,p=t.maskTransitionName,h=t.maskMotion,m=t.zIndex,v=t.popup,g=t.stretch,y=t.alignPoint,b=t.mobile,x=t.forceRender,A=t.onPopupClick,k=n.state,w=k.popupVisible,S=k.point,I=n.getPopupAlign(),E={};return n.isMouseEnterToShow()&&(E.onMouseEnter=n.onPopupMouseEnter),n.isMouseLeaveToHide()&&(E.onMouseLeave=n.onPopupMouseLeave),E.onMouseDown=n.onPopupMouseDown,E.onTouchStart=n.onPopupMouseDown,e.createElement(zwe,Ge({prefixCls:r,destroyPopupOnHide:a,visible:w,point:y&&S,className:i,align:I,onAlign:o,animation:u,getClassNameFromAlign:n.getPopupClassNameFromAlign},E,{stretch:g,getRootDomNode:n.getRootDomNode,style:l,mask:d,zIndex:m,transitionName:c,maskAnimation:f,maskTransitionName:p,maskMotion:h,ref:n.popupRef,motion:s,mobile:b,forceRender:x,onClick:A}),"function"===typeof v?v():v)},n.attachParent=function(e){on.cancel(n.attachId);var t,r=n.props,a=r.getPopupContainer,i=r.getDocument,o=n.getRootDomNode();a?(o||0===a.length)&&(t=a(o)):t=i(n.getRootDomNode()).body,t?t.appendChild(e):n.attachId=on((function(){n.attachParent(e)}))},n.getContainer=function(){if(!n.portalContainer){var e=(0,n.props.getDocument)(n.getRootDomNode()).createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",n.portalContainer=e}return n.attachParent(n.portalContainer),n.portalContainer},n.setPoint=function(e){n.props.alignPoint&&e&&n.setState({point:{pageX:e.pageX,pageY:e.pageY}})},n.handlePortalUpdate=function(){n.state.prevPopupVisible!==n.state.popupVisible&&n.props.afterPopupVisibleChange(n.state.popupVisible)},n.triggerContextValue={onPopupMouseDown:n.onPopupMouseDown},i="popupVisible"in t?!!t.popupVisible:!!t.defaultPopupVisible,n.state={prevPopupVisible:i,popupVisible:i},Uwe.forEach((function(e){n["fire".concat(e)]=function(t){n.fireEvents(e,t)}})),n}return Qe(a,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=mke(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=mke(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=mke(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=mke(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),on.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?function(e,t,n){return Ze(Ze({},e[t]||{}),n)}(r,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var r=this,a=1e3*t;if(this.clearDelayTimer(),a){var i=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(e,i),r.clearDelayTimer()}),a)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var n=this.state.popupVisible,r=this.props,a=r.children,i=r.forceRender,o=r.alignPoint,s=r.className,u=r.autoDestroy,c=e.Children.only(a),l={key:"trigger"};this.isContextMenuToShow()?l.onContextMenu=this.onContextMenu:l.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(l.onClick=this.onClick,l.onMouseDown=this.onMouseDown,l.onTouchStart=this.onTouchStart):(l.onClick=this.createTwoChains("onClick"),l.onMouseDown=this.createTwoChains("onMouseDown"),l.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(l.onMouseEnter=this.onMouseEnter,o&&(l.onMouseMove=this.onMouseMove)):l.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?l.onMouseLeave=this.onMouseLeave:l.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(l.onFocus=this.onFocus,l.onBlur=this.onBlur):(l.onFocus=this.createTwoChains("onFocus"),l.onBlur=this.createTwoChains("onBlur"));var d=St()(c&&c.props&&c.props.className,s);d&&(l.className=d);var f=Ze({},l);_t(c)&&(f.ref=Tt(this.triggerRef,c.ref));var p,h=e.cloneElement(c,f);return(n||this.popupRef.current||i)&&(p=e.createElement(t,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!n&&u&&(p=null),e.createElement(Bwe.Provider,{value:this.triggerContextValue},h,p)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r}}]),a}(e.Component);return n.contextType=Bwe,n.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:jwe,getDocument:Vwe,onPopupVisibleChange:Wwe,afterPopupVisibleChange:Wwe,onPopupAlign:Wwe,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},n}(gke),Gwe={adjustX:1,adjustY:1},qwe={topLeft:{points:["bl","tl"],overflow:Gwe,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Gwe,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:Gwe,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:Gwe,offset:[4,0]}},Kwe={topLeft:{points:["bl","tl"],overflow:Gwe,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Gwe,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:Gwe,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:Gwe,offset:[4,0]}};function Xwe(e,t,n){return t||(n?n[e]||n.other:void 0)}var Zwe={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function Ywe(t){var n=t.prefixCls,r=t.visible,a=t.children,i=t.popup,o=t.popupClassName,s=t.popupOffset,c=t.disabled,l=t.mode,d=t.onVisibleChange,f=e.useContext(DAe),p=f.getPopupContainer,h=f.rtl,m=f.subMenuOpenDelay,v=f.subMenuCloseDelay,g=f.builtinPlacements,y=f.triggerSubMenuAction,b=f.forceSubMenuRender,x=f.rootClassName,A=f.motion,k=f.defaultMotions,w=u(e.useState(!1),2),S=w[0],I=w[1],E=Ze(Ze({},h?Kwe:qwe),g),C=Zwe[l],N=Ze(Ze({},Xwe(l,A,k)),{},{leavedClassName:"".concat(n,"-hidden"),removeOnLeave:!1,motionAppear:!0}),T=e.useRef();return e.useEffect((function(){return T.current=on((function(){I(r)})),function(){on.cancel(T.current)}}),[r]),e.createElement(Hwe,{prefixCls:n,popupClassName:St()("".concat(n,"-popup"),qe({},"".concat(n,"-rtl"),h),o,x),stretch:"horizontal"===l?"minWidth":null,getPopupContainer:p,builtinPlacements:E,popupPlacement:C,popupVisible:S,popup:i,popupAlign:s&&{offset:s},action:c?[]:[y],mouseEnterDelay:m,mouseLeaveDelay:v,onPopupVisibleChange:d,forceRender:b,popupMotion:N},a)}function Jwe(t){var n=t.id,r=t.open,a=t.keyPath,i=t.children,o="inline",s=e.useContext(DAe),c=s.prefixCls,l=s.forceSubMenuRender,d=s.motion,f=s.defaultMotions,p=s.mode,h=e.useRef(!1);h.current=p===o;var m=u(e.useState(!h.current),2),v=m[0],g=m[1],y=!!h.current&&r;e.useEffect((function(){h.current&&g(!1)}),[p]);var b=Ze({},Xwe(o,d,f));a.length>1&&(b.motionAppear=!1);var x=b.onVisibleChanged;return b.onVisibleChanged=function(e){return h.current||e||g(!0),null===x||void 0===x?void 0:x(e)},v?null:e.createElement(LAe,{mode:o,locked:!h.current},e.createElement(En,Ge({visible:y},b,{forceRender:l,removeOnLeave:!1,leavedClassName:"".concat(c,"-hidden")}),(function(t){var r=t.className,a=t.style;return e.createElement(pke,{id:n,className:r,style:a},i)})))}var Qwe=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],$we=["active"],eSe=function(t){var n,r=t.style,a=t.className,i=t.title,o=t.eventKey,s=(t.warnKey,t.disabled),c=t.internalPopupClose,l=t.children,d=t.itemIcon,f=t.expandIcon,p=t.popupClassName,h=t.popupOffset,m=t.onClick,v=t.onMouseEnter,g=t.onMouseLeave,y=t.onTitleClick,b=t.onTitleMouseEnter,x=t.onTitleMouseLeave,A=Ke(t,Qwe),k=JAe(o),w=e.useContext(DAe),S=w.prefixCls,I=w.mode,E=w.openKeys,C=w.disabled,N=w.overflowDisabled,T=w.activeKey,_=w.selectedKeys,R=w.itemIcon,M=w.expandIcon,O=w.onItemClick,F=w.onOpenChange,P=w.onActive,D=e.useContext(QAe)._internalRenderSubMenuItem,L=e.useContext(XAe).isSubPathKey,z=KAe(),B="".concat(S,"-submenu"),W=C||s,j=e.useRef(),V=e.useRef();var U=d||R,H=f||M,G=E.includes(o),q=!N&&G,K=L(_,o),X=zAe(o,W,b,x),Z=X.active,Y=Ke(X,$we),J=u(e.useState(!1),2),Q=J[0],$=J[1],ee=function(e){W||$(e)},te=e.useMemo((function(){return Z||"inline"!==I&&(Q||L([T],o))}),[I,Z,T,Q,o,L]),ne=VAe(z.length),re=cke((function(e){null===m||void 0===m||m(WAe(e)),O(e)})),ae=k&&"".concat(k,"-popup"),ie=e.createElement("div",Ge({role:"menuitem",style:ne,className:"".concat(B,"-title"),tabIndex:W?null:-1,ref:j,title:"string"===typeof i?i:null,"data-menu-id":N&&k?null:k,"aria-expanded":q,"aria-haspopup":!0,"aria-controls":ae,"aria-disabled":W,onClick:function(e){W||(null===y||void 0===y||y({key:o,domEvent:e}),"inline"===I&&F(o,!G))},onFocus:function(){P(o)}},Y),i,e.createElement(jAe,{icon:"horizontal"!==I?H:null,props:Ze(Ze({},t),{},{isOpen:q,isSubMenu:!0})},e.createElement("i",{className:"".concat(B,"-arrow")}))),oe=e.useRef(I);if("inline"!==I&&(oe.current=z.length>1?"vertical":I),!N){var se=oe.current;ie=e.createElement(Ywe,{mode:se,prefixCls:B,visible:!c&&q&&"inline"!==I,popupClassName:p,popupOffset:h,popup:e.createElement(LAe,{mode:"horizontal"===se?"vertical":se},e.createElement(pke,{id:ae,ref:V},l)),disabled:W,onVisibleChange:function(e){"inline"!==I&&F(o,e)}},ie)}var ue=e.createElement(FAe.Item,Ge({role:"none"},A,{component:"li",style:r,className:St()(B,"".concat(B,"-").concat(I),a,(n={},qe(n,"".concat(B,"-open"),q),qe(n,"".concat(B,"-active"),te),qe(n,"".concat(B,"-selected"),K),qe(n,"".concat(B,"-disabled"),W),n)),onMouseEnter:function(e){ee(!0),null===v||void 0===v||v({key:o,domEvent:e})},onMouseLeave:function(e){ee(!1),null===g||void 0===g||g({key:o,domEvent:e})}}),ie,!N&&e.createElement(Jwe,{id:ae,open:q,keyPath:z},l));return D&&(ue=D(ue,t,{selected:K,active:te,open:q,disabled:W})),e.createElement(LAe,{onItemClick:re,mode:"horizontal"===I?"vertical":I,itemIcon:U,expandIcon:H},ue)};function tSe(t){var n,r=t.eventKey,a=t.children,i=KAe(r),o=oke(a,i),s=GAe();return e.useEffect((function(){if(s)return s.registerPath(r,i),function(){s.unregisterPath(r,i)}}),[i]),n=s?o:e.createElement(eSe,t,o),e.createElement(qAe.Provider,{value:i},n)}function nSe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(kke(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||"a"===n&&!!e.getAttribute("href"),a=e.getAttribute("tabindex"),i=Number(a),o=null;return a&&!Number.isNaN(i)?o=i:r&&null===o&&(o=0),r&&e.disabled&&(o=null),null!==o&&(o>=0||t&&o<0)}return!1}function rSe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Tn(e.querySelectorAll("*")).filter((function(e){return nSe(e,t)}));return nSe(e,t)&&n.unshift(e),n}var aSe=uAe.LEFT,iSe=uAe.RIGHT,oSe=uAe.UP,sSe=uAe.DOWN,uSe=uAe.ENTER,cSe=uAe.ESC,lSe=uAe.HOME,dSe=uAe.END,fSe=[oSe,sSe,aSe,iSe];function pSe(e,t){return rSe(e,!0).filter((function(e){return t.has(e)}))}function hSe(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return null;var a=pSe(e,t),i=a.length,o=a.findIndex((function(e){return n===e}));return r<0?-1===o?o=i-1:o-=1:r>0&&(o+=1),a[o=(o+i)%i]}function mSe(t,n,r,a,i,o,s,u,c,l){var d=e.useRef(),f=e.useRef();f.current=n;var p=function(){on.cancel(d.current)};return e.useEffect((function(){return function(){p()}}),[]),function(e){var h=e.which;if([].concat(fSe,[uSe,cSe,lSe,dSe]).includes(h)){var m,v,g,y=function(){return m=new Set,v=new Map,g=new Map,o().forEach((function(e){var t=document.querySelector("[data-menu-id='".concat(YAe(a,e),"']"));t&&(m.add(t),g.set(t,e),v.set(e,t))})),m};y();var b=function(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}(v.get(n),m),x=g.get(b),A=function(e,t,n,r){var a,i,o,s,u="prev",c="next",l="children",d="parent";if("inline"===e&&r===uSe)return{inlineTrigger:!0};var f=(qe(a={},oSe,u),qe(a,sSe,c),a),p=(qe(i={},aSe,n?c:u),qe(i,iSe,n?u:c),qe(i,sSe,l),qe(i,uSe,l),i),h=(qe(o={},oSe,u),qe(o,sSe,c),qe(o,uSe,l),qe(o,cSe,d),qe(o,aSe,n?l:d),qe(o,iSe,n?d:l),o);switch(null===(s={inline:f,horizontal:p,vertical:h,inlineSub:f,horizontalSub:h,verticalSub:h}["".concat(e).concat(t?"":"Sub")])||void 0===s?void 0:s[r]){case u:return{offset:-1,sibling:!0};case c:return{offset:1,sibling:!0};case d:return{offset:-1,sibling:!1};case l:return{offset:1,sibling:!1};default:return null}}(t,1===s(x,!0).length,r,h);if(!A&&h!==lSe&&h!==dSe)return;(fSe.includes(h)||[lSe,dSe].includes(h))&&e.preventDefault();var k=function(e){if(e){var t=e,n=e.querySelector("a");(null===n||void 0===n?void 0:n.getAttribute("href"))&&(t=n);var r=g.get(e);u(r),p(),d.current=on((function(){f.current===r&&t.focus()}))}};if([lSe,dSe].includes(h)||A.sibling||!b){var w,S,I=pSe(w=b&&"inline"!==t?function(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}(b):i.current,m);S=h===lSe?I[0]:h===dSe?I[I.length-1]:hSe(w,m,b,A.offset),k(S)}else if(A.inlineTrigger)c(x);else if(A.offset>0)c(x,!0),p(),d.current=on((function(){y();var e=b.getAttribute("aria-controls"),t=hSe(document.getElementById(e),m);k(t)}),5);else if(A.offset<0){var E=s(x,!0),C=E[E.length-2],N=v.get(C);c(C,!1),k(N)}}null===l||void 0===l||l(e)}}var vSe=Math.random().toFixed(5).toString().slice(2),gSe=0;var ySe="__RC_UTIL_PATH_SPLIT__",bSe=function(e){return e.join(ySe)},xSe="rc-menu-more";function ASe(){var t=u(e.useState({}),2)[1],n=(0,e.useRef)(new Map),r=(0,e.useRef)(new Map),a=u(e.useState([]),2),i=a[0],o=a[1],s=(0,e.useRef)(0),c=(0,e.useRef)(!1),l=(0,e.useCallback)((function(e,a){var i=bSe(a);r.current.set(i,e),n.current.set(e,i),s.current+=1;var o,u=s.current;o=function(){u===s.current&&(c.current||t({}))},Promise.resolve().then(o)}),[]),d=(0,e.useCallback)((function(e,t){var a=bSe(t);r.current.delete(a),n.current.delete(e)}),[]),f=(0,e.useCallback)((function(e){o(e)}),[]),p=(0,e.useCallback)((function(e,t){var r=n.current.get(e)||"",a=r.split(ySe);return t&&i.includes(a[0])&&a.unshift(xSe),a}),[i]),h=(0,e.useCallback)((function(e,t){return e.some((function(e){return p(e,!0).includes(t)}))}),[p]),m=(0,e.useCallback)((function(e){var t="".concat(n.current.get(e)).concat(ySe),a=new Set;return Tn(r.current.keys()).forEach((function(e){e.startsWith(t)&&a.add(r.current.get(e))})),a}),[]);return e.useEffect((function(){return function(){c.current=!0}}),[]),{registerPath:l,unregisterPath:d,refreshOverflowKeys:f,isSubPathKey:h,getKeyPath:p,getKeys:function(){var e=Tn(n.current.keys());return i.length&&e.push(xSe),e},getSubPathKeys:m}}var kSe=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],wSe=[],SSe=e.forwardRef((function(t,n){var r,a,i=t.prefixCls,o=void 0===i?"rc-menu":i,s=t.rootClassName,c=t.style,l=t.className,d=t.tabIndex,f=void 0===d?0:d,p=t.items,h=t.children,m=t.direction,v=t.id,g=t.mode,y=void 0===g?"vertical":g,b=t.inlineCollapsed,x=t.disabled,A=t.disabledOverflow,k=t.subMenuOpenDelay,w=void 0===k?.1:k,S=t.subMenuCloseDelay,I=void 0===S?.1:S,E=t.forceSubMenuRender,C=t.defaultOpenKeys,N=t.openKeys,T=t.activeKey,_=t.defaultActiveFirst,R=t.selectable,M=void 0===R||R,O=t.multiple,F=void 0!==O&&O,P=t.defaultSelectedKeys,D=t.selectedKeys,L=t.onSelect,z=t.onDeselect,B=t.inlineIndent,W=void 0===B?24:B,j=t.motion,V=t.defaultMotions,U=t.triggerSubMenuAction,H=void 0===U?"hover":U,G=t.builtinPlacements,q=t.itemIcon,K=t.expandIcon,X=t.overflowedIndicator,Z=void 0===X?"...":X,Y=t.overflowedIndicatorPopupClassName,J=t.getPopupContainer,Q=t.onClick,$=t.onOpenChange,ee=t.onKeyDown,te=(t.openAnimation,t.openTransitionName,t._internalRenderMenuItem),ne=t._internalRenderSubMenuItem,re=Ke(t,kSe),ae=e.useMemo((function(){return uke(h,p,wSe)}),[h,p]),ie=u(e.useState(!1),2),oe=ie[0],se=ie[1],ue=e.useRef(),ce=function(t){var n=u(_xe(t,{value:t}),2),r=n[0],a=n[1];return e.useEffect((function(){gSe+=1;var e="".concat(vSe,"-").concat(gSe);a("rc-menu-uuid-".concat(e))}),[]),r}(v),le="rtl"===m;var de=u(e.useMemo((function(){return"inline"!==y&&"vertical"!==y||!b?[y,!1]:["vertical",b]}),[y,b]),2),fe=de[0],pe=de[1],he=u(e.useState(0),2),me=he[0],ve=he[1],ge=me>=ae.length-1||"horizontal"!==fe||A,ye=u(_xe(C,{value:N,postState:function(e){return e||wSe}}),2),be=ye[0],xe=ye[1],Ae=function(e){xe(e),null===$||void 0===$||$(e)},ke=u(e.useState(be),2),we=ke[0],Se=ke[1],Ie="inline"===fe,Ee=e.useRef(!1);e.useEffect((function(){Ie&&Se(be)}),[be]),e.useEffect((function(){Ee.current?Ie?xe(we):Ae(wSe):Ee.current=!0}),[Ie]);var Ce=ASe(),Ne=Ce.registerPath,Te=Ce.unregisterPath,_e=Ce.refreshOverflowKeys,Re=Ce.isSubPathKey,Me=Ce.getKeyPath,Oe=Ce.getKeys,Fe=Ce.getSubPathKeys,Pe=e.useMemo((function(){return{registerPath:Ne,unregisterPath:Te}}),[Ne,Te]),De=e.useMemo((function(){return{isSubPathKey:Re}}),[Re]);e.useEffect((function(){_e(ge?wSe:ae.slice(me+1).map((function(e){return e.key})))}),[me,ge]);var Le=u(_xe(T||_&&(null===(r=ae[0])||void 0===r?void 0:r.key),{value:T}),2),ze=Le[0],Be=Le[1],We=cke((function(e){Be(e)})),je=cke((function(){Be(void 0)}));(0,e.useImperativeHandle)(n,(function(){return{list:ue.current,focus:function(e){var t,n,r,a,i=null!==ze&&void 0!==ze?ze:null===(t=ae.find((function(e){return!e.props.disabled})))||void 0===t?void 0:t.key;i&&(null===(n=ue.current)||void 0===n||null===(r=n.querySelector("li[data-menu-id='".concat(YAe(ce,i),"']")))||void 0===r||null===(a=r.focus)||void 0===a||a.call(r,e))}}}));var Ve=u(_xe(P||[],{value:D,postState:function(e){return Array.isArray(e)?e:null===e||void 0===e?wSe:[e]}}),2),Ue=Ve[0],He=Ve[1],Xe=cke((function(e){null===Q||void 0===Q||Q(WAe(e)),function(e){if(M){var t,n=e.key,r=Ue.includes(n);t=F?r?Ue.filter((function(e){return e!==n})):[].concat(Tn(Ue),[n]):[n],He(t);var a=Ze(Ze({},e),{},{selectedKeys:t});r?null===z||void 0===z||z(a):null===L||void 0===L||L(a)}!F&&be.length&&"inline"!==fe&&Ae(wSe)}(e)})),Ye=cke((function(e,t){var n=be.filter((function(t){return t!==e}));if(t)n.push(e);else if("inline"!==fe){var r=Fe(e);n=n.filter((function(e){return!r.has(e)}))}hAe()(be,n)||Ae(n)})),Je=cke(J),Qe=mSe(fe,ze,le,ce,ue,Oe,Me,Be,(function(e,t){var n=null!==t&&void 0!==t?t:!be.includes(e);Ye(e,n)}),ee);e.useEffect((function(){se(!0)}),[]);var $e=e.useMemo((function(){return{_internalRenderMenuItem:te,_internalRenderSubMenuItem:ne}}),[te,ne]),et="horizontal"!==fe||A?ae:ae.map((function(t,n){return e.createElement(LAe,{key:t.key,overflowDisabled:n>me},t)})),tt=e.createElement(FAe,Ge({id:v,ref:ue,prefixCls:"".concat(o,"-overflow"),component:"ul",itemComponent:ake,className:St()(o,"".concat(o,"-root"),"".concat(o,"-").concat(fe),l,(a={},qe(a,"".concat(o,"-inline-collapsed"),pe),qe(a,"".concat(o,"-rtl"),le),a),s),dir:m,style:c,role:"menu",tabIndex:f,data:et,renderRawItem:function(e){return e},renderRawRest:function(t){var n=t.length,r=n?ae.slice(-n):null;return e.createElement(tSe,{eventKey:xSe,title:Z,disabled:ge,internalPopupClose:0===n,popupClassName:Y},r)},maxCount:"horizontal"!==fe||A?FAe.INVALIDATE:FAe.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(e){ve(e)},onKeyDown:Qe},re));return e.createElement(QAe.Provider,{value:$e},e.createElement(ZAe.Provider,{value:ce},e.createElement(LAe,{prefixCls:o,rootClassName:s,mode:fe,openKeys:be,rtl:le,disabled:x,motion:oe?j:null,defaultMotions:oe?V:null,activeKey:ze,onActive:We,onInactive:je,selectedKeys:Ue,inlineIndent:W,subMenuOpenDelay:w,subMenuCloseDelay:I,forceSubMenuRender:E,builtinPlacements:G,triggerSubMenuAction:H,getPopupContainer:Je,itemIcon:q,expandIcon:K,onItemClick:Xe,onOpenChange:Ye},e.createElement(XAe.Provider,{value:De},tt),e.createElement("div",{style:{display:"none"},"aria-hidden":!0},e.createElement(HAe.Provider,{value:Pe},ae)))))})),ISe=["className","title","eventKey","children"],ESe=["children"],CSe=function(t){var n=t.className,r=t.title,a=(t.eventKey,t.children),i=Ke(t,ISe),o=e.useContext(DAe).prefixCls,s="".concat(o,"-item-group");return e.createElement("li",Ge({},i,{onClick:function(e){return e.stopPropagation()},className:St()(s,n)}),e.createElement("div",{className:"".concat(s,"-title"),title:"string"===typeof r?r:void 0},r),e.createElement("ul",{className:"".concat(s,"-list")},a))};function NSe(t){var n=t.children,r=Ke(t,ESe),a=oke(n,KAe(r.eventKey));return GAe()?a:e.createElement(CSe,Nxe(r,["warnKey"]),a)}function TSe(t){var n=t.className,r=t.style,a=e.useContext(DAe).prefixCls;return GAe()?null:e.createElement("li",{className:St()("".concat(a,"-item-divider"),n),style:r})}var _Se=SSe;_Se.Item=ake,_Se.SubMenu=tSe,_Se.ItemGroup=NSe,_Se.Divider=TSe;var RSe=_Se,MSe={adjustX:1,adjustY:1},OSe=[0,0],FSe={topLeft:{points:["bl","tl"],overflow:MSe,offset:[0,-4],targetOffset:OSe},topCenter:{points:["bc","tc"],overflow:MSe,offset:[0,-4],targetOffset:OSe},topRight:{points:["br","tr"],overflow:MSe,offset:[0,-4],targetOffset:OSe},bottomLeft:{points:["tl","bl"],overflow:MSe,offset:[0,4],targetOffset:OSe},bottomCenter:{points:["tc","bc"],overflow:MSe,offset:[0,4],targetOffset:OSe},bottomRight:{points:["tr","br"],overflow:MSe,offset:[0,4],targetOffset:OSe}},PSe=uAe.ESC,DSe=uAe.TAB;var LSe=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function zSe(t,n){var r=t.arrow,a=void 0!==r&&r,i=t.prefixCls,o=void 0===i?"rc-dropdown":i,s=t.transitionName,c=t.animation,l=t.align,d=t.placement,f=void 0===d?"bottomLeft":d,p=t.placements,h=void 0===p?FSe:p,m=t.getPopupContainer,v=t.showAction,g=t.hideAction,y=t.overlayClassName,b=t.overlayStyle,x=t.visible,A=t.trigger,k=void 0===A?["hover"]:A,w=t.autoFocus,S=Ke(t,LSe),I=u(e.useState(),2),E=I[0],C=I[1],N="visible"in t?x:E,T=e.useRef(null);e.useImperativeHandle(n,(function(){return T.current})),function(t){var n=t.visible,r=t.setTriggerVisible,a=t.triggerRef,i=t.onVisibleChange,o=t.autoFocus,s=e.useRef(!1),u=function(){var e,t,o,s;n&&a.current&&(null===(e=a.current)||void 0===e||null===(t=e.triggerRef)||void 0===t||null===(o=t.current)||void 0===o||null===(s=o.focus)||void 0===s||s.call(o),r(!1),"function"===typeof i&&i(!1))},c=function(){var e,t,n,r,i=rSe(null===(e=a.current)||void 0===e||null===(t=e.popupRef)||void 0===t||null===(n=t.current)||void 0===n||null===(r=n.getElement)||void 0===r?void 0:r.call(n))[0];return!!(null===i||void 0===i?void 0:i.focus)&&(i.focus(),s.current=!0,!0)},l=function(e){switch(e.keyCode){case PSe:u();break;case DSe:var t=!1;s.current||(t=c()),t?e.preventDefault():u()}};e.useEffect((function(){return n?(window.addEventListener("keydown",l),o&&on(c,3),function(){window.removeEventListener("keydown",l),s.current=!1}):function(){s.current=!1}}),[n])}({visible:N,setTriggerVisible:C,triggerRef:T,onVisibleChange:t.onVisibleChange,autoFocus:w});var _=function(){var n=function(){var e=t.overlay;return"function"===typeof e?e():e}();return e.createElement(e.Fragment,null,a&&e.createElement("div",{className:"".concat(o,"-arrow")}),n)},R=g;return R||-1===k.indexOf("contextMenu")||(R=["click"]),e.createElement(Hwe,Ze(Ze({builtinPlacements:h},S),{},{prefixCls:o,ref:T,popupClassName:St()(y,qe({},"".concat(o,"-show-arrow"),a)),popupStyle:b,action:k,showAction:v,hideAction:R||[],popupPlacement:f,popupAlign:l,popupTransitionName:s,popupAnimation:c,popupVisible:N,stretch:function(){var e=t.minOverlayWidthMatchTrigger,n=t.alignPoint;return"minOverlayWidthMatchTrigger"in t?e:!n}()?"minWidth":"",popup:"function"===typeof t.overlay?_:_(),onPopupVisibleChange:function(e){var n=t.onVisibleChange;C(e),"function"===typeof n&&n(e)},onPopupClick:function(e){var n=t.onOverlayClick;C(!1),n&&n(e)},getPopupContainer:m}),function(){var n=t.children,r=n.props?n.props:{},a=St()(r.className,function(){var e=t.openClassName;return void 0!==e?e:"".concat(o,"-open")}());return N&&n?e.cloneElement(n,{className:a}):n}())}var BSe=e.forwardRef(zSe);function WSe(t,n){var r=t.prefixCls,a=t.editable,i=t.locale,o=t.style;return a&&!1!==a.showAdd?e.createElement("button",{ref:n,type:"button",className:"".concat(r,"-nav-add"),style:o,"aria-label":(null===i||void 0===i?void 0:i.addAriaLabel)||"Add tab",onClick:function(e){a.onEdit("add",{event:e})}},a.addIcon||"+"):null}var jSe=e.forwardRef(WSe);function VSe(t,n){var r=t.prefixCls,a=t.id,i=t.tabs,o=t.locale,s=t.mobile,c=t.moreIcon,l=void 0===c?"More":c,d=t.moreTransitionName,f=t.style,p=t.className,h=t.editable,m=t.tabBarGutter,v=t.rtl,g=t.removeAriaLabel,y=t.onTabClick,b=t.popupClassName,x=u((0,e.useState)(!1),2),A=x[0],k=x[1],w=u((0,e.useState)(null),2),S=w[0],I=w[1],E="".concat(a,"-more-popup"),C="".concat(r,"-dropdown"),N=null!==S?"".concat(E,"-").concat(S):null,T=null===o||void 0===o?void 0:o.dropdownAriaLabel;var _=e.createElement(RSe,{onClick:function(e){var t=e.key,n=e.domEvent;y(t,n),k(!1)},prefixCls:"".concat(C,"-menu"),id:E,tabIndex:-1,role:"listbox","aria-activedescendant":N,selectedKeys:[S],"aria-label":void 0!==T?T:"expanded dropdown"},i.map((function(t){var n=h&&!1!==t.closable&&!t.disabled;return e.createElement(ake,{key:t.key,id:"".concat(E,"-").concat(t.key),role:"option","aria-controls":a&&"".concat(a,"-panel-").concat(t.key),disabled:t.disabled},e.createElement("span",null,t.tab),n&&e.createElement("button",{type:"button","aria-label":g||"remove",tabIndex:0,className:"".concat(C,"-menu-item-remove"),onClick:function(e){e.stopPropagation(),function(e,t){e.preventDefault(),e.stopPropagation(),h.onEdit("remove",{key:t,event:e})}(e,t.key)}},t.closeIcon||h.removeIcon||"\xd7"))})));function R(e){for(var t=i.filter((function(e){return!e.disabled})),n=t.findIndex((function(e){return e.key===S}))||0,r=t.length,a=0;a<r;a+=1){var o=t[n=(n+e+r)%r];if(!o.disabled)return void I(o.key)}}(0,e.useEffect)((function(){var e=document.getElementById(N);e&&e.scrollIntoView&&e.scrollIntoView(!1)}),[S]),(0,e.useEffect)((function(){A||I(null)}),[A]);var M=qe({},v?"marginRight":"marginLeft",m);i.length||(M.visibility="hidden",M.order=1);var O=St()(qe({},"".concat(C,"-rtl"),v)),F=s?null:e.createElement(BSe,{prefixCls:C,overlay:_,trigger:["hover"],visible:A,transitionName:d,onVisibleChange:k,overlayClassName:St()(O,b),mouseEnterDelay:.1,mouseLeaveDelay:.1},e.createElement("button",{type:"button",className:"".concat(r,"-nav-more"),style:M,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":E,id:"".concat(a,"-more"),"aria-expanded":A,onKeyDown:function(e){var t=e.which;if(A)switch(t){case uAe.UP:R(-1),e.preventDefault();break;case uAe.DOWN:R(1),e.preventDefault();break;case uAe.ESC:k(!1);break;case uAe.SPACE:case uAe.ENTER:null!==S&&y(S,e)}else[uAe.DOWN,uAe.SPACE,uAe.ENTER].includes(t)&&(k(!0),e.preventDefault())}},l));return e.createElement("div",{className:St()("".concat(r,"-nav-operations"),p),style:f,ref:n},F,e.createElement(jSe,{prefixCls:r,locale:o,editable:h}))}var USe=e.memo(e.forwardRef(VSe),(function(e,t){return t.tabMoving})),HSe=(0,e.createContext)(null),GSe=Math.pow(.995,20);function qSe(t,n){var r=e.useRef(t),a=u(e.useState({}),2)[1];return[r.current,function(e){var t="function"===typeof e?e(r.current):e;t!==r.current&&n(t,r.current),r.current=t,a({})}]}var KSe=function(t){var n,r=t.position,a=t.prefixCls,i=t.extra;if(!i)return null;var o={};return i&&"object"===rt(i)&&!e.isValidElement(i)?o=i:o.right=i,"right"===r&&(n=o.right),"left"===r&&(n=o.left),n?e.createElement("div",{className:"".concat(a,"-extra-content")},n):null};function XSe(t,n){var r,a=e.useContext(HSe),i=a.prefixCls,o=a.tabs,s=t.className,c=t.style,l=t.id,d=t.animated,f=t.activeKey,p=t.rtl,h=t.extra,m=t.editable,v=t.locale,g=t.tabPosition,y=t.tabBarGutter,b=t.children,x=t.onTabClick,A=t.onTabScroll,k=(0,e.useRef)(),w=(0,e.useRef)(),S=(0,e.useRef)(),I=(0,e.useRef)(),E=function(){var t=(0,e.useRef)(new Map);return[function(n){return t.current.has(n)||t.current.set(n,e.createRef()),t.current.get(n)},function(e){t.current.delete(e)}]}(),C=u(E,2),N=C[0],T=C[1],_="top"===g||"bottom"===g,R=qSe(0,(function(e,t){_&&A&&A({direction:e>t?"left":"right"})})),M=u(R,2),O=M[0],F=M[1],P=qSe(0,(function(e,t){!_&&A&&A({direction:e>t?"top":"bottom"})})),D=u(P,2),L=D[0],z=D[1],B=u((0,e.useState)(0),2),W=B[0],j=B[1],V=u((0,e.useState)(0),2),U=V[0],H=V[1],G=u((0,e.useState)(null),2),q=G[0],K=G[1],X=u((0,e.useState)(null),2),Z=X[0],Y=X[1],J=u((0,e.useState)(0),2),Q=J[0],$=J[1],ee=u((0,e.useState)(0),2),te=ee[0],ne=ee[1],re=function(t){var n=(0,e.useRef)([]),r=u((0,e.useState)({}),2)[1],a=(0,e.useRef)("function"===typeof t?t():t),i=oAe((function(){var e=a.current;n.current.forEach((function(t){e=t(e)})),n.current=[],a.current=e,r({})}));return[a.current,function(e){n.current.push(e),i()}]}(new Map),ae=u(re,2),ie=ae[0],oe=ae[1],se=function(t,n,r){return(0,e.useMemo)((function(){for(var e,r=new Map,a=n.get(null===(e=t[0])||void 0===e?void 0:e.key)||dAe,i=a.left+a.width,o=0;o<t.length;o+=1){var s,u=t[o].key,c=n.get(u);c||(c=n.get(null===(s=t[o-1])||void 0===s?void 0:s.key)||dAe);var l=r.get(u)||Ze({},c);l.right=i-l.left-l.width,r.set(u,l)}return r}),[t.map((function(e){return e.key})).join("_"),n,r])}(o,ie,W),ue="".concat(i,"-nav-operations-hidden"),ce=0,le=0;function de(e){return e<ce?ce:e>le?le:e}_?p?(ce=0,le=Math.max(0,W-q)):(ce=Math.min(0,q-W),le=0):(ce=Math.min(0,Z-U),le=0);var fe=(0,e.useRef)(),pe=u((0,e.useState)(),2),he=pe[0],me=pe[1];function ve(){me(Date.now())}function ge(){window.clearTimeout(fe.current)}function ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=se.get(e)||{width:0,height:0,left:0,right:0,top:0};if(_){var n=O;p?t.right<O?n=t.right:t.right+t.width>O+q&&(n=t.right+t.width-q):t.left<-O?n=-t.left:t.left+t.width>-O+q&&(n=-(t.left+t.width-q)),z(0),F(de(n))}else{var r=L;t.top<-L?r=-t.top:t.top+t.height>-L+Z&&(r=-(t.top+t.height-Z)),F(0),z(de(r))}}!function(t,n){var r=u((0,e.useState)(),2),a=r[0],i=r[1],o=u((0,e.useState)(0),2),s=o[0],c=o[1],l=u((0,e.useState)(0),2),d=l[0],f=l[1],p=u((0,e.useState)(),2),h=p[0],m=p[1],v=(0,e.useRef)(),g=(0,e.useRef)(),y=(0,e.useRef)(null);y.current={onTouchStart:function(e){var t=e.touches[0],n=t.screenX,r=t.screenY;i({x:n,y:r}),window.clearInterval(v.current)},onTouchMove:function(e){if(a){e.preventDefault();var t=e.touches[0],r=t.screenX,o=t.screenY;i({x:r,y:o});var u=r-a.x,l=o-a.y;n(u,l);var d=Date.now();c(d),f(d-s),m({x:u,y:l})}},onTouchEnd:function(){if(a&&(i(null),m(null),h)){var e=h.x/d,t=h.y/d,r=Math.abs(e),o=Math.abs(t);if(Math.max(r,o)<.1)return;var s=e,u=t;v.current=window.setInterval((function(){Math.abs(s)<.01&&Math.abs(u)<.01?window.clearInterval(v.current):n(20*(s*=GSe),20*(u*=GSe))}),20)}},onWheel:function(e){var t=e.deltaX,r=e.deltaY,a=0,i=Math.abs(t),o=Math.abs(r);i===o?a="x"===g.current?t:r:i>o?(a=t,g.current="x"):(a=r,g.current="y"),n(-a,-a)&&e.preventDefault()}},e.useEffect((function(){function e(e){y.current.onTouchMove(e)}function n(e){y.current.onTouchEnd(e)}return document.addEventListener("touchmove",e,{passive:!1}),document.addEventListener("touchend",n,{passive:!1}),t.current.addEventListener("touchstart",(function(e){y.current.onTouchStart(e)}),{passive:!1}),t.current.addEventListener("wheel",(function(e){y.current.onWheel(e)})),function(){document.removeEventListener("touchmove",e),document.removeEventListener("touchend",n)}}),[])}(k,(function(e,t){function n(e,t){e((function(e){return de(e+t)}))}if(_){if(q>=W)return!1;n(F,e)}else{if(Z>=U)return!1;n(z,t)}return ge(),ve(),!0})),(0,e.useEffect)((function(){return ge(),he&&(fe.current=window.setTimeout((function(){me(0)}),100)),ge}),[he]);var be=function(t,n,r,a,i){var o,s,u,c=i.tabs,l=i.tabPosition,d=i.rtl;["top","bottom"].includes(l)?(o="width",s=d?"right":"left",u=Math.abs(n.left)):(o="height",s="top",u=-n.top);var f=n[o],p=r[o],h=a[o],m=f;return p+h>f&&p<f&&(m=f-h),(0,e.useMemo)((function(){if(!c.length)return[0,0];for(var e=c.length,n=e,r=0;r<e;r+=1){var a=t.get(c[r].key)||fAe;if(a[s]+a[o]>u+m){n=r-1;break}}for(var i=0,l=e-1;l>=0;l-=1)if((t.get(c[l].key)||fAe)[s]<u){i=l+1;break}return[i,n]}),[t,u,m,l,c.map((function(e){return e.key})).join("_"),d])}(se,{width:q,height:Z,left:O,top:L},{width:W,height:U},{width:Q,height:te},Ze(Ze({},t),{},{tabs:o})),xe=u(be,2),Ae=xe[0],ke=xe[1],we={};"top"===g||"bottom"===g?we[p?"marginRight":"marginLeft"]=y:we.marginTop=y;var Se=o.map((function(t,n){var r=t.key;return e.createElement(lAe,{id:l,prefixCls:i,key:r,tab:t,style:0===n?void 0:we,closable:t.closable,editable:m,active:r===f,renderWrapper:b,removeAriaLabel:null===v||void 0===v?void 0:v.removeAriaLabel,ref:N(r),onClick:function(e){x(r,e)},onRemove:function(){T(r)},onFocus:function(){ye(r),ve(),k.current&&(p||(k.current.scrollLeft=0),k.current.scrollTop=0)}})})),Ie=oAe((function(){var e,t,n,r,a,i,s=(null===(e=k.current)||void 0===e?void 0:e.offsetWidth)||0,u=(null===(t=k.current)||void 0===t?void 0:t.offsetHeight)||0,c=(null===(n=I.current)||void 0===n?void 0:n.offsetWidth)||0,l=(null===(r=I.current)||void 0===r?void 0:r.offsetHeight)||0;K(s),Y(u),$(c),ne(l);var d=((null===(a=w.current)||void 0===a?void 0:a.offsetWidth)||0)-c,f=((null===(i=w.current)||void 0===i?void 0:i.offsetHeight)||0)-l;j(d),H(f),oe((function(){var e=new Map;return o.forEach((function(t){var n=t.key,r=N(n).current;r&&e.set(n,{width:r.offsetWidth,height:r.offsetHeight,left:r.offsetLeft,top:r.offsetTop})})),e}))})),Ee=o.slice(0,Ae),Ce=o.slice(ke+1),Ne=[].concat(Tn(Ee),Tn(Ce)),Te=u((0,e.useState)(),2),_e=Te[0],Re=Te[1],Me=se.get(f),Oe=(0,e.useRef)();function Fe(){on.cancel(Oe.current)}(0,e.useEffect)((function(){var e={};return Me&&(_?(p?e.right=Me.right:e.left=Me.left,e.width=Me.width):(e.top=Me.top,e.height=Me.height)),Fe(),Oe.current=on((function(){Re(e)})),Fe}),[Me,_,p]),(0,e.useEffect)((function(){ye()}),[f,Me,se,_]),(0,e.useEffect)((function(){Ie()}),[p,y,f,o.map((function(e){return e.key})).join("_")]);var Pe,De,Le,ze,Be=!!Ne.length,We="".concat(i,"-nav-wrap");return _?p?(De=O>0,Pe=O+q<W):(Pe=O<0,De=-O+q<W):(Le=L<0,ze=-L+Z<U),e.createElement("div",{ref:n,role:"tablist",className:St()("".concat(i,"-nav"),s),style:c,onKeyDown:function(){ve()}},e.createElement(KSe,{position:"left",extra:h,prefixCls:i}),e.createElement(iAe,{onResize:Ie},e.createElement("div",{className:St()(We,(r={},qe(r,"".concat(We,"-ping-left"),Pe),qe(r,"".concat(We,"-ping-right"),De),qe(r,"".concat(We,"-ping-top"),Le),qe(r,"".concat(We,"-ping-bottom"),ze),r)),ref:k},e.createElement(iAe,{onResize:Ie},e.createElement("div",{ref:w,className:"".concat(i,"-nav-list"),style:{transform:"translate(".concat(O,"px, ").concat(L,"px)"),transition:he?"none":void 0}},Se,e.createElement(jSe,{ref:I,prefixCls:i,locale:v,editable:m,style:Ze(Ze({},0===Se.length?void 0:we),{},{visibility:Be?"hidden":null})}),e.createElement("div",{className:St()("".concat(i,"-ink-bar"),qe({},"".concat(i,"-ink-bar-animated"),d.inkBar)),style:_e}))))),e.createElement(USe,Ge({},t,{removeAriaLabel:null===v||void 0===v?void 0:v.removeAriaLabel,ref:S,prefixCls:i,tabs:Ne,className:!Be&&ue,tabMoving:!!he})),e.createElement(KSe,{position:"right",extra:h,prefixCls:i}))}var ZSe=e.forwardRef(XSe);function YSe(t){var n=t.id,r=t.activeKey,a=t.animated,i=t.tabPosition,o=t.rtl,s=t.destroyInactiveTabPane,u=e.useContext(HSe),c=u.prefixCls,l=u.tabs,d=a.tabPane,f=l.findIndex((function(e){return e.key===r}));return e.createElement("div",{className:St()("".concat(c,"-content-holder"))},e.createElement("div",{className:St()("".concat(c,"-content"),"".concat(c,"-content-").concat(i),qe({},"".concat(c,"-content-animated"),d)),style:f&&d?qe({},o?"marginRight":"marginLeft","-".concat(f,"00%")):null},l.map((function(t){return e.cloneElement(t.node,{key:t.key,prefixCls:c,tabKey:t.key,id:n,animated:d,active:t.key===r,destroyInactiveTabPane:s})}))))}function JSe(t){var n=t.prefixCls,r=t.forceRender,a=t.className,i=t.style,o=t.id,s=t.active,c=t.animated,l=t.destroyInactiveTabPane,d=t.tabKey,f=t.children,p=u(e.useState(r),2),h=p[0],m=p[1];e.useEffect((function(){s?m(!0):l&&m(!1)}),[s,l]);var v={};return s||(c?(v.visibility="hidden",v.height=0,v.overflowY="hidden"):v.display="none"),e.createElement("div",{id:o&&"".concat(o,"-panel-").concat(d),role:"tabpanel",tabIndex:s?0:-1,"aria-labelledby":o&&"".concat(o,"-tab-").concat(d),"aria-hidden":!s,style:Ze(Ze({},v),i),className:St()("".concat(n,"-tabpane"),s&&"".concat(n,"-tabpane-active"),a)},(s||h||r)&&f)}var QSe=["id","prefixCls","className","children","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","popupClassName"],$Se=0;function eIe(t,n){var r,a,i=t.id,o=t.prefixCls,s=void 0===o?"rc-tabs":o,c=t.className,l=t.children,d=t.direction,f=t.activeKey,p=t.defaultActiveKey,h=t.editable,m=t.animated,v=void 0===m?{inkBar:!0,tabPane:!1}:m,g=t.tabPosition,y=void 0===g?"top":g,b=t.tabBarGutter,x=t.tabBarStyle,A=t.tabBarExtraContent,k=t.locale,w=t.moreIcon,S=t.moreTransitionName,I=t.destroyInactiveTabPane,E=t.renderTabBar,C=t.onChange,N=t.onTabClick,T=t.onTabScroll,_=t.popupClassName,R=Ke(t,QSe),M=function(t){return Cr(t).map((function(t){return e.isValidElement(t)?Ze(Ze({key:void 0!==t.key?String(t.key):void 0},t.props),{},{node:t}):null})).filter((function(e){return e}))}(l),O="rtl"===d;a=!1===v?{inkBar:!1,tabPane:!1}:!0===v?{inkBar:!0,tabPane:!0}:Ze({inkBar:!0,tabPane:!1},"object"===rt(v)?v:{});var F=u((0,e.useState)(!1),2),P=F[0],D=F[1];(0,e.useEffect)((function(){D(Txe())}),[]);var L=u(_xe((function(){var e;return null===(e=M[0])||void 0===e?void 0:e.key}),{value:f,defaultValue:p}),2),z=L[0],B=L[1],W=u((0,e.useState)((function(){return M.findIndex((function(e){return e.key===z}))})),2),j=W[0],V=W[1];(0,e.useEffect)((function(){var e,t=M.findIndex((function(e){return e.key===z}));-1===t&&(t=Math.max(0,Math.min(j,M.length-1)),B(null===(e=M[t])||void 0===e?void 0:e.key));V(t)}),[M.map((function(e){return e.key})).join("_"),z,j]);var U=u(_xe(null,{value:i}),2),H=U[0],G=U[1],q=y;P&&!["left","right"].includes(y)&&(q="top"),(0,e.useEffect)((function(){i||(G("rc-tabs-".concat($Se)),$Se+=1)}),[]);var K,X={id:H,activeKey:z,animated:a,tabPosition:q,rtl:O,mobile:P},Z=Ze(Ze({},X),{},{editable:h,locale:k,moreIcon:w,moreTransitionName:S,tabBarGutter:b,onTabClick:function(e,t){null===N||void 0===N||N(e,t);var n=e!==z;B(e),n&&(null===C||void 0===C||C(e))},onTabScroll:T,extra:A,style:x,panes:l,popupClassName:_});return K=E?E(Z,ZSe):e.createElement(ZSe,Z),e.createElement(HSe.Provider,{value:{tabs:M,prefixCls:s}},e.createElement("div",Ge({ref:n,id:i,className:St()(s,"".concat(s,"-").concat(q),(r={},qe(r,"".concat(s,"-mobile"),P),qe(r,"".concat(s,"-editable"),h),qe(r,"".concat(s,"-rtl"),O),r),c)},R),K,e.createElement(YSe,Ge({destroyInactiveTabPane:I},X,{animated:a}))))}var tIe=e.forwardRef(eIe);tIe.TabPane=JSe;var nIe=tIe,rIe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},aIe=function(t,n){return e.createElement(lr,Ze(Ze({},t),{},{ref:n,icon:rIe}))};aIe.displayName="EllipsisOutlined";var iIe=e.forwardRef(aIe),oIe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},sIe=function(t,n){return e.createElement(lr,Ze(Ze({},t),{},{ref:n,icon:oIe}))};sIe.displayName="PlusOutlined";var uIe=e.forwardRef(sIe),cIe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function lIe(t){var n,r=t.type,a=t.className,i=t.size,o=t.onEdit,s=t.hideAdd,u=t.centered,c=t.addIcon,l=cIe(t,["type","className","size","onEdit","hideAdd","centered","addIcon"]),d=l.prefixCls,f=l.moreIcon,p=void 0===f?e.createElement(iIe,null):f,h=e.useContext(Ir),m=h.getPrefixCls,v=h.direction,g=m("tabs",d);"editable-card"===r&&(n={onEdit:function(e,t){var n=t.key,r=t.event;null===o||void 0===o||o("add"===e?r:n,e)},removeIcon:e.createElement(fr,null),addIcon:c||e.createElement(uIe,null),showAdd:!0!==s});var y=m();return e.createElement(eo.Consumer,null,(function(t){var o,s=void 0!==i?i:t;return e.createElement(nIe,Ge({direction:v,moreTransitionName:"".concat(y,"-slide-up")},l,{className:St()((o={},qe(o,"".concat(g,"-").concat(s),s),qe(o,"".concat(g,"-card"),["card","editable-card"].includes(r)),qe(o,"".concat(g,"-editable-card"),"editable-card"===r),qe(o,"".concat(g,"-centered"),u),o),a),editable:n,moreIcon:p,prefixCls:g}))}))}lIe.TabPane=JSe;var dIe=lIe,fIe=function(t){var n=t.prefixCls,r=t.className,a=t.width,i=t.style;return e.createElement("h3",{className:St()(n,r),style:Ge({width:a},i)})},pIe=function(t){var n=function(e){var n=t.width,r=t.rows,a=void 0===r?2:r;return Array.isArray(n)?n[e]:a-1===e?n:void 0},r=t.prefixCls,a=t.className,i=t.style,o=t.rows,s=Tn(Array(o)).map((function(t,r){return e.createElement("li",{key:r,style:{width:n(r)}})}));return e.createElement("ul",{className:St()(r,a),style:i},s)},hIe=function(t){var n,r,a=t.prefixCls,i=t.className,o=t.style,s=t.size,u=t.shape,c=St()((qe(n={},"".concat(a,"-lg"),"large"===s),qe(n,"".concat(a,"-sm"),"small"===s),n)),l=St()((qe(r={},"".concat(a,"-circle"),"circle"===u),qe(r,"".concat(a,"-square"),"square"===u),qe(r,"".concat(a,"-round"),"round"===u),r)),d="number"===typeof s?{width:s,height:s,lineHeight:"".concat(s,"px")}:{};return e.createElement("span",{className:St()(a,c,l,i),style:Ge(Ge({},d),o)})},mIe=function(t){var n=t.prefixCls,r=t.className,a=t.active,i=(0,e.useContext(Ir).getPrefixCls)("skeleton",n),o=Nxe(t,["prefixCls","className"]),s=St()(i,"".concat(i,"-element"),qe({},"".concat(i,"-active"),a),r);return e.createElement("div",{className:s},e.createElement(hIe,Ge({prefixCls:"".concat(i,"-avatar")},o)))};mIe.defaultProps={size:"default",shape:"circle"};var vIe=mIe,gIe=function(t){var n,r=t.prefixCls,a=t.className,i=t.active,o=t.block,s=void 0!==o&&o,u=(0,e.useContext(Ir).getPrefixCls)("skeleton",r),c=Nxe(t,["prefixCls"]),l=St()(u,"".concat(u,"-element"),(qe(n={},"".concat(u,"-active"),i),qe(n,"".concat(u,"-block"),s),n),a);return e.createElement("div",{className:l},e.createElement(hIe,Ge({prefixCls:"".concat(u,"-button")},c)))};gIe.defaultProps={size:"default"};var yIe=gIe,bIe=function(t){var n,r=t.prefixCls,a=t.className,i=t.active,o=t.block,s=(0,e.useContext(Ir).getPrefixCls)("skeleton",r),u=Nxe(t,["prefixCls"]),c=St()(s,"".concat(s,"-element"),(qe(n={},"".concat(s,"-active"),i),qe(n,"".concat(s,"-block"),o),n),a);return e.createElement("div",{className:c},e.createElement(hIe,Ge({prefixCls:"".concat(s,"-input")},u)))};bIe.defaultProps={size:"default"};var xIe=bIe,AIe=function(t){var n=t.prefixCls,r=t.className,a=t.style,i=(0,e.useContext(Ir).getPrefixCls)("skeleton",n),o=St()(i,"".concat(i,"-element"),r);return e.createElement("div",{className:o},e.createElement("div",{className:St()("".concat(i,"-image"),r),style:a},e.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:"".concat(i,"-image-svg")},e.createElement("path",{d:"M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",className:"".concat(i,"-image-path")}))))};function kIe(e){return e&&"object"===rt(e)?e:{}}var wIe=function(t){var n=t.prefixCls,r=t.loading,a=t.className,i=t.style,o=t.children,s=t.avatar,u=t.title,c=t.paragraph,l=t.active,d=t.round,f=e.useContext(Ir),p=f.getPrefixCls,h=f.direction,m=p("skeleton",n);if(r||!("loading"in t)){var v,g,y,b=!!s,x=!!u,A=!!c;if(b){var k=Ge(Ge({prefixCls:"".concat(m,"-avatar")},function(e,t){return e&&!t?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}(x,A)),kIe(s));g=e.createElement("div",{className:"".concat(m,"-header")},e.createElement(hIe,Ge({},k)))}if(x||A){var w,S;if(x){var I=Ge(Ge({prefixCls:"".concat(m,"-title")},function(e,t){return!e&&t?{width:"38%"}:e&&t?{width:"50%"}:{}}(b,A)),kIe(u));w=e.createElement(fIe,Ge({},I))}if(A){var E=Ge(Ge({prefixCls:"".concat(m,"-paragraph")},function(e,t){var n={};return e&&t||(n.width="61%"),n.rows=!e&&t?3:2,n}(b,x)),kIe(c));S=e.createElement(pIe,Ge({},E))}y=e.createElement("div",{className:"".concat(m,"-content")},w,S)}var C=St()(m,(qe(v={},"".concat(m,"-with-avatar"),b),qe(v,"".concat(m,"-active"),l),qe(v,"".concat(m,"-rtl"),"rtl"===h),qe(v,"".concat(m,"-round"),d),v),a);return e.createElement("div",{className:C,style:i},g,y)}return"undefined"!==typeof o?o:null};wIe.defaultProps={avatar:!1,title:!0,paragraph:!0},wIe.Button=yIe,wIe.Avatar=vIe,wIe.Input=xIe,wIe.Image=AIe;var SIe=wIe,IIe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};var EIe=e.forwardRef((function(t,n){var r,a,i,o=e.useContext(Ir),s=o.getPrefixCls,u=o.direction,c=e.useContext(eo),l=t.prefixCls,d=t.className,f=t.extra,p=t.headStyle,h=void 0===p?{}:p,m=t.bodyStyle,v=void 0===m?{}:m,g=t.title,y=t.loading,b=t.bordered,x=void 0===b||b,A=t.size,k=t.type,w=t.cover,S=t.actions,I=t.tabList,E=t.children,C=t.activeTabKey,N=t.defaultActiveTabKey,T=t.tabBarExtraContent,_=t.hoverable,R=t.tabProps,M=void 0===R?{}:R,O=IIe(t,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),F=s("card",l),P=e.createElement(SIe,{loading:!0,active:!0,paragraph:{rows:4},title:!1},E),D=void 0!==C,L=Ge(Ge({},M),(qe(r={},D?"activeKey":"defaultActiveKey",D?C:N),qe(r,"tabBarExtraContent",T),r)),z=I&&I.length?e.createElement(dIe,Ge({size:"large"},L,{className:"".concat(F,"-head-tabs"),onChange:function(e){var n;null===(n=t.onTabChange)||void 0===n||n.call(t,e)}}),I.map((function(t){return e.createElement(dIe.TabPane,{tab:t.tab,disabled:t.disabled,key:t.key})}))):null;(g||f||z)&&(i=e.createElement("div",{className:"".concat(F,"-head"),style:h},e.createElement("div",{className:"".concat(F,"-head-wrapper")},g&&e.createElement("div",{className:"".concat(F,"-head-title")},g),f&&e.createElement("div",{className:"".concat(F,"-extra")},f)),z));var B=w?e.createElement("div",{className:"".concat(F,"-cover")},w):null,W=e.createElement("div",{className:"".concat(F,"-body"),style:v},y?P:E),j=S&&S.length?e.createElement("ul",{className:"".concat(F,"-actions")},function(t){var n=t.map((function(n,r){return e.createElement("li",{style:{width:"".concat(100/t.length,"%")},key:"action-".concat(r)},e.createElement("span",null,n))}));return n}(S)):null,V=Nxe(O,["onTabChange"]),U=A||c,H=St()(F,(qe(a={},"".concat(F,"-loading"),y),qe(a,"".concat(F,"-bordered"),x),qe(a,"".concat(F,"-hoverable"),_),qe(a,"".concat(F,"-contain-grid"),function(){var n;return e.Children.forEach(t.children,(function(e){e&&e.type&&e.type===Ixe&&(n=!0)})),n}()),qe(a,"".concat(F,"-contain-tabs"),I&&I.length),qe(a,"".concat(F,"-").concat(U),U),qe(a,"".concat(F,"-type-").concat(k),!!k),qe(a,"".concat(F,"-rtl"),"rtl"===u),a),d);return e.createElement("div",Ge({ref:n},V,{className:H}),i,B,W,j)})),CIe=EIe;CIe.Grid=Ixe,CIe.Meta=Cxe;var NIe=CIe,TIe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},_Ie=function(t){var n,r,a=t.prefixCls,i=t.className,o=t.color,s=void 0===o?"blue":o,u=t.dot,c=t.pending,l=void 0!==c&&c,d=(t.position,t.label),f=t.children,p=TIe(t,["prefixCls","className","color","dot","pending","position","label","children"]),h=(0,e.useContext(Ir).getPrefixCls)("timeline",a),m=St()((qe(n={},"".concat(h,"-item"),!0),qe(n,"".concat(h,"-item-pending"),l),n),i),v=St()((qe(r={},"".concat(h,"-item-head"),!0),qe(r,"".concat(h,"-item-head-custom"),!!u),qe(r,"".concat(h,"-item-head-").concat(s),!0),r)),g=/blue|red|green|gray/.test(s||"")?void 0:s;return e.createElement("li",Ge({},p,{className:m}),d&&e.createElement("div",{className:"".concat(h,"-item-label")},d),e.createElement("div",{className:"".concat(h,"-item-tail")}),e.createElement("div",{className:v,style:{borderColor:g,color:g}},u),e.createElement("div",{className:"".concat(h,"-item-content")},f))},RIe=e.isValidElement;function MIe(t,n){return function(t,n,r){return RIe(t)?e.cloneElement(t,"function"===typeof r?r(t.props||{}):r):n}(t,t,n)}var OIe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},FIe=function(t){var n,r=e.useContext(Ir),a=r.getPrefixCls,i=r.direction,o=t.prefixCls,s=t.pending,u=void 0===s?null:s,c=t.pendingDot,l=t.children,d=t.className,f=t.reverse,p=void 0!==f&&f,h=t.mode,m=void 0===h?"":h,v=OIe(t,["prefixCls","pending","pendingDot","children","className","reverse","mode"]),g=a("timeline",o),y="boolean"===typeof u?null:u,b=u?e.createElement(_Ie,{pending:!!u,dot:c||e.createElement(di,null)},y):null,x=e.Children.toArray(l);x.push(b),p&&x.reverse();var A=function(e,t){return"alternate"===m?"right"===e.props.position?"".concat(g,"-item-right"):"left"===e.props.position?"".concat(g,"-item-left"):"".concat(g,t%2===0?"-item-left":"-item-right"):"left"===m?"".concat(g,"-item-left"):"right"===m||"right"===e.props.position?"".concat(g,"-item-right"):""},k=x.filter((function(e){return!!e})),w=e.Children.count(k),S="".concat(g,"-item-last"),I=e.Children.map(k,(function(e,t){var n=t===w-2?S:"",r=t===w-1?S:"";return MIe(e,{className:St()([e.props.className,!p&&u?n:r,A(e,t)])})})),E=x.some((function(e){var t;return!!(null===(t=null===e||void 0===e?void 0:e.props)||void 0===t?void 0:t.label)})),C=St()(g,(qe(n={},"".concat(g,"-pending"),!!u),qe(n,"".concat(g,"-reverse"),!!p),qe(n,"".concat(g,"-").concat(m),!!m&&!E),qe(n,"".concat(g,"-label"),E),qe(n,"".concat(g,"-rtl"),"rtl"===i),n),d);return e.createElement("ul",Ge({},v,{className:C}),I)};FIe.Item=_Ie;var PIe=FIe,DIe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},LIe=function(t,n){return e.createElement(lr,Ze(Ze({},t),{},{ref:n,icon:DIe}))};LIe.displayName="ClockCircleOutlined";var zIe=e.forwardRef(LIe),BIe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 533h-48.1c-4.2 0-7.8 3.2-8.1 7.4C604 589.9 562.5 629 512 629s-92.1-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4z"}}]},name:"smile",theme:"outlined"},WIe=function(t,n){return e.createElement(lr,Ze(Ze({},t),{},{ref:n,icon:BIe}))};WIe.displayName="SmileOutlined";var jIe,VIe,UIe,HIe,GIe,qIe=e.forwardRef(WIe);function KIe(e){var t=Math.floor(e);if(t<60)return"".concat(t,"s");if(t<3600){var n=Math.floor(t/60);return"".concat(n,"m")}var r=Math.floor(t/60),a=r%60,i=Math.floor(r/60);return"".concat(i,"h ").concat(a,"m")}function XIe(e){var t=e.record,n=e.index;return(0,gxe.jsx)(gxe.Fragment,{children:(0,gxe.jsx)(NIe,{title:"Pomodoro #".concat(n),children:(0,gxe.jsxs)("div",{className:Oe(jIe||(jIe=r(["\n        display: flex;\n        justify-content: space-around;\n        align-item: center;\n      "]))),children:[(0,gxe.jsx)("span",{className:Oe(VIe||(VIe=r(["\n        border-radius: 50%;\n        background: #b0003a;\n        width: 3em;\n        height: 3em;\n        text-align: center;\n        vertical-align: middle;\n        display: inline-block;\n        line-height: 3em;\n        font-size: 1.5em;\n        color: white;\n        font-weight: bold;\n      "]))),children:KIe(t.timePeriod)}),(0,gxe.jsx)("div",{className:Oe(UIe||(UIe=r(["\n            display: flex;\n            align-item: center;\n            justify-content: space-around;\n            flex-direction: column;\n          "]))),children:(0,gxe.jsxs)("p",{className:Oe(HIe||(HIe=r(["\n            font-size: 1.5em;\n            font-weight: bold;\n            margin: 0;\n          "]))),children:["From ",new Date(t.startTime).toLocaleTimeString()]})})]})})})}var ZIe,YIe,JIe=function(t){var n=t.mergedTimeTable,a=(0,e.useContext)(_le),i=n.filter((function(e){return!a.history.onlyShowToday||new Date(e.startTime).toDateString()===(new Date).toDateString()}));return(0,gxe.jsxs)("div",{children:[(0,gxe.jsx)("div",{className:Oe(GIe||(GIe=r(["\n          display: flex;\n          justify-content: space-between;\n          margin: 5px auto;\n          flex-wrap: wrap;\n        "]))),children:(0,gxe.jsx)("h3",{children:"Pomodoro History"})}),(0,gxe.jsx)(PIe,{mode:"left",children:i.map((function(e,t,n){return e.detected?(0,gxe.jsx)(PIe.Item,{dot:(0,gxe.jsx)(zIe,{}),children:(0,gxe.jsx)(XIe,{record:e,index:t+1})},t):(0,gxe.jsx)(PIe.Item,{color:"green",dot:(0,gxe.jsx)(qIe,{}),children:(0,gxe.jsxs)("p",{children:[" Rest for ",KIe(e.timePeriod)," "]})},t)})).reverse()})]})};var QIe=function(){var t=(0,e.useContext)(_le),n=t.alertStudySeconds,a=t.alertRestSeconds,i=t.history.maxLocalStorageTimeSlot,o=u((0,e.useState)(""),2),s=o[0],c=o[1],d=u((0,e.useState)(!1),2),f=d[0],p=d[1];function h(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=n||(new Date).toJSON(),a=Math.floor((new Date-n)/1e3);return{startTime:r,endTime:(new Date).toJSON(),detected:e,timePeriod:a,pinnedSession:t}}var m=Ve("mergedTimeTable",{defaultValue:[h(!0,!0)],serializer:function(e){return JSON.stringify(e)},deserializer:function(e){var t=JSON.parse(e);return new Date-new Date(t.at(-1).endTime)>1e3*n&&t.push(h(!0,!0)),t.slice(0-i)}}),v=u(m,2),g=v[0],y=v[1],b=g.at(-1),x=u((0,e.useState)({}),2),A=x[0],k=x[1],w=u(He("/face-recognition-pomodoro/sounds/dingbell.aac"),1)[0],S=t.tempMissingSeconds,I=u((0,e.useState)(!1),2),E=I[0],C=I[1];function N(e){if(!(A[e]&&new Date-A[e].lastSendTime<1e3*A[e].nextSendInterval)){w(),E&&"granted"===Notification.permission&&new Notification(e),So.open({message:e,duration:3}),p(!0),c(e);var n=A[e]?2*A[e].nextSendInterval:t.notificationIntervalSeconds;A[e]={lastSendTime:new Date,nextSendInterval:n},k(A)}}(0,e.useEffect)((function(){var e="Notification"in window&&"serviceWorker"in navigator&&"PushManager"in window;C(e),e?t.enableNotification&&Notification.requestPermission():console.log("This browser does not support desktop notification")}),[t.enableNotification]),l((function(){var e=(new Date-new Date(b.startTime))/1e3;b.detected&&e>n?N("\u8be5\u4f11\u606f\u5566"):!b.detected&&e>a?N("\u4f11\u606f\u591f\u5566"):e>t.tempMissingSeconds&&k({})}),500,!0);var T=b.detected?"WORKING":"REST";return(0,gxe.jsxs)("div",{className:Oe(ZIe||(ZIe=r(["\n      margin: 0 15px;\n      max-width: 700px;\n      min-width: 350px;\n      @media (min-width: 730px) {\n        margin: 0 auto;\n      }\n      "]))),children:[(0,gxe.jsxs)(Ls,{children:[(0,gxe.jsx)(zs,{span:12,children:(0,gxe.jsxs)("p",{className:Oe(YIe||(YIe=r(["\n            font-size: 20vw;\n            margin: 0 auto;\n            text-align: center;\n            @media (min-width: 700px) {\n              font-size: 140px;\n            }\n            @media (max-width: 350px) {\n              font-size: 75px;\n            }\n          "]))),children:[" ",T," "]})}),(0,gxe.jsx)(zs,{span:12,children:(0,gxe.jsx)(wxe,{clockFace:"TwelveHourClock",startTime:b.startTime})}),(0,gxe.jsx)(zs,{span:12,children:(0,gxe.jsx)(xxe,{onFaceDetectionResult:function(e){var n=ws(g,(function(n){var r=void 0!==e;if(n.at(-1).detected!==r&&n.at(-1).timePeriod<S&&n.length>1&&!n.at(-1).pinnedSession&&n.pop(),n.at(-1).detected===r){if(n.at(-1).detected&&new Date-new Date(n.at(-1).endTime)>1e3*t.tempMissingSeconds)return n.push(h(!1,!1,n.at(-1).endTime)),void n.push(h(!0,!1,new Date));n.at(-1).endTime=(new Date).toJSON(),n.at(-1).timePeriod=(new Date-new Date(n.at(-1).startTime))/1e3}else n.push(h(r,!1,n.at(-1).endTime))}));y(n)}})}),(0,gxe.jsx)(zs,{span:12,children:t.history.showPomodoroHistory?(0,gxe.jsx)(JIe,{mergedTimeTable:g}):(0,gxe.jsx)(gxe.Fragment,{})})]}),(0,gxe.jsx)($u,{open:f,onClose:function(){return p(!1)},message:s,dismissesOnAction:!0,action:(0,gxe.jsx)(nc,{label:"Dismiss",onClick:function(){return console.log("Dismiss notification")}})})]})},$Ie=(n.p,function(e,t){return $Ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},$Ie(e,t)});function eEe(e,t){function n(){this.constructor=e}$Ie(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var tEe=function(){return tEe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},tEe.apply(this,arguments)};function nEe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var rEe={FIXED_CLASS:"mdc-top-app-bar--fixed",FIXED_SCROLLED_CLASS:"mdc-top-app-bar--fixed-scrolled",SHORT_CLASS:"mdc-top-app-bar--short",SHORT_COLLAPSED_CLASS:"mdc-top-app-bar--short-collapsed",SHORT_HAS_ACTION_ITEM_CLASS:"mdc-top-app-bar--short-has-action-item"},aEe={DEBOUNCE_THROTTLE_RESIZE_TIME_MS:100,MAX_TOP_APP_BAR_HEIGHT:128},iEe={ACTION_ITEM_SELECTOR:".mdc-top-app-bar__action-item",NAVIGATION_EVENT:"MDCTopAppBar:nav",NAVIGATION_ICON_SELECTOR:".mdc-top-app-bar__navigation-icon",ROOT_SELECTOR:".mdc-top-app-bar",TITLE_SELECTOR:".mdc-top-app-bar__title"},oEe=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),sEe=function(e){function t(n){return e.call(this,tEe(tEe({},t.defaultAdapter),n))||this}return eEe(t,e),Object.defineProperty(t,"strings",{get:function(){return iEe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return rEe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return aEe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},getTopAppBarHeight:function(){return 0},notifyNavigationIconClicked:function(){},getViewportScrollY:function(){return 0},getTotalActionItems:function(){return 0}}},enumerable:!0,configurable:!0}),t.prototype.handleTargetScroll=function(){},t.prototype.handleWindowResize=function(){},t.prototype.handleNavigationClick=function(){this.adapter.notifyNavigationIconClicked()},t}(oEe),uEe=function(e){function t(t){var n=e.call(this,t)||this;return n.wasDocked_=!0,n.isDockedShowing_=!0,n.currentAppBarOffsetTop_=0,n.isCurrentlyBeingResized_=!1,n.resizeThrottleId_=0,n.resizeDebounceId_=0,n.lastScrollPosition_=n.adapter.getViewportScrollY(),n.topAppBarHeight_=n.adapter.getTopAppBarHeight(),n}return eEe(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.adapter.setStyle("top","")},t.prototype.handleTargetScroll=function(){var e=Math.max(this.adapter.getViewportScrollY(),0),t=e-this.lastScrollPosition_;this.lastScrollPosition_=e,this.isCurrentlyBeingResized_||(this.currentAppBarOffsetTop_-=t,this.currentAppBarOffsetTop_>0?this.currentAppBarOffsetTop_=0:Math.abs(this.currentAppBarOffsetTop_)>this.topAppBarHeight_&&(this.currentAppBarOffsetTop_=-this.topAppBarHeight_),this.moveTopAppBar_())},t.prototype.handleWindowResize=function(){var e=this;this.resizeThrottleId_||(this.resizeThrottleId_=setTimeout((function(){e.resizeThrottleId_=0,e.throttledResizeHandler_()}),aEe.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)),this.isCurrentlyBeingResized_=!0,this.resizeDebounceId_&&clearTimeout(this.resizeDebounceId_),this.resizeDebounceId_=setTimeout((function(){e.handleTargetScroll(),e.isCurrentlyBeingResized_=!1,e.resizeDebounceId_=0}),aEe.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)},t.prototype.checkForUpdate_=function(){var e=-this.topAppBarHeight_,t=this.currentAppBarOffsetTop_<0,n=this.currentAppBarOffsetTop_>e,r=t&&n;if(r)this.wasDocked_=!1;else{if(!this.wasDocked_)return this.wasDocked_=!0,!0;if(this.isDockedShowing_!==n)return this.isDockedShowing_=n,!0}return r},t.prototype.moveTopAppBar_=function(){if(this.checkForUpdate_()){var e=this.currentAppBarOffsetTop_;Math.abs(e)>=this.topAppBarHeight_&&(e=-aEe.MAX_TOP_APP_BAR_HEIGHT),this.adapter.setStyle("top",e+"px")}},t.prototype.throttledResizeHandler_=function(){var e=this.adapter.getTopAppBarHeight();this.topAppBarHeight_!==e&&(this.wasDocked_=!1,this.currentAppBarOffsetTop_-=this.topAppBarHeight_-e,this.topAppBarHeight_=e),this.handleTargetScroll()},t}(sEe),cEe=function(e){function t(t){var n=e.call(this,t)||this;return n.isCollapsed_=!1,n.isAlwaysCollapsed_=!1,n}return eEe(t,e),Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return this.isCollapsed_},enumerable:!0,configurable:!0}),t.prototype.init=function(){e.prototype.init.call(this),this.adapter.getTotalActionItems()>0&&this.adapter.addClass(rEe.SHORT_HAS_ACTION_ITEM_CLASS),this.setAlwaysCollapsed(this.adapter.hasClass(rEe.SHORT_COLLAPSED_CLASS))},t.prototype.setAlwaysCollapsed=function(e){this.isAlwaysCollapsed_=!!e,this.isAlwaysCollapsed_?this.collapse_():this.maybeCollapseBar_()},t.prototype.getAlwaysCollapsed=function(){return this.isAlwaysCollapsed_},t.prototype.handleTargetScroll=function(){this.maybeCollapseBar_()},t.prototype.maybeCollapseBar_=function(){this.isAlwaysCollapsed_||(this.adapter.getViewportScrollY()<=0?this.isCollapsed_&&this.uncollapse_():this.isCollapsed_||this.collapse_())},t.prototype.uncollapse_=function(){this.adapter.removeClass(rEe.SHORT_COLLAPSED_CLASS),this.isCollapsed_=!1},t.prototype.collapse_=function(){this.adapter.addClass(rEe.SHORT_COLLAPSED_CLASS),this.isCollapsed_=!0},t}(sEe),lEe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wasScrolled_=!1,t}return eEe(t,e),t.prototype.handleTargetScroll=function(){this.adapter.getViewportScrollY()<=0?this.wasScrolled_&&(this.adapter.removeClass(rEe.FIXED_SCROLLED_CLASS),this.wasScrolled_=!1):this.wasScrolled_||(this.adapter.addClass(rEe.FIXED_SCROLLED_CLASS),this.wasScrolled_=!0)},t}(uEe),dEe=Ps((function(t,n){return e.createElement(fEe,tEe({key:t.short?"short":t.fixed?"fixed":"top-app-bar"},t,{ref:n}))})),fEe=Ps((function(t,n){var r=function(t){var n=(0,e.useRef)(null),r=(0,e.useRef)(null),a=fu({props:t,elements:{rootEl:!0},foundation:function(e){var r=e.rootEl,a=e.emit,i={hasClass:function(e){return r.hasClass(e)},addClass:function(e){return r.addClass(e)},removeClass:function(e){return r.removeClass(e)},setStyle:function(e,t){return r.setStyle(e,t)},getTopAppBarHeight:function(){var e;return(null===(e=r.ref)||void 0===e?void 0:e.clientHeight)||0},notifyNavigationIconClicked:function(){return a("onNav",{})},getViewportScrollY:function(){var e=n.current;return e?e["pageYOffset"in e?"pageYOffset":"scrollTop"]:0},getTotalActionItems:function(){return r.ref?r.ref.querySelectorAll(uEe.strings.ACTION_ITEM_SELECTOR).length:0}};return t.short?new cEe(i):t.fixed?new lEe(i):new uEe(i)}}),i=a.foundation,o=nEe(a,["foundation"]),s=o.rootEl;return(0,e.useEffect)((function(){var e,r,a=t.scrollTarget||(null===(r=null===(e=s.ref)||void 0===e?void 0:e.ownerDocument)||void 0===r?void 0:r.defaultView)||window,o=i.handleTargetScroll.bind(i);return a.addEventListener("scroll",o),n.current=a,function(){a.removeEventListener("scroll",o)}}),[t.scrollTarget,n,i,s.ref]),(0,e.useEffect)((function(){var e,t;r.current=(null===(e=s.ref)||void 0===e?void 0:e.querySelector(uEe.strings.NAVIGATION_ICON_SELECTOR))||null;var n=i.handleNavigationClick.bind(i);return null===(t=r.current)||void 0===t||t.addEventListener("click",n),function(){var e;null===(e=r.current)||void 0===e||e.removeEventListener("click",n)}}),[s.ref,i]),(0,e.useEffect)((function(){i.lastScrollPosition_=i.adapter.getViewportScrollY(),i.topAppBarHeight_=i.adapter.getTopAppBarHeight()}),[i]),tEe({foundation:i},o)}(t).rootEl,a=(t.onNav,t.scrollTarget,t.fixed),i=t.prominent,o=t.short,s=t.shortCollapsed,u=t.dense,c=(t.foundationRef,nEe(t,["onNav","scrollTarget","fixed","prominent","short","shortCollapsed","dense","foundationRef"])),l=Ms(t,["mdc-top-app-bar",{"mdc-top-app-bar--fixed":a,"mdc-top-app-bar--prominent":i,"mdc-top-app-bar--short":o||s,"mdc-top-app-bar--short-collapsed":s,"mdc-top-app-bar--dense":u}]);return e.createElement(Rs,tEe({tag:"header"},c,{element:r,className:l,ref:n}))})),pEe=(Ps((function(t,n){var r=t.title,a=t.actionItems,i=t.navigationIcon,o=t.startContent,s=t.endContent,u=nEe(t,["title","actionItems","navigationIcon","startContent","endContent"]);return e.createElement(dEe,tEe({},u,{ref:n}),e.createElement(pEe,null,e.createElement(hEe,{alignStart:!0},!!i&&e.createElement(mEe,tEe({icon:"menu"},"boolean"===typeof i?{}:i)),!!r&&e.createElement(gEe,null,r),o),(!!a||s)&&e.createElement(hEe,{alignEnd:!0},s,!!a&&a.map((function(t,n){return e.createElement(vEe,tEe({},t,{key:n}))})))))})),Ps((function(t,n){var r=Ms(t,["mdc-top-app-bar__row"]);return e.createElement(Rs,tEe({},t,{ref:n,className:r}))}))),hEe=Ps((function(t,n){var r=t.alignStart,a=t.alignEnd,i=nEe(t,["alignStart","alignEnd"]),o=Ms(t,["mdc-top-app-bar__section",{"mdc-top-app-bar__section--align-start":r,"mdc-top-app-bar__section--align-end":a}]);return e.createElement(Rs,tEe({tag:"section"},i,{ref:n,className:o}))})),mEe=Ps((function(t,n){var r=Ms(t,["mdc-top-app-bar__navigation-icon"]);return e.createElement(Xu,tEe({},t,{className:r,ref:n}))})),vEe=Ps((function(t,n){var r=Ms(t,["mdc-top-app-bar__action-item"]);return e.createElement(Xu,tEe({},t,{className:r,ref:n}))})),gEe=Ps((function(t,n){var r=Ms(t,["mdc-top-app-bar__title"]);return e.createElement(Rs,tEe({},t,{ref:n,className:r}))})),yEe=Ps((function(t,n){t.dense,t.denseProminent,t.prominent,t.short;var r=nEe(t,["dense","denseProminent","prominent","short"]),a=Ms(t,[{"mdc-top-app-bar--fixed-adjust":!t.dense&&!t.denseProminent&&!t.prominent&&!t.short,"mdc-top-app-bar--dense-fixed-adjust":t.dense,"mdc-top-app-bar--prominent-fixed-adjust":t.prominent,"mdc-top-app-bar--dense-prominent-fixed-adjust":t.denseProminent,"mdc-top-app-bar--short-fixed-adjust":t.short}]);return e.createElement(Rs,tEe({},r,{ref:n,className:a}))})),bEe=function(t){var n=e.Children.only(t.children);return e.cloneElement(n,Ss(Ss(Ss({},t),n.props),{className:St()(t.className,n.props.className),style:Ss(Ss({},n.props.style),t.style)}))},xEe={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",transparent:"#ffffff",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},AEe=function(e,t,n){var r=[e,t,n].map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}));return.2126*r[0]+.7152*r[1]+.0722*r[2]},kEe=function(e){var t;return function(e){4===e.length&&(e+=e.slice(1));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}}(e=xEe[t=e]||t)},wEe=function(e){var t,n,r=kEe(e),a=r.r,i=r.g,o=r.b;return!((n=[a,i,o],(AEe((t=[255,255,255])[0],t[1],t[2])+.05)/(AEe(n[0],n[1],n[2])+.05))>3)},SEe={"--mdc-theme-primary":[["--mdc-theme-on-primary",0]],"--mdc-theme-surface":[["--mdc-theme-on-surface",0]],"--mdc-theme-secondary":[["--mdc-theme-on-secondary",0]],"--mdc-theme-background":[["--mdc-theme-text-primary-on-background",0],["--mdc-theme-text-secondary-on-background",1],["--mdc-theme-text-hint-on-background",2],["--mdc-theme-text-disabled-on-background",2],["--mdc-theme-text-icon-on-background",2]]},IEe=["rgba(0, 0, 0, 0.87)","rgba(0, 0, 0, 0.54)","rgba(0, 0, 0, 0.38)"],EEe=["rgba(255, 255, 255, 1)","rgba(255, 255, 255, 0.7)","rgba(255, 255, 255, 0.5)"],CEe=(Ps((function(t,n){var r=t.use,a=t.wrap,i=Is(t,["use","wrap"]),o=Ms(t,[_s(r).join(" ")]);return a?bEe(Ss(Ss({},i),{ref:n,className:o})):e.createElement(Rs,Ss({tag:"span",theme:r},i,{ref:n,className:o}))})),Ps((function(t,n){var r,a,i=JSON.stringify(t.options),o=(0,e.useMemo)((function(){var e=Object.keys(t.options).reduce((function(e,n){var r=t.options[n];return e[n=n.startsWith("--")?n:"--mdc-theme-"+Ts(n)]=r,e}),{});return function(e){var t=Object.keys(SEe).reduce((function(t,n){if(e[n]){var r=wEe(e[n])?IEe:EEe;SEe[n].forEach((function(e){t[e[0]]=r[e[1]]}))}return t}),{});return Ss(Ss({},t),e)}(e)}),[i]),s=(t.options,t.style),u=void 0===s?{}:s,c=t.wrap,l=Is(t,["options","style","wrap"]),d=Ms(t,[c&&"object"===typeof l.children&&(null===(a=null===(r=l.children)||void 0===r?void 0:r.props)||void 0===a?void 0:a.className)]),f=Ss(Ss({},u),o);return c&&l.children?bEe(Ss(Ss({},l),{style:f,ref:n})):e.createElement(Rs,Ss({},l,{style:f,className:d,ref:n}))}))),NEe="rmwcPortal";function TEe(){var t=(0,e.useRef)(null);return e.createElement("div",{ref:t,id:NEe})}function _Ee(t){var n=t.children,r=t.renderTo,a=(0,e.useMemo)((function(){if("undefined"!==typeof document){var e=void 0;return!0===r?!(e=document.getElementById(NEe)||void 0)&&console.warn('No default Portal found. Did you forget to include it in the root of your app? `import { Portal } from "@rmwc/base";`'):"string"===typeof r?!(e=document.querySelector(r)||void 0)&&console.warn('The selector you provided for renderToPortal "'+r+"\" didn't find any elements."):r instanceof Element&&(e=r),e}}),[r]);return a?dt.createPortal(n,a):e.createElement(e.Fragment,null,n)}n(3147),n(9619),n(9933);var REe=function(e,t){return REe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},REe(e,t)};var MEe=function(){return MEe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},MEe.apply(this,arguments)};function OEe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var FEe=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),PEe={CLOSING:"mdc-dialog--closing",OPEN:"mdc-dialog--open",OPENING:"mdc-dialog--opening",SCROLLABLE:"mdc-dialog--scrollable",SCROLL_LOCK:"mdc-dialog-scroll-lock",STACKED:"mdc-dialog--stacked"},DEe={ACTION_ATTRIBUTE:"data-mdc-dialog-action",BUTTON_DEFAULT_ATTRIBUTE:"data-mdc-dialog-button-default",BUTTON_SELECTOR:".mdc-dialog__button",CLOSED_EVENT:"MDCDialog:closed",CLOSE_ACTION:"close",CLOSING_EVENT:"MDCDialog:closing",CONTAINER_SELECTOR:".mdc-dialog__container",CONTENT_SELECTOR:".mdc-dialog__content",DESTROY_ACTION:"destroy",INITIAL_FOCUS_ATTRIBUTE:"data-mdc-dialog-initial-focus",OPENED_EVENT:"MDCDialog:opened",OPENING_EVENT:"MDCDialog:opening",SCRIM_SELECTOR:".mdc-dialog__scrim",SUPPRESS_DEFAULT_PRESS_SELECTOR:["textarea",".mdc-menu .mdc-list-item"].join(", "),SURFACE_SELECTOR:".mdc-dialog__surface"},LEe={DIALOG_ANIMATION_CLOSE_TIME_MS:75,DIALOG_ANIMATION_OPEN_TIME_MS:150},zEe=function(e){function t(n){var r=e.call(this,MEe(MEe({},t.defaultAdapter),n))||this;return r.isOpen_=!1,r.animationFrame_=0,r.animationTimer_=0,r.layoutFrame_=0,r.escapeKeyAction_=DEe.CLOSE_ACTION,r.scrimClickAction_=DEe.CLOSE_ACTION,r.autoStackButtons_=!0,r.areButtonsStacked_=!1,r.suppressDefaultPressSelector=DEe.SUPPRESS_DEFAULT_PRESS_SELECTOR,r}return function(e,t){function n(){this.constructor=e}REe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return PEe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return DEe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return LEe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addBodyClass:function(){},addClass:function(){},areButtonsStacked:function(){return!1},clickDefaultButton:function(){},eventTargetMatches:function(){return!1},getActionFromEvent:function(){return""},getInitialFocusEl:function(){return null},hasClass:function(){return!1},isContentScrollable:function(){return!1},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},releaseFocus:function(){},removeBodyClass:function(){},removeClass:function(){},reverseButtons:function(){},trapFocus:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter.hasClass(PEe.STACKED)&&this.setAutoStackButtons(!1)},t.prototype.destroy=function(){this.isOpen_&&this.close(DEe.DESTROY_ACTION),this.animationTimer_&&(clearTimeout(this.animationTimer_),this.handleAnimationTimerEnd_()),this.layoutFrame_&&(cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=0)},t.prototype.open=function(){var e=this;this.isOpen_=!0,this.adapter.notifyOpening(),this.adapter.addClass(PEe.OPENING),this.runNextAnimationFrame_((function(){e.adapter.addClass(PEe.OPEN),e.adapter.addBodyClass(PEe.SCROLL_LOCK),e.layout(),e.animationTimer_=setTimeout((function(){e.handleAnimationTimerEnd_(),e.adapter.trapFocus(e.adapter.getInitialFocusEl()),e.adapter.notifyOpened()}),LEe.DIALOG_ANIMATION_OPEN_TIME_MS)}))},t.prototype.close=function(e){var t=this;void 0===e&&(e=""),this.isOpen_&&(this.isOpen_=!1,this.adapter.notifyClosing(e),this.adapter.addClass(PEe.CLOSING),this.adapter.removeClass(PEe.OPEN),this.adapter.removeBodyClass(PEe.SCROLL_LOCK),cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,clearTimeout(this.animationTimer_),this.animationTimer_=setTimeout((function(){t.adapter.releaseFocus(),t.handleAnimationTimerEnd_(),t.adapter.notifyClosed(e)}),LEe.DIALOG_ANIMATION_CLOSE_TIME_MS))},t.prototype.isOpen=function(){return this.isOpen_},t.prototype.getEscapeKeyAction=function(){return this.escapeKeyAction_},t.prototype.setEscapeKeyAction=function(e){this.escapeKeyAction_=e},t.prototype.getScrimClickAction=function(){return this.scrimClickAction_},t.prototype.setScrimClickAction=function(e){this.scrimClickAction_=e},t.prototype.getAutoStackButtons=function(){return this.autoStackButtons_},t.prototype.setAutoStackButtons=function(e){this.autoStackButtons_=e},t.prototype.getSuppressDefaultPressSelector=function(){return this.suppressDefaultPressSelector},t.prototype.setSuppressDefaultPressSelector=function(e){this.suppressDefaultPressSelector=e},t.prototype.layout=function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){e.layoutInternal_(),e.layoutFrame_=0}))},t.prototype.handleClick=function(e){if(this.adapter.eventTargetMatches(e.target,DEe.SCRIM_SELECTOR)&&""!==this.scrimClickAction_)this.close(this.scrimClickAction_);else{var t=this.adapter.getActionFromEvent(e);t&&this.close(t)}},t.prototype.handleKeydown=function(e){var t="Enter"===e.key||13===e.keyCode;if(t&&!this.adapter.getActionFromEvent(e)){var n=e.composedPath?e.composedPath()[0]:e.target,r=!this.adapter.eventTargetMatches(n,this.suppressDefaultPressSelector);t&&r&&this.adapter.clickDefaultButton()}},t.prototype.handleDocumentKeydown=function(e){("Escape"===e.key||27===e.keyCode)&&""!==this.escapeKeyAction_&&this.close(this.escapeKeyAction_)},t.prototype.layoutInternal_=function(){this.autoStackButtons_&&this.detectStackedButtons_(),this.detectScrollableContent_()},t.prototype.handleAnimationTimerEnd_=function(){this.animationTimer_=0,this.adapter.removeClass(PEe.OPENING),this.adapter.removeClass(PEe.CLOSING)},t.prototype.runNextAnimationFrame_=function(e){var t=this;cancelAnimationFrame(this.animationFrame_),this.animationFrame_=requestAnimationFrame((function(){t.animationFrame_=0,clearTimeout(t.animationTimer_),t.animationTimer_=setTimeout(e,0)}))},t.prototype.detectStackedButtons_=function(){this.adapter.removeClass(PEe.STACKED);var e=this.adapter.areButtonsStacked();e&&this.adapter.addClass(PEe.STACKED),e!==this.areButtonsStacked_&&(this.adapter.reverseButtons(),this.areButtonsStacked_=e)},t.prototype.detectScrollableContent_=function(){this.adapter.removeClass(PEe.SCROLLABLE),this.adapter.isContentScrollable()&&this.adapter.addClass(PEe.SCROLLABLE)},t}(FEe),BEe=n(4767).focusTrap.FocusTrap,WEe=function(t){var n=(0,e.useRef)(),r=(0,e.useRef)(null),a=(0,e.useRef)(null),i=(0,e.useRef)(null),o=fu({props:t,elements:{rootEl:!0},foundation:function(e){var t=e.rootEl,o=e.emit;e.getProps;return new zEe({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},hasClass:function(e){return t.hasClass(e)},addBodyClass:function(e){return document.body&&document.body.classList.add(e)},removeBodyClass:function(e){return document.body&&document.body.classList.remove(e)},eventTargetMatches:function(e,t){return mu(e,t)},trapFocus:function(){var e;try{null===(e=n.current)||void 0===e||e.trapFocus()}catch(k_e){}},releaseFocus:function(){var e;return null===(e=n.current)||void 0===e?void 0:e.releaseFocus()},isContentScrollable:function(){return!!i.current&&function(e){return e.scrollHeight>e.offsetHeight}(i.current)},areButtonsStacked:function(){return function(e){var t=new Set;return[].forEach.call(e,(function(e){return t.add(e.offsetTop)})),t.size>1}(a.current)},getActionFromEvent:function(e){var t=hu(e.target,"["+zEe.strings.ACTION_ATTRIBUTE+"]");return(null===t||void 0===t?void 0:t.getAttribute(zEe.strings.ACTION_ATTRIBUTE))||null},clickDefaultButton:function(){var e;null===(e=r.current)||void 0===e||e.click()},reverseButtons:function(){var e,t;null===(e=a.current)||void 0===e||e.reverse(),null===(t=a.current)||void 0===t||t.forEach((function(e){return e.parentElement&&e.parentElement.appendChild(e)}))},notifyOpening:function(){return o("onOpen",{})},notifyOpened:function(){o("onOpened",{}),Bu()},notifyClosing:function(e){return o("onClose",e?{action:e}:{})},notifyClosed:function(e){return o("onClosed",e?{action:e}:{})},getInitialFocusEl:function(){return document.querySelector("["+zEe.strings.INITIAL_FOCUS_ATTRIBUTE+"]")}})}}),s=o.foundation,u=OEe(o,["foundation"]),c=u.rootEl,l=(0,e.useMemo)((function(){var e=s.handleDocumentKeydown.bind(s);return function(n){if("Escape"!==n.key||!t.preventOutsideDismiss)return e(n)}}),[s,t.preventOutsideDismiss]);(0,e.useEffect)((function(){var e;r.current=c.ref&&c.ref.querySelector("["+zEe.strings.BUTTON_DEFAULT_ATTRIBUTE+"]")||null,a.current=c.ref&&[].slice.call(c.ref.querySelectorAll(zEe.strings.BUTTON_SELECTOR)),i.current=(null===(e=c.ref)||void 0===e?void 0:e.querySelector(zEe.strings.CONTENT_SELECTOR))||null}),[c.ref]),(0,e.useEffect)((function(){var e=c.ref&&c.ref.querySelector(zEe.strings.SURFACE_SELECTOR);e&&(n.current=function(e,t){return new BEe(e,t)}(e,{initialFocusEl:r.current||void 0}))}),[c.ref]),(0,e.useEffect)((function(){return t.open?s.isOpen()||(document.addEventListener("keydown",l),s.open()):s.isOpen()&&(document.removeEventListener("keydown",l),s.close()),function(){document.removeEventListener("keydown",l)}}),[t.open,s,l]);return c.setProp("onClick",(function(e){var n;return null===(n=t.onClick)||void 0===n||n.call(t,e),s.handleClick(e)}),!0),c.setProp("onKeyDown",(function(e){var n;return null===(n=t.onKeyDown)||void 0===n||n.call(t,e),s.handleKeydown(e)}),!0),MEe({foundation:s},u)},jEe=Ps((function(t,n){var r=WEe(t).rootEl,a=Ms(t,["mdc-dialog"]),i=t.children,o=(t.open,t.onOpen,t.onOpened,t.onClose,t.onClosed,t.preventOutsideDismiss),s=(t.foundationRef,t.renderToPortal),u=t["aria-labelledby"],c=t["aria-describedby"],l=OEe(t,["children","open","onOpen","onOpened","onClose","onClosed","preventOutsideDismiss","foundationRef","renderToPortal","aria-labelledby","aria-describedby"]);return e.createElement(_Ee,{renderTo:s},e.createElement(Rs,MEe({},l,{element:r,className:a,ref:n}),e.createElement("div",{className:"mdc-dialog__container"},e.createElement("div",{className:"mdc-dialog__surface",role:"alertdialog","aria-modal":!0,"aria-labelledby":u,"aria-describedby":c},i)),e.createElement(VEe,{disableInteraction:o})))})),VEe=(Ps((function(t,n){var r=t.title,a=t.header,i=t.body,o=t.footer,s=t.acceptLabel,u=void 0===s?"Accept":s,c=t.cancelLabel,l=void 0===c?"Cancel":c,d=t.children,f=t.open,p=OEe(t,["title","header","body","footer","acceptLabel","cancelLabel","children","open"]);return e.createElement(jEe,MEe({open:f},p,{ref:n}),(!!r||!!a)&&e.createElement(UEe,null,!!r&&r,!!a&&a),(!!i||d)&&e.createElement(HEe,null,i,d),(!!l||!!u||!!o)&&e.createElement(GEe,null,!!o&&o,!!l&&e.createElement(qEe,{action:"close"},l),!!u&&e.createElement(qEe,{action:"accept",isDefaultAction:!0},u)))})),e.memo((function(t){var n=t.disableInteraction?{pointerEvents:"none"}:{};return e.createElement("div",{className:"mdc-dialog__scrim",style:n})}))),UEe=Ps((function(t,n){var r=Ms(t,["mdc-dialog__title"]);return e.createElement(Rs,MEe({tag:"h2"},t,{ref:n,className:r}))})),HEe=Ps((function(t,n){var r=Ms(t,["mdc-dialog__content"]);return e.createElement(Rs,MEe({},t,{ref:n,className:r}))})),GEe=Ps((function(t,n){var r=Ms(t,["mdc-dialog__actions"]);return e.createElement(Rs,MEe({},t,{ref:n,className:r}))})),qEe=Ps((function(t,n){var r,a=Ms(t,["mdc-dialog__button"]),i=t.action,o=void 0===i?"":i,s=t.isDefaultAction,u=OEe(t,["action","isDefaultAction"]),c=s?((r={})[zEe.strings.BUTTON_DEFAULT_ATTRIBUTE]=!0,r):{};return e.createElement(Fu,MEe({},u,c,{ref:n,className:a,"data-mdc-dialog-action":o}))})),KEe=(n(5033),function(e,t){return KEe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},KEe(e,t)});function XEe(e,t){function n(){this.constructor=e}KEe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ZEe=function(){return ZEe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ZEe.apply(this,arguments)};function YEe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}function JEe(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o}var QEe=function(t,n){var r=n.id?n.id:n.label?t+"-"+n.label:function(e){return e+"-"+(Math.random()+Math.random()+1).toString(36).substring(2)}(t);return Cs((0,e.useState)(r),1)[0]},$Ee=function(e,t){return $Ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},$Ee(e,t)};var eCe=function(){return eCe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},eCe.apply(this,arguments)};function tCe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var nCe=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),rCe={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"},aCe=function(e){function t(n){var r=e.call(this,eCe(eCe({},t.defaultAdapter),n))||this;return r.transitionEndHandler_=function(e){return r.handleTransitionEnd(e)},r}return function(e,t){function n(){this.constructor=e}$Ee(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return rCe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter.registerEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.destroy=function(){this.adapter.deregisterEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.activate=function(){this.adapter.removeClass(rCe.LINE_RIPPLE_DEACTIVATING),this.adapter.addClass(rCe.LINE_RIPPLE_ACTIVE)},t.prototype.setRippleCenter=function(e){this.adapter.setStyle("transform-origin",e+"px center")},t.prototype.deactivate=function(){this.adapter.addClass(rCe.LINE_RIPPLE_DEACTIVATING)},t.prototype.handleTransitionEnd=function(e){var t=this.adapter.hasClass(rCe.LINE_RIPPLE_DEACTIVATING);"opacity"===e.propertyName&&t&&(this.adapter.removeClass(rCe.LINE_RIPPLE_ACTIVE),this.adapter.removeClass(rCe.LINE_RIPPLE_DEACTIVATING))},t}(nCe),iCe=Ps((function(t,n){t.active,t.center;var r=tCe(t,["active","center"]),a=function(t){var n=fu({props:t,elements:{rootEl:!0},foundation:function(e){var t=e.rootEl;return new aCe({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},hasClass:function(e){return t.hasClass(e)},setStyle:function(e,n){return t.setStyle(e,n)},registerEventHandler:function(e,n){return t.addEventListener(e,n)},deregisterEventHandler:function(e,n){return t.removeEventListener(e,n)}})}}),r=n.foundation,a=tCe(n,["foundation"]),i=a.rootEl;return(0,e.useEffect)((function(){t.active?r.activate():r.deactivate()}),[t.active,r]),(0,e.useEffect)((function(){"number"===typeof t.center&&r.setRippleCenter(t.center)}),[t.center,r]),i.setProp("onTransitionEnd",(function(e){return r.handleTransitionEnd(e)}),!0),eCe({foundation:r},a)}(t).rootEl;return e.createElement(Rs,eCe({},r,{tag:"span",element:a,className:"mdc-line-ripple",ref:n}))})),oCe=function(e,t){return oCe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},oCe(e,t)};var sCe=function(){return sCe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},sCe.apply(this,arguments)};function uCe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var cCe=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),lCe={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_REQUIRED:"mdc-floating-label--required",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"},dCe=function(e){function t(n){var r=e.call(this,sCe(sCe({},t.defaultAdapter),n))||this;return r.shakeAnimationEndHandler_=function(){return r.handleShakeAnimationEnd_()},r}return function(e,t){function n(){this.constructor=e}oCe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return lCe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter.registerInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.getWidth=function(){return this.adapter.getWidth()},t.prototype.shake=function(e){var n=t.cssClasses.LABEL_SHAKE;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.float=function(e){var n=t.cssClasses,r=n.LABEL_FLOAT_ABOVE,a=n.LABEL_SHAKE;e?this.adapter.addClass(r):(this.adapter.removeClass(r),this.adapter.removeClass(a))},t.prototype.setRequired=function(e){var n=t.cssClasses.LABEL_REQUIRED;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.handleShakeAnimationEnd_=function(){var e=t.cssClasses.LABEL_SHAKE;this.adapter.removeClass(e)},t}(cCe),fCe=Ps((function(t,n){var r=function(t){var n=fu({props:t,elements:{rootEl:!0},api:function(e){var t=e.foundation;return{getWidth:function(){return t.getWidth()},setRequired:function(e){return t.setRequired(e)}}},foundation:function(e){var t=e.rootEl;return new dCe({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},getWidth:function(){var e;return(null===(e=t.ref)||void 0===e?void 0:e.scrollWidth)||0},registerInteractionHandler:function(e,n){return t.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.removeEventListener(e,n)}})}}),r=n.foundation,a=uCe(n,["foundation"]);return(0,e.useEffect)((function(){r.shake(!!t.shake)}),[t.shake,r]),(0,e.useEffect)((function(){r.float(!!t.float)}),[t.float,r]),sCe({foundation:r},a)}(t).rootEl,a=(t.shake,t.float,t.apiRef,uCe(t,["shake","float","apiRef"]));return e.createElement("span",sCe({},r.props(sCe(sCe({},a),{className:"mdc-floating-label"})),{ref:Os(r.setRef,n)}))})),pCe=function(e,t){return pCe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},pCe(e,t)};var hCe=function(){return hCe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},hCe.apply(this,arguments)};function mCe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var vCe=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),gCe={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},yCe={NOTCH_ELEMENT_PADDING:8},bCe={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"},xCe=function(e){function t(n){return e.call(this,hCe(hCe({},t.defaultAdapter),n))||this}return function(e,t){function n(){this.constructor=e}pCe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"strings",{get:function(){return gCe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return bCe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return yCe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!0,configurable:!0}),t.prototype.notch=function(e){var n=t.cssClasses.OUTLINE_NOTCHED;e>0&&(e+=yCe.NOTCH_ELEMENT_PADDING),this.adapter.setNotchWidthProperty(e),this.adapter.addClass(n)},t.prototype.closeNotch=function(){var e=t.cssClasses.OUTLINE_NOTCHED;this.adapter.removeClass(e),this.adapter.removeNotchWidthProperty()},t}(vCe),ACe=Ps((function(t,n){var r=t.children,a=mCe(t,["children"]),i=function(t){var n=fu({props:t,elements:{rootEl:!0,notchedEl:!0},foundation:function(e){var t=e.rootEl,n=e.notchedEl;return new xCe({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},setNotchWidthProperty:function(e){return n.setStyle("width",e+"px")},removeNotchWidthProperty:function(){return n.setStyle("width","")}})}}),r=n.foundation,a=mCe(n,["foundation"]),i=a.rootEl,o=(0,e.useRef)();return(0,e.useEffect)((function(){t.notch?r.notch(t.notch):r.closeNotch()}),[t.notch,r]),(0,e.useEffect)((function(){var e;o.current=(null===(e=i.ref)||void 0===e?void 0:e.querySelector(".mdc-floating-label"))||void 0;var t=o.current;t?(t.style.transitionDuration="0s",i.addClass(xCe.cssClasses.OUTLINE_UPGRADED),requestAnimationFrame((function(){t&&(t.style.transitionDuration="")}))):i.addClass(xCe.cssClasses.NO_LABEL)}),[i]),hCe({foundation:r},a)}(t),o=i.rootEl,s=i.notchedEl;return e.createElement(Rs,hCe({},a,{element:o,className:"mdc-notched-outline",ref:n}),e.createElement(kCe,null),e.createElement("div",hCe({},s.props({className:"mdc-notched-outline__notch"}),{ref:s.setRef}),r),e.createElement(wCe,null))})),kCe=e.memo((function(){return e.createElement("div",{className:"mdc-notched-outline__leading"})})),wCe=e.memo((function(){return e.createElement("div",{className:"mdc-notched-outline__trailing"})})),SCe=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),ICe={ICON_EVENT:"MDCTextField:icon",ICON_ROLE:"button"},ECe={ROOT:"mdc-text-field__icon"},CCe=["click","keydown"],NCe=function(e){function t(n){var r=e.call(this,ZEe(ZEe({},t.defaultAdapter),n))||this;return r.savedTabIndex_=null,r.interactionHandler_=function(e){return r.handleInteraction(e)},r}return XEe(t,e),Object.defineProperty(t,"strings",{get:function(){return ICe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return ECe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},notifyIconAction:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.savedTabIndex_=this.adapter.getAttr("tabindex"),CCe.forEach((function(t){e.adapter.registerInteractionHandler(t,e.interactionHandler_)}))},t.prototype.destroy=function(){var e=this;CCe.forEach((function(t){e.adapter.deregisterInteractionHandler(t,e.interactionHandler_)}))},t.prototype.setDisabled=function(e){this.savedTabIndex_&&(e?(this.adapter.setAttr("tabindex","-1"),this.adapter.removeAttr("role")):(this.adapter.setAttr("tabindex",this.savedTabIndex_),this.adapter.setAttr("role",ICe.ICON_ROLE)))},t.prototype.setAriaLabel=function(e){this.adapter.setAttr("aria-label",e)},t.prototype.setContent=function(e){this.adapter.setContent(e)},t.prototype.handleInteraction=function(e){var t="Enter"===e.key||13===e.keyCode;("click"===e.type||t)&&(e.preventDefault(),this.adapter.notifyIconAction())},t}(SCe),TCe={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-text-field__icon--leading",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline",PREFIX_SELECTOR:".mdc-text-field__affix--prefix",SUFFIX_SELECTOR:".mdc-text-field__affix--suffix",TRAILING_ICON_SELECTOR:".mdc-text-field__icon--trailing"},_Ce={DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",LABEL_FLOATING:"mdc-text-field--label-floating",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon"},RCe={LABEL_SCALE:.75},MCe=["pattern","min","max","required","step","minlength","maxlength"],OCe=["color","date","datetime-local","month","range","time","week"],FCe=["mousedown","touchstart"],PCe=["click","keydown"],DCe=function(e){function t(n,r){void 0===r&&(r={});var a=e.call(this,ZEe(ZEe({},t.defaultAdapter),n))||this;return a.isFocused_=!1,a.receivedUserInput_=!1,a.isValid_=!0,a.useNativeValidation_=!0,a.validateOnValueChange_=!0,a.helperText_=r.helperText,a.characterCounter_=r.characterCounter,a.leadingIcon_=r.leadingIcon,a.trailingIcon_=r.trailingIcon,a.inputFocusHandler_=function(){return a.activateFocus()},a.inputBlurHandler_=function(){return a.deactivateFocus()},a.inputInputHandler_=function(){return a.handleInput()},a.setPointerXOffset_=function(e){return a.setTransformOrigin(e)},a.textFieldInteractionHandler_=function(){return a.handleTextFieldInteraction()},a.validationAttributeChangeHandler_=function(e){return a.handleValidationAttributeChange(e)},a}return XEe(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return _Ce},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return TCe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return RCe},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAlwaysFloat_",{get:function(){var e=this.getNativeInput_().type;return OCe.indexOf(e)>=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat_||this.isFocused_||!!this.getValue()||this.isBadInput_()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldShake",{get:function(){return!this.isFocused_&&!this.isValid()&&!!this.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},setInputAttr:function(){},removeInputAttr:function(){},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver((function(){}))},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},setLabelRequired:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.adapter.hasLabel()&&this.getNativeInput_().required&&this.adapter.setLabelRequired(!0),this.adapter.isFocused()?this.inputFocusHandler_():this.adapter.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter.floatLabel(!0),this.styleFloating_(!0)),this.adapter.registerInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter.registerInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter.registerInputInteractionHandler("input",this.inputInputHandler_),FCe.forEach((function(t){e.adapter.registerInputInteractionHandler(t,e.setPointerXOffset_)})),PCe.forEach((function(t){e.adapter.registerTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.validationObserver_=this.adapter.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler_),this.setCharacterCounter_(this.getValue().length)},t.prototype.destroy=function(){var e=this;this.adapter.deregisterInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter.deregisterInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter.deregisterInputInteractionHandler("input",this.inputInputHandler_),FCe.forEach((function(t){e.adapter.deregisterInputInteractionHandler(t,e.setPointerXOffset_)})),PCe.forEach((function(t){e.adapter.deregisterTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.adapter.deregisterValidationAttributeChangeHandler(this.validationObserver_)},t.prototype.handleTextFieldInteraction=function(){var e=this.adapter.getNativeInput();e&&e.disabled||(this.receivedUserInput_=!0)},t.prototype.handleValidationAttributeChange=function(e){var t=this;e.some((function(e){return MCe.indexOf(e)>-1&&(t.styleValidity_(!0),t.adapter.setLabelRequired(t.getNativeInput_().required),!0)})),e.indexOf("maxlength")>-1&&this.setCharacterCounter_(this.getValue().length)},t.prototype.notchOutline=function(e){if(this.adapter.hasOutline()&&this.adapter.hasLabel())if(e){var t=this.adapter.getLabelWidth()*RCe.LABEL_SCALE;this.adapter.notchOutline(t)}else this.adapter.closeOutline()},t.prototype.activateFocus=function(){this.isFocused_=!0,this.styleFocused_(this.isFocused_),this.adapter.activateLineRipple(),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating_(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),!this.helperText_||!this.helperText_.isPersistent()&&this.helperText_.isValidation()&&this.isValid_||this.helperText_.showToScreenReader()},t.prototype.setTransformOrigin=function(e){if(!this.isDisabled()&&!this.adapter.hasOutline()){var t=e.touches,n=t?t[0]:e,r=n.target.getBoundingClientRect(),a=n.clientX-r.left;this.adapter.setLineRippleTransformOrigin(a)}},t.prototype.handleInput=function(){this.autoCompleteFocus(),this.setCharacterCounter_(this.getValue().length)},t.prototype.autoCompleteFocus=function(){this.receivedUserInput_||this.activateFocus()},t.prototype.deactivateFocus=function(){this.isFocused_=!1,this.adapter.deactivateLineRipple();var e=this.isValid();this.styleValidity_(e),this.styleFocused_(this.isFocused_),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating_(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput_=!1)},t.prototype.getValue=function(){return this.getNativeInput_().value},t.prototype.setValue=function(e){if(this.getValue()!==e&&(this.getNativeInput_().value=e),this.setCharacterCounter_(e.length),this.validateOnValueChange_){var t=this.isValid();this.styleValidity_(t)}this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating_(this.shouldFloat),this.validateOnValueChange_&&this.adapter.shakeLabel(this.shouldShake))},t.prototype.isValid=function(){return this.useNativeValidation_?this.isNativeInputValid_():this.isValid_},t.prototype.setValid=function(e){this.isValid_=e,this.styleValidity_(e);var t=!e&&!this.isFocused_&&!!this.getValue();this.adapter.hasLabel()&&this.adapter.shakeLabel(t)},t.prototype.setValidateOnValueChange=function(e){this.validateOnValueChange_=e},t.prototype.getValidateOnValueChange=function(){return this.validateOnValueChange_},t.prototype.setUseNativeValidation=function(e){this.useNativeValidation_=e},t.prototype.isDisabled=function(){return this.getNativeInput_().disabled},t.prototype.setDisabled=function(e){this.getNativeInput_().disabled=e,this.styleDisabled_(e)},t.prototype.setHelperTextContent=function(e){this.helperText_&&this.helperText_.setContent(e)},t.prototype.setLeadingIconAriaLabel=function(e){this.leadingIcon_&&this.leadingIcon_.setAriaLabel(e)},t.prototype.setLeadingIconContent=function(e){this.leadingIcon_&&this.leadingIcon_.setContent(e)},t.prototype.setTrailingIconAriaLabel=function(e){this.trailingIcon_&&this.trailingIcon_.setAriaLabel(e)},t.prototype.setTrailingIconContent=function(e){this.trailingIcon_&&this.trailingIcon_.setContent(e)},t.prototype.setCharacterCounter_=function(e){if(this.characterCounter_){var t=this.getNativeInput_().maxLength;if(-1===t)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter_.setCounterValue(e,t)}},t.prototype.isBadInput_=function(){return this.getNativeInput_().validity.badInput||!1},t.prototype.isNativeInputValid_=function(){return this.getNativeInput_().validity.valid},t.prototype.styleValidity_=function(e){var n=t.cssClasses.INVALID;if(e?this.adapter.removeClass(n):this.adapter.addClass(n),this.helperText_){if(this.helperText_.setValidity(e),!this.helperText_.isValidation())return;var r=this.helperText_.isVisible(),a=this.helperText_.getId();r&&a?this.adapter.setInputAttr(TCe.ARIA_DESCRIBEDBY,a):this.adapter.removeInputAttr(TCe.ARIA_DESCRIBEDBY)}},t.prototype.styleFocused_=function(e){var n=t.cssClasses.FOCUSED;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.styleDisabled_=function(e){var n=t.cssClasses,r=n.DISABLED,a=n.INVALID;e?(this.adapter.addClass(r),this.adapter.removeClass(a)):this.adapter.removeClass(r),this.leadingIcon_&&this.leadingIcon_.setDisabled(e),this.trailingIcon_&&this.trailingIcon_.setDisabled(e)},t.prototype.styleFloating_=function(e){var n=t.cssClasses.LABEL_FLOATING;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.getNativeInput_=function(){return(this.adapter?this.adapter.getNativeInput():null)||{disabled:!1,maxLength:-1,required:!1,type:"input",validity:{badInput:!1,valid:!0},value:""}},t}(SCe),LCe={ROOT:"mdc-text-field-character-counter"},zCe={ROOT_SELECTOR:"."+LCe.ROOT},BCe=function(e){function t(n){return e.call(this,ZEe(ZEe({},t.defaultAdapter),n))||this}return XEe(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return LCe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return zCe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{setContent:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setCounterValue=function(e,t){e=Math.min(e,t),this.adapter.setContent(e+" / "+t)},t}(SCe),WCe=function(t){var n=JEe((0,e.useState)(!1),2),r=n[0],a=n[1],i=JEe((0,e.useState)(0),2),o=i[0],s=i[1],u=JEe((0,e.useState)(),2),c=u[0],l=u[1],d=JEe((0,e.useState)(!1),2),f=d[0],p=d[1],h=JEe((0,e.useState)(!1),2),m=h[0],v=h[1],g=(0,e.useRef)(),y=function(e){g.current=e},b=(0,e.useRef)(),x=(0,e.useRef)(),A=(0,e.useRef)(),k=function(t){var n=JEe((0,e.useState)(),2),r=n[0],a=n[1],i=fu({props:t,api:function(e){var t=e.foundation;return{getFoundation:function(){return t}}},elements:{},foundation:function(){return new BCe({setContent:function(e){a(e)}})}}),o=(i.foundation,YEe(i,["foundation"]));return ZEe({content:r},o)}({apiRef:t.characterCount?y:void 0}).content,w=fu({props:t,elements:{rootEl:!0,inputEl:!0},foundation:function(e){var t=e.rootEl,n=e.inputEl,r=e.getProps;return new DCe(ZEe(ZEe(ZEe(ZEe({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},hasClass:function(e){return t.hasClass(e)},registerTextFieldInteractionHandler:function(e,n){return t.addEventListener(e,n)},deregisterTextFieldInteractionHandler:function(e,n){return t.removeEventListener(e,n)},registerValidationAttributeChangeHandler:function(e){if(n.ref){var t=new MutationObserver((function(t){return e(function(e){return e.map((function(e){return e.attributeName}))}(t))})),r=n.ref;return r&&t.observe(r,{attributes:!0}),t}return{}},deregisterValidationAttributeChangeHandler:function(e){e&&e.disconnect()},isFocused:function(){return document.activeElement===n.ref}},{registerInputInteractionHandler:function(e,t){return n.addEventListener(e,t)},deregisterInputInteractionHandler:function(e,t){return n.removeEventListener(e,t)},getNativeInput:function(){return n.ref}}),{shakeLabel:function(e){return p(e)},floatLabel:function(e){var t;v(null!==(t=r().floatLabel)&&void 0!==t?t:e)},hasLabel:function(){return!!r().label},getLabelWidth:function(){var e;return(null===(e=A.current)||void 0===e?void 0:e.getWidth())||0}}),{activateLineRipple:function(){a(!0)},deactivateLineRipple:function(){a(!1)},setLineRippleTransformOrigin:function(e){s(e)}}),{notchOutline:function(e){l(e)},closeOutline:function(){var e;null!==(e=r().floatLabel)&&void 0!==e||l(void 0)},hasOutline:function(){return!!r().outlined}}),{characterCounter:g.current?g.current.getFoundation():void 0,helperText:void 0,leadingIcon:b.current?b.current.getFoundation():void 0,trailingIcon:x.current?x.current.getFoundation():void 0})}}),S=w.foundation,I=YEe(w,["foundation"]),E=S.getValue();return(0,e.useEffect)((function(){void 0!==t.value&&t.value!==E&&S.setValue(String(t.value))}),[t.value,S,E]),(0,e.useEffect)((function(){void 0!==t.floatLabel&&(S.notchOutline(t.floatLabel),S.adapter_.floatLabel(t.floatLabel))}),[S,t.floatLabel]),ZEe({shakeLabel:f,floatLabel:m,notchWidth:c,lineRippleActive:r,lineRippleCenter:o,setCharacterCounter:y,setLeadingIcon:function(e){return b.current=e},setTrailingIcon:function(e){return x.current=e},setFloatingLabel:function(e){return A.current=e},characterCountContent:k},I)},jCe=Ps((function(t,n){var r=t.label,a=t.style,i=t.outlined,o=t.align,s=t.invalid,u=t.disabled,c=t.helpText,l=t.children,d=t.textarea,f=t.inputRef,p=t.characterCount,h=t.icon,m=t.trailingIcon,v=t.rootProps,g=void 0===v?{}:v,y=(t.foundationRef,t.ripple,t.prefix),b=t.suffix,x=t.resizeable,A=(t.floatLabel,YEe(t,["label","style","outlined","align","invalid","disabled","helpText","children","textarea","inputRef","characterCount","icon","trailingIcon","rootProps","foundationRef","ripple","prefix","suffix","resizeable","floatLabel"])),k=WCe(t),w=k.rootEl,S=k.inputEl,I=k.shakeLabel,E=k.floatLabel,C=k.notchWidth,N=k.lineRippleActive,T=k.lineRippleCenter,_=k.setLeadingIcon,R=k.setTrailingIcon,M=k.setFloatingLabel,O=k.characterCountContent,F=QEe("textfield",t)+"-label",P=Ms(t,["mdc-text-field","mdc-text-field--upgraded",{"mdc-text-field--filled":!i,"mdc-text-field--textarea":d,"mdc-text-field--outlined":i,"mdc-text-field--invalid":s,"mdc-text-field--disabled":u,"mdc-text-field--with-leading-icon":!!h,"mdc-text-field--with-trailing-icon":!!m,"mdc-text-field--no-label":!r,"mdc-text-field--end-aligned":"end"===o,"mdc-text-field--with-internal-counter":d&&p}]),D=function(t,n){return e.createElement(KCe,{apiRef:function(e){"leading"===n?_(e):R(e)},position:n,tabIndex:"trailing"===n?0:void 0,icon:t})},L=r?e.createElement(fCe,{shake:I,float:E,apiRef:M,id:F},r):null,z=p?e.createElement("div",{className:"mdc-text-field-character-counter"},O):null,B=x?e.createElement("span",{className:"mdc-text-field__resizer"},e.createElement(Rs,ZEe({},A,{element:S,className:"mdc-text-field__input",disabled:u,tag:"textarea",ref:f})),z):e.createElement(e.Fragment,null,e.createElement(Rs,ZEe({},A,{element:S,className:"mdc-text-field__input",disabled:u,tag:"textarea",ref:f})),z);return e.createElement(e.Fragment,null,e.createElement(UCe,ZEe({},g,{element:w,style:a,className:P,ref:n,"aria-labelledby":F}),!!h&&D(h,"leading"),l,e.createElement(VCe,null),!!y&&!d&&e.createElement(HCe,{prefix:y}),d?B:e.createElement(Rs,ZEe({},A,{element:S,className:"mdc-text-field__input",disabled:u,tag:"input",ref:f})),!!b&&!d&&e.createElement(GCe,{suffix:b}),i?e.createElement(e.Fragment,null,e.createElement(ACe,{notch:C},L),!!m&&D(m,"trailing")):e.createElement(e.Fragment,null,L,!!m&&D(m,"trailing"),e.createElement(iCe,{active:N,center:T}))),function(t){if(!(!!c||p&&!d))return null;var n="object"===typeof c&&!e.isValidElement(c);return e.createElement("div",{className:"mdc-text-field-helper-line"},c&&n?e.createElement(qCe,ZEe({},c)):e.createElement(qCe,null,c),!d&&t)}(z))})),VCe=e.memo((function(){return e.createElement("span",{className:"mdc-text-field__ripple"})})),UCe=Tu({surface:!1})(e.forwardRef((function(t,n){return e.createElement(Rs,ZEe({},t,{tag:"label",ref:n}))}))),HCe=e.memo((function(t){var n=t.prefix;return e.createElement("span",{className:"mdc-text-field__affix mdc-text-field__affix--prefix"},n)})),GCe=e.memo((function(t){var n=t.suffix;return e.createElement("span",{className:"mdc-text-field__affix mdc-text-field__affix--suffix"},n)})),qCe=Ps((function(t,n){var r=t.persistent,a=t.validationMsg,i=YEe(t,["persistent","validationMsg"]),o=Ms(t,["mdc-text-field-helper-text",{"mdc-text-field-helper-text--persistent":r,"mdc-text-field-helper-text--validation-msg":a}]);return e.createElement(Rs,ZEe({tag:"div"},i,{className:o,ref:n}))})),KCe=function(t){t.apiRef;var n=t.position,r=YEe(t,["apiRef","position"]),a=function(e){var t=fu({props:e,elements:{rootEl:!0},api:function(e){var t=e.foundation;return{getFoundation:function(){return t}}},foundation:function(e){var t=e.rootEl,n=e.emit,r=new NCe({getAttr:function(e){return t.getProp(e)},setAttr:function(e,n){return t.setProp(e,n)},removeAttr:function(e){return t.removeProp(e)},setContent:function(e){t.setProp("icon",e)},registerInteractionHandler:function(e,n){return t.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.removeEventListener(e,n)},notifyIconAction:function(){return n("onClick",{},!0)}});return r}}),n=(t.foundation,YEe(t,["foundation"]));return ZEe({},n)}(t).rootEl,i=Ms(t,["mdc-text-field__icon",{"mdc-text-field__icon--trailing":"trailing"===n,"mdc-text-field__icon--leading":"leading"===n}]);return e.createElement(Ou,ZEe({},a.props(ZEe(ZEe({},r),{className:i}))))};KCe.displayName="TextFieldIcon";n(2924);var XCe=function(e,t){return XCe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},XCe(e,t)};var ZCe=function(){return ZCe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ZCe.apply(this,arguments)};function YCe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var JCe=function(e,t){return JCe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},JCe(e,t)};var QCe=function(){return QCe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},QCe.apply(this,arguments)};var $Ce=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),eNe={ROOT:"mdc-form-field"},tNe={LABEL_SELECTOR:".mdc-form-field > label"},nNe=function(e){function t(n){var r=e.call(this,QCe(QCe({},t.defaultAdapter),n))||this;return r.click=function(){r.handleClick()},r}return function(e,t){function n(){this.constructor=e}JCe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return eNe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return tNe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{activateInputRipple:function(){},deactivateInputRipple:function(){},deregisterInteractionHandler:function(){},registerInteractionHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter.registerInteractionHandler("click",this.click)},t.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("click",this.click)},t.prototype.handleClick=function(){var e=this;this.adapter.activateInputRipple(),requestAnimationFrame((function(){e.adapter.deactivateInputRipple()}))},t}($Ce),rNe=Ps((function(t,n){!function(e){fu({props:e,elements:{},foundation:function(){return new nNe({registerInteractionHandler:function(e,t){},deregisterInteractionHandler:function(e,t){},activateInputRipple:function(){},deactivateInputRipple:function(){}})}})}(t);t.alignEnd,t.foundationRef;var r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(t,["alignEnd","foundationRef"]),a=Ms(t,["mdc-form-field",{"mdc-form-field--align-end":t.alignEnd}]);return e.createElement(Rs,QCe({},r,{ref:n,className:a}))}));var aNe=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),iNe={CHECKED:"mdc-switch--checked",DISABLED:"mdc-switch--disabled"},oNe={ARIA_CHECKED_ATTR:"aria-checked",NATIVE_CONTROL_SELECTOR:".mdc-switch__native-control",RIPPLE_SURFACE_SELECTOR:".mdc-switch__thumb-underlay"},sNe=function(e){function t(n){return e.call(this,ZCe(ZCe({},t.defaultAdapter),n))||this}return function(e,t){function n(){this.constructor=e}XCe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"strings",{get:function(){return oNe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return iNe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNativeControlChecked:function(){},setNativeControlDisabled:function(){},setNativeControlAttr:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setChecked=function(e){this.adapter.setNativeControlChecked(e),this.updateAriaChecked_(e),this.updateCheckedStyling_(e)},t.prototype.setDisabled=function(e){this.adapter.setNativeControlDisabled(e),e?this.adapter.addClass(iNe.DISABLED):this.adapter.removeClass(iNe.DISABLED)},t.prototype.handleChange=function(e){var t=e.target;this.updateAriaChecked_(t.checked),this.updateCheckedStyling_(t.checked)},t.prototype.updateCheckedStyling_=function(e){e?this.adapter.addClass(iNe.CHECKED):this.adapter.removeClass(iNe.CHECKED)},t.prototype.updateAriaChecked_=function(e){this.adapter.setNativeControlAttr(oNe.ARIA_CHECKED_ATTR,""+!!e)},t}(aNe),uNe=function(t){var n=function(t){var n=t.className,r=t.style,a=t.rootProps,i=t.label,o=t.children,s=t.disabled,u=t.label||t.children,c=QEe("toggle-",t),l=u?{disabled:s}:Ss({className:n,style:r,disabled:s},a);return{id:c,renderToggle:function(t){return u?e.createElement(rNe,Ss({},a,{className:n,style:r}),t,e.createElement("label",{id:c+"label",htmlFor:c},i,o)):t},toggleRootProps:l}}(t),r=n.renderToggle,a=n.toggleRootProps,i=n.id,o=fu({props:t,elements:{rootEl:!0,checkboxEl:!0},foundation:function(e){var t=e.rootEl,n=e.checkboxEl;return new sNe({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},setNativeControlChecked:function(e){return n.setProp("checked",e)},setNativeControlDisabled:function(e){return n.setProp("disabled",e)},setNativeControlAttr:function(e,n){return t.setProp(e,n)}})}}),s=o.foundation,u=YCe(o,["foundation"]),c=u.checkboxEl;(0,e.useEffect)((function(){c.ref&&s.updateCheckedStyling_(c.ref.checked),c.ref&&s.setDisabled(c.ref.disabled)}),[c.ref,s]),(0,e.useEffect)((function(){void 0!==t.checked&&s.updateCheckedStyling_(t.checked)}),[t.checked,s]),(0,e.useEffect)((function(){void 0!==t.disabled&&s.setDisabled(t.disabled)}),[t.disabled,s]);return c.setProp("onChange",(function(e){var n;s.handleChange(e),null===(n=t.onChange)||void 0===n||n.call(t,e)}),!0),ZCe({foundation:s,renderToggle:r,toggleRootProps:a,id:i},u)},cNe=Ps((function(t,n){var r,a=uNe(t),i=a.renderToggle,o=a.id,s=a.toggleRootProps,u=a.rootEl,c=a.checkboxEl,l=Ms(s,["mdc-switch"]),d=(t.children,t.className,t.label,t.style,t.inputRef),f=(t.foundationRef,YCe(t,["children","className","label","style","inputRef","foundationRef"]));return i(e.createElement(Rs,ZCe({},u.props(ZCe(ZCe({},s),{className:l})),{ref:n}),e.createElement(lNe,null),e.createElement(pNe,null,e.createElement(fNe,null),e.createElement("input",ZCe({},c.props(ZCe(ZCe({},f),{className:"mdc-switch__native-control"})),{type:"checkbox",id:o,ref:Os(c.setRef,d),role:"switch","aria-checked":null!==(r=f.checked)&&void 0!==r?r:f["aria-checked"]}))),e.createElement(dNe,null)))})),lNe=e.memo((function(){return e.createElement("div",{className:"mdc-switch__track"})})),dNe=e.memo((function(){return e.createElement("div",{className:"mdc-switch__knob"})})),fNe=e.memo((function(){return e.createElement("div",{className:"mdc-switch__thumb"})})),pNe=Tu({unbounded:!0,surface:!1})((function(t){var n=t.className,r=YCe(t,["className"]);return e.createElement("div",ZCe({className:St()(n,"mdc-switch__thumb-underlay")},r))})),hNe=(n(8959),n(4646)),mNe=n(684),vNe=n(420),gNe=n(6583),yNe=n(4401),bNe=n(5192),xNe=n.n(bNe);function ANe(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function kNe(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function wNe(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function SNe(e,t){for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}ANe.__suppressDeprecationWarning=!0,kNe.__suppressDeprecationWarning=!0,wNe.__suppressDeprecationWarning=!0;var INe=n(1684),ENe=n.n(INe);function CNe(e,t,n,r){var a=dt.unstable_batchedUpdates?function(e){dt.unstable_batchedUpdates(n,e)}:n;return ENe()(e,t,a,r)}function NNe(e){return NNe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NNe(e)}function TNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function RNe(e,t){return RNe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},RNe(e,t)}function MNe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(A_e){return!1}}();return function(){var n,r=FNe(e);if(t){var a=FNe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ONe(this,n)}}function ONe(e,t){return!t||"object"!==NNe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function FNe(e){return FNe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},FNe(e)}var PNe=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RNe(e,t)}(i,e);var t,n,r,a=MNe(i);function i(){var e;TNe(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).removeContainer=function(){e.container&&(dt.unmountComponentAtNode(e.container),e.container.parentNode.removeChild(e.container),e.container=null)},e.renderComponent=function(t,n){var r=e.props,a=r.visible,i=r.getComponent,o=r.forceRender,s=r.getContainer,u=r.parent;(a||u._component||o)&&(e.container||(e.container=s()),dt.unstable_renderSubtreeIntoContainer(u,i(t),e.container,(function(){n&&n.call(this)})))},e}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.autoMount&&this.renderComponent()}},{key:"componentDidUpdate",value:function(){this.props.autoMount&&this.renderComponent()}},{key:"componentWillUnmount",value:function(){this.props.autoDestroy&&this.removeContainer()}},{key:"render",value:function(){return this.props.children({renderComponent:this.renderComponent,removeContainer:this.removeContainer})}}])&&_Ne(t.prototype,n),r&&_Ne(t,r),i}(e.Component);function DNe(e){return DNe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DNe(e)}function LNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zNe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function BNe(e,t){return BNe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},BNe(e,t)}function WNe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(A_e){return!1}}();return function(){var n,r=VNe(e);if(t){var a=VNe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return jNe(this,n)}}function jNe(e,t){return!t||"object"!==DNe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function VNe(e){return VNe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},VNe(e)}PNe.propTypes={autoMount:xNe().bool,autoDestroy:xNe().bool,visible:xNe().bool,forceRender:xNe().bool,parent:xNe().any,getComponent:xNe().func.isRequired,getContainer:xNe().func.isRequired,children:xNe().func.isRequired},PNe.defaultProps={autoMount:!0,autoDestroy:!0,forceRender:!1};var UNe=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BNe(e,t)}(i,e);var t,n,r,a=WNe(i);function i(){return LNe(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){this.createContainer()}},{key:"componentDidUpdate",value:function(e){var t=this.props.didUpdate;t&&t(e)}},{key:"componentWillUnmount",value:function(){this.removeContainer()}},{key:"createContainer",value:function(){this._container=this.props.getContainer(),this.forceUpdate()}},{key:"removeContainer",value:function(){this._container&&this._container.parentNode.removeChild(this._container)}},{key:"render",value:function(){return this._container?dt.createPortal(this.props.children,this._container):null}}])&&zNe(t.prototype,n),r&&zNe(t,r),i}(e.Component);function HNe(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function GNe(e,t){this[e]=t}UNe.propTypes={getContainer:xNe().func.isRequired,children:xNe().node.isRequired,didUpdate:xNe().func};var qNe=n(7996);function KNe(e){return e&&"object"===typeof e&&e.window===e}function XNe(e,t){var n=Math.floor(e),r=Math.floor(t);return Math.abs(n-r)<=1}function ZNe(e,t){e!==document.activeElement&&SNe(t,e)&&e.focus()}function YNe(e){return"function"===typeof e&&e?e():null}function JNe(e){return"object"===typeof e&&e?e:null}var QNe=function(t){function n(){var e,t,r,a;(0,vNe.Z)(this,n);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=r=(0,gNe.Z)(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(o))),r.forceAlign=function(){var e=r.props,t=e.disabled,n=e.target,a=e.align,i=e.onAlign;if(!t&&n){var o=dt.findDOMNode(r),s=void 0,u=YNe(n),c=JNe(n),l=document.activeElement;u?s=Awe(o,u,a):c&&(s=kwe(o,c,a)),ZNe(l,o),i&&i(o,s)}},a=t,(0,gNe.Z)(r,a)}return(0,yNe.Z)(n,t),(0,qNe.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props;this.forceAlign(),!e.disabled&&e.monitorWindowResize&&this.startMonitorWindowResize()}},{key:"componentDidUpdate",value:function(e){var t=!1,n=this.props;if(!n.disabled){var r=dt.findDOMNode(this),a=r?r.getBoundingClientRect():null;if(e.disabled)t=!0;else{var i=YNe(e.target),o=YNe(n.target),s=JNe(e.target),u=JNe(n.target);KNe(i)&&KNe(o)?t=!1:(i!==o||i&&!o&&u||s&&u&&o||u&&!function(e,t){return e===t||!(!e||!t)&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY)}(s,u))&&(t=!0);var c=this.sourceRect||{};t||!r||XNe(c.width,a.width)&&XNe(c.height,a.height)||(t=!0)}this.sourceRect=a}t&&this.forceAlign(),n.monitorWindowResize&&!n.disabled?this.startMonitorWindowResize():this.stopMonitorWindowResize()}},{key:"componentWillUnmount",value:function(){this.stopMonitorWindowResize()}},{key:"startMonitorWindowResize",value:function(){this.resizeHandler||(this.bufferMonitor=function(e,t){var n=void 0;function r(){n&&(clearTimeout(n),n=null)}function a(){r(),n=setTimeout(e,t)}return a.clear=r,a}(this.forceAlign,this.props.monitorBufferTime),this.resizeHandler=CNe(window,"resize",this.bufferMonitor))}},{key:"stopMonitorWindowResize",value:function(){this.resizeHandler&&(this.bufferMonitor.clear(),this.resizeHandler.remove(),this.resizeHandler=null)}},{key:"render",value:function(){var t=this,n=this.props,r=n.childrenProps,a=n.children,i=e.Children.only(a);if(r){var o={};return Object.keys(r).forEach((function(e){o[e]=t.props[r[e]]})),e.cloneElement(i,o)}return i}}]),n}(e.Component);QNe.propTypes={childrenProps:xNe().object,align:xNe().object.isRequired,target:xNe().oneOfType([xNe().func,xNe().shape({clientX:xNe().number,clientY:xNe().number,pageX:xNe().number,pageY:xNe().number})]),onAlign:xNe().func,monitorBufferTime:xNe().number,monitorWindowResize:xNe().bool,disabled:xNe().bool,children:xNe().any},QNe.defaultProps={target:function(){return window},monitorBufferTime:50,monitorWindowResize:!1,disabled:!1};var $Ne=QNe,eTe=n(386),tTe=function(t){var n=t.prototype;if(!n||!n.isReactComponent)throw new Error("Can only polyfill class components");return"function"!==typeof n.componentWillReceiveProps?t:e.Profiler?(n.UNSAFE_componentWillReceiveProps=n.componentWillReceiveProps,delete n.componentWillReceiveProps,t):t};function nTe(t){var n=[];return e.Children.forEach(t,(function(e){n.push(e)})),n}function rTe(e,t){var n=null;return e&&e.forEach((function(e){n||e&&e.key===t&&(n=e)})),n}function aTe(e,t,n){var r=null;return e&&e.forEach((function(e){if(e&&e.key===t&&e.props[n]){if(r)throw new Error("two child with same key for <rc-animate> children");r=e}})),r}var iTe=n(5259),oTe={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},sTe={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},uTe=[],cTe=[];function lTe(e,t,n){e.addEventListener(t,n,!1)}function dTe(e,t,n){e.removeEventListener(t,n,!1)}"undefined"!==typeof window&&"undefined"!==typeof document&&function(){var e=document.createElement("div").style;function t(t,n){for(var r in t)if(t.hasOwnProperty(r)){var a=t[r];for(var i in a)if(i in e){n.push(a[i]);break}}}"AnimationEvent"in window||(delete oTe.animationstart.animation,delete sTe.animationend.animation),"TransitionEvent"in window||(delete oTe.transitionstart.transition,delete sTe.transitionend.transition),t(oTe,uTe),t(sTe,cTe)}();var fTe={startEvents:uTe,addStartEventListener:function(e,t){0!==uTe.length?uTe.forEach((function(n){lTe(e,n,t)})):window.setTimeout(t,0)},removeStartEventListener:function(e,t){0!==uTe.length&&uTe.forEach((function(n){dTe(e,n,t)}))},endEvents:cTe,addEndEventListener:function(e,t){0!==cTe.length?cTe.forEach((function(n){lTe(e,n,t)})):window.setTimeout(t,0)},removeEndEventListener:function(e,t){0!==cTe.length&&cTe.forEach((function(n){dTe(e,n,t)}))}},pTe=fTe,hTe=n(3105),mTe=n.n(hTe),vTe=0!==pTe.endEvents.length,gTe=["Webkit","Moz","O","ms"],yTe=["-webkit-","-moz-","-o-","ms-",""];function bTe(e,t){for(var n=window.getComputedStyle(e,null),r="",a=0;a<yTe.length&&!(r=n.getPropertyValue(yTe[a]+t));a++);return r}function xTe(e){if(vTe){var t=parseFloat(bTe(e,"transition-delay"))||0,n=parseFloat(bTe(e,"transition-duration"))||0,r=parseFloat(bTe(e,"animation-delay"))||0,a=parseFloat(bTe(e,"animation-duration"))||0,i=Math.max(n+t,a+r);e.rcEndAnimTimeout=setTimeout((function(){e.rcEndAnimTimeout=null,e.rcEndListener&&e.rcEndListener()}),1e3*i+200)}}function ATe(e){e.rcEndAnimTimeout&&(clearTimeout(e.rcEndAnimTimeout),e.rcEndAnimTimeout=null)}var kTe=function(e,t,n){var r="object"===("undefined"===typeof t?"undefined":(0,iTe.default)(t)),a=r?t.name:t,i=r?t.active:t+"-active",o=n,s=void 0,u=void 0,c=mTe()(e);return n&&"[object Object]"===Object.prototype.toString.call(n)&&(o=n.end,s=n.start,u=n.active),e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),ATe(e),c.remove(a),c.remove(i),pTe.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,o&&o())},pTe.addEndEventListener(e,e.rcEndListener),s&&s(),c.add(a),e.rcAnimTimeout=setTimeout((function(){e.rcAnimTimeout=null,c.add(i),u&&setTimeout(u,0),xTe(e)}),30),{stop:function(){e.rcEndListener&&e.rcEndListener()}}};kTe.style=function(e,t,n){e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),ATe(e),pTe.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,n&&n())},pTe.addEndEventListener(e,e.rcEndListener),e.rcAnimTimeout=setTimeout((function(){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);e.rcAnimTimeout=null,xTe(e)}),0)},kTe.setTransition=function(e,t,n){var r=t,a=n;void 0===n&&(a=r,r=""),r=r||"",gTe.forEach((function(t){e.style[t+"Transition"+r]=a}))},kTe.isCssAnimationSupported=vTe;var wTe=kTe,STe={isAppearSupported:function(e){return e.transitionName&&e.transitionAppear||e.animation.appear},isEnterSupported:function(e){return e.transitionName&&e.transitionEnter||e.animation.enter},isLeaveSupported:function(e){return e.transitionName&&e.transitionLeave||e.animation.leave},allowAppearCallback:function(e){return e.transitionAppear||e.animation.appear},allowEnterCallback:function(e){return e.transitionEnter||e.animation.enter},allowLeaveCallback:function(e){return e.transitionLeave||e.animation.leave}},ITe={enter:"transitionEnter",appear:"transitionAppear",leave:"transitionLeave"},ETe=function(e){function t(){return(0,vNe.Z)(this,t),(0,gNe.Z)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,yNe.Z)(t,e),(0,qNe.Z)(t,[{key:"componentWillUnmount",value:function(){this.stop()}},{key:"componentWillEnter",value:function(e){STe.isEnterSupported(this.props)?this.transition("enter",e):e()}},{key:"componentWillAppear",value:function(e){STe.isAppearSupported(this.props)?this.transition("appear",e):e()}},{key:"componentWillLeave",value:function(e){STe.isLeaveSupported(this.props)?this.transition("leave",e):e()}},{key:"transition",value:function(e,t){var n=this,r=dt.findDOMNode(this),a=this.props,i=a.transitionName,o="object"===typeof i;this.stop();var s=function(){n.stopper=null,t()};if((vTe||!a.animation[e])&&i&&a[ITe[e]]){var u=o?i[e]:i+"-"+e,c=u+"-active";o&&i[e+"Active"]&&(c=i[e+"Active"]),this.stopper=wTe(r,{name:u,active:c},s)}else this.stopper=a.animation[e](r,s)}},{key:"stop",value:function(){var e=this.stopper;e&&(this.stopper=null,e.stop())}},{key:"render",value:function(){return this.props.children}}]),t}(e.Component);ETe.propTypes={children:xNe().any,animation:xNe().any,transitionName:xNe().any};var CTe=ETe,NTe="rc_animate_"+Date.now();function TTe(t){var n=t.children;return e.isValidElement(n)&&!n.key?e.cloneElement(n,{key:NTe}):n}function _Te(){}var RTe=function(t){function n(e){(0,vNe.Z)(this,n);var t=(0,gNe.Z)(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return MTe.call(t),t.currentlyAnimatingKeys={},t.keysToEnter=[],t.keysToLeave=[],t.state={children:nTe(TTe(e))},t.childrenRefs={},t}return(0,yNe.Z)(n,t),(0,qNe.Z)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.showProp,n=this.state.children;t&&(n=n.filter((function(e){return!!e.props[t]}))),n.forEach((function(t){t&&e.performAppear(t.key)}))}},{key:"componentWillReceiveProps",value:function(t){var n=this;this.nextProps=t;var r=nTe(TTe(t)),a=this.props;a.exclusive&&Object.keys(this.currentlyAnimatingKeys).forEach((function(e){n.stop(e)}));var i=a.showProp,o=this.currentlyAnimatingKeys,s=a.exclusive?nTe(TTe(a)):this.state.children,u=[];i?(s.forEach((function(t){var n=t&&rTe(r,t.key),a=void 0;(a=n&&n.props[i]||!t.props[i]?n:e.cloneElement(n||t,(0,eTe.Z)({},i,!0)))&&u.push(a)})),r.forEach((function(e){e&&rTe(s,e.key)||u.push(e)}))):u=function(e,t){var n=[],r={},a=[];return e.forEach((function(e){e&&rTe(t,e.key)?a.length&&(r[e.key]=a,a=[]):a.push(e)})),t.forEach((function(e){e&&Object.prototype.hasOwnProperty.call(r,e.key)&&(n=n.concat(r[e.key])),n.push(e)})),n=n.concat(a)}(s,r),this.setState({children:u}),r.forEach((function(e){var t=e&&e.key;if(!e||!o[t]){var r=e&&rTe(s,t);if(i){var a=e.props[i];if(r)!aTe(s,t,i)&&a&&n.keysToEnter.push(t);else a&&n.keysToEnter.push(t)}else r||n.keysToEnter.push(t)}})),s.forEach((function(e){var t=e&&e.key;if(!e||!o[t]){var a=e&&rTe(r,t);if(i){var s=e.props[i];if(a)!aTe(r,t,i)&&s&&n.keysToLeave.push(t);else s&&n.keysToLeave.push(t)}else a||n.keysToLeave.push(t)}}))}},{key:"componentDidUpdate",value:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)}},{key:"isValidChildByKey",value:function(e,t){var n=this.props.showProp;return n?aTe(e,t,n):rTe(e,t)}},{key:"stop",value:function(e){delete this.currentlyAnimatingKeys[e];var t=this.childrenRefs[e];t&&t.stop()}},{key:"render",value:function(){var t=this,n=this.props;this.nextProps=n;var r=this.state.children,a=null;r&&(a=r.map((function(r){if(null===r||void 0===r)return r;if(!r.key)throw new Error("must set key for <rc-animate> children");return e.createElement(CTe,{key:r.key,ref:function(e){t.childrenRefs[r.key]=e},animation:n.animation,transitionName:n.transitionName,transitionEnter:n.transitionEnter,transitionAppear:n.transitionAppear,transitionLeave:n.transitionLeave},r)})));var i=n.component;if(i){var o=n;return"string"===typeof i&&(o=(0,hNe.Z)({className:n.className,style:n.style},n.componentProps)),e.createElement(i,o,a)}return a[0]||null}}]),n}(e.Component);RTe.isAnimate=!0,RTe.propTypes={className:xNe().string,style:xNe().object,component:xNe().any,componentProps:xNe().object,animation:xNe().object,transitionName:xNe().oneOfType([xNe().string,xNe().object]),transitionEnter:xNe().bool,transitionAppear:xNe().bool,exclusive:xNe().bool,transitionLeave:xNe().bool,onEnd:xNe().func,onEnter:xNe().func,onLeave:xNe().func,onAppear:xNe().func,showProp:xNe().string,children:xNe().node},RTe.defaultProps={animation:{},component:"span",componentProps:{},transitionEnter:!0,transitionLeave:!0,transitionAppear:!1,onEnd:_Te,onEnter:_Te,onLeave:_Te,onAppear:_Te};var MTe=function(){var e=this;this.performEnter=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillEnter(e.handleDoneAdding.bind(e,t,"enter")))},this.performAppear=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillAppear(e.handleDoneAdding.bind(e,t,"appear")))},this.handleDoneAdding=function(t,n){var r=e.props;if(delete e.currentlyAnimatingKeys[t],!r.exclusive||r===e.nextProps){var a=nTe(TTe(r));e.isValidChildByKey(a,t)?"appear"===n?STe.allowAppearCallback(r)&&(r.onAppear(t),r.onEnd(t,!0)):STe.allowEnterCallback(r)&&(r.onEnter(t),r.onEnd(t,!0)):e.performLeave(t)}},this.performLeave=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillLeave(e.handleDoneLeaving.bind(e,t)))},this.handleDoneLeaving=function(t){var n=e.props;if(delete e.currentlyAnimatingKeys[t],!n.exclusive||n===e.nextProps){var r=nTe(TTe(n));if(e.isValidChildByKey(r,t))e.performEnter(t);else{var a=function(){STe.allowLeaveCallback(n)&&(n.onLeave(t),n.onEnd(t,!1))};!function(e,t,n){var r=e.length===t.length;return r&&e.forEach((function(e,a){var i=t[a];e&&i&&(e&&!i||!e&&i||e.key!==i.key||n&&e.props[n]!==i.props[n])&&(r=!1)})),r}(e.state.children,r,n.showProp)?e.setState({children:r},a):a()}}}},OTe=tTe(RTe),FTe=function(t){function n(){return(0,vNe.Z)(this,n),(0,gNe.Z)(this,t.apply(this,arguments))}return(0,yNe.Z)(n,t),n.prototype.shouldComponentUpdate=function(e){return e.hiddenClassName||e.visible},n.prototype.render=function(){var t=this.props,n=t.hiddenClassName,r=t.visible,a=(0,mNe.Z)(t,["hiddenClassName","visible"]);return n||e.Children.count(a.children)>1?(!r&&n&&(a.className+=" "+n),e.createElement("div",a)):e.Children.only(a.children)},n}(e.Component);FTe.propTypes={children:xNe().any,className:xNe().string,visible:xNe().bool,hiddenClassName:xNe().string};var PTe=FTe,DTe=function(t){function n(){return(0,vNe.Z)(this,n),(0,gNe.Z)(this,t.apply(this,arguments))}return(0,yNe.Z)(n,t),n.prototype.render=function(){var t=this.props,n=t.className;return t.visible||(n+=" "+t.hiddenClassName),e.createElement("div",{className:n,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:t.style},e.createElement(PTe,{className:t.prefixCls+"-content",visible:t.visible},t.children))},n}(e.Component);DTe.propTypes={hiddenClassName:xNe().string,className:xNe().string,prefixCls:xNe().string,onMouseEnter:xNe().func,onMouseLeave:xNe().func,onMouseDown:xNe().func,onTouchStart:xNe().func,children:xNe().any};var LTe=DTe,zTe=function(t){function n(e){(0,vNe.Z)(this,n);var r=(0,gNe.Z)(this,t.call(this,e));return BTe.call(r),r.state={stretchChecked:!1,targetWidth:void 0,targetHeight:void 0},r.savePopupRef=GNe.bind(r,"popupInstance"),r.saveAlignRef=GNe.bind(r,"alignInstance"),r}return(0,yNe.Z)(n,t),n.prototype.componentDidMount=function(){this.rootNode=this.getPopupDomNode(),this.setStretchSize()},n.prototype.componentDidUpdate=function(){this.setStretchSize()},n.prototype.getPopupDomNode=function(){return dt.findDOMNode(this.popupInstance)},n.prototype.getMaskTransitionName=function(){var e=this.props,t=e.maskTransitionName,n=e.maskAnimation;return!t&&n&&(t=e.prefixCls+"-"+n),t},n.prototype.getTransitionName=function(){var e=this.props,t=e.transitionName;return!t&&e.animation&&(t=e.prefixCls+"-"+e.animation),t},n.prototype.getClassName=function(e){return this.props.prefixCls+" "+this.props.className+" "+e},n.prototype.getPopupElement=function(){var t=this,n=this.savePopupRef,r=this.state,a=r.stretchChecked,i=r.targetHeight,o=r.targetWidth,s=this.props,u=s.align,c=s.visible,l=s.prefixCls,d=s.style,f=s.getClassNameFromAlign,p=s.destroyPopupOnHide,h=s.stretch,m=s.children,v=s.onMouseEnter,g=s.onMouseLeave,y=s.onMouseDown,b=s.onTouchStart,x=this.getClassName(this.currentAlignClassName||f(u)),A=l+"-hidden";c||(this.currentAlignClassName=null);var k={};h&&(-1!==h.indexOf("height")?k.height=i:-1!==h.indexOf("minHeight")&&(k.minHeight=i),-1!==h.indexOf("width")?k.width=o:-1!==h.indexOf("minWidth")&&(k.minWidth=o),a||(k.visibility="hidden",setTimeout((function(){t.alignInstance&&t.alignInstance.forceAlign()}),0)));var w={className:x,prefixCls:l,ref:n,onMouseEnter:v,onMouseLeave:g,onMouseDown:y,onTouchStart:b,style:(0,hNe.Z)({},k,d,this.getZIndexStyle())};return p?e.createElement(OTe,{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName()},c?e.createElement($Ne,{target:this.getAlignTarget(),key:"popup",ref:this.saveAlignRef,monitorWindowResize:!0,align:u,onAlign:this.onAlign},e.createElement(LTe,(0,hNe.Z)({visible:!0},w),m)):null):e.createElement(OTe,{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName(),showProp:"xVisible"},e.createElement($Ne,{target:this.getAlignTarget(),key:"popup",ref:this.saveAlignRef,monitorWindowResize:!0,xVisible:c,childrenProps:{visible:"xVisible"},disabled:!c,align:u,onAlign:this.onAlign},e.createElement(LTe,(0,hNe.Z)({hiddenClassName:A},w),m)))},n.prototype.getZIndexStyle=function(){var e={},t=this.props;return void 0!==t.zIndex&&(e.zIndex=t.zIndex),e},n.prototype.getMaskElement=function(){var t=this.props,n=void 0;if(t.mask){var r=this.getMaskTransitionName();n=e.createElement(PTe,{style:this.getZIndexStyle(),key:"mask",className:t.prefixCls+"-mask",hiddenClassName:t.prefixCls+"-mask-hidden",visible:t.visible}),r&&(n=e.createElement(OTe,{key:"mask",showProp:"visible",transitionAppear:!0,component:"",transitionName:r},n))}return n},n.prototype.render=function(){return e.createElement("div",null,this.getMaskElement(),this.getPopupElement())},n}(e.Component);zTe.propTypes={visible:xNe().bool,style:xNe().object,getClassNameFromAlign:xNe().func,onAlign:xNe().func,getRootDomNode:xNe().func,align:xNe().any,destroyPopupOnHide:xNe().bool,className:xNe().string,prefixCls:xNe().string,onMouseEnter:xNe().func,onMouseLeave:xNe().func,onMouseDown:xNe().func,onTouchStart:xNe().func,stretch:xNe().string,children:xNe().node,point:xNe().shape({pageX:xNe().number,pageY:xNe().number})};var BTe=function(){var e=this;this.onAlign=function(t,n){var r=e.props,a=r.getClassNameFromAlign(n);e.currentAlignClassName!==a&&(e.currentAlignClassName=a,t.className=e.getClassName(a)),r.onAlign(t,n)},this.setStretchSize=function(){var t=e.props,n=t.stretch,r=t.getRootDomNode,a=t.visible,i=e.state,o=i.stretchChecked,s=i.targetHeight,u=i.targetWidth;if(n&&a){var c=r();if(c){var l=c.offsetHeight,d=c.offsetWidth;s===l&&u===d&&o||e.setState({stretchChecked:!0,targetHeight:l,targetWidth:d})}}else o&&e.setState({stretchChecked:!1})},this.getTargetElement=function(){return e.props.getRootDomNode()},this.getAlignTarget=function(){var t=e.props.point;return t||e.getTargetElement}},WTe=zTe;function jTe(){}var VTe=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"],UTe=!!dt.createPortal,HTe={rcTrigger:xNe().shape({onPopupMouseDown:xNe().func})},GTe=function(t){function n(e){(0,vNe.Z)(this,n);var r=(0,gNe.Z)(this,t.call(this,e));qTe.call(r);var a=void 0;return a="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,r.state={prevPopupVisible:a,popupVisible:a},VTe.forEach((function(e){r["fire"+e]=function(t){r.fireEvents(e,t)}})),r}return(0,yNe.Z)(n,t),n.prototype.getChildContext=function(){return{rcTrigger:{onPopupMouseDown:this.onPopupMouseDown}}},n.prototype.componentDidMount=function(){this.componentDidUpdate({},{popupVisible:this.state.popupVisible})},n.prototype.componentDidUpdate=function(e,t){var n=this.props,r=this.state;if(UTe||this.renderComponent(null,(function(){t.popupVisible!==r.popupVisible&&n.afterPopupVisibleChange(r.popupVisible)})),r.popupVisible){var a=void 0;return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(a=n.getDocument(),this.clickOutsideHandler=CNe(a,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(a=a||n.getDocument(),this.touchOutsideHandler=CNe(a,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(a=a||n.getDocument(),this.contextMenuOutsideHandler1=CNe(a,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=CNe(window,"blur",this.onContextMenuClose)))}this.clearOutsideHandler()},n.prototype.componentWillUnmount=function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout)},n.getDerivedStateFromProps=function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r},n.prototype.getPopupDomNode=function(){return this._component&&this._component.getPopupDomNode?this._component.getPopupDomNode():null},n.prototype.getPopupAlign=function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?function(e,t,n){var r=e[t]||{};return(0,hNe.Z)({},r,n)}(r,t,n):n},n.prototype.setPopupVisible=function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&this.setPoint(t)},n.prototype.delaySetPopupVisible=function(e,t,n){var r=this,a=1e3*t;if(this.clearDelayTimer(),a){var i=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=setTimeout((function(){r.setPopupVisible(e,i),r.clearDelayTimer()}),a)}else this.setPopupVisible(e,n)},n.prototype.clearDelayTimer=function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)},n.prototype.clearOutsideHandler=function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)},n.prototype.createTwoChains=function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire"+e]:t[e]||n[e]},n.prototype.isClickToShow=function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")},n.prototype.isContextMenuToShow=function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")},n.prototype.isClickToHide=function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")},n.prototype.isMouseEnterToShow=function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")},n.prototype.isMouseLeaveToHide=function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")},n.prototype.isFocusToShow=function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")},n.prototype.isBlurToHide=function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")},n.prototype.forcePopupAlign=function(){this.state.popupVisible&&this._component&&this._component.alignInstance&&this._component.alignInstance.forceAlign()},n.prototype.fireEvents=function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)},n.prototype.close=function(){this.setPopupVisible(!1)},n.prototype.render=function(){var t=this,n=this.state.popupVisible,r=this.props,a=r.children,i=r.forceRender,o=r.alignPoint,s=r.className,u=e.Children.only(a),c={key:"trigger"};this.isContextMenuToShow()?c.onContextMenu=this.onContextMenu:c.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(c.onClick=this.onClick,c.onMouseDown=this.onMouseDown,c.onTouchStart=this.onTouchStart):(c.onClick=this.createTwoChains("onClick"),c.onMouseDown=this.createTwoChains("onMouseDown"),c.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(c.onMouseEnter=this.onMouseEnter,o&&(c.onMouseMove=this.onMouseMove)):c.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?c.onMouseLeave=this.onMouseLeave:c.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(c.onFocus=this.onFocus,c.onBlur=this.onBlur):(c.onFocus=this.createTwoChains("onFocus"),c.onBlur=this.createTwoChains("onBlur"));var l=St()(u&&u.props&&u.props.className,s);l&&(c.className=l);var d=e.cloneElement(u,c);if(!UTe)return e.createElement(PNe,{parent:this,visible:n,autoMount:!1,forceRender:i,getComponent:this.getComponent,getContainer:this.getContainer},(function(e){var n=e.renderComponent;return t.renderComponent=n,d}));var f=void 0;return(n||this._component||i)&&(f=e.createElement(UNe,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),[d,f]},n}(e.Component);GTe.propTypes={children:xNe().any,action:xNe().oneOfType([xNe().string,xNe().arrayOf(xNe().string)]),showAction:xNe().any,hideAction:xNe().any,getPopupClassNameFromAlign:xNe().any,onPopupVisibleChange:xNe().func,afterPopupVisibleChange:xNe().func,popup:xNe().oneOfType([xNe().node,xNe().func]).isRequired,popupStyle:xNe().object,prefixCls:xNe().string,popupClassName:xNe().string,className:xNe().string,popupPlacement:xNe().string,builtinPlacements:xNe().object,popupTransitionName:xNe().oneOfType([xNe().string,xNe().object]),popupAnimation:xNe().any,mouseEnterDelay:xNe().number,mouseLeaveDelay:xNe().number,zIndex:xNe().number,focusDelay:xNe().number,blurDelay:xNe().number,getPopupContainer:xNe().func,getDocument:xNe().func,forceRender:xNe().bool,destroyPopupOnHide:xNe().bool,mask:xNe().bool,maskClosable:xNe().bool,onPopupAlign:xNe().func,popupAlign:xNe().object,popupVisible:xNe().bool,defaultPopupVisible:xNe().bool,maskTransitionName:xNe().oneOfType([xNe().string,xNe().object]),maskAnimation:xNe().string,stretch:xNe().string,alignPoint:xNe().bool},GTe.contextTypes=HTe,GTe.childContextTypes=HTe,GTe.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:function(){return""},getDocument:function(){return window.document},onPopupVisibleChange:jTe,afterPopupVisibleChange:jTe,onPopupAlign:jTe,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[]};var qTe=function(){var t=this;this.onMouseEnter=function(e){var n=t.props.mouseEnterDelay;t.fireEvents("onMouseEnter",e),t.delaySetPopupVisible(!0,n,n?null:e)},this.onMouseMove=function(e){t.fireEvents("onMouseMove",e),t.setPoint(e)},this.onMouseLeave=function(e){t.fireEvents("onMouseLeave",e),t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)},this.onPopupMouseEnter=function(){t.clearDelayTimer()},this.onPopupMouseLeave=function(e){e.relatedTarget&&!e.relatedTarget.setTimeout&&t._component&&t._component.getPopupDomNode&&SNe(t._component.getPopupDomNode(),e.relatedTarget)||t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)},this.onFocus=function(e){t.fireEvents("onFocus",e),t.clearDelayTimer(),t.isFocusToShow()&&(t.focusTime=Date.now(),t.delaySetPopupVisible(!0,t.props.focusDelay))},this.onMouseDown=function(e){t.fireEvents("onMouseDown",e),t.preClickTime=Date.now()},this.onTouchStart=function(e){t.fireEvents("onTouchStart",e),t.preTouchTime=Date.now()},this.onBlur=function(e){t.fireEvents("onBlur",e),t.clearDelayTimer(),t.isBlurToHide()&&t.delaySetPopupVisible(!1,t.props.blurDelay)},this.onContextMenu=function(e){e.preventDefault(),t.fireEvents("onContextMenu",e),t.setPopupVisible(!0,e)},this.onContextMenuClose=function(){t.isContextMenuToShow()&&t.close()},this.onClick=function(e){if(t.fireEvents("onClick",e),t.focusTime){var n=void 0;if(t.preClickTime&&t.preTouchTime?n=Math.min(t.preClickTime,t.preTouchTime):t.preClickTime?n=t.preClickTime:t.preTouchTime&&(n=t.preTouchTime),Math.abs(n-t.focusTime)<20)return;t.focusTime=0}t.preClickTime=0,t.preTouchTime=0,t.isClickToShow()&&(t.isClickToHide()||t.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var r=!t.state.popupVisible;(t.isClickToHide()&&!r||r&&t.isClickToShow())&&t.setPopupVisible(!t.state.popupVisible,e)},this.onPopupMouseDown=function(){var e=t.context.rcTrigger,n=void 0===e?{}:e;t.hasPopupMouseDown=!0,clearTimeout(t.mouseDownTimeout),t.mouseDownTimeout=setTimeout((function(){t.hasPopupMouseDown=!1}),0),n.onPopupMouseDown&&n.onPopupMouseDown.apply(n,arguments)},this.onDocumentClick=function(e){if(!t.props.mask||t.props.maskClosable){var n=e.target;SNe((0,dt.findDOMNode)(t),n)||t.hasPopupMouseDown||t.close()}},this.getRootDomNode=function(){return(0,dt.findDOMNode)(t)},this.getPopupClassNameFromAlign=function(e){var n=[],r=t.props,a=r.popupPlacement,i=r.builtinPlacements,o=r.prefixCls,s=r.alignPoint,u=r.getPopupClassNameFromAlign;return a&&i&&n.push(function(e,t,n,r){var a=n.points;for(var i in e)if(e.hasOwnProperty(i)&&HNe(e[i].points,a,r))return t+"-placement-"+i;return""}(i,o,e,s)),u&&n.push(u(e)),n.join(" ")},this.getComponent=function(){var n=t.props,r=n.prefixCls,a=n.destroyPopupOnHide,i=n.popupClassName,o=n.action,s=n.onPopupAlign,u=n.popupAnimation,c=n.popupTransitionName,l=n.popupStyle,d=n.mask,f=n.maskAnimation,p=n.maskTransitionName,h=n.zIndex,m=n.popup,v=n.stretch,g=n.alignPoint,y=t.state,b=y.popupVisible,x=y.point,A=t.getPopupAlign(),k={};return t.isMouseEnterToShow()&&(k.onMouseEnter=t.onPopupMouseEnter),t.isMouseLeaveToHide()&&(k.onMouseLeave=t.onPopupMouseLeave),k.onMouseDown=t.onPopupMouseDown,k.onTouchStart=t.onPopupMouseDown,e.createElement(WTe,(0,hNe.Z)({prefixCls:r,destroyPopupOnHide:a,visible:b,point:g&&x,className:i,action:o,align:A,onAlign:s,animation:u,getClassNameFromAlign:t.getPopupClassNameFromAlign},k,{stretch:v,getRootDomNode:t.getRootDomNode,style:l,mask:d,zIndex:h,transitionName:c,maskAnimation:f,maskTransitionName:p,ref:t.savePopup}),"function"===typeof m?m():m)},this.getContainer=function(){var e=t.props,n=document.createElement("div");return n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",(e.getPopupContainer?e.getPopupContainer((0,dt.findDOMNode)(t)):e.getDocument().body).appendChild(n),n},this.setPoint=function(e){t.props.alignPoint&&e&&t.setState({point:{pageX:e.pageX,pageY:e.pageY}})},this.handlePortalUpdate=function(){t.state.prevPopupVisible!==t.state.popupVisible&&t.props.afterPopupVisibleChange(t.state.popupVisible)},this.savePopup=function(e){t._component=e}};!function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,r=null,a=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?r="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?a="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(a="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==a){var i=e.displayName||e.name,o="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+i+" uses "+o+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==a?"\n  "+a:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=ANe,t.componentWillReceiveProps=kNe),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=wNe;var s=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;s.call(this,e,t,r)}}}(GTe);var KTe=GTe,XTe={adjustX:1,adjustY:1},ZTe=[0,0],YTe={left:{points:["cr","cl"],overflow:XTe,offset:[-4,0],targetOffset:ZTe},right:{points:["cl","cr"],overflow:XTe,offset:[4,0],targetOffset:ZTe},top:{points:["bc","tc"],overflow:XTe,offset:[0,-4],targetOffset:ZTe},bottom:{points:["tc","bc"],overflow:XTe,offset:[0,4],targetOffset:ZTe},topLeft:{points:["bl","tl"],overflow:XTe,offset:[0,-4],targetOffset:ZTe},leftTop:{points:["tr","tl"],overflow:XTe,offset:[-4,0],targetOffset:ZTe},topRight:{points:["br","tr"],overflow:XTe,offset:[0,-4],targetOffset:ZTe},rightTop:{points:["tl","tr"],overflow:XTe,offset:[4,0],targetOffset:ZTe},bottomRight:{points:["tr","br"],overflow:XTe,offset:[0,4],targetOffset:ZTe},rightBottom:{points:["bl","br"],overflow:XTe,offset:[4,0],targetOffset:ZTe},bottomLeft:{points:["tl","bl"],overflow:XTe,offset:[0,4],targetOffset:ZTe},leftBottom:{points:["br","bl"],overflow:XTe,offset:[-4,0],targetOffset:ZTe}},JTe=function(t){function n(){return(0,vNe.Z)(this,n),(0,gNe.Z)(this,t.apply(this,arguments))}return(0,yNe.Z)(n,t),n.prototype.componentDidUpdate=function(){var e=this.props.trigger;e&&e.forcePopupAlign()},n.prototype.render=function(){var t=this.props,n=t.overlay,r=t.prefixCls,a=t.id;return e.createElement("div",{className:r+"-inner",id:a,role:"tooltip"},"function"===typeof n?n():n)},n}(e.Component);JTe.propTypes={prefixCls:xNe().string,overlay:xNe().oneOfType([xNe().node,xNe().func]).isRequired,id:xNe().string,trigger:xNe().any};var QTe=JTe,$Te=function(t){function n(){var r,a,i;(0,vNe.Z)(this,n);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return r=a=(0,gNe.Z)(this,t.call.apply(t,[this].concat(s))),a.getPopupElement=function(){var t=a.props,n=t.arrowContent,r=t.overlay,i=t.prefixCls,o=t.id;return[e.createElement("div",{className:i+"-arrow",key:"arrow"},n),e.createElement(QTe,{key:"content",trigger:a.trigger,prefixCls:i,id:o,overlay:r})]},a.saveTrigger=function(e){a.trigger=e},i=r,(0,gNe.Z)(a,i)}return(0,yNe.Z)(n,t),n.prototype.getPopupDomNode=function(){return this.trigger.getPopupDomNode()},n.prototype.render=function(){var t=this.props,n=t.overlayClassName,r=t.trigger,a=t.mouseEnterDelay,i=t.mouseLeaveDelay,o=t.overlayStyle,s=t.prefixCls,u=t.children,c=t.onVisibleChange,l=t.afterVisibleChange,d=t.transitionName,f=t.animation,p=t.placement,h=t.align,m=t.destroyTooltipOnHide,v=t.defaultVisible,g=t.getTooltipContainer,y=(0,mNe.Z)(t,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer"]),b=(0,hNe.Z)({},y);return"visible"in this.props&&(b.popupVisible=this.props.visible),e.createElement(KTe,(0,hNe.Z)({popupClassName:n,ref:this.saveTrigger,prefixCls:s,popup:this.getPopupElement,action:r,builtinPlacements:YTe,popupPlacement:p,popupAlign:h,getPopupContainer:g,onPopupVisibleChange:c,afterPopupVisibleChange:l,popupTransitionName:d,popupAnimation:f,defaultPopupVisible:v,destroyPopupOnHide:m,mouseLeaveDelay:i,popupStyle:o,mouseEnterDelay:a},b),u)},n}(e.Component);$Te.propTypes={trigger:xNe().any,children:xNe().any,defaultVisible:xNe().bool,visible:xNe().bool,placement:xNe().string,transitionName:xNe().oneOfType([xNe().string,xNe().object]),animation:xNe().any,onVisibleChange:xNe().func,afterVisibleChange:xNe().func,overlay:xNe().oneOfType([xNe().node,xNe().func]).isRequired,overlayStyle:xNe().object,overlayClassName:xNe().string,prefixCls:xNe().string,mouseEnterDelay:xNe().number,mouseLeaveDelay:xNe().number,getTooltipContainer:xNe().func,destroyTooltipOnHide:xNe().bool,align:xNe().object,arrowContent:xNe().any,id:xNe().string},$Te.defaultProps={prefixCls:"rc-tooltip",mouseEnterDelay:0,destroyTooltipOnHide:!1,mouseLeaveDelay:.1,align:{},placement:"right",trigger:["hover"],arrowContent:null};var e_e=$Te,t_e=function(t){var n=t.children,r=t.content,a=t.className,i=t.open,o=Is(t,["children","content","className","open"]),s=su(),u=Ss(Ss({},s.tooltip),o),c=u.showArrow,l=void 0!==c&&c,d=u.enterDelay,f=void 0===d?0:d,p=u.leaveDelay,h=void 0===p?0:p,m=u.align,v=void 0===m?"top":m,g=u.activateOn,y=void 0===g?["hover","focus"]:g;return e.createElement(e_e,Ss({},void 0!==i?{visible:i}:{},{trigger:Array.isArray(y)?y:[y],prefixCls:"rmwc-tooltip",placement:v,transitionName:"rmwc-tooltip-zoom",mouseEnterDelay:f/1e3,mouseLeaveDelay:h/1e3,overlay:r,overlayClassName:St()(a,{"rmwc-tooltip--show-arrow":l}),destroyTooltipOnHide:!0}),n)};n(9111);var n_e=function(){return n_e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},n_e.apply(this,arguments)};function r_e(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var a_e=Tu({surface:!1})(Ps((function(t,n){t.selected,t.activated,t.disabled;var r=r_e(t,["selected","activated","disabled"]),a=Ms(t,["mdc-list-item",{"mdc-list-item--selected":t.selected,"mdc-list-item--activated":t.activated,"mdc-list-item--disabled":t.disabled}]);return e.createElement(Rs,n_e({tag:"li",tabIndex:0},r,{className:a,ref:n}),e.createElement(Nu,{className:"mdc-list-item__ripple"}),r.children)}))),i_e=Ps((function(t,n){var r=Ms(t,["mdc-list-item__text"]);return e.createElement(Rs,n_e({tag:"span"},t,{ref:n,className:r}))})),o_e=Ps((function(t,n){var r=Ms(t,["mdc-list-item__primary-text"]);return e.createElement(Rs,n_e({tag:"span"},t,{ref:n,className:r}))})),s_e=Ps((function(t,n){var r=Ms(t,["mdc-list-item__secondary-text"]);return e.createElement(Rs,n_e({tag:"span"},t,{ref:n,className:r}))})),u_e=Ps((function(t,n){var r=Ms(t,["mdc-list-item__graphic"]);return e.createElement(Ou,n_e({},t,{"aria-hidden":"true",ref:n,className:r}))})),c_e=Ps((function(t,n){var r=Ms(t,["mdc-list-item__meta"]);if(t.icon)return e.createElement(Ou,n_e({},t,{"aria-hidden":"true",ref:n,className:r}));if(e.isValidElement(t.children)){t.children;var a=r_e(t,["children"]);return e.cloneElement(t.children,n_e(n_e(n_e({},a),t.children.props),{className:St()(r,t.children.props.className)}))}return e.createElement(Rs,n_e({},t,{ref:n,className:r}))})),l_e=(Ps((function(t,n){var r=Ms(t,["mdc-list-group"]);return e.createElement(Rs,n_e({},t,{ref:n,className:r}))})),Ps((function(t,n){var r=Ms(t,["mdc-list-group__subheader"]);return e.createElement(Rs,n_e({},t,{ref:n,className:r}))})),Ps((function(t,n){var r=Ms(t,["mdc-list-divider"]);return e.createElement(Rs,n_e({tag:"li",role:"separator"},t,{ref:n,className:r}))})));Ps((function(t,n){var r=t.text,a=t.secondaryText,i=t.graphic,o=t.metaIcon,s=t.meta,u=t.children,c=r_e(t,["text","secondaryText","graphic","metaIcon","meta","children"]),l=r&&void 0!==a?e.createElement(o_e,null,r):r,d=void 0!==a?e.createElement(s_e,null,a):null;return e.createElement(a_e,n_e({},c,{ref:n}),e.createElement(Nu,{className:"mdc-list-item__ripple"}),void 0!==i&&e.createElement(u_e,{icon:i}),null!==d?e.createElement(i_e,null,l,d):l,(!!s||!!o)&&e.createElement(c_e,{icon:o},s),u)})),n(1093);var d_e=function(t){var n=function(t){var n=(0,e.useState)((function(){return zo("function"==typeof t?t():t,!0)})),r=n[1];return[n[0],(0,e.useCallback)((function(e){r("function"==typeof e?ws(e):zo(e))}),[])]}(t.pomoConfigs),r=u(n,2),a=r[0],i=r[1];return(0,gxe.jsx)(gxe.Fragment,{children:(0,gxe.jsxs)(jEe,{open:t.open,onClose:function(e){"confirm"===e.target.action&&t.setPomoConfigs(a),t.onClose()},renderToPortal:!0,children:[(0,gxe.jsx)(UEe,{children:"Configuration"}),(0,gxe.jsx)(HEe,{children:(0,gxe.jsxs)(Ls,{children:[(0,gxe.jsx)(zs,{span:12,children:(0,gxe.jsxs)(Bs,{children:[(0,gxe.jsx)(zs,{span:12,children:(0,gxe.jsx)(nxe,{use:"subtitle2",children:"Pomodoro Config"})}),(0,gxe.jsx)(zs,{span:4,children:(0,gxe.jsx)(jCe,{required:!0,label:"Focus Time",type:"number",suffix:"minutes",pattern:"[0-9]*",defaultValue:t.pomoConfigs.alertStudySeconds/60,onChange:function(e){e.target.validity.valid&&i((function(t){t.alertStudySeconds=60*parseInt(e.target.value)}))}})}),(0,gxe.jsx)(zs,{span:4,children:(0,gxe.jsx)(jCe,{required:!0,label:"Rest Time",type:"number",suffix:"minutes",pattern:"[0-9]*",defaultValue:t.pomoConfigs.alertRestSeconds/60,onChange:function(e){e.target.validity.valid&&i((function(t){t.alertRestSeconds=60*parseInt(e.target.value)}))}})}),(0,gxe.jsx)(zs,{span:4,children:(0,gxe.jsx)(t_e,{content:"If the rest time or focus time is less than this, it will not be counted as a separted time slot.",children:(0,gxe.jsx)(jCe,{required:!0,label:"Max allowed missing time",type:"number",suffix:"seconds",pattern:"[0-9]*",defaultValue:t.pomoConfigs.tempMissingSeconds,onChange:function(e){e.target.validity.valid&&i((function(t){t.tempMissingSeconds=parseInt(e.target.value)}))}})})})]})}),(0,gxe.jsx)(zs,{span:12,children:(0,gxe.jsx)(l_e,{})}),(0,gxe.jsx)(zs,{span:12,children:(0,gxe.jsxs)(Bs,{children:[(0,gxe.jsx)(zs,{span:12,children:(0,gxe.jsx)(nxe,{use:"subtitle2",children:"Face Recognition Config"})}),(0,gxe.jsx)(zs,{children:(0,gxe.jsx)(t_e,{content:"Every n seconds we detect user face, shorter interval might increase CPU usage, longer interval might make pomodoro less sensitive.",children:(0,gxe.jsx)(jCe,{required:!0,label:"Face Detection Interval",type:"number",pattern:"[0-9]*",suffix:"seconds",defaultValue:t.pomoConfigs.faceRecognition.detectionInterval,onChange:function(e){if(e.target.validity.valid){var t=parseInt(e.target.value);t<2||i((function(e){e.faceRecognition.detectionInterval=t}))}}})})}),(0,gxe.jsx)(zs,{children:(0,gxe.jsx)(cNe,{defaultChecked:t.pomoConfigs.enableDetection,onChange:function(e){i((function(t){t.enableDetection=e.target.checked}))},label:"Enable Face Detection"})}),(0,gxe.jsx)(zs,{children:(0,gxe.jsx)(cNe,{defaultChecked:t.pomoConfigs.faceRecognition.showFaceRecognitionStatus,onChange:function(e){i((function(t){t.faceRecognition.showFaceRecognitionStatus=e.target.checked}))},label:"Show Face Recognition Status"})}),(0,gxe.jsx)(zs,{children:(0,gxe.jsx)(cNe,{defaultChecked:t.pomoConfigs.faceRecognition.showCameraPreview,onChange:function(e){i((function(t){t.faceRecognition.showCameraPreview=e.target.checked}))},label:"Show Live Camera Preview"})}),(0,gxe.jsx)(zs,{children:(0,gxe.jsx)(cNe,{defaultChecked:t.pomoConfigs.faceRecognition.showFaceRecognitionCanvas,onChange:function(e){i((function(t){t.faceRecognition.showFaceRecognitionCanvas=e.target.checked}))},label:"Show Face Detection Result"})})]})}),(0,gxe.jsx)(zs,{span:12,children:(0,gxe.jsx)(l_e,{})}),(0,gxe.jsx)(zs,{span:12,children:(0,gxe.jsxs)(Bs,{children:[(0,gxe.jsx)(zs,{span:12,children:(0,gxe.jsx)(nxe,{use:"subtitle2",children:"Notification Config"})}),(0,gxe.jsx)(zs,{children:(0,gxe.jsx)(jCe,{required:!0,label:"Notification Interval Time",type:"number",suffix:"seconds",pattern:"[0-9]*",defaultValue:t.pomoConfigs.notificationIntervalSeconds,onChange:function(e){e.target.validity.valid&&i((function(t){t.notificationIntervalSeconds=parseInt(e.target.value)}))}})}),(0,gxe.jsx)(zs,{children:(0,gxe.jsx)(t_e,{content:"Everytime a notification is send, its wait time will multiply previous interval, so that the sending interval is longer and longer. If you don't want this behavior, change it to 1.",children:(0,gxe.jsx)(jCe,{required:!0,label:"Notification Interval Multiplier",suffix:"times",pattern:"[0-9\\.]*",defaultValue:t.pomoConfigs.notificationIntervalMultiplier,onChange:function(e){if(console.log(e),e.target.validity.valid){var t=parseFloat(e.target.value);t<1?e.target.setCustomValidity("Multiplier cannot be less than 1"):i((function(e){e.notificationIntervalMultiplier=t}))}}})})})]})}),(0,gxe.jsx)(zs,{span:12,children:(0,gxe.jsx)(l_e,{})}),(0,gxe.jsx)(zs,{span:12,children:(0,gxe.jsxs)(Bs,{children:[(0,gxe.jsx)(zs,{span:12,children:(0,gxe.jsx)(nxe,{use:"subtitle2",children:"Pomodoro History Config"})}),(0,gxe.jsx)(zs,{children:(0,gxe.jsx)(t_e,{content:"Increasing this might degrade performance.",children:(0,gxe.jsx)(jCe,{required:!0,label:"Max pomodoro history entries kepted",type:"number",resizeable:!0,pattern:"[0-9]*",suffix:"entries",defaultValue:t.pomoConfigs.history.maxLocalStorageTimeSlot,onChange:function(e){e.target.validity.valid&&i((function(t){t.history.maxLocalStorageTimeSlot=parseInt(e.target.value)}))}})})}),(0,gxe.jsx)(zs,{children:(0,gxe.jsx)(cNe,{defaultChecked:t.pomoConfigs.history.showPomodoroHistory,onChange:function(e){i((function(t){t.history.showPomodoroHistory=e.target.checked}))},label:"Show Pomodoro History"})}),(0,gxe.jsx)(zs,{children:(0,gxe.jsx)(cNe,{defaultChecked:t.pomoConfigs.history.onlyShowToday,onChange:function(e){i((function(t){t.history.onlyShowToday=e.target.checked}))},label:"Only Show Today's History"})})]})})]})}),(0,gxe.jsxs)(GEe,{children:[(0,gxe.jsx)(qEe,{action:"close",children:"Cancel"}),(0,gxe.jsx)(qEe,{action:"confirm",isDefaultAction:!0,children:"Confirm"})]})]})})};var f_e=function(){return f_e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},f_e.apply(this,arguments)};function p_e(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}var h_e,m_e=Ps((function(t,n){var r=t.outlined,a=p_e(t,["outlined"]),i=Ms(t,["mdc-card",{"mdc-card--outlined":r}]);return e.createElement(Rs,f_e({},a,{ref:n,className:i}))})),v_e=(Ps((function(t,n){var r=t.square,a=t.sixteenByNine,i=p_e(t,["square","sixteenByNine"]),o=Ms(t,["mdc-card__media",{"mdc-card__media--square":r,"mdc-card__media--16-9":a}]);return e.createElement(Rs,f_e({tag:"section"},i,{ref:n,className:o}))})),Ps((function(t,n){var r=Ms(t,["mdc-card__media-content"]);return e.createElement(Rs,f_e({},t,{ref:n,className:r}))})),Tu({surface:!1})(Ps((function(t,n){var r=Ms(t,["mdc-card__primary-action"]);return e.createElement(Rs,f_e({},t,{ref:n,className:r}))}))));Ps((function(t,n){var r=t.fullBleed,a=p_e(t,["fullBleed"]),i=Ms(t,["mdc-card__actions",{"mdc-card__actions--full-bleed":r}]);return e.createElement(Rs,f_e({tag:"section"},a,{ref:n,className:i}))})),Ps((function(t,n){var r=Ms(t,["mdc-card__action-buttons"]);return e.createElement(Rs,f_e({},t,{ref:n,className:r}))})),Ps((function(t,n){var r=Ms(t,["mdc-card__action-icons"]);return e.createElement(Rs,f_e({},t,{ref:n,className:r}))})),Ps((function(t,n){var r=Ms(t,["mdc-card__action","mdc-card__action--icon"]);return e.createElement(Xu,f_e({},t,{ref:n,className:r}))})),Ps((function(t,n){var r=Ms(t,["mdc-card__action","mdc-card__action--button"]);return e.createElement(Fu,f_e({},t,{ref:n,className:r}))})),n(8249);var g_e,y_e=function(e){var t=Oe(h_e||(h_e=r(["font-weight: bold;"])));return(0,gxe.jsx)(gxe.Fragment,{children:(0,gxe.jsxs)(jEe,{open:e.open,onClose:function(t){e.onClose()},renderToPortal:!0,children:[(0,gxe.jsx)(UEe,{children:"Intro to Face Recognition Pomodoro"}),(0,gxe.jsxs)(HEe,{children:[(0,gxe.jsx)("div",{style:{padding:"10px"}}),(0,gxe.jsx)(m_e,{children:(0,gxe.jsx)(v_e,{children:(0,gxe.jsxs)("div",{style:{padding:"0 1rem 1rem 1rem"},children:[(0,gxe.jsx)(nxe,{use:"headline6",tag:"h2",children:"What is this?"}),(0,gxe.jsxs)(nxe,{use:"body1",tag:"div",theme:"textSecondaryOnBackground",children:["This is a ",(0,gxe.jsx)("span",{className:t,children:"Pomodoro clock"}),". Unlike other Pomodoro Clock, it can automatically help you start",(0,gxe.jsx)("span",{className:t,children:" a focus session "}),"when the camera detected your face. When the camera no longer detect your face, it starts ",(0,gxe.jsx)("span",{className:t,children:" a rest session "}),". We will request camera permission and notification permission later, please click allow around the browser's url."]})]})})}),(0,gxe.jsx)("div",{style:{padding:"10px"}}),(0,gxe.jsx)(m_e,{children:(0,gxe.jsx)(v_e,{children:(0,gxe.jsxs)("div",{style:{padding:"0 1rem 1rem 1rem"},children:[(0,gxe.jsx)(nxe,{use:"headline6",tag:"h2",children:"What if I left my camera but don't want to stop the Pomodoro session?"}),(0,gxe.jsxs)(nxe,{use:"body1",tag:"div",theme:"textSecondaryOnBackground",children:["If the time of stepping away is less than ",(0,gxe.jsx)("span",{className:t,children:" Max Allowed Missing Time "}),"in the settings, the Pomodoro session will continue the session when you are back."]})]})})}),(0,gxe.jsx)("div",{style:{padding:"10px"}}),(0,gxe.jsx)(m_e,{children:(0,gxe.jsx)(v_e,{children:(0,gxe.jsxs)("div",{style:{padding:"0 1rem 1rem 1rem"},children:[(0,gxe.jsx)(nxe,{use:"headline6",tag:"h2",children:"Why this intro always popup on start?"}),(0,gxe.jsx)(nxe,{use:"body1",tag:"div",theme:"textSecondaryOnBackground",children:"There must be at least one user interaction to make notification works, so I take this opportunity to intro the tool."})]})})}),(0,gxe.jsx)("div",{style:{padding:"10px"}}),(0,gxe.jsx)(m_e,{children:(0,gxe.jsx)(v_e,{children:(0,gxe.jsxs)("div",{style:{padding:"0 1rem 1rem 1rem"},children:[(0,gxe.jsx)(nxe,{use:"headline6",tag:"h2",children:"Will this slow down my computer or phone?"}),(0,gxe.jsx)(nxe,{use:"body1",tag:"div",theme:"textSecondaryOnBackground",children:"Usually not, it leverage GPU to detect your face and just takes a few milliseconds."})]})})})]}),(0,gxe.jsx)(GEe,{children:(0,gxe.jsx)(qEe,{action:"confirm",isDefaultAction:!0,children:"Ok, let's continue."})})]})})};var b_e=function(){var t=u(Ve("pomoConfig",{defaultValue:Tle}),2),n=t[0],a=t[1],i=u((0,e.useState)(!1),2),o=i[0],s=i[1],c=u((0,e.useState)(!0),2),l=c[0],d=c[1];return(0,gxe.jsx)(gxe.Fragment,{children:(0,gxe.jsxs)(CEe,{options:{primary:"#bf360c",secondary:"#616161"},children:[(0,gxe.jsx)(TEe,{}),(0,gxe.jsx)(dEe,{style:{zIndex:10},children:(0,gxe.jsxs)(pEe,{children:[(0,gxe.jsx)(hEe,{alignStart:!0,children:(0,gxe.jsx)(vEe,{icon:"help",onClick:function(){return d(!0)}})}),(0,gxe.jsx)(hEe,{className:Oe(g_e||(g_e=r(["justify-content: center"]))),children:(0,gxe.jsx)(gEe,{children:"Face Recognition Pomodoro"})}),(0,gxe.jsx)(hEe,{alignEnd:!0,children:(0,gxe.jsx)(vEe,{icon:"settings",onClick:function(){return s(!0)}})})]})}),(0,gxe.jsx)(yEe,{}),(0,gxe.jsx)(y_e,{open:l,onClose:function(){d(!1),a(ks((function(e){e.enableDetection=!0,e.enableNotification=!0})))}}),(0,gxe.jsx)(d_e,{open:o,onClose:function(){return s(!1)},pomoConfigs:n,setPomoConfigs:a}),(0,gxe.jsx)(_le.Provider,{value:n,children:(0,gxe.jsx)(QIe,{})})]})})};var x_e=function(){return(0,gxe.jsx)("div",{children:(0,gxe.jsx)(b_e,{})})};t.createRoot(document.getElementById("root")).render((0,gxe.jsx)(x_e,{}))}()}();