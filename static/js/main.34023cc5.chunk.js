(this["webpackJsonpface-recognition-pomodoro"]=this["webpackJsonpface-recognition-pomodoro"]||[]).push([[0],{272:function(e,t,n){},498:function(e,t,n){},505:function(e,t,n){"use strict";n.r(t);var i,a,o=n(0),c=n.n(o),r=n(213),s=n.n(r),l=n(30),d=n(5),j=n(4),u=n(115),b=n(31),h=n(528),f=n(214),m=n(56),O=n(14),g=(n(131),n(530)),x=(n(255),n(33)),p=n(43),v=n(215),w=n.n(v),y=n(217),S=n.n(y),C=n(218),T=n.n(C),R={alertStudySeconds:1500,alertRestSeconds:300,enableNotification:!1,notificationIntervalSeconds:60,notificationIntervalMultiplier:2,tempMissingSeconds:60,history:{maxLocalStorageTimeSlot:100,showPomodoroHistory:!0,onlyShowToday:!0},faceRecognition:{detectionInterval:5,scoreThreshold:.95,showFaceRecognitionStatus:!0,showFaceRecognitionCanvas:!1,showCameraPreview:!1},enableDetection:!1,playerUrl:"https://www.youtube.com/watch?v=q4YyeEM9jsc",focusNotificationText:"Time to focus!",restNotificationText:"Let's take a break."},D=c.a.createContext(R),k=n(37),P=(n(132),n(236)),I=(n(258),n(260),n(2));function N(e){return Object(I.jsxs)(k.a,{use:"body2",tag:"div",className:Object(b.a)(i||(i=Object(l.a)(["text-align: center"]))),children:[e.msg," ",e.status?Object(I.jsx)(S.a,{style:{color:"#1faa00"}}):Object(I.jsx)(T.a,{style:{color:"#a30000"}})]})}function F(e,t,n,i){var a=e?"Camera Ready:":"Camera Supported",o=e?t:e;return Object(I.jsxs)(O.a,{children:[Object(I.jsx)(O.b,{desktop:4,span:2,phone:4,children:Object(I.jsx)(N,{msg:a,status:o})}),Object(I.jsx)(O.b,{desktop:4,span:2,phone:4,children:Object(I.jsx)(N,{msg:"Model loaded:",status:i>1})}),Object(I.jsx)(O.b,{desktop:4,span:2,phone:4,children:Object(I.jsx)(N,{msg:"Face Detected:",status:n})})]})}var V=function(e){var t=Object(o.useContext)(D),i=Object(o.useRef)(null),c=Object(o.useRef)(null),r=Object(o.useState)(!1),s=Object(d.a)(r,2),j=s[0],h=s[1],f=Object(o.useState)("mediaDevices"in navigator),m=Object(d.a)(f,1)[0],g=Object(o.useState)(!1),v=Object(d.a)(g,2),y=v[0],S=v[1],C=e.onFaceDetectionResult,T=t.faceRecognition.detectionInterval,R=t.faceRecognition.scoreThreshold,k=t.enableDetection,N=Object(o.useState)(!1),V=Object(d.a)(N,2),M=V[0],z=V[1],L=Object(o.useRef)(null),E=Object(o.useRef)(null),H="ImageCapture"in window;Object(o.useEffect)((function(){if(k){var e={modelBasePath:"https://cdn.jsdelivr.net/npm/@vladmandic/human/models/",wasmPath:"/face-recognition-pomodoro/models/",face:{enabled:!0,emotion:{enabled:!1},antispoof:{enabled:!1},liveness:{enabled:!1},mesh:{enabled:!0},attention:{enabled:!1},iris:{enabled:!1},description:{enabled:!1}},body:{enabled:!1},hand:{enabled:!1},object:{enabled:!1},gesture:{enabled:!1},debug:!0};n.e(3).then(n.bind(null,544)).then((function(t){E.current=new t.Human(e),E.current.init(e).then((function(){E.current.load(e),console.log("Human init",E.current)}))}))}}),[k]),Object(u.a)((function(){if(k&&!M&&E.current){var e=L.current&&"live"===L.current.readyState&&!L.current.muted&&L.current.enabled;e!==y&&S(e),e&&function(){n.apply(this,arguments)}()}function n(){return(n=Object(p.a)(Object(x.a)().mark((function e(){var n,a,o,r,s;return Object(x.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,z(!0),n=i.current.video,a=n,!H){e.next=9;break}return o=new ImageCapture(L.current),e.next=8,o.grabFrame();case 8:a=e.sent;case 9:return e.next=11,E.current.detect(a);case 11:r=e.sent,s=r.face.filter((function(e){return e.score>R})).at(-1),C(s),h(s),t.faceRecognition.showFaceRecognitionCanvas&&(E.current.draw.canvas(a,c.current),E.current.draw.all(c.current,r));case 16:return e.prev=16,z(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,,16,19]])})))).apply(this,arguments)}}),1e3*T,!0);var U={width:{ideal:640},height:{ideal:480},facingMode:"user"};k&&!t.faceRecognition.showCameraPreview&&navigator.mediaDevices.getSupportedConstraints&&navigator.mediaDevices.getSupportedConstraints().frameRate&&(U.frameRate={ideal:2});var W=H?"0px":"1px",q=t.faceRecognition.showCameraPreview?"100%":W,B=E.current?Object.keys(E.current.models).filter((function(e){return null!==E.current.models[e]})).length:0,J=.1*m+.4*y+B/2*.5;return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(O.a,{children:[Object(I.jsxs)(O.b,{span:12,children:[Object(I.jsx)(P.a,{closed:J>=1,progress:J}),k&&t.faceRecognition.showFaceRecognitionStatus?F(m,y,j,B):Object(I.jsx)(I.Fragment,{})]}),k?Object(I.jsx)(O.b,{span:12,children:Object(I.jsx)("div",{className:Object(b.a)(a||(a=Object(l.a)(["\n              height: ",";\n              width: ",";\n              overflow: hidden;\n            "])),q,q),children:Object(I.jsx)(w.a,{audio:!1,ref:i,screenshotFormat:"image/jpeg",videoConstraints:U,onUserMedia:function(e){console.log("New media stream",e),L.current=e.getVideoTracks()[0]},onUserMediaError:function(e){return console.log(e)}})})}):Object(I.jsx)(I.Fragment,{}),k&&E&&t.faceRecognition.showFaceRecognitionCanvas?Object(I.jsx)(O.b,{span:12,children:Object(I.jsx)("canvas",{width:"640px",height:"480px",ref:c})}):Object(I.jsx)(I.Fragment,{})]})})},M=n(219),z=n.n(M);n(271),n(272);var L,E,H,U,W=function(e){var t=Object(o.useRef)(null),n=Object(o.useRef)(null),i=e.startTime;return Object(o.useEffect)((function(){null===n.current&&(n.current=new z.a(t.current,new Date(i),{face:"HourCounter",showLabels:!1}),n.current.originalValue=new Date(i),n.current.value=new Date,n.current.start()),(i!==n.current.originalValue.toJSON()||Math.abs(new Date-n.current.value.value)>1e3)&&(n.current.originalValue=new Date(i),n.current.value=new Date)})),Object(I.jsx)("div",{ref:t})},q=n(529),B=n(534),J=n(535),A=n(220),Y=n.n(A);function G(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Math.floor(e);if(n<60)return"".concat(n,"s");if(n<3600){var i=Math.floor(n/60),a=n-60*i;return t?"".concat(i,"m ").concat(a,"s"):"".concat(i,"m")}var o=Math.floor(n/60),c=o%60,r=Math.floor(o/60);return"".concat(r,"h ").concat(c,"m")}function K(e){var t=e.record,n=e.index,i=n?"Pomodoro #".concat(n):void 0;return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(Y.a,{title:i,children:Object(I.jsxs)("div",{className:Object(b.a)(L||(L=Object(l.a)(["\n          display: flex;\n          justify-content: space-around;\n          align-item: center;\n        "]))),children:[Object(I.jsx)("span",{className:Object(b.a)(E||(E=Object(l.a)(["\n          border-radius: 50%;\n          background: #b0003a;\n          width: 3em;\n          height: 3em;\n          text-align: center;\n          vertical-align: middle;\n          display: inline-block;\n          line-height: 3em;\n          font-size: 1.5em;\n          color: white;\n          font-weight: bold;\n        "]))),children:G(t.timePeriod)}),Object(I.jsx)("div",{className:Object(b.a)(H||(H=Object(l.a)(["\n              display: flex;\n              align-item: center;\n              justify-content: space-around;\n              flex-direction: column;\n            "]))),children:Object(I.jsxs)("p",{className:Object(b.a)(U||(U=Object(l.a)(["\n              font-size: 1.5em;\n              font-weight: bold;\n              margin: 0 0 0 10px;\n            "]))),children:[new Date(t.startTime).toLocaleTimeString().slice(0,5)," - ",new Date(t.endTime).toLocaleTimeString().slice(0,5)]})})]})})})}var Q,X=n(65),Z=(n(145),n(50));n(192);function $(e){var t=e.record,n=e.onDeleteRestSession;return Object(I.jsx)(q.a.Item,{color:"green",dot:Object(I.jsx)(B.a,{}),children:Object(I.jsxs)("div",{className:Object(b.a)(Q||(Q=Object(l.a)(["\n          display: flex;\n          justify-content: space-between;\n        "]))),children:[Object(I.jsxs)("p",{children:[" Rest for ",G(t.timePeriod)," "]}),Object(I.jsx)(Z.a,{content:"Remove this session, and merge adjacent session.",showArrow:!0,children:Object(I.jsx)(X.a,{label:"Remove",onClick:function(){n(t.startTime)}})})]})})}var _=function(e){var t=e.mergedTimeTable,n=Object(o.useContext)(D),i=t.filter((function(e){return!n.history.onlyShowToday||new Date(e.startTime).toDateString()===(new Date).toDateString()})),a=i.filter((function(e){return e.detected})).map((function(e,t){return Object(I.jsx)(q.a.Item,{record:e,dot:Object(I.jsx)(J.a,{}),children:Object(I.jsx)(K,{record:e,index:t+1})},e.startTime)})),c=i.filter((function(e){return!e.detected})).map((function(t,n){return Object(I.jsx)($,{record:t,onDeleteRestSession:e.onDeleteRestSession},t.startTime)})),r=a.concat(c);return r.sort((function(e,t){return e.props.record.startTime<t.props.record.startTime?1:-1})),Object(I.jsx)(q.a,{mode:"left",children:r})},ee=n(227),te=c.a.lazy((function(){return n.e(4).then(n.t.bind(null,545,7))}));var ne,ie=function(e){var t=e.mergedTimeTable.filter((function(e){return new Date(e.startTime).toDateString()===(new Date).toDateString()})),n="Total: "+G(t.filter((function(e){return e.detected})).reduce((function(e,t){return e+t.timePeriod}),0)),i={plotOptions:{bar:{horizontal:!0,barHeight:"100%"}},colors:["#b0003a"],xaxis:{type:"datetime",labels:{datetimeUTC:!1}},tooltip:{custom:function(e){var t=e.w.config.series[e.seriesIndex].data[e.dataPointIndex].info,n=Object(I.jsx)(K,{record:t});return Object(ee.renderToString)(n)}}},a=[{name:"focus",data:t.map((function(e){return{x:n,y:[new Date(e.startTime).getTime(),new Date(e.endTime).getTime()],info:e}})).filter((function(e){return e.info.detected}))}];return Object(I.jsx)(te,{options:i,series:a,type:"rangeBar",height:100})},ae=Object(b.a)(ne||(ne=Object(l.a)(["\n  font-size: 20vw;\n  margin: 0 auto;\n  text-align: center;\n  @media (min-width: 700px) {\n    font-size: 140px;\n  }\n  @media (max-width: 350px) {\n    font-size: 75px;\n  }\n"])));function oe(e){var t=e.focus?"WORKING":"REST",n=e.className||ae;return Object(I.jsx)("p",{className:n,children:t})}var ce,re=n(228);function se(e){var t=Object(o.useRef)(null),n=e.shouldPlay,i={height:"100%",width:"100%",playerVars:{autoplay:1,loop:1,playlist:e.vid}};return Object(o.useEffect)((function(){t.current&&(console.log(t.current.internalPlayer),n?t.current.internalPlayer.playVideo():t.current.internalPlayer.pauseVideo())}),[n]),Object(I.jsx)(re.a,{className:Object(b.a)(ce||(ce=Object(l.a)(["\n          height: 100%;\n          width: 100%;\n          position: relative;\n        "]))),ref:t,videoId:e.vid,opts:i})}var le,de,je,ue,be=n(231),he=n.n(be);function fe(e){var t=Object(o.useContext)(D),n=function(e){var t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return!(!t||11!==t[7].length)&&t[7]}(t.playerUrl?t.playerUrl:"");if(!n)return Object(I.jsx)(I.Fragment,{});var i=!1;e.focus&&!e.overTime&&(i=!0);var a=Object(b.a)(le||(le=Object(l.a)(["\n    height: calc(100vh - 64px);\n    width: 100vw;\n    max-width:100%;\n    max-height:100%;\n  "])));return Object(I.jsxs)("div",{className:a,children:[Object(I.jsx)(se,{vid:n,shouldPlay:i}),Object(I.jsx)("div",{children:Object(I.jsx)(he.a,{bounds:"."+a,children:Object(I.jsxs)("div",{className:Object(b.a)(de||(de=Object(l.a)(["\n            background: white;\n            opacity: 0.7;\n            position: absolute;\n            top: 10vh;\n            left: 10px;\n\n            .flip-clock {\n                font-size: 15px;\n            }\n\n            padding: 10px;\n            border-radius: 10px;\n            cursor: grab;\n        "]))),children:[Object(I.jsx)(oe,{className:Object(b.a)(je||(je=Object(l.a)(["\n                font-size: 70px;\n                margin: 0 auto;\n                text-align: center;\n              "]))),focus:e.focus}),Object(I.jsx)(W,{startTime:e.startTime})]})})})]})}var me=function(e){var t=Object(o.useContext)(D),n=t.alertStudySeconds,i=t.alertRestSeconds,a=t.history.maxLocalStorageTimeSlot,c=Object(o.useState)(""),r=Object(d.a)(c,2),s=r[0],x=r[1],p=Object(o.useState)(!1),v=Object(d.a)(p,2),w=v[0],y=v[1],S=Object(o.useState)(!1),C=Object(d.a)(S,2),T=C[0],R=C[1];function k(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log(new Date,"Added new session: detected:",e,"startTime",t);var n=t||(new Date).toJSON(),i=Math.floor((new Date-new Date(n))/1e3);return{startTime:n,endTime:(new Date).toJSON(),detected:e,timePeriod:i}}var P=Object(h.a)("mergedTimeTable",{defaultValue:[k(!0)],serializer:function(e){return JSON.stringify(e)},deserializer:function(e){var t=JSON.parse(e);return new Date-new Date(t.at(-1).endTime)>1e3*n&&t.push(k(!0)),t.slice(0-a)}}),N=Object(d.a)(P,2),F=N[0],M=N[1],z=F.at(-1),L=Object(o.useState)({}),E=Object(d.a)(L,2),H=E[0],U=E[1],q=Object(f.a)("./sounds/dingbell.aac"),B=Object(d.a)(q,1)[0],J=t.tempMissingSeconds,A=Object(o.useState)(!1),Y=Object(d.a)(A,2),K=Y[0],Q=Y[1];function X(e,n){if(!(H[e]&&new Date-H[e].lastSendTime<1e3*H[e].nextSendInterval)){B(),K&&"granted"===Notification.permission&&new Notification(e,{icon:n,badge:n}),y(!0),x(e);var i=H[e]?H[e].nextSendInterval*t.notificationIntervalMultiplier:t.notificationIntervalSeconds;H[e]={lastSendTime:new Date,nextSendInterval:i},U(H)}}return Object(o.useEffect)((function(){var e="Notification"in window&&"serviceWorker"in navigator&&"PushManager"in window;Q(e),e?t.enableNotification&&Notification.requestPermission():console.log("This browser does not support desktop notification")}),[t.enableNotification]),Object(u.a)((function(){var e=(new Date-new Date(z.startTime))/1e3;if(z.detected&&e>n){R(!0),document.title=t.restNotificationText;X(t.restNotificationText,"https://chenditc.github.io/face-recognition-pomodoro/images/relax.png")}else if(!z.detected&&e>i){R(!0),document.title=t.focusNotificationText;X(t.focusNotificationText,"https://chenditc.github.io/face-recognition-pomodoro/images/focus.png")}else document.title=G(e,!0),R(!1),e>t.tempMissingSeconds&&Object.keys(H).length>0&&U({})}),500,!0),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(fe,{focus:z.detected,overTime:T,startTime:z.startTime}),Object(I.jsxs)("div",{className:Object(b.a)(ue||(ue=Object(l.a)(["\n      margin: 0 15px;\n      max-width: 700px;\n      min-width: 350px;\n      @media (min-width: 730px) {\n        margin: 0 auto;\n      }\n      "]))),children:[Object(I.jsx)(g.a,{open:w,onClose:function(){return y(!1)},message:s,dismissesOnAction:!0,action:Object(I.jsx)(g.b,{label:"Dismiss",onClick:function(){return console.log("Dismiss notification")}})}),Object(I.jsxs)(O.a,{children:[Object(I.jsx)(O.b,{span:12,children:Object(I.jsx)(oe,{focus:z.detected})}),Object(I.jsx)(O.b,{span:12,children:Object(I.jsx)(W,{startTime:z.startTime})}),Object(I.jsx)(O.b,{span:12,children:Object(I.jsx)(V,{onFaceDetectionResult:function(e){var n=Object(m.a)(F,(function(n){var i=void 0!==e;if(n.at(-1).detected!==i&&n.at(-1).timePeriod<J&&n.pop(),0!==n.length&&n.at(-1).detected===i){if(n.at(-1).detected&&new Date-new Date(n.at(-1).endTime)>1e3*t.tempMissingSeconds)return n.push(k(!1,n.at(-1).endTime)),void n.push(k(!0,(new Date).toJSON()));n.at(-1).endTime=(new Date).toJSON(),n.at(-1).timePeriod=(new Date-new Date(n.at(-1).startTime))/1e3}else n.push(k(i,n.at(-1).endTime))}));M(n)}})}),t.history.showPomodoroHistory?Object(I.jsxs)(O.b,{span:12,children:[Object(I.jsx)("h3",{children:"Pomodoro History"}),Object(I.jsx)(ie,{mergedTimeTable:F}),Object(I.jsx)(_,{mergedTimeTable:F,onDeleteRestSession:function(e){M(F.reduce((function(t,n){var i=t.slice();if(n.startTime===e||t.at(-1)&&t.at(-1).endTime===n.startTime&&t.at(-1).detected===n.detected){var a=Object(j.a)(Object(j.a)({},i.at(-1)),{},{endTime:n.endTime,timePeriod:(new Date(t.at(-1).endTime)-new Date(t.at(-1).startTime))/1e3});return i.pop(),i.push(a),i}return i.push(n),i}),[]))}})]}):Object(I.jsx)(I.Fragment,{})]})]})]})},Oe=(n(475),n(51)),ge=n(237),xe=(n(476),n(479),n(77),n(531)),pe=(n(209),n(48)),ve=(n(483),n(88)),we=(n(491),n(526)),ye=(n(495),n(498),n(232));var Se=function(e){var t=Object(o.useRef)(null),n=Object(ye.a)(e.pomoConfigs),i=Object(d.a)(n,2),a=i[0],c=i[1],r=Object(o.useState)(!0),s=Object(d.a)(r,2),l=s[0],j=s[1];return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(xe.a,{style:{zIndex:15},open:e.open,preventOutsideDismiss:!0,onOpen:function(t){c(e.pomoConfigs)},onClose:function(t){"confirm"===t.target.action&&e.setPomoConfigs(a),e.onClose()},children:[Object(I.jsx)(xe.e,{children:"Configuration"}),Object(I.jsx)(xe.d,{children:Object(I.jsx)("form",{ref:t,onChange:function(){var e=t.current&&t.current.reportValidity();console.log(e),e!==l&&j(e)},children:Object(I.jsxs)(O.a,{children:[Object(I.jsx)(O.b,{span:12,children:Object(I.jsxs)(O.c,{children:[Object(I.jsx)(O.b,{span:12,children:Object(I.jsx)(k.a,{use:"subtitle2",children:"Pomodoro Config"})}),Object(I.jsx)(O.b,{span:4,children:Object(I.jsx)(pe.a,{required:!0,label:"Focus Time",type:"number",suffix:"minutes",pattern:"[0-9]*",min:1,defaultValue:e.pomoConfigs.alertStudySeconds/60,onChange:function(e){e.target.validity.valid?c((function(t){t.alertStudySeconds=60*parseInt(e.target.value)})):e.target.reportValidity()}})}),Object(I.jsx)(O.b,{span:4,children:Object(I.jsx)(pe.a,{required:!0,label:"Rest Time",type:"number",suffix:"minutes",pattern:"[0-9]*",min:1,defaultValue:e.pomoConfigs.alertRestSeconds/60,onChange:function(e){e.target.reportValidity()&&c((function(t){t.alertRestSeconds=60*parseInt(e.target.value)}))}})}),Object(I.jsx)(O.b,{span:4,children:Object(I.jsx)(Z.a,{content:"If the rest time or focus time is less than this, it will not be counted as a separted time slot.",children:Object(I.jsx)(pe.a,{required:!0,label:"Max allowed missing time",type:"number",suffix:"seconds",pattern:"[0-9]*",min:0,defaultValue:e.pomoConfigs.tempMissingSeconds,onChange:function(e){e.target.reportValidity()&&c((function(t){t.tempMissingSeconds=parseInt(e.target.value)}))}})})})]})}),Object(I.jsx)(O.b,{span:12,children:Object(I.jsx)(we.a,{})}),Object(I.jsx)(O.b,{span:12,children:Object(I.jsx)(k.a,{use:"subtitle2",children:"Background Video Config"})}),Object(I.jsx)(O.b,{span:12,children:Object(I.jsx)(Z.a,{content:"Enter a Youtube video url. Leave empty to not play anything.",children:Object(I.jsx)(pe.a,{style:{width:"100%"},label:"Youtube Url",type:"text",defaultValue:e.pomoConfigs.playerUrl,onChange:function(e){c((function(t){t.playerUrl=e.target.value}))}})})}),Object(I.jsx)(O.b,{span:12,children:Object(I.jsx)(we.a,{})}),Object(I.jsx)(O.b,{span:12,children:Object(I.jsxs)(O.c,{children:[Object(I.jsx)(O.b,{span:12,children:Object(I.jsx)(k.a,{use:"subtitle2",children:"Face Recognition Config"})}),Object(I.jsx)(O.b,{children:Object(I.jsx)(Z.a,{content:"Every n seconds we detect user face, shorter interval might increase CPU usage, longer interval might make pomodoro less sensitive.",children:Object(I.jsx)(pe.a,{required:!0,label:"Face Detection Interval",type:"number",pattern:"[0-9]*",suffix:"seconds",min:2,defaultValue:e.pomoConfigs.faceRecognition.detectionInterval,onChange:function(e){if(e.target.reportValidity()){var t=parseInt(e.target.value);c((function(e){e.faceRecognition.detectionInterval=t}))}}})})}),Object(I.jsx)(O.b,{children:Object(I.jsx)(ve.a,{defaultChecked:e.pomoConfigs.faceRecognition.showFaceRecognitionStatus,onChange:function(e){c((function(t){t.faceRecognition.showFaceRecognitionStatus=e.target.checked}))},label:"Show Face Recognition Status"})}),Object(I.jsx)(O.b,{children:Object(I.jsx)(ve.a,{defaultChecked:e.pomoConfigs.faceRecognition.showCameraPreview,onChange:function(e){c((function(t){t.faceRecognition.showCameraPreview=e.target.checked}))},label:"Show Live Camera Preview"})}),Object(I.jsx)(O.b,{children:Object(I.jsx)(ve.a,{defaultChecked:e.pomoConfigs.faceRecognition.showFaceRecognitionCanvas,onChange:function(e){c((function(t){t.faceRecognition.showFaceRecognitionCanvas=e.target.checked}))},label:"Show Face Detection Result"})})]})}),Object(I.jsx)(O.b,{span:12,children:Object(I.jsx)(we.a,{})}),Object(I.jsx)(O.b,{span:12,children:Object(I.jsxs)(O.c,{children:[Object(I.jsx)(O.b,{span:12,children:Object(I.jsx)(k.a,{use:"subtitle2",children:"Notification Config"})}),Object(I.jsx)(O.b,{span:4,children:Object(I.jsx)(pe.a,{required:!0,label:"Notification Interval Time",type:"number",suffix:"seconds",pattern:"[0-9]*",defaultValue:e.pomoConfigs.notificationIntervalSeconds,onChange:function(e){e.target.reportValidity()&&c((function(t){t.notificationIntervalSeconds=parseInt(e.target.value)}))}})}),Object(I.jsx)(O.b,{span:4,children:Object(I.jsx)(Z.a,{content:"Everytime a notification is send, its wait time will multiply previous interval, so that the sending interval is longer and longer. If you don't want this behavior, change it to 1.",children:Object(I.jsx)(pe.a,{required:!0,label:"Notification Interval Multiplier",suffix:"times",pattern:"[0-9\\.]*",min:1,type:"number",step:"0.1",defaultValue:e.pomoConfigs.notificationIntervalMultiplier,onChange:function(e){if(e.target.reportValidity()){var t=parseFloat(e.target.value);c((function(e){e.notificationIntervalMultiplier=t}))}}})})}),Object(I.jsx)(O.b,{span:12,children:Object(I.jsx)(Z.a,{content:"This message will be displayed to let you know it's time to start Pomodoro session.",children:Object(I.jsx)(pe.a,{style:{width:"100%"},required:!0,label:"Focus Notification Message",minLength:1,defaultValue:e.pomoConfigs.focusNotificationText,onChange:function(e){e.target.reportValidity()&&c((function(t){t.focusNotificationText=e.target.value}))}})})}),Object(I.jsx)(O.b,{span:12,children:Object(I.jsx)(Z.a,{content:"This message will be displayed to let you know it's time to take a break.",children:Object(I.jsx)(pe.a,{style:{width:"100%"},required:!0,label:"Rest Notification Message",minLength:1,defaultValue:e.pomoConfigs.restNotificationText,onChange:function(e){e.target.reportValidity()&&c((function(t){t.restNotificationText=e.target.value}))}})})})]})}),Object(I.jsx)(O.b,{span:12,children:Object(I.jsx)(we.a,{})}),Object(I.jsx)(O.b,{span:12,children:Object(I.jsxs)(O.c,{children:[Object(I.jsx)(O.b,{span:12,children:Object(I.jsx)(k.a,{use:"subtitle2",children:"Pomodoro History Config"})}),Object(I.jsx)(O.b,{children:Object(I.jsx)(Z.a,{content:"Increasing this might degrade performance.",children:Object(I.jsx)(pe.a,{required:!0,label:"Max pomodoro history entries kepted",type:"number",resizeable:!0,pattern:"[0-9]*",suffix:"entries",min:1,defaultValue:e.pomoConfigs.history.maxLocalStorageTimeSlot,onChange:function(e){e.target.reportValidity()&&c((function(t){t.history.maxLocalStorageTimeSlot=parseInt(e.target.value)}))}})})}),Object(I.jsx)(O.b,{children:Object(I.jsx)(ve.a,{defaultChecked:e.pomoConfigs.history.showPomodoroHistory,onChange:function(e){c((function(t){t.history.showPomodoroHistory=e.target.checked}))},label:"Show Pomodoro History"})}),Object(I.jsx)(O.b,{children:Object(I.jsx)(ve.a,{defaultChecked:e.pomoConfigs.history.onlyShowToday,onChange:function(e){c((function(t){t.history.onlyShowToday=e.target.checked}))},label:"Only Show Today's History"})})]})})]})})}),Object(I.jsxs)(xe.b,{children:[Object(I.jsx)(xe.c,{action:"close",children:"Cancel"}),Object(I.jsx)(xe.c,{action:"confirm",disabled:!l,isDefaultAction:!0,children:"Confirm"})]})]})})},Ce=n(58),Te=(n(499),n(527));var Re,De=function(e){return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(xe.a,{style:{zIndex:15},open:e.open,onClose:function(t){e.onClose()},children:[Object(I.jsx)(xe.e,{children:"Intro to Face Recognition Pomodoro"}),Object(I.jsxs)(xe.d,{children:[Object(I.jsx)("div",{style:{padding:"10px"}}),Object(I.jsx)(Ce.a,{children:Object(I.jsx)(Ce.b,{children:Object(I.jsxs)("div",{style:{padding:"0 1rem 1rem 1rem"},children:[Object(I.jsx)(k.a,{use:"headline6",tag:"h2",children:"What is this?"}),Object(I.jsx)(k.a,{use:"body1",tag:"div",theme:"textSecondaryOnBackground",children:Object(I.jsx)(Te.a,{children:"\nThis is a **Pomodoro Clock**. It's special because:\n\n- It can automatically help you start **a focus session** when the camera detected your face.\n- It can automatically start **a rest session** When the camera no longer detect your face \n\nWe will need two permission from you:\n- Permission to **send notification**, so that you will get reminded when session timed out.\n- Permission to **access your camera**.\n\nPlease click allow button around the browser's url.\n"})})]})})}),Object(I.jsx)("div",{style:{padding:"10px"}}),Object(I.jsx)(Ce.a,{children:Object(I.jsx)(Ce.b,{children:Object(I.jsxs)("div",{style:{padding:"0 1rem 1rem 1rem"},children:[Object(I.jsx)(k.a,{use:"headline6",tag:"h2",children:"What if I left my camera but don't want to stop the Pomodoro session?"}),Object(I.jsx)(k.a,{use:"body1",tag:"div",theme:"textSecondaryOnBackground",children:Object(I.jsx)(Te.a,{children:"If the time of stepping away is less than **Max Allowed Missing Time** in the settings, the Pomodoro session will continue the session when you are back."})})]})})}),Object(I.jsx)("div",{style:{padding:"10px"}}),Object(I.jsx)(Ce.a,{children:Object(I.jsx)(Ce.b,{children:Object(I.jsxs)("div",{style:{padding:"0 1rem 1rem 1rem"},children:[Object(I.jsx)(k.a,{use:"headline6",tag:"h2",children:"Why this intro always popup on start?"}),Object(I.jsx)(k.a,{use:"body1",tag:"div",theme:"textSecondaryOnBackground",children:"There must be at least one user interaction to make notification works, so I take this opportunity to intro the tool."})]})})}),Object(I.jsx)("div",{style:{padding:"10px"}}),Object(I.jsx)(Ce.a,{children:Object(I.jsx)(Ce.b,{children:Object(I.jsxs)("div",{style:{padding:"0 1rem 1rem 1rem"},children:[Object(I.jsx)(k.a,{use:"headline6",tag:"h2",children:"Will this slow down my computer or phone?"}),Object(I.jsx)(k.a,{use:"body1",tag:"div",theme:"textSecondaryOnBackground",children:"Usually not, it leverage GPU to detect your face and just takes a few milliseconds."})]})})})]}),Object(I.jsx)(xe.b,{children:Object(I.jsx)(xe.c,{action:"confirm",isDefaultAction:!0,children:"Ok, let's continue."})})]})})};var ke=function(){var e=Object(h.a)("pomoConfig",{defaultValue:R}),t=Object(d.a)(e,2),n=t[0],i=t[1],a=Object(o.useState)(!1),c=Object(d.a)(a,2),r=c[0],s=c[1],j=Object(o.useState)(!0),u=Object(d.a)(j,2),f=u[0],O=u[1];return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(ge.a,{options:{primary:"#bf360c",secondary:"#616161"},children:[Object(I.jsx)(Oe.a,{style:{zIndex:15},children:Object(I.jsxs)(Oe.d,{children:[Object(I.jsx)(Oe.e,{alignStart:!0,children:Object(I.jsx)(Oe.b,{icon:"help",onClick:function(){return O(!0)}})}),Object(I.jsx)(Oe.e,{className:Object(b.a)(Re||(Re=Object(l.a)(["justify-content: center"]))),children:Object(I.jsx)(Oe.f,{children:"Face Recognition Pomodoro"})}),Object(I.jsx)(Oe.e,{alignEnd:!0,children:Object(I.jsx)(Oe.b,{icon:"settings",onClick:function(){return s(!0)}})})]})}),Object(I.jsx)(Oe.c,{}),Object(I.jsx)(De,{open:f,onClose:function(){O(!1),i(Object(m.c)((function(e){e.enableDetection=!0,e.enableNotification=!0})))}}),Object(I.jsx)(Se,{open:r,onClose:function(){return s(!1)},pomoConfigs:n,setPomoConfigs:i}),Object(I.jsx)(D.Provider,{value:n,children:Object(I.jsx)(me,{})})]})})},Pe=function(e){e&&e instanceof Function&&n.e(6).then(n.bind(null,546)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),o(e),c(e)}))};s.a.createRoot(document.getElementById("root")).render(Object(I.jsx)(ke,{})),Pe(console.log),"serviceWorker"in navigator&&navigator.serviceWorker.register("./sw.js").then((function(e){console.log("SW registration succeeded with scope:",e.scope)})).catch((function(e){console.log("SW registration failed with error:",e)}))}},[[505,1,2]]]);
//# sourceMappingURL=main.34023cc5.chunk.js.map