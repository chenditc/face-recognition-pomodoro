/*! For license information please see main.ee70e117.js.LICENSE.txt */
!function(){var e={7228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},2858:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},9713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},5318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},862:function(e,t,n){var r=n(8).default;function o(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=a?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(i,u,s):i[u]=e[u]}return i.default=e,n&&n.set(e,i),i},e.exports.__esModule=!0,e.exports.default=e.exports},3884:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},521:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},1109:function(e,t,n){var r=n(9713);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},6479:function(e,t,n){var r=n(7316);e.exports=function(e,t){if(null==e)return{};var n,o,i=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},7316:function(e){e.exports=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o},e.exports.__esModule=!0,e.exports.default=e.exports},9591:function(e,t,n){var r=n(8).default;function o(){"use strict";e.exports=o=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,i=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(A){l=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),a=new S(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return T()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=C(a,n);if(u){if(u===p)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=d(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,a),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}t.wrap=f;var p={};function h(){}function v(){}function m(){}var g={};l(g,u,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(O([])));b&&b!==n&&i.call(b,u)&&(g=b);var x=m.prototype=h.prototype=Object.create(g);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(o,a,u,s){var c=d(e[o],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&i.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,u,s)}),(function(e){n("throw",e,u,s)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return n("throw",e,u,s)}))}s(c.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=d(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function O(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:T}}function T(){return{value:void 0,done:!0}}return v.prototype=m,l(x,"constructor",m),l(m,"constructor",v),v.displayName=l(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},w(E.prototype),l(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new E(f(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(x),l(x,c,"Generator"),l(x,u,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=O,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),s=i.call(o,"finallyLoc");if(u&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},3038:function(e,t,n){var r=n(2858),o=n(3884),i=n(379),a=n(521);e.exports=function(e,t){return r(e)||o(e,t)||i(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},8:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},379:function(e,t,n){var r=n(7228);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},7757:function(e,t,n){var r=n(9591)();e.exports=r;try{regeneratorRuntime=r}catch(o){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},7819:function(e,t,n){"use strict";n.r(t),n.d(t,{blue:function(){return _},cyan:function(){return C},geekblue:function(){return k},generate:function(){return d},gold:function(){return y},green:function(){return E},grey:function(){return T},lime:function(){return w},magenta:function(){return O},orange:function(){return b},presetDarkPalettes:function(){return v},presetPalettes:function(){return h},presetPrimaryColors:function(){return p},purple:function(){return S},red:function(){return m},volcano:function(){return g},yellow:function(){return x}});var r=n(2144),o=n(6144),i=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function a(e){var t=e.r,n=e.g,o=e.b,i=(0,r.py)(t,n,o);return{h:360*i.h,s:i.s,v:i.v}}function u(e){var t=e.r,n=e.g,o=e.b;return"#".concat((0,r.vq)(t,n,o,!1))}function s(e,t,n){var r=n/100;return{r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b}}function c(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-2*t:Math.round(e.h)+2*t:n?Math.round(e.h)+2*t:Math.round(e.h)-2*t)<0?r+=360:r>=360&&(r-=360),r}function l(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-.16*t:4===t?e.s+.16:e.s+.05*t)>1&&(r=1),n&&5===t&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function f(e,t,n){var r;return(r=n?e.v+.05*t:e.v-.15*t)>1&&(r=1),Number(r.toFixed(2))}function d(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=(0,o.uA)(e),d=5;d>0;d-=1){var p=a(r),h=u((0,o.uA)({h:c(p,d,!0),s:l(p,d,!0),v:f(p,d,!0)}));n.push(h)}n.push(u(r));for(var v=1;v<=4;v+=1){var m=a(r),g=u((0,o.uA)({h:c(m,v),s:l(m,v),v:f(m,v)}));n.push(g)}return"dark"===t.theme?i.map((function(e){var r=e.index,i=e.opacity;return u(s((0,o.uA)(t.backgroundColor||"#141414"),(0,o.uA)(n[r]),100*i))})):n}var p={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},h={},v={};Object.keys(p).forEach((function(e){h[e]=d(p[e]),h[e].primary=h[e][5],v[e]=d(p[e],{theme:"dark",backgroundColor:"#141414"}),v[e].primary=v[e][5]}));var m=h.red,g=h.volcano,y=h.gold,b=h.orange,x=h.yellow,w=h.lime,E=h.green,C=h.cyan,_=h.blue,k=h.geekblue,S=h.purple,O=h.magenta,T=h.grey},8913:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM695.5 365.7l-210.6 292a31.8 31.8 0 01-51.7 0L308.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H689c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-square",theme:"filled"}},8729:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M354 671h58.9c4.7 0 9.2-2.1 12.3-5.7L512 561.8l86.8 103.5c3 3.6 7.5 5.7 12.3 5.7H670c6.8 0 10.5-7.9 6.1-13.1L553.8 512l122.4-145.9c4.4-5.2.7-13.1-6.1-13.1h-58.9c-4.7 0-9.2 2.1-12.3 5.7L512 462.2l-86.8-103.5c-3-3.6-7.5-5.7-12.3-5.7H354c-6.8 0-10.5 7.9-6.1 13.1L470.2 512 347.9 657.9A7.95 7.95 0 00354 671z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"close-square",theme:"outlined"}},6207:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(r=n(1851))&&r.__esModule?r:{default:r};t.default=o,e.exports=o},1527:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(r=n(349))&&r.__esModule?r:{default:r};t.default=o,e.exports=o},7830:function(e,t,n){"use strict";var r=n(5318),o=n(862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(1109)),a=r(n(3038)),u=r(n(9713)),s=r(n(6479)),c=o(n(7313)),l=r(n(6123)),f=r(n(4573)),d=r(n(9063)),p=n(1468),h=n(9018),v=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];(0,p.setTwoToneColor)("#1890ff");var m=c.forwardRef((function(e,t){var n,r=e.className,o=e.icon,p=e.spin,m=e.rotate,g=e.tabIndex,y=e.onClick,b=e.twoToneColor,x=(0,s.default)(e,v),w=c.useContext(f.default).prefixCls,E=void 0===w?"anticon":w,C=(0,l.default)(E,(n={},(0,u.default)(n,"".concat(E,"-").concat(o.name),!!o.name),(0,u.default)(n,"".concat(E,"-spin"),!!p||"loading"===o.name),n),r),_=g;void 0===_&&y&&(_=-1);var k=m?{msTransform:"rotate(".concat(m,"deg)"),transform:"rotate(".concat(m,"deg)")}:void 0,S=(0,h.normalizeTwoToneColors)(b),O=(0,a.default)(S,2),T=O[0],A=O[1];return c.createElement("span",(0,i.default)((0,i.default)({role:"img","aria-label":o.name},x),{},{ref:t,tabIndex:_,onClick:y,className:C}),c.createElement(d.default,{icon:o,primaryColor:T,secondaryColor:A,style:k}))}));m.displayName="AntdIcon",m.getTwoToneColor=p.getTwoToneColor,m.setTwoToneColor=p.setTwoToneColor;var g=m;t.default=g},4573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,n(7313).createContext)({});t.default=r},9063:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(6479)),i=r(n(1109)),a=n(9018),u=["icon","className","onClick","style","primaryColor","secondaryColor"],s={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var c=function(e){var t=e.icon,n=e.className,r=e.onClick,c=e.style,l=e.primaryColor,f=e.secondaryColor,d=(0,o.default)(e,u),p=s;if(l&&(p={primaryColor:l,secondaryColor:f||(0,a.getSecondaryColor)(l)}),(0,a.useInsertStyles)(),(0,a.warning)((0,a.isIconDefinition)(t),"icon should be icon definiton, but got ".concat(t)),!(0,a.isIconDefinition)(t))return null;var h=t;return h&&"function"===typeof h.icon&&(h=(0,i.default)((0,i.default)({},h),{},{icon:h.icon(p.primaryColor,p.secondaryColor)})),(0,a.generate)(h.icon,"svg-".concat(h.name),(0,i.default)({className:n,onClick:r,style:c,"data-icon":h.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},d))};c.displayName="IconReact",c.getTwoToneColors=function(){return(0,i.default)({},s)},c.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;s.primaryColor=t,s.secondaryColor=n||(0,a.getSecondaryColor)(t),s.calculated=!!n};var l=c;t.default=l},1468:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.setTwoToneColor=function(e){var t=(0,a.normalizeTwoToneColors)(e),n=(0,o.default)(t,2),r=n[0],u=n[1];return i.default.setTwoToneColors({primaryColor:r,secondaryColor:u})},t.getTwoToneColor=function(){var e=i.default.getTwoToneColors();if(!e.calculated)return e.primaryColor;return[e.primaryColor,e.secondaryColor]};var o=r(n(3038)),i=r(n(9063)),a=n(9018)},1851:function(e,t,n){"use strict";var r=n(862),o=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(1109)),a=r(n(7313)),u=o(n(8913)),s=o(n(7830)),c=function(e,t){return a.createElement(s.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:u.default}))};c.displayName="CheckSquareFilled";var l=a.forwardRef(c);t.default=l},349:function(e,t,n){"use strict";var r=n(862),o=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(1109)),a=r(n(7313)),u=o(n(8729)),s=o(n(7830)),c=function(e,t){return a.createElement(s.default,(0,i.default)((0,i.default)({},e),{},{ref:t,icon:u.default}))};c.displayName="CloseSquareOutlined";var l=a.forwardRef(c);t.default=l},9018:function(e,t,n){"use strict";var r=n(862),o=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.warning=function(e,t){(0,c.default)(e,"[@ant-design/icons] ".concat(t))},t.isIconDefinition=function(e){return"object"===(0,a.default)(e)&&"string"===typeof e.name&&"string"===typeof e.theme&&("object"===(0,a.default)(e.icon)||"function"===typeof e.icon)},t.normalizeAttrs=d,t.generate=function e(t,n,r){if(!r)return s.default.createElement(t.tag,(0,i.default)({key:n},d(t.attrs)),(t.children||[]).map((function(r,o){return e(r,"".concat(n,"-").concat(t.tag,"-").concat(o))})));return s.default.createElement(t.tag,(0,i.default)((0,i.default)({key:n},d(t.attrs)),r),(t.children||[]).map((function(r,o){return e(r,"".concat(n,"-").concat(t.tag,"-").concat(o))})))},t.getSecondaryColor=function(e){return(0,u.generate)(e)[0]},t.normalizeTwoToneColors=function(e){if(!e)return[];return Array.isArray(e)?e:[e]},t.useInsertStyles=t.iconStyles=t.svgBaseProps=void 0;var i=o(n(1109)),a=o(n(8)),u=n(7819),s=r(n(7313)),c=o(n(4287)),l=n(5824),f=o(n(4573));function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];if("class"===n)t.className=r,delete t.class;else t[n]=r;return t}),{})}t.svgBaseProps={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"};var p="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n";t.iconStyles=p;t.useInsertStyles=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=(0,s.useContext)(f.default),n=t.csp;(0,s.useEffect)((function(){(0,l.updateCSS)(e,"@ant-design-icons",{prepend:!0,csp:n})}),[])}},2144:function(e,t,n){"use strict";n.d(t,{T6:function(){return p},VD:function(){return h},WE:function(){return c},Yt:function(){return v},lC:function(){return i},py:function(){return s},rW:function(){return o},s:function(){return f},ve:function(){return u},vq:function(){return l}});var r=n(3777);function o(e,t,n){return{r:255*(0,r.sh)(e,255),g:255*(0,r.sh)(t,255),b:255*(0,r.sh)(n,255)}}function i(e,t,n){e=(0,r.sh)(e,255),t=(0,r.sh)(t,255),n=(0,r.sh)(n,255);var o=Math.max(e,t,n),i=Math.min(e,t,n),a=0,u=0,s=(o+i)/2;if(o===i)u=0,a=0;else{var c=o-i;switch(u=s>.5?c/(2-o-i):c/(o+i),o){case e:a=(t-n)/c+(t<n?6:0);break;case t:a=(n-e)/c+2;break;case n:a=(e-t)/c+4}a/=6}return{h:a,s:u,l:s}}function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function u(e,t,n){var o,i,u;if(e=(0,r.sh)(e,360),t=(0,r.sh)(t,100),n=(0,r.sh)(n,100),0===t)i=n,u=n,o=n;else{var s=n<.5?n*(1+t):n+t-n*t,c=2*n-s;o=a(c,s,e+1/3),i=a(c,s,e),u=a(c,s,e-1/3)}return{r:255*o,g:255*i,b:255*u}}function s(e,t,n){e=(0,r.sh)(e,255),t=(0,r.sh)(t,255),n=(0,r.sh)(n,255);var o=Math.max(e,t,n),i=Math.min(e,t,n),a=0,u=o,s=o-i,c=0===o?0:s/o;if(o===i)a=0;else{switch(o){case e:a=(t-n)/s+(t<n?6:0);break;case t:a=(n-e)/s+2;break;case n:a=(e-t)/s+4}a/=6}return{h:a,s:c,v:u}}function c(e,t,n){e=6*(0,r.sh)(e,360),t=(0,r.sh)(t,100),n=(0,r.sh)(n,100);var o=Math.floor(e),i=e-o,a=n*(1-t),u=n*(1-i*t),s=n*(1-(1-i)*t),c=o%6;return{r:255*[n,u,a,a,s,n][c],g:255*[s,n,n,u,a,a][c],b:255*[a,a,s,n,n,u][c]}}function l(e,t,n,o){var i=[(0,r.FZ)(Math.round(e).toString(16)),(0,r.FZ)(Math.round(t).toString(16)),(0,r.FZ)(Math.round(n).toString(16))];return o&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function f(e,t,n,o,i){var a=[(0,r.FZ)(Math.round(e).toString(16)),(0,r.FZ)(Math.round(t).toString(16)),(0,r.FZ)(Math.round(n).toString(16)),(0,r.FZ)(d(o))];return i&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function d(e){return Math.round(255*parseFloat(e)).toString(16)}function p(e){return h(e)/255}function h(e){return parseInt(e,16)}function v(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}},4929:function(e,t,n){"use strict";n.d(t,{R:function(){return r}});var r={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},6144:function(e,t,n){"use strict";n.d(t,{uA:function(){return a}});var r=n(2144),o=n(4929),i=n(3777);function a(e){var t={r:0,g:0,b:0},n=1,a=null,u=null,s=null,c=!1,d=!1;return"string"===typeof e&&(e=function(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(o.R[e])e=o.R[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=l.rgb.exec(e);if(n)return{r:n[1],g:n[2],b:n[3]};if(n=l.rgba.exec(e))return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=l.hsl.exec(e))return{h:n[1],s:n[2],l:n[3]};if(n=l.hsla.exec(e))return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=l.hsv.exec(e))return{h:n[1],s:n[2],v:n[3]};if(n=l.hsva.exec(e))return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=l.hex8.exec(e))return{r:(0,r.VD)(n[1]),g:(0,r.VD)(n[2]),b:(0,r.VD)(n[3]),a:(0,r.T6)(n[4]),format:t?"name":"hex8"};if(n=l.hex6.exec(e))return{r:(0,r.VD)(n[1]),g:(0,r.VD)(n[2]),b:(0,r.VD)(n[3]),format:t?"name":"hex"};if(n=l.hex4.exec(e))return{r:(0,r.VD)(n[1]+n[1]),g:(0,r.VD)(n[2]+n[2]),b:(0,r.VD)(n[3]+n[3]),a:(0,r.T6)(n[4]+n[4]),format:t?"name":"hex8"};if(n=l.hex3.exec(e))return{r:(0,r.VD)(n[1]+n[1]),g:(0,r.VD)(n[2]+n[2]),b:(0,r.VD)(n[3]+n[3]),format:t?"name":"hex"};return!1}(e)),"object"===typeof e&&(f(e.r)&&f(e.g)&&f(e.b)?(t=(0,r.rW)(e.r,e.g,e.b),c=!0,d="%"===String(e.r).substr(-1)?"prgb":"rgb"):f(e.h)&&f(e.s)&&f(e.v)?(a=(0,i.JX)(e.s),u=(0,i.JX)(e.v),t=(0,r.WE)(e.h,a,u),c=!0,d="hsv"):f(e.h)&&f(e.s)&&f(e.l)&&(a=(0,i.JX)(e.s),s=(0,i.JX)(e.l),t=(0,r.ve)(e.h,a,s),c=!0,d="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=(0,i.Yq)(n),{ok:c,format:e.format||d,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var u="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),s="[\\s|\\(]+(".concat(u,")[,|\\s]+(").concat(u,")[,|\\s]+(").concat(u,")\\s*\\)?"),c="[\\s|\\(]+(".concat(u,")[,|\\s]+(").concat(u,")[,|\\s]+(").concat(u,")[,|\\s]+(").concat(u,")\\s*\\)?"),l={CSS_UNIT:new RegExp(u),rgb:new RegExp("rgb"+s),rgba:new RegExp("rgba"+c),hsl:new RegExp("hsl"+s),hsla:new RegExp("hsla"+c),hsv:new RegExp("hsv"+s),hsva:new RegExp("hsva"+c),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function f(e){return Boolean(l.CSS_UNIT.exec(String(e)))}},3777:function(e,t,n){"use strict";function r(e,t){(function(e){return"string"===typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"===typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function o(e){return Math.min(1,Math.max(0,e))}function i(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function a(e){return e<=1?"".concat(100*Number(e),"%"):e}function u(e){return 1===e.length?"0"+e:String(e)}n.d(t,{FZ:function(){return u},JX:function(){return a},V2:function(){return o},Yq:function(){return i},sh:function(){return r}})},4767:function(e){var t;t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./packages/mdc-dom/index.ts")}({"./packages/mdc-dom/events.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyPassive=function(e){return void 0===e&&(e=window),!!function(e){void 0===e&&(e=window);var t=!1;try{var n={get passive(){return t=!0,!1}},r=function(){};e.document.addEventListener("test",r,n),e.document.removeEventListener("test",r,n)}catch(o){t=!1}return t}(e)&&{passive:!0}}},"./packages/mdc-dom/focus-trap.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="mdc-dom-focus-sentinel",o=function(){function e(e,t){void 0===t&&(t={}),this.root=e,this.options=t,this.elFocusedBeforeTrapFocus=null}return e.prototype.trapFocus=function(){var e=this.getFocusableElements(this.root);if(0===e.length)throw new Error("FocusTrap: Element must have at least one focusable child.");this.elFocusedBeforeTrapFocus=document.activeElement instanceof HTMLElement?document.activeElement:null,this.wrapTabFocus(this.root,e),this.options.skipInitialFocus||this.focusInitialElement(e,this.options.initialFocusEl)},e.prototype.releaseFocus=function(){[].slice.call(this.root.querySelectorAll("."+r)).forEach((function(e){e.parentElement.removeChild(e)})),this.elFocusedBeforeTrapFocus&&this.elFocusedBeforeTrapFocus.focus()},e.prototype.wrapTabFocus=function(e,t){var n=this.createSentinel(),r=this.createSentinel();n.addEventListener("focus",(function(){t.length>0&&t[t.length-1].focus()})),r.addEventListener("focus",(function(){t.length>0&&t[0].focus()})),e.insertBefore(n,e.children[0]),e.appendChild(r)},e.prototype.focusInitialElement=function(e,t){var n=0;t&&(n=Math.max(e.indexOf(t),0)),e[n].focus()},e.prototype.getFocusableElements=function(e){return[].slice.call(e.querySelectorAll("[autofocus], [tabindex], a, input, textarea, select, button")).filter((function(e){var t="true"===e.getAttribute("aria-disabled")||null!=e.getAttribute("disabled")||null!=e.getAttribute("hidden")||"true"===e.getAttribute("aria-hidden"),n=e.tabIndex>=0&&e.getBoundingClientRect().width>0&&!e.classList.contains(r)&&!t,o=!1;if(n){var i=getComputedStyle(e);o="none"===i.display||"hidden"===i.visibility}return n&&!o}))},e.prototype.createSentinel=function(){var e=document.createElement("div");return e.setAttribute("tabindex","0"),e.setAttribute("aria-hidden","true"),e.classList.add(r),e},e}();t.FocusTrap=o},"./packages/mdc-dom/index.ts":function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n("./packages/mdc-dom/events.ts"));t.events=o;var i=r(n("./packages/mdc-dom/focus-trap.ts"));t.focusTrap=i;var a=r(n("./packages/mdc-dom/keyboard.ts"));t.keyboard=a;var u=r(n("./packages/mdc-dom/ponyfill.ts"));t.ponyfill=u},"./packages/mdc-dom/keyboard.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KEY={UNKNOWN:"Unknown",BACKSPACE:"Backspace",ENTER:"Enter",SPACEBAR:"Spacebar",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",END:"End",HOME:"Home",ARROW_LEFT:"ArrowLeft",ARROW_UP:"ArrowUp",ARROW_RIGHT:"ArrowRight",ARROW_DOWN:"ArrowDown",DELETE:"Delete",ESCAPE:"Escape"};var r=new Set;r.add(t.KEY.BACKSPACE),r.add(t.KEY.ENTER),r.add(t.KEY.SPACEBAR),r.add(t.KEY.PAGE_UP),r.add(t.KEY.PAGE_DOWN),r.add(t.KEY.END),r.add(t.KEY.HOME),r.add(t.KEY.ARROW_LEFT),r.add(t.KEY.ARROW_UP),r.add(t.KEY.ARROW_RIGHT),r.add(t.KEY.ARROW_DOWN),r.add(t.KEY.DELETE),r.add(t.KEY.ESCAPE);var o=8,i=13,a=32,u=33,s=34,c=35,l=36,f=37,d=38,p=39,h=40,v=46,m=27,g=new Map;g.set(o,t.KEY.BACKSPACE),g.set(i,t.KEY.ENTER),g.set(a,t.KEY.SPACEBAR),g.set(u,t.KEY.PAGE_UP),g.set(s,t.KEY.PAGE_DOWN),g.set(c,t.KEY.END),g.set(l,t.KEY.HOME),g.set(f,t.KEY.ARROW_LEFT),g.set(d,t.KEY.ARROW_UP),g.set(p,t.KEY.ARROW_RIGHT),g.set(h,t.KEY.ARROW_DOWN),g.set(v,t.KEY.DELETE),g.set(m,t.KEY.ESCAPE);var y=new Set;function b(e){var n=e.key;if(r.has(n))return n;var o=g.get(e.keyCode);return o||t.KEY.UNKNOWN}y.add(t.KEY.PAGE_UP),y.add(t.KEY.PAGE_DOWN),y.add(t.KEY.END),y.add(t.KEY.HOME),y.add(t.KEY.ARROW_LEFT),y.add(t.KEY.ARROW_UP),y.add(t.KEY.ARROW_RIGHT),y.add(t.KEY.ARROW_DOWN),t.normalizeKey=b,t.isNavigationEvent=function(e){return y.has(b(e))}},"./packages/mdc-dom/ponyfill.ts":function(e,t,n){"use strict";function r(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.closest=function(e,t){if(e.closest)return e.closest(t);for(var n=e;n;){if(r(n,t))return n;n=n.parentElement}return null},t.matches=r,t.estimateScrollWidth=function(e){var t=e;if(null!==t.offsetParent)return t.scrollWidth;var n=t.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);var r=n.scrollWidth;return document.documentElement.removeChild(n),r}}})},e.exports=t()},4935:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(8385),n(9933),n(4912)},8249:function(e,t,n){"use strict";n(5602),n(4935),n(3438)},5033:function(e,t,n){"use strict";n(3165),n(4935),n(4912)},4304:function(e,t,n){"use strict";n(8439)},6577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(8567)},5146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2361)},5397:function(e,t,n){"use strict";n(1865)},3438:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(9933),n(4912),n(535)},9933:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(445)},8897:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(7476)},1093:function(e,t,n){"use strict";n(7308),n(3047),n(9933),n(4912)},1405:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(865)},4912:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(5638)},8959:function(e,t,n){"use strict";n(3343),n(5146),n(4912)},2924:function(e,t,n){"use strict";n(9070),n(6577),n(1405),n(8897),n(4912),n(9933)},3147:function(e,t,n){"use strict";n(2153),n(234)},9111:function(e,t,n){"use strict";n(6804)},9619:function(e,t,n){"use strict";n(539),n(3438),n(4912),n(9933)},8697:function(e,t,n){"use strict";n(6737)},7312:function(e,t){"use strict";function n(){return!1}function r(){return!0}function o(){this.timeStamp=Date.now(),this.target=void 0,this.currentTarget=void 0}Object.defineProperty(t,"__esModule",{value:!0}),o.prototype={isEventObject:1,constructor:o,isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){this.isDefaultPrevented=r},stopPropagation:function(){this.isPropagationStopped=r},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=r,this.stopPropagation()},halt:function(e){e?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}},t.default=o,e.exports=t.default},7712:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(7312)),i=r(n(1843)),a=!1,u=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","shiftKey","target","timeStamp","view","type"];function s(e){return null===e||void 0===e}var c=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(e,t){s(e.which)&&(e.which=s(t.charCode)?t.keyCode:t.charCode),void 0===e.metaKey&&(e.metaKey=e.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(e,t){var n=void 0,r=void 0,o=void 0,i=t.wheelDelta,a=t.axis,u=t.wheelDeltaY,s=t.wheelDeltaX,c=t.detail;i&&(o=i/120),c&&(o=0-(c%3===0?c/3:c)),void 0!==a&&(a===e.HORIZONTAL_AXIS?(r=0,n=0-o):a===e.VERTICAL_AXIS&&(n=0,r=o)),void 0!==u&&(r=u/120),void 0!==s&&(n=-1*s/120),n||r||(r=o),void 0!==n&&(e.deltaX=n),void 0!==r&&(e.deltaY=r),void 0!==o&&(e.delta=o)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:["buttons","clientX","clientY","button","offsetX","relatedTarget","which","fromElement","toElement","offsetY","pageX","pageY","screenX","screenY"],fix:function(e,t){var n=void 0,r=void 0,o=void 0,i=e.target,a=t.button;return i&&s(e.pageX)&&!s(t.clientX)&&(r=(n=i.ownerDocument||document).documentElement,o=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===i?e.toElement:e.fromElement),e}}];function l(){return true}function f(){return a}function d(e){var t=e.type,n="function"===typeof e.stopPropagation||"boolean"===typeof e.cancelBubble;o.default.call(this),this.nativeEvent=e;var r=f;"defaultPrevented"in e?r=e.defaultPrevented?l:f:"getPreventDefault"in e?r=e.getPreventDefault()?l:f:"returnValue"in e&&(r=e.returnValue===a?l:f),this.isDefaultPrevented=r;var i=[],s=void 0,d=void 0,p=u.concat();for(c.forEach((function(e){t.match(e.reg)&&(p=p.concat(e.props),e.fix&&i.push(e.fix))})),s=p.length;s;)this[d=p[--s]]=e[d];for(!this.target&&n&&(this.target=e.srcElement||document),this.target&&3===this.target.nodeType&&(this.target=this.target.parentNode),s=i.length;s;)(0,i[--s])(this,e);this.timeStamp=e.timeStamp||Date.now()}var p=o.default.prototype;(0,i.default)(d.prototype,p,{constructor:d,preventDefault:function(){var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=a,p.preventDefault.call(this)},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=true,p.stopPropagation.call(this)}}),t.default=d,e.exports=t.default},1684:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){function o(t){var r=new i.default(t);n.call(e,r)}if(e.addEventListener){var a=function(){var n=!1;return"object"===typeof r?n=r.capture||!1:"boolean"===typeof r&&(n=r),e.addEventListener(t,o,r||!1),{v:{remove:function(){e.removeEventListener(t,o,n)}}}}();if("object"===typeof a)return a.v}else if(e.attachEvent)return e.attachEvent("on"+t,o),{remove:function(){e.detachEvent("on"+t,o)}}};var r,o=n(7712),i=(r=o)&&r.__esModule?r:{default:r};e.exports=t.default},220:function(e,t,n){e.exports={default:n(467),__esModule:!0}},5637:function(e,t,n){e.exports={default:n(7425),__esModule:!0}},6793:function(e,t,n){e.exports={default:n(2966),__esModule:!0}},8629:function(e,t,n){e.exports={default:n(9044),__esModule:!0}},3132:function(e,t,n){e.exports={default:n(4177),__esModule:!0}},1010:function(e,t,n){e.exports={default:n(3185),__esModule:!0}},420:function(e,t){"use strict";t.Z=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},7996:function(e,t,n){"use strict";var r,o=n(6793),i=(r=o)&&r.__esModule?r:{default:r};t.Z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},386:function(e,t,n){"use strict";var r,o=n(6793),i=(r=o)&&r.__esModule?r:{default:r};t.Z=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},4646:function(e,t,n){"use strict";var r,o=n(220),i=(r=o)&&r.__esModule?r:{default:r};t.Z=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},4401:function(e,t,n){"use strict";var r=a(n(8629)),o=a(n(5637)),i=a(n(5259));function a(e){return e&&e.__esModule?e:{default:e}}t.Z=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":(0,i.default)(t)));e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},684:function(e,t){"use strict";t.Z=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}},6583:function(e,t,n){"use strict";var r,o=n(5259),i=(r=o)&&r.__esModule?r:{default:r};t.Z=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":(0,i.default)(t))&&"function"!==typeof t?e:t}},5259:function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(1010)),o=a(n(3132)),i="function"===typeof o.default&&"symbol"===typeof r.default?function(e){return typeof e}:function(e){return e&&"function"===typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof o.default&&"symbol"===i(r.default)?function(e){return"undefined"===typeof e?"undefined":i(e)}:function(e){return e&&"function"===typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":"undefined"===typeof e?"undefined":i(e)}},467:function(e,t,n){n(3524),e.exports=n(5754).Object.assign},7425:function(e,t,n){n(7449);var r=n(5754).Object;e.exports=function(e,t){return r.create(e,t)}},2966:function(e,t,n){n(2879);var r=n(5754).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},9044:function(e,t,n){n(8338),e.exports=n(5754).Object.setPrototypeOf},4177:function(e,t,n){n(9028),n(801),n(4819),n(9309),e.exports=n(5754).Symbol},3185:function(e,t,n){n(7445),n(1450),e.exports=n(7891).f("iterator")},4402:function(e){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},4223:function(e){e.exports=function(){}},9516:function(e,t,n){var r=n(7095);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},7539:function(e,t,n){var r=n(2290),o=n(2957),i=n(1421);e.exports=function(e){return function(t,n,a){var u,s=r(t),c=o(s.length),l=i(a,c);if(e&&n!=n){for(;c>l;)if((u=s[l++])!=u)return!0}else for(;c>l;l++)if((e||l in s)&&s[l]===n)return e||l||0;return!e&&-1}}},6701:function(e){var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},5754:function(e){var t=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=t)},4569:function(e,t,n){var r=n(4402);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},5542:function(e){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},7829:function(e,t,n){e.exports=!n(6705)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},6915:function(e,t,n){var r=n(7095),o=n(740).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},5773:function(e){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},8526:function(e,t,n){var r=n(7282),o=n(9553),i=n(4863);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var a,u=n(e),s=i.f,c=0;u.length>c;)s.call(e,a=u[c++])&&t.push(a);return t}},3013:function(e,t,n){var r=n(740),o=n(5754),i=n(4569),a=n(9067),u=n(6139),s=function e(t,n,s){var c,l,f,d=t&e.F,p=t&e.G,h=t&e.S,v=t&e.P,m=t&e.B,g=t&e.W,y=p?o:o[n]||(o[n]={}),b=y.prototype,x=p?r:h?r[n]:(r[n]||{}).prototype;for(c in p&&(s=n),s)(l=!d&&x&&void 0!==x[c])&&u(y,c)||(f=l?x[c]:s[c],y[c]=p&&"function"!=typeof x[c]?s[c]:m&&l?i(f,r):g&&x[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):v&&"function"==typeof f?i(Function.call,f):f,v&&((y.virtual||(y.virtual={}))[c]=f,t&e.R&&b&&!b[c]&&a(b,c,f)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},6705:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},740:function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)},6139:function(e){var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},9067:function(e,t,n){var r=n(6728),o=n(7869);e.exports=n(7829)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},1015:function(e,t,n){var r=n(740).document;e.exports=r&&r.documentElement},8416:function(e,t,n){e.exports=!n(7829)&&!n(6705)((function(){return 7!=Object.defineProperty(n(6915)("div"),"a",{get:function(){return 7}}).a}))},2999:function(e,t,n){var r=n(6701);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},4683:function(e,t,n){var r=n(6701);e.exports=Array.isArray||function(e){return"Array"==r(e)}},7095:function(e){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},294:function(e,t,n){"use strict";var r=n(759),o=n(7869),i=n(9157),a={};n(9067)(a,n(102)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:o(1,n)}),i(e,t+" Iterator")}},3906:function(e,t,n){"use strict";var r=n(4159),o=n(3013),i=n(8004),a=n(9067),u=n(6469),s=n(294),c=n(9157),l=n(49),f=n(102)("iterator"),d=!([].keys&&"next"in[].keys()),p="keys",h="values",v=function(){return this};e.exports=function(e,t,n,m,g,y,b){s(n,t,m);var x,w,E,C=function(e){if(!d&&e in O)return O[e];switch(e){case p:case h:return function(){return new n(this,e)}}return function(){return new n(this,e)}},_=t+" Iterator",k=g==h,S=!1,O=e.prototype,T=O[f]||O["@@iterator"]||g&&O[g],A=T||C(g),R=g?k?C("entries"):A:void 0,N="Array"==t&&O.entries||T;if(N&&(E=l(N.call(new e)))!==Object.prototype&&E.next&&(c(E,_,!0),r||"function"==typeof E[f]||a(E,f,v)),k&&T&&T.name!==h&&(S=!0,A=function(){return T.call(this)}),r&&!b||!d&&!S&&O[f]||a(O,f,A),u[t]=A,u[_]=v,g)if(x={values:k?A:C(h),keys:y?A:C(p),entries:R},b)for(w in x)w in O||i(O,w,x[w]);else o(o.P+o.F*(d||S),t,x);return x}},7102:function(e){e.exports=function(e,t){return{value:t,done:!!e}}},6469:function(e){e.exports={}},4159:function(e){e.exports=!0},9578:function(e,t,n){var r=n(7650)("meta"),o=n(7095),i=n(6139),a=n(6728).f,u=0,s=Object.isExtensible||function(){return!0},c=!n(6705)((function(){return s(Object.preventExtensions({}))})),l=function(e){a(e,r,{value:{i:"O"+ ++u,w:{}}})},f=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!s(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!i(e,r)){if(!s(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return c&&f.NEED&&s(e)&&!i(e,r)&&l(e),e}}},6293:function(e,t,n){"use strict";var r=n(7829),o=n(7282),i=n(9553),a=n(4863),u=n(6164),s=n(2999),c=Object.assign;e.exports=!c||n(6705)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r}))?function(e,t){for(var n=u(e),c=arguments.length,l=1,f=i.f,d=a.f;c>l;)for(var p,h=s(arguments[l++]),v=f?o(h).concat(f(h)):o(h),m=v.length,g=0;m>g;)p=v[g++],r&&!d.call(h,p)||(n[p]=h[p]);return n}:c},759:function(e,t,n){var r=n(9516),o=n(4184),i=n(5773),a=n(906)("IE_PROTO"),u=function(){},s=function(){var e,t=n(6915)("iframe"),r=i.length;for(t.style.display="none",n(1015).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),s=e.F;r--;)delete s.prototype[i[r]];return s()};e.exports=Object.create||function(e,t){var n;return null!==e?(u.prototype=r(e),n=new u,u.prototype=null,n[a]=e):n=s(),void 0===t?n:o(n,t)}},6728:function(e,t,n){var r=n(9516),o=n(8416),i=n(6373),a=Object.defineProperty;t.f=n(7829)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(u){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},4184:function(e,t,n){var r=n(6728),o=n(9516),i=n(7282);e.exports=n(7829)?Object.defineProperties:function(e,t){o(e);for(var n,a=i(t),u=a.length,s=0;u>s;)r.f(e,n=a[s++],t[n]);return e}},939:function(e,t,n){var r=n(4863),o=n(7869),i=n(2290),a=n(6373),u=n(6139),s=n(8416),c=Object.getOwnPropertyDescriptor;t.f=n(7829)?c:function(e,t){if(e=i(e),t=a(t,!0),s)try{return c(e,t)}catch(n){}if(u(e,t))return o(!r.f.call(e,t),e[t])}},2721:function(e,t,n){var r=n(2290),o=n(4740).f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==i.call(e)?function(e){try{return o(e)}catch(t){return a.slice()}}(e):o(r(e))}},4740:function(e,t,n){var r=n(2760),o=n(5773).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},9553:function(e,t){t.f=Object.getOwnPropertySymbols},49:function(e,t,n){var r=n(6139),o=n(6164),i=n(906)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},2760:function(e,t,n){var r=n(6139),o=n(2290),i=n(7539)(!1),a=n(906)("IE_PROTO");e.exports=function(e,t){var n,u=o(e),s=0,c=[];for(n in u)n!=a&&r(u,n)&&c.push(n);for(;t.length>s;)r(u,n=t[s++])&&(~i(c,n)||c.push(n));return c}},7282:function(e,t,n){var r=n(2760),o=n(5773);e.exports=Object.keys||function(e){return r(e,o)}},4863:function(e,t){t.f={}.propertyIsEnumerable},7869:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},8004:function(e,t,n){e.exports=n(9067)},6832:function(e,t,n){var r=n(7095),o=n(9516),i=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(4569)(Function.call,n(939).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(o){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:i}},9157:function(e,t,n){var r=n(6728).f,o=n(6139),i=n(102)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},906:function(e,t,n){var r=n(4297)("keys"),o=n(7650);e.exports=function(e){return r[e]||(r[e]=o(e))}},4297:function(e,t,n){var r=n(5754),o=n(740),i="__core-js_shared__",a=o[i]||(o[i]={});(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(4159)?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},5940:function(e,t,n){var r=n(6257),o=n(5542);e.exports=function(e){return function(t,n){var i,a,u=String(o(t)),s=r(n),c=u.length;return s<0||s>=c?e?"":void 0:(i=u.charCodeAt(s))<55296||i>56319||s+1===c||(a=u.charCodeAt(s+1))<56320||a>57343?e?u.charAt(s):i:e?u.slice(s,s+2):a-56320+(i-55296<<10)+65536}}},1421:function(e,t,n){var r=n(6257),o=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):i(e,t)}},6257:function(e){var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},2290:function(e,t,n){var r=n(2999),o=n(5542);e.exports=function(e){return r(o(e))}},2957:function(e,t,n){var r=n(6257),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},6164:function(e,t,n){var r=n(5542);e.exports=function(e){return Object(r(e))}},6373:function(e,t,n){var r=n(7095);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},7650:function(e){var t=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++t+n).toString(36))}},7696:function(e,t,n){var r=n(740),o=n(5754),i=n(4159),a=n(7891),u=n(6728).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||u(t,e,{value:a.f(e)})}},7891:function(e,t,n){t.f=n(102)},102:function(e,t,n){var r=n(4297)("wks"),o=n(7650),i=n(740).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},9358:function(e,t,n){"use strict";var r=n(4223),o=n(7102),i=n(6469),a=n(2290);e.exports=n(3906)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):o(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},3524:function(e,t,n){var r=n(3013);r(r.S+r.F,"Object",{assign:n(6293)})},7449:function(e,t,n){var r=n(3013);r(r.S,"Object",{create:n(759)})},2879:function(e,t,n){var r=n(3013);r(r.S+r.F*!n(7829),"Object",{defineProperty:n(6728).f})},8338:function(e,t,n){var r=n(3013);r(r.S,"Object",{setPrototypeOf:n(6832).set})},801:function(){},7445:function(e,t,n){"use strict";var r=n(5940)(!0);n(3906)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},9028:function(e,t,n){"use strict";var r=n(740),o=n(6139),i=n(7829),a=n(3013),u=n(8004),s=n(9578).KEY,c=n(6705),l=n(4297),f=n(9157),d=n(7650),p=n(102),h=n(7891),v=n(7696),m=n(8526),g=n(4683),y=n(9516),b=n(7095),x=n(6164),w=n(2290),E=n(6373),C=n(7869),_=n(759),k=n(2721),S=n(939),O=n(9553),T=n(6728),A=n(7282),R=S.f,N=T.f,I=k.f,P=r.Symbol,D=r.JSON,M=D&&D.stringify,F=p("_hidden"),L=p("toPrimitive"),j={}.propertyIsEnumerable,B=l("symbol-registry"),V=l("symbols"),z=l("op-symbols"),W=Object.prototype,U="function"==typeof P&&!!O.f,H=r.QObject,G=!H||!H.prototype||!H.prototype.findChild,q=i&&c((function(){return 7!=_(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=R(W,t);r&&delete W[t],N(e,t,n),r&&e!==W&&N(W,t,r)}:N,K=function(e){var t=V[e]=_(P.prototype);return t._k=e,t},$=U&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},X=function(e,t,n){return e===W&&X(z,t,n),y(e),t=E(t,!0),y(n),o(V,t)?(n.enumerable?(o(e,F)&&e[F][t]&&(e[F][t]=!1),n=_(n,{enumerable:C(0,!1)})):(o(e,F)||N(e,F,C(1,{})),e[F][t]=!0),q(e,t,n)):N(e,t,n)},Y=function(e,t){y(e);for(var n,r=m(t=w(t)),o=0,i=r.length;i>o;)X(e,n=r[o++],t[n]);return e},Q=function(e){var t=j.call(this,e=E(e,!0));return!(this===W&&o(V,e)&&!o(z,e))&&(!(t||!o(this,e)||!o(V,e)||o(this,F)&&this[F][e])||t)},Z=function(e,t){if(e=w(e),t=E(t,!0),e!==W||!o(V,t)||o(z,t)){var n=R(e,t);return!n||!o(V,t)||o(e,F)&&e[F][t]||(n.enumerable=!0),n}},J=function(e){for(var t,n=I(w(e)),r=[],i=0;n.length>i;)o(V,t=n[i++])||t==F||t==s||r.push(t);return r},ee=function(e){for(var t,n=e===W,r=I(n?z:w(e)),i=[],a=0;r.length>a;)!o(V,t=r[a++])||n&&!o(W,t)||i.push(V[t]);return i};U||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function t(n){this===W&&t.call(z,n),o(this,F)&&o(this[F],e)&&(this[F][e]=!1),q(this,e,C(1,n))};return i&&G&&q(W,e,{configurable:!0,set:t}),K(e)},u(P.prototype,"toString",(function(){return this._k})),S.f=Z,T.f=X,n(4740).f=k.f=J,n(4863).f=Q,O.f=ee,i&&!n(4159)&&u(W,"propertyIsEnumerable",Q,!0),h.f=function(e){return K(p(e))}),a(a.G+a.W+a.F*!U,{Symbol:P});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var re=A(p.store),oe=0;re.length>oe;)v(re[oe++]);a(a.S+a.F*!U,"Symbol",{for:function(e){return o(B,e+="")?B[e]:B[e]=P(e)},keyFor:function(e){if(!$(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),a(a.S+a.F*!U,"Object",{create:function(e,t){return void 0===t?_(e):Y(_(e),t)},defineProperty:X,defineProperties:Y,getOwnPropertyDescriptor:Z,getOwnPropertyNames:J,getOwnPropertySymbols:ee});var ie=c((function(){O.f(1)}));a(a.S+a.F*ie,"Object",{getOwnPropertySymbols:function(e){return O.f(x(e))}}),D&&a(a.S+a.F*(!U||c((function(){var e=P();return"[null]"!=M([e])||"{}"!=M({a:e})||"{}"!=M(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=t=r[1],(b(t)||void 0!==e)&&!$(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!$(t))return t}),r[1]=t,M.apply(D,r)}}),P.prototype[L]||n(9067)(P.prototype,L,P.prototype.valueOf),f(P,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},4819:function(e,t,n){n(7696)("asyncIterator")},9309:function(e,t,n){n(7696)("observable")},1450:function(e,t,n){n(9358);for(var r=n(740),o=n(9067),i=n(6469),a=n(102)("toStringTag"),u="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<u.length;s++){var c=u[s],l=r[c],f=l&&l.prototype;f&&!f[a]&&o(f,a,c),i[c]=i.Array}},6123:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)){if(n.length){var a=o.apply(null,n);a&&e.push(a)}}else if("object"===i)if(n.toString===Object.prototype.toString)for(var u in n)r.call(n,u)&&n[u]&&e.push(u);else e.push(n.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},3105:function(e,t,n){try{var r=n(2447)}catch(u){r=n(2447)}var o=/\s+/,i=Object.prototype.toString;function a(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}e.exports=function(e){return new a(e)},a.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array();return~r(t,e)||t.push(e),this.el.className=t.join(" "),this},a.prototype.remove=function(e){if("[object RegExp]"==i.call(e))return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=r(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this},a.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},a.prototype.toggle=function(e,t){return this.list?("undefined"!==typeof t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):("undefined"!==typeof t?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)},a.prototype.array=function(){var e=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(o);return""===e[0]&&e.shift(),e},a.prototype.has=a.prototype.contains=function(e){return this.list?this.list.contains(e):!!~r(this.array(),e)}},2447:function(e){e.exports=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}},1465:function(e){e.exports=function(){"use strict";function e(t){return e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function u(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function s(e,t,n){return s=u()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&a(o,n.prototype),o},s.apply(null,arguments)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?c(e):t}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}function d(e,t,n){return d="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=f(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},d(e,t,n||e)}function p(e){throw Error(e)}function h(e){if(R(e)){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.call.apply(e,[this].concat(n))}}function v(e){return E(e=C(e)?Math.ceil(e):Math.floor(e))?("-"+e).toString():e}function m(e){return!k(e)&&!_(e)}function g(e,t){return function(){return t(e())}}function y(e){return function(t){return t.map(e).reduce((function(e,t){return e.concat(t)}),[])}}function b(e){return y((function(e){return e}))(e)}function x(e){return y((function(e){return Array.isArray(e)?x(e):e}))(e)}function w(e){return x(e).length}function E(e){return 1/Math.round(e)===-1/0}function C(e){return E(e)||e<0}function _(e){return null===e}function k(e){return"undefined"===typeof e}function S(e){return e instanceof Function&&!!e.name}function O(e){return"string"===typeof e}function T(e){return e instanceof Array}function A(t){var n=e(t);return null!=t&&!T(t)&&("object"==n||"function"==n)}function R(e){return e instanceof Function}function N(e){return!isNaN(e)}function I(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase()}var P=function(){function e(n){t(this,e),this.setAttribute(Object.assign({events:{}},n))}return r(e,[{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return this.events[e]&&this.events[e].forEach((function(e){e.apply(t,r)})),this}},{key:"on",value:function(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),this}},{key:"off",value:function(e,t){return this.events[e]&&t?this.events[e]=this.events[e].filter((function(e){return e!==t})):this.events[e]=[],this}},{key:"once",value:function(e,t){var n=this;return t=g(t,(function(){return n.off(e,t)})),this.on(e,t,!0)}},{key:"getAttribute",value:function(e){return this.hasOwnProperty(e)?this[e]:null}},{key:"getAttributes",value:function(){var e=this,t={};return Object.getOwnPropertyNames(this).forEach((function(n){t[n]=e.getAttribute(n)})),t}},{key:"getPublicAttributes",value:function(){var e=this;return Object.keys(this.getAttributes()).filter((function(e){return!e.match(/^\$/)})).reduce((function(t,n){return t[n]=e.getAttribute(n),t}),{})}},{key:"setAttribute",value:function(e,t){A(e)?this.setAttributes(e):this[e]=t}},{key:"setAttributes",value:function(e){for(var t in e)this.setAttribute(t,e[t])}},{key:"callback",value:function(e){return h.call(this,e)}},{key:"name",get:function(){return this.constructor.defineName instanceof Function||p("Every class must define its name."),this.constructor.defineName()}},{key:"events",get:function(){return this.$events||{}},set:function(e){this.$events=e}}],[{key:"make",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s(this,t)}}]),e}();function D(e,t){function n(e){return(t.prependLeadingZero&&1===e.toString().split("").length?"0":"").concat(e)}function r(e,t){var n=x(e).length;if(n<t)for(var r=0;r<t-n;r++)e[0].unshift("0");return e}return t=Object.assign({minimumDigits:0,prependLeadingZero:!0},t),r(b([e]).map((function(e){return b(x([e]).map((function(e){return n(e).split("")})))})),t.minimumDigits||0)}var M=[{min:48,max:57},{min:65,max:90},{min:97,max:122}];function F(e,t){return"number"===t?parseFloat(e):e}function L(e){for(var t in M){var n=e.toString().charCodeAt(0);if(M[t].min<=n&&M[t].max>=n)return M[t]}return null}function j(e,t){return String.fromCharCode(t(L(e),e.charCodeAt(0)))}function B(t){return F(t.toString().split("").map((function(e){return j(e,(function(e,t){return!e||t<e.max?t+1:e.min}))})).join(""),e(t))}function V(t){return F(t.toString().split("").map((function(e){return j(e,(function(e,t){return!e||t>e.min?t-1:e.max}))})).join(""),e(t))}var z=function(e){function n(e,r){var o;return t(this,n),o=l(this,i(n).call(this,Object.assign({format:function(e){return e},prependLeadingZero:!0,minimumDigits:0},r))),o.value||(o.value=e),o}return o(n,e),r(n,[{key:"isNaN",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return isNaN(this.value)}))},{key:"isNumber",value:function(){return N()}},{key:"clone",value:function(e,t){return new this.constructor(e,Object.assign(this.getPublicAttributes(),t))}},{key:"digits",get:function(){return this.$digits},set:function(e){this.$digits=e,this.minimumDigits=Math.max(this.minimumDigits,w(e))}},{key:"value",get:function(){return this.$value},set:function(e){this.$value=e,this.digits=D(this.format(e),{minimumDigits:this.minimumDigits,prependLeadingZero:this.prependLeadingZero})}}],[{key:"defineName",value:function(){return"FaceValue"}}]),n}(P);function W(t){for(var n=!1,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return b(o).forEach((function(r){(_(t)&&_(r)||A(r)&&t instanceof r||R(r)&&!S(r)&&!0===r(t)||O(r)&&e(t)===r)&&(n=!0)})),n}var U={className:"The className() is not defined.",items:"The items property must be an array.",theme:"The theme property must be an object.",language:"The language must be an object.",date:"The value must be an instance of a Date.",face:"The face must be an instance of a Face class.",element:"The element must be an instance of an HTMLElement",faceValue:"The face must be an instance of a FaceValue class.",timer:"The timer property must be an instance of a Timer class."},H=function(e){function n(e,r){var o;return t(this,n),e instanceof z||!A(e)||(r=e,e=void 0),(o=l(this,i(n).call(this))).setAttributes(Object.assign({autoStart:!0,countdown:!1,animationRate:500},o.defaultAttributes(),r||{})),(_(e)||k(e))&&(e=o.defaultValue()),e&&(o.value=e),o}return o(n,e),r(n,[{key:"interval",value:function(e,t){return this.countdown?this.decrement(e):this.increment(e),h.call(this,t),this.shouldStop(e)&&e.stop(),this.emit("interval")}},{key:"shouldStop",value:function(e){return!k(this.stopAt)&&this.stopAt===e.value.value}},{key:"format",value:function(e,t){return t}},{key:"defaultValue",value:function(){}},{key:"defaultAttributes",value:function(){}},{key:"defaultDataType",value:function(){}},{key:"increment",value:function(e,t){}},{key:"decrement",value:function(e,t){}},{key:"started",value:function(e){}},{key:"stopped",value:function(e){}},{key:"reset",value:function(e){}},{key:"initialized",value:function(e){}},{key:"rendered",value:function(e){}},{key:"mounted",value:function(e){this.autoStart&&e.timer.isStopped&&window.requestAnimationFrame((function(){return e.start(e)}))}},{key:"createFaceValue",value:function(e,t){var n=this;return z.make(R(t)&&!t.name?t():t,{minimumDigits:this.minimumDigits,format:function(t){return n.format(e,t)}})}},{key:"dataType",get:function(){return this.defaultDataType()}},{key:"value",get:function(){return this.$value},set:function(e){e instanceof z||(e=this.createFaceValue(e)),this.$value=e}},{key:"stopAt",get:function(){return this.$stopAt},set:function(e){this.$stopAt=e}},{key:"originalValue",get:function(){return this.$originalValue},set:function(e){this.$originalValue=e}}]),n}(P),G={years:"\u0633\u0646\u0648\u0627\u062a",months:"\u0634\u0647\u0648\u0631",days:"\u0623\u064a\u0627\u0645",hours:"\u0633\u0627\u0639\u0627\u062a",minutes:"\u062f\u0642\u0627\u0626\u0642",seconds:"\u062b\u0648\u0627\u0646\u064a"},q=["ar","ar-ar","arabic"],K=Object.freeze({dictionary:G,aliases:q}),$={years:"Anys",months:"Mesos",days:"Dies",hours:"Hores",minutes:"Minuts",seconds:"Segons"},X=["ca","ca-es","catalan"],Y=Object.freeze({dictionary:$,aliases:X}),Q={years:"Roky",months:"M\u011bs\xedce",days:"Dny",hours:"Hodiny",minutes:"Minuty",seconds:"Sekundy"},Z=["cs","cs-cz","cz","cz-cs","czech"],J=Object.freeze({dictionary:Q,aliases:Z}),ee={years:"\xc5r",months:"M\xe5neder",days:"Dage",hours:"Timer",minutes:"Minutter",seconds:"Sekunder"},te=["da","da-dk","danish"],ne=Object.freeze({dictionary:ee,aliases:te}),re={years:"Jahre",months:"Monate",days:"Tage",hours:"Stunden",minutes:"Minuten",seconds:"Sekunden"},oe=["de","de-de","german"],ie=Object.freeze({dictionary:re,aliases:oe}),ae={years:"Years",months:"Months",days:"Days",hours:"Hours",minutes:"Minutes",seconds:"Seconds"},ue=["en","en-us","english"],se=Object.freeze({dictionary:ae,aliases:ue}),ce={years:"A\xf1os",months:"Meses",days:"D\xedas",hours:"Horas",minutes:"Minutos",seconds:"Segundos"},le=["es","es-es","spanish"],fe=Object.freeze({dictionary:ce,aliases:le}),de={years:"\u0633\u0627\u0644",months:"\u0645\u0627\u0647",days:"\u0631\u0648\u0632",hours:"\u0633\u0627\u0639\u062a",minutes:"\u062f\u0642\u06cc\u0642\u0647",seconds:"\u062b\u0627\u0646\u06cc\u0647"},pe=["fa","fa-ir","persian"],he=Object.freeze({dictionary:de,aliases:pe}),ve={years:"Vuotta",months:"Kuukautta",days:"P\xe4iv\xe4\xe4",hours:"Tuntia",minutes:"Minuuttia",seconds:"Sekuntia"},me=["fi","fi-fi","finnish"],ge=Object.freeze({dictionary:ve,aliases:me}),ye={years:"Ans",months:"Mois",days:"Jours",hours:"Heures",minutes:"Minutes",seconds:"Secondes"},be=["fr","fr-ca","french"],xe=Object.freeze({dictionary:ye,aliases:be}),we={years:"\u05e9\u05e0\u05d9\u05dd",months:"\u05d7\u05d5\u05d3\u05e9",days:"\u05d9\u05de\u05d9\u05dd",hours:"\u05e9\u05e2\u05d5\u05ea",minutes:"\u05d3\u05e7\u05d5\u05ea",seconds:"\u05e9\u05e0\u05d9\u05d5\u05ea"},Ee=["il","he-il","hebrew"],Ce=Object.freeze({dictionary:we,aliases:Ee}),_e={years:"\xc9v",months:"H\xf3nap",days:"Nap",hours:"\xd3ra",minutes:"Perc",seconds:"M\xe1sodperc"},ke=["hu","hu-hu","hungarian"],Se=Object.freeze({dictionary:_e,aliases:ke}),Oe={years:"Anni",months:"Mesi",days:"Giorni",hours:"Ore",minutes:"Minuti",seconds:"Secondi"},Te=["da","da-dk","danish"],Ae=Object.freeze({dictionary:Oe,aliases:Te}),Re={years:"\u5e74",months:"\u6708",days:"\u65e5",hours:"\u6642",minutes:"\u5206",seconds:"\u79d2"},Ne=["jp","ja-jp","japanese"],Ie=Object.freeze({dictionary:Re,aliases:Ne}),Pe={years:"\ub144",months:"\uc6d4",days:"\uc77c",hours:"\uc2dc",minutes:"\ubd84",seconds:"\ucd08"},De=["ko","ko-kr","korean"],Me=Object.freeze({dictionary:Pe,aliases:De}),Fe={years:"Gadi",months:"M\u0113ne\u0161i",days:"Dienas",hours:"Stundas",minutes:"Min\u016btes",seconds:"Sekundes"},Le=["lv","lv-lv","latvian"],je=Object.freeze({dictionary:Fe,aliases:Le}),Be={years:"Jaren",months:"Maanden",days:"Dagen",hours:"Uren",minutes:"Minuten",seconds:"Seconden"},Ve=["nl","nl-be","dutch"],ze=Object.freeze({dictionary:Be,aliases:Ve}),We={years:"\xc5r",months:"M\xe5neder",days:"Dager",hours:"Timer",minutes:"Minutter",seconds:"Sekunder"},Ue=["no","nb","no-nb","norwegian"],He=Object.freeze({dictionary:We,aliases:Ue}),Ge={years:"Lat",months:"Miesi\u0119cy",days:"Dni",hours:"Godziny",minutes:"Minuty",seconds:"Sekundy"},qe=["pl","pl-pl","polish"],Ke=Object.freeze({dictionary:Ge,aliases:qe}),$e={years:"Anos",months:"Meses",days:"Dias",hours:"Horas",minutes:"Minutos",seconds:"Segundos"},Xe=["pt","pt-br","portuguese"],Ye=Object.freeze({dictionary:$e,aliases:Xe}),Qe={years:"Ani",months:"Luni",days:"Zile",hours:"Ore",minutes:"Minute",seconds:"sSecunde"},Ze=["ro","ro-ro","romana"],Je=Object.freeze({dictionary:Qe,aliases:Ze}),et={years:"\u043b\u0435\u0442",months:"\u043c\u0435\u0441\u044f\u0446\u0435\u0432",days:"\u0434\u043d\u0435\u0439",hours:"\u0447\u0430\u0441\u043e\u0432",minutes:"\u043c\u0438\u043d\u0443\u0442",seconds:"\u0441\u0435\u043a\u0443\u043d\u0434"},tt=["ru","ru-ru","russian"],nt=Object.freeze({dictionary:et,aliases:tt}),rt={years:"Roky",months:"Mesiace",days:"Dni",hours:"Hodiny",minutes:"Min\xfaty",seconds:"Sekundy"},ot=["sk","sk-sk","slovak"],it=Object.freeze({dictionary:rt,aliases:ot}),at={years:"\xc5r",months:"M\xe5nader",days:"Dagar",hours:"Timmar",minutes:"Minuter",seconds:"Sekunder"},ut=["sv","sv-se","swedish"],st=Object.freeze({dictionary:at,aliases:ut}),ct={years:"\u0e1b\u0e35",months:"\u0e40\u0e14\u0e37\u0e2d\u0e19",days:"\u0e27\u0e31\u0e19",hours:"\u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",minutes:"\u0e19\u0e32\u0e17\u0e35",seconds:"\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35"},lt=["th","th-th","thai"],ft=Object.freeze({dictionary:ct,aliases:lt}),dt={years:"Y\u0131l",months:"Ay",days:"G\xfcn",hours:"Saat",minutes:"Dakika",seconds:"Saniye"},pt=["tr","tr-tr","turkish"],ht=Object.freeze({dictionary:dt,aliases:pt}),vt={years:"\u0440\u043e\u043a\u0438",months:"\u043c\u0456\u0441\u044f\u0446\u0456",days:"\u0434\u043d\u0456",hours:"\u0433\u043e\u0434\u0438\u043d\u0438",minutes:"\u0445\u0432\u0438\u043b\u0438\u043d\u0438",seconds:"\u0441\u0435\u043a\u0443\u043d\u0434\u0438"},mt=["ua","ua-ua","ukraine"],gt=Object.freeze({dictionary:vt,aliases:mt}),yt={years:"N\u0103m",months:"Th\xe1ng",days:"Ng\xe0y",hours:"Gi\u1edd",minutes:"Ph\xfat",seconds:"Gi\xe2y"},bt=["vn","vn-vn","vietnamese"],xt=Object.freeze({dictionary:yt,aliases:bt}),wt={years:"\u5e74",months:"\u6708",days:"\u65e5",hours:"\u65f6",minutes:"\u5206",seconds:"\u79d2"},Et=["zh","zh-cn","chinese"],Ct=Object.freeze({dictionary:wt,aliases:Et}),_t={years:"\u5e74",months:"\u6708",days:"\u65e5",hours:"\u6642",minutes:"\u5206",seconds:"\u79d2"},kt=["zh-tw"],St=Object.freeze({dictionary:_t,aliases:kt}),Ot=Object.freeze({Arabic:K,Catalan:Y,Czech:J,Danish:ne,German:ie,English:se,Spanish:fe,Persian:he,Finnish:ge,French:xe,Hebrew:Ce,Hungarian:Se,Italian:Ae,Japanese:Ie,Korean:Me,Latvian:je,Dutch:ze,Norwegian:He,Polish:Ke,Portuguese:Ye,Romanian:Je,Russian:nt,Slovak:it,Swedish:st,Thai:ft,Turkish:ht,Ukrainian:gt,Vietnamese:xt,Chinese:Ct,TraditionalChinese:St});function Tt(e){return e?Ot[e.toLowerCase()]||Object.values(Ot).find((function(t){return-1!==t.aliases.indexOf(e)})):null}function At(e,t){var n=O(t)?Tt(t):t;return(n.dictionary||n)[e]||e}function Rt(e,t){return t.parentNode?(t.parentNode.replaceChild(e,t),e):t}function Nt(e,t){if(A(t))for(var n in t)e.setAttribute(n,t[n]);return e}function It(e,t){return T(t)&&t.filter(m).forEach((function(t){t instanceof HTMLElement&&e.appendChild(t)})),e}function Pt(e,t,n){return e instanceof HTMLElement||(e=document.createElement(e)),Nt(e,A(t)?t:n),A(t)||T(t)?It(e,t):e.innerHTML=t,e}var Dt=function(e){function n(e){var r;if(t(this,n),(r=l(this,i(n).call(this,Object.assign({parent:null},e)))).theme||p("".concat(r.name," does not have a theme defined.")),r.language||p("".concat(r.name," does not have a language defined.")),!r.theme[r.name])throw new Error("".concat(r.name," cannot be rendered because it has no template."));return r}return o(n,e),r(n,[{key:"translate",value:function(e){return At(e,this.language)}},{key:"t",value:function(e){return this.translate(e)}},{key:"render",value:function(){var e=Pt("div",{class:"flip-clock"===this.className?this.className:"flip-clock-"+this.className});return this.theme[this.name](e,this),this.el?this.el.innerHTML!==e.innerHTML&&(this.el=Rt(e,this.el)):this.el=e,this.el}},{key:"mount",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.render(),this.parent=e,t?this.parent.insertBefore(this.el,t):this.parent.appendChild(this.el),this.el}},{key:"className",get:function(){return I(this.constructor.defineName())}},{key:"el",get:function(){return this.$el},set:function(e){W(e,null,HTMLElement)||p(U.element),this.$el=e}},{key:"parent",get:function(){return this.$parent},set:function(e){this.$parent=e}},{key:"theme",get:function(){return this.$theme},set:function(e){W(e,"object")||p(U.value),this.$theme=e}},{key:"language",get:function(){return this.$language},set:function(e){O(e)&&(e=Tt(e)),W(e,"object")||p(U.language),this.$language=e}}]),n}(P),Mt=function(e){function n(){return t(this,n),l(this,i(n).apply(this,arguments))}return o(n,e),r(n,null,[{key:"defineName",value:function(){return"Divider"}}]),n}(Dt),Ft=function(e){function n(e,r){return t(this,n),l(this,i(n).call(this,Object.assign({value:e},A(e)?e:null,r)))}return o(n,e),r(n,null,[{key:"defineName",value:function(){return"ListItem"}}]),n}(Dt),Lt=function(e){function n(e,r){return t(this,n),l(this,i(n).call(this,Object.assign({value:e,items:[]},A(e)?e:null,r)))}return o(n,e),r(n,[{key:"createListItem",value:function(e,t){var n=new Ft(e,Object.assign({theme:this.theme,language:this.language},t));return this.$items.push(n),n}},{key:"value",get:function(){return this.$value},set:function(e){this.$value=e}},{key:"items",get:function(){return this.$items},set:function(e){this.$items=e}}],[{key:"defineName",value:function(){return"List"}}]),n}(Dt),jt=function(e){function n(e,r){return t(this,n),l(this,i(n).call(this,Object.assign({items:T(e)?e:[]},A(e)?e:null,r)))}return o(n,e),r(n,null,[{key:"defineName",value:function(){return"Group"}}]),n}(Dt),Bt=function(e){function n(e,r){return t(this,n),l(this,i(n).call(this,Object.assign({label:e},A(e)?e:null,r)))}return o(n,e),r(n,null,[{key:"defineName",value:function(){return"Label"}}]),n}(Dt),Vt=function(e){function n(e){return t(this,n),l(this,i(n).call(this,Object.assign({count:0,handle:null,started:null,running:!1,interval:N(e)?e:null},A(e)?e:null)))}return o(n,e),r(n,[{key:"reset",value:function(e){var t=this;return this.stop((function(){t.count=0,t.start((function(){return h.call(t,e)})),t.emit("reset")})),this}},{key:"start",value:function(e){var t=this;return this.started=new Date,this.lastLoop=Date.now(),this.running=!0,this.emit("start"),function n(){return Date.now()-t.lastLoop>=t.interval&&(h.call(t,e),t.lastLoop=Date.now(),t.emit("interval"),t.count++),t.handle=window.requestAnimationFrame(n),t}()}},{key:"stop",value:function(e){var t=this;return this.isRunning&&setTimeout((function(){window.cancelAnimationFrame(t.handle),t.running=!1,h.call(t,e),t.emit("stop")})),this}},{key:"elapsed",get:function(){return this.lastLoop?this.lastLoop-(this.started?this.started.getTime():(new Date).getTime()):0}},{key:"isRunning",get:function(){return!0===this.running}},{key:"isStopped",get:function(){return!1===this.running}}],[{key:"defineName",value:function(){return"Timer"}}]),n}(P),zt=function(e){function n(){return t(this,n),l(this,i(n).apply(this,arguments))}return o(n,e),r(n,[{key:"increment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.value=this.value.value+t}},{key:"decrement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;e.value=this.value.value-t}}],[{key:"defineName",value:function(){return"Counter"}}]),n}(H),Wt=function(e){function n(){return t(this,n),l(this,i(n).apply(this,arguments))}return o(n,e),r(n,[{key:"defaultDataType",value:function(){return Date}},{key:"defaultAttributes",value:function(){return{showSeconds:!0,showLabels:!0}}},{key:"shouldStop",value:function(e){if(_(e.stopAt)||k(e.stopAt))return!1;if(this.stopAt instanceof Date)return this.countdown?this.stopAt.getTime()>=this.value.value.getTime():this.stopAt.getTime()<=this.value.value.getTime();if(N(this.stopAt)){var t=Math.floor((this.value.value.getTime()-this.originalValue.getTime())/1e3);return this.countdown?this.stopAt>=t:this.stopAt<=t}throw new Error("the stopAt property must be an instance of Date or Number.")}},{key:"increment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.value=new Date(this.value.value.getTime()+t+((new Date).getTime()-e.timer.lastLoop))}},{key:"decrement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.value=new Date(this.value.value.getTime()-t-((new Date).getTime()-e.timer.lastLoop))}},{key:"format",value:function(e,t){var n=e.timer.isRunning?e.timer.started:new Date(Date.now()-50);return[[this.getMinutes(t,n)],this.showSeconds?[this.getSeconds(t,n)]:null].filter(m)}},{key:"getMinutes",value:function(e,t){return v(this.getTotalSeconds(e,t)/60)}},{key:"getSeconds",value:function(e,t){var n=this.getTotalSeconds(e,t);return Math.abs(Math.ceil(60===n?0:n%60))}},{key:"getTotalSeconds",value:function(e,t){return e.getTime()===t.getTime()?0:Math.round((e.getTime()-t.getTime())/1e3)}}],[{key:"defineName",value:function(){return"MinuteCounter"}}]),n}(H),Ut=function(e){function n(){return t(this,n),l(this,i(n).apply(this,arguments))}return o(n,e),r(n,[{key:"format",value:function(e,t){var n=e.timer.started?t:new Date,r=e.originalValue||t,o=this.countdown?r:n,i=this.countdown?n:r,a=[[this.getHours(o,i)],[this.getMinutes(o,i)]];return this.showSeconds&&a.push([this.getSeconds(o,i)]),a}},{key:"getMinutes",value:function(e,t){return Math.abs(d(i(n.prototype),"getMinutes",this).call(this,e,t)%60)}},{key:"getHours",value:function(e,t){return Math.floor(this.getTotalSeconds(e,t)/60/60)}}],[{key:"defineName",value:function(){return"HourCounter"}}]),n}(Wt),Ht=function(e){function n(){return t(this,n),l(this,i(n).apply(this,arguments))}return o(n,e),r(n,[{key:"format",value:function(e,t){var n=e.started?t:new Date,r=e.originalValue||t,o=this.countdown?r:n,i=this.countdown?n:r,a=[[this.getDays(o,i)],[this.getHours(o,i)],[this.getMinutes(o,i)]];return this.showSeconds&&a.push([this.getSeconds(o,i)]),a}},{key:"getDays",value:function(e,t){return Math.floor(this.getTotalSeconds(e,t)/60/60/24)}},{key:"getHours",value:function(e,t){return Math.abs(d(i(n.prototype),"getHours",this).call(this,e,t)%24)}}],[{key:"defineName",value:function(){return"DayCounter"}}]),n}(Ut),Gt=function(e){function n(){return t(this,n),l(this,i(n).apply(this,arguments))}return o(n,e),r(n,[{key:"defaultDataType",value:function(){return Date}},{key:"defaultValue",value:function(){return new Date}},{key:"defaultAttributes",value:function(){return{showSeconds:!0,showLabels:!1}}},{key:"format",value:function(e,t){t||(t=new Date);var n=[[t.getHours()],[t.getMinutes()]];return this.showSeconds&&n.push([t.getSeconds()]),n}},{key:"increment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.value=new Date(this.value.value.getTime()+t+((new Date).getTime()-e.timer.lastLoop))}},{key:"decrement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.value=new Date(this.value.value.getTime()-t-((new Date).getTime()-e.timer.lastLoop))}}],[{key:"defineName",value:function(){return"TwentyFourHourClock"}}]),n}(H),qt=function(e){function n(){return t(this,n),l(this,i(n).apply(this,arguments))}return o(n,e),r(n,[{key:"defaultAttributes",value:function(){return{showLabels:!1,showSeconds:!0,showMeridium:!0}}},{key:"format",value:function(e,t){t||(t=new Date);var n=t.getHours(),r=[n>12?n-12:0===n?12:n,t.getMinutes()];return this.meridium=n>12?"pm":"am",this.showSeconds&&r.push(t.getSeconds()),r}}],[{key:"defineName",value:function(){return"TwelveHourClock"}}]),n}(Gt),Kt=function(e){function n(){return t(this,n),l(this,i(n).apply(this,arguments))}return o(n,e),r(n,[{key:"format",value:function(e,t){var n=e.timer.started?t:new Date,r=e.originalValue||t,o=this.countdown?r:n,i=this.countdown?n:r,a=[[this.getWeeks(o,i)],[this.getDays(o,i)],[this.getHours(o,i)],[this.getMinutes(o,i)]];return this.showSeconds&&a.push([this.getSeconds(o,i)]),a}},{key:"getWeeks",value:function(e,t){return Math.floor(this.getTotalSeconds(e,t)/60/60/24/7)}},{key:"getDays",value:function(e,t){return Math.abs(d(i(n.prototype),"getDays",this).call(this,e,t)%7)}}],[{key:"defineName",value:function(){return"WeekCounter"}}]),n}(Ht),$t=function(e){function n(){return t(this,n),l(this,i(n).apply(this,arguments))}return o(n,e),r(n,[{key:"format",value:function(e,t){var n=e.timer.started?t:new Date,r=e.originalValue||t,o=this.countdown?r:n,i=this.countdown?n:r,a=[[this.getYears(o,i)],[this.getWeeks(o,i)],[this.getDays(o,i)],[this.getHours(o,i)],[this.getMinutes(o,i)]];return this.showSeconds&&a.push([this.getSeconds(o,i)]),a}},{key:"getYears",value:function(e,t){return Math.floor(Math.max(0,this.getTotalSeconds(e,t)/60/60/24/7/52))}},{key:"getWeeks",value:function(e,t){return Math.abs(d(i(n.prototype),"getWeeks",this).call(this,e,t)%52)}}],[{key:"defineName",value:function(){return"YearCounter"}}]),n}(Kt),Xt=Object.freeze({Counter:zt,DayCounter:Ht,MinuteCounter:Wt,HourCounter:Ut,TwelveHourClock:qt,TwentyFourHourClock:Gt,WeekCounter:Kt,YearCounter:$t});function Yt(e,t){It(e,[Pt("div",{class:"flip-clock-dot top"}),Pt("div",{class:"flip-clock-dot bottom"})])}function Qt(e,t){return e?e.childNodes?e.childNodes[t]:e[t]:null}function Zt(e){return e?e.querySelector(".flip-clock-list-item:first-child .top").innerHTML:null}function Jt(e,t){It(e,t.value.digits.map((function(e,n){var r=Qt(t.el?t.el.querySelectorAll(".flip-clock-group"):null,n),o=e.map((function(e,n){var o=Zt(Qt(r?r.querySelectorAll(".flip-clock-list"):null,n));return t.createList(e,{domValue:o,countdown:t.countdown,animationRate:t.face.animationRate||t.face.delay})}));return t.createGroup(o)})).map((function(e){return e.render()})))}function en(e,t){It(e,t.items.map((function(e){return e.render()})))}function tn(e,t){e.innerHTML=t.t(t.label)}function nn(e,t){var n=t.domValue||(t.countdown?B(t.value):V(t.value));t.domValue&&t.domValue!==t.value&&e.classList.add("flip"),e.style.animationDelay="".concat(t.animationRate/2,"ms"),e.style.animationDuration="".concat(t.animationRate/2,"ms"),t.items=[t.createListItem(t.value,{active:!0}),t.createListItem(n,{active:!1})],It(e,t.items.map((function(e){return e.render()})))}function rn(e,t){var n=!0===t.active?"active":!1===t.active?"before":null;e.classList.add(n),It(e,[Pt("div",[Pt("div",t.value,{class:"top"}),Pt("div",t.value,{class:"bottom"})],{class:"flip-clock-list-item-inner"})])}function on(e,t){t.createDivider().mount(e,e.childNodes[1]),t.createDivider().mount(e,e.childNodes[3]),t.face.showSeconds&&t.createDivider().mount(e,e.childNodes[5]),t.face.showLabels&&(t.createLabel("days").mount(e.childNodes[0]),t.createLabel("hours").mount(e.childNodes[2]),t.createLabel("minutes").mount(e.childNodes[4]),t.face.showSeconds&&t.createLabel("seconds").mount(e.childNodes[6]))}function an(e,t){t.createDivider().mount(e,e.childNodes[1]),t.face.showSeconds&&t.createDivider().mount(e,e.childNodes[3]),t.face.showLabels&&(t.createLabel("hours").mount(e.childNodes[0]),t.createLabel("minutes").mount(e.childNodes[2]),t.face.showSeconds&&t.createLabel("seconds").mount(e.childNodes[4]))}function un(e,t){t.face.showSeconds&&t.createDivider().mount(e,e.childNodes[1]),t.face.showLabels&&(t.createLabel("minutes").mount(e.childNodes[0]),t.face.showSeconds&&t.createLabel("seconds").mount(e.childNodes[2]))}function sn(e,t){t.createDivider().mount(e,e.childNodes[1]),t.face.showSeconds&&t.createDivider().mount(e,e.childNodes[3]),t.face.showLabels&&(t.createLabel("hours").mount(e.childNodes[0]),t.createLabel("minutes").mount(e.childNodes[2]),t.face.showSeconds&&t.createLabel("seconds").mount(e.childNodes[4]))}function cn(e,t){if(sn(e,t),t.face.showMeridium&&t.face.meridium){var n=t.createLabel(t.face.meridium),r=e.childNodes[e.childNodes.length-1];n.mount(r).classList.add("flip-clock-meridium")}}function ln(e,t){t.createDivider().mount(e,e.childNodes[1]),t.createDivider().mount(e,e.childNodes[3]),t.createDivider().mount(e,e.childNodes[5]),t.face.showSeconds&&t.createDivider().mount(e,e.childNodes[7]),t.face.showLabels&&(t.createLabel("weeks").mount(e.childNodes[0]),t.createLabel("days").mount(e.childNodes[2]),t.createLabel("hours").mount(e.childNodes[4]),t.createLabel("minutes").mount(e.childNodes[6]),t.face.showSeconds&&t.createLabel("seconds").mount(e.childNodes[8]))}function fn(e,t){t.createDivider().mount(e,e.childNodes[1]),t.createDivider().mount(e,e.childNodes[3]),t.createDivider().mount(e,e.childNodes[5]),t.createDivider().mount(e,e.childNodes[7]),t.face.showSeconds&&t.createDivider().mount(e,e.childNodes[9]),t.face.showLabels&&(t.createLabel("years").mount(e.childNodes[0]),t.createLabel("weeks").mount(e.childNodes[2]),t.createLabel("days").mount(e.childNodes[4]),t.createLabel("hours").mount(e.childNodes[6]),t.createLabel("minutes").mount(e.childNodes[8]),t.face.showSeconds&&t.createLabel("seconds").mount(e.childNodes[10]))}var dn={face:zt,theme:{Divider:Yt,FlipClock:Jt,Group:en,Label:tn,List:nn,ListItem:rn,faces:Object.freeze({DayCounter:on,HourCounter:an,MinuteCounter:un,TwelveHourClock:cn,TwentyFourHourClock:sn,WeekCounter:ln,YearCounter:fn})},language:se},pn=function(e){function n(e,r,o){var a;t(this,n),W(e,HTMLElement)||p(U.element),A(r)&&!o&&(o=r,r=void 0);var u=o.face||dn.face;return delete o.face,(a=l(this,i(n).call(this,Object.assign({originalValue:r,theme:dn.theme,language:dn.language,timer:Vt.make(o.interval||1e3)},o)))).face||(a.face=u),a.mount(e),a}return o(n,e),r(n,[{key:"mount",value:function(e){return d(i(n.prototype),"mount",this).call(this,e),this.face.mounted(this),this}},{key:"render",value:function(){return d(i(n.prototype),"render",this).call(this),this.theme.faces[this.face.name]&&this.theme.faces[this.face.name](this.el,this),this.face.rendered(this),this.el}},{key:"start",value:function(e){var t=this;return this.timer.started||(this.value=this.originalValue),k(this.face.stopAt)&&(this.face.stopAt=this.stopAt),k(this.face.originalValue)&&(this.face.originalValue=this.originalValue),this.timer.start((function(){t.face.interval(t,e)})),this.face.started(this),this.emit("start")}},{key:"stop",value:function(e){return this.timer.stop(e),this.face.stopped(this),this.emit("stop")}},{key:"reset",value:function(e){var t=this;return this.value=this.originalValue,this.timer.reset((function(){return t.interval(t,e)})),this.face.reset(this),this.emit("reset")}},{key:"increment",value:function(e){return this.face.increment(this,e),this}},{key:"decrement",value:function(e){return this.face.decrement(this,e),this}},{key:"createDivider",value:function(e){return Mt.make(Object.assign({theme:this.theme,language:this.language},e))}},{key:"createList",value:function(e,t){return Lt.make(e,Object.assign({theme:this.theme,language:this.language},t))}},{key:"createLabel",value:function(e,t){return Bt.make(e,Object.assign({theme:this.theme,language:this.language},t))}},{key:"createGroup",value:function(e,t){return jt.make(e,Object.assign({theme:this.theme,language:this.language},t))}},{key:"face",get:function(){return this.$face},set:function(e){W(e,[H,"string","function"])||p(U.face),this.$face=(Xt[e]||e).make(Object.assign(this.getPublicAttributes(),{originalValue:this.face?this.face.originalValue:void 0})),this.$face.initialized(this),this.value?this.$face.value=this.face.createFaceValue(this,this.value.value):this.value||(this.value=this.originalValue),this.el&&this.render()}},{key:"stopAt",get:function(){return R(this.$stopAt)?this.$stopAt(this):this.$stopAt},set:function(e){this.$stopAt=e}},{key:"timer",get:function(){return this.$timer},set:function(e){W(e,Vt)||p(U.timer),this.$timer=e}},{key:"value",get:function(){return this.face?this.face.value:null},set:function(e){if(!this.face)throw new Error("A face must be set before setting a value.");e instanceof z?this.face.value=e:this.value?this.face.value=this.face.value.clone(e):this.face.value=this.face.createFaceValue(this,e),this.el&&this.render()}},{key:"originalValue",get:function(){return R(this.$originalValue)&&!this.$originalValue.name?this.$originalValue():k(this.$originalValue)||_(this.$originalValue)?this.face?this.face.defaultValue():void 0:this.$originalValue},set:function(e){this.$originalValue=e}}],[{key:"defineName",value:function(){return"FlipClock"}},{key:"setDefaultFace",value:function(e){W(e,H)||p(U.face),dn.face=e}},{key:"setDefaultTheme",value:function(e){W(e,"object")||p(U.theme),dn.theme=e}},{key:"setDefaultLanguage",value:function(e){W(e,"object")||p(U.language),dn.language=e}},{key:"defaults",get:function(){return dn}}]),n}(Dt);return pn}()},1725:function(e,t,n){var r=n(781)(n(7289),"DataView");e.exports=r},9748:function(e,t,n){var r=n(6545),o=n(9843),i=n(6266),a=n(7364),u=n(4156);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,e.exports=s},5745:function(e,t,n){var r=n(329),o=n(9666),i=n(2523),a=n(4397),u=n(3316);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,e.exports=s},8579:function(e,t,n){var r=n(781)(n(7289),"Map");e.exports=r},3109:function(e,t,n){var r=n(9e3),o=n(7240),i=n(3414),a=n(7140),u=n(5429);function s(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,e.exports=s},9946:function(e,t,n){var r=n(781)(n(7289),"Promise");e.exports=r},4199:function(e,t,n){var r=n(781)(n(7289),"Set");e.exports=r},4526:function(e,t,n){var r=n(3109),o=n(5845),i=n(5544);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,e.exports=a},7016:function(e,t,n){var r=n(5745),o=n(3653),i=n(3359),a=n(2571),u=n(1698),s=n(5883);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=u,c.prototype.set=s,e.exports=c},8624:function(e,t,n){var r=n(7289).Symbol;e.exports=r},6759:function(e,t,n){var r=n(7289).Uint8Array;e.exports=r},3289:function(e,t,n){var r=n(781)(n(7289),"WeakMap");e.exports=r},4951:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}},3200:function(e,t,n){var r=n(4499),o=n(2794),i=n(5585),a=n(667),u=n(674),s=n(3153),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=i(e),l=!n&&o(e),f=!n&&!l&&a(e),d=!n&&!l&&!f&&s(e),p=n||l||f||d,h=p?r(e.length,String):[],v=h.length;for(var m in e)!t&&!c.call(e,m)||p&&("length"==m||f&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||u(m,v))||h.push(m);return h}},5349:function(e){e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},9330:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},9194:function(e,t,n){var r=n(3666);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},2606:function(e,t,n){var r=n(5349),o=n(5585);e.exports=function(e,t,n){var i=t(e);return o(e)?i:r(i,n(e))}},8665:function(e,t,n){var r=n(8624),o=n(3596),i=n(8186),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},1276:function(e,t,n){var r=n(8665),o=n(9752);e.exports=function(e){return o(e)&&"[object Arguments]"==r(e)}},7081:function(e,t,n){var r=n(9110),o=n(9752);e.exports=function e(t,n,i,a,u){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!==t&&n!==n:r(t,n,i,a,e,u))}},9110:function(e,t,n){var r=n(7016),o=n(4132),i=n(9820),a=n(6353),u=n(8466),s=n(5585),c=n(667),l=n(3153),f="[object Arguments]",d="[object Array]",p="[object Object]",h=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,m,g){var y=s(e),b=s(t),x=y?d:u(e),w=b?d:u(t),E=(x=x==f?p:x)==p,C=(w=w==f?p:w)==p,_=x==w;if(_&&c(e)){if(!c(t))return!1;y=!0,E=!1}if(_&&!E)return g||(g=new r),y||l(e)?o(e,t,n,v,m,g):i(e,t,x,n,v,m,g);if(!(1&n)){var k=E&&h.call(e,"__wrapped__"),S=C&&h.call(t,"__wrapped__");if(k||S){var O=k?e.value():e,T=S?t.value():t;return g||(g=new r),m(O,T,n,v,g)}}return!!_&&(g||(g=new r),a(e,t,n,v,m,g))}},3186:function(e,t,n){var r=n(375),o=n(5401),i=n(1845),a=n(2043),u=/^\[object .+?Constructor\]$/,s=Function.prototype,c=Object.prototype,l=s.toString,f=c.hasOwnProperty,d=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!i(e)||o(e))&&(r(e)?d:u).test(a(e))}},7499:function(e,t,n){var r=n(8665),o=n(4276),i=n(9752),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[r(e)]}},3409:function(e,t,n){var r=n(6132),o=n(8723),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=[];for(var n in Object(e))i.call(e,n)&&"constructor"!=n&&t.push(n);return t}},4499:function(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},6902:function(e){e.exports=function(e){return function(t){return e(t)}}},8905:function(e){e.exports=function(e,t){return e.has(t)}},7683:function(e,t,n){var r=n(7289)["__core-js_shared__"];e.exports=r},4132:function(e,t,n){var r=n(4526),o=n(9330),i=n(8905);e.exports=function(e,t,n,a,u,s){var c=1&n,l=e.length,f=t.length;if(l!=f&&!(c&&f>l))return!1;var d=s.get(e),p=s.get(t);if(d&&p)return d==t&&p==e;var h=-1,v=!0,m=2&n?new r:void 0;for(s.set(e,t),s.set(t,e);++h<l;){var g=e[h],y=t[h];if(a)var b=c?a(y,g,h,t,e,s):a(g,y,h,e,t,s);if(void 0!==b){if(b)continue;v=!1;break}if(m){if(!o(t,(function(e,t){if(!i(m,t)&&(g===e||u(g,e,n,a,s)))return m.push(t)}))){v=!1;break}}else if(g!==y&&!u(g,y,n,a,s)){v=!1;break}}return s.delete(e),s.delete(t),v}},9820:function(e,t,n){var r=n(8624),o=n(6759),i=n(3666),a=n(4132),u=n(258),s=n(3671),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,f,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=u;case"[object Set]":var h=1&r;if(p||(p=s),e.size!=t.size&&!h)return!1;var v=d.get(e);if(v)return v==t;r|=2,d.set(e,t);var m=a(p(e),p(t),r,c,f,d);return d.delete(e),m;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},6353:function(e,t,n){var r=n(7253),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,i,a,u){var s=1&n,c=r(e),l=c.length;if(l!=r(t).length&&!s)return!1;for(var f=l;f--;){var d=c[f];if(!(s?d in t:o.call(t,d)))return!1}var p=u.get(e),h=u.get(t);if(p&&h)return p==t&&h==e;var v=!0;u.set(e,t),u.set(t,e);for(var m=s;++f<l;){var g=e[d=c[f]],y=t[d];if(i)var b=s?i(y,g,d,t,e,u):i(g,y,d,e,t,u);if(!(void 0===b?g===y||a(g,y,n,i,u):b)){v=!1;break}m||(m="constructor"==d)}if(v&&!m){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(v=!1)}return u.delete(e),u.delete(t),v}},2692:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},7253:function(e,t,n){var r=n(2606),o=n(6504),i=n(6385);e.exports=function(e){return r(e,i,o)}},6911:function(e,t,n){var r=n(1591);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},781:function(e,t,n){var r=n(3186),o=n(760);e.exports=function(e,t){var n=o(e,t);return r(n)?n:void 0}},3596:function(e,t,n){var r=n(8624),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(s){}var o=a.call(e);return r&&(t?e[u]=n:delete e[u]),o}},6504:function(e,t,n){var r=n(4951),o=n(2554),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return i.call(e,t)})))}:o;e.exports=u},8466:function(e,t,n){var r=n(1725),o=n(8579),i=n(9946),a=n(4199),u=n(3289),s=n(8665),c=n(2043),l="[object Map]",f="[object Promise]",d="[object Set]",p="[object WeakMap]",h="[object DataView]",v=c(r),m=c(o),g=c(i),y=c(a),b=c(u),x=s;(r&&x(new r(new ArrayBuffer(1)))!=h||o&&x(new o)!=l||i&&x(i.resolve())!=f||a&&x(new a)!=d||u&&x(new u)!=p)&&(x=function(e){var t=s(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case v:return h;case m:return l;case g:return f;case y:return d;case b:return p}return t}),e.exports=x},760:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},6545:function(e,t,n){var r=n(1353);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},9843:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},6266:function(e,t,n){var r=n(1353),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0}},7364:function(e,t,n){var r=n(1353),o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}},4156:function(e,t,n){var r=n(1353);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},674:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},1591:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5401:function(e,t,n){var r=n(7683),o=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!o&&o in e}},6132:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},329:function(e){e.exports=function(){this.__data__=[],this.size=0}},9666:function(e,t,n){var r=n(9194),o=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():o.call(t,n,1),--this.size,!0)}},2523:function(e,t,n){var r=n(9194);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},4397:function(e,t,n){var r=n(9194);e.exports=function(e){return r(this.__data__,e)>-1}},3316:function(e,t,n){var r=n(9194);e.exports=function(e,t){var n=this.__data__,o=r(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}},9e3:function(e,t,n){var r=n(9748),o=n(5745),i=n(8579);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||o),string:new r}}},7240:function(e,t,n){var r=n(6911);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},3414:function(e,t,n){var r=n(6911);e.exports=function(e){return r(this,e).get(e)}},7140:function(e,t,n){var r=n(6911);e.exports=function(e){return r(this,e).has(e)}},5429:function(e,t,n){var r=n(6911);e.exports=function(e,t){var n=r(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}},258:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},1353:function(e,t,n){var r=n(781)(Object,"create");e.exports=r},8723:function(e,t,n){var r=n(9698)(Object.keys,Object);e.exports=r},7785:function(e,t,n){e=n.nmd(e);var r=n(2692),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o&&r.process,u=function(){try{var e=i&&i.require&&i.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=u},8186:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},9698:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},7289:function(e,t,n){var r=n(2692),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},5845:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},5544:function(e){e.exports=function(e){return this.__data__.has(e)}},3671:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},3653:function(e,t,n){var r=n(5745);e.exports=function(){this.__data__=new r,this.size=0}},3359:function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},2571:function(e){e.exports=function(e){return this.__data__.get(e)}},1698:function(e){e.exports=function(e){return this.__data__.has(e)}},5883:function(e,t,n){var r=n(5745),o=n(8579),i=n(3109);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!o||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(a)}return n.set(e,t),this.size=n.size,this}},2043:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},3666:function(e){e.exports=function(e,t){return e===t||e!==e&&t!==t}},2794:function(e,t,n){var r=n(1276),o=n(9752),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(e){return o(e)&&a.call(e,"callee")&&!u.call(e,"callee")};e.exports=s},5585:function(e){var t=Array.isArray;e.exports=t},2114:function(e,t,n){var r=n(375),o=n(4276);e.exports=function(e){return null!=e&&o(e.length)&&!r(e)}},667:function(e,t,n){e=n.nmd(e);var r=n(7289),o=n(5535),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,u=a&&a.exports===i?r.Buffer:void 0,s=(u?u.isBuffer:void 0)||o;e.exports=s},1905:function(e,t,n){var r=n(7081);e.exports=function(e,t){return r(e,t)}},375:function(e,t,n){var r=n(8665),o=n(1845);e.exports=function(e){if(!o(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},4276:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},1845:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},9752:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},3153:function(e,t,n){var r=n(7499),o=n(6902),i=n(7785),a=i&&i.isTypedArray,u=a?o(a):r;e.exports=u},6385:function(e,t,n){var r=n(3200),o=n(3409),i=n(2114);e.exports=function(e){return i(e)?r(e):o(e)}},2554:function(e){e.exports=function(){return[]}},5535:function(e){e.exports=function(){return!1}},1843:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function o(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(o){return!1}}()?Object.assign:function(e,i){for(var a,u,s=o(e),c=1;c<arguments.length;c++){for(var l in a=Object(arguments[c]))n.call(a,l)&&(s[l]=a[l]);if(t){u=t(a);for(var f=0;f<u.length;f++)r.call(a,u[f])&&(s[u[f]]=a[u[f]])}}return s}},1729:function(e,t,n){"use strict";var r=n(9165);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},5192:function(e,t,n){e.exports=n(1729)()},9165:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},7065:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}},5824:function(e,t,n){"use strict";var r=n(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.injectCSS=s,t.removeCSS=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l(e,n);null===r||void 0===r||null===(t=r.parentNode)||void 0===t||t.removeChild(r)},t.updateCSS=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=u(n);if(!c.has(r)){var o=s("",n),i=o.parentNode;c.set(r,i),i.removeChild(o)}var f=l(t,n);if(f){var d,p,h;if((null===(d=n.csp)||void 0===d?void 0:d.nonce)&&f.nonce!==(null===(p=n.csp)||void 0===p?void 0:p.nonce))f.nonce=null===(h=n.csp)||void 0===h?void 0:h.nonce;return f.innerHTML!==e&&(f.innerHTML=e),f}var v=s(e,n);return v.setAttribute(a(n),t),v};var o=r(n(7065)),i="rc-util-key";function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):i}function u(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function s(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,o.default)())return null;var r,i=document.createElement("style");(null===(t=n.csp)||void 0===t?void 0:t.nonce)&&(i.nonce=null===(r=n.csp)||void 0===r?void 0:r.nonce);i.innerHTML=e;var a=u(n),s=a.firstChild;return n.prepend&&a.prepend?a.prepend(i):n.prepend&&s?a.insertBefore(i,s):a.appendChild(i),i}var c=new Map;function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=u(t);return Array.from(c.get(n).children).find((function(n){return"STYLE"===n.tagName&&n.getAttribute(a(t))===e}))}},4287:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.call=i,t.default=void 0,t.note=o,t.noteOnce=function(e,t){i(o,e,t)},t.resetWarned=function(){n={}},t.warning=r,t.warningOnce=a;var n={};function r(e,t){0}function o(e,t){0}function i(e,t,r){t||n[r]||(e(!1,r),n[r]=!0)}function a(e,t){i(r,e,t)}var u=a;t.default=u},4738:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case i:case u:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case d:case m:case v:case s:return e;default:return t}}case o:return t}}}function E(e){return w(e)===f}t.isFragment=function(e){return w(e)===i},t.isMemo=function(e){return w(e)===v}},2715:function(e,t,n){"use strict";e.exports=n(4738)},534:function(e,t,n){"use strict";var r=n(7313),o=n(2224);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)a.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function v(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var o=m.hasOwnProperty(t)?m[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!f.call(h,e)||!f.call(p,e)&&(d.test(e)?h[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),E=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),O=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var F,L=Object.assign;function j(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var B=!1;function V(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var o=c.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,u=i.length-1;1<=a&&0<=u&&o[a]!==i[u];)u--;for(;1<=a&&0<=u;a--,u--)if(o[a]!==i[u]){if(1!==a||1!==u)do{if(a--,0>--u||o[a]!==i[u]){var s="\n"+o[a].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=a&&0<=u);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function z(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case C:return"Fragment";case E:return"Portal";case k:return"Profiler";case _:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case O:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:W(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){Q(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(pe).forEach((function(e){he.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ge=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ce=null,_e=null;function ke(e){if(e=xo(e)){if("function"!==typeof Ee)throw Error(i(280));var t=e.stateNode;t&&(t=Eo(t),Ee(e.stateNode,e.type,t))}}function Se(e){Ce?_e?_e.push(e):_e=[e]:Ce=e}function Oe(){if(Ce){var e=Ce,t=_e;if(_e=Ce=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Te(e,t){return e(t)}function Ae(){}var Re=!1;function Ne(e,t,n){if(Re)return e(t,n);Re=!0;try{return Te(e,t,n)}finally{Re=!1,(null!==Ce||null!==_e)&&(Ae(),Oe())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var r=Eo(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Pe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Pe=!1}function Me(e,t,n,r,o,i,a,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Fe=!1,Le=null,je=!1,Be=null,Ve={onError:function(e){Fe=!0,Le=e}};function ze(e,t,n,r,o,i,a,u,s){Fe=!1,Le=null,Me.apply(Ve,arguments)}function We(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(We(e)!==e)throw Error(i(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=We(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return He(o),e;if(a===r)return He(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var u=!1,s=o.child;s;){if(s===n){u=!0,n=o,r=a;break}if(s===r){u=!0,r=o,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=o;break}if(s===r){u=!0,r=a,n=o;break}s=s.sibling}if(!u)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=o.unstable_scheduleCallback,$e=o.unstable_cancelCallback,Xe=o.unstable_shouldYield,Ye=o.unstable_requestPaint,Qe=o.unstable_now,Ze=o.unstable_getCurrentPriorityLevel,Je=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,it=null;var at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var u=a&~o;0!==u?r=ft(u):0!==(i&=a)&&(r=ft(i))}else 0!==(a=n&~o)?r=ft(a):0!==i&&(r=ft(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-at(t)),r|=e[n],t&=~o;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Et,Ct,_t,kt,St=!1,Ot=[],Tt=null,At=null,Rt=null,Nt=new Map,It=new Map,Pt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Ft(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=xo(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Lt(e){var t=bo(e.target);if(null!==t){var n=We(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void kt(e.priority,(function(){Ct(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xo(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Bt(e,t,n){jt(e)&&n.delete(t)}function Vt(){St=!1,null!==Tt&&jt(Tt)&&(Tt=null),null!==At&&jt(At)&&(At=null),null!==Rt&&jt(Rt)&&(Rt=null),Nt.forEach(Bt),It.forEach(Bt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Vt)))}function Wt(e){function t(t){return zt(t,e)}if(0<Ot.length){zt(Ot[0],e);for(var n=1;n<Ot.length;n++){var r=Ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&zt(Tt,e),null!==At&&zt(At,e),null!==Rt&&zt(Rt,e),Nt.forEach(t),It.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Pt.shift()}var Ut=x.ReactCurrentBatchConfig,Ht=!0;function Gt(e,t,n,r){var o=bt,i=Ut.transition;Ut.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=o,Ut.transition=i}}function qt(e,t,n,r){var o=bt,i=Ut.transition;Ut.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=o,Ut.transition=i}}function Kt(e,t,n,r){if(Ht){var o=Xt(e,t,n,r);if(null===o)Hr(e,t,r,$t,n),Mt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Tt=Ft(Tt,e,t,n,r,o),!0;case"dragenter":return At=Ft(At,e,t,n,r,o),!0;case"mouseover":return Rt=Ft(Rt,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Nt.set(i,Ft(Nt.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,It.set(i,Ft(It.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==o;){var i=xo(o);if(null!==i&&wt(i),null===(i=Xt(e,t,n,r))&&Hr(e,t,r,$t,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var $t=null;function Xt(e,t,n,r){if($t=null,null!==(e=bo(e=we(r))))if(null===(t=We(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $t=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Zt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Zt,r=n.length,o="value"in Qt?Qt.value:Qt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Jt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=on(cn),fn=L({},cn,{view:0,detail:0}),dn=on(fn),pn=L({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(an=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=an=0,sn=e),an)},movementY:function(e){return"movementY"in e?e.movementY:un}}),hn=on(pn),vn=on(L({},pn,{dataTransfer:0})),mn=on(L({},fn,{relatedTarget:0})),gn=on(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),xn=on(L({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cn[e])&&!!t[e]}function kn(){return _n}var Sn=L({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),On=on(Sn),Tn=on(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(L({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Rn=on(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=on(Nn),Pn=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Mn=null;l&&"documentMode"in document&&(Mn=document.documentMode);var Fn=l&&"TextEvent"in window&&!Mn,Ln=l&&(!Dn||Mn&&8<Mn&&11>=Mn),jn=String.fromCharCode(32),Bn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Gn(e,t,n,r){Se(r),0<(t=qr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function $n(e){jr(e,0)}function Xn(e){if(K(wo(e)))return e}function Yn(e,t){if("change"===e)return t}var Qn=!1;if(l){var Zn;if(l){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Zn=Jn}else Zn=!1;Qn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Kn=qn=null)}function nr(e){if("value"===e.propertyName&&Xn(Kn)){var t=[];Gn(t,Kn,e,we(e)),Ne($n,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Kn)}function ir(e,t){if("click"===e)return Xn(t)}function ar(e,t){if("input"===e||"change"===e)return Xn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!f.call(t,o)||!ur(e[o],t[o]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=lr(n,i);var a=lr(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==$(r)||("selectionStart"in(r=mr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&sr(yr,r)||(yr=r,0<(r=qr(gr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Cr={},_r={};function kr(e){if(Cr[e])return Cr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Cr[e]=n[t];return e}l&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Sr=kr("animationend"),Or=kr("animationiteration"),Tr=kr("animationstart"),Ar=kr("transitionend"),Rr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(e,t){Rr.set(e,t),s(t,[e])}for(var Pr=0;Pr<Nr.length;Pr++){var Dr=Nr[Pr];Ir(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Ir(Sr,"onAnimationEnd"),Ir(Or,"onAnimationIteration"),Ir(Tr,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,a,u,s,c){if(ze.apply(this,arguments),Fe){if(!Fe)throw Error(i(198));var l=Le;Fe=!1,Le=null,je||(je=!0,Be=l)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var u=r[a],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==i&&o.isPropagationStopped())break e;Lr(o,u,c),i=s}else for(a=0;a<r.length;a++){if(s=(u=r[a]).instance,c=u.currentTarget,u=u.listener,s!==i&&o.isPropagationStopped())break e;Lr(o,u,c),i=s}}}if(je)throw e=Be,je=!1,Be=null,e}function Br(e,t){var n=t[mo];void 0===n&&(n=t[mo]=new Set);var r=e+"__bubble";n.has(r)||(Ur(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Ur(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[zr]){e[zr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Ur(e,t,n,r){switch(Yt(t)){case 1:var o=Gt;break;case 4:o=qt;break;default:o=Kt}n=o.bind(null,t,n,e),o=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var u=r.stateNode.containerInfo;if(u===o||8===u.nodeType&&u.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var s=a.tag;if((3===s||4===s)&&((s=a.stateNode.containerInfo)===o||8===s.nodeType&&s.parentNode===o))return;a=a.return}for(;null!==u;){if(null===(a=bo(u)))return;if(5===(s=a.tag)||6===s){r=i=a;continue e}u=u.parentNode}}r=r.return}Ne((function(){var r=i,o=we(n),a=[];e:{var u=Rr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=On;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=An;break;case Sr:case Or:case Tr:s=gn;break;case Ar:s=Rn;break;case"scroll":s=dn;break;case"wheel":s=In;break;case"copy":case"cut":case"paste":s=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Tn}var l=0!==(4&t),f=!l&&"scroll"===e,d=l?null!==u?u+"Capture":null:u;l=[];for(var p,h=r;null!==h;){var v=(p=h).stateNode;if(5===p.tag&&null!==v&&(p=v,null!==d&&(null!=(v=Ie(h,d))&&l.push(Gr(h,v,p)))),f)break;h=h.return}0<l.length&&(u=new s(u,c,null,n,o),a.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!bo(c)&&!c[vo])&&(s||u)&&(u=o.window===o?o:(u=o.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?bo(c):null)&&(c!==(f=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=hn,v="onMouseLeave",d="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(l=Tn,v="onPointerLeave",d="onPointerEnter",h="pointer"),f=null==s?u:wo(s),p=null==c?u:wo(c),(u=new l(v,h+"leave",s,n,o)).target=f,u.relatedTarget=p,v=null,bo(o)===r&&((l=new l(d,h+"enter",c,n,o)).target=p,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(d=c,h=0,p=l=s;p;p=Kr(p))h++;for(p=0,v=d;v;v=Kr(v))p++;for(;0<h-p;)l=Kr(l),h--;for(;0<p-h;)d=Kr(d),p--;for(;h--;){if(l===d||null!==d&&l===d.alternate)break e;l=Kr(l),d=Kr(d)}l=null}else l=null;null!==s&&$r(a,u,s,l,!1),null!==c&&null!==f&&$r(a,f,c,l,!0)}if("select"===(s=(u=r?wo(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Yn;else if(Hn(u))if(Qn)m=ar;else{m=or;var g=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ir);switch(m&&(m=m(e,r))?Gn(a,m,n,o):(g&&g(e,u,r),"focusout"===e&&(g=u._wrapperState)&&g.controlled&&"number"===u.type&&ee(u,"number",u.value)),g=r?wo(r):window,e){case"focusin":(Hn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(a,n,o);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":xr(a,n,o)}var y;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=en()):(Zt="value"in(Qt=o)?Qt.value:Qt.textContent,Wn=!0)),0<(g=qr(r,b)).length&&(b=new xn(b,e,null,n,o),a.push({event:b,listeners:g}),y?b.data=y:null!==(y=zn(n))&&(b.data=y))),(y=Fn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Bn=!0,jn);case"textInput":return(e=t.data)===jn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Jt=Zt=Qt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(o=new xn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=y))}jr(a,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Ie(e,n))&&r.unshift(Gr(e,i,o)),null!=(i=Ie(e,t))&&r.push(Gr(e,i,o))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $r(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,o?null!=(s=Ie(n,i))&&a.unshift(Gr(n,s,u)):o||null!=(s=Ie(n,i))&&a.push(Gr(n,s,u))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function Zr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(i(425))}function Jr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(uo)}:ro;function uo(e){setTimeout((function(){throw e}))}function so(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);Wt(t)}function co(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function lo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fo=Math.random().toString(36).slice(2),po="__reactFiber$"+fo,ho="__reactProps$"+fo,vo="__reactContainer$"+fo,mo="__reactEvents$"+fo,go="__reactListeners$"+fo,yo="__reactHandles$"+fo;function bo(e){var t=e[po];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vo]||n[po]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=lo(e);null!==e;){if(n=e[po])return n;e=lo(e)}return t}n=(e=n).parentNode}return null}function xo(e){return!(e=e[po]||e[vo])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function Eo(e){return e[ho]||null}var Co=[],_o=-1;function ko(e){return{current:e}}function So(e){0>_o||(e.current=Co[_o],Co[_o]=null,_o--)}function Oo(e,t){_o++,Co[_o]=e.current,e.current=t}var To={},Ao=ko(To),Ro=ko(!1),No=To;function Io(e,t){var n=e.type.contextTypes;if(!n)return To;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Po(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Do(){So(Ro),So(Ao)}function Mo(e,t,n){if(Ao.current!==To)throw Error(i(168));Oo(Ao,t),Oo(Ro,n)}function Fo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(i(108,U(e)||"Unknown",o));return L({},n,r)}function Lo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||To,No=Ao.current,Oo(Ao,e),Oo(Ro,Ro.current),!0}function jo(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Fo(e,t,No),r.__reactInternalMemoizedMergedChildContext=e,So(Ro),So(Ao),Oo(Ao,e)):So(Ro),Oo(Ro,n)}var Bo=null,Vo=!1,zo=!1;function Wo(e){null===Bo?Bo=[e]:Bo.push(e)}function Uo(){if(!zo&&null!==Bo){zo=!0;var e=0,t=bt;try{var n=Bo;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bo=null,Vo=!1}catch(o){throw null!==Bo&&(Bo=Bo.slice(e+1)),Ke(Je,Uo),o}finally{bt=t,zo=!1}}return null}var Ho=x.ReactCurrentBatchConfig;function Go(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var qo=ko(null),Ko=null,$o=null,Xo=null;function Yo(){Xo=$o=Ko=null}function Qo(e){var t=qo.current;So(qo),e._currentValue=t}function Zo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Jo(e,t){Ko=e,Xo=$o=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function ei(e){var t=e._currentValue;if(Xo!==e)if(e={context:e,memoizedValue:t,next:null},null===$o){if(null===Ko)throw Error(i(308));$o=e,Ko.dependencies={lanes:0,firstContext:e}}else $o=$o.next=e;return t}var ti=null,ni=!1;function ri(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ii(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ai(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tc(e)?(null===(e=n.interleaved)?(t.next=t,null===ti?ti=[n]:ti.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function ui(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function si(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ci(e,t,n,r){var o=e.updateQueue;ni=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var s=u,c=s.next;s.next=null,null===a?i=c:a.next=c,a=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==a&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==i){var f=o.baseState;for(a=0,l=c=s=null,u=i;;){var d=u.lane,p=u.eventTime;if((r&d)===d){null!==l&&(l=l.next={eventTime:p,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var h=e,v=u;switch(d=t,p=n,v.tag){case 1:if("function"===typeof(h=v.payload)){f=h.call(p,f,d);break e}f=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(d="function"===typeof(h=v.payload)?h.call(p,f,d):h)||void 0===d)break e;f=L({},f,d);break e;case 2:ni=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(d=o.effects)?o.effects=[u]:d.push(u))}else p={eventTime:p,lane:d,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=p,s=f):l=l.next=p,a|=d;if(null===(u=u.next)){if(null===(u=o.shared.pending))break;u=(d=u).next,d.next=null,o.lastBaseUpdate=d,o.shared.pending=null}}if(null===l&&(s=f),o.baseState=s,o.firstBaseUpdate=c,o.lastBaseUpdate=l,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);Ps|=a,e.lanes=a,e.memoizedState=f}}function li(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(i(191,o));o.call(r)}}}var fi=(new r.Component).refs;function di(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var pi={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Qs(),o=Zs(e),i=ii(r,o);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ai(e,i),null!==(t=Js(e,o,r))&&ui(t,e,o)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Qs(),o=Zs(e),i=ii(r,o);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),ai(e,i),null!==(t=Js(e,o,r))&&ui(t,e,o)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Qs(),r=Zs(e),o=ii(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),ai(e,o),null!==(t=Js(e,r,n))&&ui(t,e,r)}};function hi(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(o,i))}function vi(e,t,n){var r=!1,o=To,i=t.contextType;return"object"===typeof i&&null!==i?i=ei(i):(o=Po(t)?No:Ao.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Io(e,o):To),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=pi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function mi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pi.enqueueReplaceState(t,t.state,null)}function gi(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=fi,ri(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=ei(i):(i=Po(t)?No:Ao.current,o.context=Io(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(di(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&pi.enqueueReplaceState(o,o.state,null),ci(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}var yi=[],bi=0,xi=null,wi=0,Ei=[],Ci=0,_i=null,ki=1,Si="";function Oi(e,t){yi[bi++]=wi,yi[bi++]=xi,xi=e,wi=t}function Ti(e,t,n){Ei[Ci++]=ki,Ei[Ci++]=Si,Ei[Ci++]=_i,_i=e;var r=ki;e=Si;var o=32-at(r)-1;r&=~(1<<o),n+=1;var i=32-at(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,ki=1<<32-at(t)+o|n<<o|r,Si=i+e}else ki=1<<i|n<<o|r,Si=e}function Ai(e){null!==e.return&&(Oi(e,1),Ti(e,1,0))}function Ri(e){for(;e===xi;)xi=yi[--bi],yi[bi]=null,wi=yi[--bi],yi[bi]=null;for(;e===_i;)_i=Ei[--Ci],Ei[Ci]=null,Si=Ei[--Ci],Ei[Ci]=null,ki=Ei[--Ci],Ei[Ci]=null}var Ni=null,Ii=null,Pi=!1,Di=null;function Mi(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Fi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ni=e,Ii=co(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ni=e,Ii=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==_i?{id:ki,overflow:Si}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ni=e,Ii=null,!0);default:return!1}}function Li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ji(e){if(Pi){var t=Ii;if(t){var n=t;if(!Fi(e,t)){if(Li(e))throw Error(i(418));t=co(n.nextSibling);var r=Ni;t&&Fi(e,t)?Mi(r,n):(e.flags=-4097&e.flags|2,Pi=!1,Ni=e)}}else{if(Li(e))throw Error(i(418));e.flags=-4097&e.flags|2,Pi=!1,Ni=e}}}function Bi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ni=e}function Vi(e){if(e!==Ni)return!1;if(!Pi)return Bi(e),Pi=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=Ii)){if(Li(e)){for(e=Ii;e;)e=co(e.nextSibling);throw Error(i(418))}for(;t;)Mi(e,t),t=co(t.nextSibling)}if(Bi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ii=co(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ii=null}}else Ii=Ni?co(e.stateNode.nextSibling):null;return!0}function zi(){Ii=Ni=null,Pi=!1}function Wi(e){null===Di?Di=[e]:Di.push(e)}function Ui(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;t===fi&&(t=o.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function Hi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gi(e){return(0,e._init)(e._payload)}function qi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===C?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===I&&Gi(i)===t.type)?((r=o(t,n.props)).ref=Ui(e,t,n),r.return=e,r):((r=Pc(n.type,n.key,n.props,null,e.mode,r)).ref=Ui(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Lc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function f(e,t,n,r,i){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Pc(t.type,t.key,t.props,null,e.mode,n)).ref=Ui(e,null,t),n.return=e,n;case E:return(t=Lc(t,e.mode,n)).return=e,t;case I:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Dc(t,e.mode,n,null)).return=e,t;Hi(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===o?c(e,t,n,r):null;case E:return n.key===o?l(e,t,n,r):null;case I:return p(e,t,(o=n._init)(n._payload),r)}if(te(n)||M(n))return null!==o?null:f(e,t,n,r,null);Hi(e,n)}return null}function h(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,o);case E:return l(t,e=e.get(null===r.key?n:r.key)||null,r,o);case I:return h(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||M(r))return f(t,e=e.get(n)||null,r,o,null);Hi(t,r)}return null}function v(o,i,u,s){for(var c=null,l=null,f=i,v=i=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var g=p(o,f,u[v],s);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(o,f),i=a(g,i,v),null===l?c=g:l.sibling=g,l=g,f=m}if(v===u.length)return n(o,f),Pi&&Oi(o,v),c;if(null===f){for(;v<u.length;v++)null!==(f=d(o,u[v],s))&&(i=a(f,i,v),null===l?c=f:l.sibling=f,l=f);return Pi&&Oi(o,v),c}for(f=r(o,f);v<u.length;v++)null!==(m=h(f,o,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),i=a(m,i,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(o,e)})),Pi&&Oi(o,v),c}function m(o,u,s,c){var l=M(s);if("function"!==typeof l)throw Error(i(150));if(null==(s=l.call(s)))throw Error(i(151));for(var f=l=null,v=u,m=u=0,g=null,y=s.next();null!==v&&!y.done;m++,y=s.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=p(o,v,y.value,c);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(o,v),u=a(b,u,m),null===f?l=b:f.sibling=b,f=b,v=g}if(y.done)return n(o,v),Pi&&Oi(o,m),l;if(null===v){for(;!y.done;m++,y=s.next())null!==(y=d(o,y.value,c))&&(u=a(y,u,m),null===f?l=y:f.sibling=y,f=y);return Pi&&Oi(o,m),l}for(v=r(o,v);!y.done;m++,y=s.next())null!==(y=h(v,o,m,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),u=a(y,u,m),null===f?l=y:f.sibling=y,f=y);return e&&v.forEach((function(e){return t(o,e)})),Pi&&Oi(o,m),l}return function e(r,i,a,s){if("object"===typeof a&&null!==a&&a.type===C&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,l=i;null!==l;){if(l.key===c){if((c=a.type)===C){if(7===l.tag){n(r,l.sibling),(i=o(l,a.props.children)).return=r,r=i;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===I&&Gi(c)===l.type){n(r,l.sibling),(i=o(l,a.props)).ref=Ui(r,l,a),i.return=r,r=i;break e}n(r,l);break}t(r,l),l=l.sibling}a.type===C?((i=Dc(a.props.children,r.mode,s,a.key)).return=r,r=i):((s=Pc(a.type,a.key,a.props,null,r.mode,s)).ref=Ui(r,i,a),s.return=r,r=s)}return u(r);case E:e:{for(l=a.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=o(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Lc(a,r.mode,s)).return=r,r=i}return u(r);case I:return e(r,i,(l=a._init)(a._payload),s)}if(te(a))return v(r,i,a,s);if(M(a))return m(r,i,a,s);Hi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=o(i,a)).return=r,r=i):(n(r,i),(i=Fc(a,r.mode,s)).return=r,r=i),u(r)):n(r,i)}}var Ki=qi(!0),$i=qi(!1),Xi={},Yi=ko(Xi),Qi=ko(Xi),Zi=ko(Xi);function Ji(e){if(e===Xi)throw Error(i(174));return e}function ea(e,t){switch(Oo(Zi,t),Oo(Qi,e),Oo(Yi,Xi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}So(Yi),Oo(Yi,t)}function ta(){So(Yi),So(Qi),So(Zi)}function na(e){Ji(Zi.current);var t=Ji(Yi.current),n=se(t,e.type);t!==n&&(Oo(Qi,e),Oo(Yi,n))}function ra(e){Qi.current===e&&(So(Yi),So(Qi))}var oa=ko(0);function ia(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var aa=[];function ua(){for(var e=0;e<aa.length;e++)aa[e]._workInProgressVersionPrimary=null;aa.length=0}var sa=x.ReactCurrentDispatcher,ca=x.ReactCurrentBatchConfig,la=0,fa=null,da=null,pa=null,ha=!1,va=!1,ma=0,ga=0;function ya(){throw Error(i(321))}function ba(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function xa(e,t,n,r,o,a){if(la=a,fa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,sa.current=null===e||null===e.memoizedState?ru:ou,e=n(r,o),va){a=0;do{if(va=!1,ma=0,25<=a)throw Error(i(301));a+=1,pa=da=null,t.updateQueue=null,sa.current=iu,e=n(r,o)}while(va)}if(sa.current=nu,t=null!==da&&null!==da.next,la=0,pa=da=fa=null,ha=!1,t)throw Error(i(300));return e}function wa(){var e=0!==ma;return ma=0,e}function Ea(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===pa?fa.memoizedState=pa=e:pa=pa.next=e,pa}function Ca(){if(null===da){var e=fa.alternate;e=null!==e?e.memoizedState:null}else e=da.next;var t=null===pa?fa.memoizedState:pa.next;if(null!==t)pa=t,da=e;else{if(null===e)throw Error(i(310));e={memoizedState:(da=e).memoizedState,baseState:da.baseState,baseQueue:da.baseQueue,queue:da.queue,next:null},null===pa?fa.memoizedState=pa=e:pa=pa.next=e}return pa}function _a(e,t){return"function"===typeof t?t(e):t}function ka(e){var t=Ca(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=da,o=r.baseQueue,a=n.pending;if(null!==a){if(null!==o){var u=o.next;o.next=a.next,a.next=u}r.baseQueue=o=a,n.pending=null}if(null!==o){a=o.next,r=r.baseState;var s=u=null,c=null,l=a;do{var f=l.lane;if((la&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var d={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=d,u=r):c=c.next=d,fa.lanes|=f,Ps|=f}l=l.next}while(null!==l&&l!==a);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{a=o.lane,fa.lanes|=a,Ps|=a,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Sa(e){var t=Ca(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var u=o=o.next;do{a=e(a,u.action),u=u.next}while(u!==o);ur(a,t.memoizedState)||(wu=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Oa(){}function Ta(e,t){var n=fa,r=Ca(),o=t(),a=!ur(r.memoizedState,o);if(a&&(r.memoizedState=o,wu=!0),r=r.queue,Ba(Na.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==pa&&1&pa.memoizedState.tag){if(n.flags|=2048,Da(9,Ra.bind(null,n,r,o,t),void 0,null),null===Ss)throw Error(i(349));0!==(30&la)||Aa(n,t,o)}return o}function Aa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=fa.updateQueue)?(t={lastEffect:null,stores:null},fa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ra(e,t,n,r){t.value=n,t.getSnapshot=r,Ia(t)&&Js(e,1,-1)}function Na(e,t,n){return n((function(){Ia(t)&&Js(e,1,-1)}))}function Ia(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Pa(e){var t=Ea();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:e},t.queue=e,e=e.dispatch=Qa.bind(null,fa,e),[t.memoizedState,e]}function Da(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=fa.updateQueue)?(t={lastEffect:null,stores:null},fa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ma(){return Ca().memoizedState}function Fa(e,t,n,r){var o=Ea();fa.flags|=e,o.memoizedState=Da(1|t,n,void 0,void 0===r?null:r)}function La(e,t,n,r){var o=Ca();r=void 0===r?null:r;var i=void 0;if(null!==da){var a=da.memoizedState;if(i=a.destroy,null!==r&&ba(r,a.deps))return void(o.memoizedState=Da(t,n,i,r))}fa.flags|=e,o.memoizedState=Da(1|t,n,i,r)}function ja(e,t){return Fa(8390656,8,e,t)}function Ba(e,t){return La(2048,8,e,t)}function Va(e,t){return La(4,2,e,t)}function za(e,t){return La(4,4,e,t)}function Wa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,La(4,4,Wa.bind(null,t,e),n)}function Ha(){}function Ga(e,t){var n=Ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ba(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qa(e,t){var n=Ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ba(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ka(e,t,n){return 0===(21&la)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),fa.lanes|=n,Ps|=n,e.baseState=!0),t)}function $a(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ca.transition;ca.transition={};try{e(!1),t()}finally{bt=n,ca.transition=r}}function Xa(){return Ca().memoizedState}function Ya(e,t,n){var r=Zs(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Za(e)?Ja(t,n):(eu(e,t,n),null!==(e=Js(e,r,n=Qs()))&&tu(e,t,r))}function Qa(e,t,n){var r=Zs(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Za(e))Ja(t,o);else{eu(e,t,o);var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,u=i(a,n);if(o.hasEagerState=!0,o.eagerState=u,ur(u,a))return}catch(s){}null!==(e=Js(e,r,n=Qs()))&&tu(e,t,r)}}function Za(e){var t=e.alternate;return e===fa||null!==t&&t===fa}function Ja(e,t){va=ha=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eu(e,t,n){tc(e)?(null===(e=t.interleaved)?(n.next=n,null===ti?ti=[t]:ti.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function tu(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var nu={readContext:ei,useCallback:ya,useContext:ya,useEffect:ya,useImperativeHandle:ya,useInsertionEffect:ya,useLayoutEffect:ya,useMemo:ya,useReducer:ya,useRef:ya,useState:ya,useDebugValue:ya,useDeferredValue:ya,useTransition:ya,useMutableSource:ya,useSyncExternalStore:ya,useId:ya,unstable_isNewReconciler:!1},ru={readContext:ei,useCallback:function(e,t){return Ea().memoizedState=[e,void 0===t?null:t],e},useContext:ei,useEffect:ja,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fa(4194308,4,Wa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fa(4,2,e,t)},useMemo:function(e,t){var n=Ea();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ea();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ya.bind(null,fa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ea().memoizedState=e},useState:Pa,useDebugValue:Ha,useDeferredValue:function(e){return Ea().memoizedState=e},useTransition:function(){var e=Pa(!1),t=e[0];return e=$a.bind(null,e[1]),Ea().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=fa,o=Ea();if(Pi){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Ss)throw Error(i(349));0!==(30&la)||Aa(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,ja(Na.bind(null,r,a,e),[e]),r.flags|=2048,Da(9,Ra.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ea(),t=Ss.identifierPrefix;if(Pi){var n=Si;t=":"+t+"R"+(n=(ki&~(1<<32-at(ki)-1)).toString(32)+n),0<(n=ma++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ga++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ou={readContext:ei,useCallback:Ga,useContext:ei,useEffect:Ba,useImperativeHandle:Ua,useInsertionEffect:Va,useLayoutEffect:za,useMemo:qa,useReducer:ka,useRef:Ma,useState:function(){return ka(_a)},useDebugValue:Ha,useDeferredValue:function(e){return Ka(Ca(),da.memoizedState,e)},useTransition:function(){return[ka(_a)[0],Ca().memoizedState]},useMutableSource:Oa,useSyncExternalStore:Ta,useId:Xa,unstable_isNewReconciler:!1},iu={readContext:ei,useCallback:Ga,useContext:ei,useEffect:Ba,useImperativeHandle:Ua,useInsertionEffect:Va,useLayoutEffect:za,useMemo:qa,useReducer:Sa,useRef:Ma,useState:function(){return Sa(_a)},useDebugValue:Ha,useDeferredValue:function(e){var t=Ca();return null===da?t.memoizedState=e:Ka(t,da.memoizedState,e)},useTransition:function(){return[Sa(_a)[0],Ca().memoizedState]},useMutableSource:Oa,useSyncExternalStore:Ta,useId:Xa,unstable_isNewReconciler:!1};function au(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o}}function uu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var su,cu,lu,fu="function"===typeof WeakMap?WeakMap:Map;function du(e,t,n){(n=ii(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zs||(zs=!0,Ws=r),uu(0,t)},n}function pu(e,t,n){(n=ii(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){uu(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){uu(0,t),"function"!==typeof r&&(null===Us?Us=new Set([this]):Us.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function hu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fu;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=_c.bind(null,e,t,n),t.then(e,e))}function vu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function mu(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ii(-1,1)).tag=2,ai(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}function gu(e,t){if(!Pi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function yu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function bu(e,t,n){var r=t.pendingProps;switch(Ri(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yu(t),null;case 1:case 17:return Po(t.type)&&Do(),yu(t),null;case 3:return r=t.stateNode,ta(),So(Ro),So(Ao),ua(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Vi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Di&&(ic(Di),Di=null))),yu(t),null;case 5:ra(t);var o=Ji(Zi.current);if(n=t.type,null!==e&&null!=t.stateNode)cu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return yu(t),null}if(e=Ji(Yi.current),Vi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[po]=t,r[ho]=a,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(o=0;o<Mr.length;o++)Br(Mr[o],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":Y(r,a),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Br("invalid",r);break;case"textarea":oe(r,a),Br("invalid",r)}for(var s in ye(n,a),o=null,a)if(a.hasOwnProperty(s)){var c=a[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,c,e),o=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,c,e),o=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Br("scroll",r)}switch(n){case"input":q(r),J(r,a,!0);break;case"textarea":q(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Jr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[po]=t,e[ho]=r,su(e,t),t.stateNode=e;e:{switch(s=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),o=r;break;case"iframe":case"object":case"embed":Br("load",e),o=r;break;case"video":case"audio":for(o=0;o<Mr.length;o++)Br(Mr[o],e);o=r;break;case"source":Br("error",e),o=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),o=r;break;case"details":Br("toggle",e),o=r;break;case"input":Y(e,r),o=X(e,r),Br("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=L({},r,{value:void 0}),Br("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Br("invalid",e)}for(a in ye(n,o),c=o)if(c.hasOwnProperty(a)){var l=c[a];"style"===a?me(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===a?"string"===typeof l?("textarea"!==n||""!==l)&&de(e,l):"number"===typeof l&&de(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(u.hasOwnProperty(a)?null!=l&&"onScroll"===a&&Br("scroll",e):null!=l&&b(e,a,l,s))}switch(n){case"input":q(e),J(e,r,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return yu(t),null;case 6:if(e&&null!=t.stateNode)lu(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Ji(Zi.current),Ji(Yi.current),Vi(t)){if(r=t.stateNode,n=t.memoizedProps,r[po]=t,(a=r.nodeValue!==n)&&null!==(e=Ni))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[po]=t,t.stateNode=r}return yu(t),null;case 13:if(So(oa),r=t.memoizedState,Pi&&null!==Ii&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ii;r;)r=co(r.nextSibling);return zi(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Vi(t),null===e){if(!r)throw Error(i(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(i(317));r[po]=t}else zi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return yu(t),null}return null!==Di&&(ic(Di),Di=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Vi(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&oa.current)?0===Ns&&(Ns=3):hc())),null!==t.updateQueue&&(t.flags|=4),yu(t),null);case 4:return ta(),null===e&&Wr(t.stateNode.containerInfo),yu(t),null;case 10:return Qo(t.type._context),yu(t),null;case 19:if(So(oa),null===(a=t.memoizedState))return yu(t),null;if(r=0!==(128&t.flags),null===(s=a.rendering))if(r)gu(a,!1);else{if(0!==Ns||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ia(e))){for(t.flags|=128,gu(a,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(s=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Oo(oa,1&oa.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Bs&&(t.flags|=128,r=!0,gu(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ia(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),gu(a,!0),null===a.tail&&"hidden"===a.tailMode&&!s.alternate&&!Pi)return yu(t),null}else 2*Qe()-a.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=128,r=!0,gu(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=a.last)?n.sibling=s:t.child=s,a.last=s)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=oa.current,Oo(oa,r?1&n|2:1&n),t):(yu(t),null);case 22:case 23:return lc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&As)&&(yu(t),6&t.subtreeFlags&&(t.flags|=8192)):yu(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}su=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},cu=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Ji(Yi.current);var i,a=null;switch(n){case"input":o=X(e,o),r=X(e,r),a=[];break;case"select":o=L({},o,{value:void 0}),r=L({},r,{value:void 0}),a=[];break;case"textarea":o=re(e,o),r=re(e,r),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ye(n,r),n=null,o)if(!r.hasOwnProperty(l)&&o.hasOwnProperty(l)&&null!=o[l])if("style"===l){var s=o[l];for(i in s)s.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=o?o[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(i in s)!s.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&s[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(a=a||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Br("scroll",e),a||s===c||(a=[])):(a=a||[]).push(l,c))}n&&(a=a||[]).push("style",n);var l=a;(t.updateQueue=l)&&(t.flags|=4)}},lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var xu=x.ReactCurrentOwner,wu=!1;function Eu(e,t,n,r){t.child=null===e?$i(t,null,n,r):Ki(t,e.child,n,r)}function Cu(e,t,n,r,o){n=n.render;var i=t.ref;return Jo(t,o),r=xa(e,t,n,r,i,o),n=wa(),null===e||wu?(Pi&&n&&Ai(t),t.flags|=1,Eu(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hu(e,t,o))}function _u(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Nc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,ku(e,t,i,r,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(a,r)&&e.ref===t.ref)return Hu(e,t,o)}return t.flags|=1,(e=Ic(i,r)).ref=t.ref,e.return=t,t.child=e}function ku(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(sr(i,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=i,0===(e.lanes&o))return t.lanes=e.lanes,Hu(e,t,o);0!==(131072&e.flags)&&(wu=!0)}}return Tu(e,t,n,r,o)}function Su(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oo(Rs,As),As|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oo(Rs,As),As|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Oo(Rs,As),As|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Oo(Rs,As),As|=r;return Eu(e,t,o,n),t.child}function Ou(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,o){var i=Po(n)?No:Ao.current;return i=Io(t,i),Jo(t,o),n=xa(e,t,n,r,i,o),r=wa(),null===e||wu?(Pi&&r&&Ai(t),t.flags|=1,Eu(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Hu(e,t,o))}function Au(e,t,n,r,o){if(Po(n)){var i=!0;Lo(t)}else i=!1;if(Jo(t,o),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),vi(t,n,r),gi(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,u=t.memoizedProps;a.props=u;var s=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=ei(c):c=Io(t,c=Po(n)?No:Ao.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;f||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(u!==r||s!==c)&&mi(t,a,r,c),ni=!1;var d=t.memoizedState;a.state=d,ci(t,r,a,o),s=t.memoizedState,u!==r||d!==s||Ro.current||ni?("function"===typeof l&&(di(t,n,l,r),s=t.memoizedState),(u=ni||hi(t,n,u,r,d,s,c))?(f||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),a.props=r,a.state=s,a.context=c,r=u):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,oi(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Go(t.type,u),a.props=c,f=t.pendingProps,d=a.context,"object"===typeof(s=n.contextType)&&null!==s?s=ei(s):s=Io(t,s=Po(n)?No:Ao.current);var p=n.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(u!==f||d!==s)&&mi(t,a,r,s),ni=!1,d=t.memoizedState,a.state=d,ci(t,r,a,o);var h=t.memoizedState;u!==f||d!==h||Ro.current||ni?("function"===typeof p&&(di(t,n,p,r),h=t.memoizedState),(c=ni||hi(t,n,c,r,d,h,s)||!1)?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,s),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,s)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=s,r=c):("function"!==typeof a.componentDidUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ru(e,t,n,r,i,o)}function Ru(e,t,n,r,o,i){Ou(e,t);var a=0!==(128&t.flags);if(!r&&!a)return o&&jo(t,n,!1),Hu(e,t,i);r=t.stateNode,xu.current=t;var u=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ki(t,e.child,null,i),t.child=Ki(t,null,u,i)):Eu(e,t,u,i),t.memoizedState=r.state,o&&jo(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Mo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mo(0,t.context,!1),ea(e,t.containerInfo)}function Iu(e,t,n,r,o){return zi(),Wi(o),t.flags|=256,Eu(e,t,n,r),t.child}var Pu={dehydrated:null,treeContext:null,retryLane:0};function Du(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mu(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Fu(e,t,n){var r,o=t.pendingProps,a=oa.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Oo(oa,1&a),null===e)return ji(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(a=o.children,e=o.fallback,u?(o=t.mode,u=t.child,a={mode:"hidden",children:a},0===(1&o)&&null!==u?(u.childLanes=0,u.pendingProps=a):u=Mc(a,o,0,null),e=Dc(e,o,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Du(n),t.memoizedState=Pu,e):Lu(t,a));if(null!==(a=e.memoizedState)){if(null!==(r=a.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,Vu(e,t,n,Error(i(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=o.fallback,a=t.mode,o=Mc({mode:"visible",children:o.children},a,0,null),(u=Dc(u,a,n,null)).flags|=2,o.return=t,u.return=t,o.sibling=u,t.child=o,0!==(1&t.mode)&&Ki(t,e.child,null,n),t.child.memoizedState=Du(n),t.memoizedState=Pu,u);if(0===(1&t.mode))t=Vu(e,t,n,null);else if("$!"===r.data)t=Vu(e,t,n,Error(i(419)));else if(o=0!==(n&e.childLanes),wu||o){if(null!==(o=Ss)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(o=0!==(u&(o.suspendedLanes|n))?0:u)&&o!==a.retryLane&&(a.retryLane=o,Js(e,o,-1))}hc(),t=Vu(e,t,n,Error(i(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),r._reactRetry=t,t=null):(n=a.treeContext,Ii=co(r.nextSibling),Ni=t,Pi=!0,Di=null,null!==n&&(Ei[Ci++]=ki,Ei[Ci++]=Si,Ei[Ci++]=_i,ki=n.id,Si=n.overflow,_i=t),(t=Lu(t,t.pendingProps.children)).flags|=4096);return t}return u?(o=Bu(e,t,o.children,o.fallback,n),u=t.child,a=e.child.memoizedState,u.memoizedState=null===a?Du(n):Mu(a,n),u.childLanes=e.childLanes&~n,t.memoizedState=Pu,o):(n=ju(e,t,o.children,n),t.memoizedState=null,n)}return u?(o=Bu(e,t,o.children,o.fallback,n),u=t.child,a=e.child.memoizedState,u.memoizedState=null===a?Du(n):Mu(a,n),u.childLanes=e.childLanes&~n,t.memoizedState=Pu,o):(n=ju(e,t,o.children,n),t.memoizedState=null,n)}function Lu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ju(e,t,n,r){var o=e.child;return e=o.sibling,n=Ic(o,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Bu(e,t,n,r,o){var i=t.mode,a=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&i)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=Ic(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==a?r=Ic(a,r):(r=Dc(r,i,o,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Vu(e,t,n,r){return null!==r&&Wi(r),Ki(t,e.child,null,n),(e=Lu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Zo(e.return,t,n)}function Wu(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function Uu(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(Eu(e,t,r.children,n),0!==(2&(r=oa.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zu(e,n,t);else if(19===e.tag)zu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Oo(oa,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ia(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Wu(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ia(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Wu(t,!0,n,null,i);break;case"together":Wu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ps|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Ic(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ic(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){switch(Ri(t),t.tag){case 1:return Po(t.type)&&Do(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ta(),So(Ro),So(Ao),ua(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ra(t),null;case 13:if(So(oa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));zi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return So(oa),null;case 4:return ta(),null;case 10:return Qo(t.type._context),null;case 22:case 23:return lc(),null;default:return null}}var qu=!1,Ku=!1,$u="function"===typeof WeakSet?WeakSet:Set,Xu=null;function Yu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function Qu(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var Zu=!1;function Ju(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&Qu(t,n,i)}o=o.next}while(o!==r)}}function es(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ts(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ns(e){var t=e.alternate;null!==t&&(e.alternate=null,ns(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[po],delete t[ho],delete t[mo],delete t[go],delete t[yo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rs(e){return 5===e.tag||3===e.tag||4===e.tag}function os(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function is(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(is(e,t,n),e=e.sibling;null!==e;)is(e,t,n),e=e.sibling}function as(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(as(e,t,n),e=e.sibling;null!==e;)as(e,t,n),e=e.sibling}var us=null,ss=!1;function cs(e,t,n){for(n=n.child;null!==n;)ls(e,t,n),n=n.sibling}function ls(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,n)}catch(u){}switch(n.tag){case 5:Ku||Yu(n,t);case 6:var r=us,o=ss;us=null,cs(e,t,n),ss=o,null!==(us=r)&&(ss?(e=us,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):us.removeChild(n.stateNode));break;case 18:null!==us&&(ss?(e=us,n=n.stateNode,8===e.nodeType?so(e.parentNode,n):1===e.nodeType&&so(e,n),Wt(e)):so(us,n.stateNode));break;case 4:r=us,o=ss,us=n.stateNode.containerInfo,ss=!0,cs(e,t,n),us=r,ss=o;break;case 0:case 11:case 14:case 15:if(!Ku&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&Qu(n,t,a),o=o.next}while(o!==r)}cs(e,t,n);break;case 1:if(!Ku&&(Yu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Cc(n,t,u)}cs(e,t,n);break;case 21:cs(e,t,n);break;case 22:1&n.mode?(Ku=(r=Ku)||null!==n.memoizedState,cs(e,t,n),Ku=r):cs(e,t,n);break;default:cs(e,t,n)}}function fs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $u),t.forEach((function(t){var r=Oc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ds(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:us=s.stateNode,ss=!1;break e;case 3:case 4:us=s.stateNode.containerInfo,ss=!0;break e}s=s.return}if(null===us)throw Error(i(160));ls(a,u,o),us=null,ss=!1;var c=o.alternate;null!==c&&(c.return=null),o.return=null}catch(l){Cc(o,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ps(t,e),t=t.sibling}function ps(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ds(t,e),hs(e),4&r){try{Ju(3,e,e.return),es(3,e)}catch(v){Cc(e,e.return,v)}try{Ju(5,e,e.return)}catch(v){Cc(e,e.return,v)}}break;case 1:ds(t,e),hs(e),512&r&&null!==n&&Yu(n,n.return);break;case 5:if(ds(t,e),hs(e),512&r&&null!==n&&Yu(n,n.return),32&e.flags){var o=e.stateNode;try{de(o,"")}catch(v){Cc(e,e.return,v)}}if(4&r&&null!=(o=e.stateNode)){var a=e.memoizedProps,u=null!==n?n.memoizedProps:a,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===a.type&&null!=a.name&&Q(o,a),be(s,u);var l=be(s,a);for(u=0;u<c.length;u+=2){var f=c[u],d=c[u+1];"style"===f?me(o,d):"dangerouslySetInnerHTML"===f?fe(o,d):"children"===f?de(o,d):b(o,f,d,l)}switch(s){case"input":Z(o,a);break;case"textarea":ie(o,a);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var h=a.value;null!=h?ne(o,!!a.multiple,h,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(o,!!a.multiple,a.defaultValue,!0):ne(o,!!a.multiple,a.multiple?[]:"",!1))}o[ho]=a}catch(v){Cc(e,e.return,v)}}break;case 6:if(ds(t,e),hs(e),4&r){if(null===e.stateNode)throw Error(i(162));l=e.stateNode,f=e.memoizedProps;try{l.nodeValue=f}catch(v){Cc(e,e.return,v)}}break;case 3:if(ds(t,e),hs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(v){Cc(e,e.return,v)}break;case 4:default:ds(t,e),hs(e);break;case 13:ds(t,e),hs(e),8192&(l=e.child).flags&&null!==l.memoizedState&&(null===l.alternate||null===l.alternate.memoizedState)&&(js=Qe()),4&r&&fs(e);break;case 22:if(l=null!==n&&null!==n.memoizedState,1&e.mode?(Ku=(f=Ku)||l,ds(t,e),Ku=f):ds(t,e),hs(e),8192&r){f=null!==e.memoizedState;e:for(d=null,p=e;;){if(5===p.tag){if(null===d){d=p;try{o=p.stateNode,f?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(s=p.stateNode,u=void 0!==(c=p.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(v){Cc(e,e.return,v)}}}else if(6===p.tag){if(null===d)try{p.stateNode.nodeValue=f?"":p.memoizedProps}catch(v){Cc(e,e.return,v)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}if(f&&!l&&0!==(1&e.mode))for(Xu=e,e=e.child;null!==e;){for(l=Xu=e;null!==Xu;){switch(d=(f=Xu).child,f.tag){case 0:case 11:case 14:case 15:Ju(4,f,f.return);break;case 1:if(Yu(f,f.return),"function"===typeof(a=f.stateNode).componentWillUnmount){p=f,h=f.return;try{o=p,a.props=o.memoizedProps,a.state=o.memoizedState,a.componentWillUnmount()}catch(v){Cc(p,h,v)}}break;case 5:Yu(f,f.return);break;case 22:if(null!==f.memoizedState){ys(l);continue}}null!==d?(d.return=f,Xu=d):ys(l)}e=e.sibling}}break;case 19:ds(t,e),hs(e),4&r&&fs(e);case 21:}}function hs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rs(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(de(o,""),r.flags&=-33),as(e,os(e),o);break;case 3:case 4:var a=r.stateNode.containerInfo;is(e,os(e),a);break;default:throw Error(i(161))}}catch(u){Cc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vs(e,t,n){Xu=e,ms(e,t,n)}function ms(e,t,n){for(var r=0!==(1&e.mode);null!==Xu;){var o=Xu,i=o.child;if(22===o.tag&&r){var a=null!==o.memoizedState||qu;if(!a){var u=o.alternate,s=null!==u&&null!==u.memoizedState||Ku;u=qu;var c=Ku;if(qu=a,(Ku=s)&&!c)for(Xu=o;null!==Xu;)s=(a=Xu).child,22===a.tag&&null!==a.memoizedState?bs(o):null!==s?(s.return=a,Xu=s):bs(o);for(;null!==i;)Xu=i,ms(i,t,n),i=i.sibling;Xu=o,qu=u,Ku=c}gs(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,Xu=i):gs(e)}}function gs(e){for(;null!==Xu;){var t=Xu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ku||es(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ku)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Go(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&li(t,a,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}li(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var d=f.dehydrated;null!==d&&Wt(d)}}}break;default:throw Error(i(163))}Ku||512&t.flags&&ts(t)}catch(p){Cc(t,t.return,p)}}if(t===e){Xu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xu=n;break}Xu=t.return}}function ys(e){for(;null!==Xu;){var t=Xu;if(t===e){Xu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xu=n;break}Xu=t.return}}function bs(e){for(;null!==Xu;){var t=Xu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{es(4,t)}catch(s){Cc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(s){Cc(t,o,s)}}var i=t.return;try{ts(t)}catch(s){Cc(t,i,s)}break;case 5:var a=t.return;try{ts(t)}catch(s){Cc(t,a,s)}}}catch(s){Cc(t,t.return,s)}if(t===e){Xu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Xu=u;break}Xu=t.return}}var xs,ws=Math.ceil,Es=x.ReactCurrentDispatcher,Cs=x.ReactCurrentOwner,_s=x.ReactCurrentBatchConfig,ks=0,Ss=null,Os=null,Ts=0,As=0,Rs=ko(0),Ns=0,Is=null,Ps=0,Ds=0,Ms=0,Fs=null,Ls=null,js=0,Bs=1/0,Vs=null,zs=!1,Ws=null,Us=null,Hs=!1,Gs=null,qs=0,Ks=0,$s=null,Xs=-1,Ys=0;function Qs(){return 0!==(6&ks)?Qe():-1!==Xs?Xs:Xs=Qe()}function Zs(e){return 0===(1&e.mode)?1:0!==(2&ks)&&0!==Ts?Ts&-Ts:null!==Ho.transition?(0===Ys&&(Ys=vt()),Ys):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function Js(e,t,n){if(50<Ks)throw Ks=0,$s=null,Error(i(185));var r=ec(e,t);return null===r?null:(gt(r,t,n),0!==(2&ks)&&r===Ss||(r===Ss&&(0===(2&ks)&&(Ds|=t),4===Ns&&ac(r,Ts)),nc(r,n),1===t&&0===ks&&0===(1&e.mode)&&(Bs=Qe()+500,Vo&&Uo())),r)}function ec(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tc(e){return(null!==Ss||null!==ti)&&0!==(1&e.mode)&&0===(2&ks)}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),u=1<<a,s=o[a];-1===s?0!==(u&n)&&0===(u&r)||(o[a]=pt(u,t)):s<=t&&(e.expiredLanes|=u),i&=~u}}(e,t);var r=dt(e,e===Ss?Ts:0);if(0===r)null!==n&&$e(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&$e(n),1===t)0===e.tag?function(e){Vo=!0,Wo(e)}(uc.bind(null,e)):Wo(uc.bind(null,e)),ao((function(){0===ks&&Uo()})),n=null;else{switch(xt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Xs=-1,Ys=0,0!==(6&ks))throw Error(i(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=dt(e,e===Ss?Ts:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var o=ks;ks|=2;var a=pc();for(Ss===e&&Ts===t||(Vs=null,Bs=Qe()+500,fc(e,t));;)try{gc();break}catch(s){dc(e,s)}Yo(),Es.current=a,ks=o,null!==Os?t=0:(Ss=null,Ts=0,t=Ns)}if(0!==t){if(2===t&&(0!==(o=ht(e))&&(r=o,t=oc(e,o))),1===t)throw n=Is,fc(e,0),ac(e,r),nc(e,Qe()),n;if(6===t)ac(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!ur(i(),o))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=vc(e,r))&&(0!==(a=ht(e))&&(r=a,t=oc(e,a))),1===t))throw n=Is,fc(e,0),ac(e,r),nc(e,Qe()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:xc(e,Ls,Vs);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=js+500-Qe())){if(0!==dt(e,0))break;if(((o=e.suspendedLanes)&r)!==r){Qs(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(xc.bind(null,e,Ls,Vs),t);break}xc(e,Ls,Vs);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var u=31-at(r);a=1<<u,(u=t[u])>o&&(o=u),r&=~a}if(r=o,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ws(r/1960))-r)){e.timeoutHandle=ro(xc.bind(null,e,Ls,Vs),r);break}xc(e,Ls,Vs);break;default:throw Error(i(329))}}}return nc(e,Qe()),e.callbackNode===n?rc.bind(null,e):null}function oc(e,t){var n=Fs;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Ls,Ls=n,null!==t&&ic(t)),e}function ic(e){null===Ls?Ls=e:Ls.push.apply(Ls,e)}function ac(e,t){for(t&=~Ms,t&=~Ds,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&ks))throw Error(i(327));wc();var t=dt(e,0);if(0===(1&t))return nc(e,Qe()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=ht(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Is,fc(e,0),ac(e,t),nc(e,Qe()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Ls,Vs),nc(e,Qe()),null}function sc(e,t){var n=ks;ks|=1;try{return e(t)}finally{0===(ks=n)&&(Bs=Qe()+500,Vo&&Uo())}}function cc(e){null!==Gs&&0===Gs.tag&&0===(6&ks)&&wc();var t=ks;ks|=1;var n=_s.transition,r=bt;try{if(_s.transition=null,bt=1,e)return e()}finally{bt=r,_s.transition=n,0===(6&(ks=t))&&Uo()}}function lc(){As=Rs.current,So(Rs)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Os)for(n=Os.return;null!==n;){var r=n;switch(Ri(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Do();break;case 3:ta(),So(Ro),So(Ao),ua();break;case 5:ra(r);break;case 4:ta();break;case 13:case 19:So(oa);break;case 10:Qo(r.type._context);break;case 22:case 23:lc()}n=n.return}if(Ss=e,Os=e=Ic(e.current,null),Ts=As=t,Ns=0,Is=null,Ms=Ds=Ps=0,Ls=Fs=null,null!==ti){for(t=0;t<ti.length;t++)if(null!==(r=(n=ti[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}ti=null}return e}function dc(e,t){for(;;){var n=Os;try{if(Yo(),sa.current=nu,ha){for(var r=fa.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ha=!1}if(la=0,pa=da=fa=null,va=!1,ma=0,Cs.current=null,null===n||null===n.return){Ns=1,Is=t,Os=null;break}e:{var a=e,u=n.return,s=n,c=t;if(t=Ts,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,d=f.tag;if(0===(1&f.mode)&&(0===d||11===d||15===d)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var h=vu(u);if(null!==h){h.flags&=-257,mu(h,u,s,0,t),1&h.mode&&hu(a,l,t),c=l;var v=(t=h).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){hu(a,l,t),hc();break e}c=Error(i(426))}else if(Pi&&1&s.mode){var g=vu(u);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),mu(g,u,s,0,t),Wi(c);break e}}a=c,4!==Ns&&(Ns=2),null===Fs?Fs=[a]:Fs.push(a),c=au(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,si(s,du(0,c,t));break e;case 1:a=c;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Us||!Us.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,si(s,pu(s,a,t));break e}}s=s.return}while(null!==s)}bc(n)}catch(x){t=x,Os===n&&null!==n&&(Os=n=n.return);continue}break}}function pc(){var e=Es.current;return Es.current=nu,null===e?nu:e}function hc(){0!==Ns&&3!==Ns&&2!==Ns||(Ns=4),null===Ss||0===(268435455&Ps)&&0===(268435455&Ds)||ac(Ss,Ts)}function vc(e,t){var n=ks;ks|=2;var r=pc();for(Ss===e&&Ts===t||(Vs=null,fc(e,t));;)try{mc();break}catch(o){dc(e,o)}if(Yo(),ks=n,Es.current=r,null!==Os)throw Error(i(261));return Ss=null,Ts=0,Ns}function mc(){for(;null!==Os;)yc(Os)}function gc(){for(;null!==Os&&!Xe();)yc(Os)}function yc(e){var t=xs(e.alternate,e,As);e.memoizedProps=e.pendingProps,null===t?bc(e):Os=t,Cs.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=bu(n,t,As)))return void(Os=n)}else{if(null!==(n=Gu(n,t)))return n.flags&=32767,void(Os=n);if(null===e)return Ns=6,void(Os=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Os=t);Os=t=e}while(null!==t);0===Ns&&(Ns=5)}function xc(e,t,n){var r=bt,o=_s.transition;try{_s.transition=null,bt=1,function(e,t,n,r){do{wc()}while(null!==Gs);if(0!==(6&ks))throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-at(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,a),e===Ss&&(Os=Ss=null,Ts=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Hs||(Hs=!0,Tc(tt,(function(){return wc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=_s.transition,_s.transition=null;var u=bt;bt=1;var s=ks;ks|=4,Cs.current=null,function(e,t){if(eo=Ht,pr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(E){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,d=e,p=null;t:for(;;){for(var h;d!==n||0!==o&&3!==d.nodeType||(s=u+o),d!==a||0!==r&&3!==d.nodeType||(c=u+r),3===d.nodeType&&(u+=d.nodeValue.length),null!==(h=d.firstChild);)p=d,d=h;for(;;){if(d===e)break t;if(p===n&&++l===o&&(s=u),p===a&&++f===r&&(c=u),null!==(h=d.nextSibling))break;p=(d=p).parentNode}d=h}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},Ht=!1,Xu=t;null!==Xu;)if(e=(t=Xu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xu=e;else for(;null!==Xu;){t=Xu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Go(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;if(1===x.nodeType)x.textContent="";else if(9===x.nodeType){var w=x.body;null!=w&&(w.textContent="")}break;default:throw Error(i(163))}}catch(E){Cc(t,t.return,E)}if(null!==(e=t.sibling)){e.return=t.return,Xu=e;break}Xu=t.return}v=Zu,Zu=!1}(e,n),ps(n,e),hr(to),Ht=!!eo,to=eo=null,e.current=n,vs(n,e,o),Ye(),ks=s,bt=u,_s.transition=a}else e.current=n;if(Hs&&(Hs=!1,Gs=e,qs=o),0===(a=e.pendingLanes)&&(Us=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(zs)throw zs=!1,e=Ws,Ws=null,e;0!==(1&qs)&&0!==e.tag&&wc(),0!==(1&(a=e.pendingLanes))?e===$s?Ks++:(Ks=0,$s=e):Ks=0,Uo()}(e,t,n,r)}finally{_s.transition=o,bt=r}return null}function wc(){if(null!==Gs){var e=xt(qs),t=_s.transition,n=bt;try{if(_s.transition=null,bt=16>e?16:e,null===Gs)var r=!1;else{if(e=Gs,Gs=null,qs=0,0!==(6&ks))throw Error(i(331));var o=ks;for(ks|=4,Xu=e.current;null!==Xu;){var a=Xu,u=a.child;if(0!==(16&Xu.flags)){var s=a.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Xu=l;null!==Xu;){var f=Xu;switch(f.tag){case 0:case 11:case 15:Ju(8,f,a)}var d=f.child;if(null!==d)d.return=f,Xu=d;else for(;null!==Xu;){var p=(f=Xu).sibling,h=f.return;if(ns(f),f===l){Xu=null;break}if(null!==p){p.return=h,Xu=p;break}Xu=h}}}var v=a.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Xu=a}}if(0!==(2064&a.subtreeFlags)&&null!==u)u.return=a,Xu=u;else e:for(;null!==Xu;){if(0!==(2048&(a=Xu).flags))switch(a.tag){case 0:case 11:case 15:Ju(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Xu=y;break e}Xu=a.return}}var b=e.current;for(Xu=b;null!==Xu;){var x=(u=Xu).child;if(0!==(2064&u.subtreeFlags)&&null!==x)x.return=u,Xu=x;else e:for(u=b;null!==Xu;){if(0!==(2048&(s=Xu).flags))try{switch(s.tag){case 0:case 11:case 15:es(9,s)}}catch(E){Cc(s,s.return,E)}if(s===u){Xu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Xu=w;break e}Xu=s.return}}if(ks=o,Uo(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(E){}r=!0}return r}finally{bt=n,_s.transition=t}}return!1}function Ec(e,t,n){ai(e,t=du(0,t=au(n,t),1)),t=Qs(),null!==(e=ec(e,1))&&(gt(e,1,t),nc(e,t))}function Cc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Us||!Us.has(r))){ai(t,e=pu(t,e=au(n,e),1)),e=Qs(),null!==(t=ec(t,1))&&(gt(t,1,e),nc(t,e));break}}t=t.return}}function _c(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Qs(),e.pingedLanes|=e.suspendedLanes&n,Ss===e&&(Ts&n)===n&&(4===Ns||3===Ns&&(130023424&Ts)===Ts&&500>Qe()-js?fc(e,0):Ms|=n),nc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=Qs();null!==(e=ec(e,t))&&(gt(e,t,n),nc(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function Oc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),kc(e,n)}function Tc(e,t){return Ke(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function Nc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pc(e,t,n,r,o,a){var u=2;if(r=e,"function"===typeof e)Nc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case C:return Dc(n.children,o,a,t);case _:u=8,o|=8;break;case k:return(e=Rc(12,n,t,2|o)).elementType=k,e.lanes=a,e;case A:return(e=Rc(13,n,t,o)).elementType=A,e.lanes=a,e;case R:return(e=Rc(19,n,t,o)).elementType=R,e.lanes=a,e;case P:return Mc(n,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case O:u=9;break e;case T:u=11;break e;case N:u=14;break e;case I:u=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Dc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Lc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,o,i,a,u,s){return e=new jc(e,t,n,u,s),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Rc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ri(i),e}function Vc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function zc(e){if(!e)return To;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Po(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Po(n))return Fo(e,n,t)}return t}function Wc(e,t,n,r,o,i,a,u,s){return(e=Bc(n,r,!0,e,0,i,0,u,s)).context=zc(null),n=e.current,(i=ii(r=Qs(),o=Zs(n))).callback=void 0!==t&&null!==t?t:null,ai(n,i),e.current.lanes=o,gt(e,o,r),nc(e,r),e}function Uc(e,t,n,r){var o=t.current,i=Qs(),a=Zs(o);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ii(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ai(o,t),null!==(e=Js(o,a,i))&&ui(e,o,a),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}xs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ro.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),zi();break;case 5:na(t);break;case 1:Po(t.type)&&Lo(t);break;case 4:ea(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Oo(qo,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Oo(oa,1&oa.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Oo(oa,1&oa.current),null!==(e=Hu(e,t,n))?e.sibling:null);Oo(oa,1&oa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Uu(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Oo(oa,oa.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Hu(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,Pi&&0!==(1048576&t.flags)&&Ti(t,wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var o=Io(t,Ao.current);Jo(t,n),o=xa(null,t,r,e,o,n);var a=wa();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Po(r)?(a=!0,Lo(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,ri(t),o.updater=pi,t.stateNode=o,o._reactInternals=t,gi(t,r,e,n),t=Ru(null,t,r,!0,a,n)):(t.tag=0,Pi&&a&&Ai(t),Eu(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return Nc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===N)return 14}return 2}(r),e=Go(r,e),o){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Au(null,t,r,e,n);break e;case 11:t=Cu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,Go(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Tu(e,t,r,o=t.elementType===r?o:Go(r,o),n);case 1:return r=t.type,o=t.pendingProps,Au(e,t,r,o=t.elementType===r?o:Go(r,o),n);case 3:e:{if(Nu(t),null===e)throw Error(i(387));r=t.pendingProps,o=(a=t.memoizedState).element,oi(e,t),ci(t,r,null,n);var u=t.memoizedState;if(r=u.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Iu(e,t,r,n,o=Error(i(423)));break e}if(r!==o){t=Iu(e,t,r,n,o=Error(i(424)));break e}for(Ii=co(t.stateNode.containerInfo.firstChild),Ni=t,Pi=!0,Di=null,n=$i(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(zi(),r===o){t=Hu(e,t,n);break e}Eu(e,t,r,n)}t=t.child}return t;case 5:return na(t),null===e&&ji(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,u=o.children,no(r,o)?u=null:null!==a&&no(r,a)&&(t.flags|=32),Ou(e,t),Eu(e,t,u,n),t.child;case 6:return null===e&&ji(t),null;case 13:return Fu(e,t,n);case 4:return ea(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ki(t,null,r,n):Eu(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,Cu(e,t,r,o=t.elementType===r?o:Go(r,o),n);case 7:return Eu(e,t,t.pendingProps,n),t.child;case 8:case 12:return Eu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,u=o.value,Oo(qo,r._currentValue),r._currentValue=u,null!==a)if(ur(a.value,u)){if(a.children===o.children&&!Ro.current){t=Hu(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var s=a.dependencies;if(null!==s){u=a.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=ii(-1,n&-n)).tag=2;var l=a.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Zo(a.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===a.tag)u=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(u=a.return))throw Error(i(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Zo(u,n,t),u=a.sibling}else u=a.child;if(null!==u)u.return=a;else for(u=a;null!==u;){if(u===t){u=null;break}if(null!==(a=u.sibling)){a.return=u.return,u=a;break}u=u.return}a=u}Eu(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Jo(t,n),r=r(o=ei(o)),t.flags|=1,Eu(e,t,r,n),t.child;case 14:return o=Go(r=t.type,t.pendingProps),_u(e,t,r,o=Go(r.type,o),n);case 15:return ku(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Go(r,o),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Po(r)?(e=!0,Lo(t)):e=!1,Jo(t,n),vi(t,r,o),gi(t,r,o,n),Ru(null,t,r,!0,e,n);case 19:return Uu(e,t,n);case 22:return Su(e,t,n)}throw Error(i(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function Jc(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof o){var u=o;o=function(){var e=Hc(a);u.call(e)}}Uc(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"===typeof r){var i=r;r=function(){var e=Hc(a);i.call(e)}}var a=Wc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[vo]=a.current,Wr(8===e.nodeType?e.parentNode:e),cc(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var u=r;r=function(){var e=Hc(s);u.call(e)}}var s=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[vo]=s.current,Wr(8===e.nodeType?e.parentNode:e),cc((function(){Uc(t,s,n,r)})),s}(n,t,e,o,r);return Hc(a)}Xc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Uc(e,t,null,null)},Xc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc((function(){Uc(null,e,null,null)})),t[vo]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(yt(t,1|n),nc(t,Qe()),0===(6&ks)&&(Bs=Qe()+500,Uo()))}break;case 13:var r=Qs();cc((function(){return Js(e,1,r)})),qc(e,1)}},Et=function(e){13===e.tag&&(Js(e,134217728,Qs()),qc(e,134217728))},Ct=function(e){if(13===e.tag){var t=Qs(),n=Zs(e);Js(e,n,t),qc(e,n)}},_t=function(){return bt},kt=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ee=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Eo(r);if(!o)throw Error(i(90));K(r),Z(r,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=sc,Ae=cc;var el={usingClientEntryPoint:!1,Events:[xo,wo,Eo,Se,Oe,sc]},tl={findFiberByHostInstance:bo,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{ot=rl.inject(nl),it=rl}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(i(200));return Vc(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(i(299));var n=!1,r="",o=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,o),e[vo]=t.current,Wr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(i(200));return Jc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,o=!1,a="",u=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,o,0,a,u),e[vo]=t.current,Wr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Xc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(i(200));return Jc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(i(40));return!!e._reactRootContainer&&(cc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[vo]=null}))})),!0)},t.unstable_batchedUpdates=sc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Jc(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},1739:function(e,t,n){"use strict";var r=n(1168);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},1168:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(534)},2790:function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,n){"use strict";n.r(t);var r=n("react"),o=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function u(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var s=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.ctx=null,n.requestUserMediaId=0,n.unmounted=!1,n.state={hasUserMedia:!1},n}return o(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;this.unmounted=!1,u()?(e.hasUserMedia||this.requestUserMedia(),t.children&&"function"!=typeof t.children&&console.warn("children must be a function")):t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(u()){var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),r=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),o=e.minScreenshotWidth!==t.minScreenshotWidth,i=e.minScreenshotHeight!==t.minScreenshotHeight;(r||o||i)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().map((function(t){e.removeTrack(t),t.stop()}))):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,n=this.props;if(!t.hasUserMedia)return null;var r=this.getCanvas(e);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,n=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,o=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var i=r/o;o=(r=n.minScreenshotWidth||this.video.clientWidth)/i,n.minScreenshotHeight&&o<n.minScreenshotHeight&&(r=(o=n.minScreenshotHeight)*i)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||r,this.canvas.height=(null===e||void 0===e?void 0:e.height)||o,this.ctx=this.canvas.getContext("2d")}var a=this.ctx,u=this.canvas;return a&&u&&(n.mirrored&&(a.translate(u.width,0),a.scale(-1,1)),a.imageSmoothingEnabled=n.imageSmoothing,a.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||u.width,(null===e||void 0===e?void 0:e.height)||u.height),n.mirrored&&(a.scale(-1,1),a.translate(-u.width,0))),u},t.prototype.requestUserMedia=function(){var e=this,n=this.props,r=function(r,o){var i={video:"undefined"===typeof o||o};n.audio&&(i.audio="undefined"===typeof r||r),e.requestUserMediaId++;var a=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(i).then((function(n){e.unmounted||a!==e.requestUserMediaId?t.stopMediaStream(n):e.handleUserMedia(null,n)})).catch((function(t){e.handleUserMedia(t)}))};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var o=function(e){return{optional:[{sourceId:e}]}},i=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources((function(e){var t=null,a=null;e.forEach((function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(a=e.id)}));var u=i(n.audioConstraints);u&&(t=u);var s=i(n.videoConstraints);s&&(a=s),r(o(t),o(a))}))}},t.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,n=this.props,o=n.audio,u=(n.forceScreenshotSourceSize,n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),s=n.style,c=void 0===s?{}:s,l=n.children,f=a(n,["audio","forceScreenshotSourceSize","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),d=u?i(i({},c),{transform:(c.transform||"")+" scaleX(-1)"}):c,p={getScreenshot:this.getScreenshot.bind(this)};return r.createElement(r.Fragment,null,r.createElement("video",i({autoPlay:!0,src:t.src,muted:!o,playsInline:!0,ref:function(t){e.video=t},style:d},f)),l&&l(p))},t.defaultProps={audio:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(r.Component);t.default=s},react:function(t,n){t.exports=e}}).default},e.exports=r(n(7313))},5918:function(e,t,n){"use strict";var r=n(7313),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,r)&&!s.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:c,ref:l,props:i,_owner:u.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},306:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var x=b.prototype=new y;x.constructor=b,v(x,g.prototype),x.isPureReactComponent=!0;var w=Array.isArray,E=Object.prototype.hasOwnProperty,C={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var o,i={},a=null,u=null;if(null!=t)for(o in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,o)&&!_.hasOwnProperty(o)&&(i[o]=t[o]);var s=arguments.length-2;if(1===s)i.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(o in s=e.defaultProps)void 0===i[o]&&(i[o]=s[o]);return{$$typeof:n,type:e,key:a,ref:u,props:i,_owner:C.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var O=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,o,i,a){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return a=a(s=e),e=""===i?"."+T(s,0):i,w(a)?(o="",null!=e&&(o=e.replace(O,"$&/")+"/"),A(a,t,o,"",(function(e){return e}))):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(O,"$&/")+"/")+e)),t.push(a)),1;if(s=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var l=i+T(u=e[c],c);s+=A(u,t,o,l,a)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,o,l=i+T(u,c++),a);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function R(e,t,n){if(null==e)return e;var r=[],o=0;return A(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},P={transition:null},D={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:P,ReactCurrentOwner:C};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=o,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=v({},e.props),i=e.key,a=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,u=C.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)E.call(t,c)&&!_.hasOwnProperty(c)&&(o[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];o.children=s}return{$$typeof:n,type:e.type,key:i,ref:a,props:o,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.1.0"},7313:function(e,t,n){"use strict";e.exports=n(306)},6417:function(e,t,n){"use strict";e.exports=n(5918)},3095:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>i(s,n))c<o&&0>i(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<o&&0>i(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,d=null,p=3,h=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(l);null!==t;){if(null===t.callback)o(l);else{if(!(t.startTime<=e))break;o(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,x(e),!v)if(null!==r(c))v=!0,P(E);else{var t=r(l);null!==t&&D(w,t.startTime-e)}}function E(e,n){v=!1,m&&(m=!1,y(S),S=-1),h=!0;var i=p;try{for(x(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var u=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?d.callback=u:d===r(c)&&o(c),x(n)}else o(c);d=r(c)}if(null!==d)var s=!0;else{var f=r(l);null!==f&&D(w,f.startTime-n),s=!1}return s}finally{d=null,p=i,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var C,_=!1,k=null,S=-1,O=5,T=-1;function A(){return!(t.unstable_now()-T<O)}function R(){if(null!==k){var e=t.unstable_now();T=e;var n=!0;try{n=k(!0,e)}finally{n?C():(_=!1,k=null)}}else _=!1}if("function"===typeof b)C=function(){b(R)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,I=N.port2;N.port1.onmessage=R,C=function(){I.postMessage(null)}}else C=function(){g(R,0)};function P(e){k=e,_||(_=!0,C())}function D(e,n){S=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||h||(v=!0,P(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:o,priorityLevel:e,startTime:i,expirationTime:u=i+u,sortIndex:-1},i>a?(e.sortIndex=i,n(l,e),null===r(c)&&e===r(l)&&(m?(y(S),S=-1):m=!0,D(w,i-a))):(e.sortIndex=u,n(c,e),v||h||(v=!0,P(E))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},2224:function(e,t,n){"use strict";e.exports=n(3095)},9767:function(e){e.exports=function(e,t,n,r){var o=n?n.call(r,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),s=0;s<i.length;s++){var c=i[s];if(!u(c))return!1;var l=e[c],f=t[c];if(!1===(o=n?n.call(r,l,f,c):void 0)||void 0===o&&l!==f)return!1}return!0}},8385:function(e,t,n){"use strict";n.r(t),t.default={}},5602:function(e,t,n){"use strict";n.r(t),t.default={}},3165:function(e,t,n){"use strict";n.r(t),t.default={}},8439:function(e,t,n){"use strict";n.r(t),t.default={}},8567:function(e,t,n){"use strict";n.r(t),t.default={}},2361:function(e,t,n){"use strict";n.r(t),t.default={}},1865:function(e,t,n){"use strict";n.r(t),t.default={}},535:function(e,t,n){"use strict";n.r(t),t.default={}},445:function(e,t,n){"use strict";n.r(t),t.default={}},7476:function(e,t,n){"use strict";n.r(t),t.default={}},3047:function(e,t,n){"use strict";n.r(t),t.default={}},7308:function(e,t,n){"use strict";n.r(t),t.default={}},865:function(e,t,n){"use strict";n.r(t),t.default={}},5638:function(e,t,n){"use strict";n.r(t),t.default={}},3343:function(e,t,n){"use strict";n.r(t),t.default={}},9070:function(e,t,n){"use strict";n.r(t),t.default={}},2153:function(e,t,n){"use strict";n.r(t),t.default={}},234:function(e,t,n){"use strict";n.r(t),t.default={}},6804:function(e,t,n){"use strict";n.r(t),t.default={}},539:function(e,t,n){"use strict";n.r(t),t.default={}},6737:function(e,t,n){"use strict";n.r(t),t.default={}},4902:function(){},522:function(){},753:function(){}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,o){if(1&o&&(r=this(r)),8&o)return r;if("object"===typeof r&&r){if(4&o&&r.__esModule)return r;if(16&o&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var u=2&o&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){a[e]=function(){return r[e]}}));return a.default=function(){return r},n.d(i,a),i}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".4d4b6364.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="face-recognition-pomodoro:";n.l=function(r,o,i,a){if(e[r])e[r].push(o);else{var u,s;if(void 0!==i)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+i){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+i),u.src=r),e[r]=[o];var d=function(t,n){u.onerror=u.onload=null,clearTimeout(p);var o=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),o&&o.forEach((function(e){return e(n)})),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=d.bind(null,u.onerror),u.onload=d.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/face-recognition-pomodoro/",function(){var e={179:0};n.f.j=function(t,r){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var i=new Promise((function(n,r){o=e[t]=[n,r]}));r.push(o[2]=i);var a=n.p+n.u(t),u=new Error;n.l(a,(function(r){if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",u.name="ChunkLoadError",u.type=i,u.request=a,o[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var o,i,a=r[0],u=r[1],s=r[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(o in u)n.o(u,o)&&(n.m[o]=u[o]);if(s)s(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkface_recognition_pomodoro=self.webpackChunkface_recognition_pomodoro||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e=n(7313),t=n(1739);function r(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function o(e){if(Array.isArray(e))return e}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(s){u=!0,o=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,t)||a(e,t)||u()}var c=function(){};function l(t,n,r){var o=(0,e.useRef)(c);(0,e.useEffect)((function(){o.current=t})),(0,e.useEffect)((function(){r&&null!==n&&!1!==n&&o.current()}),[r]),(0,e.useEffect)((function(){if(null!==n&&!1!==n){var e=setInterval((function(){return o.current()}),n);return function(){return clearInterval(e)}}}),[n])}var f=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),d=Math.abs,p=String.fromCharCode,h=Object.assign;function v(e){return e.trim()}function m(e,t,n){return e.replace(t,n)}function g(e,t){return e.indexOf(t)}function y(e,t){return 0|e.charCodeAt(t)}function b(e,t,n){return e.slice(t,n)}function x(e){return e.length}function w(e){return e.length}function E(e,t){return t.push(e),e}var C=1,_=1,k=0,S=0,O=0,T="";function A(e,t,n,r,o,i,a){return{value:e,root:t,parent:n,type:r,props:o,children:i,line:C,column:_,length:a,return:""}}function R(e,t){return h(A("",null,null,"",null,null,0),e,{length:-e.length},t)}function N(){return O=S>0?y(T,--S):0,_--,10===O&&(_=1,C--),O}function I(){return O=S<k?y(T,S++):0,_++,10===O&&(_=1,C++),O}function P(){return y(T,S)}function D(){return S}function M(e,t){return b(T,e,t)}function F(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function L(e){return C=_=1,k=x(T=e),S=0,[]}function j(e){return T="",e}function B(e){return v(M(S-1,W(91===e?e+2:40===e?e+1:e)))}function V(e){for(;(O=P())&&O<33;)I();return F(e)>2||F(O)>3?"":" "}function z(e,t){for(;--t&&I()&&!(O<48||O>102||O>57&&O<65||O>70&&O<97););return M(e,D()+(t<6&&32==P()&&32==I()))}function W(e){for(;I();)switch(O){case e:return S;case 34:case 39:34!==e&&39!==e&&W(O);break;case 40:41===e&&W(e);break;case 92:I()}return S}function U(e,t){for(;I()&&e+O!==57&&(e+O!==84||47!==P()););return"/*"+M(t,S-1)+"*"+p(47===e?e:I())}function H(e){for(;!F(P());)I();return M(e,S)}var G="-ms-",q="-moz-",K="-webkit-",$="comm",X="rule",Y="decl",Q="@keyframes";function Z(e,t){for(var n="",r=w(e),o=0;o<r;o++)n+=t(e[o],o,e,t)||"";return n}function J(e,t,n,r){switch(e.type){case"@import":case Y:return e.return=e.return||e.value;case $:return"";case Q:return e.return=e.value+"{"+Z(e.children,r)+"}";case X:e.value=e.props.join(",")}return x(n=Z(e.children,r))?e.return=e.value+"{"+n+"}":""}function ee(e,t){switch(function(e,t){return(((t<<2^y(e,0))<<2^y(e,1))<<2^y(e,2))<<2^y(e,3)}(e,t)){case 5103:return K+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return K+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return K+e+q+e+G+e+e;case 6828:case 4268:return K+e+G+e+e;case 6165:return K+e+G+"flex-"+e+e;case 5187:return K+e+m(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return K+e+G+"flex-item-"+m(e,/flex-|-self/,"")+e;case 4675:return K+e+G+"flex-line-pack"+m(e,/align-content|flex-|-self/,"")+e;case 5548:return K+e+G+m(e,"shrink","negative")+e;case 5292:return K+e+G+m(e,"basis","preferred-size")+e;case 6060:return K+"box-"+m(e,"-grow","")+K+e+G+m(e,"grow","positive")+e;case 4554:return K+m(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return m(m(m(e,/(zoom-|grab)/,K+"$1"),/(image-set)/,K+"$1"),e,"")+e;case 5495:case 3959:return m(e,/(image-set\([^]*)/,K+"$1$`$1");case 4968:return m(m(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+K+e+e;case 4095:case 3583:case 4068:case 2532:return m(e,/(.+)-inline(.+)/,K+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(x(e)-1-t>6)switch(y(e,t+1)){case 109:if(45!==y(e,t+4))break;case 102:return m(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+q+(108==y(e,t+3)?"$3":"$2-$3"))+e;case 115:return~g(e,"stretch")?ee(m(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==y(e,t+1))break;case 6444:switch(y(e,x(e)-3-(~g(e,"!important")&&10))){case 107:return m(e,":",":"+K)+e;case 101:return m(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+K+(45===y(e,14)?"inline-":"")+"box$3$1"+K+"$2$3$1"+G+"$2box$3")+e}break;case 5936:switch(y(e,t+11)){case 114:return K+e+G+m(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return K+e+G+m(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return K+e+G+m(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return K+e+G+e+e}return e}function te(e){return j(ne("",null,null,null,[""],e=L(e),0,[0],e))}function ne(e,t,n,r,o,i,a,u,s){for(var c=0,l=0,f=a,d=0,h=0,v=0,y=1,b=1,w=1,C=0,_="",k=o,S=i,O=r,T=_;b;)switch(v=C,C=I()){case 40:if(108!=v&&58==T.charCodeAt(f-1)){-1!=g(T+=m(B(C),"&","&\f"),"&\f")&&(w=-1);break}case 34:case 39:case 91:T+=B(C);break;case 9:case 10:case 13:case 32:T+=V(v);break;case 92:T+=z(D()-1,7);continue;case 47:switch(P()){case 42:case 47:E(oe(U(I(),D()),t,n),s);break;default:T+="/"}break;case 123*y:u[c++]=x(T)*w;case 125*y:case 59:case 0:switch(C){case 0:case 125:b=0;case 59+l:h>0&&x(T)-f&&E(h>32?ie(T+";",r,n,f-1):ie(m(T," ","")+";",r,n,f-2),s);break;case 59:T+=";";default:if(E(O=re(T,t,n,c,l,o,u,_,k=[],S=[],f),i),123===C)if(0===l)ne(T,t,O,O,k,i,f,u,S);else switch(d){case 100:case 109:case 115:ne(e,O,O,r&&E(re(e,O,O,0,0,o,u,_,o,k=[],f),S),o,S,f,u,r?k:S);break;default:ne(T,O,O,O,[""],S,0,u,S)}}c=l=h=0,y=w=1,_=T="",f=a;break;case 58:f=1+x(T),h=v;default:if(y<1)if(123==C)--y;else if(125==C&&0==y++&&125==N())continue;switch(T+=p(C),C*y){case 38:w=l>0?1:(T+="\f",-1);break;case 44:u[c++]=(x(T)-1)*w,w=1;break;case 64:45===P()&&(T+=B(I())),d=P(),l=f=x(_=T+=H(D())),C++;break;case 45:45===v&&2==x(T)&&(y=0)}}return i}function re(e,t,n,r,o,i,a,u,s,c,l){for(var f=o-1,p=0===o?i:[""],h=w(p),g=0,y=0,x=0;g<r;++g)for(var E=0,C=b(e,f+1,f=d(y=a[g])),_=e;E<h;++E)(_=v(y>0?p[E]+" "+C:m(C,/&\f/g,p[E])))&&(s[x++]=_);return A(e,t,n,0===o?X:u,s,c,l)}function oe(e,t,n){return A(e,t,n,$,p(O),b(e,2,-2),0)}function ie(e,t,n,r){return A(e,t,n,Y,b(e,0,r),b(e,r+1,-1),r)}var ae=function(e,t,n){for(var r=0,o=0;r=o,o=P(),38===r&&12===o&&(t[n]=1),!F(o);)I();return M(e,S)},ue=function(e,t){return j(function(e,t){var n=-1,r=44;do{switch(F(r)){case 0:38===r&&12===P()&&(t[n]=1),e[n]+=ae(S-1,t,n);break;case 2:e[n]+=B(r);break;case 4:if(44===r){e[++n]=58===P()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=p(r)}}while(r=I());return e}(L(e),t))},se=new WeakMap,ce=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||se.get(n))&&!r){se.set(e,!0);for(var o=[],i=ue(t,o),a=n.props,u=0,s=0;u<i.length;u++)for(var c=0;c<a.length;c++,s++)e.props[s]=o[u]?i[u].replace(/&\f/g,a[c]):a[c]+" "+i[u]}}},le=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},fe=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case Y:e.return=ee(e.value,e.length);break;case Q:return Z([R(e,{value:m(e.value,"@","@"+K)})],r);case X:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Z([R(e,{props:[m(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Z([R(e,{props:[m(t,/:(plac\w+)/,":-webkit-input-$1")]}),R(e,{props:[m(t,/:(plac\w+)/,":-moz-$1")]}),R(e,{props:[m(t,/:(plac\w+)/,G+"input-$1")]})],r)}return""}))}}],de=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||fe;var o,i,a={},u=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;u.push(e)}));var s,c,l=[J,(c=function(e){s.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],d=function(e){var t=w(e);return function(n,r,o,i){for(var a="",u=0;u<t;u++)a+=e[u](n,r,o,i)||"";return a}}([ce,le].concat(r,l));i=function(e,t,n,r){s=n,function(e){Z(te(e),d)}(e?e+"{"+t.styles+"}":t.styles),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new f({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:i};return p.sheet.hydrate(u),p};var pe=function(e){for(var t,n=0,r=0,o=e.length;o>=4;++r,o-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(o){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},he={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var ve=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},me=/[A-Z]|^ms/g,ge=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ye=function(e){return 45===e.charCodeAt(1)},be=function(e){return null!=e&&"boolean"!==typeof e},xe=ve((function(e){return ye(e)?e:e.replace(me,"-$&").toLowerCase()})),we=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(ge,(function(e,t,n){return Ce={name:t,styles:n,next:Ce},t}))}return 1===he[e]||ye(e)||"number"!==typeof t||0===t?t:t+"px"};function Ee(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return Ce={name:n.name,styles:n.styles,next:Ce},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)Ce={name:r.name,styles:r.styles,next:Ce},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=Ee(e,t,n[o])+";";else for(var i in n){var a=n[i];if("object"!==typeof a)null!=t&&void 0!==t[a]?r+=i+"{"+t[a]+"}":be(a)&&(r+=xe(i)+":"+we(i,a)+";");else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var u=Ee(e,t,a);switch(i){case"animation":case"animationName":r+=xe(i)+":"+u+";";break;default:r+=i+"{"+u+"}"}}else for(var s=0;s<a.length;s++)be(a[s])&&(r+=xe(i)+":"+we(i,a[s])+";")}return r}(e,t,n);case"function":if(void 0!==e){var o=Ce,i=n(e);return Ce=o,Ee(e,t,i)}}if(null==t)return n;var a=t[n];return void 0!==a?a:n}var Ce,_e=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var ke=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,o="";Ce=void 0;var i=e[0];null==i||void 0===i.raw?(r=!1,o+=Ee(n,t,i)):o+=i[0];for(var a=1;a<e.length;a++)o+=Ee(n,t,e[a]),r&&(o+=i[a]);_e.lastIndex=0;for(var u,s="";null!==(u=_e.exec(o));)s+="-"+u[1];return{name:pe(o)+s,styles:o,next:Ce}};function Se(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var Oe=function(e,t,n){!function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)}(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var o=t;do{e.insert(t===o?"."+r:"",o,e.sheet,!0);o=o.next}while(void 0!==o)}};function Te(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function Ae(e,t,n){var r=[],o=Se(e,r,n);return r.length<2?n:o+t(r)}var Re=function e(t){for(var n="",r=0;r<t.length;r++){var o=t[r];if(null!=o){var i=void 0;switch(typeof o){case"boolean":break;case"object":if(Array.isArray(o))i=e(o);else for(var a in i="",o)o[a]&&a&&(i&&(i+=" "),i+=a);break;default:i=o}i&&(n&&(n+=" "),n+=i)}}return n},Ne=function(e){var t=de(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=ke(n,t.registered,void 0);return Oe(t,o,!1),t.key+"-"+o.name};return{css:n,cx:function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return Ae(t.registered,n,Re(r))},injectGlobal:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=ke(n,t.registered);Te(t,o)},keyframes:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=ke(n,t.registered),i="animation-"+o.name;return Te(t,{name:o.name,styles:"@keyframes "+i+"{"+o.styles+"}"}),i},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:Se.bind(null,t.registered),merge:Ae.bind(null,t.registered,n)}},Ie=Ne({key:"css"}),Pe=(Ie.flush,Ie.hydrate,Ie.cx,Ie.merge,Ie.getRegisteredStyles,Ie.injectGlobal,Ie.keyframes,Ie.css);Ie.sheet,Ie.cache;var De,Me=function(t){var n=(0,e.useRef)(t);n.current=(0,e.useMemo)((function(){return t}),[t]);var r=(0,e.useRef)();return r.current||(r.current=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.current.apply(this,e)}),r.current},Fe=(De=e.useEffect,function(t,n){var r=(0,e.useRef)(!1);De((function(){return function(){r.current=!1}}),[]),De((function(){if(r.current)return t();r.current=!0}),n)}),Le=function(e){return"function"===typeof e},je=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};var Be,Ve=!("undefined"===typeof window||!window.document||!window.document.createElement),ze=(Be=function(){return Ve?localStorage:void 0},function(t,n){var r;try{r=Be()}catch(s){console.error(s)}function o(){try{var e=null===r||void 0===r?void 0:r.getItem(t);if(e)return o=e,(null===n||void 0===n?void 0:n.deserializer)?null===n||void 0===n?void 0:n.deserializer(o):JSON.parse(o)}catch(i){console.error(i)}var o;return Le(null===n||void 0===n?void 0:n.defaultValue)?null===n||void 0===n?void 0:n.defaultValue():null===n||void 0===n?void 0:n.defaultValue}var i=je((0,e.useState)((function(){return o()})),2),a=i[0],u=i[1];return Fe((function(){u(o())}),[t]),[a,Me((function(e){var o=Le(e)?e(a):e;if(u(o),function(e){return"undefined"===typeof e}(o))null===r||void 0===r||r.removeItem(t);else try{null===r||void 0===r||r.setItem(t,function(e){return(null===n||void 0===n?void 0:n.serializer)?null===n||void 0===n?void 0:n.serializer(e):JSON.stringify(e)}(o))}catch(i){console.error(i)}}))]}),We=ze;function Ue(){return Ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ue.apply(this,arguments)}var He=function(t,r){void 0===r&&(r={});var o,i=r,a=i.volume,u=void 0===a?1:a,s=i.playbackRate,c=void 0===s?1:s,l=i.soundEnabled,f=void 0===l||l,d=i.interrupt,p=void 0!==d&&d,h=i.onload,v=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(i,["id","volume","playbackRate","soundEnabled","interrupt","onload"]),m=e.useRef(null),g=e.useRef(!1),y=e.useState(null),b=y[0],x=y[1],w=e.useState(null),E=w[0],C=w[1],_=function(){"function"===typeof h&&h.call(this),g.current&&x(1e3*this.duration()),C(this)};o=function(){return n.e(510).then(n.t.bind(n,6510,23)).then((function(e){var n;g.current||(m.current=null!==(n=e.Howl)&&void 0!==n?n:e.default.Howl,g.current=!0,new m.current(Ue({src:Array.isArray(t)?t:[t],volume:u,rate:c,onload:_},v)))})),function(){g.current=!1}},(0,e.useEffect)(o,[]),e.useEffect((function(){m.current&&E&&C(new m.current(Ue({src:Array.isArray(t)?t:[t],volume:u,onload:_},v)))}),[JSON.stringify(t)]),e.useEffect((function(){E&&(E.volume(u),E.rate(c))}),[u,c]);var k=e.useCallback((function(e){"undefined"===typeof e&&(e={}),E&&(f||e.forceSoundEnabled)&&(p&&E.stop(),e.playbackRate&&E.rate(e.playbackRate),E.play(e.id))}),[E,f,p]),S=e.useCallback((function(e){E&&E.stop(e)}),[E]),O=e.useCallback((function(e){E&&E.pause(e)}),[E]);return[k,{sound:E,stop:S,pause:O,duration:b}]};function Ge(){return Ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ge.apply(this,arguments)}function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(7757);function Ke(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ze(e,t,n){return t&&Qe(e.prototype,t),n&&Qe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Je(e,t){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Je(e,t)}function et(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Je(e,t)}function tt(e){return tt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tt(e)}function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e,t){if(t&&("object"===nt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rt(e)}function it(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=tt(e);if(t){var o=tt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ot(this,n)}}function at(){at=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(S){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,i=Object.create(o.prototype),a=new C(r||[]);return i._invoke=function(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=x(a,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,a),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=s;var l={};function f(){}function d(){}function p(){}var h={};u(h,o,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(_([])));m&&m!==t&&n.call(m,o)&&(h=m);var g=p.prototype=f.prototype=Object.create(h);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(o,i,a,u){var s=c(e[o],e,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==nt(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,u)}),(function(e){r("throw",e,a,u)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,u)}))}u(s.arg)}var o;this._invoke=function(e,n){function i(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(i,i):i()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function _(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=p,u(g,"constructor",p),u(p,"constructor",d),d.displayName=u(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),u(b.prototype,i,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new b(s(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},y(g),u(g,a,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function ut(e,t,n,r,o,i,a){try{var u=e[i](a),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,o)}function st(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ut(i,r,o,a,u,"next",e)}function u(e){ut(i,r,o,a,u,"throw",e)}a(void 0)}))}}var ct,lt=n(1168),ft=Xe({},n.t(lt,2)),dt=ft.version,pt=ft.render,ht=ft.unmountComponentAtNode;try{Number((dt||"").split(".")[0])>=18&&(ct=ft.createRoot)}catch(SM){}function vt(e){var t=ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&"object"===nt(t)&&(t.usingClientEntryPoint=e)}var mt="__rc_react_root__";function gt(e,t){ct?function(e,t){vt(!0);var n=t[mt]||ct(t);vt(!1),n.render(e),t[mt]=n}(e,t):function(e,t){pt(e,t)}(e,t)}function yt(e){return bt.apply(this,arguments)}function bt(){return(bt=st(at().mark((function e(t){return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve().then((function(){var e;null===(e=t[mt])||void 0===e||e.unmount(),delete t[mt]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(e){ht(e)}function wt(){return(wt=st(at().mark((function e(t){return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===ct){e.next=2;break}return e.abrupt("return",yt(t));case 2:xt(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Et=n(6123),Ct=n.n(Et);function _t(e){return e instanceof HTMLElement?e:lt.findDOMNode(e)}var kt=n(2715);function St(t,n,r){var o=e.useRef({});return"value"in o.current&&!r(o.current.condition,n)||(o.current.value=t(),o.current.condition=n),o.current.value}function Ot(e,t){"function"===typeof e?e(t):"object"===nt(e)&&e&&"current"in e&&(e.current=t)}function Tt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter((function(e){return e}));return r.length<=1?r[0]:function(e){t.forEach((function(t){Ot(t,e)}))}}function At(e){var t,n,r=(0,kt.isMemo)(e)?e.type.type:e.type;return!("function"===typeof r&&!(null===(t=r.prototype)||void 0===t?void 0:t.render))&&!("function"===typeof e&&!(null===(n=e.prototype)||void 0===n?void 0:n.render))}function Rt(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}function Nt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var It=function(e,t){var n={animationend:Nt("Animation","AnimationEnd"),transitionend:Nt("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}(Rt(),"undefined"!==typeof window?window:{}),Pt={};if(Rt()){var Dt=document.createElement("div");Pt=Dt.style}var Mt={};function Ft(e){if(Mt[e])return Mt[e];var t=It[e];if(t)for(var n=Object.keys(t),r=n.length,o=0;o<r;o+=1){var i=n[o];if(Object.prototype.hasOwnProperty.call(t,i)&&i in Pt)return Mt[e]=t[i],Mt[e]}return""}var Lt=Ft("animationend"),jt=Ft("transitionend"),Bt=!(!Lt||!jt),Vt=Lt||"animationend",zt=jt||"transitionend";function Wt(e,t){if(!e)return null;if("object"===nt(e)){var n=t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}));return e[n]}return"".concat(e,"-").concat(t)}var Ut="none",Ht="appear",Gt="enter",qt="leave",Kt="none",$t="prepare",Xt="start",Yt="active",Qt="end";function Zt(t){var n=e.useRef(!1),r=s(e.useState(t),2),o=r[0],i=r[1];return e.useEffect((function(){return n.current=!1,function(){n.current=!0}}),[]),[o,function(e,t){t&&n.current||i(e)}]}var Jt=function(e){return+setTimeout(e,16)},en=function(e){return clearTimeout(e)};"undefined"!==typeof window&&"requestAnimationFrame"in window&&(Jt=function(e){return window.requestAnimationFrame(e)},en=function(e){return window.cancelAnimationFrame(e)});var tn=0,nn=new Map;function rn(e){nn.delete(e)}function on(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=tn+=1;function r(t){if(0===t)rn(n),e();else{var o=Jt((function(){r(t-1)}));nn.set(n,o)}}return r(t),n}on.cancel=function(e){var t=nn.get(e);return rn(t),en(t)};var an=Rt()?e.useLayoutEffect:e.useEffect,un=[$t,Xt,Yt,Qt];function sn(e){return e===Yt||e===Qt}var cn=function(t,n){var r=s(Zt(Kt),2),o=r[0],i=r[1],a=function(){var t=e.useRef(null);function n(){on.cancel(t.current)}return e.useEffect((function(){return function(){n()}}),[]),[function e(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;n();var i=on((function(){o<=1?r({isCanceled:function(){return i!==t.current}}):e(r,o-1)}));t.current=i},n]}(),u=s(a,2),c=u[0],l=u[1];return an((function(){if(o!==Kt&&o!==Qt){var e=un.indexOf(o),t=un[e+1],r=n(o);false===r?i(t,!0):c((function(e){function n(){e.isCanceled()||i(t,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[t,o]),e.useEffect((function(){return function(){l()}}),[]),[function(){i($t,!0)},o]};function ln(t,n,r,o){var i=o.motionEnter,a=void 0===i||i,u=o.motionAppear,c=void 0===u||u,l=o.motionLeave,f=void 0===l||l,d=o.motionDeadline,p=o.motionLeaveImmediately,h=o.onAppearPrepare,v=o.onEnterPrepare,m=o.onLeavePrepare,g=o.onAppearStart,y=o.onEnterStart,b=o.onLeaveStart,x=o.onAppearActive,w=o.onEnterActive,E=o.onLeaveActive,C=o.onAppearEnd,_=o.onEnterEnd,k=o.onLeaveEnd,S=o.onVisibleChanged,O=s(Zt(),2),T=O[0],A=O[1],R=s(Zt(Ut),2),N=R[0],I=R[1],P=s(Zt(null),2),D=P[0],M=P[1],F=(0,e.useRef)(!1),L=(0,e.useRef)(null);function j(){return r()}var B=(0,e.useRef)(!1);function V(e){var t=j();if(!e||e.deadline||e.target===t){var n,r=B.current;N===Ht&&r?n=null===C||void 0===C?void 0:C(t,e):N===Gt&&r?n=null===_||void 0===_?void 0:_(t,e):N===qt&&r&&(n=null===k||void 0===k?void 0:k(t,e)),N!==Ut&&r&&!1!==n&&(I(Ut,!0),M(null,!0))}}var z=function(t){var n=(0,e.useRef)(),r=(0,e.useRef)(t);r.current=t;var o=e.useCallback((function(e){r.current(e)}),[]);function i(e){e&&(e.removeEventListener(zt,o),e.removeEventListener(Vt,o))}return e.useEffect((function(){return function(){i(n.current)}}),[]),[function(e){n.current&&n.current!==e&&i(n.current),e&&e!==n.current&&(e.addEventListener(zt,o),e.addEventListener(Vt,o),n.current=e)},i]}(V),W=s(z,1)[0],U=e.useMemo((function(){var e,t,n;switch(N){case Ht:return qe(e={},$t,h),qe(e,Xt,g),qe(e,Yt,x),e;case Gt:return qe(t={},$t,v),qe(t,Xt,y),qe(t,Yt,w),t;case qt:return qe(n={},$t,m),qe(n,Xt,b),qe(n,Yt,E),n;default:return{}}}),[N]),H=s(cn(N,(function(e){if(e===$t){var t=U.prepare;return!!t&&t(j())}var n;q in U&&M((null===(n=U[q])||void 0===n?void 0:n.call(U,j(),null))||null);return q===Yt&&(W(j()),d>0&&(clearTimeout(L.current),L.current=setTimeout((function(){V({deadline:!0})}),d))),true})),2),G=H[0],q=H[1],K=sn(q);B.current=K,an((function(){A(n);var e,r=F.current;(F.current=!0,t)&&(!r&&n&&c&&(e=Ht),r&&n&&a&&(e=Gt),(r&&!n&&f||!r&&p&&!n&&f)&&(e=qt),e&&(I(e),G()))}),[n]),(0,e.useEffect)((function(){(N===Ht&&!c||N===Gt&&!a||N===qt&&!f)&&I(Ut)}),[c,a,f]),(0,e.useEffect)((function(){return function(){F.current=!1,clearTimeout(L.current)}}),[]),(0,e.useEffect)((function(){void 0!==T&&N===Ut&&(null===S||void 0===S||S(T))}),[T,N]);var $=D;return U.prepare&&q===Xt&&($=Xe({transition:"none"},$)),[N,q,$,null!==T&&void 0!==T?T:n]}var fn=function(e){et(n,e);var t=it(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Ze(n,[{key:"render",value:function(){return this.props.children}}]),n}(e.Component),dn=fn;var pn=function(t){var n=t;function r(e){return!(!e.motionName||!n)}"object"===nt(t)&&(n=t.transitionSupport);var o=e.forwardRef((function(t,n){var o=t.visible,i=void 0===o||o,a=t.removeOnLeave,u=void 0===a||a,c=t.forceRender,l=t.children,f=t.motionName,d=t.leavedClassName,p=t.eventProps,h=r(t),v=(0,e.useRef)(),m=(0,e.useRef)();var g=s(ln(h,i,(function(){try{return v.current instanceof HTMLElement?v.current:_t(m.current)}catch(SM){return null}}),t),4),y=g[0],b=g[1],x=g[2],w=g[3],E=e.useRef(w);w&&(E.current=!0);var C,_=e.useCallback((function(e){v.current=e,Ot(n,e)}),[n]),k=Xe(Xe({},p),{},{visible:i});if(l)if(y!==Ut&&r(t)){var S,O;b===$t?O="prepare":sn(b)?O="active":b===Xt&&(O="start"),C=l(Xe(Xe({},k),{},{className:Ct()(Wt(f,y),(S={},qe(S,Wt(f,"".concat(y,"-").concat(O)),O),qe(S,f,"string"===typeof f),S)),style:x}),_)}else C=w?l(Xe({},k),_):!u&&E.current?l(Xe(Xe({},k),{},{className:d}),_):c?l(Xe(Xe({},k),{},{style:{display:"none"}}),_):null;else C=null;e.isValidElement(C)&&At(C)&&(C.ref||(C=e.cloneElement(C,{ref:_})));return e.createElement(dn,{ref:m},C)}));return o.displayName="CSSMotion",o}(Bt),hn="add",vn="keep",mn="remove",gn="removed";function yn(e){var t;return Xe(Xe({},t=e&&"object"===nt(e)&&"key"in e?e:{key:e}),{},{key:String(t.key)})}function bn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(yn)}function xn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,o=t.length,i=bn(e),a=bn(t);i.forEach((function(e){for(var t=!1,i=r;i<o;i+=1){var u=a[i];if(u.key===e.key){r<i&&(n=n.concat(a.slice(r,i).map((function(e){return Xe(Xe({},e),{},{status:hn})}))),r=i),n.push(Xe(Xe({},u),{},{status:vn})),r+=1,t=!0;break}}t||n.push(Xe(Xe({},e),{},{status:mn}))})),r<o&&(n=n.concat(a.slice(r).map((function(e){return Xe(Xe({},e),{},{status:hn})}))));var u={};n.forEach((function(e){var t=e.key;u[t]=(u[t]||0)+1}));var s=Object.keys(u).filter((function(e){return u[e]>1}));return s.forEach((function(e){n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==mn})),n.forEach((function(t){t.key===e&&(t.status=vn)}))})),n}var wn=["component","children","onVisibleChanged","onAllRemoved"],En=["status"],Cn=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];var _n=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pn,r=function(t){et(o,t);var r=it(o);function o(){var e;Ye(this,o);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=r.call.apply(r,[this].concat(n))).state={keyEntities:[]},e.removeKey=function(t){var n=e.state.keyEntities.map((function(e){return e.key!==t?e:Xe(Xe({},e),{},{status:gn})}));return e.setState({keyEntities:n}),n.filter((function(e){return e.status!==gn})).length},e}return Ze(o,[{key:"render",value:function(){var t=this,r=this.state.keyEntities,o=this.props,i=o.component,a=o.children,u=o.onVisibleChanged,s=o.onAllRemoved,c=Ke(o,wn),l=i||e.Fragment,f={};return Cn.forEach((function(e){f[e]=c[e],delete c[e]})),delete c.keys,e.createElement(l,c,r.map((function(r){var o=r.status,i=Ke(r,En),c=o===hn||o===vn;return e.createElement(n,Ge({},f,{key:i.key,visible:c,eventProps:i,onVisibleChanged:function(e){(null===u||void 0===u||u(e,{key:i.key}),e)||0===t.removeKey(i.key)&&s&&s()}}),a)})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,o=bn(n);return{keyEntities:xn(r,o).filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==gn||e.status!==mn}))}}}]),o}(e.Component);return r.defaultProps={component:"div"},r}(Bt),kn=pn,Sn=function(t){et(r,t);var n=it(r);function r(){var e;Ye(this,r);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).closeTimer=null,e.close=function(t){t&&t.stopPropagation(),e.clearCloseTimer();var n=e.props,r=n.onClose,o=n.noticeKey;r&&r(o)},e.startCloseTimer=function(){e.props.duration&&(e.closeTimer=window.setTimeout((function(){e.close()}),1e3*e.props.duration))},e.clearCloseTimer=function(){e.closeTimer&&(clearTimeout(e.closeTimer),e.closeTimer=null)},e}return Ze(r,[{key:"componentDidMount",value:function(){this.startCloseTimer()}},{key:"componentDidUpdate",value:function(e){(this.props.duration!==e.duration||this.props.updateMark!==e.updateMark||this.props.visible!==e.visible&&this.props.visible)&&this.restartCloseTimer()}},{key:"componentWillUnmount",value:function(){this.clearCloseTimer()}},{key:"restartCloseTimer",value:function(){this.clearCloseTimer(),this.startCloseTimer()}},{key:"render",value:function(){var t=this,n=this.props,r=n.prefixCls,o=n.className,i=n.closable,a=n.closeIcon,u=n.style,s=n.onClick,c=n.children,l=n.holder,f="".concat(r,"-notice"),d=Object.keys(this.props).reduce((function(e,n){return"data-"!==n.substr(0,5)&&"aria-"!==n.substr(0,5)&&"role"!==n||(e[n]=t.props[n]),e}),{}),p=e.createElement("div",Ge({className:Ct()(f,o,qe({},"".concat(f,"-closable"),i)),style:u,onMouseEnter:this.clearCloseTimer,onMouseLeave:this.startCloseTimer,onClick:s},d),e.createElement("div",{className:"".concat(f,"-content")},c),i?e.createElement("a",{tabIndex:0,onClick:this.close,className:"".concat(f,"-close")},a||e.createElement("span",{className:"".concat(f,"-close-x")})):null);return l?lt.createPortal(p,l):p}}]),r}(e.Component);function On(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Tn(e){return function(e){if(Array.isArray(e))return i(e)}(e)||On(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function An(t){var n=e.useRef({}),r=s(e.useState([]),2),o=r[0],i=r[1];return[function(r){var o=!0;t.add(r,(function(t,r){var a=r.key;if(t&&(!n.current[a]||o)){var u=e.createElement(Sn,Ge({},r,{holder:t}));n.current[a]=u,i((function(e){var t=e.findIndex((function(e){return e.key===r.key}));if(-1===t)return[].concat(Tn(e),[u]);var n=Tn(e);return n[t]=u,n}))}o=!1}))},e.createElement(e.Fragment,null,o)]}Sn.defaultProps={onClose:function(){},duration:1.5};var Rn=["getContainer"],Nn=0,In=Date.now();function Pn(){var e=Nn;return Nn+=1,"rcNotification_".concat(In,"_").concat(e)}var Dn=function(t){et(r,t);var n=it(r);function r(){var e;Ye(this,r);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).state={notices:[]},e.hookRefs=new Map,e.add=function(t,n){var r=t.key||Pn(),o=Xe(Xe({},t),{},{key:r}),i=e.props.maxCount;e.setState((function(e){var t=e.notices,a=t.map((function(e){return e.notice.key})).indexOf(r),u=t.concat();return-1!==a?u.splice(a,1,{notice:o,holderCallback:n}):(i&&t.length>=i&&(o.key=u[0].notice.key,o.updateMark=Pn(),o.userPassKey=r,u.shift()),u.push({notice:o,holderCallback:n})),{notices:u}}))},e.remove=function(t){e.setState((function(e){return{notices:e.notices.filter((function(e){var n=e.notice,r=n.key;return(n.userPassKey||r)!==t}))}}))},e.noticePropsMap={},e}return Ze(r,[{key:"getTransitionName",value:function(){var e=this.props,t=e.prefixCls,n=e.animation,r=this.props.transitionName;return!r&&n&&(r="".concat(t,"-").concat(n)),r}},{key:"render",value:function(){var t=this,n=this.state.notices,r=this.props,o=r.prefixCls,i=r.className,a=r.closeIcon,u=r.style,s=[];return n.forEach((function(e,r){var i=e.notice,u=e.holderCallback,c=r===n.length-1?i.updateMark:void 0,l=i.key,f=i.userPassKey,d=Xe(Xe(Xe({prefixCls:o,closeIcon:a},i),i.props),{},{key:l,noticeKey:f||l,updateMark:c,onClose:function(e){var n;t.remove(e),null===(n=i.onClose)||void 0===n||n.call(i)},onClick:i.onClick,children:i.content});s.push(l),t.noticePropsMap[l]={props:d,holderCallback:u}})),e.createElement("div",{className:Ct()(o,i),style:u},e.createElement(_n,{keys:s,motionName:this.getTransitionName(),onVisibleChanged:function(e,n){var r=n.key;e||delete t.noticePropsMap[r]}},(function(n){var r=n.key,i=n.className,a=n.style,u=n.visible,s=t.noticePropsMap[r],c=s.props,l=s.holderCallback;return l?e.createElement("div",{key:r,className:Ct()(i,"".concat(o,"-hook-holder")),style:Xe({},a),ref:function(e){"undefined"!==typeof r&&(e?(t.hookRefs.set(r,e),l(e,c)):t.hookRefs.delete(r))}}):e.createElement(Sn,Ge({},c,{className:Ct()(i,null===c||void 0===c?void 0:c.className),style:Xe(Xe({},a),null===c||void 0===c?void 0:c.style),visible:u}))})))}}]),r}(e.Component);Dn.newInstance=void 0,Dn.defaultProps={prefixCls:"rc-notification",animation:"fade",style:{top:65,left:"50%"}},Dn.newInstance=function(t,n){var r=t||{},o=r.getContainer,i=Ke(r,Rn),a=document.createElement("div");o?o().appendChild(a):document.body.appendChild(a);var u=!1;gt(e.createElement(Dn,Ge({},i,{ref:function(e){u||(u=!0,n({notice:function(t){e.add(t)},removeNotice:function(t){e.remove(t)},component:e,destroy:function(){!function(e){wt.apply(this,arguments)}(a),a.parentNode&&a.parentNode.removeChild(a)},useNotification:function(){return An(e)}}))}})),a)};var Mn=Dn,Fn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},Ln=(0,e.createContext)({}),jn=n(7819),Bn={};function Vn(e,t){0}function zn(e,t,n){t||Bn[n]||(e(!1,n),Bn[n]=!0)}var Wn=function(e,t){zn(Vn,e,t)},Un="rc-util-key";function Hn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):Un}function Gn(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function qn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Rt())return null;var r,o=document.createElement("style");(null===(t=n.csp)||void 0===t?void 0:t.nonce)&&(o.nonce=null===(r=n.csp)||void 0===r?void 0:r.nonce);o.innerHTML=e;var i=Gn(n),a=i.firstChild;return n.prepend&&i.prepend?i.prepend(o):n.prepend&&a?i.insertBefore(o,a):i.appendChild(o),o}var Kn=new Map;function $n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Gn(t);return Array.from(Kn.get(n).children).find((function(n){return"STYLE"===n.tagName&&n.getAttribute(Hn(t))===e}))}function Xn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Gn(n);if(!Kn.has(r)){var o=qn("",n),i=o.parentNode;Kn.set(r,i),i.removeChild(o)}var a=$n(t,n);if(a){var u,s,c;if((null===(u=n.csp)||void 0===u?void 0:u.nonce)&&a.nonce!==(null===(s=n.csp)||void 0===s?void 0:s.nonce))a.nonce=null===(c=n.csp)||void 0===c?void 0:c.nonce;return a.innerHTML!==e&&(a.innerHTML=e),a}var l=qn(e,n);return l.setAttribute(Hn(n),t),l}function Yn(e){return"object"===nt(e)&&"string"===typeof e.name&&"string"===typeof e.theme&&("object"===nt(e.icon)||"function"===typeof e.icon)}function Qn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];if("class"===n)t.className=r,delete t.class;else t[n]=r;return t}),{})}function Zn(t,n,r){return r?e.createElement(t.tag,Xe(Xe({key:n},Qn(t.attrs)),r),(t.children||[]).map((function(e,r){return Zn(e,"".concat(n,"-").concat(t.tag,"-").concat(r))}))):e.createElement(t.tag,Xe({key:n},Qn(t.attrs)),(t.children||[]).map((function(e,r){return Zn(e,"".concat(n,"-").concat(t.tag,"-").concat(r))})))}function Jn(e){return(0,jn.generate)(e)[0]}function er(e){return e?Array.isArray(e)?e:[e]:[]}var tr="\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",nr=["icon","className","onClick","style","primaryColor","secondaryColor"],rr={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var or=function(t){var n=t.icon,r=t.className,o=t.onClick,i=t.style,a=t.primaryColor,u=t.secondaryColor,s=Ke(t,nr),c=rr;if(a&&(c={primaryColor:a,secondaryColor:u||Jn(a)}),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tr,n=(0,e.useContext)(Ln).csp;(0,e.useEffect)((function(){Xn(t,"@ant-design-icons",{prepend:!0,csp:n})}),[])}(),function(e,t){Wn(e,"[@ant-design/icons] ".concat(t))}(Yn(n),"icon should be icon definiton, but got ".concat(n)),!Yn(n))return null;var l=n;return l&&"function"===typeof l.icon&&(l=Xe(Xe({},l),{},{icon:l.icon(c.primaryColor,c.secondaryColor)})),Zn(l.icon,"svg-".concat(l.name),Xe({className:r,onClick:o,style:i,"data-icon":l.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},s))};or.displayName="IconReact",or.getTwoToneColors=function(){return Xe({},rr)},or.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;rr.primaryColor=t,rr.secondaryColor=n||Jn(t),rr.calculated=!!n};var ir=or;function ar(e){var t=s(er(e),2),n=t[0],r=t[1];return ir.setTwoToneColors({primaryColor:n,secondaryColor:r})}var ur=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];ar("#1890ff");var sr=e.forwardRef((function(t,n){var r,o=t.className,i=t.icon,a=t.spin,u=t.rotate,c=t.tabIndex,l=t.onClick,f=t.twoToneColor,d=Ke(t,ur),p=e.useContext(Ln).prefixCls,h=void 0===p?"anticon":p,v=Ct()(h,(qe(r={},"".concat(h,"-").concat(i.name),!!i.name),qe(r,"".concat(h,"-spin"),!!a||"loading"===i.name),r),o),m=c;void 0===m&&l&&(m=-1);var g=u?{msTransform:"rotate(".concat(u,"deg)"),transform:"rotate(".concat(u,"deg)")}:void 0,y=s(er(f),2),b=y[0],x=y[1];return e.createElement("span",Xe(Xe({role:"img","aria-label":i.name},d),{},{ref:n,tabIndex:m,onClick:l,className:v}),e.createElement(ir,{icon:i,primaryColor:b,secondaryColor:x,style:g}))}));sr.displayName="AntdIcon",sr.getTwoToneColor=function(){var e=ir.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},sr.setTwoToneColor=ar;var cr=sr,lr=function(t,n){return e.createElement(cr,Xe(Xe({},t),{},{ref:n,icon:Fn}))};lr.displayName="CloseOutlined";var fr=e.forwardRef(lr),dr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},pr=function(t,n){return e.createElement(cr,Xe(Xe({},t),{},{ref:n,icon:dr}))};pr.displayName="CheckCircleOutlined";var hr=e.forwardRef(pr),vr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 .3L512 465.6l-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155L340.5 670a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3L512 564.4l99.3 118.4 66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}},{tag:"path",attrs:{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"close-circle",theme:"outlined"},mr=function(t,n){return e.createElement(cr,Xe(Xe({},t),{},{ref:n,icon:vr}))};mr.displayName="CloseCircleOutlined";var gr=e.forwardRef(mr),yr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 688a48 48 0 1096 0 48 48 0 10-96 0zm24-112h48c4.4 0 8-3.6 8-8V296c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8z"}}]},name:"exclamation-circle",theme:"outlined"},br=function(t,n){return e.createElement(cr,Xe(Xe({},t),{},{ref:n,icon:yr}))};br.displayName="ExclamationCircleOutlined";var xr=e.forwardRef(br),wr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},Er=function(t,n){return e.createElement(cr,Xe(Xe({},t),{},{ref:n,icon:wr}))};Er.displayName="InfoCircleOutlined";var Cr=e.forwardRef(Er),_r=e.createContext({getPrefixCls:function(e,t){return t||(e?"ant-".concat(e):"ant")}}),kr=_r.Consumer;function Sr(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[];return e.Children.forEach(t,(function(e){(void 0!==e&&null!==e||n.keepEmpty)&&(Array.isArray(e)?r=r.concat(Sr(e)):(0,kt.isFragment)(e)&&e.props?r=r.concat(Sr(e.props.children,n)):r.push(e))})),r}var Or="RC_FORM_INTERNAL_HOOKS",Tr=function(){Wn(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Ar=e.createContext({getFieldValue:Tr,getFieldsValue:Tr,getFieldError:Tr,getFieldWarning:Tr,getFieldsError:Tr,isFieldsTouched:Tr,isFieldTouched:Tr,isFieldValidating:Tr,isFieldsValidating:Tr,resetFields:Tr,setFields:Tr,setFieldsValue:Tr,validateFields:Tr,submit:Tr,getInternalHooks:function(){return Tr(),{dispatch:Tr,initEntityValue:Tr,registerField:Tr,useSubscribe:Tr,setInitialValues:Tr,destroyForm:Tr,setCallbacks:Tr,registerWatch:Tr,getFields:Tr,setValidateMessages:Tr,setPreserve:Tr,getInitialValue:Tr}}});function Rr(e){return void 0===e||null===e?[]:Array.isArray(e)?e:[e]}function Nr(){return Nr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nr.apply(this,arguments)}function Ir(e){return Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ir(e)}function Pr(e,t){return Pr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Pr(e,t)}function Dr(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(SM){return!1}}function Mr(e,t,n){return Mr=Dr()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Pr(o,n.prototype),o},Mr.apply(null,arguments)}function Fr(e){var t="function"===typeof Map?new Map:void 0;return Fr=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Mr(e,arguments,Ir(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Pr(n,e)},Fr(e)}var Lr=/%[sdj%]/g;function jr(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function Br(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=0,i=n.length;if("function"===typeof e)return e.apply(null,n);if("string"===typeof e){var a=e.replace(Lr,(function(e){if("%%"===e)return"%";if(o>=i)return e;switch(e){case"%s":return String(n[o++]);case"%d":return Number(n[o++]);case"%j":try{return JSON.stringify(n[o++])}catch(Va){return"[Circular]"}break;default:return e}}));return a}return e}function Vr(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!==typeof e||e))}function zr(e,t,n){var r=0,o=e.length;!function i(a){if(a&&a.length)n(a);else{var u=r;r+=1,u<o?t(e[u],i):n([])}}([])}var Wr=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,"Async Validation Error")||this).errors=t,r.fields=n,r}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,Pr(t,n),r}(Fr(Error));function Ur(e,t,n,r,o){if(t.first){var i=new Promise((function(t,i){var a=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n]||[])})),t}(e);zr(a,n,(function(e){return r(e),e.length?i(new Wr(e,jr(e))):t(o)}))}));return i.catch((function(e){return e})),i}var a=!0===t.firstFields?Object.keys(e):t.firstFields||[],u=Object.keys(e),s=u.length,c=0,l=[],f=new Promise((function(t,i){var f=function(e){if(l.push.apply(l,e),++c===s)return r(l),l.length?i(new Wr(l,jr(l))):t(o)};u.length||(r(l),t(o)),u.forEach((function(t){var r=e[t];-1!==a.indexOf(t)?zr(r,n,f):function(e,t,n){var r=[],o=0,i=e.length;function a(e){r.push.apply(r,e||[]),++o===i&&n(r)}e.forEach((function(e){t(e,a)}))}(r,n,f)}))}));return f.catch((function(e){return e})),f}function Hr(e,t){return function(n){var r,o;return r=e.fullFields?function(e,t){for(var n=e,r=0;r<t.length;r++){if(void 0==n)return n;n=n[t[r]]}return n}(t,e.fullFields):t[n.field||e.fullField],(o=n)&&void 0!==o.message?(n.field=n.field||e.fullField,n.fieldValue=r,n):{message:"function"===typeof n?n():n,fieldValue:r,field:n.field||e.fullField}}}function Gr(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"===typeof r&&"object"===typeof e[n]?e[n]=Nr({},e[n],r):e[n]=r}return e}var qr=function(e,t,n,r,o,i){!e.required||n.hasOwnProperty(e.field)&&!Vr(t,i||e.type)||r.push(Br(o.messages.required,e.fullField))},Kr={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},$r={integer:function(e){return $r.number(e)&&parseInt(e,10)===e},float:function(e){return $r.number(e)&&!$r.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(SM){return!1}},date:function(e){return"function"===typeof e.getTime&&"function"===typeof e.getMonth&&"function"===typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"===typeof e},object:function(e){return"object"===typeof e&&!$r.array(e)},method:function(e){return"function"===typeof e},email:function(e){return"string"===typeof e&&e.length<=320&&!!e.match(Kr.email)},url:function(e){return"string"===typeof e&&e.length<=2048&&!!e.match(Kr.url)},hex:function(e){return"string"===typeof e&&!!e.match(Kr.hex)}},Xr={required:qr,whitespace:function(e,t,n,r,o){(/^\s+$/.test(t)||""===t)&&r.push(Br(o.messages.whitespace,e.fullField))},type:function(e,t,n,r,o){if(e.required&&void 0===t)qr(e,t,n,r,o);else{var i=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(i)>-1?$r[i](t)||r.push(Br(o.messages.types[i],e.fullField,e.type)):i&&typeof t!==e.type&&r.push(Br(o.messages.types[i],e.fullField,e.type))}},range:function(e,t,n,r,o){var i="number"===typeof e.len,a="number"===typeof e.min,u="number"===typeof e.max,s=t,c=null,l="number"===typeof t,f="string"===typeof t,d=Array.isArray(t);if(l?c="number":f?c="string":d&&(c="array"),!c)return!1;d&&(s=t.length),f&&(s=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),i?s!==e.len&&r.push(Br(o.messages[c].len,e.fullField,e.len)):a&&!u&&s<e.min?r.push(Br(o.messages[c].min,e.fullField,e.min)):u&&!a&&s>e.max?r.push(Br(o.messages[c].max,e.fullField,e.max)):a&&u&&(s<e.min||s>e.max)&&r.push(Br(o.messages[c].range,e.fullField,e.min,e.max))},enum:function(e,t,n,r,o){e.enum=Array.isArray(e.enum)?e.enum:[],-1===e.enum.indexOf(t)&&r.push(Br(o.messages.enum,e.fullField,e.enum.join(", ")))},pattern:function(e,t,n,r,o){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(Br(o.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"===typeof e.pattern){new RegExp(e.pattern).test(t)||r.push(Br(o.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},Yr=function(e,t,n,r,o){var i=e.type,a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Vr(t,i)&&!e.required)return n();Xr.required(e,t,r,a,o,i),Vr(t,i)||Xr.type(e,t,r,a,o)}n(a)},Qr={string:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Vr(t,"string")&&!e.required)return n();Xr.required(e,t,r,i,o,"string"),Vr(t,"string")||(Xr.type(e,t,r,i,o),Xr.range(e,t,r,i,o),Xr.pattern(e,t,r,i,o),!0===e.whitespace&&Xr.whitespace(e,t,r,i,o))}n(i)},method:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Vr(t)&&!e.required)return n();Xr.required(e,t,r,i,o),void 0!==t&&Xr.type(e,t,r,i,o)}n(i)},number:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),Vr(t)&&!e.required)return n();Xr.required(e,t,r,i,o),void 0!==t&&(Xr.type(e,t,r,i,o),Xr.range(e,t,r,i,o))}n(i)},boolean:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Vr(t)&&!e.required)return n();Xr.required(e,t,r,i,o),void 0!==t&&Xr.type(e,t,r,i,o)}n(i)},regexp:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Vr(t)&&!e.required)return n();Xr.required(e,t,r,i,o),Vr(t)||Xr.type(e,t,r,i,o)}n(i)},integer:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Vr(t)&&!e.required)return n();Xr.required(e,t,r,i,o),void 0!==t&&(Xr.type(e,t,r,i,o),Xr.range(e,t,r,i,o))}n(i)},float:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Vr(t)&&!e.required)return n();Xr.required(e,t,r,i,o),void 0!==t&&(Xr.type(e,t,r,i,o),Xr.range(e,t,r,i,o))}n(i)},array:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((void 0===t||null===t)&&!e.required)return n();Xr.required(e,t,r,i,o,"array"),void 0!==t&&null!==t&&(Xr.type(e,t,r,i,o),Xr.range(e,t,r,i,o))}n(i)},object:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Vr(t)&&!e.required)return n();Xr.required(e,t,r,i,o),void 0!==t&&Xr.type(e,t,r,i,o)}n(i)},enum:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Vr(t)&&!e.required)return n();Xr.required(e,t,r,i,o),void 0!==t&&Xr.enum(e,t,r,i,o)}n(i)},pattern:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Vr(t,"string")&&!e.required)return n();Xr.required(e,t,r,i,o),Vr(t,"string")||Xr.pattern(e,t,r,i,o)}n(i)},date:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Vr(t,"date")&&!e.required)return n();var a;if(Xr.required(e,t,r,i,o),!Vr(t,"date"))a=t instanceof Date?t:new Date(t),Xr.type(e,a,r,i,o),a&&Xr.range(e,a.getTime(),r,i,o)}n(i)},url:Yr,hex:Yr,email:Yr,required:function(e,t,n,r,o){var i=[],a=Array.isArray(t)?"array":typeof t;Xr.required(e,t,r,i,o,a),n(i)},any:function(e,t,n,r,o){var i=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(Vr(t)&&!e.required)return n();Xr.required(e,t,r,i,o)}n(i)}};function Zr(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Jr=Zr(),eo=function(){function e(e){this.rules=null,this._messages=Jr,this.define(e)}var t=e.prototype;return t.define=function(e){var t=this;if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==typeof e||Array.isArray(e))throw new Error("Rules must be an object");this.rules={},Object.keys(e).forEach((function(n){var r=e[n];t.rules[n]=Array.isArray(r)?r:[r]}))},t.messages=function(e){return e&&(this._messages=Gr(Zr(),e)),this._messages},t.validate=function(t,n,r){var o=this;void 0===n&&(n={}),void 0===r&&(r=function(){});var i=t,a=n,u=r;if("function"===typeof a&&(u=a,a={}),!this.rules||0===Object.keys(this.rules).length)return u&&u(null,i),Promise.resolve(i);if(a.messages){var s=this.messages();s===Jr&&(s=Zr()),Gr(s,a.messages),a.messages=s}else a.messages=this.messages();var c={};(a.keys||Object.keys(this.rules)).forEach((function(e){var n=o.rules[e],r=i[e];n.forEach((function(n){var a=n;"function"===typeof a.transform&&(i===t&&(i=Nr({},i)),r=i[e]=a.transform(r)),(a="function"===typeof a?{validator:a}:Nr({},a)).validator=o.getValidationMethod(a),a.validator&&(a.field=e,a.fullField=a.fullField||e,a.type=o.getType(a),c[e]=c[e]||[],c[e].push({rule:a,value:r,source:i,field:e}))}))}));var l={};return Ur(c,a,(function(t,n){var r,o=t.rule,u=("object"===o.type||"array"===o.type)&&("object"===typeof o.fields||"object"===typeof o.defaultField);function s(e,t){return Nr({},t,{fullField:o.fullField+"."+e,fullFields:o.fullFields?[].concat(o.fullFields,[e]):[e]})}function c(r){void 0===r&&(r=[]);var c=Array.isArray(r)?r:[r];!a.suppressWarning&&c.length&&e.warning("async-validator:",c),c.length&&void 0!==o.message&&(c=[].concat(o.message));var f=c.map(Hr(o,i));if(a.first&&f.length)return l[o.field]=1,n(f);if(u){if(o.required&&!t.value)return void 0!==o.message?f=[].concat(o.message).map(Hr(o,i)):a.error&&(f=[a.error(o,Br(a.messages.required,o.field))]),n(f);var d={};o.defaultField&&Object.keys(t.value).map((function(e){d[e]=o.defaultField})),d=Nr({},d,t.rule.fields);var p={};Object.keys(d).forEach((function(e){var t=d[e],n=Array.isArray(t)?t:[t];p[e]=n.map(s.bind(null,e))}));var h=new e(p);h.messages(a.messages),t.rule.options&&(t.rule.options.messages=a.messages,t.rule.options.error=a.error),h.validate(t.value,t.rule.options||a,(function(e){var t=[];f&&f.length&&t.push.apply(t,f),e&&e.length&&t.push.apply(t,e),n(t.length?t:null)}))}else n(f)}if(u=u&&(o.required||!o.required&&t.value),o.field=t.field,o.asyncValidator)r=o.asyncValidator(o,t.value,c,t.source,a);else if(o.validator){try{r=o.validator(o,t.value,c,t.source,a)}catch(f){null==console.error||console.error(f),setTimeout((function(){throw f}),0),c(f.message)}!0===r?c():!1===r?c("function"===typeof o.message?o.message(o.fullField||o.field):o.message||(o.fullField||o.field)+" fails"):r instanceof Array?c(r):r instanceof Error&&c(r.message)}r&&r.then&&r.then((function(){return c()}),(function(e){return c(e)}))}),(function(e){!function(e){var t=[],n={};function r(e){var n;Array.isArray(e)?t=(n=t).concat.apply(n,e):t.push(e)}for(var o=0;o<e.length;o++)r(e[o]);t.length?(n=jr(t),u(t,n)):u(null,i)}(e)}),i)},t.getType=function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!==typeof e.validator&&e.type&&!Qr.hasOwnProperty(e.type))throw new Error(Br("Unknown rule type %s",e.type));return e.type||"string"},t.getValidationMethod=function(e){if("function"===typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?Qr.required:Qr[this.getType(e)]||void 0},e}();eo.register=function(e,t){if("function"!==typeof t)throw new Error("Cannot register a validator by type, validator is not a function");Qr[e]=t},eo.warning=function(){},eo.messages=Jr,eo.validators=Qr;var to="'${name}' is not a valid ${type}",no={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:to,method:to,array:to,object:to,number:to,date:to,boolean:to,integer:to,float:to,regexp:to,email:to,url:to,hex:to},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}};function ro(e,t){for(var n=e,r=0;r<t.length;r+=1){if(null===n||void 0===n)return;n=n[t[r]]}return n}function oo(e,t,n,r){if(!t.length)return n;var i,s,c=o(i=t)||On(i)||a(i)||u(),l=c[0],f=c.slice(1);return s=e||"number"!==typeof l?Array.isArray(e)?Tn(e):Xe({},e):[],r&&void 0===n&&1===f.length?delete s[l][f[0]]:s[l]=oo(s[l],f,n,r),s}function io(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.length&&r&&void 0===n&&!ro(e,t.slice(0,-1))?e:oo(e,t,n,r)}function ao(e){return Array.isArray(e)?function(e){return e.map((function(e){return ao(e)}))}(e):"object"===nt(e)&&null!==e?function(e){if(Object.getPrototypeOf(e)===Object.prototype){var t={};for(var n in e)t[n]=ao(e[n]);return t}return e}(e):e}var uo=ao;function so(e){return Rr(e)}function co(e,t){return ro(e,t)}function lo(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=io(e,t,n,r);return o}function fo(e,t){var n={};return t.forEach((function(t){var r=co(e,t);n=lo(n,t,r)})),n}function po(e,t){return e&&e.some((function(e){return go(e,t)}))}function ho(e){return"object"===nt(e)&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function vo(e,t){var n=Array.isArray(e)?Tn(e):Xe({},e);return t?(Object.keys(t).forEach((function(e){var r=n[e],o=t[e],i=ho(r)&&ho(o);n[e]=i?vo(r,o||{}):uo(o)})),n):n}function mo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return vo(e,t)}),e)}function go(e,t){return!(!e||!t||e.length!==t.length)&&e.every((function(e,n){return t[n]===e}))}function yo(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&"object"===nt(t.target)&&e in t.target?t.target[e]:t}function bo(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var o=e[t],i=t-n;return i>0?[].concat(Tn(e.slice(0,n)),[o],Tn(e.slice(n,t)),Tn(e.slice(t+1,r))):i<0?[].concat(Tn(e.slice(0,t)),Tn(e.slice(t+1,n+1)),[o],Tn(e.slice(n+1,r))):e}var xo=eo;function wo(e,t){return e.replace(/\$\{\w+\}/g,(function(e){var n=e.slice(2,-1);return t[n]}))}var Eo="CODE_LOGIC_ERROR";function Co(e,t,n,r,o){return _o.apply(this,arguments)}function _o(){return _o=st(at().mark((function t(n,r,o,i,a){var u,s,c,l,f,d,p,h,v;return at().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return delete(u=Xe({},o)).ruleIndex,u.validator&&(s=u.validator,u.validator=function(){try{return s.apply(void 0,arguments)}catch(e){return console.error(e),Promise.reject(Eo)}}),c=null,u&&"array"===u.type&&u.defaultField&&(c=u.defaultField,delete u.defaultField),l=new xo(qe({},n,[u])),f=mo({},no,i.validateMessages),l.messages(f),d=[],t.prev=9,t.next=12,Promise.resolve(l.validate(qe({},n,r),Xe({},i)));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(9),t.t0.errors&&(d=t.t0.errors.map((function(t,n){var r=t.message,o=r===Eo?f.default:r;return e.isValidElement(o)?e.cloneElement(o,{key:"error_".concat(n)}):o})));case 17:if(d.length||!c){t.next=22;break}return t.next=20,Promise.all(r.map((function(e,t){return Co("".concat(n,".").concat(t),e,c,i,a)})));case 20:return p=t.sent,t.abrupt("return",p.reduce((function(e,t){return[].concat(Tn(e),Tn(t))}),[]));case 22:return h=Xe(Xe({},o),{},{name:n,enum:(o.enum||[]).join(", ")},a),v=d.map((function(e){return"string"===typeof e?wo(e,h):e})),t.abrupt("return",v);case 25:case"end":return t.stop()}}),t,null,[[9,14]])}))),_o.apply(this,arguments)}function ko(e,t,n,r,o,i){var a,u=e.join("."),s=n.map((function(e,t){var n=e.validator,r=Xe(Xe({},e),{},{ruleIndex:t});return n&&(r.validator=function(e,t,r){var o=!1,i=n(e,t,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Promise.resolve().then((function(){Wn(!o,"Your validator function has already return a promise. `callback` will be ignored."),o||r.apply(void 0,t)}))}));o=i&&"function"===typeof i.then&&"function"===typeof i.catch,Wn(o,"`callback` is deprecated. Please return a promise instead."),o&&i.then((function(){r()})).catch((function(e){r(e||" ")}))}),r})).sort((function(e,t){var n=e.warningOnly,r=e.ruleIndex,o=t.warningOnly,i=t.ruleIndex;return!!n===!!o?r-i:n?1:-1}));if(!0===o)a=new Promise(function(){var e=st(at().mark((function e(n,o){var a,c,l;return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<s.length)){e.next=12;break}return c=s[a],e.next=5,Co(u,t,c,r,i);case 5:if(!(l=e.sent).length){e.next=9;break}return o([{errors:l,rule:c}]),e.abrupt("return");case 9:a+=1,e.next=1;break;case 12:n([]);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());else{var c=s.map((function(e){return Co(u,t,e,r,i).then((function(t){return{errors:t,rule:e}}))}));a=(o?function(e){return Oo.apply(this,arguments)}(c):function(e){return So.apply(this,arguments)}(c)).then((function(e){return Promise.reject(e)}))}return a.catch((function(e){return e})),a}function So(){return(So=st(at().mark((function e(t){return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t).then((function(e){var t;return(t=[]).concat.apply(t,Tn(e))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oo(){return(Oo=st(at().mark((function e(t){var n;return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",new Promise((function(e){t.forEach((function(r){r.then((function(r){r.errors.length&&e([r]),(n+=1)===t.length&&e([])}))}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var To=["name"],Ao=[];function Ro(e,t,n,r,o,i){return"function"===typeof e?e(t,n,"source"in i?{source:i.source}:{}):r!==o}var No=function(t){et(r,t);var n=it(r);function r(t){var o;(Ye(this,r),(o=n.call(this,t)).state={resetCount:0},o.cancelRegisterFunc=null,o.mounted=!1,o.touched=!1,o.dirty=!1,o.validatePromise=null,o.prevValidating=void 0,o.errors=Ao,o.warnings=Ao,o.cancelRegister=function(){var e=o.props,t=e.preserve,n=e.isListField,r=e.name;o.cancelRegisterFunc&&o.cancelRegisterFunc(n,t,so(r)),o.cancelRegisterFunc=null},o.getNamePath=function(){var e=o.props,t=e.name,n=e.fieldContext.prefixName;return void 0!==t?[].concat(Tn(void 0===n?[]:n),Tn(t)):[]},o.getRules=function(){var e=o.props,t=e.rules,n=void 0===t?[]:t,r=e.fieldContext;return n.map((function(e){return"function"===typeof e?e(r):e}))},o.refresh=function(){o.mounted&&o.setState((function(e){return{resetCount:e.resetCount+1}}))},o.triggerMetaEvent=function(e){var t=o.props.onMetaChange;null===t||void 0===t||t(Xe(Xe({},o.getMeta()),{},{destroy:e}))},o.onStoreChange=function(e,t,n){var r=o.props,i=r.shouldUpdate,a=r.dependencies,u=void 0===a?[]:a,s=r.onReset,c=n.store,l=o.getNamePath(),f=o.getValue(e),d=o.getValue(c),p=t&&po(t,l);switch("valueUpdate"===n.type&&"external"===n.source&&f!==d&&(o.touched=!0,o.dirty=!0,o.validatePromise=null,o.errors=Ao,o.warnings=Ao,o.triggerMetaEvent()),n.type){case"reset":if(!t||p)return o.touched=!1,o.dirty=!1,o.validatePromise=null,o.errors=Ao,o.warnings=Ao,o.triggerMetaEvent(),null===s||void 0===s||s(),void o.refresh();break;case"remove":if(i)return void o.reRender();break;case"setField":if(p){var h=n.data;return"touched"in h&&(o.touched=h.touched),"validating"in h&&!("originRCField"in h)&&(o.validatePromise=h.validating?Promise.resolve([]):null),"errors"in h&&(o.errors=h.errors||Ao),"warnings"in h&&(o.warnings=h.warnings||Ao),o.dirty=!0,o.triggerMetaEvent(),void o.reRender()}if(i&&!l.length&&Ro(i,e,c,f,d,n))return void o.reRender();break;case"dependenciesUpdate":if(u.map(so).some((function(e){return po(n.relatedFields,e)})))return void o.reRender();break;default:if(p||(!u.length||l.length||i)&&Ro(i,e,c,f,d,n))return void o.reRender()}!0===i&&o.reRender()},o.validateRules=function(e){var t=o.getNamePath(),n=o.getValue(),r=Promise.resolve().then((function(){if(!o.mounted)return[];var i=o.props,a=i.validateFirst,u=void 0!==a&&a,s=i.messageVariables,c=(e||{}).triggerName,l=o.getRules();c&&(l=l.filter((function(e){var t=e.validateTrigger;return!t||Rr(t).includes(c)})));var f=ko(t,n,l,e,u,s);return f.catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ao;if(o.validatePromise===r){o.validatePromise=null;var t=[],n=[];e.forEach((function(e){var r=e.rule.warningOnly,o=e.errors,i=void 0===o?Ao:o;r?n.push.apply(n,Tn(i)):t.push.apply(t,Tn(i))})),o.errors=t,o.warnings=n,o.triggerMetaEvent(),o.reRender()}})),f}));return o.validatePromise=r,o.dirty=!0,o.errors=Ao,o.warnings=Ao,o.triggerMetaEvent(),o.reRender(),r},o.isFieldValidating=function(){return!!o.validatePromise},o.isFieldTouched=function(){return o.touched},o.isFieldDirty=function(){return!(!o.dirty&&void 0===o.props.initialValue)||void 0!==(0,o.props.fieldContext.getInternalHooks(Or).getInitialValue)(o.getNamePath())},o.getErrors=function(){return o.errors},o.getWarnings=function(){return o.warnings},o.isListField=function(){return o.props.isListField},o.isList=function(){return o.props.isList},o.isPreserve=function(){return o.props.preserve},o.getMeta=function(){return o.prevValidating=o.isFieldValidating(),{touched:o.isFieldTouched(),validating:o.prevValidating,errors:o.errors,warnings:o.warnings,name:o.getNamePath()}},o.getOnlyChild=function(t){if("function"===typeof t){var n=o.getMeta();return Xe(Xe({},o.getOnlyChild(t(o.getControlled(),n,o.props.fieldContext))),{},{isFunction:!0})}var r=Sr(t);return 1===r.length&&e.isValidElement(r[0])?{child:r[0],isFunction:!1}:{child:r,isFunction:!1}},o.getValue=function(e){var t=o.props.fieldContext.getFieldsValue,n=o.getNamePath();return co(e||t(!0),n)},o.getControlled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.props,n=t.trigger,r=t.validateTrigger,i=t.getValueFromEvent,a=t.normalize,u=t.valuePropName,s=t.getValueProps,c=t.fieldContext,l=void 0!==r?r:c.validateTrigger,f=o.getNamePath(),d=c.getInternalHooks,p=c.getFieldsValue,h=d(Or),v=h.dispatch,m=o.getValue(),g=s||function(e){return qe({},u,e)},y=e[n],b=Xe(Xe({},e),g(m));b[n]=function(){var e;o.touched=!0,o.dirty=!0,o.triggerMetaEvent();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e=i?i.apply(void 0,n):yo.apply(void 0,[u].concat(n)),a&&(e=a(e,m,p(!0))),v({type:"updateValue",namePath:f,value:e}),y&&y.apply(void 0,n)};var x=Rr(l||[]);return x.forEach((function(e){var t=b[e];b[e]=function(){t&&t.apply(void 0,arguments);var n=o.props.rules;n&&n.length&&v({type:"validateField",namePath:f,triggerName:e})}})),b},t.fieldContext)&&(0,(0,t.fieldContext.getInternalHooks)(Or).initEntityValue)(rt(o));return o}return Ze(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,n=e.fieldContext;if(this.mounted=!0,n){var r=(0,n.getInternalHooks)(Or).registerField;this.cancelRegisterFunc=r(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var t,n=this.state.resetCount,r=this.props.children,o=this.getOnlyChild(r),i=o.child;return o.isFunction?t=i:e.isValidElement(i)?t=e.cloneElement(i,this.getControlled(i.props)):(Wn(!i,"`children` of Field is not validate ReactElement."),t=i),e.createElement(e.Fragment,{key:n},t)}}]),r}(e.Component);No.contextType=Ar,No.defaultProps={trigger:"onChange",valuePropName:"value"};var Io=function(t){var n=t.name,r=Ke(t,To),o=e.useContext(Ar),i=void 0!==n?so(n):void 0,a="keep";return r.isListField||(a="_".concat((i||[]).join("_"))),e.createElement(No,Ge({key:a,name:i},r,{fieldContext:o}))},Po=e.createContext(null),Do=function(t){var n=t.name,r=t.initialValue,o=t.children,i=t.rules,a=t.validateTrigger,u=e.useContext(Ar),s=e.useRef({keys:[],id:0}).current,c=e.useMemo((function(){var e=so(u.prefixName)||[];return[].concat(Tn(e),Tn(so(n)))}),[u.prefixName,n]),l=e.useMemo((function(){return Xe(Xe({},u),{},{prefixName:c})}),[u,c]),f=e.useMemo((function(){return{getKey:function(e){var t=c.length,n=e[t];return[s.keys[n],e.slice(t+1)]}}}),[c]);if("function"!==typeof o)return Wn(!1,"Form.List only accepts function as children."),null;return e.createElement(Po.Provider,{value:f},e.createElement(Ar.Provider,{value:l},e.createElement(Io,{name:[],shouldUpdate:function(e,t,n){return"internal"!==n.source&&e!==t},rules:i,validateTrigger:a,initialValue:r,isList:!0},(function(e,t){var n=e.value,r=void 0===n?[]:n,i=e.onChange,a=u.getFieldValue,l=function(){return a(c||[])||[]},f={add:function(e,t){var n=l();t>=0&&t<=n.length?(s.keys=[].concat(Tn(s.keys.slice(0,t)),[s.id],Tn(s.keys.slice(t))),i([].concat(Tn(n.slice(0,t)),[e],Tn(n.slice(t))))):(s.keys=[].concat(Tn(s.keys),[s.id]),i([].concat(Tn(n),[e]))),s.id+=1},remove:function(e){var t=l(),n=new Set(Array.isArray(e)?e:[e]);n.size<=0||(s.keys=s.keys.filter((function(e,t){return!n.has(t)})),i(t.filter((function(e,t){return!n.has(t)}))))},move:function(e,t){if(e!==t){var n=l();e<0||e>=n.length||t<0||t>=n.length||(s.keys=bo(s.keys,e,t),i(bo(n,e,t)))}}},d=r||[];return Array.isArray(d)||(d=[]),o(d.map((function(e,t){var n=s.keys[t];return void 0===n&&(s.keys[t]=s.id,n=s.keys[t],s.id+=1),{name:t,key:n,isListField:!0}})),f,t)}))))};var Mo="__@field_split__";function Fo(e){return e.map((function(e){return"".concat(nt(e),":").concat(e)})).join(Mo)}var Lo=function(){function e(){Ye(this,e),this.kvs=new Map}return Ze(e,[{key:"set",value:function(e,t){this.kvs.set(Fo(e),t)}},{key:"get",value:function(e){return this.kvs.get(Fo(e))}},{key:"update",value:function(e,t){var n=t(this.get(e));n?this.set(e,n):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete(Fo(e))}},{key:"map",value:function(e){return Tn(this.kvs.entries()).map((function(t){var n=s(t,2),r=n[0],o=n[1],i=r.split(Mo);return e({key:i.map((function(e){var t=s(e.match(/^([^:]*):(.*)$/),3),n=t[1],r=t[2];return"number"===n?Number(r):r})),value:o})}))}},{key:"toJSON",value:function(){var e={};return this.map((function(t){var n=t.key,r=t.value;return e[n.join(".")]=r,null})),e}}]),e}(),jo=Lo,Bo=["name","errors"],Vo=Ze((function e(t){var n=this;Ye(this,e),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(e){return e===Or?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(Wn(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(e){n.subscribable=e},this.prevWithoutPreserves=null,this.setInitialValues=function(e,t){if(n.initialValues=e||{},t){var r,o=mo({},e,n.store);null===(r=n.prevWithoutPreserves)||void 0===r||r.map((function(t){var n=t.key;o=lo(o,n,co(e,n))})),n.prevWithoutPreserves=null,n.updateStore(o)}},this.destroyForm=function(){var e=new jo;n.getFieldEntities(!0).forEach((function(t){n.isMergedPreserve(t.isPreserve())||e.set(t.getNamePath(),!0)})),n.prevWithoutPreserves=e},this.getInitialValue=function(e){var t=co(n.initialValues,e);return e.length?uo(t):t},this.setCallbacks=function(e){n.callbacks=e},this.setValidateMessages=function(e){n.validateMessages=e},this.setPreserve=function(e){n.preserve=e},this.watchList=[],this.registerWatch=function(e){return n.watchList.push(e),function(){n.watchList=n.watchList.filter((function(t){return t!==e}))}},this.notifyWatch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(n.watchList.length){var t=n.getFieldsValue();n.watchList.forEach((function(n){n(t,e)}))}},this.timeoutId=null,this.warningUnhooked=function(){0},this.updateStore=function(e){n.store=e},this.getFieldEntities=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?n.fieldEntities.filter((function(e){return e.getNamePath().length})):n.fieldEntities},this.getFieldsMap=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new jo;return n.getFieldEntities(e).forEach((function(e){var n=e.getNamePath();t.set(n,e)})),t},this.getFieldEntitiesForNamePathList=function(e){if(!e)return n.getFieldEntities(!0);var t=n.getFieldsMap(!0);return e.map((function(e){var n=so(e);return t.get(n)||{INVALIDATE_NAME_PATH:so(e)}}))},this.getFieldsValue=function(e,t){if(n.warningUnhooked(),!0===e&&!t)return n.store;var r=n.getFieldEntitiesForNamePathList(Array.isArray(e)?e:null),o=[];return r.forEach((function(n){var r,i="INVALIDATE_NAME_PATH"in n?n.INVALIDATE_NAME_PATH:n.getNamePath();if(e||!(null===(r=n.isListField)||void 0===r?void 0:r.call(n)))if(t){var a="getMeta"in n?n.getMeta():null;t(a)&&o.push(i)}else o.push(i)})),fo(n.store,o.map(so))},this.getFieldValue=function(e){n.warningUnhooked();var t=so(e);return co(n.store,t)},this.getFieldsError=function(e){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(e).map((function(t,n){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors(),warnings:t.getWarnings()}:{name:so(e[n]),errors:[],warnings:[]}}))},this.getFieldError=function(e){n.warningUnhooked();var t=so(e);return n.getFieldsError([t])[0].errors},this.getFieldWarning=function(e){n.warningUnhooked();var t=so(e);return n.getFieldsError([t])[0].warnings},this.isFieldsTouched=function(){n.warningUnhooked();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o,i=t[0],a=t[1],u=!1;0===t.length?o=null:1===t.length?Array.isArray(i)?(o=i.map(so),u=!1):(o=null,u=i):(o=i.map(so),u=a);var s=n.getFieldEntities(!0),c=function(e){return e.isFieldTouched()};if(!o)return u?s.every(c):s.some(c);var l=new jo;o.forEach((function(e){l.set(e,[])})),s.forEach((function(e){var t=e.getNamePath();o.forEach((function(n){n.every((function(e,n){return t[n]===e}))&&l.update(n,(function(t){return[].concat(Tn(t),[e])}))}))}));var f=function(e){return e.some(c)},d=l.map((function(e){return e.value}));return u?d.every(f):d.some(f)},this.isFieldTouched=function(e){return n.warningUnhooked(),n.isFieldsTouched([e])},this.isFieldsValidating=function(e){n.warningUnhooked();var t=n.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var r=e.map(so);return t.some((function(e){var t=e.getNamePath();return po(r,t)&&e.isFieldValidating()}))},this.isFieldValidating=function(e){return n.warningUnhooked(),n.isFieldsValidating([e])},this.resetWithFieldInitialValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new jo,r=n.getFieldEntities(!0);r.forEach((function(e){var n=e.props.initialValue,r=e.getNamePath();if(void 0!==n){var o=t.get(r)||new Set;o.add({entity:e,value:n}),t.set(r,o)}}));var o,i=function(r){r.forEach((function(r){if(void 0!==r.props.initialValue){var o=r.getNamePath();if(void 0!==n.getInitialValue(o))Wn(!1,"Form already set 'initialValues' with path '".concat(o.join("."),"'. Field can not overwrite it."));else{var i=t.get(o);if(i&&i.size>1)Wn(!1,"Multiple Field with path '".concat(o.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(i){var a=n.getFieldValue(o);e.skipExist&&void 0!==a||n.updateStore(lo(n.store,o,Tn(i)[0].value))}}}}))};e.entities?o=e.entities:e.namePathList?(o=[],e.namePathList.forEach((function(e){var n,r=t.get(e);r&&(n=o).push.apply(n,Tn(Tn(r).map((function(e){return e.entity}))))}))):o=r,i(o)},this.resetFields=function(e){n.warningUnhooked();var t=n.store;if(!e)return n.updateStore(mo({},n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(t,null,{type:"reset"}),void n.notifyWatch();var r=e.map(so);r.forEach((function(e){var t=n.getInitialValue(e);n.updateStore(lo(n.store,e,t))})),n.resetWithFieldInitialValue({namePathList:r}),n.notifyObservers(t,r,{type:"reset"}),n.notifyWatch(r)},this.setFields=function(e){n.warningUnhooked();var t=n.store,r=[];e.forEach((function(e){var o=e.name,i=(e.errors,Ke(e,Bo)),a=so(o);r.push(a),"value"in i&&n.updateStore(lo(n.store,a,i.value)),n.notifyObservers(t,[a],{type:"setField",data:e})})),n.notifyWatch(r)},this.getFields=function(){return n.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),r=Xe(Xe({},e.getMeta()),{},{name:t,value:n.getFieldValue(t)});return Object.defineProperty(r,"originRCField",{value:!0}),r}))},this.initEntityValue=function(e){var t=e.props.initialValue;if(void 0!==t){var r=e.getNamePath();void 0===co(n.store,r)&&n.updateStore(lo(n.store,r,t))}},this.isMergedPreserve=function(e){var t=void 0!==e?e:n.preserve;return null===t||void 0===t||t},this.registerField=function(e){n.fieldEntities.push(e);var t=e.getNamePath();if(n.notifyWatch([t]),void 0!==e.props.initialValue){var r=n.store;n.resetWithFieldInitialValue({entities:[e],skipExist:!0}),n.notifyObservers(r,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(r,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter((function(t){return t!==e})),!n.isMergedPreserve(o)&&(!r||i.length>1)){var a=r?void 0:n.getInitialValue(t);if(t.length&&n.getFieldValue(t)!==a&&n.fieldEntities.every((function(e){return!go(e.getNamePath(),t)}))){var u=n.store;n.updateStore(lo(u,t,a,!0)),n.notifyObservers(u,[t],{type:"remove"}),n.triggerDependenciesUpdate(u,t)}}n.notifyWatch([t])}},this.dispatch=function(e){switch(e.type){case"updateValue":var t=e.namePath,r=e.value;n.updateValue(t,r);break;case"validateField":var o=e.namePath,i=e.triggerName;n.validateFields([o],{triggerName:i})}},this.notifyObservers=function(e,t,r){if(n.subscribable){var o=Xe(Xe({},r),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(e,t,o)}))}else n.forceRootUpdate()},this.triggerDependenciesUpdate=function(e,t){var r=n.getDependencyChildrenFields(t);return r.length&&n.validateFields(r),n.notifyObservers(e,r,{type:"dependenciesUpdate",relatedFields:[t].concat(Tn(r))}),r},this.updateValue=function(e,t){var r=so(e),o=n.store;n.updateStore(lo(n.store,r,t)),n.notifyObservers(o,[r],{type:"valueUpdate",source:"internal"}),n.notifyWatch([r]);var i=n.triggerDependenciesUpdate(o,r),a=n.callbacks.onValuesChange;a&&a(fo(n.store,[r]),n.getFieldsValue());n.triggerOnFieldsChange([r].concat(Tn(i)))},this.setFieldsValue=function(e){n.warningUnhooked();var t=n.store;if(e){var r=mo(n.store,e);n.updateStore(r)}n.notifyObservers(t,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()},this.getDependencyChildrenFields=function(e){var t=new Set,r=[],o=new jo;n.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var n=so(t);o.update(n,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))}));return function e(n){(o.get(n)||new Set).forEach((function(n){if(!t.has(n)){t.add(n);var o=n.getNamePath();n.isFieldDirty()&&o.length&&(r.push(o),e(o))}}))}(e),r},this.triggerOnFieldsChange=function(e,t){var r=n.callbacks.onFieldsChange;if(r){var o=n.getFields();if(t){var i=new jo;t.forEach((function(e){var t=e.name,n=e.errors;i.set(t,n)})),o.forEach((function(e){e.errors=i.get(e.name)||e.errors}))}r(o.filter((function(t){var n=t.name;return po(e,n)})),o)}},this.validateFields=function(e,t){n.warningUnhooked();var r=!!e,o=r?e.map(so):[],i=[];n.getFieldEntities(!0).forEach((function(a){if(r||o.push(a.getNamePath()),(null===t||void 0===t?void 0:t.recursive)&&r){var u=a.getNamePath();u.every((function(t,n){return e[n]===t||void 0===e[n]}))&&o.push(u)}if(a.props.rules&&a.props.rules.length){var s=a.getNamePath();if(!r||po(o,s)){var c=a.validateRules(Xe({validateMessages:Xe(Xe({},no),n.validateMessages)},t));i.push(c.then((function(){return{name:s,errors:[],warnings:[]}})).catch((function(e){var t=[],n=[];return e.forEach((function(e){var r=e.rule.warningOnly,o=e.errors;r?n.push.apply(n,Tn(o)):t.push.apply(t,Tn(o))})),t.length?Promise.reject({name:s,errors:t,warnings:n}):{name:s,errors:t,warnings:n}})))}}}));var a=function(e){var t=!1,n=e.length,r=[];return e.length?new Promise((function(o,i){e.forEach((function(e,a){e.catch((function(e){return t=!0,e})).then((function(e){n-=1,r[a]=e,n>0||(t&&i(r),o(r))}))}))})):Promise.resolve([])}(i);n.lastValidatePromise=a,a.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));n.notifyObservers(n.store,t,{type:"validateFinish"}),n.triggerOnFieldsChange(t,e)}));var u=a.then((function(){return n.lastValidatePromise===a?Promise.resolve(n.getFieldsValue(o)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:n.getFieldsValue(o),errorFields:t,outOfDate:n.lastValidatePromise!==a})}));return u.catch((function(e){return e})),u},this.submit=function(){n.warningUnhooked(),n.validateFields().then((function(e){var t=n.callbacks.onFinish;if(t)try{t(e)}catch(r){console.error(r)}})).catch((function(e){var t=n.callbacks.onFinishFailed;t&&t(e)}))},this.forceRootUpdate=t}));var zo=function(t){var n=e.useRef(),r=s(e.useState({}),2)[1];if(!n.current)if(t)n.current=t;else{var o=new Vo((function(){r({})}));n.current=o.getForm()}return[n.current]},Wo=e.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),Uo=function(t){var n=t.validateMessages,r=t.onFormChange,o=t.onFormFinish,i=t.children,a=e.useContext(Wo),u=e.useRef({});return e.createElement(Wo.Provider,{value:Xe(Xe({},a),{},{validateMessages:Xe(Xe({},a.validateMessages),n),triggerFormChange:function(e,t){r&&r(e,{changedFields:t,forms:u.current}),a.triggerFormChange(e,t)},triggerFormFinish:function(e,t){o&&o(e,{values:t,forms:u.current}),a.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(u.current=Xe(Xe({},u.current),{},qe({},e,t))),a.registerForm(e,t)},unregisterForm:function(e){var t=Xe({},u.current);delete t[e],u.current=t,a.unregisterForm(e)}})},i)},Ho=Wo,Go=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],qo=function(t,n){var r=t.name,o=t.initialValues,i=t.fields,a=t.form,u=t.preserve,c=t.children,l=t.component,f=void 0===l?"form":l,d=t.validateMessages,p=t.validateTrigger,h=void 0===p?"onChange":p,v=t.onValuesChange,m=t.onFieldsChange,g=t.onFinish,y=t.onFinishFailed,b=Ke(t,Go),x=e.useContext(Ho),w=s(zo(a),1)[0],E=w.getInternalHooks(Or),C=E.useSubscribe,_=E.setInitialValues,k=E.setCallbacks,S=E.setValidateMessages,O=E.setPreserve,T=E.destroyForm;e.useImperativeHandle(n,(function(){return w})),e.useEffect((function(){return x.registerForm(r,w),function(){x.unregisterForm(r)}}),[x,w,r]),S(Xe(Xe({},x.validateMessages),d)),k({onValuesChange:v,onFieldsChange:function(e){if(x.triggerFormChange(r,e),m){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];m.apply(void 0,[e].concat(n))}},onFinish:function(e){x.triggerFormFinish(r,e),g&&g(e)},onFinishFailed:y}),O(u);var A,R=e.useRef(null);_(o,!R.current),R.current||(R.current=!0),e.useEffect((function(){return T}),[]);var N="function"===typeof c;N?A=c(w.getFieldsValue(!0),w):A=c;C(!N);var I=e.useRef();e.useEffect((function(){(function(e,t){if(e===t)return!0;if(!e&&t||e&&!t)return!1;if(!e||!t||"object"!==nt(e)||"object"!==nt(t))return!1;var n=Object.keys(e),r=Object.keys(t),o=new Set([].concat(Tn(n),Tn(r)));return Tn(o).every((function(n){var r=e[n],o=t[n];return"function"===typeof r&&"function"===typeof o||r===o}))})(I.current||[],i||[])||w.setFields(i||[]),I.current=i}),[i,w]);var P=e.useMemo((function(){return Xe(Xe({},w),{},{validateTrigger:h})}),[w,h]),D=e.createElement(Ar.Provider,{value:P},A);return!1===f?D:e.createElement(f,Ge({},b,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),w.submit()},onReset:function(e){var t;e.preventDefault(),w.resetFields(),null===(t=b.onReset)||void 0===t||t.call(b,e)}}),D)};function Ko(e){try{return JSON.stringify(e)}catch(t){return Math.random()}}var $o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=(0,e.useState)(),o=s(r,2),i=o[0],a=o[1],u=(0,e.useMemo)((function(){return Ko(i)}),[i]),c=(0,e.useRef)(u);c.current=u;var l=(0,e.useContext)(Ar),f=n||l,d=f&&f._init,p=so(t),h=(0,e.useRef)(p);return h.current=p,(0,e.useEffect)((function(){if(d){var e=f.getFieldsValue,t=(0,(0,f.getInternalHooks)(Or).registerWatch)((function(e){var t=co(e,h.current),n=Ko(t);c.current!==n&&(c.current=n,a(t))})),n=co(e(),h.current);return a(n),t}}),[]),i},Xo=e.forwardRef(qo);Xo.FormProvider=Uo,Xo.Field=Io,Xo.List=Do,Xo.useForm=zo,Xo.useWatch=$o;var Yo=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function Qo(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],o=t[n],!(r===o||Yo(r)&&Yo(o)))return!1;var r,o;return!0}var Zo={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},Jo={lang:Ge({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}),timePickerLocale:Ge({},Zo)},ei="${label} is not a valid ${type}",ti={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},DatePicker:Jo,TimePicker:Zo,Calendar:Jo,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No Data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:ei,method:ei,array:ei,object:ei,number:ei,date:ei,boolean:ei,integer:ei,float:ei,regexp:ei,email:ei,url:ei,hex:ei},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"}},ni=Ge({},ti.Modal);function ri(e){ni=e?Ge(Ge({},ni),e):Ge({},ti.Modal)}var oi=(0,e.createContext)(void 0),ii=function(t){et(r,t);var n=it(r);function r(e){var t;return Ye(this,r),(t=n.call(this,e)).getMemoizedContextValue=function(e,t){void 0===t&&(t=Qo);var n=null;function r(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var i=e.apply(this,r);return n={lastResult:i,lastArgs:r,lastThis:this},i}return r.clear=function(){n=null},r}((function(e){return Ge(Ge({},e),{exist:!0})})),ri(e.locale&&e.locale.Modal),t}return Ze(r,[{key:"componentDidMount",value:function(){ri(this.props.locale&&this.props.locale.Modal)}},{key:"componentDidUpdate",value:function(e){var t=this.props.locale;e.locale!==t&&ri(t&&t.Modal)}},{key:"componentWillUnmount",value:function(){ri()}},{key:"render",value:function(){var t=this.props,n=t.locale,r=t.children,o=this.getMemoizedContextValue(n);return e.createElement(oi.Provider,{value:o},r)}}]),r}(e.Component);ii.defaultProps={locale:{}};var ai=ti,ui=function(e){et(n,e);var t=it(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Ze(n,[{key:"getLocale",value:function(){var e=this.props,t=e.componentName,n=e.defaultLocale||ai[null!==t&&void 0!==t?t:"global"],r=this.context,o=t&&r?r[t]:{};return Ge(Ge({},n instanceof Function?n():n),o||{})}},{key:"getLocaleCode",value:function(){var e=this.context,t=e&&e.locale;return e&&e.exist&&!t?ai.locale:t}},{key:"render",value:function(){return this.props.children(this.getLocale(),this.getLocaleCode(),this.context)}}]),n}(e.Component);ui.defaultProps={componentName:"global"},ui.contextType=oi;var si={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},ci=function(t,n){return e.createElement(cr,Xe(Xe({},t),{},{ref:n,icon:si}))};ci.displayName="LoadingOutlined";var li=e.forwardRef(ci),fi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},di=function(t,n){return e.createElement(cr,Xe(Xe({},t),{},{ref:n,icon:fi}))};di.displayName="ExclamationCircleFilled";var pi=e.forwardRef(di),hi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},vi=function(t,n){return e.createElement(cr,Xe(Xe({},t),{},{ref:n,icon:hi}))};vi.displayName="CloseCircleFilled";var mi=e.forwardRef(vi),gi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"},yi=function(t,n){return e.createElement(cr,Xe(Xe({},t),{},{ref:n,icon:gi}))};yi.displayName="CheckCircleFilled";var bi,xi=e.forwardRef(yi),wi={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},Ei=function(t,n){return e.createElement(cr,Xe(Xe({},t),{},{ref:n,icon:wi}))};Ei.displayName="InfoCircleFilled";var Ci,_i,ki,Si=3,Oi=1,Ti="",Ai="move-up",Ri=!1,Ni=!1;function Ii(){return Oi++}function Pi(e,t){var n=e.prefixCls,r=e.getPopupContainer,o=ra(),i=o.getPrefixCls,a=o.getRootPrefixCls,u=o.getIconPrefixCls,s=i("message",n||Ti),c=a(e.rootPrefixCls,s),l=u();if(bi)t({prefixCls:s,rootPrefixCls:c,iconPrefixCls:l,instance:bi});else{var f={prefixCls:s,transitionName:Ri?Ai:"".concat(c,"-").concat(Ai),style:{top:Ci},getContainer:_i||r,maxCount:ki};Mn.newInstance(f,(function(e){bi?t({prefixCls:s,rootPrefixCls:c,iconPrefixCls:l,instance:bi}):(bi=e,t({prefixCls:s,rootPrefixCls:c,iconPrefixCls:l,instance:e}))}))}}var Di={info:e.forwardRef(Ei),success:xi,error:mi,warning:pi,loading:li},Mi=Object.keys(Di);function Fi(t,n,r){var o,i=void 0!==t.duration?t.duration:Si,a=Di[t.type],u=Ct()("".concat(n,"-custom-content"),(qe(o={},"".concat(n,"-").concat(t.type),t.type),qe(o,"".concat(n,"-rtl"),!0===Ni),o));return{key:t.key,duration:i,style:t.style||{},className:t.className,content:e.createElement(ca,{iconPrefixCls:r},e.createElement("div",{className:u},t.icon||a&&e.createElement(a,null),e.createElement("span",null,t.content))),onClose:t.onClose,onClick:t.onClick}}var Li={open:function(e){var t=e.key||Ii(),n=new Promise((function(n){var r=function(){return"function"===typeof e.onClose&&e.onClose(),n(!0)};Pi(e,(function(n){var o=n.prefixCls,i=n.iconPrefixCls;n.instance.notice(Fi(Ge(Ge({},e),{key:t,onClose:r}),o,i))}))})),r=function(){bi&&bi.removeNotice(t)};return r.then=function(e,t){return n.then(e,t)},r.promise=n,r},config:function(e){void 0!==e.top&&(Ci=e.top,bi=null),void 0!==e.duration&&(Si=e.duration),void 0!==e.prefixCls&&(Ti=e.prefixCls),void 0!==e.getContainer&&(_i=e.getContainer,bi=null),void 0!==e.transitionName&&(Ai=e.transitionName,bi=null,Ri=!0),void 0!==e.maxCount&&(ki=e.maxCount,bi=null),void 0!==e.rtl&&(Ni=e.rtl)},destroy:function(e){if(bi)if(e){(0,bi.removeNotice)(e)}else{var t=bi.destroy;t(),bi=null}}};function ji(e,t){e[t]=function(n,r,o){return function(e){return"[object Object]"===Object.prototype.toString.call(e)&&!!e.content}(n)?e.open(Ge(Ge({},n),{type:t})):("function"===typeof r&&(o=r,r=void 0),e.open({content:n,duration:r,type:t,onClose:o}))}}Mi.forEach((function(e){return ji(Li,e)})),Li.warn=Li.warning,Li.useMessage=function(t,n){return function(){var r,o,i=null,a=s(An({add:function(e,t){null===i||void 0===i||i.component.add(e,t)}}),2),u=a[0],c=a[1];var l=e.useRef({});return l.current.open=function(e){var a=e.prefixCls,s=r("message",a),c=r(),l=e.key||Ii(),f=new Promise((function(r){var a=function(){return"function"===typeof e.onClose&&e.onClose(),r(!0)};t(Ge(Ge({},e),{prefixCls:s,rootPrefixCls:c,getPopupContainer:o}),(function(t){var r=t.prefixCls,o=t.instance;i=o,u(n(Ge(Ge({},e),{key:l,onClose:a}),r))}))})),d=function(){i&&i.removeNotice(l)};return d.then=function(e,t){return f.then(e,t)},d.promise=f,d},Mi.forEach((function(e){return ji(l.current,e)})),[l.current,e.createElement(kr,{key:"holder"},(function(e){return r=e.getPrefixCls,o=e.getPopupContainer,c}))]}}(Pi,Fi);var Bi=Li,Vi=n(2144),zi=n(4929),Wi=n(6144),Ui=n(3777),Hi=function(){function e(t,n){var r;if(void 0===t&&(t=""),void 0===n&&(n={}),t instanceof e)return t;"number"===typeof t&&(t=(0,Vi.Yt)(t)),this.originalInput=t;var o=(0,Wi.uA)(t);this.originalInput=t,this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(r=n.format)&&void 0!==r?r:o.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=o.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,r=e.b/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=(0,Ui.Yq)(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.toHsv=function(){var e=(0,Vi.py)(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=(0,Vi.py)(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var e=(0,Vi.lC)(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=(0,Vi.lC)(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1===this.a?"hsl(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(e){return void 0===e&&(e=!1),(0,Vi.vq)(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),(0,Vi.s)(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb(".concat(e,", ").concat(t,", ").concat(n,")"):"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var e=function(e){return"".concat(Math.round(100*(0,Ui.sh)(e,255)),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*(0,Ui.sh)(e,255))};return 1===this.a?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+(0,Vi.vq)(this.r,this.g,this.b,!1),t=0,n=Object.entries(zi.R);t<n.length;t++){var r=n[t],o=r[0];if(e===r[1])return o}return!1},e.prototype.toString=function(e){var t=Boolean(e);e=null!==e&&void 0!==e?e:this.format;var n=!1,r=this.a<1&&this.a>=0;return t||!r||!e.startsWith("hex")&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this.a?this.toName():this.toRgbString()},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=(0,Ui.V2)(n.l),new e(n)},e.prototype.brighten=function(t){void 0===t&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),new e(n)},e.prototype.darken=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=(0,Ui.V2)(n.l),new e(n)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=(0,Ui.V2)(n.s),new e(n)},e.prototype.saturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=(0,Ui.V2)(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new e(n)},e.prototype.mix=function(t,n){void 0===n&&(n=50);var r=this.toRgb(),o=new e(t).toRgb(),i=n/100;return new e({r:(o.r-r.r)*i+r.r,g:(o.g-r.g)*i+r.g,b:(o.b-r.b)*i+r.b,a:(o.a-r.a)*i+r.a})},e.prototype.analogous=function(t,n){void 0===t&&(t=6),void 0===n&&(n=30);var r=this.toHsl(),o=360/n,i=[this];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,i.push(new e(r));return i},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);for(var n=this.toHsv(),r=n.h,o=n.s,i=n.v,a=[],u=1/t;t--;)a.push(new e({h:r,s:o,v:i})),i=(i+u)%1;return a},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),r=new e(t).toRgb();return new e({r:r.r+(n.r-r.r)*n.a,g:r.g+(n.g-r.g)*n.a,b:r.b+(n.b-r.b)*n.a})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),r=n.h,o=[this],i=360/t,a=1;a<t;a++)o.push(new e({h:(r+a*i)%360,s:n.s,l:n.l}));return o},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();var Gi="-ant-".concat(Date.now(),"-").concat(Math.random());function qi(e,t){var n=function(e,t){var n={},r=function(e,t){var n=e.clone();return(n=(null===t||void 0===t?void 0:t(n))||n).toRgbString()},o=function(e,t){var o=new Hi(e),i=(0,jn.generate)(o.toRgbString());n["".concat(t,"-color")]=r(o),n["".concat(t,"-color-disabled")]=i[1],n["".concat(t,"-color-hover")]=i[4],n["".concat(t,"-color-active")]=i[7],n["".concat(t,"-color-outline")]=o.clone().setAlpha(.2).toRgbString(),n["".concat(t,"-color-deprecated-bg")]=i[1],n["".concat(t,"-color-deprecated-border")]=i[3]};if(t.primaryColor){o(t.primaryColor,"primary");var i=new Hi(t.primaryColor),a=(0,jn.generate)(i.toRgbString());a.forEach((function(e,t){n["primary-".concat(t+1)]=e})),n["primary-color-deprecated-l-35"]=r(i,(function(e){return e.lighten(35)})),n["primary-color-deprecated-l-20"]=r(i,(function(e){return e.lighten(20)})),n["primary-color-deprecated-t-20"]=r(i,(function(e){return e.tint(20)})),n["primary-color-deprecated-t-50"]=r(i,(function(e){return e.tint(50)})),n["primary-color-deprecated-f-12"]=r(i,(function(e){return e.setAlpha(.12*e.getAlpha())}));var u=new Hi(a[0]);n["primary-color-active-deprecated-f-30"]=r(u,(function(e){return e.setAlpha(.3*e.getAlpha())})),n["primary-color-active-deprecated-d-02"]=r(u,(function(e){return e.darken(2)}))}t.successColor&&o(t.successColor,"success"),t.warningColor&&o(t.warningColor,"warning"),t.errorColor&&o(t.errorColor,"error"),t.infoColor&&o(t.infoColor,"info");var s=Object.keys(n).map((function(t){return"--".concat(e,"-").concat(t,": ").concat(n[t],";")}));return"\n  :root {\n    ".concat(s.join("\n"),"\n  }\n  ").trim()}(e,t);Rt()&&Xn(n,"".concat(Gi,"-dynamic-theme"))}var Ki,$i,Xi=e.createContext(!1),Yi=function(t){var n=t.children,r=t.disabled,o=e.useContext(Xi);return e.createElement(Xi.Provider,{value:r||o},n)},Qi=e.createContext(void 0),Zi=function(t){var n=t.children,r=t.size;return e.createElement(Qi.Consumer,null,(function(t){return e.createElement(Qi.Provider,{value:r||t},n)}))},Ji=Qi,ea=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form"];function ta(){return Ki||"ant"}function na(){return $i||"anticon"}var ra=function(){return{getPrefixCls:function(e,t){return t||(e?"".concat(ta(),"-").concat(e):ta())},getIconPrefixCls:na,getRootPrefixCls:function(e,t){return e||(Ki||(t&&t.includes("-")?t.replace(/^(.*)-[^-]*$/,"$1"):ta()))}}},oa=function(t){var n,r,o=t.children,i=t.csp,a=t.autoInsertSpaceInButton,u=t.form,s=t.locale,c=t.componentSize,l=t.direction,f=t.space,d=t.virtual,p=t.dropdownMatchSelectWidth,h=t.legacyLocale,v=t.parentContext,m=t.iconPrefixCls,g=t.componentDisabled,y=e.useCallback((function(e,n){var r=t.prefixCls;if(n)return n;var o=r||v.getPrefixCls("");return e?"".concat(o,"-").concat(e):o}),[v.getPrefixCls,t.prefixCls]),b=Ge(Ge({},v),{csp:i,autoInsertSpaceInButton:a,locale:s||h,direction:l,space:f,virtual:d,dropdownMatchSelectWidth:p,getPrefixCls:y});ea.forEach((function(e){var n=t[e];n&&(b[e]=n)}));var x=St((function(){return b}),b,(function(e,t){var n=Object.keys(e),r=Object.keys(t);return n.length!==r.length||n.some((function(n){return e[n]!==t[n]}))})),w=e.useMemo((function(){return{prefixCls:m,csp:i}}),[m,i]),E=o,C={};return s&&(C=(null===(n=s.Form)||void 0===n?void 0:n.defaultValidateMessages)||(null===(r=ti.Form)||void 0===r?void 0:r.defaultValidateMessages)||{}),u&&u.validateMessages&&(C=Ge(Ge({},C),u.validateMessages)),Object.keys(C).length>0&&(E=e.createElement(Uo,{validateMessages:C},o)),s&&(E=e.createElement(ii,{locale:s,_ANT_MARK__:"internalMark"},E)),(m||i)&&(E=e.createElement(Ln.Provider,{value:w},E)),c&&(E=e.createElement(Zi,{size:c},E)),void 0!==g&&(E=e.createElement(Yi,{disabled:g},E)),e.createElement(_r.Provider,{value:x},E)},ia=function(t){return e.useEffect((function(){t.direction&&(Bi.config({rtl:"rtl"===t.direction}),Ea.config({rtl:"rtl"===t.direction}))}),[t.direction]),e.createElement(ui,null,(function(n,r,o){return e.createElement(kr,null,(function(n){return e.createElement(oa,Ge({parentContext:n,legacyLocale:o},t))}))}))};ia.ConfigContext=_r,ia.SizeContext=Ji,ia.config=function(e){var t=e.prefixCls,n=e.iconPrefixCls,r=e.theme;void 0!==t&&(Ki=t),void 0!==n&&($i=n),r&&qi(ta(),r)};var aa,ua,sa,ca=ia,la={},fa=4.5,da=24,pa=24,ha="",va="topRight",ma=!1;function ga(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:da,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pa;switch(e){case"top":t={left:"50%",transform:"translateX(-50%)",right:"auto",top:n,bottom:"auto"};break;case"topLeft":t={left:0,top:n,bottom:"auto"};break;case"topRight":t={right:0,top:n,bottom:"auto"};break;case"bottom":t={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:r};break;case"bottomLeft":t={left:0,top:"auto",bottom:r};break;default:t={right:0,top:"auto",bottom:r}}return t}function ya(e,t){var n=e.placement,r=void 0===n?va:n,o=e.top,i=e.bottom,a=e.getContainer,u=void 0===a?aa:a,s=e.prefixCls,c=ra(),l=c.getPrefixCls,f=c.getIconPrefixCls,d=l("notification",s||ha),p=f(),h="".concat(d,"-").concat(r),v=la[h];if(v)Promise.resolve(v).then((function(e){t({prefixCls:"".concat(d,"-notice"),iconPrefixCls:p,instance:e})}));else{var m=Ct()("".concat(d,"-").concat(r),qe({},"".concat(d,"-rtl"),!0===ma));la[h]=new Promise((function(e){Mn.newInstance({prefixCls:d,className:m,style:ga(r,o,i),getContainer:u,maxCount:sa},(function(n){e(n),t({prefixCls:"".concat(d,"-notice"),iconPrefixCls:p,instance:n})}))}))}}var ba={success:hr,info:Cr,error:gr,warning:xr};function xa(t,n,r){var o=t.duration,i=t.icon,a=t.type,u=t.description,s=t.message,c=t.btn,l=t.onClose,f=t.onClick,d=t.key,p=t.style,h=t.className,v=t.closeIcon,m=void 0===v?ua:v,g=void 0===o?fa:o,y=null;i?y=e.createElement("span",{className:"".concat(n,"-icon")},t.icon):a&&(y=e.createElement(ba[a]||null,{className:"".concat(n,"-icon ").concat(n,"-icon-").concat(a)}));var b=e.createElement("span",{className:"".concat(n,"-close-x")},m||e.createElement(fr,{className:"".concat(n,"-close-icon")})),x=!u&&y?e.createElement("span",{className:"".concat(n,"-message-single-line-auto-margin")}):null;return{content:e.createElement(ca,{iconPrefixCls:r},e.createElement("div",{className:y?"".concat(n,"-with-icon"):"",role:"alert"},y,e.createElement("div",{className:"".concat(n,"-message")},x,s),e.createElement("div",{className:"".concat(n,"-description")},u),c?e.createElement("span",{className:"".concat(n,"-btn")},c):null)),duration:g,closable:!0,closeIcon:b,onClose:l,onClick:f,key:d,style:p||{},className:Ct()(h,qe({},"".concat(n,"-").concat(a),!!a))}}var wa={open:function(e){ya(e,(function(t){var n=t.prefixCls,r=t.iconPrefixCls;t.instance.notice(xa(e,n,r))}))},close:function(e){Object.keys(la).forEach((function(t){return Promise.resolve(la[t]).then((function(t){t.removeNotice(e)}))}))},config:function(e){var t=e.duration,n=e.placement,r=e.bottom,o=e.top,i=e.getContainer,a=e.closeIcon,u=e.prefixCls;void 0!==u&&(ha=u),void 0!==t&&(fa=t),void 0!==n?va=n:e.rtl&&(va="topLeft"),void 0!==r&&(pa=r),void 0!==o&&(da=o),void 0!==i&&(aa=i),void 0!==a&&(ua=a),void 0!==e.rtl&&(ma=e.rtl),void 0!==e.maxCount&&(sa=e.maxCount)},destroy:function(){Object.keys(la).forEach((function(e){Promise.resolve(la[e]).then((function(e){e.destroy()})),delete la[e]}))}};["success","info","warning","error"].forEach((function(e){wa[e]=function(t){return wa.open(Ge(Ge({},t),{type:e}))}})),wa.warn=wa.warning,wa.useNotification=function(t,n){return function(){var r,o=null,i=s(An({add:function(e,t){null===o||void 0===o||o.component.add(e,t)}}),2),a=i[0],u=i[1];var c=e.useRef({});return c.current.open=function(e){var i=e.prefixCls,u=r("notification",i);t(Ge(Ge({},e),{prefixCls:u}),(function(t){var r=t.prefixCls,i=t.instance;o=i,a(n(e,r))}))},["success","info","warning","error"].forEach((function(e){c.current[e]=function(t){return c.current.open(Ge(Ge({},t),{type:e}))}})),[c.current,e.createElement(kr,{key:"holder"},(function(e){return r=e.getPrefixCls,u}))]}}(ya,xa);var Ea=wa;function Ca(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function _a(e){return!!e&&!!e[fu]}function ka(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===du}(e)||Array.isArray(e)||!!e[lu]||!!e.constructor[lu]||Ia(e)||Pa(e))}function Sa(e,t,n){void 0===n&&(n=!1),0===Oa(e)?(n?Object.keys:pu)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function Oa(e){var t=e[fu];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Ia(e)?2:Pa(e)?3:0}function Ta(e,t){return 2===Oa(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Aa(e,t){return 2===Oa(e)?e.get(t):e[t]}function Ra(e,t,n){var r=Oa(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function Na(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function Ia(e){return au&&e instanceof Map}function Pa(e){return uu&&e instanceof Set}function Da(e){return e.o||e.t}function Ma(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=hu(e);delete t[fu];for(var n=pu(t),r=0;r<n.length;r++){var o=n[r],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function Fa(e,t){return void 0===t&&(t=!1),ja(e)||_a(e)||!ka(e)||(Oa(e)>1&&(e.set=e.add=e.clear=e.delete=La),Object.freeze(e),t&&Sa(e,(function(e,t){return Fa(t,!0)}),!0)),e}function La(){Ca(2)}function ja(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Ba(e){var t=vu[e];return t||Ca(18,e),t}function Va(){return ou}function za(e,t){t&&(Ba("Patches"),e.u=[],e.s=[],e.v=t)}function Wa(e){Ua(e),e.p.forEach(Ga),e.p=null}function Ua(e){e===ou&&(ou=e.l)}function Ha(e){return ou={p:[],l:ou,h:e,m:!0,_:0}}function Ga(e){var t=e[fu];0===t.i||1===t.i?t.j():t.O=!0}function qa(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||Ba("ES5").S(t,e,r),r?(n[fu].P&&(Wa(t),Ca(4)),ka(e)&&(e=Ka(t,e),t.l||Xa(t,e)),t.u&&Ba("Patches").M(n[fu].t,e,t.u,t.s)):e=Ka(t,n,[]),Wa(t),t.u&&t.v(t.u,t.s),e!==cu?e:void 0}function Ka(e,t,n){if(ja(t))return t;var r=t[fu];if(!r)return Sa(t,(function(o,i){return $a(e,r,t,o,i,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Xa(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=Ma(r.k):r.o;Sa(3===r.i?new Set(o):o,(function(t,i){return $a(e,r,o,t,i,n)})),Xa(e,o,!1),n&&e.u&&Ba("Patches").R(r,n,e.u,e.s)}return r.o}function $a(e,t,n,r,o,i){if(_a(o)){var a=Ka(e,o,i&&t&&3!==t.i&&!Ta(t.D,r)?i.concat(r):void 0);if(Ra(n,r,a),!_a(a))return;e.m=!1}if(ka(o)&&!ja(o)){if(!e.h.F&&e._<1)return;Ka(e,o),t&&t.A.l||Xa(e,o)}}function Xa(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&Fa(t,n)}function Ya(e,t){var n=e[fu];return(n?Da(n):e)[t]}function Qa(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Za(e){e.P||(e.P=!0,e.l&&Za(e.l))}function Ja(e){e.o||(e.o=Ma(e.t))}function eu(e,t,n){var r=Ia(t)?Ba("MapSet").N(t,n):Pa(t)?Ba("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Va(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},o=r,i=mu;n&&(o=[r],i=gu);var a=Proxy.revocable(o,i),u=a.revoke,s=a.proxy;return r.k=s,r.j=u,s}(t,n):Ba("ES5").J(t,n);return(n?n.A:Va()).p.push(r),r}function tu(e){return _a(e)||Ca(22,e),function e(t){if(!ka(t))return t;var n,r=t[fu],o=Oa(t);if(r){if(!r.P&&(r.i<4||!Ba("ES5").K(r)))return r.t;r.I=!0,n=nu(t,o),r.I=!1}else n=nu(t,o);return Sa(n,(function(t,o){r&&Aa(r.t,t)===o||Ra(n,t,e(o))})),3===o?new Set(n):n}(e)}function nu(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Ma(e)}var ru,ou,iu="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),au="undefined"!=typeof Map,uu="undefined"!=typeof Set,su="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,cu=iu?Symbol.for("immer-nothing"):((ru={})["immer-nothing"]=!0,ru),lu=iu?Symbol.for("immer-draftable"):"__$immer_draftable",fu=iu?Symbol.for("immer-state"):"__$immer_state",du=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),pu="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,hu=Object.getOwnPropertyDescriptors||function(e){var t={};return pu(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},vu={},mu={get:function(e,t){if(t===fu)return e;var n=Da(e);if(!Ta(n,t))return function(e,t,n){var r,o=Qa(t,n);return o?"value"in o?o.value:null===(r=o.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!ka(r)?r:r===Ya(e.t,t)?(Ja(e),e.o[t]=eu(e.A.h,r,e)):r},has:function(e,t){return t in Da(e)},ownKeys:function(e){return Reflect.ownKeys(Da(e))},set:function(e,t,n){var r=Qa(Da(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var o=Ya(Da(e),t),i=null==o?void 0:o[fu];if(i&&i.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Na(n,o)&&(void 0!==n||Ta(e.t,t)))return!0;Ja(e),Za(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==Ya(e.t,t)||t in e.t?(e.D[t]=!1,Ja(e),Za(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Da(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){Ca(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ca(12)}},gu={};Sa(mu,(function(e,t){gu[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),gu.deleteProperty=function(e,t){return gu.set.call(this,e,t,void 0)},gu.set=function(e,t,n){return mu.set.call(this,e[0],t,n,e[0])};var yu=function(){function e(e){var t=this;this.g=su,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var o=n;n=e;var i=t;return function(e){var t=this;void 0===e&&(e=o);for(var r=arguments.length,a=Array(r>1?r-1:0),u=1;u<r;u++)a[u-1]=arguments[u];return i.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(a))}))}}var a;if("function"!=typeof n&&Ca(6),void 0!==r&&"function"!=typeof r&&Ca(7),ka(e)){var u=Ha(t),s=eu(t,e,void 0),c=!0;try{a=n(s),c=!1}finally{c?Wa(u):Ua(u)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return za(u,r),qa(e,u)}),(function(e){throw Wa(u),e})):(za(u,r),qa(a,u))}if(!e||"object"!=typeof e){if(void 0===(a=n(e))&&(a=e),a===cu&&(a=void 0),t.F&&Fa(a,!0),r){var l=[],f=[];Ba("Patches").M(e,a,l,f),r(l,f)}return a}Ca(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(o))}))};var r,o,i=t.produce(e,n,(function(e,t){r=e,o=t}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,r,o]})):[i,r,o]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){ka(e)||Ca(8),_a(e)&&(e=tu(e));var t=Ha(this),n=eu(this,e,void 0);return n[fu].C=!0,Ua(t),n},t.finishDraft=function(e,t){var n=(e&&e[fu]).A;return za(n,t),qa(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!su&&Ca(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var o=Ba("Patches").$;return _a(e)?o(e,t):this.produce(e,(function(e){return o(e,t)}))},e}(),bu=new yu,xu=bu.produce,wu=(bu.produceWithPatches.bind(bu),bu.setAutoFreeze.bind(bu),bu.setUseProxies.bind(bu),bu.applyPatches.bind(bu),bu.createDraft.bind(bu),bu.finishDraft.bind(bu),xu),Eu=(n(4304),n(2790)),Cu=n.n(Eu),_u=function(e,t){return(_u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function ku(e,t){function n(){this.constructor=e}_u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Su(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function u(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(a,u)}s((r=r.apply(e,t||[])).next())}))}function Ou(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var Tu=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags||(this.flags[e]=this.evaluateFlag(e)),this.flags[e]},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return Au(n,t[0],t[1]),t.join("=")})),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),r=n[0],o=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,o)}))}},e}();function Au(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function Ru(){return Nu}var Nu=null,Iu=new Map,Pu=new Map;function Du(e,t){var n=ju(e,t);return Iu.get(n)}function Mu(e){for(var t=Iu.entries(),n=[];;){var r=t.next(),o=r.done,i=r.value;if(o)break;var a=i[0],u=i[1];a.split("_")[0]===e&&n.push(u)}return n}function Fu(e){var t=e.kernelName,n=e.backendName,r=ju(t,n);if(Iu.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");Iu.set(r,e)}function Lu(e){var t=e.kernelName;Pu.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),Pu.set(t,e)}function ju(e,t){return t+"_"+e}function Bu(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function Vu(e,t,n){return Math.max(e,Math.min(t,n))}function zu(e){return e%2==0?e:e+1}function Wu(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function Uu(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function Hu(e,t,n){void 0===n&&(n=""),Uu($u(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))}function Gu(e){Uu(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function qu(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!1),null==t&&(t=[]),Array.isArray(e)||ss(e)&&!n)for(var r=0;r<e.length;++r)qu(e[r],t,n);else t.push(e);return t}function Ku(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function $u(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Xu(e){return e%1==0}function Yu(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function Qu(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function Zu(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function Ju(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise((function(r,o){var i=0;!function a(){if(e())r();else{i++;var u=t(i);null!=n&&i>=n?o():setTimeout(a,u)}}()}))}function es(e,t){for(var n=1,r=-1,o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(-1===e[o]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(e[o]<0)throw Error("Shapes can not be < 0. Found "+e[o]+" at dim "+o);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var i=e.slice();return i[r]=t/n,i}function ts(e,t){var n=t.length;return Uu((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e})),Uu(e.every((function(e){return Xu(e)})),(function(){return"All values in axis param must be integers but got axis "+e})),e.map((function(e){return e<0?n+e:e}))}function ns(e,t){for(var n=[],r=[],o=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||o?null:ts(t,e).sort(),a=0,u=0;u<e.length;++u){if(null!=i){if(i[a]===u&&1!==e[u])throw new Error("Can't squeeze axis "+u+" since its dim '"+e[u]+"' is not 1");(null==i[a]||i[a]>u)&&1===e[u]&&(n.push(e[u]),r.push(u)),i[a]<=u&&a++}1!==e[u]&&(n.push(e[u]),r.push(u))}return{newShape:n,keptDims:r}}function rs(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function os(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function is(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function as(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function us(e,t){return"complex64"!==t&&("float32"!==t||"complex64"===e)&&("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)}function ss(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function cs(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function ls(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function fs(e){return"string"==typeof e||e instanceof String}function ds(e){return"boolean"==typeof e}function ps(e){return"number"==typeof e}function hs(e){return Array.isArray(e)?hs(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":ps(e)?"float32":fs(e)?"string":ds(e)?"bool":"float32"}function vs(e){return!!(e&&e.constructor&&e.call&&e.apply)}function ms(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function gs(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function ys(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=qu(e)),n&&is(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),o=0;o<r.length;++o)0!==Math.round(e[o])&&(r[o]=1);return r}throw new Error("Unknown data type "+t)}function bs(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function e(t,n,r){var o=new Array;if(1===n.length)for(var i=n[0],a=0;a<i;a++)o[a]=r[t+a];else{i=n[0];var u=n.slice(1),s=u.reduce((function(e,t){return e*t}));for(a=0;a<i;a++)o[a]=e(t+a*s,u,r)}return o}(0,e,t)}function xs(e,t){for(var n=ws(e,t),r=0;r<n.length;r++)n[r]=1;return n}function ws(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function Es(){return Ru().platform.now()}function Cs(e){e.forEach((function(t){Uu(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."}))}))}function _s(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",Ru().platform.encode(e,t)}function ks(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",Ru().platform.decode(e,t)}function Ss(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],o=0;o<e.length-1;++o)r+=n[o]*e[o];return r}function Os(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),o=0;o<r.length-1;++o)r[o]=Math.floor(e/n[o]),e-=r[o]*n[o];return r[r.length-1]=e,r}Object.freeze({shuffle:Bu,clamp:Vu,nearestLargerEven:zu,sum:Wu,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var o=Number(e[r])-Number(t[r]);n+=o*o}return n},assert:Uu,assertShapesMatch:Hu,assertNonNull:Gu,flatten:qu,sizeFromShape:Ku,isScalarShape:function(e){return 0===e.length},arraysEqual:$u,isInt:Xu,tanh:Yu,sizeToSquarishShape:Qu,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return Bu(t),t},rightPad:Zu,repeatedTry:Ju,inferFromImplicitShape:es,parseAxisParam:ts,squeezeShape:ns,getTypedArrayFromDType:rs,getArrayFromDType:os,checkConversionForErrors:is,isValidDtype:as,hasEncodingLoss:us,isTypedArray:ss,bytesPerElement:cs,bytesFromStringArray:ls,isString:fs,isBoolean:ds,isNumber:ps,inferDtype:hs,isFunction:vs,nearestDivisor:ms,computeStrides:gs,toTypedArray:ys,toNestedArray:bs,makeOnesTypedArray:xs,makeZerosTypedArray:ws,now:Es,assertNonNegativeIntegerDimensions:Cs,fetch:function(e,t){return Ru().platform.fetch(e,t)},encodeString:_s,decodeString:ks,locToIndex:Ss,indexToLoc:Os});var Ts=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new As)}return e.prototype.profileKernel=function(e,t,n){var r,o=this,i=this.backendTimer.time((function(){r=n()}));return r.forEach((function(n){n.data().then((function(r){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var o=e[r];if(isNaN(o)||!isFinite(o))return console.warn("Found "+o+" in the result of '"+n+"'"),!0}}(r,n.dtype,e),i.then((function(i){var a="";null!=i.getExtraProfileInfo&&(a=i.getExtraProfileInfo()),o.logger.logKernelProfile(e,n,r,i.kernelMs,t,a)}))}))})),r},e}(),As=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,o,i){var a="number"==typeof r?Zu(r+"ms",9):r.error,u=Zu(e,25),s=t.rank,c=t.size,l=Zu(t.shape.toString(),14),f="";for(var d in o){var p=o[d].shape||t.shape,h=p.length;f+=d+": "+h+"D "+(h>0?p:"")+" "}console.log("%c"+u+"\t%c"+a+"\t%c"+s+"D "+l+"\t%c"+c+"\t%c"+f+"\t%c"+i,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}();function Rs(e,t,n){return Zu(Array.isArray(e)?parseFloat(e[0].toFixed(7))+" + "+parseFloat(e[1].toFixed(7))+"j":fs(e)?"'"+e+"'":"bool"===n?Ns(e):parseFloat(e.toFixed(7)).toString(),t)}function Ns(e){return 0===e?"false":"true"}function Is(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var Ps=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=Ku(e),null!=n){var o=n.length;Uu(o===this.size,(function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+r.size+"'."}))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||os(t,this.size),this.strides=gs(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),Uu(n.length===this.rank,(function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"}));var o=this.locToIndex(n);this.values[o]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=0,r=0,o=e;r<o.length;r++){var i=o[r];if(i<0||i>=this.shape[n]){var a="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(a)}n++}for(var u=e[e.length-1],s=0;s<e.length-1;++s)u+=this.strides[s]*e[s];return this.values[u]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Ds().makeTensor(this.values,this.shape,this.dtype)},e}(),Ds=null,Ms=null,Fs=null,Ls=function(){function e(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Ku(e),this.strides=gs(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),Uu(1===this.size,(function(){return"The array must have only 1 element."})),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,o){return this.throwIfDisposed(),this.reshape([e,t,n,r,o])},e.prototype.asType=function(e){return this.throwIfDisposed(),Ms.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return Su(this,void 0,void 0,(function(){var e;return Ou(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,Ms.buffer(this.shape,this.dtype,e)]}}))}))},e.prototype.bufferSync=function(){return Ms.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Su(this,void 0,void 0,(function(){var e;return Ou(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,bs(this.shape,e)]}}))}))},e.prototype.arraySync=function(){return bs(this.shape,this.dataSync())},e.prototype.data=function(){return Su(this,void 0,void 0,(function(){var e,t;return Ou(this,(function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=Ds().read(this.dataId),"string"!==this.dtype?[3,2]:[4,e];case 1:t=n.sent();try{return[2,t.map((function(e){return ks(e)}))]}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,e]}}))}))},e.prototype.dataSync=function(){this.throwIfDisposed();var e=Ds().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return ks(e)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},e.prototype.bytes=function(){return Su(this,void 0,void 0,(function(){var e;return Ou(this,(function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,Ds().read(this.dataId)];case 1:return e=t.sent(),"string"===this.dtype?[2,e]:[2,new Uint8Array(e.buffer)]}}))}))},e.prototype.dispose=function(){this.isDisposed||(Ds().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),Ms.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),Ms.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),Ms.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),Ms.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),Ms.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),Ms.clone(this)},e.prototype.oneHot=function(e,t,n){return this.throwIfDisposed(),Ms.oneHot(this,e,t,n)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var o=gs(t),i=function(e,t,n,r){var o=Ku(t),i=r[r.length-1],a=new Array(i).fill(0),u=t.length,s="complex64"===n?Is(e):e;if(u>1)for(var c=0;c<o/i;c++)for(var l=c*i,f=0;f<i;f++)a[f]=Math.max(a[f],Rs(s[l+f],0,n).length);return a}(e,t,n,o),a=t.length,u=function e(t,n,r,o,i,a){void 0===a&&(a=!0);var u="complex64"===r?2:1,s=n[0],c=n.length;if(0===c)return"complex64"===r?[Rs(Is(t)[0],0,r)]:"bool"===r?[Ns(t[0])]:[t[0].toString()];if(1===c){if(s>20){var l=3*u,f=Array.from(t.slice(0,l)),d=Array.from(t.slice((s-3)*u,s*u));return"complex64"===r&&(f=Is(f),d=Is(d)),["["+f.map((function(e,t){return Rs(e,i[t],r)})).join(", ")+", ..., "+d.map((function(e,t){return Rs(e,i[s-3+t],r)})).join(", ")+"]"]}return["["+("complex64"===r?Is(t):Array.from(t)).map((function(e,t){return Rs(e,i[t],r)})).join(", ")+"]"]}var p=n.slice(1),h=o.slice(1),v=o[0]*u,m=[];if(s>20){for(var g=0;g<3;g++){var y=(b=g*v)+v;m.push.apply(m,e(t.slice(b,y),p,r,h,i,!1))}for(m.push("..."),g=s-3;g<s;g++)y=(b=g*v)+v,m.push.apply(m,e(t.slice(b,y),p,r,h,i,g===s-1))}else for(g=0;g<s;g++){var b;y=(b=g*v)+v,m.push.apply(m,e(t.slice(b,y),p,r,h,i,g===s-1))}var x=2===c?",":"";for(m[0]="["+m[0]+x,g=1;g<m.length-1;g++)m[g]=" "+m[g]+x;var w=",\n";for(g=2;g<c;g++)w+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(a?"":w),m}(e,t,n,o,i),s=["Tensor"];return r&&(s.push("  dtype: "+n),s.push("  rank: "+a),s.push("  shape: ["+t+"]"),s.push("  values:")),s.push(u.map((function(e){return"    "+e})).join("\n")),s.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),Ms.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),Ms.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),Ms.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),Ms.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),Ms.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),Ms.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),Ms.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),Ms.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),Ms.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),Ms.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),Ms.unstack(this,e)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),Ms.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,o){return void 0===n&&(n=.001),Fs("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,o,r,n)},e.prototype.batchNorm=function(e,t,n,r,o){return void 0===o&&(o=.001),this.throwIfDisposed(),Ms.batchNorm(this,e,t,n,r,o)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ms.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ms.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ms.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ms.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ms.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ms.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ms.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),Ms.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),Ms.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),Ms.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),Ms.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),Ms.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),Ms.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),Ms.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),Ms.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),Ms.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),Ms.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),Ms.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),Ms.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),Ms.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),Ms.div(this,e)},e.prototype.divNoNan=function(e){return this.throwIfDisposed(),Ms.divNoNan(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),Ms.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),Ms.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),Ms.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),Ms.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),Ms.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),Ms.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),Ms.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),Ms.modStrict(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),Ms.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),Ms.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),Ms.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),Ms.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),Ms.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),Ms.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),Ms.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),Ms.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),Ms.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),Ms.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),Ms.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),Ms.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),Ms.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),Ms.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),Ms.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),Ms.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),Ms.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),Ms.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),Ms.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),Ms.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),Ms.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),Ms.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),Ms.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),Ms.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),Ms.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),Ms.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),Ms.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),Ms.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),Ms.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),Ms.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),Ms.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),Ms.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),Ms.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),Ms.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),Ms.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),Ms.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),Ms.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),Ms.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),Ms.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),Ms.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),Ms.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),Ms.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),Ms.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),Ms.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),Ms.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),Ms.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),Ms.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),Ms.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),Ms.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),Ms.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),Ms.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),Ms.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),Ms.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),Ms.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),Ms.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),Ms.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),Ms.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),Ms.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),Ms.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),Ms.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),Ms.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),Ms.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),Ms.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),Ms.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),Ms.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),Ms.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,o,i){return void 0===r&&(r="NWC"),void 0===o&&(o=1),this.throwIfDisposed(),Ms.conv1d(this,e,t,n,r,o,i)},e.prototype.conv2d=function(e,t,n,r,o,i){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),Ms.conv2d(this,e,t,n,r,o,i)},e.prototype.conv2dTranspose=function(e,t,n,r,o){return this.throwIfDisposed(),Ms.conv2dTranspose(this,e,t,n,r,o)},e.prototype.depthwiseConv2D=function(e,t,n,r,o,i){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),Ms.depthwiseConv2d(this,e,t,n,r,o,i)},e.prototype.separableConv2d=function(e,t,n,r,o,i){return void 0===o&&(o=[1,1]),void 0===i&&(i="NHWC"),this.throwIfDisposed(),Ms.separableConv2d(this,e,t,n,r,o,i)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Ms.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Ms.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),Ms.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,o){return this.throwIfDisposed(),Ms.pool(this,e,t,n,r,o)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),Ds().makeVariable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Ms.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Ms.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),Ms.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),Ms.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,o,i,a,u){return void 0===r&&(r=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===u&&(u=0),this.throwIfDisposed(),Ms.stridedSlice(this,e,t,n,r,o,i,a,u)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),Ms.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),Ms.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),Ms.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),Ms.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),Ms.spectral.irfft(this)},e}();Object.defineProperty(Ls,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}});var js,Bs,Vs,zs,Ws,Us=function(e){function t(t,n,r,o){var i=e.call(this,t.shape,t.dtype,t.dataId,o)||this;return i.trainable=n,i.name=r,i}return ku(t,e),t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!$u(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");Ds().disposeTensor(this),this.dataId=e.dataId,Ds().incRef(this,null)},t.prototype.dispose=function(){Ds().disposeVariable(this),this.isDisposedInternal=!0},t}(Ls);Object.defineProperty(Us,Symbol.hasInstance,{value:function(e){return e instanceof Ls&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(js||(js={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(Bs||(Bs={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(Vs||(Vs={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(zs||(zs={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Ws||(Ws={}));var Hs={float32:zs,int32:Bs,bool:Vs,complex64:Ws};function Gs(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast "+e+" with "+t)}return Hs[e][t]}function qs(e){return Gs(e,"int32")}function Ks(e,t){if(e.dtype===t.dtype)return[e,t];var n=Gs(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function $s(e,t){Uu(e.dtype===t.dtype,(function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"}))}function Xs(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof Ls)n.push(t);else if(o=t,Array.isArray(o)||"object"==typeof o){var o,i=t;for(var a in i){var u=i[a];r.has(u)||(r.add(u),e(u,n,r))}}}(e,t,new Set),t}Object.freeze({makeTypesMatch:Ks,assertTypesMatch:$s,isTensorInList:function(e,t){return t.some((function(t){return t.id===e.id}))},getTensorsInContainer:Xs});var Ys,Qs=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),Zs=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Qs}return e.prototype.ready=function(){return Su(this,void 0,void 0,(function(){var e,t,n;return Ou(this,(function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then((function(){}))];if(null!=this.backendInstance)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return Su(this,void 0,void 0,(function(){var t,n,r;return Ou(this,(function(o){switch(o.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2]);case 1:return r=o.sent(),[3,3];case 2:r=n,o.label=3;case 3:if(!r)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Ts(this.backendInstance),[2,!0]}}))}))},e.prototype.setupRegisteredKernels=function(){var e=this;Mu(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))},e.prototype.disposeRegisteredKernels=function(e){var t=this;Mu(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))},e.prototype.initializeBackend=function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var o=++this.pendingBackendInitId,i=r.then((function(n){return!(o<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return!(o<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),!1)}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),o=r.success,i=r.asyncInit;if(i||o)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,o=this.readSync(t);r.disposeData(t),n.backend=e,e.move(t,o,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(e,t){var n,r=this,o=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=e}return this.scopedRun((function(){return r.startScope(o)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){return e.toFloat()}}}),[]),t},e.prototype.runKernel=function(e,t,n,r,o){return this.runKernelFunc(null,t,null,e,n,r,o)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(e,t,n){var r=this.backend.numDataIds(),o=0;n.forEach((function(e){o+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=r-t-o-i;if(a>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+a+" data ids) after running '"+e+"'")},e.prototype.runKernelFunc=function(e,t,n,r,o,i,a){var u,s=this;void 0===i&&(i=[]),void 0===a&&(a=[]);var c=[],l=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var f,d=function(e){l&&(c=e.map((function(e){return s.keep(s.clone(e))})))},p=this.state.numBytes,h=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var v,m=Du(r,this.backendName);return f=null!=m?function(){var e=s.backend.numDataIds();v=m.kernelFunc({inputs:t,attrs:o,backend:s.backend});var n=Array.isArray(v)?v:[v];s.shouldCheckForMemLeaks()&&s.checkKernelForMemLeak(r,e,n);var u=n.map((function(e){var t=e.dataId,n=e.shape,r=e.dtype;return s.makeTensorFromDataId(t,n,r)})),c=u.filter((function(e,t){return a[t]}));return d((i||[]).slice().concat(c)),u}:function(){var t=s.backend.numDataIds();v=s.tidy((function(){return e(s.backend,d)}));var n=Array.isArray(v)?v:[v];return s.shouldCheckForMemLeaks()&&s.checkKernelForMemLeak(r,t,n),n},this.scopedRun((function(){return s.state.kernelDepth++}),(function(){return s.state.kernelDepth--}),(function(){u=s.ENV.getBool("DEBUG")?s.profiler.profileKernel(r,t,(function(){return f()})):f()})),l&&this.addTapeNode(r,t,u,n,c),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-p,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-h,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map((function(e){return t[e].shape})),outputShapes:u.map((function(e){return e.shape}))}),Array.isArray(v)?u:u[0]},e.prototype.makeTensor=function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var o=e;"string"===n&&fs(e[0])&&(o=e.map((function(e){return _s(e)})));var i=r.write(o,t,n),a=new Ls(t,n,i,this.nextTensorId());if(this.incRef(a,r),"string"===n){var u=this.state.tensorInfo.get(i),s=ls(o);this.state.numBytes+=s-u.bytes,u.bytes=s}return a},e.prototype.makeTensorFromDataId=function(e,t,n,r){var o=new Ls(t,n=n||"float32",e,this.nextTensorId());return this.incRef(o,r),o},e.prototype.makeVariable=function(e,t,n,r){void 0===t&&(t=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.asType(r));var o=new Us(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},e.prototype.incRef=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*cs(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof Us||this.track(e)},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return Su(this,void 0,void 0,(function(){var t,n;return Ou(this,(function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]}))}))},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n,r,o){var i=this,a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:o},u=function(e){return Pu.get(e)}(e);null!=u&&(r=u.gradFunc),null!=r&&(a.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],o=ws(r.size,r.dtype);return i.makeTensor(o,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],o)}),this.state.activeTape.push(a)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=Xs(e),r=new Set(n.map((function(e){return e.id}))),o=0;o<this.state.activeScope.track.length;o++){var i=this.state.activeScope.track[o];i.kept||r.has(i.id)||i.dispose()}var a=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==a.id||t.track(e)}))},e.prototype.gradients=function(e,t,n,r){var o=this;if(void 0===r&&(r=!1),Uu(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var i=this.scopedRun((function(){return o.startTape()}),(function(){return o.endTape()}),(function(){return o.tidy("forward",e)}));Uu(i instanceof Ls,(function(){return"The result y returned by f() must be a tensor."}));var a=function(e,t,n){for(var r={},o={},i=0;i<t.length;i++)r[t[i].id]=!0;for(i=0;i<e.length;i++){var a=(h=e[i]).inputs;for(var u in a){for(var s=a[u],c=!1,l=0;l<t.length;l++)if(r[s.id]){h.outputs.forEach((function(e){return r[e.id]=!0})),c=!0,o[h.id]=!0;break}if(c)break}}var f={};f[n.id]=!0;var d={};for(i=e.length-1;i>=0;i--)for(a=(h=e[i]).inputs,l=0;l<h.outputs.length;l++)if(f[h.outputs[l].id]){for(var u in a)f[a[u].id]=!0,d[h.id]=!0;break}var p=[];for(i=0;i<e.length;i++){var h;if(o[(h=e[i]).id]&&d[h.id]){var v={};for(var u in h.inputs){var m=h.inputs[u];r[m.id]&&(v[u]=m)}var g=Object.assign({},h);g.inputs=v,g.outputs=h.outputs,p.push(g)}}return p}(this.state.activeTape,t,i);if(!r&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e,r,u={};u[i.id]=null==n?(r=xs(Ku(e=i.shape),"float32"),Js.makeTensor(r,e,"float32")):n,function(e,t,n){for(var r=function(r){var o=t[r],i=[];if(o.outputs.forEach((function(t){var n=e[t.id];null!=n?i.push(n):i.push(null)})),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+o.kernelName+".");var a=o.gradient(i),u=function(t){if(!(t in a))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(a)+".");var r=n((function(){return a[t]()}));if("float32"!==r.dtype)throw new Error("Error in gradient for op "+o.kernelName+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'");var i=o.inputs[t];if(!$u(r.shape,i.shape))throw new Error("Error in gradient for op "+o.kernelName+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+i.shape+"'");if(null==e[i.id])e[i.id]=r;else{var u=e[i.id];e[i.id]=u.add(r),u.dispose()}};for(var s in o.inputs)u(s)},o=t.length-1;o>=0;o--)r(o)}(u,a,(function(e){return o.tidy(e)}));var s=t.map((function(e){return u[e.id]}));return 0===o.state.gradientDepth&&(o.state.activeTape.forEach((function(e){for(var t=0,n=e.saved;t<n.length;t++)n[t].dispose()})),o.state.activeTape=null),{value:i,grads:s}}))},e.prototype.customGrad=function(e){var t=this;return Uu(vs(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];Uu(r.every((function(e){return e instanceof Ls})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var i={};return r.forEach((function(e,t){i[t]=e})),t.runKernelFunc((function(t,o){return Uu((n=e.apply(void 0,r.concat([o]))).value instanceof Ls,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),Uu(vs(n.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),n.value}),i,(function(e,t){var o=n.gradFunc(e,t),i=Array.isArray(o)?o:[o];Uu(i.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),Uu(i.every((function(e){return e instanceof Ls})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var a={};return i.forEach((function(e,t){a[t]=function(){return e}})),a}))}},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.time=function(e){return Su(this,void 0,void 0,(function(){var t,n;return Ou(this,(function(r){switch(r.label){case 0:return t=Es(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=Es()-t,[2,n]}}))}))},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Qs,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),Js=function(){var e=function(){if(null==Ys){var e=void 0;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}Ys=e}return Ys}();if(null==e._tfengine){var t=new Tu(e);e._tfengine=new Zs(t)}return function(e){Nu=e}(e._tfengine.ENV),Ds=function(){return e._tfengine},e._tfengine}();function ec(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var tc=Ru();tc.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),tc.registerFlag("IS_BROWSER",(function(){return ec()})),tc.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),tc.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),tc.registerFlag("PROD",(function(){return!1})),tc.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return tc.getBool("DEBUG")})),tc.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),tc.registerFlag("IS_TEST",(function(){return!1}));var nc,rc,oc,ic={},ac={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function uc(e,t){ic[e]=t}function sc(e){e in ic||(ic[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete ic[e]}),!1),1===e?t.getContext("webgl",ac)||t.getContext("experimental-webgl",ac):t.getContext("webgl2",ac)}(e));var t=ic[e];return t.isContextLost()?(delete ic[e],sc(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),ic[e])}function cc(e,t){return[t,e]}function lc(e){var t=Ku(e);return Qu(Math.ceil(t/4))}function fc(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function dc(e,t){var n,r,o,i,a,u,s,c,l,f=e;return 2===Ru().getNumber("WEBGL_VERSION")?(n=f.R32F,r=f.R16F,o=f.RGBA16F,i=f.RGBA32F,a=f.RED,u=4,s=1,c=f.HALF_FLOAT,l=f.FLOAT):(n=e.RGBA,r=e.RGBA,o=e.RGBA,i=f.RGBA,a=e.RGBA,u=4,s=4,c=null!=t?t.HALF_FLOAT_OES:null,l=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:u,defaultNumChannels:s,textureTypeHalfFloat:c,textureTypeFloat:l}}function pc(e,t,n){var r=n();return t&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+vc(e,t))}(e),r}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(nc||(nc={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(rc||(rc={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(oc||(oc={}));function hc(e){return!!(Ru().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function vc(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function mc(e,t,n){return Bc(e,t,(function(){return e.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function gc(e,t,n){var r=Bc(e,t,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(pc(e,t,(function(){return e.shaderSource(r,n)})),pc(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function yc(e,t,n){var r=Bc(e,t,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(pc(e,t,(function(){return e.shaderSource(r,n)})),pc(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=wc.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],o=e.split("\n"),i=o.length.toString().length+2,a=o.map((function(e,t){return Zu((t+1).toString(),i)+e})),u=0,s=0;s<a.length;s++)u=Math.max(a[s].length,u);var c=a.slice(0,r-1),l=a.slice(r-1,r),f=a.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+Zu(l[0],u),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var bc,xc,wc=/ERROR: [0-9]+:([0-9]+):/g;function Ec(e,t){return Bc(e,t,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function Cc(e,t,n){if(pc(e,t,(function(){return e.linkProgram(n)})),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function _c(e,t,n){if(pc(e,t,(function(){return e.validateProgram(n)})),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function kc(e,t,n){var r=Bc(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return pc(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),pc(e,t,(function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function Sc(e,t,n){var r=Bc(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return pc(e,t,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)})),pc(e,t,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function Oc(e,t){return Bc(e,t,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function Tc(e,t){var n=Ru().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function Ac(e,t){return Bc(e,t,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function Rc(e,t,n,r,o,i,a,u){var s=e.getAttribLocation(n,r);return-1!==s&&(pc(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,o)})),pc(e,t,(function(){return e.vertexAttribPointer(s,i,e.FLOAT,!1,a,u)})),pc(e,t,(function(){return e.enableVertexAttribArray(s)})),!0)}function Nc(e,t,n,r){Vc(e,r),pc(e,t,(function(){return e.activeTexture(e.TEXTURE0+r)})),pc(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)}))}function Ic(e,t,n,r){return Bc(e,t,(function(){return e.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function Pc(e,t,n){return e.getUniformLocation(t,n)}function Dc(e,t,n,r,o,i){pc(e,t,(function(){return Nc(e,t,r,i)})),pc(e,t,(function(){return e.uniform1i(o,i)}))}function Mc(e,t,n,r){pc(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)})),pc(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}))}function Fc(e,t,n){pc(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),pc(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Lc(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+jc(e,t))}function jc(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function Bc(e,t,n,r){var o=pc(e,t,(function(){return n()}));if(null==o)throw new Error(r);return o}function Vc(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function zc(e,t){return void 0===t&&(t=2),Ku(e.slice(0,e.length-t))}function Wc(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Uc(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[zc(e)].concat(Wc(e))),t}function Hc(e,t){var n;void 0===t&&(t=!1);var r=Ru().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?zu(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var o=ns(e);e=o.newShape}var i=Ku(e);if(e.length<=1&&i<=r)return[1,i];if(2===e.length&&e[0]<=r&&e[1]<=r)return e;if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var a=zc(e),u=2,s=2;return e.length&&(u=(n=Wc(e))[0],s=n[1]),Qu(i=a*(u/2)*(s/2)).map((function(e){return 2*e}))}return Qu(i)}function Gc(e){return e%2==0}function qc(e,t){if($u(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(Gc(n)&&Gc(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Gc(e[0])&&Gc(t[0])}function Kc(e){if(null==bc){var t=sc(e);bc=t.getParameter(t.MAX_TEXTURE_SIZE)}return bc}function $c(e){if(null==xc){var t=sc(e);xc=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,xc)}function Xc(e){if(0===e)return 0;var t=sc(e);return Yc(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Yc(t,"EXT_disjoint_timer_query")?1:0}function Yc(e,t){return null!=e.getExtension(t)}function Qc(e){try{if(null!=sc(e))return!0}catch(e){return!1}return!1}function Zc(e){if(0===e)return!1;var t=sc(e);if(1===e){if(!Yc(t,"OES_texture_float"))return!1}else if(!Yc(t,"EXT_color_buffer_float"))return!1;return el(t)}function Jc(e){if(0===e)return!1;var t=sc(e);if(1!==e){if(Yc(t,"EXT_color_buffer_float"))return el(t);if(Yc(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(e,t){var n=dc(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),i}(t,n)}return!1}return!!Yc(t,"OES_texture_float")&&!!Yc(t,"WEBGL_color_buffer_float")&&el(t)}function el(e){var t=dc(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),o}function tl(e){return 2===e&&null!=sc(e).fenceSync}var nl=Object.freeze({callAndCheck:pc,canBeRepresented:hc,getWebGLErrorMessage:vc,getExtensionOrThrow:mc,createVertexShader:gc,createFragmentShader:yc,createProgram:Ec,linkProgram:Cc,validateProgram:_c,createStaticVertexBuffer:kc,createStaticIndexBuffer:Sc,getNumChannels:function(){return 2===Ru().getNumber("WEBGL_VERSION")?1:4},createTexture:Oc,validateTextureSize:Tc,createFramebuffer:Ac,bindVertexBufferToProgramAttribute:Rc,bindTextureUnit:Nc,unbindTextureUnit:function(e,t,n){Vc(e,n),pc(e,t,(function(){return e.activeTexture(e.TEXTURE0+n)})),pc(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))},getProgramUniformLocationOrThrow:Ic,getProgramUniformLocation:Pc,bindTextureToProgramUniformSampler:Dc,bindCanvasToFramebuffer:function(e,t){pc(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),pc(e,t,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),pc(e,t,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))},bindColorTextureToFramebuffer:Mc,unbindColorTextureFromFramebuffer:Fc,validateFramebuffer:Lc,getFramebufferErrorMessage:jc,getBatchDim:zc,getRowsCols:Wc,getShapeAs3D:Uc,getTextureShapeFromLogicalShape:Hc,isReshapeFree:qc,getWebGLMaxTextureSize:Kc,resetMaxTextureSize:function(){bc=null},resetMaxTexturesInShader:function(){xc=null},getMaxTexturesInShader:$c,getWebGLDisjointQueryTimerVersion:Xc,hasExtension:Yc,isWebGLVersionEnabled:Qc,isCapableOfRenderingToFloatTexture:Zc,isDownloadFloatTextureEnabled:Jc,isWebGLFenceEnabled:tl}),rl=Ru();function ol(e){Ru().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function il(e,t){return Js.tidy(e,t)}function al(e){Xs(e).forEach((function(e){return e.dispose()}))}function ul(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Ru().getBool("IS_TEST")||console.warn.apply(console,e)}function sl(e,t){var n=e;if(ss(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||ss(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Ru().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||ss(t)){Uu(n.length>0,(function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"})),Uu(t.length===n[0],(function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"}));for(var o=n.slice(1),i=0;i<t.length;++i)e(t[i],o,r.concat(i))}else Uu(0===n.length,(function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"}))}(e,r,[]),r}function cl(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function ll(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof Ls)return cl(r,e.dtype,t,n),e;var o=hs(e);if("string"!==o&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),cl(r,o,t,n),null==e||!ss(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+i+"'")}var a=sl(e,o);ss(e)||Array.isArray(e)||(e=[e]);var u="string"!==o?ys(e,o,Ru().getBool("DEBUG")):qu(e,[],!0);return Js.makeTensor(u,a,o)}function fl(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map((function(e,r){return ll(e,t+"["+r+"]",n)}),r)}function dl(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function pl(e,t,n){for(var r=e.length+t.length,o=[],i=0,a=0,u=0;u<r;u++)-1===n.indexOf(u)?o.push(e[i++]):o.push(t[a++]);return o}function hl(e,t){for(var n=[],r=e.length,o=0;o<r;o++)-1===t.indexOf(o)&&n.push(e[o]);return[n,t.map((function(t){return e[t]}))]}function vl(e,t){return pl(e,t.map((function(e){return 1})),t)}function ml(e,t,n){Uu(dl(t,n),(function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."}))}function gl(e,t){if(dl(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function yl(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function bl(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function xl(e,t){var n=e[0].length;e.forEach((function(e,t){Uu(e.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"}))})),Uu(t>=0&&t<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=e[0];e.forEach((function(e,o){for(var i=0;i<n;i++)Uu(i===t||e[i]===r[i],(function(){return"Error in concat"+n+"D: Shape of tensors["+o+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."}))}))}function wl(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function El(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Js.startScope(n);try{var o=r.apply(void 0,e);return o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Js.endScope(o),o}catch(e){throw Js.endScope(null),e}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}rl.registerFlag("HAS_WEBGL",(function(){return rl.getNumber("WEBGL_VERSION")>0})),rl.registerFlag("WEBGL_VERSION",(function(){return Qc(2)?2:Qc(1)?1:0})),rl.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===rl.get("WEBGL_VERSION")})),rl.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),rl.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),rl.registerFlag("WEBGL_PACK",(function(){return rl.getBool("HAS_WEBGL")})),rl.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return rl.getBool("WEBGL_PACK")})),rl.registerFlag("WEBGL_PACK_CLIP",(function(){return rl.getBool("WEBGL_PACK")})),rl.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),rl.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return rl.getBool("WEBGL_PACK")})),rl.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return rl.getBool("WEBGL_PACK")})),rl.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return rl.getBool("WEBGL_PACK")})),rl.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return rl.getBool("WEBGL_PACK")})),rl.registerFlag("WEBGL_PACK_REDUCE",(function(){return rl.getBool("WEBGL_PACK")})),rl.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return rl.getBool("WEBGL_PACK")})),rl.registerFlag("WEBGL_CONV_IM2COL",(function(){return rl.getBool("WEBGL_PACK")})),rl.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return Kc(rl.getNumber("WEBGL_VERSION"))})),rl.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return $c(rl.getNumber("WEBGL_VERSION"))})),rl.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=rl.getNumber("WEBGL_VERSION");return 0===e?0:Xc(e)})),rl.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return rl.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e})),rl.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return Zc(rl.getNumber("WEBGL_VERSION"))})),rl.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!rl.getBool("WEBGL_FORCE_F16_TEXTURES")&&rl.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),rl.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return Jc(rl.getNumber("WEBGL_VERSION"))})),rl.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return tl(rl.getNumber("WEBGL_VERSION"))})),rl.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return rl.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Fs=ol;var Cl=El({complex_:function(e,t){var n=ll(e,"real","complex"),r=ll(t,"imag","complex");return Hu(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),Js.runKernelFunc((function(e){return e.complex(n,r)}),{$real:n,$imag:r})}}),_l=El({real_:function(e){var t=ll(e,"input","real");return Js.runKernelFunc((function(e){return e.real(t)}),{$input:t})}}),kl=El({imag_:function(e){var t=ll(e,"input","imag");return Js.runKernelFunc((function(e){return e.imag(t)}),{$input:t})}});function Sl(e,t,n){return Ol(e,t,sl(e,n),n)}function Ol(e,t,n,r){if(null==r&&(r=hs(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!ss(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Cs(t);var o=Ku(t),i=Ku(n);Uu(o===i,(function(){return"Based on the provided shape, ["+t+"], the tensor should have "+o+" values but has "+i}));for(var a=0;a<n.length;++a){var u=n[a],s=a!==n.length-1||u!==Ku(t.slice(a));Uu(n[a]===t[a]||!s,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "}))}}return ss(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?ys(e,r,Ru().getBool("DEBUG")):qu(e,[],!0),Js.makeTensor(e,t,r)}function Tl(e,t){if((ss(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&ss(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Ol(e,[],[],t)}function Al(e,t){Gu(e);var n=sl(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Ol(e,null,n,t)}function Rl(e,t,n){if(Gu(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=sl(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Ol(e,t,r,n)}function Nl(e,t,n){if(Gu(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=sl(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Ol(e,t,r,n)}function Il(e,t,n){if(Gu(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=sl(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Ol(e,t,r,n)}function Pl(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Pl(e,"float32"),r=Dl(e,"float32");return Cl(n,r)}var o=xs(Ku(e),t);return Js.makeTensor(o,e,t)}function Dl(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Dl(e,"float32"),r=Dl(e,"float32");return Cl(n,r)}var o=ws(Ku(e),t);return Js.makeTensor(o,e,t)}function Ml(e,t,n){return Js.runKernelFunc((function(r){return r.fill(e,t,n)}),{})}function Fl(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return Dl([0],r);var o=ws(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),o[0]=e;for(var i=1;i<o.length;i++)o[i]=o[i-1]+n;return Al(o,r)}var Ll=El({onesLike_:function(e){var t=ll(e,"x","onesLike");if("complex64"===t.dtype){var n=Ll(_l(t)),r=jl(kl(t));return Cl(n,r)}return Js.runKernelFunc((function(e){return e.onesLike(t)}),{$x:t},(function(e,t){return{$x:function(){return jl(e)}}}))}}),jl=El({zerosLike_:function(e){var t=ll(e,"x","zerosLike");return Js.runKernelFunc((function(e){return e.zerosLike(t)}),{$x:t},(function(e,t){return{$x:function(){return jl(e)}}}))}}),Bl=El({concat_:function(e,t){void 0===t&&(t=0),Uu(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=fl(e,"tensors","concat");"complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+e.dtype+". ")})),t=ts(t,n[0].shape)[0];var r=wl(n.map((function(e){return e.shape})),t);if(0===Ku(r))return Sl([],r);if(1===(n=n.filter((function(e){return e.size>0}))).length)return n[0];var o=n.map((function(e){return e.shape}));xl(o,t);var i=n,a={axis:t};return Js.runKernelFunc((function(e){return e.concat(n,t)}),i,(function(e){var n=o.map((function(e){return e[t]}));return Hl(e,n,t).map((function(e){return function(){return e}}))}),"Concat",a)}}),Vl=El({concat1d_:function(e){return Bl(e,0)}}),zl=El({concat2d_:function(e,t){return Bl(e,t)}}),Wl=El({concat3d_:function(e,t){return Bl(e,t)}}),Ul=El({concat4d_:function(e,t){return Bl(e,t)}}),Hl=El({split_:function(e,t,n){void 0===n&&(n=0);var r,o=ll(e,"x","split");return n=ts(n,o.shape)[0],"number"==typeof t?(Uu(o.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(o.shape[n]/t)):(Uu(o.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t),Js.runKernelFunc((function(e){return e.split(o,r,n)}),{$x:o},(function(e){return{$x:function(){return Bl(e,n)}}}))}});function Gl(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self&&self;var ql=Gl((function(e){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){var n=new r(e),i=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,i&&("object"==typeof i&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:this.alea=i}(0,e)})),Kl=Gl((function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function i(e,t){var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:this.xor128=i}(0,e)})),$l=Gl((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:this.xorwow=i}(0,e)})),Xl=Gl((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function o(e,t){return t.x=e.x.slice(),t.i=e.i,t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&(i.x&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:this.xorshift7=i}(0,e)})),Yl=Gl((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,i=t.i;return t.w=r=r+1640531527|0,n=o[i+34&127],e=o[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,o,i,a,u=[],s=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,s=Math.max(s,t.length)),o=0,i=-32;i<s;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(a=a+1640531527|0,o=0==(n=u[127&i]^=r+a)?o+1:0);for(o>=128&&(u[127&(t&&t.length||0)]=-1),o=127,i=512;i>0;--i)r=u[o+34&127],n=u[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,u[o]=r^n;e.w=a,e.X=u,e.i=o}(t,e)}function o(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&(i.X&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:this.xor4096=i}(0,e)})),Ql=Gl((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&o(i,n),a.state=function(){return o(n,{})}),a}t&&t.exports?t.exports=i:this.tychei=i}(0,e)})),Zl=Gl((function(e){!function(t,r){var o,i=this,a=256,u="random",s=r.pow(a,6),c=r.pow(2,52),l=2*c,f=255;function d(e,n,f){var d=[],g=v(function e(t,n){var r,o=[],i=typeof t;if(n&&"object"==i)for(r in t)try{o.push(e(t[r],n-1))}catch(e){}return o.length?o:"string"==i?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,m(t)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(a):(e=new Uint8Array(a),(i.crypto||i.msCrypto).getRandomValues(e)),m(e)}catch(e){var n=i.navigator,r=n&&n.plugins;return[+new Date,i,r,i.screen,m(t)]}}():e,3),d),y=new p(d),b=function(){for(var e=y.g(6),t=s,n=0;e<c;)e=(e+n)*a,t*=a,n=y.g(1);for(;e>=l;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,v(m(y.S),t),(n.pass||f||function(e,t,n,o){return o&&(o.S&&h(o,y),e.state=function(){return h(y,{})}),n?(r[u]=e,t):e})(b,g,"global"in n?n.global:this==r,n.state)}function p(e){var t,n=e.length,r=this,o=0,i=r.i=r.j=0,u=r.S=[];for(n||(e=[n++]);o<a;)u[o]=o++;for(o=0;o<a;o++)u[o]=u[i=f&i+e[o%n]+(t=u[o])],u[i]=t;(r.g=function(e){for(var t,n=0,o=r.i,i=r.j,u=r.S;e--;)t=u[o=f&o+1],n=n*a+u[f&(u[o]=u[i=f&i+t])+(u[i]=t)];return r.i=o,r.j=i,n})(a)}function h(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function v(e,t){for(var n,r=e+"",o=0;o<r.length;)t[f&o]=f&(n^=19*t[f&o])+r.charCodeAt(o++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(r["seed"+u]=d,v(r.random(),t),e.exports){e.exports=d;try{o=n(4902)}catch(e){}}}([],Math)}));Zl.alea=ql,Zl.xor128=Kl,Zl.xorwow=$l,Zl.xorshift7=Xl,Zl.xor4096=Yl,Zl.tychei=Ql;var Jl=Zl.alea,ef=function(){function e(e,t,n,r,o){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=o||Math.random();this.random=Jl(i.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var o=void 0,i=void 0,a=void 0;do{a=(o=2*this.random()-1)*o+(i=2*this.random()-1)*i}while(a>=1||0===a);var u=Math.sqrt(-2*Math.log(a)/a);t=this.mean+this.stdDev*o*u,n=this.mean+this.stdDev*i*u,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),tf=function(){function e(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;var o=r||Math.random();this.randu=Jl(o.toString()),this.randn=new ef(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var e,t,n,r,o,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(o=this.randu())<t||Math.log(o)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)},e.prototype.convertValue=function(e){return"float32"===this.dtype?e:Math.round(e)},e}(),nf=function(){function e(e,t,n,r){var o=this;if(void 0===e&&(e=0),void 0===t&&(t=1),this.canReturnFloat=function(){return null==o.dtype||"float32"===o.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=Jl(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function rf(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",Cs(e),new Ps(e,t,n)}var of=El({batchToSpaceND_:function(e,t,n){var r=ll(e,"x","batchToSpaceND"),o=t.reduce((function(e,t){return e*t}));return Uu(r.rank>=1+t.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length})),Uu(n.length===t.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length})),Uu(r.shape[0]%o==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+o})),Js.runKernelFunc((function(e){return e.batchToSpaceND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}}))}}),af=El({broadcastTo_:function(e,t){var n=ll(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var o=n.shape.slice();o.length<t.length;)o.unshift(1);n=n.reshape(o)}for(var i=Array.from(t),a=t.length-1;a>=0;a--)if(n.shape[a]===t[a])i[a]=1;else if(1!==n.shape[a])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var u=i.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));return 0===u.length?n.clone():Js.runKernelFunc((function(e){return e.tile(n,i)}),{input:n},(function(e){return{input:function(){return e.sum(u,!0)}}}))}}),uf=El({cast_:function(e,t){var n=ll(e,"x","cast");if(!as(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={dtype:t};return Js.runKernelFunc((function(e){return e.cast(n,t)}),{x:n},(function(e){return{x:function(){return e.clone()}}}),"Cast",r)}}),sf=El({clone_:function(e){var t=ll(e,"x","clone",null);return Js.runKernelFunc((function(){return Js.makeTensorFromDataId(t.dataId,t.shape,t.dtype)}),{$x:t},(function(e){return{$x:function(){return e.toFloat()}}}))}}),cf=El({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var o=ll(e,"x","cumsum"),i=gl([t|=0],o.rank),a=o;null!=i&&(a=o.transpose(i));var u=bl(1,o.rank)[0],s=Js.runKernelFunc((function(e){return e.cumsum(a,u,n,r)}),{permutedX:a},(function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}}));return null!=i&&(s=s.transpose(i)),s}}),lf=El({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=ll(e,"x","depthToSpace"),o="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],a="NHWC"===n?r.shape[3]:r.shape[1];return Uu(o*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+t+"  for depthToSpace with input shape\n      "+r.shape})),Uu(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+t+" for depthToSpace with input shape\n          "+r.shape})),Uu(a%(t*t)==0,(function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+a+" for depthToSpace with input shape "+r.shape})),Js.runKernelFunc((function(e){return e.depthToSpace(r,t,n)}),{$x:r})}}),ff=El({expandDims_:function(e,t){void 0===t&&(t=0);var n=ll(e,"x","expandDims",null);Uu(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return t<0&&(Uu(-(n.rank+1)<=t,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),t=n.rank+t+1),r.splice(t,0,1),_f(n,r)}}),df=El({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var o=rf([e,t],r),i=e<=t?e:t,a=0;a<i;++a)o.set(1,a,a);var u=o.toTensor().as2D(e,t);if(null==n)return u;if(1===n.length)return Tf(ff(u,0),[n[0],1,1]);if(2===n.length)return Tf(ff(ff(u,0),0),[n[0],n[1],1,1]);if(3===n.length)return Tf(ff(ff(ff(u,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),pf=El({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var o=ll(e,"logits","multinomial"),i=o.size,a=o.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);n=n||Math.random();var u=1===a?o.as2D(1,-1):o,s=Js.runKernelFunc((function(e){return e.multinomial(u,r,t,n)}),{logits2D:u});return 1===a?s.as1D():s}}),hf=El({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var o=ll(e,"indices","oneHot","int32"),i=o.shape.concat([t]);return o=o.flatten(),Js.runKernelFunc((function(e){return e.oneHot(o,t,n,r)}),{$indices:o},(function(e){return{$indices:function(){return Dl(o.shape,"float32")}}})).reshape(i)}}),vf=El({pad_:function(e,t,n){void 0===n&&(n=0);var r=ll(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o={paddings:t,constantValue:n};return Js.runKernelFunc((function(e){return e.pad(r,t,n)}),{x:r},(function(e){var n=t.map((function(e){return e[0]}));return{x:function(){return e.slice(n,r.shape)}}}),"PadV2",o)}}),mf=El({pad1d_:function(e,t,n){return void 0===n&&(n=0),Uu(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),vf(e,[t],n)}}),gf=El({pad2d_:function(e,t,n){return void 0===n&&(n=0),Uu(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),vf(e,t,n)}}),yf=El({pad3d_:function(e,t,n){return void 0===n&&(n=0),Uu(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),vf(e,t,n)}}),bf=El({pad4d_:function(e,t,n){return void 0===n&&(n=0),Uu(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),vf(e,t,n)}}),xf=El({rand_:function(e,t,n){var r=Ku(e),o=null;if(null==n||"float32"===n)o=new Float32Array(r);else if("int32"===n)o=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var i=0;i<r;i++)o[i]=t();return Js.makeTensor(o,e,n)}}),wf=El({randomNormal_:function(e,t,n,r,o){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var i=new ef(t,n,r,!1,o),a=rf(e,r),u=0;u<a.values.length;u++)a.values[u]=i.nextValue();return a.toTensor()}}),Ef=El({randomGamma_:function(e,t,n,r,o){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var i=new tf(t,n,r,o),a=rf(e,r),u=0;u<a.values.length;u++)a.values[u]=i.nextValue();return a.toTensor()}}),Cf=El({randomUniform_:function(e,t,n,r,o){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var i=rf(e,r),a=new nf(t,n,null,o),u=0;u<i.values.length;u++)i.values[u]=a.nextValue();return i.toTensor()}}),_f=El({reshape_:function(e,t){var n=ll(e,"x","reshape",null);t=es(t,n.size),Uu(n.size===Ku(t),(function(){return"new shape and old shape must have the same number of elements."}));var r={shape:t};return Js.runKernelFunc((function(e){return e.reshape(n,t)}),{x:n},(function(e){return{x:function(){return e.reshape(n.shape)}}}),"Reshape",r)}}),kf=El({spaceToBatchND_:function(e,t,n){var r=ll(e,"x","spaceToBatchND");return Uu(r.rank>=1+t.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length})),Uu(n.length===t.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length})),Uu(r.shape.reduce((function(e,r,o){return o>0&&o<=t.length?e&&(r+n[o-1][0]+n[o-1][1])%t[o-1]==0:e}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()})),Js.runKernelFunc((function(e){return e.spaceToBatchND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}}))}}),Sf=El({squeeze_:function(e,t){var n=ll(e,"x","squeeze");return _f(n,ns(n.shape,t).newShape)}}),Of=El({stack_:function(e,t){void 0===t&&(t=0);var n=fl(e,"tensors","stack");if(Uu(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),1===n.length)return n[0].expandDims(t);var r=n[0].rank,o=n[0].shape,i=n[0].dtype;Uu(t<=r,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(e){Hu(o,e.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(e){Uu(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var a=n.map((function(e){return e.expandDims(t)}));return Bl(a,t)}}),Tf=El({tile_:function(e,t){var n=ll(e,"x","tile",null);Uu(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."}));var r=[n],o={reps:t};return Js.runKernelFunc((function(e,r){var o=e.tile(n,t);return r([n]),o}),{x:n},(function(e,n){var r=n[0];return{x:function(){var n=jl(r);if(1===r.rank)for(var o=0;o<t[0];++o)n=n.add(e.slice([o*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(o=0;o<t[0];++o)for(var i=0;i<t[1];++i)n=n.add(e.slice([o*r.shape[0],i*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(o=0;o<t[0];++o)for(i=0;i<t[1];++i)for(var a=0;a<t[2];++a)n=n.add(e.slice([o*r.shape[0],i*r.shape[1],a*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(o=0;o<t[0];++o)for(i=0;i<t[1];++i)for(a=0;a<t[2];++a)for(var u=0;u<t[3];++u)n=n.add(e.slice([o*r.shape[0],i*r.shape[1],a*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}}),"Tile",o,r)}}),Af=El({truncatedNormal_:function(e,t,n,r,o){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var i=new ef(t,n,r,!0,o),a=rf(e,r),u=0;u<a.values.length;u++)a.values[u]=i.nextValue();return a.toTensor()}}),Rf=El({unstack_:function(e,t){void 0===t&&(t=0),t=t||0;var n=ll(e,"x","unstack");Uu(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),t<0&&(t+=n.shape.length);var r={axis:t};return Js.runKernelFunc((function(e){return e.unstack(n,t)}),{x:n},(function(e){return{x:function(){return Of(e,t)}}}),"Unpack",r)}});function Nf(e,t,n,r){void 0===r&&(r=!0);var o=[];if(r)(o=o.concat(t.slice(0))).push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);for(var i=t.length,a=0;a<i;++a)o=o.concat([e[a+1]/t[a],t[a]]);o=o.concat(e.slice(i+1))}return o}function If(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var o=t+1;o<e;++o)o<=2*t?(r.push(o),r.push(o-(t+1))):r.push(o)}else{var i=[],a=[];for(o=1;o<e;++o)o>=2*t+1||o%2==1?a.push(o):i.push(o);r.push.apply(r,i),r.push(0),r.push.apply(r,a)}return r}function Pf(e,t,n,r){void 0===r&&(r=!0);var o=[];r?o.push(e[0]/n):o.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?o.push(t[i-1]*e[i]):o.push(e[i]/t[i-1]):o.push(e[i]);return o}function Df(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Mf(e,t,n){for(var r=e.slice(0,1),o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}function Ff(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],o=1,i=0;i<n.length-1;++i)o*=n[i];var a=e.shape,u=n.slice();u.pop();var s=1;for(i=r;i<e.rank;++i)s*=a[i],u.push(a[i]);var c=gs(e.shape).map((function(e){return e/s})).concat([1]).slice(0,r);return[u,o,s,c]}Object.freeze({prepareAndValidate:Ff});function Lf(e){return e<=30?e:ms(e,Math.floor(Math.sqrt(e)))}function jf(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+o+".";if(n.rank<o)throw new Error(i+" update.rank < "+o+". ");if(e.length<r+(n.rank-o))throw new Error(i+" Output shape length < "+(r+(n.rank-o)));if(n.rank!==o+e.length-r)throw new Error(i+" update.rank != "+(o+e.length-r));for(var a=0;a<o;++a)if(n.shape[a]!==t.shape[a])throw new Error(i+" updates.shape["+a+"] ("+n.shape[a]+") != indices.shape["+a+"] ("+t.shape[a]+").");for(a=0;a<n.rank-o;++a)if(n.shape[a+o]!==e[a+r])throw new Error(i+" updates.shape["+(a+o)+"] ("+n.shape[a+o]+") != shape["+(a+o)+"] ("+e[a+o]+")")}function Bf(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}jf(n,t,e)}function Vf(e,t,n){for(var r=t.shape.length,o=r>1?t.shape[r-1]:1,i=n.length,a=1,u=o;u<i;++u)a*=n[u];var s=o<1?1:o;return{sliceRank:o,numUpdates:Ku(t.shape)/s,sliceSize:a,strides:gs(n.slice(0,o)).concat([1]),outputSize:Ku(n)}}Object.freeze({validateUpdateShape:jf,validateInput:Bf,calculateShapes:Vf});function zf(e,t,n){Uu(e.rank===t.length,(function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."})),Uu(e.rank===n.length,(function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."}));for(var r=function(r){Uu(t[r]+n[r]<=e.shape[r],(function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"}))},o=0;o<e.rank;++o)r(o)}function Wf(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Uf(e,t,n){for(var r=[],o=0;o<e.length;o++)r[o]=Math.ceil((t[o]-e[o])/n[o]);return r}function Hf(e,t,n,r,o){var i=t[o],a=n[o]||1;(e&1<<o||null==i)&&(i=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[o];return i<0&&(i+=u),Vu(0,i,u-1)}function Gf(e,t,n,r,o){var i=t[o],a=n[o]||1;(e&1<<o||null==i)&&(i=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[o];return i<0&&(i+=u),a>0?Vu(0,i,u):Vu(-1,i,u-1)}function qf(e,t,n){for(var r=n.length,o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function Kf(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}Object.freeze({assertParamsValid:zf,maskToAxes:Wf,computeOutShape:Uf,startForAxis:Hf,stopForAxis:Gf,isSliceContinous:qf,computeFlatOffset:Kf});function $f(e){return Js.customGrad(e)}var Xf=El({softmax_:function(e,t){void 0===t&&(t=-1);var n=ll(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return Js.runKernelFunc((function(e,r){var o=e.softmax(n,t);return r([o]),o}),{logits:n},(function(e,n){var r=n[0],o=e.mul(r);return{logits:function(){return o.sub(o.sum([t],!0).mul(r))}}}),"Softmax",{dim:t},[],[!0])}}),Yf=El({logSoftmax_:function(e,t){void 0===t&&(t=-1);var n=ll(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return $f((function(e,n){var r=e.max(t,!0),o=e.sub(r),i=o.toFloat().sub(o.exp().sum(t,!0).log());return n([i]),{value:i,gradFunc:function(e,n){var r=n[0].exp();return e.sub(e.sum(t,!0).mul(r))}}}))(n)}}),Qf=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),Zf=function(){function e(){}return e.prototype.time=function(e){return Jf("time")},e.prototype.read=function(e){return Jf("read")},e.prototype.readSync=function(e){return Jf("readSync")},e.prototype.numDataIds=function(){return Jf("numDataIds")},e.prototype.disposeData=function(e){return Jf("disposeData")},e.prototype.write=function(e,t,n){return Jf("write")},e.prototype.move=function(e,t,n,r){return Jf("move")},e.prototype.memory=function(){return Jf("memory")},e.prototype.floatPrecision=function(){return Jf("floatPrecision")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){return Jf("batchMatMul")},e.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,Jf("fusedBatchMatMul")},e.prototype.slice=function(e,t,n){return Jf("slice")},e.prototype.stridedSlice=function(e,t,n,r){return Jf("stridedSlice")},e.prototype.unstack=function(e,t){return Jf("unstack")},e.prototype.reverse=function(e,t){return Jf("reverse")},e.prototype.concat=function(e,t){return Jf("concat")},e.prototype.neg=function(e){return Jf("neg")},e.prototype.add=function(e,t){return Jf("add")},e.prototype.addN=function(e){return Jf("addN")},e.prototype.subtract=function(e,t){return Jf("subtract")},e.prototype.multiply=function(e,t){return Jf("multiply")},e.prototype.realDivide=function(e,t){return Jf("realDivide")},e.prototype.floorDiv=function(e,t){return Jf("floorDiv")},e.prototype.sum=function(e,t){return Jf("sum")},e.prototype.prod=function(e,t){return Jf("prod")},e.prototype.unsortedSegmentSum=function(e,t,n){return Jf("unsortedSegmentSum")},e.prototype.argMin=function(e,t){return Jf("argMin")},e.prototype.argMax=function(e,t){return Jf("argMax")},e.prototype.equal=function(e,t){return Jf("equal")},e.prototype.notEqual=function(e,t){return Jf("notEqual")},e.prototype.less=function(e,t){return Jf("less")},e.prototype.lessEqual=function(e,t){return Jf("lessEqual")},e.prototype.greater=function(e,t){return Jf("greater")},e.prototype.greaterEqual=function(e,t){return Jf("greaterEqual")},e.prototype.logicalNot=function(e){return Jf("logicalNot")},e.prototype.logicalAnd=function(e,t){return Jf("logicalAnd")},e.prototype.logicalOr=function(e,t){return Jf("logicalOr")},e.prototype.where=function(e){return Jf("where")},e.prototype.select=function(e,t,n){return Jf("select")},e.prototype.topk=function(e,t,n){return Jf("topk")},e.prototype.min=function(e,t){return Jf("min")},e.prototype.minimum=function(e,t){return Jf("minimum")},e.prototype.mod=function(e,t){return Jf("mod")},e.prototype.max=function(e,t){return Jf("max")},e.prototype.maximum=function(e,t){return Jf("maximum")},e.prototype.all=function(e,t){return Jf("all")},e.prototype.any=function(e,t){return Jf("any")},e.prototype.squaredDifference=function(e,t){return Jf("squaredDifference")},e.prototype.ceil=function(e){return Jf("ceil")},e.prototype.floor=function(e){return Jf("floor")},e.prototype.round=function(e){return Jf("round")},e.prototype.sign=function(e){return Jf("sign")},e.prototype.isNaN=function(e){return Jf("isNaN")},e.prototype.isInf=function(e){return Jf("isInf")},e.prototype.isFinite=function(e){return Jf("isFinite")},e.prototype.pow=function(e,t){return Jf("pow")},e.prototype.exp=function(e){return Jf("exp")},e.prototype.expm1=function(e){return Jf("expm1")},e.prototype.softmax=function(e,t){return Jf("softmax")},e.prototype.log=function(e){return Jf("log")},e.prototype.log1p=function(e){return Jf("log1p")},e.prototype.sqrt=function(e){return Jf("sqrt")},e.prototype.rsqrt=function(e){return Jf("rsqrt")},e.prototype.square=function(e){return Jf("square")},e.prototype.reciprocal=function(e){return Jf("reciprocal")},e.prototype.relu=function(e){return Jf("relu")},e.prototype.relu6=function(e){return Jf("relu6")},e.prototype.prelu=function(e,t){return Jf("prelu")},e.prototype.elu=function(e){return Jf("elu")},e.prototype.eluDer=function(e,t){return Jf("eluDer")},e.prototype.selu=function(e){return Jf("selu")},e.prototype.int=function(e){return Jf("int")},e.prototype.clip=function(e,t,n){return Jf("clip")},e.prototype.abs=function(e){return Jf("abs")},e.prototype.complexAbs=function(e){return Jf("complexAbs")},e.prototype.sigmoid=function(e){return Jf("sigmoid")},e.prototype.softplus=function(e){return Jf("softplus")},e.prototype.sin=function(e){return Jf("sin")},e.prototype.cos=function(e){return Jf("cos")},e.prototype.tan=function(e){return Jf("tan")},e.prototype.asin=function(e){return Jf("asin")},e.prototype.acos=function(e){return Jf("acos")},e.prototype.atan=function(e){return Jf("atan")},e.prototype.atan2=function(e,t){return Jf("atan2")},e.prototype.sinh=function(e){return Jf("sinh")},e.prototype.cosh=function(e){return Jf("cosh")},e.prototype.tanh=function(e){return Jf("tanh")},e.prototype.asinh=function(e){return Jf("asinh")},e.prototype.acosh=function(e){return Jf("acosh")},e.prototype.atanh=function(e){return Jf("atanh")},e.prototype.erf=function(e){return Jf("erf")},e.prototype.step=function(e,t){return Jf("step")},e.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,Jf("fusedConv2d")},e.prototype.conv2d=function(e,t,n){return Jf("conv2d")},e.prototype.conv2dDerInput=function(e,t,n){return Jf("conv2dDerInput")},e.prototype.conv2dDerFilter=function(e,t,n){return Jf("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,Jf("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(e,t,n){return Jf("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){return Jf("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){return Jf("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(e,t,n){return Jf("conv3d")},e.prototype.conv3dDerInput=function(e,t,n){return Jf("conv3dDerInput")},e.prototype.conv3dDerFilter=function(e,t,n){return Jf("conv3dDerFilter")},e.prototype.maxPool=function(e,t){return Jf("maxPool")},e.prototype.maxPoolBackprop=function(e,t,n,r){return Jf("maxPoolBackprop")},e.prototype.avgPool=function(e,t){return Jf("avgPool")},e.prototype.avgPoolBackprop=function(e,t,n){return Jf("avgPoolBackprop")},e.prototype.avgPool3d=function(e,t){return Jf("avgPool3d")},e.prototype.avgPool3dBackprop=function(e,t,n){return Jf("avgPool3dBackprop")},e.prototype.maxPool3d=function(e,t){return Jf("maxPool3d")},e.prototype.maxPool3dBackprop=function(e,t,n,r){return Jf("maxPool3dBackprop")},e.prototype.reshape=function(e,t){return Jf("reshape")},e.prototype.cast=function(e,t){return Jf("cast")},e.prototype.tile=function(e,t){return Jf("tile")},e.prototype.pad=function(e,t,n){return Jf("pad")},e.prototype.transpose=function(e,t){return Jf("transpose")},e.prototype.gather=function(e,t,n){return Jf("gather")},e.prototype.gatherND=function(e,t){return Jf("gatherND")},e.prototype.scatterND=function(e,t,n){return Jf("scatterND")},e.prototype.batchToSpaceND=function(e,t,n){return Jf("batchToSpaceND")},e.prototype.spaceToBatchND=function(e,t,n){return Jf("spaceToBatchND")},e.prototype.resizeBilinear=function(e,t,n,r){return Jf("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(e,t,n){return Jf("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){return Jf("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){return Jf("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(e,t,n,r,o,i){return Jf("batchNormalization")},e.prototype.localResponseNormalization4D=function(e,t,n,r,o){return Jf("localResponseNormalization4D")},e.prototype.LRNGrad=function(e,t,n,r,o,i,a){return Jf("LRNGrad")},e.prototype.multinomial=function(e,t,n,r){return Jf("multinomial")},e.prototype.oneHot=function(e,t,n,r){return Jf("oneHot")},e.prototype.cumsum=function(e,t,n,r){return Jf("cumsum")},e.prototype.nonMaxSuppression=function(e,t,n,r,o){return Jf("nonMaxSuppression")},e.prototype.fft=function(e){return Jf("fft")},e.prototype.ifft=function(e){return Jf("ifft")},e.prototype.complex=function(e,t){return Jf("complex")},e.prototype.real=function(e){return Jf("real")},e.prototype.imag=function(e){return Jf("imag")},e.prototype.cropAndResize=function(e,t,n,r,o,i){return Jf("cropAndResize")},e.prototype.depthToSpace=function(e,t,n){return Jf("depthToSpace")},e.prototype.split=function(e,t,n){return Jf("split")},e.prototype.sparseToDense=function(e,t,n,r){return Jf("sparseToDense")},e.prototype.diag=function(e){return Jf("diag")},e.prototype.fill=function(e,t,n){return Jf("fill")},e.prototype.onesLike=function(e){return Jf("onesLike")},e.prototype.zerosLike=function(e){return Jf("zerosLike")},e.prototype.linspace=function(e,t,n){return Jf("linspace")},e.prototype.dispose=function(){return Jf("dispose")},e}();function Jf(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function ed(e,t){for(var n=e.length,r=[],o=0;o<n;o++){var i=n-1-o,a=e[i]||1;(t[t.length-1-o]||1)>1&&1===a&&r.unshift(i)}return r}function td(e,t){for(var n=[],r=0;r<t.length;r++){var o=e[e.length-r-1],i=t.length-r-1,a=t[i];(null==o||1===o&&a>1)&&n.unshift(i)}return n}function nd(e,t){for(var n=[],r=Math.max(e.length,t.length),o=0;o<r;o++){var i=e[e.length-o-1];null==i&&(i=1);var a=t[t.length-o-1];if(null==a&&(a=1),1===i)n.unshift(a);else if(1===a)n.unshift(i);else{if(i!==a)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(i)}}return n}function rd(e,t,n,r,o,i,a){void 0===a&&(a="channelsLast");var u,s=sd(t),c=s[0],l=s[1];if("channelsLast"===a)u=[c,l,e[3],e[3]];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);u=[c,l,e[1],e[1]]}return id(e,u,n,r,o,i,!1,a)}function od(e,t,n,r,o,i,a){void 0===a&&(a="NDHWC");var u,s,c=cd(t),l=c[0],f=c[1],d=c[2];if("NDHWC"===a)s="channelsLast",u=[l,f,d,e[4],e[4]];else{if("NCDHW"!==a)throw new Error("Unknown dataFormat "+a);s="channelsFirst",u=[l,f,d,e[1],e[1]]}return ad(e,u,n,r,o,!1,s,i)}function id(e,t,n,r,o,i,a,u){void 0===a&&(a=!1),void 0===u&&(u="channelsLast");var s=[-1,-1,-1,-1],c=s[0],l=s[1],f=s[2],d=s[3];if("channelsLast"===u)c=e[0],l=e[1],f=e[2],d=e[3];else{if("channelsFirst"!==u)throw new Error("Unknown dataFormat "+u);c=e[0],d=e[1],l=e[2],f=e[3]}var p,h=t[0],v=t[1],m=t[3],g=sd(n),y=g[0],b=g[1],x=sd(r),w=x[0],E=x[1],C=ld(h,w),_=ld(v,E),k=function(e,t,n,r,o,i,a,u){var s,c,l;if("number"==typeof e){s={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,o){null==r&&(r=ud(e,t,n));var i=e[1],a=fd((e[0]-t+2*r)/n+1,o);Uu(Xu(a),(function(){return"The output # of rows ("+a+") must be an integer. Change the stride and/or zero pad parameters"}));var u=fd((i-t+2*r)/n+1,o);return Uu(Xu(u),(function(){return"The output # of columns ("+u+") must be an integer. Change the stride and/or zero pad parameters"})),[a,u]}([t,n],i,r,e,u);c=f[0],l=f[1]}else if("same"===e){c=Math.ceil(t/r),l=Math.ceil(n/o);var d=Math.max(0,(c-1)*r+i-t),p=Math.max(0,(l-1)*o+a-n),h=Math.floor(d/2),v=d-h,m=Math.floor(p/2);s={top:h,bottom:v,left:m,right:p-m,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);s={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-i+1)/r),l=Math.ceil((n-a+1)/o)}return{padInfo:s,outHeight:c,outWidth:l}}(o,l,f,y,b,C,_,i),S=k.padInfo,O=k.outHeight,T=k.outWidth,A=a?m*d:m;return"channelsFirst"===u?p=[c,A,O,T]:"channelsLast"===u&&(p=[c,O,T,A]),{batchSize:c,dataFormat:u,inHeight:l,inWidth:f,inChannels:d,outHeight:O,outWidth:T,outChannels:A,padInfo:S,strideHeight:y,strideWidth:b,filterHeight:h,filterWidth:v,effectiveFilterHeight:C,effectiveFilterWidth:_,dilationHeight:w,dilationWidth:E,inShape:e,outShape:p,filterShape:t}}function ad(e,t,n,r,o,i,a,u){void 0===i&&(i=!1),void 0===a&&(a="channelsLast");var s=[-1,-1,-1,-1,-1],c=s[0],l=s[1],f=s[2],d=s[3],p=s[4];if("channelsLast"===a)c=e[0],l=e[1],f=e[2],d=e[3],p=e[4];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);c=e[0],p=e[1],l=e[2],f=e[3],d=e[4]}var h,v=t[0],m=t[1],g=t[2],y=t[4],b=cd(n),x=b[0],w=b[1],E=b[2],C=cd(r),_=C[0],k=C[1],S=C[2],O=ld(v,_),T=ld(m,k),A=ld(g,S),R=function(e,t,n,r,o,i,a,u,s,c,l){var f,d,p,h;if("number"==typeof e){f={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var v=function(e,t,n,r,o,i){null==o&&(o=ud(e,t,r));var a=e[1],u=e[2],s=fd((e[0]-t+2*o)/r+1,i);Uu(Xu(s),(function(){return"The output # of depths ("+s+") must be an integer. Change the stride and/or zero pad parameters"}));var c=fd((a-t+2*o)/r+1,i);Uu(Xu(c),(function(){return"The output # of rows ("+c+") must be an integer. Change the stride and/or zero pad parameters"}));var l=fd((u-t+2*o)/r+1,i);return Uu(Xu(l),(function(){return"The output # of columns ("+l+") must be an integer. Change the stride and/or zero pad parameters"})),[s,c,l,1]}([t,n,r,1],u,0,o,e,l);d=v[0],p=v[1],h=v[2]}else if("same"===e){var m=((d=Math.ceil(t/o))-1)*o+u-t,g=((p=Math.ceil(n/i))-1)*i+s-n,y=((h=Math.ceil(r/a))-1)*a+c-r,b=Math.floor(m/2),x=m-b,w=Math.floor(g/2),E=g-w,C=Math.floor(y/2);f={top:w,bottom:E,left:C,right:y-C,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);f={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},d=Math.ceil((t-u+1)/o),p=Math.ceil((n-s+1)/i),h=Math.ceil((r-c+1)/a)}return{padInfo:f,outDepth:d,outHeight:p,outWidth:h}}(o,l,f,d,x,w,E,O,T,A,u),N=R.padInfo,I=R.outDepth,P=R.outHeight,D=R.outWidth,M=i?y*p:y;return"channelsFirst"===a?h=[c,M,I,P,D]:"channelsLast"===a&&(h=[c,I,P,D,M]),{batchSize:c,dataFormat:a,inDepth:l,inHeight:f,inWidth:d,inChannels:p,outDepth:I,outHeight:P,outWidth:D,outChannels:M,padInfo:N,strideDepth:x,strideHeight:w,strideWidth:E,filterDepth:v,filterHeight:m,filterWidth:g,effectiveFilterDepth:O,effectiveFilterHeight:T,effectiveFilterWidth:A,dilationDepth:_,dilationHeight:k,dilationWidth:S,inShape:e,outShape:h,filterShape:t}}function ud(e,t,n,r){void 0===r&&(r=1);var o=ld(t,r);return Math.floor((e[0]*(n-1)-n+o)/2)}function sd(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function cd(e){return"number"==typeof e?[e,e,e]:e}function ld(e,t){return t<=1?e:e+(e-1)*(t-1)}function fd(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function dd(e){var t=sd(e),n=t[0],r=t[1],o=t[2];return 1===n&&1===r&&1===o}function pd(e,t){return dd(e)||dd(t)}function hd(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function vd(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=Dl(e.shape),o=e.toFloat(),i=n.complex(o,r);return r.dispose(),o.dispose(),i}if(!us(e.dtype,t))return Js.makeTensorFromDataId(e.dataId,e.shape,t);if("complex64"===e.dtype){var a=n.real(e);return i=a.cast(t),a.dispose(),i}if("int32"===t)return n.int(e);if("bool"===t){var u=Tl(0,e.dtype);return i=n.notEqual(e,u),u.dispose(),i}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function md(e,t){return Js.makeTensorFromDataId(e.dataId,t,e.dtype)}function gd(e,t,n){var r=(t-e)/(n-1),o=ws(n,"float32");o[0]=e;for(var i=1;i<o.length;i++)o[i]=o[i-1]+r;return Al(o,"float32")}Object.freeze({castTensor:vd,reshapeTensor:md,linspaceImpl:gd,upcastType:Gs,axesAreInnerMostDims:dl,combineLocations:pl,computeOutAndReduceShapes:hl,expandShapeToKeepDim:vl,assertAxesAreInnerMostDims:ml,getAxesPermutation:gl,getUndoAxesPermutation:yl,getInnerMostAxes:bl,getBroadcastDims:ed,getReductionAxes:td,assertAndGetBroadcastShape:nd,assertParamsConsistent:xl,computeOutShape:wl,computePool2DInfo:rd,computePool3DInfo:od,computeConv2DInfo:id,computeConv3DInfo:ad,computeDefaultPad:ud,tupleValuesAreOne:dd,eitherStridesOrDilationsAreOne:pd,convertConv2DDataFormat:hd,PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:Lf});function yd(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function bd(e,t){return{real:e[2*t],imag:e[2*t+1]}}function xd(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function wd(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function Ed(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,o=e.length,i=0,a=!1;r<o;){var u=n(t,e[i=r+(o-r>>>1)]);u>0?r=i+1:(o=i,a=!u)}return a?r:-r-1}(e,t,n||Cd)}(e,t,n),o=r<0?-(r+1):r;e.splice(o,0,t)}function Cd(e,t){return e>t?1:e<t?-1:0}function _d(e,t,n,r,o){return Sd(e,t,n,r,o,0).selectedIndices}function kd(e,t,n,r,o,i){var a=Sd(e,t,n,r,o,i,!0);return a.numValidOutputs.dispose(),{selectedIndices:a.selectedIndices,selectedScores:a.selectedScores}}function Sd(e,t,n,r,o,i,a,u){void 0===a&&(a=!1),void 0===u&&(u=!1);for(var s=Array.from(t).map((function(e,t){return{score:e,boxIndex:t,suppressBeginIndex:0}})).filter((function(e){return e.score>o})).sort(Ad),c=i>0?-.5/i:0,l=[],f=[];l.length<n&&s.length>0;){var d=s.pop(),p=d.score,h=d.boxIndex,v=d.suppressBeginIndex;if(p<o)break;for(var m=!1,g=l.length-1;g>=v;--g){var y=Od(e,h,l[g]);if(y>=r){m=!0;break}if(d.score=d.score*Td(r,c,y),d.score<=o)break}d.suppressBeginIndex=l.length,m||(d.score===p?(l.push(h),f.push(d.score)):d.score>o&&Ed(s,d,Ad))}var b=l.length;return u&&(l.fill(0,b),f.fill(0,b)),{selectedIndices:Al(l,"int32"),selectedScores:Al(f,"float32"),numValidOutputs:Tl(b,"int32")}}function Od(e,t,n){var r=e.subarray(4*t,4*t+4),o=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),u=Math.max(r[0],r[2]),s=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),l=Math.min(o[1],o[3]),f=Math.max(o[0],o[2]),d=Math.max(o[1],o[3]),p=(u-i)*(s-a),h=(f-c)*(d-l);if(p<=0||h<=0)return 0;var v=Math.max(i,c),m=Math.max(a,l),g=Math.min(u,f),y=Math.min(s,d),b=Math.max(g-v,0)*Math.max(y-m,0);return b/(p+h-b)}function Td(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function Ad(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function Rd(e,t,n){var r=new Array(e.rank).fill(0),o=e.shape.slice();return t.map((function(t){o[n]=t;var i=e.slice(r,o);return r[n]+=t,i}))}function Nd(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var o=rf(n,e.dtype);for(r=0;r<o.values.length;++r){for(var i=o.indexToLoc(r),a=new Array(e.rank),u=0;u<a.length;u++)a[u]=i[u]%e.shape[u];var s=e.locToIndex(a);o.values[r]=e.values[s]}return o.toTensor()}function Id(e,t,n,r,o){for(var i=t[t.length-1],a=[e.length/i,i],u=a[0],s=a[1],c=rs(n,u*r),l=rs("int32",u*r),f=0;f<u;f++){for(var d=f*s,p=e.subarray(d,d+s),h=[],v=0;v<p.length;v++)h.push({value:p[v],index:v});h.sort((function(e,t){return t.value-e.value}));var m=f*r,g=c.subarray(m,m+r),y=l.subarray(m,m+r);for(v=0;v<r;v++)g[v]=h[v].value,y[v]=h[v].index}var b=t.slice();return b[b.length-1]=r,[Sl(c,b,n),Sl(l,b,"int32")]}function Pd(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var o=rf(e,"int32"),i=rf([n.length,e.length],"int32");for(r=0;r<n.length;r++){var a=o.indexToLoc(n[r]),u=r*e.length;i.values.set(a,u)}return i.toTensor()}var Dd=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},Md=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},Fd=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,o=e.batchSize,i=e.inSize,a=Math.ceil(i/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,a];var u="max"===t?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+s+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+u+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function Ld(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return e+"."+t}))}function jd(e,t){return 1===t?[e]:Ld(e,t)}function Bd(){var e,t,n,r,o,i,a,u,s,c;return 2===Ru().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",o="texture",i="outputColor",a="out vec4 outputColor;",u="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",s="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",o="texture2D",i="gl_FragColor",a="",u="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",s="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:o,output:i,defineOutput:a,defineSpecialNaN:u,defineSpecialInf:s,defineRound:c}}function Vd(e,t,n){void 0===n&&(n="index");var r=gs(t);return r.map((function(t,o){return"int "+e[o]+" = "+n+" / "+t+"; "+(o===r.length-1?"int "+e[o+1]+" = "+n+" - "+e[o]+" * "+t:"index -= "+e[o]+" * "+t)+";"})).join("")}function zd(e){var t=gs(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var Wd="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function Ud(e,t,n,r){var o=[];e.forEach((function(e){var t=Ku(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?o.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(o.push("uniform sampler2D "+e.name+";"),o.push("uniform int offset"+e.name+";"))}));var i,a,u=o.join("\n"),s=e.map((function(e){return function(e,t,n){void 0===n&&(n=!1);var r="";r+=n?Gd(e):Hd(e);var o=e.shapeInfo.logicalShape,i=t.logicalShape;return o.length<=i.length&&(r+=n?function(e,t){var n,r=e.name,o=r.charAt(0).toUpperCase()+r.slice(1),i="get"+o+"AtOutCoords",a=e.shapeInfo.logicalShape.length,u=t.logicalShape.length,s=ed(e.shapeInfo.logicalShape,t.logicalShape),c=Zd(u),l=u-a,f=["x","y","z","w","u","v"];n=0===a?"":u<2&&s.length>=1?"coords = 0;":s.map((function(e){return"coords."+f[e+l]+" = 0;"})).join("\n");var d;d=u<2&&a>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+f[t+l]})).join(", ");var p="return outputValue;",h=1===Ku(e.shapeInfo.logicalShape),v=1===Ku(t.logicalShape);if(1!==a||h||v){if(h&&!v)p=1===u?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(s.length){var m=a-2,g=a-1;s.indexOf(m)>-1&&s.indexOf(g)>-1?p="return vec4(outputValue.x);":s.indexOf(m)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":s.indexOf(g)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+i+"() {\n      "+c+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+o+"("+d+");\n      "+p+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",i=t.texShape,a=e.shapeInfo.texShape,u=e.shapeInfo.logicalShape.length,s=t.logicalShape.length;if(!e.shapeInfo.isUniform&&u===s&&null==e.shapeInfo.flatOffset&&$u(a,i))return"\n      float "+o+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var c,l=Zd(s),f=ed(e.shapeInfo.logicalShape,t.logicalShape),d=s-u,p=["x","y","z","w","u","v"];c=0===u?"":s<2&&f.length>=1?"coords = 0;":f.map((function(e){return"coords."+p[e+d]+" = 0;"})).join("\n");var h;return h=s<2&&u>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+p[t+d]})).join(", "),"\n    float "+o+"() {\n      "+l+" coords = getOutputCoords();\n      "+c+"\n      return get"+r+"("+h+");\n    }\n  "}(e,t)),r}(e,t,r)})).join("\n"),c=t.texShape,l=Bd(),f=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+e.texture2D+"(textureSampler, uv).r;\n    }\n  "}(l),d=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+e.defineSpecialNaN+"\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+qd+"\n    "+Kd+"\n    "+$d+"\n  "}(l);return t.isPacked?(i=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if($u(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=e,r=t,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=(i=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+o[0]+", "+o[1]+"));\n      int index = resTexRC.x * "+o[1]+" + resTexRC.y;\n\n      int b = index / "+a+";\n      index -= b * "+a+";\n\n      int r = 2 * (index / "+i+");\n      int c = imod(index, "+i+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),o=r*Math.ceil(e[e.length-2]/2),i=o,a="",u="b, r, c",s=2;s<e.length-1;s++)a="\n      int b"+s+" = index / "+(i*=e[e.length-s-1])+";\n      index -= b"+s+" * "+i+";\n    "+a,u="b"+s+", "+u;return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+a+"\n\n      int b = index / "+o+";\n      index -= b * "+o+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+u+");\n    }\n  "}(e,t)}var n,r,o,i,a}(t.logicalShape,c),a=function(e){return"\n    void setOutput(vec4 val) {\n      "+e.output+" = val;\n    }\n  "}(l)):(i=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return $u(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=t,r=Vd(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(e,t){var n=Vd(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=Vd(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=Vd(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,c),a=function(e){return"\n    void setOutput(float val) {\n      "+e.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(l)),r&&(d+=Xd),[d,f,a,u,i,s,n].join("\n")}function Hd(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}";var r=e.shapeInfo.texShape,o=r[0],i=r[1];if(1===o&&1===i)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var a=e.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+a[0]+", "+a[1]+", "+Yd(t)+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+Qd(e)+"\n      }\n    ";var r=e.shapeInfo.texShape,o=r[0],i=r[1];if(1===i&&1===o)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var a=Yd(t);return 1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+a+") + 0.5) / "+o+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===o?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+a+") + 0.5) / "+i+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+o+", "+i+", index + "+a+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape;if(null!=o&&$u(t,o)){var i=o[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+o[1]+".0, "+i+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var a=ns(t),u=a.newShape,s=a.keptDims,c=u;if(c.length<t.length)return"\n      "+Hd(Jd(e,c))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+ep(["row","col"],s)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+t[1]+", 1)));\n        "+Qd(e)+"\n      }\n    ";var l=o[0],f=o[1],d=Yd(n);return 1===f?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+d+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+l+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===l?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+d+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+f+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+t[1]+" + col + "+d+";\n    vec2 uv = uvFromFlat("+l+", "+f+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[1]*t[2],i=t[2],a=ns(t),u=a.newShape,s=a.keptDims,c=u;if(c.length<t.length)return"\n        "+Hd(Jd(e,c))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+ep(["row","col","depth"],s)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+o+", "+i+", 1)));\n        "+Qd(e)+"\n      }\n    ";var l=e.shapeInfo.texShape,f=l[0],d=l[1],p=e.shapeInfo.flatOffset;return d===o&&null==p?"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+i+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+d+".0, "+f+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":d===i&&null==p?"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+t[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+d+".0, "+f+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+o+" + col * "+i+" + depth + "+Yd(n)+";\n        vec2 uv = uvFromFlat("+f+", "+d+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[3],i=t[2]*o,a=t[1]*i,u=ns(t),s=u.newShape,c=u.keptDims;if(s.length<t.length)return"\n      "+Hd(Jd(e,s))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+ep(["row","col","depth","depth2"],c)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+a+", "+i+", "+o+", 1)));\n        "+Qd(e)+"\n      }\n    ";var l=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,d=f[0],p=f[1];return p===a&&null==l?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+i+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+p+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":p===o&&null==l?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+t[1]*t[2]+", "+t[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+p+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+a+" + col * "+i+" +\n          depth * "+o+" + depth2;\n      vec2 uv = uvFromFlat("+d+", "+p+", index + "+Yd(n)+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],i=t[3]*o,a=t[2]*i,u=t[1]*a,s=ns(t),c=s.newShape,l=s.keptDims;if(c.length<t.length)return"\n      "+Hd(Jd(e,c))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+ep(["row","col","depth","depth2","depth3"],l)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+u+", "+a+", "+i+", "+o+")) +\n          depth3;\n        "+Qd(e)+"\n      }\n    ";var f=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,p=d[0],h=d[1];return h===u&&null==f?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+a+", "+i+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+h+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":h===o&&null==f?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]+",\n               "+t[2]*t[3]+", "+t[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+h+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+u+" + col * "+a+" + depth * "+i+" +\n          depth2 * "+o+" + depth3 + "+Yd(n)+";\n      vec2 uv = uvFromFlat("+p+", "+h+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=ns(t),i=o.newShape,a=o.keptDims;if(i.length<t.length)return"\n      "+Hd(Jd(e,i))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+ep(["row","col","depth","depth2","depth3","depth4"],a)+");\n      }\n    ";var u=t[5],s=t[4]*u,c=t[3]*s,l=t[2]*c,f=t[1]*l;if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+f+", "+l+", "+c+", "+s+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+u+", 1)));\n        "+Qd(e)+"\n      }\n    ";var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],v=p[1];return v===f&&null==d?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+l+", "+c+", "+s+", "+u+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+v+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":v===u&&null==d?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]*t[4]+",\n               "+t[2]*t[3]*t[4]+",\n               "+t[3]*t[4]+",\n               "+t[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+v+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+f+" + col * "+l+" + depth * "+c+" +\n          depth2 * "+s+" + depth3 * "+u+" + depth4 + "+Yd(n)+";\n      vec2 uv = uvFromFlat("+h+", "+v+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function Gd(e){var t;switch(e.shapeInfo.logicalShape.length){case 0:return"\n    vec4 "+("get"+(t=e.name).charAt(0).toUpperCase()+t.slice(1))+"() {\n      return "+Bd().texture2D+"("+t+", halfCR);\n    }\n  ";case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=Bd();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+o[0]+", "+o[1]+", index);\n      return "+i.texture2D+"("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,i=o[0],a=o[1],u=Bd();if(null!=o&&$u(t,o))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+a+".0, "+i+".0);\n\n        return "+u.texture2D+"("+n+", uv);\n      }\n    ";var s=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(t[1]/2)+", "+s[0]+", "+s[1]+", row, col);\n      return "+u.texture2D+"("+n+", uv);\n    }\n  "}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,i=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===t[0])return"\n        "+Gd(Jd(e,t.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+ep(["b","row","col"],[1,2])+");\n        }\n      ";var a=i[0],u=i[1],s=Math.ceil(t[2]/2);return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+a+", "+u+", "+s*Math.ceil(t[1]/2)+", "+s+", b, row, col);\n      return "+Bd().texture2D+"("+n+", uv);\n    }\n  "}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=a[0],s=a[1],c=Math.ceil(t[n-1]/2),l=c*Math.ceil(t[n-2]/2),f="int b, int row, int col",d="b * "+l+" + (row / 2) * "+c+" + (col / 2)",p=2;p<n-1;p++)f="int b"+p+", "+f,d="b"+p+" * "+(l*=t[n-p-1])+" + "+d;return"\n    vec4 "+o+"("+f+") {\n      int index = "+d+";\n      int texR = index / "+s+";\n      int texC = index - texR * "+s+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+s+", "+u+");\n      return "+Bd().texture2D+"("+r+", uv);\n    }\n  "}(e)}}var qd="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Kd="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",$d="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Xd="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function Yd(e){return"offset"+e}function Qd(e){var t=e.name,n=Ku(e.shapeInfo.logicalShape);return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function Zd(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function Jd(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function ep(e,t){return t.map((function(t){return e[t]})).join(", ")}var tp=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Uu(e.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var o=e[e.length-1],i=Math.ceil(o/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var a,u,s=this.outputShape,c=s.length,l=Zd(c),f=jd("coords",c);if(1===i){var d=Zd(u=c+1);a="\n        "+d+" sourceLocR = "+d+"("+f.join()+", 0);\n        ++"+f[c-1]+";\n        "+d+" sourceLocG = "+d+"("+f.join()+", 0);\n        ++"+f[c-2]+";\n        "+d+" sourceLocA = "+d+"("+f.join()+", 0);\n        --"+f[c-1]+";\n        "+d+" sourceLocB = "+d+"("+f.join()+", 0);\n        --"+f[c-2]+";"}else u=c,a="\n        "+l+" sourceLocR = coords;\n        ++"+f[c-1]+";\n        "+l+" sourceLocG = coords;\n        ++"+f[c-2]+";\n        "+l+" sourceLocA = coords;\n        --"+f[c-1]+";\n        "+l+" sourceLocB = coords;\n        --"+f[c-2]+";";var p=["x","y","z","w","u","v"].slice(0,u),h="."+p[u-1],v=p.map((function(e){return"int "+e})),m=jd("sourceLocR",u-1).concat("inIdx.r"),g=jd("sourceLocG",u-1).concat("inIdx.g"),y=jd("sourceLocB",u-1).concat("inIdx.b"),b=jd("sourceLocA",u-1).concat("inIdx.a"),x="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+m.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+b.join()+")));",E="vec4(\n            getAChannel("+m.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+b.join()+") : 0.)",C=r?"":"\n      float getBestIndicesAChannel("+v.join()+") {\n        return getChannel(getBestIndicesA("+p.join()+"),\n                                          vec2("+p.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+v.join()+") {\n        return getChannel(getA("+p.join()+"),\n                               vec2("+p.slice(-2).join()+"));\n      }\n      "+C+"\n      void main() {\n        "+l+" coords = getOutputCoords();\n        bool hasNextCol = "+f[c-1]+" < "+(s[c-1]-1)+";\n        bool hasNextRow = "+f[c-2]+" < "+(s[c-2]-1)+";\n        "+a+"\n        ivec4 srcIdx = ivec4(sourceLocR"+h+", sourceLocG"+h+",\n          sourceLocB"+h+", sourceLocA"+h+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+E+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+w+"\n          vec4 candidate = "+E+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+x+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},np=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=e.dilationHeight,a=e.dilationWidth,u=e.effectiveFilterHeight,s=e.effectiveFilterWidth,c=u-1-e.padInfo.top,l=s-1-e.padInfo.left,f=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+c+", "+l+");\n      const float avgMultiplier = float("+f+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+u+";\n            wR += "+i+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+s+";\n            wC+= "+a+") {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},rp=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,u=e.dilationDepth,s=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterDepth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=l-1-e.padInfo.front,h=f-1-e.padInfo.top,v=d-1-e.padInfo.left,m=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3("+p+", "+h+", "+v+");\n      const float avgMultiplier = float("+m+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+l+";\n            wD += "+u+") {\n          float dyD = float(dyDCorner + wD) / "+o+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+f+";\n              wR += "+s+") {\n            float dyR = float(dyRCorner + wR) / "+i+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+d+";\n                wC += "+c+") {\n              float dyC = float(dyCCorner + wC) / "+a+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},op=function(e,t,n,r,o,i){this.outputShape=[],this.variableNames=["x","mean","variance"],nd(e,t),nd(e,n);var a="0.0";null!=r&&(nd(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var u="1.0";null!=o&&(nd(e,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+a+";\n        float scale = "+u+";\n        float inv = scale * inversesqrt(variance + float("+i+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},ip=function(e,t,n,r,o,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],nd(e,t),nd(e,n);var a="vec4(0.0)";null!=r&&(nd(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=o&&(nd(e,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+a+";\n        vec4 scale = "+u+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+i+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},ap=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=nd(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},up="return a + b;",sp="return a - b;",cp="return a * b;",lp="return (a < 0.) ? b * a : a;",fp=function(e,t,n){this.variableNames=["A","B"],this.outputShape=nd(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},dp="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",pp=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=nd(t,n);var o=this.outputShape.length,i="";if(r)if(0===o||1===Ku(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(i="\n          "+Zd(o)+" coords = getOutputCoords();\n        ",1===o)i+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var a=jd("coords",o);i+="\n            bool nextRowOutOfBounds =\n              ("+a[o-2]+" + 1) >= "+this.outputShape[o-2]+";\n            bool nextColOutOfBounds =\n              ("+a[o-1]+" + 1) >= "+this.outputShape[o-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+i+"\n\n        setOutput(result);\n      }\n    "},hp=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,o){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(o,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(o,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),vp=function(){function e(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,o){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(o,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(o,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),mp=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},gp=function(e){this.outputShape=[],this.outputShape=wl(e,1),this.variableNames=e.map((function(e,t){return"T"+t}));var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var o=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+o+"));")}var i=t.length,a=t[t.length-1];r.push("else setOutput(getT"+i+"(yR, yC-"+a+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},yp=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=wl(e,t);var n=this.outputShape,r=n.length,o=Zd(r),i=jd("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((function(e,t){return"T"+t}));var u=new Array(e.length-1);u[0]=e[0][t];for(var s=1;s<u.length;s++)u[s]=u[s-1]+e[s][t];var c=a[t],l=a.slice(-2),f=a.join(),d="if ("+c+" < "+u[0]+") {\n        return getChannel(\n            getT0("+f+"), vec2("+l.join()+"));\n        }";for(s=1;s<u.length;s++){var p=u[s-1];d+="\n        if ("+c+" < "+u[s]+"  && "+c+" >= "+u[s-1]+") {\n          return getChannel(\n            getT"+s+"("+bp(a,c,p)+"),\n            vec2("+bp(l,c,p)+"));\n        }"}var h=u.length,v=u[u.length-1];d+="\n        return getChannel(\n          getT"+h+"("+bp(a,c,v)+"),\n          vec2("+bp(l,c,v)+"));",this.userCode="\n      float getValue("+a.map((function(e){return"int "+e}))+") {\n        "+d+"\n      }\n\n      void main() {\n        "+o+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+i+"), 0., 0., 0.);\n\n        "+i[r-1]+" = "+i[r-1]+" + 1;\n        if ("+i[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+i+");\n        }\n\n        "+i[r-2]+" = "+i[r-2]+" + 1;\n        if ("+i[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+i+");\n        }\n\n        "+i[r-1]+" = "+i[r-1]+" - 1;\n        if ("+i[r-2]+" < "+n[r-2]+" &&\n            "+i[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+i+");\n        }\n        setOutput(result);\n      }\n    "};function bp(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?e+" - "+n:e})).join()}var xp=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,i="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+o+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              if ("+i+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},wp=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i="channelsLast"===e.dataFormat,a=t-1-e.padInfo.top,u=n-1-e.padInfo.left,s=i?1:2,c=i?2:3,l=i?3:1;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+u+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+l+"];\n\n        ivec2 dyCorner = ivec2(coords["+s+"], coords["+c+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n\n              if ("+i+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ep=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.padInfo.front,i=e.padInfo.top,a=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+o+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+i+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+a+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Cp=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,u=t-1-e.padInfo.front,s=n-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+u+", "+s+", "+c+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+o+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+i+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+a+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},_p=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+i+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+o+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},kp=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,i=t-1-e.padInfo.top,a=n-1-e.padInfo.left,u=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+u+"; dm++) {\n              int d2 = d1 * "+u+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Sp=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.padInfo.top,i=e.padInfo.left,a=e.strideHeight,u=e.strideWidth,s=e.dilationHeight,c=e.dilationWidth,l=e.filterHeight,f=e.filterWidth,d=4*Math.floor(e.inChannels/4),p=e.inChannels%4,h="channelsLast"===e.dataFormat,v=h?1:2,m=h?2:3,g=h?3:1,y="",b="";n&&(y=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",b="result = activation(result);");var x=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+y+"\n\n      const ivec2 strides = ivec2("+a+", "+u+");\n      const ivec2 pads = ivec2("+o+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+g+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+v+"], coords["+m+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+l+"; wR++) {\n          int xR = xRCorner + wR * "+s+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC++) {\n            int xC = xCCorner + wC * "+c+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+d+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+h+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===p)+") {\n\n              if ("+h+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+d+") *\n                    getW(wR, wC, "+d+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+d+", xR, xC) *\n                    getW(wR, wC, "+d+", d2);\n              }\n\n            } else if ("+(2===p)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+d+", d2),\n                getW(wR, wC, "+d+" + 1, d2)\n              );\n\n              if ("+h+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+d+"),\n                  getX(batch, xR, xC, "+d+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+d+", xR, xC),\n                  getX(batch, "+d+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===p)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+d+", d2),\n                getW(wR, wC, "+d+" + 1, d2),\n                getW(wR, wC, "+d+" + 2, d2)\n              );\n\n              if ("+h+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+d+"),\n                  getX(batch, xR, xC, "+d+" + 1),\n                  getX(batch, xR, xC, "+d+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+d+", xR, xC),\n                  getX(batch, "+d+" + 1, xR, xC),\n                  getX(batch, "+d+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+x+"\n        "+b+"\n        setOutput(result);\n      }\n    "},Op=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,u=e.dilationDepth,s=e.dilationHeight,c=e.dilationWidth,l=e.filterDepth,f=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),h=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+o+", "+i+", "+a+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+l+"; wF++) {\n          int xF = xFCorner + wF * "+u+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+f+"; wR++) {\n            int xR = xRCorner + wR * "+s+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+d+"; wC++) {\n              int xC = xCCorner + wC * "+c+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+p+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===h)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+p+") *\n                  getW(wF, wR, wC, "+p+", d2);\n              } else if ("+(2===h)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+p+"),\n                  getX(batch, xF, xR, xC, "+p+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+p+", d2),\n                  getW(wF, wR, wC, "+p+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===h)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+p+"),\n                  getX(batch, xF, xR, xC, "+p+" + 1),\n                  getX(batch, xF, xR, xC, "+p+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+p+", d2),\n                  getW(wF, wR, wC, "+p+" + 1, d2),\n                  getW(wF, wR, wC, "+p+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Tp=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.inHeight,i=e.inWidth,a=e.padInfo.top,u=e.padInfo.left,s=e.strideHeight,c=e.strideWidth,l=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,h=e.outChannels/e.inChannels,v="",m="";n&&(v=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",m="result = activation(result);");var g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+v+"\n\n      const ivec2 strides = ivec2("+s+", "+c+");\n      const ivec2 pads = ivec2("+a+", "+u+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+h+";\n        int q = d2 - d1 * "+h+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+d+"; wR++) {\n          int xR = xRCorner + wR * "+l+";\n\n          if (xR < 0 || xR >= "+o+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+p+"; wC++) {\n            int xC = xCCorner + wC * "+f+";\n\n            if (xC < 0 || xC >= "+i+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+g+"\n        "+m+"\n        setOutput(result);\n      }\n    "},Ap=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var o=e.inHeight,i=e.inWidth,a=e.padInfo.top,u=e.padInfo.left,s=e.strideHeight,c=e.strideWidth,l=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,p=e.filterWidth,h=p,v="int xR; int xC; int xCOffset;",m=0;m<d;m++)for(var g=0;g<p;g++)v+="\n          vec4 xTexelR"+m+"C"+2*g+" = vec4(0.);\n          vec4 wR"+m+"C"+g+" = vec4(0.);\n          vec4 xR"+m+"C"+g+" = vec4(0.);";for(m=0;m<d;m++)for(var y=0;y<h;y++){if(v+="\n          xR = xRCorner + "+m*l+";\n          xC = xCCorner + "+(g=2*y)*f+";\n        ",1===c){if(g<p&&(v+=u%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+o+" && xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+i+") {\n                    xTexelR"+m+"C"+g+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+o+" && xCOffset >= 0 && xCOffset < "+i+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+i+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+m+"C"+g+" = vec4(previous.zw, xTexelR"+m+"C"+g+".xy);\n                } else {\n                  xR"+m+"C"+g+" = vec4(0, 0, xTexelR"+m+"C"+g+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+o+" && xC >= 0 && xC < "+i+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = xTexelR"+m+"C"+g+";\n              ",g+1<p)){var b=u%2==0?zu(f):f;f%2==0&&u%2==1||f%2!=0&&u%2!=1?(v+="\n                  xCOffset = xC + "+u%2+" + "+b+";\n\n                  if(xR >= 0 && xR < "+o+" &&\n                    xCOffset >= 0 && xCOffset < "+i+") {\n                    xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",f>1&&(v+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+o+" &&\n                      xCOffset >= 0 && xCOffset < "+i+") {\n                      xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+m+"C"+g+" = vec4(0.);\n                    }\n                  "),v+="\n                  xR"+m+"C"+(g+1)+" = vec4(\n                    xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".xy);\n                "):v+="\n                  xCOffset = xC + "+b+";\n\n                  if(xR >= 0 && xR < "+o+" &&\n                    xCOffset >= 0 && xCOffset < "+i+") {\n                    xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+m+"C"+(g+1)+" = xTexelR"+m+"C"+(g+2)+";\n                "}}else g<p&&(v+="\n              if(xR >= 0 && xR < "+o+") {\n            ",u%2==1?(v+="\n                xCOffset = xC + 1 - "+c+";\n                if(xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+i+") {\n                  xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+m+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = vec4(\n                  xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".zw);\n              ",g+1<p&&(v+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+c+";\n                  if(xCOffset >= 0 && xCOffset < "+i+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+m+"C"+(g+1)+" = vec4(xTexelR"+m+"C"+(g+2)+".xy, final.xy);\n                ")):(v+="\n                if(xC >= 0 && xC < "+i+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+c+";\n                if(xCOffset >= 0 && xCOffset < "+i+") {\n                  xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = vec4(\n                  xTexelR"+m+"C"+g+".xy, xTexelR"+m+"C"+(g+2)+".xy);\n              ",g+1<p&&(v+="\n                  xR"+m+"C"+(g+1)+" = vec4(\n                    xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".zw);\n                ")),v+="}");g<p&&(v+="\n            vec4 wTexelR"+m+"C"+g+" = getW("+m+", "+g+", d1, q);\n            wR"+m+"C"+g+" = vec4(wTexelR"+m+"C"+g+".xz, wTexelR"+m+"C"+g+".xz);\n          ",g+1<p&&(v+="\n              vec4 wTexelR"+m+"C"+(g+1)+" = getW("+m+", "+(g+1)+", d1, q);\n              wR"+m+"C"+(g+1)+" =\n                vec4(wTexelR"+m+"C"+(g+1)+".xz, wTexelR"+m+"C"+(g+1)+".xz);"))}for(m=0;m<d;m++)for(g=0;g<p;g++)v+="dotProd += xR"+m+"C"+g+" * wR"+m+"C"+g+";";var x="",w="";n&&(x=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",w="result = activation(result);");var E=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+x+"\n\n      const ivec2 strides = ivec2("+s+", "+c+");\n      const ivec2 pads = ivec2("+a+", "+u+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+v+"\n\n        vec4 result = dotProd;\n        "+E+"\n        "+w+"\n        setOutput(result);\n      }\n    "},Rp=function(e,t,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],a=e[1],u=e[2],s=e[3],c=t[0],l=n[0],f=n[1];this.outputShape=[c,l,f,s];var d="bilinear"===r?1:0,p=[a-1+".0",u-1+".0"],h=p[0],v=p[1],m=l>1?[""+(a-1)/(l-1),"(y2-y1) * height_ratio","y1*"+h+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+h],g=m[0],y=m[1],b=m[2],x=f>1?[""+(u-1)/(f-1),"(x2-x1) * width_ratio","x1*"+v+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+v],w=x[0],E=x[1],C=x[2];this.userCode="\n      const float height_ratio = float("+g+");\n      const float width_ratio = float("+w+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+i+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+E+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+h+" ) {\n          setOutput(float("+o+"));\n          return;\n        }\n        float in_x = "+C+";\n        if( in_x < 0.0 || in_x > "+v+" ) {\n          setOutput(float("+o+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+d+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},Np=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,o=e[e.length-1],i=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+o+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+Zd(r)+" coords = getOutputCoords();\n        int end = "+Ip(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+o+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+i+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+Ip(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function Ip(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var Pp=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=nc.DENSE;var t=lc(e),n=Bd();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Vd(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},Dp=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=nc.DENSE;var t=lc(e),n=Bd();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Vd(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},Mp=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),Fp=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},Lp=function(e){this.variableNames=["A"],this.outTexUsage=rc.DOWNLOAD;var t=Bd();this.outputShape=e,this.userCode="\n      "+Wd+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},jp=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=rc.DOWNLOAD;var t=Bd();this.outputShape=e,this.userCode="\n      "+Wd+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},Bp=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=Bd(),o=t[0],i=t[1];this.outputShape=e;var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      "+zd(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+i+";\n        int c = imod(flatIndex, "+i+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+i+".0, "+o+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+a+", 0., 0., 0.);\n      }\n    "},Vp=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Bd(),o=t[0],i=t[1];this.outputShape=e;var a="",u="result";n&&(u="floor(result * 255. + 0.5)");for(var s=0;s<=1;s++)for(var c=0;c<=1;c++){var l=2*s+c;a+="\n          localCoords = coords;\n          if(localCoords[2] + "+c+" < "+e[2]+") {\n            localCoords[2] += "+c+";\n            if(localCoords[1] + "+s+" < "+e[1]+") {\n              localCoords[1] += "+s+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+i+";\n              c = imod(flatIndex, "+i+");\n              uv = (vec2(c, r) + halfCR) / vec2("+i+".0, "+o+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+l+"] = values[0];\n              } else if(offset == 1) {\n                result["+l+"] = values[1];\n              } else if(offset == 2) {\n                result["+l+"] = values[2];\n              } else {\n                result["+l+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+zd(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+a+"\n\n        "+r.output+" = "+u+";\n      }\n    "},zp=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+o+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+i+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},Wp=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),Up=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var o=Zd(this.rank),i=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],i=0;i<e.length;i++)i===t?o.push("int(getIndices("+r[i]+"))"):o.push(""+r[i]);return o.join()}(e,n);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "},Hp=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=Zd(t.length),o=Zd(n.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+o+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+i+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function Gp(e,t){var n=Bd();return gc(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function qp(e,t){return kc(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Kp(e,t){return Sc(e,t,new Uint16Array([0,1,2,2,1,3]))}function $p(e,t,n,r,o,i,a){Tc(n,r);var u=Oc(e,t),s=e.TEXTURE_2D;return pc(e,t,(function(){return e.bindTexture(s,u)})),pc(e,t,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),pc(e,t,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),pc(e,t,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),pc(e,t,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),pc(e,t,(function(){return e.texImage2D(s,0,o,n,r,0,i,a,null)})),pc(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),u}function Xp(e,t,n,r,o){var i=cc(n,r);return $p(e,t,i[0],i[1],o.internalFormatFloat,o.textureFormatFloat,e.FLOAT)}function Yp(e,t,n,r,o){var i=cc(n,r);return $p(e,t,i[0],i[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function Qp(e,t,n,r,o){var i=cc(n,r);return $p(e,t,i[0],i[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function Zp(e,t,n,r,o){var i=fc(n,r);return $p(e,t,i[0],i[1],o.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function Jp(e,t,n,r,o){var i=fc(n,r);return $p(e,t,i[0],i[1],o.internalFormatPackedHalfFloat,e.RGBA,o.textureTypeHalfFloat)}function eh(e,t,n,r){return pc(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),Rc(e,t,n,"clipSpacePos",r,3,20,0)&&Rc(e,t,n,"uv",r,2,20,12)}function th(e,t,n,r,o,i,a){var u,s,c;pc(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),i instanceof Uint8Array?(u=new Uint8Array(r*o*4),s=e.UNSIGNED_BYTE,c=e.RGBA):(u=new Float32Array(r*o*4),s=e.FLOAT,c=a.internalFormatPackedFloat),u.set(i),pc(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,c,r,o,0,e.RGBA,s,u)})),pc(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function nh(e,t,n,r){pc(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),r.data instanceof Uint8Array?pc(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)})):pc(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)})),pc(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function rh(e,t,n,r,o){var i=e.createBuffer();pc(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,i)}));var a=16*n*r;return pc(e,t,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)})),pc(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)})),pc(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),i}function oh(e,t,n){var r=e,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function ih(e,t,n,r,o){var i=cc(n,r),a=i[0],u=i[1],s=new Uint8Array(n*r*4);return pc(e,t,(function(){return e.readPixels(0,0,a,u,o.downloadTextureFormat,e.UNSIGNED_BYTE,s)})),new Float32Array(s.buffer)}function ah(e,t,n,r,o,i,a,u){var s=e,c=new Float32Array(function(e,t){var n=fc(e,t);return n[0]*n[1]*4}(i,a));return s.bindBuffer(s.PIXEL_PACK_BUFFER,t),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,c),s.bindBuffer(s.PIXEL_PACK_BUFFER,null),c}function uh(e,t,n,r){var o=new Float32Array(n*r*4);return pc(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,o)})),o}var sh=Object.freeze({createVertexShader:Gp,createVertexBuffer:qp,createIndexBuffer:Kp,createFloat32MatrixTexture:Xp,createFloat16MatrixTexture:Yp,createUnsignedBytesMatrixTexture:Qp,createPackedMatrixTexture:Zp,createFloat16PackedMatrixTexture:Jp,bindVertexProgramAttributeStreams:eh,uploadDenseMatrixToTexture:th,uploadPixelDataToTexture:nh,createBufferFromOutputTexture:rh,downloadFloat32MatrixFromBuffer:oh,downloadByteEncodedFloatMatrixFromOutputTexture:ih,downloadPackedMatrixFromBuffer:ah,downloadMatrixFromPackedOutputTexture:uh}),ch=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=Ru().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,uc(t,e)):this.gl=sc(t);var n="WEBGL_color_buffer_float";if(1===Ru().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=mc(this.gl,this.debug,"OES_texture_float"),Yc(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=mc(this.gl,this.debug,"OES_texture_half_float");else if(Ru().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Yc(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=mc(this.gl,this.debug,"EXT_color_buffer_half_float");else if(Ru().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",Yc(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!Yc(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=qp(this.gl,this.debug),this.indexBuffer=Kp(this.gl,this.debug),this.framebuffer=Ac(this.gl,this.debug),this.textureConfig=dc(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return Ru().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;pc(t,this.debug,(function(){return t.finish()})),pc(t,this.debug,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),pc(t,this.debug,(function(){return t.deleteFramebuffer(e.framebuffer)})),pc(t,this.debug,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),pc(t,this.debug,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),pc(t,this.debug,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),Xp(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),Yp(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),Qp(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),nh(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),th(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),Jp(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),Zp(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(Fc(this.gl,this.debug,this.framebuffer),this.outputTexture=null),pc(this.gl,this.debug,(function(){return t.gl.deleteTexture(e)}))},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return ih(r.gl,r.debug,t,n,r.textureConfig)}))},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,o,i){return ah(this.gl,e,0,0,0,o,i,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return oh(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=rh(this.gl,this.debug,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(Ru().getBool("WEBGL_FENCE_API_ENABLED")){var o=e,i=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=o.clientWaitSync(i,0,0);return e===o.ALREADY_SIGNALED||e===o.CONDITION_SATISFIED},t=i}else Ru().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,Ru().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return uh(r.gl,r.debug,t,n)}))},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=yc(t,this.debug,e),r=Gp(t,this.debug),o=Ec(t,this.debug);return pc(t,this.debug,(function(){return t.attachShader(o,r)})),pc(t,this.debug,(function(){return t.attachShader(o,n)})),Cc(t,this.debug,o),this.debug&&_c(t,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=eh(t,this.debug,this.program,this.vertexBuffer)),o},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&pc(this.gl,this.debug,(function(){return t.gl.deleteProgram(e)}))},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&_c(this.gl,this.debug,this.program),pc(this.gl,this.debug,(function(){return t.gl.useProgram(e)}))},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?Ic(this.gl,this.debug,e,t):Pc(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),pc(this.gl,this.debug,(function(){return n.gl.getAttribLocation(e,t)}))},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Dc(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=fc(t,n),o=r[0],i=r[1];this.setOutputMatrixTextureDriver(e,o,i)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&_c(this.gl,this.debug,this.program),Lc(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),pc(e,this.debug,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),pc(this.gl,this.debug,(function(){return e.gl.finish()}))},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=mc(this.gl,this.debug,2===Ru().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===Ru().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),o=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,o),o},e.prototype.endQuery=function(){if(2!==Ru().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return Su(this,void 0,void 0,(function(){var t=this;return Ou(this,(function(n){switch(n.label){case 0:return[4,Ju((function(){return t.disposed||t.isQueryAvailable(e,Ru().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return n.sent(),[2,this.getQueryTime(e,Ru().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||Ju((function(){return n.pollItems(),0===n.itemsToPoll.length}))},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),Mc(this.gl,this.debug,e,this.framebuffer),this.debug&&Lc(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(Mc(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Lc(this.gl)):Fc(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;Mc(r,this.debug,e,this.framebuffer),this.debug&&Lc(r),this.outputTexture=e,pc(r,this.debug,(function(){return r.viewport(0,0,t,n)})),pc(r,this.debug,(function(){return r.scissor(0,0,t,n)}))},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var o=this;this.throwIfDisposed(),pc(this.gl,this.debug,(function(){return o.gl.scissor(e,t,n,r)}))},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function lh(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach((function(e,n){var r=e.logicalShape,o=t[n],i=o.shape;if(!$u(r,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+i+" must match");if(!e.isUniform||!o.isUniform){var a=e.texShape,u=o.isUniform?null:o.texData.texShape;if(!$u(a,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+u+" must match")}}))}var fh=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,o=n.inChannels,i=n.strideWidth,a=n.strideHeight,u=n.padInfo,s=n.outWidth,c=n.dilationWidth,l=n.dilationHeight,f=n.dataFormat,d=u.left,p=u.top,h=o*r,v=Bd(),m="channelsLast"===f,g=m?0:1,y=m?1:2,b="",x=0;x<=1;x++)for(var w=0;w<=1;w++)b+="\n          blockIndex = rc.y + "+w+";\n          pos = rc.x + "+x+";\n\n          if(blockIndex < "+e[1]+" && pos < "+e[0]+") {\n            offsetY = int(blockIndex / ("+s+")) * "+a+" - "+p+";\n            d0 = offsetY + "+l+" * (pos / "+h+");\n\n            if(d0 < "+t[g]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+s+".) * "+i+". - "+d+".);\n              d1 = offsetX + "+c+" * (int(mod(float(pos), "+h+".) / "+o+".));\n\n              if(d1 < "+t[y]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+o+".));\n\n                if ("+m+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*x+w)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*x+w)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+b+"\n\n        "+v.output+" = result;\n      }\n    "},dh=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[];var i,a=t,u=e[3]-1;this.outputShape=e;var s="float("+n+") + float("+r+") * sum";i=.5===o?"inversesqrt("+s+")":1===o?"1.0/("+s+")":"exp(log("+s+") * float(-"+o+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+a+"; j <= "+a+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+u+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+i+";\n        setOutput(val);\n      }\n    "},ph=function(e,t,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+o+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+o+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},hh=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,a=t,u=e[3]-1;this.outputShape=e;var s="float("+n+") + float("+r+") * sum";i=.5===o?"inversesqrt("+s+")":1===o?"1.0/("+s+")":"exp(log("+s+") * float(-"+o+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+a+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+a+"; j <= "+a+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+u+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+i+";\n        setOutput(result);\n      }\n    "},vh=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,o=e.effectiveFilterHeight,i=e.effectiveFilterWidth,a=o-1-e.padInfo.top,u=i-1-e.padInfo.left,s=o*i-1;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+u+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+o+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+i+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+s+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+i+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},mh=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.dilationDepth,i=e.dilationHeight,a=e.dilationWidth,u=e.effectiveFilterDepth,s=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=u-1-e.padInfo.front,f=s-1-e.padInfo.top,d=c-1-e.padInfo.left,p=u*s*c-1;this.userCode="\n      const ivec3 pads = ivec3("+l+", "+f+", "+d+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+u+";\n           wD += "+o+") {\n          float dyD = float(dyDCorner + wD) / "+t+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+s+";\n              wR += "+i+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+a+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+p+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+s+" * "+c+" +\n                  wR * "+c+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},gh=function(e,t,n,r,o,i,a){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===i&&(i=null),void 0===a&&(a=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var u=n?e[1]:e[2],s=Math.ceil(u/2),c=n?"i * 2, rc.y":"rc.y, i * 2",l=r?"rc.z, i * 2":"i * 2, rc.z",f=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],d=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],p="",h="";i&&(p=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+i+"\n        }":"vec4 activation(vec4 x) {\n          "+i+"\n        }",h="result = activation(result);");var v=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+p+"\n\n      const float sharedDimension = "+s+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+s+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+c+");\n          vec4 b = getMatrixB(rc.x, "+l+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+f[0]+" * "+d[0]+");\n          result += ("+f[1]+" * "+d[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+v+"\n\n        "+h+"\n\n        setOutput(result);\n      }\n    "},yh=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),bh=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},xh=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=jd("rc",t),r=Zd(t),o=function(e,t,n){if(1===e)return"rc > "+t[0];for(var r="",o=e-2;o<e;o++)r+=n[o]+" >= "+t[o],o<e-1&&(r+="||");return r}(t,e,n),i=function(e,t,n,r){if(1===e)return"";var o=r.slice(-2);return"\n    int r = "+o[0]+";\n    int c = "+o[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),a=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var o=0;o<=1;o++){for(var i=(0===r?"r":"rp1")+", "+(0===o?"c":"cp1"),a=2;a<e;a++)i=t[t.length-1-a]+","+i;n.push(i)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+o+") {\n            setOutput(vec4(0));\n          } else {\n            "+i+"\n\n            setOutput(vec4("+a+"));\n          }\n        }\n      "}},wh=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));var r=e.length,o=Zd(r),i=t.map((function(e){return e[0]})).join(","),a=t.map((function(t,n){return t[0]+e[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+o+" start = "+o+"("+i+");\n      "+o+" end = "+o+"("+a+");\n\n      void main() {\n        "+o+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+o+" coords = outC - start;\n          setOutput(getX("+u+"));\n        }\n      }\n    ":"\n        int start = "+i+";\n        int end = "+a+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},Eh=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));for(var r=e.length,o=Zd(r),i=t.map((function(e){return e[0]})).join(","),a=t.map((function(t,n){return t[0]+e[n]})).join(","),u=jd("rc",r),s=jd("source",r),c=u[r-1]+" < "+this.outputShape[r-1],l=1===r?"source":"vec2("+s.slice(-2).join()+")",f=[o+" rc = outputLoc;",u[r-1]+" += 1;\n       if("+c+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+u[r-2]+" += 1;\n       if("+u[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+u[r-1]+" += 1;\n         if("+c+") {"],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",h=0,v=1===r?2:4;h<v;h++)p+="\n        "+f[h]+"\n        if ("+d+") {\n          result["+h+"] = float("+n+");\n        } else {\n          "+o+" source = rc - start;\n          result["+h+"] = getChannel(getX("+s.join()+"), "+l+");\n        }\n      ";p+=1===r?"} ":"}}",this.userCode="\n      const "+o+" start = "+o+"("+i+");\n      const "+o+" end = "+o+"("+a+");\n\n      void main() {\n        "+o+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+p+"\n        setOutput(result);\n      }\n    "},Ch=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,o=e.strideHeight,i=e.strideWidth,a=e.dilationHeight,u=e.dilationWidth,s=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=e.padInfo.top,f=e.padInfo.left;this.outputShape=e.outShape;var d="avg"===t,p="0.0";if(d||(p="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+o+", "+i+");\n        const ivec2 pads = ivec2("+l+", "+f+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+s+";\n              wR += "+a+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+c+";\n                wC += "+u+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+c+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var h=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(h="avgValue / count");var v=4*Math.floor(r/4),m=r%4,g="\n      if ("+d+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+o+", "+i+");\n      const ivec2 pads = ivec2("+l+", "+f+");\n      const float initializationValue = "+p+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+p+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+s+";\n            wR += "+a+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+v+"; wC += 4) {\n            int xC = xCCorner + wC * "+u+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+u+", d),\n              getValue(batch, xR, xC + 2 * "+u+", d),\n              getValue(batch, xR, xC + 3 * "+u+", d)\n            );\n\n            "+g+"\n          }\n\n          int xC = xCCorner + "+v+";\n          if ("+(1===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(2===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+u+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(3===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+u+", d),\n              getValue(batch, xR, xC + 2 * "+u+", d),\n              initializationValue\n            );\n\n            "+g+"\n          }\n        }\n        setOutput("+h+");\n      }\n    "}},_h=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,o=e.strideDepth,i=e.strideHeight,a=e.strideWidth,u=e.dilationDepth,s=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterDepth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,p=e.padInfo.front,h=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;var m="avg"===t,g="0.0";if(m||(g="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+o+", "+i+", "+a+");\n        const ivec3 pads = ivec3("+p+", "+h+", "+v+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+l+";\n              wD += "+u+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+f+";\n                wR += "+s+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+d+";\n                  wC += "+c+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+f+" * "+d+" +\n                      wR * "+d+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var y=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(y="avgValue / count");var b=4*Math.floor(r/4),x=r%4,w="\n      if ("+m+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+o+", "+i+", "+a+");\n      const ivec3 pads = ivec3("+p+", "+h+", "+v+");\n      const float initializationValue = "+g+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+g+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+l+";\n            wD += "+u+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+f+";\n            wR += "+s+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+b+"; wC += 4) {\n              int xC = xCCorner + wC * "+c+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+c+", ch)\n              );\n\n              "+w+"\n            }\n\n            int xC = xCCorner + "+b+";\n            if ("+(1===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(2===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(3===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+c+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+c+", ch),\n                initializationValue\n              );\n\n              "+w+"\n            }\n          }\n          setOutput("+y+");\n        }\n      }\n    "}},kh=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,o=e.inSize,i=Math.ceil(o/n);this.outputShape=[r,i];var a="0.0",u="";"prod"===t?a="1.0":"min"===t?(a="1.0 / 1e-20",u="min"):"max"===t&&(a="-1.0 / 1e-20",u="max");var s=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?s="sumValue":"prod"===t?s="prodValue":"all"===t?s="allValue":"any"===t&&(s="anyValue");var c=4*Math.floor(n/4),l=n%4,f="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+u+"(values, minMaxValue);\n      }\n    ",d="vec4";"all"===t?(a="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(a="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");var p="";o%n>0&&(p="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+a+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+p+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+a+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+c+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+f+"\n        }\n\n        int inIdx = inOffset + "+c+";\n        if ("+(1===l)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(2===l)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(3===l)+") {\n          "+d+" values = "+d+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+f+"\n        }\n        setOutput("+s+");\n      }\n    "},Sh=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),n+="\n        "+o+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+Vd(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+zd(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},Oh=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],i=r[2],a=e.shape,u=a[1],s=a[2],c=[n&&u>1?o-1:o,n&&s>1?i-1:i],l=[n&&u>1?u-1:u,n&&s>1?s-1:s],f=c[0]/l[0],d=c[1]/l[1],p=1/f,h=1/d,v=2*Math.ceil(p)+2,m=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+d+");\n\n        const float invHeightScale = float("+p+");\n        const float invWidthScale = float("+h+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+u+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+s+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(o-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(i-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Th=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],i=e[1],a=e[2],u=e[3];this.outputShape=[o,t,n,u];var s=[r&&t>1?i-1:i,r&&n>1?a-1:a],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+s[0]/c[0]+",\n          "+s[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+i+".0, "+a+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},Ah=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=e[0],i=e[1],a=e[2],u=e[3];this.outputShape=[o,t,n,u];var s=[r&&t>1?i-1:i,r&&n>1?a-1:a],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+s[0]/c[0]+",\n          "+s[1]/c[1]+",\n          "+s[1]/c[1]+");\n      const vec3 inputShapeRC = vec3("+i+".0, "+a+".0,\n                                     "+a+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(u-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},Rh=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],i=r[2],a=e.shape,u=a[1],s=a[2],c=[n&&u>1?o-1:o,n&&s>1?i-1:i],l=[n&&u>1?u-1:u,n&&s>1?s-1:s],f=c[0]/l[0],d=c[1]/l[1],p=1/f,h=1/d,v=2*Math.ceil(p)+2,m=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+d+");\n\n        const float invHeightScale = float("+p+");\n        const float invWidthScale = float("+h+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+u+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+s+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+c[0]+") *\n                (float(dyR) / float("+l[0]+"));\n\n            float sourceFracCol =\n                float("+c[1]+") *\n                  (float(dyC) / float("+l[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Nh=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],i=e[1],a=e[2],u=e[3];this.outputShape=[o,t,n,u];var s=[r&&t>1?i-1:i,r&&n>1?a-1:a],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],l=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+s[0]/c[0]+",\n          "+s[1]/c[1]+");\n      const vec2 inputShapeRC = vec2("+i+".0, "+a+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+l+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},Ih=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map((function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)})).join(","),o=Zd(n);this.userCode="\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},Ph=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=jd("rc",n),o=r[n-1]+" + 1 < "+this.outputShape[n-1],i=r[n-2]+" + 1 < "+this.outputShape[n-2],a=Zd(n);function u(n){var r=e.map((function(r,o){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(o,n)}));return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+o+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+a+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(e){return u(e)}(r.slice())+";\n          if("+o+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",u(e)}(r.slice())+";\n          }\n          if("+i+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",u(e)}(r.slice())+";\n            if("+o+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",u(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},Dh=function(e,t,n,r,o,i,a){void 0===a&&(a=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var u=Zd(o.length),s=Zd(i.length),c="";1===n?c="i":2===n&&(c="i, j");var l="getIndices("+c+")",f="";1===r?f="i":2===r&&(f="i, coords[1]");var d="getUpdates("+f+")",p=t>1?"strides[j]":"strides";this.userCode="\n        "+u+" strides = "+u+"("+o+");\n\n        void main() {\n          "+s+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+l+");\n              flattenedIndex += index * "+p+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+d+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},Mh=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,o=e.inSize,i=e.numSegments,a=i*Math.ceil(o/n);this.outputShape=[r,a];var u=4*Math.floor(n/4),s=n%4,c="\n        sumValue += dot(values, segFilter);\n    ",l="";o%n>0&&(l="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      ");var f="";o%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+l+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+f+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+i+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+i+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+u+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+c+"\n        }\n\n        int inIdx = inOffset + "+u+";\n        if ("+(1===s)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+c+"\n        } else if ("+(2===s)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+c+"\n        } else if ("+(3===s)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+c+"\n        }\n        setOutput(sumValue);\n      }\n    "},Fh=function(e,t,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)o="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],u=[],s=0;s<t.length;s++)u.push(""+i[s]),s<e&&a.push(""+i[s]);r=a.join(),o=u.join()}var c=Zd(n);this.userCode="\n      void main() {\n        "+c+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+o+"));\n        } else {\n          setOutput(getB("+o+"));\n        }\n      }\n    "},Lh=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=Zd(this.rank),r="uniform int start["+this.rank+"];",o=function(e){if(1===e)return"sourceLoc";if(e<=6)return jh.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map((function(e,t){return"sourceLoc."+jh[t]+" = start["+t+"] + coords."+jh[t]+";"})).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+o+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),jh=["x","y","z","w","u","v"],Bh=function(){function e(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=Zd(this.rank),n=jd("coords",this.rank),r=jd("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",i="getChannel(getSource("+r.join()+"), "+o+")",a="\n      result.x = "+i+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+i+";\n        --"+r[this.rank-1]+";\n      }\n    ",u=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+i+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+i+";\n        }\n      }\n    ",s=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map((function(e,t){return"start["+t+"]"})).join()+");":e.map((function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"})).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+s+"\n        vec4 result = vec4(0.);\n        "+a+"\n        "+u+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Vh=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,o=Zd(n.length),i=Zd(n.length),a="";if(1===r)a="coords * strides + begin";else{var u=0;a=n.map((function(e,t){return u++,1===n.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(u-1)+"] * strides["+t+"] + begin["+t+"]"})).join(",")}this.userCode="\n      "+o+" begin = "+o+"("+e+");\n      "+o+" strides = "+o+"("+t+");\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+a+"));\n      }\n    "},zh=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,o=Wh(t,n),i=Uh(e,o,n);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var a=this.freeTextures[i].shift();return this.usedTextures[i].push(a),a}return this.numUsedTextures++,this.log(),o===oc.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):o===oc.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):o===oc.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):o===oc.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):o===oc.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var o=Uh(t,Wh(n,r),r);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(e),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures[o],a=i.indexOf(e);if(a<0)throw new Error("Cannot release a texture that was never provided by this texture manager");i.splice(a,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var t in this.usedTextures)this.usedTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function Wh(e,t){if(e===rc.UPLOAD)return oc.PACKED_2X2_FLOAT32;if(e===rc.RENDER||null==e)return function(e){return Ru().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?oc.PACKED_2X2_FLOAT32:oc.UNPACKED_FLOAT32:e?oc.PACKED_2X2_FLOAT16:oc.UNPACKED_FLOAT16}(t);if(e===rc.DOWNLOAD||e===rc.PIXELS)return oc.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function Uh(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var Hh=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var o=Zd(this.rank),i=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],o=0;o<e.length;o++)r.push("imod("+n[o]+", "+e[o]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "},Gh=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var o=Zd(this.rank),i=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),o=0;o<e.length;o++)r[e[o]]=n[o];return r.join()}(t);this.userCode="\n    void main() {\n      "+o+" resRC = getOutputCoords();\n      setOutput(getA("+i+"));\n    }\n    "},qh=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=Zd(this.rank),i=Ld("rc",this.rank),a=new Array(this.rank);for(r=0;r<t.length;r++)a[t[r]]=i[r];var u="vec2("+a.slice(-2).join()+")",s="++"+i[this.rank-1]+" < "+n[this.rank-1],c="getChannel(getA("+a.join()+"), "+u+")";this.userCode="\n    void main() {\n      "+o+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+c+";\n      if("+s+") {\n        result[1] = "+c+";\n      }\n      --"+i[this.rank-1]+";\n      if(++"+i[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+c+";\n        if("+s+") {\n          result[3] = "+c+";\n        }\n      }\n      setOutput(result);\n    }\n    "},Kh=1.7580993408473768,$h=1.0507009873554805,Xh=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Yh="if (isnan(x)) return x;",Qh="return abs(x);",Zh=Yh+"\n  return (x < 0.0) ? 0.0 : x;\n",Jh=Yh+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",ev="return (x >= 0.0) ? x : (exp(x) - 1.0);",tv="return -x;",nv="return ceil(x);",rv="return floor(x);",ov="return exp(x);",iv="return exp(x) - 1.0;",av="return x;",uv="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",sv="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cv="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",lv=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},fv=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=jd("rc",t),r=Zd(t),o=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),i=n.slice(-2),a=t<=1?"rc":"vec2("+i.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+o+");\n\n        setOutput(getChannel(packedInput, "+a+"));\n      }\n    "},dv={};function pv(e,t){if(void 0===t&&(t=!1),"linear"===e)return"return x;";if("relu"===e)return t?uv:Zh;if("elu"===e)return t?cv:ev;if("relu6"===e)return t?sv:Jh;if("prelu"===e)return t?dp:lp;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var hv=function(e){function t(t){var n,r=e.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!Ru().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){var o=sc(Ru().getNumber("WEBGL_VERSION"));r.binaryCache=((n=Ru().getNumber("WEBGL_VERSION"))in dv||(dv[n]={}),dv[n]),r.gpgpu=new ch(o),r.canvas=o.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=t,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=t.gl.canvas;return r.textureManager=new zh(r.gpgpu),r.numMBBeforeWarning=null==Ru().global.screen?1024:Ru().global.screen.height*Ru().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new Qf(r,Js),r}return ku(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(e,t,n){if(Ru().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:rc.UPLOAD}),r},t.prototype.move=function(e,t,n,r){if(Ru().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:rc.UPLOAD})},t.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,o=t.complexTensors,i=t.slice,a=t.shape,u=t.isPacked;if(null!=i){var s;s=u?new lv(a,av):new Xh(a,av);var c=this.runWebGLProgram(s,[{dataId:e,shape:a,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeData(c.dataId),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var f,d,p=null!=this.activeTimers;return p&&(f=Es()),d="complex64"===r?yd(o.real.dataSync(),o.imag.dataSync()):this.getValuesFromTexture(e),p&&(this.downloadWaitMs+=Es()-f),this.convertAndCacheOnCPU(e,d)},t.prototype.read=function(e){return Su(this,void 0,void 0,(function(){var t,n,r,o,i,a,u,s,c,l,f,d,p,h,v,m,g,y,b,x,w,E;return Ou(this,(function(C){switch(C.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise((function(e){return t.push(e)}))];if(n=this.texData.get(e),r=n.values,o=n.shape,i=n.slice,a=n.dtype,u=n.complexTensors,s=n.isPacked,null!=i)return void 0,c=s?new lv(o,av):new Xh(o,av),l=this.runWebGLProgram(c,[{dataId:e,shape:o,dtype:a}],a),f=this.read(l.dataId),this.disposeData(l.dataId),[2,f];if(null!=r)return[2,this.convertAndCacheOnCPU(e)];if(!Ru().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===Ru().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return d=null,"complex64"!==a&&Ru().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(e),h=this.texData.get(p.dataId),d=(E=this.gpgpu).createBufferFromTexture.apply(E,[h.texture].concat(lc(o)))),this.pendingRead.set(e,[]),"complex64"===a?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:C.sent(),C.label=2;case 2:return"complex64"!==a?[3,4]:[4,Promise.all([u.real.data(),u.imag.data()])];case 3:return m=C.sent(),g=m[0],y=m[1],v=yd(g,y),[3,5];case 4:null==d?v=this.getValuesFromTexture(e):(b=Ku(o),v=this.gpgpu.downloadFloat32MatrixFromBuffer(d,b)),C.label=5;case 5:return null!=p&&this.disposeData(p.dataId),x=this.convertAndCacheOnCPU(e,v),w=this.pendingRead.get(e),this.pendingRead.delete(e),w.forEach((function(e){return e(x)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,x]}}))}))},t.prototype.checkNumericalProblems=function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!hc(n)){if(Ru().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},t.prototype.getValuesFromTexture=function(e){var t,n=this.texData.get(e),r=n.shape,o=n.dtype,i=n.isPacked,a=Ku(r);if(Ru().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var u=this.decode(e),s=this.texData.get(u.dataId),c=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[s.texture].concat(lc(r))).subarray(0,a);return this.disposeData(u.dataId),c}var l=Ru().getBool("WEBGL_PACK")&&!0===i,f=l?Uc(r):r,d=l?new jp(f):new Lp(f),p=this.runWebGLProgram(d,[{shape:f,dtype:o,dataId:e}],"float32"),h=this.texData.get(p.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture,h.texShape[0],h.texShape[1]).subarray(0,a);return this.disposeData(p.dataId),v},t.prototype.time=function(e){return Su(this,void 0,void 0,(function(){var t,n,r,o,i,a,u;return Ou(this,(function(s){switch(s.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),o=qu(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),i=qu(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=t,r&&(this.programTimersStack=null),a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},Ru().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return u=s.sent(),a.kernelMs=Wu(u),a.getExtraProfileInfo=function(){return u.map((function(e,t){return{name:i[t],ms:e}})).map((function(e){return e.name+": "+e.ms})).join(", ")},[3,3];case 2:a.kernelMs={error:"WebGL query timers are not supported in this environment."},s.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,a]}}))}))},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return Ru().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Es(),endMs:null}},t.prototype.endTimer=function(e){return Ru().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Es(),e)},t.prototype.getQueryTime=function(e){return Su(this,void 0,void 0,(function(){var t;return Ou(this,(function(n){return Ru().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]}))}))},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}}},t.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,o=t.texShape,i=t.usage,a=t.isPacked,u=t.slice,s=u&&u.origDataId||e,c=this.dataRefCount.get(s);c>1?this.dataRefCount.set(s,c-1):(this.dataRefCount.delete(s),null!=n&&(this.numBytesInGPU-=this.computeBytes(o,r),this.textureManager.releaseTexture(n,o,i,a)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.getCPUBackend=function(){return Ru().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=Js.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,t){var n=this;return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every((function(e){return null==n.texData.get(e.dataId).texture&&e.size<t}))},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(e,t){var n=this.makeOutput(e.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:Js.keep(e.clone()),imag:Js.keep(t.clone())},n},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n);if(0===Ku(n))return Sl([],n,e.dtype);var r=this.texData.get(e.dataId).isPacked,o=qf(e.shape,t,n);if(r||!o){var i=Ru().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Bh(n):new Lh(n),a=i.getCustomSetupFunc(t);return this.compileAndRun(i,[e],null,a)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},t.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),o=this.makeOutput(n,e.dtype),i=this.texData.get(o.dataId);Object.assign(i,r),i.shape=n,i.dtype=e.dtype;var a=Kf(t,e.strides);r.slice&&(a+=r.slice.flatOffset),i.slice={flatOffset:a,origDataId:r.slice&&r.slice.origDataId||e.dataId};var u=this.dataRefCount.get(i.slice.origDataId)||1;return this.dataRefCount.set(i.slice.origDataId,u+1),o},t.prototype.stridedSlice=function(e,t,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r);var o=Uf(t,n,r);if(o.some((function(e){return 0===e})))return Sl([],o);var i=new Vh(t,r,o);return this.compileAndRun(i,[e])},t.prototype.reverse=function(e,t){var n=Ru().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ph(e.shape,t):new Ih(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.concat=function(e,t){if("complex64"===e[0].dtype){var n=e.map((function(e){return _l(e)})),r=e.map((function(e){return kl(e)}));return Cl(this.concat(n,t),this.concat(r,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(1===e.length)return e[0];if(e.length>Ru().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(e.length/2),i=this.concat(e.slice(0,o),t),a=this.concat(e.slice(o),t);return this.concat([i,a],t)}if(Ru().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var u=new yp(e.map((function(e){return e.shape})),t);return this.compileAndRun(u,e)}var s=wl(e.map((function(e){return e.shape})),t),c=e.map((function(e){return e.as2D(-1,Ku(e.shape.slice(t)))})),l=new gp(c.map((function(e){return e.shape})));return this.compileAndRun(l,c).reshape(s)},t.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(Ru().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,tv,e.dtype);var t=new Xh(e.shape,tv);return this.compileAndRun(t,[e])},t.prototype.batchMatMul=function(e,t,n,r){var o=n?e.shape[2]:e.shape[1],i=r?t.shape[1]:t.shape[2],a=n?e.shape[1]:e.shape[2],u=e.shape[0];if((1===o||1===i)&&a>1e3){n&&(e=e.transpose([0,2,1])),r&&(t=t.transpose([0,2,1]));var s=1===i?e:e.as3D(u,a,1),c=1===i?2:1,l=1===i?t.as3D(u,1,a):t;return this.multiply(s,l).sum(c,!0)}var f=Gs(e.dtype,t.dtype),d=new gh(e.shape,[u,o,i],n,r);return this.compileAndRun(d,[e,t],f)},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,o=e.transposeB,i=e.bias,a=e.activation,u=e.preluActivationWeights,s=r?t.shape[2]:t.shape[1],c=o?n.shape[1]:n.shape[2],l=t.shape[0],f=Gs(t.dtype,n.dtype),d=null!=i,p=null!=u,h=a?pv(a,!0):null,v=new gh(t.shape,[l,s,c],r,o,d,h,p),m=[t,n];return i&&m.push(i),u&&m.push(u),this.compileAndRun(v,m,f)},t.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),o=new ap("return areal * breal - aimag * bimag;",e.shape,t.shape),i=new ap("return areal * bimag + aimag * breal;",e.shape,t.shape),a=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag),this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)],u=this.compileAndRun(o,a),s=this.compileAndRun(i,a),c=this.complex(u,s);return u.dispose(),s.dispose(),c}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,cp,e.dtype);var l=new fp(cp,e.shape,t.shape);return this.compileAndRun(l,[e,t],e.dtype)},t.prototype.batchNormalization=function(e,t,n,r,o,i){var a=[e,t,n],u=null;null!=i&&(u=i.shape,a.push(i));var s=null;if(null!=o&&(s=o.shape,a.push(o)),Ru().getBool("WEBGL_PACK_NORMALIZATION")){var c=new ip(e.shape,t.shape,n.shape,u,s,r);return this.compileAndRun(c,a)}var l=new op(e.shape,t.shape,n.shape,u,s,r);return this.compileAndRun(l,a)},t.prototype.localResponseNormalization4D=function(e,t,n,r,o){var i=Ru().getBool("WEBGL_PACK_NORMALIZATION")?new hh(e.shape,t,n,r,o):new dh(e.shape,t,n,r,o);return this.compileAndRun(i,[e])},t.prototype.LRNGrad=function(e,t,n,r,o,i,a){var u=new ph(t.shape,r,o,i,a);return this.compileAndRun(u,[t,n,e])},t.prototype.tile=function(e,t){if("string"===e.dtype){var n=this.readSync(e.dataId).map((function(e){return ks(e)}));return Nd(rf(e.shape,e.dtype,n),t)}var r=new Hh(e.shape,t);return this.compileAndRun(r,[e])},t.prototype.pad=function(e,t,n){var r=Ru().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Eh(e.shape,t,n):new wh(e.shape,t,n);return this.compileAndRun(r,[e])},t.prototype.transpose=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,t);var n=Ru().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new qh(e.shape,t):new Gh(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n);var r=new Up(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},t.prototype.batchToSpaceND=function(e,t,n){Uu(e.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),o=Nf(e.shape,t,r),i=If(o.length,t.length),a=Pf(e.shape,t,r),u=Df(n,t.length),s=Mf(a,n,t.length);return e.reshape(o).transpose(i).reshape(a).slice(u,s)},t.prototype.spaceToBatchND=function(e,t,n){Uu(e.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),o=[[0,0]];o.push.apply(o,n);for(var i=1+t.length;i<e.shape.length;++i)o.push([0,0]);var a=e.pad(o),u=Nf(a.shape,t,r,!1),s=If(u.length,t.length,!1),c=Pf(a.shape,t,r,!1);return a.reshape(u).transpose(s).reshape(c)},t.prototype.reduce=function(e,t,n){var r=e.shape[0],o=e.shape[1],i=Lf(o),a=new kh({windowSize:i,inSize:o,batchSize:r},t),u=this.compileAndRun(a,[e],n);return 1===u.shape[1]?u:this.reduce(u,t,n)},t.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],o=e.shape[1];null!=n&&(r=n.shape[0],o=n.shape[1]);var i=Lf(o),a=new Fd({windowSize:i,inSize:o,batchSize:r},t,null==n),u=[e];null!=n&&u.push(n);var s=this.compileAndRun(a,u,"int32");return 1===s.shape[1]?s:this.argReduce(e,t,s)},t.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null);var r=null!=n?n.shape:e.shape,o=Lf(r[r.length-1]),i=new tp(r,o,t,null==n),a=null==n?[e]:[e,n],u=this.compileAndRun(i,a,"int32");return u.rank===e.rank?this.argReducePacked(e,t,u):u},t.prototype.sum=function(e,t){ml("sum",t,e.rank);var n=hl(e.shape,t),r=n[0],o=Ku(n[1]),i=e.as2D(-1,o),a=qs(e.dtype);return this.reduce(i,"sum",a).reshape(r)},t.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var n=hl(e.shape,t),r=n[0],o=Ku(n[1]),i=e.as2D(-1,o),a=qs(e.dtype);return this.reduce(i,"prod",a).reshape(r)},t.prototype.unsortedSegmentSum=function(e,t,n){var r=0,o=gl([r],e.rank),i=e;null!=o&&(i=e.transpose(o),r=bl(1,e.rank)[0]);var a=function(e,t,n){for(var r=[],o=e.length,i=0;i<o;i++)i!==t?r.push(e[i]):r.push(n);return r}(i.shape,r,n),u=Ku([i.shape[r]]),s=i.as2D(-1,u),c=qs(e.dtype),l=this.segOpCompute(s,"unsortedSegmentSum",t,c,n).reshape(a);return null!=o&&(l=l.transpose(yl(o))),l},t.prototype.segOpCompute=function(e,t,n,r,o){var i=e.shape[0],a=e.shape[1],u=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=ms(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=ms(e,n+1);return n}(a,o),s=new Mh({windowSize:u,inSize:a,batchSize:i,numSegments:o},t),c=this.compileAndRun(s,[e,n],r);return c.shape[1]===o?c:(n=Fl(0,o).tile([a/u]),this.segOpCompute(c,t,n,r,o))},t.prototype.argMinMaxReduce=function(e,t,n){var r=[t];if(ml("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!Ru().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var o=hl(e.shape,r),i=o[0],a=Ku(o[1]),u=e.as2D(-1,a);return this.argReduce(u,n).reshape(i)}return this.argReducePacked(e,n)},t.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},t.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},t.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var o=new Np(e.shape,n,r);return this.compileAndRun(o,[e])},t.prototype.equal=function(e,t){if(Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool");var n=new fp("return float(a == b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.notEqual=function(e,t){if(Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool");var n=new fp("return float(a != b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool");var n=new fp("return float(a < b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.lessEqual=function(e,t){if(Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new fp("return float(a <= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new fp("return float(a > b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greaterEqual=function(e,t){if(Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new fp("return float(a >= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalNot=function(e){var t=new Xh(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},t.prototype.logicalAnd=function(e,t){if(Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new fp("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalOr=function(e,t){if(Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new fp("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.select=function(e,t,n){var r=new Fh(e.rank,t.shape,t.rank);return this.compileAndRun(r,[e,t,n],Gs(t.dtype,n.dtype))},t.prototype.where=function(e){ul("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Pd(e.shape,t)},t.prototype.topk=function(e,t,n){return Id(e.dataSync(),e.shape,e.dtype,t)},t.prototype.min=function(e,t){ml("min",t,e.rank);var n=hl(e.shape,t),r=n[0],o=Ku(n[1]),i=e.as2D(-1,o);return this.reduce(i,"min",i.dtype).reshape(r)},t.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var n=Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pp("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new fp("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.mod=function(e,t){var n=Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pp("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new fp("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);ml("max",t,e.rank);var n=hl(e.shape,t),r=n[0],o=Ku(n[1]),i=e.as2D(-1,o);return this.reduce(i,"max",i.dtype).reshape(r)},t.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var n=Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pp("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new fp("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.all=function(e,t){ml("all",t,e.rank);var n=hl(e.shape,t),r=n[0],o=Ku(n[1]),i=e.as2D(-1,o);return this.reduce(i,"all",i.dtype).reshape(r)},t.prototype.any=function(e,t){ml("any",t,e.rank);var n=hl(e.shape,t),r=n[0],o=Ku(n[1]),i=e.as2D(-1,o);return this.reduce(i,"any",i.dtype).reshape(r)},t.prototype.realDivide=function(e,t){if(Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0);var n=new fp("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape);return this.compileAndRun(n,[e,t],"float32")},t.prototype.floorDiv=function(e,t){if(Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new fp("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape);return this.compileAndRun(n,[e,t],"int32")},t.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,up);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var n=Gs(e.dtype,t.dtype);if(Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,up,n);var r=new fp(up,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.packedUnaryOp=function(e,t,n){var r=new lv(e.shape,t);return this.compileAndRun(r,[e],n)},t.prototype.packedBinaryOp=function(e,t,n,r,o){void 0===o&&(o=!1);var i=new pp(n,e.shape,t.shape,o);return this.compileAndRun(i,[e,t],r)},t.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,o=this.texData.get(e.dataId),i=this.texData.get(t.dataId),a=[[o.complexTensors.real,i.complexTensors.real],[o.complexTensors.imag,i.complexTensors.imag]].map((function(o){var i=o[0],a=o[1],u=r.makeComplexComponentTensorInfo(e,i),s=r.makeComplexComponentTensorInfo(t,a),c=new fp(n,e.shape,t.shape);return r.compileAndRun(c,[u,s],Gs(i.dtype,a.dtype))})),u=a[0],s=a[1],c=this.complex(u,s);return u.dispose(),s.dispose(),c},t.prototype.makeComplexComponentTensorInfo=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},t.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>Ru().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t));return this.addN([n,r])}var o=e.map((function(e){return e.dtype})).reduce((function(e,t){return Gs(e,t)})),i=e.map((function(e){return e.shape})),a=Ru().getBool("WEBGL_PACK")?new Md(e[0].shape,i):new Dd(e[0].shape,i);return this.compileAndRun(a,e,o)},t.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,sp);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var n=Gs(e.dtype,t.dtype);if(Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,sp,e.dtype);var r=new fp(sp,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.pow=function(e,t){var n=Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pp("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new fp("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),r=Gs(e.dtype,t.dtype);return this.compileAndRun(n,[e,t],r)},t.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(Ru().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,nv,e.dtype);var t=new Xh(e.shape,nv);return this.compileAndRun(t,[e])},t.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(Ru().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,rv,e.dtype);var t=new Xh(e.shape,rv);return this.compileAndRun(t,[e])},t.prototype.sign=function(e){var t=new Xh(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},t.prototype.isNaN=function(e){var t=new Xh(e.shape,"return float(isnan(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isInf=function(e){var t=new Xh(e.shape,"return float(isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isFinite=function(e){var t=new Xh(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.round=function(e){var t=new Xh(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},t.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(Ru().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,ov,e.dtype);var t=new Xh(e.shape,ov);return this.compileAndRun(t,[e])},t.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(Ru().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,iv,e.dtype);var t=new Xh(e.shape,iv);return this.compileAndRun(t,[e])},t.prototype.softmax=function(e,t){var n=ts([t],e.shape),r=this.max(e,n),o=vl(r.shape,n),i=this.subtract(e,r.reshape(o)),a=this.exp(i),u=this.sum(a,n).reshape(o);return this.realDivide(a,u)},t.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(Ru().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var t=new Xh(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(t,[e])},t.prototype.log1p=function(e){var t=new Xh(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},t.prototype.sqrt=function(e){var t=new Xh(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new Xh(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},t.prototype.reciprocal=function(e){var t=new Xh(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},t.prototype.relu=function(e){var t;return t=Ru().getBool("WEBGL_PACK")?new lv(e.shape,uv):new Xh(e.shape,Zh),this.compileAndRun(t,[e])},t.prototype.relu6=function(e){var t;return t=Ru().getBool("WEBGL_PACK")?new lv(e.shape,sv):new Xh(e.shape,Jh),this.compileAndRun(t,[e])},t.prototype.prelu=function(e,t){var n=Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pp(dp,e.shape,t.shape):new fp(lp,e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.elu=function(e){if(Ru().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,cv,e.dtype);var t=new Xh(e.shape,ev);return this.compileAndRun(t,[e])},t.prototype.eluDer=function(e,t){var n=Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pp("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new fp("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.selu=function(e){var t=new Xh(e.shape,"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = 1.7580993408473768;\n  float scale = 1.0507009873554805;\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n");return this.compileAndRun(t,[e])},t.prototype.int=function(e){var t=new Xh(e.shape,"return float(int(x));");return this.compileAndRun(t,[e],"int32")},t.prototype.clip=function(e,t,n){var r,o=(r=Ru().getBool("WEBGL_PACK_CLIP")?new vp(e.shape):new hp(e.shape)).getCustomSetupFunc(t,n);return this.compileAndRun(r,[e],null,o)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(Ru().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Qh,e.dtype);var t=new Xh(e.shape,Qh);return this.compileAndRun(t,[e])},t.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new mp(e.shape),r=[this.makeComplexComponentTensorInfo(e,t.complexTensors.real),this.makeComplexComponentTensorInfo(e,t.complexTensors.imag)];return this.compileAndRun(n,r)},t.prototype.sigmoid=function(e){var t=new Xh(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},t.prototype.softplus=function(e){var t=new Xh(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},t.prototype.sin=function(e){var t=new Xh(e.shape,"if (isnan(x)) return x;\n  return sin(x);\n");return this.compileAndRun(t,[e])},t.prototype.cos=function(e){var t=new Xh(e.shape,"if (isnan(x)) return x;\n  return cos(x);\n");return this.compileAndRun(t,[e])},t.prototype.tan=function(e){var t=new Xh(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},t.prototype.asin=function(e){var t=new Xh(e.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n");return this.compileAndRun(t,[e])},t.prototype.acos=function(e){var t=new Xh(e.shape,"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n");return this.compileAndRun(t,[e])},t.prototype.atan=function(e){var t=new Xh(e.shape,"if (isnan(x)) return x;\n  return atan(x);\n");return this.compileAndRun(t,[e])},t.prototype.atan2=function(e,t){var n=Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pp("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new fp("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.sinh=function(e){var t=new Xh(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.cosh=function(e){var t=new Xh(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.tanh=function(e){var t=new Xh(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},t.prototype.asinh=function(e){var t=new Xh(e.shape,"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));");return this.compileAndRun(t,[e])},t.prototype.acosh=function(e){var t=new Xh(e.shape,"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));");return this.compileAndRun(t,[e])},t.prototype.atanh=function(e){var t=new Xh(e.shape,"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;");return this.compileAndRun(t,[e])},t.prototype.erf=function(e){var t=new Xh(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(t,[e])},t.prototype.step=function(e,t){var n=new Xh(e.shape,function(e){return void 0===e&&(e=0),Yh+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},t.prototype.conv2dByMatMul=function(e,t,n,r,o,i){var a=e.shape,u=this.texData.get(e.dataId),s=n.inChannels,c=a[0]*a[1]*a[2],l=n.outChannels,f="channelsLast"===n.dataFormat,d=(1===c||1===l)&&s>1e3,p=a[2]%2!=0&&!!u.isPacked;if(d||!Ru().getBool("WEBGL_LAZILY_UNPACK")||!Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!p){var h=f?a[0]*a[1]*a[2]:a[0]*a[2]*a[3],v=this.reshape(e,[1,h,n.inChannels]),m=this.reshape(t,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:v,b:m,transposeA:!1,transposeB:!1,bias:r,activation:o,preluActivationWeights:i}),n.outShape)}var g=f?a[0]*a[1]*(a[2]+1):a[0]*a[2]*(a[3]+1),y={dataId:e.dataId,shape:[1,g,n.inChannels],dtype:e.dtype},b=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,Uu(qc(u.shape,y.shape),(function(){return"packed reshape "+u.shape+" to "+y.shape+" isn't free"}));var x=this.reshape(t,[1,n.inChannels,n.outChannels]),w=this.fusedBatchMatMul({a:y,b:x,transposeA:!1,transposeB:!1,bias:r,activation:o,preluActivationWeights:i}),E=this.texData.get(w.dataId);return Uu(E.isPacked,(function(){return"batchMatMul result is expected to be packed"})),u.shape=b,E.shape=n.outShape,Js.makeTensorFromDataId(w.dataId,n.outShape,w.dtype)},t.prototype.conv2dWithIm2Row=function(e,t,n,r,o,i){var a=n.filterWidth,u=n.filterHeight,s=n.inChannels,c=n.outWidth,l=n.outHeight,f="channelsLast"===n.dataFormat,d=a*u*s,p=l*c,h=[d,p],v=e.squeeze([0]),m=t.reshape([1,d,-1]),g=new fh(h,v.shape,n),y=this.compileAndRun(g,[v]).reshape([1,h[0],h[1]]),b=null!=r,x=null!=i,w=o?pv(o,!0):null,E=new gh(y.shape,[1,p,n.outChannels],!0,!1,b,w,x),C=[y,m];r&&C.push(r),x&&C.push(i);var _=this.compileAndRun(E,C);return f?_.reshape([1,l,c,n.outChannels]):_.reshape([1,n.outChannels,l,c])},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,o=e.bias,i=e.activation,a=e.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(t,n,r,o,i,a);if(Ru().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r,o,i,a);var u=null!=o,s=null!=a,c=i?pv(i,!1):null,l=new Sp(r,u,c,s),f=[t,n];return o&&f.push(o),a&&f.push(a),this.compileAndRun(l,f)},t.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n);if(Ru().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n);var r=new Sp(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerInput=function(e,t,n){var r=new wp(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerFilter=function(e,t,n){var r=new xp(n);return this.compileAndRun(r,[e,t])},t.prototype.fusedDepthwiseConv2D=function(e){var t,n=e.input,r=e.filter,o=e.convInfo,i=e.bias,a=e.activation,u=e.preluActivationWeights,s=Ru().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,c=a?pv(a,s):null,l=[n,r],f=null!=i,d=null!=u;return f&&l.push(i),d&&l.push(u),s?(t=new Ap(o,f,c,d),this.compileAndRun(t,l)):(t=new Tp(o,f,c,d),this.compileAndRun(t,l))},t.prototype.depthwiseConv2D=function(e,t,n){var r;return Ru().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new Ap(n),this.compileAndRun(r,[e,t])):(r=new Tp(n),this.compileAndRun(r,[e,t]))},t.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new kp(n);return this.compileAndRun(r,[e,t])},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new _p(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3d=function(e,t,n){var r=new Op(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerInput=function(e,t,n){var r=new Cp(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerFilter=function(e,t,n){var r=new Ep(n);return this.compileAndRun(r,[e,t])},t.prototype.maxPool=function(e,t){var n=new Ch(t,"max",!1);return this.compileAndRun(n,[e])},t.prototype.avgPool=function(e,t){var n=new Ch(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPoolBackprop=function(e,t,n,r){var o=new Ch(r,"max",!0),i=this.compileAndRun(o,[t]),a=new vh(r),u=this.compileAndRun(a,[e,i],t.dtype);return i.dispose(),u},t.prototype.avgPoolBackprop=function(e,t,n){var r=new np(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.cast=function(e,t){return vd(e,t,this)},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),o=0,i=0;i<e.rank;i++)i!==t&&(r[o++]=e.shape[i]);var a=new Array(e.rank).fill(0),u=e.shape.slice();u[t]=1;var s=new Array(n);for(i=0;i<s.length;i++)a[t]=i,s[i]=this.slice(e,a,u).reshape(r);return s},t.prototype.avgPool3d=function(e,t){var n=new _h(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.avgPool3dBackprop=function(e,t,n){var r=new rp(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.maxPool3d=function(e,t){var n=new _h(t,"max",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPool3dBackprop=function(e,t,n,r){var o=new _h(r,"max",!0),i=this.compileAndRun(o,[t]),a=new mh(r),u=this.compileAndRun(a,[e,i],t.dtype);return i.dispose(),u},t.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId);if(n.isPacked&&!qc(e.shape,t)&&(null===n.texture||!qc(n.shape,t))){var r=this.packedReshape(e,t);return Js.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return md(e,t)},t.prototype.resizeBilinear=function(e,t,n,r){var o=Ru().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Ah(e.shape,t,n,r):new Th(e.shape,t,n,r);return this.compileAndRun(o,[e],"float32")},t.prototype.resizeBilinearBackprop=function(e,t,n){var r=new Oh(e,t,n);return this.compileAndRun(r,[e])},t.prototype.resizeNearestNeighbor=function(e,t,n,r){var o=new Nh(e.shape,t,n,r);return this.compileAndRun(o,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new Rh(e,t,n);return this.compileAndRun(r,[e])},t.prototype.multinomial=function(e,t,n,r){var o=t?e:Xf(e),i=o.shape[0],a=o.shape[1],u=new yh(i,a,n),s=u.getCustomSetupFunc(r);return this.compileAndRun(u,[o],"int32",s)},t.prototype.oneHot=function(e,t,n,r){var o=new bh(e.size,t,n,r);return this.compileAndRun(o,[e])},t.prototype.diag=function(e){var t=new Fp(e.size);return this.compileAndRun(t,[e])},t.prototype.nonMaxSuppression=function(e,t,n,r,o){return ul("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),_d(e.dataSync(),t.dataSync(),n,r,o)},t.prototype.cropAndResize=function(e,t,n,r,o,i){var a=new Rp(e.shape,t.shape,r,o,i);return this.compileAndRun(a,[e,t,n],"float32")},t.prototype.depthToSpace=function(e,t,n){Uu(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));var r=e.shape[0],o="NHWC"===n?e.shape[1]:e.shape[2],i="NHWC"===n?e.shape[2]:e.shape[3],a="NHWC"===n?e.shape[3]:e.shape[1],u=o*t,s=i*t,c=a/(t*t),l=new Mp("NHWC"===n?[r,u,s,c]:[r,c,u,s],t,n);return this.compileAndRun(l,[e])},t.prototype.split=function(e,t,n){return Rd(e,t,n)},t.prototype.scatterND=function(e,t,n){var r=Vf(0,e,n),o=r.sliceRank,i=r.numUpdates,a=r.sliceSize,u=r.strides,s=r.outputSize,c=[s/a,a],l=e.reshape([i,o]),f=t.reshape([i,a]);if(0===s)return md(Sl([]),n);var d=Tl(0),p=new Dh(i,o,l.rank,f.rank,u,c);return this.compileAndRun(p,[f,l,d]).reshape(n)},t.prototype.sparseToDense=function(e,t,n,r){var o=Vf(0,e,n),i=o.sliceRank,a=o.numUpdates,u=o.strides,s=o.outputSize,c=new Dh(a,i,e.rank,t.rank,u,[s,1],!1);return this.compileAndRun(c,[t,e,r]).reshape(n)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new zp("return real * expR - imag * expI;",e.shape,t),o=new zp("return real * expI + imag * expR;",e.shape,t),i=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag)],a=this.compileAndRun(r,i),u=this.compileAndRun(o,i),s=this.complex(a,u).as2D(e.shape[0],e.shape[1]);return a.dispose(),u.dispose(),s},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],o=Ff(e,t),i=o[0],a=o[1],u=o[2],s=o[3],c=t.reshape([a,r]),l=e.reshape([e.size/u,u]),f=new Hp(r,s,[a,u]);return this.compileAndRun(f,[l,c]).reshape(i)},t.prototype.fill=function(e,t,n){if("string"===(n=n||hs(t))){var r=os(n,Ku(e));return r.fill(t),Js.makeTensor(r,e,n,this)}var o=new Wp(e,t),i=o.getCustomSetupFunc(t);return this.compileAndRun(o,[],n,i)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},t.prototype.linspace=function(e,t,n){return gd(e,t,n)},t.prototype.makeTensorInfo=function(e,t){var n=this.write(null,e,t);return this.texData.get(n).usage=null,{dataId:n,shape:e,dtype:t}},t.prototype.makeOutput=function(e,t){var n=this.makeTensorInfo(e,t).dataId;return Js.makeTensorFromDataId(n,e,t,this)},t.prototype.unpackTensor=function(e){var t=new fv(e.shape);return this.runWebGLProgram(t,[e],e.dtype)},t.prototype.packTensor=function(e){var t=new xh(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)},t.prototype.packedReshape=function(e,t){var n=[zc(e.shape)].concat(Wc(e.shape)),r={dtype:e.dtype,shape:n,dataId:e.dataId},o=[zc(t)].concat(Wc(t)),i=new Sh(o,n),a=this.runWebGLProgram(i,[r],e.dtype,null,!0);return{dataId:a.dataId,shape:t,dtype:a.dtype}},t.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,o=n.shape,i=n.dtype,a=Uc(o);return t=r?new Dp(a):new Pp(a),{dtype:i,shape:o,dataId:this.runWebGLProgram(t,[{shape:a,dtype:i,dataId:e}],i,null,!0).dataId}},t.prototype.runWebGLProgram=function(e,t,n,r,o){var i=this;void 0===o&&(o=!1);var a=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(a.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===nc.DENSE){var s=lc(e.outputShape);u.texShape=s.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===Ku(a.shape))return u.values=rs(a.dtype,0),a;var c=[],l=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=i.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Ku(t.shape)<=Ru().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?i.unpackTensor(t):i.packTensor(t),c.push(t),n=i.texData.get(t.dataId);else if(n.isPacked&&!qc(n.shape,t.shape)){var r=t,o=t.shape;t.shape=n.shape,t=i.packedReshape(t,o),c.push(t),n=i.texData.get(t.dataId),r.shape=o}return i.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(a.dataId);var f,d={shape:a.shape,texData:u,isUniform:!1},p=function(e,t,n){var r="";t.concat(n).forEach((function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=e.shape+"_"+n+"_"+t}));var o=e.userCode;return e.constructor.name+"_"+r+"_"+o}(e,l,d),h=this.getAndSaveBinary(p,(function(){return function(e,t,n,r){var o=t.userCode,i=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),a=i.map((function(e){return e.shapeInfo})),u={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=Ud(i,u,o,t.packedInputs),c=e.createProgram(s),l=null,f=e.getUniformLocation(c,"NAN",!1);1===Ru().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(c,"INFINITY",!1));for(var d={},p=0;p<t.variableNames.length;p++){var h=t.variableNames[p];d[h]=e.getUniformLocation(c,h,!1),d["offset"+h]=e.getUniformLocation(c,"offset"+h,!1)}return{program:t,source:s,webGLProgram:c,uniformLocations:d,inShapeInfos:a,outShapeInfo:u,infLoc:l,nanLoc:f}}(i.gpgpu,e,l,d)})),v=null!=this.activeTimers;if(v&&(f=this.startTimer()),function(e,t,n,r,o){lh(t.inShapeInfos,n),lh([t.outShapeInfo],[r]);var i=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i,a[0],a[1]):e.setOutputMatrixTexture(i,a[0],a[1]),e.setProgram(t.webGLProgram),1===Ru().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var o=t.program.variableNames[r],i=t.uniformLocations[o],a=t.uniformLocations["offset"+o];if(null!=i)if(n.isUniform)if(Ku(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var u=n.uniformValues;u instanceof Float32Array||(u=new Float32Array(u)),e.gl.uniform1fv(i,u)}else null!=n.texData.slice&&null!=a&&e.gl.uniform1i(a,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,i,r)})),null!=o&&o(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,h,l,d,r),c.forEach((function(e){return i.disposeData(e.dataId)})),v&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)})),!Ru().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===o){var m=this.unpackTensor(a);return this.disposeData(a.dataId),m}return a},t.prototype.compileAndRun=function(e,t,n,r,o){void 0===o&&(o=!1),n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,o);return Js.makeTensorFromDataId(i.dataId,i.shape,i.dtype)},t.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var e=this;this.disposed||(Ru().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=il((function(){if(!Ru().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=Ru().getBool("DEBUG");Ru().set("DEBUG",!1);var n=e.abs(Tl(1e-8)).dataSync()[0];if(Ru().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,o=n.dtype,i=n.values,a=n.texture,u=n.usage,s=n.isPacked;if(null==a){var c,l=null!=this.activeTimers;l&&(c=Es());var f=n.texShape;if(null==f&&(f=Hc(r,s),n.texShape=f),null!=i){var d=Uc(r),p=void 0,h=f[1],v=f[0],m=i instanceof Uint8Array;s?(h=(t=fc(f[0],f[1]))[0],v=t[1],p=new Vp(d,[v,h],m)):p=new Bp(d,[v,h],m);var g=this.makeTensorInfo([v,h],o);this.texData.get(g.dataId).usage=m?rc.PIXELS:rc.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),h,v,i);var y=this.runWebGLProgram(p,[g],o,null,!0),b=this.texData.get(y.dataId);n.texture=b.texture,n.texShape=b.texShape,n.isPacked=b.isPacked,n.usage=b.usage,this.disposeData(g.dataId),this.texData.delete(y.dataId),n.values=null,l&&(this.uploadWaitMs+=Es()-c)}else{var x=this.acquireTexture(f,u,o,s);n.texture=x}}},t.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},t.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},t.prototype.computeBytes=function(e,t){return e[0]*e[1]*cs(t)},t}(Zf);ec()&&Js.registerBackend("webgl",(function(){return new hv}),2);var vv=El({square_:function(e){var t=ll(e,"x","square"),n=[t];return Js.runKernelFunc((function(e,n){return n([t]),e.square(t)}),{x:t},null,"Square",{},n,[])}}),mv="SquaredDifference",gv=El({squaredDifference_:function(e,t){var n,r=ll(e,"a","squaredDifference"),o=ll(t,"b","squaredDifference");n=Ks(r,o),r=n[0],o=n[1],nd(r.shape,o.shape);var i={a:r,b:o},a=[r,o];return Js.runKernelFunc((function(e,t){var n=e.squaredDifference(r,o);return t([r,o]),n}),i,(function(e,t){var n=t[0],r=t[1],o=Tl(2);return{a:function(){return e.mul(n.sub(r).mul(o))},b:function(){return e.mul(r.sub(n).mul(o))}}}),mv,{},a,[])}}),yv=El({abs_:function(e){var t=ll(e,"x","abs");return"complex64"===t.dtype?Js.runKernelFunc((function(e){return e.complexAbs(t)}),{$x:t}):Js.runKernelFunc((function(e,n){var r=e.abs(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().step(-1))}}}),"Abs")}}),bv=El({acos_:function(e){var t=ll(e,"x","acos");return Js.runKernelFunc((function(e,n){var r=e.acos(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(Tl(1).sub(n.toFloat().square()).sqrt()).neg()}}}))}}),xv=El({acosh_:function(e){var t=ll(e,"x","acosh");return Js.runKernelFunc((function(e,n){var r=e.acosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}}))}}),wv=El({asin_:function(e){var t=ll(e,"x","asin");return Js.runKernelFunc((function(e,n){var r=e.asin(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(Tl(1).sub(n.toFloat().square()).sqrt())}}}))}}),Ev=El({asinh_:function(e){var t=ll(e,"x","asinh");return Js.runKernelFunc((function(e,n){var r=e.asinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(Tl(1).add(n.toFloat().square()).sqrt())}}}))}}),Cv=El({atan_:function(e){var t=ll(e,"x","atan");return Js.runKernelFunc((function(e,n){var r=e.atan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().square().add(1))}}}))}}),_v=El({atanh_:function(e){var t=ll(e,"x","atanh");return Js.runKernelFunc((function(e,n){var r=e.atanh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(Tl(1).sub(n.toFloat().square()))}}}))}}),kv=El({ceil_:function(e){var t=ll(e,"x","ceil");return Js.runKernelFunc((function(e){return e.ceil(t)}),{$x:t},(function(e){return{$x:function(){return jl(e)}}}))}}),Sv=El({clipByValue_:function(e,t,n){var r=ll(e,"x","clipByValue");Uu(t<=n,(function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."}));var o=[r],i={min:t,max:n};return Js.runKernelFunc((function(e,o){var i=e.clip(r,t,n);return o([r]),i}),{x:r},(function(e,r){var o=r[0];return{x:function(){return e.where(o.greaterEqual(t).logicalAnd(o.lessEqual(n)),jl(e))}}}),"ClipByValue",i,o)}}),Ov=El({cos_:function(e){var t=ll(e,"x","cos"),n=[t];return Js.runKernelFunc((function(e,n){var r=e.cos(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().sin().neg().mul(e)}}}),"Cos",{},n)}}),Tv=El({cosh_:function(e){var t=ll(e,"x","cosh");return Js.runKernelFunc((function(e,n){var r=e.cosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}}))}}),Av=El({erf_:function(e){var t=ll(e,"x","erf");return Uu("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=t.toFloat()),Js.runKernelFunc((function(e,n){var r=e.erf(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),Rv=El({exp_:function(e){var t=ll(e,"x","exp");return Js.runKernelFunc((function(e,n){var r=e.exp(t);return n([r]),r}),{x:t},(function(e,t){return{x:function(){return e.mulStrict(t[0])}}}),"Exp",{},[],[!0])}}),Nv=El({expm1_:function(e){var t=ll(e,"x","expm1");return Js.runKernelFunc((function(e,n){var r=e.expm1(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.exp())}}}))}}),Iv=El({floor_:function(e){var t=ll(e,"x","floor");return Js.runKernelFunc((function(e){return e.floor(t)}),{$x:t},(function(e){return{$x:function(){return jl(e)}}}))}}),Pv=El({log_:function(e){var t=ll(e,"x","log"),n=[t];return Js.runKernelFunc((function(e,n){var r=e.log(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.toFloat())}}}),"Log",{},n)}}),Dv=El({log1p_:function(e){var t=ll(e,"x","log1p");return Js.runKernelFunc((function(e,n){var r=e.log1p(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.add(1))}}}))}}),Mv=El({logSigmoid_:function(e){var t=ll(e,"x","logSigmoid");return Js.runKernelFunc((function(e,n){var r=e.softplus(t.neg()).neg();return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.neg().sigmoid())}}}))}}),Fv=El({neg_:function(e){var t=ll(e,"x","neg"),n=[t];return Js.runKernelFunc((function(e){return e.neg(t)}),{x:t},(function(e){return{x:function(){return e.neg()}}}),"Neg",{},n)}}),Lv=El({reciprocal_:function(e){var t=ll(e,"x","reciprocal");return Js.runKernelFunc((function(e,n){var r=e.reciprocal(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.square().neg())}}}))}}),jv=El({round_:function(e){var t=ll(e,"x","round");return Js.runKernelFunc((function(e){return e.round(t)}),{$x:t},(function(e){return{$x:function(){return jl(e)}}}))}}),Bv=El({rsqrt_:function(e){var t=ll(e,"x","rsqrt"),n=[t];return Js.runKernelFunc((function(e,n){var r=e.rsqrt(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},n)}}),Vv=El({sigmoid_:function(e){var t=ll(e,"x","sigmoid");return Js.runKernelFunc((function(e,n){var r=e.sigmoid(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.mul(Tl(1).sub(n)))}}}),"Sigmoid")}}),zv=El({sign_:function(e){var t=ll(e,"x","sign");return Js.runKernelFunc((function(e){return e.sign(t)}),{$x:t},(function(e){return{$x:function(){return jl(e)}}}))}}),Wv=El({isNaN_:function(e){var t=ll(e,"x","isNaN");return Js.runKernelFunc((function(e){return e.isNaN(t)}),{$x:t},(function(e){return{$x:function(){return jl(e)}}}))}}),Uv=El({isInf_:function(e){var t=ll(e,"x","isInf");return Js.runKernelFunc((function(e){return e.isInf(t)}),{$x:t},(function(e){return{$x:function(){return jl(e)}}}))}}),Hv=El({isFinite_:function(e){var t=ll(e,"x","isFinite");return Js.runKernelFunc((function(e){return e.isFinite(t)}),{$x:t},(function(e){return{$x:function(){return jl(e)}}}))}}),Gv=El({sin_:function(e){var t=ll(e,"x","sin"),n=[t];return Js.runKernelFunc((function(e,n){var r=e.sin(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().cos().mul(e)}}}),"Sin",{},n)}}),qv=El({sinh_:function(e){var t=ll(e,"x","sinh");return Js.runKernelFunc((function(e,n){var r=e.sinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}}))}}),Kv=El({softplus_:function(e){var t=ll(e,"x","softplus");return Js.runKernelFunc((function(e,n){var r=e.softplus(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.sigmoid())}}}))}}),$v=El({sqrt_:function(e){var t=ll(e,"x","sqrt");return Js.runKernelFunc((function(e,n){var r=e.sqrt(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}}))}}),Xv=El({step_:function(e,t){void 0===t&&(t=0);var n=ll(e,"x","step");return Js.runKernelFunc((function(e){return e.step(n,t)}),{$x:n},(function(e){return{$x:function(){return jl(e)}}}))}}),Yv=El({tan_:function(e){var t=ll(e,"x","tan");return Js.runKernelFunc((function(e,n){var r=e.tan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.cos().square())}}}))}}),Qv=El({tanh_:function(e){var t=ll(e,"x","tanh");return Js.runKernelFunc((function(e,n){var r=e.tanh(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return Tl(1).sub(n.square()).mulStrict(e)}}}),"Tanh",{},null,[!0])}});function Zv(e,t,n,r,o,i){var a,u,s=ll(e,"x","batchNorm"),c=ll(t,"mean","batchNorm"),l=ll(n,"variance","batchNorm");return null!=o&&(a=ll(o,"scale","batchNorm")),null!=r&&(u=ll(r,"offset","batchNorm")),Uu(2===s.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+s.rank+"."})),Uu(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."})),Uu(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+l.rank+"."})),null!=a&&Uu(2===a.rank||1===a.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."})),null!=u&&Uu(2===u.rank||1===u.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+u.rank+"."})),tm(s,c,l,u,a,i)}function Jv(e,t,n,r,o,i){var a,u,s=ll(e,"x","batchNorm"),c=ll(t,"mean","batchNorm"),l=ll(n,"variance","batchNorm");return null!=o&&(a=ll(o,"scale","batchNorm")),null!=r&&(u=ll(r,"offset","batchNorm")),Uu(3===s.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+s.rank+"."})),Uu(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."})),Uu(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+l.rank+"."})),null!=a&&Uu(3===a.rank||1===a.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."})),null!=u&&Uu(3===u.rank||1===u.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+u.rank+"."})),tm(s,c,l,u,a,i)}function em(e,t,n,r,o,i){var a,u,s=ll(e,"x","batchNorm"),c=ll(t,"mean","batchNorm"),l=ll(n,"variance","batchNorm");return null!=o&&(a=ll(o,"scale","batchNorm")),null!=r&&(u=ll(r,"offset","batchNorm")),Uu(4===s.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+s.rank+"."})),Uu(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."})),Uu(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+l.rank+"."})),null!=a&&Uu(4===a.rank||1===a.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."})),null!=u&&Uu(4===u.rank||1===u.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+u.rank+"."})),tm(s,c,l,u,a,i)}function tm(e,t,n,r,o,i){null==i&&(i=.001);var a,u,s,c=ll(e,"x","batchNorm"),l=ll(t,"mean","batchNorm"),f=ll(n,"variance","batchNorm");null!=o&&(a=ll(o,"scale","batchNorm")),null!=r&&(u=ll(r,"offset","batchNorm")),Uu(l.rank===f.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Uu(null==u||l.rank===u.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Uu(null==a||l.rank===a.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),s=0===c.rank||1===c.rank?c.as4D(1,1,1,c.size):2===c.rank?c.as4D(1,1,c.shape[0],c.shape[1]):3===c.rank?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c;var d=[c,l,f,a];return Js.runKernelFunc((function(e,t){var n=e.batchNormalization(s,nm(l),nm(f),i,nm(a),nm(u));return t([c,l,f,a]),n}),{x:c,mean:l,variance:f,scale:a,offset:u},(function(e,t){var n=t,r=n[0],o=n[1],a=n[2],u=n[3],c=null==u?Tl(1):u,l=td(o.shape,s.shape),f=[];if(1===o.rank){for(var d=0;d<s.shape.length-1;++d)f.push(s.shape[d]);f.push(1)}var p=r.sub(o),h=e.mul(c),v=Bv(a.add(Tl(i))),m=v.mul(v).mul(v).mul(Tl(-.5));return{x:function(){return 1===o.rank?e.mul(Tf(v.as4D(1,1,1,o.shape[0]),f)).mul(c).reshape(r.shape):e.mul(v).mul(c).reshape(r.shape)},mean:function(){var e=v.mul(Tl(-1)).mul(h);return 1===o.rank&&(e=e.sum(l)),e.reshape(o.shape)},variance:function(){var e=m.mul(p).mul(h);return 1===o.rank&&(e=e.sum(l)),e.reshape(o.shape)},scale:function(){var t=p.mul(v),n=e.mul(t);return 1===o.rank&&(n=n.sum(l)),n.reshape(o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=t.sum(l)),t.reshape(o.shape)}}}),"BatchNormalization",{varianceEpsilon:i},d).reshape(c.shape)}function nm(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function rm(){ol("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var om=El({batchNormalization2d_:function(e,t,n,r,o,i){return void 0===r&&(r=.001),rm(),Zv(e,t,n,i,o,r)}}),im=El({batchNormalization3d_:function(e,t,n,r,o,i){return void 0===r&&(r=.001),rm(),Jv(e,t,n,i,o,r)}}),am=El({batchNormalization4d_:function(e,t,n,r,o,i){return void 0===r&&(r=.001),rm(),em(e,t,n,i,o,r)}}),um=El({batchNormalization_:function(e,t,n,r,o,i){return void 0===r&&(r=.001),rm(),tm(e,t,n,i,o,r)}}),sm=El({batchNorm_:tm}),cm=El({batchNorm2d_:Zv}),lm=El({batchNorm3d_:Jv}),fm=El({batchNorm4d_:em}),dm=El({logicalAnd_:function(e,t){var n=ll(e,"a","logicalAnd","bool"),r=ll(t,"b","logicalAnd","bool");return nd(n.shape,r.shape),Js.runKernelFunc((function(e){return e.logicalAnd(n,r)}),{a:n,b:r},null,"LogicalAnd")}}),pm=El({logicalNot_:function(e){var t=ll(e,"x","logicalNot","bool");return Js.runKernelFunc((function(e){return e.logicalNot(t)}),{$x:t})}}),hm=El({logicalOr_:function(e,t){var n=ll(e,"a","logicalOr","bool"),r=ll(t,"b","logicalOr","bool");return nd(n.shape,r.shape),Js.runKernelFunc((function(e){return e.logicalOr(n,r)}),{$a:n,$b:r})}}),vm=El({logicalXor_:function(e,t){var n=ll(e,"a","logicalXor","bool"),r=ll(t,"b","logicalXor","bool");return nd(n.shape,r.shape),hm(e,t).logicalAnd(dm(e,t).logicalNot())}}),mm=El({where_:function(e,t,n){var r=ll(t,"a","where"),o=ll(n,"b","where"),i=ll(e,"condition","where","bool");return Hu(r.shape,o.shape,"Error in where: "),1===i.rank?Uu(i.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):Hu(i.shape,o.shape,"Error in where: "),Js.runKernelFunc((function(e,t){var n=e.select(i,r,o);return t([i]),n}),{$condition:i,$a:r,$b:o},(function(e,t){var n=t[0];return{$condition:function(){return jl(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}}))}}),gm=function(e){return Su(this,void 0,void 0,(function(){var t,n,r;return Ou(this,(function(o){switch(o.label){case 0:return[4,(t=ll(e,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),r=Pd(t.shape,n),e!==t&&t.dispose(),[2,r]}}))}))},ym=El({add_:function(e,t){var n,r=ll(e,"a","add"),o=ll(t,"b","add");n=Ks(r,o),r=n[0],o=n[1];var i=nd(r.shape,o.shape);return Js.runKernelFunc((function(e){return e.add(r,o)}),{a:r,b:o},(function(e){return{a:function(){var t=e,n=td(r.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=td(o.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(o.shape)}}}),"Add")}}),bm=El({addN_:function(e){Uu(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),Uu(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length}));var t=e.map((function(e,t){return ll(e,"tensors"+t,"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!$u(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return Js.runKernelFunc((function(e){return e.addN(t)}),r,(function(e){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}),"AddN")}}),xm=El({addStrict_:function(e,t){var n=ll(e,"a","addStrict"),r=ll(t,"b","addStrict");return Hu(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),wm=El({atan2_:function(e,t){var n,r=ll(e,"a","atan2"),o=ll(t,"b","atan2");n=Ks(r,o),r=n[0],o=n[1];var i=nd(r.shape,o.shape);return Js.runKernelFunc((function(e,t){var n=e.atan2(r,o);return t([r,o]),n}),{$a:r,$b:o},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=ym(n.square(),r.square()),o=e.mul(r.div(t)),a=td(n.shape,i);return a.length>0&&(o=o.sum(a)),o.reshape(n.shape)},$b:function(){var t=ym(n.square(),r.square()),o=Fv(e.mul(n.div(t))),a=td(r.shape,i);return a.length>0&&(o=o.sum(a)),o.reshape(r.shape)}}}))}}),Em=El({div_:function(e,t){var n,r=ll(e,"a","div"),o=ll(t,"b","div");if(n=Ks(r,o),r=n[0],o=n[1],"int32"===r.dtype&&"int32"===o.dtype)return km(r,o);var i=nd(r.shape,o.shape);return Js.runKernelFunc((function(e,t){var n=e.realDivide(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),o=td(n.shape,i);return o.length>0?t.sum(o).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),o=td(r.shape,i);o.length>0&&(t=t.sum(o).reshape(r.shape));var a=r.square();return t.div(a.toFloat()).neg()}}}),"Div")}}),Cm=El({divNoNan_:function(e,t){var n,r=ll(e,"a","div"),o=ll(t,"b","div");r=(n=Ks(r,o))[0],o=n[1];var i=Em(r,o),a=jl(i),u=o.equal(a);return mm(u,a,i)}}),_m=El({divStrict_:function(e,t){var n=ll(e,"a","div"),r=ll(t,"b","div");return Hu(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),km=El({floorDiv_:function(e,t){var n,r=ll(e,"a","floorDiv"),o=ll(t,"b","floorDiv");n=Ks(r,o),r=n[0],o=n[1];var i=nd(r.shape,o.shape);return Js.runKernelFunc((function(e,t){var n=e.floorDiv(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),o=td(n.shape,i);return o.length>0?t.sum(o).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),o=td(r.shape,i);o.length>0&&(t=t.sum(o).reshape(r.shape));var a=r.square();return t.div(a.toFloat()).neg()}}}),"FloorDiv")}}),Sm=El({maximum_:function(e,t){var n,r=ll(e,"a","maximum"),o=ll(t,"b","maximum");return n=Ks(r,o),r=n[0],o=n[1],"bool"===r.dtype&&(r=r.toInt(),o=o.toInt()),nd(r.shape,o.shape),Js.runKernelFunc((function(e,t){var n=e.maximum(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.greaterEqual(r).toFloat())},b:function(){return e.mul(n.less(r).toFloat())}}}),"Maximum")}}),Om=El({maximumStrict_:function(e,t){var n=ll(e,"a","maximumStrict"),r=ll(t,"b","maximumStrict");return Hu(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),Tm=El({minimum_:function(e,t){var n,r=ll(e,"a","minimum"),o=ll(t,"b","minimum");return n=Ks(r,o),r=n[0],o=n[1],"bool"===r.dtype&&(r=r.toInt(),o=o.toInt()),nd(r.shape,o.shape),Js.runKernelFunc((function(e,t){var n=e.minimum(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.lessEqual(r).toFloat())},b:function(){return e.mul(n.greater(r).toFloat())}}}),"Minimum")}}),Am=El({minimumStrict_:function(e,t){var n=ll(e,"a","minimumStrict"),r=ll(t,"b","minimumStrict");return Hu(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),Rm=El({mod_:function(e,t){var n,r=ll(e,"a","mod"),o=ll(t,"b","mod");n=Ks(r,o),r=n[0],o=n[1];var i=nd(r.shape,o.shape);return Js.runKernelFunc((function(e,t){var n=e.mod(r,o);return t([r,o]),n}),{$a:r,$b:o},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=td(n.shape,i);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),o=td(r.shape,i);return o.length>0?t.sum(o).reshape(r.shape):t}}}))}}),Nm=El({modStrict_:function(e,t){var n=ll(e,"a","modStrict"),r=ll(t,"b","modStrict");return Hu(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),Im=El({mul_:function(e,t){var n,r=ll(e,"a","mul"),o=ll(t,"b","mul");n=Ks(r,o),r=n[0],o=n[1];var i=nd(r.shape,o.shape);return Js.runKernelFunc((function(e,t){var n=e.multiply(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.mul(r.toFloat()),o=td(n.shape,i);return o.length>0?t.sum(o).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),o=td(r.shape,i);return o.length>0?t.sum(o).reshape(r.shape):t}}}),"Mul")}}),Pm=El({mulStrict_:function(e,t){var n=ll(e,"a","mul"),r=ll(t,"b","mul");return Hu(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),Dm=El({pow_:function(e,t){var n,r=ll(e,"base","pow"),o=ll(t,"exp","pow");n=Ks(r,o),r=n[0],o=n[1];var i=nd(r.shape,o.shape),a=[r,o];return Js.runKernelFunc((function(e,t){var n=e.pow(r,o);return t([r,o,n]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1],o=t[2];return{a:function(){var t=r.toFloat(),o=e.mul(t.mul(n.pow(t.sub(Tl(1))))),a=td(n.shape,i);return a.length>0&&(o=o.sum(a)),o.reshape(n.shape)},b:function(){var t=n.greater(0),a=n.log().where(t,jl(n)),u=e.mul(o.mul(a)),s=td(r.shape,i);return s.length>0&&(u=u.sum(s)),u.reshape(r.shape)}}}),"Pow",{},a,[!0])}}),Mm=El({powStrict_:function(e,t){return Hu(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),Fm=El({squaredDifferenceStrict_:function(e,t){var n=ll(e,"a","squaredDifferenceStrict"),r=ll(t,"b","squaredDifferenceStrict");return Hu(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Lm=El({sub_:function(e,t){var n,r=ll(e,"a","sub"),o=ll(t,"b","sub");n=Ks(r,o),r=n[0],o=n[1];var i=nd(r.shape,o.shape);return Js.runKernelFunc((function(e){return e.subtract(r,o)}),{a:r,b:o},(function(e){return{a:function(){var t=e,n=td(r.shape,i);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=td(o.shape,i);return n.length>0&&(t=t.sum(n)),t.neg().reshape(o.shape)}}}),"Sub")}}),jm=El({subStrict_:function(e,t){var n=ll(e,"a","subStrict"),r=ll(t,"b","subStrict");return Hu(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Bm=El({equal_:function(e,t){var n,r=ll(e,"a","equal"),o=ll(t,"b","equal");return n=Ks(r,o),r=n[0],o=n[1],nd(r.shape,o.shape),Js.runKernelFunc((function(e){return e.equal(r,o)}),{$a:r,$b:o})}}),Vm=El({equalStrict_:function(e,t){var n=ll(e,"a","equalStrict"),r=ll(t,"b","equalStrict");return Hu(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),zm=El({greater_:function(e,t){var n,r=ll(e,"a","greater"),o=ll(t,"b","greater");return n=Ks(r,o),r=n[0],o=n[1],nd(r.shape,o.shape),Js.runKernelFunc((function(e){return e.greater(r,o)}),{a:r,b:o},null,"Greater")}}),Wm=El({greaterEqual_:function(e,t){var n,r=ll(e,"a","greaterEqual"),o=ll(t,"b","greaterEqual");return n=Ks(r,o),r=n[0],o=n[1],nd(r.shape,o.shape),Js.runKernelFunc((function(e,t){var n=e.greaterEqual(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){return jl(n)},b:function(){return jl(r)}}}),"GreaterEqual")}}),Um=El({greaterEqualStrict_:function(e,t){var n=ll(e,"a","greaterEqualStrict"),r=ll(t,"b","greaterEqualStrict");return Hu(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),Hm=El({greaterStrict_:function(e,t){var n=ll(e,"a","greaterStrict"),r=ll(t,"b","greaterStrict");return Hu(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),Gm=El({less_:function(e,t){var n,r=ll(e,"a","less"),o=ll(t,"b","less");return n=Ks(r,o),r=n[0],o=n[1],nd(r.shape,o.shape),Js.runKernelFunc((function(e){return e.less(r,o)}),{a:r,b:o},null,"Less")}}),qm=El({lessEqual_:function(e,t){var n,r=ll(e,"a","lessEqual"),o=ll(t,"b","lessEqual");return n=Ks(r,o),r=n[0],o=n[1],nd(r.shape,o.shape),Js.runKernelFunc((function(e,t){var n=e.lessEqual(r,o);return t([r,o]),n}),{a:r,b:o},null,"LessEqual")}}),Km=El({lessEqualStrict_:function(e,t){var n=ll(e,"a","lessEqualStrict"),r=ll(t,"b","lessEqualStrict");return Hu(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),$m=El({lessStrict_:function(e,t){var n=ll(e,"a","lessStrict"),r=ll(t,"b","lessStrict");return Hu(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),Xm=El({notEqual_:function(e,t){var n,r=ll(e,"a","notEqual"),o=ll(t,"b","notEqual");return n=Ks(r,o),r=n[0],o=n[1],nd(r.shape,o.shape),Js.runKernelFunc((function(e){return e.notEqual(r,o)}),{a:r,b:o},null,"NotEqual")}}),Ym=El({notEqualStrict_:function(e,t){var n=ll(e,"a","notEqualStrict"),r=ll(t,"b","notEqualStrict");return Hu(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function Qm(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function Zm(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Jm=El({gather_:function(e,t,n){void 0===n&&(n=0);var r=ll(e,"x","gather"),o=ll(t,"indices","gather","int32");n=ts(n,r.shape)[0];var i=function(e,t,n){for(var r=e.shape[n],o=[],i=1,a=1,u=0;u<n;u++)o.push(e.shape[u]),i*=e.shape[u];for(u=0;u<t.rank;u++)o.push(t.shape[u]);for(u=n+1;u<e.rank;u++)o.push(e.shape[u]),a*=e.shape[u];return{batchSize:i,sliceSize:a,dimSize:r,outputShape:o}}(r,o,n);return Js.runKernelFunc((function(e,t){var i=e.gather(r,o.flatten(),n);return t([o]),i}),{x:r,indices:o},(function(e,t){var o=t[0];return{x:function(){var t=r.shape,i=o.size,a=t.slice(0,n),u=a.length,s=t.slice(n,t.length).slice(1),c=s.length,l=Qm(0,u),f=Qm(u+1,u+1+c),d=Zm([a,[i],s]),p=e.reshape(d),h=o.reshape([i]),v=Zm([[u],l,f]),m=p.transpose(v),g=eg(m,h,r.shape[n]),y=yl(v);return g.transpose(y)},indices:function(){return o}}}),"Gather",{axis:n}).reshape(i.outputShape)}}),eg=El({unsortedSegmentSum_:function(e,t,n){var r=ll(e,"x","unsortedSegmentSum"),o=ll(t,"segmentIds","unsortedSegmentSum","int32");return Uu(Xu(n),(function(){return"numSegments must be of dtype int"})),Js.runKernelFunc((function(e,t){var i=e.unsortedSegmentSum(r,o,n);return t([o]),i}),{$x:r},(function(e,t){var n=t[0];return{$x:function(){return function(e,t){for(var n=Sm(t,jl(t)),r=Jm(e,n),o=Wm(t,Tl(0,"int32")),i=r.rank-o.rank,a=0;a<i;++a)o=ff(o,a+1);o=dm(o,Pl(r.shape,"bool"));var u=jl(r);return mm(o,r,u)}(e,n)}}}))}});function tg(e,t,n,r,o,i,a){void 0===i&&(i="NHWC"),Uu(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var u=e,s=t,c=!1;3===t.rank&&(c=!0,s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),u=[1,e[0],e[1],e[2]]),Uu(4===u.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+u.length+"."})),Uu(4===s.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+s.rank})),Uu(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}));var l="NHWC"===i?u[3]:u[1],f="NHWC"===i?s.shape[3]:s.shape[1];Uu(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."})),Uu(f===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+n.shape[3]+"."})),null!=a&&Uu(Xu(o),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var d=hd(i),p=id(u,n.shape,r,1,o,a,!1,d),h=Js.runKernelFunc((function(e,t){var r=e.conv2dDerInput(s,n,p);return t([n,s]),r}),{dy4D:s,filter:n},(function(e,t){var n=t[0],u=t[1];return{dy4D:function(){return ig(e,n,r,o,i,1,a)},filter:function(){return ug(e,u,n.shape,r,o,i,a)}}}));return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}function ng(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],o=t[2];return 1===n&&1===r&&1===o}function rg(e,t,n,r,o){Uu(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var i=e,a=t,u=!1;4===t.rank&&(u=!0,a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),i=[1,e[0],e[1],e[2],e[3]]);var s=i[4],c=a.shape[4];Uu(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."})),Uu(5===a.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank})),Uu(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),Uu(s===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+s+") must match input depth for filter "+n.shape[3]+"."})),Uu(c===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[4]+"."}));var l=ad(i,n.shape,r,1,o),f=Js.runKernelFunc((function(e){return e.conv3dDerInput(a,n,l)}),{dy5D:a});return u?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}var og=El({conv1d_:function(e,t,n,r,o,i,a){void 0===o&&(o="NWC"),void 0===i&&(i=1);var u=ll(e,"x","conv1d"),s=ll(t,"filter","conv1d"),c=u,l=!1;2===u.rank&&(l=!0,c=u.as3D(1,u.shape[0],u.shape[1])),Uu(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."})),Uu(3===s.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+s.rank+"."})),null!=a&&Uu(Xu(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."})),Uu(c.shape[2]===s.shape[1],(function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+s.shape[1]+"."})),Uu(pd(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+i+"'"})),Uu("NWC"===o,(function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."}));var f=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),d=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),p=ig(d,f,[1,n],r,"NHWC",[1,i],a);return l?p.as2D(p.shape[2],p.shape[3]):p.as3D(p.shape[0],p.shape[2],p.shape[3])}}),ig=El({conv2d_:function(e,t,n,r,o,i,a){void 0===o&&(o="NHWC"),void 0===i&&(i=[1,1]);var u=ll(e,"x","conv2d"),s=ll(t,"filter","conv2d"),c=u,l=!1;3===u.rank&&(l=!0,c=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),Uu(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."})),Uu(4===s.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+s.rank+"."})),null!=a&&Uu(Xu(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var f="NHWC"===o?c.shape[3]:c.shape[1];Uu(f===s.shape[2],(function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+s.shape[2]+"."})),Uu(pd(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}));var d=hd(o),p=id(c.shape,s.shape,n,i,r,a,!1,d),h=[s,c],v=Js.runKernelFunc((function(e,t){var n=e.conv2d(c,s,p);return t([s,c]),n}),{x:c,filter:s},(function(e,t){var a=t,u=a[0],s=a[1];return Uu(dd(i),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"})),{x:function(){return sg(s.shape,e,u,n,r,o)},filter:function(){return ug(s,e,u.shape,n,r,o)}}}),"Conv2D",p,h);return l?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),ag=El({conv3d_:function(e,t,n,r,o,i){void 0===o&&(o="NDHWC"),void 0===i&&(i=[1,1,1]);var a=ll(e,"x","conv3d"),u=ll(t,"filter","conv3d"),s=a,c=!1;4===a.rank&&(c=!0,s=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),Uu(5===s.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank "+s.rank+"."})),Uu(5===u.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+u.rank+"."})),Uu(s.shape[4]===u.shape[3],(function(){return"Error in conv3d: depth of input ("+s.shape[4]+") must match input depth for filter "+u.shape[3]+"."})),Uu(function(e,t){return ng(e)||ng(t)}(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),Uu("NDHWC"===o,(function(){return"Error in conv3d: got dataFormat of "+o+" but only NDHWC is currently supported."}));var l=ad(s.shape,u.shape,n,i,r),f=Js.runKernelFunc((function(e,t){var n=e.conv3d(s,u,l);return t([s,u]),n}),{x:s,$filter:u},(function(e,t){Uu(ng(i),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}));var o=t[0],a=t[1];return{x:function(){return rg(o.shape,e,a,n,r)},$filter:function(){return function(e,t,n,r,o){var i=e;4===e.rank&&(i=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]));var a=t;4===a.rank&&(a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),Uu(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+i.shape+"."})),Uu(5===a.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+a.shape+"."})),Uu(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."})),Uu(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input "+i.shape[4]+") must match input depth in filter ("+n[3]+"."})),Uu(a.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+a.shape[4]+") must match output depth for filter ("+n[4]+")."}));var u=ad(i.shape,n,r,1,o);return Js.runKernelFunc((function(e){return e.conv3dDerFilter(i,a,u)}),{x5D:i,dy5D:a})}(o,e,a.shape,n,r)}}}));return c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),ug=El({conv2dDerFilter_:function(e,t,n,r,o,i,a){void 0===i&&(i="NHWC");var u=e;3===e.rank&&(u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var s=t;3===s.rank&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),Uu(4===u.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+u.shape+"."})),Uu(4===s.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+s.shape+"."})),Uu(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}));var c="NHWC"===i?u.shape[3]:u.shape[1],l="NHWC"===i?s.shape[3]:s.shape[1];Uu(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+n[2]+"."})),Uu(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+l+") must match output depth for filter ("+n[3]+")."})),null!=a&&Uu(Xu(o),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var f=hd(i),d=id(u.shape,n,r,1,o,a,!1,f);return Js.runKernelFunc((function(e){return e.conv2dDerFilter(u,s,d)}),{x4D:u,dy4D:s})}}),sg=El({conv2dDerInput_:tg}),cg=El({depthwiseConv2d_:function(e,t,n,r,o,i,a){void 0===o&&(o="NHWC"),void 0===i&&(i=[1,1]);var u=ll(e,"x","depthwiseConv2d"),s=ll(t,"filter","depthwiseConv2d"),c=u,l=!1;3===u.rank&&(l=!0,c=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),Uu(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."})),Uu(4===s.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+s.rank+"."})),Uu(c.shape[3]===s.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+s.shape[2]+"."})),null==i&&(i=[1,1]),Uu(pd(n,i),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),null!=a&&Uu(Xu(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var f=id(c.shape,s.shape,n,i,r,a,!0),d=[c,s],p=Js.runKernelFunc((function(e,t){var n=e.depthwiseConv2D(c,s,f);return t([c,s]),n}),{x:c,filter:s},(function(e,t){Uu(dd(i),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"}));var n=t[0],r=t[1];return{x:function(){return lg(n.shape,e,r,f)},filter:function(){return fg(n,e,r.shape,f)}}}),"DepthwiseConv2dNative",f,d);return l?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),lg=El({depthwiseConv2dDerInput_:function(e,t,n,r){var o=t,i=!1;3===t.rank&&(i=!0,o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=Js.runKernelFunc((function(e){return e.depthwiseConv2DDerInput(o,n,r)}),{dy4D:o});return i?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),fg=El({depthwiseConv2dDerFilter_:function(e,t,n,r){var o=e;3===e.rank&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=t;return 3===i.rank&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),Js.runKernelFunc((function(e){return e.depthwiseConv2DDerFilter(o,i,r)}),{x4D:o,dy4D:i})}}),dg=El({separableConv2d_:function(e,t,n,r,o,i,a){void 0===i&&(i=[1,1]),void 0===a&&(a="NHWC");var u=ll(e,"x","separableConv2d"),s=ll(t,"depthwiseFilter","separableConv2d"),c=ll(n,"pointwiseFilter","separableConv2d"),l=u,f=!1;if(3===u.rank&&(f=!0,l=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),"NCHW"===a)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Uu(4===l.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+l.rank+"."})),Uu(4===s.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+s.rank+"."})),Uu(4===c.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+s.rank+"."})),Uu(1===c.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."})),Uu(1===c.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."}));var d=s.shape[2],p=s.shape[3];Uu(c.shape[2]===d*p,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+d*p+", but got "+c.shape[2]+"."}));var h=cg(l,s,r,o,a,i),v=ig(h,c,1,"valid",a);return f?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),pg=El({conv2dTranspose_:function(e,t,n,r,o,i){return tg(n,ll(e,"x","conv2dTranspose"),ll(t,"filter","conv2dTranspose"),r,o,"NHWC",i)}}),hg=El({conv3dTranspose_:function(e,t,n,r,o){return rg(n,ll(e,"x","conv3dTranspose"),ll(t,"filter","conv3dTranspose"),r,o)}}),vg=El({matMul_:function(e,t,n,r){var o;void 0===n&&(n=!1),void 0===r&&(r=!1);var i=ll(e,"a","matMul"),a=ll(t,"b","matMul");o=Ks(i,a),i=o[0],a=o[1];var u=n?i.shape[i.rank-2]:i.shape[i.rank-1],s=r?a.shape[a.rank-1]:a.shape[a.rank-2],c=n?i.shape[i.rank-1]:i.shape[i.rank-2],l=r?a.shape[a.rank-2]:a.shape[a.rank-1],f=i.shape.slice(0,-2),d=a.shape.slice(0,-2),p=Ku(f),h=Ku(d);Uu(i.rank>=2&&a.rank>=2&&i.rank===a.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+a.rank+"."})),Uu($u(f,d),(function(){return"Error in matMul: outer dimensions ("+f+") and ("+d+") of Tensors with shapes "+i.shape+" and "+a.shape+" must match."})),Uu(u===s,(function(){return"Error in matMul: inner shapes ("+u+") and ("+s+") of Tensors with shapes "+i.shape+" and "+a.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var v=i.shape.slice(0,-2).concat([c,l]),m=n?i.as3D(p,u,c):i.as3D(p,c,u),g=r?a.as3D(h,l,s):a.as3D(h,s,l),y={transposeA:n,transposeB:r};return Js.runKernelFunc((function(e,t){var o=e.batchMatMul(m,g,n,r);return t([m,g]),o}),{a:m,b:g},(function(e,t){var o=t,i=o[0],a=o[1];return n||r?!n&&r?{a:function(){return e.matMul(a,!1,!1)},b:function(){return e.matMul(i,!0,!1)}}:n&&!r?{a:function(){return a.matMul(e,!1,!0)},b:function(){return i.matMul(e,!1,!1)}}:{a:function(){return a.matMul(e,!0,!0)},b:function(){return e.matMul(i,!0,!0)}}:{a:function(){return e.matMul(a,!1,!0)},b:function(){return i.matMul(e,!0,!1)}}}),"BatchMatMul",y).reshape(v)}}),mg=El({dot_:function(e,t){var n=ll(e,"t1","dot"),r=ll(t,"t2","dot");Uu(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var o=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];return Uu(o===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+i+"."})),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),gg=El({outerProduct_:function(e,t){var n=ll(e,"v1","outerProduct"),r=ll(t,"v2","outerProduct");return Uu(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),yg=El({reverse_:function(e,t){var n=ll(e,"x","reverse");if(0===n.rank)return n.clone();var r=ts(t,n.shape);return Js.runKernelFunc((function(e){return e.reverse(n,r)}),{$x:n},(function(e){return{$x:function(){return e.reverse(r)}}})).reshapeAs(n)}}),bg=El({reverse1d_:function(e){var t=ll(e,"x","reverse");return Uu(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."})),yg(t,0)}}),xg=El({reverse2d_:function(e,t){var n=ll(e,"x","reverse");return Uu(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),yg(n,t)}}),wg=El({reverse3d_:function(e,t){var n=ll(e,"x","reverse");return Uu(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),yg(n,t)}}),Eg=El({reverse4d_:function(e,t){var n=ll(e,"x","reverse");return Uu(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),yg(n,t)}});function Cg(e,t,n,r,o,i){var a=ll(e,"x","maxPool"),u=a,s=!1;3===a.rank&&(s=!0,u=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),null==r&&(r=[1,1]),Uu(4===u.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank "+u.rank+"."})),Uu(pd(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),null!=i&&Uu(Xu(o),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."}));var c=rd(u.shape,t,n,r,o,i);if(1===c.filterWidth&&1===c.filterHeight&&$u(c.inShape,c.outShape))return a.clone();var l=[u],f=Js.runKernelFunc((function(e,t){var n=e.maxPool(u,c);return t([u,n]),n}),{x:u},(function(e,i){var a=i[0],u=i[1];return{x:function(){return function(e,t,n,r,o,i,a,u){var s=ll(e,"dy","maxPoolBackprop"),c=ll(t,"input","maxPoolBackprop"),l=ll(n,"output","maxPoolBackprop");Uu(c.rank===s.rank,(function(){return"Rank of input ("+c.rank+") does not match rank of dy ("+s.rank+")"})),null==i&&(i=[1,1]),Uu(pd(o,i),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"})),Uu(4===s.rank,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+s.rank+"."})),Uu(4===c.rank,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+c.rank+"."}));var f=rd(c.shape,r,o,i,a,u);return Js.runKernelFunc((function(e){return e.maxPoolBackprop(s,c,l,f)}),{$dy:s,$input:c})}(e,a,u,t,n,r,o)}}}),"MaxPool",c,l);return s?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function _g(e,t,n,r,o,i){var a=ll(e,"x","avgPool","float32");null==r&&(r=[1,1]),Uu(pd(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var u=a,s=!1;3===a.rank&&(s=!0,u=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),Uu(4===u.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank "+u.rank+"."})),null!=i&&Uu(Xu(o),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."}));var c=rd(u.shape,t,n,r,o,i);if(1===c.filterWidth&&1===c.filterHeight&&$u(c.inShape,c.outShape))return a.clone();var l=Js.runKernelFunc((function(e){return e.avgPool(u,c)}),{x:u},(function(e){return{x:function(){return function(e,t,n,r,o,i){var a=ll(e,"dy","avgPoolBackprop"),u=ll(t,"input","avgPoolBackprop");Uu(u.rank===a.rank,(function(){return"Rank of input ("+u.rank+") does not match rank of dy ("+a.rank+")"})),null==o&&(o=[1,1]),Uu(pd(r,o),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"}));var s=u,c=a,l=!1;3===u.rank&&(l=!0,s=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),Uu(4===c.rank,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+c.rank+"."})),Uu(4===s.rank,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+s.rank+"."}));var f=rd(s.shape,n,r,o,i),d=Js.runKernelFunc((function(e){return e.avgPoolBackprop(c,s,f)}),{dy4D:c,input4D:s});return l?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}(e,u,t,n,r,o)}}}),"AvgPool",c);return l=l.cast(a.dtype),s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}var kg=El({maxPool_:function(e,t,n,r,o){return Cg(e,t,n,1,r,o)}}),Sg=El({avgPool_:function(e,t,n,r,o){return _g(e,t,n,1,r,o)}}),Og=El({pool_:function(e,t,n,r,o,i){null==o&&(o=[1,1]),null==i&&(i=1),0===r&&(r="valid");var a=ll(e,"x","maxPool"),u=a,s=!1;3===a.rank&&(s=!0,u=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),Uu(pd(i,o),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+o+"'"}));var c,l=rd(u.shape,t,i,o,r),f=[l.dilationHeight,l.dilationWidth];c="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),o=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],o[t]]}))}([l.filterHeight,l.filterWidth],f):[[0,0],[0,0]];var d=1===f[0]&&1===f[1],p=function(e,t,n){var r=n.map((function(e){return e[0]})),o=n.map((function(e){return e[1]})),i=e.concat(r,o),a=t.map((function(e,t){return(e-i[t]%e)%e})),u=o.map((function(e,t){return e+a[t]}));return[t.map((function(e,t){return[r[t],u[t]]})),t.map((function(e,t){return[0,a[t]]}))]}([l.inHeight,l.inWidth],f,c),h=p[0],v=p[1],m=d?r:"valid",g=d?u:kf(u,f,h),y=("avg"===n?function(){return _g(g,t,i,1,m)}:function(){return Cg(g,t,i,1,m)})(),b=d?y:of(y,f,v);return s?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),Tg=El({maxPool3d_:function(e,t,n,r,o,i,a){void 0===i&&(i="NDHWC");var u=ll(e,"x","maxPool3d"),s=u,c=!1;4===u.rank&&(c=!0,s=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),null==a&&(a=[1,1,1]),Uu(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+s.rank+"."})),Uu("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i})),Uu(pd(n,a),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),null!=o&&Uu(Xu(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var l=od(s.shape,t,n,a,r,o,i),f=Js.runKernelFunc((function(e,t){var n=e.maxPool3d(s,l);return t([s,n]),n}),{x:s},(function(e,i){var u=i[0],s=i[1];return{x:function(){return function(e,t,n,r,o,i,a,u){var s=ll(e,"dy","maxPool3dBackprop"),c=ll(t,"input","maxPool3dBackprop"),l=ll(n,"output","maxPool3dBackprop"),f=s,d=c,p=l,h=!1;4===c.rank&&(h=!0,f=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),d=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]),p=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),Uu(5===f.rank,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+f.rank+"."})),Uu(5===d.rank,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+d.rank+"."})),Uu(5===p.rank,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+p.rank+"."})),null==i&&(i=[1,1,1]),Uu(pd(o,i),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"})),null!=u&&Uu(Xu(a),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+a+"."}));var v=od(d.shape,r,o,i,a,u),m=Js.runKernelFunc((function(e){return e.maxPool3dBackprop(f,d,p,v)}),{dy5D:f,input5D:d});return h?m.as4D(m.shape[1],m.shape[2],m.shape[3],m.shape[4]):m}(e,u,s,t,n,a,r,o)}}}));return c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),Ag=El({avgPool3d_:function(e,t,n,r,o,i,a){void 0===i&&(i="NDHWC");var u=ll(e,"x","avgPool3d","float32"),s=u,c=!1;4===u.rank&&(c=!0,s=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),null==a&&(a=[1,1,1]),Uu(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+s.rank+"."})),Uu("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i})),Uu(pd(n,a),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),null!=o&&Uu(Xu(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var l=od(s.shape,t,n,a,r,o,i),f=Js.runKernelFunc((function(e){return e.avgPool3d(s,l)}),{x:s},(function(e){return{x:function(){return function(e,t,n,r,o,i,a){var u=ll(e,"dy","avgPool3dBackprop"),s=ll(t,"input","avgPool3dBackprop"),c=u,l=s,f=!1;4===s.rank&&(f=!0,c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]),l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),Uu(5===c.rank,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+c.rank+"."})),Uu(5===l.rank,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+l.rank+"."})),null==o&&(o=[1,1,1]),Uu(pd(r,o),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"})),null!=a&&Uu(Xu(i),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."}));var d=od(l.shape,n,r,o,i,a),p=Js.runKernelFunc((function(e){return e.avgPool3dBackprop(c,l,d)}),{dy5D:c,input5D:l});return f?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}(e,s,t,n,a,r,o)}}}));return f=f.cast(s.dtype),c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),Rg=El({slice_:function(e,t,n){var r,o,i=ll(e,"x","slice");if(0===i.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof t?[t].concat(new Array(i.rank-1).fill(0)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t.slice()).forEach((function(e){Uu(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),o=(o=null==n?new Array(i.rank).fill(-1):"number"==typeof n?[n].concat(new Array(i.rank-1).fill(-1)):n.length<i.rank?n.concat(new Array(i.rank-n.length).fill(-1)):n).map((function(e,t){return e>=0?e:(Uu(-1===e,(function(){return"Negative size values should be exactly -1 but got "+e+" for the slice() size at index "+t+"."})),i.shape[t]-r[t])})),zf(i,r,o);var a=i.shape,u={begin:r,size:o};return Js.runKernelFunc((function(e){return e.slice(i,r,o)}),{x:i},(function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],a[n]-r[n]-o[n]]);return{x:function(){return e.pad(t)}}}),"Slice",u)}}),Ng=El({slice1d_:function(e,t,n){var r=ll(e,"x","slice1d");return Uu(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),Rg(r,[t],[n])}}),Ig=El({slice2d_:function(e,t,n){var r=ll(e,"x","slice2d");return Uu(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),Rg(r,t,n)}}),Pg=El({slice3d_:function(e,t,n){var r=ll(e,"x","slice3d");return Uu(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),Rg(r,t,n)}}),Dg=El({slice4d_:function(e,t,n){var r=ll(e,"x","slice4d");return Uu(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),Rg(r,t,n)}});function Mg(e,t,n,r,o){return t.rank<n.rank&&(t=t.reshape(vl(t.shape,r))),e.rank<n.rank&&(e=e.reshape(vl(e.shape,r))),{x:function(){var r=e.mul(n.equal(t).cast(e.dtype));return null==o?r:r.transpose(o)}}}var Fg=El({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ll(e,"x","all","bool"),o=ts(t,r.shape),i=o,a=gl(i,r.rank);null!=a&&(r=r.transpose(a),i=bl(i.length,r.rank));var u=Js.runKernelFunc((function(e){return e.all(r,i)}),{$x:r});if(n){var s=vl(u.shape,o);return u.reshape(s)}return u}}),Lg=El({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ll(e,"x","any","bool"),o=ts(t,r.shape),i=o,a=gl(i,r.rank);null!=a&&(r=r.transpose(a),i=bl(i.length,r.rank));var u=Js.runKernelFunc((function(e){return e.any(r,i)}),{$x:r});if(n){var s=vl(u.shape,o);return u.reshape(s)}return u}}),jg=El({argMax_:function(e,t){void 0===t&&(t=0);var n=ll(e,"x","argMax");null==t&&(t=0);var r=ts(t,n.shape),o=gl(r,n.rank);null!=o&&(n=n.transpose(o),r=bl(r.length,n.rank));var i={axis:r[0]},a=[n];return Js.runKernelFunc((function(e,t){var o=e.argMax(n,r[0]);return t([n]),o}),{x:n},(function(e,t){var n=t[0];return{x:function(){return jl(n)}}}),"ArgMax",i,a)}}),Bg=El({argMin_:function(e,t){void 0===t&&(t=0);var n=ll(e,"x","argMin");null==t&&(t=0);var r=ts(t,n.shape),o=gl(r,n.rank);return null!=o&&(n=n.transpose(o),r=bl(r.length,n.rank)),Js.runKernelFunc((function(e,t){var o=e.argMin(n,r[0]);return t([n]),o}),{$x:n},(function(e,t){var n=t[0];return{$x:function(){return jl(n)}}}))}}),Vg=El({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ll(e,"x","logSumExp"),o=ts(t,r.shape),i=r.max(o,!0),a=r.sub(i).exp().sum(o).log(),u=i.reshape(a.shape).add(a);if(n){var s=vl(u.shape,o);return u.reshape(s)}return u}}),zg=El({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ll(e,"x","max"),o=r,i=ts(t,r.shape),a=i,u=gl(a,r.rank);null!=u&&(r=r.transpose(u),a=bl(a.length,r.rank));var s=[r],c=Js.runKernelFunc((function(e,t){var n=e.max(r,a);return t([o,n]),n}),{x:r},(function(e,t){return Mg(e,t[1],t[0],i,u)}),"Max",{axes:a},s,[!0]);if(n){var l=vl(c.shape,i);c=c.reshape(l)}return c}}),Wg=El({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ll(e,"x","mean"),o=ts(t,r.shape),i=Ku(hl(r.shape,o)[1]);return $f((function(e){var r=Tl(i);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return o.forEach((function(e){n[e]=1})),t.reshape(n).mul(Pl(e.shape,"float32")).div(i)}}}))(r)}}),Ug=El({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ll(e,"x","min"),o=r,i=ts(t,r.shape),a=i,u=gl(a,r.rank);null!=u&&(r=r.transpose(u),a=bl(a.length,r.rank));var s=[r],c=Js.runKernelFunc((function(e,t){var n=e.min(r,a);return t([o,n]),n}),{x:r},(function(e,t){return Mg(e,t[1],t[0],i,u)}),"Min",{axes:a},s,[!0]);if(n){var l=vl(c.shape,i);c=c.reshape(l)}return c}}),Hg=El({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ts(t,(e=ll(e,"x","moments")).shape),o=e.mean(r,n),i=o.shape;n||(i=vl(o.shape,r));var a=e.toFloat().sub(o.reshape(i)).square();return{mean:o,variance:a.mean(r,n)}}}),Gg=El({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ll(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var o=ts(t,r.shape);return $f((function(e){var t=gl(o,e.rank),r=o,i=e;null!=t&&(i=e.transpose(t),r=bl(r.length,e.rank));var a=function(t){var n=e.shape.slice();return o.forEach((function(e){n[e]=1})),t.reshape(n).mul(Pl(e.shape,"float32"))},u={axes:r},s=Js.runKernelFunc((function(e){return e.sum(i,r)}),{x:i},(function(e){return{x:function(){return a(e)}}}),"Sum",u);if(n){var c=vl(s.shape,o);s=s.reshape(c)}return{value:s,gradFunc:a}}))(r)}}),qg=El({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ll(e,"x","prod");"bool"===r.dtype&&(r=r.toInt());var o=ts(t,r.shape),i=gl(o,r.rank),a=o,u=r;null!=i&&(u=r.transpose(i),a=bl(a.length,r.rank));var s=Js.runKernelFunc((function(e){return e.prod(u,a)}),{permutedX:u});if(n){var c=vl(s.shape,o);s=s.reshape(c)}return s}}),Kg=El({elu_:function(e){var t=ll(e,"x","elu");return Js.runKernelFunc((function(e,n){var r=e.elu(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return Js.runKernelFunc((function(t){return t.eluDer(e,n)}),{dy:e,y:n})}}}))}}),$g=El({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=ll(e,"x","leakyRelu");return Sm(Tl(t).mul(n),n)}}),Xg=El({prelu_:function(e,t){var n=ll(e,"x","prelu"),r=ll(t,"alpha","prelu");return Js.runKernelFunc((function(e,t){var o=e.prelu(n,r);return t([n,r]),o}),{x:n,alpha:r},(function(e,t){var n=t[0],r=t[1],o=n.greater(0);return{x:function(){return mm(o,e,e.mul(r))},alpha:function(){var t=mm(o,jl(e),e.mul(n)),i=td(r.shape,e.shape);return i.length>0&&(t=t.sum(i)),t.reshape(r.shape)}}}),"Prelu")}}),Yg=El({relu_:function(e){var t=ll(e,"x","relu");return"bool"===t.dtype?t.toInt():Js.runKernelFunc((function(e,n){var r=e.relu(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mulStrict(n.step().toFloat())}}}),"Relu")}}),Qg=El({relu6_:function(e){var t=ll(e,"x","relu6");return"bool"===t.dtype?t.toInt():Js.runKernelFunc((function(e,n){var r=e.relu6(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return e.mulStrict(r.toFloat())}}}),"Relu6")}}),Zg=El({selu_:function(e){var t=ll(e,"x","selu");return Js.runKernelFunc((function(e,n){var r=e.selu(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){var t=n.greater(Tl(0)),r=Tl(Kh),o=Tl($h),i=e.mul(o),a=e.mul(r).mul(n.toFloat().exp());return mm(t,i,a)}}}))}}),Jg=El({transpose_:function(e,t){var n=ll(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),Uu(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."})),t.forEach((function(e){Uu(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t}))})),n.rank<=1)return n.clone();var r={perm:t};return Js.runKernelFunc((function(e){return e.transpose(n,t)}),{x:n},(function(e){var n=yl(t);return{x:function(){return e.transpose(n)}}}),"Transpose",r)}}),ey=El({localResponseNormalization_:function(e,t,n,r,o){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=.5);var i=ll(e,"x","localResponseNormalization");Uu(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+i.rank+"."})),Uu(Xu(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."}));var a=i,u=!1;3===i.rank&&(u=!0,a=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var s=Js.runKernelFunc((function(e,i){var u=e.localResponseNormalization4D(a,t,n,r,o);return i([a,u]),u}),{x4D:a},(function(e,i){var a=i[0],u=i[1];return{x4D:function(){return Js.runKernelFunc((function(i){return i.LRNGrad(e,a,u,t,n,r,o)}),{})}}}));return u?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),ty=El({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var o=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(Tl(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=ll(e,"x","norm"),t,n),i=o.shape;if(r){var a=ts(n,e.shape);i=vl(o.shape,a)}return o.reshape(i)}}),ny=El({basicLSTMCell_:function(e,t,n,r,o,i){var a=ll(e,"forgetBias","basicLSTMCell"),u=ll(t,"lstmKernel","basicLSTMCell"),s=ll(n,"lstmBias","basicLSTMCell"),c=ll(r,"data","basicLSTMCell"),l=ll(o,"c","basicLSTMCell"),f=ll(i,"h","basicLSTMCell"),d=c.concat(f,1).matMul(u).add(s),p=d.shape[0],h=d.shape[1]/4,v=[p,h],m=d.slice([0,0],v),g=d.slice([0,h],v),y=d.slice([0,2*h],v),b=d.slice([0,3*h],v),x=m.sigmoid().mulStrict(g.tanh()).addStrict(l.mulStrict(a.add(y).sigmoid())),w=x.tanh().mulStrict(b.sigmoid());return[x,w]}}),ry=El({multiRNNCell_:function(e,t,n,r){for(var o=ll(t,"data","multiRNNCell"),i=fl(n,"c","multiRNNCell"),a=fl(r,"h","multiRNNCell"),u=o,s=[],c=0;c<e.length;c++){var l=e[c](u,i[c],a[c]);s.push(l[0]),s.push(l[1]),u=l[1]}var f=[],d=[];for(c=0;c<s.length;c+=2)f.push(s[c]),d.push(s[c+1]);return[f,d]}}),oy=El({movingAverage_:function(e,t,n,r,o){void 0===o&&(o=!0);var i=ll(e,"v","movingAverage"),a=ll(t,"x","movingAverage"),u=ll(n,"decay","movingAverage");$s(i,a),Uu($u(i.shape,a.shape),(function(){return"Shape mismatch in v and x"}));var s=Tl(1),c=s.sub(u),l=a.sub(i).mul(c);if(o){Uu(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var f=ll(r,"step","movingAverage");l=l.div(s.sub(Dm(u,f)))}return i.add(l)}}),iy=El({stridedSlice_:function(e,t,n,r,o,i,a,u,s){if(void 0===o&&(o=0),void 0===i&&(i=0),void 0===a&&(a=0),void 0===u&&(u=0),void 0===s&&(s=0),null==r&&(r=new Array(t.length)),0!==a)throw new Error("ellipsis mask is not yet supported");var c=ll(e,"x","stridedSlice"),l=Wf(u),f=c.shape.slice();l.forEach((function(e){t[e]=0,n[e]=1,f.splice(e,0,1)})),c=c.reshape(f);for(var d=0;d<c.rank;d++)t[d]=Hf(o,t,r,c.shape,d),n[d]=Gf(i,n,r,c.shape,d),r[d]=r[d]||1;var p=Wf(s);p.forEach((function(e){n[e]=t[e]+1,r[e]=1}));var h=Uf(t,n,r),v=h.filter((function(e,t){return-1===p.indexOf(t)}));return r.every((function(e){return 1===e}))?Rg(c,t,h).reshape(v):Js.runKernelFunc((function(e){return e.stridedSlice(c,t,n,r)}),{$x:c}).reshape(v)}}),ay=El({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=ll(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(t>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+t);var i=Js.runKernelFunc((function(e){return e.topk(r,t,n)}),{$x:r});return{values:i[0],indices:i[1]}}}),uy=El({scatterND_:function(e,t,n){var r=ll(e,"indices","scatterND","int32"),o=ll(t,"updates","scatterND");return Bf(o,r,n),Js.runKernelFunc((function(e){return e.scatterND(r,o,n)}),{indices:r,updates:o},null,"ScatterNd",{shape:n})}}),sy=El({fft_:function(e){Uu("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return Js.runKernelFunc((function(e){return e.fft(r)}),{input:e}).reshape(e.shape)}}),cy=El({ifft_:function(e){Uu("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return Js.runKernelFunc((function(e){return e.ifft(r)}),{input:e}).reshape(e.shape)}}),ly=El({rfft_:function(e,t){Uu("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got "+e.dtype}));var n,r=e.shape[e.shape.length-1],o=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),a=e.shape.map((function(e){return e}));a[e.shape.length-1]=t,n=e.slice(i,a),r=t}else if(null!=t&&t>r){var u=e.shape.map((function(e){return e}));u[e.shape.length-1]=t-r,n=e.concat(Dl(u),e.shape.length-1),r=t}else n=e;var s=n.zerosLike(),c=Cl(n,s).as2D(o,r),l=sy(c),f=Math.floor(r/2)+1,d=_l(l),p=kl(l),h=d.split([f,r-f],d.shape.length-1),v=p.split([f,r-f],p.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=f,Cl(h[0],v[0]).reshape(m)}}),fy=El({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),o=cy(r);return _l(o)}var i=[n,2*(t-1)],a=_l(e).as2D(n,t),u=kl(e).as2D(n,t),s=a.slice([0,1],[n,t-2]).reverse(1),c=u.slice([0,1],[n,t-2]).reverse(1).mul(Tl(-1)),l=a.concat(s,1),f=u.concat(c,1);return r=Cl(l,f).as2D(i[0],i[1]),o=cy(r),_l(o)}}),dy=Object.freeze({fft:sy,ifft:cy,rfft:ly,irfft:fy}),py=El({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0);var o=ll(e,"sparseIndices","sparseToDense","int32"),i=ll(t,"sparseValues","sparseToDense"),a=ll(r,"defaultValue","sparseToDense",i.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".");var o=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+i+".");var a=t.size;if(0!==t.rank&&(1!==t.rank||a!==o))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+o+"]");if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,i,n,a),Js.runKernelFunc((function(e){return e.sparseToDense(o,i,n,a)}),{$sparseIndices:o,$sparseValues:i,$defaultValue:a})}}),hy=El({gatherND_:function(e,t){var n=ll(t,"indices","gatherND","int32"),r=ll(e,"x","gatherND");return Js.runKernelFunc((function(e){return e.gatherND(r,n)}),{x:r,indices:n},null,"GatherNd")}}),vy=El({diag_:function(e){var t=ll(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return Js.runKernelFunc((function(e){return e.diag(t)}),{$x:t}).reshape(n)}}),my=El({dropout_:function(e,t,n,r){var o=ll(e,"x","dropout");if(Uu("float32"===o.dtype,(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+o.dtype+" tensor instead."})),Uu(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got "+t+"."})),0===t)return e instanceof Ls?o.clone():o;var i=function(e,t){if(null==t)return e.shape.slice();if($u(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(o,n),a=1-t,u=Cf(i,0,1,"float32",r).add(a).floor().div(a);return o.mul(u)}});function gy(e,t,n){for(var r=1-e%2,o=new Float32Array(e),i=0;i<e;++i){var a=2*Math.PI*i/(e+r-1);o[i]=t-n*Math.cos(a)}return Al(o,"float32")}var yy,by=El({hannWindow_:function(e){return gy(e,.5,.5)}}),xy=El({hammingWindow_:function(e){return gy(e,.54,.46)}}),wy=El({frame_:function(e,t,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=0);for(var i=0,a=[];i+t<=e.size;)a.push(Rg(e,i,t)),i+=n;if(r)for(;i<e.size;){var u=i+t-e.size,s=Bl([Rg(e,i,t-u),Ml([u],o)]);a.push(s),i+=n}return 0===a.length?Rl([],[0,t]):Bl(a).as2D(a.length,t)}}),Ey=El({stft_:function(e,t,n,r,o){var i;void 0===o&&(o=by),null==r&&(i=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var a=wy(e,t,n),u=Im(a,o(t)),s=[],c=0;c<a.shape[0];c++)s.push(ly(u.slice([c,0],[1,t]),r));return Bl(s)}}),Cy=Object.freeze({hannWindow:by,hammingWindow:xy,frame:wy,stft:Ey});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(yy||(yy={}));var _y=El({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=yy.SUM_BY_NONZERO_WEIGHTS);var o=ll(e,"labels","absoluteDifference"),i=ll(t,"predictions","absoluteDifference"),a=null;null!=n&&(a=ll(n,"weights","absoluteDifference")),Hu(o.shape,i.shape,"Error in absoluteDifference: ");var u=o.sub(i).abs();return ky(u,a,r)}}),ky=El({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=yy.SUM_BY_NONZERO_WEIGHTS);var r=ll(e,"losses","computeWeightedLoss"),o=null;null!=t&&(o=ll(t,"weights","computeWeightedLoss"));var i=null==o?r:r.mul(o);if(n===yy.NONE)return i;if(n===yy.SUM)return i.sum();if(n===yy.MEAN){if(null==o)return i.mean();var a=r.size/o.size,u=i.sum().div(o.sum());return a>1?u.div(Tl(a)):u}if(n===yy.SUM_BY_NONZERO_WEIGHTS){if(null==o)return i.sum().div(Tl(r.size));var s=o.mul(Pl(r.shape)).notEqual(Tl(0)).sum().toFloat();return i.sum().div(s)}throw Error("Unknown reduction: "+n)}}),Sy=El({cosineDistance_:function(e,t,n,r,o){void 0===o&&(o=yy.SUM_BY_NONZERO_WEIGHTS);var i=ll(e,"labels","cosineDistance"),a=ll(t,"predictions","cosineDistance"),u=null;null!=r&&(u=ll(r,"weights","cosineDistance")),Hu(i.shape,a.shape,"Error in cosineDistance: ");var s=Tl(1).sub(i.mul(a).sum(n,!0));return ky(s,u,o)}}),Oy=El({hingeLoss_:function(e,t,n,r){void 0===r&&(r=yy.SUM_BY_NONZERO_WEIGHTS);var o=ll(e,"labels","hingeLoss"),i=ll(t,"predictions","hingeLoss"),a=null;null!=n&&(a=ll(n,"weights","hingeLoss")),Hu(o.shape,i.shape,"Error in hingeLoss: ");var u=Tl(1);o=Tl(2).mul(o).sub(u);var s=u.sub(o.mul(i)).relu();return ky(s,a,r)}}),Ty=El({huberLoss_:function(e,t,n,r,o){void 0===r&&(r=1),void 0===o&&(o=yy.SUM_BY_NONZERO_WEIGHTS);var i=ll(e,"labels","huberLoss"),a=ll(t,"predictions","huberLoss"),u=null;null!=n&&(u=ll(n,"weights","huberLoss")),Hu(i.shape,a.shape,"Error in huberLoss: ");var s=Tl(r),c=a.sub(i).abs(),l=Tm(c,s),f=c.sub(l),d=Tl(.5).mul(l.square()).add(s.mul(f));return ky(d,u,o)}}),Ay=El({logLoss_:function(e,t,n,r,o){void 0===r&&(r=1e-7),void 0===o&&(o=yy.SUM_BY_NONZERO_WEIGHTS);var i=ll(e,"labels","logLoss"),a=ll(t,"predictions","logLoss"),u=null;null!=n&&(u=ll(n,"weights","logLoss")),Hu(i.shape,a.shape,"Error in logLoss: ");var s=Tl(1),c=Tl(r),l=i.mul(a.add(c).log()).neg().sub(s.sub(i).mul(s.sub(a).add(c).log()));return ky(l,u,o)}}),Ry=El({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=yy.SUM_BY_NONZERO_WEIGHTS);var o=ll(e,"labels","meanSquaredError"),i=ll(t,"predictions","meanSquaredError"),a=null;null!=n&&(a=ll(n,"weights","meanSquaredError")),Hu(o.shape,i.shape,"Error in meanSquaredError: ");var u=o.squaredDifference(i);return ky(u,a,r)}}),Ny=El({sigmoidCrossEntropy_:function(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=yy.SUM_BY_NONZERO_WEIGHTS);var i=ll(e,"multiClassLabels","sigmoidCrossEntropy"),a=ll(t,"logits","sigmoidCrossEntropy"),u=null;if(null!=n&&(u=ll(n,"weights","sigmoidCrossEntropy")),Hu(i.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){var s=Tl(r),c=Tl(1),l=Tl(.5);i=i.mul(c.sub(s)).add(l.mul(s))}var f=function(e,t){var n=ll(e,"labels","sigmoidCrossEntropyWithLogits"),r=ll(t,"logits","sigmoidCrossEntropyWithLogits");Hu(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var o=r.relu(),i=r.mul(n),a=r.abs().neg().exp().log1p();return o.sub(i).add(a)}(i,a);return ky(f,u,o)}}),Iy=El({softmaxCrossEntropy_:function(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=yy.SUM_BY_NONZERO_WEIGHTS);var i=ll(e,"onehotLabels","softmaxCrossEntropy"),a=ll(t,"logits","softmaxCrossEntropy"),u=null;if(null!=n&&(u=ll(n,"weights","softmaxCrossEntropy")),Hu(i.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){var s=Tl(r),c=Tl(1),l=Tl(i.shape[1]);i=i.mul(c.sub(s)).add(s.div(l))}var f=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return $f((function(e,t,r){var o=t.logSumExp([n],!0),i=t.toFloat().sub(o);return r([e,i]),{value:i.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],o=t[1],i=vl(e.shape,[n]);return[e.reshape(i).mul(r.toFloat().sub(o.exp())),e.reshape(i).mul(o.exp().sub(r.toFloat()))]}}}))(e,t)}(i,a);return ky(f,u,o)}}),Py=Object.freeze({get Reduction(){return yy},absoluteDifference:_y,computeWeightedLoss:ky,cosineDistance:Sy,hingeLoss:Oy,huberLoss:Ty,logLoss:Ay,meanSquaredError:Ry,sigmoidCrossEntropy:Ny,softmaxCrossEntropy:Iy});function Dy(e,t){return void 0===t&&(t=!1),Js.tidy((function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],o=df(n),i=e.clone(),a=Rl([[1]],[1,1]),u=a.clone(),s=n>=r?r:n,c=function(e){var t,s=i,c=u,l=o;t=Js.tidy((function(){var t=i.slice([e,e],[n-e,1]),s=t.norm(),c=i.slice([e,e],[1,1]),l=Rl([[-1]]).where(c.greater(0),Rl([[1]])),f=c.sub(l.mul(s)),d=t.div(f);u=1===d.shape[0]?a.clone():a.concat(d.slice([1,0],[d.shape[0]-1,d.shape[1]]),0);var p=l.matMul(f).div(s).neg(),h=i.slice([e,0],[n-e,r]),v=p.mul(u);if(0===e)i=h.sub(v.matMul(u.transpose().matMul(h)));else{var m=h.sub(v.matMul(u.transpose().matMul(h)));i=i.slice([0,0],[e,r]).concat(m,0)}var g=o.slice([0,e],[n,o.shape[1]-e]);if(0===e)o=g.sub(g.matMul(u).matMul(v.transpose()));else{var y=g.sub(g.matMul(u).matMul(v.transpose()));o=o.slice([0,0],[n,e]).concat(y,1)}return[u,i,o]})),u=t[0],i=t[1],o=t[2],al([s,c,l])},l=0;l<s;++l)c(l);return!t&&n>r&&(o=o.slice([0,0],[n,r]),i=i.slice([0,0],[r,r])),[o,i]}))}var My=El({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=ll(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var o=r.shape,i=r.shape.slice(-2),a=i[0],u=i[1];if(!(t<=a))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+a+").");if(!(n<=u))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+u+").");t<0&&(t=a),n<0&&(n=u);var s=Fl(0,a,1,"int32").reshape([-1,1]),c=Fl(0,u,1,"int32"),l=Lm(s,c),f=dm(l.lessEqual(Tl(+t,"int32")),l.greaterEqual(Tl(-n,"int32"))),d=Dl([a,u],r.dtype);return Of(Rf(r.reshape([-1,a,u])).map((function(e){return mm(f,e,d)}))).reshape(o)}}),Fy=El({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,Uu(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Uu(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"}))},o=1;o<e.length;++o)r(o)}else t=!0,e=Hl(e,e.shape[0],0).map((function(e){return Sf(e,[0])}));Uu(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."}));var i=[],a=e,u=function(e){i.push(Js.tidy((function(){var t=a[e];if(e>0)for(var n=0;n<e;++n){var r=Gg(i[n].mulStrict(t)).mul(i[n]);t=t.sub(r)}return t.div(ty(t,"euclidean"))})))};for(o=0;o<e.length;++o)u(o);return t?Of(i,0):i}}),Ly=El({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return Dy(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=Rf(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],i=[];return r.forEach((function(e){var n=Dy(e,t),r=n[0],a=n[1];o.push(r),i.push(a)})),[Of(o,0).reshape(e.shape),Of(i,0).reshape(e.shape)]}}),jy=Object.freeze({bandPart:My,gramSchmidt:Fy,qr:Ly});function By(e,t,n,r,o,i){null==r&&(r=.5),null==o&&(o=Number.NEGATIVE_INFINITY),null==i&&(i=0);var a=e.shape[0];return n=Math.min(n,a),Uu(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),Uu(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"})),Uu(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]})),Uu(1===t.rank,(function(){return"scores must be a 1D tensor"})),Uu(t.shape[0]===a,(function(){return"scores has incompatible shape with boxes. Expected "+a+", but was "+t.shape[0]})),Uu(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:i}}var Vy=El({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=ll(e,"images","resizeBilinear");Uu(3===r.rank||4===r.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),Uu(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."}));var o=r,i=!1;3===r.rank&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=t[0],u=t[1],s=Js.runKernelFunc((function(e,t){return t([o]),e.resizeBilinear(o,a,u,n)}),{x:o},(function(e,t){return{x:function(){return Js.runKernelFunc((function(r){return r.resizeBilinearBackprop(e,t[0],n)}),{})}}}),"ResizeBilinear",{alignCorners:n,newHeight:a,newWidth:u});return i?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),zy=El({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=ll(e,"images","resizeNearestNeighbor");Uu(3===r.rank||4===r.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),Uu(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."})),Uu("float32"===r.dtype||"int32"===r.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"}));var o=r,i=!1;3===r.rank&&(i=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=t[0],u=t[1],s=Js.runKernelFunc((function(e,t){return t([o]),e.resizeNearestNeighbor(o,a,u,n)}),{batchImages:o},(function(e,t){return{batchImages:function(){return Js.runKernelFunc((function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)}),{})}}}));return i?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),Wy=El({nonMaxSuppression_:function(e,t,n,r,o){void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY);var i=ll(e,"boxes","nonMaxSuppression"),a=ll(t,"scores","nonMaxSuppression"),u=By(i,a,n,r,o);n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold;var s={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return Js.runKernelFunc((function(e){return e.nonMaxSuppression(i,a,n,r,o)}),{boxes:i,scores:a},null,"NonMaxSuppressionV3",s)}}),Uy=El({nonMaxSuppressionWithScore_:function(e,t,n,r,o,i){void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),void 0===i&&(i=0);var a=ll(e,"boxes","nonMaxSuppression"),u=ll(t,"scores","nonMaxSuppression"),s=By(a,u,n,r,o,i),c={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:o=s.scoreThreshold,softNmsSigma:i=s.softNmsSigma},l=Js.runKernel("NonMaxSuppressionV5",{boxes:a,scores:u},c);return{selectedIndices:l[0],selectedScores:l[1]}}}),Hy=El({cropAndResize_:function(e,t,n,r,o,i){var a=ll(e,"image","cropAndResize"),u=ll(t,"boxes","cropAndResize","float32"),s=ll(n,"boxInd","cropAndResize","int32");o=o||"bilinear",i=i||0;var c=u.shape[0];return Uu(4===a.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."})),Uu(2===u.rank&&4===u.shape[1],(function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+u.shape+"."})),Uu(1===s.rank&&s.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+u.shape+"."})),Uu(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),Uu(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),Uu("bilinear"===o||"nearest"===o,(function(){return"method must be bilinear or nearest, but was "+o})),Js.runKernelFunc((function(e,t){return e.cropAndResize(a,u,s,r,o,i)}),{images:a,boxes:u,boxInd:s},null,"CropAndResize",{method:o,extrapolationValue:i,cropSize:r})}}),Gy=Object.freeze({resizeBilinear:Vy,resizeNearestNeighbor:zy,nonMaxSuppression:Wy,nonMaxSuppressionAsync:function(e,t,n,r,o){return void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),Su(this,void 0,void 0,(function(){var i,a,u,s,c,l,f;return Ou(this,(function(d){switch(d.label){case 0:return i=ll(e,"boxes","nonMaxSuppressionAsync"),a=ll(t,"scores","nonMaxSuppressionAsync"),u=By(i,a,n,r,o),n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,[4,Promise.all([i.data(),a.data()])];case 1:return s=d.sent(),c=s[0],l=s[1],f=_d(c,l,n,r,o),i!==e&&i.dispose(),a!==t&&a.dispose(),[2,f]}}))}))},nonMaxSuppressionWithScore:Uy,nonMaxSuppressionWithScoreAsync:function(e,t,n,r,o,i){return void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),void 0===i&&(i=0),Su(this,void 0,void 0,(function(){var a,u,s,c,l,f,d;return Ou(this,(function(p){switch(p.label){case 0:return a=ll(e,"boxes","nonMaxSuppressionAsync"),u=ll(t,"scores","nonMaxSuppressionAsync"),s=By(a,u,n,r,o,i),n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,i=s.softNmsSigma,[4,Promise.all([a.data(),u.data()])];case 1:return c=p.sent(),l=c[0],f=c[1],d=kd(l,f,n,r,o,i),a!==e&&a.dispose(),u!==t&&u.dispose(),[2,d]}}))}))},cropAndResize:Hy}),qy=function(e,t){return!(e>0)||"linear"===t},Ky=function(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},$y=function(e,t){var n=t,r=td(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},Xy=function(e,t,n){if("linear"===t)return e;if("relu"===t)return Yg(e);if("elu"===t)return Kg(e);if("relu6"===t)return Qg(e);if("prelu"===t)return Xg(e,n);throw new Error("Unknown fused activation "+t+".")},Yy=El({fusedMatMul_:function(e){var t,n=e.a,r=e.b,o=e.transposeA,i=void 0!==o&&o,a=e.transposeB,u=void 0!==a&&a,s=e.bias,c=e.activation,l=void 0===c?"linear":c,f=e.preluActivationWeights;if(!1===qy(Js.state.gradientDepth,l)){var d=vg(n,r,i,u);return null!=s&&(d=ym(d,s)),Xy(d,l,f)}var p=ll(n,"a","fused matMul"),h=ll(r,"b","fused matMul");t=Ks(p,h),p=t[0],h=t[1];var v=i?p.shape[p.rank-2]:p.shape[p.rank-1],m=u?h.shape[h.rank-1]:h.shape[h.rank-2],g=i?p.shape[p.rank-1]:p.shape[p.rank-2],y=u?h.shape[h.rank-2]:h.shape[h.rank-1],b=p.shape.slice(0,-2),x=h.shape.slice(0,-2),w=Ku(b),E=Ku(x);Uu(p.rank>=2&&h.rank>=2&&p.rank===h.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+p.rank+" and "+h.rank+"."})),Uu($u(b,x),(function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+x+") of Tensors with shapes "+p.shape+" and "+h.shape+" must match."})),Uu(v===m,(function(){return"Error in fused matMul: inner shapes ("+v+") and ("+m+") of Tensors with shapes "+p.shape+" and "+h.shape+" and transposeA="+i+" and transposeB="+u+" must match."}));var C,_,k=p.shape.slice(0,-2).concat([g,y]),S=i?p.as3D(w,v,g):p.as3D(w,g,v),O=u?h.as3D(E,y,m):h.as3D(E,m,y);null!=s&&nd(k,(C=Ks(C=ll(s,"bias","fused matMul"),p)[0]).shape),null!=f&&(_=ll(f,"prelu weights","fused matMul"));var T={a:S,b:O};null!=s&&(T.bias=C),null!=f&&(T.preluActivationWeights=_);var A=[S,O];return Js.runKernelFunc((function(e,t){var n=e.fusedBatchMatMul({a:S,b:O,transposeA:i,transposeB:u,bias:C,activation:l,preluActivationWeights:_});return t([S,O,n]),n}),T,(function(e,t){var n=t[0],r=t[1],o=t[2],a=Ky(e,o,l),c={};return null!=s&&(c={bias:function(){return $y(C,a)}}),i||u?!i&&u?Object.assign({a:function(){return a.matMul(r,!1,!1)},b:function(){return a.matMul(n,!0,!1)}},c):i&&!u?Object.assign({a:function(){return r.matMul(a,!1,!0)},b:function(){return n.matMul(a,!1,!1)}},c):Object.assign({a:function(){return r.matMul(a,!0,!0)},b:function(){return a.matMul(n,!0,!0)}},c):Object.assign({a:function(){return a.matMul(r,!1,!0)},b:function(){return n.matMul(a,!0,!1)}},c)}),"_FusedMatMul",{transposeA:i,transposeB:u,activation:l},A,[!0]).reshape(k)}}),Qy=El({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,o=e.pad,i=e.dataFormat,a=void 0===i?"NHWC":i,u=e.dilations,s=void 0===u?[1,1]:u,c=e.dimRoundingMode,l=e.bias,f=e.activation,d=void 0===f?"linear":f,p=e.preluActivationWeights;if(d=d||"linear",!1===qy(Js.state.gradientDepth,d)){var h=ig(t,n,r,o,a,s,c);return null!=l&&(h=ym(h,l)),Xy(h,d,p)}var v=ll(t,"x","conv2d"),m=ll(n,"filter","conv2d"),g=v,y=!1;3===v.rank&&(y=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),Uu(4===g.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."})),Uu(4===m.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+m.rank+"."})),null!=c&&Uu(Xu(o),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+o+"."})),Uu(g.shape[3]===m.shape[2],(function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+m.shape[2]+"."})),Uu(pd(r,s),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+s+"'"})),Uu("NHWC"===a,(function(){return"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported."}));var b,x,w=id(g.shape,m.shape,r,s,o,c);null!=l&&(b=Ks(b=ll(l,"bias","fused conv2d"),v)[0],nd(w.outShape,b.shape)),null!=p&&(x=ll(p,"prelu weights","fused conv2d"));var E={x:g,filter:m};null!=l&&(E.bias=b),null!=p&&(E.preluActivationWeights=x);var C=[m,g],_=Js.runKernelFunc((function(e,t){var n=e.fusedConv2d({input:g,filter:m,convInfo:w,bias:b,activation:d,preluActivationWeights:x});return t([m,g,n]),n}),E,(function(e,t){var n=t,i=n[0],a=n[1],u=n[2],c=Ky(e,u,d);Uu(dd(s),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+s+"'"}));var f={};return null!=l&&(f={bias:function(){return $y(b,c)}}),Object.assign({x:function(){return sg(a.shape,c,i,r,o)},filter:function(){return ug(a,c,i.shape,r,o)}},f)}),"FusedConv2D",{convInfo:w,activation:d},C,[!0]);return y?_.as3D(_.shape[1],_.shape[2],_.shape[3]):_}}),Zy=El({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,o=e.pad,i=e.dataFormat,a=void 0===i?"NHWC":i,u=e.dilations,s=void 0===u?[1,1]:u,c=e.dimRoundingMode,l=e.bias,f=e.activation,d=void 0===f?"linear":f,p=e.preluActivationWeights;if(!1===qy(Js.state.gradientDepth,d)){var h=cg(t,n,r,o,a,s,c);return null!=l&&(h=ym(h,l)),Xy(h,d,p)}var v=ll(t,"x","depthwiseConv2d"),m=ll(n,"filter","depthwiseConv2d"),g=v,y=!1;3===v.rank&&(y=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),Uu(4===g.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."})),Uu(4===m.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+m.rank+"."})),Uu(g.shape[3]===m.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+m.shape[2]+"."})),null==s&&(s=[1,1]),Uu(pd(r,s),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+s+"'"})),null!=c&&Uu(Xu(o),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+c+" but got pad "+o+"."}));var b,x,w=id(g.shape,m.shape,r,s,o,c,!0);null!=l&&(b=Ks(b=ll(l,"bias","fused conv2d"),v)[0],nd(w.outShape,b.shape)),null!=p&&(x=ll(p,"prelu weights","fused depthwiseConv2d"));var E={x:g,filter:m};null!=l&&(E.bias=b),null!=p&&(E.preluActivationWeights=x);var C=[m,g],_=Js.runKernelFunc((function(e,t){var n=e.fusedDepthwiseConv2D({input:g,filter:m,convInfo:w,bias:b,activation:d,preluActivationWeights:x});return t([m,g,n]),n}),E,(function(e,t){Uu(dd(s),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+s+"'"}));var n=t[0],r=t[1],o=t[2],i=Ky(e,o,d),a={};return null!=l&&(a={bias:function(){return $y(b,i)}}),Object.assign({x:function(){return lg(r.shape,i,n,w)},filter:function(){return fg(r,i,n.shape,w)}},a)}),"FusedDepthwiseConv2D",{convInfo:w,activation:d},C,[!0]);return y?_.as3D(_.shape[1],_.shape[2],_.shape[3]):_}}),Jy=Object.freeze({matMul:Yy,conv2d:Qy,depthwiseConv2d:Zy}),eb=Object.freeze({image:Gy,linalg:jy,losses:Py,spectral:dy,fused:Jy,signal:Cy,square:vv,squaredDifference:gv,conv1d:og,conv2d:ig,conv3d:ag,depthwiseConv2d:cg,separableConv2d:dg,conv2dTranspose:pg,conv3dTranspose:hg,op:El,batchNormalization2d:om,batchNormalization3d:im,batchNormalization4d:am,batchNormalization:um,batchNorm:sm,batchNorm2d:cm,batchNorm3d:lm,batchNorm4d:fm,booleanMaskAsync:function(e,t,n){return Su(this,void 0,void 0,(function(){var r,o,i,a,u,s,c,l,f,d,p,h,v;return Ou(this,(function(m){switch(m.label){case 0:for(r=ll(e,"tensor","boolMask"),o=ll(t,"mask","boolMask","bool"),i=null==n?0:n,a=o.rank,u=r.shape,Uu(a>0,(function(){return"mask cannot be scalar"})),Hu(u.slice(i,i+a),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),s=1,c=i;c<i+a;c++)s*=u[c];return l=u.slice(0,i).concat([s],u.slice(i+a)),f=r.reshape(l),d=o.reshape([-1]),[4,gm(d)];case 1:return p=m.sent(),h=p.squeeze([1]),v=Jm(f,h,i),e!==r&&r.dispose(),t!==o&&o.dispose(),h.dispose(),f.dispose(),d.dispose(),p.dispose(),[2,v]}}))}))},complex:Cl,real:_l,imag:kl,concat:Bl,concat1d:Vl,concat2d:zl,concat3d:Wl,concat4d:Ul,split:Hl,matMul:vg,dot:mg,outerProduct:gg,reverse:yg,reverse1d:bg,reverse2d:xg,reverse3d:wg,reverse4d:Eg,maxPool:kg,avgPool:Sg,pool:Og,maxPool3d:Tg,avgPool3d:Ag,slice:Rg,slice1d:Ng,slice2d:Ig,slice3d:Pg,slice4d:Dg,abs:yv,acos:bv,acosh:xv,asin:wv,asinh:Ev,atan:Cv,atanh:_v,ceil:kv,clipByValue:Sv,cos:Ov,cosh:Tv,erf:Av,exp:Rv,expm1:Nv,floor:Iv,log:Pv,log1p:Dv,logSigmoid:Mv,neg:Fv,reciprocal:Lv,round:jv,rsqrt:Bv,sigmoid:Vv,sign:zv,isNaN:Wv,isInf:Uv,isFinite:Hv,sin:Gv,sinh:qv,softplus:Kv,sqrt:$v,step:Xv,tan:Yv,tanh:Qv,all:Fg,any:Lg,argMax:jg,argMin:Bg,logSumExp:Vg,max:zg,mean:Wg,min:Ug,moments:Hg,sum:Gg,prod:qg,equal:Bm,equalStrict:Vm,greater:zm,greaterEqual:Wm,greaterEqualStrict:Um,greaterStrict:Hm,less:Gm,lessEqual:qm,lessEqualStrict:Km,lessStrict:$m,notEqual:Xm,notEqualStrict:Ym,add:ym,addN:bm,addStrict:xm,atan2:wm,div:Em,divNoNan:Cm,divStrict:_m,floorDiv:km,maximum:Sm,maximumStrict:Om,minimum:Tm,minimumStrict:Am,mod:Rm,modStrict:Nm,mul:Im,mulStrict:Pm,pow:Dm,powStrict:Mm,squaredDifferenceStrict:Fm,sub:Lm,subStrict:jm,elu:Kg,leakyRelu:$g,prelu:Xg,relu:Yg,relu6:Qg,selu:Zg,logicalAnd:dm,logicalNot:pm,logicalOr:hm,logicalXor:vm,where:mm,whereAsync:gm,buffer:rf,print:function(e,t){void 0===t&&(t=!1),console.log(e.toString(t))},batchToSpaceND:of,broadcastTo:af,cast:uf,clone:sf,cumsum:cf,depthToSpace:lf,expandDims:ff,eye:df,multinomial:pf,oneHot:hf,pad:vf,pad1d:mf,pad2d:gf,pad3d:yf,pad4d:bf,rand:xf,randomNormal:wf,randomGamma:Ef,randomUniform:Cf,reshape:_f,spaceToBatchND:kf,squeeze:Sf,stack:Of,tile:Tf,truncatedNormal:Af,unstack:Rf,setdiff1dAsync:function(e,t){return Su(this,void 0,void 0,(function(){var n,r,o,i,a,u,s,c,l,f;return Ou(this,(function(d){switch(d.label){case 0:return n=ll(e,"x","setdiff1d"),r=ll(t,"y","setdiff1d"),Uu(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),Uu(1===n.rank,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),Uu(1===r.rank,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return o=d.sent(),[4,r.data()];case 2:for(i=d.sent(),a=new Set(i),u=0,l=0;l<o.length;l++)a.has(o[l])||u++;for(s=new Ps([u],n.dtype),c=new Ps([u],"int32"),l=0,f=0;l<o.length;l++)a.has(o[l])||(s.values[f]=o[l],c.values[f]=l,f++);return[2,[s.toTensor(),c.toTensor()]]}}))}))},fill:Ml,linspace:function(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return Js.runKernelFunc((function(r){return r.linspace(e,t,n)}),{})},ones:Pl,range:Fl,scalar:Tl,tensor:Sl,tensor1d:Al,tensor2d:Rl,tensor3d:Nl,tensor4d:Il,tensor5d:function(e,t,n){if(Gu(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=sl(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Ol(e,t,r,n)},tensor6d:function(e,t,n){if(Gu(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=sl(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Ol(e,t=t||r,r,n)},variable:function(e,t,n,r){return void 0===t&&(t=!0),Js.makeVariable(e,t,n,r)},zeros:Dl,onesLike:Ll,zerosLike:jl,transpose:Jg,softmax:Xf,logSoftmax:Yf,localResponseNormalization:ey,norm:ty,gather:Jm,unsortedSegmentSum:eg,basicLSTMCell:ny,multiRNNCell:ry,movingAverage:oy,stridedSlice:iy,topk:ay,scatterND:uy,fft:sy,ifft:cy,rfft:ly,irfft:fy,sparseToDense:py,gatherND:hy,diag:vy,dropout:my,hannWindow:by,hammingWindow:xy,frame:wy,stft:Ey,inTopKAsync:function(e,t,n){return void 0===n&&(n=1),Su(this,void 0,void 0,(function(){var r,o,i,a,u,s,c,l,f,d,p,h,v,m;return Ou(this,(function(g){switch(g.label){case 0:return r=ll(e,"predictions","inTopK"),o=ll(t,"targets","inTopK"),Uu(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),Uu(r.rank-1===o.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+o.rank})),Hu(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=r.shape[r.shape.length-1],Uu(n>0&&n<=i,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+n})),[4,r.data()];case 1:return a=g.sent(),[4,o.data()];case 2:for(u=g.sent(),s=[a.length/i,i],l=s[1],f=rs("bool",c=s[0]),d=0;d<c;d++){for(p=d*l,h=a.subarray(p,p+l),v=[],m=0;m<h.length;m++)v.push({value:h[m],index:m});for(v.sort((function(e,t){return t.value-e.value})),f[d]=0,m=0;m<n;m++)if(v[m].index===u[d]){f[d]=1;break}}return e!==r&&r.dispose(),t!==o&&o.dispose(),[2,Sl(f,o.shape,"bool")]}}))}))}});function tb(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Uu("complex64"!==e.dtype,(function(){return t+" does not support complex64 tensors."}))}))}function nb(e,t,n,r){if("linear"===n)return e.linear(t);if("relu"===n)return e.relu(t);if("elu"===n)return e.elu(t);if("relu6"===n)return e.relu6(t);if("prelu"===n)return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var rb=function(e){function t(){var t=e.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new Qf(t,Js),t}return ku(t,e),t.prototype.write=function(e,t,n){this.firstUse&&(this.firstUse=!1,Ru().get("IS_NODE")&&ul("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:e,dtype:n}),r},t.prototype.move=function(e,t,n,r){this.data.set(e,{values:t,dtype:r})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(e){return Su(this,void 0,void 0,(function(){return Ou(this,(function(t){return[2,this.readSync(e)]}))}))},t.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors;return"complex64"===n?yd(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},t.prototype.bufferSync=function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return ks(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return rf(e.shape,e.dtype,n)},t.prototype.makeOutput=function(e,t,n){var r=this.write(e,t,n);return Js.makeTensorFromDataId(r,t,n,this)},t.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return Su(this,void 0,void 0,(function(){var t;return Ou(this,(function(n){return t=Es(),e(),[2,{kernelMs:Es()-t}]}))}))},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,t){var n=this.makeOutput(null,e.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:Js.keep(e.clone()),imag:Js.keep(t.clone())},n},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(tb(e,"slice"),qf(e.shape,t,n)){var r=Kf(t,e.strides),o=Ku(n);return Sl(this.readSync(e.dataId).subarray(r,r+o),n,e.dtype)}for(var i=rf(n,e.dtype),a=this.bufferSync(e),u=0;u<i.size;++u){var s=i.indexToLoc(u).map((function(e,n){return e+t[n]}));i.values[u]=a.get.apply(a,s)}return i.toTensor()},t.prototype.stridedSlice=function(e,t,n,r){tb(e,"stridedSlice");var o=Uf(t,n,r);if(o.some((function(e){return 0===e})))return Sl([],o);for(var i=rf(o,e.dtype),a=this.bufferSync(e),u=0;u<i.size;u++){for(var s=i.indexToLoc(u),c=new Array(s.length),l=0;l<c.length;l++)c[l]=s[l]*r[l]+t[l];i.set.apply(i,[a.get.apply(a,c)].concat(s))}return i.toTensor()},t.prototype.diag=function(e){for(var t=this.readSync(e.dataId),n=rf([e.size,e.size],e.dtype),r=n.values,o=0;o<t.length;o++)r[o*e.size+o]=t[o];return n.toTensor()},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),o=0,i=0;i<e.rank;i++)i!==t&&(r[o++]=e.shape[i]);var a=new Array(e.rank).fill(0),u=e.shape.slice();u[t]=1;var s=new Array(n);for(i=0;i<s.length;i++)a[t]=i,s[i]=this.slice(e,a,u).reshape(r);return s},t.prototype.reverse=function(e,t){tb(e,"reverse");for(var n=rf(e.shape,e.dtype),r=this.bufferSync(e),o=function(o){var i=n.indexToLoc(o),a=i.slice();t.forEach((function(t){return a[t]=e.shape[t]-1-a[t]})),n.set.apply(n,[r.get.apply(r,a)].concat(i))},i=0;i<n.size;i++)o(i);return n.toTensor()},t.prototype.concat=function(e,t){var n=this;if("complex64"===e[0].dtype){var r=e.map((function(e){return _l(e)})),o=e.map((function(e){return kl(e)}));return Cl(this.concat(r,t),this.concat(o,t))}var i=e.map((function(e){var n=Ku(e.shape.slice(t));return e.as2D(-1,n)})),a=wl(i.map((function(e){return e.shape})),1),u=rf(a,e[0].dtype).values;if(1===i[0].shape[0]){var s=0;i.forEach((function(e){u.set(n.readSync(e.dataId),s),s+=e.size}))}else{var c=0;i.forEach((function(e){for(var t=n.readSync(e.dataId),r=0,o=0;o<e.shape[0];++o)for(var i=o*a[1]+c,s=0;s<e.shape[1];++s)u[i+s]=t[r++];c+=e.shape[1]}))}var l=wl(e.map((function(e){return e.shape})),t);return Sl(u,l,e[0].dtype)},t.prototype.neg=function(e){return tb(e,"neg"),this.multiply(Tl(-1),e)},t.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e+n,imag:t+r}})):this.broadcastedBinaryOp(e,t,Gs(e.dtype,t.dtype),(function(e,t){return e+t}))},t.prototype.addN=function(e){var t=this;tb(e,"addN");for(var n=e.map((function(e){return t.readSync(e.dataId)})),r=rf(e[0].shape,e[0].dtype),o=r.values,i=0;i<e.length;i++)for(var a=n[i],u=0;u<o.length;u++)o[u]+=a[u];return r.toTensor()},t.prototype.softmax=function(e,t){var n=ts([t],e.shape),r=this.max(e,n),o=vl(r.shape,n),i=this.subtract(e,r.reshape(o)),a=this.exp(i),u=this.sum(a,n).reshape(o);return this.realDivide(a,u)},t.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e-n,imag:t-r}})):this.broadcastedBinaryOp(e,t,Gs(e.dtype,t.dtype),(function(e,t){return e-t}))},t.prototype.pow=function(e,t){return tb([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.pow(e,t)}))},t.prototype.batchMatMul=function(e,t,n,r){tb([e,t],"matMul");for(var o=n?e.shape[1]:e.shape[2],i=n?e.shape[2]:e.shape[1],a=r?t.shape[1]:t.shape[2],u=e.shape[0],s=this.readSync(e.dataId),c=this.readSync(t.dataId),l=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],f=l[0],d=l[1],p=l[2],h=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],v=h[0],m=h[1],g=h[2],y=i*a,b=rf([u,i,a],e.dtype),x=b.values,w=this.blockSize,E=0;E<u;E++)for(var C=0;C<i;C+=w)for(var _=0;_<a;_+=w)for(var k=0;k<o;k+=w)for(var S=Math.min(C+w,i),O=Math.min(_+w,a),T=Math.min(k+w,o),A=C;A<S;A++)for(var R=_;R<O;R++){for(var N=0,I=k;I<T;I++)N+=s[E*f+A*d+I*p]*c[I*v+R*m+E*g];x[E*y+(A*a+R)]+=N}return b.toTensor()},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,o=e.transposeB,i=e.bias,a=e.activation,u=e.preluActivationWeights,s=this.batchMatMul(t,n,r,o);return i&&(s=this.add(s,i)),a&&(s=nb(this,s,a,u)),s},t.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})):this.broadcastedBinaryOp(e,t,Gs(e.dtype,t.dtype),(function(e,t){return e*t}))},t.prototype.realDivide=function(e,t){return tb([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",(function(e,t){return e/t}))},t.prototype.floorDiv=function(e,t){return tb([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",(function(e,t){return Math.floor(e/t)}))},t.prototype.sum=function(e,t){tb(e,"sum"),ml("sum",t,e.rank);for(var n=hl(e.shape,t),r=n[0],o=n[1],i=Dl(r,Gs(e.dtype,"int32")),a=Ku(o),u=this.readSync(i.dataId),s=this.readSync(e.dataId),c=0;c<u.length;++c){for(var l=c*a,f=0,d=0;d<a;++d)f+=s[l+d];u[c]=f}return i},t.prototype.prod=function(e,t){tb(e,"sum");for(var n=hl(e.shape,t),r=n[0],o=n[1],i=Dl(r,Gs(e.dtype,"int32")),a=Ku(o),u=this.readSync(i.dataId),s=this.readSync(e.dataId),c=0;c<u.length;++c){for(var l=c*a,f=1,d=0;d<a;++d)f*=s[l+d];u[c]=f}return i},t.prototype.unsortedSegmentSum=function(e,t,n){tb(e,"unsortedSegmentSum");for(var r=[],o=e.rank-t.rank,i=0;i<o;++i)t=t.expandDims(i+1);for(i=0;i<n;++i){var a=Tl(i,"int32"),u=Bm(a,t).asType("float32").mul(e).sum(0);r.push(u)}return Of(r)},t.prototype.argMin=function(e,t){tb(e,"argMin");var n=[t];ml("argMin",n,e.rank);for(var r=hl(e.shape,n),o=r[0],i=r[1],a=Dl(o,"int32"),u=Ku(i),s=this.readSync(a.dataId),c=this.readSync(e.dataId),l=0;l<s.length;++l){for(var f=l*u,d=c[f],p=0,h=0;h<u;++h){var v=c[f+h];v<d&&(d=v,p=h)}s[l]=p}return a},t.prototype.argMax=function(e,t){tb(e,"argMax");var n=[t];ml("argMax",n,e.rank);for(var r=hl(e.shape,n),o=r[0],i=r[1],a=Dl(o,"int32"),u=Ku(i),s=this.readSync(a.dataId),c=this.readSync(e.dataId),l=0;l<s.length;++l){for(var f=l*u,d=c[f],p=0,h=0;h<u;++h){var v=c[f+h];v>d&&(d=v,p=h)}s[l]=p}return a},t.prototype.cumsum=function(e,t,n,r){if(tb(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var o=Gs(e.dtype,"int32"),i=Dl(e.shape,o),a=this.readSync(i.dataId),u=this.readSync(e.dataId),s=e.shape[e.rank-1],c=r?function(e,t){return e+s-t-1}:function(e,t){return e+t},l=0;l<u.length;l+=s)for(var f=0;f<s;f++){var d=c(l,f);if(0===f)a[d]=n?0:u[d];else{var p=c(l,f-1);a[d]=n?u[p]+a[p]:u[d]+a[p]}}return i},t.prototype.equal=function(e,t){return tb([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e===t?1:0}))},t.prototype.notEqual=function(e,t){return tb([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e!==t?1:0}))},t.prototype.less=function(e,t){return tb([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<t?1:0}))},t.prototype.lessEqual=function(e,t){return tb([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<=t?1:0}))},t.prototype.greater=function(e,t){return tb([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>t?1:0}))},t.prototype.greaterEqual=function(e,t){return tb([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>=t?1:0}))},t.prototype.logicalNot=function(e){tb(e,"logicalNot");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return this.makeOutput(n,e.shape,"bool")},t.prototype.logicalAnd=function(e,t){return tb([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e&&t}))},t.prototype.logicalOr=function(e,t){return tb([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e||t}))},t.prototype.select=function(e,t,n){tb([e,t,n],"select");for(var r=this.readSync(e.dataId),o=this.readSync(t.dataId),i=this.readSync(n.dataId),a=Dl(t.shape,Gs(t.dtype,n.dtype)),u=this.readSync(a.dataId),s=0,c=0===e.rank||e.rank>1||1===t.rank?1:Ku(t.shape.slice(1)),l=0;l<r.length;l++)for(var f=0;f<c;f++)1===r[l]?u[s++]=o[l]:u[s++]=i[l];return a},t.prototype.where=function(e){tb([e],"where");var t=this.readSync(e.dataId);return Pd(e.shape,t)},t.prototype.topk=function(e,t,n){return tb(e,"topk"),Id(this.readSync(e.dataId),e.shape,e.dtype,t)},t.prototype.min=function(e,t){tb(e,"min"),ml("min",t,e.rank);for(var n=hl(e.shape,t),r=n[0],o=n[1],i=Dl(r,e.dtype),a=Ku(o),u=this.readSync(i.dataId),s=this.readSync(e.dataId),c=0;c<u.length;++c){for(var l=c*a,f=s[l],d=0;d<a;++d){var p=s[l+d];p<f&&(f=p)}u[c]=f}return i},t.prototype.minimum=function(e,t){return tb([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.min(e,t)}))},t.prototype.mod=function(e,t){return tb([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}))},t.prototype.max=function(e,t){tb(e,"max"),ml("max",t,e.rank);for(var n=hl(e.shape,t),r=n[0],o=n[1],i=Dl(r,e.dtype),a=Ku(o),u=this.readSync(i.dataId),s=this.readSync(e.dataId),c=0;c<u.length;++c){for(var l=c*a,f=s[l],d=0;d<a;++d){var p=s[l+d];p>f&&(f=p)}u[c]=f}return i},t.prototype.maximum=function(e,t){return tb([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.max(e,t)}))},t.prototype.all=function(e,t){tb(e,"all"),ml("all",t,e.rank);for(var n=hl(e.shape,t),r=n[0],o=n[1],i=Dl(r,e.dtype),a=Ku(o),u=this.readSync(i.dataId),s=this.readSync(e.dataId),c=0;c<u.length;++c){for(var l=c*a,f=s[l],d=0;d<a;++d){var p=s[l+d];f=f&&p}u[c]=f}return i},t.prototype.any=function(e,t){tb(e,"any"),ml("any",t,e.rank);for(var n=hl(e.shape,t),r=n[0],o=n[1],i=Dl(r,e.dtype),a=Ku(o),u=this.readSync(i.dataId),s=this.readSync(e.dataId),c=0;c<u.length;++c){for(var l=c*a,f=s[l],d=0;d<a;++d){var p=s[l+d];f=f||p}u[c]=f}return i},t.prototype.squaredDifference=function(e,t){return tb([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e-t;return n*n}))},t.prototype.ceil=function(e){tb(e,"ceil");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.floor=function(e){tb(e,"floor");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.sign=function(e){tb(e,"x");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return this.makeOutput(n,e.shape,"float32")},t.prototype.isNaN=function(e){tb(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isInf=function(e){tb(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isFinite=function(e){tb(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.round=function(e){tb(e,"round");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=Math.floor(t[r]);t[r]-o<.5?n[r]=Math.floor(t[r]):t[r]-o>.5?n[r]=Math.ceil(t[r]):n[r]=o%2==0?o:o+1}return this.makeOutput(n,e.shape,"float32")},t.prototype.exp=function(e){tb(e,"exp");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.expm1=function(e){tb(e,"expm1");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.log=function(e){tb(e,"log");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.log(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.log1p=function(e){tb(e,"log1p");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.log1p(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.sqrt=function(e){tb(e,"sqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.sqrt(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.rsqrt=function(e){tb(e,"rsqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=1/Math.sqrt(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.reciprocal=function(e){tb(e,"reciprocal");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return this.makeOutput(n,e.shape,"float32")},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){tb(e,"relu");for(var t=Dl(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),o=0;o<r.length;++o)n[o]=Math.max(0,r[o]);return t},t.prototype.relu6=function(e){tb(e,"relu");for(var t=Dl(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),o=0;o<r.length;++o)n[o]=Math.min(Math.max(0,r[o]),6);return t},t.prototype.prelu=function(e,t){return tb([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return e<0?t*e:e}))},t.prototype.elu=function(e){tb(e,"elu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var o=n[r];t[r]=o>=0?o:Math.exp(o)-1}return this.makeOutput(t,e.shape,"float32")},t.prototype.eluDer=function(e,t){tb([e,t],"eluDer");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),o=this.readSync(e.dataId),i=0;i<r.length;++i){var a=r[i];n[i]=a>=1?o[i]:o[i]*(a+1)}return this.makeOutput(n,t.shape,"float32")},t.prototype.selu=function(e){tb(e,"selu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var o=n[r];t[r]=o>=0?1.0507009873554805*o:1.7580993408473768*(Math.exp(o)-1)}return this.makeOutput(t,e.shape,"float32")},t.prototype.clip=function(e,t,n){tb(e,"clip");for(var r=new Float32Array(e.size),o=this.readSync(e.dataId),i=0;i<o.length;++i){var a=o[i];r[i]=a>n?n:a<t?t:a}return this.makeOutput(r,e.shape,"float32")},t.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var o=n[2*r],i=n[2*r+1];t[r]=Math.hypot(o,i)}return this.makeOutput(t,e.shape,"float32")},t.prototype.int=function(e){tb(e,"int");for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r];return this.makeOutput(t,e.shape,"int32")},t.prototype.sigmoid=function(e){tb(e,"sigmoid");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(t,e.shape,"float32")},t.prototype.softplus=function(e){tb(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),o=0;o<r.length;++o){var i,a=r[o]>-t,u=r[o]<t,s=Math.exp(r[o]);i=u?s:a?r[o]:Math.log(1+s),n[o]=i}return this.makeOutput(n,e.shape,"float32")},t.prototype.sin=function(e){tb(e,"sin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cos=function(e){tb(e,"cos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tan=function(e){tb(e,"tan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asin=function(e){tb(e,"asin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acos=function(e){tb(e,"acos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan=function(e){tb(e,"atan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan2=function(e,t){return tb([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.atan2(e,t)}))},t.prototype.sinh=function(e){tb(e,"sinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cosh=function(e){tb(e,"cosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tanh=function(e){tb(e,"tanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Yu(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asinh=function(e){tb(e,"asinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acosh=function(e){tb(e,"acosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atanh=function(e){tb(e,"atanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.erf=function(e){tb(e,"erf");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var o=Math.sign(n[r]),i=Math.abs(n[r]),a=1/(1+.3275911*i);t[r]=o*(1-((((1.061405429*a-1.453152027)*a+1.421413741)*a-.284496736)*a+.254829592)*a*Math.exp(-i*i))}return this.makeOutput(t,e.shape,"float32")},t.prototype.step=function(e,t){void 0===t&&(t=0),tb(e,"step");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),o=0;o<r.length;++o){var i=r[o];isNaN(i)?n[o]=NaN:n[o]=i>0?1:t}return this.makeOutput(n,e.shape,"float32")},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,o=e.bias,i=e.activation,a=e.preluActivationWeights,u=this.conv2d(t,n,r);return o&&(u=this.add(u,o)),i&&(u=nb(this,u,i,a)),u},t.prototype.conv2d=function(e,t,n){tb([e,t],"conv2d");for(var r=n.filterHeight,o=n.filterWidth,i=n.dilationHeight,a=n.dilationWidth,u=n.padInfo.left,s=n.padInfo.top,c="channelsLast"===n.dataFormat,l=rf(n.outShape,e.dtype),f=e.strides[0],d=c?e.strides[1]:e.strides[2],p=c?e.strides[2]:1,h=c?1:e.strides[1],v=l.strides[0],m=c?l.strides[1]:l.strides[2],g=c?l.strides[2]:1,y=c?1:l.strides[1],b=this.readSync(e.dataId),x=this.readSync(t.dataId),w=l.values,E=0;E<n.batchSize;++E)for(var C=E*f,_=E*v,k=0;k<n.outHeight;++k)for(var S=_+k*m,O=k*n.strideHeight-s,T=0;T<r;T++){var A=O+T*i;if(!(A<0||A>=n.inHeight))for(var R=T*t.strides[0],N=C+A*d,I=0;I<n.outWidth;++I)for(var P=S+I*g,D=I*n.strideWidth-u,M=0;M<o;M++){var F=D+M*a;if(!(F<0||F>=n.inWidth))for(var L=N+F*p,j=R+M*t.strides[1],B=0;B<n.inChannels;++B){for(var V=b[L+B*h],z=0;z<n.outChannels;++z)w[P+z*y]+=V*x[j+z];j+=n.outChannels}}}return l.toTensor()},t.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,o=n.filterHeight,i=n.filterWidth,a=n.dilationDepth,u=n.dilationHeight,s=n.dilationWidth,c=n.padInfo.front,l=n.padInfo.left,f=n.padInfo.top,d=rf(n.outShape,e.dtype),p=this.readSync(e.dataId),h=this.readSync(t.dataId),v=d.values,m=0;m<n.batchSize;++m)for(var g=m*e.strides[0],y=m*d.strides[0],b=0;b<n.outDepth;++b)for(var x=y+b*d.strides[1],w=b*n.strideDepth-c,E=0;E<r;E++){var C=w+E*a;if(!(C<0||C>=n.inDepth))for(var _=E*t.strides[0],k=g+C*e.strides[1],S=0;S<n.outHeight;++S)for(var O=x+S*d.strides[2],T=S*n.strideHeight-f,A=0;A<o;A++){var R=T+A*u;if(!(R<0||R>=n.inHeight))for(var N=_+A*t.strides[1],I=k+R*e.strides[2],P=0;P<n.outWidth;++P)for(var D=O+P*n.outChannels,M=P*n.strideWidth-l,F=0;F<i;F++){var L=M+F*s;if(!(L<0||L>=n.inWidth))for(var j=N+F*t.strides[2],B=I+L*n.inChannels,V=j,z=0;z<n.inChannels;++z){for(var W=p[B+z],U=0;U<n.outChannels;++U)v[D+U]+=W*h[V+U];V+=n.outChannels}}}}return d.toTensor()},t.prototype.conv2dDerInput=function(e,t,n){tb([e,t],"conv2dDerInput");for(var r=rf(n.inShape,"float32"),o=r.values,i=this.readSync(e.dataId),a=this.readSync(t.dataId),u=t.strides,s=u[0],c=u[1],l=u[2],f=n.batchSize,d=n.filterHeight,p=n.filterWidth,h=n.inChannels,v=n.inHeight,m=n.inWidth,g=n.outChannels,y=n.outHeight,b=n.outWidth,x=n.strideHeight,w=n.strideWidth,E=n.dataFormat,C=d-1-n.padInfo.top,_=p-1-n.padInfo.left,k="channelsLast"===E,S=r.strides[0],O=k?r.strides[1]:r.strides[2],T=k?r.strides[2]:1,A=k?1:r.strides[1],R=e.strides[0],N=k?e.strides[1]:e.strides[2],I=k?e.strides[2]:1,P=k?1:e.strides[1],D=0;D<f;++D)for(var M=0;M<h;++M)for(var F=0;F<v;++F)for(var L=F-C,j=Math.max(0,Math.ceil(L/x)),B=Math.min(y,(d+L)/x),V=0;V<m;++V){for(var z=V-_,W=Math.max(0,Math.ceil(z/w)),U=Math.min(b,(p+z)/w),H=0,G=j;G<B;++G)for(var q=G*x-L,K=W;K<U;++K)for(var $=R*D+N*G+I*K,X=s*(d-1-q)+c*(p-1-(K*w-z))+l*M,Y=0;Y<g;++Y)H+=i[$+P*Y]*a[X+Y];o[S*D+O*F+T*V+A*M]=H}return r.toTensor()},t.prototype.conv3dDerInput=function(e,t,n){for(var r=rf(n.inShape,"float32"),o=r.values,i=r.strides,a=i[0],u=i[1],s=i[2],c=i[3],l=this.readSync(e.dataId),f=e.strides,d=f[0],p=f[1],h=f[2],v=f[3],m=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],x=g[2],w=g[3],E=n.batchSize,C=n.filterDepth,_=n.filterHeight,k=n.filterWidth,S=n.inChannels,O=n.inDepth,T=n.inHeight,A=n.inWidth,R=n.outChannels,N=n.outDepth,I=n.outHeight,P=n.outWidth,D=n.strideDepth,M=n.strideHeight,F=n.strideWidth,L=C-1-n.padInfo.front,j=_-1-n.padInfo.top,B=k-1-n.padInfo.left,V=0;V<E;++V)for(var z=0;z<S;++z)for(var W=0;W<O;++W)for(var U=W-L,H=Math.max(0,Math.ceil(U/D)),G=Math.min(N,(C+U)/D),q=0;q<T;++q)for(var K=q-j,$=Math.max(0,Math.ceil(K/M)),X=Math.min(I,(_+K)/M),Y=0;Y<A;++Y){for(var Q=Y-B,Z=Math.max(0,Math.ceil(Q/F)),J=Math.min(P,(k+Q)/F),ee=0,te=H;te<G;++te)for(var ne=te*D-U,re=$;re<X;++re)for(var oe=re*M-K,ie=Z;ie<J;++ie)for(var ae=d*V+p*te+h*re+v*ie,ue=y*(C-1-ne)+b*(_-1-oe)+x*(k-1-(ie*F-Q))+w*z,se=0;se<R;++se)ee+=l[ae+se]*m[ue+se];o[a*V+u*W+s*q+c*Y+z]=ee}return r.toTensor()},t.prototype.conv2dDerFilter=function(e,t,n){tb([e,t],"conv2dDerFilter");for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,u="channelsLast"===n.dataFormat,s=rf(n.filterShape,"float32"),c=n.padInfo.left,l=n.padInfo.top,f=this.bufferSync(e),d=this.bufferSync(t),p=0;p<i;++p)for(var h=Math.max(0,Math.ceil((l-p)/r)),v=Math.min(n.outHeight,(n.inHeight+l-p)/r),m=0;m<a;++m)for(var g=Math.max(0,Math.ceil((c-m)/o)),y=Math.min(n.outWidth,(n.inWidth+c-m)/o),b=0;b<n.inChannels;++b)for(var x=0;x<n.outChannels;++x){for(var w=0,E=0;E<n.batchSize;++E)for(var C=h;C<v;++C)for(var _=p+C*r-l,k=g;k<y;++k){var S=m+k*o-c;w+=u?f.get(E,_,S,b)*d.get(E,C,k,x):f.get(E,b,_,S)*d.get(E,x,C,k)}s.set(w,p,m,b,x)}return s.toTensor()},t.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,o=n.strideHeight,i=n.strideWidth,a=n.filterDepth,u=n.filterHeight,s=n.filterWidth,c=rf(n.filterShape,"float32"),l=c.values,f=c.strides,d=f[0],p=f[1],h=f[2],v=f[3],m=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],x=g[2],w=g[3],E=this.readSync(e.dataId),C=e.strides,_=C[0],k=C[1],S=C[2],O=C[3],T=n.padInfo.front,A=n.padInfo.left,R=n.padInfo.top,N=0;N<a;++N)for(var I=Math.max(0,Math.ceil((T-N)/r)),P=Math.min(n.outDepth,(n.inDepth+T-N)/r),D=N*d,M=0;M<u;++M)for(var F=Math.max(0,Math.ceil((R-M)/o)),L=Math.min(n.outHeight,(n.inHeight+R-M)/o),j=M*p+D,B=0;B<s;++B)for(var V=Math.max(0,Math.ceil((A-B)/i)),z=Math.min(n.outWidth,(n.inWidth+A-B)/i),W=B*h+j,U=0;U<n.inChannels;++U)for(var H=U*v+W,G=0;G<n.outChannels;++G){for(var q=0,K=0;K<n.batchSize;++K)for(var $=K*_,X=K*y,Y=I;Y<P;++Y)for(var Q=(N+Y*r-T)*k+$,Z=Y*b+X,J=F;J<L;++J)for(var ee=(M+J*o-R)*S+Q,te=J*x+Z,ne=V;ne<z;++ne){var re=ne*w+te;q+=E[(B+ne*i-A)*O+ee+U]*m[re+G]}l[H+G]=q}return c.toTensor()},t.prototype.fusedDepthwiseConv2D=function(e){var t=e.input,n=e.filter,r=e.convInfo,o=e.bias,i=e.activation,a=e.preluActivationWeights,u=this.depthwiseConv2D(t,n,r);return o&&(u=this.add(u,o)),i&&(u=nb(this,u,i,a)),u},t.prototype.depthwiseConv2D=function(e,t,n){tb([e,t],"depthwiseConv2D");for(var r=n.filterHeight,o=n.filterWidth,i=n.dilationHeight,a=n.dilationWidth,u=n.padInfo.left,s=n.padInfo.top,c=n.outChannels/n.inChannels,l=rf(n.outShape,e.dtype),f=this.readSync(e.dataId),d=this.readSync(t.dataId),p=l.values,h=0;h<n.batchSize;++h)for(var v=h*e.strides[0],m=h*l.strides[0],g=0;g<n.outHeight;++g)for(var y=m+g*l.strides[1],b=g*n.strideHeight-u,x=0;x<r;++x){var w=b+x*i;if(!(w<0||w>=n.inHeight))for(var E=x*t.strides[0],C=v+w*e.strides[1],_=0;_<n.outWidth;++_)for(var k=y+_*l.strides[2],S=_*n.strideWidth-s,O=0;O<o;++O){var T=S+O*a;if(!(T<0||T>=n.inWidth))for(var A=E+O*t.strides[1],R=C+T*n.inChannels,N=k,I=A,P=0;P<n.inChannels;++P){for(var D=f[R+P],M=0;M<c;++M)p[N+M]+=D*d[I+M];N+=c,I+=c}}}return l.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,t,n){tb([e,t],"depthwiseConv2DDerInput");for(var r=rf(n.inShape,"float32"),o=r.values,i=r.strides,a=i[0],u=i[1],s=i[2],c=this.readSync(e.dataId),l=e.strides,f=l[0],d=l[1],p=l[2],h=this.readSync(t.dataId),v=t.strides,m=v[0],g=v[1],y=v[2],b=n.batchSize,x=n.filterHeight,w=n.filterWidth,E=n.inChannels,C=n.inHeight,_=n.inWidth,k=n.outChannels,S=n.outHeight,O=n.outWidth,T=n.strideHeight,A=n.strideWidth,R=x-1-n.padInfo.top,N=w-1-n.padInfo.left,I=k/E,P=0;P<b;++P)for(var D=0;D<E;++D)for(var M=0;M<C;++M)for(var F=M-R,L=Math.max(0,Math.ceil(F/T)),j=Math.min(S,(x+F)/T),B=0;B<_;++B){for(var V=B-N,z=Math.max(0,Math.ceil(V/A)),W=Math.min(O,(w+V)/A),U=0,H=L;H<j;++H)for(var G=H*T-F,q=z;q<W;++q)for(var K=f*P+d*H+p*q,$=m*(x-1-G)+g*(w-1-(q*A-V))+y*D,X=0;X<I;++X)U+=c[K+(D*I+X)]*h[$+X];o[a*P+u*M+s*B+D]=U}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){tb([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,u=rf(n.filterShape,"float32"),s=n.padInfo.left,c=n.padInfo.top,l=n.outChannels/n.inChannels,f=this.bufferSync(e),d=this.bufferSync(t),p=0;p<i;++p)for(var h=Math.max(0,Math.ceil((c-p)/r)),v=Math.min(n.outHeight,(n.inHeight+c-p)/r),m=0;m<a;++m)for(var g=Math.max(0,Math.ceil((s-m)/o)),y=Math.min(n.outWidth,(n.inWidth+s-m)/o),b=0;b<n.outChannels;++b){for(var x=Math.trunc(b/l),w=b%l,E=0,C=0;C<n.batchSize;++C)for(var _=h;_<v;++_)for(var k=p+_*r-c,S=g;S<y;++S){var O=m+S*o-s;E+=f.get(C,k,O,x)*d.get(C,_,S,b)}u.set(E,p,m,x,w)}return u.toTensor()},t.prototype.tile=function(e,t){return tb(e,"tile"),Nd(this.bufferSync(e),t)},t.prototype.pad=function(e,t,n){tb(e,"pad");var r=t.map((function(t,n){return t[0]+e.shape[n]+t[1]})),o=t.map((function(e){return e[0]})),i=this.bufferSync(e),a=rf(r,e.dtype);0!==n&&a.values.fill(n);for(var u=0;u<e.size;u++){var s=i.indexToLoc(u),c=s.map((function(e,t){return e+o[t]}));a.set.apply(a,[i.get.apply(i,s)].concat(c))}return a.toTensor()},t.prototype.transpose=function(e,t){tb(e,"transpose");for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]];var o=this.readSync(e.dataId),i=rf(n,e.dtype),a=this.bufferSync(e);for(r=0;r<e.size;++r){for(var u=a.indexToLoc(r),s=new Array(u.length),c=0;c<s.length;c++)s[c]=u[t[c]];var l=i.locToIndex(s);i.values[l]=o[r]}return i.toTensor()},t.prototype.gather=function(e,t,n){tb([e,t],"gather");var r=e.shape.slice(),o=this.readSync(t.dataId);r[n]=o.length;for(var i=rf(r,e.dtype),a=this.bufferSync(e),u=0;u<i.size;++u){var s=i.indexToLoc(u),c=s.slice();c[n]=o[s[n]];var l=a.locToIndex(c);i.values[u]=a.values[l]}return i.toTensor()},t.prototype.batchToSpaceND=function(e,t,n){tb([e],"batchToSpaceND");var r=t.reduce((function(e,t){return e*t})),o=Nf(e.shape,t,r),i=If(o.length,t.length),a=Pf(e.shape,t,r),u=Df(n,t.length),s=Mf(a,n,t.length);return e.reshape(o).transpose(i).reshape(a).slice(u,s)},t.prototype.spaceToBatchND=function(e,t,n){tb([e],"spaceToBatchND");var r=t.reduce((function(e,t){return e*t})),o=[[0,0]];o.push.apply(o,n);for(var i=1+t.length;i<e.shape.length;++i)o.push([0,0]);var a=e.pad(o),u=Nf(a.shape,t,r,!1),s=If(u.length,t.length,!1),c=Pf(a.shape,t,r,!1);return a.reshape(u).transpose(s).reshape(c)},t.prototype.pool=function(e,t,n){tb(e,"pool");for(var r=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,a=t.dilationWidth,u=t.effectiveFilterHeight,s=t.effectiveFilterWidth,c=t.padInfo.top,l=t.padInfo.left,f="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,d=this.readSync(e.dataId),p=rf(t.outShape,e.dtype),h=p.values,v=t.outShape[1]*t.outShape[2]*t.outShape[3],m=t.outShape[2]*t.outShape[3],g=t.outShape[3],y=0;y<t.batchSize;++y)for(var b=y*v,x=y*e.strides[0],w=0;w<t.inChannels;++w)for(var E=0;E<t.outHeight;++E)for(var C=E*r-c,_=Math.max(0,C),k=Math.min(t.inHeight,u+C),S=b+E*m,O=0;O<t.outWidth;++O){for(var T=O*o-l,A=Math.max(0,T),R=Math.min(t.inWidth,s+T),N=f,I=0,P=0,D=_;D<k;D+=i){for(var M=x+D*e.strides[1],F=A;F<R;F+=a){var L=d[M+F*e.strides[2]+w];"max"===n&&L>N?N=L:"avg"===n&&(I+=L,P++)}if(isNaN(N))break}h[S+O*g+w]="avg"===n?I/P:N}return p.toTensor()},t.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},t.prototype.maxPoolPositions=function(e,t){for(var n=rf(t.outShape,"int32"),r=t.strideHeight,o=t.strideWidth,i=t.dilationHeight,a=t.dilationWidth,u=t.effectiveFilterHeight,s=t.effectiveFilterWidth,c=t.padInfo.top,l=t.padInfo.left,f=this.bufferSync(e),d=0;d<t.batchSize;++d)for(var p=0;p<t.inChannels;++p)for(var h=0;h<t.outHeight;++h){for(var v=h*r-c,m=v;m<0;)m+=i;for(var g=Math.min(t.inHeight,u+v),y=0;y<t.outWidth;++y){for(var b=y*o-l,x=b;x<0;)x+=a;for(var w=Math.min(t.inWidth,s+b),E=Number.NEGATIVE_INFINITY,C=-1,_=m;_<g;_+=i)for(var k=_-v,S=x;S<w;S+=a){var O=S-b,T=f.get(d,_,S,p);T>E&&(E=T,C=k*s+O)}n.set(C,d,h,y,p)}}return n.toTensor()},t.prototype.maxPoolBackprop=function(e,t,n,r){tb([t,n],"maxPoolBackprop");for(var o=this.maxPoolPositions(t,r),i=r.strideHeight,a=r.strideWidth,u=r.dilationHeight,s=r.dilationWidth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,f=l-1-r.padInfo.left,d=c-1-r.padInfo.top,p=rf(t.shape,"float32"),h=this.bufferSync(o),v=this.bufferSync(e),m=0;m<r.batchSize;++m)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.inHeight;++y)for(var b=0;b<r.inWidth;++b){for(var x=y-d,w=b-f,E=0,C=0;C<c;C+=u){var _=(x+C)/i;if(!(_<0||_>=r.outHeight||Math.floor(_)!==_))for(var k=0;k<l;k+=s){var S=(w+k)/a;if(!(S<0||S>=r.outWidth||Math.floor(S)!==S)){var O=c*l-1-h.get(m,_,S,g)===C*l+k?1:0;0!==O&&(E+=v.get(m,_,S,g)*O)}}}p.set(E,m,y,b,g)}return p.toTensor()},t.prototype.avgPoolBackprop=function(e,t,n){tb([e,t],"avgPoolBackprop");for(var r=n.strideHeight,o=n.strideWidth,i=n.filterHeight,a=n.filterWidth,u=n.dilationHeight,s=n.dilationWidth,c=n.effectiveFilterHeight,l=n.effectiveFilterWidth,f=l-1-n.padInfo.left,d=c-1-n.padInfo.top,p=rf(t.shape,"float32"),h=1/(i*a),v=this.bufferSync(e),m=0;m<n.batchSize;++m)for(var g=0;g<n.inChannels;++g)for(var y=0;y<n.inHeight;++y)for(var b=0;b<n.inWidth;++b){for(var x=y-d,w=b-f,E=0,C=0;C<c;C+=u){var _=(x+C)/r;if(!(_<0||_>=n.outHeight||Math.floor(_)!==_))for(var k=0;k<l;k+=s){var S=(w+k)/o;S<0||S>=n.outWidth||Math.floor(S)!==S||(E+=v.get(m,_,S,g))}}p.set(E*h,m,y,b,g)}return p.toTensor()},t.prototype.pool3d=function(e,t,n){tb(e,"pool3d");for(var r=t.strideDepth,o=t.strideHeight,i=t.strideWidth,a=t.dilationDepth,u=t.dilationHeight,s=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,h=t.padInfo.left,v="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=this.readSync(e.dataId),g=rf(t.outShape,e.dtype),y=g.values,b=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],x=t.outShape[2]*t.outShape[3]*t.outShape[4],w=t.outShape[3]*t.outShape[4],E=t.outShape[4],C=0;C<t.batchSize;++C)for(var _=C*b,k=C*e.strides[0],S=0;S<t.inChannels;++S)for(var O=0;O<t.outDepth;++O){for(var T=O*r-d,A=T;A<0;)A+=a;for(var R=Math.min(t.inDepth,c+T),N=_+O*x,I=0;I<t.outHeight;++I){for(var P=I*o-p,D=P;D<0;)D+=u;for(var M=Math.min(t.inHeight,l+P),F=N+I*w,L=0;L<t.outWidth;++L){for(var j=L*i-h,B=j;B<0;)B+=s;for(var V=Math.min(t.inWidth,f+j),z=F+L*E,W=v,U=0,H=0,G=A;G<R;G+=a){for(var q=k+G*e.strides[1],K=D;K<M;K+=u){for(var $=q+K*e.strides[2],X=B;X<V;X+=s){var Y=m[$+X*e.strides[3]+S];if("max"===n&&Y>W?W=Y:"avg"===n&&(U+=Y,H++),isNaN(W))break}if(isNaN(W))break}if(isNaN(W))break}y[z+S]="avg"===n?U/H:W}}}return g.toTensor()},t.prototype.avgPool3d=function(e,t){return tb(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(e,t,n){tb([e,t],"avgPool3dBackprop");for(var r=n.strideDepth,o=n.strideHeight,i=n.strideWidth,a=n.filterDepth,u=n.filterHeight,s=n.filterWidth,c=n.dilationDepth,l=n.dilationHeight,f=n.dilationWidth,d=n.effectiveFilterDepth,p=n.effectiveFilterHeight,h=n.effectiveFilterWidth,v=d-1-n.padInfo.front,m=h-1-n.padInfo.left,g=p-1-n.padInfo.top,y=rf(t.shape,"float32"),b=1/(a*u*s),x=this.bufferSync(e),w=0;w<n.batchSize;++w)for(var E=0;E<n.inChannels;++E)for(var C=0;C<n.inDepth;++C)for(var _=0;_<n.inHeight;++_)for(var k=0;k<n.inWidth;++k){for(var S=C-v,O=_-g,T=k-m,A=0,R=0;R<d;R+=c){var N=(S+R)/r;if(!(N<0||N>=n.outDepth||Math.floor(N)!==N))for(var I=0;I<p;I+=l){var P=(O+I)/o;if(!(P<0||P>=n.outHeight||Math.floor(P)!==P))for(var D=0;D<h;D+=f){var M=(T+D)/i;M<0||M>=n.outWidth||Math.floor(M)!==M||(A+=x.get(w,N,P,M,E))}}}y.set(A*b,w,C,_,k,E)}return y.toTensor()},t.prototype.maxPool3d=function(e,t){return tb(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()},t.prototype.maxPool3dPositions=function(e,t){for(var n=rf(t.outShape,"int32"),r=t.strideDepth,o=t.strideHeight,i=t.strideWidth,a=t.dilationDepth,u=t.dilationHeight,s=t.dilationWidth,c=t.effectiveFilterDepth,l=t.effectiveFilterHeight,f=t.effectiveFilterWidth,d=t.padInfo.front,p=t.padInfo.top,h=t.padInfo.left,v=this.bufferSync(e),m=0;m<t.batchSize;++m)for(var g=0;g<t.inChannels;++g)for(var y=0;y<t.outDepth;++y){for(var b=y*r-d,x=b;x<0;)x+=a;for(var w=Math.min(t.inDepth,c+b),E=0;E<t.outHeight;++E){for(var C=E*o-p,_=C;_<0;)_+=u;for(var k=Math.min(t.inHeight,l+C),S=0;S<t.outWidth;++S){for(var O=S*i-h,T=O;T<0;)T+=s;for(var A=Math.min(t.inWidth,f+O),R=Number.NEGATIVE_INFINITY,N=-1,I=x;I<w;I+=a)for(var P=I-b,D=_;D<k;D+=u)for(var M=D-C,F=T;F<A;F+=s){var L=F-O,j=v.get(m,I,D,F,g);j>=R&&(R=j,N=P*l*f+M*l+L)}n.set(N,m,y,E,S,g)}}}return n.toTensor()},t.prototype.maxPool3dBackprop=function(e,t,n,r){tb([t,n],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(t,r),i=r.strideDepth,a=r.strideHeight,u=r.strideWidth,s=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,f=r.effectiveFilterDepth,d=r.effectiveFilterHeight,p=r.effectiveFilterWidth,h=f-1-r.padInfo.front,v=p-1-r.padInfo.left,m=d-1-r.padInfo.top,g=rf(t.shape,"float32"),y=this.bufferSync(o),b=this.bufferSync(e),x=0;x<r.batchSize;++x)for(var w=0;w<r.inChannels;++w)for(var E=0;E<r.inDepth;++E)for(var C=0;C<r.inHeight;++C)for(var _=0;_<r.inWidth;++_){for(var k=E-h,S=C-m,O=_-v,T=0,A=0;A<f;A+=s){var R=(k+A)/i;if(!(R<0||R>=r.outDepth||Math.floor(R)!==R))for(var N=0;N<d;N+=c){var I=(S+N)/a;if(!(I<0||I>=r.outHeight||Math.floor(I)!==I))for(var P=0;P<p;P+=l){var D=(O+P)/u;if(!(D<0||D>=r.outWidth||Math.floor(D)!==D)){var M=f*d*p-1-y.get(x,R,I,D,w)===A*d*p+N*p+P?1:0;0!==M&&(T+=b.get(x,R,I,D,w)*M)}}}}g.set(T,x,E,C,_,w)}return g.toTensor()},t.prototype.cast=function(e,t){return vd(e,t,this)},t.prototype.reshape=function(e,t){return md(e,t)},t.prototype.avgPool=function(e,t){return tb(e,"avgPool"),this.pool(e,t,"avg").toFloat()},t.prototype.resizeBilinear=function(e,t,n,r){tb(e,"resizeBilinear");for(var o=e.shape,i=o[0],a=o[1],u=o[2],s=o[3],c=this.readSync(e.dataId),l=new Float32Array(Ku([i,t,n,s])),f=[r&&t>1?a-1:a,r&&n>1?u-1:u],d=[r&&t>1?t-1:t,r&&n>1?n-1:n],p=0,h=f[0]/d[0],v=f[1]/d[1],m=0;m<i;m++)for(var g=0;g<t;g++)for(var y=h*g,b=Math.floor(y),x=y-b,w=Math.min(a-1,Math.ceil(y)),E=m*e.strides[0]+b*e.strides[1],C=m*e.strides[0]+w*e.strides[1],_=0;_<n;_++)for(var k=v*_,S=Math.floor(k),O=k-S,T=Math.min(u-1,Math.ceil(k)),A=E+S*e.strides[2],R=C+S*e.strides[2],N=E+T*e.strides[2],I=C+T*e.strides[2],P=0;P<s;P++){var D=c[A+P],M=c[R+P],F=D+(c[N+P]-D)*O,L=F+(M+(c[I+P]-M)*O-F)*x;l[p++]=L}return Sl(l,[i,t,n,s])},t.prototype.resizeBilinearBackprop=function(e,t,n){tb([e,t],"resizeBilinearBackprop");for(var r=t.shape,o=r[0],i=r[1],a=r[2],u=r[3],s=e.shape,c=s[1],l=s[2],f=new Float32Array(o*i*a*u),d=[n&&c>1?i-1:i,n&&l>1?a-1:a],p=[n&&c>1?c-1:c,n&&l>1?l-1:l],h=d[0]/p[0],v=d[1]/p[1],m=this.readSync(e.dataId),g=0,y=0;y<o;y++)for(var b=y*t.strides[0],x=0;x<c;x++)for(var w=x*h,E=Math.floor(w),C=Math.min(Math.ceil(w),i-1),_=b+E*t.strides[1],k=b+C*t.strides[1],S=w-E,O=1-S,T=0;T<l;T++)for(var A=T*v,R=Math.floor(A),N=Math.min(Math.ceil(A),a-1),I=A-R,P=1-I,D=_+R*t.strides[2],M=_+N*t.strides[2],F=k+R*t.strides[2],L=k+N*t.strides[2],j=O*P,B=O*I,V=S*P,z=S*I,W=0;W<u;W++){var U=m[g++];f[D+W]+=U*j,f[M+W]+=U*B,f[F+W]+=U*V,f[L+W]+=U*z}return Il(f,[o,a,i,u],t.dtype)},t.prototype.resizeNearestNeighbor=function(e,t,n,r){tb(e,"resizeNearestNeighbor");for(var o=e.shape,i=o[0],a=o[1],u=o[2],s=o[3],c=this.readSync(e.dataId),l=new Float32Array(i*t*n*s),f=[r&&t>1?a-1:a,r&&n>1?u-1:u],d=[r&&t>1?t-1:t,r&&n>1?n-1:n],p=f[0]/d[0],h=f[1]/d[1],v=0,m=0;m<i;m++)for(var g=m*e.strides[0],y=0;y<t;y++)for(var b=p*y,x=g+Math.min(a-1,r?Math.round(b):Math.floor(b))*e.strides[1],w=0;w<n;w++)for(var E=h*w,C=x+Math.min(u-1,r?Math.round(E):Math.floor(E))*e.strides[2],_=0;_<s;_++){var k=c[C+_];l[v++]=k}return Sl(l,[i,t,n,s],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){tb([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,o=r[0],i=r[1],a=r[2],u=r[3],s=e.shape,c=s[1],l=s[2],f=new Float32Array(o*i*a*u),d=this.readSync(e.dataId),p=[n&&c>1?i-1:i,n&&l>1?a-1:a],h=[n&&c>1?c-1:c,n&&l>1?l-1:l],v=p[0]/h[0],m=p[1]/h[1],g=1/v,y=1/m,b=2*Math.ceil(g)+2,x=2*Math.ceil(y)+2,w=0;w<o;w++)for(var E=w*t.strides[0],C=0;C<i;C++)for(var _=E+C*t.strides[1],k=Math.floor(C*g),S=Math.floor(k-b/2),O=0;O<a;O++)for(var T=_+O*t.strides[2],A=Math.floor(O*y),R=Math.floor(A-x/2),N=0;N<u;N++){for(var I=0,P=0;P<b;P++){var D=P+S;if(!(D<0||D>=c)){var M=E+D*e.strides[1],F=D*v;if(C===Math.min(i-1,n?Math.round(F):Math.floor(F)))for(var L=0;L<x;L++){var j=L+R;if(!(j<0||j>=l)){var B=M+j*e.strides[2],V=j*m;O===Math.min(a-1,n?Math.round(V):Math.floor(V))&&(I+=d[B+N])}}}}f[T+N]=I}return Il(f,t.shape,t.dtype)},t.prototype.batchNormalization=function(e,t,n,r,o,i){tb([e,t,n,o,i],"batchNorm");for(var a=this.readSync(e.dataId),u=this.readSync(t.dataId),s=this.readSync(n.dataId),c=o?this.readSync(o.dataId):new Float32Array([1]),l=i?this.readSync(i.dataId):new Float32Array([0]),f=new Float32Array(a.length),d=l.length,p=c.length,h=s.length,v=u.length,m=0,g=0,y=0,b=0,x=0;x<a.length;++x)f[x]=l[m++]+(a[x]-u[g++])*c[y++]/Math.sqrt(s[b++]+r),m>=d&&(m=0),g>=v&&(g=0),y>=p&&(y=0),b>=h&&(b=0);return Il(f,e.shape)},t.prototype.localResponseNormalization4D=function(e,t,n,r,o){tb(e,"localResponseNormalization4D");var i=e.shape[3],a=i-1,u=this.readSync(e.dataId),s=e.size,c=new Float32Array(s);function l(e){for(var n=e%i,r=e-n+Math.max(0,n-t),o=e-n+Math.min(n+t,a),s=0;r<=o;r++){var c=u[r];s+=c*c}return s}for(var f=0;f<s;f++){var d=l(f),p=u[f]*Math.pow(n+r*d,-o);c[f]=p}return Il(c,e.shape)},t.prototype.LRNGrad=function(e,t,n,r,o,i,a){tb(e,"LRNGrad");for(var u=e.shape[3],s=this.readSync(e.dataId),c=this.readSync(t.dataId),l=this.readSync(n.dataId),f=new Float32Array(e.size),d=e.size,p=0;p<d;p++){for(var h=p%u,v=p-h+Math.max(0,h-r),m=p-h+Math.min(u,h+r+1),g=0,y=v;y<m;y++)g+=Math.pow(c[y],2);for(g=i*g+o,y=v;y<m;y++){var b=-2*i*a*c[y]*l[p]/g;p===y&&(b+=Math.pow(g,-a)),b*=s[p],f[y]+=b}}return Il(f,e.shape)},t.prototype.multinomial=function(e,t,n,r){tb(e,"multinomial");for(var o=t?e:Xf(e),i=o.shape[0],a=o.shape[1],u=Dl([i,n],"int32"),s=this.readSync(u.dataId),c=this.readSync(o.dataId),l=0;l<i;++l){var f=l*a,d=new Float32Array(a-1);d[0]=c[f];for(var p=1;p<d.length;++p)d[p]=d[p-1]+c[f+p];for(var h=Jl(r.toString()),v=l*n,m=0;m<n;++m){var g=h();s[v+m]=d.length;for(var y=0;y<d.length;y++)if(g<d[y]){s[v+m]=y;break}}}return u},t.prototype.oneHot=function(e,t,n,r){tb(e,"oneHot");var o=new Float32Array(e.size*t);o.fill(r);for(var i=this.readSync(e.dataId),a=0;a<e.size;++a)i[a]>=0&&i[a]<t&&(o[a*t+i[a]]=n);return Rl(o,[e.size,t],"int32")},t.prototype.nonMaxSuppression=function(e,t,n,r,o){return tb(e,"nonMaxSuppression"),_d(this.readSync(e.dataId),this.readSync(t.dataId),n,r,o)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],o=rf(e.shape,"float32"),i=rf(e.shape,"float32"),a=_l(e).as2D(n,r),u=kl(e).as2D(n,r),s=0;s<n;s++)for(var c=a.slice([s,0],[1,r]),l=u.slice([s,0],[1,r]),f=Cl(c,l),d=this.readSync(this.fftImpl(f,t).dataId),p=0;p<r;p++){var h=bd(d,p);o.values[s*r+p]=h.real,i.values[s*r+p]=h.imag}return Cl(o.toTensor(),i.toTensor()).as2D(n,r)},t.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size;if(this.isExponentOf2(r)){var o=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1]);return t&&(o=Cl(_l(o).div(Tl(r)),kl(o).div(Tl(r)))),o}var i=this.readSync(e.dataId),a=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(this.fourierTransformByMatmul(i,r,t));return Cl(a.real,a.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return 0==(e&e-1)},t.prototype.fftRadix2=function(e,t,n){if(1===t)return e;var r=this.readSync(e.dataId),o=t/2,i=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),o=0;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}(r),a=Cl(i.real,i.imag).as1D(),u=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),o=2;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}(r),s=Cl(u.real,u.imag).as1D();a=this.fftRadix2(a,o,n),s=this.fftRadix2(s,o,n);var c=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),o=0;o<Math.ceil(e/2);o++){var i=(t?2:-2)*Math.PI*(o/e);n[o]=Math.cos(i),r[o]=Math.sin(i)}return{real:n,imag:r}}(t,n),l=Cl(c.real,c.imag).mul(s),f=a.add(l),d=a.sub(l),p=_l(f).concat(_l(d)),h=kl(f).concat(kl(d));return Cl(p,h).as1D()},t.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),o=0;o<t;o++){for(var i=0,a=0,u=0;u<t;u++){var s=wd(o*u,t,n),c=bd(e,u);i+=c.real*s.real-c.imag*s.imag,a+=c.real*s.imag+c.imag*s.real}n&&(i/=t,a/=t),xd(r,i,a,o)}return r},t.prototype.depthToSpace=function(e,t,n){Uu("NHWC"===n,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n})),Uu(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));for(var r=e.shape[0],o=e.shape[1],i=e.shape[2],a=e.shape[3],u=o*t,s=i*t,c=a/(t*t),l=this.readSync(e.dataId),f=new Float32Array(r*u*s*c),d=0,p=0;p<r;++p)for(var h=0;h<u;++h)for(var v=Math.floor(h/t),m=h%t,g=0;g<s;++g)for(var y=Math.floor(g/t),b=(m*t+g%t)*c,x=0;x<c;++x){var w=x+b+a*(y+i*(v+o*p));f[d++]=l[w]}return Il(f,[r,u,s,c])},t.prototype.broadcastedBinaryOp=function(e,t,n,r){var o=nd(e.shape,t.shape),i=rf(o,n),a=this.readSync(e.dataId),u=this.readSync(t.dataId),s=ed(e.shape,o),c=ed(t.shape,o),l=i.values;if(s.length+c.length===0)for(var f=0;f<l.length;++f)l[f]=r(a[f%a.length],u[f%u.length]);else{var d=this.bufferSync(e),p=this.bufferSync(t),h=function(n){var o=i.indexToLoc(n),f=o.slice(-e.rank);s.forEach((function(e){return f[e]=0}));var h=d.locToIndex(f),v=o.slice(-t.rank);c.forEach((function(e){return v[e]=0}));var m=p.locToIndex(v);l[n]=r(a[h],u[m])};for(f=0;f<l.length;++f)h(f)}return i.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=nd(e.shape,t.shape),o=rf(r,"float32"),i=rf(r,"float32"),a=this.readSync(e.dataId),u=this.readSync(t.dataId),s=ed(e.shape,r),c=ed(t.shape,r),l=o.values,f=i.values;if(s.length+c.length===0)for(var d=0;d<l.length;d++){var p=d%a.length,h=d%u.length,v=n(a[2*p],a[2*p+1],u[2*h],u[2*h+1]);l[d]=v.real,f[d]=v.imag}else{var m=this.bufferSync(this.data.get(e.dataId).complexTensors.real),g=this.bufferSync(this.data.get(t.dataId).complexTensors.real),y=function(r){var i=o.indexToLoc(r),d=i.slice(-e.rank);s.forEach((function(e){return d[e]=0}));var p=m.locToIndex(d),h=i.slice(-t.rank);c.forEach((function(e){return h[e]=0}));var v=g.locToIndex(h),y=n(a[2*p],a[2*p+1],u[2*v],u[2*v+1]);l[r]=y.real,f[r]=y.imag};for(d=0;d<l.length;d++)y(d)}return this.complex(o.toTensor(),i.toTensor())},t.prototype.split=function(e,t,n){return Rd(e,t,n)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(e,t,n,r,o,i){for(var a=e.shape,u=a[0],s=a[1],c=a[2],l=a[3],f=t.shape[0],d=r[0],p=r[1],h=rf([f,d,p,l],"float32"),v=this.readSync(t.dataId),m=this.readSync(n.dataId),g=this.readSync(e.dataId),y=e.strides,b=h.strides,x=0;x<f;x++){var w=4*x,E=v[w],C=v[w+1],_=v[w+2],k=v[w+3],S=m[x];if(!(S>=u))for(var O=d>1?(_-E)*(s-1)/(d-1):0,T=p>1?(k-C)*(c-1)/(p-1):0,A=0;A<d;A++){var R=d>1?E*(s-1)+A*O:.5*(E+_)*(s-1);if(R<0||R>s-1)for(var N=0;N<p;N++)for(var I=0;I<l;I++){var P=I+N*b[2]+A*b[1]+x*b[0];h.values[P]=i}else if("bilinear"===o){var D=Math.floor(R),M=Math.ceil(R),F=R-D;for(N=0;N<p;N++)if((G=p>1?C*(c-1)+N*T:.5*(C+k)*(c-1))<0||G>c-1)for(I=0;I<l;I++)P=I+N*b[2]+A*b[1]+x*b[0],h.values[P]=i;else{var L=Math.floor(G),j=Math.ceil(G),B=G-L;for(I=0;I<l;I++){var V=g[P=I+L*y[2]+D*y[1]+S*y[0]],z=g[P=I+j*y[2]+D*y[1]+S*y[0]],W=g[P=I+L*y[2]+M*y[1]+S*y[0]],U=V+(z-V)*B,H=W+(g[P=I+j*y[2]+M*y[1]+S*y[0]]-W)*B;P=I+N*b[2]+A*b[1]+x*b[0],h.values[P]=U+(H-U)*F}}}else for(N=0;N<p;++N){var G;if((G=p>1?C*(c-1)+N*T:.5*(C+k)*(c-1))<0||G>c-1)for(I=0;I<l;I++)P=I+N*b[2]+A*b[1]+x*b[0],h.values[P]=i;else{var q=Math.round(G),K=Math.round(R);for(I=0;I<l;I++){var $=I+q*y[2]+K*y[1]+S*y[0],X=I+N*b[2]+A*b[1]+x*b[0];h.values[X]=g[$]}}}}}return h.toTensor()},t.prototype.sparseToDense=function(e,t,n,r){var o=Vf(0,e,n),i=o.sliceRank,a=o.numUpdates,u=o.sliceSize,s=o.strides,c=o.outputSize;return this.scatter(e,t,n,c,u,a,i,s,r,!1)},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],o=Ff(e,t),i=o[0],a=o[1],u=o[2],s=o[3];if(0===a)return Sl([],i,e.dtype);for(var c=new Ps([a,u],e.dtype),l=this.readSync(t.dataId),f=this.readSync(e.dataId),d=0;d<a;d++){for(var p=[],h=0,v=0;v<r;v++){var m=l[d*r+v];h+=m*s[v],p.push(m)}if(h<0||h>=e.size/u)throw new Error("Invalid indices: "+p+" does not index into "+e.shape);for(var g=0;g<u;g++)c.values[d*u+g]=f[h*u+g]}return c.toTensor().reshape(i)},t.prototype.scatterND=function(e,t,n){var r=Vf(0,e,n),o=r.sliceRank,i=r.numUpdates,a=r.sliceSize,u=r.strides,s=r.outputSize,c=Tl(0);return this.scatter(e,t,n,s,a,i,o,u,c,!0)},t.prototype.fill=function(e,t,n){var r=os(n=n||hs(t),Ku(e));return r.fill(t),Js.makeTensor(r,e,n,this)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var t=os(e.dtype,Ku(e.shape));return this.makeOutput(t,e.shape,e.dtype)},t.prototype.linspace=function(e,t,n){return gd(e,t,n)},t.prototype.scatter=function(e,t,n,r,o,i,a,u,s,c){var l=[r/o,o],f=this.readSync(e.dataId),d=this.readSync(t.dataId);if(0===r)return Sl([],n,t.dtype);var p=new Ps(l,t.dtype);p.values.fill(this.readSync(s.dataId)[0]);for(var h=0;h<i;h++){for(var v=[],m=0,g=0;g<a;g++){var y=f[h*a+g];v.push(y),m+=y*u[g]}if(m<0||m>=r/o)throw new Error("Invalid indices: "+v+" does not index into "+n);for(var b=0;b<o;b++)c?p.values[m*o+b]+=d[h*o+b]:p.values[m*o+b]=0===t.rank?d[0]:d[h*o+b]}return p.toTensor().reshape(n)},t}(Zf);Js.registerBackend("cpu",(function(){return new rb}),1);for(var ob=0,ib=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t,i=o.boxes,a=o.scores,u=r,s=u.maxOutputSize,c=u.iouThreshold,l=u.scoreThreshold,f=u.softNmsSigma,d=n;tb(i,"NonMaxSuppressionWithScore");var p=kd(d.data.get(i.dataId).values,d.data.get(a.dataId).values,s,c,l,f);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,o=n;tb(r,"square");for(var i=o.data.get(r.dataId).values,a=new Float32Array(i.length),u=0;u<i.length;++u){var s=i[u];a[u]=s*s}return{dataId:o.write(a,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:mv,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,o=r.a,i=r.b,a=n;tb([o,i],mv);var u=a.data.get(o.dataId).values,s=a.data.get(i.dataId).values,c=function(e,t,n,r,o,i){var a=nd(e,t),u=a.length,s=gs(a),c=rs(o,Ku(a)),l=e.length,f=t.length,d=gs(e),p=gs(t),h=ed(e,a),v=ed(t,a);if(h.length+v.length===0)for(var m=0;m<c.length;++m)c[m]=i(n[m%n.length],r[m%r.length]);else{var g=function(e){var t=Os(e,u,s),o=t.slice(-l);h.forEach((function(e){return o[e]=0}));var a=Ss(o,l,d),m=t.slice(-f);v.forEach((function(e){return m[e]=0}));var g=Ss(m,f,p);c[e]=i(n[a],r[g])};for(m=0;m<c.length;++m)g(m)}return[c,a]}(o.shape,i.shape,u,s,o.dtype,(function(e,t){var n=e-t;return n*n})),l=c[0],f=c[1];return{dataId:a.write(l,f,o.dtype),shape:f,dtype:o.dtype}}}];ob<ib.length;ob++)Fu(ib[ob]);for(var ab,ub=function(e){this.variableNames=["A"];var t=Bd(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},sb=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Bd(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},cb=0,lb=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.pixels,i=r.numChannels,a="undefined"!=typeof HTMLVideoElement&&o instanceof HTMLVideoElement,u="undefined"!=typeof HTMLImageElement&&o instanceof HTMLImageElement,s=a?[o.videoWidth,o.videoHeight]:[o.width,o.height],c=s[0],l=s[1],f=[l,c],d=[l,c,i];(u||a)&&(null==ab&&(ab=document.createElement("canvas").getContext("2d")),ab.canvas.width=c,ab.canvas.height=l,ab.drawImage(o,0,0,c,l),o=ab.canvas);var p=n.makeTensorInfo(f,"int32");n.texData.get(p.dataId).usage=rc.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(p.dataId),o);var h=Ru().getBool("WEBGL_PACK")?new sb(d):new ub(d),v=n.runWebGLProgram(h,[p],"int32");return n.disposeData(p.dataId),v}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;ul("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var o=t,i=o.boxes,a=o.scores,u=r,s=u.maxOutputSize,c=u.iouThreshold,l=u.scoreThreshold,f=u.softNmsSigma,d=n,p=kd(d.readSync(i.dataId),d.readSync(a.dataId),s,c,l,f);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,o=n,i=new Xh(r.shape,"return x * x;");return o.runWebGLProgram(i,[r],r.dtype)}},{kernelName:mv,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,o=r.a,i=r.b,a=n,u=Ru().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pp("return (a - b) * (a - b);",o.shape,i.shape):new fp("return (a - b) * (a - b);",o.shape,i.shape);return a.compileAndRun(u,[o,i])}}];cb<lb.length;cb++)Fu(lb[cb]);for(var fb=0,db=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:mv,gradFunc:function(e,t){var n=t[0],r=t[1],o=Tl(2);return{a:function(){return Im(e,Im(o,Lm(n,r)))},b:function(){return Im(e,Im(o,Lm(r,n)))}}}}];fb<db.length;fb++)Lu(db[fb]);var pb=function(){function e(){}return e.prototype.fetch=function(e,t){return fetch(e,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},e}();Ru().get("IS_BROWSER")&&Ru().setPlatform("browser",new pb);var hb,vb=function(){function e(){this.util=n(753),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(e,t){return null!=Ru().global.fetch?Ru().global.fetch(e,t):(null==hb&&(hb=n(522)),hb(e,t))},e.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)},e}();Ru().get("IS_NODE")&&Ru().setPlatform("node",new vb);var mb={float32:4,int32:4,uint16:2,uint8:1,bool:1};function gb(e,t){for(var n={},r=0,o=function(t){var o=t.name,i=t.dtype,a=t.shape,u=Ku(a),s=void 0;if("quantization"in t){var c=t.quantization;if("uint8"!==c.dtype&&"uint16"!==c.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+c.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var l=mb[c.dtype],f=e.slice(r,r+u*l),d="uint8"===c.dtype?new Uint8Array(f):new Uint16Array(f);if("float32"===i)s=Float32Array.from(d,(function(e){return e*c.scale+c.min}));else{if("int32"!==i)throw new Error("Unsupported dtype in weight '"+o+"': "+i);s=Int32Array.from(d,(function(e){return Math.round(e*c.scale+c.min)}))}r+=u*l}else if("string"===i){var p=Ku(t.shape);s=[];for(var h=0;h<p;h++){var v=new Uint32Array(e.slice(r,r+4))[0];r+=4;var m=new Uint8Array(e.slice(r,r+v));s.push(m),r+=v}}else{var g=mb[i];if(f=e.slice(r,r+u*g),"float32"===i)s=new Float32Array(f);else if("int32"===i)s=new Int32Array(f);else{if("bool"!==i)throw new Error("Unsupported dtype in weight '"+o+"': "+i);s=new Uint8Array(f)}r+=u*g}n[o]=Sl(s,a,i)},i=0,a=t;i<a.length;i++)o(a[i]);return n}function yb(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)}));var r=new Uint8Array(t),o=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),o),o+=e.byteLength})),r.buffer}var bb="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function xb(e){return bb?Buffer.byteLength(e):new Blob([e]).size}function wb(e){var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function Eb(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Cb(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:xb(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:xb(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var _b=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var o=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&o.push(n)})),o},e}(),kb="://",Sb=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){Uu(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(kb)&&(t=t.slice(0,t.indexOf(kb))),Uu(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Uu(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '"+t+"'."})),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function Ob(e){if(-1===e.indexOf(kb))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Sb.getSchemes().join(","));return{scheme:e.split(kb)[0],path:e.split(kb)[1]}}function Tb(e,t,n){return void 0===n&&(n=!1),Su(this,void 0,void 0,(function(){var r,o,i,a,u,s,c,l,f;return Ou(this,(function(d){switch(d.label){case 0:return Uu(e!==t,(function(){return"Old path and new path are the same: '"+e+"'"})),Uu((r=_b.getLoadHandlers(e)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+e+"."})),Uu(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."})),o=r[0],Uu((i=_b.getSaveHandlers(t)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+t+"."})),Uu(i.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."})),a=i[0],u=Ob(e).scheme,s=Ob(e).path,c=u===Ob(e).scheme,[4,o.load()];case 1:return l=d.sent(),n&&c?[4,Sb.getManager(u).removeModel(s)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[4,a.save(l)];case 4:return f=d.sent(),!n||c?[3,6]:[4,Sb.getManager(u).removeModel(s)];case 5:d.sent(),d.label=6;case 6:return[2,f.modelArtifactsInfo]}}))}))}var Ab="models_store",Rb="model_info_store";function Nb(){if(!Ru().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Ib(e){var t=e.result;t.createObjectStore(Ab,{keyPath:"modelPath"}),t.createObjectStore(Rb,{keyPath:"modelPath"})}var Pb=function(){function e(e){if(this.indexedDB=Nb(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return Su(this,void 0,void 0,(function(){return Ou(this,(function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]}))}))},e.prototype.load=function(){return Su(this,void 0,void 0,(function(){return Ou(this,(function(e){return[2,this.databaseAction(this.modelPath)]}))}))},e.prototype.databaseAction=function(e,t){var n=this;return new Promise((function(e,r){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Ib(o)},o.onsuccess=function(){var i=o.result;if(null==t){var a=i.transaction(Ab,"readonly"),u=a.objectStore(Ab).get(n.modelPath);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(u.result.modelArtifacts)},u.onerror=function(e){return i.close(),r(u.error)},a.oncomplete=function(){return i.close()}}else{var s,c=Cb(t),l=i.transaction(Rb,"readwrite"),f=l.objectStore(Rb),d=f.put({modelPath:n.modelPath,modelArtifactsInfo:c});d.onsuccess=function(){var o=(s=i.transaction(Ab,"readwrite")).objectStore(Ab).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});o.onsuccess=function(){return e({modelArtifactsInfo:c})},o.onerror=function(e){var t=(f=l.objectStore(Rb)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(o.error)},t.onerror=function(e){return i.close(),r(o.error)}}},d.onerror=function(e){return i.close(),r(d.error)},l.oncomplete=function(){null==s?i.close():s.oncomplete=function(){return i.close()}}}},o.onerror=function(e){return r(o.error)}}))},e.URL_SCHEME="indexeddb://",e}(),Db=function(e){return Ru().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Pb.URL_SCHEME)?(t=e.slice(Pb.URL_SCHEME.length),new Pb(t)):null;var t};_b.registerSaveRouter(Db),_b.registerLoadRouter(Db);var Mb=function(){function e(){this.indexedDB=Nb()}return e.prototype.listModels=function(){return Su(this,void 0,void 0,(function(){var e=this;return Ou(this,(function(t){return[2,new Promise((function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return Ib(r)},r.onsuccess=function(){var e=r.result,o=e.transaction(Rb,"readonly"),i=o.objectStore(Rb).getAll();i.onsuccess=function(){for(var e={},n=0,r=i.result;n<r.length;n++){var o=r[n];e[o.modelPath]=o.modelArtifactsInfo}t(e)},i.onerror=function(t){return e.close(),n(i.error)},o.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}}))]}))}))},e.prototype.removeModel=function(e){return Su(this,void 0,void 0,(function(){var t=this;return Ou(this,(function(n){var r;return e=(r=e).startsWith(Pb.URL_SCHEME)?r.slice(Pb.URL_SCHEME.length):r,[2,new Promise((function(n,r){var o=t.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Ib(o)},o.onsuccess=function(){var t,i=o.result,a=i.transaction(Rb,"readwrite"),u=a.objectStore(Rb),s=u.get(e);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var o=u.delete(e),a=function(){var o=(t=i.transaction(Ab,"readwrite")).objectStore(Ab).delete(e);o.onsuccess=function(){return n(s.result.modelArtifactsInfo)},o.onerror=function(e){return r(s.error)}};o.onsuccess=a,o.onerror=function(e){return a(),i.close(),r(s.error)}},s.onerror=function(e){return i.close(),r(s.error)},a.oncomplete=function(){null==t?i.close():t.oncomplete=function(){return i.close()}}},o.onerror=function(e){return r(o.error)}}))]}))}))},e}();if(Ru().getBool("IS_BROWSER"))try{Sb.registerManager(Pb.URL_SCHEME,new Mb)}catch(ka){}var Fb="/",Lb="tensorflowjs_models",jb="info",Bb="model_topology",Vb="weight_specs",zb="weight_data",Wb="model_metadata";function Ub(e){return{info:[Lb,e,jb].join(Fb),topology:[Lb,e,Bb].join(Fb),weightSpecs:[Lb,e,Vb].join(Fb),weightData:[Lb,e,zb].join(Fb),modelMetadata:[Lb,e,Wb].join(Fb)}}function Hb(e){var t=e.split(Fb);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(Fb)}var Gb=function(){function e(e){if(!Ru().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Ub(this.modelPath)}return e.prototype.save=function(e){return Su(this,void 0,void 0,(function(){var t,n,r;return Ou(this,(function(o){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=Cb(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(bb)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,o=t.length;r<o;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}return[2]}))}))},e.prototype.load=function(){return Su(this,void 0,void 0,(function(){var e,t,n,r,o,i,a;return Ou(this,(function(u){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(i=JSON.parse(o),t.format=i.format,t.generatedBy=i.generatedBy,t.convertedBy=i.convertedBy,t.userDefinedMetadata=i.userDefinedMetadata),null==(a=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(bb){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),o=0;o<n.length;++o)r.set([n.charCodeAt(o)],o);return r.buffer}(a),[2,t]}))}))},e.URL_SCHEME="localstorage://",e}(),qb=function(e){return Ru().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Gb.URL_SCHEME)?(t=e.slice(Gb.URL_SCHEME.length),new Gb(t)):null;var t};_b.registerSaveRouter(qb),_b.registerLoadRouter(qb);var Kb=function(){function e(){Uu(Ru().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Uu("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return e.prototype.listModels=function(){return Su(this,void 0,void 0,(function(){var e,t,n,r,o,i;return Ou(this,(function(a){for(e={},t=Lb+Fb,n=Fb+jb,r=0;r<this.LS.length;++r)(o=this.LS.key(r)).startsWith(t)&&o.endsWith(n)&&(i=Hb(o),e[i]=JSON.parse(this.LS.getItem(o)));return[2,e]}))}))},e.prototype.removeModel=function(e){return Su(this,void 0,void 0,(function(){var t,n;return Ou(this,(function(r){var o;if(e=(o=e).startsWith(Gb.URL_SCHEME)?o.slice(Gb.URL_SCHEME.length):o,t=Ub(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]}))}))},e}();if(Ru().getBool("IS_BROWSER"))try{Sb.registerManager(Gb.URL_SCHEME,new Kb)}catch(ka){}function $b(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var Xb=function(){function e(t){if(!Ru().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return e.prototype.save=function(e){return Su(this,void 0,void 0,(function(){var t,n,r,o,i,a;return Ou(this,(function(u){switch(u.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},o=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(i=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,i.href=o,[4,$b((function(){return i.dispatchEvent(new MouseEvent("click"))}))];case 2:return u.sent(),null==e.weightData?[3,4]:((a=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,a.href=t,[4,$b((function(){return a.dispatchEvent(new MouseEvent("click"))}))]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:Cb(e)}]}}))}))},e.URL_SCHEME="downloads://",e}(),Yb=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return Su(this,void 0,void 0,(function(){var e,t,n=this;return Ou(this,(function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise((function(r,o){var i=new FileReader;i.onload=function(i){var a=JSON.parse(i.target.result),u=a.modelTopology;if(null!=u){0===t.length&&r({modelTopology:u});var s=a.weightsManifest;if(null!=s){var c;try{c=n.checkManifestAndWeightFiles(s,t)}catch(e){return void o(e)}var l=[],f=[],d=[];s.forEach((function(e){e.paths.forEach((function(e){f.push(e),d.push(null)})),l.push.apply(l,e.weights)})),s.forEach((function(e){e.paths.forEach((function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,o=f.indexOf(e);d[o]=n,-1===d.indexOf(null)&&r({modelTopology:u,weightSpecs:l,weightData:wb(d),format:a.format,generatedBy:a.generatedBy,convertedBy:a.convertedBy,userDefinedMetadata:a.userDefinedMetadata})},t.onerror=function(t){return o("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(c[e])}))}))}else o(new Error("weightManifest field is missing from file "+e.name))}else o(new Error("modelTopology field is missing from file "+e.name))},i.onerror=function(t){return o("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},i.readAsText(e)}))]}))}))},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map((function(e){return Eb(e.name)})),o={},i=0,a=e;i<a.length;i++)a[i].paths.forEach((function(e){var i=Eb(e);if(-1!==n.indexOf(i))throw new Error("Duplicate file basename found in weights manifest: '"+i+"'");if(n.push(i),-1===r.indexOf(i))throw new Error("Weight file with basename '"+i+"' is not provided.");o[e]=t[r.indexOf(i)]}));if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return o},e}();function Qb(e,t,n,r){!function(e){Uu(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Uu(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e})),Uu(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t})),Uu(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t}))}(n=null==n?0:n,r=null==r?1:r);var o=0;return Promise.all(e.map((function(i){return i.then((function(i){var a=n+ ++o/e.length*(r-n);return t(a),i})),i})))}function Zb(e,t){return Su(this,void 0,void 0,(function(){var n,r,o,i,a,u,s,c,l;return Ou(this,(function(f){switch(f.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?Ru().platform.fetch:t.fetchFunc,r=e.map((function(e){return n(e,t.requestInit,{isBinary:!0})})),o=0,i=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)];case 1:return a=f.sent(),[3,4];case 2:return[4,Qb(r,t.onProgress,o,i)];case 3:a=f.sent(),f.label=4;case 4:return u=a.map((function(e){return e.arrayBuffer()})),s=.5,c=1,null!=t.onProgress?[3,6]:[4,Promise.all(u)];case 5:return l=f.sent(),[3,8];case 6:return[4,Qb(u,t.onProgress,s,c)];case 7:l=f.sent(),f.label=8;case 8:return[2,l]}}))}))}function Jb(e){var t=this;return function(n,r,o){return void 0===r&&(r=""),Su(t,void 0,void 0,(function(){var t,i,a,u,s,c,l,f,d,p;return Ou(this,(function(h){switch(h.label){case 0:if(t=n.map((function(){return!1})),i={},a=null!=o?o.map((function(){return!1})):[],u=[],n.forEach((function(e,n){var r=0;e.weights.forEach((function(e){var s="quantization"in e?e.quantization.dtype:e.dtype,c=mb[s]*Ku(e.shape),l=function(){t[n]=!0,null==i[n]&&(i[n]=[]),i[n].push({manifestEntry:e,groupOffset:r,sizeBytes:c})};null!=o?o.forEach((function(t,n){t===e.name&&(l(),a[n]=!0)})):l(),u.push(e.name),r+=c}))})),!a.every((function(e){return e})))throw s=o.filter((function(e,t){return!a[t]})),new Error("Could not find weights in manifest with names: "+s.join(", ")+". \nManifest JSON has weights with names: "+u.join(", ")+".");return c=t.reduce((function(e,t,n){return t&&e.push(n),e}),[]),l=[],c.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;l.push(t)}))})),[4,e(l)];case 1:return f=h.sent(),d={},p=0,c.forEach((function(e){for(var t=n[e].paths.length,r=0,o=0;o<t;o++)r+=f[p+o].byteLength;for(var a=new ArrayBuffer(r),u=new Uint8Array(a),s=0,c=0;c<t;c++){var l=new Uint8Array(f[p+c]);u.set(l,s),s+=l.byteLength}i[e].forEach((function(e){var t=gb(a.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)d[n]=t[n]})),p+=t})),[2,d]}}))}))}}_b.registerSaveRouter((function(e){return Ru().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Xb.URL_SCHEME)?function(e){return void 0===e&&(e="model"),new Xb(e)}(e.slice(Xb.URL_SCHEME.length)):null}));var ex=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(Uu("function"==typeof t.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=t.fetchFunc):this.fetch=Ru().platform.fetch,Uu(null!=e&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&Uu(2===e.length,(function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."})),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return Su(this,void 0,void 0,(function(){var t,n,r,o;return Ou(this,(function(i){switch(i.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((o=i.sent()).ok)return[2,{modelArtifactsInfo:Cb(e),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}}))}))},e.prototype.load=function(){return Su(this,void 0,void 0,(function(){var e,t,n,r,o,i,a,u,s,c,l,f;return Ou(this,(function(d){switch(d.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=d.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");d.label=2;case 2:return d.trys.push([2,4,,5]),[4,e.json()];case 3:return t=d.sent(),[3,5];case 4:throw d.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=t.modelTopology,o=t.weightsManifest,i=t.generatedBy,a=t.convertedBy,u=t.format,s=t.userDefinedMetadata,null==r&&null==o)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==o?[3,7]:[4,this.loadWeights(o)];case 6:f=d.sent(),c=f[0],l=f[1],d.label=7;case 7:return[2,{modelTopology:r,weightSpecs:c,weightData:l,userDefinedMetadata:s,generatedBy:i,convertedBy:a,format:u}]}}))}))},e.prototype.loadWeights=function(e){return Su(this,void 0,void 0,(function(){var t,n,r,o,i,a,u,s,c,l,f;return Ou(this,(function(d){switch(d.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),r=n[0],o=n[1],i=this.weightPathPrefix||r,a=[],u=0,s=e;u<s.length;u++)c=s[u],a.push.apply(a,c.weights);return l=[],e.forEach((function(e){e.paths.forEach((function(e){l.push(i+e+o)}))})),[4,Zb(l,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return f=d.sent(),[2,[a,wb(f)]]}}))}))},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function tx(e){return null!=e.match(ex.URL_SCHEME_REGEX)}var nx=function(e,t){return"undefined"==typeof fetch?null:(Array.isArray(e)?e.every((function(e){return tx(e)})):tx(e))?rx(e,{onProgress:t}):null};function rx(e,t){return new ex(e,t)}_b.registerSaveRouter(nx),_b.registerLoadRouter(nx);var ox,ix=function(){function e(e){this.modelArtifacts=e}return e.prototype.load=function(){return Su(this,void 0,void 0,(function(){return Ou(this,(function(e){return[2,this.modelArtifacts]}))}))},e}(),ax=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return Su(this,void 0,void 0,(function(){return Ou(this,(function(t){return[2,this.saveHandler(e)]}))}))},e}(),ux=Object.freeze({browserFiles:function(e){return new Yb(e)},browserHTTPRequest:function(e,t){return rx(e,t)},concatenateArrayBuffers:wb,decodeWeights:gb,encodeWeights:function(e,t){return Su(this,void 0,void 0,(function(){var n,r,o,i,a,u=this;return Ou(this,(function(s){switch(s.label){case 0:for(n=[],r=[],o=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e),i=function(i){var a=o[i],s=Array.isArray(e)?e[i].tensor:e[a];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype)throw new Error("Unsupported dtype in weight '"+a+"': "+s.dtype);var c={name:a,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){var l=new Promise((function(e){return Su(u,void 0,void 0,(function(){var t,n,r,o,i,a,u;return Ou(this,(function(c){switch(c.label){case 0:return[4,s.bytes()];case 1:for(t=c.sent(),n=t.reduce((function(e,t){return e+t.length}),0)+4*t.length,r=new Uint8Array(n),o=0,i=0;i<t.length;i++)a=t[i],u=new Uint8Array(new Uint32Array([a.length]).buffer),r.set(u,o),o+=4,r.set(a,o),o+=a.length;return e(r),[2]}}))}))}));r.push(l)}else r.push(s.data());null!=t&&(c.group=t),n.push(c)},a=0;a<o.length;++a)i(a);return[4,Promise.all(r)];case 1:return[2,{data:yb(s.sent()),specs:n}]}}))}))},fromMemory:function(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new ix(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ix({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ix({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return _b.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:Cb,getSaveHandlers:function(e){return _b.getSaveHandlers(e)},http:rx,isHTTPScheme:tx,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),Su(this,void 0,void 0,(function(){return Ou(this,(function(o){return[2,Jb((function(e){return Zb(e,{requestInit:r})}))(e,t,n)]}))}))},registerLoadRouter:function(e){return _b.registerLoadRouter(e)},registerSaveRouter:function(e){return _b.registerSaveRouter(e)},weightsLoaderFactory:Jb,withSaveHandler:function(e){return new ax(e)},copyModel:function(e,t){return Su(this,void 0,void 0,(function(){return Ou(this,(function(n){return[2,Tb(e,t,!1)]}))}))},listModels:function(){return Su(this,void 0,void 0,(function(){var e,t,n,r,o,i,a;return Ou(this,(function(u){switch(u.label){case 0:e=Sb.getSchemes(),t={},n=0,r=e,u.label=1;case 1:return n<r.length?(o=r[n],[4,Sb.getManager(o).listModels()]):[3,4];case 2:for(a in i=u.sent())t[o+kb+a]=i[a];u.label=3;case 3:return n++,[3,1];case 4:return[2,t]}}))}))},moveModel:function(e,t){return Su(this,void 0,void 0,(function(){return Ou(this,(function(n){return[2,Tb(e,t,!0)]}))}))},removeModel:function(e){return Su(this,void 0,void 0,(function(){var t;return Ou(this,(function(n){return t=Ob(e),[2,Sb.getManager(t.scheme).removeModel(t.path)]}))}))}}),sx=El({confusionMatrix_:function(e,t,n){var r=ll(e,"labels","confusionMatrix"),o=ll(t,"predictions","confusionMatrix");Uu(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),Uu(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),Uu(1===o.rank,(function(){return"Expected the rank of predictions to be 1, but got "+o.rank})),Uu(r.shape[0]===o.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."})),Uu(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var i=hf(r.asType("int32"),n),a=hf(o.asType("int32"),n);return i.transpose().matMul(a).asType("int32")}}),cx=(Object.freeze({confusionMatrix:sx}),El({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,o=!1,i=!1,a=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)o=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else{if(null==e.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);a=!0}if(o&&o&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=Du("FromPixels",Js.backendName))return Js.runKernel("FromPixels",{pixels:e},{numChannels:t});var u,s,c=o?[e.videoWidth,e.videoHeight]:[e.width,e.height],l=c[0],f=c[1];if(a?u=e.getContext("2d").getImageData(0,0,l,f).data:r||n?u=e.data:(i||o)&&(null==ox&&(ox=document.createElement("canvas").getContext("2d")),ox.canvas.width=l,ox.canvas.height=f,ox.drawImage(e,0,0,l,f),u=ox.getImageData(0,0,l,f).data),4===t)s=new Int32Array(u);else{var d=l*f;s=new Int32Array(d*t);for(var p=0;p<d;p++)for(var h=0;h<t;++h)s[p*t+h]=u[4*p+h]}return Nl(s,[f,l,t],"int32")}})),lx=Object.freeze({toPixels:function(e,t){return Su(this,void 0,void 0,(function(){var n,r,o,i,a,u,s,c,l,f,d,p,h,v,m,g,y,b,x,w,E,C,_;return Ou(this,(function(k){switch(k.label){case 0:if(n=ll(e,"img","toPixels"),e instanceof Ls||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],i=r[1],(a=2===n.rank?1:n.shape[2])>4||2===a)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return[4,n.data()];case 1:return u=k.sent(),s=n.min(),c=n.max(),[4,Promise.all([s.data(),c.data()])];case 2:if(l=k.sent(),f=l[0],d=l[1],p=f[0],h=d[0],s.dispose(),c.dispose(),"float32"===n.dtype){if(p<0||h>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+p+" - "+h+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(p<0||h>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+p+" - "+h+"].")}for(v="float32"===n.dtype?255:1,m=new Uint8ClampedArray(i*o*4),g=0;g<o*i;++g)y=void 0,b=void 0,x=void 0,w=void 0,1===a?(y=u[g]*v,b=u[g]*v,x=u[g]*v,w=255):3===a?(y=u[3*g]*v,b=u[3*g+1]*v,x=u[3*g+2]*v,w=255):4===a&&(y=u[4*g]*v,b=u[4*g+1]*v,x=u[4*g+2]*v,w=u[4*g+3]*v),m[0+(E=4*g)]=Math.round(y),m[E+1]=Math.round(b),m[E+2]=Math.round(x),m[E+3]=Math.round(w);return null!=t&&(t.width=i,t.height=o,C=t.getContext("2d"),_=new ImageData(m,i,o),C.putImageData(_,0,0)),n!==e&&n.dispose(),[2,m]}}))}))},fromPixels:cx}),fx=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),dx=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function px(e){Uu(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),Uu("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),Uu(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),dx.register(e)}Object.freeze({Serializable:fx,SerializationMap:dx,registerClass:px});function hx(){return 32===Js.backend.floatPrecision()?.001:.1}function vx(e,t,n){var r=!0;if((ss(e)||ss(t))&&(r=!1),ss(e)&&ss(t)&&(r=!0),r){var o=e.constructor.name,i=t.constructor.name;if(o!==i)throw new Error("Arrays are of different type. Actual: "+o+". Expected: "+i)}if(Array.isArray(e)&&Array.isArray(t)){var a=sl(e),u=sl(t);if(!$u(a,u))throw new Error("Arrays have different shapes. Actual: ["+a+"]. Expected: ["+u+"]")}var s=ss(e)?e:qu(e),c=ss(t)?t:qu(t);if(s.length!==c.length)throw new Error("Arrays have different lengths actual: "+s.length+" vs expected: "+c.length+".\nActual:   "+s+".\nExpected: "+c+".");for(var l=0;l<c.length;++l){var f=s[l],d=c[l];if(!n(f,d))throw new Error("Arrays differ: actual["+l+"] = "+f+", expected["+l+"] = "+d+".\nActual:   "+s+".\nExpected: "+c+".")}}function mx(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}Object.freeze({TEST_EPSILON_FLOAT16:.1,expectArraysClose:function(e,t,n){return null==n&&(n=hx()),vx(e,t,(function(e,t){return mx(e,t,n)}))},testEpsilon:hx,expectPromiseToFail:function(e,t){e().then((function(){return t.fail()}),(function(){return t()}))},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return fs(e)||fs(e[0])||fs(t)||fs(t[0])?vx(e,n,(function(e,t){return e==t})):vx(e,t,(function(e,t){return mx(e,t,0)}))},expectNumbersClose:function(e,t,n){if(null==n&&(n=hx()),!mx(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}}),Object.freeze({gpgpu_util:sh,webgl_util:nl,forceHalfFloat:function(){Ru().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:hv,setWebGLContext:uc,GPGPUContext:ch});var gx=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ku(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),o=r.value,i=r.grads;if(null!=n){var a=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(a)}else this.applyGradients(i);return al(i),t?o:(o.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return function(e,t){Uu(vs(e),(function(){return"The f passed in variableGrads(f) must be a function"})),Uu(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof Us})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],Js.registeredVariables)t.push(Js.registeredVariables[r]);var o=n?t.filter((function(e){return!e.trainable})):null,i=t.length;Uu((t=t.filter((function(e){return e.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."}));var a=Js.gradients(e,t,null,!0),u=a.value,s=a.grads;Uu(s.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),Uu(0===u.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+u.rank+" tensor"}));var c={};return t.forEach((function(e,t){null!=s[t]&&(c[e.name]=s[t])})),null!=o&&o.forEach((function(e){return c[e.name]=null})),{value:u,grads:c}}(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&al(this.iterations_)},t.prototype.saveIterations=function(){return Su(this,void 0,void 0,(function(){return Ou(this,(function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:Tl(this.iterations_,"int32")}]}))}))},t.prototype.getWeights=function(){return Su(this,void 0,void 0,(function(){return Ou(this,(function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},t.prototype.setWeights=function(e){return Su(this,void 0,void 0,(function(){return Ou(this,(function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},t.prototype.extractIterations=function(e){return Su(this,void 0,void 0,(function(){var t;return Ou(this,(function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}}))}))},t}(fx);Object.defineProperty(gx,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var yx=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this)||this;return o.learningRate=t,o.rho=n,o.epsilon=r,o.accumulatedGrads=[],o.accumulatedUpdates=[],null==r&&(o.epsilon=Js.backend.epsilon()),o}return ku(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Js.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:il((function(){return jl(o).variable(!1)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:il((function(){return jl(o).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var a=t.accumulatedGrads[r].variable,u=t.accumulatedUpdates[r].variable;il((function(){var e=a.mul(t.rho).add(i.square().mul(1-t.rho)),n=u.add(t.epsilon).sqrt().div(a.add(t.epsilon).sqrt()).mul(i),r=u.mul(t.rho).add(n.square().mul(1-t.rho));a.assign(e),u.assign(r);var s=n.mul(-t.learningRate).add(o);o.assign(s)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(al(this.accumulatedGrads.map((function(e){return e.variable}))),al(this.accumulatedUpdates.map((function(e){return e.variable}))))},t.prototype.getWeights=function(){return Su(this,void 0,void 0,(function(){var e;return Ou(this,(function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Su(this,void 0,void 0,(function(){var t;return Ou(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedUpdates=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="Adadelta",t}(gx);px(yx);var bx=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return ku(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Js.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:il((function(){return Ml(o.shape,t.initialAccumulatorValue).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var a=t.accumulatedGrads[r].variable;il((function(){var e=a.add(i.square());a.assign(e);var n=i.div(e.add(Js.backend.epsilon()).sqrt()).mul(-t.learningRate).add(o);o.assign(n)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&al(this.accumulatedGrads.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Su(this,void 0,void 0,(function(){return Ou(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Su(this,void 0,void 0,(function(){return Ou(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(gx);px(bx);var xx=function(e){function t(t,n,r,o){void 0===o&&(o=null);var i=e.call(this)||this;return i.learningRate=t,i.beta1=n,i.beta2=r,i.epsilon=o,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],il((function(){i.accBeta1=Tl(n).variable(),i.accBeta2=Tl(r).variable()})),null==o&&(i.epsilon=Js.backend.epsilon()),i}return ku(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);il((function(){var r=Lm(1,t.accBeta1),o=Lm(1,t.accBeta2);n.forEach((function(n,i){var a=Js.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:n+"/m",variable:il((function(){return jl(a).variable(!1)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:n+"/v",variable:il((function(){return jl(a).variable(!1)}))});var u=Array.isArray(e)?e[i].tensor:e[n];if(null!=u){var s=t.accumulatedFirstMoment[i].variable,c=t.accumulatedSecondMoment[i].variable,l=s.mul(t.beta1).add(u.mul(1-t.beta1)),f=c.mul(t.beta2).add(u.square().mul(1-t.beta2)),d=l.div(r),p=f.div(o);s.assign(l),c.assign(f);var h=d.div(p.sqrt().add(t.epsilon)).mul(-t.learningRate).add(a);a.assign(h)}})),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&al(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&al(this.accumulatedSecondMoment.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Su(this,void 0,void 0,(function(){var e;return Ou(this,(function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Su(this,void 0,void 0,(function(){var t,n=this;return Ou(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),il((function(){n.accBeta1.assign(Dm(n.beta1,n.iterations_+1)),n.accBeta2.assign(Dm(n.beta2,n.iterations_+1))})),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedSecondMoment=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(gx);px(xx);var wx=function(e){function t(t,n,r,o,i){void 0===o&&(o=null),void 0===i&&(i=0);var a=e.call(this)||this;return a.learningRate=t,a.beta1=n,a.beta2=r,a.epsilon=o,a.decay=i,a.accumulatedFirstMoment=[],a.accumulatedWeightedInfNorm=[],il((function(){a.iteration=Tl(0).variable(),a.accBeta1=Tl(n).variable()})),null==o&&(a.epsilon=Js.backend.epsilon()),a}return ku(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);il((function(){var r=Lm(1,t.accBeta1),o=Em(-t.learningRate,t.iteration.mul(t.decay).add(1));n.forEach((function(n,i){var a=Js.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:n+"/m",variable:jl(a).variable(!1)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:n+"/v",variable:jl(a).variable(!1)});var u=Array.isArray(e)?e[i].tensor:e[n];if(null!=u){var s=t.accumulatedFirstMoment[i].variable,c=t.accumulatedWeightedInfNorm[i].variable,l=s.mul(t.beta1).add(u.mul(1-t.beta1)),f=c.mul(t.beta2),d=u.abs(),p=f.maximum(d);s.assign(l),c.assign(p);var h=o.div(r).mul(l.div(p.add(t.epsilon))).add(a);a.assign(h)}})),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&al(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&al(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Su(this,void 0,void 0,(function(){return Ou(this,(function(e){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},t.prototype.setWeights=function(e){return Su(this,void 0,void 0,(function(){return Ou(this,(function(e){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(gx);px(wx);var Ex=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return ku(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var i=Js.registeredVariables[n];il((function(){var e=t.c.mul(o).add(i);i.assign(e)}))}})),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=function(e){return Js.keep(e)}(Tl(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return Su(this,void 0,void 0,(function(){return Ou(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}}))}))},t.prototype.setWeights=function(e){return Su(this,void 0,void 0,(function(){return Ou(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(gx);px(Ex);var Cx=function(e){function t(t,n,r){void 0===r&&(r=!1);var o=e.call(this,t)||this;return o.learningRate=t,o.momentum=n,o.useNesterov=r,o.accumulations=[],o.m=Tl(o.momentum),o}return ku(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Js.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:il((function(){return jl(o).variable(!1)}))});var i=t.accumulations[r].variable,a=Array.isArray(e)?e[r].tensor:e[n];null!=a&&il((function(){var e,n=t.m.mul(i).add(a);e=t.useNesterov?t.c.mul(a.add(n.mul(t.m))).add(o):t.c.mul(n).add(o),i.assign(n),o.assign(e)}))})),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&al(this.accumulations.map((function(e){return e.variable})))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return Su(this,void 0,void 0,(function(){return Ou(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Su(this,void 0,void 0,(function(){return Ou(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="Momentum",t}(Ex);px(Cx);var _x=function(e){function t(t,n,r,o,i){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===o&&(o=null),void 0===i&&(i=!1);var a=e.call(this)||this;if(a.learningRate=t,a.decay=n,a.momentum=r,a.epsilon=o,a.accumulatedMeanSquares=[],a.accumulatedMoments=[],a.accumulatedMeanGrads=[],a.centered=i,null==o&&(a.epsilon=Js.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.");return a}return ku(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Js.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:il((function(){return jl(o).variable(!1)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:il((function(){return jl(o).variable(!1)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:il((function(){return jl(o).variable(!1)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var a=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;il((function(){var e=a.mul(t.decay).add(i.square().mul(1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,s=n.mul(t.decay).add(i.mul(1-t.decay)),c=u.mul(t.momentum).add(i.mul(t.learningRate).div(e.sub(s.square().add(t.epsilon)).sqrt()));a.assign(e),n.assign(s),u.assign(c);var l=o.sub(c);o.assign(l)}else{var f=a.mul(t.decay).add(i.square().mul(1-t.decay));c=u.mul(t.momentum).add(i.mul(t.learningRate).div(f.add(t.epsilon).sqrt())),a.assign(f),u.assign(c),l=o.sub(c),o.assign(l)}}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&al(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&al(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&al(this.accumulatedMoments.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return Su(this,void 0,void 0,(function(){var e;return Ou(this,(function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return Su(this,void 0,void 0,(function(){var t;return Ou(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedMoments=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}))),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(gx);px(_x);var kx=function(){function e(){}return e.sgd=function(e){return new Ex(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new Cx(e,t,n)},e.rmsprop=function(e,t,n,r,o){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===o&&(o=!1),new _x(e,t,n,r,o)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new xx(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new yx(e,t,n)},e.adamax=function(e,t,n,r,o){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===o&&(o=0),new wx(e,t,n,r,o)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new bx(e,t)},e}();kx.sgd,kx.momentum,kx.adadelta,kx.adagrad,kx.rmsprop,kx.adamax,kx.adam,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate&&setImmediate;Ls.prototype.squaredDifference=function(e){return gv(this,e)},Ms=eb;var Sx=function(e,t){return Sx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Sx(e,t)};function Ox(e,t){function n(){this.constructor=e}Sx(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Tx=function(){return Tx=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Tx.apply(this,arguments)};function Ax(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(SM){i(SM)}}function u(e){try{s(r.throw(e))}catch(SM){i(SM)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))}function Rx(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(SM){i=[6,SM],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}function Nx(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r}var Ix=function(){function e(e,t){if(!Vx(e)||!Vx(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function Px(e,t){return e instanceof Ls&&e.shape.length===t}function Dx(e){return Px(e,3)}function Mx(e){return Px(e,4)}function Fx(e){return e%2===0}function Lx(e){return e&&e.width&&e.height}function jx(e){return e.reduce((function(e,t){return e.add(t)}),new Wx(0,0)).div(new Wx(e.length,e.length))}function Bx(e,t,n){return Array(e).fill(0).map((function(e,r){return t+r*n}))}function Vx(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||0===e}function zx(e){return Vx(e)&&0<=e&&e<=1}var Wx=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),Ux=function(){function e(t,n){void 0===n&&(n=!0);var r=t||{},o=[r.left,r.top,r.right,r.bottom].every(Vx),i=[r.x,r.y,r.width,r.height].every(Vx);if(!i&&!o)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var a=i?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],u=a[0],s=a[1],c=a[2],l=a[3];e.assertIsValidBox({x:u,y:s,width:c,height:l},"Box.constructor",n),this._x=u,this._y=s,this._width=c,this._height=l}return e.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(Vx)},e.assertIsValidBox=function(t,n,r){if(void 0===r&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new Wx(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new Wx(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new Wx(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new Wx(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.round(e)}));return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.floor(e)}));return new e({x:t[0],y:t[1],width:t[2],height:t[3]})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,o=t.width,i=t.height,a=Math.abs(o-i);return o<i&&(n-=a/2,o+=a),i<o&&(r-=a/2,i+=a),new e({x:n,y:r,width:o,height:i})},e.prototype.rescale=function(t){var n=Lx(t)?t.width:t,r=Lx(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n];return new e({x:r[0],y:r[1],width:r[2],height:r[3]})},e.prototype.clipAtImageBorders=function(t,n){var r=this,o=r.x,i=r.y,a=r.right,u=r.bottom,s=Math.max(o,0),c=Math.max(i,0),l=a-s,f=u-c;return new e({x:s,y:c,width:Math.min(l,t-s),height:Math.min(f,n-c)}).floor()},e.prototype.shift=function(t,n){var r=this.width,o=this.height;return new e({x:this.x+t,y:this.y+n,width:r,height:o})},e.prototype.padAtBorders=function(e,t){var n=this.width+1,r=this.height+1,o=n,i=r,a=this.left,u=this.top,s=this.right,c=this.bottom;return s>t&&(o=-s+t+n,s=t),c>e&&(i=-c+e+r,c=e),a<1&&(i=2-a,a=1),u<1&&(i=2-u,u=1),{dy:1,edy:i,dx:1,edx:o,y:u,ey:c,x:a,ex:s,w:n,h:r}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),Hx=function(e){function t(t,n,r,o,i){return void 0===i&&(i=!1),e.call(this,{left:t,top:n,right:r,bottom:o},i)||this}return Ox(t,e),t}(Ux),Gx=function(){function e(e,t,n,r,o){this._imageDims=new Ix(o.width,o.height),this._score=e,this._classScore=t,this._className=n,this._box=new Ux(r).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new Ux(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),qx=function(e){function t(t,n,r){return e.call(this,t,t,"",n,r)||this}return Ox(t,e),t.prototype.forSize=function(n,r){var o=e.prototype.forSize.call(this,n,r);return new t(o.score,o.relativeBox,o.imageDims)},t}(Gx);function Kx(e,t,n){void 0===n&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n?r/(e.area+t.area-r):r/Math.min(e.area,t.area)}function $x(e,t,n,r){void 0===r&&(r=!0);for(var o=t.map((function(e,t){return{score:e,boxIndex:t}})).sort((function(e,t){return e.score-t.score})).map((function(e){return e.boxIndex})),i=[],a=function(){var t=o.pop();i.push(t);for(var a=o,u=[],s=0;s<a.length;s++){var c=a[s],l=e[t],f=e[c];u.push(Kx(l,f,r))}o=o.filter((function(e,t){return u[t]<=n}))};o.length>0;)a();return i}function Xx(e,t){return il((function(){var n=t[0],r=t[1],o=t[2],i=Ml(Nx(e.shape.slice(0,3),[1]),n),a=Ml(Nx(e.shape.slice(0,3),[1]),r),u=Ml(Nx(e.shape.slice(0,3),[1]),o),s=Bl([i,a,u],3);return Lm(e,s)}))}function Yx(e){return 1/(1+Math.exp(-e))}var Qx,Zx=function(e){function t(t,n,r,o,i){return void 0===i&&(i=!1),e.call(this,{x:t,y:n,width:r,height:o},i)||this}return Ox(t,e),t}(Ux),Jx=function(){function e(e,t,n){void 0===n&&(n=new Wx(0,0));var r=t.width,o=t.height;this._imgDims=new Ix(r,o),this._shift=n,this._positions=e.map((function(e){return e.mul(new Wx(r,o)).add(n)}))}return Object.defineProperty(e.prototype,"shift",{get:function(){return new Wx(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map((function(t){return t.sub(e._shift).div(new Wx(e.imageWidth,e.imageHeight))}))},enumerable:!0,configurable:!0}),e.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},e.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new Wx(e,t))},e.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},e.prototype.align=function(e,t){if(void 0===t&&(t={}),e){var n=e instanceof qx?e.box.floor():new Ux(e);return this.shiftBy(n.x,n.y).align(null,t)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),o=r.useDlibAlignment,i=r.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(i)},e.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],n=e[1],r=e[2],o=function(e){return r.sub(e).magnitude()},i=(o(t)+o(n))/2,a=Math.floor(i/.45),u=jx(e),s=Math.floor(Math.max(0,u.x-.5*a)),c=Math.floor(Math.max(0,u.y-.43*a));return new Zx(s,c,Math.min(a,this.imageWidth+s),Math.min(a,this.imageHeight+c))},e.prototype.alignMinBbox=function(e){var t=function(e){var t=e.map((function(e){return e.x})),n=e.map((function(e){return e.y})),r=t.reduce((function(e,t){return t<e?t:e}),1/0),o=n.reduce((function(e,t){return t<e?t:e}),1/0),i=t.reduce((function(e,t){return e<t?t:e}),0),a=n.reduce((function(e,t){return e<t?t:e}),0);return new Hx(r,o,i,a)}(this.positions);return t.pad(t.width*e,t.height*e)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),ew=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ox(t,e),t.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],jx([e[3],e[4]])]},t}(Jx),tw=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ox(t,e),t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(jx)},t}(Jx),nw=function(){function e(e,t){this._label=e,this._distance=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){return void 0===e&&(e=!0),this.label+(e?" ("+function(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}(this.distance)+")":"")},e}(),rw=function(e){function t(t,n){var r=e.call(this,t)||this;return r._label=n,r}return Ox(t,e),t.assertIsValidLabeledBox=function(e,t){if(Ux.assertIsValidBox(e,t),!Vx(e.label))throw new Error(t+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(Ux),ow=function(){function e(e,t){if("string"!==typeof e)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some((function(e){return!(e instanceof Float32Array)})))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map((function(e){return Array.from(e)}))}},e.fromJSON=function(t){var n=t.descriptors.map((function(e){return new Float32Array(e)}));return new e(t.label,n)},e}();!function(e){function t(t,n,r,o){var i=e.call(this,t,n)||this;return i._score=r,i._classScore=o,i}Ox(t,e),t.assertIsValidPredictedBox=function(e,t){if(rw.assertIsValidLabeledBox(e,t),!zx(e.score)||!zx(e.classScore))throw new Error(t+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})}(rw);function iw(e,t){var n={detection:t};return Object.assign({},e,n)}function aw(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:function(){throw new Error("readFile - filesystem not available for browser environment")}}}function uw(e){var t="";if(!e)try{e=n(Object(function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(o){t=o.toString()}var r=e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){return e?r(e):n(t)}))}))}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:r}}function sw(){var e=n.g.Canvas||n.g.HTMLCanvasElement,t=n.g.Image||n.g.HTMLImageElement,r=n.g.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=uw();return Tx({Canvas:e||function(){},CanvasRenderingContext2D:n.g.CanvasRenderingContext2D||function(){},Image:t||function(){},ImageData:n.g.ImageData||function(){},Video:n.g.HTMLVideoElement||function(){},createCanvasElement:function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},fetch:r},o)}function cw(){return"object"===typeof window&&"undefined"!==typeof document&&"undefined"!==typeof HTMLImageElement&&"undefined"!==typeof HTMLCanvasElement&&"undefined"!==typeof HTMLVideoElement&&"undefined"!==typeof ImageData&&"undefined"!==typeof CanvasRenderingContext2D}function lw(){return"object"===typeof n.g&&"undefined"!==typeof process&&!!process.version}function fw(e){Qx=e}function dw(){cw()&&fw(aw()),lw()&&fw(sw())}var pw,hw={getEnv:function(){if(!Qx)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Qx},setEnv:fw,initialize:dw,createBrowserEnv:aw,createFileSystem:uw,createNodejsEnv:sw,monkeyPatch:function(e){if(Qx||dw(),!Qx)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=void 0===t?Qx.Canvas:t,r=e.Image,o=void 0===r?Qx.Image:r;Qx.Canvas=n,Qx.Image=o,Qx.createCanvasElement=e.createCanvasElement||function(){return new n},Qx.createImageElement=e.createImageElement||function(){return new o},Qx.ImageData=e.ImageData||Qx.ImageData,Qx.Video=e.Video||Qx.Video,Qx.fetch=e.fetch||Qx.fetch,Qx.readFile=e.readFile||Qx.readFile},isBrowser:cw,isNodejs:lw};function vw(e){return hw.isNodejs()||"string"!==typeof e?e:document.getElementById(e)}function mw(e){var t=hw.getEnv(),n=t.Canvas;if(e instanceof t.CanvasRenderingContext2D)return e;var r=vw(e);if(!(r instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=r.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}dw(),function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"}(pw||(pw={}));var gw=function(e){void 0===e&&(e={});var t=e.anchorPosition,n=e.backgroundColor,r=e.fontColor,o=e.fontSize,i=e.fontStyle,a=e.padding;this.anchorPosition=t||pw.TOP_LEFT,this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=o||14,this.fontStyle=i||"Georgia",this.padding=a||4},yw=function(){function e(t,n,r){void 0===r&&(r={}),this.text="string"===typeof t?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new gw(r)}return e.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map((function(t){return e.measureText(t).width})).reduce((function(e,t){return e<t?t:e}),0)+2*t},e.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,n=e.padding;return this.text.length*t+2*n},e.prototype.getUpperLeft=function(e,t){var n=this.options.anchorPosition,r=n===pw.BOTTOM_RIGHT||n===pw.TOP_RIGHT,o=n===pw.BOTTOM_LEFT||n===pw.BOTTOM_RIGHT,i=this.measureWidth(e),a=this.measureHeight(),u=r?this.anchor.x-i:this.anchor.x,s=o?this.anchor.y-a:this.anchor.y;if(t){var c=t.width,l=t.height;return{x:Math.max(Math.min(u,c-i),0),y:Math.max(Math.min(s,l-a),0)}}return{x:u,y:s}},e.prototype.draw=function(e){var t=vw(e),n=mw(t),r=this.options,o=r.backgroundColor,i=r.fontColor,a=r.fontSize,u=r.fontStyle,s=r.padding;n.font=a+"px "+u;var c=this.measureWidth(n),l=this.measureHeight();n.fillStyle=o;var f=this.getUpperLeft(n,t);n.fillRect(f.x,f.y,c,l),n.fillStyle=i,this.text.forEach((function(e,t){var r=s+f.x,o=s+f.y+(t+1)*a;n.fillText(e,r,o)}))},e}(),bw=function(e){void 0===e&&(e={});var t=e.boxColor,n=e.lineWidth,r=e.label,o=e.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;var i={anchorPosition:pw.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new gw(Object.assign({},i,o))};!function(){function e(e,t){void 0===t&&(t={}),this.box=new Ux(e),this.options=new bw(t)}e.prototype.draw=function(e){var t=mw(e),n=this.options,r=n.boxColor,o=n.lineWidth,i=this.box,a=i.x,u=i.y,s=i.width,c=i.height;t.strokeStyle=r,t.lineWidth=o,t.strokeRect(a,u,s,c);var l=this.options.label;l&&new yw([l],{x:a-o/2,y:u},this.options.drawLabelOptions).draw(e)}}();function xw(e){var t=hw.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function ww(e){var t=hw.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new Ix(e.naturalWidth,e.naturalHeight):e instanceof r?new Ix(e.videoWidth,e.videoHeight):new Ix(e.width,e.height)}function Ew(e){var t=e.width,n=e.height,r=(0,hw.getEnv().createCanvasElement)();return r.width=t,r.height=n,r}function Cw(e,t){var n=hw.getEnv().ImageData;if(!(e instanceof n)&&!xw(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||ww(e),o=r.width,i=r.height,a=Ew({width:o,height:i});return e instanceof n?mw(a).putImageData(e,0,0):mw(a).drawImage(e,0,0,o,i),a}function _w(e,t){return Ax(this,void 0,void 0,(function(){var n,r,o,i,a,u;return Rx(this,(function(s){switch(s.label){case 0:return n=t||hw.getEnv().createCanvasElement(),r=e.shape.slice(Mx(e)?1:0),o=r[0],i=r[1],a=r[2],u=il((function(){return e.as3D(o,i,a).toInt()})),[4,lx.toPixels(u,n)];case 1:return s.sent(),u.dispose(),[2,n]}}))}))}function kw(e){var t=hw.getEnv(),n=t.Image,r=t.Canvas,o=t.Video;return e instanceof n||e instanceof r||e instanceof o}var Sw=function(){function e(e,t){var n=this;if(void 0===t&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach((function(e,t){if(Dx(e))return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape);if(Mx(e)){var r=e.shape[0];if(1!==r)throw new Error("NetInput - tf.Tensor4D with batchSize "+r+" passed, but not supported in input array");return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape.slice(1))}var o=e instanceof hw.getEnv().Canvas?e:Cw(e);n._canvases[t]=o,n._inputDimensions[t]=[o.height,o.width,3]}))}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var e=this;return Bx(this.batchSize,0,1).map((function(t,n){return e.getReshapedInputDimensions(n)}))},enumerable:!0,configurable:!0}),e.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},e.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},e.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},e.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},e.prototype.getReshapedInputDimensions=function(e){if("number"!==typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return function(e,t){var n=e.width,r=e.height,o=t/Math.max(r,n);return new Ix(Math.round(n*o),Math.round(r*o))}({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)},e.prototype.toBatchTensor=function(e,t){var n=this;return void 0===t&&(t=!0),this._inputSize=e,il((function(){var r=Bx(n.batchSize,0,1).map((function(r){var o=n.getInput(r);if(o instanceof Ls){var i=Mx(o)?o:o.expandDims();return i=function(e,t){return void 0===t&&(t=!1),il((function(){var n=e.shape.slice(1),r=n[0],o=n[1];if(r===o)return e;var i=Math.abs(r-o),a=Math.round(i*(t?.5:1)),u=r>o?2:1,s=function(t){var n=e.shape.slice();return n[u]=t,Ml(n,0)},c=s(a),l=i-c.shape[u],f=[t&&l?s(l):null,e,c].filter((function(e){return!!e})).map((function(e){return e.toFloat()}));return Bl(f,u)}))}(i,t),i.shape[1]===e&&i.shape[2]===e||(i=Gy.resizeBilinear(i,[e,e])),i.as3D(e,e,3)}if(o instanceof hw.getEnv().Canvas)return lx.fromPixels(function(e,t,n){void 0===n&&(n=!1);var r=hw.getEnv(),o=r.Image,i=r.Canvas;if(!(e instanceof o||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var a=ww(e),u=t/Math.max(a.height,a.width),s=u*a.width,c=u*a.height,l=Ew({width:t,height:t}),f=e instanceof i?e:Cw(e),d=Math.abs(s-c)/2,p=n&&s<c?d:0,h=n&&c<s?d:0;return mw(l).drawImage(f,p,h,s,c),l}(o,e,t));throw new Error("toBatchTensor - at batchIdx "+r+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+o)})),o=Of(r.map((function(e){return e.toFloat()}))).as4D(n.batchSize,e,e,3);return o}))},e}();function Ow(e){return Ax(this,void 0,void 0,(function(){var t,n,r;return Rx(this,(function(o){switch(o.label){case 0:if(e instanceof Sw)return[2,e];if(!(t=Array.isArray(e)?e:[e]).length)throw new Error("toNetInput - empty array passed as input");return n=function(t){return Array.isArray(e)?" at input index "+t+":":""},(r=t.map(vw)).forEach((function(e,r){if(!kw(e)&&!Dx(e)&&!Mx(e)){if("string"===typeof t[r])throw new Error("toNetInput -"+n(r)+" string passed, but could not resolve HTMLElement for element id "+t[r]);throw new Error("toNetInput -"+n(r)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if(Mx(e)){var o=e.shape[0];if(1!==o)throw new Error("toNetInput -"+n(r)+" tf.Tensor4D with batchSize "+o+" passed, but not supported in input array")}})),[4,Promise.all(r.map((function(e){return kw(e)&&(t=e,new Promise((function(e,n){if(t instanceof hw.getEnv().Canvas||xw(t))return e();function r(t){t.currentTarget&&(t.currentTarget.removeEventListener("load",r),t.currentTarget.removeEventListener("error",o),e(t))}function o(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",r),e.currentTarget.removeEventListener("error",o),n(e))}t.addEventListener("load",r),t.addEventListener("error",o)})));var t})))];case 1:return o.sent(),[2,new Sw(r,Array.isArray(e))]}}))}))}function Tw(e,t){return Ax(this,void 0,void 0,(function(){var n,r,o,i,a,u;return Rx(this,(function(s){switch(s.label){case 0:return n=hw.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,Ow(e)];case 1:if((o=s.sent()).batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return(i=o.getInput(0))instanceof n?(a=i,[3,4]):[3,2];case 2:return[4,_w(i)];case 3:a=s.sent(),s.label=4;case 4:r=a,s.label=5;case 5:return u=mw(r),[2,t.map((function(e){return e instanceof qx?e.forSize(r.width,r.height).box.floor():e})).map((function(e){return e.clipAtImageBorders(r.width,r.height)})).map((function(e){var t=e.x,n=e.y,r=e.width,o=e.height,i=Ew({width:r,height:o});return mw(i).putImageData(u.getImageData(t,n,r,o),0,0),i}))]}}))}))}function Aw(e,t){return Ax(this,void 0,void 0,(function(){return Rx(this,(function(n){if(!Dx(e)&&!Mx(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Mx(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,il((function(){var n=e.shape.slice(Mx(e)?1:0),r=n[0],o=n[1],i=n[2],a=t.map((function(e){return e instanceof qx?e.forSize(o,r).box:e})).map((function(e){return e.clipAtImageBorders(o,r)})).map((function(t){var n=t.x,a=t.y,u=t.width,s=t.height;return Pg(e.as3D(r,o,i),[a,n,0],[s,u,i])}));return a}))]}))}))}function Rw(e,t){return Ax(this,void 0,void 0,(function(){var n;return Rx(this,(function(r){switch(r.label){case 0:return[4,(0,hw.getEnv().fetch)(e,t)];case 1:if(!((n=r.sent()).status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}}))}))}function Nw(e){return Ax(this,void 0,void 0,(function(){return Rx(this,(function(t){switch(t.label){case 0:return[4,Rw(e)];case 1:return[2,t.sent().json()]}}))}))}function Iw(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if("/"===e)return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",o=(e=e.replace(r,"")).split("/").filter((function(e){return e})),i=e.endsWith(".json")?o[o.length-1]:n,a=r+(e.endsWith(".json")?o.slice(0,o.length-1):o).join("/");return{modelBaseUri:a=e.startsWith("/")?"/"+a:a,manifestUri:"/"===a?"/"+i:a+"/"+i}}function Pw(e,t){return Ax(this,void 0,void 0,(function(){var n,r,o,i;return Rx(this,(function(a){switch(a.label){case 0:return n=Iw(e,t),r=n.manifestUri,o=n.modelBaseUri,[4,Nw(r)];case 1:return i=a.sent(),[2,ux.loadWeights(i,o)]}}))}))}var Dw=function(){function e(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e);return t.obj[t.objProp]},e.prototype.reassignParamFromPath=function(e,t){var n=this.traversePropertyPath(e),r=n.obj,o=n.objProp;r[o].dispose(),r[o]=t},e.prototype.getParamList=function(){var e=this;return this._paramMappings.map((function(t){var n=t.paramPath;return{path:n,tensor:e.getParamFromPath(n)}}))},e.prototype.getTrainableParams=function(){return this.getParamList().filter((function(e){return e.tensor instanceof Us}))},e.prototype.getFrozenParams=function(){return this.getParamList().filter((function(e){return!(e.tensor instanceof Us)}))},e.prototype.variable=function(){var e=this;this.getFrozenParams().forEach((function(t){var n=t.path,r=t.tensor;e.reassignParamFromPath(n,r.variable())}))},e.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach((function(t){var n=t.path,r=t.tensor,o=Sl(r.dataSync());r.dispose(),e.reassignParamFromPath(n,o)}))},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.getParamList().forEach((function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()})),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map((function(e){var t=e.tensor;return Array.from(t.dataSync())})).reduce((function(e,t){return e.concat(t)})))},e.prototype.load=function(e){return Ax(this,void 0,void 0,(function(){return Rx(this,(function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.loadFromUri=function(e){return Ax(this,void 0,void 0,(function(){var t;return Rx(this,(function(n){switch(n.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromUri - expected model uri");return[4,Pw(e,this.getDefaultModelName())];case 1:return t=n.sent(),this.loadFromWeightMap(t),[2]}}))}))},e.prototype.loadFromDisk=function(e){return Ax(this,void 0,void 0,(function(){var t,n,r,o,i,a,u,s,c,l;return Rx(this,(function(f){switch(f.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromDisk - expected model file path");return t=hw.getEnv().readFile,n=Iw(e,this.getDefaultModelName()),r=n.manifestUri,o=n.modelBaseUri,i=function(e){return Promise.all(e.map((function(e){return t(e).then((function(e){return e.buffer}))})))},a=ux.weightsLoaderFactory(i),c=(s=JSON).parse,[4,t(r)];case 1:return u=c.apply(s,[f.sent().toString()]),[4,a(u,o)];case 2:return l=f.sent(),this.loadFromWeightMap(l),[2]}}))}))},e.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.extractWeights=function(e){var t=this.extractParams(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce((function(t,n){if(!t.nextObj.hasOwnProperty(n))throw new Error("traversePropertyPath - object does not have property "+n+", for path "+e);return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}}),{nextObj:this.params}),n=t.obj,r=t.objProp;if(!n||!r||!(n[r]instanceof Ls))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:n,objProp:r}},e}();function Mw(e,t,n){return il((function(){var r=dg(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=ym(r,t.bias)}))}function Fw(e,t,n){return void 0===n&&(n=!1),il((function(){var r=Yg(n?ym(ig(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):Mw(e,t.conv0,[2,2])),o=Mw(r,t.conv1,[1,1]),i=Mw(Yg(ym(r,o)),t.conv2,[1,1]);return Yg(ym(r,ym(o,i)))}))}function Lw(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!0),il((function(){var o=Yg(n?ym(ig(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):Mw(e,t.conv0,r?[2,2]:[1,1])),i=Mw(o,t.conv1,[1,1]),a=Mw(Yg(ym(o,i)),t.conv2,[1,1]),u=Mw(Yg(ym(o,ym(i,a))),t.conv3,[1,1]);return Yg(ym(o,ym(i,ym(a,u))))}))}function jw(e,t,n,r){return void 0===n&&(n="same"),void 0===r&&(r=!1),il((function(){var o=ym(ig(e,t.filters,[1,1],n),t.bias);return r?Yg(o):o}))}function Bw(e,t){Object.keys(e).forEach((function(n){t.some((function(e){return e.originalPath===n}))||e[n].dispose()}))}function Vw(e,t){return function(n,r,o,i){var a=Il(e(n*r*o*o),[o,o,n,r]),u=Al(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:a,bias:u}}}function zw(e,t){return function(n,r,o){var i=Rl(e(n*r),[n,r]),a=Al(e(r));return t.push({paramPath:o+"/weights"},{paramPath:o+"/bias"}),{weights:i,bias:a}}}var Ww=function(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n};function Uw(e,t){return function(n,r,o){var i=Il(e(9*n),[3,3,n,1]),a=Il(e(n*r),[1,1,n,r]),u=Al(e(r));return t.push({paramPath:o+"/depthwise_filter"},{paramPath:o+"/pointwise_filter"},{paramPath:o+"/bias"}),new Ww(i,a,u)}}function Hw(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),o=e(t+"/bias",1);return new Ww(n,r,o)}}function Gw(e,t){return function(n,r,o){var i=e[n];if(!Px(i,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+i);return t.push({originalPath:n,paramPath:o||n}),i}}function qw(e){var t=e;return{extractWeights:function(e){var n=t.slice(0,e);return t=t.slice(e),n},getRemainingWeights:function(){return t}}}function Kw(e,t){var n=Vw(e,t),r=Uw(e,t);function o(e,t,o,i){return void 0===i&&(i=!1),{conv0:i?n(e,t,3,o+"/conv0"):r(e,t,o+"/conv0"),conv1:r(t,t,o+"/conv1"),conv2:r(t,t,o+"/conv2")}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:function(e,t,n,i){void 0===i&&(i=!1);var a=o(e,t,n,i);return{conv0:a.conv0,conv1:a.conv1,conv2:a.conv2,conv3:r(t,t,n+"/conv3")}}}}function $w(e){return function(t){return{filters:e(t+"/filters",4),bias:e(t+"/bias",1)}}}function Xw(e,t){var n=Gw(e,t),r=$w(n),o=Hw(n);return{extractDenseBlock3Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):o(e+"/conv0"),conv1:o(e+"/conv1"),conv2:o(e+"/conv2")}},extractDenseBlock4Params:function(e,t){return void 0===t&&(t=!1),{conv0:t?r(e+"/conv0"):o(e+"/conv0"),conv1:o(e+"/conv1"),conv2:o(e+"/conv2"),conv3:o(e+"/conv3")}}}}var Yw=function(e){function t(){return e.call(this,"FaceFeatureExtractor")||this}return Ox(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return il((function(){var n=Lw(Xx(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Tl(255)),t.dense0,!0);return n=Lw(n,t.dense1),n=Lw(n,t.dense2),n=Lw(n,t.dense3),n=Sg(n,[7,7],[2,2],"valid")}))},t.prototype.forward=function(e){return Ax(this,void 0,void 0,(function(){var t;return Rx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Ow(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=Xw(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return Bw(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=qw(e),r=n.extractWeights,o=n.getRemainingWeights,i=Kw(r,t).extractDenseBlock4Params,a=i(3,32,"dense0",!0),u=i(32,64,"dense1"),s=i(64,128,"dense2"),c=i(128,256,"dense3");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:a,dense1:u,dense2:s,dense3:c}}}(e)},t}(Dw);function Qw(e,t){return il((function(){return ym(vg(e,t.weights),t.bias)}))}function Zw(e){var t={},n={};return Object.keys(e).forEach((function(r){(r.startsWith("fc")?n:t)[r]=e[r]})),{featureExtractorMap:t,classifierMap:n}}var Jw=function(e){function t(t,n){var r=e.call(this,t)||this;return r._faceFeatureExtractor=n,r}return Ox(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return il((function(){var r=e instanceof Sw?t.faceFeatureExtractor.forwardInput(e):e;return Qw(r.as2D(r.shape[0],-1),n.fc)}))},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e,t,n){var r=[],o=qw(e),i=o.extractWeights,a=o.getRemainingWeights,u=zw(i,r)(t,n,"fc");if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:r,params:{fc:u}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(e){var t=Zw(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=Gw(e,t),r={fc:function(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}("fc")};return Bw(e,t),{params:r,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,o=e.slice(0,e.length-r),i=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(i)},t}(Dw),eE=["neutral","happy","sad","angry","fearful","disgusted","surprised"],tE=function(){function e(e){var t=this;if(7!==e.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);eE.forEach((function(n,r){t[n]=e[r]}))}return e.prototype.asSortedArray=function(){var e=this;return eE.map((function(t){return{expression:t,probability:e[t]}})).sort((function(e,t){return t.probability-e.probability}))},e}(),nE=function(e){function t(t){return void 0===t&&(t=new Yw),e.call(this,"FaceExpressionNet",t)||this}return Ox(t,e),t.prototype.forwardInput=function(e){var t=this;return il((function(){return Xf(t.runNet(e))}))},t.prototype.forward=function(e){return Ax(this,void 0,void 0,(function(){var t;return Rx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Ow(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictExpressions=function(e){return Ax(this,void 0,void 0,(function(){var t,n,r,o,i=this;return Rx(this,(function(a){switch(a.label){case 0:return[4,Ow(e)];case 1:return t=a.sent(),[4,this.forwardInput(t)];case 2:return n=a.sent(),[4,Promise.all(Rf(n).map((function(e){return Ax(i,void 0,void 0,(function(){var t;return Rx(this,(function(n){switch(n.label){case 0:return[4,e.data()];case 1:return t=n.sent(),e.dispose(),[2,t]}}))}))})))];case 3:return r=a.sent(),n.dispose(),o=r.map((function(e){return new tE(e)})),[2,t.isBatchInput?o:o[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(Jw);function rE(e,t){var n={expressions:t};return Object.assign({},e,n)}function oE(e){return function(e){return e.detection instanceof qx}(e)&&e.landmarks instanceof Jx&&e.unshiftedLandmarks instanceof Jx&&e.alignedRect instanceof qx}function iE(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),o=r.align(),i=e.detection.imageDims,a={landmarks:r,unshiftedLandmarks:t,alignedRect:new qx(e.detection.score,o.rescale(i.reverse()),i)};return Object.assign({},e,a)}function aE(e,t,n){if(void 0===n&&(n=!1),e.beginPath(),t.slice(1).forEach((function(n,r){var o=n.x,i=n.y,a=t[r];e.moveTo(a.x,a.y),e.lineTo(o,i)})),n){var r=t[t.length-1],o=t[0];if(!r||!o)return;e.moveTo(r.x,r.y),e.lineTo(o.x,o.y)}e.stroke()}var uE=function(e){void 0===e&&(e={});var t=e.drawLines,n=void 0===t||t,r=e.drawPoints,o=void 0===r||r,i=e.lineWidth,a=e.lineColor,u=e.pointSize,s=e.pointColor;this.drawLines=n,this.drawPoints=o,this.lineWidth=i||1,this.pointSize=u||2,this.lineColor=a||"rgba(0, 255, 255, 1)",this.pointColor=s||"rgba(255, 0, 255, 1)"};!function(){function e(e,t){void 0===t&&(t={}),this.faceLandmarks=e,this.options=new uE(t)}e.prototype.draw=function(e){var t=mw(e),n=this.options,r=n.drawLines,o=n.drawPoints,i=n.lineWidth,a=n.lineColor,u=n.pointSize,s=n.pointColor;if(r&&this.faceLandmarks instanceof tw&&(t.strokeStyle=a,t.lineWidth=i,aE(t,this.faceLandmarks.getJawOutline()),aE(t,this.faceLandmarks.getLeftEyeBrow()),aE(t,this.faceLandmarks.getRightEyeBrow()),aE(t,this.faceLandmarks.getNose()),aE(t,this.faceLandmarks.getLeftEye(),!0),aE(t,this.faceLandmarks.getRightEye(),!0),aE(t,this.faceLandmarks.getMouth(),!0)),o){t.strokeStyle=s,t.fillStyle=s;this.faceLandmarks.positions.forEach((function(e){t.beginPath(),t.arc(e.x,e.y,u,0,2*Math.PI),t.fill()}))}}}();function sE(e,t){var n=[],r=qw(e),o=r.extractWeights,i=r.getRemainingWeights,a=function(e,t){var n=Vw(e,t),r=Uw(e,t);return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(e,t,o){return{separable_conv0:r(e,t,o+"/separable_conv0"),separable_conv1:r(t,t,o+"/separable_conv1"),expansion_conv:n(e,t,1,o+"/expansion_conv")}},extractMainBlockParams:function(e,t){return{separable_conv0:r(e,e,t+"/separable_conv0"),separable_conv1:r(e,e,t+"/separable_conv1"),separable_conv2:r(e,e,t+"/separable_conv2")}}}}(o,n),u=a.extractConvParams,s=a.extractSeparableConvParams,c=a.extractReductionBlockParams,l=a.extractMainBlockParams,f={conv_in:u(3,32,3,"entry_flow/conv_in"),reduction_block_0:c(32,64,"entry_flow/reduction_block_0"),reduction_block_1:c(64,128,"entry_flow/reduction_block_1")},d={};Bx(t,0,1).forEach((function(e){d["main_block_"+e]=l(128,"middle_flow/main_block_"+e)}));var p={reduction_block:c(128,256,"exit_flow/reduction_block"),separable_conv:s(256,512,"exit_flow/separable_conv")};if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{entry_flow:f,middle_flow:d,exit_flow:p}}}function cE(e,t){var n=[],r=function(e,t){var n=Gw(e,t),r=$w(n),o=Hw(n);return{extractConvParams:r,extractSeparableConvParams:o,extractReductionBlockParams:function(e){return{separable_conv0:o(e+"/separable_conv0"),separable_conv1:o(e+"/separable_conv1"),expansion_conv:r(e+"/expansion_conv")}},extractMainBlockParams:function(e){return{separable_conv0:o(e+"/separable_conv0"),separable_conv1:o(e+"/separable_conv1"),separable_conv2:o(e+"/separable_conv2")}}}}(e,n),o=r.extractConvParams,i=r.extractSeparableConvParams,a=r.extractReductionBlockParams,u=r.extractMainBlockParams,s={conv_in:o("entry_flow/conv_in"),reduction_block_0:a("entry_flow/reduction_block_0"),reduction_block_1:a("entry_flow/reduction_block_1")},c={};Bx(t,0,1).forEach((function(e){c["main_block_"+e]=u("middle_flow/main_block_"+e)}));var l={reduction_block:a("exit_flow/reduction_block"),separable_conv:i("exit_flow/separable_conv")};return Bw(e,n),{params:{entry_flow:s,middle_flow:c,exit_flow:l},paramMappings:n}}function lE(e,t,n){return ym(ig(e,t.filters,n,"same"),t.bias)}function fE(e,t,n){void 0===n&&(n=!0);var r=n?Yg(e):e;return r=Mw(r,t.separable_conv0,[1,1]),r=Mw(Yg(r),t.separable_conv1,[1,1]),r=kg(r,[3,3],[2,2],"same"),r=ym(r,lE(e,t.expansion_conv,[2,2]))}var dE,pE=function(e){function t(t){var n=e.call(this,"TinyXception")||this;return n._numMainBlocks=t,n}return Ox(t,e),t.prototype.forwardInput=function(e){var t=this,n=this.params;if(!n)throw new Error("TinyXception - load model before inference");return il((function(){var r=Xx(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Tl(256)),o=Yg(lE(r,n.entry_flow.conv_in,[2,2]));return o=fE(o,n.entry_flow.reduction_block_0,!1),o=fE(o,n.entry_flow.reduction_block_1),Bx(t._numMainBlocks,0,1).forEach((function(e){o=function(e,t){var n=Mw(Yg(e),t.separable_conv0,[1,1]);return n=Mw(Yg(n),t.separable_conv1,[1,1]),n=Mw(Yg(n),t.separable_conv2,[1,1]),ym(n,e)}(o,n.middle_flow["main_block_"+e])})),o=fE(o,n.exit_flow.reduction_block),o=Yg(Mw(o,n.exit_flow.separable_conv,[1,1]))}))},t.prototype.forward=function(e){return Ax(this,void 0,void 0,(function(){var t;return Rx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Ow(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(e){return cE(e,this._numMainBlocks)},t.prototype.extractParams=function(e){return sE(e,this._numMainBlocks)},t}(Dw);!function(e){e.FEMALE="female",e.MALE="male"}(dE||(dE={}));var hE=function(e){function t(t){void 0===t&&(t=new pE(2));var n=e.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=t,n}return Ox(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return il((function(){var r=e instanceof Sw?t.faceFeatureExtractor.forwardInput(e):e,o=Sg(r,[7,7],[2,2],"valid").as2D(r.shape[0],-1);return{age:Qw(o,n.fc.age).as1D(),gender:Qw(o,n.fc.gender)}}))},t.prototype.forwardInput=function(e){var t=this;return il((function(){var n=t.runNet(e),r=n.age,o=n.gender;return{age:r,gender:Xf(o)}}))},t.prototype.forward=function(e){return Ax(this,void 0,void 0,(function(){var t;return Rx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Ow(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictAgeAndGender=function(e){return Ax(this,void 0,void 0,(function(){var t,n,r,o,i,a,u=this;return Rx(this,(function(s){switch(s.label){case 0:return[4,Ow(e)];case 1:return t=s.sent(),[4,this.forwardInput(t)];case 2:return n=s.sent(),r=Rf(n.age),o=Rf(n.gender),i=r.map((function(e,t){return{ageTensor:e,genderTensor:o[t]}})),[4,Promise.all(i.map((function(e){var t=e.ageTensor,n=e.genderTensor;return Ax(u,void 0,void 0,(function(){var e,r,o,i,a;return Rx(this,(function(u){switch(u.label){case 0:return[4,t.data()];case 1:return e=u.sent()[0],[4,n.data()];case 2:return r=u.sent()[0],i=(o=r>.5)?dE.MALE:dE.FEMALE,a=o?r:1-r,t.dispose(),n.dispose(),[2,{age:e,gender:i,genderProbability:a}]}}))}))})))];case 3:return a=s.sent(),n.age.dispose(),n.gender.dispose(),[2,t.isBatchInput?a:a[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return function(e){var t=[],n=qw(e),r=n.extractWeights,o=n.getRemainingWeights,i=zw(r,t),a=i(512,1,"fc/age"),u=i(512,2,"fc/gender");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{fc:{age:a,gender:u}}}}(e)},t.prototype.extractParamsFromWeigthMap=function(e){var t=Zw(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),function(e){var t=[],n=Gw(e,t);function r(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}var o={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Bw(e,t),{params:o,paramMappings:t}}(r)},t.prototype.extractParams=function(e){var t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)},t}(Dw),vE=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ox(t,e),t.prototype.postProcess=function(e,t,n){var r=n.map((function(e){var n=e.width,r=e.height,o=t/Math.max(r,n);return{width:n*o,height:r*o}})),o=r.length;return il((function(){var n=function(e,t){return Of([Ml([68],e),Ml([68],t)],1).as2D(1,136).as1D()},i=function(e,t){var n=r[e],o=n.width,i=n.height;return t(o,i)?Math.abs(o-i)/2:0},a=e.mul(Ml([o,136],t)).sub(Of(Array.from(Array(o),(function(e,t){return n(function(e){return i(e,(function(e,t){return e<t}))}(t),function(e){return i(e,(function(e,t){return t<e}))}(t))})))).div(Of(Array.from(Array(o),(function(e,t){return n(r[t].width,r[t].height)}))));return a}))},t.prototype.forwardInput=function(e){var t=this;return il((function(){var n=t.runNet(e);return t.postProcess(n,e.inputSize,e.inputDimensions.map((function(e){return{height:e[0],width:e[1]}})))}))},t.prototype.forward=function(e){return Ax(this,void 0,void 0,(function(){var t;return Rx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Ow(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.detectLandmarks=function(e){return Ax(this,void 0,void 0,(function(){var t,n,r,o=this;return Rx(this,(function(i){switch(i.label){case 0:return[4,Ow(e)];case 1:return t=i.sent(),n=il((function(){return Rf(o.forwardInput(t))})),[4,Promise.all(n.map((function(e,n){return Ax(o,void 0,void 0,(function(){var r,o,i,a,u;return Rx(this,(function(s){switch(s.label){case 0:return i=(o=Array).from,[4,e.data()];case 1:return r=i.apply(o,[s.sent()]),a=r.filter((function(e,t){return Fx(t)})),u=r.filter((function(e,t){return!Fx(t)})),[2,new tw(Array(68).fill(0).map((function(e,t){return new Wx(a[t],u[t])})),{height:t.getInputHeight(n),width:t.getInputWidth(n)})]}}))}))})))];case 2:return r=i.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getClassifierChannelsOut=function(){return 136},t}(Jw),mE=function(e){function t(t){return void 0===t&&(t=new Yw),e.call(this,"FaceLandmark68Net",t)||this}return Ox(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(vE);var gE=function(e){function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return Ox(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return il((function(){var n=Fw(Xx(e.toBatchTensor(112,!0),[122.782,117.001,104.298]).div(Tl(255)),t.dense0,!0);return n=Fw(n,t.dense1),n=Fw(n,t.dense2),n=Sg(n,[14,14],[2,2],"valid")}))},t.prototype.forward=function(e){return Ax(this,void 0,void 0,(function(){var t;return Rx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Ow(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(e){return function(e){var t=[],n=Xw(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return Bw(e,t),{params:r,paramMappings:t}}(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=qw(e),r=n.extractWeights,o=n.getRemainingWeights,i=Kw(r,t).extractDenseBlock3Params,a=i(3,32,"dense0",!0),u=i(32,64,"dense1"),s=i(64,128,"dense2");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:a,dense1:u,dense2:s}}}(e)},t}(Dw),yE=function(e){function t(t){return void 0===t&&(t=new gE),e.call(this,"FaceLandmark68TinyNet",t)||this}return Ox(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(vE);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Ox(t,e)}(mE);function bE(e,t,n,r,o){void 0===o&&(o="same");var i=t.conv,a=i.filters,u=i.bias,s=ig(e,a,n,o);return s=function(e,t){return ym(Im(e,t.weights),t.biases)}(s=ym(s,u),t.scale),r?Yg(s):s}function xE(e,t){return bE(e,t,[1,1],!1)}function wE(e,t){return bE(e,t,[2,2],!0,"valid")}function EE(e,t){function n(n,r,o,i){var a=function(t,n,r){var o=e(t),i=o.length/(n*r*r);if(i%1!==0)throw new Error("depth has to be an integer: "+i+", weights.length: "+o.length+", numFilters: "+n+", filterSize: "+r);return il((function(){return Jg(Il(o,[n,i,r,r]),[2,3,1,0])}))}(n,r,o),u=Al(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:a,bias:u}}function r(r,o,i,a){var u=n(r,o,i,a+"/conv"),s=function(n,r){var o=Al(e(n)),i=Al(e(n));return t.push({paramPath:r+"/weights"},{paramPath:r+"/biases"}),{weights:o,biases:i}}(o,a+"/scale");return{conv:u,scale:s}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e,t,n,o,i){return void 0===i&&(i=!1),{conv1:r((i?.5:1)*e,t,n,o+"/conv1"),conv2:r(e,t,n,o+"/conv2")}}}}function CE(e,t){var n=Gw(e,t);function r(e){var t=n(e+"/conv/filters",4),r=n(e+"/conv/bias",1),o=function(e){return{weights:n(e+"/scale/weights",1),biases:n(e+"/scale/biases",1)}}(e);return{conv:{filters:t,bias:r},scale:o}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e){return{conv1:r(e+"/conv1"),conv2:r(e+"/conv2")}}}}function _E(e){var t=[],n=CE(e,t),r=n.extractConvLayerParams,o=n.extractResidualLayerParams,i=r("conv32_down"),a=o("conv32_1"),u=o("conv32_2"),s=o("conv32_3"),c=o("conv64_down"),l=o("conv64_1"),f=o("conv64_2"),d=o("conv64_3"),p=o("conv128_down"),h=o("conv128_1"),v=o("conv128_2"),m=o("conv256_down"),g=o("conv256_1"),y=o("conv256_2"),b=o("conv256_down_out"),x=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!Px(x,2))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+x);var w={conv32_down:i,conv32_1:a,conv32_2:u,conv32_3:s,conv64_down:c,conv64_1:l,conv64_2:f,conv64_3:d,conv128_down:p,conv128_1:h,conv128_2:v,conv256_down:m,conv256_1:g,conv256_2:y,conv256_down_out:b,fc:x};return Bw(e,t),{params:w,paramMappings:t}}function kE(e,t){var n=function(e,t){return bE(e,t,[1,1],!0)}(e,t.conv1);return n=xE(n,t.conv2),n=ym(n,e),n=Yg(n)}function SE(e,t){var n=wE(e,t.conv1);n=xE(n,t.conv2);var r=Sg(e,2,2,"valid"),o=Dl(r.shape),i=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){var a=Nx(n.shape);a[1]=1;var u=Dl(a),s=Nx((n=Bl([n,u],1)).shape);s[2]=1;var c=Dl(s);n=Bl([n,c],2)}return r=i?Bl([r,o],3):r,n=ym(r,n),n=Yg(n)}var OE=function(e){function t(){return e.call(this,"FaceRecognitionNet")||this}return Ox(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return il((function(){var n=wE(Xx(e.toBatchTensor(150,!0).toFloat(),[122.782,117.001,104.298]).div(Tl(256)),t.conv32_down);n=kE(n=kg(n,3,2,"valid"),t.conv32_1),n=kE(n,t.conv32_2),n=kE(n,t.conv32_3),n=kE(n=SE(n,t.conv64_down),t.conv64_1),n=kE(n,t.conv64_2),n=kE(n,t.conv64_3),n=kE(n=SE(n,t.conv128_down),t.conv128_1),n=kE(n,t.conv128_2),n=kE(n=SE(n,t.conv256_down),t.conv256_1);var r=(n=SE(n=kE(n,t.conv256_2),t.conv256_down_out)).mean([1,2]);return vg(r,t.fc)}))},t.prototype.forward=function(e){return Ax(this,void 0,void 0,(function(){var t;return Rx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Ow(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.computeFaceDescriptor=function(e){return Ax(this,void 0,void 0,(function(){var t,n,r,o=this;return Rx(this,(function(i){switch(i.label){case 0:return[4,Ow(e)];case 1:return t=i.sent(),n=il((function(){return Rf(o.forwardInput(t))})),[4,Promise.all(n.map((function(e){return e.data()})))];case 2:return r=i.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(e){return _E(e)},t.prototype.extractParams=function(e){return function(e){var t=qw(e),n=t.extractWeights,r=t.getRemainingWeights,o=[],i=EE(n,o),a=i.extractConvLayerParams,u=i.extractResidualLayerParams,s=a(4704,32,7,"conv32_down"),c=u(9216,32,3,"conv32_1"),l=u(9216,32,3,"conv32_2"),f=u(9216,32,3,"conv32_3"),d=u(36864,64,3,"conv64_down",!0),p=u(36864,64,3,"conv64_1"),h=u(36864,64,3,"conv64_2"),v=u(36864,64,3,"conv64_3"),m=u(147456,128,3,"conv128_down",!0),g=u(147456,128,3,"conv128_1"),y=u(147456,128,3,"conv128_2"),b=u(589824,256,3,"conv256_down",!0),x=u(589824,256,3,"conv256_1"),w=u(589824,256,3,"conv256_2"),E=u(589824,256,3,"conv256_down_out"),C=il((function(){return Jg(Rl(n(32768),[128,256]),[1,0])}));if(o.push({paramPath:"fc"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{conv32_down:s,conv32_1:c,conv32_2:l,conv32_3:f,conv64_down:d,conv64_1:p,conv64_2:h,conv64_3:v,conv128_down:m,conv128_1:g,conv128_2:y,conv256_down:b,conv256_1:x,conv256_2:w,conv256_down_out:E,fc:C},paramMappings:o}}(e)},t}(Dw);function TE(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var AE=function(){function e(e){var t=void 0===e?{}:e,n=t.minFaceSize,r=t.scaleFactor,o=t.maxNumScales,i=t.scoreThresholds,a=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=o||10,this._scoreThresholds=i||[.6,.7,.7],this._scaleSteps=a,"number"!==typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!==typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!==typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some((function(e){return"number"!==typeof e})))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some((function(e){return"number"!==typeof e}))))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function RE(e,t){function n(n,r,o,i,a){var u=Il(e(n*r*o*o),[o,o,n,r]),s=Al(e(r));return t.push({paramPath:i+"/filters"},{paramPath:i+"/"+(a?"batch_norm_offset":"bias")}),{filters:u,bias:s}}function r(e,t,r,o){var i=n(e,t,r,o,!0);return{filters:i.filters,batch_norm_offset:i.bias}}function o(n,o,i){var a=function(n,r){var o=Il(e(9*n),[3,3,n,1]),i=Al(e(n)),a=Al(e(n)),u=Al(e(n)),s=Al(e(n));return t.push({paramPath:r+"/filters"},{paramPath:r+"/batch_norm_scale"},{paramPath:r+"/batch_norm_offset"},{paramPath:r+"/batch_norm_mean"},{paramPath:r+"/batch_norm_variance"}),{filters:o,batch_norm_scale:i,batch_norm_offset:a,batch_norm_mean:u,batch_norm_variance:s}}(n,i+"/depthwise_conv");return{depthwise_conv:a,pointwise_conv:r(n,o,1,i+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:o(32,64,"mobilenetv1/conv_1"),conv_2:o(64,128,"mobilenetv1/conv_2"),conv_3:o(128,128,"mobilenetv1/conv_3"),conv_4:o(128,256,"mobilenetv1/conv_4"),conv_5:o(256,256,"mobilenetv1/conv_5"),conv_6:o(256,512,"mobilenetv1/conv_6"),conv_7:o(512,512,"mobilenetv1/conv_7"),conv_8:o(512,512,"mobilenetv1/conv_8"),conv_9:o(512,512,"mobilenetv1/conv_9"),conv_10:o(512,512,"mobilenetv1/conv_10"),conv_11:o(512,512,"mobilenetv1/conv_11"),conv_12:o(512,1024,"mobilenetv1/conv_12"),conv_13:o(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}function NE(e){var t=[],n=function(e,t){var n=Gw(e,t);function r(e,t,r){return{filters:n(e+"/Conv2d_"+t+"_pointwise/weights",4,r+"/filters"),batch_norm_offset:n(e+"/Conv2d_"+t+"_pointwise/convolution_bn_offset",1,r+"/batch_norm_offset")}}function o(e){var t="mobilenetv1/conv_"+e,o="MobilenetV1/Conv2d_"+e+"_depthwise",i=t+"/depthwise_conv",a=t+"/pointwise_conv";return{depthwise_conv:{filters:n(o+"/depthwise_weights",4,i+"/filters"),batch_norm_scale:n(o+"/BatchNorm/gamma",1,i+"/batch_norm_scale"),batch_norm_offset:n(o+"/BatchNorm/beta",1,i+"/batch_norm_offset"),batch_norm_mean:n(o+"/BatchNorm/moving_mean",1,i+"/batch_norm_mean"),batch_norm_variance:n(o+"/BatchNorm/moving_variance",1,i+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",e,a)}}function i(e,t){return{filters:n(e+"/weights",4,t+"/filters"),bias:n(e+"/biases",1,t+"/bias")}}function a(e){return{box_encoding_predictor:i("Prediction/BoxPredictor_"+e+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+e+"/box_encoding_predictor"),class_predictor:i("Prediction/BoxPredictor_"+e+"/ClassPredictor","prediction_layer/box_predictor_"+e+"/class_predictor")}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:o(1),conv_2:o(2),conv_3:o(3),conv_4:o(4),conv_5:o(5),conv_6:o(6),conv_7:o(7),conv_8:o(8),conv_9:o(9),conv_10:o(10),conv_11:o(11),conv_12:o(12),conv_13:o(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:a(0),box_predictor_1:a(1),box_predictor_2:a(2),box_predictor_3:a(3),box_predictor_4:a(4),box_predictor_5:a(5)}}}}(e,t),r=n.extractMobilenetV1Params,o=n.extractPredictionLayerParams,i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!Dx(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var a={mobilenetv1:r(),prediction_layer:o(),output_layer:{extra_dim:i}};return Bw(e,t),{params:a,paramMappings:t}}function IE(e,t,n){return il((function(){var r=ig(e,t.filters,n,"same");return r=ym(r,t.batch_norm_offset),Sv(r,0,6)}))}function PE(e,t){return il((function(){var n=null,r=IE(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach((function(e,t){var o=t+1,i=function(e){return[2,4,6,12].some((function(t){return t===e}))?[2,2]:[1,1]}(o);r=function(e,t,n){return il((function(){var r=cg(e,t.filters,n,"same");return r=sm(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,.0010000000474974513),Sv(r,0,6)}))}(r,e.depthwise_conv,i),r=IE(r,e.pointwise_conv,[1,1]),11===o&&(n=r)})),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}}))}function DE(e,t,n){var r=e.arraySync(),o=Math.min(r[t][0],r[t][2]),i=Math.min(r[t][1],r[t][3]),a=Math.max(r[t][0],r[t][2]),u=Math.max(r[t][1],r[t][3]),s=Math.min(r[n][0],r[n][2]),c=Math.min(r[n][1],r[n][3]),l=Math.max(r[n][0],r[n][2]),f=Math.max(r[n][1],r[n][3]),d=(a-o)*(u-i),p=(l-s)*(f-c);if(d<=0||p<=0)return 0;var h=Math.max(o,s),v=Math.max(i,c),m=Math.min(a,l),g=Math.min(u,f),y=Math.max(m-h,0)*Math.max(g-v,0);return y/(d+p-y)}function ME(e,t){var n=function(e){var t=Rf(Jg(e,[1,0])),n=[Lm(t[2],t[0]),Lm(t[3],t[1])];return{sizes:n,centers:[ym(t[0],Em(n[0],Tl(2))),ym(t[1],Em(n[1],Tl(2)))]}}(e),r=n.sizes,o=n.centers,i=Rf(Jg(t,[1,0])),a=Em(Im(Rv(Em(i[2],Tl(5))),r[0]),Tl(2)),u=ym(Im(Em(i[0],Tl(10)),r[0]),o[0]),s=Em(Im(Rv(Em(i[3],Tl(5))),r[1]),Tl(2)),c=ym(Im(Em(i[1],Tl(10)),r[1]),o[1]);return Jg(Of([Lm(u,a),Lm(c,s),ym(u,a),ym(c,s)]),[1,0])}function FE(e,t){return il((function(){var n=e.shape[0];return{boxPredictionEncoding:_f(jw(e,t.box_encoding_predictor),[n,-1,1,4]),classPrediction:_f(jw(e,t.class_predictor),[n,-1,3])}}))}var LE=function(){function e(e){var t=void 0===e?{}:e,n=t.minConfidence,r=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,"number"!==typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!==typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),jE=function(e){function t(){return e.call(this,"SsdMobilenetv1")||this}return Ox(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return il((function(){var n=e.toBatchTensor(512,!1).toFloat(),r=PE(Lm(Im(n,Tl(.007843137718737125)),Tl(1)),t.mobilenetv1),o=function(e,t,n){return il((function(){var r=IE(e,n.conv_0,[1,1]),o=IE(r,n.conv_1,[2,2]),i=IE(o,n.conv_2,[1,1]),a=IE(i,n.conv_3,[2,2]),u=IE(a,n.conv_4,[1,1]),s=IE(u,n.conv_5,[2,2]),c=IE(s,n.conv_6,[1,1]),l=IE(c,n.conv_7,[2,2]),f=FE(t,n.box_predictor_0),d=FE(e,n.box_predictor_1),p=FE(o,n.box_predictor_2),h=FE(a,n.box_predictor_3),v=FE(s,n.box_predictor_4),m=FE(l,n.box_predictor_5);return{boxPredictions:Bl([f.boxPredictionEncoding,d.boxPredictionEncoding,p.boxPredictionEncoding,h.boxPredictionEncoding,v.boxPredictionEncoding,m.boxPredictionEncoding],1),classPredictions:Bl([f.classPrediction,d.classPrediction,p.classPrediction,h.classPrediction,v.classPrediction,m.classPrediction],1)}}))}(r.out,r.conv11,t.prediction_layer);return function(e,t,n){return il((function(){var r=e.shape[0],o=ME(_f(Tf(n.extra_dim,[r,1,1]),[-1,4]),_f(e,[-1,4]));o=_f(o,[r,o.shape[0]/r,4]);var i=Vv(Rg(t,[0,0,1],[-1,-1,-1])),a=Rg(i,[0,0,0],[-1,-1,1]);return a=_f(a,[r,a.shape[1]]),{boxes:Rf(o),scores:Rf(a)}}))}(o.boxPredictions,o.classPredictions,t.output_layer)}))},t.prototype.forward=function(e){return Ax(this,void 0,void 0,(function(){var t;return Rx(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,Ow(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.locateFaces=function(e,t){return void 0===t&&(t={}),Ax(this,void 0,void 0,(function(){var n,r,o,i,a,u,s,c,l,f,d,p,h,v,m,g,y,b,x,w;return Rx(this,(function(E){switch(E.label){case 0:return n=new LE(t),r=n.maxResults,o=n.minConfidence,[4,Ow(e)];case 1:for(i=E.sent(),a=this.forwardInput(i),u=a.boxes,s=a.scores,c=u[0],l=s[0],f=1;f<u.length;f++)u[f].dispose(),s[f].dispose();return h=(p=Array).from,[4,l.data()];case 2:return d=h.apply(p,[E.sent()]),.5,v=function(e,t,n,r,o){var i=e.shape[0],a=Math.min(n,i),u=t.map((function(e,t){return{score:e,boxIndex:t}})).filter((function(e){return e.score>o})).sort((function(e,t){return t.score-e.score})),s=function(e){return e<=r?1:0},c=[];return u.forEach((function(t){if(!(c.length>=a)){for(var n=t.score,r=c.length-1;r>=0;--r){var i=DE(e,t.boxIndex,c[r]);if(0!==i&&(t.score*=s(i),t.score<=o))break}n===t.score&&c.push(t.boxIndex)}})),c}(c,d,r,.5,o),m=i.getReshapedInputDimensions(0),g=i.inputSize,y=g/m.width,b=g/m.height,x=c.arraySync(),w=v.map((function(e){var t=[Math.max(0,x[e][0]),Math.min(1,x[e][2])].map((function(e){return e*b})),n=t[0],r=t[1],o=[Math.max(0,x[e][1]),Math.min(1,x[e][3])].map((function(e){return e*y})),a=o[0],u=o[1];return new qx(d[e],new Zx(a,n,u-a,r-n),{height:i.getInputHeight(0),width:i.getInputWidth(0)})})),c.dispose(),l.dispose(),[2,w]}}))}))},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(e){return NE(e)},t.prototype.extractParams=function(e){return function(e){var t=[],n=qw(e),r=n.extractWeights,o=n.getRemainingWeights,i=RE(r,t),a=i.extractMobilenetV1Params,u=i.extractPredictionLayerParams,s=a(),c=u(),l={extra_dim:Nl(r(20472),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{params:{mobilenetv1:s,prediction_layer:c,output_layer:l},paramMappings:t}}(e)},t}(Dw);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Ox(t,e)}(jE);var BE,VE=[new Wx(.738768,.874946),new Wx(2.42204,2.65704),new Wx(4.30971,7.04493),new Wx(10.246,4.59428),new Wx(12.6868,11.8741)],zE=[new Wx(1.603231,2.094468),new Wx(6.041143,7.080126),new Wx(2.882459,3.518061),new Wx(4.266906,5.178857),new Wx(9.041765,10.66308)],WE=[117.001,114.697,97.404],UE=function(e){return"number"===typeof e};function HE(e){return il((function(){var t=Im(e,Tl(.10000000149011612));return ym(Yg(Lm(e,t)),t)}))}function GE(e,t){return il((function(){var n=vf(e,[[0,0],[1,1],[1,1],[0,0]]);return n=ig(n,t.conv.filters,[1,1],"valid"),n=Lm(n,t.bn.sub),n=Im(n,t.bn.truediv),HE(n=ym(n,t.conv.bias))}))}function qE(e,t){return il((function(){var n=vf(e,[[0,0],[1,1],[1,1],[0,0]]);return n=dg(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),HE(n=ym(n,t.bias))}))}function KE(e,t){var n=Vw(e,t);var r=Uw(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:function(r,o,i){var a=n(r,o,3,i+"/conv"),u=function(n,r){var o=Al(e(n)),i=Al(e(n));return t.push({paramPath:r+"/sub"},{paramPath:r+"/truediv"}),{sub:o,truediv:i}}(o,i+"/bn");return{conv:a,bn:u}},extractSeparableConvParams:r}}function $E(e,t){var n=Gw(e,t);function r(e){return{filters:n(e+"/filters",4),bias:n(e+"/bias",1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(e){var t=r(e+"/conv"),o=function(e){return{sub:n(e+"/sub",1),truediv:n(e+"/truediv",1)}}(e+"/bn");return{conv:t,bn:o}},extractSeparableConvParams:Hw(n)}}!function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"}(BE||(BE={}));var XE=function(){function e(e){var t=void 0===e?{}:e,n=t.inputSize,r=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,"number"!==typeof this._inputSize||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!==typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),YE=function(e){function t(t){var n=e.call(this,"TinyYolov2")||this;return function(e){if(!e)throw new Error("invalid config: "+e);if("boolean"!==typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!UE(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every((function(e){return"string"===typeof e})))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map((function(e){return e||{}})).every((function(e){return UE(e.x)&&UE(e.y)})))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(UE)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}(t),n._config=t,n}return Ox(t,e),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(e,t){var n=GE(e,t.conv0);return n=GE(n=kg(n,[2,2],[2,2],"same"),t.conv1),n=GE(n=kg(n,[2,2],[2,2],"same"),t.conv2),n=GE(n=kg(n,[2,2],[2,2],"same"),t.conv3),n=GE(n=kg(n,[2,2],[2,2],"same"),t.conv4),n=GE(n=kg(n,[2,2],[2,2],"same"),t.conv5),n=GE(n=kg(n,[2,2],[1,1],"same"),t.conv6),jw(n=GE(n,t.conv7),t.conv8,"valid",!1)},t.prototype.runMobilenet=function(e,t){var n=this.config.isFirstLayerConv2d?HE(jw(e,t.conv0,"valid",!1)):qE(e,t.conv0);return n=qE(n=kg(n,[2,2],[2,2],"same"),t.conv1),n=qE(n=kg(n,[2,2],[2,2],"same"),t.conv2),n=qE(n=kg(n,[2,2],[2,2],"same"),t.conv3),n=qE(n=kg(n,[2,2],[2,2],"same"),t.conv4),n=qE(n=kg(n,[2,2],[2,2],"same"),t.conv5),n=kg(n,[2,2],[1,1],"same"),n=t.conv6?qE(n,t.conv6):n,jw(n=t.conv7?qE(n,t.conv7):n,t.conv8,"valid",!1)},t.prototype.forwardInput=function(e,t){var n=this,r=this.params;if(!r)throw new Error("TinyYolov2 - load model before inference");return il((function(){var o=e.toBatchTensor(t,!1).toFloat();return o=(o=n.config.meanRgb?Xx(o,n.config.meanRgb):o).div(Tl(256)),n.config.withSeparableConvs?n.runMobilenet(o,r):n.runTinyYolov2(o,r)}))},t.prototype.forward=function(e,t){return Ax(this,void 0,void 0,(function(){var n;return Rx(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Ow(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent()]}}))}))},t.prototype.detect=function(e,t){return void 0===t&&(t={}),Ax(this,void 0,void 0,(function(){var n,r,o,i,a,u,s,c,l,f,d,p,h,v=this;return Rx(this,(function(m){switch(m.label){case 0:return n=new XE(t),r=n.inputSize,o=n.scoreThreshold,[4,Ow(e)];case 1:return i=m.sent(),[4,this.forwardInput(i,r)];case 2:return a=m.sent(),u=il((function(){return Rf(a)[0].expandDims()})),s={width:i.getInputWidth(0),height:i.getInputHeight(0)},[4,this.extractBoxes(u,i.getReshapedInputDimensions(0),o)];case 3:return c=m.sent(),a.dispose(),u.dispose(),l=c.map((function(e){return e.box})),f=c.map((function(e){return e.score})),d=c.map((function(e){return e.classScore})),p=c.map((function(e){return v.config.classes[e.label]})),h=$x(l.map((function(e){return e.rescale(r)})),f,this.config.iouThreshold,!0),[2,h.map((function(e){return new Gx(f[e],d[e],p[e],l[e],s)}))]}}))}))},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(e){return function(e,t){var n,r=[],o=$E(e,r),i=o.extractConvParams,a=o.extractConvWithBatchNormParams,u=o.extractSeparableConvParams;if(t.withSeparableConvs){var s=t.filterSizes&&t.filterSizes.length||9;n={conv0:t.isFirstLayerConv2d?i("conv0"):u("conv0"),conv1:u("conv1"),conv2:u("conv2"),conv3:u("conv3"),conv4:u("conv4"),conv5:u("conv5"),conv6:s>7?u("conv6"):void 0,conv7:s>8?u("conv7"):void 0,conv8:i("conv8")}}else n={conv0:a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:a("conv6"),conv7:a("conv7"),conv8:i("conv8")};return Bw(e,r),{params:n,paramMappings:r}}(e,this.config)},t.prototype.extractParams=function(e){var n=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config");return function(e,t,n,r){var o,i=qw(e),a=i.extractWeights,u=i.getRemainingWeights,s=[],c=KE(a,s),l=c.extractConvParams,f=c.extractConvWithBatchNormParams,d=c.extractSeparableConvParams;if(t.withSeparableConvs){var p=r[0],h=r[1],v=r[2],m=r[3],g=r[4],y=r[5],b=r[6],x=r[7],w=r[8];o={conv0:t.isFirstLayerConv2d?l(p,h,3,"conv0"):d(p,h,"conv0"),conv1:d(h,v,"conv1"),conv2:d(v,m,"conv2"),conv3:d(m,g,"conv3"),conv4:d(g,y,"conv4"),conv5:d(y,b,"conv5"),conv6:x?d(b,x,"conv6"):void 0,conv7:w?d(x,w,"conv7"):void 0,conv8:l(w||x||b,5*n,1,"conv8")}}else p=r[0],h=r[1],v=r[2],m=r[3],g=r[4],y=r[5],b=r[6],x=r[7],w=r[8],o={conv0:f(p,h,"conv0"),conv1:f(h,v,"conv1"),conv2:f(v,m,"conv2"),conv3:f(m,g,"conv3"),conv4:f(g,y,"conv4"),conv5:f(y,b,"conv5"),conv6:f(b,x,"conv6"),conv7:f(x,w,"conv7"),conv8:l(w,5*n,1,"conv8")};if(0!==u().length)throw new Error("weights remaing after extract: "+u().length);return{params:o,paramMappings:s}}(e,this.config,this.boxEncodingSize,n)},t.prototype.extractBoxes=function(e,t,n){return Ax(this,void 0,void 0,(function(){var r,o,i,a,u,s,c,l,f,d,p,h,v,m,g,y,b,x,w,E,C,_,k,S,O,T,A,R,N,I=this;return Rx(this,(function(P){switch(P.label){case 0:return r=t.width,o=t.height,i=Math.max(r,o),a=i/r,u=i/o,s=e.shape[1],c=this.config.anchors.length,l=il((function(){var t=e.reshape([s,s,c,I.boxEncodingSize]);return[t.slice([0,0,0,0],[s,s,c,4]),t.slice([0,0,0,4],[s,s,c,1]),I.withClassScores?Xf(t.slice([0,0,0,5],[s,s,c,I.config.classes.length]),3):Tl(0)]})),f=l[0],d=l[1],p=l[2],h=[],[4,d.array()];case 1:return v=P.sent(),[4,f.array()];case 2:m=P.sent(),g=0,P.label=3;case 3:if(!(g<s))return[3,12];y=0,P.label=4;case 4:if(!(y<s))return[3,11];b=0,P.label=5;case 5:return b<c?(x=Yx(v[g][y][b][0]),!n||x>n?(w=(y+Yx(m[g][y][b][0]))/s*a,E=(g+Yx(m[g][y][b][1]))/s*u,C=Math.exp(m[g][y][b][2])*this.config.anchors[b].x/s*a,_=Math.exp(m[g][y][b][3])*this.config.anchors[b].y/s*u,k=w-C/2,S=E-_/2,O={row:g,col:y,anchor:b},this.withClassScores?[4,this.extractPredictedClass(p,O)]:[3,7]):[3,9]):[3,10];case 6:return N=P.sent(),[3,8];case 7:N={classScore:1,label:0},P.label=8;case 8:A=(T=N).classScore,R=T.label,h.push(Tx({box:new Hx(k,S,k+C,S+_),score:x,classScore:x*A,label:R},O)),P.label=9;case 9:return b++,[3,5];case 10:return y++,[3,4];case 11:return g++,[3,3];case 12:return f.dispose(),d.dispose(),p.dispose(),[2,h]}}))}))},t.prototype.extractPredictedClass=function(e,t){return Ax(this,void 0,void 0,(function(){var n,r,o,i;return Rx(this,(function(a){switch(a.label){case 0:return n=t.row,r=t.col,o=t.anchor,[4,e.array()];case 1:return i=a.sent(),[2,Array(this.config.classes.length).fill(0).map((function(e,t){return i[n][r][o][t]})).map((function(e,t){return{classScore:e,label:t}})).reduce((function(e,t){return e.classScore>t.classScore?e:t}))]}}))}))},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(Dw),QE=function(e){function t(t){void 0===t&&(t=!0);var n=Object.assign({},{withSeparableConvs:t,iouThreshold:.4,classes:["face"]},t?{anchors:zE,meanRgb:WE}:{anchors:VE,withClassScores:!0});return e.call(this,n)||this}return Ox(t,e),Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return Ax(this,void 0,void 0,(function(){return Rx(this,(function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map((function(e){return new qx(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(YE);var ZE=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return Ox(t,e),t}(XE),JE=function(){function e(){}return e.prototype.then=function(e){return Ax(this,void 0,void 0,(function(){var t;return Rx(this,(function(n){switch(n.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[n.sent()])]}}))}))},e.prototype.run=function(){return Ax(this,void 0,void 0,(function(){return Rx(this,(function(e){throw new Error("ComposableTask - run is not implemented")}))}))},e}();function eC(e,t){var n={descriptor:t};return Object.assign({},e,n)}function tC(e,t,n,r,o){return void 0===o&&(o=function(e){return e.alignedRect}),Ax(this,void 0,void 0,(function(){var i,a,u,s,c;return Rx(this,(function(l){switch(l.label){case 0:return i=e.map((function(e){return oE(e)?o(e):e.detection})),(u=r)?[3,5]:t instanceof Ls?[4,Aw(t,i)]:[3,2];case 1:return s=l.sent(),[3,4];case 2:return[4,Tw(t,i)];case 3:s=l.sent(),l.label=4;case 4:u=s,l.label=5;case 5:return[4,n(a=u)];case 6:return c=l.sent(),a.forEach((function(e){return e instanceof Ls&&e.dispose()})),[2,c]}}))}))}function nC(e,t,n,r,o){return Ax(this,void 0,void 0,(function(){var i=this;return Rx(this,(function(a){return[2,tC([e],t,(function(e){return Ax(i,void 0,void 0,(function(){return Rx(this,(function(t){return[2,n(e[0])]}))}))}),r,o)]}))}))}function rC(e){var t=qw(e),n=t.extractWeights,r=t.getRemainingWeights,o=[],i=function(e,t){var n=Vw(e,t),r=zw(e,t);function o(n,r){var o=Al(e(n));return t.push({paramPath:r}),o}function i(e,t,r){return void 0===r&&(r=!1),{conv1:n(e[0],e[1],3,t+"/conv1"),prelu1_alpha:o(e[1],t+"/prelu1_alpha"),conv2:n(e[1],e[2],3,t+"/conv2"),prelu2_alpha:o(e[2],t+"/prelu2_alpha"),conv3:n(e[2],e[3],r?2:3,t+"/conv3"),prelu3_alpha:o(e[3],t+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=i([3,10,16,32],"pnet"),t=n(32,2,1,"pnet/conv4_1"),r=n(32,4,1,"pnet/conv4_2");return Tx(Tx({},e),{conv4_1:t,conv4_2:r})},extractRNetParams:function(){var e=i([3,28,48,64],"rnet",!0),t=r(576,128,"rnet/fc1"),n=o(128,"rnet/prelu4_alpha"),a=r(128,2,"rnet/fc2_1"),u=r(128,4,"rnet/fc2_2");return Tx(Tx({},e),{fc1:t,prelu4_alpha:n,fc2_1:a,fc2_2:u})},extractONetParams:function(){var e=i([3,32,64,64],"onet"),t=n(64,128,2,"onet/conv4"),a=o(128,"onet/prelu4_alpha"),u=r(1152,256,"onet/fc1"),s=o(256,"onet/prelu5_alpha"),c=r(256,2,"onet/fc2_1"),l=r(256,4,"onet/fc2_2"),f=r(256,10,"onet/fc2_3");return Tx(Tx({},e),{conv4:t,prelu4_alpha:a,fc1:u,prelu5_alpha:s,fc2_1:c,fc2_2:l,fc2_3:f})}}}(n,o),a=i.extractPNetParams,u=i.extractRNetParams,s=i.extractONetParams,c=a(),l=u(),f=s();if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:c,rnet:l,onet:f},paramMappings:o}}function oC(e){var t=[],n=function(e,t){var n=Gw(e,t);function r(e){return{filters:n(e+"/weights",4,e+"/filters"),bias:n(e+"/bias",1)}}function o(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}function i(e){return n(e,1)}function a(e){return{conv1:r(e+"/conv1"),prelu1_alpha:i(e+"/prelu1_alpha"),conv2:r(e+"/conv2"),prelu2_alpha:i(e+"/prelu2_alpha"),conv3:r(e+"/conv3"),prelu3_alpha:i(e+"/prelu3_alpha")}}return{extractPNetParams:function(){var e=a("pnet"),t=r("pnet/conv4_1"),n=r("pnet/conv4_2");return Tx(Tx({},e),{conv4_1:t,conv4_2:n})},extractRNetParams:function(){var e=a("rnet"),t=o("rnet/fc1"),n=i("rnet/prelu4_alpha"),r=o("rnet/fc2_1"),u=o("rnet/fc2_2");return Tx(Tx({},e),{fc1:t,prelu4_alpha:n,fc2_1:r,fc2_2:u})},extractONetParams:function(){var e=a("onet"),t=r("onet/conv4"),n=i("onet/prelu4_alpha"),u=o("onet/fc1"),s=i("onet/prelu5_alpha"),c=o("onet/fc2_1"),l=o("onet/fc2_2"),f=o("onet/fc2_3");return Tx(Tx({},e),{conv4:t,prelu4_alpha:n,fc1:u,prelu5_alpha:s,fc2_1:c,fc2_2:l,fc2_3:f})}}}(e,t),r=n.extractPNetParams,o=n.extractRNetParams,i=n.extractONetParams,a=r(),u=o(),s=i();return Bw(e,t),{params:{pnet:a,rnet:u,onet:s},paramMappings:t}}function iC(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}var aC=function(e){function t(t,n,r,o){return e.call(this,{left:t,top:n,right:r,bottom:o},!0)||this}return Ox(t,e),t}(Ux);function uC(e){return il((function(){return Im(Lm(e,Tl(127.5)),Tl(.0078125))}))}function sC(e,t){return il((function(){return ym(Yg(e),Im(t,Fv(Yg(Fv(e)))))}))}function cC(e,t,n){return void 0===n&&(n=!1),il((function(){var r=jw(e,t.conv1,"valid");return r=sC(r,t.prelu1_alpha),r=sC(r=jw(r=kg(r,n?[2,2]:[3,3],[2,2],"same"),t.conv2,"valid"),t.prelu2_alpha),r=sC(r=jw(r=n?r:kg(r,[3,3],[2,2],"valid"),t.conv3,"valid"),t.prelu3_alpha)}))}function lC(e,t,n,r,o){o.stage1=[];var i=t.map((function(t){return il((function(){var n={scale:t},o=function(e,t){return il((function(){var n=iC(t,e.shape.slice(1)),r=n.height,o=n.width,i=uC(Gy.resizeBilinear(e,[r,o]));return Jg(i,[0,2,1,3])}))}(e,t),i=Date.now(),a=function(e,t){return il((function(){var n=cC(e,t,!0),r=jw(n,t.conv4_1,"valid"),o=ff(zg(r,3),3);return{prob:Xf(Lm(r,o),3),regions:jw(n,t.conv4_2,"valid")}}))}(o,r),u=a.prob,s=a.regions;return n.pnet=Date.now()-i,{scoresTensor:Rf(Rf(u,3)[1])[0],regionsTensor:Rf(s)[0],scale:t,statsForScale:n}}))})),a=i.map((function(e){var t=e.scoresTensor,r=e.regionsTensor,i=e.scale,a=e.statsForScale,u=function(e,t,n,r){for(var o=[],i=e.arraySync(),a=0;a<e.shape[0];a++)for(var u=0;u<e.shape[1];u++)i[a][u]>=r&&o.push(new Wx(u,a));return o.map((function(e){var r=new Hx(Math.round((2*e.y+1)/n),Math.round((2*e.x+1)/n),Math.round((2*e.y+12)/n),Math.round((2*e.x+12)/n)),o=i[e.y][e.x],a=t.arraySync();return{cell:r,score:o,region:new aC(a[e.y][e.x][0],a[e.y][e.x][1],a[e.y][e.x][2],a[e.y][e.x][3])}}))}(t,r,i,n);if(t.dispose(),r.dispose(),!u.length)return o.stage1.push(a),[];var s=Date.now(),c=$x(u.map((function(e){return e.cell})),u.map((function(e){return e.score})),.5);return a.nms=Date.now()-s,a.numBoxes=c.length,o.stage1.push(a),c.map((function(e){return u[e]}))})),u=a.reduce((function(e,t){return e.concat(t)}),[]),s=[],c=[];if(u.length>0){var l=Date.now(),f=$x(u.map((function(e){return e.cell})),u.map((function(e){return e.score})),.7);o.stage1_nms=Date.now()-l,c=f.map((function(e){return u[e].score})),s=f.map((function(e){return u[e]})).map((function(e){var t=e.cell,n=e.region;return new Hx(t.left+n.left*t.width,t.top+n.top*t.height,t.right+n.right*t.width,t.bottom+n.bottom*t.height).toSquare().round()}))}return{boxes:s,scores:c}}function fC(e,t,n){var r=n.width,o=n.height;return Ax(this,void 0,void 0,(function(){var n,i,a,u=this;return Rx(this,(function(s){switch(s.label){case 0:return n=mw(e),[4,Promise.all(t.map((function(t){return Ax(u,void 0,void 0,(function(){var r,o,i,a,u,s,c,l;return Rx(this,(function(f){return r=t.padAtBorders(e.height,e.width),o=r.y,i=r.ey,a=r.x,u=r.ex,s=a-1,c=o-1,l=n.getImageData(s,c,u-s,i-c),[2,hw.isNodejs()?Cw(l):createImageBitmap(l)]}))}))})))];case 1:return i=s.sent(),a=[],i.forEach((function(e){var t=mw(Ew({width:r,height:o}));t.drawImage(e,0,0,r,o);for(var n=t.getImageData(0,0,r,o).data,i=[],u=0;u<n.length;u+=4)i.push(n[u+2]),i.push(n[u+1]),i.push(n[u]);a.push(i)})),[2,a.map((function(e){return il((function(){return uC(Jg(Il(e,[1,r,o,3]),[0,2,1,3]).toFloat())}))}))]}}))}))}function dC(e,t,n,r,o){return Ax(this,void 0,void 0,(function(){var i,a,u,s,c,l,f,d,p,h,v,m,g,y;return Rx(this,(function(b){switch(b.label){case 0:return i=Date.now(),[4,fC(e,t,{width:24,height:24})];case 1:return a=b.sent(),o.stage2_extractImagePatches=Date.now()-i,i=Date.now(),u=a.map((function(e){var t=function(e,t){return il((function(){var n=cC(e,t),r=sC(Qw(_f(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu4_alpha),o=Qw(r,t.fc2_1),i=ff(zg(o,1),1),a=Xf(Lm(o,i),1),u=Qw(r,t.fc2_2);return{scores:Rf(a,1)[1],regions:u}}))}(e,r);return e.dispose(),t})),o.stage2_rnet=Date.now()-i,s=u.length>1?Bl(u.map((function(e){return e.scores}))):u[0].scores,f=(l=Array).from,[4,s.data()];case 2:return c=f.apply(l,[b.sent()]),s.dispose(),d=c.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){return e.idx})),p=d.map((function(e){return t[e]})),h=d.map((function(e){return c[e]})),v=[],m=[],p.length>0&&(i=Date.now(),g=$x(p,h,.7),o.stage2_nms=Date.now()-i,y=g.map((function(e){var t=u[d[e]].regions.arraySync();return new aC(t[0][0],t[0][1],t[0][2],t[0][3])})),m=g.map((function(e){return h[e]})),v=g.map((function(e,t){return p[e].calibrate(y[t])}))),u.forEach((function(e){e.regions.dispose(),e.scores.dispose()})),[2,{boxes:v,scores:m}]}}))}))}function pC(e,t,n,r,o){return Ax(this,void 0,void 0,(function(){var i,a,u,s,c,l,f,d,p,h,v,m,g,y,b;return Rx(this,(function(x){switch(x.label){case 0:return i=Date.now(),[4,fC(e,t,{width:48,height:48})];case 1:return a=x.sent(),o.stage3_extractImagePatches=Date.now()-i,i=Date.now(),u=a.map((function(e){var t=function(e,t){return il((function(){var n=cC(e,t);n=sC(n=jw(n=kg(n,[2,2],[2,2],"same"),t.conv4,"valid"),t.prelu4_alpha);var r=sC(Qw(_f(n,[n.shape[0],t.fc1.weights.shape[0]]),t.fc1),t.prelu5_alpha),o=Qw(r,t.fc2_1),i=ff(zg(o,1),1),a=Xf(Lm(o,i),1),u=Qw(r,t.fc2_2),s=Qw(r,t.fc2_3);return{scores:Rf(a,1)[1],regions:u,points:s}}))}(e,r);return e.dispose(),t})),o.stage3_onet=Date.now()-i,s=u.length>1?Bl(u.map((function(e){return e.scores}))):u[0].scores,f=(l=Array).from,[4,s.data()];case 2:return c=f.apply(l,[x.sent()]),s.dispose(),d=c.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){return e.idx})),p=d.map((function(e){var t=u[e].regions.arraySync();return new aC(t[0][0],t[0][1],t[0][2],t[0][3])})),h=d.map((function(e,n){return t[e].calibrate(p[n])})),v=d.map((function(e){return c[e]})),m=[],g=[],y=[],h.length>0&&(i=Date.now(),b=$x(h,v,.7,!1),o.stage3_nms=Date.now()-i,m=b.map((function(e){return h[e]})),g=b.map((function(e){return v[e]})),y=b.map((function(e,t){return Array(5).fill(0).map((function(n,r){var o=u[e].points.arraySync();return new Wx(o[0][r]*(m[t].width+1)+m[t].left,o[0][r+5]*(m[t].height+1)+m[t].top)}))}))),u.forEach((function(e){e.regions.dispose(),e.scores.dispose(),e.points.dispose()})),[2,{boxes:m,scores:g,points:y}]}}))}))}var hC=function(e){function t(){return e.call(this,"Mtcnn")||this}return Ox(t,e),t.prototype.load=function(t){return Ax(this,void 0,void 0,(function(){return Rx(this,(function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,t)]}))}))},t.prototype.loadFromDisk=function(t){return Ax(this,void 0,void 0,(function(){return Rx(this,(function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,t)]}))}))},t.prototype.forwardInput=function(e,t){return void 0===t&&(t={}),Ax(this,void 0,void 0,(function(){var n,r,o,i,a,u,s,c,l,f,d,p,h,v,m,g,y,b,x,w,E;return Rx(this,(function(C){switch(C.label){case 0:if(!(n=this.params))throw new Error("Mtcnn - load model before inference");if(!(r=e.canvases[0]))throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},i=Date.now(),a=il((function(){return e=ff(lx.fromPixels(r)).toFloat(),il((function(){return Of(Rf(e,3).reverse(),3)}));var e})),u=function(e){return a.dispose(),o.total=Date.now()-i,e},s=a.shape.slice(1),c=s[0],l=s[1],f=new AE(t),d=f.minFaceSize,p=f.scaleFactor,h=f.maxNumScales,v=f.scoreThresholds,m=f.scaleSteps,g=(m||function(e,t,n){for(var r=n[0],o=n[1],i=12/e,a=[],u=Math.min(r,o)*i,s=0;u>=12;)a.push(i*Math.pow(t,s)),u*=t,s+=1;return a}(d,p,[c,l])).filter((function(e){var t=iC(e,[c,l]);return Math.min(t.width,t.height)>12})).slice(0,h),o.scales=g,o.pyramid=g.map((function(e){return iC(e,[c,l])})),y=Date.now(),[4,lC(a,g,v[0],n.pnet,o)];case 1:return b=C.sent(),o.total_stage1=Date.now()-y,b.boxes.length?(o.stage2_numInputBoxes=b.boxes.length,y=Date.now(),[4,dC(r,b.boxes,v[1],n.rnet,o)]):[2,u({results:[],stats:o})];case 2:return x=C.sent(),o.total_stage2=Date.now()-y,x.boxes.length?(o.stage3_numInputBoxes=x.boxes.length,y=Date.now(),[4,pC(r,x.boxes,v[2],n.onet,o)]):[2,u({results:[],stats:o})];case 3:return w=C.sent(),o.total_stage3=Date.now()-y,E=w.boxes.map((function(e,t){return iE(iw({},new qx(w.scores[t],new Zx(e.left/l,e.top/c,e.width/l,e.height/c),{height:c,width:l})),new ew(w.points[t].map((function(t){return t.sub(new Wx(e.left,e.top)).div(new Wx(e.width,e.height))})),{width:e.width,height:e.height}))})),[2,u({results:E,stats:o})]}}))}))},t.prototype.forward=function(e,t){return void 0===t&&(t={}),Ax(this,void 0,void 0,(function(){var n;return Rx(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Ow(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent().results]}}))}))},t.prototype.forwardWithStats=function(e,t){return void 0===t&&(t={}),Ax(this,void 0,void 0,(function(){var n;return Rx(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,Ow(e)];case 1:return[2,n.apply(this,[r.sent(),t])]}}))}))},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(e){return oC(e)},t.prototype.extractParams=function(e){return rC(e)},t}(Dw),vC=[new Wx(1.603231,2.094468),new Wx(6.041143,7.080126),new Wx(2.882459,3.518061),new Wx(4.266906,5.178857),new Wx(9.041765,10.66308)],mC=[117.001,114.697,97.404],gC=function(e){function t(){var t={withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:vC,meanRgb:mC,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return e.call(this,t)||this}return Ox(t,e),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return Ax(this,void 0,void 0,(function(){return Rx(this,(function(n){switch(n.label){case 0:return[4,this.detect(e,t)];case 1:return[2,n.sent().map((function(e){return new qx(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(YE),yC={ssdMobilenetv1:new jE,tinyFaceDetector:new gC,tinyYolov2:new QE,mtcnn:new hC,faceLandmark68Net:new mE,faceLandmark68TinyNet:new yE,faceRecognitionNet:new OE,faceExpressionNet:new nE,ageGenderNet:new hE};function bC(e,t){var n={age:t};return Object.assign({},e,n)}var xC=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parentTask=t,o.input=n,o.extractedFaces=r,o}return Ox(t,e),t}(JE),wC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ox(t,e),t.prototype.run=function(){return Ax(this,void 0,void 0,(function(){var e,t,n=this;return Rx(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,tC(e=r.sent(),this.input,(function(e){return Ax(n,void 0,void 0,(function(){return Rx(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return yC.faceExpressionNet.predictExpressions(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){return rE(e,t[n])}))]}}))}))},t.prototype.withAgeAndGender=function(){return new SC(this,this.input)},t}(xC),EC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ox(t,e),t.prototype.run=function(){return Ax(this,void 0,void 0,(function(){var e,t;return Rx(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,nC(e,this.input,(function(e){return yC.faceExpressionNet.predictExpressions(e)}),this.extractedFaces)]:[2];case 2:return t=n.sent(),[2,rE(e,t)]}}))}))},t.prototype.withAgeAndGender=function(){return new OC(this,this.input)},t}(xC),CC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ox(t,e),t.prototype.withAgeAndGender=function(){return new TC(this,this.input)},t.prototype.withFaceDescriptors=function(){return new NC(this,this.input)},t}(wC),_C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ox(t,e),t.prototype.withAgeAndGender=function(){return new AC(this,this.input)},t.prototype.withFaceDescriptor=function(){return new IC(this,this.input)},t}(EC),kC=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parentTask=t,o.input=n,o.extractedFaces=r,o}return Ox(t,e),t}(JE),SC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ox(t,e),t.prototype.run=function(){return Ax(this,void 0,void 0,(function(){var e,t,n=this;return Rx(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return[4,tC(e=r.sent(),this.input,(function(e){return Ax(n,void 0,void 0,(function(){return Rx(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return yC.ageGenderNet.predictAgeAndGender(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){var r=t[n],o=r.age;return bC(TE(e,r.gender,r.genderProbability),o)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new wC(this,this.input)},t}(kC),OC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ox(t,e),t.prototype.run=function(){return Ax(this,void 0,void 0,(function(){var e,t,n,r,o;return Rx(this,(function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return(e=i.sent())?[4,nC(e,this.input,(function(e){return yC.ageGenderNet.predictAgeAndGender(e)}),this.extractedFaces)]:[2];case 2:return t=i.sent(),n=t.age,r=t.gender,o=t.genderProbability,[2,bC(TE(e,r,o),n)]}}))}))},t.prototype.withFaceExpressions=function(){return new EC(this,this.input)},t}(kC),TC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ox(t,e),t.prototype.withFaceExpressions=function(){return new CC(this,this.input)},t.prototype.withFaceDescriptors=function(){return new NC(this,this.input)},t}(SC),AC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ox(t,e),t.prototype.withFaceExpressions=function(){return new _C(this,this.input)},t.prototype.withFaceDescriptor=function(){return new IC(this,this.input)},t}(OC),RC=function(e){function t(t,n){var r=e.call(this)||this;return r.parentTask=t,r.input=n,r}return Ox(t,e),t}(JE),NC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ox(t,e),t.prototype.run=function(){return Ax(this,void 0,void 0,(function(){var e;return Rx(this,(function(t){switch(t.label){case 0:return[4,this.parentTask];case 1:return[4,tC(e=t.sent(),this.input,(function(e){return Promise.all(e.map((function(e){return yC.faceRecognitionNet.computeFaceDescriptor(e)})))}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))];case 2:return[2,t.sent().map((function(t,n){return eC(e[n],t)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new CC(this,this.input)},t.prototype.withAgeAndGender=function(){return new TC(this,this.input)},t}(RC),IC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ox(t,e),t.prototype.run=function(){return Ax(this,void 0,void 0,(function(){var e,t;return Rx(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return(e=n.sent())?[4,nC(e,this.input,(function(e){return yC.faceRecognitionNet.computeFaceDescriptor(e)}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))]:[2];case 2:return t=n.sent(),[2,eC(e,t)]}}))}))},t.prototype.withFaceExpressions=function(){return new _C(this,this.input)},t.prototype.withAgeAndGender=function(){return new AC(this,this.input)},t}(RC),PC=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parentTask=t,o.input=n,o.useTinyLandmarkNet=r,o}return Ox(t,e),Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?yC.faceLandmark68TinyNet:yC.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(JE),DC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ox(t,e),t.prototype.run=function(){return Ax(this,void 0,void 0,(function(){var e,t,n,r,o,i=this;return Rx(this,(function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return e=a.sent(),t=e.map((function(e){return e.detection})),this.input instanceof Ls?[4,Aw(this.input,t)]:[3,3];case 2:return r=a.sent(),[3,5];case 3:return[4,Tw(this.input,t)];case 4:r=a.sent(),a.label=5;case 5:return n=r,[4,Promise.all(n.map((function(e){return i.landmarkNet.detectLandmarks(e)})))];case 6:return o=a.sent(),n.forEach((function(e){return e instanceof Ls&&e.dispose()})),[2,e.map((function(e,t){return iE(e,o[t])}))]}}))}))},t.prototype.withFaceExpressions=function(){return new CC(this,this.input)},t.prototype.withAgeAndGender=function(){return new TC(this,this.input)},t.prototype.withFaceDescriptors=function(){return new NC(this,this.input)},t}(PC),MC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ox(t,e),t.prototype.run=function(){return Ax(this,void 0,void 0,(function(){var e,t,n,r,o;return Rx(this,(function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return(e=i.sent())?(t=e.detection,this.input instanceof Ls?[4,Aw(this.input,[t])]:[3,3]):[2];case 2:return r=i.sent(),[3,5];case 3:return[4,Tw(this.input,[t])];case 4:r=i.sent(),i.label=5;case 5:return n=r,[4,this.landmarkNet.detectLandmarks(n[0])];case 6:return o=i.sent(),n.forEach((function(e){return e instanceof Ls&&e.dispose()})),[2,iE(e,o)]}}))}))},t.prototype.withFaceExpressions=function(){return new _C(this,this.input)},t.prototype.withAgeAndGender=function(){return new AC(this,this.input)},t.prototype.withFaceDescriptor=function(){return new IC(this,this.input)},t}(PC),FC=function(e){function t(t,n){void 0===n&&(n=new LE);var r=e.call(this)||this;return r.input=t,r.options=n,r}return Ox(t,e),t}(JE),LC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ox(t,e),t.prototype.run=function(){return Ax(this,void 0,void 0,(function(){var e,t,n,r;return Rx(this,(function(o){switch(o.label){case 0:return t=(e=this).input,(n=e.options)instanceof AE?[4,yC.mtcnn.forward(t,n)]:[3,2];case 1:return[2,o.sent().map((function(e){return e.detection}))];case 2:if(r=n instanceof ZE?function(e){return yC.tinyFaceDetector.locateFaces(e,n)}:n instanceof LE?function(e){return yC.ssdMobilenetv1.locateFaces(e,n)}:n instanceof XE?function(e){return yC.tinyYolov2.locateFaces(e,n)}:null,!r)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,r(t)]}}))}))},t.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise((function(t){return Ax(e,void 0,void 0,(function(){var e;return Rx(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e.map((function(e){return iw({},e)})))]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new DC(this.runAndExtendWithFaceDetections(),this.input,e)},t.prototype.withFaceExpressions=function(){return new wC(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new SC(this.runAndExtendWithFaceDetections(),this.input)},t}(FC),jC=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ox(t,e),t.prototype.run=function(){return Ax(this,void 0,void 0,(function(){var e,t;return Rx(this,(function(n){switch(n.label){case 0:return[4,new LC(this.input,this.options)];case 1:return e=n.sent(),t=e[0],e.forEach((function(e){e.score>t.score&&(t=e)})),[2,t]}}))}))},t.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise((function(t){return Ax(e,void 0,void 0,(function(){var e;return Rx(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e?iw({},e):void 0)]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new MC(this.runAndExtendWithFaceDetection(),this.input,e)},t.prototype.withFaceExpressions=function(){return new EC(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new OC(this.runAndExtendWithFaceDetection(),this.input)},t}(FC);function BC(e,t){return void 0===t&&(t=new LE),new jC(e,t)}!function(){function e(e,t){void 0===t&&(t=.6),this._distanceThreshold=t;var n=Array.isArray(e)?e:[e];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var r=1,o=function(){return"person "+r++};this._labeledDescriptors=n.map((function(e){if(e instanceof ow)return e;if(e instanceof Float32Array)return new ow(o(),[e]);if(e.descriptor&&e.descriptor instanceof Float32Array)return new ow(o(),[e.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")}))}Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(e,t){return t.map((function(t){return function(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map((function(e,t){return e-r[t]})).reduce((function(e,t){return e+Math.pow(t,2)}),0))}(t,e)})).reduce((function(e,t){return e+t}),0)/(t.length||1)},e.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map((function(n){var r=n.descriptors,o=n.label;return new nw(o,t.computeMeanDistance(e,r))})).reduce((function(e,t){return e.distance<t.distance?e:t}))},e.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new nw("unknown",t.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map((function(e){return e.toJSON()}))}},e.fromJSON=function(t){var n=t.labeledDescriptors.map((function(e){return ow.fromJSON(e)}));return new e(n,t.distanceThreshold)}}();var VC,zC,WC,UC,HC=n(6207),GC=n.n(HC),qC=n(1527),KC=n.n(qC),$C={alertStudySeconds:1500,alertRestSeconds:300,notificationIntervalSeconds:60,notificationIntervalMultiplier:2,tempMissingSeconds:30,maxLocalStorageTimeSlot:100,faceRecognition:{detectionInterval:5,modelInputSize:128,scoreThreshold:.25,showFaceRecognitionStatus:!0},cameraHidden:!0,enableDetection:!0},XC=e.createContext($C),YC=n(6417);function QC(e){return(0,YC.jsx)("div",{children:(0,YC.jsxs)("p",{className:Pe(VC||(VC=r(["\n        text-align: left;\n        padding: 5px 10px;\n        margin: 0 auto;\n        "]))),children:[" ",e.msg+" ",e.status?(0,YC.jsx)(GC(),{style:{color:"#1faa00"}}):(0,YC.jsx)(KC(),{style:{color:"#a30000"}})]})})}function ZC(e,t,n){return(0,YC.jsxs)("div",{className:Pe(zC||(zC=r(["\n      display: flex;\n      flex-wrap: wrap;\n      justify-content: space-between;\n    "]))),children:[(0,YC.jsx)(QC,{msg:"Camera Supported:",status:e}),(0,YC.jsx)(QC,{msg:"Face Detected:",status:t}),(0,YC.jsx)(QC,{msg:"Model Loaded:",status:n})]})}var JC=function(t){var n=(0,e.useContext)(XC),o=s((0,e.useState)(!1),2),i=o[0],a=o[1],u=(0,e.useRef)(null),c=s((0,e.useState)(!1),2),f=c[0],d=c[1],p=s((0,e.useState)("mediaDevices"in navigator),1)[0],h=t.onFaceDetectionResult,v=n.faceRecognition.detectionInterval,m=n.faceRecognition.modelInputSize,g=n.faceRecognition.scoreThreshold,y=n.enableDetection;l((function(){function e(){return(e=st(at().mark((function e(){var t,n;return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,BC(u.current.video,new ZE({inputSize:m,scoreThreshold:g}));case 2:if(void 0===(t=e.sent)){e.next=6;break}return t.name="Tiny",e.abrupt("return",t);case 6:return e.next=8,BC(u.current.video,new LE({minConfidence:g}));case 8:return void 0!==(n=e.sent)&&(n.name="SSD"),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}y&&i&&function(){return e.apply(this,arguments)}().then((function(e){h(e),d(e)}))}),1e3*v,!0),(0,e.useEffect)((function(){var e=function(){var e=st(at().mark((function e(){var t;return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="/face-recognition-pomodoro/models",Promise.all([yC.tinyFaceDetector.loadFromUri(t),yC.ssdMobilenetv1.loadFromUri(t)]).then((function(){a(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var b=n.cameraHidden?"1px":"100%";return(0,YC.jsxs)(YC.Fragment,{children:[y&&n.faceRecognition.showFaceRecognitionStatus?ZC(p,f,i):(0,YC.jsx)(YC.Fragment,{}),y?(0,YC.jsx)(YC.Fragment,{children:(0,YC.jsx)("div",{className:Pe(WC||(WC=r(["\n      display: block; \n      width:100%;\n      "]))),children:(0,YC.jsx)("div",{className:Pe(UC||(UC=r(["\n          height: ",";\n          width: ",";\n          overflow: hidden;\n          margin: 10px auto;\n          display: flex;\n          justify-content: center;\n        "])),b,b),children:(0,YC.jsx)(Cu(),{audio:!1,ref:u,screenshotFormat:"image/jpeg",videoConstraints:{facingMode:"user"}})})})}):(0,YC.jsx)(YC.Fragment,{})]})},e_=n(1465),t_=n.n(e_);var n_=function(t){var n=(0,e.useRef)(null),r=(0,e.useRef)(null),o=t.startTime;return(0,e.useEffect)((function(){null===r.current&&(r.current=new(t_())(n.current,new Date(o),{face:"HourCounter",showLabels:!1}),r.current.originalValue=new Date(o),r.current.value=new Date,r.current.start()),(o!==r.current.originalValue.toJSON()||Math.abs(new Date-r.current.value.value)>1e3)&&(r.current.originalValue=new Date(o),r.current.value=new Date)})),(0,YC.jsx)("div",{ref:n})},r_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},o_=function(t){var n=t.prefixCls,r=t.className,o=t.hoverable,i=void 0===o||o,a=r_(t,["prefixCls","className","hoverable"]);return e.createElement(kr,null,(function(t){var o=(0,t.getPrefixCls)("card",n),u=Ct()("".concat(o,"-grid"),r,qe({},"".concat(o,"-grid-hoverable"),i));return e.createElement("div",Ge({},a,{className:u}))}))},i_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},a_=function(t){return e.createElement(kr,null,(function(n){var r=n.getPrefixCls,o=t.prefixCls,i=t.className,a=t.avatar,u=t.title,s=t.description,c=i_(t,["prefixCls","className","avatar","title","description"]),l=r("card",o),f=Ct()("".concat(l,"-meta"),i),d=a?e.createElement("div",{className:"".concat(l,"-meta-avatar")},a):null,p=u?e.createElement("div",{className:"".concat(l,"-meta-title")},u):null,h=s?e.createElement("div",{className:"".concat(l,"-meta-description")},s):null,v=p||h?e.createElement("div",{className:"".concat(l,"-meta-detail")},p,h):null;return e.createElement("div",Ge({},c,{className:f}),d,v)}))};function u_(e,t){var n=Xe({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}var s_=function(){if("undefined"===typeof navigator||"undefined"===typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null===e||void 0===e?void 0:e.substr(0,4)))};function c_(t,n){var r=n||{},o=r.defaultValue,i=r.value,a=r.onChange,u=r.postState,c=s(Zt((function(){return void 0!==i?i:void 0!==o?"function"===typeof o?o():o:"function"===typeof t?t():t})),2),l=c[0],f=c[1],d=void 0!==i?i:l;u&&(d=u(d));var p=e.useRef(a);p.current=a;var h=e.useCallback((function(e,t){f(e,t),d!==e&&p.current&&p.current(e,d)}),[d,p]),v=e.useRef(i);return e.useEffect((function(){void 0===i&&i!==v.current&&f(i),v.current=i}),[i]),[d,h]}var l_=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),f_="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,d_="undefined"!==typeof n.g&&n.g.Math===Math?n.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),p_="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(d_):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var h_=["top","right","bottom","left","width","height","size","weight"],v_="undefined"!==typeof MutationObserver,m_=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function i(){n&&(n=!1,e()),r&&u()}function a(){p_(i)}function u(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(a,t);o=e}return u}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){f_&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),v_?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){f_&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t,r=h_.some((function(e){return!!~n.indexOf(e)}));r&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),g_=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},y_=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||d_},b_=k_(0,0,0,0);function x_(e){return parseFloat(e)||0}function w_(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+x_(e["border-"+n+"-width"])}),0)}function E_(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return b_;var r=y_(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],i=e["padding-"+o];t[o]=x_(i)}return t}(r),i=o.left+o.right,a=o.top+o.bottom,u=x_(r.width),s=x_(r.height);if("border-box"===r.boxSizing&&(Math.round(u+i)!==t&&(u-=w_(r,"left","right")+i),Math.round(s+a)!==n&&(s-=w_(r,"top","bottom")+a)),!function(e){return e===y_(e).document.documentElement}(e)){var c=Math.round(u+i)-t,l=Math.round(s+a)-n;1!==Math.abs(c)&&(u-=c),1!==Math.abs(l)&&(s-=l)}return k_(o.left,o.top,u,s)}var C_="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof y_(e).SVGGraphicsElement}:function(e){return e instanceof y_(e).SVGElement&&"function"===typeof e.getBBox};function __(e){return f_?C_(e)?function(e){var t=e.getBBox();return k_(0,0,t.width,t.height)}(e):E_(e):b_}function k_(e,t,n,r){return{x:e,y:t,width:n,height:r}}var S_=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=k_(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=__(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),O_=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,o=e.height,i="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(i.prototype);return g_(a,{x:t,y:n,width:r,height:o,top:n,right:t+r,bottom:o+n,left:t}),a}(t);g_(this,{target:e,contentRect:n})},T_=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new l_,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof y_(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new S_(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof y_(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new O_(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),A_="undefined"!==typeof WeakMap?new WeakMap:new l_,R_=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=m_.getInstance(),r=new T_(t,n,this);A_.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){R_.prototype[e]=function(){var t;return(t=A_.get(this))[e].apply(t,arguments)}}));var N_="undefined"!==typeof d_.ResizeObserver?d_.ResizeObserver:R_,I_=new Map;var P_=new N_((function(e){e.forEach((function(e){var t,n=e.target;null===(t=I_.get(n))||void 0===t||t.forEach((function(e){return e(n)}))}))}));var D_=function(e){et(n,e);var t=it(n);function n(){return Ye(this,n),t.apply(this,arguments)}return Ze(n,[{key:"render",value:function(){return this.props.children}}]),n}(e.Component),M_=e.createContext(null);function F_(t){var n=t.children,r=t.disabled,o=e.useRef(null),i=e.useRef(null),a=e.useContext(M_),u="function"===typeof n,s=u?n(o):n,c=e.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),l=!u&&e.isValidElement(s)&&At(s),f=l?s.ref:null,d=e.useMemo((function(){return Tt(f,o)}),[f,o]),p=e.useRef(t);p.current=t;var h=e.useCallback((function(e){var t=p.current,n=t.onResize,r=t.data,o=e.getBoundingClientRect(),i=o.width,u=o.height,s=e.offsetWidth,l=e.offsetHeight,f=Math.floor(i),d=Math.floor(u);if(c.current.width!==f||c.current.height!==d||c.current.offsetWidth!==s||c.current.offsetHeight!==l){var h={width:f,height:d,offsetWidth:s,offsetHeight:l};c.current=h;var v=s===Math.round(i)?i:s,m=l===Math.round(u)?u:l,g=Xe(Xe({},h),{},{offsetWidth:v,offsetHeight:m});null===a||void 0===a||a(g,e,r),n&&Promise.resolve().then((function(){n(g,e)}))}}),[]);return e.useEffect((function(){var e,t,n=_t(o.current)||_t(i.current);return n&&!r&&(e=n,t=h,I_.has(e)||(I_.set(e,new Set),P_.observe(e)),I_.get(e).add(t)),function(){return function(e,t){I_.has(e)&&(I_.get(e).delete(t),I_.get(e).size||(P_.unobserve(e),I_.delete(e)))}(n,h)}}),[o.current,r]),e.createElement(D_,{ref:i},l?e.cloneElement(s,{ref:d}):s)}function L_(t){var n=t.children;return("function"===typeof n?[n]:Sr(n)).map((function(n,r){var o=(null===n||void 0===n?void 0:n.key)||"".concat("rc-observer-key","-").concat(r);return e.createElement(F_,Ge({},t,{key:o}),n)}))}L_.Collection=function(t){var n=t.children,r=t.onBatchResize,o=e.useRef(0),i=e.useRef([]),a=e.useContext(M_),u=e.useCallback((function(e,t,n){o.current+=1;var u=o.current;i.current.push({size:e,element:t,data:n}),Promise.resolve().then((function(){u===o.current&&(null===r||void 0===r||r(i.current),i.current=[])})),null===a||void 0===a||a(e,t,n)}),[r,a]);return e.createElement(M_.Provider,{value:u},n)};var j_=L_;function B_(t){var n=(0,e.useRef)(),r=(0,e.useRef)(!1);return(0,e.useEffect)((function(){return r.current=!1,function(){r.current=!0,on.cancel(n.current)}}),[]),function(){for(var e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];r.current||(on.cancel(n.current),n.current=on((function(){t.apply(void 0,o)})))}}var V_={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=V_.F1&&t<=V_.F12)return!1;switch(t){case V_.ALT:case V_.CAPS_LOCK:case V_.CONTEXT_MENU:case V_.CTRL:case V_.DOWN:case V_.END:case V_.ESC:case V_.HOME:case V_.INSERT:case V_.LEFT:case V_.MAC_FF_META:case V_.META:case V_.NUMLOCK:case V_.NUM_CENTER:case V_.PAGE_DOWN:case V_.PAGE_UP:case V_.PAUSE:case V_.PRINT_SCREEN:case V_.RIGHT:case V_.SHIFT:case V_.UP:case V_.WIN_KEY:case V_.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=V_.ZERO&&e<=V_.NINE)return!0;if(e>=V_.NUM_ZERO&&e<=V_.NUM_MULTIPLY)return!0;if(e>=V_.A&&e<=V_.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case V_.SPACE:case V_.QUESTION_MARK:case V_.NUM_PLUS:case V_.NUM_MINUS:case V_.NUM_PERIOD:case V_.NUM_DIVISION:case V_.SEMICOLON:case V_.DASH:case V_.EQUALS:case V_.COMMA:case V_.PERIOD:case V_.SLASH:case V_.APOSTROPHE:case V_.SINGLE_QUOTE:case V_.OPEN_SQUARE_BRACKET:case V_.BACKSLASH:case V_.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},z_=V_;function W_(t,n){var r,o=t.prefixCls,i=t.id,a=t.active,u=t.tab,s=u.key,c=u.tab,l=u.disabled,f=u.closeIcon,d=t.closable,p=t.renderWrapper,h=t.removeAriaLabel,v=t.editable,m=t.onClick,g=t.onRemove,y=t.onFocus,b=t.style,x="".concat(o,"-tab");e.useEffect((function(){return g}),[]);var w=v&&!1!==d&&!l;function E(e){l||m(e)}var C=e.createElement("div",{key:s,ref:n,className:Ct()(x,(r={},qe(r,"".concat(x,"-with-remove"),w),qe(r,"".concat(x,"-active"),a),qe(r,"".concat(x,"-disabled"),l),r)),style:b,onClick:E},e.createElement("div",{role:"tab","aria-selected":a,id:i&&"".concat(i,"-tab-").concat(s),className:"".concat(x,"-btn"),"aria-controls":i&&"".concat(i,"-panel-").concat(s),"aria-disabled":l,tabIndex:l?null:0,onClick:function(e){e.stopPropagation(),E(e)},onKeyDown:function(e){[z_.SPACE,z_.ENTER].includes(e.which)&&(e.preventDefault(),E(e))},onFocus:y},c),w&&e.createElement("button",{type:"button","aria-label":h||"remove",tabIndex:0,className:"".concat(x,"-remove"),onClick:function(e){var t;e.stopPropagation(),(t=e).preventDefault(),t.stopPropagation(),v.onEdit("remove",{key:s,event:t})}},f||v.removeIcon||"\xd7"));return p?p(C):C}var U_=e.forwardRef(W_),H_={width:0,height:0,left:0,top:0};var G_={width:0,height:0,left:0,top:0,right:0};var q_=n(9767),K_=n.n(q_),$_=Rt()?e.useLayoutEffect:e.useEffect,X_=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Y_=void 0;function Q_(t,n){var r=t.prefixCls,o=t.invalidate,i=t.item,a=t.renderItem,u=t.responsive,s=t.responsiveDisabled,c=t.registerSize,l=t.itemKey,f=t.className,d=t.style,p=t.children,h=t.display,v=t.order,m=t.component,g=void 0===m?"div":m,y=Ke(t,X_),b=u&&!h;function x(e){c(l,e)}e.useEffect((function(){return function(){x(null)}}),[]);var w,E=a&&i!==Y_?a(i):p;o||(w={opacity:b?0:1,height:b?0:Y_,overflowY:b?"hidden":Y_,order:u?v:Y_,pointerEvents:b?"none":Y_,position:b?"absolute":Y_});var C={};b&&(C["aria-hidden"]=!0);var _=e.createElement(g,Ge({className:Ct()(!o&&r,f),style:Xe(Xe({},w),d)},C,y,{ref:n}),E);return u&&(_=e.createElement(j_,{onResize:function(e){x(e.offsetWidth)},disabled:s},_)),_}var Z_=e.forwardRef(Q_);Z_.displayName="Item";var J_=Z_;var ek=["component"],tk=["className"],nk=["className"],rk=function(t,n){var r=e.useContext(uk);if(!r){var o=t.component,i=void 0===o?"div":o,a=Ke(t,ek);return e.createElement(i,Ge({},a,{ref:n}))}var u=r.className,s=Ke(r,tk),c=t.className,l=Ke(t,nk);return e.createElement(uk.Provider,{value:null},e.createElement(J_,Ge({ref:n,className:Ct()(u,c)},s,l)))},ok=e.forwardRef(rk);ok.displayName="RawItem";var ik=ok,ak=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],uk=e.createContext(null),sk="responsive",ck="invalidate";function lk(e){return"+ ".concat(e.length," ...")}function fk(t,n){var r=t.prefixCls,o=void 0===r?"rc-overflow":r,i=t.data,a=void 0===i?[]:i,u=t.renderItem,c=t.renderRawItem,l=t.itemKey,f=t.itemWidth,d=void 0===f?10:f,p=t.ssr,h=t.style,v=t.className,m=t.maxCount,g=t.renderRest,y=t.renderRawRest,b=t.suffix,x=t.component,w=void 0===x?"div":x,E=t.itemComponent,C=t.onVisibleChange,_=Ke(t,ak),k=function(){var t=s(Zt({}),2)[1],n=(0,e.useRef)([]),r=0,o=0;return function(e){var i=r;return r+=1,n.current.length<i+1&&(n.current[i]=e),[n.current[i],function(e){n.current[i]="function"===typeof e?e(n.current[i]):e,on.cancel(o),o=on((function(){t({},!0)}))}]}}(),S="full"===p,O=s(k(null),2),T=O[0],A=O[1],R=T||0,N=s(k(new Map),2),I=N[0],P=N[1],D=s(k(0),2),M=D[0],F=D[1],L=s(k(0),2),j=L[0],B=L[1],V=s(k(0),2),z=V[0],W=V[1],U=s((0,e.useState)(null),2),H=U[0],G=U[1],q=s((0,e.useState)(null),2),K=q[0],$=q[1],X=e.useMemo((function(){return null===K&&S?Number.MAX_SAFE_INTEGER:K||0}),[K,T]),Y=s((0,e.useState)(!1),2),Q=Y[0],Z=Y[1],J="".concat(o,"-item"),ee=Math.max(M,j),te=m===sk,ne=a.length&&te,re=m===ck,oe=ne||"number"===typeof m&&a.length>m,ie=(0,e.useMemo)((function(){var e=a;return ne?e=null===T&&S?a:a.slice(0,Math.min(a.length,R/d)):"number"===typeof m&&(e=a.slice(0,m)),e}),[a,d,T,m,ne]),ae=(0,e.useMemo)((function(){return ne?a.slice(X+1):a.slice(ie.length)}),[a,ie,ne,X]),ue=(0,e.useCallback)((function(e,t){var n;return"function"===typeof l?l(e):null!==(n=l&&(null===e||void 0===e?void 0:e[l]))&&void 0!==n?n:t}),[l]),se=(0,e.useCallback)(u||function(e){return e},[u]);function ce(e,t){$(e),t||(Z(e<a.length-1),null===C||void 0===C||C(e))}function le(e,t){P((function(n){var r=new Map(n);return null===t?r.delete(e):r.set(e,t),r}))}function fe(e){return I.get(ue(ie[e],e))}$_((function(){if(R&&ee&&ie){var e=z,t=ie.length,n=t-1;if(!t)return ce(0),void G(null);for(var r=0;r<t;r+=1){var o=fe(r);if(S&&(o=o||0),void 0===o){ce(r-1,!0);break}if(e+=o,0===n&&e<=R||r===n-1&&e+fe(n)<=R){ce(n),G(null);break}if(e+ee>R){ce(r-1),G(e-o-z+j);break}}b&&fe(0)+z>R&&G(null)}}),[R,I,j,z,ue,ie]);var de=Q&&!!ae.length,pe={};null!==H&&ne&&(pe={position:"absolute",left:H,top:0});var he,ve={prefixCls:J,responsive:ne,component:E,invalidate:re},me=c?function(t,n){var r=ue(t,n);return e.createElement(uk.Provider,{key:r,value:Xe(Xe({},ve),{},{order:n,item:t,itemKey:r,registerSize:le,display:n<=X})},c(t,n))}:function(t,n){var r=ue(t,n);return e.createElement(J_,Ge({},ve,{order:n,key:r,item:t,renderItem:se,itemKey:r,registerSize:le,display:n<=X}))},ge={order:de?X:Number.MAX_SAFE_INTEGER,className:"".concat(J,"-rest"),registerSize:function(e,t){B(t),F(j)},display:de};if(y)y&&(he=e.createElement(uk.Provider,{value:Xe(Xe({},ve),ge)},y(ae)));else{var ye=g||lk;he=e.createElement(J_,Ge({},ve,ge),"function"===typeof ye?ye(ae):ye)}var be=e.createElement(w,Ge({className:Ct()(!re&&o,v),style:h,ref:n},_),ie.map(me),oe?he:null,b&&e.createElement(J_,Ge({},ve,{responsive:te,responsiveDisabled:!ne,order:X,className:"".concat(J,"-suffix"),registerSize:function(e,t){W(t)},display:!0,style:pe}),b));return te&&(be=e.createElement(j_,{onResize:function(e,t){A(t.clientWidth)},disabled:!ne},be)),be}var dk=e.forwardRef(fk);dk.displayName="Overflow",dk.Item=ik,dk.RESPONSIVE=sk,dk.INVALIDATE=ck;var pk=dk,hk=["children","locked"],vk=e.createContext(null);function mk(t){var n=t.children,r=t.locked,o=Ke(t,hk),i=e.useContext(vk),a=St((function(){return function(e,t){var n=Xe({},e);return Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}(i,o)}),[i,o],(function(e,t){return!r&&(e[0]!==t[0]||!K_()(e[1],t[1]))}));return e.createElement(vk.Provider,{value:a},n)}function gk(t,n,r,o){var i=e.useContext(vk),a=i.activeKey,u=i.onActive,s=i.onInactive,c={active:a===t};return n||(c.onMouseEnter=function(e){null===r||void 0===r||r({key:t,domEvent:e}),u(t)},c.onMouseLeave=function(e){null===o||void 0===o||o({key:t,domEvent:e}),s(t)}),c}var yk=["item"];function bk(e){var t=e.item,n=Ke(e,yk);return Object.defineProperty(n,"item",{get:function(){return Wn(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}function xk(t){var n=t.icon,r=t.props,o=t.children;return("function"===typeof n?e.createElement(n,Xe({},r)):n)||o||null}function wk(t){var n=e.useContext(vk),r=n.mode,o=n.rtl,i=n.inlineIndent;if("inline"!==r)return null;return o?{paddingRight:t*i}:{paddingLeft:t*i}}var Ek=[],Ck=e.createContext(null);function _k(){return e.useContext(Ck)}var kk=e.createContext(Ek);function Sk(t){var n=e.useContext(kk);return e.useMemo((function(){return void 0!==t?[].concat(Tn(n),[t]):n}),[n,t])}var Ok=e.createContext(null),Tk=e.createContext(null);function Ak(e,t){return void 0===e?null:"".concat(e,"-").concat(t)}function Rk(t){return Ak(e.useContext(Tk),t)}var Nk=e.createContext({}),Ik=["title","attribute","elementRef"],Pk=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],Dk=["active"],Mk=function(t){et(r,t);var n=it(r);function r(){return Ye(this,r),n.apply(this,arguments)}return Ze(r,[{key:"render",value:function(){var t=this.props,n=t.title,r=t.attribute,o=t.elementRef,i=u_(Ke(t,Ik),["eventKey"]);return Wn(!r,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),e.createElement(pk.Item,Ge({},r,{title:"string"===typeof n?n:void 0},i,{ref:o}))}}]),r}(e.Component),Fk=function(t){var n,r=t.style,o=t.className,i=t.eventKey,a=(t.warnKey,t.disabled),u=t.itemIcon,s=t.children,c=t.role,l=t.onMouseEnter,f=t.onMouseLeave,d=t.onClick,p=t.onKeyDown,h=t.onFocus,v=Ke(t,Pk),m=Rk(i),g=e.useContext(vk),y=g.prefixCls,b=g.onItemClick,x=g.disabled,w=g.overflowDisabled,E=g.itemIcon,C=g.selectedKeys,_=g.onActive,k=e.useContext(Nk)._internalRenderMenuItem,S="".concat(y,"-item"),O=e.useRef(),T=e.useRef(),A=x||a,R=Sk(i);var N=function(e){return{key:i,keyPath:Tn(R).reverse(),item:O.current,domEvent:e}},I=u||E,P=gk(i,A,l,f),D=P.active,M=Ke(P,Dk),F=C.includes(i),L=wk(R.length),j={};"option"===t.role&&(j["aria-selected"]=F);var B=e.createElement(Mk,Ge({ref:O,elementRef:T,role:null===c?"none":c||"menuitem",tabIndex:a?null:-1,"data-menu-id":w&&m?null:m},v,M,j,{component:"li","aria-disabled":a,style:Xe(Xe({},L),r),className:Ct()(S,(n={},qe(n,"".concat(S,"-active"),D),qe(n,"".concat(S,"-selected"),F),qe(n,"".concat(S,"-disabled"),A),n),o),onClick:function(e){if(!A){var t=N(e);null===d||void 0===d||d(bk(t)),b(t)}},onKeyDown:function(e){if(null===p||void 0===p||p(e),e.which===z_.ENTER){var t=N(e);null===d||void 0===d||d(bk(t)),b(t)}},onFocus:function(e){_(i),null===h||void 0===h||h(e)}}),s,e.createElement(xk,{props:Xe(Xe({},t),{},{isSelected:F}),icon:I}));return k&&(B=k(B,t,{selected:F})),B};var Lk=function(t){var n=t.eventKey,r=_k(),o=Sk(n);return e.useEffect((function(){if(r)return r.registerPath(n,o),function(){r.unregisterPath(n,o)}}),[o]),r?null:e.createElement(Fk,t)},jk=["label","children","key","type"];function Bk(t,n){return Sr(t).map((function(t,r){if(e.isValidElement(t)){var o,i,a=t.key,u=null!==(o=null===(i=t.props)||void 0===i?void 0:i.eventKey)&&void 0!==o?o:a;(null===u||void 0===u)&&(u="tmp_key-".concat([].concat(Tn(n),[r]).join("-")));var s={key:u,eventKey:u};return e.cloneElement(t,s)}return t}))}function Vk(t){return(t||[]).map((function(t,n){if(t&&"object"===nt(t)){var r=t.label,o=t.children,i=t.key,a=t.type,u=Ke(t,jk),s=null!==i&&void 0!==i?i:"tmp-".concat(n);return o||"group"===a?"group"===a?e.createElement(uT,Ge({key:s},u,{title:r}),Vk(o)):e.createElement(DO,Ge({key:s},u,{title:r}),Vk(o)):"divider"===a?e.createElement(sT,Ge({key:s},u)):e.createElement(Lk,Ge({key:s},u),r)}return null})).filter((function(e){return e}))}function zk(e,t,n){var r=e;return t&&(r=Vk(t)),Bk(r,n)}function Wk(t){var n=e.useRef(t);n.current=t;var r=e.useCallback((function(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return null===(e=n.current)||void 0===e?void 0:e.call.apply(e,[n].concat(r))}),[]);return t?r:void 0}var Uk=["className","children"],Hk=function(t,n){var r=t.className,o=t.children,i=Ke(t,Uk),a=e.useContext(vk),u=a.prefixCls,s=a.mode,c=a.rtl;return e.createElement("ul",Ge({className:Ct()(u,c&&"".concat(u,"-rtl"),"".concat(u,"-sub"),"".concat(u,"-").concat("inline"===s?"inline":"vertical"),r)},i,{"data-menu-list":!0,ref:n}),o)},Gk=e.forwardRef(Hk);Gk.displayName="SubMenuList";var qk=Gk;function Kk(e,t){return!!e&&e.contains(t)}function $k(e,t,n,r){var o=lt.unstable_batchedUpdates?function(e){lt.unstable_batchedUpdates(n,e)}:n;return e.addEventListener&&e.addEventListener(t,o,r),{remove:function(){e.removeEventListener&&e.removeEventListener(t,o,r)}}}var Xk=(0,e.forwardRef)((function(t,n){var r=t.didUpdate,o=t.getContainer,i=t.children,a=(0,e.useRef)(),u=(0,e.useRef)();(0,e.useImperativeHandle)(n,(function(){return{}}));var s=(0,e.useRef)(!1);return!s.current&&Rt()&&(u.current=o(),a.current=u.current.parentNode,s.current=!0),(0,e.useEffect)((function(){null===r||void 0===r||r(t)})),(0,e.useEffect)((function(){return null===u.current.parentNode&&null!==a.current&&a.current.appendChild(u.current),function(){var e,t;null===(e=u.current)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(u.current)}}),[]),u.current?lt.createPortal(i,u.current):null})),Yk=Xk;function Qk(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function Zk(e){var t=e.prefixCls,n=e.motion,r=e.animation,o=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:o?{motionName:o}:null)}function Jk(t){var n=t.prefixCls,r=t.visible,o=t.zIndex,i=t.mask,a=t.maskMotion,u=t.maskAnimation,s=t.maskTransitionName;if(!i)return null;var c={};return(a||s||u)&&(c=Xe({motionAppear:!0},Zk({motion:a,prefixCls:n,transitionName:s,animation:u}))),e.createElement(kn,Ge({},c,{visible:r,removeOnLeave:!0}),(function(t){var r=t.className;return e.createElement("div",{style:{zIndex:o},className:Ct()("".concat(n,"-mask"),r)})}))}var eS,tS=function(e){if(!e)return!1;if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox();if(t.width||t.height)return!0}if(e.getBoundingClientRect){var n=e.getBoundingClientRect();if(n.width||n.height)return!0}return!1};function nS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nS(Object(n),!0).forEach((function(t){iS(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oS(e){return oS="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oS(e)}function iS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var aS={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function uS(){if(void 0!==eS)return eS;eS="";var e=document.createElement("p").style;for(var t in aS)t+"Transform"in e&&(eS=t);return eS}function sS(){return uS()?"".concat(uS(),"TransitionProperty"):"transitionProperty"}function cS(){return uS()?"".concat(uS(),"Transform"):"transform"}function lS(e,t){var n=sS();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function fS(e,t){var n=cS();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}var dS,pS=/matrix\((.*)\)/,hS=/matrix3d\((.*)\)/;function vS(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function mS(e,t,n){var r=n;if("object"!==oS(t))return"undefined"!==typeof r?("number"===typeof r&&(r="".concat(r,"px")),void(e.style[t]=r)):dS(e,t);for(var o in t)t.hasOwnProperty(o)&&mS(e,o,t[o])}function gS(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!==typeof n){var o=e.document;"number"!==typeof(n=o.documentElement[r])&&(n=o.body[r])}return n}function yS(e){return gS(e)}function bS(e){return gS(e,!0)}function xS(e){var t=function(e){var t,n,r,o=e.ownerDocument,i=o.body,a=o&&o.documentElement;return t=e.getBoundingClientRect(),n=Math.floor(t.left),r=Math.floor(t.top),{left:n-=a.clientLeft||i.clientLeft||0,top:r-=a.clientTop||i.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=yS(r),t.top+=bS(r),t}function wS(e){return null!==e&&void 0!==e&&e==e.window}function ES(e){return wS(e)?e.document:9===e.nodeType?e:e.ownerDocument}var CS=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),_S=/^(top|right|bottom|left)$/;function kS(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function SS(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function OS(e,t,n){"static"===mS(e,"position")&&(e.style.position="relative");var r=-999,o=-999,i=kS("left",n),a=kS("top",n),u=SS(i),s=SS(a);"left"!==i&&(r=999),"top"!==a&&(o=999);var c="",l=xS(e);("left"in t||"top"in t)&&(c=function(e){return e.style.transitionProperty||e.style[sS()]}(e)||"",lS(e,"none")),"left"in t&&(e.style[u]="",e.style[i]="".concat(r,"px")),"top"in t&&(e.style[s]="",e.style[a]="".concat(o,"px")),vS(e);var f=xS(e),d={};for(var p in t)if(t.hasOwnProperty(p)){var h=kS(p,n),v="left"===p?r:o,m=l[p]-f[p];d[h]=h===p?v+m:v-m}mS(e,d),vS(e),("left"in t||"top"in t)&&lS(e,c);var g={};for(var y in t)if(t.hasOwnProperty(y)){var b=kS(y,n),x=t[y]-l[y];g[b]=y===b?d[b]+x:d[b]-x}mS(e,g)}function TS(e,t){var n=xS(e),r=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(cS());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}(e),o={x:r.x,y:r.y};"left"in t&&(o.x=r.x+t.left-n.left),"top"in t&&(o.y=r.y+t.top-n.top),function(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(cS());if(r&&"none"!==r){var o,i=r.match(pS);i?((o=(i=i[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,o[5]=t.y,fS(e,"matrix(".concat(o.join(","),")"))):((o=r.match(hS)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,o[13]=t.y,fS(e,"matrix3d(".concat(o.join(","),")")))}else fS(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}(e,o)}function AS(e,t){for(var n=0;n<e.length;n++)t(e[n])}function RS(e){return"border-box"===dS(e,"boxSizing")}"undefined"!==typeof window&&(dS=window.getComputedStyle?function(e,t,n){var r=n,o="",i=ES(e);return(r=r||i.defaultView.getComputedStyle(e,null))&&(o=r.getPropertyValue(t)||r[t]),o}:function(e,t){var n=e.currentStyle&&e.currentStyle[t];if(CS.test(n)&&!_S.test(t)){var r=e.style,o=r.left,i=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,r.left="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r.left=o,e.runtimeStyle.left=i}return""===n?"auto":n});var NS=["margin","border","padding"];function IS(e,t,n){var r,o={},i=e.style;for(r in t)t.hasOwnProperty(r)&&(o[r]=i[r],i[r]=t[r]);for(r in n.call(e),t)t.hasOwnProperty(r)&&(i[r]=o[r])}function PS(e,t,n){var r,o,i,a=0;for(o=0;o<t.length;o++)if(r=t[o])for(i=0;i<n.length;i++){var u=void 0;u="border"===r?"".concat(r).concat(n[i],"Width"):r+n[i],a+=parseFloat(dS(e,u))||0}return a}var DS={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function MS(e,t,n){var r=n;if(wS(e))return"width"===t?DS.viewportWidth(e):DS.viewportHeight(e);if(9===e.nodeType)return"width"===t?DS.docWidth(e):DS.docHeight(e);var o="width"===t?["Left","Right"]:["Top","Bottom"],i="width"===t?Math.floor(e.getBoundingClientRect().width):Math.floor(e.getBoundingClientRect().height),a=RS(e),u=0;(null===i||void 0===i||i<=0)&&(i=void 0,(null===(u=dS(e,t))||void 0===u||Number(u)<0)&&(u=e.style[t]||0),u=parseFloat(u)||0),void 0===r&&(r=a?1:-1);var s=void 0!==i||a,c=i||u;return-1===r?s?c-PS(e,["border","padding"],o):u:s?1===r?c:c+(2===r?-PS(e,["border"],o):PS(e,["margin"],o)):u+PS(e,NS.slice(r),o)}AS(["Width","Height"],(function(e){DS["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],DS["viewport".concat(e)](n))},DS["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,o=r.body,i=r.documentElement[n];return"CSS1Compat"===r.compatMode&&i||o&&o[n]||i}}));var FS={position:"absolute",visibility:"hidden",display:"block"};function LS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o=t[0];return 0!==o.offsetWidth?r=MS.apply(void 0,t):IS(o,FS,(function(){r=MS.apply(void 0,t)})),r}function jS(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}AS(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);DS["outer".concat(t)]=function(t,n){return t&&LS(t,e,n?0:1)};var n="width"===e?["Left","Right"]:["Top","Bottom"];DS[e]=function(t,r){var o=r;return void 0!==o?t?(RS(t)&&(o+=PS(t,["padding","border"],n)),mS(t,e,o)):void 0:t&&LS(t,e,-1)}}));var BS={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:ES,offset:function(e,t,n){if("undefined"===typeof t)return xS(e);!function(e,t,n){if(n.ignoreShake){var r=xS(e),o=r.left.toFixed(0),i=r.top.toFixed(0),a=t.left.toFixed(0),u=t.top.toFixed(0);if(o===a&&i===u)return}n.useCssRight||n.useCssBottom?OS(e,t,n):n.useCssTransform&&cS()in document.body.style?TS(e,t):OS(e,t,n)}(e,t,n||{})},isWindow:wS,each:AS,css:mS,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:jS,getWindowScrollLeft:function(e){return yS(e)},getWindowScrollTop:function(e){return bS(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)BS.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};jS(BS,DS);var VS=BS.getParent;function zS(e){if(BS.isWindow(e)||9===e.nodeType)return null;var t,n=BS.getDocument(e).body,r=BS.css(e,"position");if(!("fixed"===r||"absolute"===r))return"html"===e.nodeName.toLowerCase()?null:VS(e);for(t=VS(e);t&&t!==n&&9!==t.nodeType;t=VS(t))if("static"!==(r=BS.css(t,"position")))return t;return null}var WS=BS.getParent;function US(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=zS(e),o=BS.getDocument(e),i=o.defaultView||o.parentWindow,a=o.body,u=o.documentElement;r;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===a||r===u||"visible"===BS.css(r,"overflow")){if(r===a||r===u)break}else{var s=BS.offset(r);s.left+=r.clientLeft,s.top+=r.clientTop,n.top=Math.max(n.top,s.top),n.right=Math.min(n.right,s.left+r.clientWidth),n.bottom=Math.min(n.bottom,s.top+r.clientHeight),n.left=Math.max(n.left,s.left)}r=zS(r)}var c=null;BS.isWindow(e)||9===e.nodeType||(c=e.style.position,"absolute"===BS.css(e,"position")&&(e.style.position="fixed"));var l=BS.getWindowScrollLeft(i),f=BS.getWindowScrollTop(i),d=BS.viewportWidth(i),p=BS.viewportHeight(i),h=u.scrollWidth,v=u.scrollHeight,m=window.getComputedStyle(a);if("hidden"===m.overflowX&&(h=i.innerWidth),"hidden"===m.overflowY&&(v=i.innerHeight),e.style&&(e.style.position=c),t||function(e){if(BS.isWindow(e)||9===e.nodeType)return!1;var t=BS.getDocument(e),n=t.body,r=null;for(r=WS(e);r&&r!==n&&r!==t;r=WS(r))if("fixed"===BS.css(r,"position"))return!0;return!1}(e))n.left=Math.max(n.left,l),n.top=Math.max(n.top,f),n.right=Math.min(n.right,l+d),n.bottom=Math.min(n.bottom,f+p);else{var g=Math.max(h,l+d);n.right=Math.min(n.right,g);var y=Math.max(v,f+p);n.bottom=Math.min(n.bottom,y)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function HS(e){var t,n,r;if(BS.isWindow(e)||9===e.nodeType){var o=BS.getWindow(e);t={left:BS.getWindowScrollLeft(o),top:BS.getWindowScrollTop(o)},n=BS.viewportWidth(o),r=BS.viewportHeight(o)}else t=BS.offset(e),n=BS.outerWidth(e),r=BS.outerHeight(e);return t.width=n,t.height=r,t}function GS(e,t){var n=t.charAt(0),r=t.charAt(1),o=e.width,i=e.height,a=e.left,u=e.top;return"c"===n?u+=i/2:"b"===n&&(u+=i),"c"===r?a+=o/2:"r"===r&&(a+=o),{left:a,top:u}}function qS(e,t,n,r,o){var i=GS(t,n[1]),a=GS(e,n[0]),u=[a.left-i.left,a.top-i.top];return{left:Math.round(e.left-u[0]+r[0]-o[0]),top:Math.round(e.top-u[1]+r[1]-o[1])}}function KS(e,t,n){return e.left<n.left||e.left+t.width>n.right}function $S(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function XS(e,t,n){var r=[];return BS.each(e,(function(e){r.push(e.replace(t,(function(e){return n[e]})))})),r}function YS(e,t){return e[t]=-e[t],e}function QS(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function ZS(e,t){e[0]=QS(e[0],t.width),e[1]=QS(e[1],t.height)}function JS(e,t,n,r){var o=n.points,i=n.offset||[0,0],a=n.targetOffset||[0,0],u=n.overflow,s=n.source||e;i=[].concat(i),a=[].concat(a);var c={},l=0,f=US(s,!(!(u=u||{})||!u.alwaysByViewport)),d=HS(s);ZS(i,d),ZS(a,t);var p=qS(d,t,o,i,a),h=BS.merge(d,p);if(f&&(u.adjustX||u.adjustY)&&r){if(u.adjustX&&KS(p,d,f)){var v=XS(o,/[lr]/gi,{l:"r",r:"l"}),m=YS(i,0),g=YS(a,0);(function(e,t,n){return e.left>n.right||e.left+t.width<n.left})(qS(d,t,v,m,g),d,f)||(l=1,o=v,i=m,a=g)}if(u.adjustY&&$S(p,d,f)){var y=XS(o,/[tb]/gi,{t:"b",b:"t"}),b=YS(i,1),x=YS(a,1);(function(e,t,n){return e.top>n.bottom||e.top+t.height<n.top})(qS(d,t,y,b,x),d,f)||(l=1,o=y,i=b,a=x)}l&&(p=qS(d,t,o,i,a),BS.mix(h,p));var w=KS(p,d,f),E=$S(p,d,f);if(w||E){var C=o;w&&(C=XS(o,/[lr]/gi,{l:"r",r:"l"})),E&&(C=XS(o,/[tb]/gi,{t:"b",b:"t"})),o=C,i=n.offset||[0,0],a=n.targetOffset||[0,0]}c.adjustX=u.adjustX&&w,c.adjustY=u.adjustY&&E,(c.adjustX||c.adjustY)&&(h=function(e,t,n,r){var o=BS.clone(e),i={width:t.width,height:t.height};return r.adjustX&&o.left<n.left&&(o.left=n.left),r.resizeWidth&&o.left>=n.left&&o.left+i.width>n.right&&(i.width-=o.left+i.width-n.right),r.adjustX&&o.left+i.width>n.right&&(o.left=Math.max(n.right-i.width,n.left)),r.adjustY&&o.top<n.top&&(o.top=n.top),r.resizeHeight&&o.top>=n.top&&o.top+i.height>n.bottom&&(i.height-=o.top+i.height-n.bottom),r.adjustY&&o.top+i.height>n.bottom&&(o.top=Math.max(n.bottom-i.height,n.top)),BS.mix(o,i)}(p,d,f,c))}return h.width!==d.width&&BS.css(s,"width",BS.width(s)+h.width-d.width),h.height!==d.height&&BS.css(s,"height",BS.height(s)+h.height-d.height),BS.offset(s,{left:h.left,top:h.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:o,offset:i,targetOffset:a,overflow:c}}function eO(e,t,n){var r=n.target||t,o=HS(r),i=!function(e,t){var n=US(e,t),r=HS(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}(r,n.overflow&&n.overflow.alwaysByViewport);return JS(e,o,n,i)}function tO(e,t,n){var r,o,i=BS.getDocument(e),a=i.defaultView||i.parentWindow,u=BS.getWindowScrollLeft(a),s=BS.getWindowScrollTop(a),c=BS.viewportWidth(a),l=BS.viewportHeight(a),f={left:r="pageX"in t?t.pageX:u+t.clientX,top:o="pageY"in t?t.pageY:s+t.clientY,width:0,height:0},d=r>=0&&r<=u+c&&o>=0&&o<=s+l,p=[n.points[0],"cc"];return JS(e,f,rS(rS({},n),{},{points:p}),d)}eO.__getOffsetParent=zS,eO.__getVisibleRectForElement=US;var nO=n(1905),rO=n.n(nO);function oO(e,t){var n=null,r=null;var o=new N_((function(e){var o=s(e,1)[0].target;if(document.documentElement.contains(o)){var i=o.getBoundingClientRect(),a=i.width,u=i.height,c=Math.floor(a),l=Math.floor(u);n===c&&r===l||Promise.resolve().then((function(){t({width:c,height:l})})),n=c,r=l}}));return e&&o.observe(e),function(){o.disconnect()}}function iO(e){return"function"!==typeof e?null:e()}function aO(e){return"object"===nt(e)&&e?e:null}var uO=function(t,n){var r=t.children,o=t.disabled,i=t.target,a=t.align,u=t.onAlign,c=t.monitorWindowResize,l=t.monitorBufferTime,f=void 0===l?0:l,d=e.useRef({}),p=e.useRef(),h=e.Children.only(r),v=e.useRef({});v.current.disabled=o,v.current.target=i,v.current.align=a,v.current.onAlign=u;var m=function(t,n){var r=e.useRef(!1),o=e.useRef(null);function i(){window.clearTimeout(o.current)}return[function e(a){if(i(),r.current&&!0!==a)o.current=window.setTimeout((function(){r.current=!1,e()}),n);else{if(!1===t())return;r.current=!0,o.current=window.setTimeout((function(){r.current=!1}),n)}},function(){r.current=!1,i()}]}((function(){var e=v.current,t=e.disabled,n=e.target,r=e.align,o=e.onAlign;if(!t&&n){var i,a=p.current,u=iO(n),s=aO(n);d.current.element=u,d.current.point=s,d.current.align=r;var c=document.activeElement;return u&&tS(u)?i=eO(a,u,r):s&&(i=tO(a,s,r)),function(e,t){e!==document.activeElement&&Kk(t,e)&&"function"===typeof e.focus&&e.focus()}(c,a),o&&i&&o(a,i),!0}return!1}),f),g=s(m,2),y=g[0],b=g[1],x=e.useRef({cancel:function(){}}),w=e.useRef({cancel:function(){}});e.useEffect((function(){var e=iO(i),t=aO(i);p.current!==w.current.element&&(w.current.cancel(),w.current.element=p.current,w.current.cancel=oO(p.current,y)),d.current.element===e&&function(e,t){return e===t||!(!e||!t)&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY)}(d.current.point,t)&&rO()(d.current.align,a)||(y(),x.current.element!==e&&(x.current.cancel(),x.current.element=e,x.current.cancel=oO(e,y)))})),e.useEffect((function(){o?b():y()}),[o]);var E=e.useRef(null);return e.useEffect((function(){c?E.current||(E.current=$k(window,"resize",y)):E.current&&(E.current.remove(),E.current=null)}),[c]),e.useEffect((function(){return function(){x.current.cancel(),w.current.cancel(),E.current&&E.current.remove(),b()}}),[]),e.useImperativeHandle(n,(function(){return{forceAlign:function(){return y(!0)}}})),e.isValidElement(h)&&(h=e.cloneElement(h,{ref:Tt(h.ref,p)})),h},sO=e.forwardRef(uO);sO.displayName="Align";var cO=sO,lO=["measure","alignPre","align",null,"motion"],fO=e.forwardRef((function(t,n){var r=t.visible,o=t.prefixCls,i=t.className,a=t.style,u=t.children,c=t.zIndex,l=t.stretch,f=t.destroyPopupOnHide,d=t.forceRender,p=t.align,h=t.point,v=t.getRootDomNode,m=t.getClassNameFromAlign,g=t.onAlign,y=t.onMouseEnter,b=t.onMouseLeave,x=t.onMouseDown,w=t.onTouchStart,E=t.onClick,C=(0,e.useRef)(),_=(0,e.useRef)(),k=s((0,e.useState)(),2),S=k[0],O=k[1],T=function(t){var n=s(e.useState({width:0,height:0}),2),r=n[0],o=n[1];return[e.useMemo((function(){var e={};if(t){var n=r.width,o=r.height;-1!==t.indexOf("height")&&o?e.height=o:-1!==t.indexOf("minHeight")&&o&&(e.minHeight=o),-1!==t.indexOf("width")&&n?e.width=n:-1!==t.indexOf("minWidth")&&n&&(e.minWidth=n)}return e}),[t,r]),function(e){o({width:e.offsetWidth,height:e.offsetHeight})}]}(l),A=s(T,2),R=A[0],N=A[1];var I=function(t,n){var r=s(Zt(null),2),o=r[0],i=r[1],a=(0,e.useRef)();function u(e){i(e,!0)}function c(){on.cancel(a.current)}return(0,e.useEffect)((function(){u("measure")}),[t]),(0,e.useEffect)((function(){"measure"===o&&n(),o&&(a.current=on(st(at().mark((function e(){var t,n;return at().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=lO.indexOf(o),(n=lO[t+1])&&-1!==t&&u(n);case 3:case"end":return e.stop()}}),e)})))))}),[o]),(0,e.useEffect)((function(){return function(){c()}}),[]),[o,function(e){c(),a.current=on((function(){u((function(e){switch(o){case"align":return"motion";case"motion":return"stable"}return e})),null===e||void 0===e||e()}))}]}(r,(function(){l&&N(v())})),P=s(I,2),D=P[0],M=P[1],F=s((0,e.useState)(0),2),L=F[0],j=F[1],B=(0,e.useRef)();function V(){var e;null===(e=C.current)||void 0===e||e.forceAlign()}function z(e,t){var n=m(t);S!==n&&O(n),j((function(e){return e+1})),"align"===D&&(null===g||void 0===g||g(e,t))}$_((function(){"alignPre"===D&&j(0)}),[D]),$_((function(){"align"===D&&(L<2?V():M((function(){var e;null===(e=B.current)||void 0===e||e.call(B)})))}),[L]);var W=Xe({},Zk(t));function U(){return new Promise((function(e){B.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=W[e];W[e]=function(e,n){return M(),null===t||void 0===t?void 0:t(e,n)}})),e.useEffect((function(){W.motionName||"motion"!==D||M()}),[W.motionName,D]),e.useImperativeHandle(n,(function(){return{forceAlign:V,getElement:function(){return _.current}}}));var H=Xe(Xe({},R),{},{zIndex:c,opacity:"motion"!==D&&"stable"!==D&&r?0:void 0,pointerEvents:r||"stable"===D?void 0:"none"},a),G=!0;!(null===p||void 0===p?void 0:p.points)||"align"!==D&&"stable"!==D||(G=!1);var q=u;return e.Children.count(u)>1&&(q=e.createElement("div",{className:"".concat(o,"-content")},u)),e.createElement(kn,Ge({visible:r,ref:_,leavedClassName:"".concat(o,"-hidden")},W,{onAppearPrepare:U,onEnterPrepare:U,removeOnLeave:f,forceRender:d}),(function(t,n){var r=t.className,a=t.style,u=Ct()(o,i,S,r);return e.createElement(cO,{target:h||v,key:"popup",ref:C,monitorWindowResize:!0,disabled:G,align:p,onAlign:z},e.createElement("div",{ref:n,className:u,onMouseEnter:y,onMouseLeave:b,onMouseDownCapture:x,onTouchStartCapture:w,onClick:E,style:Xe(Xe({},a),H)},q))}))}));fO.displayName="PopupInner";var dO=fO,pO=e.forwardRef((function(t,n){var r=t.prefixCls,o=t.visible,i=t.zIndex,a=t.children,u=t.mobile,s=(u=void 0===u?{}:u).popupClassName,c=u.popupStyle,l=u.popupMotion,f=void 0===l?{}:l,d=u.popupRender,p=t.onClick,h=e.useRef();e.useImperativeHandle(n,(function(){return{forceAlign:function(){},getElement:function(){return h.current}}}));var v=Xe({zIndex:i},c),m=a;return e.Children.count(a)>1&&(m=e.createElement("div",{className:"".concat(r,"-content")},a)),d&&(m=d(m)),e.createElement(kn,Ge({visible:o,ref:h,removeOnLeave:!0},f),(function(t,n){var o=t.className,i=t.style,a=Ct()(r,s,o);return e.createElement("div",{ref:n,className:a,onClick:p,style:Xe(Xe({},i),v)},m)}))}));pO.displayName="MobilePopupInner";var hO=pO,vO=["visible","mobile"],mO=e.forwardRef((function(t,n){var r=t.visible,o=t.mobile,i=Ke(t,vO),a=s((0,e.useState)(r),2),u=a[0],c=a[1],l=s((0,e.useState)(!1),2),f=l[0],d=l[1],p=Xe(Xe({},i),{},{visible:u});(0,e.useEffect)((function(){c(r),r&&o&&d(s_())}),[r,o]);var h=f?e.createElement(hO,Ge({},p,{mobile:o,ref:n})):e.createElement(dO,Ge({},p,{ref:n}));return e.createElement("div",null,e.createElement(Jk,p),h)}));mO.displayName="Popup";var gO=mO,yO=e.createContext(null);function bO(){}function xO(){return""}function wO(e){return e?e.ownerDocument:window.document}var EO=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];var CO=function(t){var n=function(n){et(o,n);var r=it(o);function o(t){var n,i;return Ye(this,o),(n=r.call(this,t)).popupRef=e.createRef(),n.triggerRef=e.createRef(),n.portalContainer=void 0,n.attachId=void 0,n.clickOutsideHandler=void 0,n.touchOutsideHandler=void 0,n.contextMenuOutsideHandler1=void 0,n.contextMenuOutsideHandler2=void 0,n.mouseDownTimeout=void 0,n.focusTime=void 0,n.preClickTime=void 0,n.preTouchTime=void 0,n.delayTimer=void 0,n.hasPopupMouseDown=void 0,n.onMouseEnter=function(e){var t=n.props.mouseEnterDelay;n.fireEvents("onMouseEnter",e),n.delaySetPopupVisible(!0,t,t?null:e)},n.onMouseMove=function(e){n.fireEvents("onMouseMove",e),n.setPoint(e)},n.onMouseLeave=function(e){n.fireEvents("onMouseLeave",e),n.delaySetPopupVisible(!1,n.props.mouseLeaveDelay)},n.onPopupMouseEnter=function(){n.clearDelayTimer()},n.onPopupMouseLeave=function(e){var t;e.relatedTarget&&!e.relatedTarget.setTimeout&&Kk(null===(t=n.popupRef.current)||void 0===t?void 0:t.getElement(),e.relatedTarget)||n.delaySetPopupVisible(!1,n.props.mouseLeaveDelay)},n.onFocus=function(e){n.fireEvents("onFocus",e),n.clearDelayTimer(),n.isFocusToShow()&&(n.focusTime=Date.now(),n.delaySetPopupVisible(!0,n.props.focusDelay))},n.onMouseDown=function(e){n.fireEvents("onMouseDown",e),n.preClickTime=Date.now()},n.onTouchStart=function(e){n.fireEvents("onTouchStart",e),n.preTouchTime=Date.now()},n.onBlur=function(e){n.fireEvents("onBlur",e),n.clearDelayTimer(),n.isBlurToHide()&&n.delaySetPopupVisible(!1,n.props.blurDelay)},n.onContextMenu=function(e){e.preventDefault(),n.fireEvents("onContextMenu",e),n.setPopupVisible(!0,e)},n.onContextMenuClose=function(){n.isContextMenuToShow()&&n.close()},n.onClick=function(e){if(n.fireEvents("onClick",e),n.focusTime){var t;if(n.preClickTime&&n.preTouchTime?t=Math.min(n.preClickTime,n.preTouchTime):n.preClickTime?t=n.preClickTime:n.preTouchTime&&(t=n.preTouchTime),Math.abs(t-n.focusTime)<20)return;n.focusTime=0}n.preClickTime=0,n.preTouchTime=0,n.isClickToShow()&&(n.isClickToHide()||n.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var r=!n.state.popupVisible;(n.isClickToHide()&&!r||r&&n.isClickToShow())&&n.setPopupVisible(!n.state.popupVisible,e)},n.onPopupMouseDown=function(){var e;(n.hasPopupMouseDown=!0,clearTimeout(n.mouseDownTimeout),n.mouseDownTimeout=window.setTimeout((function(){n.hasPopupMouseDown=!1}),0),n.context)&&(e=n.context).onPopupMouseDown.apply(e,arguments)},n.onDocumentClick=function(e){if(!n.props.mask||n.props.maskClosable){var t=e.target,r=n.getRootDomNode(),o=n.getPopupDomNode();Kk(r,t)&&!n.isContextMenuOnly()||Kk(o,t)||n.hasPopupMouseDown||n.close()}},n.getRootDomNode=function(){var e=n.props.getTriggerDOMNode;if(e)return e(n.triggerRef.current);try{var t=_t(n.triggerRef.current);if(t)return t}catch(r){}return lt.findDOMNode(rt(n))},n.getPopupClassNameFromAlign=function(e){var t=[],r=n.props,o=r.popupPlacement,i=r.builtinPlacements,a=r.prefixCls,u=r.alignPoint,s=r.getPopupClassNameFromAlign;return o&&i&&t.push(function(e,t,n,r){for(var o=n.points,i=Object.keys(e),a=0;a<i.length;a+=1){var u=i[a];if(Qk(e[u].points,o,r))return"".concat(t,"-placement-").concat(u)}return""}(i,a,e,u)),s&&t.push(s(e)),t.join(" ")},n.getComponent=function(){var t=n.props,r=t.prefixCls,o=t.destroyPopupOnHide,i=t.popupClassName,a=t.onPopupAlign,u=t.popupMotion,s=t.popupAnimation,c=t.popupTransitionName,l=t.popupStyle,f=t.mask,d=t.maskAnimation,p=t.maskTransitionName,h=t.maskMotion,v=t.zIndex,m=t.popup,g=t.stretch,y=t.alignPoint,b=t.mobile,x=t.forceRender,w=t.onPopupClick,E=n.state,C=E.popupVisible,_=E.point,k=n.getPopupAlign(),S={};return n.isMouseEnterToShow()&&(S.onMouseEnter=n.onPopupMouseEnter),n.isMouseLeaveToHide()&&(S.onMouseLeave=n.onPopupMouseLeave),S.onMouseDown=n.onPopupMouseDown,S.onTouchStart=n.onPopupMouseDown,e.createElement(gO,Ge({prefixCls:r,destroyPopupOnHide:o,visible:C,point:y&&_,className:i,align:k,onAlign:a,animation:s,getClassNameFromAlign:n.getPopupClassNameFromAlign},S,{stretch:g,getRootDomNode:n.getRootDomNode,style:l,mask:f,zIndex:v,transitionName:c,maskAnimation:d,maskTransitionName:p,maskMotion:h,ref:n.popupRef,motion:u,mobile:b,forceRender:x,onClick:w}),"function"===typeof m?m():m)},n.attachParent=function(e){on.cancel(n.attachId);var t,r=n.props,o=r.getPopupContainer,i=r.getDocument,a=n.getRootDomNode();o?(a||0===o.length)&&(t=o(a)):t=i(n.getRootDomNode()).body,t?t.appendChild(e):n.attachId=on((function(){n.attachParent(e)}))},n.getContainer=function(){if(!n.portalContainer){var e=(0,n.props.getDocument)(n.getRootDomNode()).createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",n.portalContainer=e}return n.attachParent(n.portalContainer),n.portalContainer},n.setPoint=function(e){n.props.alignPoint&&e&&n.setState({point:{pageX:e.pageX,pageY:e.pageY}})},n.handlePortalUpdate=function(){n.state.prevPopupVisible!==n.state.popupVisible&&n.props.afterPopupVisibleChange(n.state.popupVisible)},n.triggerContextValue={onPopupMouseDown:n.onPopupMouseDown},i="popupVisible"in t?!!t.popupVisible:!!t.defaultPopupVisible,n.state={prevPopupVisible:i,popupVisible:i},EO.forEach((function(e){n["fire".concat(e)]=function(t){n.fireEvents(e,t)}})),n}return Ze(o,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=$k(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=$k(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=$k(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=$k(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),on.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?function(e,t,n){return Xe(Xe({},e[t]||{}),n)}(r,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var r=this,o=1e3*t;if(this.clearDelayTimer(),o){var i=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(e,i),r.clearDelayTimer()}),o)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var n=this.state.popupVisible,r=this.props,o=r.children,i=r.forceRender,a=r.alignPoint,u=r.className,s=r.autoDestroy,c=e.Children.only(o),l={key:"trigger"};this.isContextMenuToShow()?l.onContextMenu=this.onContextMenu:l.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(l.onClick=this.onClick,l.onMouseDown=this.onMouseDown,l.onTouchStart=this.onTouchStart):(l.onClick=this.createTwoChains("onClick"),l.onMouseDown=this.createTwoChains("onMouseDown"),l.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(l.onMouseEnter=this.onMouseEnter,a&&(l.onMouseMove=this.onMouseMove)):l.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?l.onMouseLeave=this.onMouseLeave:l.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(l.onFocus=this.onFocus,l.onBlur=this.onBlur):(l.onFocus=this.createTwoChains("onFocus"),l.onBlur=this.createTwoChains("onBlur"));var f=Ct()(c&&c.props&&c.props.className,u);f&&(l.className=f);var d=Xe({},l);At(c)&&(d.ref=Tt(this.triggerRef,c.ref));var p,h=e.cloneElement(c,d);return(n||this.popupRef.current||i)&&(p=e.createElement(t,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!n&&s&&(p=null),e.createElement(yO.Provider,{value:this.triggerContextValue},h,p)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r}}]),o}(e.Component);return n.contextType=yO,n.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:xO,getDocument:wO,onPopupVisibleChange:bO,afterPopupVisibleChange:bO,onPopupAlign:bO,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},n}(Yk),_O={adjustX:1,adjustY:1},kO={topLeft:{points:["bl","tl"],overflow:_O,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:_O,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:_O,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:_O,offset:[4,0]}},SO={topLeft:{points:["bl","tl"],overflow:_O,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:_O,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:_O,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:_O,offset:[4,0]}};function OO(e,t,n){return t||(n?n[e]||n.other:void 0)}var TO={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function AO(t){var n=t.prefixCls,r=t.visible,o=t.children,i=t.popup,a=t.popupClassName,u=t.popupOffset,c=t.disabled,l=t.mode,f=t.onVisibleChange,d=e.useContext(vk),p=d.getPopupContainer,h=d.rtl,v=d.subMenuOpenDelay,m=d.subMenuCloseDelay,g=d.builtinPlacements,y=d.triggerSubMenuAction,b=d.forceSubMenuRender,x=d.rootClassName,w=d.motion,E=d.defaultMotions,C=s(e.useState(!1),2),_=C[0],k=C[1],S=Xe(Xe({},h?SO:kO),g),O=TO[l],T=Xe(Xe({},OO(l,w,E)),{},{leavedClassName:"".concat(n,"-hidden"),removeOnLeave:!1,motionAppear:!0}),A=e.useRef();return e.useEffect((function(){return A.current=on((function(){k(r)})),function(){on.cancel(A.current)}}),[r]),e.createElement(CO,{prefixCls:n,popupClassName:Ct()("".concat(n,"-popup"),qe({},"".concat(n,"-rtl"),h),a,x),stretch:"horizontal"===l?"minWidth":null,getPopupContainer:p,builtinPlacements:S,popupPlacement:O,popupVisible:_,popup:i,popupAlign:u&&{offset:u},action:c?[]:[y],mouseEnterDelay:v,mouseLeaveDelay:m,onPopupVisibleChange:f,forceRender:b,popupMotion:T},o)}function RO(t){var n=t.id,r=t.open,o=t.keyPath,i=t.children,a="inline",u=e.useContext(vk),c=u.prefixCls,l=u.forceSubMenuRender,f=u.motion,d=u.defaultMotions,p=u.mode,h=e.useRef(!1);h.current=p===a;var v=s(e.useState(!h.current),2),m=v[0],g=v[1],y=!!h.current&&r;e.useEffect((function(){h.current&&g(!1)}),[p]);var b=Xe({},OO(a,f,d));o.length>1&&(b.motionAppear=!1);var x=b.onVisibleChanged;return b.onVisibleChanged=function(e){return h.current||e||g(!0),null===x||void 0===x?void 0:x(e)},m?null:e.createElement(mk,{mode:a,locked:!h.current},e.createElement(kn,Ge({visible:y},b,{forceRender:l,removeOnLeave:!1,leavedClassName:"".concat(c,"-hidden")}),(function(t){var r=t.className,o=t.style;return e.createElement(qk,{id:n,className:r,style:o},i)})))}var NO=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],IO=["active"],PO=function(t){var n,r=t.style,o=t.className,i=t.title,a=t.eventKey,u=(t.warnKey,t.disabled),c=t.internalPopupClose,l=t.children,f=t.itemIcon,d=t.expandIcon,p=t.popupClassName,h=t.popupOffset,v=t.onClick,m=t.onMouseEnter,g=t.onMouseLeave,y=t.onTitleClick,b=t.onTitleMouseEnter,x=t.onTitleMouseLeave,w=Ke(t,NO),E=Rk(a),C=e.useContext(vk),_=C.prefixCls,k=C.mode,S=C.openKeys,O=C.disabled,T=C.overflowDisabled,A=C.activeKey,R=C.selectedKeys,N=C.itemIcon,I=C.expandIcon,P=C.onItemClick,D=C.onOpenChange,M=C.onActive,F=e.useContext(Nk)._internalRenderSubMenuItem,L=e.useContext(Ok).isSubPathKey,j=Sk(),B="".concat(_,"-submenu"),V=O||u,z=e.useRef(),W=e.useRef();var U=f||N,H=d||I,G=S.includes(a),q=!T&&G,K=L(R,a),$=gk(a,V,b,x),X=$.active,Y=Ke($,IO),Q=s(e.useState(!1),2),Z=Q[0],J=Q[1],ee=function(e){V||J(e)},te=e.useMemo((function(){return X||"inline"!==k&&(Z||L([A],a))}),[k,X,A,Z,a,L]),ne=wk(j.length),re=Wk((function(e){null===v||void 0===v||v(bk(e)),P(e)})),oe=E&&"".concat(E,"-popup"),ie=e.createElement("div",Ge({role:"menuitem",style:ne,className:"".concat(B,"-title"),tabIndex:V?null:-1,ref:z,title:"string"===typeof i?i:null,"data-menu-id":T&&E?null:E,"aria-expanded":q,"aria-haspopup":!0,"aria-controls":oe,"aria-disabled":V,onClick:function(e){V||(null===y||void 0===y||y({key:a,domEvent:e}),"inline"===k&&D(a,!G))},onFocus:function(){M(a)}},Y),i,e.createElement(xk,{icon:"horizontal"!==k?H:null,props:Xe(Xe({},t),{},{isOpen:q,isSubMenu:!0})},e.createElement("i",{className:"".concat(B,"-arrow")}))),ae=e.useRef(k);if("inline"!==k&&(ae.current=j.length>1?"vertical":k),!T){var ue=ae.current;ie=e.createElement(AO,{mode:ue,prefixCls:B,visible:!c&&q&&"inline"!==k,popupClassName:p,popupOffset:h,popup:e.createElement(mk,{mode:"horizontal"===ue?"vertical":ue},e.createElement(qk,{id:oe,ref:W},l)),disabled:V,onVisibleChange:function(e){"inline"!==k&&D(a,e)}},ie)}var se=e.createElement(pk.Item,Ge({role:"none"},w,{component:"li",style:r,className:Ct()(B,"".concat(B,"-").concat(k),o,(n={},qe(n,"".concat(B,"-open"),q),qe(n,"".concat(B,"-active"),te),qe(n,"".concat(B,"-selected"),K),qe(n,"".concat(B,"-disabled"),V),n)),onMouseEnter:function(e){ee(!0),null===m||void 0===m||m({key:a,domEvent:e})},onMouseLeave:function(e){ee(!1),null===g||void 0===g||g({key:a,domEvent:e})}}),ie,!T&&e.createElement(RO,{id:oe,open:q,keyPath:j},l));return F&&(se=F(se,t,{selected:K,active:te,open:q,disabled:V})),e.createElement(mk,{onItemClick:re,mode:"horizontal"===k?"vertical":k,itemIcon:U,expandIcon:H},se)};function DO(t){var n,r=t.eventKey,o=t.children,i=Sk(r),a=Bk(o,i),u=_k();return e.useEffect((function(){if(u)return u.registerPath(r,i),function(){u.unregisterPath(r,i)}}),[i]),n=u?a:e.createElement(PO,t,a),e.createElement(kk.Provider,{value:i},n)}function MO(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(tS(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||"a"===n&&!!e.getAttribute("href"),o=e.getAttribute("tabindex"),i=Number(o),a=null;return o&&!Number.isNaN(i)?a=i:r&&null===a&&(a=0),r&&e.disabled&&(a=null),null!==a&&(a>=0||t&&a<0)}return!1}function FO(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Tn(e.querySelectorAll("*")).filter((function(e){return MO(e,t)}));return MO(e,t)&&n.unshift(e),n}var LO=z_.LEFT,jO=z_.RIGHT,BO=z_.UP,VO=z_.DOWN,zO=z_.ENTER,WO=z_.ESC,UO=z_.HOME,HO=z_.END,GO=[BO,VO,LO,jO];function qO(e,t){return FO(e,!0).filter((function(e){return t.has(e)}))}function KO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return null;var o=qO(e,t),i=o.length,a=o.findIndex((function(e){return n===e}));return r<0?-1===a?a=i-1:a-=1:r>0&&(a+=1),o[a=(a+i)%i]}function $O(t,n,r,o,i,a,u,s,c,l){var f=e.useRef(),d=e.useRef();d.current=n;var p=function(){on.cancel(f.current)};return e.useEffect((function(){return function(){p()}}),[]),function(e){var h=e.which;if([].concat(GO,[zO,WO,UO,HO]).includes(h)){var v,m,g,y=function(){return v=new Set,m=new Map,g=new Map,a().forEach((function(e){var t=document.querySelector("[data-menu-id='".concat(Ak(o,e),"']"));t&&(v.add(t),g.set(t,e),m.set(e,t))})),v};y();var b=function(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}(m.get(n),v),x=g.get(b),w=function(e,t,n,r){var o,i,a,u,s="prev",c="next",l="children",f="parent";if("inline"===e&&r===zO)return{inlineTrigger:!0};var d=(qe(o={},BO,s),qe(o,VO,c),o),p=(qe(i={},LO,n?c:s),qe(i,jO,n?s:c),qe(i,VO,l),qe(i,zO,l),i),h=(qe(a={},BO,s),qe(a,VO,c),qe(a,zO,l),qe(a,WO,f),qe(a,LO,n?l:f),qe(a,jO,n?f:l),a);switch(null===(u={inline:d,horizontal:p,vertical:h,inlineSub:d,horizontalSub:h,verticalSub:h}["".concat(e).concat(t?"":"Sub")])||void 0===u?void 0:u[r]){case s:return{offset:-1,sibling:!0};case c:return{offset:1,sibling:!0};case f:return{offset:-1,sibling:!1};case l:return{offset:1,sibling:!1};default:return null}}(t,1===u(x,!0).length,r,h);if(!w&&h!==UO&&h!==HO)return;(GO.includes(h)||[UO,HO].includes(h))&&e.preventDefault();var E=function(e){if(e){var t=e,n=e.querySelector("a");(null===n||void 0===n?void 0:n.getAttribute("href"))&&(t=n);var r=g.get(e);s(r),p(),f.current=on((function(){d.current===r&&t.focus()}))}};if([UO,HO].includes(h)||w.sibling||!b){var C,_,k=qO(C=b&&"inline"!==t?function(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}(b):i.current,v);_=h===UO?k[0]:h===HO?k[k.length-1]:KO(C,v,b,w.offset),E(_)}else if(w.inlineTrigger)c(x);else if(w.offset>0)c(x,!0),p(),f.current=on((function(){y();var e=b.getAttribute("aria-controls"),t=KO(document.getElementById(e),v);E(t)}),5);else if(w.offset<0){var S=u(x,!0),O=S[S.length-2],T=m.get(O);c(O,!1),E(T)}}null===l||void 0===l||l(e)}}var XO=Math.random().toFixed(5).toString().slice(2),YO=0;var QO="__RC_UTIL_PATH_SPLIT__",ZO=function(e){return e.join(QO)},JO="rc-menu-more";function eT(){var t=s(e.useState({}),2)[1],n=(0,e.useRef)(new Map),r=(0,e.useRef)(new Map),o=s(e.useState([]),2),i=o[0],a=o[1],u=(0,e.useRef)(0),c=(0,e.useRef)(!1),l=(0,e.useCallback)((function(e,o){var i=ZO(o);r.current.set(i,e),n.current.set(e,i),u.current+=1;var a,s=u.current;a=function(){s===u.current&&(c.current||t({}))},Promise.resolve().then(a)}),[]),f=(0,e.useCallback)((function(e,t){var o=ZO(t);r.current.delete(o),n.current.delete(e)}),[]),d=(0,e.useCallback)((function(e){a(e)}),[]),p=(0,e.useCallback)((function(e,t){var r=n.current.get(e)||"",o=r.split(QO);return t&&i.includes(o[0])&&o.unshift(JO),o}),[i]),h=(0,e.useCallback)((function(e,t){return e.some((function(e){return p(e,!0).includes(t)}))}),[p]),v=(0,e.useCallback)((function(e){var t="".concat(n.current.get(e)).concat(QO),o=new Set;return Tn(r.current.keys()).forEach((function(e){e.startsWith(t)&&o.add(r.current.get(e))})),o}),[]);return e.useEffect((function(){return function(){c.current=!0}}),[]),{registerPath:l,unregisterPath:f,refreshOverflowKeys:d,isSubPathKey:h,getKeyPath:p,getKeys:function(){var e=Tn(n.current.keys());return i.length&&e.push(JO),e},getSubPathKeys:v}}var tT=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],nT=[],rT=e.forwardRef((function(t,n){var r,o,i=t.prefixCls,a=void 0===i?"rc-menu":i,u=t.rootClassName,c=t.style,l=t.className,f=t.tabIndex,d=void 0===f?0:f,p=t.items,h=t.children,v=t.direction,m=t.id,g=t.mode,y=void 0===g?"vertical":g,b=t.inlineCollapsed,x=t.disabled,w=t.disabledOverflow,E=t.subMenuOpenDelay,C=void 0===E?.1:E,_=t.subMenuCloseDelay,k=void 0===_?.1:_,S=t.forceSubMenuRender,O=t.defaultOpenKeys,T=t.openKeys,A=t.activeKey,R=t.defaultActiveFirst,N=t.selectable,I=void 0===N||N,P=t.multiple,D=void 0!==P&&P,M=t.defaultSelectedKeys,F=t.selectedKeys,L=t.onSelect,j=t.onDeselect,B=t.inlineIndent,V=void 0===B?24:B,z=t.motion,W=t.defaultMotions,U=t.triggerSubMenuAction,H=void 0===U?"hover":U,G=t.builtinPlacements,q=t.itemIcon,K=t.expandIcon,$=t.overflowedIndicator,X=void 0===$?"...":$,Y=t.overflowedIndicatorPopupClassName,Q=t.getPopupContainer,Z=t.onClick,J=t.onOpenChange,ee=t.onKeyDown,te=(t.openAnimation,t.openTransitionName,t._internalRenderMenuItem),ne=t._internalRenderSubMenuItem,re=Ke(t,tT),oe=e.useMemo((function(){return zk(h,p,nT)}),[h,p]),ie=s(e.useState(!1),2),ae=ie[0],ue=ie[1],se=e.useRef(),ce=function(t){var n=s(c_(t,{value:t}),2),r=n[0],o=n[1];return e.useEffect((function(){YO+=1;var e="".concat(XO,"-").concat(YO);o("rc-menu-uuid-".concat(e))}),[]),r}(m),le="rtl"===v;var fe=s(e.useMemo((function(){return"inline"!==y&&"vertical"!==y||!b?[y,!1]:["vertical",b]}),[y,b]),2),de=fe[0],pe=fe[1],he=s(e.useState(0),2),ve=he[0],me=he[1],ge=ve>=oe.length-1||"horizontal"!==de||w,ye=s(c_(O,{value:T,postState:function(e){return e||nT}}),2),be=ye[0],xe=ye[1],we=function(e){xe(e),null===J||void 0===J||J(e)},Ee=s(e.useState(be),2),Ce=Ee[0],_e=Ee[1],ke="inline"===de,Se=e.useRef(!1);e.useEffect((function(){ke&&_e(be)}),[be]),e.useEffect((function(){Se.current?ke?xe(Ce):we(nT):Se.current=!0}),[ke]);var Oe=eT(),Te=Oe.registerPath,Ae=Oe.unregisterPath,Re=Oe.refreshOverflowKeys,Ne=Oe.isSubPathKey,Ie=Oe.getKeyPath,Pe=Oe.getKeys,De=Oe.getSubPathKeys,Me=e.useMemo((function(){return{registerPath:Te,unregisterPath:Ae}}),[Te,Ae]),Fe=e.useMemo((function(){return{isSubPathKey:Ne}}),[Ne]);e.useEffect((function(){Re(ge?nT:oe.slice(ve+1).map((function(e){return e.key})))}),[ve,ge]);var Le=s(c_(A||R&&(null===(r=oe[0])||void 0===r?void 0:r.key),{value:A}),2),je=Le[0],Be=Le[1],Ve=Wk((function(e){Be(e)})),ze=Wk((function(){Be(void 0)}));(0,e.useImperativeHandle)(n,(function(){return{list:se.current,focus:function(e){var t,n,r,o,i=null!==je&&void 0!==je?je:null===(t=oe.find((function(e){return!e.props.disabled})))||void 0===t?void 0:t.key;i&&(null===(n=se.current)||void 0===n||null===(r=n.querySelector("li[data-menu-id='".concat(Ak(ce,i),"']")))||void 0===r||null===(o=r.focus)||void 0===o||o.call(r,e))}}}));var We=s(c_(M||[],{value:F,postState:function(e){return Array.isArray(e)?e:null===e||void 0===e?nT:[e]}}),2),Ue=We[0],He=We[1],$e=Wk((function(e){null===Z||void 0===Z||Z(bk(e)),function(e){if(I){var t,n=e.key,r=Ue.includes(n);t=D?r?Ue.filter((function(e){return e!==n})):[].concat(Tn(Ue),[n]):[n],He(t);var o=Xe(Xe({},e),{},{selectedKeys:t});r?null===j||void 0===j||j(o):null===L||void 0===L||L(o)}!D&&be.length&&"inline"!==de&&we(nT)}(e)})),Ye=Wk((function(e,t){var n=be.filter((function(t){return t!==e}));if(t)n.push(e);else if("inline"!==de){var r=De(e);n=n.filter((function(e){return!r.has(e)}))}K_()(be,n)||we(n)})),Qe=Wk(Q),Ze=$O(de,je,le,ce,se,Pe,Ie,Be,(function(e,t){var n=null!==t&&void 0!==t?t:!be.includes(e);Ye(e,n)}),ee);e.useEffect((function(){ue(!0)}),[]);var Je=e.useMemo((function(){return{_internalRenderMenuItem:te,_internalRenderSubMenuItem:ne}}),[te,ne]),et="horizontal"!==de||w?oe:oe.map((function(t,n){return e.createElement(mk,{key:t.key,overflowDisabled:n>ve},t)})),tt=e.createElement(pk,Ge({id:m,ref:se,prefixCls:"".concat(a,"-overflow"),component:"ul",itemComponent:Lk,className:Ct()(a,"".concat(a,"-root"),"".concat(a,"-").concat(de),l,(o={},qe(o,"".concat(a,"-inline-collapsed"),pe),qe(o,"".concat(a,"-rtl"),le),o),u),dir:v,style:c,role:"menu",tabIndex:d,data:et,renderRawItem:function(e){return e},renderRawRest:function(t){var n=t.length,r=n?oe.slice(-n):null;return e.createElement(DO,{eventKey:JO,title:X,disabled:ge,internalPopupClose:0===n,popupClassName:Y},r)},maxCount:"horizontal"!==de||w?pk.INVALIDATE:pk.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(e){me(e)},onKeyDown:Ze},re));return e.createElement(Nk.Provider,{value:Je},e.createElement(Tk.Provider,{value:ce},e.createElement(mk,{prefixCls:a,rootClassName:u,mode:de,openKeys:be,rtl:le,disabled:x,motion:ae?z:null,defaultMotions:ae?W:null,activeKey:je,onActive:Ve,onInactive:ze,selectedKeys:Ue,inlineIndent:V,subMenuOpenDelay:C,subMenuCloseDelay:k,forceSubMenuRender:S,builtinPlacements:G,triggerSubMenuAction:H,getPopupContainer:Qe,itemIcon:q,expandIcon:K,onItemClick:$e,onOpenChange:Ye},e.createElement(Ok.Provider,{value:Fe},tt),e.createElement("div",{style:{display:"none"},"aria-hidden":!0},e.createElement(Ck.Provider,{value:Me},oe)))))})),oT=["className","title","eventKey","children"],iT=["children"],aT=function(t){var n=t.className,r=t.title,o=(t.eventKey,t.children),i=Ke(t,oT),a=e.useContext(vk).prefixCls,u="".concat(a,"-item-group");return e.createElement("li",Ge({},i,{onClick:function(e){return e.stopPropagation()},className:Ct()(u,n)}),e.createElement("div",{className:"".concat(u,"-title"),title:"string"===typeof r?r:void 0},r),e.createElement("ul",{className:"".concat(u,"-list")},o))};function uT(t){var n=t.children,r=Ke(t,iT),o=Bk(n,Sk(r.eventKey));return _k()?o:e.createElement(aT,u_(r,["warnKey"]),o)}function sT(t){var n=t.className,r=t.style,o=e.useContext(vk).prefixCls;return _k()?null:e.createElement("li",{className:Ct()("".concat(o,"-item-divider"),n),style:r})}var cT=rT;cT.Item=Lk,cT.SubMenu=DO,cT.ItemGroup=uT,cT.Divider=sT;var lT=cT,fT={adjustX:1,adjustY:1},dT=[0,0],pT={topLeft:{points:["bl","tl"],overflow:fT,offset:[0,-4],targetOffset:dT},topCenter:{points:["bc","tc"],overflow:fT,offset:[0,-4],targetOffset:dT},topRight:{points:["br","tr"],overflow:fT,offset:[0,-4],targetOffset:dT},bottomLeft:{points:["tl","bl"],overflow:fT,offset:[0,4],targetOffset:dT},bottomCenter:{points:["tc","bc"],overflow:fT,offset:[0,4],targetOffset:dT},bottomRight:{points:["tr","br"],overflow:fT,offset:[0,4],targetOffset:dT}},hT=z_.ESC,vT=z_.TAB;var mT=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function gT(t,n){var r=t.arrow,o=void 0!==r&&r,i=t.prefixCls,a=void 0===i?"rc-dropdown":i,u=t.transitionName,c=t.animation,l=t.align,f=t.placement,d=void 0===f?"bottomLeft":f,p=t.placements,h=void 0===p?pT:p,v=t.getPopupContainer,m=t.showAction,g=t.hideAction,y=t.overlayClassName,b=t.overlayStyle,x=t.visible,w=t.trigger,E=void 0===w?["hover"]:w,C=t.autoFocus,_=Ke(t,mT),k=s(e.useState(),2),S=k[0],O=k[1],T="visible"in t?x:S,A=e.useRef(null);e.useImperativeHandle(n,(function(){return A.current})),function(t){var n=t.visible,r=t.setTriggerVisible,o=t.triggerRef,i=t.onVisibleChange,a=t.autoFocus,u=e.useRef(!1),s=function(){var e,t,a,u;n&&o.current&&(null===(e=o.current)||void 0===e||null===(t=e.triggerRef)||void 0===t||null===(a=t.current)||void 0===a||null===(u=a.focus)||void 0===u||u.call(a),r(!1),"function"===typeof i&&i(!1))},c=function(){var e,t,n,r,i=FO(null===(e=o.current)||void 0===e||null===(t=e.popupRef)||void 0===t||null===(n=t.current)||void 0===n||null===(r=n.getElement)||void 0===r?void 0:r.call(n))[0];return!!(null===i||void 0===i?void 0:i.focus)&&(i.focus(),u.current=!0,!0)},l=function(e){switch(e.keyCode){case hT:s();break;case vT:var t=!1;u.current||(t=c()),t?e.preventDefault():s()}};e.useEffect((function(){return n?(window.addEventListener("keydown",l),a&&on(c,3),function(){window.removeEventListener("keydown",l),u.current=!1}):function(){u.current=!1}}),[n])}({visible:T,setTriggerVisible:O,triggerRef:A,onVisibleChange:t.onVisibleChange,autoFocus:C});var R=function(){var n=function(){var e=t.overlay;return"function"===typeof e?e():e}();return e.createElement(e.Fragment,null,o&&e.createElement("div",{className:"".concat(a,"-arrow")}),n)},N=g;return N||-1===E.indexOf("contextMenu")||(N=["click"]),e.createElement(CO,Xe(Xe({builtinPlacements:h},_),{},{prefixCls:a,ref:A,popupClassName:Ct()(y,qe({},"".concat(a,"-show-arrow"),o)),popupStyle:b,action:E,showAction:m,hideAction:N||[],popupPlacement:d,popupAlign:l,popupTransitionName:u,popupAnimation:c,popupVisible:T,stretch:function(){var e=t.minOverlayWidthMatchTrigger,n=t.alignPoint;return"minOverlayWidthMatchTrigger"in t?e:!n}()?"minWidth":"",popup:"function"===typeof t.overlay?R:R(),onPopupVisibleChange:function(e){var n=t.onVisibleChange;O(e),"function"===typeof n&&n(e)},onPopupClick:function(e){var n=t.onOverlayClick;O(!1),n&&n(e)},getPopupContainer:v}),function(){var n=t.children,r=n.props?n.props:{},o=Ct()(r.className,function(){var e=t.openClassName;return void 0!==e?e:"".concat(a,"-open")}());return T&&n?e.cloneElement(n,{className:o}):n}())}var yT=e.forwardRef(gT);function bT(t,n){var r=t.prefixCls,o=t.editable,i=t.locale,a=t.style;return o&&!1!==o.showAdd?e.createElement("button",{ref:n,type:"button",className:"".concat(r,"-nav-add"),style:a,"aria-label":(null===i||void 0===i?void 0:i.addAriaLabel)||"Add tab",onClick:function(e){o.onEdit("add",{event:e})}},o.addIcon||"+"):null}var xT=e.forwardRef(bT);function wT(t,n){var r=t.prefixCls,o=t.id,i=t.tabs,a=t.locale,u=t.mobile,c=t.moreIcon,l=void 0===c?"More":c,f=t.moreTransitionName,d=t.style,p=t.className,h=t.editable,v=t.tabBarGutter,m=t.rtl,g=t.removeAriaLabel,y=t.onTabClick,b=t.popupClassName,x=s((0,e.useState)(!1),2),w=x[0],E=x[1],C=s((0,e.useState)(null),2),_=C[0],k=C[1],S="".concat(o,"-more-popup"),O="".concat(r,"-dropdown"),T=null!==_?"".concat(S,"-").concat(_):null,A=null===a||void 0===a?void 0:a.dropdownAriaLabel;var R=e.createElement(lT,{onClick:function(e){var t=e.key,n=e.domEvent;y(t,n),E(!1)},prefixCls:"".concat(O,"-menu"),id:S,tabIndex:-1,role:"listbox","aria-activedescendant":T,selectedKeys:[_],"aria-label":void 0!==A?A:"expanded dropdown"},i.map((function(t){var n=h&&!1!==t.closable&&!t.disabled;return e.createElement(Lk,{key:t.key,id:"".concat(S,"-").concat(t.key),role:"option","aria-controls":o&&"".concat(o,"-panel-").concat(t.key),disabled:t.disabled},e.createElement("span",null,t.tab),n&&e.createElement("button",{type:"button","aria-label":g||"remove",tabIndex:0,className:"".concat(O,"-menu-item-remove"),onClick:function(e){e.stopPropagation(),function(e,t){e.preventDefault(),e.stopPropagation(),h.onEdit("remove",{key:t,event:e})}(e,t.key)}},t.closeIcon||h.removeIcon||"\xd7"))})));function N(e){for(var t=i.filter((function(e){return!e.disabled})),n=t.findIndex((function(e){return e.key===_}))||0,r=t.length,o=0;o<r;o+=1){var a=t[n=(n+e+r)%r];if(!a.disabled)return void k(a.key)}}(0,e.useEffect)((function(){var e=document.getElementById(T);e&&e.scrollIntoView&&e.scrollIntoView(!1)}),[_]),(0,e.useEffect)((function(){w||k(null)}),[w]);var I=qe({},m?"marginRight":"marginLeft",v);i.length||(I.visibility="hidden",I.order=1);var P=Ct()(qe({},"".concat(O,"-rtl"),m)),D=u?null:e.createElement(yT,{prefixCls:O,overlay:R,trigger:["hover"],visible:w,transitionName:f,onVisibleChange:E,overlayClassName:Ct()(P,b),mouseEnterDelay:.1,mouseLeaveDelay:.1},e.createElement("button",{type:"button",className:"".concat(r,"-nav-more"),style:I,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":S,id:"".concat(o,"-more"),"aria-expanded":w,onKeyDown:function(e){var t=e.which;if(w)switch(t){case z_.UP:N(-1),e.preventDefault();break;case z_.DOWN:N(1),e.preventDefault();break;case z_.ESC:E(!1);break;case z_.SPACE:case z_.ENTER:null!==_&&y(_,e)}else[z_.DOWN,z_.SPACE,z_.ENTER].includes(t)&&(E(!0),e.preventDefault())}},l));return e.createElement("div",{className:Ct()("".concat(r,"-nav-operations"),p),style:d,ref:n},D,e.createElement(xT,{prefixCls:r,locale:a,editable:h}))}var ET=e.memo(e.forwardRef(wT),(function(e,t){return t.tabMoving})),CT=(0,e.createContext)(null),_T=Math.pow(.995,20);function kT(t,n){var r=e.useRef(t),o=s(e.useState({}),2)[1];return[r.current,function(e){var t="function"===typeof e?e(r.current):e;t!==r.current&&n(t,r.current),r.current=t,o({})}]}var ST=function(t){var n,r=t.position,o=t.prefixCls,i=t.extra;if(!i)return null;var a={};return i&&"object"===nt(i)&&!e.isValidElement(i)?a=i:a.right=i,"right"===r&&(n=a.right),"left"===r&&(n=a.left),n?e.createElement("div",{className:"".concat(o,"-extra-content")},n):null};function OT(t,n){var r,o=e.useContext(CT),i=o.prefixCls,a=o.tabs,u=t.className,c=t.style,l=t.id,f=t.animated,d=t.activeKey,p=t.rtl,h=t.extra,v=t.editable,m=t.locale,g=t.tabPosition,y=t.tabBarGutter,b=t.children,x=t.onTabClick,w=t.onTabScroll,E=(0,e.useRef)(),C=(0,e.useRef)(),_=(0,e.useRef)(),k=(0,e.useRef)(),S=function(){var t=(0,e.useRef)(new Map);return[function(n){return t.current.has(n)||t.current.set(n,e.createRef()),t.current.get(n)},function(e){t.current.delete(e)}]}(),O=s(S,2),T=O[0],A=O[1],R="top"===g||"bottom"===g,N=kT(0,(function(e,t){R&&w&&w({direction:e>t?"left":"right"})})),I=s(N,2),P=I[0],D=I[1],M=kT(0,(function(e,t){!R&&w&&w({direction:e>t?"top":"bottom"})})),F=s(M,2),L=F[0],j=F[1],B=s((0,e.useState)(0),2),V=B[0],z=B[1],W=s((0,e.useState)(0),2),U=W[0],H=W[1],G=s((0,e.useState)(null),2),q=G[0],K=G[1],$=s((0,e.useState)(null),2),X=$[0],Y=$[1],Q=s((0,e.useState)(0),2),Z=Q[0],J=Q[1],ee=s((0,e.useState)(0),2),te=ee[0],ne=ee[1],re=function(t){var n=(0,e.useRef)([]),r=s((0,e.useState)({}),2)[1],o=(0,e.useRef)("function"===typeof t?t():t),i=B_((function(){var e=o.current;n.current.forEach((function(t){e=t(e)})),n.current=[],o.current=e,r({})}));return[o.current,function(e){n.current.push(e),i()}]}(new Map),oe=s(re,2),ie=oe[0],ae=oe[1],ue=function(t,n,r){return(0,e.useMemo)((function(){for(var e,r=new Map,o=n.get(null===(e=t[0])||void 0===e?void 0:e.key)||H_,i=o.left+o.width,a=0;a<t.length;a+=1){var u,s=t[a].key,c=n.get(s);c||(c=n.get(null===(u=t[a-1])||void 0===u?void 0:u.key)||H_);var l=r.get(s)||Xe({},c);l.right=i-l.left-l.width,r.set(s,l)}return r}),[t.map((function(e){return e.key})).join("_"),n,r])}(a,ie,V),se="".concat(i,"-nav-operations-hidden"),ce=0,le=0;function fe(e){return e<ce?ce:e>le?le:e}R?p?(ce=0,le=Math.max(0,V-q)):(ce=Math.min(0,q-V),le=0):(ce=Math.min(0,X-U),le=0);var de=(0,e.useRef)(),pe=s((0,e.useState)(),2),he=pe[0],ve=pe[1];function me(){ve(Date.now())}function ge(){window.clearTimeout(de.current)}function ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=ue.get(e)||{width:0,height:0,left:0,right:0,top:0};if(R){var n=P;p?t.right<P?n=t.right:t.right+t.width>P+q&&(n=t.right+t.width-q):t.left<-P?n=-t.left:t.left+t.width>-P+q&&(n=-(t.left+t.width-q)),j(0),D(fe(n))}else{var r=L;t.top<-L?r=-t.top:t.top+t.height>-L+X&&(r=-(t.top+t.height-X)),D(0),j(fe(r))}}!function(t,n){var r=s((0,e.useState)(),2),o=r[0],i=r[1],a=s((0,e.useState)(0),2),u=a[0],c=a[1],l=s((0,e.useState)(0),2),f=l[0],d=l[1],p=s((0,e.useState)(),2),h=p[0],v=p[1],m=(0,e.useRef)(),g=(0,e.useRef)(),y=(0,e.useRef)(null);y.current={onTouchStart:function(e){var t=e.touches[0],n=t.screenX,r=t.screenY;i({x:n,y:r}),window.clearInterval(m.current)},onTouchMove:function(e){if(o){e.preventDefault();var t=e.touches[0],r=t.screenX,a=t.screenY;i({x:r,y:a});var s=r-o.x,l=a-o.y;n(s,l);var f=Date.now();c(f),d(f-u),v({x:s,y:l})}},onTouchEnd:function(){if(o&&(i(null),v(null),h)){var e=h.x/f,t=h.y/f,r=Math.abs(e),a=Math.abs(t);if(Math.max(r,a)<.1)return;var u=e,s=t;m.current=window.setInterval((function(){Math.abs(u)<.01&&Math.abs(s)<.01?window.clearInterval(m.current):n(20*(u*=_T),20*(s*=_T))}),20)}},onWheel:function(e){var t=e.deltaX,r=e.deltaY,o=0,i=Math.abs(t),a=Math.abs(r);i===a?o="x"===g.current?t:r:i>a?(o=t,g.current="x"):(o=r,g.current="y"),n(-o,-o)&&e.preventDefault()}},e.useEffect((function(){function e(e){y.current.onTouchMove(e)}function n(e){y.current.onTouchEnd(e)}return document.addEventListener("touchmove",e,{passive:!1}),document.addEventListener("touchend",n,{passive:!1}),t.current.addEventListener("touchstart",(function(e){y.current.onTouchStart(e)}),{passive:!1}),t.current.addEventListener("wheel",(function(e){y.current.onWheel(e)})),function(){document.removeEventListener("touchmove",e),document.removeEventListener("touchend",n)}}),[])}(E,(function(e,t){function n(e,t){e((function(e){return fe(e+t)}))}if(R){if(q>=V)return!1;n(D,e)}else{if(X>=U)return!1;n(j,t)}return ge(),me(),!0})),(0,e.useEffect)((function(){return ge(),he&&(de.current=window.setTimeout((function(){ve(0)}),100)),ge}),[he]);var be=function(t,n,r,o,i){var a,u,s,c=i.tabs,l=i.tabPosition,f=i.rtl;["top","bottom"].includes(l)?(a="width",u=f?"right":"left",s=Math.abs(n.left)):(a="height",u="top",s=-n.top);var d=n[a],p=r[a],h=o[a],v=d;return p+h>d&&p<d&&(v=d-h),(0,e.useMemo)((function(){if(!c.length)return[0,0];for(var e=c.length,n=e,r=0;r<e;r+=1){var o=t.get(c[r].key)||G_;if(o[u]+o[a]>s+v){n=r-1;break}}for(var i=0,l=e-1;l>=0;l-=1)if((t.get(c[l].key)||G_)[u]<s){i=l+1;break}return[i,n]}),[t,s,v,l,c.map((function(e){return e.key})).join("_"),f])}(ue,{width:q,height:X,left:P,top:L},{width:V,height:U},{width:Z,height:te},Xe(Xe({},t),{},{tabs:a})),xe=s(be,2),we=xe[0],Ee=xe[1],Ce={};"top"===g||"bottom"===g?Ce[p?"marginRight":"marginLeft"]=y:Ce.marginTop=y;var _e=a.map((function(t,n){var r=t.key;return e.createElement(U_,{id:l,prefixCls:i,key:r,tab:t,style:0===n?void 0:Ce,closable:t.closable,editable:v,active:r===d,renderWrapper:b,removeAriaLabel:null===m||void 0===m?void 0:m.removeAriaLabel,ref:T(r),onClick:function(e){x(r,e)},onRemove:function(){A(r)},onFocus:function(){ye(r),me(),E.current&&(p||(E.current.scrollLeft=0),E.current.scrollTop=0)}})})),ke=B_((function(){var e,t,n,r,o,i,u=(null===(e=E.current)||void 0===e?void 0:e.offsetWidth)||0,s=(null===(t=E.current)||void 0===t?void 0:t.offsetHeight)||0,c=(null===(n=k.current)||void 0===n?void 0:n.offsetWidth)||0,l=(null===(r=k.current)||void 0===r?void 0:r.offsetHeight)||0;K(u),Y(s),J(c),ne(l);var f=((null===(o=C.current)||void 0===o?void 0:o.offsetWidth)||0)-c,d=((null===(i=C.current)||void 0===i?void 0:i.offsetHeight)||0)-l;z(f),H(d),ae((function(){var e=new Map;return a.forEach((function(t){var n=t.key,r=T(n).current;r&&e.set(n,{width:r.offsetWidth,height:r.offsetHeight,left:r.offsetLeft,top:r.offsetTop})})),e}))})),Se=a.slice(0,we),Oe=a.slice(Ee+1),Te=[].concat(Tn(Se),Tn(Oe)),Ae=s((0,e.useState)(),2),Re=Ae[0],Ne=Ae[1],Ie=ue.get(d),Pe=(0,e.useRef)();function De(){on.cancel(Pe.current)}(0,e.useEffect)((function(){var e={};return Ie&&(R?(p?e.right=Ie.right:e.left=Ie.left,e.width=Ie.width):(e.top=Ie.top,e.height=Ie.height)),De(),Pe.current=on((function(){Ne(e)})),De}),[Ie,R,p]),(0,e.useEffect)((function(){ye()}),[d,Ie,ue,R]),(0,e.useEffect)((function(){ke()}),[p,y,d,a.map((function(e){return e.key})).join("_")]);var Me,Fe,Le,je,Be=!!Te.length,Ve="".concat(i,"-nav-wrap");return R?p?(Fe=P>0,Me=P+q<V):(Me=P<0,Fe=-P+q<V):(Le=L<0,je=-L+X<U),e.createElement("div",{ref:n,role:"tablist",className:Ct()("".concat(i,"-nav"),u),style:c,onKeyDown:function(){me()}},e.createElement(ST,{position:"left",extra:h,prefixCls:i}),e.createElement(j_,{onResize:ke},e.createElement("div",{className:Ct()(Ve,(r={},qe(r,"".concat(Ve,"-ping-left"),Me),qe(r,"".concat(Ve,"-ping-right"),Fe),qe(r,"".concat(Ve,"-ping-top"),Le),qe(r,"".concat(Ve,"-ping-bottom"),je),r)),ref:E},e.createElement(j_,{onResize:ke},e.createElement("div",{ref:C,className:"".concat(i,"-nav-list"),style:{transform:"translate(".concat(P,"px, ").concat(L,"px)"),transition:he?"none":void 0}},_e,e.createElement(xT,{ref:k,prefixCls:i,locale:m,editable:v,style:Xe(Xe({},0===_e.length?void 0:Ce),{},{visibility:Be?"hidden":null})}),e.createElement("div",{className:Ct()("".concat(i,"-ink-bar"),qe({},"".concat(i,"-ink-bar-animated"),f.inkBar)),style:Re}))))),e.createElement(ET,Ge({},t,{removeAriaLabel:null===m||void 0===m?void 0:m.removeAriaLabel,ref:_,prefixCls:i,tabs:Te,className:!Be&&se,tabMoving:!!he})),e.createElement(ST,{position:"right",extra:h,prefixCls:i}))}var TT=e.forwardRef(OT);function AT(t){var n=t.id,r=t.activeKey,o=t.animated,i=t.tabPosition,a=t.rtl,u=t.destroyInactiveTabPane,s=e.useContext(CT),c=s.prefixCls,l=s.tabs,f=o.tabPane,d=l.findIndex((function(e){return e.key===r}));return e.createElement("div",{className:Ct()("".concat(c,"-content-holder"))},e.createElement("div",{className:Ct()("".concat(c,"-content"),"".concat(c,"-content-").concat(i),qe({},"".concat(c,"-content-animated"),f)),style:d&&f?qe({},a?"marginRight":"marginLeft","-".concat(d,"00%")):null},l.map((function(t){return e.cloneElement(t.node,{key:t.key,prefixCls:c,tabKey:t.key,id:n,animated:f,active:t.key===r,destroyInactiveTabPane:u})}))))}function RT(t){var n=t.prefixCls,r=t.forceRender,o=t.className,i=t.style,a=t.id,u=t.active,c=t.animated,l=t.destroyInactiveTabPane,f=t.tabKey,d=t.children,p=s(e.useState(r),2),h=p[0],v=p[1];e.useEffect((function(){u?v(!0):l&&v(!1)}),[u,l]);var m={};return u||(c?(m.visibility="hidden",m.height=0,m.overflowY="hidden"):m.display="none"),e.createElement("div",{id:a&&"".concat(a,"-panel-").concat(f),role:"tabpanel",tabIndex:u?0:-1,"aria-labelledby":a&&"".concat(a,"-tab-").concat(f),"aria-hidden":!u,style:Xe(Xe({},m),i),className:Ct()("".concat(n,"-tabpane"),u&&"".concat(n,"-tabpane-active"),o)},(u||h||r)&&d)}var NT=["id","prefixCls","className","children","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","popupClassName"],IT=0;function PT(t,n){var r,o,i=t.id,a=t.prefixCls,u=void 0===a?"rc-tabs":a,c=t.className,l=t.children,f=t.direction,d=t.activeKey,p=t.defaultActiveKey,h=t.editable,v=t.animated,m=void 0===v?{inkBar:!0,tabPane:!1}:v,g=t.tabPosition,y=void 0===g?"top":g,b=t.tabBarGutter,x=t.tabBarStyle,w=t.tabBarExtraContent,E=t.locale,C=t.moreIcon,_=t.moreTransitionName,k=t.destroyInactiveTabPane,S=t.renderTabBar,O=t.onChange,T=t.onTabClick,A=t.onTabScroll,R=t.popupClassName,N=Ke(t,NT),I=function(t){return Sr(t).map((function(t){return e.isValidElement(t)?Xe(Xe({key:void 0!==t.key?String(t.key):void 0},t.props),{},{node:t}):null})).filter((function(e){return e}))}(l),P="rtl"===f;o=!1===m?{inkBar:!1,tabPane:!1}:!0===m?{inkBar:!0,tabPane:!0}:Xe({inkBar:!0,tabPane:!1},"object"===nt(m)?m:{});var D=s((0,e.useState)(!1),2),M=D[0],F=D[1];(0,e.useEffect)((function(){F(s_())}),[]);var L=s(c_((function(){var e;return null===(e=I[0])||void 0===e?void 0:e.key}),{value:d,defaultValue:p}),2),j=L[0],B=L[1],V=s((0,e.useState)((function(){return I.findIndex((function(e){return e.key===j}))})),2),z=V[0],W=V[1];(0,e.useEffect)((function(){var e,t=I.findIndex((function(e){return e.key===j}));-1===t&&(t=Math.max(0,Math.min(z,I.length-1)),B(null===(e=I[t])||void 0===e?void 0:e.key));W(t)}),[I.map((function(e){return e.key})).join("_"),j,z]);var U=s(c_(null,{value:i}),2),H=U[0],G=U[1],q=y;M&&!["left","right"].includes(y)&&(q="top"),(0,e.useEffect)((function(){i||(G("rc-tabs-".concat(IT)),IT+=1)}),[]);var K,$={id:H,activeKey:j,animated:o,tabPosition:q,rtl:P,mobile:M},X=Xe(Xe({},$),{},{editable:h,locale:E,moreIcon:C,moreTransitionName:_,tabBarGutter:b,onTabClick:function(e,t){null===T||void 0===T||T(e,t);var n=e!==j;B(e),n&&(null===O||void 0===O||O(e))},onTabScroll:A,extra:w,style:x,panes:l,popupClassName:R});return K=S?S(X,TT):e.createElement(TT,X),e.createElement(CT.Provider,{value:{tabs:I,prefixCls:u}},e.createElement("div",Ge({ref:n,id:i,className:Ct()(u,"".concat(u,"-").concat(q),(r={},qe(r,"".concat(u,"-mobile"),M),qe(r,"".concat(u,"-editable"),h),qe(r,"".concat(u,"-rtl"),P),r),c)},N),K,e.createElement(AT,Ge({destroyInactiveTabPane:k},$,{animated:o}))))}var DT=e.forwardRef(PT);DT.TabPane=RT;var MT=DT,FT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},LT=function(t,n){return e.createElement(cr,Xe(Xe({},t),{},{ref:n,icon:FT}))};LT.displayName="EllipsisOutlined";var jT=e.forwardRef(LT),BT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},VT=function(t,n){return e.createElement(cr,Xe(Xe({},t),{},{ref:n,icon:BT}))};VT.displayName="PlusOutlined";var zT=e.forwardRef(VT),WT=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};function UT(t){var n,r=t.type,o=t.className,i=t.size,a=t.onEdit,u=t.hideAdd,s=t.centered,c=t.addIcon,l=WT(t,["type","className","size","onEdit","hideAdd","centered","addIcon"]),f=l.prefixCls,d=l.moreIcon,p=void 0===d?e.createElement(jT,null):d,h=e.useContext(_r),v=h.getPrefixCls,m=h.direction,g=v("tabs",f);"editable-card"===r&&(n={onEdit:function(e,t){var n=t.key,r=t.event;null===a||void 0===a||a("add"===e?r:n,e)},removeIcon:e.createElement(fr,null),addIcon:c||e.createElement(zT,null),showAdd:!0!==u});var y=v();return e.createElement(Ji.Consumer,null,(function(t){var a,u=void 0!==i?i:t;return e.createElement(MT,Ge({direction:m,moreTransitionName:"".concat(y,"-slide-up")},l,{className:Ct()((a={},qe(a,"".concat(g,"-").concat(u),u),qe(a,"".concat(g,"-card"),["card","editable-card"].includes(r)),qe(a,"".concat(g,"-editable-card"),"editable-card"===r),qe(a,"".concat(g,"-centered"),s),a),o),editable:n,moreIcon:p,prefixCls:g}))}))}UT.TabPane=RT;var HT=UT,GT=function(t){var n=t.prefixCls,r=t.className,o=t.width,i=t.style;return e.createElement("h3",{className:Ct()(n,r),style:Ge({width:o},i)})},qT=function(t){var n=function(e){var n=t.width,r=t.rows,o=void 0===r?2:r;return Array.isArray(n)?n[e]:o-1===e?n:void 0},r=t.prefixCls,o=t.className,i=t.style,a=t.rows,u=Tn(Array(a)).map((function(t,r){return e.createElement("li",{key:r,style:{width:n(r)}})}));return e.createElement("ul",{className:Ct()(r,o),style:i},u)},KT=function(t){var n,r,o=t.prefixCls,i=t.className,a=t.style,u=t.size,s=t.shape,c=Ct()((qe(n={},"".concat(o,"-lg"),"large"===u),qe(n,"".concat(o,"-sm"),"small"===u),n)),l=Ct()((qe(r={},"".concat(o,"-circle"),"circle"===s),qe(r,"".concat(o,"-square"),"square"===s),qe(r,"".concat(o,"-round"),"round"===s),r)),f="number"===typeof u?{width:u,height:u,lineHeight:"".concat(u,"px")}:{};return e.createElement("span",{className:Ct()(o,c,l,i),style:Ge(Ge({},f),a)})},$T=function(t){var n=t.prefixCls,r=t.className,o=t.active,i=(0,e.useContext(_r).getPrefixCls)("skeleton",n),a=u_(t,["prefixCls","className"]),u=Ct()(i,"".concat(i,"-element"),qe({},"".concat(i,"-active"),o),r);return e.createElement("div",{className:u},e.createElement(KT,Ge({prefixCls:"".concat(i,"-avatar")},a)))};$T.defaultProps={size:"default",shape:"circle"};var XT=$T,YT=function(t){var n,r=t.prefixCls,o=t.className,i=t.active,a=t.block,u=void 0!==a&&a,s=(0,e.useContext(_r).getPrefixCls)("skeleton",r),c=u_(t,["prefixCls"]),l=Ct()(s,"".concat(s,"-element"),(qe(n={},"".concat(s,"-active"),i),qe(n,"".concat(s,"-block"),u),n),o);return e.createElement("div",{className:l},e.createElement(KT,Ge({prefixCls:"".concat(s,"-button")},c)))};YT.defaultProps={size:"default"};var QT=YT,ZT=function(t){var n,r=t.prefixCls,o=t.className,i=t.active,a=t.block,u=(0,e.useContext(_r).getPrefixCls)("skeleton",r),s=u_(t,["prefixCls"]),c=Ct()(u,"".concat(u,"-element"),(qe(n={},"".concat(u,"-active"),i),qe(n,"".concat(u,"-block"),a),n),o);return e.createElement("div",{className:c},e.createElement(KT,Ge({prefixCls:"".concat(u,"-input")},s)))};ZT.defaultProps={size:"default"};var JT=ZT,eA=function(t){var n=t.prefixCls,r=t.className,o=t.style,i=(0,e.useContext(_r).getPrefixCls)("skeleton",n),a=Ct()(i,"".concat(i,"-element"),r);return e.createElement("div",{className:a},e.createElement("div",{className:Ct()("".concat(i,"-image"),r),style:o},e.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:"".concat(i,"-image-svg")},e.createElement("path",{d:"M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",className:"".concat(i,"-image-path")}))))};function tA(e){return e&&"object"===nt(e)?e:{}}var nA=function(t){var n=t.prefixCls,r=t.loading,o=t.className,i=t.style,a=t.children,u=t.avatar,s=t.title,c=t.paragraph,l=t.active,f=t.round,d=e.useContext(_r),p=d.getPrefixCls,h=d.direction,v=p("skeleton",n);if(r||!("loading"in t)){var m,g,y,b=!!u,x=!!s,w=!!c;if(b){var E=Ge(Ge({prefixCls:"".concat(v,"-avatar")},function(e,t){return e&&!t?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}(x,w)),tA(u));g=e.createElement("div",{className:"".concat(v,"-header")},e.createElement(KT,Ge({},E)))}if(x||w){var C,_;if(x){var k=Ge(Ge({prefixCls:"".concat(v,"-title")},function(e,t){return!e&&t?{width:"38%"}:e&&t?{width:"50%"}:{}}(b,w)),tA(s));C=e.createElement(GT,Ge({},k))}if(w){var S=Ge(Ge({prefixCls:"".concat(v,"-paragraph")},function(e,t){var n={};return e&&t||(n.width="61%"),n.rows=!e&&t?3:2,n}(b,x)),tA(c));_=e.createElement(qT,Ge({},S))}y=e.createElement("div",{className:"".concat(v,"-content")},C,_)}var O=Ct()(v,(qe(m={},"".concat(v,"-with-avatar"),b),qe(m,"".concat(v,"-active"),l),qe(m,"".concat(v,"-rtl"),"rtl"===h),qe(m,"".concat(v,"-round"),f),m),o);return e.createElement("div",{className:O,style:i},g,y)}return"undefined"!==typeof a?a:null};nA.defaultProps={avatar:!1,title:!0,paragraph:!0},nA.Button=QT,nA.Avatar=XT,nA.Input=JT,nA.Image=eA;var rA=nA,oA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};var iA=e.forwardRef((function(t,n){var r,o,i,a=e.useContext(_r),u=a.getPrefixCls,s=a.direction,c=e.useContext(Ji),l=t.prefixCls,f=t.className,d=t.extra,p=t.headStyle,h=void 0===p?{}:p,v=t.bodyStyle,m=void 0===v?{}:v,g=t.title,y=t.loading,b=t.bordered,x=void 0===b||b,w=t.size,E=t.type,C=t.cover,_=t.actions,k=t.tabList,S=t.children,O=t.activeTabKey,T=t.defaultActiveTabKey,A=t.tabBarExtraContent,R=t.hoverable,N=t.tabProps,I=void 0===N?{}:N,P=oA(t,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),D=u("card",l),M=e.createElement(rA,{loading:!0,active:!0,paragraph:{rows:4},title:!1},S),F=void 0!==O,L=Ge(Ge({},I),(qe(r={},F?"activeKey":"defaultActiveKey",F?O:T),qe(r,"tabBarExtraContent",A),r)),j=k&&k.length?e.createElement(HT,Ge({size:"large"},L,{className:"".concat(D,"-head-tabs"),onChange:function(e){var n;null===(n=t.onTabChange)||void 0===n||n.call(t,e)}}),k.map((function(t){return e.createElement(HT.TabPane,{tab:t.tab,disabled:t.disabled,key:t.key})}))):null;(g||d||j)&&(i=e.createElement("div",{className:"".concat(D,"-head"),style:h},e.createElement("div",{className:"".concat(D,"-head-wrapper")},g&&e.createElement("div",{className:"".concat(D,"-head-title")},g),d&&e.createElement("div",{className:"".concat(D,"-extra")},d)),j));var B=C?e.createElement("div",{className:"".concat(D,"-cover")},C):null,V=e.createElement("div",{className:"".concat(D,"-body"),style:m},y?M:S),z=_&&_.length?e.createElement("ul",{className:"".concat(D,"-actions")},function(t){var n=t.map((function(n,r){return e.createElement("li",{style:{width:"".concat(100/t.length,"%")},key:"action-".concat(r)},e.createElement("span",null,n))}));return n}(_)):null,W=u_(P,["onTabChange"]),U=w||c,H=Ct()(D,(qe(o={},"".concat(D,"-loading"),y),qe(o,"".concat(D,"-bordered"),x),qe(o,"".concat(D,"-hoverable"),R),qe(o,"".concat(D,"-contain-grid"),function(){var n;return e.Children.forEach(t.children,(function(e){e&&e.type&&e.type===o_&&(n=!0)})),n}()),qe(o,"".concat(D,"-contain-tabs"),k&&k.length),qe(o,"".concat(D,"-").concat(U),U),qe(o,"".concat(D,"-type-").concat(E),!!E),qe(o,"".concat(D,"-rtl"),"rtl"===s),o),f);return e.createElement("div",Ge({ref:n},W,{className:H}),i,B,V,z)})),aA=iA;aA.Grid=o_,aA.Meta=a_;var uA=aA,sA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},cA=function(t){var n,r,o=t.prefixCls,i=t.className,a=t.color,u=void 0===a?"blue":a,s=t.dot,c=t.pending,l=void 0!==c&&c,f=(t.position,t.label),d=t.children,p=sA(t,["prefixCls","className","color","dot","pending","position","label","children"]),h=(0,e.useContext(_r).getPrefixCls)("timeline",o),v=Ct()((qe(n={},"".concat(h,"-item"),!0),qe(n,"".concat(h,"-item-pending"),l),n),i),m=Ct()((qe(r={},"".concat(h,"-item-head"),!0),qe(r,"".concat(h,"-item-head-custom"),!!s),qe(r,"".concat(h,"-item-head-").concat(u),!0),r)),g=/blue|red|green|gray/.test(u||"")?void 0:u;return e.createElement("li",Ge({},p,{className:v}),f&&e.createElement("div",{className:"".concat(h,"-item-label")},f),e.createElement("div",{className:"".concat(h,"-item-tail")}),e.createElement("div",{className:m,style:{borderColor:g,color:g}},s),e.createElement("div",{className:"".concat(h,"-item-content")},d))},lA=e.isValidElement;function fA(t,n){return function(t,n,r){return lA(t)?e.cloneElement(t,"function"===typeof r?r(t.props||{}):r):n}(t,t,n)}var dA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},pA=function(t){var n,r=e.useContext(_r),o=r.getPrefixCls,i=r.direction,a=t.prefixCls,u=t.pending,s=void 0===u?null:u,c=t.pendingDot,l=t.children,f=t.className,d=t.reverse,p=void 0!==d&&d,h=t.mode,v=void 0===h?"":h,m=dA(t,["prefixCls","pending","pendingDot","children","className","reverse","mode"]),g=o("timeline",a),y="boolean"===typeof s?null:s,b=s?e.createElement(cA,{pending:!!s,dot:c||e.createElement(li,null)},y):null,x=e.Children.toArray(l);x.push(b),p&&x.reverse();var w=function(e,t){return"alternate"===v?"right"===e.props.position?"".concat(g,"-item-right"):"left"===e.props.position?"".concat(g,"-item-left"):"".concat(g,t%2===0?"-item-left":"-item-right"):"left"===v?"".concat(g,"-item-left"):"right"===v||"right"===e.props.position?"".concat(g,"-item-right"):""},E=x.filter((function(e){return!!e})),C=e.Children.count(E),_="".concat(g,"-item-last"),k=e.Children.map(E,(function(e,t){var n=t===C-2?_:"",r=t===C-1?_:"";return fA(e,{className:Ct()([e.props.className,!p&&s?n:r,w(e,t)])})})),S=x.some((function(e){var t;return!!(null===(t=null===e||void 0===e?void 0:e.props)||void 0===t?void 0:t.label)})),O=Ct()(g,(qe(n={},"".concat(g,"-pending"),!!s),qe(n,"".concat(g,"-reverse"),!!p),qe(n,"".concat(g,"-").concat(v),!!v&&!S),qe(n,"".concat(g,"-label"),S),qe(n,"".concat(g,"-rtl"),"rtl"===i),n),f);return e.createElement("ul",Ge({},m,{className:O}),k)};pA.Item=cA;var hA=pA,vA=function(t){et(r,t);var n=it(r);function r(e){var t;Ye(this,r),(t=n.call(this,e)).handleChange=function(e){var n=t.props,r=n.disabled,o=n.onChange;r||("checked"in t.props||t.setState({checked:e.target.checked}),o&&o({target:Xe(Xe({},t.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},t.saveInput=function(e){t.input=e};var o="checked"in e?e.checked:e.defaultChecked;return t.state={checked:o},t}return Ze(r,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var t,n=this.props,r=n.prefixCls,o=n.className,i=n.style,a=n.name,u=n.id,s=n.type,c=n.disabled,l=n.readOnly,f=n.tabIndex,d=n.onClick,p=n.onFocus,h=n.onBlur,v=n.onKeyDown,m=n.onKeyPress,g=n.onKeyUp,y=n.autoFocus,b=n.value,x=n.required,w=Ke(n,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),E=Object.keys(w).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=w[t]),e}),{}),C=this.state.checked,_=Ct()(r,o,(qe(t={},"".concat(r,"-checked"),C),qe(t,"".concat(r,"-disabled"),c),t));return e.createElement("span",{className:_,style:i},e.createElement("input",Ge({name:a,id:u,type:s,required:x,readOnly:l,disabled:c,tabIndex:f,className:"".concat(r,"-input"),checked:!!C,onClick:d,onFocus:p,onBlur:h,onKeyUp:g,onKeyDown:v,onKeyPress:m,onChange:this.handleChange,autoFocus:y,ref:this.saveInput,value:b},E)),e.createElement("span",{className:"".concat(r,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"checked"in e?Xe(Xe({},t),{},{checked:e.checked}):null}}]),r}(e.Component);vA.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}};var mA=vA,gA=e.createContext({}),yA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},bA=e.createContext(null),xA=function(t,n){var r=t.defaultValue,o=t.children,i=t.options,a=void 0===i?[]:i,u=t.prefixCls,c=t.className,l=t.style,f=t.onChange,d=yA(t,["defaultValue","children","options","prefixCls","className","style","onChange"]),p=e.useContext(_r),h=p.getPrefixCls,v=p.direction,m=s(e.useState(d.value||r||[]),2),g=m[0],y=m[1],b=s(e.useState([]),2),x=b[0],w=b[1];e.useEffect((function(){"value"in d&&y(d.value||[])}),[d.value]);var E=function(){return a.map((function(e){return"string"===typeof e||"number"===typeof e?{label:e,value:e}:e}))},C=h("checkbox",u),_="".concat(C,"-group"),k=u_(d,["value","disabled"]);a&&a.length>0&&(o=E().map((function(t){return e.createElement(SA,{prefixCls:C,key:t.value.toString(),disabled:"disabled"in t?t.disabled:d.disabled,value:t.value,checked:-1!==g.indexOf(t.value),onChange:t.onChange,className:"".concat(_,"-item"),style:t.style},t.label)})));var S={toggleOption:function(e){var t=g.indexOf(e.value),n=Tn(g);-1===t?n.push(e.value):n.splice(t,1),"value"in d||y(n);var r=E();null===f||void 0===f||f(n.filter((function(e){return-1!==x.indexOf(e)})).sort((function(e,t){return r.findIndex((function(t){return t.value===e}))-r.findIndex((function(e){return e.value===t}))})))},value:g,disabled:d.disabled,name:d.name,registerValue:function(e){w((function(t){return[].concat(Tn(t),[e])}))},cancelValue:function(e){w((function(t){return t.filter((function(t){return t!==e}))}))}},O=Ct()(_,qe({},"".concat(_,"-rtl"),"rtl"===v),c);return e.createElement("div",Ge({className:O,style:l},k,{ref:n}),e.createElement(bA.Provider,{value:S},o))},wA=e.forwardRef(xA),EA=e.memo(wA),CA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},_A=function(t,n){var r,o=t.prefixCls,i=t.className,a=t.children,u=t.indeterminate,s=void 0!==u&&u,c=t.style,l=t.onMouseEnter,f=t.onMouseLeave,d=t.skipGroup,p=void 0!==d&&d,h=CA(t,["prefixCls","className","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup"]),v=e.useContext(_r),m=v.getPrefixCls,g=v.direction,y=e.useContext(bA),b=(0,e.useContext)(gA).isFormItemInput,x=e.useRef(h.value);e.useEffect((function(){null===y||void 0===y||y.registerValue(h.value)}),[]),e.useEffect((function(){if(!p)return h.value!==x.current&&(null===y||void 0===y||y.cancelValue(x.current),null===y||void 0===y||y.registerValue(h.value),x.current=h.value),function(){return null===y||void 0===y?void 0:y.cancelValue(h.value)}}),[h.value]);var w=m("checkbox",o),E=Ge({},h);y&&!p&&(E.onChange=function(){h.onChange&&h.onChange.apply(h,arguments),y.toggleOption&&y.toggleOption({label:a,value:h.value})},E.name=y.name,E.checked=-1!==y.value.indexOf(h.value),E.disabled=h.disabled||y.disabled);var C=Ct()((qe(r={},"".concat(w,"-wrapper"),!0),qe(r,"".concat(w,"-rtl"),"rtl"===g),qe(r,"".concat(w,"-wrapper-checked"),E.checked),qe(r,"".concat(w,"-wrapper-disabled"),E.disabled),qe(r,"".concat(w,"-wrapper-in-form-item"),b),r),i),_=Ct()(qe({},"".concat(w,"-indeterminate"),s)),k=s?"mixed":void 0;return e.createElement("label",{className:C,style:c,onMouseEnter:l,onMouseLeave:f},e.createElement(mA,Ge({"aria-checked":k},E,{prefixCls:w,className:_,ref:n})),void 0!==a&&e.createElement("span",null,a))},kA=e.forwardRef(_A);kA.displayName="Checkbox";var SA=kA,OA=SA;OA.Group=EA,OA.__ANT_CHECKBOX=!0;var TA=OA,AA={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"},RA=function(t,n){return e.createElement(cr,Xe(Xe({},t),{},{ref:n,icon:AA}))};RA.displayName="ClockCircleOutlined";var NA=e.forwardRef(RA),IA={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M288 421a48 48 0 1096 0 48 48 0 10-96 0zm352 0a48 48 0 1096 0 48 48 0 10-96 0zM512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm263 711c-34.2 34.2-74 61-118.3 79.8C611 874.2 562.3 884 512 884c-50.3 0-99-9.8-144.8-29.2A370.4 370.4 0 01248.9 775c-34.2-34.2-61-74-79.8-118.3C149.8 611 140 562.3 140 512s9.8-99 29.2-144.8A370.4 370.4 0 01249 248.9c34.2-34.2 74-61 118.3-79.8C413 149.8 461.7 140 512 140c50.3 0 99 9.8 144.8 29.2A370.4 370.4 0 01775.1 249c34.2 34.2 61 74 79.8 118.3C874.2 413 884 461.7 884 512s-9.8 99-29.2 144.8A368.89 368.89 0 01775 775zM664 533h-48.1c-4.2 0-7.8 3.2-8.1 7.4C604 589.9 562.5 629 512 629s-92.1-39.1-95.8-88.6c-.3-4.2-3.9-7.4-8.1-7.4H360a8 8 0 00-8 8.4c4.4 84.3 74.5 151.6 160 151.6s155.6-67.3 160-151.6a8 8 0 00-8-8.4z"}}]},name:"smile",theme:"outlined"},PA=function(t,n){return e.createElement(cr,Xe(Xe({},t),{},{ref:n,icon:IA}))};PA.displayName="SmileOutlined";var DA,MA,FA,LA,jA,BA=e.forwardRef(PA);function VA(e){var t=Math.floor(e);if(t<60)return"".concat(t,"s");if(t<3600){var n=Math.floor(t/60);return"".concat(n,"m")}var r=Math.floor(t/60),o=r%60,i=Math.floor(r/60);return"".concat(i,"h ").concat(o,"m")}function zA(e){var t=e.record,n=e.index;return(0,YC.jsx)(YC.Fragment,{children:(0,YC.jsx)(uA,{title:"Pomodoro #".concat(n),children:(0,YC.jsxs)("div",{className:Pe(DA||(DA=r(["\n        display: flex;\n        justify-content: space-around;\n        align-item: center;\n      "]))),children:[(0,YC.jsx)("span",{className:Pe(MA||(MA=r(["\n        border-radius: 50%;\n        background: #b0003a;\n        width: 3em;\n        height: 3em;\n        text-align: center;\n        vertical-align: middle;\n        display: inline-block;\n        line-height: 3em;\n        font-size: 1.5em;\n        color: white;\n        font-weight: bold;\n      "]))),children:VA(t.timePeriod)}),(0,YC.jsx)("div",{className:Pe(FA||(FA=r(["\n            display: flex;\n            align-item: center;\n            justify-content: space-around;\n            flex-direction: column;\n          "]))),children:(0,YC.jsxs)("p",{className:Pe(LA||(LA=r(["\n            font-size: 1.5em;\n            font-weight: bold;\n            margin: 0;\n          "]))),children:["From ",new Date(t.startTime).toLocaleTimeString()]})})]})})})}var WA,UA,HA,GA=function(t){var n=t.mergedTimeTable,o=s((0,e.useState)(!0),2),i=o[0],a=o[1],u=n.filter((function(e){return!i||new Date(e.startTime).toDateString()===(new Date).toDateString()}));return(0,YC.jsxs)("div",{children:[(0,YC.jsxs)("div",{className:Pe(jA||(jA=r(["\n          display: flex;\n          justify-content: space-between;\n          margin: 5px auto;\n          flex-wrap: wrap;\n        "]))),children:[(0,YC.jsx)("h3",{children:"Pomodoro History"}),(0,YC.jsx)(TA,{checked:i,onChange:function(){return a((function(e){return!e}))},children:"Show Today Only "})]}),(0,YC.jsx)(hA,{mode:"left",children:u.map((function(e,t,n){return e.detected?(0,YC.jsx)(hA.Item,{dot:(0,YC.jsx)(NA,{}),children:(0,YC.jsx)(zA,{record:e,index:t+1})},t):(0,YC.jsx)(hA.Item,{color:"green",dot:(0,YC.jsx)(BA,{}),children:(0,YC.jsxs)("p",{children:[" Rest for ",VA(e.timePeriod)," "]})},t)})).reverse()})]})};var qA=function(){var t=(0,e.useContext)(XC),n=t.alertStudySeconds,o=t.alertRestSeconds,i=t.maxLocalStorageTimeSlot;function a(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=n||(new Date).toJSON();return{startTime:r,endTime:(new Date).toJSON(),detected:e,timePeriod:0,pinnedSession:t}}var u=We("mergedTimeTable",{defaultValue:[a(!0,!0)],serializer:function(e){return JSON.stringify(e)},deserializer:function(e){var t=JSON.parse(e);return new Date-new Date(t.at(-1).endTime)>1e3*n&&t.push(a(!0,!0)),t.slice(0-i)}}),c=s(u,2),f=c[0],d=c[1],p=f.at(-1),h=s((0,e.useState)({}),2),v=h[0],m=h[1],g=s(He("/face-recognition-pomodoro/sounds/dingbell.aac"),1)[0],y=t.tempMissingSeconds,b=s((0,e.useState)(!1),2),x=b[0],w=b[1];function E(e){if(!(v[e]&&new Date-v[e].lastSendTime<1e3*v[e].nextSendInterval)){g(),x&&"granted"===Notification.permission&&new Notification(e),Ea.open({message:e,duration:3});var n=v[e]?2*v[e].nextSendInterval:t.notificationIntervalSeconds;v[e]={lastSendTime:new Date,nextSendInterval:n},m(v)}}(0,e.useEffect)((function(){var e="Notification"in window&&"serviceWorker"in navigator&&"PushManager"in window;w(e),e?Notification.requestPermission():console.log("This browser does not support desktop notification")}),[]),l((function(){var e=(new Date-new Date(p.startTime))/1e3;p.detected&&e>n?E("\u8be5\u4f11\u606f\u5566"):!p.detected&&e>o?E("\u4f11\u606f\u591f\u5566"):e>t.tempMissingSeconds&&m({})}),500,!0);var C=p.detected?"WORKING":"REST";return(0,YC.jsxs)("div",{className:Pe(WA||(WA=r(["\n      margin: 0 15px;\n      max-width: 700px;\n      min-width: 350px;\n      @media (min-width: 730px) {\n        margin: 0 auto;\n      }\n      "]))),children:[(0,YC.jsxs)("p",{className:Pe(UA||(UA=r(["\n          font-size: 20vw;\n          margin: 0 auto;\n          text-align: center;\n          @media (min-width: 700px) {\n            font-size: 140px;\n          }\n          @media (max-width: 350px) {\n            font-size: 75px;\n          }\n        "]))),children:[" ",C," "]}),(0,YC.jsx)(n_,{clockFace:"TwelveHourClock",startTime:p.startTime}),(0,YC.jsx)("div",{className:Pe(HA||(HA=r(["\n          display: flex;\n          flex-wrap: wrap;\n          justify-content: space-around;\n        "]))),children:(0,YC.jsx)(JC,{onFaceDetectionResult:function(e){var t=wu(f,(function(t){var n=void 0!==e;t.at(-1).detected!==n&&t.at(-1).timePeriod<y&&t.length>1&&!t.at(-1).pinnedSession&&t.pop(),t.at(-1).detected!==n?t.push(a(n,!1,t.at(-1).endTime)):(t.at(-1).endTime=(new Date).toJSON(),t.at(-1).timePeriod=(new Date-new Date(t.at(-1).startTime))/1e3)}));d(t)}})}),(0,YC.jsx)(GA,{mergedTimeTable:f})]})},KA=(n.p,function(e,t){return KA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},KA(e,t)});function $A(e,t){function n(){this.constructor=e}KA(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var XA=function(){return XA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},XA.apply(this,arguments)};function YA(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}var QA=function(){return QA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},QA.apply(this,arguments)};function ZA(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}Object.create;function JA(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function eR(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function tR(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;var nR=function(e){return e.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))},rR=function(e){return(Array.isArray(e)?e:[e]).filter((function(e){return!!e})).map((function(e){return"mdc-theme--"+nR(e)}))},oR=e.forwardRef((function(t,n){var r=t.tag,o=void 0===r?"div":r,i=(t.theme,t.element),a=ZA(t,["tag","theme","element"]),u=i?i.props(a):a,s=i?aR(n,i.setRef):n;return e.createElement(o,QA({},u,{ref:s}))})),iR=function(e,t){return Ct().apply(void 0,tR(tR([e.className],eR(e.theme?rR(e.theme):[])),eR("function"===typeof t?t(e):t)))},aR=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n,r;try{for(var o=JA(e),i=o.next();!i.done;i=o.next()){var a=i.value;"function"===typeof a?a(t):a&&"current"in a&&(a.current=t)}}catch(u){n={error:u}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}},uR=function(e,t){"function"===typeof e?e(t):e&&"current"in e&&(e.current=t)};function sR(t){var n=e.forwardRef(t),r=function(t,n){return e.createElement(e.Fragment,null)};return r.displayName=t.constructor.name||"RMWCComponent",n.displayName=r.displayName,n}var cR=function(e,t){return cR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},cR(e,t)};var lR=function(){return lR=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},lR.apply(this,arguments)};function fR(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}var dR={ripple:!0,tooltip:{align:"top",showArrow:!1,activateOn:["hover","focus"],enterDelay:0,leaveDelay:0},typography:{},icon:{icon:"",basename:"material-icons",prefix:"",strategy:"auto",render:void 0}},pR=e.createContext(dR),hR=function(){return e.useContext(pR)},vR=function(e){var t,n,r,o=Array.isArray(e)?e[0]:e;return(null===(t=null===o||void 0===o?void 0:o.type)||void 0===t?void 0:t.displayName)||(null===(n=null===o||void 0===o?void 0:o.constructor)||void 0===n?void 0:n.displayName)||(null===o||void 0===o?void 0:o.displayName)||(null===o||void 0===o?void 0:o.name)||(null===(r=null===o||void 0===o?void 0:o.constructor)||void 0===r?void 0:r.name)||"Unknown"},mR=function(t,n,r){return"auto"===(n=n||r||"auto")?function(t){return"string"===typeof t&&t.includes("/")?"url":e.isValidElement(t)?"component":"ligature"}(t):n},gR={ligature:function(t){var n=t.content,r=ZA(t,["content"]);return e.createElement(yR,QA({},r),n)},className:function(t){t.content;var n=ZA(t,["content"]);return e.createElement(yR,QA({},n))},url:function(t){var n=t.content,r=ZA(t,["content"]);return e.createElement(yR,QA({},r,{style:QA(QA({},r.style),{backgroundImage:"url("+n+")"})}))},component:function(t){var n=t.content,r=ZA(t,["content"]);if("svg"===n.type){var o=n.props,i=o.children,a=ZA(o,["children"]);return e.createElement(yR,QA({},a,r,{tag:"svg"}),i)}return e.createElement(yR,QA({},r),n)},auto:void 0},yR=e.forwardRef((function(t,n){return e.createElement(oR,QA({tag:"i"},t,{ref:n}))})),bR=sR((function(t,n){var r,o=t.icon,i=ZA(t,["icon"]),a=hR(),u=QA({},function(t){return e.isValidElement(t)||t&&"object"!==typeof t?{icon:t}:t}(o)),s=u.icon,c=u.strategy,l=u.prefix,f=u.basename,d=u.render,p=u.size,h=ZA(u,["icon","strategy","prefix","basename","render","size"]),v=a.icon||{},m=v.basename,g=void 0===m?null:m,y=v.prefix,b=void 0===y?null:y,x=v.strategy,w=void 0===x?null:x,E=v.render,C=void 0===E?null:E,_=s,k=mR(_,c||null,w||null),S=void 0===f?g:f,O="className"===k&&"string"===typeof s?""+String(l||b)+s:null,T=!!k&&gR[k]||null;if("custom"===k&&(T=d||C),!T)return console.error("Icon: rendering not implemented for "+String(k)+"."),null;var A=T(QA(QA(QA({},i),h),{ref:n,content:_,className:Ct()("rmwc-icon","rmwc-icon--"+k,S,i.className,h.className,O,(r={},r["rmwc-icon--size-"+(p||"")]=!!p,r))}));if(!e.isValidElement(A))return null;var R=vR(A.props.children);return R.includes("Avatar")||R.includes("Icon")?e.cloneElement(A.props.children,QA(QA(QA({},A.props.children.props),A.props),{ref:n,children:A.props.children.props.children,className:Ct()(A.props.className,A.props.children.props.className)})):A}));bR.displayName="Icon";var xR=function(e,t){return xR=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},xR(e,t)};function wR(e,t){function n(){this.constructor=e}xR(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ER=function(){return ER=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ER.apply(this,arguments)};function CR(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}var _R,kR={blur:"onBlur",cancel:"onCancel",click:"onClick",close:"onClose",contextmenu:"onContextMenu",copy:"onCopy",cut:"onCut",auxclick:"onAuxClick",doubleclick:"onDoubleClick",dragend:"onDragEnd",dragstart:"onDragStart",drop:"onDrop",focus:"onFocus",input:"onInput",invalid:"onInvalid",keydown:"onKeyDown",keypress:"onKeyPress",keyup:"onKeyUp",mousedown:"onMouseDown",mouseup:"onMouseUp",paste:"onPaste",pause:"onPause",play:"onPlay",pointercancel:"onPointerCancel",pointerdown:"onPointerDown",pointerup:"onPointerUp",ratechange:"onRateChange",reset:"onReset",seeked:"onSeeked",submit:"onSubmit",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchstart:"onTouchStart",volumechange:"onVolumeChange",abort:"onAbort",animationend:"onAnimationEnd",animationiteration:"onAnimationIteration",animationstart:"onAnimationStart",canplay:"onCanPlay",canplaythrough:"onCanPlayThrough",drag:"onDrag",dragenter:"onDragEnter",dragexit:"onDragExit",dragleave:"onDragLeave",dragover:"onDragOver",durationchange:"onDurationChange",emptied:"onEmptied",encrypted:"onEncrypted",ended:"onEnded",error:"onError",gotpointercapture:"onGotPointerCapture",load:"onLoad",loadeddata:"onLoadedData",loadedmetadata:"onLoadedMetadata",loadstart:"onLoadStart",lostpointercapture:"onLostPointerCapture",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseover:"onMouseOver",playing:"onPlaying",pointermove:"onPointerMove",pointerout:"onPointerOut",pointerover:"onPointerOver",progress:"onProgress",scroll:"onScroll",seeking:"onSeeking",stalled:"onStalled",suspend:"onSuspend",timeupdate:"onTimeUpdate",toggle:"onToggle",touchmove:"onTouchMove",transitionend:"onTransitionEnd",waiting:"onWaiting",wheel:"onWheel",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",pointerenter:"onPointerEnter",pointerleave:"onPointerLeave",change:"onChange",select:"onSelect",beforeinput:"onBeforeInput",compositionend:"onCompositionEnd",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate"},SR=function(e){return kR[e]||e},OR=function(){function e(e){this._classes=new Set,this._events={},this._style={},this._props={},this._ref=null,this._onChange=null,this._onChange=e,this.onChange=this.onChange.bind(this),this.addClass=this.addClass.bind(this),this.removeClass=this.removeClass.bind(this),this.hasClass=this.hasClass.bind(this),this.setProp=this.setProp.bind(this),this.getProp=this.getProp.bind(this),this.removeProp=this.removeProp.bind(this),this.setStyle=this.setStyle.bind(this),this.addEventListener=this.addEventListener.bind(this),this.removeEventListener=this.removeEventListener.bind(this),this.setRef=this.setRef.bind(this)}return e.prototype.onChange=function(){this._onChange&&this._onChange()},e.prototype.destroy=function(){var e=this;this._onChange=null,this._events={},this._style={},this._props={},this._classes=new Set,setTimeout((function(){e._ref=null}))},e.prototype.addClass=function(e){this._classes.has(e)||(this._classes.add(e),this.onChange())},e.prototype.removeClass=function(e){this._classes.has(e)&&(this._classes.delete(e),this.onChange())},e.prototype.hasClass=function(e){return this._classes.has(e)},e.prototype.setProp=function(e,t,n){void 0===n&&(n=!1),this._props[e]!==t&&(this._props[e]=t,!n&&this.onChange())},e.prototype.getProp=function(e){return this._props[e]},e.prototype.removeProp=function(e){void 0!==this._props[e]&&(delete this._props[e],this.onChange())},e.prototype.props=function(e){var t=this,n=e.className,r=void 0===n?"":n,o=e.style,i=void 0===o?{}:o,a=Object.entries(e).reduce((function(e,n){var r=eR(n,2),o=r[0],i=r[1],a=t._events[o];if("function"===typeof i&&"function"===typeof a){e[o]=function(e){return a(e),i(e)}}return e}),QA({},this._events)),u=Ct()(r,tR([],eR(this._classes))),s=QA(QA({},this._style),i);return QA(QA(QA(QA({},e),this._props),a),{style:s,className:u})},e.prototype.setStyle=function(e,t){e=e.startsWith("--")?e:e.replace(/(-[a-z])/g,(function(e){return e.toUpperCase().replace("-","")})),this._style[e]!==t&&(this._style[e]=t,this.onChange())},e.prototype.addEventListener=function(e,t){var n=SR(e);this._events[n]!==t&&(this._events[n]=t,this.onChange())},e.prototype.removeEventListener=function(e,t){var n=SR(e);this._events[n]&&(delete this._events[n],this.onChange())},e.prototype.setRef=function(e){e&&(this._ref=e)},Object.defineProperty(e.prototype,"ref",{get:function(){return this._ref},enumerable:!1,configurable:!0}),e}(),TR=function(e){return function(t,n,r){var o;void 0===r&&(r=!1),o=new CustomEvent(t,{detail:n,bubbles:r}),Object.defineProperty(o,"target",{value:n,writable:!1}),Object.defineProperty(o,"currentTarget",{value:n,writable:!1});var i=t;return e[i]&&e[i](o),o}},AR=function(t){var n=t.foundation,r=t.props,o=t.elements,i=t.api,a=eR((0,e.useState)(0),2)[1],u=(0,e.useRef)(r);u.current=r;var s=(0,e.useMemo)((function(){return Object.keys(o).reduce((function(e,t){return e[t]=new OR((function(){a((function(e){return e+1}))})),e}),{})}),[]),c=(0,e.useMemo)((function(){var e=n(QA(QA({},s),{getProps:function(){return u.current},emit:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return TR(u.current).apply(void 0,tR([],eR(e)))}}));return i&&uR(u.current.apiRef,i(QA({foundation:e},s))),e}),[]);return(0,e.useEffect)((function(){var e=c;return e.init(),i&&uR(u.current.apiRef,i(QA({foundation:e},s))),uR(u.current.foundationRef,e),function(){e.destroy(),uR(u.current.apiRef,null),uR(u.current.foundationRef,null),Object.values(s).map((function(e){return e.destroy()})),u.current={}}}),[c,s]),QA({foundation:c},s)},RR={bottom:0,height:0,left:0,right:0,top:0,width:0},NR=function(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)},IR=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),PR={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},DR={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},MR={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};var FR,LR=["touchstart","pointerdown","mousedown","keydown"],jR=["touchend","pointerup","mouseup","contextmenu"],BR=[],VR=function(e){function t(n){var r=e.call(this,ER(ER({},t.defaultAdapter),n))||this;return r.activationAnimationHasEnded_=!1,r.activationTimer_=0,r.fgDeactivationRemovalTimer_=0,r.fgScale_="0",r.frame_={width:0,height:0},r.initialSize_=0,r.layoutFrame_=0,r.maxRadius_=0,r.unboundedCoords_={left:0,top:0},r.activationState_=r.defaultActivationState_(),r.activationTimerCallback_=function(){r.activationAnimationHasEnded_=!0,r.runDeactivationUXLogicIfReady_()},r.activateHandler_=function(e){return r.activate_(e)},r.deactivateHandler_=function(){return r.deactivate_()},r.focusHandler_=function(){return r.handleFocus()},r.blurHandler_=function(){return r.handleBlur()},r.resizeHandler_=function(){return r.layout()},r}return wR(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return PR},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return DR},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return MR},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this,n=this.supportsPressRipple_();if(this.registerRootHandlers_(n),n){var r=t.cssClasses,o=r.ROOT,i=r.UNBOUNDED;requestAnimationFrame((function(){e.adapter.addClass(o),e.adapter.isUnbounded()&&(e.adapter.addClass(i),e.layoutInternal_())}))}},t.prototype.destroy=function(){var e=this;if(this.supportsPressRipple_()){this.activationTimer_&&(clearTimeout(this.activationTimer_),this.activationTimer_=0,this.adapter.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer_&&(clearTimeout(this.fgDeactivationRemovalTimer_),this.fgDeactivationRemovalTimer_=0,this.adapter.removeClass(t.cssClasses.FG_DEACTIVATION));var n=t.cssClasses,r=n.ROOT,o=n.UNBOUNDED;requestAnimationFrame((function(){e.adapter.removeClass(r),e.adapter.removeClass(o),e.removeCssVars_()}))}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_()},t.prototype.activate=function(e){this.activate_(e)},t.prototype.deactivate=function(){this.deactivate_()},t.prototype.layout=function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){e.layoutInternal_(),e.layoutFrame_=0}))},t.prototype.setUnbounded=function(e){var n=t.cssClasses.UNBOUNDED;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.handleFocus=function(){var e=this;requestAnimationFrame((function(){return e.adapter.addClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.handleBlur=function(){var e=this;requestAnimationFrame((function(){return e.adapter.removeClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.supportsPressRipple_=function(){return this.adapter.browserSupportsCssVars()},t.prototype.defaultActivationState_=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers_=function(e){var t=this;e&&(LR.forEach((function(e){t.adapter.registerInteractionHandler(e,t.activateHandler_)})),this.adapter.isUnbounded()&&this.adapter.registerResizeHandler(this.resizeHandler_)),this.adapter.registerInteractionHandler("focus",this.focusHandler_),this.adapter.registerInteractionHandler("blur",this.blurHandler_)},t.prototype.registerDeactivationHandlers_=function(e){var t=this;"keydown"===e.type?this.adapter.registerInteractionHandler("keyup",this.deactivateHandler_):jR.forEach((function(e){t.adapter.registerDocumentInteractionHandler(e,t.deactivateHandler_)}))},t.prototype.deregisterRootHandlers_=function(){var e=this;LR.forEach((function(t){e.adapter.deregisterInteractionHandler(t,e.activateHandler_)})),this.adapter.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter.isUnbounded()&&this.adapter.deregisterResizeHandler(this.resizeHandler_)},t.prototype.deregisterDeactivationHandlers_=function(){var e=this;this.adapter.deregisterInteractionHandler("keyup",this.deactivateHandler_),jR.forEach((function(t){e.adapter.deregisterDocumentInteractionHandler(t,e.deactivateHandler_)}))},t.prototype.removeCssVars_=function(){var e=this,n=t.strings;Object.keys(n).forEach((function(t){0===t.indexOf("VAR_")&&e.adapter.updateCssVariable(n[t],null)}))},t.prototype.activate_=function(e){var t=this;if(!this.adapter.isSurfaceDisabled()){var n=this.activationState_;if(!n.isActivated){var r=this.previousActivationEvent_;if(!(r&&void 0!==e&&r.type!==e.type))n.isActivated=!0,n.isProgrammatic=void 0===e,n.activationEvent=e,n.wasActivatedByPointer=!n.isProgrammatic&&(void 0!==e&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type)),void 0!==e&&BR.length>0&&BR.some((function(e){return t.adapter.containsEventTarget(e)}))?this.resetActivationState_():(void 0!==e&&(BR.push(e.target),this.registerDeactivationHandlers_(e)),n.wasElementMadeActive=this.checkElementMadeActive_(e),n.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame((function(){BR=[],n.wasElementMadeActive||void 0===e||" "!==e.key&&32!==e.keyCode||(n.wasElementMadeActive=t.checkElementMadeActive_(e),n.wasElementMadeActive&&t.animateActivation_()),n.wasElementMadeActive||(t.activationState_=t.defaultActivationState_())})))}}},t.prototype.checkElementMadeActive_=function(e){return void 0===e||"keydown"!==e.type||this.adapter.isSurfaceActive()},t.prototype.animateActivation_=function(){var e=this,n=t.strings,r=n.VAR_FG_TRANSLATE_START,o=n.VAR_FG_TRANSLATE_END,i=t.cssClasses,a=i.FG_DEACTIVATION,u=i.FG_ACTIVATION,s=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var c="",l="";if(!this.adapter.isUnbounded()){var f=this.getFgTranslationCoordinates_(),d=f.startPoint,p=f.endPoint;c=d.x+"px, "+d.y+"px",l=p.x+"px, "+p.y+"px"}this.adapter.updateCssVariable(r,c),this.adapter.updateCssVariable(o,l),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter.removeClass(a),this.adapter.computeBoundingRect(),this.adapter.addClass(u),this.activationTimer_=setTimeout((function(){return e.activationTimerCallback_()}),s)},t.prototype.getFgTranslationCoordinates_=function(){var e,t=this.activationState_,n=t.activationEvent;return e=t.wasActivatedByPointer?function(e,t,n){if(!e)return{x:0,y:0};var r,o,i=t.x,a=t.y,u=i+n.left,s=a+n.top;if("touchstart"===e.type){var c=e;r=c.changedTouches[0].pageX-u,o=c.changedTouches[0].pageY-s}else{var l=e;r=l.pageX-u,o=l.pageY-s}return{x:r,y:o}}(n,this.adapter.getWindowPageOffset(),this.adapter.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2},{startPoint:e={x:e.x-this.initialSize_/2,y:e.y-this.initialSize_/2},endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}},t.prototype.runDeactivationUXLogicIfReady_=function(){var e=this,n=t.cssClasses.FG_DEACTIVATION,r=this.activationState_,o=r.hasDeactivationUXRun,i=r.isActivated;(o||!i)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter.addClass(n),this.fgDeactivationRemovalTimer_=setTimeout((function(){e.adapter.removeClass(n)}),MR.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses_=function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter.removeClass(e),this.activationAnimationHasEnded_=!1,this.adapter.computeBoundingRect()},t.prototype.resetActivationState_=function(){var e=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout((function(){return e.previousActivationEvent_=void 0}),t.numbers.TAP_DELAY_MS)},t.prototype.deactivate_=function(){var e=this,t=this.activationState_;if(t.isActivated){var n=ER({},t);t.isProgrammatic?(requestAnimationFrame((function(){return e.animateDeactivation_(n)})),this.resetActivationState_()):(this.deregisterDeactivationHandlers_(),requestAnimationFrame((function(){e.activationState_.hasDeactivationUXRun=!0,e.animateDeactivation_(n),e.resetActivationState_()})))}},t.prototype.animateDeactivation_=function(e){var t=e.wasActivatedByPointer,n=e.wasElementMadeActive;(t||n)&&this.runDeactivationUXLogicIfReady_()},t.prototype.layoutInternal_=function(){var e=this;this.frame_=this.adapter.computeBoundingRect();var n=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter.isUnbounded()?n:Math.sqrt(Math.pow(e.frame_.width,2)+Math.pow(e.frame_.height,2))+t.numbers.PADDING;var r=Math.floor(n*t.numbers.INITIAL_ORIGIN_SCALE);this.adapter.isUnbounded()&&r%2!==0?this.initialSize_=r-1:this.initialSize_=r,this.fgScale_=""+this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()},t.prototype.updateLayoutCssVars_=function(){var e=t.strings,n=e.VAR_FG_SIZE,r=e.VAR_LEFT,o=e.VAR_TOP,i=e.VAR_FG_SCALE;this.adapter.updateCssVariable(n,this.initialSize_+"px"),this.adapter.updateCssVariable(i,this.fgScale_),this.adapter.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter.updateCssVariable(r,this.unboundedCoords_.left+"px"),this.adapter.updateCssVariable(o,this.unboundedCoords_.top+"px"))},t}(IR),zR=function(t){var n=(0,e.useRef)(!1),r=AR({props:t,elements:{rootEl:!0,surfaceEl:!0},foundation:function(e){var t=e.rootEl,n=e.surfaceEl,r=e.getProps;return new VR({browserSupportsCssVars:function(){return function(e,t){void 0===t&&(t=!1);var n,r=e.CSS;if("boolean"===typeof _R&&!t)return _R;if(!r||"function"!==typeof r.supports)return!1;var o=r.supports("--css-vars","yes"),i=r.supports("(--css-vars: yes)")&&r.supports("color","#00000000");return n=o||i,t||(_R=n),n}(window)},isUnbounded:function(){return!!r().unbounded},isSurfaceActive:function(){return!!t.ref&&NR(t.ref,":active")},isSurfaceDisabled:function(){return!!r().disabled},addClass:function(e){n.addClass(e)},removeClass:function(e){n.removeClass(e)},containsEventTarget:function(e){return!!t.ref&&t.ref.contains(e)},registerInteractionHandler:function(e,t){},deregisterInteractionHandler:function(e,t){},registerDocumentInteractionHandler:function(e,t){return document.documentElement.addEventListener(e,t,{passive:!0})},deregisterDocumentInteractionHandler:function(e,t){return document.documentElement.removeEventListener(e,t)},registerResizeHandler:function(e){return window.addEventListener("resize",e)},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},updateCssVariable:function(e,t){return n.setStyle(e,t)},computeBoundingRect:function(){return t.ref?t.ref.getBoundingClientRect():RR},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}}})}}),o=r.foundation,i=CR(r,["foundation"]),a=i.rootEl,u=(0,e.useCallback)((function(e){e.persist(),o.activate(e)}),[o]),s=(0,e.useCallback)((function(e){e.persist(),o.deactivate()}),[o]),c=t.onFocus,l=(0,e.useCallback)((function(e){null===c||void 0===c||c(e),o.handleFocus()}),[o,c]),f=t.onBlur,d=(0,e.useCallback)((function(e){null===f||void 0===f||f(e),o.handleBlur()}),[o,f]),p=t.onMouseDown,h=(0,e.useCallback)((function(e){null===p||void 0===p||p(e),n.current||u(e),n.current=!1}),[p,u]),v=t.onMouseUp,m=(0,e.useCallback)((function(e){null===v||void 0===v||v(e),s(e)}),[v,s]),g=t.onTouchStart,y=(0,e.useCallback)((function(e){n.current=!0,null===g||void 0===g||g(e),u(e)}),[g,u]),b=t.onTouchEnd,x=(0,e.useCallback)((function(e){null===b||void 0===b||b(e),s(e)}),[b,s]),w=t.onKeyDown,E=(0,e.useCallback)((function(e){null===w||void 0===w||w(e),u(e)}),[w,u]),C=t.onKeyUp,_=(0,e.useCallback)((function(e){null===C||void 0===C||C(e),s(e)}),[C,s]);return a.setProp("onFocus",l,!0),a.setProp("onBlur",d,!0),a.setProp("onMouseDown",h,!0),a.setProp("onMouseUp",m,!0),a.setProp("onTouchStart",y,!0),a.setProp("onTouchEnd",x,!0),a.setProp("onKeyDown",E,!0),a.setProp("onKeyUp",_,!0),(0,e.useEffect)((function(){a.setRef(t.domNode)}),[a,t.domNode]),(0,e.useEffect)((function(){o.setUnbounded(!!t.unbounded)}),[t.unbounded,o]),(0,e.useEffect)((function(){t.disabled&&o.handleBlur()}),[t.disabled,o]),ER({},i)},WR=e.createContext({}),UR=(FR=function(t){var n=t.children,r=t.className,o=t.primary,i=t.accent,a=t.unbounded,u=t.surface,s=(t.domNode,t.foundationRef,CR(t,["children","className","primary","accent","unbounded","surface","domNode","foundationRef"])),c=zR(t),l=c.rootEl,f=c.surfaceEl,d=e.Children.only(n);if(!e.isValidElement(d))return null;var p=a?{"data-mdc-ripple-is-unbounded":!0}:{},h=u&&a?{}:f.props({style:d.props.style}),v=Ct()(r!==d.props.className&&r,h.className,d.props.className,{"mdc-ripple-surface":"boolean"===typeof u?u:void 0===u,"mdc-ripple-surface--primary":o,"mdc-ripple-surface--accent":i});s.disabled&&(v=v.replace("mdc-ripple-upgraded--background-focused",""));var m=e.cloneElement(d,ER(ER(ER({},d.props),p),l.props(ER(ER(ER(ER({},s),{style:d.props.style}),h),{className:v}))));return e.createElement(WR.Provider,{value:f.props({style:d.props.style})},m)},function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={domNode:null},e}return wR(n,t),n.prototype.componentDidMount=function(){this.setState({domNode:lt.findDOMNode(this)})},n.prototype.componentDidUpdate=function(){var e=lt.findDOMNode(this);e!==this.state.domNode&&this.setState({rootRippleElement:e})},n.prototype.render=function(){return e.createElement(FR,ER({},this.props,{domNode:this.state.domNode}))},n}(e.Component)),HR=function(t){var n=t.className,r=CR(t,["className"]);return e.createElement(WR.Consumer,null,(function(t){return e.createElement("div",ER({},r,t,{className:n+" "+(t.className||"")}))}))},GR=function(t){var n=void 0===t?{}:t,r=n.unbounded,o=n.accent,i=n.surface;return function(t){var n=e.forwardRef((function(n,a){var u=n.ripple,s=CR(n,["ripple"]),c=hR(),l="object"!==typeof(u=null!==u&&void 0!==u?u:c.ripple)?{}:u;return u?e.createElement(UR,ER({},s,{accent:l.accent||o,unbounded:l.unbounded||r,surface:l.surface||i}),e.createElement(t,ER({},s,{ref:a}))):e.createElement(t,ER({},s,{ref:a}))}));return n.displayName="withRipple("+(t.displayName||t.constructor.name||"Unknown")+")",n}},qR=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),KR={ICON_BUTTON_ON:"mdc-icon-button--on",ROOT:"mdc-icon-button"},$R={ARIA_LABEL:"aria-label",ARIA_PRESSED:"aria-pressed",DATA_ARIA_LABEL_OFF:"data-aria-label-off",DATA_ARIA_LABEL_ON:"data-aria-label-on",CHANGE_EVENT:"MDCIconButtonToggle:change"},XR=function(e){function t(n){var r=e.call(this,lR(lR({},t.defaultAdapter),n))||this;return r.hasToggledAriaLabel=!1,r}return function(e,t){function n(){this.constructor=e}cR(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return KR},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return $R},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},hasClass:function(){return!1},notifyChange:function(){},removeClass:function(){},getAttr:function(){return null},setAttr:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this.adapter.getAttr($R.DATA_ARIA_LABEL_ON),t=this.adapter.getAttr($R.DATA_ARIA_LABEL_OFF);if(e&&t){if(null!==this.adapter.getAttr($R.ARIA_PRESSED))throw new Error("MDCIconButtonToggleFoundation: Button should not set `aria-pressed` if it has a toggled aria label.");this.hasToggledAriaLabel=!0}else this.adapter.setAttr($R.ARIA_PRESSED,String(this.isOn()))},t.prototype.handleClick=function(){this.toggle(),this.adapter.notifyChange({isOn:this.isOn()})},t.prototype.isOn=function(){return this.adapter.hasClass(KR.ICON_BUTTON_ON)},t.prototype.toggle=function(e){if(void 0===e&&(e=!this.isOn()),e?this.adapter.addClass(KR.ICON_BUTTON_ON):this.adapter.removeClass(KR.ICON_BUTTON_ON),this.hasToggledAriaLabel){var t=e?this.adapter.getAttr($R.DATA_ARIA_LABEL_ON):this.adapter.getAttr($R.DATA_ARIA_LABEL_OFF);this.adapter.setAttr($R.ARIA_LABEL,t||"")}else this.adapter.setAttr($R.ARIA_PRESSED,""+e)},t}(qR),YR=sR((function(t,n){var r=fR(t,[]);return r.onIcon?e.createElement(QR,lR({},r,{ref:n})):e.createElement(ZR,lR({tag:"button"},r,{ref:n}))})),QR=sR((function(t,n){var r=t.icon,o=t.onIcon,i=(t.foundationRef,fR(t,["icon","onIcon","foundationRef"])),a=function(t){var n=AR({props:t,elements:{rootEl:!0},foundation:function(e){var t=e.rootEl,n=e.emit;return new XR({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},hasClass:function(e){return t.hasClass(e)},setAttr:function(e,n){return t.setProp(e,n)},notifyChange:function(e){return n("onChange",e)}})}}),r=n.foundation,o=fR(n,["foundation"]),i=o.rootEl,a=void 0!==t.checked?t.checked:r.isOn();return(0,e.useEffect)((function(){a!==r.isOn()&&r.toggle(a)}),[r,a]),i.setProp("onClick",(function(e){var n;null===(n=t.onClick)||void 0===n||n.call(t,e),r.handleClick()}),!0),lR({isOn:a,foundation:r},o)}(t),u=a.isOn,s=a.rootEl;return e.createElement(JR,lR({"aria-pressed":u},s.props(i),{tag:"button",ref:n}),e.createElement(eN,{icon:r}),e.createElement(eN,{icon:o,on:!0}))})),ZR=GR({surface:!1,unbounded:!0})(sR((function(t,n){var r=t.checked,o=t.label,i=(t.foundationRef,fR(t,["checked","label","foundationRef"])),a=iR(t,["mdc-icon-button",{"mdc-icon-button--on":r}]);return e.createElement(bR,lR({role:"button",tabIndex:0,"aria-label":o},i,{className:a,ref:n}))}))),JR=GR({surface:!1,unbounded:!0})(sR((function(t,n){var r=t.checked,o=fR(t,["checked"]),i=iR(t,["mdc-icon-button",{"mdc-icon-button--on":r}]);return e.createElement(oR,lR({tag:"button",role:"button",tabIndex:0},o,{className:i,ref:n}))}))),eN=e.memo((function(t){t.on;var n=fR(t,["on"]),r=iR(t,["mdc-icon-button__icon",{"mdc-icon-button__icon--on":t.on}]);return e.createElement(bR,lR({},n,{className:r}))})),tN={FIXED_CLASS:"mdc-top-app-bar--fixed",FIXED_SCROLLED_CLASS:"mdc-top-app-bar--fixed-scrolled",SHORT_CLASS:"mdc-top-app-bar--short",SHORT_COLLAPSED_CLASS:"mdc-top-app-bar--short-collapsed",SHORT_HAS_ACTION_ITEM_CLASS:"mdc-top-app-bar--short-has-action-item"},nN={DEBOUNCE_THROTTLE_RESIZE_TIME_MS:100,MAX_TOP_APP_BAR_HEIGHT:128},rN={ACTION_ITEM_SELECTOR:".mdc-top-app-bar__action-item",NAVIGATION_EVENT:"MDCTopAppBar:nav",NAVIGATION_ICON_SELECTOR:".mdc-top-app-bar__navigation-icon",ROOT_SELECTOR:".mdc-top-app-bar",TITLE_SELECTOR:".mdc-top-app-bar__title"},oN=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),iN=function(e){function t(n){return e.call(this,XA(XA({},t.defaultAdapter),n))||this}return $A(t,e),Object.defineProperty(t,"strings",{get:function(){return rN},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return tN},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return nN},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},getTopAppBarHeight:function(){return 0},notifyNavigationIconClicked:function(){},getViewportScrollY:function(){return 0},getTotalActionItems:function(){return 0}}},enumerable:!0,configurable:!0}),t.prototype.handleTargetScroll=function(){},t.prototype.handleWindowResize=function(){},t.prototype.handleNavigationClick=function(){this.adapter.notifyNavigationIconClicked()},t}(oN),aN=function(e){function t(t){var n=e.call(this,t)||this;return n.wasDocked_=!0,n.isDockedShowing_=!0,n.currentAppBarOffsetTop_=0,n.isCurrentlyBeingResized_=!1,n.resizeThrottleId_=0,n.resizeDebounceId_=0,n.lastScrollPosition_=n.adapter.getViewportScrollY(),n.topAppBarHeight_=n.adapter.getTopAppBarHeight(),n}return $A(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.adapter.setStyle("top","")},t.prototype.handleTargetScroll=function(){var e=Math.max(this.adapter.getViewportScrollY(),0),t=e-this.lastScrollPosition_;this.lastScrollPosition_=e,this.isCurrentlyBeingResized_||(this.currentAppBarOffsetTop_-=t,this.currentAppBarOffsetTop_>0?this.currentAppBarOffsetTop_=0:Math.abs(this.currentAppBarOffsetTop_)>this.topAppBarHeight_&&(this.currentAppBarOffsetTop_=-this.topAppBarHeight_),this.moveTopAppBar_())},t.prototype.handleWindowResize=function(){var e=this;this.resizeThrottleId_||(this.resizeThrottleId_=setTimeout((function(){e.resizeThrottleId_=0,e.throttledResizeHandler_()}),nN.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)),this.isCurrentlyBeingResized_=!0,this.resizeDebounceId_&&clearTimeout(this.resizeDebounceId_),this.resizeDebounceId_=setTimeout((function(){e.handleTargetScroll(),e.isCurrentlyBeingResized_=!1,e.resizeDebounceId_=0}),nN.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)},t.prototype.checkForUpdate_=function(){var e=-this.topAppBarHeight_,t=this.currentAppBarOffsetTop_<0,n=this.currentAppBarOffsetTop_>e,r=t&&n;if(r)this.wasDocked_=!1;else{if(!this.wasDocked_)return this.wasDocked_=!0,!0;if(this.isDockedShowing_!==n)return this.isDockedShowing_=n,!0}return r},t.prototype.moveTopAppBar_=function(){if(this.checkForUpdate_()){var e=this.currentAppBarOffsetTop_;Math.abs(e)>=this.topAppBarHeight_&&(e=-nN.MAX_TOP_APP_BAR_HEIGHT),this.adapter.setStyle("top",e+"px")}},t.prototype.throttledResizeHandler_=function(){var e=this.adapter.getTopAppBarHeight();this.topAppBarHeight_!==e&&(this.wasDocked_=!1,this.currentAppBarOffsetTop_-=this.topAppBarHeight_-e,this.topAppBarHeight_=e),this.handleTargetScroll()},t}(iN),uN=function(e){function t(t){var n=e.call(this,t)||this;return n.isCollapsed_=!1,n.isAlwaysCollapsed_=!1,n}return $A(t,e),Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return this.isCollapsed_},enumerable:!0,configurable:!0}),t.prototype.init=function(){e.prototype.init.call(this),this.adapter.getTotalActionItems()>0&&this.adapter.addClass(tN.SHORT_HAS_ACTION_ITEM_CLASS),this.setAlwaysCollapsed(this.adapter.hasClass(tN.SHORT_COLLAPSED_CLASS))},t.prototype.setAlwaysCollapsed=function(e){this.isAlwaysCollapsed_=!!e,this.isAlwaysCollapsed_?this.collapse_():this.maybeCollapseBar_()},t.prototype.getAlwaysCollapsed=function(){return this.isAlwaysCollapsed_},t.prototype.handleTargetScroll=function(){this.maybeCollapseBar_()},t.prototype.maybeCollapseBar_=function(){this.isAlwaysCollapsed_||(this.adapter.getViewportScrollY()<=0?this.isCollapsed_&&this.uncollapse_():this.isCollapsed_||this.collapse_())},t.prototype.uncollapse_=function(){this.adapter.removeClass(tN.SHORT_COLLAPSED_CLASS),this.isCollapsed_=!1},t.prototype.collapse_=function(){this.adapter.addClass(tN.SHORT_COLLAPSED_CLASS),this.isCollapsed_=!0},t}(iN),sN=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wasScrolled_=!1,t}return $A(t,e),t.prototype.handleTargetScroll=function(){this.adapter.getViewportScrollY()<=0?this.wasScrolled_&&(this.adapter.removeClass(tN.FIXED_SCROLLED_CLASS),this.wasScrolled_=!1):this.wasScrolled_||(this.adapter.addClass(tN.FIXED_SCROLLED_CLASS),this.wasScrolled_=!0)},t}(aN),cN=sR((function(t,n){return e.createElement(lN,XA({key:t.short?"short":t.fixed?"fixed":"top-app-bar"},t,{ref:n}))})),lN=sR((function(t,n){var r=function(t){var n=(0,e.useRef)(null),r=(0,e.useRef)(null),o=AR({props:t,elements:{rootEl:!0},foundation:function(e){var r=e.rootEl,o=e.emit,i={hasClass:function(e){return r.hasClass(e)},addClass:function(e){return r.addClass(e)},removeClass:function(e){return r.removeClass(e)},setStyle:function(e,t){return r.setStyle(e,t)},getTopAppBarHeight:function(){var e;return(null===(e=r.ref)||void 0===e?void 0:e.clientHeight)||0},notifyNavigationIconClicked:function(){return o("onNav",{})},getViewportScrollY:function(){var e=n.current;return e?e["pageYOffset"in e?"pageYOffset":"scrollTop"]:0},getTotalActionItems:function(){return r.ref?r.ref.querySelectorAll(aN.strings.ACTION_ITEM_SELECTOR).length:0}};return t.short?new uN(i):t.fixed?new sN(i):new aN(i)}}),i=o.foundation,a=YA(o,["foundation"]),u=a.rootEl;return(0,e.useEffect)((function(){var e,r,o=t.scrollTarget||(null===(r=null===(e=u.ref)||void 0===e?void 0:e.ownerDocument)||void 0===r?void 0:r.defaultView)||window,a=i.handleTargetScroll.bind(i);return o.addEventListener("scroll",a),n.current=o,function(){o.removeEventListener("scroll",a)}}),[t.scrollTarget,n,i,u.ref]),(0,e.useEffect)((function(){var e,t;r.current=(null===(e=u.ref)||void 0===e?void 0:e.querySelector(aN.strings.NAVIGATION_ICON_SELECTOR))||null;var n=i.handleNavigationClick.bind(i);return null===(t=r.current)||void 0===t||t.addEventListener("click",n),function(){var e;null===(e=r.current)||void 0===e||e.removeEventListener("click",n)}}),[u.ref,i]),(0,e.useEffect)((function(){i.lastScrollPosition_=i.adapter.getViewportScrollY(),i.topAppBarHeight_=i.adapter.getTopAppBarHeight()}),[i]),XA({foundation:i},a)}(t).rootEl,o=(t.onNav,t.scrollTarget,t.fixed),i=t.prominent,a=t.short,u=t.shortCollapsed,s=t.dense,c=(t.foundationRef,YA(t,["onNav","scrollTarget","fixed","prominent","short","shortCollapsed","dense","foundationRef"])),l=iR(t,["mdc-top-app-bar",{"mdc-top-app-bar--fixed":o,"mdc-top-app-bar--prominent":i,"mdc-top-app-bar--short":a||u,"mdc-top-app-bar--short-collapsed":u,"mdc-top-app-bar--dense":s}]);return e.createElement(oR,XA({tag:"header"},c,{element:r,className:l,ref:n}))})),fN=(sR((function(t,n){var r=t.title,o=t.actionItems,i=t.navigationIcon,a=t.startContent,u=t.endContent,s=YA(t,["title","actionItems","navigationIcon","startContent","endContent"]);return e.createElement(cN,XA({},s,{ref:n}),e.createElement(fN,null,e.createElement(dN,{alignStart:!0},!!i&&e.createElement(pN,XA({icon:"menu"},"boolean"===typeof i?{}:i)),!!r&&e.createElement(vN,null,r),a),(!!o||u)&&e.createElement(dN,{alignEnd:!0},u,!!o&&o.map((function(t,n){return e.createElement(hN,XA({},t,{key:n}))})))))})),sR((function(t,n){var r=iR(t,["mdc-top-app-bar__row"]);return e.createElement(oR,XA({},t,{ref:n,className:r}))}))),dN=sR((function(t,n){var r=t.alignStart,o=t.alignEnd,i=YA(t,["alignStart","alignEnd"]),a=iR(t,["mdc-top-app-bar__section",{"mdc-top-app-bar__section--align-start":r,"mdc-top-app-bar__section--align-end":o}]);return e.createElement(oR,XA({tag:"section"},i,{ref:n,className:a}))})),pN=sR((function(t,n){var r=iR(t,["mdc-top-app-bar__navigation-icon"]);return e.createElement(YR,XA({},t,{className:r,ref:n}))})),hN=sR((function(t,n){var r=iR(t,["mdc-top-app-bar__action-item"]);return e.createElement(YR,XA({},t,{className:r,ref:n}))})),vN=sR((function(t,n){var r=iR(t,["mdc-top-app-bar__title"]);return e.createElement(oR,XA({},t,{ref:n,className:r}))})),mN=sR((function(t,n){t.dense,t.denseProminent,t.prominent,t.short;var r=YA(t,["dense","denseProminent","prominent","short"]),o=iR(t,[{"mdc-top-app-bar--fixed-adjust":!t.dense&&!t.denseProminent&&!t.prominent&&!t.short,"mdc-top-app-bar--dense-fixed-adjust":t.dense,"mdc-top-app-bar--prominent-fixed-adjust":t.prominent,"mdc-top-app-bar--dense-prominent-fixed-adjust":t.denseProminent,"mdc-top-app-bar--short-fixed-adjust":t.short}]);return e.createElement(oR,XA({},r,{ref:n,className:o}))})),gN=function(t){var n=e.Children.only(t.children);return e.cloneElement(n,QA(QA(QA({},t),n.props),{className:Ct()(t.className,n.props.className),style:QA(QA({},n.props.style),t.style)}))},yN={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",transparent:"#ffffff",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},bN=function(e,t,n){var r=[e,t,n].map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}));return.2126*r[0]+.7152*r[1]+.0722*r[2]},xN=function(e){var t;return function(e){4===e.length&&(e+=e.slice(1));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}}(e=yN[t=e]||t)},wN=function(e){var t,n,r=xN(e),o=r.r,i=r.g,a=r.b;return!((n=[o,i,a],(bN((t=[255,255,255])[0],t[1],t[2])+.05)/(bN(n[0],n[1],n[2])+.05))>3)},EN={"--mdc-theme-primary":[["--mdc-theme-on-primary",0]],"--mdc-theme-surface":[["--mdc-theme-on-surface",0]],"--mdc-theme-secondary":[["--mdc-theme-on-secondary",0]],"--mdc-theme-background":[["--mdc-theme-text-primary-on-background",0],["--mdc-theme-text-secondary-on-background",1],["--mdc-theme-text-hint-on-background",2],["--mdc-theme-text-disabled-on-background",2],["--mdc-theme-text-icon-on-background",2]]},CN=["rgba(0, 0, 0, 0.87)","rgba(0, 0, 0, 0.54)","rgba(0, 0, 0, 0.38)"],_N=["rgba(255, 255, 255, 1)","rgba(255, 255, 255, 0.7)","rgba(255, 255, 255, 0.5)"],kN=(sR((function(t,n){var r=t.use,o=t.wrap,i=ZA(t,["use","wrap"]),a=iR(t,[rR(r).join(" ")]);return o?gN(QA(QA({},i),{ref:n,className:a})):e.createElement(oR,QA({tag:"span",theme:r},i,{ref:n,className:a}))})),sR((function(t,n){var r,o,i=JSON.stringify(t.options),a=(0,e.useMemo)((function(){var e=Object.keys(t.options).reduce((function(e,n){var r=t.options[n];return e[n=n.startsWith("--")?n:"--mdc-theme-"+nR(n)]=r,e}),{});return function(e){var t=Object.keys(EN).reduce((function(t,n){if(e[n]){var r=wN(e[n])?CN:_N;EN[n].forEach((function(e){t[e[0]]=r[e[1]]}))}return t}),{});return QA(QA({},t),e)}(e)}),[i]),u=(t.options,t.style),s=void 0===u?{}:u,c=t.wrap,l=ZA(t,["options","style","wrap"]),f=iR(t,[c&&"object"===typeof l.children&&(null===(o=null===(r=l.children)||void 0===r?void 0:r.props)||void 0===o?void 0:o.className)]),d=QA(QA({},s),a);return c&&l.children?gN(QA(QA({},l),{style:d,ref:n})):e.createElement(oR,QA({},l,{style:d,className:f,ref:n}))}))),SN="rmwcPortal";function ON(){var t=(0,e.useRef)(null);return e.createElement("div",{ref:t,id:SN})}function TN(t){var n=t.children,r=t.renderTo,o=(0,e.useMemo)((function(){if("undefined"!==typeof document){var e=void 0;return!0===r?!(e=document.getElementById(SN)||void 0)&&console.warn('No default Portal found. Did you forget to include it in the root of your app? `import { Portal } from "@rmwc/base";`'):"string"===typeof r?!(e=document.querySelector(r)||void 0)&&console.warn('The selector you provided for renderToPortal "'+r+"\" didn't find any elements."):r instanceof Element&&(e=r),e}}),[r]);return o?lt.createPortal(n,o):e.createElement(e.Fragment,null,n)}n(3147),n(8697),n(9619),n(9933);var AN=function(e,t){return AN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},AN(e,t)};var RN=function(){return RN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},RN.apply(this,arguments)};function NN(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}var IN=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),PN={CLOSING:"mdc-dialog--closing",OPEN:"mdc-dialog--open",OPENING:"mdc-dialog--opening",SCROLLABLE:"mdc-dialog--scrollable",SCROLL_LOCK:"mdc-dialog-scroll-lock",STACKED:"mdc-dialog--stacked"},DN={ACTION_ATTRIBUTE:"data-mdc-dialog-action",BUTTON_DEFAULT_ATTRIBUTE:"data-mdc-dialog-button-default",BUTTON_SELECTOR:".mdc-dialog__button",CLOSED_EVENT:"MDCDialog:closed",CLOSE_ACTION:"close",CLOSING_EVENT:"MDCDialog:closing",CONTAINER_SELECTOR:".mdc-dialog__container",CONTENT_SELECTOR:".mdc-dialog__content",DESTROY_ACTION:"destroy",INITIAL_FOCUS_ATTRIBUTE:"data-mdc-dialog-initial-focus",OPENED_EVENT:"MDCDialog:opened",OPENING_EVENT:"MDCDialog:opening",SCRIM_SELECTOR:".mdc-dialog__scrim",SUPPRESS_DEFAULT_PRESS_SELECTOR:["textarea",".mdc-menu .mdc-list-item"].join(", "),SURFACE_SELECTOR:".mdc-dialog__surface"},MN={DIALOG_ANIMATION_CLOSE_TIME_MS:75,DIALOG_ANIMATION_OPEN_TIME_MS:150},FN=function(e){function t(n){var r=e.call(this,RN(RN({},t.defaultAdapter),n))||this;return r.isOpen_=!1,r.animationFrame_=0,r.animationTimer_=0,r.layoutFrame_=0,r.escapeKeyAction_=DN.CLOSE_ACTION,r.scrimClickAction_=DN.CLOSE_ACTION,r.autoStackButtons_=!0,r.areButtonsStacked_=!1,r.suppressDefaultPressSelector=DN.SUPPRESS_DEFAULT_PRESS_SELECTOR,r}return function(e,t){function n(){this.constructor=e}AN(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return PN},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return DN},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return MN},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addBodyClass:function(){},addClass:function(){},areButtonsStacked:function(){return!1},clickDefaultButton:function(){},eventTargetMatches:function(){return!1},getActionFromEvent:function(){return""},getInitialFocusEl:function(){return null},hasClass:function(){return!1},isContentScrollable:function(){return!1},notifyClosed:function(){},notifyClosing:function(){},notifyOpened:function(){},notifyOpening:function(){},releaseFocus:function(){},removeBodyClass:function(){},removeClass:function(){},reverseButtons:function(){},trapFocus:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter.hasClass(PN.STACKED)&&this.setAutoStackButtons(!1)},t.prototype.destroy=function(){this.isOpen_&&this.close(DN.DESTROY_ACTION),this.animationTimer_&&(clearTimeout(this.animationTimer_),this.handleAnimationTimerEnd_()),this.layoutFrame_&&(cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=0)},t.prototype.open=function(){var e=this;this.isOpen_=!0,this.adapter.notifyOpening(),this.adapter.addClass(PN.OPENING),this.runNextAnimationFrame_((function(){e.adapter.addClass(PN.OPEN),e.adapter.addBodyClass(PN.SCROLL_LOCK),e.layout(),e.animationTimer_=setTimeout((function(){e.handleAnimationTimerEnd_(),e.adapter.trapFocus(e.adapter.getInitialFocusEl()),e.adapter.notifyOpened()}),MN.DIALOG_ANIMATION_OPEN_TIME_MS)}))},t.prototype.close=function(e){var t=this;void 0===e&&(e=""),this.isOpen_&&(this.isOpen_=!1,this.adapter.notifyClosing(e),this.adapter.addClass(PN.CLOSING),this.adapter.removeClass(PN.OPEN),this.adapter.removeBodyClass(PN.SCROLL_LOCK),cancelAnimationFrame(this.animationFrame_),this.animationFrame_=0,clearTimeout(this.animationTimer_),this.animationTimer_=setTimeout((function(){t.adapter.releaseFocus(),t.handleAnimationTimerEnd_(),t.adapter.notifyClosed(e)}),MN.DIALOG_ANIMATION_CLOSE_TIME_MS))},t.prototype.isOpen=function(){return this.isOpen_},t.prototype.getEscapeKeyAction=function(){return this.escapeKeyAction_},t.prototype.setEscapeKeyAction=function(e){this.escapeKeyAction_=e},t.prototype.getScrimClickAction=function(){return this.scrimClickAction_},t.prototype.setScrimClickAction=function(e){this.scrimClickAction_=e},t.prototype.getAutoStackButtons=function(){return this.autoStackButtons_},t.prototype.setAutoStackButtons=function(e){this.autoStackButtons_=e},t.prototype.getSuppressDefaultPressSelector=function(){return this.suppressDefaultPressSelector},t.prototype.setSuppressDefaultPressSelector=function(e){this.suppressDefaultPressSelector=e},t.prototype.layout=function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){e.layoutInternal_(),e.layoutFrame_=0}))},t.prototype.handleClick=function(e){if(this.adapter.eventTargetMatches(e.target,DN.SCRIM_SELECTOR)&&""!==this.scrimClickAction_)this.close(this.scrimClickAction_);else{var t=this.adapter.getActionFromEvent(e);t&&this.close(t)}},t.prototype.handleKeydown=function(e){var t="Enter"===e.key||13===e.keyCode;if(t&&!this.adapter.getActionFromEvent(e)){var n=e.composedPath?e.composedPath()[0]:e.target,r=!this.adapter.eventTargetMatches(n,this.suppressDefaultPressSelector);t&&r&&this.adapter.clickDefaultButton()}},t.prototype.handleDocumentKeydown=function(e){("Escape"===e.key||27===e.keyCode)&&""!==this.escapeKeyAction_&&this.close(this.escapeKeyAction_)},t.prototype.layoutInternal_=function(){this.autoStackButtons_&&this.detectStackedButtons_(),this.detectScrollableContent_()},t.prototype.handleAnimationTimerEnd_=function(){this.animationTimer_=0,this.adapter.removeClass(PN.OPENING),this.adapter.removeClass(PN.CLOSING)},t.prototype.runNextAnimationFrame_=function(e){var t=this;cancelAnimationFrame(this.animationFrame_),this.animationFrame_=requestAnimationFrame((function(){t.animationFrame_=0,clearTimeout(t.animationTimer_),t.animationTimer_=setTimeout(e,0)}))},t.prototype.detectStackedButtons_=function(){this.adapter.removeClass(PN.STACKED);var e=this.adapter.areButtonsStacked();e&&this.adapter.addClass(PN.STACKED),e!==this.areButtonsStacked_&&(this.adapter.reverseButtons(),this.areButtonsStacked_=e)},t.prototype.detectScrollableContent_=function(){this.adapter.removeClass(PN.SCROLLABLE),this.adapter.isContentScrollable()&&this.adapter.addClass(PN.SCROLLABLE)},t}(IN);var LN=function(){return LN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},LN.apply(this,arguments)};var jN=GR({surface:!1})(sR((function(t,n){var r=t.dense,o=t.raised,i=t.unelevated,a=t.outlined,u=t.danger,s=t.icon,c=t.label,l=t.trailingIcon,f=t.children,d=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(t,["dense","raised","unelevated","outlined","danger","icon","label","trailingIcon","children"]),p=iR(t,["mdc-button",{"mdc-button--dense":r,"mdc-button--raised":o,"mdc-button--unelevated":i,"mdc-button--outlined":a}]);if(u){var h=d.style||{};d.style=LN(LN({},{"--mdc-theme-primary":"var(--mdc-theme-error)","--mdc-theme-on-primary":"var(--mdc-theme-on-error)"}),h)}return e.createElement(oR,LN({tag:"button"},d,{ref:n,className:p}),e.createElement(BN,null),!!s&&e.createElement(VN,{icon:s}),e.createElement("span",{className:"mdc-button__label"},c,f),!!l&&e.createElement(VN,{icon:l}))}))),BN=e.memo((function(){return e.createElement("div",{className:"mdc-button__ripple"})})),VN=function(t){var n=sR(t);return e.memo(n)}((function(t,n){var r=iR(t,["mdc-button__icon"]);return e.createElement(bR,LN({},t,{className:r,ref:n}))})),zN=n(4767).focusTrap.FocusTrap,WN=function(t){var n=(0,e.useRef)(),r=(0,e.useRef)(null),o=(0,e.useRef)(null),i=(0,e.useRef)(null),a=AR({props:t,elements:{rootEl:!0},foundation:function(e){var t=e.rootEl,a=e.emit;e.getProps;return new FN({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},hasClass:function(e){return t.hasClass(e)},addBodyClass:function(e){return document.body&&document.body.classList.add(e)},removeBodyClass:function(e){return document.body&&document.body.classList.remove(e)},eventTargetMatches:function(e,t){return NR(e,t)},trapFocus:function(){var e;try{null===(e=n.current)||void 0===e||e.trapFocus()}catch(t){}},releaseFocus:function(){var e;return null===(e=n.current)||void 0===e?void 0:e.releaseFocus()},isContentScrollable:function(){return!!i.current&&function(e){return e.scrollHeight>e.offsetHeight}(i.current)},areButtonsStacked:function(){return function(e){var t=new Set;return[].forEach.call(e,(function(e){return t.add(e.offsetTop)})),t.size>1}(o.current)},getActionFromEvent:function(e){var t=function(e,t){if(e instanceof Element){if(e&&e.closest)return e.closest(t);for(var n=e;n;){if(NR(n,t))return n;n=n.parentElement}}return null}(e.target,"["+FN.strings.ACTION_ATTRIBUTE+"]");return(null===t||void 0===t?void 0:t.getAttribute(FN.strings.ACTION_ATTRIBUTE))||null},clickDefaultButton:function(){var e;null===(e=r.current)||void 0===e||e.click()},reverseButtons:function(){var e,t;null===(e=o.current)||void 0===e||e.reverse(),null===(t=o.current)||void 0===t||t.forEach((function(e){return e.parentElement&&e.parentElement.appendChild(e)}))},notifyOpening:function(){return a("onOpen",{})},notifyOpened:function(){a("onOpened",{}),window.dispatchEvent(new Event("resize"))},notifyClosing:function(e){return a("onClose",e?{action:e}:{})},notifyClosed:function(e){return a("onClosed",e?{action:e}:{})},getInitialFocusEl:function(){return document.querySelector("["+FN.strings.INITIAL_FOCUS_ATTRIBUTE+"]")}})}}),u=a.foundation,s=NN(a,["foundation"]),c=s.rootEl,l=(0,e.useMemo)((function(){var e=u.handleDocumentKeydown.bind(u);return function(n){if("Escape"!==n.key||!t.preventOutsideDismiss)return e(n)}}),[u,t.preventOutsideDismiss]);(0,e.useEffect)((function(){var e;r.current=c.ref&&c.ref.querySelector("["+FN.strings.BUTTON_DEFAULT_ATTRIBUTE+"]")||null,o.current=c.ref&&[].slice.call(c.ref.querySelectorAll(FN.strings.BUTTON_SELECTOR)),i.current=(null===(e=c.ref)||void 0===e?void 0:e.querySelector(FN.strings.CONTENT_SELECTOR))||null}),[c.ref]),(0,e.useEffect)((function(){var e=c.ref&&c.ref.querySelector(FN.strings.SURFACE_SELECTOR);e&&(n.current=function(e,t){return new zN(e,t)}(e,{initialFocusEl:r.current||void 0}))}),[c.ref]),(0,e.useEffect)((function(){return t.open?u.isOpen()||(document.addEventListener("keydown",l),u.open()):u.isOpen()&&(document.removeEventListener("keydown",l),u.close()),function(){document.removeEventListener("keydown",l)}}),[t.open,u,l]);return c.setProp("onClick",(function(e){var n;return null===(n=t.onClick)||void 0===n||n.call(t,e),u.handleClick(e)}),!0),c.setProp("onKeyDown",(function(e){var n;return null===(n=t.onKeyDown)||void 0===n||n.call(t,e),u.handleKeydown(e)}),!0),RN({foundation:u},s)},UN=sR((function(t,n){var r=WN(t).rootEl,o=iR(t,["mdc-dialog"]),i=t.children,a=(t.open,t.onOpen,t.onOpened,t.onClose,t.onClosed,t.preventOutsideDismiss),u=(t.foundationRef,t.renderToPortal),s=t["aria-labelledby"],c=t["aria-describedby"],l=NN(t,["children","open","onOpen","onOpened","onClose","onClosed","preventOutsideDismiss","foundationRef","renderToPortal","aria-labelledby","aria-describedby"]);return e.createElement(TN,{renderTo:u},e.createElement(oR,RN({},l,{element:r,className:o,ref:n}),e.createElement("div",{className:"mdc-dialog__container"},e.createElement("div",{className:"mdc-dialog__surface",role:"alertdialog","aria-modal":!0,"aria-labelledby":s,"aria-describedby":c},i)),e.createElement(HN,{disableInteraction:a})))})),HN=(sR((function(t,n){var r=t.title,o=t.header,i=t.body,a=t.footer,u=t.acceptLabel,s=void 0===u?"Accept":u,c=t.cancelLabel,l=void 0===c?"Cancel":c,f=t.children,d=t.open,p=NN(t,["title","header","body","footer","acceptLabel","cancelLabel","children","open"]);return e.createElement(UN,RN({open:d},p,{ref:n}),(!!r||!!o)&&e.createElement(GN,null,!!r&&r,!!o&&o),(!!i||f)&&e.createElement(qN,null,i,f),(!!l||!!s||!!a)&&e.createElement(KN,null,!!a&&a,!!l&&e.createElement($N,{action:"close"},l),!!s&&e.createElement($N,{action:"accept",isDefaultAction:!0},s)))})),e.memo((function(t){var n=t.disableInteraction?{pointerEvents:"none"}:{};return e.createElement("div",{className:"mdc-dialog__scrim",style:n})}))),GN=sR((function(t,n){var r=iR(t,["mdc-dialog__title"]);return e.createElement(oR,RN({tag:"h2"},t,{ref:n,className:r}))})),qN=sR((function(t,n){var r=iR(t,["mdc-dialog__content"]);return e.createElement(oR,RN({},t,{ref:n,className:r}))})),KN=sR((function(t,n){var r=iR(t,["mdc-dialog__actions"]);return e.createElement(oR,RN({},t,{ref:n,className:r}))})),$N=sR((function(t,n){var r,o=iR(t,["mdc-dialog__button"]),i=t.action,a=void 0===i?"":i,u=t.isDefaultAction,s=NN(t,["action","isDefaultAction"]),c=u?((r={})[FN.strings.BUTTON_DEFAULT_ATTRIBUTE]=!0,r):{};return e.createElement(jN,RN({},s,c,{ref:n,className:o,"data-mdc-dialog-action":a}))})),XN=(n(5033),function(e,t){return XN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},XN(e,t)});function YN(e,t){function n(){this.constructor=e}XN(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var QN=function(){return QN=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},QN.apply(this,arguments)};function ZN(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function JN(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var eI=function(t,n){var r=n.id?n.id:n.label?t+"-"+n.label:function(e){return e+"-"+(Math.random()+Math.random()+1).toString(36).substring(2)}(t);return eR((0,e.useState)(r),1)[0]},tI=function(e,t){return tI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},tI(e,t)};var nI=function(){return nI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},nI.apply(this,arguments)};function rI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}var oI=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),iI={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"},aI=function(e){function t(n){var r=e.call(this,nI(nI({},t.defaultAdapter),n))||this;return r.transitionEndHandler_=function(e){return r.handleTransitionEnd(e)},r}return function(e,t){function n(){this.constructor=e}tI(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return iI},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter.registerEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.destroy=function(){this.adapter.deregisterEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.activate=function(){this.adapter.removeClass(iI.LINE_RIPPLE_DEACTIVATING),this.adapter.addClass(iI.LINE_RIPPLE_ACTIVE)},t.prototype.setRippleCenter=function(e){this.adapter.setStyle("transform-origin",e+"px center")},t.prototype.deactivate=function(){this.adapter.addClass(iI.LINE_RIPPLE_DEACTIVATING)},t.prototype.handleTransitionEnd=function(e){var t=this.adapter.hasClass(iI.LINE_RIPPLE_DEACTIVATING);"opacity"===e.propertyName&&t&&(this.adapter.removeClass(iI.LINE_RIPPLE_ACTIVE),this.adapter.removeClass(iI.LINE_RIPPLE_DEACTIVATING))},t}(oI),uI=sR((function(t,n){t.active,t.center;var r=rI(t,["active","center"]),o=function(t){var n=AR({props:t,elements:{rootEl:!0},foundation:function(e){var t=e.rootEl;return new aI({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},hasClass:function(e){return t.hasClass(e)},setStyle:function(e,n){return t.setStyle(e,n)},registerEventHandler:function(e,n){return t.addEventListener(e,n)},deregisterEventHandler:function(e,n){return t.removeEventListener(e,n)}})}}),r=n.foundation,o=rI(n,["foundation"]),i=o.rootEl;return(0,e.useEffect)((function(){t.active?r.activate():r.deactivate()}),[t.active,r]),(0,e.useEffect)((function(){"number"===typeof t.center&&r.setRippleCenter(t.center)}),[t.center,r]),i.setProp("onTransitionEnd",(function(e){return r.handleTransitionEnd(e)}),!0),nI({foundation:r},o)}(t).rootEl;return e.createElement(oR,nI({},r,{tag:"span",element:o,className:"mdc-line-ripple",ref:n}))})),sI=function(e,t){return sI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},sI(e,t)};var cI=function(){return cI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},cI.apply(this,arguments)};function lI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}var fI=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),dI={LABEL_FLOAT_ABOVE:"mdc-floating-label--float-above",LABEL_REQUIRED:"mdc-floating-label--required",LABEL_SHAKE:"mdc-floating-label--shake",ROOT:"mdc-floating-label"},pI=function(e){function t(n){var r=e.call(this,cI(cI({},t.defaultAdapter),n))||this;return r.shakeAnimationEndHandler_=function(){return r.handleShakeAnimationEnd_()},r}return function(e,t){function n(){this.constructor=e}sI(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return dI},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},getWidth:function(){return 0},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter.registerInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("animationend",this.shakeAnimationEndHandler_)},t.prototype.getWidth=function(){return this.adapter.getWidth()},t.prototype.shake=function(e){var n=t.cssClasses.LABEL_SHAKE;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.float=function(e){var n=t.cssClasses,r=n.LABEL_FLOAT_ABOVE,o=n.LABEL_SHAKE;e?this.adapter.addClass(r):(this.adapter.removeClass(r),this.adapter.removeClass(o))},t.prototype.setRequired=function(e){var n=t.cssClasses.LABEL_REQUIRED;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.handleShakeAnimationEnd_=function(){var e=t.cssClasses.LABEL_SHAKE;this.adapter.removeClass(e)},t}(fI),hI=sR((function(t,n){var r=function(t){var n=AR({props:t,elements:{rootEl:!0},api:function(e){var t=e.foundation;return{getWidth:function(){return t.getWidth()},setRequired:function(e){return t.setRequired(e)}}},foundation:function(e){var t=e.rootEl;return new pI({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},getWidth:function(){var e;return(null===(e=t.ref)||void 0===e?void 0:e.scrollWidth)||0},registerInteractionHandler:function(e,n){return t.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.removeEventListener(e,n)}})}}),r=n.foundation,o=lI(n,["foundation"]);return(0,e.useEffect)((function(){r.shake(!!t.shake)}),[t.shake,r]),(0,e.useEffect)((function(){r.float(!!t.float)}),[t.float,r]),cI({foundation:r},o)}(t).rootEl,o=(t.shake,t.float,t.apiRef,lI(t,["shake","float","apiRef"]));return e.createElement("span",cI({},r.props(cI(cI({},o),{className:"mdc-floating-label"})),{ref:aR(r.setRef,n)}))})),vI=function(e,t){return vI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},vI(e,t)};var mI=function(){return mI=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mI.apply(this,arguments)};function gI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}var yI=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),bI={NOTCH_ELEMENT_SELECTOR:".mdc-notched-outline__notch"},xI={NOTCH_ELEMENT_PADDING:8},wI={NO_LABEL:"mdc-notched-outline--no-label",OUTLINE_NOTCHED:"mdc-notched-outline--notched",OUTLINE_UPGRADED:"mdc-notched-outline--upgraded"},EI=function(e){function t(n){return e.call(this,mI(mI({},t.defaultAdapter),n))||this}return function(e,t){function n(){this.constructor=e}vI(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"strings",{get:function(){return bI},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return wI},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return xI},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNotchWidthProperty:function(){},removeNotchWidthProperty:function(){}}},enumerable:!0,configurable:!0}),t.prototype.notch=function(e){var n=t.cssClasses.OUTLINE_NOTCHED;e>0&&(e+=xI.NOTCH_ELEMENT_PADDING),this.adapter.setNotchWidthProperty(e),this.adapter.addClass(n)},t.prototype.closeNotch=function(){var e=t.cssClasses.OUTLINE_NOTCHED;this.adapter.removeClass(e),this.adapter.removeNotchWidthProperty()},t}(yI),CI=sR((function(t,n){var r=t.children,o=gI(t,["children"]),i=function(t){var n=AR({props:t,elements:{rootEl:!0,notchedEl:!0},foundation:function(e){var t=e.rootEl,n=e.notchedEl;return new EI({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},setNotchWidthProperty:function(e){return n.setStyle("width",e+"px")},removeNotchWidthProperty:function(){return n.setStyle("width","")}})}}),r=n.foundation,o=gI(n,["foundation"]),i=o.rootEl,a=(0,e.useRef)();return(0,e.useEffect)((function(){t.notch?r.notch(t.notch):r.closeNotch()}),[t.notch,r]),(0,e.useEffect)((function(){var e;a.current=(null===(e=i.ref)||void 0===e?void 0:e.querySelector(".mdc-floating-label"))||void 0;var t=a.current;t?(t.style.transitionDuration="0s",i.addClass(EI.cssClasses.OUTLINE_UPGRADED),requestAnimationFrame((function(){t&&(t.style.transitionDuration="")}))):i.addClass(EI.cssClasses.NO_LABEL)}),[i]),mI({foundation:r},o)}(t),a=i.rootEl,u=i.notchedEl;return e.createElement(oR,mI({},o,{element:a,className:"mdc-notched-outline",ref:n}),e.createElement(_I,null),e.createElement("div",mI({},u.props({className:"mdc-notched-outline__notch"}),{ref:u.setRef}),r),e.createElement(kI,null))})),_I=e.memo((function(){return e.createElement("div",{className:"mdc-notched-outline__leading"})})),kI=e.memo((function(){return e.createElement("div",{className:"mdc-notched-outline__trailing"})})),SI=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),OI={ICON_EVENT:"MDCTextField:icon",ICON_ROLE:"button"},TI={ROOT:"mdc-text-field__icon"},AI=["click","keydown"],RI=function(e){function t(n){var r=e.call(this,QN(QN({},t.defaultAdapter),n))||this;return r.savedTabIndex_=null,r.interactionHandler_=function(e){return r.handleInteraction(e)},r}return YN(t,e),Object.defineProperty(t,"strings",{get:function(){return OI},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return TI},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},notifyIconAction:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.savedTabIndex_=this.adapter.getAttr("tabindex"),AI.forEach((function(t){e.adapter.registerInteractionHandler(t,e.interactionHandler_)}))},t.prototype.destroy=function(){var e=this;AI.forEach((function(t){e.adapter.deregisterInteractionHandler(t,e.interactionHandler_)}))},t.prototype.setDisabled=function(e){this.savedTabIndex_&&(e?(this.adapter.setAttr("tabindex","-1"),this.adapter.removeAttr("role")):(this.adapter.setAttr("tabindex",this.savedTabIndex_),this.adapter.setAttr("role",OI.ICON_ROLE)))},t.prototype.setAriaLabel=function(e){this.adapter.setAttr("aria-label",e)},t.prototype.setContent=function(e){this.adapter.setContent(e)},t.prototype.handleInteraction=function(e){var t="Enter"===e.key||13===e.keyCode;("click"===e.type||t)&&(e.preventDefault(),this.adapter.notifyIconAction())},t}(SI),NI={ARIA_CONTROLS:"aria-controls",ARIA_DESCRIBEDBY:"aria-describedby",INPUT_SELECTOR:".mdc-text-field__input",LABEL_SELECTOR:".mdc-floating-label",LEADING_ICON_SELECTOR:".mdc-text-field__icon--leading",LINE_RIPPLE_SELECTOR:".mdc-line-ripple",OUTLINE_SELECTOR:".mdc-notched-outline",PREFIX_SELECTOR:".mdc-text-field__affix--prefix",SUFFIX_SELECTOR:".mdc-text-field__affix--suffix",TRAILING_ICON_SELECTOR:".mdc-text-field__icon--trailing"},II={DISABLED:"mdc-text-field--disabled",FOCUSED:"mdc-text-field--focused",HELPER_LINE:"mdc-text-field-helper-line",INVALID:"mdc-text-field--invalid",LABEL_FLOATING:"mdc-text-field--label-floating",NO_LABEL:"mdc-text-field--no-label",OUTLINED:"mdc-text-field--outlined",ROOT:"mdc-text-field",TEXTAREA:"mdc-text-field--textarea",WITH_LEADING_ICON:"mdc-text-field--with-leading-icon",WITH_TRAILING_ICON:"mdc-text-field--with-trailing-icon"},PI={LABEL_SCALE:.75},DI=["pattern","min","max","required","step","minlength","maxlength"],MI=["color","date","datetime-local","month","range","time","week"],FI=["mousedown","touchstart"],LI=["click","keydown"],jI=function(e){function t(n,r){void 0===r&&(r={});var o=e.call(this,QN(QN({},t.defaultAdapter),n))||this;return o.isFocused_=!1,o.receivedUserInput_=!1,o.isValid_=!0,o.useNativeValidation_=!0,o.validateOnValueChange_=!0,o.helperText_=r.helperText,o.characterCounter_=r.characterCounter,o.leadingIcon_=r.leadingIcon,o.trailingIcon_=r.trailingIcon,o.inputFocusHandler_=function(){return o.activateFocus()},o.inputBlurHandler_=function(){return o.deactivateFocus()},o.inputInputHandler_=function(){return o.handleInput()},o.setPointerXOffset_=function(e){return o.setTransformOrigin(e)},o.textFieldInteractionHandler_=function(){return o.handleTextFieldInteraction()},o.validationAttributeChangeHandler_=function(e){return o.handleValidationAttributeChange(e)},o}return YN(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return II},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return NI},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return PI},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldAlwaysFloat_",{get:function(){var e=this.getNativeInput_().type;return MI.indexOf(e)>=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldFloat",{get:function(){return this.shouldAlwaysFloat_||this.isFocused_||!!this.getValue()||this.isBadInput_()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shouldShake",{get:function(){return!this.isFocused_&&!this.isValid()&&!!this.getValue()},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!0},setInputAttr:function(){},removeInputAttr:function(){},registerTextFieldInteractionHandler:function(){},deregisterTextFieldInteractionHandler:function(){},registerInputInteractionHandler:function(){},deregisterInputInteractionHandler:function(){},registerValidationAttributeChangeHandler:function(){return new MutationObserver((function(){}))},deregisterValidationAttributeChangeHandler:function(){},getNativeInput:function(){return null},isFocused:function(){return!1},activateLineRipple:function(){},deactivateLineRipple:function(){},setLineRippleTransformOrigin:function(){},shakeLabel:function(){},floatLabel:function(){},setLabelRequired:function(){},hasLabel:function(){return!1},getLabelWidth:function(){return 0},hasOutline:function(){return!1},notchOutline:function(){},closeOutline:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.adapter.hasLabel()&&this.getNativeInput_().required&&this.adapter.setLabelRequired(!0),this.adapter.isFocused()?this.inputFocusHandler_():this.adapter.hasLabel()&&this.shouldFloat&&(this.notchOutline(!0),this.adapter.floatLabel(!0),this.styleFloating_(!0)),this.adapter.registerInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter.registerInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter.registerInputInteractionHandler("input",this.inputInputHandler_),FI.forEach((function(t){e.adapter.registerInputInteractionHandler(t,e.setPointerXOffset_)})),LI.forEach((function(t){e.adapter.registerTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.validationObserver_=this.adapter.registerValidationAttributeChangeHandler(this.validationAttributeChangeHandler_),this.setCharacterCounter_(this.getValue().length)},t.prototype.destroy=function(){var e=this;this.adapter.deregisterInputInteractionHandler("focus",this.inputFocusHandler_),this.adapter.deregisterInputInteractionHandler("blur",this.inputBlurHandler_),this.adapter.deregisterInputInteractionHandler("input",this.inputInputHandler_),FI.forEach((function(t){e.adapter.deregisterInputInteractionHandler(t,e.setPointerXOffset_)})),LI.forEach((function(t){e.adapter.deregisterTextFieldInteractionHandler(t,e.textFieldInteractionHandler_)})),this.adapter.deregisterValidationAttributeChangeHandler(this.validationObserver_)},t.prototype.handleTextFieldInteraction=function(){var e=this.adapter.getNativeInput();e&&e.disabled||(this.receivedUserInput_=!0)},t.prototype.handleValidationAttributeChange=function(e){var t=this;e.some((function(e){return DI.indexOf(e)>-1&&(t.styleValidity_(!0),t.adapter.setLabelRequired(t.getNativeInput_().required),!0)})),e.indexOf("maxlength")>-1&&this.setCharacterCounter_(this.getValue().length)},t.prototype.notchOutline=function(e){if(this.adapter.hasOutline()&&this.adapter.hasLabel())if(e){var t=this.adapter.getLabelWidth()*PI.LABEL_SCALE;this.adapter.notchOutline(t)}else this.adapter.closeOutline()},t.prototype.activateFocus=function(){this.isFocused_=!0,this.styleFocused_(this.isFocused_),this.adapter.activateLineRipple(),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating_(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),!this.helperText_||!this.helperText_.isPersistent()&&this.helperText_.isValidation()&&this.isValid_||this.helperText_.showToScreenReader()},t.prototype.setTransformOrigin=function(e){if(!this.isDisabled()&&!this.adapter.hasOutline()){var t=e.touches,n=t?t[0]:e,r=n.target.getBoundingClientRect(),o=n.clientX-r.left;this.adapter.setLineRippleTransformOrigin(o)}},t.prototype.handleInput=function(){this.autoCompleteFocus(),this.setCharacterCounter_(this.getValue().length)},t.prototype.autoCompleteFocus=function(){this.receivedUserInput_||this.activateFocus()},t.prototype.deactivateFocus=function(){this.isFocused_=!1,this.adapter.deactivateLineRipple();var e=this.isValid();this.styleValidity_(e),this.styleFocused_(this.isFocused_),this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating_(this.shouldFloat),this.adapter.shakeLabel(this.shouldShake)),this.shouldFloat||(this.receivedUserInput_=!1)},t.prototype.getValue=function(){return this.getNativeInput_().value},t.prototype.setValue=function(e){if(this.getValue()!==e&&(this.getNativeInput_().value=e),this.setCharacterCounter_(e.length),this.validateOnValueChange_){var t=this.isValid();this.styleValidity_(t)}this.adapter.hasLabel()&&(this.notchOutline(this.shouldFloat),this.adapter.floatLabel(this.shouldFloat),this.styleFloating_(this.shouldFloat),this.validateOnValueChange_&&this.adapter.shakeLabel(this.shouldShake))},t.prototype.isValid=function(){return this.useNativeValidation_?this.isNativeInputValid_():this.isValid_},t.prototype.setValid=function(e){this.isValid_=e,this.styleValidity_(e);var t=!e&&!this.isFocused_&&!!this.getValue();this.adapter.hasLabel()&&this.adapter.shakeLabel(t)},t.prototype.setValidateOnValueChange=function(e){this.validateOnValueChange_=e},t.prototype.getValidateOnValueChange=function(){return this.validateOnValueChange_},t.prototype.setUseNativeValidation=function(e){this.useNativeValidation_=e},t.prototype.isDisabled=function(){return this.getNativeInput_().disabled},t.prototype.setDisabled=function(e){this.getNativeInput_().disabled=e,this.styleDisabled_(e)},t.prototype.setHelperTextContent=function(e){this.helperText_&&this.helperText_.setContent(e)},t.prototype.setLeadingIconAriaLabel=function(e){this.leadingIcon_&&this.leadingIcon_.setAriaLabel(e)},t.prototype.setLeadingIconContent=function(e){this.leadingIcon_&&this.leadingIcon_.setContent(e)},t.prototype.setTrailingIconAriaLabel=function(e){this.trailingIcon_&&this.trailingIcon_.setAriaLabel(e)},t.prototype.setTrailingIconContent=function(e){this.trailingIcon_&&this.trailingIcon_.setContent(e)},t.prototype.setCharacterCounter_=function(e){if(this.characterCounter_){var t=this.getNativeInput_().maxLength;if(-1===t)throw new Error("MDCTextFieldFoundation: Expected maxlength html property on text input or textarea.");this.characterCounter_.setCounterValue(e,t)}},t.prototype.isBadInput_=function(){return this.getNativeInput_().validity.badInput||!1},t.prototype.isNativeInputValid_=function(){return this.getNativeInput_().validity.valid},t.prototype.styleValidity_=function(e){var n=t.cssClasses.INVALID;if(e?this.adapter.removeClass(n):this.adapter.addClass(n),this.helperText_){if(this.helperText_.setValidity(e),!this.helperText_.isValidation())return;var r=this.helperText_.isVisible(),o=this.helperText_.getId();r&&o?this.adapter.setInputAttr(NI.ARIA_DESCRIBEDBY,o):this.adapter.removeInputAttr(NI.ARIA_DESCRIBEDBY)}},t.prototype.styleFocused_=function(e){var n=t.cssClasses.FOCUSED;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.styleDisabled_=function(e){var n=t.cssClasses,r=n.DISABLED,o=n.INVALID;e?(this.adapter.addClass(r),this.adapter.removeClass(o)):this.adapter.removeClass(r),this.leadingIcon_&&this.leadingIcon_.setDisabled(e),this.trailingIcon_&&this.trailingIcon_.setDisabled(e)},t.prototype.styleFloating_=function(e){var n=t.cssClasses.LABEL_FLOATING;e?this.adapter.addClass(n):this.adapter.removeClass(n)},t.prototype.getNativeInput_=function(){return(this.adapter?this.adapter.getNativeInput():null)||{disabled:!1,maxLength:-1,required:!1,type:"input",validity:{badInput:!1,valid:!0},value:""}},t}(SI),BI={ROOT:"mdc-text-field-character-counter"},VI={ROOT_SELECTOR:"."+BI.ROOT},zI=function(e){function t(n){return e.call(this,QN(QN({},t.defaultAdapter),n))||this}return YN(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return BI},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return VI},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{setContent:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setCounterValue=function(e,t){e=Math.min(e,t),this.adapter.setContent(e+" / "+t)},t}(SI),WI=function(t){var n=JN((0,e.useState)(!1),2),r=n[0],o=n[1],i=JN((0,e.useState)(0),2),a=i[0],u=i[1],s=JN((0,e.useState)(),2),c=s[0],l=s[1],f=JN((0,e.useState)(!1),2),d=f[0],p=f[1],h=JN((0,e.useState)(!1),2),v=h[0],m=h[1],g=(0,e.useRef)(),y=function(e){g.current=e},b=(0,e.useRef)(),x=(0,e.useRef)(),w=(0,e.useRef)(),E=function(t){var n=JN((0,e.useState)(),2),r=n[0],o=n[1],i=AR({props:t,api:function(e){var t=e.foundation;return{getFoundation:function(){return t}}},elements:{},foundation:function(){return new zI({setContent:function(e){o(e)}})}}),a=(i.foundation,ZN(i,["foundation"]));return QN({content:r},a)}({apiRef:t.characterCount?y:void 0}).content,C=AR({props:t,elements:{rootEl:!0,inputEl:!0},foundation:function(e){var t=e.rootEl,n=e.inputEl,r=e.getProps;return new jI(QN(QN(QN(QN({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},hasClass:function(e){return t.hasClass(e)},registerTextFieldInteractionHandler:function(e,n){return t.addEventListener(e,n)},deregisterTextFieldInteractionHandler:function(e,n){return t.removeEventListener(e,n)},registerValidationAttributeChangeHandler:function(e){if(n.ref){var t=new MutationObserver((function(t){return e(function(e){return e.map((function(e){return e.attributeName}))}(t))})),r=n.ref;return r&&t.observe(r,{attributes:!0}),t}return{}},deregisterValidationAttributeChangeHandler:function(e){e&&e.disconnect()},isFocused:function(){return document.activeElement===n.ref}},{registerInputInteractionHandler:function(e,t){return n.addEventListener(e,t)},deregisterInputInteractionHandler:function(e,t){return n.removeEventListener(e,t)},getNativeInput:function(){return n.ref}}),{shakeLabel:function(e){return p(e)},floatLabel:function(e){var t;m(null!==(t=r().floatLabel)&&void 0!==t?t:e)},hasLabel:function(){return!!r().label},getLabelWidth:function(){var e;return(null===(e=w.current)||void 0===e?void 0:e.getWidth())||0}}),{activateLineRipple:function(){o(!0)},deactivateLineRipple:function(){o(!1)},setLineRippleTransformOrigin:function(e){u(e)}}),{notchOutline:function(e){l(e)},closeOutline:function(){var e;null!==(e=r().floatLabel)&&void 0!==e||l(void 0)},hasOutline:function(){return!!r().outlined}}),{characterCounter:g.current?g.current.getFoundation():void 0,helperText:void 0,leadingIcon:b.current?b.current.getFoundation():void 0,trailingIcon:x.current?x.current.getFoundation():void 0})}}),_=C.foundation,k=ZN(C,["foundation"]),S=_.getValue();return(0,e.useEffect)((function(){void 0!==t.value&&t.value!==S&&_.setValue(String(t.value))}),[t.value,_,S]),(0,e.useEffect)((function(){void 0!==t.floatLabel&&(_.notchOutline(t.floatLabel),_.adapter_.floatLabel(t.floatLabel))}),[_,t.floatLabel]),QN({shakeLabel:d,floatLabel:v,notchWidth:c,lineRippleActive:r,lineRippleCenter:a,setCharacterCounter:y,setLeadingIcon:function(e){return b.current=e},setTrailingIcon:function(e){return x.current=e},setFloatingLabel:function(e){return w.current=e},characterCountContent:E},k)},UI=sR((function(t,n){var r=t.label,o=t.style,i=t.outlined,a=t.align,u=t.invalid,s=t.disabled,c=t.helpText,l=t.children,f=t.textarea,d=t.inputRef,p=t.characterCount,h=t.icon,v=t.trailingIcon,m=t.rootProps,g=void 0===m?{}:m,y=(t.foundationRef,t.ripple,t.prefix),b=t.suffix,x=t.resizeable,w=(t.floatLabel,ZN(t,["label","style","outlined","align","invalid","disabled","helpText","children","textarea","inputRef","characterCount","icon","trailingIcon","rootProps","foundationRef","ripple","prefix","suffix","resizeable","floatLabel"])),E=WI(t),C=E.rootEl,_=E.inputEl,k=E.shakeLabel,S=E.floatLabel,O=E.notchWidth,T=E.lineRippleActive,A=E.lineRippleCenter,R=E.setLeadingIcon,N=E.setTrailingIcon,I=E.setFloatingLabel,P=E.characterCountContent,D=eI("textfield",t)+"-label",M=iR(t,["mdc-text-field","mdc-text-field--upgraded",{"mdc-text-field--filled":!i,"mdc-text-field--textarea":f,"mdc-text-field--outlined":i,"mdc-text-field--invalid":u,"mdc-text-field--disabled":s,"mdc-text-field--with-leading-icon":!!h,"mdc-text-field--with-trailing-icon":!!v,"mdc-text-field--no-label":!r,"mdc-text-field--end-aligned":"end"===a,"mdc-text-field--with-internal-counter":f&&p}]),F=function(t,n){return e.createElement(XI,{apiRef:function(e){"leading"===n?R(e):N(e)},position:n,tabIndex:"trailing"===n?0:void 0,icon:t})},L=r?e.createElement(hI,{shake:k,float:S,apiRef:I,id:D},r):null,j=p?e.createElement("div",{className:"mdc-text-field-character-counter"},P):null,B=x?e.createElement("span",{className:"mdc-text-field__resizer"},e.createElement(oR,QN({},w,{element:_,className:"mdc-text-field__input",disabled:s,tag:"textarea",ref:d})),j):e.createElement(e.Fragment,null,e.createElement(oR,QN({},w,{element:_,className:"mdc-text-field__input",disabled:s,tag:"textarea",ref:d})),j);return e.createElement(e.Fragment,null,e.createElement(GI,QN({},g,{element:C,style:o,className:M,ref:n,"aria-labelledby":D}),!!h&&F(h,"leading"),l,e.createElement(HI,null),!!y&&!f&&e.createElement(qI,{prefix:y}),f?B:e.createElement(oR,QN({},w,{element:_,className:"mdc-text-field__input",disabled:s,tag:"input",ref:d})),!!b&&!f&&e.createElement(KI,{suffix:b}),i?e.createElement(e.Fragment,null,e.createElement(CI,{notch:O},L),!!v&&F(v,"trailing")):e.createElement(e.Fragment,null,L,!!v&&F(v,"trailing"),e.createElement(uI,{active:T,center:A}))),function(t){if(!(!!c||p&&!f))return null;var n="object"===typeof c&&!e.isValidElement(c);return e.createElement("div",{className:"mdc-text-field-helper-line"},c&&n?e.createElement($I,QN({},c)):e.createElement($I,null,c),!f&&t)}(j))})),HI=e.memo((function(){return e.createElement("span",{className:"mdc-text-field__ripple"})})),GI=GR({surface:!1})(e.forwardRef((function(t,n){return e.createElement(oR,QN({},t,{tag:"label",ref:n}))}))),qI=e.memo((function(t){var n=t.prefix;return e.createElement("span",{className:"mdc-text-field__affix mdc-text-field__affix--prefix"},n)})),KI=e.memo((function(t){var n=t.suffix;return e.createElement("span",{className:"mdc-text-field__affix mdc-text-field__affix--suffix"},n)})),$I=sR((function(t,n){var r=t.persistent,o=t.validationMsg,i=ZN(t,["persistent","validationMsg"]),a=iR(t,["mdc-text-field-helper-text",{"mdc-text-field-helper-text--persistent":r,"mdc-text-field-helper-text--validation-msg":o}]);return e.createElement(oR,QN({tag:"div"},i,{className:a,ref:n}))})),XI=function(t){t.apiRef;var n=t.position,r=ZN(t,["apiRef","position"]),o=function(e){var t=AR({props:e,elements:{rootEl:!0},api:function(e){var t=e.foundation;return{getFoundation:function(){return t}}},foundation:function(e){var t=e.rootEl,n=e.emit;return new RI({getAttr:function(e){return t.getProp(e)},setAttr:function(e,n){return t.setProp(e,n)},removeAttr:function(e){return t.removeProp(e)},setContent:function(e){t.setProp("icon",e)},registerInteractionHandler:function(e,n){return t.addEventListener(e,n)},deregisterInteractionHandler:function(e,n){return t.removeEventListener(e,n)},notifyIconAction:function(){return n("onClick",{},!0)}})}}),n=(t.foundation,ZN(t,["foundation"]));return QN({},n)}(t).rootEl,i=iR(t,["mdc-text-field__icon",{"mdc-text-field__icon--trailing":"trailing"===n,"mdc-text-field__icon--leading":"leading"===n}]);return e.createElement(bR,QN({},o.props(QN(QN({},r),{className:i}))))};XI.displayName="TextFieldIcon";n(2924);var YI=sR((function(t,n){var r,o=t.children,i=t.fixedColumnWidth,a=t.align,u=ZA(t,["children","fixedColumnWidth","align"]),s=!("GridRow"===vR(o)),c=iR(t,["mdc-layout-grid",(r={},r["mdc-layout-grid--align-"+(a||"")]=void 0!==t.align,r["mdc-layout-grid--fixed-column-width"]=i,r)]);return e.createElement(oR,QA({},u,{className:c,ref:n}),s?e.createElement(ZI,null,o):o)})),QI=sR((function(t,n){var r,o=t.span,i=t.phone,a=t.tablet,u=t.desktop,s=t.order,c=t.align,l=ZA(t,["span","phone","tablet","desktop","order","align"]),f=iR(t,["mdc-layout-grid__cell",(r={},r["mdc-layout-grid__cell--order-"+(s||"")]=void 0!==s,r["mdc-layout-grid__cell--align-"+(c||"")]=void 0!==c,r["mdc-layout-grid__cell--span-"+(o||"")]=void 0!==o,r["mdc-layout-grid__cell--span-"+(i||"")+"-phone"]=void 0!==i,r["mdc-layout-grid__cell--span-"+(a||"")+"-tablet"]=void 0!==a,r["mdc-layout-grid__cell--span-"+(u||"")+"-desktop"]=void 0!==t.desktop,r)]);return e.createElement(oR,QA({},l,{ref:n,className:f}))})),ZI=sR((function(t,n){var r=iR(t,["mdc-layout-grid__inner"]);return e.createElement(oR,QA({},t,{ref:n,className:r}))}));ZI.displayName="GridRow";n(5397);var JI=function(e,t){return JI=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},JI(e,t)};var eP=function(){return eP=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},eP.apply(this,arguments)};function tP(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}var nP=function(e,t){return nP=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},nP(e,t)};var rP=function(){return rP=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},rP.apply(this,arguments)};var oP=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),iP={ROOT:"mdc-form-field"},aP={LABEL_SELECTOR:".mdc-form-field > label"},uP=function(e){function t(n){var r=e.call(this,rP(rP({},t.defaultAdapter),n))||this;return r.click=function(){r.handleClick()},r}return function(e,t){function n(){this.constructor=e}nP(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return iP},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return aP},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{activateInputRipple:function(){},deactivateInputRipple:function(){},deregisterInteractionHandler:function(){},registerInteractionHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter.registerInteractionHandler("click",this.click)},t.prototype.destroy=function(){this.adapter.deregisterInteractionHandler("click",this.click)},t.prototype.handleClick=function(){var e=this;this.adapter.activateInputRipple(),requestAnimationFrame((function(){e.adapter.deactivateInputRipple()}))},t}(oP),sP=sR((function(t,n){!function(e){AR({props:e,elements:{},foundation:function(){return new uP({registerInteractionHandler:function(e,t){},deregisterInteractionHandler:function(e,t){},activateInputRipple:function(){},deactivateInputRipple:function(){}})}})}(t);t.alignEnd,t.foundationRef;var r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(t,["alignEnd","foundationRef"]),o=iR(t,["mdc-form-field",{"mdc-form-field--align-end":t.alignEnd}]);return e.createElement(oR,rP({},r,{ref:n,className:o}))}));var cP=function(){function e(e){void 0===e&&(e={}),this.adapter=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),lP={CHECKED:"mdc-switch--checked",DISABLED:"mdc-switch--disabled"},fP={ARIA_CHECKED_ATTR:"aria-checked",NATIVE_CONTROL_SELECTOR:".mdc-switch__native-control",RIPPLE_SURFACE_SELECTOR:".mdc-switch__thumb-underlay"},dP=function(e){function t(n){return e.call(this,eP(eP({},t.defaultAdapter),n))||this}return function(e,t){function n(){this.constructor=e}JI(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),Object.defineProperty(t,"strings",{get:function(){return fP},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return lP},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},setNativeControlChecked:function(){},setNativeControlDisabled:function(){},setNativeControlAttr:function(){}}},enumerable:!0,configurable:!0}),t.prototype.setChecked=function(e){this.adapter.setNativeControlChecked(e),this.updateAriaChecked_(e),this.updateCheckedStyling_(e)},t.prototype.setDisabled=function(e){this.adapter.setNativeControlDisabled(e),e?this.adapter.addClass(lP.DISABLED):this.adapter.removeClass(lP.DISABLED)},t.prototype.handleChange=function(e){var t=e.target;this.updateAriaChecked_(t.checked),this.updateCheckedStyling_(t.checked)},t.prototype.updateCheckedStyling_=function(e){e?this.adapter.addClass(lP.CHECKED):this.adapter.removeClass(lP.CHECKED)},t.prototype.updateAriaChecked_=function(e){this.adapter.setNativeControlAttr(fP.ARIA_CHECKED_ATTR,""+!!e)},t}(cP),pP=function(t){var n=function(t){var n=t.className,r=t.style,o=t.rootProps,i=t.label,a=t.children,u=t.disabled,s=t.label||t.children,c=eI("toggle-",t),l=s?{disabled:u}:QA({className:n,style:r,disabled:u},o);return{id:c,renderToggle:function(t){return s?e.createElement(sP,QA({},o,{className:n,style:r}),t,e.createElement("label",{id:c+"label",htmlFor:c},i,a)):t},toggleRootProps:l}}(t),r=n.renderToggle,o=n.toggleRootProps,i=n.id,a=AR({props:t,elements:{rootEl:!0,checkboxEl:!0},foundation:function(e){var t=e.rootEl,n=e.checkboxEl;return new dP({addClass:function(e){return t.addClass(e)},removeClass:function(e){return t.removeClass(e)},setNativeControlChecked:function(e){return n.setProp("checked",e)},setNativeControlDisabled:function(e){return n.setProp("disabled",e)},setNativeControlAttr:function(e,n){return t.setProp(e,n)}})}}),u=a.foundation,s=tP(a,["foundation"]),c=s.checkboxEl;(0,e.useEffect)((function(){c.ref&&u.updateCheckedStyling_(c.ref.checked),c.ref&&u.setDisabled(c.ref.disabled)}),[c.ref,u]),(0,e.useEffect)((function(){void 0!==t.checked&&u.updateCheckedStyling_(t.checked)}),[t.checked,u]),(0,e.useEffect)((function(){void 0!==t.disabled&&u.setDisabled(t.disabled)}),[t.disabled,u]);return c.setProp("onChange",(function(e){var n;u.handleChange(e),null===(n=t.onChange)||void 0===n||n.call(t,e)}),!0),eP({foundation:u,renderToggle:r,toggleRootProps:o,id:i},s)},hP=sR((function(t,n){var r,o=pP(t),i=o.renderToggle,a=o.id,u=o.toggleRootProps,s=o.rootEl,c=o.checkboxEl,l=iR(u,["mdc-switch"]),f=(t.children,t.className,t.label,t.style,t.inputRef),d=(t.foundationRef,tP(t,["children","className","label","style","inputRef","foundationRef"]));return i(e.createElement(oR,eP({},s.props(eP(eP({},u),{className:l})),{ref:n}),e.createElement(vP,null),e.createElement(yP,null,e.createElement(gP,null),e.createElement("input",eP({},c.props(eP(eP({},d),{className:"mdc-switch__native-control"})),{type:"checkbox",id:a,ref:aR(c.setRef,f),role:"switch","aria-checked":null!==(r=d.checked)&&void 0!==r?r:d["aria-checked"]}))),e.createElement(mP,null)))})),vP=e.memo((function(){return e.createElement("div",{className:"mdc-switch__track"})})),mP=e.memo((function(){return e.createElement("div",{className:"mdc-switch__knob"})})),gP=e.memo((function(){return e.createElement("div",{className:"mdc-switch__thumb"})})),yP=GR({unbounded:!0,surface:!1})((function(t){var n=t.className,r=tP(t,["className"]);return e.createElement("div",eP({className:Ct()(n,"mdc-switch__thumb-underlay")},r))})),bP=(n(8959),sR((function(t,n){var r,o=t.use,i=ZA(t,["use"]),a=hR().typography,u=(null===a||void 0===a?void 0:a[o])||(null===a||void 0===a?void 0:a.defaultTag)||"span",s=iR(t,[(r={},r["mdc-typography--"+t.use]=t.use,r)]);return e.createElement(oR,QA({tag:u},i,{ref:n,className:s}))}))),xP=n(4646),wP=n(684),EP=n(420),CP=n(6583),_P=n(4401),kP=n(5192),SP=n.n(kP);function OP(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function TP(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function AP(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function RP(e,t){for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}OP.__suppressDeprecationWarning=!0,TP.__suppressDeprecationWarning=!0,AP.__suppressDeprecationWarning=!0;var NP=n(1684),IP=n.n(NP);function PP(e,t,n,r){var o=lt.unstable_batchedUpdates?function(e){lt.unstable_batchedUpdates(n,e)}:n;return IP()(e,t,o,r)}function DP(e){return DP="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},DP(e)}function MP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LP(e,t){return LP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},LP(e,t)}function jP(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(SM){return!1}}();return function(){var n,r=VP(e);if(t){var o=VP(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return BP(this,n)}}function BP(e,t){return!t||"object"!==DP(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function VP(e){return VP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},VP(e)}var zP=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LP(e,t)}(i,e);var t,n,r,o=jP(i);function i(){var e;MP(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).removeContainer=function(){e.container&&(lt.unmountComponentAtNode(e.container),e.container.parentNode.removeChild(e.container),e.container=null)},e.renderComponent=function(t,n){var r=e.props,o=r.visible,i=r.getComponent,a=r.forceRender,u=r.getContainer,s=r.parent;(o||s._component||a)&&(e.container||(e.container=u()),lt.unstable_renderSubtreeIntoContainer(s,i(t),e.container,(function(){n&&n.call(this)})))},e}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.autoMount&&this.renderComponent()}},{key:"componentDidUpdate",value:function(){this.props.autoMount&&this.renderComponent()}},{key:"componentWillUnmount",value:function(){this.props.autoDestroy&&this.removeContainer()}},{key:"render",value:function(){return this.props.children({renderComponent:this.renderComponent,removeContainer:this.removeContainer})}}])&&FP(t.prototype,n),r&&FP(t,r),i}(e.Component);function WP(e){return WP="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WP(e)}function UP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GP(e,t){return GP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},GP(e,t)}function qP(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(SM){return!1}}();return function(){var n,r=$P(e);if(t){var o=$P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return KP(this,n)}}function KP(e,t){return!t||"object"!==WP(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $P(e){return $P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$P(e)}zP.propTypes={autoMount:SP().bool,autoDestroy:SP().bool,visible:SP().bool,forceRender:SP().bool,parent:SP().any,getComponent:SP().func.isRequired,getContainer:SP().func.isRequired,children:SP().func.isRequired},zP.defaultProps={autoMount:!0,autoDestroy:!0,forceRender:!1};var XP=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GP(e,t)}(i,e);var t,n,r,o=qP(i);function i(){return UP(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"componentDidMount",value:function(){this.createContainer()}},{key:"componentDidUpdate",value:function(e){var t=this.props.didUpdate;t&&t(e)}},{key:"componentWillUnmount",value:function(){this.removeContainer()}},{key:"createContainer",value:function(){this._container=this.props.getContainer(),this.forceUpdate()}},{key:"removeContainer",value:function(){this._container&&this._container.parentNode.removeChild(this._container)}},{key:"render",value:function(){return this._container?lt.createPortal(this.props.children,this._container):null}}])&&HP(t.prototype,n),r&&HP(t,r),i}(e.Component);function YP(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function QP(e,t){this[e]=t}XP.propTypes={getContainer:SP().func.isRequired,children:SP().node.isRequired,didUpdate:SP().func};var ZP=n(7996);function JP(e){return e&&"object"===typeof e&&e.window===e}function eD(e,t){var n=Math.floor(e),r=Math.floor(t);return Math.abs(n-r)<=1}function tD(e,t){e!==document.activeElement&&RP(t,e)&&e.focus()}function nD(e){return"function"===typeof e&&e?e():null}function rD(e){return"object"===typeof e&&e?e:null}var oD=function(t){function n(){var e,t,r,o;(0,EP.Z)(this,n);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return t=r=(0,CP.Z)(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),r.forceAlign=function(){var e=r.props,t=e.disabled,n=e.target,o=e.align,i=e.onAlign;if(!t&&n){var a=lt.findDOMNode(r),u=void 0,s=nD(n),c=rD(n),l=document.activeElement;s?u=eO(a,s,o):c&&(u=tO(a,c,o)),tD(l,a),i&&i(a,u)}},o=t,(0,CP.Z)(r,o)}return(0,_P.Z)(n,t),(0,ZP.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props;this.forceAlign(),!e.disabled&&e.monitorWindowResize&&this.startMonitorWindowResize()}},{key:"componentDidUpdate",value:function(e){var t=!1,n=this.props;if(!n.disabled){var r=lt.findDOMNode(this),o=r?r.getBoundingClientRect():null;if(e.disabled)t=!0;else{var i=nD(e.target),a=nD(n.target),u=rD(e.target),s=rD(n.target);JP(i)&&JP(a)?t=!1:(i!==a||i&&!a&&s||u&&s&&a||s&&!function(e,t){return e===t||!(!e||!t)&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY)}(u,s))&&(t=!0);var c=this.sourceRect||{};t||!r||eD(c.width,o.width)&&eD(c.height,o.height)||(t=!0)}this.sourceRect=o}t&&this.forceAlign(),n.monitorWindowResize&&!n.disabled?this.startMonitorWindowResize():this.stopMonitorWindowResize()}},{key:"componentWillUnmount",value:function(){this.stopMonitorWindowResize()}},{key:"startMonitorWindowResize",value:function(){this.resizeHandler||(this.bufferMonitor=function(e,t){var n=void 0;function r(){n&&(clearTimeout(n),n=null)}function o(){r(),n=setTimeout(e,t)}return o.clear=r,o}(this.forceAlign,this.props.monitorBufferTime),this.resizeHandler=PP(window,"resize",this.bufferMonitor))}},{key:"stopMonitorWindowResize",value:function(){this.resizeHandler&&(this.bufferMonitor.clear(),this.resizeHandler.remove(),this.resizeHandler=null)}},{key:"render",value:function(){var t=this,n=this.props,r=n.childrenProps,o=n.children,i=e.Children.only(o);if(r){var a={};return Object.keys(r).forEach((function(e){a[e]=t.props[r[e]]})),e.cloneElement(i,a)}return i}}]),n}(e.Component);oD.propTypes={childrenProps:SP().object,align:SP().object.isRequired,target:SP().oneOfType([SP().func,SP().shape({clientX:SP().number,clientY:SP().number,pageX:SP().number,pageY:SP().number})]),onAlign:SP().func,monitorBufferTime:SP().number,monitorWindowResize:SP().bool,disabled:SP().bool,children:SP().any},oD.defaultProps={target:function(){return window},monitorBufferTime:50,monitorWindowResize:!1,disabled:!1};var iD=oD,aD=n(386),uD=function(t){var n=t.prototype;if(!n||!n.isReactComponent)throw new Error("Can only polyfill class components");return"function"!==typeof n.componentWillReceiveProps?t:e.Profiler?(n.UNSAFE_componentWillReceiveProps=n.componentWillReceiveProps,delete n.componentWillReceiveProps,t):t};function sD(t){var n=[];return e.Children.forEach(t,(function(e){n.push(e)})),n}function cD(e,t){var n=null;return e&&e.forEach((function(e){n||e&&e.key===t&&(n=e)})),n}function lD(e,t,n){var r=null;return e&&e.forEach((function(e){if(e&&e.key===t&&e.props[n]){if(r)throw new Error("two child with same key for <rc-animate> children");r=e}})),r}var fD=n(5259),dD={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},pD={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},hD=[],vD=[];function mD(e,t,n){e.addEventListener(t,n,!1)}function gD(e,t,n){e.removeEventListener(t,n,!1)}"undefined"!==typeof window&&"undefined"!==typeof document&&function(){var e=document.createElement("div").style;function t(t,n){for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];for(var i in o)if(i in e){n.push(o[i]);break}}}"AnimationEvent"in window||(delete dD.animationstart.animation,delete pD.animationend.animation),"TransitionEvent"in window||(delete dD.transitionstart.transition,delete pD.transitionend.transition),t(dD,hD),t(pD,vD)}();var yD={startEvents:hD,addStartEventListener:function(e,t){0!==hD.length?hD.forEach((function(n){mD(e,n,t)})):window.setTimeout(t,0)},removeStartEventListener:function(e,t){0!==hD.length&&hD.forEach((function(n){gD(e,n,t)}))},endEvents:vD,addEndEventListener:function(e,t){0!==vD.length?vD.forEach((function(n){mD(e,n,t)})):window.setTimeout(t,0)},removeEndEventListener:function(e,t){0!==vD.length&&vD.forEach((function(n){gD(e,n,t)}))}},bD=yD,xD=n(3105),wD=n.n(xD),ED=0!==bD.endEvents.length,CD=["Webkit","Moz","O","ms"],_D=["-webkit-","-moz-","-o-","ms-",""];function kD(e,t){for(var n=window.getComputedStyle(e,null),r="",o=0;o<_D.length&&!(r=n.getPropertyValue(_D[o]+t));o++);return r}function SD(e){if(ED){var t=parseFloat(kD(e,"transition-delay"))||0,n=parseFloat(kD(e,"transition-duration"))||0,r=parseFloat(kD(e,"animation-delay"))||0,o=parseFloat(kD(e,"animation-duration"))||0,i=Math.max(n+t,o+r);e.rcEndAnimTimeout=setTimeout((function(){e.rcEndAnimTimeout=null,e.rcEndListener&&e.rcEndListener()}),1e3*i+200)}}function OD(e){e.rcEndAnimTimeout&&(clearTimeout(e.rcEndAnimTimeout),e.rcEndAnimTimeout=null)}var TD=function(e,t,n){var r="object"===("undefined"===typeof t?"undefined":(0,fD.default)(t)),o=r?t.name:t,i=r?t.active:t+"-active",a=n,u=void 0,s=void 0,c=wD()(e);return n&&"[object Object]"===Object.prototype.toString.call(n)&&(a=n.end,u=n.start,s=n.active),e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),OD(e),c.remove(o),c.remove(i),bD.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,a&&a())},bD.addEndEventListener(e,e.rcEndListener),u&&u(),c.add(o),e.rcAnimTimeout=setTimeout((function(){e.rcAnimTimeout=null,c.add(i),s&&setTimeout(s,0),SD(e)}),30),{stop:function(){e.rcEndListener&&e.rcEndListener()}}};TD.style=function(e,t,n){e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(t){t&&t.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),OD(e),bD.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,n&&n())},bD.addEndEventListener(e,e.rcEndListener),e.rcAnimTimeout=setTimeout((function(){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);e.rcAnimTimeout=null,SD(e)}),0)},TD.setTransition=function(e,t,n){var r=t,o=n;void 0===n&&(o=r,r=""),r=r||"",CD.forEach((function(t){e.style[t+"Transition"+r]=o}))},TD.isCssAnimationSupported=ED;var AD=TD,RD={isAppearSupported:function(e){return e.transitionName&&e.transitionAppear||e.animation.appear},isEnterSupported:function(e){return e.transitionName&&e.transitionEnter||e.animation.enter},isLeaveSupported:function(e){return e.transitionName&&e.transitionLeave||e.animation.leave},allowAppearCallback:function(e){return e.transitionAppear||e.animation.appear},allowEnterCallback:function(e){return e.transitionEnter||e.animation.enter},allowLeaveCallback:function(e){return e.transitionLeave||e.animation.leave}},ND={enter:"transitionEnter",appear:"transitionAppear",leave:"transitionLeave"},ID=function(e){function t(){return(0,EP.Z)(this,t),(0,CP.Z)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,_P.Z)(t,e),(0,ZP.Z)(t,[{key:"componentWillUnmount",value:function(){this.stop()}},{key:"componentWillEnter",value:function(e){RD.isEnterSupported(this.props)?this.transition("enter",e):e()}},{key:"componentWillAppear",value:function(e){RD.isAppearSupported(this.props)?this.transition("appear",e):e()}},{key:"componentWillLeave",value:function(e){RD.isLeaveSupported(this.props)?this.transition("leave",e):e()}},{key:"transition",value:function(e,t){var n=this,r=lt.findDOMNode(this),o=this.props,i=o.transitionName,a="object"===typeof i;this.stop();var u=function(){n.stopper=null,t()};if((ED||!o.animation[e])&&i&&o[ND[e]]){var s=a?i[e]:i+"-"+e,c=s+"-active";a&&i[e+"Active"]&&(c=i[e+"Active"]),this.stopper=AD(r,{name:s,active:c},u)}else this.stopper=o.animation[e](r,u)}},{key:"stop",value:function(){var e=this.stopper;e&&(this.stopper=null,e.stop())}},{key:"render",value:function(){return this.props.children}}]),t}(e.Component);ID.propTypes={children:SP().any,animation:SP().any,transitionName:SP().any};var PD=ID,DD="rc_animate_"+Date.now();function MD(t){var n=t.children;return e.isValidElement(n)&&!n.key?e.cloneElement(n,{key:DD}):n}function FD(){}var LD=function(t){function n(e){(0,EP.Z)(this,n);var t=(0,CP.Z)(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return jD.call(t),t.currentlyAnimatingKeys={},t.keysToEnter=[],t.keysToLeave=[],t.state={children:sD(MD(e))},t.childrenRefs={},t}return(0,_P.Z)(n,t),(0,ZP.Z)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.showProp,n=this.state.children;t&&(n=n.filter((function(e){return!!e.props[t]}))),n.forEach((function(t){t&&e.performAppear(t.key)}))}},{key:"componentWillReceiveProps",value:function(t){var n=this;this.nextProps=t;var r=sD(MD(t)),o=this.props;o.exclusive&&Object.keys(this.currentlyAnimatingKeys).forEach((function(e){n.stop(e)}));var i=o.showProp,a=this.currentlyAnimatingKeys,u=o.exclusive?sD(MD(o)):this.state.children,s=[];i?(u.forEach((function(t){var n=t&&cD(r,t.key),o=void 0;(o=n&&n.props[i]||!t.props[i]?n:e.cloneElement(n||t,(0,aD.Z)({},i,!0)))&&s.push(o)})),r.forEach((function(e){e&&cD(u,e.key)||s.push(e)}))):s=function(e,t){var n=[],r={},o=[];return e.forEach((function(e){e&&cD(t,e.key)?o.length&&(r[e.key]=o,o=[]):o.push(e)})),t.forEach((function(e){e&&Object.prototype.hasOwnProperty.call(r,e.key)&&(n=n.concat(r[e.key])),n.push(e)})),n=n.concat(o)}(u,r),this.setState({children:s}),r.forEach((function(e){var t=e&&e.key;if(!e||!a[t]){var r=e&&cD(u,t);if(i){var o=e.props[i];if(r)!lD(u,t,i)&&o&&n.keysToEnter.push(t);else o&&n.keysToEnter.push(t)}else r||n.keysToEnter.push(t)}})),u.forEach((function(e){var t=e&&e.key;if(!e||!a[t]){var o=e&&cD(r,t);if(i){var u=e.props[i];if(o)!lD(r,t,i)&&u&&n.keysToLeave.push(t);else u&&n.keysToLeave.push(t)}else o||n.keysToLeave.push(t)}}))}},{key:"componentDidUpdate",value:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)}},{key:"isValidChildByKey",value:function(e,t){var n=this.props.showProp;return n?lD(e,t,n):cD(e,t)}},{key:"stop",value:function(e){delete this.currentlyAnimatingKeys[e];var t=this.childrenRefs[e];t&&t.stop()}},{key:"render",value:function(){var t=this,n=this.props;this.nextProps=n;var r=this.state.children,o=null;r&&(o=r.map((function(r){if(null===r||void 0===r)return r;if(!r.key)throw new Error("must set key for <rc-animate> children");return e.createElement(PD,{key:r.key,ref:function(e){t.childrenRefs[r.key]=e},animation:n.animation,transitionName:n.transitionName,transitionEnter:n.transitionEnter,transitionAppear:n.transitionAppear,transitionLeave:n.transitionLeave},r)})));var i=n.component;if(i){var a=n;return"string"===typeof i&&(a=(0,xP.Z)({className:n.className,style:n.style},n.componentProps)),e.createElement(i,a,o)}return o[0]||null}}]),n}(e.Component);LD.isAnimate=!0,LD.propTypes={className:SP().string,style:SP().object,component:SP().any,componentProps:SP().object,animation:SP().object,transitionName:SP().oneOfType([SP().string,SP().object]),transitionEnter:SP().bool,transitionAppear:SP().bool,exclusive:SP().bool,transitionLeave:SP().bool,onEnd:SP().func,onEnter:SP().func,onLeave:SP().func,onAppear:SP().func,showProp:SP().string,children:SP().node},LD.defaultProps={animation:{},component:"span",componentProps:{},transitionEnter:!0,transitionLeave:!0,transitionAppear:!1,onEnd:FD,onEnter:FD,onLeave:FD,onAppear:FD};var jD=function(){var e=this;this.performEnter=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillEnter(e.handleDoneAdding.bind(e,t,"enter")))},this.performAppear=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillAppear(e.handleDoneAdding.bind(e,t,"appear")))},this.handleDoneAdding=function(t,n){var r=e.props;if(delete e.currentlyAnimatingKeys[t],!r.exclusive||r===e.nextProps){var o=sD(MD(r));e.isValidChildByKey(o,t)?"appear"===n?RD.allowAppearCallback(r)&&(r.onAppear(t),r.onEnd(t,!0)):RD.allowEnterCallback(r)&&(r.onEnter(t),r.onEnd(t,!0)):e.performLeave(t)}},this.performLeave=function(t){e.childrenRefs[t]&&(e.currentlyAnimatingKeys[t]=!0,e.childrenRefs[t].componentWillLeave(e.handleDoneLeaving.bind(e,t)))},this.handleDoneLeaving=function(t){var n=e.props;if(delete e.currentlyAnimatingKeys[t],!n.exclusive||n===e.nextProps){var r=sD(MD(n));if(e.isValidChildByKey(r,t))e.performEnter(t);else{var o=function(){RD.allowLeaveCallback(n)&&(n.onLeave(t),n.onEnd(t,!1))};!function(e,t,n){var r=e.length===t.length;return r&&e.forEach((function(e,o){var i=t[o];e&&i&&(e&&!i||!e&&i||e.key!==i.key||n&&e.props[n]!==i.props[n])&&(r=!1)})),r}(e.state.children,r,n.showProp)?e.setState({children:r},o):o()}}}},BD=uD(LD),VD=function(t){function n(){return(0,EP.Z)(this,n),(0,CP.Z)(this,t.apply(this,arguments))}return(0,_P.Z)(n,t),n.prototype.shouldComponentUpdate=function(e){return e.hiddenClassName||e.visible},n.prototype.render=function(){var t=this.props,n=t.hiddenClassName,r=t.visible,o=(0,wP.Z)(t,["hiddenClassName","visible"]);return n||e.Children.count(o.children)>1?(!r&&n&&(o.className+=" "+n),e.createElement("div",o)):e.Children.only(o.children)},n}(e.Component);VD.propTypes={children:SP().any,className:SP().string,visible:SP().bool,hiddenClassName:SP().string};var zD=VD,WD=function(t){function n(){return(0,EP.Z)(this,n),(0,CP.Z)(this,t.apply(this,arguments))}return(0,_P.Z)(n,t),n.prototype.render=function(){var t=this.props,n=t.className;return t.visible||(n+=" "+t.hiddenClassName),e.createElement("div",{className:n,onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:t.style},e.createElement(zD,{className:t.prefixCls+"-content",visible:t.visible},t.children))},n}(e.Component);WD.propTypes={hiddenClassName:SP().string,className:SP().string,prefixCls:SP().string,onMouseEnter:SP().func,onMouseLeave:SP().func,onMouseDown:SP().func,onTouchStart:SP().func,children:SP().any};var UD=WD,HD=function(t){function n(e){(0,EP.Z)(this,n);var r=(0,CP.Z)(this,t.call(this,e));return GD.call(r),r.state={stretchChecked:!1,targetWidth:void 0,targetHeight:void 0},r.savePopupRef=QP.bind(r,"popupInstance"),r.saveAlignRef=QP.bind(r,"alignInstance"),r}return(0,_P.Z)(n,t),n.prototype.componentDidMount=function(){this.rootNode=this.getPopupDomNode(),this.setStretchSize()},n.prototype.componentDidUpdate=function(){this.setStretchSize()},n.prototype.getPopupDomNode=function(){return lt.findDOMNode(this.popupInstance)},n.prototype.getMaskTransitionName=function(){var e=this.props,t=e.maskTransitionName,n=e.maskAnimation;return!t&&n&&(t=e.prefixCls+"-"+n),t},n.prototype.getTransitionName=function(){var e=this.props,t=e.transitionName;return!t&&e.animation&&(t=e.prefixCls+"-"+e.animation),t},n.prototype.getClassName=function(e){return this.props.prefixCls+" "+this.props.className+" "+e},n.prototype.getPopupElement=function(){var t=this,n=this.savePopupRef,r=this.state,o=r.stretchChecked,i=r.targetHeight,a=r.targetWidth,u=this.props,s=u.align,c=u.visible,l=u.prefixCls,f=u.style,d=u.getClassNameFromAlign,p=u.destroyPopupOnHide,h=u.stretch,v=u.children,m=u.onMouseEnter,g=u.onMouseLeave,y=u.onMouseDown,b=u.onTouchStart,x=this.getClassName(this.currentAlignClassName||d(s)),w=l+"-hidden";c||(this.currentAlignClassName=null);var E={};h&&(-1!==h.indexOf("height")?E.height=i:-1!==h.indexOf("minHeight")&&(E.minHeight=i),-1!==h.indexOf("width")?E.width=a:-1!==h.indexOf("minWidth")&&(E.minWidth=a),o||(E.visibility="hidden",setTimeout((function(){t.alignInstance&&t.alignInstance.forceAlign()}),0)));var C={className:x,prefixCls:l,ref:n,onMouseEnter:m,onMouseLeave:g,onMouseDown:y,onTouchStart:b,style:(0,xP.Z)({},E,f,this.getZIndexStyle())};return p?e.createElement(BD,{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName()},c?e.createElement(iD,{target:this.getAlignTarget(),key:"popup",ref:this.saveAlignRef,monitorWindowResize:!0,align:s,onAlign:this.onAlign},e.createElement(UD,(0,xP.Z)({visible:!0},C),v)):null):e.createElement(BD,{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName(),showProp:"xVisible"},e.createElement(iD,{target:this.getAlignTarget(),key:"popup",ref:this.saveAlignRef,monitorWindowResize:!0,xVisible:c,childrenProps:{visible:"xVisible"},disabled:!c,align:s,onAlign:this.onAlign},e.createElement(UD,(0,xP.Z)({hiddenClassName:w},C),v)))},n.prototype.getZIndexStyle=function(){var e={},t=this.props;return void 0!==t.zIndex&&(e.zIndex=t.zIndex),e},n.prototype.getMaskElement=function(){var t=this.props,n=void 0;if(t.mask){var r=this.getMaskTransitionName();n=e.createElement(zD,{style:this.getZIndexStyle(),key:"mask",className:t.prefixCls+"-mask",hiddenClassName:t.prefixCls+"-mask-hidden",visible:t.visible}),r&&(n=e.createElement(BD,{key:"mask",showProp:"visible",transitionAppear:!0,component:"",transitionName:r},n))}return n},n.prototype.render=function(){return e.createElement("div",null,this.getMaskElement(),this.getPopupElement())},n}(e.Component);HD.propTypes={visible:SP().bool,style:SP().object,getClassNameFromAlign:SP().func,onAlign:SP().func,getRootDomNode:SP().func,align:SP().any,destroyPopupOnHide:SP().bool,className:SP().string,prefixCls:SP().string,onMouseEnter:SP().func,onMouseLeave:SP().func,onMouseDown:SP().func,onTouchStart:SP().func,stretch:SP().string,children:SP().node,point:SP().shape({pageX:SP().number,pageY:SP().number})};var GD=function(){var e=this;this.onAlign=function(t,n){var r=e.props,o=r.getClassNameFromAlign(n);e.currentAlignClassName!==o&&(e.currentAlignClassName=o,t.className=e.getClassName(o)),r.onAlign(t,n)},this.setStretchSize=function(){var t=e.props,n=t.stretch,r=t.getRootDomNode,o=t.visible,i=e.state,a=i.stretchChecked,u=i.targetHeight,s=i.targetWidth;if(n&&o){var c=r();if(c){var l=c.offsetHeight,f=c.offsetWidth;u===l&&s===f&&a||e.setState({stretchChecked:!0,targetHeight:l,targetWidth:f})}}else a&&e.setState({stretchChecked:!1})},this.getTargetElement=function(){return e.props.getRootDomNode()},this.getAlignTarget=function(){var t=e.props.point;return t||e.getTargetElement}},qD=HD;function KD(){}var $D=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"],XD=!!lt.createPortal,YD={rcTrigger:SP().shape({onPopupMouseDown:SP().func})},QD=function(t){function n(e){(0,EP.Z)(this,n);var r=(0,CP.Z)(this,t.call(this,e));ZD.call(r);var o=void 0;return o="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,r.state={prevPopupVisible:o,popupVisible:o},$D.forEach((function(e){r["fire"+e]=function(t){r.fireEvents(e,t)}})),r}return(0,_P.Z)(n,t),n.prototype.getChildContext=function(){return{rcTrigger:{onPopupMouseDown:this.onPopupMouseDown}}},n.prototype.componentDidMount=function(){this.componentDidUpdate({},{popupVisible:this.state.popupVisible})},n.prototype.componentDidUpdate=function(e,t){var n=this.props,r=this.state;if(XD||this.renderComponent(null,(function(){t.popupVisible!==r.popupVisible&&n.afterPopupVisibleChange(r.popupVisible)})),r.popupVisible){var o=void 0;return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(o=n.getDocument(),this.clickOutsideHandler=PP(o,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(o=o||n.getDocument(),this.touchOutsideHandler=PP(o,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(o=o||n.getDocument(),this.contextMenuOutsideHandler1=PP(o,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=PP(window,"blur",this.onContextMenuClose)))}this.clearOutsideHandler()},n.prototype.componentWillUnmount=function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout)},n.getDerivedStateFromProps=function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r},n.prototype.getPopupDomNode=function(){return this._component&&this._component.getPopupDomNode?this._component.getPopupDomNode():null},n.prototype.getPopupAlign=function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?function(e,t,n){var r=e[t]||{};return(0,xP.Z)({},r,n)}(r,t,n):n},n.prototype.setPopupVisible=function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&this.setPoint(t)},n.prototype.delaySetPopupVisible=function(e,t,n){var r=this,o=1e3*t;if(this.clearDelayTimer(),o){var i=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=setTimeout((function(){r.setPopupVisible(e,i),r.clearDelayTimer()}),o)}else this.setPopupVisible(e,n)},n.prototype.clearDelayTimer=function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)},n.prototype.clearOutsideHandler=function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)},n.prototype.createTwoChains=function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire"+e]:t[e]||n[e]},n.prototype.isClickToShow=function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")},n.prototype.isContextMenuToShow=function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")},n.prototype.isClickToHide=function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")},n.prototype.isMouseEnterToShow=function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")},n.prototype.isMouseLeaveToHide=function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")},n.prototype.isFocusToShow=function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")},n.prototype.isBlurToHide=function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")},n.prototype.forcePopupAlign=function(){this.state.popupVisible&&this._component&&this._component.alignInstance&&this._component.alignInstance.forceAlign()},n.prototype.fireEvents=function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)},n.prototype.close=function(){this.setPopupVisible(!1)},n.prototype.render=function(){var t=this,n=this.state.popupVisible,r=this.props,o=r.children,i=r.forceRender,a=r.alignPoint,u=r.className,s=e.Children.only(o),c={key:"trigger"};this.isContextMenuToShow()?c.onContextMenu=this.onContextMenu:c.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(c.onClick=this.onClick,c.onMouseDown=this.onMouseDown,c.onTouchStart=this.onTouchStart):(c.onClick=this.createTwoChains("onClick"),c.onMouseDown=this.createTwoChains("onMouseDown"),c.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(c.onMouseEnter=this.onMouseEnter,a&&(c.onMouseMove=this.onMouseMove)):c.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?c.onMouseLeave=this.onMouseLeave:c.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(c.onFocus=this.onFocus,c.onBlur=this.onBlur):(c.onFocus=this.createTwoChains("onFocus"),c.onBlur=this.createTwoChains("onBlur"));var l=Ct()(s&&s.props&&s.props.className,u);l&&(c.className=l);var f=e.cloneElement(s,c);if(!XD)return e.createElement(zP,{parent:this,visible:n,autoMount:!1,forceRender:i,getComponent:this.getComponent,getContainer:this.getContainer},(function(e){var n=e.renderComponent;return t.renderComponent=n,f}));var d=void 0;return(n||this._component||i)&&(d=e.createElement(XP,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),[f,d]},n}(e.Component);QD.propTypes={children:SP().any,action:SP().oneOfType([SP().string,SP().arrayOf(SP().string)]),showAction:SP().any,hideAction:SP().any,getPopupClassNameFromAlign:SP().any,onPopupVisibleChange:SP().func,afterPopupVisibleChange:SP().func,popup:SP().oneOfType([SP().node,SP().func]).isRequired,popupStyle:SP().object,prefixCls:SP().string,popupClassName:SP().string,className:SP().string,popupPlacement:SP().string,builtinPlacements:SP().object,popupTransitionName:SP().oneOfType([SP().string,SP().object]),popupAnimation:SP().any,mouseEnterDelay:SP().number,mouseLeaveDelay:SP().number,zIndex:SP().number,focusDelay:SP().number,blurDelay:SP().number,getPopupContainer:SP().func,getDocument:SP().func,forceRender:SP().bool,destroyPopupOnHide:SP().bool,mask:SP().bool,maskClosable:SP().bool,onPopupAlign:SP().func,popupAlign:SP().object,popupVisible:SP().bool,defaultPopupVisible:SP().bool,maskTransitionName:SP().oneOfType([SP().string,SP().object]),maskAnimation:SP().string,stretch:SP().string,alignPoint:SP().bool},QD.contextTypes=YD,QD.childContextTypes=YD,QD.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:function(){return""},getDocument:function(){return window.document},onPopupVisibleChange:KD,afterPopupVisibleChange:KD,onPopupAlign:KD,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[]};var ZD=function(){var t=this;this.onMouseEnter=function(e){var n=t.props.mouseEnterDelay;t.fireEvents("onMouseEnter",e),t.delaySetPopupVisible(!0,n,n?null:e)},this.onMouseMove=function(e){t.fireEvents("onMouseMove",e),t.setPoint(e)},this.onMouseLeave=function(e){t.fireEvents("onMouseLeave",e),t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)},this.onPopupMouseEnter=function(){t.clearDelayTimer()},this.onPopupMouseLeave=function(e){e.relatedTarget&&!e.relatedTarget.setTimeout&&t._component&&t._component.getPopupDomNode&&RP(t._component.getPopupDomNode(),e.relatedTarget)||t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)},this.onFocus=function(e){t.fireEvents("onFocus",e),t.clearDelayTimer(),t.isFocusToShow()&&(t.focusTime=Date.now(),t.delaySetPopupVisible(!0,t.props.focusDelay))},this.onMouseDown=function(e){t.fireEvents("onMouseDown",e),t.preClickTime=Date.now()},this.onTouchStart=function(e){t.fireEvents("onTouchStart",e),t.preTouchTime=Date.now()},this.onBlur=function(e){t.fireEvents("onBlur",e),t.clearDelayTimer(),t.isBlurToHide()&&t.delaySetPopupVisible(!1,t.props.blurDelay)},this.onContextMenu=function(e){e.preventDefault(),t.fireEvents("onContextMenu",e),t.setPopupVisible(!0,e)},this.onContextMenuClose=function(){t.isContextMenuToShow()&&t.close()},this.onClick=function(e){if(t.fireEvents("onClick",e),t.focusTime){var n=void 0;if(t.preClickTime&&t.preTouchTime?n=Math.min(t.preClickTime,t.preTouchTime):t.preClickTime?n=t.preClickTime:t.preTouchTime&&(n=t.preTouchTime),Math.abs(n-t.focusTime)<20)return;t.focusTime=0}t.preClickTime=0,t.preTouchTime=0,t.isClickToShow()&&(t.isClickToHide()||t.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var r=!t.state.popupVisible;(t.isClickToHide()&&!r||r&&t.isClickToShow())&&t.setPopupVisible(!t.state.popupVisible,e)},this.onPopupMouseDown=function(){var e=t.context.rcTrigger,n=void 0===e?{}:e;t.hasPopupMouseDown=!0,clearTimeout(t.mouseDownTimeout),t.mouseDownTimeout=setTimeout((function(){t.hasPopupMouseDown=!1}),0),n.onPopupMouseDown&&n.onPopupMouseDown.apply(n,arguments)},this.onDocumentClick=function(e){if(!t.props.mask||t.props.maskClosable){var n=e.target;RP((0,lt.findDOMNode)(t),n)||t.hasPopupMouseDown||t.close()}},this.getRootDomNode=function(){return(0,lt.findDOMNode)(t)},this.getPopupClassNameFromAlign=function(e){var n=[],r=t.props,o=r.popupPlacement,i=r.builtinPlacements,a=r.prefixCls,u=r.alignPoint,s=r.getPopupClassNameFromAlign;return o&&i&&n.push(function(e,t,n,r){var o=n.points;for(var i in e)if(e.hasOwnProperty(i)&&YP(e[i].points,o,r))return t+"-placement-"+i;return""}(i,a,e,u)),s&&n.push(s(e)),n.join(" ")},this.getComponent=function(){var n=t.props,r=n.prefixCls,o=n.destroyPopupOnHide,i=n.popupClassName,a=n.action,u=n.onPopupAlign,s=n.popupAnimation,c=n.popupTransitionName,l=n.popupStyle,f=n.mask,d=n.maskAnimation,p=n.maskTransitionName,h=n.zIndex,v=n.popup,m=n.stretch,g=n.alignPoint,y=t.state,b=y.popupVisible,x=y.point,w=t.getPopupAlign(),E={};return t.isMouseEnterToShow()&&(E.onMouseEnter=t.onPopupMouseEnter),t.isMouseLeaveToHide()&&(E.onMouseLeave=t.onPopupMouseLeave),E.onMouseDown=t.onPopupMouseDown,E.onTouchStart=t.onPopupMouseDown,e.createElement(qD,(0,xP.Z)({prefixCls:r,destroyPopupOnHide:o,visible:b,point:g&&x,className:i,action:a,align:w,onAlign:u,animation:s,getClassNameFromAlign:t.getPopupClassNameFromAlign},E,{stretch:m,getRootDomNode:t.getRootDomNode,style:l,mask:f,zIndex:h,transitionName:c,maskAnimation:d,maskTransitionName:p,ref:t.savePopup}),"function"===typeof v?v():v)},this.getContainer=function(){var e=t.props,n=document.createElement("div");return n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.width="100%",(e.getPopupContainer?e.getPopupContainer((0,lt.findDOMNode)(t)):e.getDocument().body).appendChild(n),n},this.setPoint=function(e){t.props.alignPoint&&e&&t.setState({point:{pageX:e.pageX,pageY:e.pageY}})},this.handlePortalUpdate=function(){t.state.prevPopupVisible!==t.state.popupVisible&&t.props.afterPopupVisibleChange(t.state.popupVisible)},this.savePopup=function(e){t._component=e}};!function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,r=null,o=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?r="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?o="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(o="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==o){var i=e.displayName||e.name,a="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+i+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==o?"\n  "+o:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=OP,t.componentWillReceiveProps=TP),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=AP;var u=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;u.call(this,e,t,r)}}}(QD);var JD=QD,eM={adjustX:1,adjustY:1},tM=[0,0],nM={left:{points:["cr","cl"],overflow:eM,offset:[-4,0],targetOffset:tM},right:{points:["cl","cr"],overflow:eM,offset:[4,0],targetOffset:tM},top:{points:["bc","tc"],overflow:eM,offset:[0,-4],targetOffset:tM},bottom:{points:["tc","bc"],overflow:eM,offset:[0,4],targetOffset:tM},topLeft:{points:["bl","tl"],overflow:eM,offset:[0,-4],targetOffset:tM},leftTop:{points:["tr","tl"],overflow:eM,offset:[-4,0],targetOffset:tM},topRight:{points:["br","tr"],overflow:eM,offset:[0,-4],targetOffset:tM},rightTop:{points:["tl","tr"],overflow:eM,offset:[4,0],targetOffset:tM},bottomRight:{points:["tr","br"],overflow:eM,offset:[0,4],targetOffset:tM},rightBottom:{points:["bl","br"],overflow:eM,offset:[4,0],targetOffset:tM},bottomLeft:{points:["tl","bl"],overflow:eM,offset:[0,4],targetOffset:tM},leftBottom:{points:["br","bl"],overflow:eM,offset:[-4,0],targetOffset:tM}},rM=function(t){function n(){return(0,EP.Z)(this,n),(0,CP.Z)(this,t.apply(this,arguments))}return(0,_P.Z)(n,t),n.prototype.componentDidUpdate=function(){var e=this.props.trigger;e&&e.forcePopupAlign()},n.prototype.render=function(){var t=this.props,n=t.overlay,r=t.prefixCls,o=t.id;return e.createElement("div",{className:r+"-inner",id:o,role:"tooltip"},"function"===typeof n?n():n)},n}(e.Component);rM.propTypes={prefixCls:SP().string,overlay:SP().oneOfType([SP().node,SP().func]).isRequired,id:SP().string,trigger:SP().any};var oM=rM,iM=function(t){function n(){var r,o,i;(0,EP.Z)(this,n);for(var a=arguments.length,u=Array(a),s=0;s<a;s++)u[s]=arguments[s];return r=o=(0,CP.Z)(this,t.call.apply(t,[this].concat(u))),o.getPopupElement=function(){var t=o.props,n=t.arrowContent,r=t.overlay,i=t.prefixCls,a=t.id;return[e.createElement("div",{className:i+"-arrow",key:"arrow"},n),e.createElement(oM,{key:"content",trigger:o.trigger,prefixCls:i,id:a,overlay:r})]},o.saveTrigger=function(e){o.trigger=e},i=r,(0,CP.Z)(o,i)}return(0,_P.Z)(n,t),n.prototype.getPopupDomNode=function(){return this.trigger.getPopupDomNode()},n.prototype.render=function(){var t=this.props,n=t.overlayClassName,r=t.trigger,o=t.mouseEnterDelay,i=t.mouseLeaveDelay,a=t.overlayStyle,u=t.prefixCls,s=t.children,c=t.onVisibleChange,l=t.afterVisibleChange,f=t.transitionName,d=t.animation,p=t.placement,h=t.align,v=t.destroyTooltipOnHide,m=t.defaultVisible,g=t.getTooltipContainer,y=(0,wP.Z)(t,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer"]),b=(0,xP.Z)({},y);return"visible"in this.props&&(b.popupVisible=this.props.visible),e.createElement(JD,(0,xP.Z)({popupClassName:n,ref:this.saveTrigger,prefixCls:u,popup:this.getPopupElement,action:r,builtinPlacements:nM,popupPlacement:p,popupAlign:h,getPopupContainer:g,onPopupVisibleChange:c,afterPopupVisibleChange:l,popupTransitionName:f,popupAnimation:d,defaultPopupVisible:m,destroyPopupOnHide:v,mouseLeaveDelay:i,popupStyle:a,mouseEnterDelay:o},b),s)},n}(e.Component);iM.propTypes={trigger:SP().any,children:SP().any,defaultVisible:SP().bool,visible:SP().bool,placement:SP().string,transitionName:SP().oneOfType([SP().string,SP().object]),animation:SP().any,onVisibleChange:SP().func,afterVisibleChange:SP().func,overlay:SP().oneOfType([SP().node,SP().func]).isRequired,overlayStyle:SP().object,overlayClassName:SP().string,prefixCls:SP().string,mouseEnterDelay:SP().number,mouseLeaveDelay:SP().number,getTooltipContainer:SP().func,destroyTooltipOnHide:SP().bool,align:SP().object,arrowContent:SP().any,id:SP().string},iM.defaultProps={prefixCls:"rc-tooltip",mouseEnterDelay:0,destroyTooltipOnHide:!1,mouseLeaveDelay:.1,align:{},placement:"right",trigger:["hover"],arrowContent:null};var aM=iM,uM=function(t){var n=t.children,r=t.content,o=t.className,i=t.open,a=ZA(t,["children","content","className","open"]),u=hR(),s=QA(QA({},u.tooltip),a),c=s.showArrow,l=void 0!==c&&c,f=s.enterDelay,d=void 0===f?0:f,p=s.leaveDelay,h=void 0===p?0:p,v=s.align,m=void 0===v?"top":v,g=s.activateOn,y=void 0===g?["hover","focus"]:g;return e.createElement(aM,QA({},void 0!==i?{visible:i}:{},{trigger:Array.isArray(y)?y:[y],prefixCls:"rmwc-tooltip",placement:m,transitionName:"rmwc-tooltip-zoom",mouseEnterDelay:d/1e3,mouseLeaveDelay:h/1e3,overlay:r,overlayClassName:Ct()(o,{"rmwc-tooltip--show-arrow":l}),destroyTooltipOnHide:!0}),n)};n(9111);var sM=function(){return sM=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sM.apply(this,arguments)};function cM(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}var lM=GR({surface:!1})(sR((function(t,n){t.selected,t.activated,t.disabled;var r=cM(t,["selected","activated","disabled"]),o=iR(t,["mdc-list-item",{"mdc-list-item--selected":t.selected,"mdc-list-item--activated":t.activated,"mdc-list-item--disabled":t.disabled}]);return e.createElement(oR,sM({tag:"li",tabIndex:0},r,{className:o,ref:n}),e.createElement(HR,{className:"mdc-list-item__ripple"}),r.children)}))),fM=sR((function(t,n){var r=iR(t,["mdc-list-item__text"]);return e.createElement(oR,sM({tag:"span"},t,{ref:n,className:r}))})),dM=sR((function(t,n){var r=iR(t,["mdc-list-item__primary-text"]);return e.createElement(oR,sM({tag:"span"},t,{ref:n,className:r}))})),pM=sR((function(t,n){var r=iR(t,["mdc-list-item__secondary-text"]);return e.createElement(oR,sM({tag:"span"},t,{ref:n,className:r}))})),hM=sR((function(t,n){var r=iR(t,["mdc-list-item__graphic"]);return e.createElement(bR,sM({},t,{"aria-hidden":"true",ref:n,className:r}))})),vM=sR((function(t,n){var r=iR(t,["mdc-list-item__meta"]);if(t.icon)return e.createElement(bR,sM({},t,{"aria-hidden":"true",ref:n,className:r}));if(e.isValidElement(t.children)){t.children;var o=cM(t,["children"]);return e.cloneElement(t.children,sM(sM(sM({},o),t.children.props),{className:Ct()(r,t.children.props.className)}))}return e.createElement(oR,sM({},t,{ref:n,className:r}))})),mM=(sR((function(t,n){var r=iR(t,["mdc-list-group"]);return e.createElement(oR,sM({},t,{ref:n,className:r}))})),sR((function(t,n){var r=iR(t,["mdc-list-group__subheader"]);return e.createElement(oR,sM({},t,{ref:n,className:r}))})),sR((function(t,n){var r=iR(t,["mdc-list-divider"]);return e.createElement(oR,sM({tag:"li",role:"separator"},t,{ref:n,className:r}))})));sR((function(t,n){var r=t.text,o=t.secondaryText,i=t.graphic,a=t.metaIcon,u=t.meta,s=t.children,c=cM(t,["text","secondaryText","graphic","metaIcon","meta","children"]),l=r&&void 0!==o?e.createElement(dM,null,r):r,f=void 0!==o?e.createElement(pM,null,o):null;return e.createElement(lM,sM({},c,{ref:n}),e.createElement(HR,{className:"mdc-list-item__ripple"}),void 0!==i&&e.createElement(hM,{icon:i}),null!==f?e.createElement(fM,null,l,f):l,(!!u||!!a)&&e.createElement(vM,{icon:a},u),s)})),n(1093);var gM=function(t){var n=function(t){var n=(0,e.useState)((function(){return Fa("function"==typeof t?t():t,!0)})),r=n[1];return[n[0],(0,e.useCallback)((function(e){r("function"==typeof e?wu(e):Fa(e))}),[])]}(t.pomoConfigs),r=s(n,2),o=r[0],i=r[1];return(0,YC.jsx)(YC.Fragment,{children:(0,YC.jsxs)(UN,{open:t.open,onClose:function(e){"confirm"===e.target.action&&t.setPomoConfigs(o),t.onClose()},renderToPortal:!0,children:[(0,YC.jsx)(GN,{children:"Configuration"}),(0,YC.jsx)(qN,{children:(0,YC.jsxs)(YI,{children:[(0,YC.jsx)(QI,{span:12,children:(0,YC.jsxs)(ZI,{children:[(0,YC.jsx)(QI,{span:12,children:(0,YC.jsx)(bP,{use:"subtitle2",children:"Pomodoro Config"})}),(0,YC.jsx)(QI,{span:4,children:(0,YC.jsx)(UI,{required:!0,label:"Focus Time",type:"number",suffix:"minutes",pattern:"[0-9]*",defaultValue:t.pomoConfigs.alertStudySeconds/60,onChange:function(e){e.target.validity.valid&&i((function(t){t.alertStudySeconds=60*parseInt(e.target.value)}))}})}),(0,YC.jsx)(QI,{span:4,children:(0,YC.jsx)(UI,{required:!0,label:"Rest Time",type:"number",suffix:"minutes",pattern:"[0-9]*",defaultValue:t.pomoConfigs.alertRestSeconds/60,onChange:function(e){e.target.validity.valid&&i((function(t){t.alertRestSeconds=60*parseInt(e.target.value)}))}})}),(0,YC.jsx)(QI,{span:4,children:(0,YC.jsx)(uM,{content:"If the rest time or focus time is less than this, it will not be counted as a separted time slot.",children:(0,YC.jsx)(UI,{required:!0,label:"Max allowed missing time",type:"number",suffix:"seconds",pattern:"[0-9]*",defaultValue:t.pomoConfigs.tempMissingSeconds,onChange:function(e){e.target.validity.valid&&i((function(t){t.tempMissingSeconds=parseInt(e.target.value)}))}})})})]})}),(0,YC.jsx)(QI,{span:12,children:(0,YC.jsx)(mM,{})}),(0,YC.jsx)(QI,{span:12,children:(0,YC.jsxs)(ZI,{children:[(0,YC.jsx)(QI,{span:12,children:(0,YC.jsx)(bP,{use:"subtitle2",children:"Face Recognition Config"})}),(0,YC.jsx)(QI,{children:(0,YC.jsx)(uM,{content:"Every n seconds we detect user face, shorter interval might increase CPU usage, longer interval might make pomodoro less sensitive.",children:(0,YC.jsx)(UI,{required:!0,label:"Face Detection Interval",type:"number",pattern:"[0-9]*",suffix:"seconds",defaultValue:t.pomoConfigs.faceRecognition.detectionInterval,onChange:function(e){if(e.target.validity.valid){var t=parseInt(e.target.value);t<2||i((function(e){e.faceRecognition.detectionInterval=t}))}}})})}),(0,YC.jsx)(QI,{children:(0,YC.jsx)(hP,{defaultChecked:t.pomoConfigs.enableDetection,onChange:function(e){i((function(t){t.enableDetection=e.target.checked}))},label:"Enable Face Detection"})}),(0,YC.jsx)(QI,{children:(0,YC.jsx)(hP,{defaultChecked:t.pomoConfigs.faceRecognition.showFaceRecognitionStatus,onChange:function(e){i((function(t){t.faceRecognition.showFaceRecognitionStatus=e.target.checked}))},label:"Show Face Recognition Status"})}),(0,YC.jsx)(QI,{children:(0,YC.jsx)(hP,{defaultChecked:t.pomoConfigs.cameraHidden,onChange:function(e){i((function(t){t.cameraHidden=e.target.checked}))},label:"Hide Live Camera Preview"})})]})}),(0,YC.jsx)(QI,{span:12,children:(0,YC.jsx)(mM,{})}),(0,YC.jsx)(QI,{span:12,children:(0,YC.jsxs)(ZI,{children:[(0,YC.jsx)(QI,{span:12,children:(0,YC.jsx)(bP,{use:"subtitle2",children:"Notification Config"})}),(0,YC.jsx)(QI,{children:(0,YC.jsx)(UI,{required:!0,label:"Notification Interval Time",type:"number",suffix:"seconds",pattern:"[0-9]*",defaultValue:t.pomoConfigs.notificationIntervalSeconds,onChange:function(e){e.target.validity.valid&&i((function(t){t.notificationIntervalSeconds=parseInt(e.target.value)}))}})}),(0,YC.jsx)(QI,{children:(0,YC.jsx)(uM,{content:"Everytime a notification is send, its wait time will multiply previous interval, so that the sending interval is longer and longer. If you don't want this behavior, change it to 1.",children:(0,YC.jsx)(UI,{required:!0,label:"Notification Interval Multiplier",suffix:"times",pattern:"[0-9\\.]*",defaultValue:t.pomoConfigs.notificationIntervalMultiplier,onChange:function(e){if(console.log(e),e.target.validity.valid){var t=parseFloat(e.target.value);t<1?e.target.setCustomValidity("Multiplier cannot be less than 1"):i((function(e){e.notificationIntervalMultiplier=t}))}}})})})]})}),(0,YC.jsx)(QI,{span:12,children:(0,YC.jsx)(mM,{})}),(0,YC.jsx)(QI,{span:12,children:(0,YC.jsxs)(ZI,{children:[(0,YC.jsx)(QI,{span:12,children:(0,YC.jsx)(bP,{use:"subtitle2",children:"Pomodoro History Config"})}),(0,YC.jsx)(QI,{children:(0,YC.jsx)(uM,{content:"Increasing this might degrade performance.",children:(0,YC.jsx)(UI,{required:!0,label:"Max pomodoro history entries kepted",type:"number",resizeable:!0,pattern:"[0-9]*",suffix:"entries",defaultValue:t.pomoConfigs.maxLocalStorageTimeSlot,onChange:function(e){e.target.validity.valid&&i((function(t){t.maxLocalStorageTimeSlot=parseInt(e.target.value)}))}})})})]})})]})}),(0,YC.jsxs)(KN,{children:[(0,YC.jsx)($N,{action:"close",children:"Cancel"}),(0,YC.jsx)($N,{action:"confirm",isDefaultAction:!0,children:"Confirm"})]})]})})};var yM=function(){return yM=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},yM.apply(this,arguments)};function bM(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}var xM=sR((function(t,n){var r=t.outlined,o=bM(t,["outlined"]),i=iR(t,["mdc-card",{"mdc-card--outlined":r}]);return e.createElement(oR,yM({},o,{ref:n,className:i}))})),wM=(sR((function(t,n){var r=t.square,o=t.sixteenByNine,i=bM(t,["square","sixteenByNine"]),a=iR(t,["mdc-card__media",{"mdc-card__media--square":r,"mdc-card__media--16-9":o}]);return e.createElement(oR,yM({tag:"section"},i,{ref:n,className:a}))})),sR((function(t,n){var r=iR(t,["mdc-card__media-content"]);return e.createElement(oR,yM({},t,{ref:n,className:r}))})),GR({surface:!1})(sR((function(t,n){var r=iR(t,["mdc-card__primary-action"]);return e.createElement(oR,yM({},t,{ref:n,className:r}))}))));sR((function(t,n){var r=t.fullBleed,o=bM(t,["fullBleed"]),i=iR(t,["mdc-card__actions",{"mdc-card__actions--full-bleed":r}]);return e.createElement(oR,yM({tag:"section"},o,{ref:n,className:i}))})),sR((function(t,n){var r=iR(t,["mdc-card__action-buttons"]);return e.createElement(oR,yM({},t,{ref:n,className:r}))})),sR((function(t,n){var r=iR(t,["mdc-card__action-icons"]);return e.createElement(oR,yM({},t,{ref:n,className:r}))})),sR((function(t,n){var r=iR(t,["mdc-card__action","mdc-card__action--icon"]);return e.createElement(YR,yM({},t,{ref:n,className:r}))})),sR((function(t,n){var r=iR(t,["mdc-card__action","mdc-card__action--button"]);return e.createElement(jN,yM({},t,{ref:n,className:r}))})),n(8249);var EM,CM=function(e){return(0,YC.jsx)(YC.Fragment,{children:(0,YC.jsxs)(UN,{open:e.open,onClose:function(t){e.onClose()},renderToPortal:!0,children:[(0,YC.jsx)(GN,{children:"Intro to Face Recognition Pomodoro"}),(0,YC.jsxs)(qN,{children:[(0,YC.jsx)("div",{style:{padding:"10px"}}),(0,YC.jsx)(xM,{children:(0,YC.jsx)(wM,{children:(0,YC.jsxs)("div",{style:{padding:"0 1rem 1rem 1rem"},children:[(0,YC.jsx)(bP,{use:"headline6",tag:"h2",children:"What is this?"}),(0,YC.jsx)(bP,{use:"body1",tag:"div",theme:"textSecondaryOnBackground",children:"This is a Pomodoro clock. Unlike other Pomodoro Clock, it can automatically help you start focus session when the camera detected your face. When the camera no longer detect your face, it starts a rest session."})]})})}),(0,YC.jsx)("div",{style:{padding:"10px"}}),(0,YC.jsx)(xM,{children:(0,YC.jsx)(wM,{children:(0,YC.jsxs)("div",{style:{padding:"0 1rem 1rem 1rem"},children:[(0,YC.jsx)(bP,{use:"headline6",tag:"h2",children:"What if I left my seat but don't want to stop the Pomodoro session?"}),(0,YC.jsx)(bP,{use:"body1",tag:"div",theme:"textSecondaryOnBackground",children:'If the time of stepping away is less than "Max allowed missing time" in the settings, it will continue the session when you are back.'})]})})}),(0,YC.jsx)("div",{style:{padding:"10px"}}),(0,YC.jsx)(xM,{children:(0,YC.jsx)(wM,{children:(0,YC.jsxs)("div",{style:{padding:"0 1rem 1rem 1rem"},children:[(0,YC.jsx)(bP,{use:"headline6",tag:"h2",children:"Why this intro always popup on start?"}),(0,YC.jsx)(bP,{use:"body1",tag:"div",theme:"textSecondaryOnBackground",children:"There must be at least one user interaction to make notification works, so I take this opportunity to intro the tool."})]})})})]}),(0,YC.jsx)(KN,{children:(0,YC.jsx)($N,{action:"confirm",isDefaultAction:!0,children:"Ok, let's continue."})})]})})};var _M=function(){var t=s(We("pomoConfig",{defaultValue:$C}),2),n=t[0],o=t[1],i=s((0,e.useState)(!1),2),a=i[0],u=i[1],c=s((0,e.useState)(!0),2),l=c[0],f=c[1];return(0,YC.jsx)(YC.Fragment,{children:(0,YC.jsxs)(kN,{options:{primary:"#bf360c",secondary:"#616161"},children:[(0,YC.jsx)(ON,{}),(0,YC.jsx)(cN,{style:{zIndex:10},children:(0,YC.jsxs)(fN,{children:[(0,YC.jsx)(dN,{alignStart:!0,children:(0,YC.jsx)(hN,{icon:"help",onClick:function(){return f(!0)}})}),(0,YC.jsx)(dN,{className:Pe(EM||(EM=r(["justify-content: center"]))),children:(0,YC.jsx)(vN,{children:"Face Recognition Pomodoro"})}),(0,YC.jsx)(dN,{alignEnd:!0,children:(0,YC.jsx)(hN,{icon:"settings",onClick:function(){return u(!0)}})})]})}),(0,YC.jsx)(mN,{}),(0,YC.jsx)(CM,{open:l,onClose:function(){return f(!1)}}),(0,YC.jsx)(gM,{open:a,onClose:function(){return u(!1)},pomoConfigs:n,setPomoConfigs:o}),(0,YC.jsx)(XC.Provider,{value:n,children:(0,YC.jsx)(qA,{})})]})})};var kM=function(){return(0,YC.jsx)("div",{children:(0,YC.jsx)(_M,{})})};t.createRoot(document.getElementById("root")).render((0,YC.jsx)(kM,{}))}()}();